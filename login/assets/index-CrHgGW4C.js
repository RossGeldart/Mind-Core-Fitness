const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-C1mj4i1c.js","assets/scheduleUtils-a2tn0x12.js","assets/Dashboard-BvdLF0uv.css","assets/AddClient-D-CL5VLq.js","assets/AddClient-DH1OFzHo.css","assets/ClientDashboard-CGimOQni.js","assets/ClientDashboard-BI8UXFpK.css","assets/ClientForms-BMKzOVcE.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-C9oewgyx.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-BOem-L1c.js","assets/ProteinSnacks-DB4GlOYl.js","assets/DailyMotivation-BcBLhJVs.js","assets/CircuitDashboard-CyH_XdtY.js","assets/CircuitDashboard-C8T0uect.css","assets/CircuitBooking-Wimp-iuc.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/PersonalBests-CD3Y4m3N.js","assets/PersonalBests-BkG3fixu.css","assets/Leaderboard-DAIyspTF.js","assets/Leaderboard-Dq-r5svP.css","assets/UpgradePage-BrrEbwmk.js","assets/stripe-Da7IPrZW.js","assets/UpgradePage-Chom0F_j.css","assets/Onboarding-D-cVjGkc.js","assets/Onboarding-DvZF-mkH.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=t(l);fetch(l.href,u)}})();var kp={exports:{}},Hc={};var Bb;function kj(){if(Bb)return Hc;Bb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:d,ref:l!==void 0?l:null,props:u}}return Hc.Fragment=e,Hc.jsx=t,Hc.jsxs=t,Hc}var zb;function Ej(){return zb||(zb=1,kp.exports=kj()),kp.exports}var a=Ej(),Ep={exports:{}},At={};var Fb;function Tj(){if(Fb)return At;Fb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),E=Symbol.iterator;function O(L){return L===null||typeof L!="object"?null:(L=E&&L[E]||L["@@iterator"],typeof L=="function"?L:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,B={};function $(L,re,ve){this.props=L,this.context=re,this.refs=B,this.updater=ve||W}$.prototype.isReactComponent={},$.prototype.setState=function(L,re){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,re,"setState")},$.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function H(){}H.prototype=$.prototype;function K(L,re,ve){this.props=L,this.context=re,this.refs=B,this.updater=ve||W}var ue=K.prototype=new H;ue.constructor=K,F(ue,$.prototype),ue.isPureReactComponent=!0;var Ee=Array.isArray;function we(){}var C={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function R(L,re,ve){var _e=ve.ref;return{$$typeof:s,type:L,key:re,ref:_e!==void 0?_e:null,props:ve}}function P(L,re){return R(L.type,re,L.props)}function M(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function D(L){var re={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ve){return re[ve]})}var A=/\/+/g;function Ue(L,re){return typeof L=="object"&&L!==null&&L.key!=null?D(""+L.key):re.toString(36)}function Xe(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(we,we):(L.status="pending",L.then(function(re){L.status==="pending"&&(L.status="fulfilled",L.value=re)},function(re){L.status==="pending"&&(L.status="rejected",L.reason=re)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Z(L,re,ve,_e,be){var ke=typeof L;(ke==="undefined"||ke==="boolean")&&(L=null);var Be=!1;if(L===null)Be=!0;else switch(ke){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(L.$$typeof){case s:case e:Be=!0;break;case b:return Be=L._init,Z(Be(L._payload),re,ve,_e,be)}}if(Be)return be=be(L),Be=_e===""?"."+Ue(L,0):_e,Ee(be)?(ve="",Be!=null&&(ve=Be.replace(A,"$&/")+"/"),Z(be,re,ve,"",function(qt){return qt})):be!=null&&(M(be)&&(be=P(be,ve+(be.key==null||L&&L.key===be.key?"":(""+be.key).replace(A,"$&/")+"/")+Be)),re.push(be)),1;Be=0;var st=_e===""?".":_e+":";if(Ee(L))for(var Pe=0;Pe<L.length;Pe++)_e=L[Pe],ke=st+Ue(_e,Pe),Be+=Z(_e,re,ve,ke,be);else if(Pe=O(L),typeof Pe=="function")for(L=Pe.call(L),Pe=0;!(_e=L.next()).done;)_e=_e.value,ke=st+Ue(_e,Pe++),Be+=Z(_e,re,ve,ke,be);else if(ke==="object"){if(typeof L.then=="function")return Z(Xe(L),re,ve,_e,be);throw re=String(L),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Be}function je(L,re,ve){if(L==null)return L;var _e=[],be=0;return Z(L,_e,"","",function(ke){return re.call(ve,ke,be++)}),_e}function Me(L){if(L._status===-1){var re=L._result;re=re(),re.then(function(ve){(L._status===0||L._status===-1)&&(L._status=1,L._result=ve)},function(ve){(L._status===0||L._status===-1)&&(L._status=2,L._result=ve)}),L._status===-1&&(L._status=0,L._result=re)}if(L._status===1)return L._result.default;throw L._result}var Se=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Y={map:je,forEach:function(L,re,ve){je(L,function(){re.apply(this,arguments)},ve)},count:function(L){var re=0;return je(L,function(){re++}),re},toArray:function(L){return je(L,function(re){return re})||[]},only:function(L){if(!M(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return At.Activity=k,At.Children=Y,At.Component=$,At.Fragment=t,At.Profiler=l,At.PureComponent=K,At.StrictMode=i,At.Suspense=g,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,At.__COMPILER_RUNTIME={__proto__:null,c:function(L){return C.H.useMemoCache(L)}},At.cache=function(L){return function(){return L.apply(null,arguments)}},At.cacheSignal=function(){return null},At.cloneElement=function(L,re,ve){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var _e=F({},L.props),be=L.key;if(re!=null)for(ke in re.key!==void 0&&(be=""+re.key),re)!T.call(re,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&re.ref===void 0||(_e[ke]=re[ke]);var ke=arguments.length-2;if(ke===1)_e.children=ve;else if(1<ke){for(var Be=Array(ke),st=0;st<ke;st++)Be[st]=arguments[st+2];_e.children=Be}return R(L.type,be,_e)},At.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:u,_context:L},L},At.createElement=function(L,re,ve){var _e,be={},ke=null;if(re!=null)for(_e in re.key!==void 0&&(ke=""+re.key),re)T.call(re,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(be[_e]=re[_e]);var Be=arguments.length-2;if(Be===1)be.children=ve;else if(1<Be){for(var st=Array(Be),Pe=0;Pe<Be;Pe++)st[Pe]=arguments[Pe+2];be.children=st}if(L&&L.defaultProps)for(_e in Be=L.defaultProps,Be)be[_e]===void 0&&(be[_e]=Be[_e]);return R(L,ke,be)},At.createRef=function(){return{current:null}},At.forwardRef=function(L){return{$$typeof:p,render:L}},At.isValidElement=M,At.lazy=function(L){return{$$typeof:b,_payload:{_status:-1,_result:L},_init:Me}},At.memo=function(L,re){return{$$typeof:y,type:L,compare:re===void 0?null:re}},At.startTransition=function(L){var re=C.T,ve={};C.T=ve;try{var _e=L(),be=C.S;be!==null&&be(ve,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(we,Se)}catch(ke){Se(ke)}finally{re!==null&&ve.types!==null&&(re.types=ve.types),C.T=re}},At.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},At.use=function(L){return C.H.use(L)},At.useActionState=function(L,re,ve){return C.H.useActionState(L,re,ve)},At.useCallback=function(L,re){return C.H.useCallback(L,re)},At.useContext=function(L){return C.H.useContext(L)},At.useDebugValue=function(){},At.useDeferredValue=function(L,re){return C.H.useDeferredValue(L,re)},At.useEffect=function(L,re){return C.H.useEffect(L,re)},At.useEffectEvent=function(L){return C.H.useEffectEvent(L)},At.useId=function(){return C.H.useId()},At.useImperativeHandle=function(L,re,ve){return C.H.useImperativeHandle(L,re,ve)},At.useInsertionEffect=function(L,re){return C.H.useInsertionEffect(L,re)},At.useLayoutEffect=function(L,re){return C.H.useLayoutEffect(L,re)},At.useMemo=function(L,re){return C.H.useMemo(L,re)},At.useOptimistic=function(L,re){return C.H.useOptimistic(L,re)},At.useReducer=function(L,re,ve){return C.H.useReducer(L,re,ve)},At.useRef=function(L){return C.H.useRef(L)},At.useState=function(L){return C.H.useState(L)},At.useSyncExternalStore=function(L,re,ve){return C.H.useSyncExternalStore(L,re,ve)},At.useTransition=function(){return C.H.useTransition()},At.version="19.2.4",At}var qb;function Kg(){return qb||(qb=1,Ep.exports=Tj()),Ep.exports}var w=Kg(),Tp={exports:{}},Wc={},jp={exports:{}},Sp={};var Hb;function jj(){return Hb||(Hb=1,(function(s){function e(Z,je){var Me=Z.length;Z.push(je);e:for(;0<Me;){var Se=Me-1>>>1,Y=Z[Se];if(0<l(Y,je))Z[Se]=je,Z[Me]=Y,Me=Se;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var je=Z[0],Me=Z.pop();if(Me!==je){Z[0]=Me;e:for(var Se=0,Y=Z.length,L=Y>>>1;Se<L;){var re=2*(Se+1)-1,ve=Z[re],_e=re+1,be=Z[_e];if(0>l(ve,Me))_e<Y&&0>l(be,ve)?(Z[Se]=be,Z[_e]=Me,Se=_e):(Z[Se]=ve,Z[re]=Me,Se=re);else if(_e<Y&&0>l(be,Me))Z[Se]=be,Z[_e]=Me,Se=_e;else break e}}return je}function l(Z,je){var Me=Z.sortIndex-je.sortIndex;return Me!==0?Me:Z.id-je.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],b=1,k=null,E=3,O=!1,W=!1,F=!1,B=!1,$=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ue(Z){for(var je=t(y);je!==null;){if(je.callback===null)i(y);else if(je.startTime<=Z)i(y),je.sortIndex=je.expirationTime,e(g,je);else break;je=t(y)}}function Ee(Z){if(F=!1,ue(Z),!W)if(t(g)!==null)W=!0,we||(we=!0,D());else{var je=t(y);je!==null&&Xe(Ee,je.startTime-Z)}}var we=!1,C=-1,T=5,R=-1;function P(){return B?!0:!(s.unstable_now()-R<T)}function M(){if(B=!1,we){var Z=s.unstable_now();R=Z;var je=!0;try{e:{W=!1,F&&(F=!1,H(C),C=-1),O=!0;var Me=E;try{t:{for(ue(Z),k=t(g);k!==null&&!(k.expirationTime>Z&&P());){var Se=k.callback;if(typeof Se=="function"){k.callback=null,E=k.priorityLevel;var Y=Se(k.expirationTime<=Z);if(Z=s.unstable_now(),typeof Y=="function"){k.callback=Y,ue(Z),je=!0;break t}k===t(g)&&i(g),ue(Z)}else i(g);k=t(g)}if(k!==null)je=!0;else{var L=t(y);L!==null&&Xe(Ee,L.startTime-Z),je=!1}}break e}finally{k=null,E=Me,O=!1}je=void 0}}finally{je?D():we=!1}}}var D;if(typeof K=="function")D=function(){K(M)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Ue=A.port2;A.port1.onmessage=M,D=function(){Ue.postMessage(null)}}else D=function(){$(M,0)};function Xe(Z,je){C=$(function(){Z(s.unstable_now())},je)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function(Z){switch(E){case 1:case 2:case 3:var je=3;break;default:je=E}var Me=E;E=je;try{return Z()}finally{E=Me}},s.unstable_requestPaint=function(){B=!0},s.unstable_runWithPriority=function(Z,je){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var Me=E;E=Z;try{return je()}finally{E=Me}},s.unstable_scheduleCallback=function(Z,je,Me){var Se=s.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?Se+Me:Se):Me=Se,Z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Me+Y,Z={id:b++,callback:je,priorityLevel:Z,startTime:Me,expirationTime:Y,sortIndex:-1},Me>Se?(Z.sortIndex=Me,e(y,Z),t(g)===null&&Z===t(y)&&(F?(H(C),C=-1):F=!0,Xe(Ee,Me-Se))):(Z.sortIndex=Y,e(g,Z),W||O||(W=!0,we||(we=!0,D()))),Z},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(Z){var je=E;return function(){var Me=E;E=je;try{return Z.apply(this,arguments)}finally{E=Me}}}})(Sp)),Sp}var Wb;function Sj(){return Wb||(Wb=1,jp.exports=jj()),jp.exports}var Cp={exports:{}},Hs={};var $b;function Cj(){if($b)return Hs;$b=1;var s=Kg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,b){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:k==null?null:""+k,children:g,containerInfo:y,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Hs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Hs.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,b)},Hs.flushSync=function(g){var y=d.T,b=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=y,i.p=b,i.d.f()}},Hs.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Hs.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Hs.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,k=p(b,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:k,integrity:E,fetchPriority:O}):b==="script"&&i.d.X(g,{crossOrigin:k,integrity:E,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Hs.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Hs.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,k=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Hs.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Hs.requestFormReset=function(g){i.d.r(g)},Hs.unstable_batchedUpdates=function(g,y){return g(y)},Hs.useFormState=function(g,y,b){return d.H.useFormState(g,y,b)},Hs.useFormStatus=function(){return d.H.useHostTransitionStatus()},Hs.version="19.2.4",Hs}var Gb;function Nj(){if(Gb)return Cp.exports;Gb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Cp.exports=Cj(),Cp.exports}var Kb;function Aj(){if(Kb)return Wc;Kb=1;var s=Sj(),e=Kg(),t=Nj();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function d(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(i(188))}function y(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),n;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var x=!1,j=f.child;j;){if(j===o){x=!0,o=f,c=m;break}if(j===c){x=!0,c=f,o=m;break}j=j.sibling}if(!x){for(j=m.child;j;){if(j===o){x=!0,o=m,c=f;break}if(j===c){x=!0,c=m,o=f;break}j=j.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function b(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=b(n),r!==null)return r;n=n.sibling}return null}var k=Object.assign,E=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function D(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var A=Symbol.for("react.client.reference");function Ue(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===A?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case $:return"Profiler";case B:return"StrictMode";case Ee:return"Suspense";case we:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case W:return"Portal";case K:return n.displayName||"Context";case H:return(n._context.displayName||"Context")+".Consumer";case ue:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return r=n.displayName||null,r!==null?r:Ue(n.type)||"Memo";case T:r=n._payload,n=n._init;try{return Ue(n(r))}catch{}}return null}var Xe=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,je=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me={pending:!1,data:null,method:null,action:null},Se=[],Y=-1;function L(n){return{current:n}}function re(n){0>Y||(n.current=Se[Y],Se[Y]=null,Y--)}function ve(n,r){Y++,Se[Y]=n.current,n.current=r}var _e=L(null),be=L(null),ke=L(null),Be=L(null);function st(n,r){switch(ve(ke,r),ve(be,n),ve(_e,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?cb(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=cb(r),n=ub(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}re(_e),ve(_e,n)}function Pe(){re(_e),re(be),re(ke)}function qt(n){n.memoizedState!==null&&ve(Be,n);var r=_e.current,o=ub(r,n.type);r!==o&&(ve(be,n),ve(_e,o))}function un(n){be.current===n&&(re(_e),re(be)),Be.current===n&&(re(Be),Bc._currentValue=Me)}var Un,Ot;function it(n){if(Un===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Un=r&&r[1]||"",Ot=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Un+n+Ot}var vt=!1;function ut(n,r){if(!n||vt)return"";vt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(he){var ie=he}Reflect.construct(n,[],xe)}else{try{xe.call()}catch(he){ie=he}n.call(xe.prototype)}}else{try{throw Error()}catch(he){ie=he}(xe=n())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(he){if(he&&ie&&typeof he.stack=="string")return[he.stack,ie.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],j=m[1];if(x&&j){var U=x.split(`
`),ne=j.split(`
`);for(f=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;if(c===U.length||f===ne.length)for(c=U.length-1,f=ne.length-1;1<=c&&0<=f&&U[c]!==ne[f];)f--;for(;1<=c&&0<=f;c--,f--)if(U[c]!==ne[f]){if(c!==1||f!==1)do if(c--,f--,0>f||U[c]!==ne[f]){var fe=`
`+U[c].replace(" at new "," at ");return n.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",n.displayName)),fe}while(1<=c&&0<=f);break}}}finally{vt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?it(o):""}function Bn(n,r){switch(n.tag){case 26:case 27:case 5:return it(n.type);case 16:return it("Lazy");case 13:return n.child!==r&&r!==null?it("Suspense Fallback"):it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ut(n.type,!1);case 11:return ut(n.type.render,!1);case 1:return ut(n.type,!0);case 31:return it("Activity");default:return""}}function de(n){try{var r="",o=null;do r+=Bn(n,o),o=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Mt=Object.prototype.hasOwnProperty,bt=s.unstable_scheduleCallback,Bt=s.unstable_cancelCallback,et=s.unstable_shouldYield,It=s.unstable_requestPaint,wt=s.unstable_now,an=s.unstable_getCurrentPriorityLevel,Ns=s.unstable_ImmediatePriority,rs=s.unstable_UserBlockingPriority,en=s.unstable_NormalPriority,se=s.unstable_LowPriority,Ne=s.unstable_IdlePriority,pt=s.log,xt=s.unstable_setDisableYieldValue,at=null,$e=null;function rt(n){if(typeof pt=="function"&&xt(n),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(at,n)}catch{}}var qe=Math.clz32?Math.clz32:Ln,on=Math.log,dn=Math.LN2;function Ln(n){return n>>>=0,n===0?32:31-(on(n)/dn|0)|0}var zn=256,Xn=262144,Xt=4194304;function Fn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function An(n,r,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var j=c&134217727;return j!==0?(c=j&~m,c!==0?f=Fn(c):(x&=j,x!==0?f=Fn(x):o||(o=j&~n,o!==0&&(f=Fn(o))))):(j=c&~m,j!==0?f=Fn(j):x!==0?f=Fn(x):o||(o=c&~n,o!==0&&(f=Fn(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function hn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function yr(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oe(){var n=Xt;return Xt<<=1,(Xt&62914560)===0&&(Xt=4194304),n}function Re(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Ye(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function gt(n,r,o,c,f,m){var x=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var j=n.entanglements,U=n.expirationTimes,ne=n.hiddenUpdates;for(o=x&~o;0<o;){var fe=31-qe(o),xe=1<<fe;j[fe]=0,U[fe]=-1;var ie=ne[fe];if(ie!==null)for(ne[fe]=null,fe=0;fe<ie.length;fe++){var he=ie[fe];he!==null&&(he.lane&=-536870913)}o&=~xe}c!==0&&ct(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(x&~r))}function ct(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-qe(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function _n(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-qe(o),f=1<<c;f&r|n[c]&r&&(n[c]|=r),o&=~f}}function Rn(n,r){var o=r&-r;return o=(o&42)!==0?1:gn(o),(o&(n.suspendedLanes|r))!==0?0:o}function gn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function kn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function As(){var n=je.p;return n!==0?n:(n=window.event,n===void 0?32:Mb(n.type))}function is(n,r){var o=je.p;try{return je.p=n,r()}finally{je.p=o}}var hs=Math.random().toString(36).slice(2),tn="__reactFiber$"+hs,In="__reactProps$"+hs,Rs="__reactContainer$"+hs,Ir="__reactEvents$"+hs,fi="__reactListeners$"+hs,Mr="__reactHandles$"+hs,Dr="__reactResources$"+hs,qn="__reactMarker$"+hs;function Js(n){delete n[tn],delete n[In],delete n[Ir],delete n[fi],delete n[Mr]}function _s(n){var r=n[tn];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Rs]||o[tn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=yb(n);n!==null;){if(o=n[tn])return o;n=yb(n)}return r}n=o,o=n.parentNode}return null}function Cn(n){if(n=n[tn]||n[Rs]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function On(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function as(n){var r=n[Dr];return r||(r=n[Dr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ht(n){n[qn]=!0}var Zr=new Set,Lr={};function ks(n,r){bn(n,r),bn(n+"Capture",r)}function bn(n,r){for(Lr[n]=r,n=0;n<r.length;n++)Zr.add(r[n])}var or=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mi={},I={};function z(n){return Mt.call(I,n)?!0:Mt.call(mi,n)?!1:or.test(n)?I[n]=!0:(mi[n]=!0,!1)}function ae(n,r,o){if(z(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function le(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Le(n,r,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+c)}}function Oe(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function We(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Wt(n,r,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(x){o=""+x,m.call(this,x)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Qe(n){if(!n._valueTracker){var r=We(n)?"checked":"value";n._valueTracker=Wt(n,r,""+n[r])}}function Kn(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=We(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function os(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Bs=/[\n"\\]/g;function Yn(n){return n.replace(Bs,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function vr(n,r,o,c,f,m,x,j){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),r!=null?x==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Oe(r)):n.value!==""+Oe(r)&&(n.value=""+Oe(r)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),r!=null?Di(n,x,Oe(r)):o!=null?Di(n,x,Oe(o)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.name=""+Oe(j):n.removeAttribute("name")}function ma(n,r,o,c,f,m,x,j){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Qe(n);return}o=o!=null?""+Oe(o):"",r=r!=null?""+Oe(r):o,j||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=j?n.checked:!!c,n.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x),Qe(n)}function Di(n,r,o){r==="number"&&os(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Or(n,r,o,c){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Oe(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function pa(n,r,o){if(r!=null&&(r=""+Oe(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+Oe(o):""}function Pr(n,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(Xe(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Oe(r),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Qe(n)}function S(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Q=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ce(n,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,o):typeof o!="number"||o===0||Q.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Ie(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&Ce(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Ce(n,m,r[m])}function ze(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jt(n){return tt.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ht(){}var V=null;function J(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var te=null,pe=null;function Ae(n){var r=Cn(n);if(r&&(n=r.stateNode)){var o=n[In]||null;e:switch(n=r.stateNode,r.type){case"input":if(vr(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Yn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var f=c[In]||null;if(!f)throw Error(i(90));vr(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===n.form&&Kn(c)}break e;case"textarea":pa(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Or(n,!!o.multiple,r,!1)}}}var Ve=!1;function He(n,r,o){if(Ve)return n(r,o);Ve=!0;try{var c=n(r);return c}finally{if(Ve=!1,(te!==null||pe!==null)&&(Ld(),te&&(r=te,n=pe,pe=te=null,Ae(r),n)))for(r=0;r<n.length;r++)Ae(n[r])}}function yt(n,r){var o=n.stateNode;if(o===null)return null;var c=o[In]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Et=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ut=!1;if(Et)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{Ut=!1}var nn=null,zs=null,Tt=null;function Hn(){if(Tt)return Tt;var n,r=zs,o=r.length,c,f="value"in nn?nn.value:nn.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var x=o-n;for(c=1;c<=x&&r[o-c]===f[m-c];c++);return Tt=f.slice(n,1<c?1-c:void 0)}function Jn(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Ct(){return!0}function fn(){return!1}function Mn(n){function r(o,c,f,m,x){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(o=n[j],this[j]=o?o(m):m[j]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ct:fn,this.isPropagationStopped=fn,this}return k(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ct)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ct)},persist:function(){},isPersistent:Ct}),r}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qs=Mn(Fs),fs=k({},Fs,{view:0,detail:0}),Zs=Mn(fs),lr,Li,Vr,pi=k({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Vr&&(Vr&&n.type==="mousemove"?(lr=n.screenX-Vr.screenX,Li=n.screenY-Vr.screenY):Li=lr=0,Vr=n),lr)},movementY:function(n){return"movementY"in n?n.movementY:Li}}),ac=Mn(pi),oo=k({},pi,{dataTransfer:0}),qu=Mn(oo),Hu=k({},fs,{relatedTarget:0}),lo=Mn(Hu),oc=k({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),Wu=Mn(oc),Jo=k({},Fs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$u=Mn(Jo),Gu=k({},Fs,{data:0}),gi=Mn(Gu),Ku={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xu(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Qu[n])?!!r[n]:!1}function ga(){return Xu}var er=k({},fs,{key:function(n){if(n.key){var r=Ku[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Jn(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Yu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(n){return n.type==="keypress"?Jn(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Jn(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ju=Mn(er),Zu=k({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oi=Mn(Zu),h=k({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga}),v=Mn(h),_=k({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=Mn(_),X=k({},pi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=Mn(X),De=k({},Fs,{newState:0,oldState:0}),Dt=Mn(De),ls=[9,13,27,32],mn=Et&&"CompositionEvent"in window,Wn=null;Et&&"documentMode"in document&&(Wn=document.documentMode);var Ur=Et&&"TextEvent"in window&&!Wn,yi=Et&&(!mn||Wn&&8<Wn&&11>=Wn),ei=" ",ti=!1;function co(n,r){switch(n){case"keyup":return ls.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zo(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var el=!1;function GE(n,r){switch(n){case"compositionend":return Zo(r);case"keypress":return r.which!==32?null:(ti=!0,ei);case"textInput":return n=r.data,n===ei&&ti?null:n;default:return null}}function KE(n,r){if(el)return n==="compositionend"||!mn&&co(n,r)?(n=Hn(),Tt=zs=nn=null,el=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yi&&r.locale!=="ko"?null:r.data;default:return null}}var YE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w0(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!YE[n.type]:r==="textarea"}function x0(n,r,o,c){te?pe?pe.push(c):pe=[c]:te=c,r=Fd(r,"onChange"),0<r.length&&(o=new qs("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var lc=null,cc=null;function QE(n){sb(n,0)}function ed(n){var r=On(n);if(Kn(r))return n}function _0(n,r){if(n==="change")return r}var k0=!1;if(Et){var Af;if(Et){var Rf="oninput"in document;if(!Rf){var E0=document.createElement("div");E0.setAttribute("oninput","return;"),Rf=typeof E0.oninput=="function"}Af=Rf}else Af=!1;k0=Af&&(!document.documentMode||9<document.documentMode)}function T0(){lc&&(lc.detachEvent("onpropertychange",j0),cc=lc=null)}function j0(n){if(n.propertyName==="value"&&ed(cc)){var r=[];x0(r,cc,n,J(n)),He(QE,r)}}function XE(n,r,o){n==="focusin"?(T0(),lc=r,cc=o,lc.attachEvent("onpropertychange",j0)):n==="focusout"&&T0()}function JE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ed(cc)}function ZE(n,r){if(n==="click")return ed(r)}function eT(n,r){if(n==="input"||n==="change")return ed(r)}function tT(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var br=typeof Object.is=="function"?Object.is:tT;function uc(n,r){if(br(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Mt.call(r,f)||!br(n[f],r[f]))return!1}return!0}function S0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function C0(n,r){var o=S0(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=S0(o)}}function N0(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?N0(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function A0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=os(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=os(n.document)}return r}function If(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var nT=Et&&"documentMode"in document&&11>=document.documentMode,tl=null,Mf=null,dc=null,Df=!1;function R0(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Df||tl==null||tl!==os(c)||(c=tl,"selectionStart"in c&&If(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),dc&&uc(dc,c)||(dc=c,c=Fd(Mf,"onSelect"),0<c.length&&(r=new qs("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=tl)))}function uo(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var nl={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},Lf={},I0={};Et&&(I0=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function ho(n){if(Lf[n])return Lf[n];if(!nl[n])return n;var r=nl[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in I0)return Lf[n]=r[o];return n}var M0=ho("animationend"),D0=ho("animationiteration"),L0=ho("animationstart"),sT=ho("transitionrun"),rT=ho("transitionstart"),iT=ho("transitioncancel"),O0=ho("transitionend"),P0=new Map,Of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Of.push("scrollEnd");function ni(n,r){P0.set(n,r),ks(r,[n])}var td=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Br=[],sl=0,Pf=0;function nd(){for(var n=sl,r=Pf=sl=0;r<n;){var o=Br[r];Br[r++]=null;var c=Br[r];Br[r++]=null;var f=Br[r];Br[r++]=null;var m=Br[r];if(Br[r++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}m!==0&&V0(o,f,m)}}function sd(n,r,o,c){Br[sl++]=n,Br[sl++]=r,Br[sl++]=o,Br[sl++]=c,Pf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Vf(n,r,o,c){return sd(n,r,o,c),rd(n)}function fo(n,r){return sd(n,null,null,r),rd(n)}function V0(n,r,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-qe(o),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function rd(n){if(50<Mc)throw Mc=0,Gm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var rl={};function aT(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(n,r,o,c){return new aT(n,r,o,c)}function Uf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Pi(n,r){var o=n.alternate;return o===null?(o=wr(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function U0(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function id(n,r,o,c,f,m){var x=0;if(c=n,typeof n=="function")Uf(n)&&(x=1);else if(typeof n=="string")x=dj(n,o,_e.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=wr(31,o,r,f),n.elementType=R,n.lanes=m,n;case F:return mo(o.children,f,m,r);case B:x=8,f|=24;break;case $:return n=wr(12,o,r,f|2),n.elementType=$,n.lanes=m,n;case Ee:return n=wr(13,o,r,f),n.elementType=Ee,n.lanes=m,n;case we:return n=wr(19,o,r,f),n.elementType=we,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case K:x=10;break e;case H:x=9;break e;case ue:x=11;break e;case C:x=14;break e;case T:x=16,c=null;break e}x=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=wr(x,o,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function mo(n,r,o,c){return n=wr(7,n,c,r),n.lanes=o,n}function Bf(n,r,o){return n=wr(6,n,null,r),n.lanes=o,n}function B0(n){var r=wr(18,null,null,0);return r.stateNode=n,r}function zf(n,r,o){return r=wr(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var z0=new WeakMap;function zr(n,r){if(typeof n=="object"&&n!==null){var o=z0.get(n);return o!==void 0?o:(r={value:n,source:r,stack:de(r)},z0.set(n,r),r)}return{value:n,source:r,stack:de(r)}}var il=[],al=0,ad=null,hc=0,Fr=[],qr=0,ya=null,vi=1,bi="";function Vi(n,r){il[al++]=hc,il[al++]=ad,ad=n,hc=r}function F0(n,r,o){Fr[qr++]=vi,Fr[qr++]=bi,Fr[qr++]=ya,ya=n;var c=vi;n=bi;var f=32-qe(c)-1;c&=~(1<<f),o+=1;var m=32-qe(r)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,vi=1<<32-qe(r)+f|o<<f|c,bi=m+n}else vi=1<<m|o<<f|c,bi=n}function Ff(n){n.return!==null&&(Vi(n,1),F0(n,1,0))}function qf(n){for(;n===ad;)ad=il[--al],il[al]=null,hc=il[--al],il[al]=null;for(;n===ya;)ya=Fr[--qr],Fr[qr]=null,bi=Fr[--qr],Fr[qr]=null,vi=Fr[--qr],Fr[qr]=null}function q0(n,r){Fr[qr++]=vi,Fr[qr++]=bi,Fr[qr++]=ya,vi=r.id,bi=r.overflow,ya=n}var Is=null,Pn=null,Jt=!1,va=null,Hr=!1,Hf=Error(i(519));function ba(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fc(zr(r,n)),Hf}function H0(n){var r=n.stateNode,o=n.type,c=n.memoizedProps;switch(r[tn]=n,r[In]=c,o){case"dialog":Ft("cancel",r),Ft("close",r);break;case"iframe":case"object":case"embed":Ft("load",r);break;case"video":case"audio":for(o=0;o<Lc.length;o++)Ft(Lc[o],r);break;case"source":Ft("error",r);break;case"img":case"image":case"link":Ft("error",r),Ft("load",r);break;case"details":Ft("toggle",r);break;case"input":Ft("invalid",r),ma(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ft("invalid",r);break;case"textarea":Ft("invalid",r),Pr(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||ob(r.textContent,o)?(c.popover!=null&&(Ft("beforetoggle",r),Ft("toggle",r)),c.onScroll!=null&&Ft("scroll",r),c.onScrollEnd!=null&&Ft("scrollend",r),c.onClick!=null&&(r.onclick=ht),r=!0):r=!1,r||ba(n,!0)}function W0(n){for(Is=n.return;Is;)switch(Is.tag){case 5:case 31:case 13:Hr=!1;return;case 27:case 3:Hr=!0;return;default:Is=Is.return}}function ol(n){if(n!==Is)return!1;if(!Jt)return W0(n),Jt=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||lp(n.type,n.memoizedProps)),o=!o),o&&Pn&&ba(n),W0(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Pn=gb(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Pn=gb(n)}else r===27?(r=Pn,Ma(n.type)?(n=fp,fp=null,Pn=n):Pn=r):Pn=Is?$r(n.stateNode.nextSibling):null;return!0}function po(){Pn=Is=null,Jt=!1}function Wf(){var n=va;return n!==null&&(hr===null?hr=n:hr.push.apply(hr,n),va=null),n}function fc(n){va===null?va=[n]:va.push(n)}var $f=L(null),go=null,Ui=null;function wa(n,r,o){ve($f,r._currentValue),r._currentValue=o}function Bi(n){n._currentValue=$f.current,re($f)}function Gf(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function Kf(n,r,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var j=m;m=f;for(var U=0;U<r.length;U++)if(j.context===r[U]){m.lanes|=o,j=m.alternate,j!==null&&(j.lanes|=o),Gf(m.return,o,n),c||(x=null);break e}m=j.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),Gf(x,o,n),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===n){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function ll(n,r,o,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var j=f.type;br(f.pendingProps.value,x.value)||(n!==null?n.push(j):n=[j])}}else if(f===Be.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Bc):n=[Bc])}f=f.return}n!==null&&Kf(r,n,o,c),r.flags|=262144}function od(n){for(n=n.firstContext;n!==null;){if(!br(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function yo(n){go=n,Ui=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ms(n){return $0(go,n)}function ld(n,r){return go===null&&yo(n),$0(n,r)}function $0(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Ui===null){if(n===null)throw Error(i(308));Ui=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Ui=Ui.next=r;return o}var oT=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},lT=s.unstable_scheduleCallback,cT=s.unstable_NormalPriority,ms={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new oT,data:new Map,refCount:0}}function mc(n){n.refCount--,n.refCount===0&&lT(cT,function(){n.controller.abort()})}var pc=null,Qf=0,cl=0,ul=null;function uT(n,r){if(pc===null){var o=pc=[];Qf=0,cl=Zm(),ul={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Qf++,r.then(G0,G0),r}function G0(){if(--Qf===0&&pc!==null){ul!==null&&(ul.status="fulfilled");var n=pc;pc=null,cl=0,ul=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function dT(n,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var K0=Z.S;Z.S=function(n,r){R1=wt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&uT(n,r),K0!==null&&K0(n,r)};var vo=L(null);function Xf(){var n=vo.current;return n!==null?n:Nn.pooledCache}function cd(n,r){r===null?ve(vo,vo.current):ve(vo,r.pool)}function Y0(){var n=Xf();return n===null?null:{parent:ms._currentValue,pool:n}}var dl=Error(i(460)),Jf=Error(i(474)),ud=Error(i(542)),dd={then:function(){}};function Q0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function X0(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(ht,ht),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Z0(n),n;default:if(typeof r.status=="string")r.then(ht,ht);else{if(n=Nn,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Z0(n),n}throw wo=r,dl}}function bo(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(wo=o,dl):o}}var wo=null;function J0(){if(wo===null)throw Error(i(459));var n=wo;return wo=null,n}function Z0(n){if(n===dl||n===ud)throw Error(i(483))}var hl=null,gc=0;function hd(n){var r=gc;return gc+=1,hl===null&&(hl=[]),X0(hl,n,r)}function yc(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function fd(n,r){throw r.$$typeof===E?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function ev(n){function r(G,q){if(n){var ee=G.deletions;ee===null?(G.deletions=[q],G.flags|=16):ee.push(q)}}function o(G,q){if(!n)return null;for(;q!==null;)r(G,q),q=q.sibling;return null}function c(G){for(var q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function f(G,q){return G=Pi(G,q),G.index=0,G.sibling=null,G}function m(G,q,ee){return G.index=ee,n?(ee=G.alternate,ee!==null?(ee=ee.index,ee<q?(G.flags|=67108866,q):ee):(G.flags|=67108866,q)):(G.flags|=1048576,q)}function x(G){return n&&G.alternate===null&&(G.flags|=67108866),G}function j(G,q,ee,ge){return q===null||q.tag!==6?(q=Bf(ee,G.mode,ge),q.return=G,q):(q=f(q,ee),q.return=G,q)}function U(G,q,ee,ge){var ot=ee.type;return ot===F?fe(G,q,ee.props.children,ge,ee.key):q!==null&&(q.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===T&&bo(ot)===q.type)?(q=f(q,ee.props),yc(q,ee),q.return=G,q):(q=id(ee.type,ee.key,ee.props,null,G.mode,ge),yc(q,ee),q.return=G,q)}function ne(G,q,ee,ge){return q===null||q.tag!==4||q.stateNode.containerInfo!==ee.containerInfo||q.stateNode.implementation!==ee.implementation?(q=zf(ee,G.mode,ge),q.return=G,q):(q=f(q,ee.children||[]),q.return=G,q)}function fe(G,q,ee,ge,ot){return q===null||q.tag!==7?(q=mo(ee,G.mode,ge,ot),q.return=G,q):(q=f(q,ee),q.return=G,q)}function xe(G,q,ee){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Bf(""+q,G.mode,ee),q.return=G,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case O:return ee=id(q.type,q.key,q.props,null,G.mode,ee),yc(ee,q),ee.return=G,ee;case W:return q=zf(q,G.mode,ee),q.return=G,q;case T:return q=bo(q),xe(G,q,ee)}if(Xe(q)||D(q))return q=mo(q,G.mode,ee,null),q.return=G,q;if(typeof q.then=="function")return xe(G,hd(q),ee);if(q.$$typeof===K)return xe(G,ld(G,q),ee);fd(G,q)}return null}function ie(G,q,ee,ge){var ot=q!==null?q.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ot!==null?null:j(G,q,""+ee,ge);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case O:return ee.key===ot?U(G,q,ee,ge):null;case W:return ee.key===ot?ne(G,q,ee,ge):null;case T:return ee=bo(ee),ie(G,q,ee,ge)}if(Xe(ee)||D(ee))return ot!==null?null:fe(G,q,ee,ge,null);if(typeof ee.then=="function")return ie(G,q,hd(ee),ge);if(ee.$$typeof===K)return ie(G,q,ld(G,ee),ge);fd(G,ee)}return null}function he(G,q,ee,ge,ot){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return G=G.get(ee)||null,j(q,G,""+ge,ot);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case O:return G=G.get(ge.key===null?ee:ge.key)||null,U(q,G,ge,ot);case W:return G=G.get(ge.key===null?ee:ge.key)||null,ne(q,G,ge,ot);case T:return ge=bo(ge),he(G,q,ee,ge,ot)}if(Xe(ge)||D(ge))return G=G.get(ee)||null,fe(q,G,ge,ot,null);if(typeof ge.then=="function")return he(G,q,ee,hd(ge),ot);if(ge.$$typeof===K)return he(G,q,ee,ld(q,ge),ot);fd(q,ge)}return null}function Ze(G,q,ee,ge){for(var ot=null,ln=null,nt=q,Pt=q=0,Gt=null;nt!==null&&Pt<ee.length;Pt++){nt.index>Pt?(Gt=nt,nt=null):Gt=nt.sibling;var cn=ie(G,nt,ee[Pt],ge);if(cn===null){nt===null&&(nt=Gt);break}n&&nt&&cn.alternate===null&&r(G,nt),q=m(cn,q,Pt),ln===null?ot=cn:ln.sibling=cn,ln=cn,nt=Gt}if(Pt===ee.length)return o(G,nt),Jt&&Vi(G,Pt),ot;if(nt===null){for(;Pt<ee.length;Pt++)nt=xe(G,ee[Pt],ge),nt!==null&&(q=m(nt,q,Pt),ln===null?ot=nt:ln.sibling=nt,ln=nt);return Jt&&Vi(G,Pt),ot}for(nt=c(nt);Pt<ee.length;Pt++)Gt=he(nt,G,Pt,ee[Pt],ge),Gt!==null&&(n&&Gt.alternate!==null&&nt.delete(Gt.key===null?Pt:Gt.key),q=m(Gt,q,Pt),ln===null?ot=Gt:ln.sibling=Gt,ln=Gt);return n&&nt.forEach(function(Va){return r(G,Va)}),Jt&&Vi(G,Pt),ot}function ft(G,q,ee,ge){if(ee==null)throw Error(i(151));for(var ot=null,ln=null,nt=q,Pt=q=0,Gt=null,cn=ee.next();nt!==null&&!cn.done;Pt++,cn=ee.next()){nt.index>Pt?(Gt=nt,nt=null):Gt=nt.sibling;var Va=ie(G,nt,cn.value,ge);if(Va===null){nt===null&&(nt=Gt);break}n&&nt&&Va.alternate===null&&r(G,nt),q=m(Va,q,Pt),ln===null?ot=Va:ln.sibling=Va,ln=Va,nt=Gt}if(cn.done)return o(G,nt),Jt&&Vi(G,Pt),ot;if(nt===null){for(;!cn.done;Pt++,cn=ee.next())cn=xe(G,cn.value,ge),cn!==null&&(q=m(cn,q,Pt),ln===null?ot=cn:ln.sibling=cn,ln=cn);return Jt&&Vi(G,Pt),ot}for(nt=c(nt);!cn.done;Pt++,cn=ee.next())cn=he(nt,G,Pt,cn.value,ge),cn!==null&&(n&&cn.alternate!==null&&nt.delete(cn.key===null?Pt:cn.key),q=m(cn,q,Pt),ln===null?ot=cn:ln.sibling=cn,ln=cn);return n&&nt.forEach(function(_j){return r(G,_j)}),Jt&&Vi(G,Pt),ot}function jn(G,q,ee,ge){if(typeof ee=="object"&&ee!==null&&ee.type===F&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case O:e:{for(var ot=ee.key;q!==null;){if(q.key===ot){if(ot=ee.type,ot===F){if(q.tag===7){o(G,q.sibling),ge=f(q,ee.props.children),ge.return=G,G=ge;break e}}else if(q.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===T&&bo(ot)===q.type){o(G,q.sibling),ge=f(q,ee.props),yc(ge,ee),ge.return=G,G=ge;break e}o(G,q);break}else r(G,q);q=q.sibling}ee.type===F?(ge=mo(ee.props.children,G.mode,ge,ee.key),ge.return=G,G=ge):(ge=id(ee.type,ee.key,ee.props,null,G.mode,ge),yc(ge,ee),ge.return=G,G=ge)}return x(G);case W:e:{for(ot=ee.key;q!==null;){if(q.key===ot)if(q.tag===4&&q.stateNode.containerInfo===ee.containerInfo&&q.stateNode.implementation===ee.implementation){o(G,q.sibling),ge=f(q,ee.children||[]),ge.return=G,G=ge;break e}else{o(G,q);break}else r(G,q);q=q.sibling}ge=zf(ee,G.mode,ge),ge.return=G,G=ge}return x(G);case T:return ee=bo(ee),jn(G,q,ee,ge)}if(Xe(ee))return Ze(G,q,ee,ge);if(D(ee)){if(ot=D(ee),typeof ot!="function")throw Error(i(150));return ee=ot.call(ee),ft(G,q,ee,ge)}if(typeof ee.then=="function")return jn(G,q,hd(ee),ge);if(ee.$$typeof===K)return jn(G,q,ld(G,ee),ge);fd(G,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,q!==null&&q.tag===6?(o(G,q.sibling),ge=f(q,ee),ge.return=G,G=ge):(o(G,q),ge=Bf(ee,G.mode,ge),ge.return=G,G=ge),x(G)):o(G,q)}return function(G,q,ee,ge){try{gc=0;var ot=jn(G,q,ee,ge);return hl=null,ot}catch(nt){if(nt===dl||nt===ud)throw nt;var ln=wr(29,nt,null,G.mode);return ln.lanes=ge,ln.return=G,ln}}}var xo=ev(!0),tv=ev(!1),xa=!1;function Zf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function em(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function _a(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ka(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(pn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=rd(n),V0(n,null,o),r}return sd(n,c,r,o),rd(n)}function vc(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,_n(n,o)}}function tm(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var nm=!1;function bc(){if(nm){var n=ul;if(n!==null)throw n}}function wc(n,r,o,c){nm=!1;var f=n.updateQueue;xa=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,j=f.shared.pending;if(j!==null){f.shared.pending=null;var U=j,ne=U.next;U.next=null,x===null?m=ne:x.next=ne,x=U;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,j=fe.lastBaseUpdate,j!==x&&(j===null?fe.firstBaseUpdate=ne:j.next=ne,fe.lastBaseUpdate=U))}if(m!==null){var xe=f.baseState;x=0,fe=ne=U=null,j=m;do{var ie=j.lane&-536870913,he=ie!==j.lane;if(he?($t&ie)===ie:(c&ie)===ie){ie!==0&&ie===cl&&(nm=!0),fe!==null&&(fe=fe.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ze=n,ft=j;ie=r;var jn=o;switch(ft.tag){case 1:if(Ze=ft.payload,typeof Ze=="function"){xe=Ze.call(jn,xe,ie);break e}xe=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=ft.payload,ie=typeof Ze=="function"?Ze.call(jn,xe,ie):Ze,ie==null)break e;xe=k({},xe,ie);break e;case 2:xa=!0}}ie=j.callback,ie!==null&&(n.flags|=64,he&&(n.flags|=8192),he=f.callbacks,he===null?f.callbacks=[ie]:he.push(ie))}else he={lane:ie,tag:j.tag,payload:j.payload,callback:j.callback,next:null},fe===null?(ne=fe=he,U=xe):fe=fe.next=he,x|=ie;if(j=j.next,j===null){if(j=f.shared.pending,j===null)break;he=j,j=he.next,he.next=null,f.lastBaseUpdate=he,f.shared.pending=null}}while(!0);fe===null&&(U=xe),f.baseState=U,f.firstBaseUpdate=ne,f.lastBaseUpdate=fe,m===null&&(f.shared.lanes=0),Ca|=x,n.lanes=x,n.memoizedState=xe}}function nv(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function sv(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)nv(o[n],r)}var fl=L(null),md=L(0);function rv(n,r){n=Yi,ve(md,n),ve(fl,r),Yi=n|r.baseLanes}function sm(){ve(md,Yi),ve(fl,fl.current)}function rm(){Yi=md.current,re(fl),re(md)}var xr=L(null),Wr=null;function Ea(n){var r=n.alternate;ve(cs,cs.current&1),ve(xr,n),Wr===null&&(r===null||fl.current!==null||r.memoizedState!==null)&&(Wr=n)}function im(n){ve(cs,cs.current),ve(xr,n),Wr===null&&(Wr=n)}function iv(n){n.tag===22?(ve(cs,cs.current),ve(xr,n),Wr===null&&(Wr=n)):Ta()}function Ta(){ve(cs,cs.current),ve(xr,xr.current)}function _r(n){re(xr),Wr===n&&(Wr=null),re(cs)}var cs=L(0);function pd(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||dp(o)||hp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var zi=0,Lt=null,En=null,ps=null,gd=!1,ml=!1,_o=!1,yd=0,xc=0,pl=null,hT=0;function Zn(){throw Error(i(321))}function am(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!br(n[o],r[o]))return!1;return!0}function om(n,r,o,c,f,m){return zi=m,Lt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Z.H=n===null||n.memoizedState===null?Fv:_m,_o=!1,m=o(c,f),_o=!1,ml&&(m=ov(r,o,c,f)),av(n),m}function av(n){Z.H=Ec;var r=En!==null&&En.next!==null;if(zi=0,ps=En=Lt=null,gd=!1,xc=0,pl=null,r)throw Error(i(300));n===null||gs||(n=n.dependencies,n!==null&&od(n)&&(gs=!0))}function ov(n,r,o,c){Lt=n;var f=0;do{if(ml&&(pl=null),xc=0,ml=!1,25<=f)throw Error(i(301));if(f+=1,ps=En=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Z.H=qv,m=r(o,c)}while(ml);return m}function fT(){var n=Z.H,r=n.useState()[0];return r=typeof r.then=="function"?_c(r):r,n=n.useState()[0],(En!==null?En.memoizedState:null)!==n&&(Lt.flags|=1024),r}function lm(){var n=yd!==0;return yd=0,n}function cm(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function um(n){if(gd){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}gd=!1}zi=0,ps=En=Lt=null,ml=!1,xc=yd=0,pl=null}function tr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ps===null?Lt.memoizedState=ps=n:ps=ps.next=n,ps}function us(){if(En===null){var n=Lt.alternate;n=n!==null?n.memoizedState:null}else n=En.next;var r=ps===null?Lt.memoizedState:ps.next;if(r!==null)ps=r,En=n;else{if(n===null)throw Lt.alternate===null?Error(i(467)):Error(i(310));En=n,n={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},ps===null?Lt.memoizedState=ps=n:ps=ps.next=n}return ps}function vd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _c(n){var r=xc;return xc+=1,pl===null&&(pl=[]),n=X0(pl,n,r),r=Lt,(ps===null?r.memoizedState:ps.next)===null&&(r=r.alternate,Z.H=r===null||r.memoizedState===null?Fv:_m),n}function bd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return _c(n);if(n.$$typeof===K)return Ms(n)}throw Error(i(438,String(n)))}function dm(n){var r=null,o=Lt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Lt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=vd(),Lt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),c=0;c<n;c++)o[c]=P;return r.index++,o}function Fi(n,r){return typeof r=="function"?r(n):r}function wd(n){var r=us();return hm(r,En,n)}function hm(n,r,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var j=x=null,U=null,ne=r,fe=!1;do{var xe=ne.lane&-536870913;if(xe!==ne.lane?($t&xe)===xe:(zi&xe)===xe){var ie=ne.revertLane;if(ie===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),xe===cl&&(fe=!0);else if((zi&ie)===ie){ne=ne.next,ie===cl&&(fe=!0);continue}else xe={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},U===null?(j=U=xe,x=m):U=U.next=xe,Lt.lanes|=ie,Ca|=ie;xe=ne.action,_o&&o(m,xe),m=ne.hasEagerState?ne.eagerState:o(m,xe)}else ie={lane:xe,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},U===null?(j=U=ie,x=m):U=U.next=ie,Lt.lanes|=xe,Ca|=xe;ne=ne.next}while(ne!==null&&ne!==r);if(U===null?x=m:U.next=j,!br(m,n.memoizedState)&&(gs=!0,fe&&(o=ul,o!==null)))throw o;n.memoizedState=m,n.baseState=x,n.baseQueue=U,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function fm(n){var r=us(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var x=f=f.next;do m=n(m,x.action),x=x.next;while(x!==f);br(m,r.memoizedState)||(gs=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function lv(n,r,o){var c=Lt,f=us(),m=Jt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var x=!br((En||f).memoizedState,o);if(x&&(f.memoizedState=o,gs=!0),f=f.queue,gm(dv.bind(null,c,f,n),[n]),f.getSnapshot!==r||x||ps!==null&&ps.memoizedState.tag&1){if(c.flags|=2048,gl(9,{destroy:void 0},uv.bind(null,c,f,o,r),null),Nn===null)throw Error(i(349));m||(zi&127)!==0||cv(c,r,o)}return o}function cv(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Lt.updateQueue,r===null?(r=vd(),Lt.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function uv(n,r,o,c){r.value=o,r.getSnapshot=c,hv(r)&&fv(n)}function dv(n,r,o){return o(function(){hv(r)&&fv(n)})}function hv(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!br(n,o)}catch{return!0}}function fv(n){var r=fo(n,2);r!==null&&fr(r,n,2)}function mm(n){var r=tr();if(typeof n=="function"){var o=n;if(n=o(),_o){rt(!0);try{o()}finally{rt(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:n},r}function mv(n,r,o,c){return n.baseState=o,hm(n,En,typeof c=="function"?c:Fi)}function mT(n,r,o,c,f){if(kd(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Z.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,pv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function pv(n,r){var o=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=Z.T,x={};Z.T=x;try{var j=o(f,c),U=Z.S;U!==null&&U(x,j),gv(n,r,j)}catch(ne){pm(n,r,ne)}finally{m!==null&&x.types!==null&&(m.types=x.types),Z.T=m}}else try{m=o(f,c),gv(n,r,m)}catch(ne){pm(n,r,ne)}}function gv(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){yv(n,r,c)},function(c){return pm(n,r,c)}):yv(n,r,o)}function yv(n,r,o){r.status="fulfilled",r.value=o,vv(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,pv(n,o)))}function pm(n,r,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,vv(r),r=r.next;while(r!==c)}n.action=null}function vv(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function bv(n,r){return r}function wv(n,r){if(Jt){var o=Nn.formState;if(o!==null){e:{var c=Lt;if(Jt){if(Pn){t:{for(var f=Pn,m=Hr;f.nodeType!==8;){if(!m){f=null;break t}if(f=$r(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Pn=$r(f.nextSibling),c=f.data==="F!";break e}}ba(c)}c=!1}c&&(r=o[0])}}return o=tr(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bv,lastRenderedState:r},o.queue=c,o=Uv.bind(null,Lt,c),c.dispatch=o,c=mm(!1),m=xm.bind(null,Lt,!1,c.queue),c=tr(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,o=mT.bind(null,Lt,f,m,o),f.dispatch=o,c.memoizedState=n,[r,o,!1]}function xv(n){var r=us();return _v(r,En,n)}function _v(n,r,o){if(r=hm(n,r,bv)[0],n=wd(Fi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=_c(r)}catch(x){throw x===dl?ud:x}else c=r;r=us();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Lt.flags|=2048,gl(9,{destroy:void 0},pT.bind(null,f,o),null)),[c,m,n]}function pT(n,r){n.action=r}function kv(n){var r=us(),o=En;if(o!==null)return _v(r,o,n);us(),r=r.memoizedState,o=us();var c=o.queue.dispatch;return o.memoizedState=n,[r,c,!1]}function gl(n,r,o,c){return n={tag:n,create:o,deps:c,inst:r,next:null},r=Lt.updateQueue,r===null&&(r=vd(),Lt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n),n}function Ev(){return us().memoizedState}function xd(n,r,o,c){var f=tr();Lt.flags|=n,f.memoizedState=gl(1|r,{destroy:void 0},o,c===void 0?null:c)}function _d(n,r,o,c){var f=us();c=c===void 0?null:c;var m=f.memoizedState.inst;En!==null&&c!==null&&am(c,En.memoizedState.deps)?f.memoizedState=gl(r,m,o,c):(Lt.flags|=n,f.memoizedState=gl(1|r,m,o,c))}function Tv(n,r){xd(8390656,8,n,r)}function gm(n,r){_d(2048,8,n,r)}function gT(n){Lt.flags|=4;var r=Lt.updateQueue;if(r===null)r=vd(),Lt.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function jv(n){var r=us().memoizedState;return gT({ref:r,nextImpl:n}),function(){if((pn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Sv(n,r){return _d(4,2,n,r)}function Cv(n,r){return _d(4,4,n,r)}function Nv(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Av(n,r,o){o=o!=null?o.concat([n]):null,_d(4,4,Nv.bind(null,r,n),o)}function ym(){}function Rv(n,r){var o=us();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&am(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function Iv(n,r){var o=us();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&am(r,c[1]))return c[0];if(c=n(),_o){rt(!0);try{n()}finally{rt(!1)}}return o.memoizedState=[c,r],c}function vm(n,r,o){return o===void 0||(zi&1073741824)!==0&&($t&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=M1(),Lt.lanes|=n,Ca|=n,o)}function Mv(n,r,o,c){return br(o,r)?o:fl.current!==null?(n=vm(n,o,c),br(n,r)||(gs=!0),n):(zi&42)===0||(zi&1073741824)!==0&&($t&261930)===0?(gs=!0,n.memoizedState=o):(n=M1(),Lt.lanes|=n,Ca|=n,r)}function Dv(n,r,o,c,f){var m=je.p;je.p=m!==0&&8>m?m:8;var x=Z.T,j={};Z.T=j,xm(n,!1,r,o);try{var U=f(),ne=Z.S;if(ne!==null&&ne(j,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var fe=dT(U,c);kc(n,r,fe,Tr(n))}else kc(n,r,c,Tr(n))}catch(xe){kc(n,r,{then:function(){},status:"rejected",reason:xe},Tr())}finally{je.p=m,x!==null&&j.types!==null&&(x.types=j.types),Z.T=x}}function yT(){}function bm(n,r,o,c){if(n.tag!==5)throw Error(i(476));var f=Lv(n).queue;Dv(n,f,r,Me,o===null?yT:function(){return Ov(n),o(c)})}function Lv(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Me,baseState:Me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:Me},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fi,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Ov(n){var r=Lv(n);r.next===null&&(r=n.alternate.memoizedState),kc(n,r.next.queue,{},Tr())}function wm(){return Ms(Bc)}function Pv(){return us().memoizedState}function Vv(){return us().memoizedState}function vT(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Tr();n=_a(o);var c=ka(r,n,o);c!==null&&(fr(c,r,o),vc(c,r,o)),r={cache:Yf()},n.payload=r;return}r=r.return}}function bT(n,r,o){var c=Tr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},kd(n)?Bv(r,o):(o=Vf(n,r,o,c),o!==null&&(fr(o,n,c),zv(o,r,c)))}function Uv(n,r,o){var c=Tr();kc(n,r,o,c)}function kc(n,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(kd(n))Bv(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,j=m(x,o);if(f.hasEagerState=!0,f.eagerState=j,br(j,x))return sd(n,r,f,0),Nn===null&&nd(),!1}catch{}if(o=Vf(n,r,f,c),o!==null)return fr(o,n,c),zv(o,r,c),!0}return!1}function xm(n,r,o,c){if(c={lane:2,revertLane:Zm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},kd(n)){if(r)throw Error(i(479))}else r=Vf(n,o,c,2),r!==null&&fr(r,n,2)}function kd(n){var r=n.alternate;return n===Lt||r!==null&&r===Lt}function Bv(n,r){ml=gd=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function zv(n,r,o){if((o&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,_n(n,o)}}var Ec={readContext:Ms,use:bd,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useLayoutEffect:Zn,useInsertionEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useSyncExternalStore:Zn,useId:Zn,useHostTransitionStatus:Zn,useFormState:Zn,useActionState:Zn,useOptimistic:Zn,useMemoCache:Zn,useCacheRefresh:Zn};Ec.useEffectEvent=Zn;var Fv={readContext:Ms,use:bd,useCallback:function(n,r){return tr().memoizedState=[n,r===void 0?null:r],n},useContext:Ms,useEffect:Tv,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,xd(4194308,4,Nv.bind(null,r,n),o)},useLayoutEffect:function(n,r){return xd(4194308,4,n,r)},useInsertionEffect:function(n,r){xd(4,2,n,r)},useMemo:function(n,r){var o=tr();r=r===void 0?null:r;var c=n();if(_o){rt(!0);try{n()}finally{rt(!1)}}return o.memoizedState=[c,r],c},useReducer:function(n,r,o){var c=tr();if(o!==void 0){var f=o(r);if(_o){rt(!0);try{o(r)}finally{rt(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=bT.bind(null,Lt,n),[c.memoizedState,n]},useRef:function(n){var r=tr();return n={current:n},r.memoizedState=n},useState:function(n){n=mm(n);var r=n.queue,o=Uv.bind(null,Lt,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:ym,useDeferredValue:function(n,r){var o=tr();return vm(o,n,r)},useTransition:function(){var n=mm(!1);return n=Dv.bind(null,Lt,n.queue,!0,!1),tr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var c=Lt,f=tr();if(Jt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Nn===null)throw Error(i(349));($t&127)!==0||cv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Tv(dv.bind(null,c,m,n),[n]),c.flags|=2048,gl(9,{destroy:void 0},uv.bind(null,c,m,o,r),null),o},useId:function(){var n=tr(),r=Nn.identifierPrefix;if(Jt){var o=bi,c=vi;o=(c&~(1<<32-qe(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=yd++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=hT++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:wm,useFormState:wv,useActionState:wv,useOptimistic:function(n){var r=tr();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=xm.bind(null,Lt,!0,o),o.dispatch=r,[n,r]},useMemoCache:dm,useCacheRefresh:function(){return tr().memoizedState=vT.bind(null,Lt)},useEffectEvent:function(n){var r=tr(),o={impl:n};return r.memoizedState=o,function(){if((pn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},_m={readContext:Ms,use:bd,useCallback:Rv,useContext:Ms,useEffect:gm,useImperativeHandle:Av,useInsertionEffect:Sv,useLayoutEffect:Cv,useMemo:Iv,useReducer:wd,useRef:Ev,useState:function(){return wd(Fi)},useDebugValue:ym,useDeferredValue:function(n,r){var o=us();return Mv(o,En.memoizedState,n,r)},useTransition:function(){var n=wd(Fi)[0],r=us().memoizedState;return[typeof n=="boolean"?n:_c(n),r]},useSyncExternalStore:lv,useId:Pv,useHostTransitionStatus:wm,useFormState:xv,useActionState:xv,useOptimistic:function(n,r){var o=us();return mv(o,En,n,r)},useMemoCache:dm,useCacheRefresh:Vv};_m.useEffectEvent=jv;var qv={readContext:Ms,use:bd,useCallback:Rv,useContext:Ms,useEffect:gm,useImperativeHandle:Av,useInsertionEffect:Sv,useLayoutEffect:Cv,useMemo:Iv,useReducer:fm,useRef:Ev,useState:function(){return fm(Fi)},useDebugValue:ym,useDeferredValue:function(n,r){var o=us();return En===null?vm(o,n,r):Mv(o,En.memoizedState,n,r)},useTransition:function(){var n=fm(Fi)[0],r=us().memoizedState;return[typeof n=="boolean"?n:_c(n),r]},useSyncExternalStore:lv,useId:Pv,useHostTransitionStatus:wm,useFormState:kv,useActionState:kv,useOptimistic:function(n,r){var o=us();return En!==null?mv(o,En,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:dm,useCacheRefresh:Vv};qv.useEffectEvent=jv;function km(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:k({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Em={enqueueSetState:function(n,r,o){n=n._reactInternals;var c=Tr(),f=_a(c);f.payload=r,o!=null&&(f.callback=o),r=ka(n,f,c),r!==null&&(fr(r,n,c),vc(r,n,c))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=Tr(),f=_a(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=ka(n,f,c),r!==null&&(fr(r,n,c),vc(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Tr(),c=_a(o);c.tag=2,r!=null&&(c.callback=r),r=ka(n,c,o),r!==null&&(fr(r,n,o),vc(r,n,o))}};function Hv(n,r,o,c,f,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,x):r.prototype&&r.prototype.isPureReactComponent?!uc(o,c)||!uc(f,m):!0}function Wv(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&Em.enqueueReplaceState(r,r.state,null)}function ko(n,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(n=n.defaultProps){o===r&&(o=k({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function $v(n){td(n)}function Gv(n){console.error(n)}function Kv(n){td(n)}function Ed(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Yv(n,r,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Tm(n,r,o){return o=_a(o),o.tag=3,o.payload={element:null},o.callback=function(){Ed(n,r)},o}function Qv(n){return n=_a(n),n.tag=3,n}function Xv(n,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Yv(r,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){Yv(r,o,c),typeof f!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var j=c.stack;this.componentDidCatch(c.value,{componentStack:j!==null?j:""})})}function wT(n,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&ll(r,o,f,!0),o=xr.current,o!==null){switch(o.tag){case 31:case 13:return Wr===null?Od():o.alternate===null&&es===0&&(es=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===dd?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Qm(n,c,f)),!1;case 22:return o.flags|=65536,c===dd?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Qm(n,c,f)),!1}throw Error(i(435,o.tag))}return Qm(n,c,f),Od(),!1}if(Jt)return r=xr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Hf&&(n=Error(i(422),{cause:c}),fc(zr(n,o)))):(c!==Hf&&(r=Error(i(423),{cause:c}),fc(zr(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=zr(c,o),f=Tm(n.stateNode,c,f),tm(n,f),es!==4&&(es=2)),!1;var m=Error(i(520),{cause:c});if(m=zr(m,o),Ic===null?Ic=[m]:Ic.push(m),es!==4&&(es=2),r===null)return!0;c=zr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Tm(o.stateNode,c,n),tm(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Na===null||!Na.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Qv(f),Xv(f,n,o,c),tm(o,f),!1}o=o.return}while(o!==null);return!1}var jm=Error(i(461)),gs=!1;function Ds(n,r,o,c){r.child=n===null?tv(r,null,o,c):xo(r,n.child,o,c)}function Jv(n,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var x={};for(var j in c)j!=="ref"&&(x[j]=c[j])}else x=c;return yo(r),c=om(n,r,o,x,m,f),j=lm(),n!==null&&!gs?(cm(n,r,f),qi(n,r,f)):(Jt&&j&&Ff(r),r.flags|=1,Ds(n,r,c,f),r.child)}function Zv(n,r,o,c,f){if(n===null){var m=o.type;return typeof m=="function"&&!Uf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,e1(n,r,m,c,f)):(n=id(o.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Dm(n,f)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:uc,o(x,c)&&n.ref===r.ref)return qi(n,r,f)}return r.flags|=1,n=Pi(m,c),n.ref=r.ref,n.return=r,r.child=n}function e1(n,r,o,c,f){if(n!==null){var m=n.memoizedProps;if(uc(m,c)&&n.ref===r.ref)if(gs=!1,r.pendingProps=c=m,Dm(n,f))(n.flags&131072)!==0&&(gs=!0);else return r.lanes=n.lanes,qi(n,r,f)}return Sm(n,r,o,c,f)}function t1(n,r,o,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return n1(n,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&cd(r,m!==null?m.cachePool:null),m!==null?rv(r,m):sm(),iv(r);else return c=r.lanes=536870912,n1(n,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(cd(r,m.cachePool),rv(r,m),Ta(),r.memoizedState=null):(n!==null&&cd(r,null),sm(),Ta());return Ds(n,r,f,o),r.child}function Tc(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function n1(n,r,o,c,f){var m=Xf();return m=m===null?null:{parent:ms._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},n!==null&&cd(r,null),sm(),iv(r),n!==null&&ll(n,r,c,!0),r.childLanes=f,null}function Td(n,r){return r=Sd({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function s1(n,r,o){return xo(r,n.child,null,o),n=Td(r,r.pendingProps),n.flags|=2,_r(r),r.memoizedState=null,n}function xT(n,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Jt){if(c.mode==="hidden")return n=Td(r,c),r.lanes=536870912,Tc(null,n);if(im(r),(n=Pn)?(n=pb(n,Hr),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ya!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=B0(n),o.return=r,r.child=o,Is=r,Pn=null)):n=null,n===null)throw ba(r);return r.lanes=536870912,null}return Td(r,c)}var m=n.memoizedState;if(m!==null){var x=m.dehydrated;if(im(r),f)if(r.flags&256)r.flags&=-257,r=s1(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(gs||ll(n,r,o,!1),f=(o&n.childLanes)!==0,gs||f){if(c=Nn,c!==null&&(x=Rn(c,o),x!==0&&x!==m.retryLane))throw m.retryLane=x,fo(n,x),fr(c,n,x),jm;Od(),r=s1(n,r,o)}else n=m.treeContext,Pn=$r(x.nextSibling),Is=r,Jt=!0,va=null,Hr=!1,n!==null&&q0(r,n),r=Td(r,c),r.flags|=4096;return r}return n=Pi(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function jd(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Sm(n,r,o,c,f){return yo(r),o=om(n,r,o,c,void 0,f),c=lm(),n!==null&&!gs?(cm(n,r,f),qi(n,r,f)):(Jt&&c&&Ff(r),r.flags|=1,Ds(n,r,o,f),r.child)}function r1(n,r,o,c,f,m){return yo(r),r.updateQueue=null,o=ov(r,c,o,f),av(n),c=lm(),n!==null&&!gs?(cm(n,r,m),qi(n,r,m)):(Jt&&c&&Ff(r),r.flags|=1,Ds(n,r,o,m),r.child)}function i1(n,r,o,c,f){if(yo(r),r.stateNode===null){var m=rl,x=o.contextType;typeof x=="object"&&x!==null&&(m=Ms(x)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Em,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Zf(r),x=o.contextType,m.context=typeof x=="object"&&x!==null?Ms(x):rl,m.state=r.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(km(r,o,x,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&Em.enqueueReplaceState(m,m.state,null),wc(r,c,m,f),bc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var j=r.memoizedProps,U=ko(o,j);m.props=U;var ne=m.context,fe=o.contextType;x=rl,typeof fe=="object"&&fe!==null&&(x=Ms(fe));var xe=o.getDerivedStateFromProps;fe=typeof xe=="function"||typeof m.getSnapshotBeforeUpdate=="function",j=r.pendingProps!==j,fe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(j||ne!==x)&&Wv(r,m,c,x),xa=!1;var ie=r.memoizedState;m.state=ie,wc(r,c,m,f),bc(),ne=r.memoizedState,j||ie!==ne||xa?(typeof xe=="function"&&(km(r,o,xe,c),ne=r.memoizedState),(U=xa||Hv(r,o,U,c,ie,ne,x))?(fe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ne),m.props=c,m.state=ne,m.context=x,c=U):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,em(n,r),x=r.memoizedProps,fe=ko(o,x),m.props=fe,xe=r.pendingProps,ie=m.context,ne=o.contextType,U=rl,typeof ne=="object"&&ne!==null&&(U=Ms(ne)),j=o.getDerivedStateFromProps,(ne=typeof j=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==xe||ie!==U)&&Wv(r,m,c,U),xa=!1,ie=r.memoizedState,m.state=ie,wc(r,c,m,f),bc();var he=r.memoizedState;x!==xe||ie!==he||xa||n!==null&&n.dependencies!==null&&od(n.dependencies)?(typeof j=="function"&&(km(r,o,j,c),he=r.memoizedState),(fe=xa||Hv(r,o,fe,c,ie,he,U)||n!==null&&n.dependencies!==null&&od(n.dependencies))?(ne||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,he,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,he,U)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&ie===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&ie===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=he),m.props=c,m.state=he,m.context=U,c=fe):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&ie===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&ie===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,jd(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=xo(r,n.child,null,f),r.child=xo(r,null,o,f)):Ds(n,r,o,f),r.memoizedState=m.state,n=r.child):n=qi(n,r,f),n}function a1(n,r,o,c){return po(),r.flags|=256,Ds(n,r,o,c),r.child}var Cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nm(n){return{baseLanes:n,cachePool:Y0()}}function Am(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Er),n}function o1(n,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,x;if((x=m)||(x=n!==null&&n.memoizedState===null?!1:(cs.current&2)!==0),x&&(f=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,n===null){if(Jt){if(f?Ea(r):Ta(),(n=Pn)?(n=pb(n,Hr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ya!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=B0(n),o.return=r,r.child=o,Is=r,Pn=null)):n=null,n===null)throw ba(r);return hp(n)?r.lanes=32:r.lanes=536870912,null}var j=c.children;return c=c.fallback,f?(Ta(),f=r.mode,j=Sd({mode:"hidden",children:j},f),c=mo(c,f,o,null),j.return=r,c.return=r,j.sibling=c,r.child=j,c=r.child,c.memoizedState=Nm(o),c.childLanes=Am(n,x,o),r.memoizedState=Cm,Tc(null,c)):(Ea(r),Rm(r,j))}var U=n.memoizedState;if(U!==null&&(j=U.dehydrated,j!==null)){if(m)r.flags&256?(Ea(r),r.flags&=-257,r=Im(n,r,o)):r.memoizedState!==null?(Ta(),r.child=n.child,r.flags|=128,r=null):(Ta(),j=c.fallback,f=r.mode,c=Sd({mode:"visible",children:c.children},f),j=mo(j,f,o,null),j.flags|=2,c.return=r,j.return=r,c.sibling=j,r.child=c,xo(r,n.child,null,o),c=r.child,c.memoizedState=Nm(o),c.childLanes=Am(n,x,o),r.memoizedState=Cm,r=Tc(null,c));else if(Ea(r),hp(j)){if(x=j.nextSibling&&j.nextSibling.dataset,x)var ne=x.dgst;x=ne,c=Error(i(419)),c.stack="",c.digest=x,fc({value:c,source:null,stack:null}),r=Im(n,r,o)}else if(gs||ll(n,r,o,!1),x=(o&n.childLanes)!==0,gs||x){if(x=Nn,x!==null&&(c=Rn(x,o),c!==0&&c!==U.retryLane))throw U.retryLane=c,fo(n,c),fr(x,n,c),jm;dp(j)||Od(),r=Im(n,r,o)}else dp(j)?(r.flags|=192,r.child=n.child,r=null):(n=U.treeContext,Pn=$r(j.nextSibling),Is=r,Jt=!0,va=null,Hr=!1,n!==null&&q0(r,n),r=Rm(r,c.children),r.flags|=4096);return r}return f?(Ta(),j=c.fallback,f=r.mode,U=n.child,ne=U.sibling,c=Pi(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,ne!==null?j=Pi(ne,j):(j=mo(j,f,o,null),j.flags|=2),j.return=r,c.return=r,c.sibling=j,r.child=c,Tc(null,c),c=r.child,j=n.child.memoizedState,j===null?j=Nm(o):(f=j.cachePool,f!==null?(U=ms._currentValue,f=f.parent!==U?{parent:U,pool:U}:f):f=Y0(),j={baseLanes:j.baseLanes|o,cachePool:f}),c.memoizedState=j,c.childLanes=Am(n,x,o),r.memoizedState=Cm,Tc(n.child,c)):(Ea(r),o=n.child,n=o.sibling,o=Pi(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,n!==null&&(x=r.deletions,x===null?(r.deletions=[n],r.flags|=16):x.push(n)),r.child=o,r.memoizedState=null,o)}function Rm(n,r){return r=Sd({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Sd(n,r){return n=wr(22,n,null,r),n.lanes=0,n}function Im(n,r,o){return xo(r,n.child,null,o),n=Rm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function l1(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Gf(n.return,r,o)}function Mm(n,r,o,c,f,m){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=f,x.treeForkCount=m)}function c1(n,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var x=cs.current,j=(x&2)!==0;if(j?(x=x&1|2,r.flags|=128):x&=1,ve(cs,x),Ds(n,r,c,o),c=Jt?hc:0,!j&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&l1(n,o,r);else if(n.tag===19)l1(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&pd(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Mm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&pd(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Mm(r,!0,o,null,m,c);break;case"together":Mm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function qi(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Ca|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(ll(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Pi(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Pi(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Dm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&od(n)))}function _T(n,r,o){switch(r.tag){case 3:st(r,r.stateNode.containerInfo),wa(r,ms,n.memoizedState.cache),po();break;case 27:case 5:qt(r);break;case 4:st(r,r.stateNode.containerInfo);break;case 10:wa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,im(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ea(r),r.flags|=128,null):(o&r.child.childLanes)!==0?o1(n,r,o):(Ea(r),n=qi(n,r,o),n!==null?n.sibling:null);Ea(r);break;case 19:var f=(n.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(ll(n,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return c1(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ve(cs,cs.current),c)break;return null;case 22:return r.lanes=0,t1(n,r,o,r.pendingProps);case 24:wa(r,ms,n.memoizedState.cache)}return qi(n,r,o)}function u1(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)gs=!0;else{if(!Dm(n,o)&&(r.flags&128)===0)return gs=!1,_T(n,r,o);gs=(n.flags&131072)!==0}else gs=!1,Jt&&(r.flags&1048576)!==0&&F0(r,hc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=bo(r.elementType),r.type=n,typeof n=="function")Uf(n)?(c=ko(n,c),r.tag=1,r=i1(null,r,n,c,o)):(r.tag=0,r=Sm(null,r,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===ue){r.tag=11,r=Jv(null,r,n,c,o);break e}else if(f===C){r.tag=14,r=Zv(null,r,n,c,o);break e}}throw r=Ue(n)||n,Error(i(306,r,""))}}return r;case 0:return Sm(n,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=ko(c,r.pendingProps),i1(n,r,c,f,o);case 3:e:{if(st(r,r.stateNode.containerInfo),n===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,em(n,r),wc(r,c,null,o);var x=r.memoizedState;if(c=x.cache,wa(r,ms,c),c!==m.cache&&Kf(r,[ms],o,!0),bc(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=a1(n,r,c,o);break e}else if(c!==f){f=zr(Error(i(424)),r),fc(f),r=a1(n,r,c,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Pn=$r(n.firstChild),Is=r,Jt=!0,va=null,Hr=!0,o=tv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(po(),c===f){r=qi(n,r,o);break e}Ds(n,r,c,o)}r=r.child}return r;case 26:return jd(n,r),n===null?(o=xb(r.type,null,r.pendingProps,null))?r.memoizedState=o:Jt||(o=r.type,n=r.pendingProps,c=qd(ke.current).createElement(o),c[tn]=r,c[In]=n,Ls(c,o,n),Ht(c),r.stateNode=c):r.memoizedState=xb(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return qt(r),n===null&&Jt&&(c=r.stateNode=vb(r.type,r.pendingProps,ke.current),Is=r,Hr=!0,f=Pn,Ma(r.type)?(fp=f,Pn=$r(c.firstChild)):Pn=f),Ds(n,r,r.pendingProps.children,o),jd(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Jt&&((f=c=Pn)&&(c=JT(c,r.type,r.pendingProps,Hr),c!==null?(r.stateNode=c,Is=r,Pn=$r(c.firstChild),Hr=!1,f=!0):f=!1),f||ba(r)),qt(r),f=r.type,m=r.pendingProps,x=n!==null?n.memoizedProps:null,c=m.children,lp(f,m)?c=null:x!==null&&lp(f,x)&&(r.flags|=32),r.memoizedState!==null&&(f=om(n,r,fT,null,null,o),Bc._currentValue=f),jd(n,r),Ds(n,r,c,o),r.child;case 6:return n===null&&Jt&&((n=o=Pn)&&(o=ZT(o,r.pendingProps,Hr),o!==null?(r.stateNode=o,Is=r,Pn=null,n=!0):n=!1),n||ba(r)),null;case 13:return o1(n,r,o);case 4:return st(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=xo(r,null,c,o):Ds(n,r,c,o),r.child;case 11:return Jv(n,r,r.type,r.pendingProps,o);case 7:return Ds(n,r,r.pendingProps,o),r.child;case 8:return Ds(n,r,r.pendingProps.children,o),r.child;case 12:return Ds(n,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,wa(r,r.type,c.value),Ds(n,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,yo(r),f=Ms(f),c=c(f),r.flags|=1,Ds(n,r,c,o),r.child;case 14:return Zv(n,r,r.type,r.pendingProps,o);case 15:return e1(n,r,r.type,r.pendingProps,o);case 19:return c1(n,r,o);case 31:return xT(n,r,o);case 22:return t1(n,r,o,r.pendingProps);case 24:return yo(r),c=Ms(ms),n===null?(f=Xf(),f===null&&(f=Nn,m=Yf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},Zf(r),wa(r,ms,f)):((n.lanes&o)!==0&&(em(n,r),wc(r,null,null,o),bc()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),wa(r,ms,c)):(c=m.cache,wa(r,ms,c),c!==f.cache&&Kf(r,[ms],o,!0))),Ds(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Hi(n){n.flags|=4}function Lm(n,r,o,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(P1())n.flags|=8192;else throw wo=dd,Jf}else n.flags&=-16777217}function d1(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!jb(r))if(P1())n.flags|=8192;else throw wo=dd,Jf}function Cd(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?oe():536870912,n.lanes|=r,wl|=r)}function jc(n,r){if(!Jt)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Vn(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function kT(n,r,o){var c=r.pendingProps;switch(qf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(r),null;case 1:return Vn(r),null;case 3:return o=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Bi(ms),Pe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ol(r)?Hi(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wf())),Vn(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?(Hi(r),m!==null?(Vn(r),d1(r,m)):(Vn(r),Lm(r,f,null,c,o))):m?m!==n.memoizedState?(Hi(r),Vn(r),d1(r,m)):(Vn(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&Hi(r),Vn(r),Lm(r,f,n,c,o)),null;case 27:if(un(r),o=ke.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Hi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Vn(r),null}n=_e.current,ol(r)?H0(r):(n=vb(f,c,o),r.stateNode=n,Hi(r))}return Vn(r),null;case 5:if(un(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Hi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Vn(r),null}if(m=_e.current,ol(r))H0(r);else{var x=qd(ke.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}m[tn]=r,m[In]=c;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=m;e:switch(Ls(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Hi(r)}}return Vn(r),Lm(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&Hi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=ke.current,ol(r)){if(n=r.stateNode,o=r.memoizedProps,c=null,f=Is,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[tn]=r,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||ob(n.nodeValue,o)),n||ba(r,!0)}else n=qd(n).createTextNode(c),n[tn]=r,r.stateNode=n}return Vn(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(c=ol(r),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[tn]=r}else po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Vn(r),n=!1}else o=Wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(_r(r),r):(_r(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Vn(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ol(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[tn]=r}else po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Vn(r),f=!1}else f=Wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(_r(r),r):(_r(r),null)}return _r(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),Cd(r,r.updateQueue),Vn(r),null);case 4:return Pe(),n===null&&sp(r.stateNode.containerInfo),Vn(r),null;case 10:return Bi(r.type),Vn(r),null;case 19:if(re(cs),c=r.memoizedState,c===null)return Vn(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)jc(c,!1);else{if(es!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=pd(n),m!==null){for(r.flags|=128,jc(c,!1),n=m.updateQueue,r.updateQueue=n,Cd(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)U0(o,n),o=o.sibling;return ve(cs,cs.current&1|2),Jt&&Vi(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&wt()>Md&&(r.flags|=128,f=!0,jc(c,!1),r.lanes=4194304)}else{if(!f)if(n=pd(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Cd(r,n),jc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Jt)return Vn(r),null}else 2*wt()-c.renderingStartTime>Md&&o!==536870912&&(r.flags|=128,f=!0,jc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(n=c.last,n!==null?n.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=wt(),n.sibling=null,o=cs.current,ve(cs,f?o&1|2:o&1),Jt&&Vi(r,c.treeForkCount),n):(Vn(r),null);case 22:case 23:return _r(r),rm(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Vn(r),r.subtreeFlags&6&&(r.flags|=8192)):Vn(r),o=r.updateQueue,o!==null&&Cd(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),n!==null&&re(vo),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Bi(ms),Vn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function ET(n,r){switch(qf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Bi(ms),Pe(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return un(r),null;case 31:if(r.memoizedState!==null){if(_r(r),r.alternate===null)throw Error(i(340));po()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(_r(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));po()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return re(cs),null;case 4:return Pe(),null;case 10:return Bi(r.type),null;case 22:case 23:return _r(r),rm(),n!==null&&re(vo),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Bi(ms),null;case 25:return null;default:return null}}function h1(n,r){switch(qf(r),r.tag){case 3:Bi(ms),Pe();break;case 26:case 27:case 5:un(r);break;case 4:Pe();break;case 31:r.memoizedState!==null&&_r(r);break;case 13:_r(r);break;case 19:re(cs);break;case 10:Bi(r.type);break;case 22:case 23:_r(r),rm(),n!==null&&re(vo);break;case 24:Bi(ms)}}function Sc(n,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var m=o.create,x=o.inst;c=m(),x.destroy=c}o=o.next}while(o!==f)}}catch(j){xn(r,r.return,j)}}function ja(n,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var x=c.inst,j=x.destroy;if(j!==void 0){x.destroy=void 0,f=r;var U=o,ne=j;try{ne()}catch(fe){xn(f,U,fe)}}}c=c.next}while(c!==m)}}catch(fe){xn(r,r.return,fe)}}function f1(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{sv(r,o)}catch(c){xn(n,n.return,c)}}}function m1(n,r,o){o.props=ko(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){xn(n,r,c)}}function Cc(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){xn(n,r,f)}}function wi(n,r){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){xn(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){xn(n,r,f)}else o.current=null}function p1(n){var r=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){xn(n,n.return,f)}}function Om(n,r,o){try{var c=n.stateNode;$T(c,n.type,o,r),c[In]=r}catch(f){xn(n,n.return,f)}}function g1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ma(n.type)||n.tag===4}function Pm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||g1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ma(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Vm(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ht));else if(c!==4&&(c===27&&Ma(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Vm(n,r,o),n=n.sibling;n!==null;)Vm(n,r,o),n=n.sibling}function Nd(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&(c===27&&Ma(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Nd(n,r,o),n=n.sibling;n!==null;)Nd(n,r,o),n=n.sibling}function y1(n){var r=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Ls(r,c,o),r[tn]=n,r[In]=o}catch(m){xn(n,n.return,m)}}var Wi=!1,ys=!1,Um=!1,v1=typeof WeakSet=="function"?WeakSet:Set,js=null;function TT(n,r){if(n=n.containerInfo,ap=Qd,n=A0(n),If(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,j=-1,U=-1,ne=0,fe=0,xe=n,ie=null;t:for(;;){for(var he;xe!==o||f!==0&&xe.nodeType!==3||(j=x+f),xe!==m||c!==0&&xe.nodeType!==3||(U=x+c),xe.nodeType===3&&(x+=xe.nodeValue.length),(he=xe.firstChild)!==null;)ie=xe,xe=he;for(;;){if(xe===n)break t;if(ie===o&&++ne===f&&(j=x),ie===m&&++fe===c&&(U=x),(he=xe.nextSibling)!==null)break;xe=ie,ie=xe.parentNode}xe=he}o=j===-1||U===-1?null:{start:j,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(op={focusedElem:n,selectionRange:o},Qd=!1,js=r;js!==null;)if(r=js,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,js=n;else for(;js!==null;){switch(r=js,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var Ze=ko(o.type,f);n=c.getSnapshotBeforeUpdate(Ze,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(ft){xn(o,o.return,ft)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)up(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":up(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,js=n;break}js=r.return}}function b1(n,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Gi(n,o),c&4&&Sc(5,o);break;case 1:if(Gi(n,o),c&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(x){xn(o,o.return,x)}else{var f=ko(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(x){xn(o,o.return,x)}}c&64&&f1(o),c&512&&Cc(o,o.return);break;case 3:if(Gi(n,o),c&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{sv(n,r)}catch(x){xn(o,o.return,x)}}break;case 27:r===null&&c&4&&y1(o);case 26:case 5:Gi(n,o),r===null&&c&4&&p1(o),c&512&&Cc(o,o.return);break;case 12:Gi(n,o);break;case 31:Gi(n,o),c&4&&_1(n,o);break;case 13:Gi(n,o),c&4&&k1(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=DT.bind(null,o),ej(n,o))));break;case 22:if(c=o.memoizedState!==null||Wi,!c){r=r!==null&&r.memoizedState!==null||ys,f=Wi;var m=ys;Wi=c,(ys=r)&&!m?Ki(n,o,(o.subtreeFlags&8772)!==0):Gi(n,o),Wi=f,ys=m}break;case 30:break;default:Gi(n,o)}}function w1(n){var r=n.alternate;r!==null&&(n.alternate=null,w1(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Js(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var $n=null,cr=!1;function $i(n,r,o){for(o=o.child;o!==null;)x1(n,r,o),o=o.sibling}function x1(n,r,o){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(at,o)}catch{}switch(o.tag){case 26:ys||wi(o,r),$i(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ys||wi(o,r);var c=$n,f=cr;Ma(o.type)&&($n=o.stateNode,cr=!1),$i(n,r,o),Pc(o.stateNode),$n=c,cr=f;break;case 5:ys||wi(o,r);case 6:if(c=$n,f=cr,$n=null,$i(n,r,o),$n=c,cr=f,$n!==null)if(cr)try{($n.nodeType===9?$n.body:$n.nodeName==="HTML"?$n.ownerDocument.body:$n).removeChild(o.stateNode)}catch(m){xn(o,r,m)}else try{$n.removeChild(o.stateNode)}catch(m){xn(o,r,m)}break;case 18:$n!==null&&(cr?(n=$n,fb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Cl(n)):fb($n,o.stateNode));break;case 4:c=$n,f=cr,$n=o.stateNode.containerInfo,cr=!0,$i(n,r,o),$n=c,cr=f;break;case 0:case 11:case 14:case 15:ja(2,o,r),ys||ja(4,o,r),$i(n,r,o);break;case 1:ys||(wi(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&m1(o,r,c)),$i(n,r,o);break;case 21:$i(n,r,o);break;case 22:ys=(c=ys)||o.memoizedState!==null,$i(n,r,o),ys=c;break;default:$i(n,r,o)}}function _1(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Cl(n)}catch(o){xn(r,r.return,o)}}}function k1(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Cl(n)}catch(o){xn(r,r.return,o)}}function jT(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new v1),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new v1),r;default:throw Error(i(435,n.tag))}}function Ad(n,r){var o=jT(n);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=LT.bind(null,n,c);c.then(f,f)}})}function ur(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=n,x=r,j=x;e:for(;j!==null;){switch(j.tag){case 27:if(Ma(j.type)){$n=j.stateNode,cr=!1;break e}break;case 5:$n=j.stateNode,cr=!1;break e;case 3:case 4:$n=j.stateNode.containerInfo,cr=!0;break e}j=j.return}if($n===null)throw Error(i(160));x1(m,x,f),$n=null,cr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)E1(r,n),r=r.sibling}var si=null;function E1(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ur(r,n),dr(n),c&4&&(ja(3,n,n.return),Sc(3,n),ja(5,n,n.return));break;case 1:ur(r,n),dr(n),c&512&&(ys||o===null||wi(o,o.return)),c&64&&Wi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=si;if(ur(r,n),dr(n),c&512&&(ys||o===null||wi(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[qn]||m[tn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Ls(m,c,o),m[tn]=n,Ht(m),c=m;break e;case"link":var x=Eb("link","href",f).get(c+(o.href||""));if(x){for(var j=0;j<x.length;j++)if(m=x[j],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(j,1);break t}}m=f.createElement(c),Ls(m,c,o),f.head.appendChild(m);break;case"meta":if(x=Eb("meta","content",f).get(c+(o.content||""))){for(j=0;j<x.length;j++)if(m=x[j],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(j,1);break t}}m=f.createElement(c),Ls(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[tn]=n,Ht(m),c=m}n.stateNode=c}else Tb(f,n.type,n.stateNode);else n.stateNode=kb(f,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?Tb(f,n.type,n.stateNode):kb(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Om(n,n.memoizedProps,o.memoizedProps)}break;case 27:ur(r,n),dr(n),c&512&&(ys||o===null||wi(o,o.return)),o!==null&&c&4&&Om(n,n.memoizedProps,o.memoizedProps);break;case 5:if(ur(r,n),dr(n),c&512&&(ys||o===null||wi(o,o.return)),n.flags&32){f=n.stateNode;try{S(f,"")}catch(Ze){xn(n,n.return,Ze)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Om(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Um=!0);break;case 6:if(ur(r,n),dr(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Ze){xn(n,n.return,Ze)}}break;case 3:if($d=null,f=si,si=Hd(r.containerInfo),ur(r,n),si=f,dr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Cl(r.containerInfo)}catch(Ze){xn(n,n.return,Ze)}Um&&(Um=!1,T1(n));break;case 4:c=si,si=Hd(n.stateNode.containerInfo),ur(r,n),dr(n),si=c;break;case 12:ur(r,n),dr(n);break;case 31:ur(r,n),dr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ad(n,c)));break;case 13:ur(r,n),dr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Id=wt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ad(n,c)));break;case 22:f=n.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,ne=Wi,fe=ys;if(Wi=ne||f,ys=fe||U,ur(r,n),ys=fe,Wi=ne,dr(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||U||Wi||ys||Eo(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){U=o=r;try{if(m=U.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{j=U.stateNode;var xe=U.memoizedProps.style,ie=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;j.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Ze){xn(U,U.return,Ze)}}}else if(r.tag===6){if(o===null){U=r;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(Ze){xn(U,U.return,Ze)}}}else if(r.tag===18){if(o===null){U=r;try{var he=U.stateNode;f?mb(he,!0):mb(U.stateNode,!1)}catch(Ze){xn(U,U.return,Ze)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Ad(n,o))));break;case 19:ur(r,n),dr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ad(n,c)));break;case 30:break;case 21:break;default:ur(r,n),dr(n)}}function dr(n){var r=n.flags;if(r&2){try{for(var o,c=n.return;c!==null;){if(g1(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Pm(n);Nd(n,m,f);break;case 5:var x=o.stateNode;o.flags&32&&(S(x,""),o.flags&=-33);var j=Pm(n);Nd(n,j,x);break;case 3:case 4:var U=o.stateNode.containerInfo,ne=Pm(n);Vm(n,ne,U);break;default:throw Error(i(161))}}catch(fe){xn(n,n.return,fe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function T1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;T1(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Gi(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)b1(n,r.alternate,r),r=r.sibling}function Eo(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:ja(4,r,r.return),Eo(r);break;case 1:wi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&m1(r,r.return,o),Eo(r);break;case 27:Pc(r.stateNode);case 26:case 5:wi(r,r.return),Eo(r);break;case 22:r.memoizedState===null&&Eo(r);break;case 30:Eo(r);break;default:Eo(r)}n=n.sibling}}function Ki(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,x=m.flags;switch(m.tag){case 0:case 11:case 15:Ki(f,m,o),Sc(4,m);break;case 1:if(Ki(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ne){xn(c,c.return,ne)}if(c=m,f=c.updateQueue,f!==null){var j=c.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)nv(U[f],j)}catch(ne){xn(c,c.return,ne)}}o&&x&64&&f1(m),Cc(m,m.return);break;case 27:y1(m);case 26:case 5:Ki(f,m,o),o&&c===null&&x&4&&p1(m),Cc(m,m.return);break;case 12:Ki(f,m,o);break;case 31:Ki(f,m,o),o&&x&4&&_1(f,m);break;case 13:Ki(f,m,o),o&&x&4&&k1(f,m);break;case 22:m.memoizedState===null&&Ki(f,m,o),Cc(m,m.return);break;case 30:break;default:Ki(f,m,o)}r=r.sibling}}function Bm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&mc(o))}function zm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&mc(n))}function ri(n,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)j1(n,r,o,c),r=r.sibling}function j1(n,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ri(n,r,o,c),f&2048&&Sc(9,r);break;case 1:ri(n,r,o,c);break;case 3:ri(n,r,o,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&mc(n)));break;case 12:if(f&2048){ri(n,r,o,c),n=r.stateNode;try{var m=r.memoizedProps,x=m.id,j=m.onPostCommit;typeof j=="function"&&j(x,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(U){xn(r,r.return,U)}}else ri(n,r,o,c);break;case 31:ri(n,r,o,c);break;case 13:ri(n,r,o,c);break;case 23:break;case 22:m=r.stateNode,x=r.alternate,r.memoizedState!==null?m._visibility&2?ri(n,r,o,c):Nc(n,r):m._visibility&2?ri(n,r,o,c):(m._visibility|=2,yl(n,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Bm(x,r);break;case 24:ri(n,r,o,c),f&2048&&zm(r.alternate,r);break;default:ri(n,r,o,c)}}function yl(n,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,x=r,j=o,U=c,ne=x.flags;switch(x.tag){case 0:case 11:case 15:yl(m,x,j,U,f),Sc(8,x);break;case 23:break;case 22:var fe=x.stateNode;x.memoizedState!==null?fe._visibility&2?yl(m,x,j,U,f):Nc(m,x):(fe._visibility|=2,yl(m,x,j,U,f)),f&&ne&2048&&Bm(x.alternate,x);break;case 24:yl(m,x,j,U,f),f&&ne&2048&&zm(x.alternate,x);break;default:yl(m,x,j,U,f)}r=r.sibling}}function Nc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,c=r,f=c.flags;switch(c.tag){case 22:Nc(o,c),f&2048&&Bm(c.alternate,c);break;case 24:Nc(o,c),f&2048&&zm(c.alternate,c);break;default:Nc(o,c)}r=r.sibling}}var Ac=8192;function vl(n,r,o){if(n.subtreeFlags&Ac)for(n=n.child;n!==null;)S1(n,r,o),n=n.sibling}function S1(n,r,o){switch(n.tag){case 26:vl(n,r,o),n.flags&Ac&&n.memoizedState!==null&&hj(o,si,n.memoizedState,n.memoizedProps);break;case 5:vl(n,r,o);break;case 3:case 4:var c=si;si=Hd(n.stateNode.containerInfo),vl(n,r,o),si=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Ac,Ac=16777216,vl(n,r,o),Ac=c):vl(n,r,o));break;default:vl(n,r,o)}}function C1(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Rc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];js=c,A1(c,n)}C1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)N1(n),n=n.sibling}function N1(n){switch(n.tag){case 0:case 11:case 15:Rc(n),n.flags&2048&&ja(9,n,n.return);break;case 3:Rc(n);break;case 12:Rc(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Rd(n)):Rc(n);break;default:Rc(n)}}function Rd(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];js=c,A1(c,n)}C1(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:ja(8,r,r.return),Rd(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Rd(r));break;default:Rd(r)}n=n.sibling}}function A1(n,r){for(;js!==null;){var o=js;switch(o.tag){case 0:case 11:case 15:ja(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:mc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,js=c;else e:for(o=n;js!==null;){c=js;var f=c.sibling,m=c.return;if(w1(c),c===o){js=null;break e}if(f!==null){f.return=m,js=f;break e}js=m}}}var ST={getCacheForType:function(n){var r=Ms(ms),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return Ms(ms).controller.signal}},CT=typeof WeakMap=="function"?WeakMap:Map,pn=0,Nn=null,zt=null,$t=0,wn=0,kr=null,Sa=!1,bl=!1,Fm=!1,Yi=0,es=0,Ca=0,To=0,qm=0,Er=0,wl=0,Ic=null,hr=null,Hm=!1,Id=0,R1=0,Md=1/0,Dd=null,Na=null,Es=0,Aa=null,xl=null,Qi=0,Wm=0,$m=null,I1=null,Mc=0,Gm=null;function Tr(){return(pn&2)!==0&&$t!==0?$t&-$t:Z.T!==null?Zm():As()}function M1(){if(Er===0)if(($t&536870912)===0||Jt){var n=Xn;Xn<<=1,(Xn&3932160)===0&&(Xn=262144),Er=n}else Er=536870912;return n=xr.current,n!==null&&(n.flags|=32),Er}function fr(n,r,o){(n===Nn&&(wn===2||wn===9)||n.cancelPendingCommit!==null)&&(_l(n,0),Ra(n,$t,Er,!1)),Ye(n,o),((pn&2)===0||n!==Nn)&&(n===Nn&&((pn&2)===0&&(To|=o),es===4&&Ra(n,$t,Er,!1)),xi(n))}function D1(n,r,o){if((pn&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&n.expiredLanes)===0||hn(n,r),f=c?RT(n,r):Ym(n,r,!0),m=c;do{if(f===0){bl&&!c&&Ra(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!NT(o)){f=Ym(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var j=n;f=Ic;var U=j.current.memoizedState.isDehydrated;if(U&&(_l(j,x).flags|=256),x=Ym(j,x,!1),x!==2){if(Fm&&!U){j.errorRecoveryDisabledLanes|=m,To|=m,f=4;break e}m=hr,hr=f,m!==null&&(hr===null?hr=m:hr.push.apply(hr,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){_l(n,0),Ra(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ra(c,r,Er,!Sa);break e;case 2:hr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Id+300-wt(),10<f)){if(Ra(c,r,Er,!Sa),An(c,0,!0)!==0)break e;Qi=r,c.timeoutHandle=db(L1.bind(null,c,o,hr,Dd,Hm,r,Er,To,wl,Sa,m,"Throttled",-0,0),f);break e}L1(c,o,hr,Dd,Hm,r,Er,To,wl,Sa,m,null,-0,0)}}break}while(!0);xi(n)}function L1(n,r,o,c,f,m,x,j,U,ne,fe,xe,ie,he){if(n.timeoutHandle=-1,xe=r.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ht},S1(r,m,xe);var Ze=(m&62914560)===m?Id-wt():(m&4194048)===m?R1-wt():0;if(Ze=fj(xe,Ze),Ze!==null){Qi=m,n.cancelPendingCommit=Ze(q1.bind(null,n,r,m,o,c,f,x,j,U,fe,xe,null,ie,he)),Ra(n,m,x,!ne);return}}q1(n,r,m,o,c,f,x,j,U)}function NT(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!br(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ra(n,r,o,c){r&=~qm,r&=~To,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-qe(f),x=1<<m;c[m]=-1,f&=~x}o!==0&&ct(n,o,r)}function Ld(){return(pn&6)===0?(Dc(0),!1):!0}function Km(){if(zt!==null){if(wn===0)var n=zt.return;else n=zt,Ui=go=null,um(n),hl=null,gc=0,n=zt;for(;n!==null;)h1(n.alternate,n),n=n.return;zt=null}}function _l(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,YT(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Qi=0,Km(),Nn=n,zt=o=Pi(n.current,null),$t=r,wn=0,kr=null,Sa=!1,bl=hn(n,r),Fm=!1,wl=Er=qm=To=Ca=es=0,hr=Ic=null,Hm=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-qe(c),m=1<<f;r|=n[f],c&=~m}return Yi=r,nd(),o}function O1(n,r){Lt=null,Z.H=Ec,r===dl||r===ud?(r=J0(),wn=3):r===Jf?(r=J0(),wn=4):wn=r===jm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,kr=r,zt===null&&(es=1,Ed(n,zr(r,n.current)))}function P1(){var n=xr.current;return n===null?!0:($t&4194048)===$t?Wr===null:($t&62914560)===$t||($t&536870912)!==0?n===Wr:!1}function V1(){var n=Z.H;return Z.H=Ec,n===null?Ec:n}function U1(){var n=Z.A;return Z.A=ST,n}function Od(){es=4,Sa||($t&4194048)!==$t&&xr.current!==null||(bl=!0),(Ca&134217727)===0&&(To&134217727)===0||Nn===null||Ra(Nn,$t,Er,!1)}function Ym(n,r,o){var c=pn;pn|=2;var f=V1(),m=U1();(Nn!==n||$t!==r)&&(Dd=null,_l(n,r)),r=!1;var x=es;e:do try{if(wn!==0&&zt!==null){var j=zt,U=kr;switch(wn){case 8:Km(),x=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(r=!0);var ne=wn;if(wn=0,kr=null,kl(n,j,U,ne),o&&bl){x=0;break e}break;default:ne=wn,wn=0,kr=null,kl(n,j,U,ne)}}AT(),x=es;break}catch(fe){O1(n,fe)}while(!0);return r&&n.shellSuspendCounter++,Ui=go=null,pn=c,Z.H=f,Z.A=m,zt===null&&(Nn=null,$t=0,nd()),x}function AT(){for(;zt!==null;)B1(zt)}function RT(n,r){var o=pn;pn|=2;var c=V1(),f=U1();Nn!==n||$t!==r?(Dd=null,Md=wt()+500,_l(n,r)):bl=hn(n,r);e:do try{if(wn!==0&&zt!==null){r=zt;var m=kr;t:switch(wn){case 1:wn=0,kr=null,kl(n,r,m,1);break;case 2:case 9:if(Q0(m)){wn=0,kr=null,z1(r);break}r=function(){wn!==2&&wn!==9||Nn!==n||(wn=7),xi(n)},m.then(r,r);break e;case 3:wn=7;break e;case 4:wn=5;break e;case 7:Q0(m)?(wn=0,kr=null,z1(r)):(wn=0,kr=null,kl(n,r,m,7));break;case 5:var x=null;switch(zt.tag){case 26:x=zt.memoizedState;case 5:case 27:var j=zt;if(x?jb(x):j.stateNode.complete){wn=0,kr=null;var U=j.sibling;if(U!==null)zt=U;else{var ne=j.return;ne!==null?(zt=ne,Pd(ne)):zt=null}break t}}wn=0,kr=null,kl(n,r,m,5);break;case 6:wn=0,kr=null,kl(n,r,m,6);break;case 8:Km(),es=6;break e;default:throw Error(i(462))}}IT();break}catch(fe){O1(n,fe)}while(!0);return Ui=go=null,Z.H=c,Z.A=f,pn=o,zt!==null?0:(Nn=null,$t=0,nd(),es)}function IT(){for(;zt!==null&&!et();)B1(zt)}function B1(n){var r=u1(n.alternate,n,Yi);n.memoizedProps=n.pendingProps,r===null?Pd(n):zt=r}function z1(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=r1(o,r,r.pendingProps,r.type,void 0,$t);break;case 11:r=r1(o,r,r.pendingProps,r.type.render,r.ref,$t);break;case 5:um(r);default:h1(o,r),r=zt=U0(r,Yi),r=u1(o,r,Yi)}n.memoizedProps=n.pendingProps,r===null?Pd(n):zt=r}function kl(n,r,o,c){Ui=go=null,um(r),hl=null,gc=0;var f=r.return;try{if(wT(n,f,r,o,$t)){es=1,Ed(n,zr(o,n.current)),zt=null;return}}catch(m){if(f!==null)throw zt=f,m;es=1,Ed(n,zr(o,n.current)),zt=null;return}r.flags&32768?(Jt||c===1?n=!0:bl||($t&536870912)!==0?n=!1:(Sa=n=!0,(c===2||c===9||c===3||c===6)&&(c=xr.current,c!==null&&c.tag===13&&(c.flags|=16384))),F1(r,n)):Pd(r)}function Pd(n){var r=n;do{if((r.flags&32768)!==0){F1(r,Sa);return}n=r.return;var o=kT(r.alternate,r,Yi);if(o!==null){zt=o;return}if(r=r.sibling,r!==null){zt=r;return}zt=r=n}while(r!==null);es===0&&(es=5)}function F1(n,r){do{var o=ET(n.alternate,n);if(o!==null){o.flags&=32767,zt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){zt=n;return}zt=n=o}while(n!==null);es=6,zt=null}function q1(n,r,o,c,f,m,x,j,U){n.cancelPendingCommit=null;do Vd();while(Es!==0);if((pn&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Pf,gt(n,o,m,x,j,U),n===Nn&&(zt=Nn=null,$t=0),xl=r,Aa=n,Qi=o,Wm=m,$m=f,I1=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,OT(en,function(){return K1(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,f=je.p,je.p=2,x=pn,pn|=4;try{TT(n,r,o)}finally{pn=x,je.p=f,Z.T=c}}Es=1,H1(),W1(),$1()}}function H1(){if(Es===1){Es=0;var n=Aa,r=xl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Z.T,Z.T=null;var c=je.p;je.p=2;var f=pn;pn|=4;try{E1(r,n);var m=op,x=A0(n.containerInfo),j=m.focusedElem,U=m.selectionRange;if(x!==j&&j&&j.ownerDocument&&N0(j.ownerDocument.documentElement,j)){if(U!==null&&If(j)){var ne=U.start,fe=U.end;if(fe===void 0&&(fe=ne),"selectionStart"in j)j.selectionStart=ne,j.selectionEnd=Math.min(fe,j.value.length);else{var xe=j.ownerDocument||document,ie=xe&&xe.defaultView||window;if(ie.getSelection){var he=ie.getSelection(),Ze=j.textContent.length,ft=Math.min(U.start,Ze),jn=U.end===void 0?ft:Math.min(U.end,Ze);!he.extend&&ft>jn&&(x=jn,jn=ft,ft=x);var G=C0(j,ft),q=C0(j,jn);if(G&&q&&(he.rangeCount!==1||he.anchorNode!==G.node||he.anchorOffset!==G.offset||he.focusNode!==q.node||he.focusOffset!==q.offset)){var ee=xe.createRange();ee.setStart(G.node,G.offset),he.removeAllRanges(),ft>jn?(he.addRange(ee),he.extend(q.node,q.offset)):(ee.setEnd(q.node,q.offset),he.addRange(ee))}}}}for(xe=[],he=j;he=he.parentNode;)he.nodeType===1&&xe.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<xe.length;j++){var ge=xe[j];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}Qd=!!ap,op=ap=null}finally{pn=f,je.p=c,Z.T=o}}n.current=r,Es=2}}function W1(){if(Es===2){Es=0;var n=Aa,r=xl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Z.T,Z.T=null;var c=je.p;je.p=2;var f=pn;pn|=4;try{b1(n,r.alternate,r)}finally{pn=f,je.p=c,Z.T=o}}Es=3}}function $1(){if(Es===4||Es===3){Es=0,It();var n=Aa,r=xl,o=Qi,c=I1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Es=5:(Es=0,xl=Aa=null,G1(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Na=null),kn(o),r=r.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(at,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Z.T,f=je.p,je.p=2,Z.T=null;try{for(var m=n.onRecoverableError,x=0;x<c.length;x++){var j=c[x];m(j.value,{componentStack:j.stack})}}finally{Z.T=r,je.p=f}}(Qi&3)!==0&&Vd(),xi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Gm?Mc++:(Mc=0,Gm=n):Mc=0,Dc(0)}}function G1(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,mc(r)))}function Vd(){return H1(),W1(),$1(),K1()}function K1(){if(Es!==5)return!1;var n=Aa,r=Wm;Wm=0;var o=kn(Qi),c=Z.T,f=je.p;try{je.p=32>o?32:o,Z.T=null,o=$m,$m=null;var m=Aa,x=Qi;if(Es=0,xl=Aa=null,Qi=0,(pn&6)!==0)throw Error(i(331));var j=pn;if(pn|=4,N1(m.current),j1(m,m.current,x,o),pn=j,Dc(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(at,m)}catch{}return!0}finally{je.p=f,Z.T=c,G1(n,r)}}function Y1(n,r,o){r=zr(o,r),r=Tm(n.stateNode,r,2),n=ka(n,r,2),n!==null&&(Ye(n,2),xi(n))}function xn(n,r,o){if(n.tag===3)Y1(n,n,o);else for(;r!==null;){if(r.tag===3){Y1(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Na===null||!Na.has(c))){n=zr(o,n),o=Qv(2),c=ka(r,o,2),c!==null&&(Xv(o,c,r,n),Ye(c,2),xi(c));break}}r=r.return}}function Qm(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new CT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(Fm=!0,f.add(o),n=MT.bind(null,n,r,o),r.then(n,n))}function MT(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Nn===n&&($t&o)===o&&(es===4||es===3&&($t&62914560)===$t&&300>wt()-Id?(pn&2)===0&&_l(n,0):qm|=o,wl===$t&&(wl=0)),xi(n)}function Q1(n,r){r===0&&(r=oe()),n=fo(n,r),n!==null&&(Ye(n,r),xi(n))}function DT(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),Q1(n,o)}function LT(n,r){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Q1(n,o)}function OT(n,r){return bt(n,r)}var Ud=null,El=null,Xm=!1,Bd=!1,Jm=!1,Ia=0;function xi(n){n!==El&&n.next===null&&(El===null?Ud=El=n:El=El.next=n),Bd=!0,Xm||(Xm=!0,VT())}function Dc(n,r){if(!Jm&&Bd){Jm=!0;do for(var o=!1,c=Ud;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var x=c.suspendedLanes,j=c.pingedLanes;m=(1<<31-qe(42|n)+1)-1,m&=f&~(x&~j),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,eb(c,m))}else m=$t,m=An(c,c===Nn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||hn(c,m)||(o=!0,eb(c,m));c=c.next}while(o);Jm=!1}}function PT(){X1()}function X1(){Bd=Xm=!1;var n=0;Ia!==0&&KT()&&(n=Ia);for(var r=wt(),o=null,c=Ud;c!==null;){var f=c.next,m=J1(c,r);m===0?(c.next=null,o===null?Ud=f:o.next=f,f===null&&(El=o)):(o=c,(n!==0||(m&3)!==0)&&(Bd=!0)),c=f}Es!==0&&Es!==5||Dc(n),Ia!==0&&(Ia=0)}function J1(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var x=31-qe(m),j=1<<x,U=f[x];U===-1?((j&o)===0||(j&c)!==0)&&(f[x]=yr(j,r)):U<=r&&(n.expiredLanes|=j),m&=~j}if(r=Nn,o=$t,o=An(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===r&&(wn===2||wn===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Bt(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||hn(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(c!==null&&Bt(c),kn(o)){case 2:case 8:o=rs;break;case 32:o=en;break;case 268435456:o=Ne;break;default:o=en}return c=Z1.bind(null,n),o=bt(o,c),n.callbackPriority=r,n.callbackNode=o,r}return c!==null&&c!==null&&Bt(c),n.callbackPriority=2,n.callbackNode=null,2}function Z1(n,r){if(Es!==0&&Es!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Vd()&&n.callbackNode!==o)return null;var c=$t;return c=An(n,n===Nn?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(D1(n,c,r),J1(n,wt()),n.callbackNode!=null&&n.callbackNode===o?Z1.bind(null,n):null)}function eb(n,r){if(Vd())return null;D1(n,r,!0)}function VT(){QT(function(){(pn&6)!==0?bt(Ns,PT):X1()})}function Zm(){if(Ia===0){var n=cl;n===0&&(n=zn,zn<<=1,(zn&261888)===0&&(zn=256)),Ia=n}return Ia}function tb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:jt(""+n)}function nb(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function UT(n,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=tb((f[In]||null).action),x=c.submitter;x&&(r=(r=x[In]||null)?tb(r.formAction):x.getAttribute("formAction"),r!==null&&(m=r,x=null));var j=new qs("action","action",null,c,f);n.push({event:j,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ia!==0){var U=x?nb(f,x):new FormData(f);bm(o,{pending:!0,data:U,method:f.method,action:m},null,U)}}else typeof m=="function"&&(j.preventDefault(),U=x?nb(f,x):new FormData(f),bm(o,{pending:!0,data:U,method:f.method,action:m},m,U))},currentTarget:f}]})}}for(var ep=0;ep<Of.length;ep++){var tp=Of[ep],BT=tp.toLowerCase(),zT=tp[0].toUpperCase()+tp.slice(1);ni(BT,"on"+zT)}ni(M0,"onAnimationEnd"),ni(D0,"onAnimationIteration"),ni(L0,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(sT,"onTransitionRun"),ni(rT,"onTransitionStart"),ni(iT,"onTransitionCancel"),ni(O0,"onTransitionEnd"),bn("onMouseEnter",["mouseout","mouseover"]),bn("onMouseLeave",["mouseout","mouseover"]),bn("onPointerEnter",["pointerout","pointerover"]),bn("onPointerLeave",["pointerout","pointerover"]),ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function sb(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var x=c.length-1;0<=x;x--){var j=c[x],U=j.instance,ne=j.currentTarget;if(j=j.listener,U!==m&&f.isPropagationStopped())break e;m=j,f.currentTarget=ne;try{m(f)}catch(fe){td(fe)}f.currentTarget=null,m=U}else for(x=0;x<c.length;x++){if(j=c[x],U=j.instance,ne=j.currentTarget,j=j.listener,U!==m&&f.isPropagationStopped())break e;m=j,f.currentTarget=ne;try{m(f)}catch(fe){td(fe)}f.currentTarget=null,m=U}}}}function Ft(n,r){var o=r[Ir];o===void 0&&(o=r[Ir]=new Set);var c=n+"__bubble";o.has(c)||(rb(r,n,2,!1),o.add(c))}function np(n,r,o){var c=0;r&&(c|=4),rb(o,n,c,r)}var zd="_reactListening"+Math.random().toString(36).slice(2);function sp(n){if(!n[zd]){n[zd]=!0,Zr.forEach(function(o){o!=="selectionchange"&&(FT.has(o)||np(o,!1,n),np(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[zd]||(r[zd]=!0,np("selectionchange",!1,r))}}function rb(n,r,o,c){switch(Mb(r)){case 2:var f=gj;break;case 8:f=yj;break;default:f=vp}o=f.bind(null,r,o,n),f=void 0,!Ut||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function rp(n,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var j=c.stateNode.containerInfo;if(j===f)break;if(x===4)for(x=c.return;x!==null;){var U=x.tag;if((U===3||U===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;j!==null;){if(x=_s(j),x===null)return;if(U=x.tag,U===5||U===6||U===26||U===27){c=m=x;continue e}j=j.parentNode}}c=c.return}He(function(){var ne=m,fe=J(o),xe=[];e:{var ie=P0.get(n);if(ie!==void 0){var he=qs,Ze=n;switch(n){case"keypress":if(Jn(o)===0)break e;case"keydown":case"keyup":he=Ju;break;case"focusin":Ze="focus",he=lo;break;case"focusout":Ze="blur",he=lo;break;case"beforeblur":case"afterblur":he=lo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=v;break;case M0:case D0:case L0:he=Wu;break;case O0:he=N;break;case"scroll":case"scrollend":he=Zs;break;case"wheel":he=ce;break;case"copy":case"cut":case"paste":he=$u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Oi;break;case"toggle":case"beforetoggle":he=Dt}var ft=(r&4)!==0,jn=!ft&&(n==="scroll"||n==="scrollend"),G=ft?ie!==null?ie+"Capture":null:ie;ft=[];for(var q=ne,ee;q!==null;){var ge=q;if(ee=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||ee===null||G===null||(ge=yt(q,G),ge!=null&&ft.push(Oc(q,ge,ee))),jn)break;q=q.return}0<ft.length&&(ie=new he(ie,Ze,null,o,fe),xe.push({event:ie,listeners:ft}))}}if((r&7)===0){e:{if(ie=n==="mouseover"||n==="pointerover",he=n==="mouseout"||n==="pointerout",ie&&o!==V&&(Ze=o.relatedTarget||o.fromElement)&&(_s(Ze)||Ze[Rs]))break e;if((he||ie)&&(ie=fe.window===fe?fe:(ie=fe.ownerDocument)?ie.defaultView||ie.parentWindow:window,he?(Ze=o.relatedTarget||o.toElement,he=ne,Ze=Ze?_s(Ze):null,Ze!==null&&(jn=u(Ze),ft=Ze.tag,Ze!==jn||ft!==5&&ft!==27&&ft!==6)&&(Ze=null)):(he=null,Ze=ne),he!==Ze)){if(ft=ac,ge="onMouseLeave",G="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(ft=Oi,ge="onPointerLeave",G="onPointerEnter",q="pointer"),jn=he==null?ie:On(he),ee=Ze==null?ie:On(Ze),ie=new ft(ge,q+"leave",he,o,fe),ie.target=jn,ie.relatedTarget=ee,ge=null,_s(fe)===ne&&(ft=new ft(G,q+"enter",Ze,o,fe),ft.target=ee,ft.relatedTarget=jn,ge=ft),jn=ge,he&&Ze)t:{for(ft=qT,G=he,q=Ze,ee=0,ge=G;ge;ge=ft(ge))ee++;ge=0;for(var ot=q;ot;ot=ft(ot))ge++;for(;0<ee-ge;)G=ft(G),ee--;for(;0<ge-ee;)q=ft(q),ge--;for(;ee--;){if(G===q||q!==null&&G===q.alternate){ft=G;break t}G=ft(G),q=ft(q)}ft=null}else ft=null;he!==null&&ib(xe,ie,he,ft,!1),Ze!==null&&jn!==null&&ib(xe,jn,Ze,ft,!0)}}e:{if(ie=ne?On(ne):window,he=ie.nodeName&&ie.nodeName.toLowerCase(),he==="select"||he==="input"&&ie.type==="file")var ln=_0;else if(w0(ie))if(k0)ln=eT;else{ln=JE;var nt=XE}else he=ie.nodeName,!he||he.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ne&&ze(ne.elementType)&&(ln=_0):ln=ZE;if(ln&&(ln=ln(n,ne))){x0(xe,ln,o,fe);break e}nt&&nt(n,ie,ne),n==="focusout"&&ne&&ie.type==="number"&&ne.memoizedProps.value!=null&&Di(ie,"number",ie.value)}switch(nt=ne?On(ne):window,n){case"focusin":(w0(nt)||nt.contentEditable==="true")&&(tl=nt,Mf=ne,dc=null);break;case"focusout":dc=Mf=tl=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,R0(xe,o,fe);break;case"selectionchange":if(nT)break;case"keydown":case"keyup":R0(xe,o,fe)}var Pt;if(mn)e:{switch(n){case"compositionstart":var Gt="onCompositionStart";break e;case"compositionend":Gt="onCompositionEnd";break e;case"compositionupdate":Gt="onCompositionUpdate";break e}Gt=void 0}else el?co(n,o)&&(Gt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Gt="onCompositionStart");Gt&&(yi&&o.locale!=="ko"&&(el||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&el&&(Pt=Hn()):(nn=fe,zs="value"in nn?nn.value:nn.textContent,el=!0)),nt=Fd(ne,Gt),0<nt.length&&(Gt=new gi(Gt,n,null,o,fe),xe.push({event:Gt,listeners:nt}),Pt?Gt.data=Pt:(Pt=Zo(o),Pt!==null&&(Gt.data=Pt)))),(Pt=Ur?GE(n,o):KE(n,o))&&(Gt=Fd(ne,"onBeforeInput"),0<Gt.length&&(nt=new gi("onBeforeInput","beforeinput",null,o,fe),xe.push({event:nt,listeners:Gt}),nt.data=Pt)),UT(xe,n,ne,o,fe)}sb(xe,r)})}function Oc(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Fd(n,r){for(var o=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=yt(n,o),f!=null&&c.unshift(Oc(n,f,m)),f=yt(n,r),f!=null&&c.push(Oc(n,f,m))),n.tag===3)return c;n=n.return}return[]}function qT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ib(n,r,o,c,f){for(var m=r._reactName,x=[];o!==null&&o!==c;){var j=o,U=j.alternate,ne=j.stateNode;if(j=j.tag,U!==null&&U===c)break;j!==5&&j!==26&&j!==27||ne===null||(U=ne,f?(ne=yt(o,m),ne!=null&&x.unshift(Oc(o,ne,U))):f||(ne=yt(o,m),ne!=null&&x.push(Oc(o,ne,U)))),o=o.return}x.length!==0&&n.push({event:r,listeners:x})}var HT=/\r\n?/g,WT=/\u0000|\uFFFD/g;function ab(n){return(typeof n=="string"?n:""+n).replace(HT,`
`).replace(WT,"")}function ob(n,r){return r=ab(r),ab(n)===r}function Tn(n,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||S(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&S(n,""+c);break;case"className":le(n,"class",c);break;case"tabIndex":le(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":le(n,o,c);break;case"style":Ie(n,c,m);break;case"data":if(r!=="object"){le(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=jt(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&Tn(n,r,"name",f.name,f,null),Tn(n,r,"formEncType",f.formEncType,f,null),Tn(n,r,"formMethod",f.formMethod,f,null),Tn(n,r,"formTarget",f.formTarget,f,null)):(Tn(n,r,"encType",f.encType,f,null),Tn(n,r,"method",f.method,f,null),Tn(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=jt(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=ht);break;case"onScroll":c!=null&&Ft("scroll",n);break;case"onScrollEnd":c!=null&&Ft("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=jt(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ft("beforetoggle",n),Ft("toggle",n),ae(n,"popover",c);break;case"xlinkActuate":Le(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Le(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Le(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Le(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Le(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Le(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Le(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Le(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Le(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ae(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=dt.get(o)||o,ae(n,o,c))}}function ip(n,r,o,c,f,m){switch(o){case"style":Ie(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?S(n,c):(typeof c=="number"||typeof c=="bigint")&&S(n,""+c);break;case"onScroll":c!=null&&Ft("scroll",n);break;case"onScrollEnd":c!=null&&Ft("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ht);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[In]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):ae(n,o,c)}}}function Ls(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ft("error",n),Ft("load",n);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Tn(n,r,m,x,o,null)}}f&&Tn(n,r,"srcSet",o.srcSet,o,null),c&&Tn(n,r,"src",o.src,o,null);return;case"input":Ft("invalid",n);var j=m=x=f=null,U=null,ne=null;for(c in o)if(o.hasOwnProperty(c)){var fe=o[c];if(fe!=null)switch(c){case"name":f=fe;break;case"type":x=fe;break;case"checked":U=fe;break;case"defaultChecked":ne=fe;break;case"value":m=fe;break;case"defaultValue":j=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,r));break;default:Tn(n,r,c,fe,o,null)}}ma(n,m,j,U,ne,x,f,!1);return;case"select":Ft("invalid",n),c=x=m=null;for(f in o)if(o.hasOwnProperty(f)&&(j=o[f],j!=null))switch(f){case"value":m=j;break;case"defaultValue":x=j;break;case"multiple":c=j;default:Tn(n,r,f,j,o,null)}r=m,o=x,n.multiple=!!c,r!=null?Or(n,!!c,r,!1):o!=null&&Or(n,!!c,o,!0);return;case"textarea":Ft("invalid",n),m=f=c=null;for(x in o)if(o.hasOwnProperty(x)&&(j=o[x],j!=null))switch(x){case"value":c=j;break;case"defaultValue":f=j;break;case"children":m=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(91));break;default:Tn(n,r,x,j,o,null)}Pr(n,c,f,m);return;case"option":for(U in o)o.hasOwnProperty(U)&&(c=o[U],c!=null)&&(U==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Tn(n,r,U,c,o,null));return;case"dialog":Ft("beforetoggle",n),Ft("toggle",n),Ft("cancel",n),Ft("close",n);break;case"iframe":case"object":Ft("load",n);break;case"video":case"audio":for(c=0;c<Lc.length;c++)Ft(Lc[c],n);break;case"image":Ft("error",n),Ft("load",n);break;case"details":Ft("toggle",n);break;case"embed":case"source":case"link":Ft("error",n),Ft("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in o)if(o.hasOwnProperty(ne)&&(c=o[ne],c!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Tn(n,r,ne,c,o,null)}return;default:if(ze(r)){for(fe in o)o.hasOwnProperty(fe)&&(c=o[fe],c!==void 0&&ip(n,r,fe,c,o,void 0));return}}for(j in o)o.hasOwnProperty(j)&&(c=o[j],c!=null&&Tn(n,r,j,c,o,null))}function $T(n,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,j=null,U=null,ne=null,fe=null;for(he in o){var xe=o[he];if(o.hasOwnProperty(he)&&xe!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":U=xe;default:c.hasOwnProperty(he)||Tn(n,r,he,null,c,xe)}}for(var ie in c){var he=c[ie];if(xe=o[ie],c.hasOwnProperty(ie)&&(he!=null||xe!=null))switch(ie){case"type":m=he;break;case"name":f=he;break;case"checked":ne=he;break;case"defaultChecked":fe=he;break;case"value":x=he;break;case"defaultValue":j=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,r));break;default:he!==xe&&Tn(n,r,ie,he,c,xe)}}vr(n,x,j,U,ne,fe,m,f);return;case"select":he=x=j=ie=null;for(m in o)if(U=o[m],o.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":he=U;default:c.hasOwnProperty(m)||Tn(n,r,m,null,c,U)}for(f in c)if(m=c[f],U=o[f],c.hasOwnProperty(f)&&(m!=null||U!=null))switch(f){case"value":ie=m;break;case"defaultValue":j=m;break;case"multiple":x=m;default:m!==U&&Tn(n,r,f,m,c,U)}r=j,o=x,c=he,ie!=null?Or(n,!!o,ie,!1):!!c!=!!o&&(r!=null?Or(n,!!o,r,!0):Or(n,!!o,o?[]:"",!1));return;case"textarea":he=ie=null;for(j in o)if(f=o[j],o.hasOwnProperty(j)&&f!=null&&!c.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Tn(n,r,j,null,c,f)}for(x in c)if(f=c[x],m=o[x],c.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":ie=f;break;case"defaultValue":he=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Tn(n,r,x,f,c,m)}pa(n,ie,he);return;case"option":for(var Ze in o)ie=o[Ze],o.hasOwnProperty(Ze)&&ie!=null&&!c.hasOwnProperty(Ze)&&(Ze==="selected"?n.selected=!1:Tn(n,r,Ze,null,c,ie));for(U in c)ie=c[U],he=o[U],c.hasOwnProperty(U)&&ie!==he&&(ie!=null||he!=null)&&(U==="selected"?n.selected=ie&&typeof ie!="function"&&typeof ie!="symbol":Tn(n,r,U,ie,c,he));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ft in o)ie=o[ft],o.hasOwnProperty(ft)&&ie!=null&&!c.hasOwnProperty(ft)&&Tn(n,r,ft,null,c,ie);for(ne in c)if(ie=c[ne],he=o[ne],c.hasOwnProperty(ne)&&ie!==he&&(ie!=null||he!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,r));break;default:Tn(n,r,ne,ie,c,he)}return;default:if(ze(r)){for(var jn in o)ie=o[jn],o.hasOwnProperty(jn)&&ie!==void 0&&!c.hasOwnProperty(jn)&&ip(n,r,jn,void 0,c,ie);for(fe in c)ie=c[fe],he=o[fe],!c.hasOwnProperty(fe)||ie===he||ie===void 0&&he===void 0||ip(n,r,fe,ie,c,he);return}}for(var G in o)ie=o[G],o.hasOwnProperty(G)&&ie!=null&&!c.hasOwnProperty(G)&&Tn(n,r,G,null,c,ie);for(xe in c)ie=c[xe],he=o[xe],!c.hasOwnProperty(xe)||ie===he||ie==null&&he==null||Tn(n,r,xe,ie,c,he)}function lb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,x=f.initiatorType,j=f.duration;if(m&&j&&lb(x)){for(x=0,j=f.responseEnd,c+=1;c<o.length;c++){var U=o[c],ne=U.startTime;if(ne>j)break;var fe=U.transferSize,xe=U.initiatorType;fe&&lb(xe)&&(U=U.responseEnd,x+=fe*(U<j?1:(j-ne)/(U-ne)))}if(--c,r+=8*(m+x)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var ap=null,op=null;function qd(n){return n.nodeType===9?n:n.ownerDocument}function cb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ub(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function lp(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var cp=null;function KT(){var n=window.event;return n&&n.type==="popstate"?n===cp?!1:(cp=n,!0):(cp=null,!1)}var db=typeof setTimeout=="function"?setTimeout:void 0,YT=typeof clearTimeout=="function"?clearTimeout:void 0,hb=typeof Promise=="function"?Promise:void 0,QT=typeof queueMicrotask=="function"?queueMicrotask:typeof hb<"u"?function(n){return hb.resolve(null).then(n).catch(XT)}:db;function XT(n){setTimeout(function(){throw n})}function Ma(n){return n==="head"}function fb(n,r){var o=r,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),Cl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Pc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Pc(o);for(var m=o.firstChild;m;){var x=m.nextSibling,j=m.nodeName;m[qn]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=x}}else o==="body"&&Pc(n.ownerDocument.body);o=f}while(o);Cl(r)}function mb(n,r){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function up(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":up(o),Js(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function JT(n,r,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[qn])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=$r(n.nextSibling),n===null)break}return null}function ZT(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=$r(n.nextSibling),n===null))return null;return n}function pb(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=$r(n.nextSibling),n===null))return null;return n}function dp(n){return n.data==="$?"||n.data==="$~"}function hp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function ej(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function $r(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var fp=null;function gb(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return $r(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function yb(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function vb(n,r,o){switch(r=qd(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Pc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Js(n)}var Gr=new Map,bb=new Set;function Hd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Xi=je.d;je.d={f:tj,r:nj,D:sj,C:rj,L:ij,m:aj,X:lj,S:oj,M:cj};function tj(){var n=Xi.f(),r=Ld();return n||r}function nj(n){var r=Cn(n);r!==null&&r.tag===5&&r.type==="form"?Ov(r):Xi.r(n)}var Tl=typeof document>"u"?null:document;function wb(n,r,o){var c=Tl;if(c&&typeof r=="string"&&r){var f=Yn(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),bb.has(f)||(bb.add(f),n={rel:n,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Ls(r,"link",n),Ht(r),c.head.appendChild(r)))}}function sj(n){Xi.D(n),wb("dns-prefetch",n,null)}function rj(n,r){Xi.C(n,r),wb("preconnect",n,r)}function ij(n,r,o){Xi.L(n,r,o);var c=Tl;if(c&&n&&r){var f='link[rel="preload"][as="'+Yn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Yn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Yn(o.imageSizes)+'"]')):f+='[href="'+Yn(n)+'"]';var m=f;switch(r){case"style":m=jl(n);break;case"script":m=Sl(n)}Gr.has(m)||(n=k({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Gr.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Vc(m))||r==="script"&&c.querySelector(Uc(m))||(r=c.createElement("link"),Ls(r,"link",n),Ht(r),c.head.appendChild(r)))}}function aj(n,r){Xi.m(n,r);var o=Tl;if(o&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Yn(c)+'"][href="'+Yn(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Sl(n)}if(!Gr.has(m)&&(n=k({rel:"modulepreload",href:n},r),Gr.set(m,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Uc(m)))return}c=o.createElement("link"),Ls(c,"link",n),Ht(c),o.head.appendChild(c)}}}function oj(n,r,o){Xi.S(n,r,o);var c=Tl;if(c&&n){var f=as(c).hoistableStyles,m=jl(n);r=r||"default";var x=f.get(m);if(!x){var j={loading:0,preload:null};if(x=c.querySelector(Vc(m)))j.loading=5;else{n=k({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Gr.get(m))&&mp(n,o);var U=x=c.createElement("link");Ht(U),Ls(U,"link",n),U._p=new Promise(function(ne,fe){U.onload=ne,U.onerror=fe}),U.addEventListener("load",function(){j.loading|=1}),U.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Wd(x,r,c)}x={type:"stylesheet",instance:x,count:1,state:j},f.set(m,x)}}}function lj(n,r){Xi.X(n,r);var o=Tl;if(o&&n){var c=as(o).hoistableScripts,f=Sl(n),m=c.get(f);m||(m=o.querySelector(Uc(f)),m||(n=k({src:n,async:!0},r),(r=Gr.get(f))&&pp(n,r),m=o.createElement("script"),Ht(m),Ls(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function cj(n,r){Xi.M(n,r);var o=Tl;if(o&&n){var c=as(o).hoistableScripts,f=Sl(n),m=c.get(f);m||(m=o.querySelector(Uc(f)),m||(n=k({src:n,async:!0,type:"module"},r),(r=Gr.get(f))&&pp(n,r),m=o.createElement("script"),Ht(m),Ls(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function xb(n,r,o,c){var f=(f=ke.current)?Hd(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=jl(o.href),o=as(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=jl(o.href);var m=as(f).hoistableStyles,x=m.get(n);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,x),(m=f.querySelector(Vc(n)))&&!m._p&&(x.instance=m,x.state.loading=5),Gr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Gr.set(n,o),m||uj(f,n,o,x.state))),r&&c===null)throw Error(i(528,""));return x}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Sl(o),o=as(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function jl(n){return'href="'+Yn(n)+'"'}function Vc(n){return'link[rel="stylesheet"]['+n+"]"}function _b(n){return k({},n,{"data-precedence":n.precedence,precedence:null})}function uj(n,r,o,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Ls(r,"link",o),Ht(r),n.head.appendChild(r))}function Sl(n){return'[src="'+Yn(n)+'"]'}function Uc(n){return"script[async]"+n}function kb(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+Yn(o.href)+'"]');if(c)return r.instance=c,Ht(c),c;var f=k({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Ht(c),Ls(c,"style",f),Wd(c,o.precedence,n),r.instance=c;case"stylesheet":f=jl(o.href);var m=n.querySelector(Vc(f));if(m)return r.state.loading|=4,r.instance=m,Ht(m),m;c=_b(o),(f=Gr.get(f))&&mp(c,f),m=(n.ownerDocument||n).createElement("link"),Ht(m);var x=m;return x._p=new Promise(function(j,U){x.onload=j,x.onerror=U}),Ls(m,"link",c),r.state.loading|=4,Wd(m,o.precedence,n),r.instance=m;case"script":return m=Sl(o.src),(f=n.querySelector(Uc(m)))?(r.instance=f,Ht(f),f):(c=o,(f=Gr.get(m))&&(c=k({},o),pp(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ht(f),Ls(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Wd(c,o.precedence,n));return r.instance}function Wd(n,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,x=0;x<c.length;x++){var j=c[x];if(j.dataset.precedence===r)m=j;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function mp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function pp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var $d=null;function Eb(n,r,o){if($d===null){var c=new Map,f=$d=new Map;f.set(o,c)}else f=$d,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[qn]||m[tn]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(r)||"";x=n+x;var j=c.get(x);j?j.push(m):c.set(x,[m])}}return c}function Tb(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function dj(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function jb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function hj(n,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=jl(c.href),m=r.querySelector(Vc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Gd.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=m,Ht(m);return}m=r.ownerDocument||r,c=_b(c),(f=Gr.get(f))&&mp(c,f),m=m.createElement("link"),Ht(m);var x=m;x._p=new Promise(function(j,U){x.onload=j,x.onerror=U}),Ls(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Gd.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var gp=0;function fj(n,r){return n.stylesheets&&n.count===0&&Yd(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Yd(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&gp===0&&(gp=62500*GT());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Yd(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>gp?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Gd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Kd=null;function Yd(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Kd=new Map,r.forEach(mj,n),Kd=null,Gd.call(n))}function mj(n,r){if(!(r.state.loading&4)){var o=Kd.get(n);if(o)var c=o.get(null);else{o=new Map,Kd.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}f=r.instance,x=f.getAttribute("data-precedence"),m=o.get(x)||c,m===c&&o.set(null,f),o.set(x,f),this.count++,c=Gd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Bc={$$typeof:K,Provider:null,Consumer:null,_currentValue:Me,_currentValue2:Me,_threadCount:0};function pj(n,r,o,c,f,m,x,j,U){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Re(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Re(0),this.hiddenUpdates=Re(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Sb(n,r,o,c,f,m,x,j,U,ne,fe,xe){return n=new pj(n,r,o,x,U,ne,fe,xe,j),r=1,m===!0&&(r|=24),m=wr(3,null,null,r),n.current=m,m.stateNode=n,r=Yf(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Zf(m),n}function Cb(n){return n?(n=rl,n):rl}function Nb(n,r,o,c,f,m){f=Cb(f),c.context===null?c.context=f:c.pendingContext=f,c=_a(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=ka(n,c,r),o!==null&&(fr(o,n,r),vc(o,n,r))}function Ab(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function yp(n,r){Ab(n,r),(n=n.alternate)&&Ab(n,r)}function Rb(n){if(n.tag===13||n.tag===31){var r=fo(n,67108864);r!==null&&fr(r,n,67108864),yp(n,67108864)}}function Ib(n){if(n.tag===13||n.tag===31){var r=Tr();r=gn(r);var o=fo(n,r);o!==null&&fr(o,n,r),yp(n,r)}}var Qd=!0;function gj(n,r,o,c){var f=Z.T;Z.T=null;var m=je.p;try{je.p=2,vp(n,r,o,c)}finally{je.p=m,Z.T=f}}function yj(n,r,o,c){var f=Z.T;Z.T=null;var m=je.p;try{je.p=8,vp(n,r,o,c)}finally{je.p=m,Z.T=f}}function vp(n,r,o,c){if(Qd){var f=bp(c);if(f===null)rp(n,r,c,Xd,o),Db(n,c);else if(bj(f,n,r,o,c))c.stopPropagation();else if(Db(n,c),r&4&&-1<vj.indexOf(n)){for(;f!==null;){var m=Cn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Fn(m.pendingLanes);if(x!==0){var j=m;for(j.pendingLanes|=2,j.entangledLanes|=2;x;){var U=1<<31-qe(x);j.entanglements[1]|=U,x&=~U}xi(m),(pn&6)===0&&(Md=wt()+500,Dc(0))}}break;case 31:case 13:j=fo(m,2),j!==null&&fr(j,m,2),Ld(),yp(m,2)}if(m=bp(c),m===null&&rp(n,r,c,Xd,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else rp(n,r,c,null,o)}}function bp(n){return n=J(n),wp(n)}var Xd=null;function wp(n){if(Xd=null,n=_s(n),n!==null){var r=u(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=d(r),n!==null)return n;n=null}else if(o===31){if(n=p(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Xd=n,null}function Mb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(an()){case Ns:return 2;case rs:return 8;case en:case se:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var xp=!1,Da=null,La=null,Oa=null,zc=new Map,Fc=new Map,Pa=[],vj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Db(n,r){switch(n){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":zc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(r.pointerId)}}function qc(n,r,o,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Cn(r),r!==null&&Rb(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function bj(n,r,o,c,f){switch(r){case"focusin":return Da=qc(Da,n,r,o,c,f),!0;case"dragenter":return La=qc(La,n,r,o,c,f),!0;case"mouseover":return Oa=qc(Oa,n,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return zc.set(m,qc(zc.get(m)||null,n,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Fc.set(m,qc(Fc.get(m)||null,n,r,o,c,f)),!0}return!1}function Lb(n){var r=_s(n.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=d(o),r!==null){n.blockedOn=r,is(n.priority,function(){Ib(o)});return}}else if(r===31){if(r=p(o),r!==null){n.blockedOn=r,is(n.priority,function(){Ib(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Jd(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=bp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);V=c,o.target.dispatchEvent(c),V=null}else return r=Cn(o),r!==null&&Rb(r),n.blockedOn=o,!1;r.shift()}return!0}function Ob(n,r,o){Jd(n)&&o.delete(r)}function wj(){xp=!1,Da!==null&&Jd(Da)&&(Da=null),La!==null&&Jd(La)&&(La=null),Oa!==null&&Jd(Oa)&&(Oa=null),zc.forEach(Ob),Fc.forEach(Ob)}function Zd(n,r){n.blockedOn===r&&(n.blockedOn=null,xp||(xp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,wj)))}var eh=null;function Pb(n){eh!==n&&(eh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){eh===n&&(eh=null);for(var r=0;r<n.length;r+=3){var o=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(wp(c||o)===null)continue;break}var m=Cn(o);m!==null&&(n.splice(r,3),r-=3,bm(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Cl(n){function r(U){return Zd(U,n)}Da!==null&&Zd(Da,n),La!==null&&Zd(La,n),Oa!==null&&Zd(Oa,n),zc.forEach(r),Fc.forEach(r);for(var o=0;o<Pa.length;o++){var c=Pa[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Pa.length&&(o=Pa[0],o.blockedOn===null);)Lb(o),o.blockedOn===null&&Pa.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],x=f[In]||null;if(typeof m=="function")x||Pb(o);else if(x){var j=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[In]||null)j=x.formAction;else if(wp(f)!==null)continue}else j=x.action;typeof j=="function"?o[c+1]=j:(o.splice(c,3),c-=3),Pb(o)}}}function Vb(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function _p(n){this._internalRoot=n}th.prototype.render=_p.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=Tr();Nb(o,c,n,r,null,null)},th.prototype.unmount=_p.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Nb(n.current,2,null,n,null,null),Ld(),r[Rs]=null}};function th(n){this._internalRoot=n}th.prototype.unstable_scheduleHydration=function(n){if(n){var r=As();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Pa.length&&r!==0&&r<Pa[o].priority;o++);Pa.splice(o,0,n),o===0&&Lb(n)}};var Ub=e.version;if(Ub!=="19.2.4")throw Error(i(527,Ub,"19.2.4"));je.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(r),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var xj={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{at=nh.inject(xj),$e=nh}catch{}}return Wc.createRoot=function(n,r){if(!l(n))throw Error(i(299));var o=!1,c="",f=$v,m=Gv,x=Kv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=Sb(n,1,!1,null,null,o,c,null,f,m,x,Vb),n[Rs]=r.current,sp(n),new _p(r)},Wc.hydrateRoot=function(n,r,o){if(!l(n))throw Error(i(299));var c=!1,f="",m=$v,x=Gv,j=Kv,U=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.formState!==void 0&&(U=o.formState)),r=Sb(n,1,!0,r,o??null,c,f,U,m,x,j,Vb),r.context=Cb(null),o=r.current,c=Tr(),c=gn(c),f=_a(c),f.callback=null,ka(o,f,c),o=c,r.current.lanes=o,Ye(r,o),xi(r),n[Rs]=r.current,sp(n),new th(r)},Wc.version="19.2.4",Wc}var Yb;function Rj(){if(Yb)return Tp.exports;Yb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Tp.exports=Aj(),Tp.exports}var Ij=Rj();const Mj="modulepreload",Dj=function(s){return"/login/"+s},Qb={},Qs=function(e,t,i){let l=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");l=g(t.map(y=>{if(y=Dj(y),y in Qb)return;Qb[y]=!0;const b=y.endsWith(".css"),k=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${k}`))return;const E=document.createElement("link");if(E.rel=b?"stylesheet":Mj,b||(E.as="script"),E.crossOrigin="",E.href=y,p&&E.setAttribute("nonce",p),document.head.appendChild(E),b)return new Promise((O,W)=>{E.addEventListener("load",O),E.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var Xb="popstate";function Lj(s={}){function e(i,l){let{pathname:u,search:d,hash:p}=i.location;return fg("",{pathname:u,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(i,l){return typeof l=="string"?l:du(l)}return Pj(e,t,null,s)}function Gn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Qr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Oj(){return Math.random().toString(36).substring(2,10)}function Jb(s,e){return{usr:s.state,key:s.key,idx:e}}function fg(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ql(e):e,state:t,key:e&&e.key||i||Oj()}}function du({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Ql(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function Pj(s,e,t,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,d=l.history,p="POP",g=null,y=b();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function b(){return(d.state||{idx:null}).idx}function k(){p="POP";let B=b(),$=B==null?null:B-y;y=B,g&&g({action:p,location:F.location,delta:$})}function E(B,$){p="PUSH";let H=fg(F.location,B,$);y=b()+1;let K=Jb(H,y),ue=F.createHref(H);try{d.pushState(K,"",ue)}catch(Ee){if(Ee instanceof DOMException&&Ee.name==="DataCloneError")throw Ee;l.location.assign(ue)}u&&g&&g({action:p,location:F.location,delta:1})}function O(B,$){p="REPLACE";let H=fg(F.location,B,$);y=b();let K=Jb(H,y),ue=F.createHref(H);d.replaceState(K,"",ue),u&&g&&g({action:p,location:F.location,delta:0})}function W(B){return Vj(B)}let F={get action(){return p},get location(){return s(l,d)},listen(B){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Xb,k),g=B,()=>{l.removeEventListener(Xb,k),g=null}},createHref(B){return e(l,B)},createURL:W,encodeLocation(B){let $=W(B);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:E,replace:O,go(B){return d.go(B)}};return F}function Vj(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Gn(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:du(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function dx(s,e,t="/"){return Uj(s,e,t,!1)}function Uj(s,e,t,i){let l=typeof e=="string"?Ql(e):e,u=ia(l.pathname||"/",t);if(u==null)return null;let d=hx(s);Bj(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=Xj(u);p=Yj(d[g],y,i)}return p}function hx(s,e=[],t=[],i="",l=!1){let u=(d,p,g=l,y)=>{let b={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;Gn(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let k=ta([i,b.relativePath]),E=t.concat(b);d.children&&d.children.length>0&&(Gn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),hx(d.children,e,E,k,g)),!(d.path==null&&!d.index)&&e.push({path:k,score:Gj(k,d.index),routesMeta:E})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of fx(d.path))u(d,p,!0,g)}),e}function fx(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,l=t.endsWith("?"),u=t.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let d=fx(i.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function Bj(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Kj(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var zj=/^:[\w-]+$/,Fj=3,qj=2,Hj=1,Wj=10,$j=-2,Zb=s=>s==="*";function Gj(s,e){let t=s.split("/"),i=t.length;return t.some(Zb)&&(i+=$j),e&&(i+=qj),t.filter(l=>!Zb(l)).reduce((l,u)=>l+(zj.test(u)?Fj:u===""?Hj:Wj),i)}function Kj(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function Yj(s,e,t=!1){let{routesMeta:i}=s,l={},u="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,b=u==="/"?e:e.slice(u.length)||"/",k=Rh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),E=g.route;if(!k&&y&&t&&!i[i.length-1].route.index&&(k=Rh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!k)return null;Object.assign(l,k.params),d.push({params:l,pathname:ta([u,k.pathname]),pathnameBase:tS(ta([u,k.pathnameBase])),route:E}),k.pathnameBase!=="/"&&(u=ta([u,k.pathnameBase]))}return d}function Rh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=Qj(s.path,s.caseSensitive,s.end),l=e.match(t);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:k},E)=>{if(b==="*"){let W=p[E]||"";d=u.slice(0,u.length-W.length).replace(/(.)\/+$/,"$1")}const O=p[E];return k&&!O?y[b]=void 0:y[b]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function Qj(s,e=!1,t=!0){Qr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function Xj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ia(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var Jj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Zj(s,e="/"){let{pathname:t,search:i="",hash:l=""}=typeof s=="string"?Ql(s):s,u;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?u=e2(t.substring(1),"/"):u=e2(t,e)):u=e,{pathname:u,search:nS(i),hash:sS(l)}}function e2(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function Np(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eS(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Yg(s){let e=eS(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Qg(s,e,t,i=!1){let l;typeof s=="string"?l=Ql(s):(l={...s},Gn(!l.pathname||!l.pathname.includes("?"),Np("?","pathname","search",l)),Gn(!l.pathname||!l.pathname.includes("#"),Np("#","pathname","hash",l)),Gn(!l.search||!l.search.includes("#"),Np("#","search","hash",l)));let u=s===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=t;else{let k=e.length-1;if(!i&&d.startsWith("..")){let E=d.split("/");for(;E[0]==="..";)E.shift(),k-=1;l.pathname=E.join("/")}p=k>=0?e[k]:"/"}let g=Zj(l,p),y=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var ta=s=>s.join("/").replace(/\/\/+/g,"/"),tS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),nS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,sS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,rS=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function iS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function aS(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var mx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function px(s,e){let t=s;if(typeof t!="string"||!Jj.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,l=!1;if(mx)try{let u=new URL(window.location.href),d=t.startsWith("//")?new URL(u.protocol+t):new URL(t),p=ia(d.pathname,e);d.origin===u.origin&&p!=null?t=p+d.search+d.hash:l=!0}catch{Qr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gx=["POST","PUT","PATCH","DELETE"];new Set(gx);var oS=["GET",...gx];new Set(oS);var Xl=w.createContext(null);Xl.displayName="DataRouter";var Zh=w.createContext(null);Zh.displayName="DataRouterState";var lS=w.createContext(!1),yx=w.createContext({isTransitioning:!1});yx.displayName="ViewTransition";var cS=w.createContext(new Map);cS.displayName="Fetchers";var uS=w.createContext(null);uS.displayName="Await";var Ar=w.createContext(null);Ar.displayName="Navigation";var ju=w.createContext(null);ju.displayName="Location";var di=w.createContext({outlet:null,matches:[],isDataRoute:!1});di.displayName="Route";var Xg=w.createContext(null);Xg.displayName="RouteError";var vx="REACT_ROUTER_ERROR",dS="REDIRECT",hS="ROUTE_ERROR_RESPONSE";function fS(s){if(s.startsWith(`${vx}:${dS}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function mS(s){if(s.startsWith(`${vx}:${hS}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new rS(e.status,e.statusText,e.data)}catch{}}function pS(s,{relative:e}={}){Gn(Jl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=w.useContext(Ar),{hash:l,pathname:u,search:d}=Su(s,{relative:e}),p=u;return t!=="/"&&(p=u==="/"?t:ta([t,u])),i.createHref({pathname:p,search:d,hash:l})}function Jl(){return w.useContext(ju)!=null}function Ii(){return Gn(Jl(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(ju).location}var bx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wx(s){w.useContext(Ar).static||w.useLayoutEffect(s)}function Xs(){let{isDataRoute:s}=w.useContext(di);return s?NS():gS()}function gS(){Gn(Jl(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(Xl),{basename:e,navigator:t}=w.useContext(Ar),{matches:i}=w.useContext(di),{pathname:l}=Ii(),u=JSON.stringify(Yg(i)),d=w.useRef(!1);return wx(()=>{d.current=!0}),w.useCallback((g,y={})=>{if(Qr(d.current,bx),!d.current)return;if(typeof g=="number"){t.go(g);return}let b=Qg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:ta([e,b.pathname])),(y.replace?t.replace:t.push)(b,y.state,y)},[e,t,u,l,s])}w.createContext(null);function yS(){let{matches:s}=w.useContext(di),e=s[s.length-1];return e?e.params:{}}function Su(s,{relative:e}={}){let{matches:t}=w.useContext(di),{pathname:i}=Ii(),l=JSON.stringify(Yg(t));return w.useMemo(()=>Qg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function vS(s,e){return xx(s,e)}function xx(s,e,t,i,l){Gn(Jl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(Ar),{matches:d}=w.useContext(di),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",k=p&&p.route;{let H=k&&k.path||"";kx(y,!k||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let E=Ii(),O;if(e){let H=typeof e=="string"?Ql(e):e;Gn(b==="/"||H.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${H.pathname}" was given in the \`location\` prop.`),O=H}else O=E;let W=O.pathname||"/",F=W;if(b!=="/"){let H=b.replace(/^\//,"").split("/");F="/"+W.replace(/^\//,"").split("/").slice(H.length).join("/")}let B=dx(s,{pathname:F});Qr(k||B!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),Qr(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=kS(B&&B.map(H=>Object.assign({},H,{params:Object.assign({},g,H.params),pathname:ta([b,u.encodeLocation?u.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?b:ta([b,u.encodeLocation?u.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),d,t,i,l);return e&&$?w.createElement(ju.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},$):$}function bS(){let s=CS(),e=iS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:l},t):null,d)}var wS=w.createElement(bS,null),_x=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=mS(s.digest);t&&(s=t)}let e=s!==void 0?w.createElement(di.Provider,{value:this.props.routeContext},w.createElement(Xg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?w.createElement(xS,{error:s},e):e}};_x.contextType=lS;var Ap=new WeakMap;function xS({children:s,error:e}){let{basename:t}=w.useContext(Ar);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=fS(e.digest);if(i){let l=Ap.get(e);if(l)throw l;let u=px(i.location,t);if(mx&&!Ap.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw Ap.set(e,d),d}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function _S({routeContext:s,match:e,children:t}){let i=w.useContext(Xl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(di.Provider,{value:s},t)}function kS(s,e=[],t=null,i=null,l=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,d=t?.errors;if(d!=null){let b=u.findIndex(k=>k.route.id&&d?.[k.route.id]!==void 0);Gn(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(t)for(let b=0;b<u.length;b++){let k=u[b];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(g=b),k.route.id){let{loaderData:E,errors:O}=t,W=k.route.loader&&!E.hasOwnProperty(k.route.id)&&(!O||O[k.route.id]===void 0);if(k.route.lazy||W){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=t&&i?(b,k)=>{i(b,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:aS(t.matches),errorInfo:k})}:void 0;return u.reduceRight((b,k,E)=>{let O,W=!1,F=null,B=null;t&&(O=d&&k.route.id?d[k.route.id]:void 0,F=k.route.errorElement||wS,p&&(g<0&&E===0?(kx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,B=null):g===E&&(W=!0,B=k.route.hydrateFallbackElement||null)));let $=e.concat(u.slice(0,E+1)),H=()=>{let K;return O?K=F:W?K=B:k.route.Component?K=w.createElement(k.route.Component,null):k.route.element?K=k.route.element:K=b,w.createElement(_S,{match:k,routeContext:{outlet:b,matches:$,isDataRoute:t!=null},children:K})};return t&&(k.route.ErrorBoundary||k.route.errorElement||E===0)?w.createElement(_x,{location:t.location,revalidation:t.revalidation,component:F,error:O,children:H(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:y}):H()},null)}function Jg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ES(s){let e=w.useContext(Xl);return Gn(e,Jg(s)),e}function TS(s){let e=w.useContext(Zh);return Gn(e,Jg(s)),e}function jS(s){let e=w.useContext(di);return Gn(e,Jg(s)),e}function Zg(s){let e=jS(s),t=e.matches[e.matches.length-1];return Gn(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function SS(){return Zg("useRouteId")}function CS(){let s=w.useContext(Xg),e=TS("useRouteError"),t=Zg("useRouteError");return s!==void 0?s:e.errors?.[t]}function NS(){let{router:s}=ES("useNavigate"),e=Zg("useNavigate"),t=w.useRef(!1);return wx(()=>{t.current=!0}),w.useCallback(async(l,u={})=>{Qr(t.current,bx),t.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var t2={};function kx(s,e,t){!e&&!t2[s]&&(t2[s]=!0,Qr(!1,t))}w.memo(AS);function AS({routes:s,future:e,state:t,onError:i}){return xx(s,void 0,t,i,e)}function Ex({to:s,replace:e,state:t,relative:i}){Gn(Jl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=w.useContext(Ar);Qr(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=w.useContext(di),{pathname:d}=Ii(),p=Xs(),g=Qg(s,Yg(u),d,i==="path"),y=JSON.stringify(g);return w.useEffect(()=>{p(JSON.parse(y),{replace:e,state:t,relative:i})},[p,y,i,e,t]),null}function Sn(s){Gn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RS({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){Gn(!Jl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[p,l,u,d]);typeof t=="string"&&(t=Ql(t));let{pathname:y="/",search:b="",hash:k="",state:E=null,key:O="default"}=t,W=w.useMemo(()=>{let F=ia(y,p);return F==null?null:{location:{pathname:F,search:b,hash:k,state:E,key:O},navigationType:i}},[p,y,b,k,E,O,i]);return Qr(W!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${k}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:w.createElement(Ar.Provider,{value:g},w.createElement(ju.Provider,{children:e,value:W}))}function IS({children:s,location:e}){return vS(mg(s),e)}function mg(s,e=[]){let t=[];return w.Children.forEach(s,(i,l)=>{if(!w.isValidElement(i))return;let u=[...e,l];if(i.type===w.Fragment){t.push.apply(t,mg(i.props.children,u));return}Gn(i.type===Sn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=mg(i.props.children,u)),t.push(d)}),t}var vh="get",bh="application/x-www-form-urlencoded";function ef(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function MS(s){return ef(s)&&s.tagName.toLowerCase()==="button"}function DS(s){return ef(s)&&s.tagName.toLowerCase()==="form"}function LS(s){return ef(s)&&s.tagName.toLowerCase()==="input"}function OS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function PS(s,e){return s.button===0&&(!e||e==="_self")&&!OS(s)}function pg(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let i=s[t];return e.concat(Array.isArray(i)?i.map(l=>[t,l]):[[t,i]])},[]))}function VS(s,e){let t=pg(s);return e&&e.forEach((i,l)=>{t.has(l)||e.getAll(l).forEach(u=>{t.append(l,u)})}),t}var sh=null;function US(){if(sh===null)try{new FormData(document.createElement("form"),0),sh=!1}catch{sh=!0}return sh}var BS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rp(s){return s!=null&&!BS.has(s)?(Qr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bh}"`),null):s}function zS(s,e){let t,i,l,u,d;if(DS(s)){let p=s.getAttribute("action");i=p?ia(p,e):null,t=s.getAttribute("method")||vh,l=Rp(s.getAttribute("enctype"))||bh,u=new FormData(s)}else if(MS(s)||LS(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?ia(g,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||vh,l=Rp(s.getAttribute("formenctype"))||Rp(p.getAttribute("enctype"))||bh,u=new FormData(p,s),!US()){let{name:y,type:b,value:k}=s;if(b==="image"){let E=y?`${y}.`:"";u.append(`${E}x`,"0"),u.append(`${E}y`,"0")}else y&&u.append(y,k)}}else{if(ef(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=vh,i=null,l=bh,d=s}return u&&l==="text/plain"&&(d=u,u=void 0),{action:i,method:t.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ey(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function FS(s,e,t,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&ia(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function qS(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function WS(s,e,t){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await qS(u,t);return d.links?d.links():[]}return[]}));return YS(i.flat(1).filter(HS).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function n2(s,e,t,i,l,u){let d=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,p=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let k=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function $S(s,e,{includeHydrateFallback:t}={}){return GS(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function GS(s){return[...new Set(s)]}function KS(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function YS(s,e){let t=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(KS(l));return t.has(u)||(t.add(u),i.push({key:u,link:l})),i},[])}function Tx(){let s=w.useContext(Xl);return ey(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function QS(){let s=w.useContext(Zh);return ey(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ty=w.createContext(void 0);ty.displayName="FrameworkContext";function jx(){let s=w.useContext(ty);return ey(s,"You must render this element inside a <HydratedRouter> element"),s}function XS(s,e){let t=w.useContext(ty),[i,l]=w.useState(!1),[u,d]=w.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:k}=e,E=w.useRef(null);w.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let F=$=>{$.forEach(H=>{d(H.isIntersecting)})},B=new IntersectionObserver(F,{threshold:.5});return E.current&&B.observe(E.current),()=>{B.disconnect()}}},[s]),w.useEffect(()=>{if(i){let F=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(F)}}},[i]);let O=()=>{l(!0)},W=()=>{l(!1),d(!1)};return t?s!=="intent"?[u,E,{}]:[u,E,{onFocus:$c(p,O),onBlur:$c(g,W),onMouseEnter:$c(y,O),onMouseLeave:$c(b,W),onTouchStart:$c(k,O)}]:[!1,E,{}]}function $c(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function JS({page:s,...e}){let{router:t}=Tx(),i=w.useMemo(()=>dx(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?w.createElement(eC,{page:s,matches:i,...e}):null}function ZS(s){let{manifest:e,routeModules:t}=jx(),[i,l]=w.useState([]);return w.useEffect(()=>{let u=!1;return WS(s,e,t).then(d=>{u||l(d)}),()=>{u=!0}},[s,e,t]),i}function eC({page:s,matches:e,...t}){let i=Ii(),{future:l,manifest:u,routeModules:d}=jx(),{basename:p}=Tx(),{loaderData:g,matches:y}=QS(),b=w.useMemo(()=>n2(s,e,y,u,i,"data"),[s,e,y,u,i]),k=w.useMemo(()=>n2(s,e,y,u,i,"assets"),[s,e,y,u,i]),E=w.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let F=new Set,B=!1;if(e.forEach(H=>{let K=u.routes[H.route.id];!K||!K.hasLoader||(!b.some(ue=>ue.route.id===H.route.id)&&H.route.id in g&&d[H.route.id]?.shouldRevalidate||K.hasClientLoader?B=!0:F.add(H.route.id))}),F.size===0)return[];let $=FS(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return B&&F.size>0&&$.searchParams.set("_routes",e.filter(H=>F.has(H.route.id)).map(H=>H.route.id).join(",")),[$.pathname+$.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,b,e,s,d]),O=w.useMemo(()=>$S(k,u),[k,u]),W=ZS(k);return w.createElement(w.Fragment,null,E.map(F=>w.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...t})),O.map(F=>w.createElement("link",{key:F,rel:"modulepreload",href:F,...t})),W.map(({key:F,link:B})=>w.createElement("link",{key:F,nonce:t.nonce,...B,crossOrigin:B.crossOrigin??t.crossOrigin})))}function tC(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var nC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nC&&(window.__reactRouterVersion="7.13.0")}catch{}function sC({basename:s,children:e,unstable_useTransitions:t,window:i}){let l=w.useRef();l.current==null&&(l.current=Lj({window:i,v5Compat:!0}));let u=l.current,[d,p]=w.useState({action:u.action,location:u.location}),g=w.useCallback(y=>{t===!1?p(y):w.startTransition(()=>p(y))},[t]);return w.useLayoutEffect(()=>u.listen(g),[u,g]),w.createElement(RS,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:t})}var Sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cx=w.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:l,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:b,viewTransition:k,unstable_defaultShouldRevalidate:E,...O},W){let{basename:F,unstable_useTransitions:B}=w.useContext(Ar),$=typeof y=="string"&&Sx.test(y),H=px(y,F);y=H.to;let K=pS(y,{relative:l}),[ue,Ee,we]=XS(i,O),C=oC(y,{replace:d,state:p,target:g,preventScrollReset:b,relative:l,viewTransition:k,unstable_defaultShouldRevalidate:E,unstable_useTransitions:B});function T(P){e&&e(P),P.defaultPrevented||C(P)}let R=w.createElement("a",{...O,...we,href:H.absoluteURL||K,onClick:H.isExternal||u?e:T,ref:tC(W,Ee),target:g,"data-discover":!$&&t==="render"?"true":void 0});return ue&&!$?w.createElement(w.Fragment,null,R,w.createElement(JS,{page:K})):R});Cx.displayName="Link";var rC=w.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:p,children:g,...y},b){let k=Su(d,{relative:y.relative}),E=Ii(),O=w.useContext(Zh),{navigator:W,basename:F}=w.useContext(Ar),B=O!=null&&hC(k)&&p===!0,$=W.encodeLocation?W.encodeLocation(k).pathname:k.pathname,H=E.pathname,K=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;t||(H=H.toLowerCase(),K=K?K.toLowerCase():null,$=$.toLowerCase()),K&&F&&(K=ia(K,F)||K);const ue=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let Ee=H===$||!l&&H.startsWith($)&&H.charAt(ue)==="/",we=K!=null&&(K===$||!l&&K.startsWith($)&&K.charAt($.length)==="/"),C={isActive:Ee,isPending:we,isTransitioning:B},T=Ee?e:void 0,R;typeof i=="function"?R=i(C):R=[i,Ee?"active":null,we?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(C):u;return w.createElement(Cx,{...y,"aria-current":T,className:R,ref:b,style:P,to:d,viewTransition:p},typeof g=="function"?g(C):g)});rC.displayName="NavLink";var iC=w.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:l,state:u,method:d=vh,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:k,unstable_defaultShouldRevalidate:E,...O},W)=>{let{unstable_useTransitions:F}=w.useContext(Ar),B=uC(),$=dC(p,{relative:y}),H=d.toLowerCase()==="get"?"get":"post",K=typeof p=="string"&&Sx.test(p),ue=Ee=>{if(g&&g(Ee),Ee.defaultPrevented)return;Ee.preventDefault();let we=Ee.nativeEvent.submitter,C=we?.getAttribute("formmethod")||d,T=()=>B(we||Ee.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:l,state:u,relative:y,preventScrollReset:b,viewTransition:k,unstable_defaultShouldRevalidate:E});F&&t!==!1?w.startTransition(()=>T()):T()};return w.createElement("form",{ref:W,method:H,action:$,onSubmit:i?g:ue,...O,"data-discover":!K&&s==="render"?"true":void 0})});iC.displayName="Form";function aC(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nx(s){let e=w.useContext(Xl);return Gn(e,aC(s)),e}function oC(s,{target:e,replace:t,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Xs(),b=Ii(),k=Su(s,{relative:u});return w.useCallback(E=>{if(PS(E,e)){E.preventDefault();let O=t!==void 0?t:du(b)===du(k),W=()=>y(s,{replace:O,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?w.startTransition(()=>W()):W()}},[b,y,k,t,i,e,s,l,u,d,p,g])}function AO(s){Qr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef(pg(s)),t=w.useRef(!1),i=Ii(),l=w.useMemo(()=>VS(i.search,t.current?null:e.current),[i.search]),u=Xs(),d=w.useCallback((p,g)=>{const y=pg(typeof p=="function"?p(new URLSearchParams(l)):p);t.current=!0,u("?"+y,g)},[u,l]);return[l,d]}var lC=0,cC=()=>`__${String(++lC)}__`;function uC(){let{router:s}=Nx("useSubmit"),{basename:e}=w.useContext(Ar),t=SS(),i=s.fetch,l=s.navigate;return w.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:b,body:k}=zS(u,e);if(d.navigate===!1){let E=d.fetcherKey||cC();await i(E,t,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:k,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await l(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:k,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:t,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,l,e,t])}function dC(s,{relative:e}={}){let{basename:t}=w.useContext(Ar),i=w.useContext(di);Gn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...Su(s||".",{relative:e})},d=Ii();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(k=>k).forEach(k=>p.append("index",k));let b=p.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:ta([t,u.pathname])),du(u)}function hC(s,{relative:e}={}){let t=w.useContext(yx);Gn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Nx("useViewTransitionState"),l=Su(s,{relative:e});if(!t.isTransitioning)return!1;let u=ia(t.currentLocation.pathname,i)||t.currentLocation.pathname,d=ia(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Rh(l.pathname,d)!=null||Rh(l.pathname,u)!=null}const fC=()=>{};var s2={};const Ax=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},mC=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const l=s[t++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[t++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[t++],d=s[t++],p=s[t++],g=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],d=s[t++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Rx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],d=l+1<s.length,p=d?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,b=u>>2,k=(u&3)<<4|p>>4;let E=(p&15)<<2|y>>6,O=y&63;g||(O=64,d||(E=64)),i.push(t[b],t[k],t[E],t[O])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Ax(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):mC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=t[s.charAt(l++)],p=l<s.length?t[s.charAt(l)]:0;++l;const y=l<s.length?t[s.charAt(l)]:64;++l;const k=l<s.length?t[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||k==null)throw new pC;const E=u<<2|p>>4;if(i.push(E),y!==64){const O=p<<4&240|y>>2;if(i.push(O),k!==64){const W=y<<6&192|k;i.push(W)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class pC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gC=function(s){const e=Ax(s);return Rx.encodeByteArray(e,!0)},Ih=function(s){return gC(s).replace(/\./g,"")},Ix=function(s){try{return Rx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const vC=()=>yC().__FIREBASE_DEFAULTS__,bC=()=>{if(typeof process>"u"||typeof s2>"u")return;const s=s2.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},wC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Ix(s[1]);return e&&JSON.parse(e)},tf=()=>{try{return fC()||vC()||bC()||wC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Mx=s=>tf()?.emulatorHosts?.[s],Dx=s=>{const e=Mx(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Lx=()=>tf()?.config,Ox=s=>tf()?.[`_${s}`];class xC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function so(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ny(s){return(await fetch(s,{credentials:"include"})).ok}function Px(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Ih(JSON.stringify(t)),Ih(JSON.stringify(d)),""].join(".")}const ru={};function _C(){const s={prod:[],emulator:[]};for(const e of Object.keys(ru))ru[e]?s.emulator.push(e):s.prod.push(e);return s}function kC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let r2=!1;function sy(s,e){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||ru[s]===e||ru[s]||r2)return;ru[s]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",u=_C().prod.length>0;function d(){const E=document.getElementById(i);E&&E.remove()}function p(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,O){E.setAttribute("width","24"),E.setAttribute("id",O),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{r2=!0,d()},E}function b(E,O){E.setAttribute("id",O),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function k(){const E=kC(i),O=t("text"),W=document.getElementById(O)||document.createElement("span"),F=t("learnmore"),B=document.getElementById(F)||document.createElement("a"),$=t("preprendIcon"),H=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const K=E.element;p(K),b(B,F);const ue=y();g(H,$),K.append(H,W,B,ue),document.body.appendChild(K)}u?(W.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}function Ys(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function EC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ys())}function TC(){const s=tf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SC(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function CC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NC(){const s=Ys();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function AC(){return!TC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vx(){try{return typeof indexedDB=="object"}catch{return!1}}function Ux(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(t){e(t)}})}function RC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const IC="FirebaseError";class hi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=IC,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ho.prototype.create)}}class Ho{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?MC(u,i):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new hi(l,p,i)}}function MC(s,e){return s.replace(DC,(t,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const DC=/\{\$([^}]+)}/g;function LC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function aa(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const l of t){if(!i.includes(l))return!1;const u=s[l],d=e[l];if(i2(u)&&i2(d)){if(!aa(u,d))return!1}else if(u!==d)return!1}for(const l of i)if(!t.includes(l))return!1;return!0}function i2(s){return s!==null&&typeof s=="object"}function Cu(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Jc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Zc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function OC(s,e){const t=new PC(s,e);return t.subscribe.bind(t)}class PC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let l;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");VC(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:i},l.next===void 0&&(l.next=Ip),l.error===void 0&&(l.error=Ip),l.complete===void 0&&(l.complete=Ip);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VC(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Ip(){}function vn(s){return s&&s._delegate?s._delegate:s}class Xr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Co="[DEFAULT]";class UC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new xC;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zC(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&d.resolve(l)}return l}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const l of i)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:BC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BC(s){return s===Co?void 0:s}function zC(s){return s.instantiationMode==="EAGER"}class FC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new UC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Kt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Kt||(Kt={}));const qC={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},HC=Kt.INFO,WC={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},$C=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=WC[e];if(l)console[l](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ry{constructor(e){this.name=e,this._logLevel=HC,this._logHandler=$C,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Kt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...e),this._logHandler(this,Kt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...e),this._logHandler(this,Kt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...e),this._logHandler(this,Kt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...e),this._logHandler(this,Kt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...e),this._logHandler(this,Kt.ERROR,...e)}}const GC=(s,e)=>e.some(t=>s instanceof t);let a2,o2;function KC(){return a2||(a2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YC(){return o2||(o2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Bx=new WeakMap,gg=new WeakMap,zx=new WeakMap,Mp=new WeakMap,iy=new WeakMap;function QC(s){const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{t(na(s.result)),l()},d=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Bx.set(t,s)}).catch(()=>{}),iy.set(e,s),e}function XC(s){if(gg.has(s))return;const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{t(),l()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});gg.set(s,e)}let yg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return gg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||zx.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return na(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function JC(s){yg=s(yg)}function ZC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Dp(this),e,...t);return zx.set(i,e.sort?e.sort():[e]),na(i)}:YC().includes(s)?function(...e){return s.apply(Dp(this),e),na(Bx.get(this))}:function(...e){return na(s.apply(Dp(this),e))}}function eN(s){return typeof s=="function"?ZC(s):(s instanceof IDBTransaction&&XC(s),GC(s,KC())?new Proxy(s,yg):s)}function na(s){if(s instanceof IDBRequest)return QC(s);if(Mp.has(s))return Mp.get(s);const e=eN(s);return e!==s&&(Mp.set(s,e),iy.set(e,s)),e}const Dp=s=>iy.get(s);function nf(s,e,{blocked:t,upgrade:i,blocking:l,terminated:u}={}){const d=indexedDB.open(s,e),p=na(d);return i&&d.addEventListener("upgradeneeded",g=>{i(na(d.result),g.oldVersion,g.newVersion,na(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}function Lp(s,{blocked:e}={}){const t=indexedDB.deleteDatabase(s);return e&&t.addEventListener("blocked",i=>e(i.oldVersion,i)),na(t).then(()=>{})}const tN=["get","getKey","getAll","getAllKeys","count"],nN=["put","add","delete","clear"],Op=new Map;function l2(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Op.get(e))return Op.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,l=nN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(l||tN.includes(t)))return;const u=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),l&&g.done]))[0]};return Op.set(e,u),u}JC(s=>({...s,get:(e,t,i)=>l2(e,t)||s.get(e,t,i),has:(e,t)=>!!l2(e,t)||s.has(e,t)}));class sN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(rN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function rN(s){return s.getComponent()?.type==="VERSION"}const vg="@firebase/app",c2="0.14.7";const oa=new ry("@firebase/app"),iN="@firebase/app-compat",aN="@firebase/analytics-compat",oN="@firebase/analytics",lN="@firebase/app-check-compat",cN="@firebase/app-check",uN="@firebase/auth",dN="@firebase/auth-compat",hN="@firebase/database",fN="@firebase/data-connect",mN="@firebase/database-compat",pN="@firebase/functions",gN="@firebase/functions-compat",yN="@firebase/installations",vN="@firebase/installations-compat",bN="@firebase/messaging",wN="@firebase/messaging-compat",xN="@firebase/performance",_N="@firebase/performance-compat",kN="@firebase/remote-config",EN="@firebase/remote-config-compat",TN="@firebase/storage",jN="@firebase/storage-compat",SN="@firebase/firestore",CN="@firebase/ai",NN="@firebase/firestore-compat",AN="firebase",RN="12.8.0";const bg="[DEFAULT]",IN={[vg]:"fire-core",[iN]:"fire-core-compat",[oN]:"fire-analytics",[aN]:"fire-analytics-compat",[cN]:"fire-app-check",[lN]:"fire-app-check-compat",[uN]:"fire-auth",[dN]:"fire-auth-compat",[hN]:"fire-rtdb",[fN]:"fire-data-connect",[mN]:"fire-rtdb-compat",[pN]:"fire-fn",[gN]:"fire-fn-compat",[yN]:"fire-iid",[vN]:"fire-iid-compat",[bN]:"fire-fcm",[wN]:"fire-fcm-compat",[xN]:"fire-perf",[_N]:"fire-perf-compat",[kN]:"fire-rc",[EN]:"fire-rc-compat",[TN]:"fire-gcs",[jN]:"fire-gcs-compat",[SN]:"fire-fst",[NN]:"fire-fst-compat",[CN]:"fire-vertex","fire-js":"fire-js",[AN]:"fire-js-all"};const Mh=new Map,MN=new Map,wg=new Map;function u2(s,e){try{s.container.addComponent(e)}catch(t){oa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function li(s){const e=s.name;if(wg.has(e))return oa.debug(`There were multiple attempts to register component ${e}.`),!1;wg.set(e,s);for(const t of Mh.values())u2(t,s);for(const t of MN.values())u2(t,s);return!0}function Wo(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function jr(s){return s==null?!1:s.settings!==void 0}const DN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ka=new Ho("app","Firebase",DN);class LN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ka.create("app-deleted",{appName:this._name})}}const $o=RN;function ay(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:bg,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Ka.create("bad-app-name",{appName:String(l)});if(t||(t=Lx()),!t)throw Ka.create("no-options");const u=Mh.get(l);if(u){if(aa(t,u.options)&&aa(i,u.config))return u;throw Ka.create("duplicate-app",{appName:l})}const d=new FC(l);for(const g of wg.values())d.addComponent(g);const p=new LN(t,i,d);return Mh.set(l,p),p}function Nu(s=bg){const e=Mh.get(s);if(!e&&s===bg&&Lx())return ay();if(!e)throw Ka.create("no-app",{appName:s});return e}function gr(s,e,t){let i=IN[s]??s;t&&(i+=`-${t}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oa.warn(d.join(" "));return}li(new Xr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const ON="firebase-heartbeat-database",PN=1,hu="firebase-heartbeat-store";let Pp=null;function Fx(){return Pp||(Pp=nf(ON,PN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(hu)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ka.create("idb-open",{originalErrorMessage:s.message})})),Pp}async function VN(s){try{const t=(await Fx()).transaction(hu),i=await t.objectStore(hu).get(qx(s));return await t.done,i}catch(e){if(e instanceof hi)oa.warn(e.message);else{const t=Ka.create("idb-get",{originalErrorMessage:e?.message});oa.warn(t.message)}}}async function d2(s,e){try{const i=(await Fx()).transaction(hu,"readwrite");await i.objectStore(hu).put(e,qx(s)),await i.done}catch(t){if(t instanceof hi)oa.warn(t.message);else{const i=Ka.create("idb-set",{originalErrorMessage:t?.message});oa.warn(i.message)}}}function qx(s){return`${s.name}!${s.options.appId}`}const UN=1024,BN=30;class zN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=h2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>BN){const l=HN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){oa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=h2(),{heartbeatsToSend:t,unsentEntries:i}=FN(this._heartbeatsCache.heartbeats),l=Ih(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return oa.warn(e),""}}}function h2(){return new Date().toISOString().substring(0,10)}function FN(s,e=UN){const t=[];let i=s.slice();for(const l of s){const u=t.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),f2(t)>e){u.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),f2(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class qN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vx()?Ux().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return d2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return d2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function f2(s){return Ih(JSON.stringify({version:2,heartbeats:s})).length}function HN(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function WN(s){li(new Xr("platform-logger",e=>new sN(e),"PRIVATE")),li(new Xr("heartbeat",e=>new zN(e),"PRIVATE")),gr(vg,c2,s),gr(vg,c2,"esm2020"),gr("fire-js","")}WN("");function Hx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $N=Hx,Wx=new Ho("auth","Firebase",Hx());const Dh=new ry("@firebase/auth");function GN(s,...e){Dh.logLevel<=Kt.WARN&&Dh.warn(`Auth (${$o}): ${s}`,...e)}function wh(s,...e){Dh.logLevel<=Kt.ERROR&&Dh.error(`Auth (${$o}): ${s}`,...e)}function ci(s,...e){throw oy(s,...e)}function Ti(s,...e){return oy(s,...e)}function $x(s,e,t){const i={...$N(),[e]:t};return new Ho("auth","Firebase",i).create(e,{appName:s.name})}function sa(s){return $x(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oy(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return Wx.create(s,...e)}function _t(s,e,...t){if(!s)throw oy(e,...t)}function Zi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw wh(e),new Error(e)}function la(s,e){s||Zi(e)}function xg(){return typeof self<"u"&&self.location?.href||""}function KN(){return m2()==="http:"||m2()==="https:"}function m2(){return typeof self<"u"&&self.location?.protocol||null}function YN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KN()||SC()||"connection"in navigator)?navigator.onLine:!0}function QN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Au{constructor(e,t){this.shortDelay=e,this.longDelay=t,la(t>e,"Short delay should be less than long delay!"),this.isMobile=EC()||CC()}get(){return YN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ly(s,e){la(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Gx{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const XN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const JN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZN=new Au(3e4,6e4);function da(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ha(s,e,t,i,l={}){return Kx(s,l,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const p=Cu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return jC()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&so(s.emulatorConfig.host)&&(y.credentials="include"),Gx.fetch()(await Yx(s,s.config.apiHost,t,p),y)})}async function Kx(s,e,t){s._canInitEmulator=!1;const i={...XN,...e};try{const l=new tA(s),u=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw rh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw rh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw rh(s,"user-disabled",d);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw $x(s,b,y);ci(s,b)}}catch(l){if(l instanceof hi)throw l;ci(s,"network-request-failed",{message:String(l)})}}async function Ru(s,e,t,i,l={}){const u=await ha(s,e,t,i,l);return"mfaPendingCredential"in u&&ci(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Yx(s,e,t,i){const l=`${e}${t}?${i}`,u=s,d=u.config.emulator?ly(s.config,l):`${s.config.apiScheme}://${l}`;return JN.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function eA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ti(this.auth,"network-request-failed")),ZN.get())})}}function rh(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const l=Ti(s,e,i);return l.customData._tokenResponse=t,l}function p2(s){return s!==void 0&&s.enterprise!==void 0}class nA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return eA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sA(s,e){return ha(s,"GET","/v2/recaptchaConfig",da(s,e))}async function rA(s,e){return ha(s,"POST","/v1/accounts:delete",e)}async function Lh(s,e){return ha(s,"POST","/v1/accounts:lookup",e)}function iu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iA(s,e=!1){const t=vn(s),i=await t.getIdToken(e),l=cy(i);_t(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:i,authTime:iu(Vp(l.auth_time)),issuedAtTime:iu(Vp(l.iat)),expirationTime:iu(Vp(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Vp(s){return Number(s)*1e3}function cy(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return wh("JWT malformed, contained fewer than 3 sections"),null;try{const l=Ix(t);return l?JSON.parse(l):(wh("Failed to decode base64 JWT payload"),null)}catch(l){return wh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function g2(s){const e=cy(s);return _t(e,"internal-error"),_t(typeof e.exp<"u","internal-error"),_t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fu(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof hi&&aA(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function aA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class oA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _g{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oh(s){const e=s.auth,t=await s.getIdToken(),i=await fu(s,Lh(e,{idToken:t}));_t(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?Qx(l.providerUserInfo):[],d=cA(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!d?.length,y=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new _g(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function lA(s){const e=vn(s);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cA(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function Qx(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function uA(s,e){const t=await Kx(s,{},async()=>{const i=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,d=await Yx(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&so(s.emulatorConfig.host)&&(g.credentials="include"),Gx.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dA(s,e){return ha(s,"POST","/v2/accounts:revokeToken",da(s,e))}class Ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_t(e.idToken,"internal-error"),_t(typeof e.idToken<"u","internal-error"),_t(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):g2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_t(e.length!==0,"internal-error");const t=g2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:l,expiresIn:u}=await uA(e,t);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:l,expirationTime:u}=t,d=new Ol;return i&&(_t(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),l&&(_t(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(_t(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ol,this.toJSON())}_performRefresh(){return Zi("not implemented")}}function Ua(s,e){_t(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new oA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new _g(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await fu(this,this.stsTokenManager.getToken(this.auth,e));return _t(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return iA(this,e)}reload(){return lA(this)}_assign(e){this!==e&&(_t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Oh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(sa(this.auth));const e=await this.getIdToken();return await fu(this,rA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,l=t.email??void 0,u=t.phoneNumber??void 0,d=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:k,emailVerified:E,isAnonymous:O,providerData:W,stsTokenManager:F}=t;_t(k&&F,e,"internal-error");const B=Ol.fromJSON(this.name,F);_t(typeof k=="string",e,"internal-error"),Ua(i,e.name),Ua(l,e.name),_t(typeof E=="boolean",e,"internal-error"),_t(typeof O=="boolean",e,"internal-error"),Ua(u,e.name),Ua(d,e.name),Ua(p,e.name),Ua(g,e.name),Ua(y,e.name),Ua(b,e.name);const $=new ai({uid:k,auth:e,email:l,emailVerified:E,displayName:i,isAnonymous:O,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:B,createdAt:y,lastLoginAt:b});return W&&Array.isArray(W)&&($.providerData=W.map(H=>({...H}))),g&&($._redirectEventId=g),$}static async _fromIdTokenResponse(e,t,i=!1){const l=new Ol;l.updateFromServerResponse(t);const u=new ai({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Oh(u),u}static async _fromGetAccountInfoResponse(e,t,i){const l=t.users[0];_t(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Qx(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,p=new Ol;p.updateFromIdToken(i);const g=new ai({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new _g(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const y2=new Map;function ea(s){la(s instanceof Function,"Expected a class definition");let e=y2.get(s);return e?(la(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,y2.set(s,e),e)}class Xx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Xx.type="NONE";const v2=Xx;function xh(s,e,t){return`firebase:${s}:${e}:${t}`}class Pl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=xh(this.userKey,l.apiKey,u),this.fullPersistenceKey=xh("persistence",l.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lh(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Pl(ea(v2),e,i);const l=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||ea(v2);const d=xh(i,e.config.apiKey,e.name);let p=null;for(const y of t)try{const b=await y._get(d);if(b){let k;if(typeof b=="string"){const E=await Lh(e,{idToken:b}).catch(()=>{});if(!E)break;k=await ai._fromGetAccountInfoResponse(e,E,b)}else k=ai._fromJSON(e,b);y!==u&&(p=k),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Pl(u,e,i):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new Pl(u,e,i))}}function b2(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(t_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Jx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(s_(e))return"Blackberry";if(r_(e))return"Webos";if(Zx(e))return"Safari";if((e.includes("chrome/")||e_(e))&&!e.includes("edge/"))return"Chrome";if(n_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function Jx(s=Ys()){return/firefox\//i.test(s)}function Zx(s=Ys()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function e_(s=Ys()){return/crios\//i.test(s)}function t_(s=Ys()){return/iemobile/i.test(s)}function n_(s=Ys()){return/android/i.test(s)}function s_(s=Ys()){return/blackberry/i.test(s)}function r_(s=Ys()){return/webos/i.test(s)}function uy(s=Ys()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function hA(s=Ys()){return uy(s)&&!!window.navigator?.standalone}function fA(){return NC()&&document.documentMode===10}function i_(s=Ys()){return uy(s)||n_(s)||r_(s)||s_(s)||/windows phone/i.test(s)||t_(s)}function a_(s,e=[]){let t;switch(s){case"Browser":t=b2(Ys());break;case"Worker":t=`${b2(Ys())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${i}`}class mA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function pA(s,e={}){return ha(s,"GET","/v2/passwordPolicy",da(s,e))}const gA=6;class yA{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??gA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class vA{constructor(e,t,i,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new w2(this),this.idTokenSubscription=new w2(this),this.beforeStateQueue=new mA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ea(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Pl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lh(this,{idToken:e}),i=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(sa(this));const t=e?vn(e):null;return t&&_t(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(sa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(sa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pA(this),t=new yA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ho("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await dA(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ea(e)||this._popupRedirectResolver;_t(t,this,"argument-error"),this.redirectPersistenceManager=await Pl.create(this,[ea(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,l){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=a_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&GN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ro(s){return vn(s)}class w2{constructor(e){this.auth=e,this.observer=null,this.addObserver=OC(t=>this.observer=t)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bA(s){sf=s}function o_(s){return sf.loadJS(s)}function wA(){return sf.recaptchaEnterpriseScript}function xA(){return sf.gapiScript}function _A(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class kA{constructor(){this.enterprise=new EA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class EA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const TA="recaptcha-enterprise",l_="NO_RECAPTCHA";class jA{constructor(e){this.type=TA,this.auth=ro(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{sA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new nA(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,d,p){const g=window.grecaptcha;p2(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(l_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kA().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(p=>{if(!t&&p2(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=wA();g.length!==0&&(g+=p),o_(g).then(()=>{l(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function x2(s,e,t,i=!1,l=!1){const u=new jA(s);let d;if(l)d=l_;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Ph(s,e,t,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await x2(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await x2(s,e,t,t==="getOobCode");return i(s,d)}else return Promise.reject(u)})}function SA(s,e){const t=Wo(s,"auth");if(t.isInitialized()){const l=t.getImmediate(),u=t.getOptions();if(aa(u,e??{}))return l;ci(l,"already-initialized")}return t.initialize({options:e})}function CA(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ea);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function NA(s,e,t){const i=ro(s);_t(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=c_(e),{host:d,port:p}=AA(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},b=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){_t(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),_t(aa(y,i.config.emulator)&&aa(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,so(d)?(ny(`${u}//${d}${g}`),sy("Auth",!0)):RA()}function c_(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function AA(s){const e=c_(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:_2(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:_2(d)}}}function _2(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function RA(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class dy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,t){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}async function IA(s,e){return ha(s,"POST","/v1/accounts:signUp",e)}async function MA(s,e){return Ru(s,"POST","/v1/accounts:signInWithPassword",da(s,e))}async function u_(s,e){return ha(s,"POST","/v1/accounts:sendOobCode",da(s,e))}async function DA(s,e){return u_(s,e)}async function LA(s,e){return u_(s,e)}async function OA(s,e){return Ru(s,"POST","/v1/accounts:signInWithEmailLink",da(s,e))}async function PA(s,e){return Ru(s,"POST","/v1/accounts:signInWithEmailLink",da(s,e))}class mu extends dy{constructor(e,t,i,l=null){super("password",i),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new mu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new mu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ph(e,t,"signInWithPassword",MA);case"emailLink":return OA(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ph(e,i,"signUpPassword",IA);case"emailLink":return PA(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vl(s,e){return Ru(s,"POST","/v1/accounts:signInWithIdp",da(s,e))}const VA="http://localhost";class Oo extends dy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=t;if(!i||!l)return null;const d=new Oo(i,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Vl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Vl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vl(e,t)}buildRequest(){const e={requestUri:VA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cu(t)}return e}}function UA(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BA(s){const e=Jc(Zc(s)).link,t=e?Jc(Zc(e)).deep_link_id:null,i=Jc(Zc(s)).deep_link_id;return(i?Jc(Zc(i)).link:null)||i||t||e||s}class hy{constructor(e){const t=Jc(Zc(e)),i=t.apiKey??null,l=t.oobCode??null,u=UA(t.mode??null);_t(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=BA(e);try{return new hy(t)}catch{return null}}}class Zl{constructor(){this.providerId=Zl.PROVIDER_ID}static credential(e,t){return mu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=hy.parseLink(t);return _t(i,"argument-error"),mu._fromEmailAndCode(e,i.code,i.tenantId)}}Zl.PROVIDER_ID="password";Zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class d_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Iu extends d_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ba extends Iu{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ba.credential(e.oauthAccessToken)}catch{return null}}}Ba.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ba.PROVIDER_ID="facebook.com";class za extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oo._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return za.credentialFromTaggedObject(e)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return za.credential(t,i)}catch{return null}}}za.GOOGLE_SIGN_IN_METHOD="google.com";za.PROVIDER_ID="google.com";class Fa extends Iu{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fa.credential(e.oauthAccessToken)}catch{return null}}}Fa.GITHUB_SIGN_IN_METHOD="github.com";Fa.PROVIDER_ID="github.com";class qa extends Iu{constructor(){super("twitter.com")}static credential(e,t){return Oo._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return qa.credential(t,i)}catch{return null}}}qa.TWITTER_SIGN_IN_METHOD="twitter.com";qa.PROVIDER_ID="twitter.com";async function zA(s,e){return Ru(s,"POST","/v1/accounts:signUp",da(s,e))}class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,l=!1){const u=await ai._fromIdTokenResponse(e,i,l),d=k2(i);return new Po({user:u,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const l=k2(i);return new Po({user:e,providerId:l,_tokenResponse:i,operationType:t})}}function k2(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Vh extends hi{constructor(e,t,i,l){super(t.code,t.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,l){return new Vh(e,t,i,l)}}function h_(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(s,u,e,i):u})}async function FA(s,e,t=!1){const i=await fu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Po._forOperation(s,"link",i)}async function qA(s,e,t=!1){const{auth:i}=s;if(jr(i.app))return Promise.reject(sa(i));const l="reauthenticate";try{const u=await fu(s,h_(i,l,e,s),t);_t(u.idToken,i,"internal-error");const d=cy(u.idToken);_t(d,i,"internal-error");const{sub:p}=d;return _t(s.uid===p,i,"user-mismatch"),Po._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&ci(i,"user-mismatch"),u}}async function f_(s,e,t=!1){if(jr(s.app))return Promise.reject(sa(s));const i="signIn",l=await h_(s,i,e),u=await Po._fromIdTokenResponse(s,i,l);return t||await s._updateCurrentUser(u.user),u}async function HA(s,e){return f_(ro(s),e)}async function m_(s){const e=ro(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WA(s,e,t){const i=ro(s);await Ph(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",LA)}async function $A(s,e,t){if(jr(s.app))return Promise.reject(sa(s));const i=ro(s),d=await Ph(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zA).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&m_(s),g}),p=await Po._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function GA(s,e,t){return jr(s.app)?Promise.reject(sa(s)):HA(vn(s),Zl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&m_(s),i})}async function RO(s,e){const t=vn(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:u}=await DA(t.auth,l);u!==s.email&&await s.reload()}function E2(s,e){return vn(s).setPersistence(e)}function KA(s,e,t,i){return vn(s).onIdTokenChanged(e,t,i)}function YA(s,e,t){return vn(s).beforeAuthStateChanged(e,t)}function QA(s,e,t,i){return vn(s).onAuthStateChanged(e,t,i)}function XA(s){return vn(s).signOut()}const Uh="__sak";class p_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const JA=1e3,ZA=10;class g_ extends p_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=i_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),l=this.localCache[t];i!==l&&e(t,l,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);fA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,ZA):l()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},JA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}g_.type="LOCAL";const kg=g_;class y_ extends p_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}y_.type="SESSION";const fy=y_;function e4(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const i=new rf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:l,data:u}=t.data,d=this.handlersMap[l];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(d).map(async y=>y(t.origin,u)),g=await e4(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rf.receivers=[];function my(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class t4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=my("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:l,onMessage(k){const E=k;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(E.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ji(){return window}function n4(s){ji().location.href=s}function v_(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function s4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function r4(){return navigator?.serviceWorker?.controller||null}function i4(){return v_()?self:null}const b_="firebaseLocalStorageDb",a4=1,Bh="firebaseLocalStorage",w_="fbase_key";class Mu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function af(s,e){return s.transaction([Bh],e?"readwrite":"readonly").objectStore(Bh)}function o4(){const s=indexedDB.deleteDatabase(b_);return new Mu(s).toPromise()}function Eg(){const s=indexedDB.open(b_,a4);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Bh,{keyPath:w_})}catch(l){t(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Bh)?e(i):(i.close(),await o4(),e(await Eg()))})})}async function T2(s,e,t){const i=af(s,!0).put({[w_]:e,value:t});return new Mu(i).toPromise()}async function l4(s,e){const t=af(s,!1).get(e),i=await new Mu(t).toPromise();return i===void 0?null:i.value}function j2(s,e){const t=af(s,!0).delete(e);return new Mu(t).toPromise()}const c4=800,u4=3;class x_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Eg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>u4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return v_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rf._getInstance(i4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await s4(),!this.activeServiceWorker)return;this.sender=new t4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||r4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Eg();return await T2(e,Uh,"1"),await j2(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>T2(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>l4(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>j2(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=af(l,!1).getAll();return new Mu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}x_.type="LOCAL";const d4=x_;new Au(3e4,6e4);function h4(s,e){return e?ea(e):(_t(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class py extends dy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function f4(s){return f_(s.auth,new py(s),s.bypassAuthState)}function m4(s){const{auth:e,user:t}=s;return _t(t,e,"internal-error"),qA(t,new py(s),s.bypassAuthState)}async function p4(s){const{auth:e,user:t}=s;return _t(t,e,"internal-error"),FA(t,new py(s),s.bypassAuthState)}class __{constructor(e,t,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return f4;case"linkViaPopup":case"linkViaRedirect":return p4;case"reauthViaPopup":case"reauthViaRedirect":return m4;default:ci(this.auth,"internal-error")}}resolve(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){la(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const g4=new Au(2e3,1e4);class Ll extends __{constructor(e,t,i,l,u){super(e,t,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Ll.currentPopupAction&&Ll.currentPopupAction.cancel(),Ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _t(e,this.auth,"internal-error"),e}async onExecution(){la(this.filter.length===1,"Popup operations only handle one event");const e=my();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,g4.get())};e()}}Ll.currentPopupAction=null;const y4="pendingRedirect",_h=new Map;class v4 extends __{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=_h.get(this.auth._key());if(!e){try{const i=await b4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}_h.set(this.auth._key(),e)}return this.bypassAuthState||_h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function b4(s,e){const t=_4(e),i=x4(s);if(!await i._isAvailable())return!1;const l=await i._get(t)==="true";return await i._remove(t),l}function w4(s,e){_h.set(s._key(),e)}function x4(s){return ea(s._redirectPersistence)}function _4(s){return xh(y4,s.config.apiKey,s.name)}async function k4(s,e,t=!1){if(jr(s.app))return Promise.reject(sa(s));const i=ro(s),l=h4(i,e),d=await new v4(i,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}const E4=600*1e3;class T4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!j4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!k_(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=E4&&this.cachedEventUids.clear(),this.cachedEventUids.has(S2(e))}saveEventToCache(e){this.cachedEventUids.add(S2(e)),this.lastProcessedEventTime=Date.now()}}function S2(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function k_({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function j4(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k_(s);default:return!1}}async function S4(s,e={}){return ha(s,"GET","/v1/projects",e)}const C4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N4=/^https?/;async function A4(s){if(s.config.emulator)return;const{authorizedDomains:e}=await S4(s);for(const t of e)try{if(R4(t))return}catch{}ci(s,"unauthorized-domain")}function R4(s){const e=xg(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!N4.test(t))return!1;if(C4.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const I4=new Au(3e4,6e4);function C2(){const s=ji().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function M4(s){return new Promise((e,t)=>{function i(){C2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{C2(),t(Ti(s,"network-request-failed"))},timeout:I4.get()})}if(ji().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ji().gapi?.load)i();else{const l=_A("iframefcb");return ji()[l]=()=>{gapi.load?i():t(Ti(s,"network-request-failed"))},o_(`${xA()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw kh=null,e})}let kh=null;function D4(s){return kh=kh||M4(s),kh}const L4=new Au(5e3,15e3),O4="__/auth/iframe",P4="emulator/auth/iframe",V4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function B4(s){const e=s.config;_t(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?ly(e,P4):`https://${s.config.authDomain}/${O4}`,i={apiKey:e.apiKey,appName:s.name,v:$o},l=U4.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${Cu(i).slice(1)}`}async function z4(s){const e=await D4(s),t=ji().gapi;return _t(t,s,"internal-error"),e.open({where:document.body,url:B4(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V4,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const d=Ti(s,"network-request-failed"),p=ji().setTimeout(()=>{u(d)},L4.get());function g(){ji().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(d)})}))}const F4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q4=500,H4=600,W4="_blank",$4="http://localhost";class N2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function G4(s,e,t,i=q4,l=H4){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...F4,width:i.toString(),height:l.toString(),top:u,left:d},y=Ys().toLowerCase();t&&(p=e_(y)?W4:t),Jx(y)&&(e=e||$4,g.scrollbars="yes");const b=Object.entries(g).reduce((E,[O,W])=>`${E}${O}=${W},`,"");if(hA(y)&&p!=="_self")return K4(e||"",p),new N2(null);const k=window.open(e||"",p,b);_t(k,s,"popup-blocked");try{k.focus()}catch{}return new N2(k)}function K4(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const Y4="__/auth/handler",Q4="emulator/auth/handler",X4=encodeURIComponent("fac");async function A2(s,e,t,i,l,u){_t(s.config.authDomain,s,"auth-domain-config-required"),_t(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:$o,eventId:l};if(e instanceof d_){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",LC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,k]of Object.entries({}))d[b]=k}if(e instanceof Iu){const b=e.getScopes().filter(k=>k!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),y=g?`#${X4}=${encodeURIComponent(g)}`:"";return`${J4(s)}?${Cu(p).slice(1)}${y}`}function J4({config:s}){return s.emulator?ly(s,Q4):`https://${s.authDomain}/${Y4}`}const Up="webStorageSupport";class Z4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fy,this._completeRedirectFn=k4,this._overrideRedirectResult=w4}async _openPopup(e,t,i,l){la(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await A2(e,t,i,xg(),l);return G4(e,u,my())}async _openRedirect(e,t,i,l){await this._originValidation(e);const u=await A2(e,t,i,xg(),l);return n4(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:u}=this.eventManagers[t];return l?Promise.resolve(l):(la(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await z4(e),i=new T4(e);return t.register("authEvent",l=>(_t(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Up,{type:Up},l=>{const u=l?.[0]?.[Up];u!==void 0&&t(!!u),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=A4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return i_()||Zx()||uy()}}const eR=Z4;var R2="@firebase/auth",I2="1.12.0";class tR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function nR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sR(s){li(new Xr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;_t(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:a_(s)},y=new vA(i,l,u,g);return CA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),li(new Xr("auth-internal",e=>{const t=ro(e.getProvider("auth").getImmediate());return(i=>new tR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(R2,I2,nR(s)),gr(R2,I2,"esm2020")}const rR=300,iR=Ox("authIdTokenMaxAge")||rR;let M2=null;const aR=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>iR)return;const l=t?.token;M2!==l&&(M2=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function E_(s=Nu()){const e=Wo(s,"auth");if(e.isInitialized())return e.getImmediate();const t=SA(s,{popupRedirectResolver:eR,persistence:[d4,kg,fy]}),i=Ox("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=aR(u.toString());YA(t,d,()=>d(t.currentUser)),KA(t,p=>d(p))}}const l=Mx("auth");return l&&NA(t,`http://${l}`),t}function oR(){return document.getElementsByTagName("head")?.[0]??document}bA({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=Ti("internal-error");u.customData=l,t(u)},i.type="text/javascript",i.charset="UTF-8",oR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sR("Browser");var D2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ya,T_;(function(){var s;function e(C,T){function R(){}R.prototype=T.prototype,C.F=T.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(P,M,D){for(var A=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)A[Ue-2]=arguments[Ue];return T.prototype[M].apply(P,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(C,T,R){R||(R=0);const P=Array(16);if(typeof T=="string")for(var M=0;M<16;++M)P[M]=T.charCodeAt(R++)|T.charCodeAt(R++)<<8|T.charCodeAt(R++)<<16|T.charCodeAt(R++)<<24;else for(M=0;M<16;++M)P[M]=T[R++]|T[R++]<<8|T[R++]<<16|T[R++]<<24;T=C.g[0],R=C.g[1],M=C.g[2];let D=C.g[3],A;A=T+(D^R&(M^D))+P[0]+3614090360&4294967295,T=R+(A<<7&4294967295|A>>>25),A=D+(M^T&(R^M))+P[1]+3905402710&4294967295,D=T+(A<<12&4294967295|A>>>20),A=M+(R^D&(T^R))+P[2]+606105819&4294967295,M=D+(A<<17&4294967295|A>>>15),A=R+(T^M&(D^T))+P[3]+3250441966&4294967295,R=M+(A<<22&4294967295|A>>>10),A=T+(D^R&(M^D))+P[4]+4118548399&4294967295,T=R+(A<<7&4294967295|A>>>25),A=D+(M^T&(R^M))+P[5]+1200080426&4294967295,D=T+(A<<12&4294967295|A>>>20),A=M+(R^D&(T^R))+P[6]+2821735955&4294967295,M=D+(A<<17&4294967295|A>>>15),A=R+(T^M&(D^T))+P[7]+4249261313&4294967295,R=M+(A<<22&4294967295|A>>>10),A=T+(D^R&(M^D))+P[8]+1770035416&4294967295,T=R+(A<<7&4294967295|A>>>25),A=D+(M^T&(R^M))+P[9]+2336552879&4294967295,D=T+(A<<12&4294967295|A>>>20),A=M+(R^D&(T^R))+P[10]+4294925233&4294967295,M=D+(A<<17&4294967295|A>>>15),A=R+(T^M&(D^T))+P[11]+2304563134&4294967295,R=M+(A<<22&4294967295|A>>>10),A=T+(D^R&(M^D))+P[12]+1804603682&4294967295,T=R+(A<<7&4294967295|A>>>25),A=D+(M^T&(R^M))+P[13]+4254626195&4294967295,D=T+(A<<12&4294967295|A>>>20),A=M+(R^D&(T^R))+P[14]+2792965006&4294967295,M=D+(A<<17&4294967295|A>>>15),A=R+(T^M&(D^T))+P[15]+1236535329&4294967295,R=M+(A<<22&4294967295|A>>>10),A=T+(M^D&(R^M))+P[1]+4129170786&4294967295,T=R+(A<<5&4294967295|A>>>27),A=D+(R^M&(T^R))+P[6]+3225465664&4294967295,D=T+(A<<9&4294967295|A>>>23),A=M+(T^R&(D^T))+P[11]+643717713&4294967295,M=D+(A<<14&4294967295|A>>>18),A=R+(D^T&(M^D))+P[0]+3921069994&4294967295,R=M+(A<<20&4294967295|A>>>12),A=T+(M^D&(R^M))+P[5]+3593408605&4294967295,T=R+(A<<5&4294967295|A>>>27),A=D+(R^M&(T^R))+P[10]+38016083&4294967295,D=T+(A<<9&4294967295|A>>>23),A=M+(T^R&(D^T))+P[15]+3634488961&4294967295,M=D+(A<<14&4294967295|A>>>18),A=R+(D^T&(M^D))+P[4]+3889429448&4294967295,R=M+(A<<20&4294967295|A>>>12),A=T+(M^D&(R^M))+P[9]+568446438&4294967295,T=R+(A<<5&4294967295|A>>>27),A=D+(R^M&(T^R))+P[14]+3275163606&4294967295,D=T+(A<<9&4294967295|A>>>23),A=M+(T^R&(D^T))+P[3]+4107603335&4294967295,M=D+(A<<14&4294967295|A>>>18),A=R+(D^T&(M^D))+P[8]+1163531501&4294967295,R=M+(A<<20&4294967295|A>>>12),A=T+(M^D&(R^M))+P[13]+2850285829&4294967295,T=R+(A<<5&4294967295|A>>>27),A=D+(R^M&(T^R))+P[2]+4243563512&4294967295,D=T+(A<<9&4294967295|A>>>23),A=M+(T^R&(D^T))+P[7]+1735328473&4294967295,M=D+(A<<14&4294967295|A>>>18),A=R+(D^T&(M^D))+P[12]+2368359562&4294967295,R=M+(A<<20&4294967295|A>>>12),A=T+(R^M^D)+P[5]+4294588738&4294967295,T=R+(A<<4&4294967295|A>>>28),A=D+(T^R^M)+P[8]+2272392833&4294967295,D=T+(A<<11&4294967295|A>>>21),A=M+(D^T^R)+P[11]+1839030562&4294967295,M=D+(A<<16&4294967295|A>>>16),A=R+(M^D^T)+P[14]+4259657740&4294967295,R=M+(A<<23&4294967295|A>>>9),A=T+(R^M^D)+P[1]+2763975236&4294967295,T=R+(A<<4&4294967295|A>>>28),A=D+(T^R^M)+P[4]+1272893353&4294967295,D=T+(A<<11&4294967295|A>>>21),A=M+(D^T^R)+P[7]+4139469664&4294967295,M=D+(A<<16&4294967295|A>>>16),A=R+(M^D^T)+P[10]+3200236656&4294967295,R=M+(A<<23&4294967295|A>>>9),A=T+(R^M^D)+P[13]+681279174&4294967295,T=R+(A<<4&4294967295|A>>>28),A=D+(T^R^M)+P[0]+3936430074&4294967295,D=T+(A<<11&4294967295|A>>>21),A=M+(D^T^R)+P[3]+3572445317&4294967295,M=D+(A<<16&4294967295|A>>>16),A=R+(M^D^T)+P[6]+76029189&4294967295,R=M+(A<<23&4294967295|A>>>9),A=T+(R^M^D)+P[9]+3654602809&4294967295,T=R+(A<<4&4294967295|A>>>28),A=D+(T^R^M)+P[12]+3873151461&4294967295,D=T+(A<<11&4294967295|A>>>21),A=M+(D^T^R)+P[15]+530742520&4294967295,M=D+(A<<16&4294967295|A>>>16),A=R+(M^D^T)+P[2]+3299628645&4294967295,R=M+(A<<23&4294967295|A>>>9),A=T+(M^(R|~D))+P[0]+4096336452&4294967295,T=R+(A<<6&4294967295|A>>>26),A=D+(R^(T|~M))+P[7]+1126891415&4294967295,D=T+(A<<10&4294967295|A>>>22),A=M+(T^(D|~R))+P[14]+2878612391&4294967295,M=D+(A<<15&4294967295|A>>>17),A=R+(D^(M|~T))+P[5]+4237533241&4294967295,R=M+(A<<21&4294967295|A>>>11),A=T+(M^(R|~D))+P[12]+1700485571&4294967295,T=R+(A<<6&4294967295|A>>>26),A=D+(R^(T|~M))+P[3]+2399980690&4294967295,D=T+(A<<10&4294967295|A>>>22),A=M+(T^(D|~R))+P[10]+4293915773&4294967295,M=D+(A<<15&4294967295|A>>>17),A=R+(D^(M|~T))+P[1]+2240044497&4294967295,R=M+(A<<21&4294967295|A>>>11),A=T+(M^(R|~D))+P[8]+1873313359&4294967295,T=R+(A<<6&4294967295|A>>>26),A=D+(R^(T|~M))+P[15]+4264355552&4294967295,D=T+(A<<10&4294967295|A>>>22),A=M+(T^(D|~R))+P[6]+2734768916&4294967295,M=D+(A<<15&4294967295|A>>>17),A=R+(D^(M|~T))+P[13]+1309151649&4294967295,R=M+(A<<21&4294967295|A>>>11),A=T+(M^(R|~D))+P[4]+4149444226&4294967295,T=R+(A<<6&4294967295|A>>>26),A=D+(R^(T|~M))+P[11]+3174756917&4294967295,D=T+(A<<10&4294967295|A>>>22),A=M+(T^(D|~R))+P[2]+718787259&4294967295,M=D+(A<<15&4294967295|A>>>17),A=R+(D^(M|~T))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+D&4294967295}i.prototype.v=function(C,T){T===void 0&&(T=C.length);const R=T-this.blockSize,P=this.C;let M=this.h,D=0;for(;D<T;){if(M==0)for(;D<=R;)l(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<T;)if(P[M++]=C.charCodeAt(D++),M==this.blockSize){l(this,P),M=0;break}}else for(;D<T;)if(P[M++]=C[D++],M==this.blockSize){l(this,P),M=0;break}}this.h=M,this.o+=T},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;T=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=T&255,T/=256;for(this.v(C),C=Array(16),T=0,R=0;R<4;++R)for(let P=0;P<32;P+=8)C[T++]=this.g[R]>>>P&255;return C};function u(C,T){var R=p;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=T(C)}function d(C,T){this.h=T;const R=[];let P=!0;for(let M=C.length-1;M>=0;M--){const D=C[M]|0;P&&D==T||(R[M]=D,P=!1)}this.g=R}var p={};function g(C){return-128<=C&&C<128?u(C,function(T){return new d([T|0],T<0?-1:0)}):new d([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return k;if(C<0)return B(y(-C));const T=[];let R=1;for(let P=0;C>=R;P++)T[P]=C/R|0,R*=4294967296;return new d(T,0)}function b(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return B(b(C.substring(1),T));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(T,8));let P=k;for(let D=0;D<C.length;D+=8){var M=Math.min(8,C.length-D);const A=parseInt(C.substring(D,D+M),T);M<8?(M=y(Math.pow(T,M)),P=P.j(M).add(y(A))):(P=P.j(R),P=P.add(y(A)))}return P}var k=g(0),E=g(1),O=g(16777216);s=d.prototype,s.m=function(){if(F(this))return-B(this).m();let C=0,T=1;for(let R=0;R<this.g.length;R++){const P=this.i(R);C+=(P>=0?P:4294967296+P)*T,T*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(W(this))return"0";if(F(this))return"-"+B(this).toString(C);const T=y(Math.pow(C,6));var R=this;let P="";for(;;){const M=ue(R,T).g;R=$(R,M.j(T));let D=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=M,W(R))return D+P;for(;D.length<6;)D="0"+D;P=D+P}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function W(C){if(C.h!=0)return!1;for(let T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function F(C){return C.h==-1}s.l=function(C){return C=$(this,C),F(C)?-1:W(C)?0:1};function B(C){const T=C.g.length,R=[];for(let P=0;P<T;P++)R[P]=~C.g[P];return new d(R,~C.h).add(E)}s.abs=function(){return F(this)?B(this):this},s.add=function(C){const T=Math.max(this.g.length,C.g.length),R=[];let P=0;for(let M=0;M<=T;M++){let D=P+(this.i(M)&65535)+(C.i(M)&65535),A=(D>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);P=A>>>16,D&=65535,A&=65535,R[M]=A<<16|D}return new d(R,R[R.length-1]&-2147483648?-1:0)};function $(C,T){return C.add(B(T))}s.j=function(C){if(W(this)||W(C))return k;if(F(this))return F(C)?B(this).j(B(C)):B(B(this).j(C));if(F(C))return B(this.j(B(C)));if(this.l(O)<0&&C.l(O)<0)return y(this.m()*C.m());const T=this.g.length+C.g.length,R=[];for(var P=0;P<2*T;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(let M=0;M<C.g.length;M++){const D=this.i(P)>>>16,A=this.i(P)&65535,Ue=C.i(M)>>>16,Xe=C.i(M)&65535;R[2*P+2*M]+=A*Xe,H(R,2*P+2*M),R[2*P+2*M+1]+=D*Xe,H(R,2*P+2*M+1),R[2*P+2*M+1]+=A*Ue,H(R,2*P+2*M+1),R[2*P+2*M+2]+=D*Ue,H(R,2*P+2*M+2)}for(C=0;C<T;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=T;C<2*T;C++)R[C]=0;return new d(R,0)};function H(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function K(C,T){this.g=C,this.h=T}function ue(C,T){if(W(T))throw Error("division by zero");if(W(C))return new K(k,k);if(F(C))return T=ue(B(C),T),new K(B(T.g),B(T.h));if(F(T))return T=ue(C,B(T)),new K(B(T.g),T.h);if(C.g.length>30){if(F(C)||F(T))throw Error("slowDivide_ only works with positive integers.");for(var R=E,P=T;P.l(C)<=0;)R=Ee(R),P=Ee(P);var M=we(R,1),D=we(P,1);for(P=we(P,2),R=we(R,2);!W(P);){var A=D.add(P);A.l(C)<=0&&(M=M.add(R),D=A),P=we(P,1),R=we(R,1)}return T=$(C,M.j(T)),new K(M,T)}for(M=k;C.l(T)>=0;){for(R=Math.max(1,Math.floor(C.m()/T.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),D=y(R),A=D.j(T);F(A)||A.l(C)>0;)R-=P,D=y(R),A=D.j(T);W(D)&&(D=E),M=M.add(D),C=$(C,A)}return new K(M,C)}s.B=function(C){return ue(this,C).h},s.and=function(C){const T=Math.max(this.g.length,C.g.length),R=[];for(let P=0;P<T;P++)R[P]=this.i(P)&C.i(P);return new d(R,this.h&C.h)},s.or=function(C){const T=Math.max(this.g.length,C.g.length),R=[];for(let P=0;P<T;P++)R[P]=this.i(P)|C.i(P);return new d(R,this.h|C.h)},s.xor=function(C){const T=Math.max(this.g.length,C.g.length),R=[];for(let P=0;P<T;P++)R[P]=this.i(P)^C.i(P);return new d(R,this.h^C.h)};function Ee(C){const T=C.g.length+1,R=[];for(let P=0;P<T;P++)R[P]=C.i(P)<<1|C.i(P-1)>>>31;return new d(R,C.h)}function we(C,T){const R=T>>5;T%=32;const P=C.g.length-R,M=[];for(let D=0;D<P;D++)M[D]=T>0?C.i(D+R)>>>T|C.i(D+R+1)<<32-T:C.i(D+R);return new d(M,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,T_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Ya=d}).apply(typeof D2<"u"?D2:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var j_,eu,S_,Eh,Tg,C_,N_,A_;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var v=0;v<h.length;++v){var _=h[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function l(h,v){if(v)e:{var _=i;h=h.split(".");for(var N=0;N<h.length-1;N++){var X=h[N];if(!(X in _))break e;_=_[X]}h=h[h.length-1],N=_[h],v=v(N),v!=N&&v!=null&&e(_,h,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(v){var _=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&_.push([N,v[N]]);return _}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,_){return h.call.apply(h.bind,arguments)}function y(h,v,_){return y=g,y.apply(null,arguments)}function b(h,v){var _=Array.prototype.slice.call(arguments,1);return function(){var N=_.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function k(h,v){function _(){}_.prototype=v.prototype,h.Z=v.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(N,X,ce){for(var De=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)De[Dt-2]=arguments[Dt];return v.prototype[X].apply(N,De)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const v=h.length;if(v>0){const _=Array(v);for(let N=0;N<v;N++)_[N]=h[N];return _}return[]}function W(h,v){for(let N=1;N<arguments.length;N++){const X=arguments[N];var _=typeof X;if(_=_!="object"?_:X?Array.isArray(X)?"array":_:"null",_=="array"||_=="object"&&typeof X.length=="number"){_=h.length||0;const ce=X.length||0;h.length=_+ce;for(let De=0;De<ce;De++)h[_+De]=X[De]}else h.push(X)}}class F{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function B(h){d.setTimeout(()=>{throw h},0)}function $(){var h=C;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class H{constructor(){this.h=this.g=null}add(v,_){const N=K.get();N.set(v,_),this.h?this.h.next=N:this.g=N,this.h=N}}var K=new F(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,we=!1,C=new H,T=()=>{const h=Promise.resolve(void 0);Ee=()=>{h.then(R)}};function R(){for(var h;h=$();){try{h.h.call(h.g)}catch(_){B(_)}var v=K;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}we=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,v),d.removeEventListener("test",_,v)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function Ue(h,v){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}k(Ue,M),Ue.prototype.init=function(h,v){const _=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(_=="mouseover"?v=h.fromElement:_=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),Z=0;function je(h,v,_,N,X){this.listener=h,this.proxy=null,this.src=v,this.type=_,this.capture=!!N,this.ha=X,this.key=++Z,this.da=this.fa=!1}function Me(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Se(h,v,_){for(const N in h)v.call(_,h[N],N,h)}function Y(h,v){for(const _ in h)v.call(void 0,h[_],_,h)}function L(h){const v={};for(const _ in h)v[_]=h[_];return v}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ve(h,v){let _,N;for(let X=1;X<arguments.length;X++){N=arguments[X];for(_ in N)h[_]=N[_];for(let ce=0;ce<re.length;ce++)_=re[ce],Object.prototype.hasOwnProperty.call(N,_)&&(h[_]=N[_])}}function _e(h){this.src=h,this.g={},this.h=0}_e.prototype.add=function(h,v,_,N,X){const ce=h.toString();h=this.g[ce],h||(h=this.g[ce]=[],this.h++);const De=ke(h,v,N,X);return De>-1?(v=h[De],_||(v.fa=!1)):(v=new je(v,this.src,ce,!!N,X),v.fa=_,h.push(v)),v};function be(h,v){const _=v.type;if(_ in h.g){var N=h.g[_],X=Array.prototype.indexOf.call(N,v,void 0),ce;(ce=X>=0)&&Array.prototype.splice.call(N,X,1),ce&&(Me(v),h.g[_].length==0&&(delete h.g[_],h.h--))}}function ke(h,v,_,N){for(let X=0;X<h.length;++X){const ce=h[X];if(!ce.da&&ce.listener==v&&ce.capture==!!_&&ce.ha==N)return X}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),st={};function Pe(h,v,_,N,X){if(Array.isArray(v)){for(let ce=0;ce<v.length;ce++)Pe(h,v[ce],_,N,X);return null}return _=de(_),h&&h[Xe]?h.J(v,_,p(N)?!!N.capture:!1,X):qt(h,v,_,!1,N,X)}function qt(h,v,_,N,X,ce){if(!v)throw Error("Invalid event type");const De=p(X)?!!X.capture:!!X;let Dt=ut(h);if(Dt||(h[Be]=Dt=new _e(h)),_=Dt.add(v,_,N,De,ce),_.proxy)return _;if(N=un(),_.proxy=N,N.src=h,N.listener=_,h.addEventListener)D||(X=De),X===void 0&&(X=!1),h.addEventListener(v.toString(),N,X);else if(h.attachEvent)h.attachEvent(it(v.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return _}function un(){function h(_){return v.call(h.src,h.listener,_)}const v=vt;return h}function Un(h,v,_,N,X){if(Array.isArray(v))for(var ce=0;ce<v.length;ce++)Un(h,v[ce],_,N,X);else N=p(N)?!!N.capture:!!N,_=de(_),h&&h[Xe]?(h=h.i,ce=String(v).toString(),ce in h.g&&(v=h.g[ce],_=ke(v,_,N,X),_>-1&&(Me(v[_]),Array.prototype.splice.call(v,_,1),v.length==0&&(delete h.g[ce],h.h--)))):h&&(h=ut(h))&&(v=h.g[v.toString()],h=-1,v&&(h=ke(v,_,N,X)),(_=h>-1?v[h]:null)&&Ot(_))}function Ot(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Xe])be(v.i,h);else{var _=h.type,N=h.proxy;v.removeEventListener?v.removeEventListener(_,N,h.capture):v.detachEvent?v.detachEvent(it(_),N):v.addListener&&v.removeListener&&v.removeListener(N),(_=ut(v))?(be(_,h),_.h==0&&(_.src=null,v[Be]=null)):Me(h)}}}function it(h){return h in st?st[h]:st[h]="on"+h}function vt(h,v){if(h.da)h=!0;else{v=new Ue(v,this);const _=h.listener,N=h.ha||h.src;h.fa&&Ot(h),h=_.call(N,v)}return h}function ut(h){return h=h[Be],h instanceof _e?h:null}var Bn="__closure_events_fn_"+(Math.random()*1e9>>>0);function de(h){return typeof h=="function"?h:(h[Bn]||(h[Bn]=function(v){return h.handleEvent(v)}),h[Bn])}function Mt(){P.call(this),this.i=new _e(this),this.M=this,this.G=null}k(Mt,P),Mt.prototype[Xe]=!0,Mt.prototype.removeEventListener=function(h,v,_,N){Un(this,h,v,_,N)};function bt(h,v){var _,N=h.G;if(N)for(_=[];N;N=N.G)_.push(N);if(h=h.M,N=v.type||v,typeof v=="string")v=new M(v,h);else if(v instanceof M)v.target=v.target||h;else{var X=v;v=new M(N,h),ve(v,X)}X=!0;let ce,De;if(_)for(De=_.length-1;De>=0;De--)ce=v.g=_[De],X=Bt(ce,N,!0,v)&&X;if(ce=v.g=h,X=Bt(ce,N,!0,v)&&X,X=Bt(ce,N,!1,v)&&X,_)for(De=0;De<_.length;De++)ce=v.g=_[De],X=Bt(ce,N,!1,v)&&X}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const _=h.g[v];for(let N=0;N<_.length;N++)Me(_[N]);delete h.g[v],h.h--}}this.G=null},Mt.prototype.J=function(h,v,_,N){return this.i.add(String(h),v,!1,_,N)},Mt.prototype.K=function(h,v,_,N){return this.i.add(String(h),v,!0,_,N)};function Bt(h,v,_,N){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let X=!0;for(let ce=0;ce<v.length;++ce){const De=v[ce];if(De&&!De.da&&De.capture==_){const Dt=De.listener,ls=De.ha||De.src;De.fa&&be(h.i,De),X=Dt.call(ls,N)!==!1&&X}}return X&&!N.defaultPrevented}function et(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function It(h){h.g=et(()=>{h.g=null,h.i&&(h.i=!1,It(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class wt extends P{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function an(h){P.call(this),this.h=h,this.g={}}k(an,P);var Ns=[];function rs(h){Se(h.g,function(v,_){this.g.hasOwnProperty(_)&&Ot(v)},h),h.g={}}an.prototype.N=function(){an.Z.N.call(this),rs(this)},an.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var en=d.JSON.stringify,se=d.JSON.parse,Ne=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function pt(){}function xt(){}var at={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $e(){M.call(this,"d")}k($e,M);function rt(){M.call(this,"c")}k(rt,M);var qe={},on=null;function dn(){return on=on||new Mt}qe.Ia="serverreachability";function Ln(h){M.call(this,qe.Ia,h)}k(Ln,M);function zn(h){const v=dn();bt(v,new Ln(v))}qe.STAT_EVENT="statevent";function Xn(h,v){M.call(this,qe.STAT_EVENT,h),this.stat=v}k(Xn,M);function Xt(h){const v=dn();bt(v,new Xn(v,h))}qe.Ja="timingevent";function Fn(h,v){M.call(this,qe.Ja,h),this.size=v}k(Fn,M);function An(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function hn(){this.g=!0}hn.prototype.ua=function(){this.g=!1};function yr(h,v,_,N,X,ce){h.info(function(){if(h.g)if(ce){var De="",Dt=ce.split("&");for(let mn=0;mn<Dt.length;mn++){var ls=Dt[mn].split("=");if(ls.length>1){const Wn=ls[0];ls=ls[1];const Ur=Wn.split("_");De=Ur.length>=2&&Ur[1]=="type"?De+(Wn+"="+ls+"&"):De+(Wn+"=redacted&")}}}else De=null;else De=ce;return"XMLHTTP REQ ("+N+") [attempt "+X+"]: "+v+`
`+_+`
`+De})}function oe(h,v,_,N,X,ce,De){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+X+"]: "+v+`
`+_+`
`+ce+" "+De})}function Re(h,v,_,N){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+gt(h,_)+(N?" "+N:"")})}function Ye(h,v){h.info(function(){return"TIMEOUT: "+v})}hn.prototype.info=function(){};function gt(h,v){if(!h.g)return v;if(!v)return null;try{const ce=JSON.parse(v);if(ce){for(h=0;h<ce.length;h++)if(Array.isArray(ce[h])){var _=ce[h];if(!(_.length<2)){var N=_[1];if(Array.isArray(N)&&!(N.length<1)){var X=N[0];if(X!="noop"&&X!="stop"&&X!="close")for(let De=1;De<N.length;De++)N[De]=""}}}}return en(ce)}catch{return v}}var ct={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_n={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Rn;function gn(){}k(gn,pt),gn.prototype.g=function(){return new XMLHttpRequest},Rn=new gn;function kn(h){return encodeURIComponent(String(h))}function As(h){var v=1;h=h.split(":");const _=[];for(;v>0&&h.length;)_.push(h.shift()),v--;return h.length&&_.push(h.join(":")),_}function is(h,v,_,N){this.j=h,this.i=v,this.l=_,this.S=N||1,this.V=new an(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hs}function hs(){this.i=null,this.g="",this.h=!1}var tn={},In={};function Rs(h,v,_){h.M=1,h.A=Kn(Le(v)),h.u=_,h.R=!0,Ir(h,null)}function Ir(h,v){h.F=Date.now(),qn(h),h.B=Le(h.A);var _=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),ze(_.i,"t",N),h.C=0,_=h.j.L,h.h=new hs,h.g=Qu(h.j,_?v:null,!h.u),h.P>0&&(h.O=new wt(y(h.Y,h,h.g),h.P)),v=h.V,_=h.g,N=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(Ns[0]=X.toString()),X=Ns);for(let ce=0;ce<X.length;ce++){const De=Pe(_,X[ce],N||v.handleEvent,!1,v.h||v);if(!De)break;v.g[De.key]=De}v=h.J?L(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),zn(),yr(h.i,h.v,h.B,h.l,h.S,h.u)}is.prototype.ba=function(h){h=h.target;const v=this.O;v&&fn(h)==3?v.j():this.Y(h)},is.prototype.Y=function(h){try{if(h==this.g)e:{const Dt=fn(this.g),ls=this.g.ya(),mn=this.g.ca();if(!(Dt<3)&&(Dt!=3||this.g&&(this.h.h||this.g.la()||Mn(this.g)))){this.K||Dt!=4||ls==7||(ls==8||mn<=0?zn(3):zn(2)),_s(this);var v=this.g.ca();this.X=v;var _=fi(this);if(this.o=v==200,oe(this.i,this.v,this.B,this.l,this.S,Dt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,X=this.g;if((N=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(N)){var ce=N;break t}}ce=null}if(h=ce)Re(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,as(this,h);else{this.o=!1,this.m=3,Xt(12),On(this),Cn(this);break e}}if(this.R){h=!0;let Wn;for(;!this.K&&this.C<_.length;)if(Wn=Dr(this,_),Wn==In){Dt==4&&(this.m=4,Xt(14),h=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==tn){this.m=4,Xt(15),Re(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Re(this.i,this.l,Wn,null),as(this,Wn);if(Mr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||_.length!=0||this.h.h||(this.m=1,Xt(16),h=!1),this.o=this.o&&h,!h)Re(this.i,this.l,_,"[Invalid Chunked Response]"),On(this),Cn(this);else if(_.length>0&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.aa&&!De.P&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),oc(De),De.P=!0,Xt(11))}}else Re(this.i,this.l,_,null),as(this,_);Dt==4&&On(this),this.o&&!this.K&&(Dt==4?$u(this.j,this):(this.o=!1,qn(this)))}else Fs(this.g),v==400&&_.indexOf("Unknown SID")>0?(this.m=3,Xt(12)):(this.m=0,Xt(13)),On(this),Cn(this)}}}catch{}};function fi(h){if(!Mr(h))return h.g.la();const v=Mn(h.g);if(v==="")return"";let _="";const N=v.length,X=fn(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return On(h),Cn(h),"";h.h.i=new d.TextDecoder}for(let ce=0;ce<N;ce++)h.h.h=!0,_+=h.h.i.decode(v[ce],{stream:!(X&&ce==N-1)});return v.length=0,h.h.g+=_,h.C=0,h.h.g}function Mr(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Dr(h,v){var _=h.C,N=v.indexOf(`
`,_);return N==-1?In:(_=Number(v.substring(_,N)),isNaN(_)?tn:(N+=1,N+_>v.length?In:(v=v.slice(N,N+_),h.C=N+_,v)))}is.prototype.cancel=function(){this.K=!0,On(this)};function qn(h){h.T=Date.now()+h.H,Js(h,h.H)}function Js(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=An(y(h.aa,h),v)}function _s(h){h.D&&(d.clearTimeout(h.D),h.D=null)}is.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ye(this.i,this.B),this.M!=2&&(zn(),Xt(17)),On(this),this.m=2,Cn(this)):Js(this,this.T-h)};function Cn(h){h.j.I==0||h.K||$u(h.j,h)}function On(h){_s(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,rs(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function as(h,v){try{var _=h.j;if(_.I!=0&&(_.g==h||bn(_.h,h))){if(!h.L&&bn(_.h,h)&&_.I==3){try{var N=_.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var X=N;if(X[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Jo(_),lr(_);else break e;lo(_),Xt(18)}}else _.xa=X[1],0<_.xa-_.K&&X[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=An(y(_.Va,_),6e3));ks(_.h)<=1&&_.ta&&(_.ta=void 0)}else gi(_,11)}else if((h.L||_.g==h)&&Jo(_),!A(v))for(X=_.Ba.g.parse(v),v=0;v<X.length;v++){let mn=X[v];const Wn=mn[0];if(!(Wn<=_.K))if(_.K=Wn,mn=mn[1],_.I==2)if(mn[0]=="c"){_.M=mn[1],_.ba=mn[2];const Ur=mn[3];Ur!=null&&(_.ka=Ur,_.j.info("VER="+_.ka));const yi=mn[4];yi!=null&&(_.za=yi,_.j.info("SVER="+_.za));const ei=mn[5];ei!=null&&typeof ei=="number"&&ei>0&&(N=1.5*ei,_.O=N,_.j.info("backChannelRequestTimeoutMs_="+N)),N=_;const ti=h.g;if(ti){const co=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(co){var ce=N.h;ce.g||co.indexOf("spdy")==-1&&co.indexOf("quic")==-1&&co.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(or(ce,ce.h),ce.h=null))}if(N.G){const Zo=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Zo&&(N.wa=Zo,Qe(N.J,N.G,Zo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),N=_;var De=h;if(N.na=Yu(N,N.L?N.ba:null,N.W),De.L){mi(N.h,De);var Dt=De,ls=N.O;ls&&(Dt.H=ls),Dt.D&&(_s(Dt),qn(Dt)),N.g=De}else Hu(N);_.i.length>0&&Vr(_)}else mn[0]!="stop"&&mn[0]!="close"||gi(_,7);else _.I==3&&(mn[0]=="stop"||mn[0]=="close"?mn[0]=="stop"?gi(_,7):Zs(_):mn[0]!="noop"&&_.l&&_.l.qa(mn),_.A=0)}}zn(4)}catch{}}var Ht=class{constructor(h,v){this.g=h,this.map=v}};function Zr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Lr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ks(h){return h.h?1:h.g?h.g.size:0}function bn(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function or(h,v){h.g?h.g.add(v):h.h=v}function mi(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Zr.prototype.cancel=function(){if(this.i=I(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function I(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const _ of h.g.values())v=v.concat(_.G);return v}return O(h.i)}var z=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ae(h,v){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const N=h[_].indexOf("=");let X,ce=null;N>=0?(X=h[_].substring(0,N),ce=h[_].substring(N+1)):X=h[_],v(X,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function le(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof le?(this.l=h.l,Oe(this,h.j),this.o=h.o,this.g=h.g,We(this,h.u),this.h=h.h,Wt(this,dt(h.i)),this.m=h.m):h&&(v=String(h).match(z))?(this.l=!1,Oe(this,v[1]||"",!0),this.o=os(v[2]||""),this.g=os(v[3]||"",!0),We(this,v[4]),this.h=os(v[5]||"",!0),Wt(this,v[6]||"",!0),this.m=os(v[7]||"")):(this.l=!1,this.i=new Pr(null,this.l))}le.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(Bs(v,vr,!0),":");var _=this.g;return(_||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Bs(v,vr,!0),"@"),h.push(kn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Bs(_,_.charAt(0)=="/"?Di:ma,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Bs(_,pa)),h.join("")},le.prototype.resolve=function(h){const v=Le(this);let _=!!h.j;_?Oe(v,h.j):_=!!h.o,_?v.o=h.o:_=!!h.g,_?v.g=h.g:_=h.u!=null;var N=h.h;if(_)We(v,h.u);else if(_=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var X=v.h.lastIndexOf("/");X!=-1&&(N=v.h.slice(0,X+1)+N)}if(X=N,X==".."||X==".")N="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){N=X.lastIndexOf("/",0)==0,X=X.split("/");const ce=[];for(let De=0;De<X.length;){const Dt=X[De++];Dt=="."?N&&De==X.length&&ce.push(""):Dt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),N&&De==X.length&&ce.push("")):(ce.push(Dt),N=!0)}N=ce.join("/")}else N=X}return _?v.h=N:_=h.i.toString()!=="",_?Wt(v,dt(h.i)):_=!!h.m,_&&(v.m=h.m),v};function Le(h){return new le(h)}function Oe(h,v,_){h.j=_?os(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function We(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Wt(h,v,_){v instanceof Pr?(h.i=v,jt(h.i,h.l)):(_||(v=Bs(v,Or)),h.i=new Pr(v,h.l))}function Qe(h,v,_){h.i.set(v,_)}function Kn(h){return Qe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function os(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bs(h,v,_){return typeof h=="string"?(h=encodeURI(h).replace(v,Yn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Yn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var vr=/[#\/\?@]/g,ma=/[#\?:]/g,Di=/[#\?]/g,Or=/[#\?@]/g,pa=/#/g;function Pr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function S(h){h.g||(h.g=new Map,h.h=0,h.i&&ae(h.i,function(v,_){h.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}s=Pr.prototype,s.add=function(h,v){S(this),this.i=null,h=tt(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(v),this.h+=1,this};function Q(h,v){S(h),v=tt(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Ce(h,v){return S(h),v=tt(h,v),h.g.has(v)}s.forEach=function(h,v){S(this),this.g.forEach(function(_,N){_.forEach(function(X){h.call(v,X,N,this)},this)},this)};function Ie(h,v){S(h);let _=[];if(typeof v=="string")Ce(h,v)&&(_=_.concat(h.g.get(tt(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)_=_.concat(h[v]);return _}s.set=function(h,v){return S(this),this.i=null,h=tt(this,h),Ce(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Ie(this,h),h.length>0?String(h[0]):v):v};function ze(h,v,_){Q(h,v),_.length>0&&(h.i=null,h.g.set(tt(h,v),O(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var _=v[N];const X=kn(_);_=Ie(this,_);for(let ce=0;ce<_.length;ce++){let De=X;_[ce]!==""&&(De+="="+kn(_[ce])),h.push(De)}}return this.i=h.join("&")};function dt(h){const v=new Pr;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function tt(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function jt(h,v){v&&!h.j&&(S(h),h.i=null,h.g.forEach(function(_,N){const X=N.toLowerCase();N!=X&&(Q(this,N),ze(this,X,_))},h)),h.j=v}function ht(h,v){const _=new hn;if(d.Image){const N=new Image;N.onload=b(J,_,"TestLoadImage: loaded",!0,v,N),N.onerror=b(J,_,"TestLoadImage: error",!1,v,N),N.onabort=b(J,_,"TestLoadImage: abort",!1,v,N),N.ontimeout=b(J,_,"TestLoadImage: timeout",!1,v,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else v(!1)}function V(h,v){const _=new hn,N=new AbortController,X=setTimeout(()=>{N.abort(),J(_,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:N.signal}).then(ce=>{clearTimeout(X),ce.ok?J(_,"TestPingServer: ok",!0,v):J(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(X),J(_,"TestPingServer: error",!1,v)})}function J(h,v,_,N,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),N(_)}catch{}}function te(){this.g=new Ne}function pe(h){this.i=h.Sb||null,this.h=h.ab||!1}k(pe,pt),pe.prototype.g=function(){return new Ae(this.i,this.h)};function Ae(h,v){Mt.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(Ae,Mt),s=Ae.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,yt(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,He(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,yt(this)),this.g&&(this.readyState=3,yt(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ve(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ve(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?He(this):yt(this),this.readyState==3&&Ve(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,He(this))},s.Na=function(h){this.g&&(this.response=h,He(this))},s.ga=function(){this.g&&He(this)};function He(h){h.readyState=4,h.l=null,h.j=null,h.B=null,yt(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=v.next();return h.join(`\r
`)};function yt(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ae.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Et(h){let v="";return Se(h,function(_,N){v+=N,v+=":",v+=_,v+=`\r
`}),v}function Ut(h,v,_){e:{for(N in _){var N=!1;break e}N=!0}N||(_=Et(_),typeof h=="string"?_!=null&&kn(_):Qe(h,v,_))}function Je(h){Mt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(Je,Mt);var nn=/^https?$/i,zs=["POST","PUT"];s=Je.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,_,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Rn.g(),this.g.onreadystatechange=E(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ce){Tt(this,ce);return}if(h=_||"",_=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var X in N)_.set(X,N[X]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ce of N.keys())_.set(ce,N.get(ce));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(_.keys()).find(ce=>ce.toLowerCase()=="content-type"),X=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(zs,v,void 0)>=0)||N||X||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,De]of _)this.g.setRequestHeader(ce,De);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ce){Tt(this,ce)}};function Tt(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Hn(h),Ct(h)}function Hn(h){h.A||(h.A=!0,bt(h,"complete"),bt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,bt(this,"complete"),bt(this,"abort"),Ct(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ct(this,!0)),Je.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Jn(this):this.Xa())},s.Xa=function(){Jn(this)};function Jn(h){if(h.h&&typeof u<"u"){if(h.v&&fn(h)==4)setTimeout(h.Ca.bind(h),0);else if(bt(h,"readystatechange"),fn(h)==4){h.h=!1;try{const ce=h.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var N;if(N=ce===0){let De=String(h.D).match(z)[1]||null;!De&&d.self&&d.self.location&&(De=d.self.location.protocol.slice(0,-1)),N=!nn.test(De?De.toLowerCase():"")}_=N}if(_)bt(h,"complete"),bt(h,"success");else{h.o=6;try{var X=fn(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",Hn(h)}}finally{Ct(h)}}}}function Ct(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,v||bt(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function fn(h){return h.g?h.g.readyState:0}s.ca=function(){try{return fn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),se(v)}};function Mn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Fs(h){const v={};h=(h.g&&fn(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(A(h[N]))continue;var _=As(h[N]);const X=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ce=v[X]||[];v[X]=ce,ce.push(_)}Y(v,function(N){return N.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(h,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||v}function fs(h){this.za=0,this.i=[],this.j=new hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qs("baseRetryDelayMs",5e3,h),this.Za=qs("retryDelaySeedMs",1e4,h),this.Ta=qs("forwardChannelMaxRetries",2,h),this.va=qs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Zr(h&&h.concurrentRequestLimit),this.Ba=new te,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=fs.prototype,s.ka=8,s.I=1,s.connect=function(h,v,_,N){Xt(0),this.W=h,this.H=v||{},_&&N!==void 0&&(this.H.OSID=_,this.H.OAID=N),this.F=this.X,this.J=Yu(this,null,this.W),Vr(this)};function Zs(h){if(Li(h),h.I==3){var v=h.V++,_=Le(h.J);if(Qe(_,"SID",h.M),Qe(_,"RID",v),Qe(_,"TYPE","terminate"),oo(h,_),v=new is(h,h.j,v),v.M=2,v.A=Kn(Le(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=v.A,_=!0),_||(v.g=Qu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),qn(v)}Ku(h)}function lr(h){h.g&&(oc(h),h.g.cancel(),h.g=null)}function Li(h){lr(h),h.v&&(d.clearTimeout(h.v),h.v=null),Jo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Vr(h){if(!Lr(h.h)&&!h.m){h.m=!0;var v=h.Ea;Ee||T(),we||(Ee(),we=!0),C.add(v,h),h.D=0}}function pi(h,v){return ks(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=An(y(h.Ea,h,v),Gu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new is(this,this.j,h);let ce=this.o;if(this.U&&(ce?(ce=L(ce),ve(ce,this.U)):ce=this.U),this.u!==null||this.R||(X.J=ce,ce=null),this.S)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var N=this.i[_];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=qu(this,X,v),_=Le(this.J),Qe(_,"RID",h),Qe(_,"CVER",22),this.G&&Qe(_,"X-HTTP-Session-Id",this.G),oo(this,_),ce&&(this.R?v="headers="+kn(Et(ce))+"&"+v:this.u&&Ut(_,this.u,ce)),or(this.h,X),this.Ra&&Qe(_,"TYPE","init"),this.S?(Qe(_,"$req",v),Qe(_,"SID","null"),X.U=!0,Rs(X,_,null)):Rs(X,_,v),this.I=2}}else this.I==3&&(h?ac(this,h):this.i.length==0||Lr(this.h)||ac(this))};function ac(h,v){var _;v?_=v.l:_=h.V++;const N=Le(h.J);Qe(N,"SID",h.M),Qe(N,"RID",_),Qe(N,"AID",h.K),oo(h,N),h.u&&h.o&&Ut(N,h.u,h.o),_=new is(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),v&&(h.i=v.G.concat(h.i)),v=qu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),or(h.h,_),Rs(_,N,v)}function oo(h,v){h.H&&Se(h.H,function(_,N){Qe(v,N,_)}),h.l&&Se({},function(_,N){Qe(v,N,_)})}function qu(h,v,_){_=Math.min(h.i.length,_);const N=h.l?y(h.l.Ka,h.l,h):null;e:{var X=h.i;let Dt=-1;for(;;){const ls=["count="+_];Dt==-1?_>0?(Dt=X[0].g,ls.push("ofs="+Dt)):Dt=0:ls.push("ofs="+Dt);let mn=!0;for(let Wn=0;Wn<_;Wn++){var ce=X[Wn].g;const Ur=X[Wn].map;if(ce-=Dt,ce<0)Dt=Math.max(0,X[Wn].g-100),mn=!1;else try{ce="req"+ce+"_"||"";try{var De=Ur instanceof Map?Ur:Object.entries(Ur);for(const[yi,ei]of De){let ti=ei;p(ei)&&(ti=en(ei)),ls.push(ce+yi+"="+encodeURIComponent(ti))}}catch(yi){throw ls.push(ce+"type="+encodeURIComponent("_badmap")),yi}}catch{N&&N(Ur)}}if(mn){De=ls.join("&");break e}}De=void 0}return h=h.i.splice(0,_),v.G=h,De}function Hu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;Ee||T(),we||(Ee(),we=!0),C.add(v,h),h.A=0}}function lo(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=An(y(h.Da,h),Gu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=An(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Xt(10),lr(this),Wu(this))};function oc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Wu(h){h.g=new is(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Le(h.na);Qe(v,"RID","rpc"),Qe(v,"SID",h.M),Qe(v,"AID",h.K),Qe(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Qe(v,"TO",h.ia),Qe(v,"TYPE","xmlhttp"),oo(h,v),h.u&&h.o&&Ut(v,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Kn(Le(v)),_.u=null,_.R=!0,Ir(_,h)}s.Va=function(){this.C!=null&&(this.C=null,lr(this),lo(this),Xt(19))};function Jo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function $u(h,v){var _=null;if(h.g==v){Jo(h),oc(h),h.g=null;var N=2}else if(bn(h.h,v))_=v.G,mi(h.h,v),N=1;else return;if(h.I!=0){if(v.o)if(N==1){_=v.u?v.u.length:0,v=Date.now()-v.F;var X=h.D;N=dn(),bt(N,new Fn(N,_)),Vr(h)}else Hu(h);else if(X=v.m,X==3||X==0&&v.X>0||!(N==1&&pi(h,v)||N==2&&lo(h)))switch(_&&_.length>0&&(v=h.h,v.i=v.i.concat(_)),X){case 1:gi(h,5);break;case 4:gi(h,10);break;case 3:gi(h,6);break;default:gi(h,2)}}}function Gu(h,v){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*v}function gi(h,v){if(h.j.info("Error code "+v),v==2){var _=y(h.bb,h),N=h.Ua;const X=!N;N=new le(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Oe(N,"https"),Kn(N),X?ht(N.toString(),_):V(N.toString(),_)}else Xt(2);h.I=0,h.l&&h.l.pa(v),Ku(h),Li(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function Ku(h){if(h.I=0,h.ja=[],h.l){const v=I(h.h);(v.length!=0||h.i.length!=0)&&(W(h.ja,v),W(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function Yu(h,v,_){var N=_ instanceof le?Le(_):new le(_);if(N.g!="")v&&(N.g=v+"."+N.g),We(N,N.u);else{var X=d.location;N=X.protocol,v=v?v+"."+X.hostname:X.hostname,X=+X.port;const ce=new le(null);N&&Oe(ce,N),v&&(ce.g=v),X&&We(ce,X),_&&(ce.h=_),N=ce}return _=h.G,v=h.wa,_&&v&&Qe(N,_,v),Qe(N,"VER",h.ka),oo(h,N),N}function Qu(h,v,_){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new Je(new pe({ab:_})):new Je(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xu(){}s=Xu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ga(){}ga.prototype.g=function(h,v){return new er(h,v)};function er(h,v){Mt.call(this),this.g=new fs(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!A(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!A(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Oi(this)}k(er,Mt),er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Zs(this.g)},er.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=en(h),h=_);v.i.push(new Ht(v.Ya++,h)),v.I==3&&Vr(v)},er.prototype.N=function(){this.g.l=null,delete this.j,Zs(this.g),delete this.g,er.Z.N.call(this)};function Ju(h){$e.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const _ in v){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}k(Ju,$e);function Zu(){rt.call(this),this.status=1}k(Zu,rt);function Oi(h){this.g=h}k(Oi,Xu),Oi.prototype.ra=function(){bt(this.g,"a")},Oi.prototype.qa=function(h){bt(this.g,new Ju(h))},Oi.prototype.pa=function(h){bt(this.g,new Zu)},Oi.prototype.oa=function(){bt(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,A_=function(){return new ga},N_=function(){return dn()},C_=qe,Tg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ct.NO_ERROR=0,ct.TIMEOUT=8,ct.HTTP_ERROR=6,Eh=ct,_n.COMPLETE="complete",S_=_n,xt.EventType=at,at.OPEN="a",at.CLOSE="b",at.ERROR="c",at.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,eu=xt,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,j_=Je}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});class $s{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$s.UNAUTHENTICATED=new $s(null),$s.GOOGLE_CREDENTIALS=new $s("google-credentials-uid"),$s.FIRST_PARTY=new $s("first-party-uid"),$s.MOCK_USER=new $s("mock-user");let ec="12.8.0";function lR(s){ec=s}const Vo=new ry("@firebase/firestore");function Rl(){return Vo.logLevel}function Ge(s,...e){if(Vo.logLevel<=Kt.DEBUG){const t=e.map(gy);Vo.debug(`Firestore (${ec}): ${s}`,...t)}}function ca(s,...e){if(Vo.logLevel<=Kt.ERROR){const t=e.map(gy);Vo.error(`Firestore (${ec}): ${s}`,...t)}}function Fl(s,...e){if(Vo.logLevel<=Kt.WARN){const t=e.map(gy);Vo.warn(`Firestore (${ec}): ${s}`,...t)}}function gy(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function kt(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,R_(s,i,t)}function R_(s,e,t){let i=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ca(i),new Error(i)}function yn(s,e,t,i){let l="Unexpected state";typeof t=="string"?l=t:i=t,s||R_(e,l,i)}function Rt(s,e){return s}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends hi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ra{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class I_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($s.UNAUTHENTICATED)))}shutdown(){}}class uR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class dR{constructor(e){this.t=e,this.currentUser=$s.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yn(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new ra;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ra,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ra)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(yn(typeof i.accessToken=="string",31837,{l:i}),new I_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yn(e===null||typeof e=="string",2055,{h:e}),new $s(e)}}class hR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=$s.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class fR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new hR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($s.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class L2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yn(this.o===void 0,3512);const i=u=>{u.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new L2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(yn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new L2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class yy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=pR(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<t&&(i+=e.charAt(l[u]%62))}return i}}function Yt(s,e){return s<e?-1:s>e?1:0}function jg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return Bp(l)===Bp(u)?Yt(l,u):Bp(l)?1:-1}return Yt(s.length,e.length)}const gR=55296,yR=57343;function Bp(s){const e=s.charCodeAt(0);return e>=gR&&e<=yR}function ql(s,e,t){return s.length===e.length&&s.every(((i,l)=>t(i,e[l])))}const O2="__name__";class ki{constructor(e,t,i){t===void 0?t=0:t>e.length&&kt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&kt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let l=0;l<i;l++){const u=ki.compareSegments(e.get(l),t.get(l));if(u!==0)return u}return Yt(e.length,t.length)}static compareSegments(e,t){const i=ki.isNumericId(e),l=ki.isNumericId(t);return i&&!l?-1:!i&&l?1:i&&l?ki.extractNumericId(e).compare(ki.extractNumericId(t)):jg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ya.fromString(e.substring(4,e.length-2))}}class Dn extends ki{construct(e,t,i){return new Dn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Fe(me.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((l=>l.length>0)))}return new Dn(t)}static emptyPath(){return new Dn([])}}const vR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ps extends ki{construct(e,t,i){return new Ps(e,t,i)}static isValidIdentifier(e){return vR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ps.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===O2}static keyField(){return new Ps([O2])}static fromServerFormat(e){const t=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Fe(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Fe(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Fe(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(i+=p,l++):(u(),l++)}if(u(),d)throw new Fe(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ps(t)}static emptyPath(){return new Ps([])}}class lt{constructor(e){this.path=e}static fromPath(e){return new lt(Dn.fromString(e))}static fromName(e){return new lt(Dn.fromString(e).popFirst(5))}static empty(){return new lt(Dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new Dn(e.slice()))}}function M_(s,e,t){if(!t)throw new Fe(me.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function bR(s,e,t,i){if(e===!0&&i===!0)throw new Fe(me.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function P2(s){if(!lt.isDocumentKey(s))throw new Fe(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function V2(s){if(lt.isDocumentKey(s))throw new Fe(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function D_(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function of(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":kt(12329,{type:typeof s})}function rr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Fe(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=of(s);throw new Fe(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function wR(s,e){if(e<=0)throw new Fe(me.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function xs(s,e){const t={typeString:s};return e&&(t.value=e),t}function Du(s,e){if(!D_(s))throw new Fe(me.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const d=s[i];if(l&&typeof d!==l){t=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new Fe(me.INVALID_ARGUMENT,t);return!0}const U2=-62135596800,B2=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*B2);return new Vt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<U2)throw new Fe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B2}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Du(e,Vt._jsonSchema))return new Vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-U2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:xs("string",Vt._jsonSchemaVersion),seconds:xs("number"),nanoseconds:xs("number")};class Nt{static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new Vt(0,0))}static max(){return new Nt(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const pu=-1;function xR(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=Nt.fromTimestamp(i===1e9?new Vt(t+1,0):new Vt(t,i));return new Xa(l,lt.empty(),e)}function _R(s){return new Xa(s.readTime,s.key,pu)}class Xa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Xa(Nt.min(),lt.empty(),pu)}static max(){return new Xa(Nt.max(),lt.empty(),pu)}}function kR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=lt.comparator(s.documentKey,e.documentKey),t!==0?t:Yt(s.largestBatchId,e.largestBatchId))}const ER="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function tc(s){if(s.code!==me.FAILED_PRECONDITION||s.message!==ER)throw s;Ge("LocalStore","Unexpectedly lost primary lease")}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&kt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Te.reject(t)}static resolve(e){return new Te(((t,i)=>{t(e)}))}static reject(e){return new Te(((t,i)=>{i(e)}))}static waitFor(e){return new Te(((t,i)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&t()}),(g=>i(g)))})),d=!0,u===l&&t()}))}static or(e){let t=Te.resolve(!1);for(const i of e)t=t.next((l=>l?Te.resolve(l):i()));return t}static forEach(e,t){const i=[];return e.forEach(((l,u)=>{i.push(t.call(this,l,u))})),this.waitFor(i)}static mapArray(e,t){return new Te(((i,l)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next((b=>{d[y]=b,++p,p===u&&i(d)}),(b=>l(b)))}}))}static doWhile(e,t){return new Te(((i,l)=>{const u=()=>{e()===!0?t().next((()=>{u()}),l):i()};u()}))}}function jR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nc(s){return s.name==="IndexedDbTransactionError"}class lf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}lf.ce=-1;const vy=-1;function cf(s){return s==null}function zh(s){return s===0&&1/s==-1/0}function SR(s){return typeof s=="number"&&Number.isInteger(s)&&!zh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const L_="";function CR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=z2(e)),e=NR(s.get(t),e);return z2(e)}function NR(s,e){let t=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":t+="";break;case L_:t+="";break;default:t+=u}}return t}function z2(s){return s+L_+""}function F2(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function io(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function O_(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Qn{constructor(e,t){this.comparator=e,this.root=t||Os.EMPTY}insert(e,t){return new Qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Os.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Os.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return t+i.left.size;l<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,t,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Os{constructor(e,t,i,l,u){this.key=e,this.value=t,this.color=i??Os.RED,this.left=l??Os.EMPTY,this.right=u??Os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,l,u){return new Os(e??this.key,t??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,t,i),null):u===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Os.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw kt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw kt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw kt(27949);return e+(this.isRed()?0:1)}}Os.EMPTY=null,Os.RED=!0,Os.BLACK=!1;Os.EMPTY=new class{constructor(){this.size=0}get key(){throw kt(57766)}get value(){throw kt(16141)}get color(){throw kt(16727)}get left(){throw kt(29726)}get right(){throw kt(36894)}copy(e,t,i,l,u){return this}insert(e,t,i){return new Os(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ts{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new q2(this.data.getIterator())}getIteratorFrom(e){return new q2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ts)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ts(this.comparator);return t.data=e,t}}class q2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cr{constructor(e){this.fields=e,e.sort(Ps.comparator)}static empty(){return new Cr([])}unionWith(e){let t=new Ts(Ps.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class P_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Us{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new P_("Invalid base64 string: "+u):u}})(e);return new Us(t)}static fromUint8Array(e){const t=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new Us(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Us.EMPTY_BYTE_STRING=new Us("");const AR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(s){if(yn(!!s,39018),typeof s=="string"){let e=0;const t=AR.exec(s);if(yn(!!t,46558,{timestamp:s}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ds(s.seconds),nanos:ds(s.nanos)}}function ds(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Za(s){return typeof s=="string"?Us.fromBase64String(s):Us.fromUint8Array(s)}const V_="server_timestamp",U_="__type__",B_="__previous_value__",z_="__local_write_time__";function by(s){return(s?.mapValue?.fields||{})[U_]?.stringValue===V_}function uf(s){const e=s.mapValue.fields[B_];return by(e)?uf(e):e}function gu(s){const e=Ja(s.mapValue.fields[z_].timestampValue);return new Vt(e.seconds,e.nanos)}class RR{constructor(e,t,i,l,u,d,p,g,y,b,k){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=k}}const Fh="(default)";class yu{constructor(e,t){this.projectId=e,this.database=t||Fh}static empty(){return new yu("","")}get isDefaultDatabase(){return this.database===Fh}isEqual(e){return e instanceof yu&&e.projectId===this.projectId&&e.database===this.database}}function IR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Fe(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yu(s.options.projectId,e)}const F_="__type__",MR="__max__",oh={mapValue:{}},q_="__vector__",qh="value";function eo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?by(s)?4:LR(s)?9007199254740991:DR(s)?10:11:kt(28295,{value:s})}function Ai(s,e){if(s===e)return!0;const t=eo(s);if(t!==eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return gu(s).isEqual(gu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=Ja(l.timestampValue),p=Ja(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Za(l.bytesValue).isEqual(Za(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return ds(l.geoPointValue.latitude)===ds(u.geoPointValue.latitude)&&ds(l.geoPointValue.longitude)===ds(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return ds(l.integerValue)===ds(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=ds(l.doubleValue),p=ds(u.doubleValue);return d===p?zh(d)===zh(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return ql(s.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(F2(d)!==F2(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Ai(d[g],p[g])))return!1;return!0})(s,e);default:return kt(52216,{left:s})}}function vu(s,e){return(s.values||[]).find((t=>Ai(t,e)))!==void 0}function Hl(s,e){if(s===e)return 0;const t=eo(s),i=eo(e);if(t!==i)return Yt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=ds(u.integerValue||u.doubleValue),g=ds(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return H2(s.timestampValue,e.timestampValue);case 4:return H2(gu(s),gu(e));case 5:return jg(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Za(u),g=Za(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Yt(p[y],g[y]);if(b!==0)return b}return Yt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=Yt(ds(u.latitude),ds(d.latitude));return p!==0?p:Yt(ds(u.longitude),ds(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return W2(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[qh]?.arrayValue,b=g[qh]?.arrayValue,k=Yt(y?.values?.length||0,b?.values?.length||0);return k!==0?k:W2(y,b)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===oh.mapValue&&d===oh.mapValue)return 0;if(u===oh.mapValue)return 1;if(d===oh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let k=0;k<g.length&&k<b.length;++k){const E=jg(g[k],b[k]);if(E!==0)return E;const O=Hl(p[g[k]],y[b[k]]);if(O!==0)return O}return Yt(g.length,b.length)})(s.mapValue,e.mapValue);default:throw kt(23264,{he:t})}}function H2(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Yt(s,e);const t=Ja(s),i=Ja(e),l=Yt(t.seconds,i.seconds);return l!==0?l:Yt(t.nanos,i.nanos)}function W2(s,e){const t=s.values||[],i=e.values||[];for(let l=0;l<t.length&&l<i.length;++l){const u=Hl(t[l],i[l]);if(u)return u}return Yt(t.length,i.length)}function Wl(s){return Sg(s)}function Sg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Ja(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Za(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return lt.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",l=!0;for(const u of t.values||[])l?l=!1:i+=",",i+=Sg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let l="{",u=!0;for(const d of i)u?u=!1:l+=",",l+=`${d}:${Sg(t.fields[d])}`;return l+"}"})(s.mapValue):kt(61005,{value:s})}function Th(s){switch(eo(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uf(s);return e?16+Th(e):16;case 5:return 2*s.stringValue.length;case 6:return Za(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+Th(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return io(i.fields,((u,d)=>{l+=u.length+Th(d)})),l})(s.mapValue);default:throw kt(13486,{value:s})}}function $2(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Cg(s){return!!s&&"integerValue"in s}function wy(s){return!!s&&"arrayValue"in s}function G2(s){return!!s&&"nullValue"in s}function K2(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function jh(s){return!!s&&"mapValue"in s}function DR(s){return(s?.mapValue?.fields||{})[F_]?.stringValue===q_}function au(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return io(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=au(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=au(s.arrayValue.values[t]);return e}return{...s}}function LR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===MR}class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!jh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(t)}setAll(e){let t=Ps.emptyPath(),i={},l=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,l),i={},l=[],t=p.popLast()}d?i[p.lastSegment()]=au(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,l)}delete(e){const t=this.field(e.popLast());jh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ai(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=t.mapValue.fields[e.get(i)];jh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,i){io(t,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new pr(au(this.value))}}function H_(s){const e=[];return io(s.fields,((t,i)=>{const l=new Ps([t]);if(jh(i)){const u=H_(i.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new Cr(e)}class Gs{constructor(e,t,i,l,u,d,p){this.key=e,this.documentType=t,this.version=i,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Gs(e,0,Nt.min(),Nt.min(),Nt.min(),pr.empty(),0)}static newFoundDocument(e,t,i,l){return new Gs(e,1,t,Nt.min(),i,l,0)}static newNoDocument(e,t){return new Gs(e,2,t,Nt.min(),Nt.min(),pr.empty(),0)}static newUnknownDocument(e,t){return new Gs(e,3,t,Nt.min(),Nt.min(),pr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hh{constructor(e,t){this.position=e,this.inclusive=t}}function Y2(s,e,t){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],d=s.position[l];if(u.field.isKeyField()?i=lt.comparator(lt.fromName(d.referenceValue),t.key):i=Hl(d,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function Q2(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ai(s.position[t],e.position[t]))return!1;return!0}class bu{constructor(e,t="asc"){this.field=e,this.dir=t}}function OR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class W_{}class ws extends W_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new VR(e,t,i):t==="array-contains"?new zR(e,i):t==="in"?new FR(e,i):t==="not-in"?new qR(e,i):t==="array-contains-any"?new HR(e,i):new ws(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new UR(e,i):new BR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Hl(t,this.value)):t!==null&&eo(this.value)===eo(t)&&this.matchesComparison(Hl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return kt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends W_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ui(e,t)}matches(e){return $_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $_(s){return s.op==="and"}function G_(s){return PR(s)&&$_(s)}function PR(s){for(const e of s.filters)if(e instanceof ui)return!1;return!0}function Ng(s){if(s instanceof ws)return s.field.canonicalString()+s.op.toString()+Wl(s.value);if(G_(s))return s.filters.map((e=>Ng(e))).join(",");{const e=s.filters.map((t=>Ng(t))).join(",");return`${s.op}(${e})`}}function K_(s,e){return s instanceof ws?(function(i,l){return l instanceof ws&&i.op===l.op&&i.field.isEqual(l.field)&&Ai(i.value,l.value)})(s,e):s instanceof ui?(function(i,l){return l instanceof ui&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,d,p)=>u&&K_(d,l.filters[p])),!0):!1})(s,e):void kt(19439)}function Y_(s){return s instanceof ws?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wl(t.value)}`})(s):s instanceof ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(Y_).join(" ,")+"}"})(s):"Filter"}class VR extends ws{constructor(e,t,i){super(e,t,i),this.key=lt.fromName(i.referenceValue)}matches(e){const t=lt.comparator(e.key,this.key);return this.matchesComparison(t)}}class UR extends ws{constructor(e,t){super(e,"in",t),this.keys=Q_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class BR extends ws{constructor(e,t){super(e,"not-in",t),this.keys=Q_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Q_(s,e){return(e.arrayValue?.values||[]).map((t=>lt.fromName(t.referenceValue)))}class zR extends ws{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wy(t)&&vu(t.arrayValue,this.value)}}class FR extends ws{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&vu(this.value.arrayValue,t)}}class qR extends ws{constructor(e,t){super(e,"not-in",t)}matches(e){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!vu(this.value.arrayValue,t)}}class HR extends ws{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>vu(this.value.arrayValue,i)))}}class WR{constructor(e,t=null,i=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function X2(s,e=null,t=[],i=[],l=null,u=null,d=null){return new WR(s,e,t,i,l,u,d)}function xy(s){const e=Rt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Ng(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Wl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Wl(i))).join(",")),e.Te=t}return e.Te}function _y(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!OR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!K_(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Q2(s.startAt,e.startAt)&&Q2(s.endAt,e.endAt)}function Ag(s){return lt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class sc{constructor(e,t=null,i=[],l=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function $R(s,e,t,i,l,u,d,p){return new sc(s,e,t,i,l,u,d,p)}function df(s){return new sc(s)}function J2(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function GR(s){return lt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function X_(s){return s.collectionGroup!==null}function ou(s){const e=Rt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Ts(Ps.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new bu(u,i))})),t.has(Ps.keyField().canonicalString())||e.Ie.push(new bu(Ps.keyField(),i))}return e.Ie}function Si(s){const e=Rt(s);return e.Ee||(e.Ee=KR(e,ou(s))),e.Ee}function KR(s,e){if(s.limitType==="F")return X2(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new bu(l.field,u)}));const t=s.endAt?new Hh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Hh(s.startAt.position,s.startAt.inclusive):null;return X2(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Rg(s,e){const t=s.filters.concat([e]);return new sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function YR(s,e){const t=s.explicitOrderBy.concat([e]);return new sc(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Wh(s,e,t){return new sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function hf(s,e){return _y(Si(s),Si(e))&&s.limitType===e.limitType}function J_(s){return`${xy(Si(s))}|lt:${s.limitType}`}function Il(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((l=>Y_(l))).join(", ")}]`),cf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((l=>Wl(l))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((l=>Wl(l))).join(",")),`Target(${i})`})(Si(s))}; limitType=${s.limitType})`}function ff(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):lt.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of ou(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(d,p,g){const y=Y2(d,p,g);return d.inclusive?y<=0:y<0})(i.startAt,ou(i),l)||i.endAt&&!(function(d,p,g){const y=Y2(d,p,g);return d.inclusive?y>=0:y>0})(i.endAt,ou(i),l))})(s,e)}function QR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Z_(s){return(e,t)=>{let i=!1;for(const l of ou(s)){const u=XR(l,e,t);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function XR(s,e,t){const i=s.field.isKeyField()?lt.comparator(e.key,t.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Hl(g,y):kt(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return kt(19790,{direction:s.dir})}}class Go{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[t]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){io(this.inner,((t,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return O_(this.inner)}size(){return this.innerSize}}const JR=new Qn(lt.comparator);function ua(){return JR}const ek=new Qn(lt.comparator);function tu(...s){let e=ek;for(const t of s)e=e.insert(t.key,t);return e}function tk(s){let e=ek;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function No(){return lu()}function nk(){return lu()}function lu(){return new Go((s=>s.toString()),((s,e)=>s.isEqual(e)))}const ZR=new Qn(lt.comparator),eI=new Ts(lt.comparator);function Qt(...s){let e=eI;for(const t of s)e=e.add(t);return e}const tI=new Ts(Yt);function nI(){return tI}function ky(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function sk(s){return{integerValue:""+s}}function rk(s,e){return SR(e)?sk(e):ky(s,e)}class mf{constructor(){this._=void 0}}function sI(s,e,t){return s instanceof wu?(function(l,u){const d={fields:{[U_]:{stringValue:V_},[z_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&by(u)&&(u=uf(u)),u&&(d.fields[B_]=u),{mapValue:d}})(t,e):s instanceof $l?ak(s,e):s instanceof Gl?ok(s,e):(function(l,u){const d=ik(l,u),p=Z2(d)+Z2(l.Ae);return Cg(d)&&Cg(l.Ae)?sk(p):ky(l.serializer,p)})(s,e)}function rI(s,e,t){return s instanceof $l?ak(s,e):s instanceof Gl?ok(s,e):t}function ik(s,e){return s instanceof xu?(function(i){return Cg(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class wu extends mf{}class $l extends mf{constructor(e){super(),this.elements=e}}function ak(s,e){const t=lk(e);for(const i of s.elements)t.some((l=>Ai(l,i)))||t.push(i);return{arrayValue:{values:t}}}class Gl extends mf{constructor(e){super(),this.elements=e}}function ok(s,e){let t=lk(e);for(const i of s.elements)t=t.filter((l=>!Ai(l,i)));return{arrayValue:{values:t}}}class xu extends mf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Z2(s){return ds(s.integerValue||s.doubleValue)}function lk(s){return wy(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class pf{constructor(e,t){this.field=e,this.transform=t}}function iI(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof $l&&l instanceof $l||i instanceof Gl&&l instanceof Gl?ql(i.elements,l.elements,Ai):i instanceof xu&&l instanceof xu?Ai(i.Ae,l.Ae):i instanceof wu&&l instanceof wu})(s.transform,e.transform)}class aI{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class gf{}function ck(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new yf(s.key,ir.none()):new Lu(s.key,s.data,ir.none());{const t=s.data,i=pr.empty();let l=new Ts(Ps.comparator);for(let u of e.fields)if(!l.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?i.delete(u):i.set(u,d),l=l.add(u)}return new ao(s.key,i,new Cr(l.toArray()),ir.none())}}function oI(s,e,t){s instanceof Lu?(function(l,u,d){const p=l.value.clone(),g=tw(l.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,t):s instanceof ao?(function(l,u,d){if(!Sh(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=tw(l.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(uk(l)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function cu(s,e,t,i){return s instanceof Lu?(function(u,d,p,g){if(!Sh(u.precondition,d))return p;const y=u.value.clone(),b=nw(u.fieldTransforms,g,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,t,i):s instanceof ao?(function(u,d,p,g){if(!Sh(u.precondition,d))return p;const y=nw(u.fieldTransforms,g,d),b=d.data;return b.setAll(uk(u)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((k=>k.field)))})(s,e,t,i):(function(u,d,p){return Sh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,t)}function lI(s,e){let t=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=ik(i.transform,l||null);u!=null&&(t===null&&(t=pr.empty()),t.set(i.field,u))}return t||null}function ew(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&ql(i,l,((u,d)=>iI(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Lu extends gf{constructor(e,t,i,l=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ao extends gf{constructor(e,t,i,l,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function uk(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function tw(s,e,t){const i=new Map;yn(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let l=0;l<t.length;l++){const u=s[l],d=u.transform,p=e.data.field(u.field);i.set(u.field,rI(d,p,t[l]))}return i}function nw(s,e,t){const i=new Map;for(const l of s){const u=l.transform,d=t.data.field(l.field);i.set(l.field,sI(u,d,e))}return i}class yf extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cI extends gf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uI{constructor(e,t,i,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&oI(u,e,i[l])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=cu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=cu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=nk();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=t.has(l.key)?null:p;const g=ck(d,p);g!==null&&i.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Nt.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qt())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,((t,i)=>ew(t,i)))&&ql(this.baseMutations,e.baseMutations,((t,i)=>ew(t,i)))}}class Ey{constructor(e,t,i,l){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=l}static from(e,t,i){yn(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return ZR})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,i[d].version);return new Ey(e,t,i,l)}}class dI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class hI{constructor(e,t){this.count=e,this.unchangedNames=t}}var vs,sn;function fI(s){switch(s){case me.OK:return kt(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return kt(15467,{code:s})}}function dk(s){if(s===void 0)return ca("GRPC error has no .code"),me.UNKNOWN;switch(s){case vs.OK:return me.OK;case vs.CANCELLED:return me.CANCELLED;case vs.UNKNOWN:return me.UNKNOWN;case vs.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case vs.INTERNAL:return me.INTERNAL;case vs.UNAVAILABLE:return me.UNAVAILABLE;case vs.UNAUTHENTICATED:return me.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case vs.NOT_FOUND:return me.NOT_FOUND;case vs.ALREADY_EXISTS:return me.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return me.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case vs.ABORTED:return me.ABORTED;case vs.OUT_OF_RANGE:return me.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return me.UNIMPLEMENTED;case vs.DATA_LOSS:return me.DATA_LOSS;default:return kt(39323,{code:s})}}(sn=vs||(vs={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";function mI(){return new TextEncoder}const pI=new Ya([4294967295,4294967295],0);function sw(s){const e=mI().encode(s),t=new T_;return t.update(e),new Uint8Array(t.digest())}function rw(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ya([t,i],0),new Ya([l,u],0)]}class Ty{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new nu(`Invalid padding: ${t}`);if(i<0)throw new nu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new nu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ya.fromNumber(this.ge)}ye(e,t,i){let l=e.add(t.multiply(Ya.fromNumber(i)));return l.compare(pI)===1&&(l=new Ya([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=sw(e),[i,l]=rw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);if(!this.we(d))return!1}return!0}static create(e,t,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Ty(u,l,t);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const t=sw(e),[i,l]=rw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);this.be(d)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vf{constructor(e,t,i,l,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const l=new Map;return l.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new vf(Nt.min(),l,new Qn(Yt),ua(),Qt())}}class Ou{constructor(e,t,i,l,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ou(i,t,Qt(),Qt(),Qt())}}class Ch{constructor(e,t,i,l){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=l}}class hk{constructor(e,t){this.targetId=e,this.Ce=t}}class fk{constructor(e,t,i=Us.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=l}}class iw{constructor(){this.ve=0,this.Fe=aw(),this.Me=Us.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qt(),t=Qt(),i=Qt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:i=i.add(l);break;default:kt(38017,{changeType:u})}})),new Ou(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=aw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,yn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class gI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ua(),this.He=lh(),this.Je=lh(),this.Ze=new Qn(Yt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:kt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,i=e.Ce.count,l=this.ot(t);if(l){const u=l.target;if(Ag(u))if(i===0){const d=new lt(u.path);this.et(t,d,Gs.newNoDocument(d,Nt.min()))}else yn(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=t;let d,p;try{d=Za(i).toUint8Array()}catch(g){if(g instanceof P_)return Fl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Ty(d,l,u)}catch(g){return Fl(g instanceof nu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let l=0;return i.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(t,u,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&Ag(p.target)){const g=new lt(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Gs.newNoDocument(g,e))}u.Be&&(t.set(d,u.ke()),u.Ke())}}));let i=Qt();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new vf(e,t,this.Ze,this.je,i);return this.je=ua(),this.He=lh(),this.Je=lh(),this.Ze=new Qn(Yt),l}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.qe(t,1):l.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new iw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ts(Yt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ts(Yt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lh(){return new Qn(lt.comparator)}function aw(){return new Qn(lt.comparator)}const yI={asc:"ASCENDING",desc:"DESCENDING"},vI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bI={and:"AND",or:"OR"};class wI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ig(s,e){return s.useProto3Json||cf(e)?e:{value:e}}function $h(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mk(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function xI(s,e){return $h(s,e.toTimestamp())}function Ci(s){return yn(!!s,49232),Nt.fromTimestamp((function(t){const i=Ja(t);return new Vt(i.seconds,i.nanos)})(s))}function jy(s,e){return Mg(s,e).canonicalString()}function Mg(s,e){const t=(function(l){return new Dn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?t:t.child(e)}function pk(s){const e=Dn.fromString(s);return yn(wk(e),10190,{key:e.toString()}),e}function Dg(s,e){return jy(s.databaseId,e.path)}function zp(s,e){const t=pk(e);if(t.get(1)!==s.databaseId.projectId)throw new Fe(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Fe(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new lt(yk(t))}function gk(s,e){return jy(s.databaseId,e)}function _I(s){const e=pk(s);return e.length===4?Dn.emptyPath():yk(e)}function Lg(s){return new Dn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function yk(s){return yn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function ow(s,e,t){return{name:Dg(s,e),fields:t.value.mapValue.fields}}function kI(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:kt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(yn(b===void 0||typeof b=="string",58123),Us.fromBase64String(b||"")):(yn(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Us.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const b=y.code===void 0?me.UNKNOWN:dk(y.code);return new Fe(b,y.message||"")})(d);t=new fk(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=zp(s,i.document.name),u=Ci(i.document.updateTime),d=i.document.createTime?Ci(i.document.createTime):Nt.min(),p=new pr({mapValue:{fields:i.document.fields}}),g=Gs.newFoundDocument(l,u,d,p),y=i.targetIds||[],b=i.removedTargetIds||[];t=new Ch(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=zp(s,i.document),u=i.readTime?Ci(i.readTime):Nt.min(),d=Gs.newNoDocument(l,u),p=i.removedTargetIds||[];t=new Ch([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=zp(s,i.document),u=i.removedTargetIds||[];t=new Ch([],u,l,null)}else{if(!("filter"in e))return kt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,d=new hI(l,u),p=i.targetId;t=new hk(p,d)}}return t}function EI(s,e){let t;if(e instanceof Lu)t={update:ow(s,e.key,e.value)};else if(e instanceof yf)t={delete:Dg(s,e.key)};else if(e instanceof ao)t={update:ow(s,e.key,e.data),updateMask:MI(e.fieldMask)};else{if(!(e instanceof cI))return kt(16599,{dt:e.type});t={verify:Dg(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const p=d.transform;if(p instanceof wu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof $l)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Gl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof xu)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw kt(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:xI(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:kt(27497)})(s,e.precondition)),t}function TI(s,e){return s&&s.length>0?(yn(e!==void 0,14353),s.map((t=>(function(l,u){let d=l.updateTime?Ci(l.updateTime):Ci(u);return d.isEqual(Nt.min())&&(d=Ci(u)),new aI(d,l.transformResults||[])})(t,e)))):[]}function jI(s,e){return{documents:[gk(s,e.path)]}}function SI(s,e){const t={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=gk(s,l);const u=(function(y){if(y.length!==0)return bk(ui.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((b=>(function(E){return{field:Ml(E.field),direction:AI(E.dir)}})(b)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=Ig(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:l}}function CI(s){let e=_I(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let l=null;if(i>0){yn(i===1,65062);const b=t.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=(function(k){const E=vk(k);return E instanceof ui&&G_(E)?E.getFilters():[E]})(t.where));let d=[];t.orderBy&&(d=(function(k){return k.map((E=>(function(W){return new bu(Dl(W.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(E)))})(t.orderBy));let p=null;t.limit&&(p=(function(k){let E;return E=typeof k=="object"?k.value:k,cf(E)?null:E})(t.limit));let g=null;t.startAt&&(g=(function(k){const E=!!k.before,O=k.values||[];return new Hh(O,E)})(t.startAt));let y=null;return t.endAt&&(y=(function(k){const E=!k.before,O=k.values||[];return new Hh(O,E)})(t.endAt)),$R(e,l,d,u,p,"F",g,y)}function NI(s,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return kt(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function vk(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Dl(t.unaryFilter.field);return ws.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Dl(t.unaryFilter.field);return ws.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Dl(t.unaryFilter.field);return ws.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Dl(t.unaryFilter.field);return ws.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return kt(61313);default:return kt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return ws.create(Dl(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return kt(58110);default:return kt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ui.create(t.compositeFilter.filters.map((i=>vk(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return kt(1026)}})(t.compositeFilter.op))})(s):kt(30097,{filter:s})}function AI(s){return yI[s]}function RI(s){return vI[s]}function II(s){return bI[s]}function Ml(s){return{fieldPath:s.canonicalString()}}function Dl(s){return Ps.fromServerFormat(s.fieldPath)}function bk(s){return s instanceof ws?(function(t){if(t.op==="=="){if(K2(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NAN"}};if(G2(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(K2(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NAN"}};if(G2(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(t.field),op:RI(t.op),value:t.value}}})(s):s instanceof ui?(function(t){const i=t.getFilters().map((l=>bk(l)));return i.length===1?i[0]:{compositeFilter:{op:II(t.op),filters:i}}})(s):kt(54877,{filter:s})}function MI(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function wk(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function xk(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Wa{constructor(e,t,i,l,u=Nt.min(),d=Nt.min(),p=Us.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Wa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class DI{constructor(e){this.yt=e}}function LI(s){const e=CI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Wh(e,e.limit,"L"):e}class OI{constructor(){this.Sn=new PI}addToCollectionParentIndex(e,t){return this.Sn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(Xa.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(Xa.min())}updateCollectionGroup(e,t,i){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class PI{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t]||new Ts(Dn.comparator),u=!l.has(i);return this.index[t]=l.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t];return l&&l.has(i)}getEntries(e){return(this.index[e]||new Ts(Dn.comparator)).toArray()}}const lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_k=41943040;class mr{static withCacheSize(e){return new mr(e,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}mr.DEFAULT_COLLECTION_PERCENTILE=10,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mr.DEFAULT=new mr(_k,mr.DEFAULT_COLLECTION_PERCENTILE,mr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mr.DISABLED=new mr(-1,0,0);class Kl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Kl(0)}static ar(){return new Kl(-1)}}const cw="LruGarbageCollector",VI=1048576;function uw([s,e],[t,i]){const l=Yt(s,t);return l===0?Yt(e,i):l}class UI{constructor(e){this.Pr=e,this.buffer=new Ts(uw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();uw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ge(cw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){nc(t)?Ge(cw,"Ignoring IndexedDB error during garbage collection: ",t):await tc(t)}await this.Ar(3e5)}))}}class zI{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Te.resolve(lf.ce);const i=new UI(t);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(lw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,l,u,d,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),l=this.params.maximumSequenceNumbersToCollect):l=k,d=Date.now(),this.nthSequenceNumber(e,l)))).next((k=>(i=k,p=Date.now(),this.removeTargets(e,i,t)))).next((k=>(u=k,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((k=>(y=Date.now(),Rl()<=Kt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${k} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:k}))))}}function FI(s,e){return new zI(s,e)}class qI{constructor(){this.changes=new Go((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gs.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class WI{constructor(e,t,i,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(i!==null&&cu(i.mutation,l,Cr.empty(),Vt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Qt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Qt()){const l=No();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,i).next((u=>{let d=tu();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=No();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Qt())))}populateOverlays(e,t,i){const l=[];return i.forEach((u=>{t.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,i,l){let u=ua();const d=lu(),p=(function(){return lu()})();return t.forEach(((g,y)=>{const b=i.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof ao)?u=u.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),cu(b.mutation,y,b.mutation.getFieldMask(),Vt.now())):d.set(y.key,Cr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,b)=>d.set(y,b))),t.forEach(((y,b)=>p.set(y,new HI(b,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=lu();let l=new Qn(((d,p)=>d-p)),u=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let b=i.get(g)||Cr.empty();b=p.applyToLocalView(y,b),i.set(g,b);const k=(l.get(p.batchId)||Qt()).add(g);l=l.insert(p.batchId,k)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,k=nk();b.forEach((E=>{if(!u.has(E)){const O=ck(t.get(E),i.get(E));O!==null&&k.set(E,O),u=u.add(E)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,k))}return Te.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,l){return GR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):X_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,l):this.getDocumentsMatchingCollectionQuery(e,t,i,l)}getNextDocuments(e,t,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,l-u.size):Te.resolve(No());let p=pu,g=u;return d.next((y=>Te.forEach(y,((b,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),u.get(b)?Te.resolve():this.remoteDocumentCache.getEntry(e,b).next((E=>{g=g.insert(b,E)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Qt()))).next((b=>({batchId:p,changes:tk(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new lt(t)).next((i=>{let l=tu();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,l){const u=t.collectionGroup;let d=tu();return this.indexManager.getCollectionParents(e,u).next((p=>Te.forEach(p,(g=>{const y=(function(k,E){return new sc(E,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((b=>{b.forEach(((k,E)=>{d=d.insert(k,E)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,l)))).next((d=>{u.forEach(((g,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,Gs.newInvalidDocument(b)))}));let p=tu();return d.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&cu(b.mutation,y,Cr.empty(),Vt.now()),ff(t,y)&&(p=p.insert(g,y))})),p}))}}class $I{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Te.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Ci(l.createTime)}})(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(l){return{name:l.name,query:LI(l.bundledQuery),readTime:Ci(l.readTime)}})(t)),Te.resolve()}}class GI{constructor(){this.overlays=new Qn(lt.comparator),this.Lr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=No();return Te.forEach(t,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((l,u)=>{this.bt(e,t,u)})),Te.resolve()}removeOverlaysForBatchId(e,t,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),Te.resolve()}getOverlaysForCollection(e,t,i){const l=No(),u=t.length+1,d=new lt(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return Te.resolve(l)}getOverlaysForCollectionGroup(e,t,i,l){let u=new Qn(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let b=u.get(y.largestBatchId);b===null&&(b=No(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=No(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=l)););return Te.resolve(p)}bt(e,t,i){const l=this.overlays.get(i.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new dI(t,i));let u=this.Lr.get(t);u===void 0&&(u=Qt(),this.Lr.set(t,u)),this.Lr.set(t,u.add(i.key))}}class KI{constructor(){this.sessionToken=Us.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}class Sy{constructor(){this.kr=new Ts(Ss.Kr),this.qr=new Ts(Ss.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Ss(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Ss(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new lt(new Dn([])),i=new Ss(t,e),l=new Ss(t,e+1),u=[];return this.qr.forEachInRange([i,l],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new lt(new Dn([])),i=new Ss(t,e),l=new Ss(t,e+1);let u=Qt();return this.qr.forEachInRange([i,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new Ss(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ss{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return lt.comparator(e.key,t.key)||Yt(e.Hr,t.Hr)}static Ur(e,t){return Yt(e.Hr,t.Hr)||lt.comparator(e.key,t.key)}}class YI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ts(Ss.Kr)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new uI(u,t,i,l);this.mutationQueue.push(d);for(const p of l)this.Jr=this.Jr.add(new Ss(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Te.resolve(d)}lookupMutationBatch(e,t){return Te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,l=this.Xr(i),u=l<0?0:l;return Te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?vy:this.Yn-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ss(t,0),l=new Ss(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(d=>{const p=this.Zr(d.Hr);u.push(p)})),Te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ts(Yt);return t.forEach((l=>{const u=new Ss(l,0),d=new Ss(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{i=i.add(p.Hr)}))})),Te.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,l=i.length+1;let u=i;lt.isDocumentKey(u)||(u=u.child(""));const d=new Ss(new lt(u),0);let p=new Ts(Yt);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),d),Te.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){yn(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Te.forEach(t.mutations,(l=>{const u=new Ss(l.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Ss(t,0),l=this.Jr.firstAfterOrEqual(i);return Te.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class QI{constructor(e){this.ti=e,this.docs=(function(){return new Qn(lt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,l=this.docs.get(i),u=l?l.size:0,d=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Te.resolve(i?i.document.mutableCopy():Gs.newInvalidDocument(t))}getEntries(e,t){let i=ua();return t.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Gs.newInvalidDocument(l))})),Te.resolve(i)}getDocumentsMatchingQuery(e,t,i,l){let u=ua();const d=t.path,p=new lt(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||kR(_R(b),i)<=0||(l.has(b.key)||ff(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return Te.resolve(u)}getAllFromCollectionGroup(e,t,i,l){kt(9500)}ni(e,t){return Te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new XI(this)}getSize(e){return Te.resolve(this.size)}}class XI extends qI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?t.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),Te.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class JI{constructor(e){this.persistence=e,this.ri=new Go((t=>xy(t)),_y),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.ii=0,this.si=new Sy,this.targetCount=0,this.oi=Kl._r()}forEachTarget(e,t){return this.ri.forEach(((i,l)=>t(l))),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),Te.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Kl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.lr(t),Te.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,i){let l=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Te.waitFor(u).next((()=>l))}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return Te.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),Te.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const l=this.persistence.referenceDelegate,u=[];return l&&t.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),Te.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return Te.resolve(i)}containsKey(e,t){return Te.resolve(this.si.containsKey(t))}}class kk{constructor(e,t){this._i={},this.overlays={},this.ai=new lf(0),this.ui=!1,this.ui=!0,this.ci=new KI,this.referenceDelegate=e(this),this.li=new JI(this),this.indexManager=new OI,this.remoteDocumentCache=(function(l){return new QI(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new DI(t),this.Pi=new $I(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new GI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new YI(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Ge("MemoryPersistence","Starting transaction:",e);const l=new ZI(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,t){return Te.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class ZI extends TR{constructor(e){super(),this.currentSequenceNumber=e}}class Cy{constructor(e){this.persistence=e,this.Ri=new Sy,this.Ai=null}static Vi(e){return new Cy(e)}get di(){if(this.Ai)return this.Ai;throw kt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),Te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.di,(i=>{const l=lt.fromPath(i);return this.mi(e,l).next((u=>{u||t.removeEntry(l,Nt.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Te.or([()=>Te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Gh{constructor(e,t){this.persistence=e,this.fi=new Go((i=>CR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=FI(this,t)}static Vi(e,t){return new Gh(e,t)}Ti(){}Ii(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((l=>i+l))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return Te.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?Te.resolve():t(l)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,t).next((p=>{p||(i++,u.removeEntry(d,Nt.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Te.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Th(e.data.value)),t}wr(e,t,i){return Te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.fi.get(t);return Te.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ny{constructor(e,t,i,l){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=l}static Es(e,t){let i=Qt(),l=Qt();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Ny(e,t.fromCache,i,l)}}class eM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return AC()?8:jR(Ys())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,l){const u={result:null};return this.gs(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,t,l,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new eM;return this.ys(e,t,d).next((p=>{if(u.result=p,this.As)return this.ws(e,t,d,p.size)}))})).next((()=>u.result))}ws(e,t,i,l){return i.documentReadCount<this.Vs?(Rl()<=Kt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Il(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Te.resolve()):(Rl()<=Kt.DEBUG&&Ge("QueryEngine","Query:",Il(t),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Rl()<=Kt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Il(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Si(t))):Te.resolve())}gs(e,t){if(J2(t))return Te.resolve(null);let i=Si(t);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Wh(t,null,"F"),i=Si(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=Qt(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(t,p);return this.Ss(t,y,d,g.readTime)?this.gs(e,Wh(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,i,l){return J2(t)||l.isEqual(Nt.min())?Te.resolve(null):this.fs.getDocuments(e,i).next((u=>{const d=this.bs(t,u);return this.Ss(t,d,i,l)?Te.resolve(null):(Rl()<=Kt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Il(t)),this.Ds(e,d,t,xR(l,pu)).next((p=>p)))}))}bs(e,t){let i=new Ts(Z_(e));return t.forEach(((l,u)=>{ff(e,u)&&(i=i.add(u))})),i}Ss(e,t,i,l){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,t,i){return Rl()<=Kt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Il(t)),this.fs.getDocumentsMatchingQuery(e,t,Xa.min(),i)}Ds(e,t,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Ay="LocalStore",nM=3e8;class sM{constructor(e,t,i,l){this.persistence=e,this.Cs=t,this.serializer=l,this.vs=new Qn(Yt),this.Fs=new Go((u=>xy(u)),_y),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function rM(s,e,t,i){return new sM(s,e,t,i)}async function Ek(s,e){const t=Rt(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return t.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],p=[];let g=Qt();for(const y of l){d.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function iM(s,e){const t=Rt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const k=y.batch,E=k.keys();let O=Te.resolve();return E.forEach((W=>{O=O.next((()=>b.getEntry(g,W))).next((F=>{const B=y.docVersions.get(W);yn(B!==null,48541),F.version.compareTo(B)<0&&(k.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),b.addEntry(F)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(g,k)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Qt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,l)))}))}function Tk(s){const e=Rt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function aM(s,e){const t=Rt(s),i=e.snapshotVersion;let l=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});l=t.vs;const p=[];e.targetChanges.forEach(((b,k)=>{const E=l.get(k);if(!E)return;p.push(t.li.removeMatchingKeys(u,b.removedDocuments,k).next((()=>t.li.addMatchingKeys(u,b.addedDocuments,k))));let O=E.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(k)!==null?O=O.withResumeToken(Us.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):b.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(b.resumeToken,i)),l=l.insert(k,O),(function(F,B,$){return F.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=nM?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(E,O,b)&&p.push(t.li.updateTargetData(u,O))}));let g=ua(),y=Qt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(oM(u,d,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!i.isEqual(Nt.min())){const b=t.li.getLastRemoteSnapshotVersion(u).next((k=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(b)}return Te.waitFor(p).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(t.vs=l,u)))}function oM(s,e,t){let i=Qt(),l=Qt();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=ua();return t.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Nt.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):Ge(Ay,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:l}}))}function lM(s,e){const t=Rt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=vy),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function cM(s,e){const t=Rt(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return t.li.getTargetData(i,e).next((u=>u?(l=u,Te.resolve(l)):t.li.allocateTargetId(i).next((d=>(l=new Wa(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=t.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Og(s,e,t){const i=Rt(s),l=i.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!nc(d))throw d;Ge(Ay,`Failed to update sequence numbers for target ${e}: ${d}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function dw(s,e,t){const i=Rt(s);let l=Nt.min(),u=Qt();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,b){const k=Rt(g),E=k.Fs.get(b);return E!==void 0?Te.resolve(k.vs.get(E)):k.li.getTargetData(y,b)})(i,d,Si(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,t?l:Nt.min(),t?u:Qt()))).next((p=>(uM(i,QR(e),p),{documents:p,ks:u})))))}function uM(s,e,t){let i=s.Ms.get(e)||Nt.min();t.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class hw{constructor(){this.activeTargetIds=nI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dM{constructor(){this.vo=new hw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new hw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hM{Mo(e){}shutdown(){}}const fw="ConnectivityMonitor";class mw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ge(fw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ge(fw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ch=null;function Pg(){return ch===null?ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():ch++,"0x"+ch.toString(16)}const Fp="RestConnection",fM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class mM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Fh?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,t,i,l,u){const d=Pg(),p=this.Qo(e,t.toUriEncodedString());Ge(Fp,`Sending RPC '${e}' ${d}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),b=so(y);return this.zo(e,p,g,i,b).then((k=>(Ge(Fp,`Received RPC '${e}' ${d}: `,k),k)),(k=>{throw Fl(Fp,`RPC '${e}' ${d} failed with error: `,k,"url: ",p,"request:",i),k}))}jo(e,t,i,l,u,d){return this.Wo(e,t,i,l,u)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ec})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,t){const i=fM[e];let l=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class pM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Ws="WebChannelConnection",Gc=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Ul extends mM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ul.c_){const e=N_();Gc(e,C_.STAT_EVENT,(t=>{t.stat===Tg.PROXY?Ge(Ws,"STAT_EVENT: detected buffering proxy"):t.stat===Tg.NOPROXY&&Ge(Ws,"STAT_EVENT: detected no buffering proxy")})),Ul.c_=!0}}zo(e,t,i,l,u){const d=Pg();return new Promise(((p,g)=>{const y=new j_;y.setWithCredentials(!0),y.listenOnce(S_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Eh.NO_ERROR:const k=y.getResponseJson();Ge(Ws,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(k)),p(k);break;case Eh.TIMEOUT:Ge(Ws,`RPC '${e}' ${d} timed out`),g(new Fe(me.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const E=y.getStatus();if(Ge(Ws,`RPC '${e}' ${d} failed with status:`,E,"response text:",y.getResponseText()),E>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const W=O?.error;if(W&&W.status&&W.message){const F=(function($){const H=$.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(H)>=0?H:me.UNKNOWN})(W.status);g(new Fe(F,W.message))}else g(new Fe(me.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Fe(me.UNAVAILABLE,"Connection failed."));break;default:kt(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Ge(Ws,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(l);Ge(Ws,`RPC '${e}' ${d} sending request:`,l),y.send(t,"POST",b,i,15)}))}T_(e,t,i){const l=Pg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=u.join("");Ge(Ws,`Creating RPC '${e}' stream ${l}: ${y}`,p);const b=d.createWebChannel(y,p);this.I_(b);let k=!1,E=!1;const O=new pM({Ho:W=>{E?Ge(Ws,`Not sending because RPC '${e}' stream ${l} is closed:`,W):(k||(Ge(Ws,`Opening RPC '${e}' stream ${l} transport.`),b.open(),k=!0),Ge(Ws,`RPC '${e}' stream ${l} sending:`,W),b.send(W))},Jo:()=>b.close()});return Gc(b,eu.EventType.OPEN,(()=>{E||(Ge(Ws,`RPC '${e}' stream ${l} transport opened.`),O.i_())})),Gc(b,eu.EventType.CLOSE,(()=>{E||(E=!0,Ge(Ws,`RPC '${e}' stream ${l} transport closed`),O.o_(),this.E_(b))})),Gc(b,eu.EventType.ERROR,(W=>{E||(E=!0,Fl(Ws,`RPC '${e}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),O.o_(new Fe(me.UNAVAILABLE,"The operation could not be completed")))})),Gc(b,eu.EventType.MESSAGE,(W=>{if(!E){const F=W.data[0];yn(!!F,16349);const B=F,$=B?.error||B[0]?.error;if($){Ge(Ws,`RPC '${e}' stream ${l} received error:`,$);const H=$.status;let K=(function(we){const C=vs[we];if(C!==void 0)return dk(C)})(H),ue=$.message;K===void 0&&(K=me.INTERNAL,ue="Unknown error status: "+H+" with message "+$.message),E=!0,O.o_(new Fe(K,ue)),b.close()}else Ge(Ws,`RPC '${e}' stream ${l} received:`,F),O.__(F)}})),Ul.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return A_()}}function gM(s){return new Ul(s)}function qp(){return typeof document<"u"?document:null}function bf(s){return new wI(s,!0)}Ul.c_=!1;class jk{constructor(e,t,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-i);l>0&&Ge("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const pw="PersistentStream";class Sk{constructor(e,t,i,l,u,d,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jk(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(ca(t.toString()),ca("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===t&&this.G_(i,l)}),(i=>{e((()=>{const l=new Fe(me.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ge(pw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ge(pw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yM extends Sk{constructor(e,t,i,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,l,d),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=kI(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Nt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Nt.min():d.readTime?Ci(d.readTime):Nt.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Lg(this.serializer),t.addTarget=(function(u,d){let p;const g=d.target;if(p=Ag(g)?{documents:jI(u,g)}:{query:SI(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=mk(u,d.resumeToken);const y=Ig(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Nt.min())>0){p.readTime=$h(u,d.snapshotVersion.toTimestamp());const y=Ig(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=NI(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Lg(this.serializer),t.removeTarget=e,this.K_(t)}}class vM extends Sk{constructor(e,t,i,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,l,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return yn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){yn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=TI(e.writeResults,e.commitTime),i=Ci(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Lg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>EI(this.serializer,i)))};this.K_(t)}}class bM{}class wM extends bM{constructor(e,t,i,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Fe(me.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,Mg(t,i),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Fe(me.UNKNOWN,u.toString())}))}jo(e,t,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Mg(t,i),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Fe(me.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function xM(s,e,t,i){return new wM(s,e,t,i)}class _M{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ca(t),this.aa=!1):Ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Uo="RemoteStore";class kM{constructor(e,t,i,l,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{i.enqueueAndForget((async()=>{Ko(this)&&(Ge(Uo,"Restarting streams for network reachability change."),await(async function(g){const y=Rt(g);y.Ea.add(4),await Pu(y),y.Va.set("Unknown"),y.Ea.delete(4),await wf(y)})(this))}))})),this.Va=new _M(i,l)}}async function wf(s){if(Ko(s))for(const e of s.Ra)await e(!0)}async function Pu(s){for(const e of s.Ra)await e(!1)}function Ck(s,e){const t=Rt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Dy(t)?My(t):rc(t).O_()&&Iy(t,e))}function Ry(s,e){const t=Rt(s),i=rc(t);t.Ia.delete(e),i.O_()&&Nk(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ko(t)&&t.Va.set("Unknown"))}function Iy(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nt.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rc(s).Z_(e)}function Nk(s,e){s.da.$e(e),rc(s).X_(e)}function My(s){s.da=new gI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),rc(s).start(),s.Va.ua()}function Dy(s){return Ko(s)&&!rc(s).x_()&&s.Ia.size>0}function Ko(s){return Rt(s).Ea.size===0}function Ak(s){s.da=void 0}async function EM(s){s.Va.set("Online")}async function TM(s){s.Ia.forEach(((e,t)=>{Iy(s,e)}))}async function jM(s,e){Ak(s),Dy(s)?(s.Va.ha(e),My(s)):s.Va.set("Unknown")}async function SM(s,e,t){if(s.Va.set("Online"),e instanceof fk&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){Ge(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kh(s,i)}else if(e instanceof Ch?s.da.Xe(e):e instanceof hk?s.da.st(e):s.da.tt(e),!t.isEqual(Nt.min()))try{const i=await Tk(s.localStore);t.compareTo(i)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(Us.EMPTY_BYTE_STRING,b.snapshotVersion)),Nk(u,g);const k=new Wa(b.target,g,y,b.sequenceNumber);Iy(u,k)})),u.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(i){Ge(Uo,"Failed to raise snapshot:",i),await Kh(s,i)}}async function Kh(s,e,t){if(!nc(e))throw e;s.Ea.add(1),await Pu(s),s.Va.set("Offline"),t||(t=()=>Tk(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Ge(Uo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await wf(s)}))}function Rk(s,e){return e().catch((t=>Kh(s,t,e)))}async function xf(s){const e=Rt(s),t=to(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vy;for(;CM(e);)try{const l=await lM(e.localStore,i);if(l===null){e.Ta.length===0&&t.L_();break}i=l.batchId,NM(e,l)}catch(l){await Kh(e,l)}Ik(e)&&Mk(e)}function CM(s){return Ko(s)&&s.Ta.length<10}function NM(s,e){s.Ta.push(e);const t=to(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function Ik(s){return Ko(s)&&!to(s).x_()&&s.Ta.length>0}function Mk(s){to(s).start()}async function AM(s){to(s).ra()}async function RM(s){const e=to(s);for(const t of s.Ta)e.ea(t.mutations)}async function IM(s,e,t){const i=s.Ta.shift(),l=Ey.from(i,e,t);await Rk(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await xf(s)}async function MM(s,e){e&&to(s).Y_&&await(async function(i,l){if((function(d){return fI(d)&&d!==me.ABORTED})(l.code)){const u=i.Ta.shift();to(i).B_(),await Rk(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await xf(i)}})(s,e),Ik(s)&&Mk(s)}async function gw(s,e){const t=Rt(s);t.asyncQueue.verifyOperationInProgress(),Ge(Uo,"RemoteStore received new credentials");const i=Ko(t);t.Ea.add(3),await Pu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await wf(t)}async function DM(s,e){const t=Rt(s);e?(t.Ea.delete(2),await wf(t)):e||(t.Ea.add(2),await Pu(t),t.Va.set("Unknown"))}function rc(s){return s.ma||(s.ma=(function(t,i,l){const u=Rt(t);return u.sa(),new yM(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:EM.bind(null,s),Yo:TM.bind(null,s),t_:jM.bind(null,s),J_:SM.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Dy(s)?My(s):s.Va.set("Unknown")):(await s.ma.stop(),Ak(s))}))),s.ma}function to(s){return s.fa||(s.fa=(function(t,i,l){const u=Rt(t);return u.sa(),new vM(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:AM.bind(null,s),t_:MM.bind(null,s),ta:RM.bind(null,s),na:IM.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await xf(s)):(await s.fa.stop(),s.Ta.length>0&&(Ge(Uo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Ly{constructor(e,t,i,l,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,l,u){const d=Date.now()+i,p=new Ly(e,t,d,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Fe(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oy(s,e){if(ca("AsyncQueue",`${e}: ${s}`),nc(s))return new Fe(me.UNAVAILABLE,`${e}: ${s}`);throw s}class Bl{static emptySet(e){return new Bl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||lt.comparator(t.key,i.key):(t,i)=>lt.comparator(t.key,i.key),this.keyedMap=tu(),this.sortedSet=new Qn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Bl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class yw{constructor(){this.ga=new Qn(lt.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):kt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Yl{constructor(e,t,i,l,u,d,p,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,l,u){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new Yl(e,t,Bl.emptySet(t),d,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==i[l].type||!t[l].doc.isEqual(i[l].doc))return!1;return!0}}class LM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class OM{constructor(){this.queries=vw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const l=Rt(t),u=l.queries;l.queries=vw(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Fe(me.ABORTED,"Firestore shutting down"))}}function vw(){return new Go((s=>J_(s)),hf)}async function Py(s,e){const t=Rt(s);let i=3;const l=e.query;let u=t.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new LM,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(l,!0);break;case 1:u.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const p=Oy(d,`Initialization of query '${Il(e.query)}' failed`);return void e.onError(p)}t.queries.set(l,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Uy(t)}async function Vy(s,e){const t=Rt(s),i=e.query;let l=3;const u=t.queries.get(i);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function PM(s,e){const t=Rt(s);let i=!1;for(const l of e){const u=l.query,d=t.queries.get(u);if(d){for(const p of d.ba)p.Fa(l)&&(i=!0);d.wa=l}}i&&Uy(t)}function VM(s,e,t){const i=Rt(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(t);i.queries.delete(e)}function Uy(s){s.Ca.forEach((e=>{e.next()}))}var Vg,bw;(bw=Vg||(Vg={})).Ma="default",bw.Cache="cache";class By{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Yl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vg.Cache}}class Dk{constructor(e){this.key=e}}class Lk{constructor(e){this.key=e}}class UM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qt(),this.mutatedKeys=Qt(),this.eu=Z_(e),this.tu=new Bl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new yw,l=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,k)=>{const E=l.get(b),O=ff(this.query,k)?k:null,W=!!E&&this.mutatedKeys.has(E.key),F=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let B=!1;E&&O?E.data.isEqual(O.data)?W!==F&&(i.track({type:3,doc:O}),B=!0):this.su(E,O)||(i.track({type:2,doc:O}),B=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(p=!0)):!E&&O?(i.track({type:0,doc:O}),B=!0):E&&!O&&(i.track({type:1,doc:E}),B=!0,(g||y)&&(p=!0)),B&&(O?(d=d.add(O),u=F?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),i.track({type:1,doc:b})}return{tu:d,iu:i,Ss:p,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,k)=>(function(O,W){const F=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return kt(20277,{Vt:B})}};return F(O)-F(W)})(b.type,k.type)||this.eu(b.doc,k.doc))),this.ou(i),l=l??!1;const p=t&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new Yl(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Qt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new Lk(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new Dk(i))})),t}cu(e){this.Za=e.ks,this.Ya=Qt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const zy="SyncEngine";class BM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class zM{constructor(e){this.key=e,this.hu=!1}}class FM{constructor(e,t,i,l,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Go((p=>J_(p)),hf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Qn(lt.comparator),this.Au=new Map,this.Vu=new Sy,this.du={},this.mu=new Map,this.fu=Kl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qM(s,e,t=!0){const i=zk(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await Ok(i,e,t,!0),l}async function HM(s,e){const t=zk(s);await Ok(t,e,!0,!1)}async function Ok(s,e,t,i){const l=await cM(s.localStore,Si(e)),u=l.targetId,d=s.sharedClientState.addLocalQueryTarget(u,t);let p;return i&&(p=await WM(s,e,u,d==="current",l.resumeToken)),s.isPrimaryClient&&t&&Ck(s.remoteStore,l),p}async function WM(s,e,t,i,l){s.pu=(k,E,O)=>(async function(F,B,$,H){let K=B.view.ru($);K.Ss&&(K=await dw(F.localStore,B.query,!1).then((({documents:C})=>B.view.ru(C,K))));const ue=H&&H.targetChanges.get(B.targetId),Ee=H&&H.targetMismatches.get(B.targetId)!=null,we=B.view.applyChanges(K,F.isPrimaryClient,ue,Ee);return xw(F,B.targetId,we.au),we.snapshot})(s,k,E,O);const u=await dw(s.localStore,e,!0),d=new UM(e,u.ks),p=d.ru(u.documents),g=Ou.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",l),y=d.applyChanges(p,s.isPrimaryClient,g);xw(s,t,y.au);const b=new BM(e,t,d);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function $M(s,e,t){const i=Rt(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((d=>!hf(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await Og(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),t&&Ry(i.remoteStore,l.targetId),Ug(i,l.targetId)})).catch(tc)):(Ug(i,l.targetId),await Og(i.localStore,l.targetId,!0))}async function GM(s,e){const t=Rt(s),i=t.Tu.get(e),l=t.Iu.get(i.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ry(t.remoteStore,i.targetId))}async function KM(s,e,t){const i=t6(s);try{const l=await(function(d,p){const g=Rt(d),y=Vt.now(),b=p.reduce(((O,W)=>O.add(W.key)),Qt());let k,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let W=ua(),F=Qt();return g.xs.getEntries(O,b).next((B=>{W=B,W.forEach((($,H)=>{H.isValidDocument()||(F=F.add($))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,W))).next((B=>{k=B;const $=[];for(const H of p){const K=lI(H,k.get(H.key).overlayedDocument);K!=null&&$.push(new ao(H.key,K,H_(K.value.mapValue),ir.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,$,p)})).next((B=>{E=B;const $=B.applyToLocalDocumentSet(k,F);return g.documentOverlayCache.saveOverlays(O,B.batchId,$)}))})).then((()=>({batchId:E.batchId,changes:tk(k)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new Qn(Yt)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(i,l.batchId,t),await Vu(i,l.changes),await xf(i.remoteStore)}catch(l){const u=Oy(l,"Failed to persist write");t.reject(u)}}async function Pk(s,e){const t=Rt(s);try{const i=await aM(t.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=t.Au.get(u);d&&(yn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?yn(d.hu,14607):l.removedDocuments.size>0&&(yn(d.hu,42227),d.hu=!1))})),await Vu(t,i,e)}catch(i){await tc(i)}}function ww(s,e,t){const i=Rt(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const l=[];i.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=Rt(d);g.onlineState=p;let y=!1;g.queries.forEach(((b,k)=>{for(const E of k.ba)E.va(p)&&(y=!0)})),y&&Uy(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function YM(s,e,t){const i=Rt(s);i.sharedClientState.updateQueryState(e,"rejected",t);const l=i.Au.get(e),u=l&&l.key;if(u){let d=new Qn(lt.comparator);d=d.insert(u,Gs.newNoDocument(u,Nt.min()));const p=Qt().add(u),g=new vf(Nt.min(),new Map,new Qn(Yt),d,p);await Pk(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),Fy(i)}else await Og(i.localStore,e,!1).then((()=>Ug(i,e,t))).catch(tc)}async function QM(s,e){const t=Rt(s),i=e.batch.batchId;try{const l=await iM(t.localStore,e);Uk(t,i,null),Vk(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Vu(t,l)}catch(l){await tc(l)}}async function XM(s,e,t){const i=Rt(s);try{const l=await(function(d,p){const g=Rt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((k=>(yn(k!==null,37113),b=k.keys(),g.mutationQueue.removeMutationBatch(y,k)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);Uk(i,e,t),Vk(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Vu(i,l)}catch(l){await tc(l)}}function Vk(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function Uk(s,e,t){const i=Rt(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(t?u.reject(t):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function Ug(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||Bk(s,i)}))}function Bk(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(Ry(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),Fy(s))}function xw(s,e,t){for(const i of t)i instanceof Dk?(s.Vu.addReference(i.key,e),JM(s,i)):i instanceof Lk?(Ge(zy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||Bk(s,i.key)):kt(19791,{wu:i})}function JM(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||(Ge(zy,"New document in limbo: "+t),s.Eu.add(i),Fy(s))}function Fy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new lt(Dn.fromString(e)),i=s.fu.next();s.Au.set(i,new zM(t)),s.Ru=s.Ru.insert(t,i),Ck(s.remoteStore,new Wa(Si(df(t.path)),i,"TargetPurposeLimboResolution",lf.ce))}}async function Vu(s,e,t){const i=Rt(s),l=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{d.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const b=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){l.push(y);const b=Ny.Es(g.targetId,y);u.push(b)}})))})),await Promise.all(d),i.Pu.J_(l),await(async function(g,y){const b=Rt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>Te.forEach(y,(E=>Te.forEach(E.Ts,(O=>b.persistence.referenceDelegate.addReference(k,E.targetId,O))).next((()=>Te.forEach(E.Is,(O=>b.persistence.referenceDelegate.removeReference(k,E.targetId,O)))))))))}catch(k){if(!nc(k))throw k;Ge(Ay,"Failed to update sequence numbers: "+k)}for(const k of y){const E=k.targetId;if(!k.fromCache){const O=b.vs.get(E),W=O.snapshotVersion,F=O.withLastLimboFreeSnapshotVersion(W);b.vs=b.vs.insert(E,F)}}})(i.localStore,u))}async function ZM(s,e){const t=Rt(s);if(!t.currentUser.isEqual(e)){Ge(zy,"User change. New user:",e.toKey());const i=await Ek(t.localStore,e);t.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Fe(me.CANCELLED,d))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vu(t,i.Ns)}}function e6(s,e){const t=Rt(s),i=t.Au.get(e);if(i&&i.hu)return Qt().add(i.key);{let l=Qt();const u=t.Iu.get(e);if(!u)return l;for(const d of u){const p=t.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function zk(s){const e=Rt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YM.bind(null,e),e.Pu.J_=PM.bind(null,e.eventManager),e.Pu.yu=VM.bind(null,e.eventManager),e}function t6(s){const e=Rt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XM.bind(null,e),e}class Yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return rM(this.persistence,new tM,e.initialUser,this.serializer)}Cu(e){return new kk(Cy.Vi,this.serializer)}Du(e){return new dM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yh.provider={build:()=>new Yh};class n6 extends Yh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){yn(this.persistence.referenceDelegate instanceof Gh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new BI(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?mr.withCacheSize(this.cacheSizeBytes):mr.DEFAULT;return new kk((i=>Gh.Vi(i,t)),this.serializer)}}class Bg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ww(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZM.bind(null,this.syncEngine),await DM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new OM})()}createDatastore(e){const t=bf(e.databaseInfo.databaseId),i=gM(e.databaseInfo);return xM(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,l,u,d,p){return new kM(i,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>ww(this.syncEngine,t,0)),(function(){return mw.v()?new mw:new hM})())}createSyncEngine(e,t){return(function(l,u,d,p,g,y,b){const k=new FM(l,u,d,p,g,y);return b&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Rt(t);Ge(Uo,"RemoteStore shutting down."),i.Ea.add(5),await Pu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Bg.provider={build:()=>new Bg};class qy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ca("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const no="FirestoreClient";class s6{constructor(e,t,i,l,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=l,this.user=$s.UNAUTHENTICATED,this.clientId=yy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{Ge(no,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(Ge(no,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Oy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Hp(s,e){s.asyncQueue.verifyOperationInProgress(),Ge(no,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await Ek(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function _w(s,e){s.asyncQueue.verifyOperationInProgress();const t=await r6(s);Ge(no,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>gw(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>gw(e.remoteStore,l))),s._onlineComponents=e}async function r6(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ge(no,"Using user provided OfflineComponentProvider");try{await Hp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===me.FAILED_PRECONDITION||l.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;Fl("Error using user provided cache. Falling back to memory cache: "+t),await Hp(s,new Yh)}}else Ge(no,"Using default OfflineComponentProvider"),await Hp(s,new n6(void 0));return s._offlineComponents}async function Fk(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ge(no,"Using user provided OnlineComponentProvider"),await _w(s,s._uninitializedComponentsProvider._online)):(Ge(no,"Using default OnlineComponentProvider"),await _w(s,new Bg))),s._onlineComponents}function i6(s){return Fk(s).then((e=>e.syncEngine))}async function Qh(s){const e=await Fk(s),t=e.eventManager;return t.onListen=qM.bind(null,e.syncEngine),t.onUnlisten=$M.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=GM.bind(null,e.syncEngine),t}function a6(s,e,t,i){const l=new qy(i),u=new By(e,l,t);return s.asyncQueue.enqueueAndForget((async()=>Py(await Qh(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>Vy(await Qh(s),u)))}}function o6(s,e,t={}){const i=new ra;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const b=new qy({next:E=>{b.Nu(),d.enqueueAndForget((()=>Vy(u,k)));const O=E.docs.has(p);!O&&E.fromCache?y.reject(new Fe(me.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&E.fromCache&&g&&g.source==="server"?y.reject(new Fe(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:E=>y.reject(E)}),k=new By(df(p.path),b,{includeMetadataChanges:!0,Ka:!0});return Py(u,k)})(await Qh(s),s.asyncQueue,e,t,i))),i.promise}function l6(s,e,t={}){const i=new ra;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const b=new qy({next:E=>{b.Nu(),d.enqueueAndForget((()=>Vy(u,k))),E.fromCache&&g.source==="server"?y.reject(new Fe(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:E=>y.reject(E)}),k=new By(p,b,{includeMetadataChanges:!0,Ka:!0});return Py(u,k)})(await Qh(s),s.asyncQueue,e,t,i))),i.promise}function c6(s,e){const t=new ra;return s.asyncQueue.enqueueAndForget((async()=>KM(await i6(s),e,t))),t.promise}function qk(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const u6="ComponentProvider",kw=new Map;function d6(s,e,t,i,l){return new RR(s,e,t,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,qk(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const Hk="firestore.googleapis.com",Ew=!0;class Tw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Fe(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Hk,this.ssl=Ew}else this.host=e.host,this.ssl=e.ssl??Ew;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_k;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VI)throw new Fe(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qk(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Fe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Fe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Fe(me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _f{constructor(e,t,i,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Fe(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Fe(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new cR;switch(i.type){case"firstParty":return new fR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Fe(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=kw.get(t);i&&(Ge(u6,"Removing Datastore"),kw.delete(t),i.terminate())})(this),Promise.resolve()}}function h6(s,e,t,i={}){s=rr(s,_f);const l=so(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;l&&(ny(`https://${p}`),sy("Firestore",!0)),u.host!==Hk&&u.host!==p&&Fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!aa(g,d)&&(s._setSettings(g),i.mockUserToken)){let y,b;if(typeof i.mockUserToken=="string")y=i.mockUserToken,b=$s.MOCK_USER;else{y=Px(i.mockUserToken,s._app?.options.projectId);const k=i.mockUserToken.sub||i.mockUserToken.user_id;if(!k)throw new Fe(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new $s(k)}s._authCredentials=new uR(new I_(y,b))}}class fa{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fa(this.firestore,e,this._query)}}class ts{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ts(this.firestore,e,this._key)}toJSON(){return{type:ts._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Du(t,ts._jsonSchema))return new ts(e,i||null,new lt(Dn.fromString(t.referencePath)))}}ts._jsonSchemaVersion="firestore/documentReference/1.0",ts._jsonSchema={type:xs("string",ts._jsonSchemaVersion),referencePath:xs("string")};class Qa extends fa{constructor(e,t,i){super(e,t,df(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ts(this.firestore,null,new lt(e))}withConverter(e){return new Qa(this.firestore,e,this._path)}}function mt(s,e,...t){if(s=vn(s),M_("collection","path",e),s instanceof _f){const i=Dn.fromString(e,...t);return V2(i),new Qa(s,null,i)}{if(!(s instanceof ts||s instanceof Qa))throw new Fe(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Dn.fromString(e,...t));return V2(i),new Qa(s.firestore,null,i)}}function Ke(s,e,...t){if(s=vn(s),arguments.length===1&&(e=yy.newId()),M_("doc","path",e),s instanceof _f){const i=Dn.fromString(e,...t);return P2(i),new ts(s,null,new lt(i))}{if(!(s instanceof ts||s instanceof Qa))throw new Fe(me.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Dn.fromString(e,...t));return P2(i),new ts(s.firestore,s instanceof Qa?s.converter:null,new lt(i))}}const jw="AsyncQueue";class Sw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jk(this,"async_queue_retry"),this._c=()=>{const i=qp();i&&Ge(jw,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=qp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=qp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ra;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!nc(e))throw e;Ge(jw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ca("INTERNAL UNHANDLED ERROR: ",Cw(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=Ly.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&kt(47125,{Pc:Cw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Cw(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ri extends _f{constructor(e,t,i,l){super(e,t,i,l),this.type="firestore",this._queue=new Sw,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sw(e),this._firestoreClient=void 0,await e}}}function f6(s,e){const t=typeof s=="object"?s:Nu(),i=typeof s=="string"?s:Fh,l=Wo(t,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=Dx("firestore");u&&h6(l,...u)}return l}function Uu(s){if(s._terminated)throw new Fe(me.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||m6(s),s._firestoreClient}function m6(s){const e=s._freezeSettings(),t=d6(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new s6(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class Yr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yr(Us.fromBase64String(e))}catch(t){throw new Fe(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yr(Us.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Du(e,Yr._jsonSchema))return Yr.fromBase64String(e.bytes)}}Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:xs("string",Yr._jsonSchemaVersion),bytes:xs("string")};class kf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Fe(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yo{constructor(e){this._methodName=e}}class Ni{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ni._jsonSchemaVersion}}static fromJSON(e){if(Du(e,Ni._jsonSchema))return new Ni(e.latitude,e.longitude)}}Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:xs("string",Ni._jsonSchemaVersion),latitude:xs("number"),longitude:xs("number")};class oi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Du(e,oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new oi(e.vectorValues);throw new Fe(me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}oi._jsonSchemaVersion="firestore/vectorValue/1.0",oi._jsonSchema={type:xs("string",oi._jsonSchemaVersion),vectorValues:xs("object")};const p6=/^__.*__$/;class g6{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lu(e,this.data,t,this.fieldTransforms)}}class Wk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $k(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw kt(40011,{dataSource:s})}}class Ef{constructor(e,t,i,l,u,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ef({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Xh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if($k(this.dataSource)&&p6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class y6{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||bf(e)}createContext(e,t,i,l=!1){return new Ef({dataSource:e,methodName:t,targetDoc:i,path:Ps.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bu(s){const e=s._freezeSettings(),t=bf(s._databaseId);return new y6(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Hy(s,e,t,i,l,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,t,l);Yy("Data must be an object, but it was:",d,i);const p=Qk(i,d);let g,y;if(u.merge)g=new Cr(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const k of u.mergeFields){const E=Bo(e,k,t);if(!d.contains(E))throw new Fe(me.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);Zk(b,E)||b.push(E)}g=new Cr(b),y=d.fieldTransforms.filter((k=>g.covers(k.field)))}else g=null,y=d.fieldTransforms;return new g6(new pr(p),g,y)}class Tf extends Yo{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}function Gk(s,e,t){return new Ef({dataSource:3,targetDoc:e.settings.targetDoc,methodName:s._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Wy extends Yo{_toFieldTransform(e){return new pf(e.path,new wu)}isEqual(e){return e instanceof Wy}}class $y extends Yo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Gk(this,e,!0),i=this.Ac.map((u=>Qo(u,t))),l=new $l(i);return new pf(e.path,l)}isEqual(e){return e instanceof $y&&aa(this.Ac,e.Ac)}}class Gy extends Yo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Gk(this,e,!0),i=this.Ac.map((u=>Qo(u,t))),l=new Gl(i);return new pf(e.path,l)}isEqual(e){return e instanceof Gy&&aa(this.Ac,e.Ac)}}class Ky extends Yo{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new xu(e.serializer,rk(e.serializer,this.Vc));return new pf(e.path,t)}isEqual(e){return e instanceof Ky&&this.Vc===e.Vc}}function Kk(s,e,t,i){const l=s.createContext(1,e,t);Yy("Data must be an object, but it was:",l,i);const u=[],d=pr.empty();io(i,((g,y)=>{const b=Jk(e,g,t);y=vn(y);const k=l.childContextForFieldPath(b);if(y instanceof Tf)u.push(b);else{const E=Qo(y,k);E!=null&&(u.push(b),d.set(b,E))}}));const p=new Cr(u);return new Wk(d,p,l.fieldTransforms)}function Yk(s,e,t,i,l,u){const d=s.createContext(1,e,t),p=[Bo(e,i,t)],g=[l];if(u.length%2!=0)throw new Fe(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<u.length;E+=2)p.push(Bo(e,u[E])),g.push(u[E+1]);const y=[],b=pr.empty();for(let E=p.length-1;E>=0;--E)if(!Zk(y,p[E])){const O=p[E];let W=g[E];W=vn(W);const F=d.childContextForFieldPath(O);if(W instanceof Tf)y.push(O);else{const B=Qo(W,F);B!=null&&(y.push(O),b.set(O,B))}}const k=new Cr(y);return new Wk(b,k,d.fieldTransforms)}function v6(s,e,t,i=!1){return Qo(t,s.createContext(i?4:3,e))}function Qo(s,e){if(Xk(s=vn(s)))return Yy("Unsupported field value:",e,s),Qk(s,e);if(s instanceof Yo)return(function(i,l){if(!$k(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let d=0;for(const p of i){let g=Qo(p,l.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=vn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return rk(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Vt.fromDate(i);return{timestampValue:$h(l.serializer,u)}}if(i instanceof Vt){const u=new Vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$h(l.serializer,u)}}if(i instanceof Ni)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yr)return{bytesValue:mk(l.serializer,i._byteString)};if(i instanceof ts){const u=l.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:jy(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof oi)return(function(d,p){const g=d instanceof oi?d.toArray():d;return{mapValue:{fields:{[F_]:{stringValue:q_},[qh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return ky(p.serializer,b)}))}}}}}})(i,l);if(xk(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${of(i)}`)})(s,e)}function Qk(s,e){const t={};return O_(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):io(s,((i,l)=>{const u=Qo(l,e.childContextForField(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function Xk(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Vt||s instanceof Ni||s instanceof Yr||s instanceof ts||s instanceof Yo||s instanceof oi||xk(s))}function Yy(s,e,t){if(!Xk(t)||!D_(t)){const i=of(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Bo(s,e,t){if((e=vn(e))instanceof kf)return e._internalPath;if(typeof e=="string")return Jk(s,e);throw Xh("Field path arguments must be of type string or ",s,!1,void 0,t)}const b6=new RegExp("[~\\*/\\[\\]]");function Jk(s,e,t){if(e.search(b6)>=0)throw Xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new kf(...e.split("."))._internalPath}catch{throw Xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Xh(s,e,t,i,l){const u=i&&!i.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${l}`),g+=")"),new Fe(me.INVALID_ARGUMENT,p+s+g)}function Zk(s,e){return s.some((t=>t.isEqual(e)))}class w6{convertValue(e,t="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ds(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Za(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw kt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return io(e,((l,u)=>{i[l]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[qh].arrayValue?.values?.map((i=>ds(i.doubleValue)));return new oi(t)}convertGeoPoint(e){return new Ni(ds(e.latitude),ds(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=uf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(gu(e));default:return null}}convertTimestamp(e){const t=Ja(e);return new Vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Dn.fromString(e);yn(wk(i),9688,{name:e});const l=new yu(i.get(1),i.get(3)),u=new lt(i.popFirst(5));return l.isEqual(t)||ca(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class Qy extends w6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ts(this.firestore,null,t)}}function Vs(){return new Wy("serverTimestamp")}function x6(...s){return new $y("arrayUnion",s)}function _6(...s){return new Gy("arrayRemove",s)}function Ao(s){return new Ky("increment",s)}const Nw="@firebase/firestore",Aw="4.10.0";function Rw(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const l=t;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class eE{constructor(e,t,i,l,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ts(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new k6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Bo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class k6 extends eE{data(){return super.data()}}function tE(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Fe(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xy{}class Jy extends Xy{}function rn(s,e,...t){let i=[];e instanceof Xy&&i.push(e),i=i.concat(t),(function(u){const d=u.filter((g=>g instanceof Zy)).length,p=u.filter((g=>g instanceof jf)).length;if(d>1||d>0&&p>0)throw new Fe(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class jf extends Jy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new jf(e,t,i)}_apply(e){const t=this._parse(e);return nE(e._query,t),new fa(e.firestore,e.converter,Rg(e._query,t))}_parse(e){const t=Bu(e.firestore);return(function(u,d,p,g,y,b,k){let E;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Fe(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Mw(k,b);const W=[];for(const F of k)W.push(Iw(g,u,F));E={arrayValue:{values:W}}}else E=Iw(g,u,k)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Mw(k,b),E=v6(p,d,k,b==="in"||b==="not-in");return ws.create(y,b,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function St(s,e,t){const i=e,l=Bo("where",s);return jf._create(l,i,t)}class Zy extends Xy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ui.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,u){let d=l;const p=u.getFlattenedFilters();for(const g of p)nE(d,g),d=Rg(d,g)})(e._query,t),new fa(e.firestore,e.converter,Rg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class e0 extends Jy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new e0(e,t)}_apply(e){const t=(function(l,u,d){if(l.startAt!==null)throw new Fe(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Fe(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bu(u,d)})(e._query,this._field,this._direction);return new fa(e.firestore,e.converter,YR(e._query,t))}}function _u(s,e="asc"){const t=e,i=Bo("orderBy",s);return e0._create(i,t)}class t0 extends Jy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new t0(e,t,i)}_apply(e){return new fa(e.firestore,e.converter,Wh(e._query,this._limit,this._limitType))}}function ku(s){return wR("limit",s),t0._create("limit",s,"F")}function Iw(s,e,t){if(typeof(t=vn(t))=="string"){if(t==="")throw new Fe(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X_(e)&&t.indexOf("/")!==-1)throw new Fe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Dn.fromString(t));if(!lt.isDocumentKey(i))throw new Fe(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return $2(s,new lt(i))}if(t instanceof ts)return $2(s,t._key);throw new Fe(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${of(t)}.`)}function Mw(s,e){if(!Array.isArray(s)||s.length===0)throw new Fe(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nE(s,e){const t=(function(l,u){for(const d of l)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Fe(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Fe(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function n0(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Io extends eE{constructor(e,t,i,l,u,d){super(e,t,i,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Bo("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Io._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Io._jsonSchemaVersion="firestore/documentSnapshot/1.0",Io._jsonSchema={type:xs("string",Io._jsonSchemaVersion),bundleSource:xs("string","DocumentSnapshot"),bundleName:xs("string"),bundle:xs("string")};class Nh extends Io{data(e={}){return super.data(e)}}class Mo{constructor(e,t,i,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new su(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Nh(this._firestore,this._userDataWriter,i.key,i,new su(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new Nh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new su(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new Nh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new su(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),b=d.indexOf(p.doc.key)),{type:E6(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Fe(me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function E6(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return kt(61501,{type:s})}}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:xs("string",Mo._jsonSchemaVersion),bundleSource:xs("string","QuerySnapshot"),bundleName:xs("string"),bundle:xs("string")};class T6{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bu(e)}set(e,t,i){this._verifyNotCommitted();const l=Wp(e,this._firestore),u=n0(l.converter,t,i),d=Hy(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,i);return this._mutations.push(d.toMutation(l._key,ir.none())),this}update(e,t,i,...l){this._verifyNotCommitted();const u=Wp(e,this._firestore);let d;return d=typeof(t=vn(t))=="string"||t instanceof kf?Yk(this._dataReader,"WriteBatch.update",u._key,t,i,l):Kk(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wp(e,this._firestore);return this._mutations=this._mutations.concat(new yf(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wp(s,e){if((s=vn(s)).firestore!==e)throw new Fe(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Ks(s){s=rr(s,ts);const e=rr(s.firestore,Ri),t=Uu(e);return o6(t,s._key).then((i=>rE(e,s,i)))}function Zt(s){s=rr(s,fa);const e=rr(s.firestore,Ri),t=Uu(e),i=new Qy(e);return tE(s._query),l6(t,s._query).then((l=>new Mo(e,i,s,l)))}function Cs(s,e,t){s=rr(s,ts);const i=rr(s.firestore,Ri),l=n0(s.converter,e,t),u=Bu(i);return zu(i,[Hy(u,"setDoc",s._key,l,s.converter!==null,t).toMutation(s._key,ir.none())])}function bs(s,e,t,...i){s=rr(s,ts);const l=rr(s.firestore,Ri),u=Bu(l);let d;return d=typeof(e=vn(e))=="string"||e instanceof kf?Yk(u,"updateDoc",s._key,e,t,i):Kk(u,"updateDoc",s._key,e),zu(l,[d.toMutation(s._key,ir.exists(!0))])}function Sr(s){return zu(rr(s.firestore,Ri),[new yf(s._key,ir.none())])}function Nr(s,e){const t=rr(s.firestore,Ri),i=Ke(s),l=n0(s.converter,e),u=Bu(s.firestore);return zu(t,[Hy(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,ir.exists(!1))]).then((()=>i))}function sE(s,...e){s=vn(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Rw(e[i])||(t=e[i++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Rw(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,d,p;if(s instanceof ts)d=rr(s.firestore,Ri),p=df(s._key.path),u={next:y=>{e[i]&&e[i](rE(d,s,y))},error:e[i+1],complete:e[i+2]};else{const y=rr(s,fa);d=rr(y.firestore,Ri),p=y._query;const b=new Qy(d);u={next:k=>{e[i]&&e[i](new Mo(d,b,y,k))},error:e[i+1],complete:e[i+2]},tE(s._query)}const g=Uu(d);return a6(g,p,l,u)}function zu(s,e){const t=Uu(s);return c6(t,e)}function rE(s,e,t){const i=t.docs.get(e._key),l=new Qy(s);return new Io(s,l,e._key,i,new su(t.hasPendingWrites,t.fromCache),e.converter)}function Dw(s){return s=rr(s,Ri),Uu(s),new T6(s,(e=>zu(s,e)))}(function(e,t=!0){lR($o),li(new Xr("firestore",((i,{instanceIdentifier:l,options:u})=>{const d=i.getProvider("app").getImmediate(),p=new Ri(new dR(i.getProvider("auth-internal")),new mR(d,i.getProvider("app-check-internal")),IR(d,l),d);return u={useFetchStreams:t,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),gr(Nw,Aw,e),gr(Nw,Aw,"esm2020")})();var j6="firebase",S6="12.8.0";gr(j6,S6,"app");const iE="firebasestorage.googleapis.com",aE="storageBucket",C6=120*1e3,N6=600*1e3;class ss extends hi{constructor(e,t,i=0){super($p(e),`Firebase Storage: ${t} (${$p(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ss.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $p(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ns;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ns||(ns={}));function $p(s){return"storage/"+s}function s0(){const s="An unknown error occurred, please check the error payload for server response.";return new ss(ns.UNKNOWN,s)}function A6(s){return new ss(ns.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function R6(s){return new ss(ns.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function I6(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ss(ns.UNAUTHENTICATED,s)}function M6(){return new ss(ns.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function D6(s){return new ss(ns.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function L6(){return new ss(ns.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O6(){return new ss(ns.CANCELED,"User canceled the upload/download.")}function P6(s){return new ss(ns.INVALID_URL,"Invalid URL '"+s+"'.")}function V6(s){return new ss(ns.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function U6(){return new ss(ns.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aE+"' property when initializing the app?")}function B6(){return new ss(ns.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function z6(){return new ss(ns.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function F6(s){return new ss(ns.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zg(s){return new ss(ns.INVALID_ARGUMENT,s)}function oE(){return new ss(ns.APP_DELETED,"The Firebase app was deleted.")}function q6(s){return new ss(ns.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uu(s,e){return new ss(ns.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Kc(s){throw new ss(ns.INTERNAL_ERROR,"Internal error: "+s)}class sr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=sr.makeFromUrl(e,t)}catch{return new sr(e,"")}if(i.path==="")return i;throw V6(e)}static makeFromUrl(e,t){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function y(ue){ue.path_=decodeURIComponent(ue.path)}const b="v[A-Za-z0-9_]+",k=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",O=new RegExp(`^https?://${k}/${b}/b/${l}/o${E}`,"i"),W={bucket:1,path:3},F=t===iE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,B="([^?#]*)",$=new RegExp(`^https?://${F}/${l}/${B}`,"i"),K=[{regex:p,indices:g,postModify:u},{regex:O,indices:W,postModify:y},{regex:$,indices:{bucket:1,path:2},postModify:y}];for(let ue=0;ue<K.length;ue++){const Ee=K[ue],we=Ee.regex.exec(e);if(we){const C=we[Ee.indices.bucket];let T=we[Ee.indices.path];T||(T=""),i=new sr(C,T),Ee.postModify(i);break}}if(i==null)throw P6(e);return i}}class H6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function W6(s,e,t){let i=1,l=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function b(...B){y||(y=!0,e.apply(null,B))}function k(B){l=setTimeout(()=>{l=null,s(O,g())},B)}function E(){u&&clearTimeout(u)}function O(B,...$){if(y){E();return}if(B){E(),b.call(null,B,...$);return}if(g()||d){E(),b.call(null,B,...$);return}i<64&&(i*=2);let K;p===1?(p=2,K=0):K=(i+Math.random())*1e3,k(K)}let W=!1;function F(B){W||(W=!0,E(),!y&&(l!==null?(B||(p=2),clearTimeout(l),k(0)):B||(p=1)))}return k(0),u=setTimeout(()=>{d=!0,F(!0)},t),F}function $6(s){s(!1)}function G6(s){return s!==void 0}function K6(s){return typeof s=="object"&&!Array.isArray(s)}function r0(s){return typeof s=="string"||s instanceof String}function Lw(s){return i0()&&s instanceof Blob}function i0(){return typeof Blob<"u"}function Fg(s,e,t,i){if(i<e)throw zg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>t)throw zg(`Invalid value for '${s}'. Expected ${t} or less.`)}function Sf(s,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${s}`}function lE(s){const e=encodeURIComponent;let t="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);t=t+l+"&"}return t=t.slice(0,-1),t}var Do;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Do||(Do={}));function Y6(s,e){const t=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||l||u}class Q6{constructor(e,t,i,l,u,d,p,g,y,b,k,E=!0,O=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=k,this.retry=E,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((W,F)=>{this.resolve_=W,this.reject_=F,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new uh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===Do.NO_ERROR,g=u.getStatus();if(!p||Y6(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Do.ABORT;i(!1,new uh(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new uh(y,u))})},t=(i,l)=>{const u=this.resolve_,d=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());G6(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=s0();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(l.canceled){const g=this.appDelete_?oE():O6();d(g)}else{const g=L6();d(g)}};this.canceled_?t(!1,new uh(!1,null,!0)):this.backoffId_=W6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class uh{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function X6(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function J6(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Z6(s,e){e&&(s["X-Firebase-GMPID"]=e)}function eD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function tD(s,e,t,i,l,u,d=!0,p=!1){const g=lE(s.urlParams),y=s.url+g,b=Object.assign({},s.headers);return Z6(b,e),X6(b,t),J6(b,u),eD(b,i),new Q6(y,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,d,p)}function nD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function sD(...s){const e=nD();if(e!==void 0){const t=new e;for(let i=0;i<s.length;i++)t.append(s[i]);return t.getBlob()}else{if(i0())return new Blob(s);throw new ss(ns.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rD(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function iD(s){if(typeof atob>"u")throw F6("base-64");return atob(s)}const Ei={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gp{constructor(e,t){this.data=e,this.contentType=t||null}}function aD(s,e){switch(s){case Ei.RAW:return new Gp(cE(e));case Ei.BASE64:case Ei.BASE64URL:return new Gp(uE(s,e));case Ei.DATA_URL:return new Gp(lD(e),cD(e))}throw s0()}function cE(s){const e=[];for(let t=0;t<s.length;t++){let i=s.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=i,d=s.charCodeAt(++t);i=65536|(u&1023)<<10|d&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function oD(s){let e;try{e=decodeURIComponent(s)}catch{throw uu(Ei.DATA_URL,"Malformed data URL.")}return cE(e)}function uE(s,e){switch(s){case Ei.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw uu(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case Ei.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw uu(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=iD(e)}catch(l){throw l.message.includes("polyfill")?l:uu(s,"Invalid character found")}const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i}class dE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw uu(Ei.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=uD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function lD(s){const e=new dE(s);return e.base64?uE(Ei.BASE64,e.rest):oD(e.rest)}function cD(s){return new dE(s).contentType}function uD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Ha{constructor(e,t){let i=0,l="";Lw(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(Lw(this.data_)){const i=this.data_,l=rD(i,e,t);return l===null?null:new Ha(l)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ha(i,!0)}}static getBlob(...e){if(i0()){const t=e.map(i=>i instanceof Ha?i.data_:i);return new Ha(sD.apply(null,t))}else{const t=e.map(d=>r0(d)?aD(Ei.RAW,d).data:d.data_);let i=0;t.forEach(d=>{i+=d.byteLength});const l=new Uint8Array(i);let u=0;return t.forEach(d=>{for(let p=0;p<d.length;p++)l[u++]=d[p]}),new Ha(l,!0)}}uploadData(){return this.data_}}function a0(s){let e;try{e=JSON.parse(s)}catch{return null}return K6(e)?e:null}function dD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function hD(s,e){const t=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?t:s+"/"+t}function hE(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function fD(s,e){return e}class nr{constructor(e,t,i,l){this.server=e,this.local=t||e,this.writable=!!i,this.xform=l||fD}}let dh=null;function mD(s){return!r0(s)||s.length<2?s:hE(s)}function fE(){if(dh)return dh;const s=[];s.push(new nr("bucket")),s.push(new nr("generation")),s.push(new nr("metageneration")),s.push(new nr("name","fullPath",!0));function e(u,d){return mD(d)}const t=new nr("name");t.xform=e,s.push(t);function i(u,d){return d!==void 0?Number(d):d}const l=new nr("size");return l.xform=i,s.push(l),s.push(new nr("timeCreated")),s.push(new nr("updated")),s.push(new nr("md5Hash",null,!0)),s.push(new nr("cacheControl",null,!0)),s.push(new nr("contentDisposition",null,!0)),s.push(new nr("contentEncoding",null,!0)),s.push(new nr("contentLanguage",null,!0)),s.push(new nr("contentType",null,!0)),s.push(new nr("metadata","customMetadata",!0)),dh=s,dh}function pD(s,e){function t(){const i=s.bucket,l=s.fullPath,u=new sr(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function gD(s,e,t){const i={};i.type="file";const l=t.length;for(let u=0;u<l;u++){const d=t[u];i[d.local]=d.xform(i,e[d.server])}return pD(i,s),i}function mE(s,e,t){const i=a0(e);return i===null?null:gD(s,i,t)}function yD(s,e,t,i){const l=a0(e);if(l===null||!r0(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const b=s.bucket,k=s.fullPath,E="/b/"+d(b)+"/o/"+d(k),O=Sf(E,t,i),W=lE({alt:"media",token:y});return O+W})[0]}function vD(s,e){const t={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}const Ow="prefixes",Pw="items";function bD(s,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Ow])for(const l of t[Ow]){const u=l.replace(/\/$/,""),d=s._makeStorageReference(new sr(e,u));i.prefixes.push(d)}if(t[Pw])for(const l of t[Pw]){const u=s._makeStorageReference(new sr(e,l.name));i.items.push(u)}return i}function wD(s,e,t){const i=a0(t);return i===null?null:bD(s,e,i)}class o0{constructor(e,t,i,l){this.url=e,this.method=t,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function l0(s){if(!s)throw s0()}function xD(s,e){function t(i,l){const u=mE(s,l,e);return l0(u!==null),u}return t}function _D(s,e){function t(i,l){const u=wD(s,e,l);return l0(u!==null),u}return t}function kD(s,e){function t(i,l){const u=mE(s,l,e);return l0(u!==null),yD(u,l,s.host,s._protocol)}return t}function c0(s){function e(t,i){let l;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?l=M6():l=I6():t.getStatus()===402?l=R6(s.bucket):t.getStatus()===403?l=D6(s.path):l=i,l.status=t.getStatus(),l.serverResponse=i.serverResponse,l}return e}function ED(s){const e=c0(s);function t(i,l){let u=e(i,l);return i.getStatus()===404&&(u=A6(s.path)),u.serverResponse=l.serverResponse,u}return t}function TD(s,e,t,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",t.length>0&&(u.delimiter=t),i&&(u.pageToken=i),l&&(u.maxResults=l);const d=e.bucketOnlyServerUrl(),p=Sf(d,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,b=new o0(p,g,_D(s,e.bucket),y);return b.urlParams=u,b.errorHandler=c0(e),b}function jD(s,e,t){const i=e.fullServerUrl(),l=Sf(i,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new o0(l,u,kD(s,t),d);return p.errorHandler=ED(e),p}function SD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function CD(s,e,t){const i=Object.assign({},t);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=SD(null,e)),i}function ND(s,e,t,i,l){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let K="";for(let ue=0;ue<2;ue++)K=K+Math.random().toString().slice(2);return K}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=CD(e,i,l),b=vD(y,t),k="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,E=`\r
--`+g+"--",O=Ha.getBlob(k,i,E);if(O===null)throw B6();const W={name:y.fullPath},F=Sf(u,s.host,s._protocol),B="POST",$=s.maxUploadRetryTime,H=new o0(F,B,xD(s,t),$);return H.urlParams=W,H.headers=d,H.body=O.uploadData(),H.errorHandler=c0(e),H}class AD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Do.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Do.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Do.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,l,u){if(this.sent_)throw Kc("cannot .send() more than once");if(so(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Kc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Kc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Kc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Kc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class RD extends AD{initXhr(){this.xhr_.responseType="text"}}function u0(){return new RD}class zo{constructor(e,t){this._service=e,t instanceof sr?this._location=t:this._location=sr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new zo(e,t)}get root(){const e=new sr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hE(this._location.path)}get storage(){return this._service}get parent(){const e=dD(this._location.path);if(e===null)return null;const t=new sr(this._location.bucket,e);return new zo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw q6(e)}}function ID(s,e,t){s._throwIfRoot("uploadBytes");const i=ND(s.storage,s._location,fE(),new Ha(e,!0),t);return s.storage.makeRequestWithTokens(i,u0).then(l=>({metadata:l,ref:s}))}function MD(s){const e={prefixes:[],items:[]};return pE(s,e).then(()=>e)}async function pE(s,e,t){const l=await DD(s,{pageToken:t});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await pE(s,e,l.nextPageToken)}function DD(s,e){e!=null&&typeof e.maxResults=="number"&&Fg("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=TD(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(i,u0)}function LD(s){s._throwIfRoot("getDownloadURL");const e=jD(s.storage,s._location,fE());return s.storage.makeRequestWithTokens(e,u0).then(t=>{if(t===null)throw z6();return t})}function OD(s,e){const t=hD(s._location.path,e),i=new sr(s._location.bucket,t);return new zo(s.storage,i)}function PD(s){return/^[A-Za-z]+:\/\//.test(s)}function VD(s,e){return new zo(s,e)}function gE(s,e){if(s instanceof d0){const t=s;if(t._bucket==null)throw U6();const i=new zo(t,t._bucket);return e!=null?gE(i,e):i}else return e!==void 0?OD(s,e):s}function UD(s,e){if(e&&PD(e)){if(s instanceof d0)return VD(s,e);throw zg("To use ref(service, url), the first argument must be a Storage instance.")}else return gE(s,e)}function Vw(s,e){const t=e?.[aE];return t==null?null:sr.makeFromBucketSpec(t,s)}function BD(s,e,t,i={}){s.host=`${e}:${t}`;const l=so(e);l&&(ny(`https://${s.host}/b`),sy("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:Px(u,s.app.options.projectId))}class d0{constructor(e,t,i,l,u,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=iE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=C6,this._maxUploadRetryTime=N6,this._requests=new Set,l!=null?this._bucket=sr.makeFromBucketSpec(l,this._host):this._bucket=Vw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sr.makeFromBucketSpec(this._url,e):this._bucket=Vw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Fg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Fg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zo(this,e)}_makeRequest(e,t,i,l,u=!0){if(this._deleted)return new H6(oE());{const d=tD(e,this._appId,i,l,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,l).getPromise()}}const Uw="@firebase/storage",Bw="0.14.0";const yE="storage";function Ah(s,e,t){return s=vn(s),ID(s,e,t)}function zw(s){return s=vn(s),MD(s)}function Lo(s){return s=vn(s),LD(s)}function $a(s,e){return s=vn(s),UD(s,e)}function zD(s=Nu(),e){s=vn(s);const i=Wo(s,yE).getImmediate({identifier:e}),l=Dx("storage");return l&&FD(i,...l),i}function FD(s,e,t,i={}){BD(s,e,t,i)}function qD(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new d0(t,i,l,e,$o)}function HD(){li(new Xr(yE,qD,"PUBLIC").setMultipleInstances(!0)),gr(Uw,Bw,""),gr(Uw,Bw,"esm2020")}HD();const vE={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},h0=ay(vE),jo=E_(h0),ye=f6(h0),Ga=zD(h0),WD=ay(vE,"secondary"),MO=E_(WD),$D="EYdciKDOi3UYBLk1u8hHams5tmO2",bE=w.createContext();function Rr(){return w.useContext(bE)}function GD({children:s}){const[e,t]=w.useState(null),[i,l]=w.useState(!1),[u,d]=w.useState(!1),[p,g]=w.useState(null),[y,b]=w.useState(!0);w.useEffect(()=>{let H=null;const K=QA(jo,ue=>{if(t(ue),H&&(H(),H=null),ue)if(ue.uid===$D)l(!0),d(!1),g(null),b(!1);else{l(!1);const Ee=rn(mt(ye,"clients"),St("uid","==",ue.uid)),we=async()=>{const C=localStorage.getItem("mcf_clientId");if(C)try{const T=await Ks(Ke(ye,"clients",C));T.exists()&&(d(!0),g({id:T.id,...T.data()}))}catch(T){console.error("Direct client read failed:",T)}};H=sE(Ee,async C=>{if(C.empty)await we();else{const T=C.docs[0];d(!0),g({id:T.id,...T.data()});try{localStorage.setItem("mcf_clientId",T.id)}catch{}}b(!1)},async C=>{console.error("Error listening to client data:",C),await we(),b(!1)})}else l(!1),d(!1),g(null),b(!1)});return()=>{K(),H&&H()}},[]);const $={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:H=>{g(K=>K?{...K,...H}:H)},resolveClient:async()=>{if(p)return p;const H=localStorage.getItem("mcf_clientId");if(H)try{const K=await Ks(Ke(ye,"clients",H));if(K.exists()){const ue={id:K.id,...K.data()};return d(!0),g(ue),ue}}catch(K){console.error("resolveClient direct read failed:",K)}if(e){const K=rn(mt(ye,"clients"),St("uid","==",e.uid)),ue=await Zt(K);if(!ue.empty){const Ee={id:ue.docs[0].id,...ue.docs[0].data()};return d(!0),g(Ee),Ee}}return null},login:async(H,K,ue=!0)=>(await E2(jo,ue?kg:fy),await GA(jo,H,K)),signup:async(H,K,ue)=>{await E2(jo,kg);const Ee=await $A(jo,K.trim().toLowerCase(),ue),we=Ee.user,C=Ke(mt(ye,"clients")),T={uid:we.uid,name:H.trim(),email:K.trim().toLowerCase(),clientType:"core_buddy",coreBuddyAccess:!0,status:"active",tier:"free",subscriptionStatus:null,signupSource:"self_signup",createdAt:Vt.now()};await Cs(C,T),d(!0),g({id:C.id,...T});try{localStorage.setItem("mcf_clientId",C.id)}catch{}return Ee},logout:()=>{try{localStorage.removeItem("mcf_clientId")}catch{}return XA(jo)},resetPassword:H=>WA(jo,H),loading:y};return a.jsx(bE.Provider,{value:$,children:s})}const wE=w.createContext();function Mi(){return w.useContext(wE)}function KD({children:s}){const[e,t]=w.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=w.useState(()=>localStorage.getItem("accent")||"red");w.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),w.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),t(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(wE.Provider,{value:p,children:s})}const xE=w.createContext();function ic(){return w.useContext(xE)}const YD=["nutrition","buddies"],QD=[5,10],XD=2,JD=1;function ZD({children:s}){const{clientData:e,loading:t}=Rr(),i=w.useMemo(()=>{const l=e?.tier||"free",u=e?.subscriptionStatus||null,d=e&&e.signupSource!=="self_signup",p=l==="premium"||!!d;function g(y){return p?!0:!YD.includes(y)}return{tier:l,subscriptionStatus:u,isPremium:p,canAccess:g,loading:t,FREE_RANDOMISER_DURATIONS:QD,FREE_RANDOMISER_WEEKLY_LIMIT:XD,FREE_HABIT_LIMIT:JD}},[e?.tier,e?.subscriptionStatus,e?.signupSource,t]);return a.jsx(xE.Provider,{value:i,children:s})}function e3(s){if(s?.signupSource==="self_signup"&&!s?.onboardingComplete)return"/onboarding";const e=s?.clientType;return e==="core_buddy"?"/client/core-buddy":e==="circuit_vip"||e==="circuit_dropin"?"/client/circuit":"/client"}function t3({className:s=""}){const{isDark:e,toggleTheme:t}=Mi();return a.jsx("button",{className:s||"theme-toggle",onClick:t,"aria-label":e?"Switch to light mode":"Switch to dark mode",children:e?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})})}function n3(){const[s,e]=w.useState(""),[t,i]=w.useState(""),[l,u]=w.useState(!0),[d,p]=w.useState(""),[g,y]=w.useState(!1),[b,k]=w.useState(!1),[E,O]=w.useState(!1),{login:W,resetPassword:F,currentUser:B,isAdmin:$,isClient:H,clientData:K,loading:ue}=Rr(),Ee=Xs();if(w.useEffect(()=>{if(!ue&&B){if(!B.emailVerified&&K?.signupSource==="self_signup"){Ee("/signup");return}$?Ee("/dashboard"):H?Ee(e3(K)):(y(!1),p("No account found. Please sign up or contact your trainer."))}},[ue,B,$,H,K,Ee]),ue||B)return a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"var(--bg-body)"},children:a.jsx("div",{style:{width:36,height:36,border:"3px solid var(--color-primary-light)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"app-spin .7s linear infinite"}})});const we=async T=>{T.preventDefault(),p(""),y(!0);try{await W(s,t,l)}catch(R){p(R.message||"Failed to log in"),y(!1)}},C=async T=>{if(T.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await F(s.trim()),O(!0)}catch(R){R.code==="auth/user-not-found"?p("No account found with this email"):p(R.message||"Failed to send reset email")}y(!1)};return a.jsxs("div",{className:"login-container",children:[a.jsx(t3,{className:"login-theme-toggle"}),a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:a.jsx("strong",{children:b?"Reset Password":"Sign in as 1-2-1 or a Core Buddy"})})]}),d&&a.jsx("div",{className:"error-message",children:d}),E?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{k(!1),O(!1),p("")},children:"Back to Log In"})]}):b?a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:T=>e(T.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:we,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:T=>e(T.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:t,onChange:T=>i(T.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:T=>u(T.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!0),p("")},children:"Forgot password?"}),a.jsx("button",{type:"button",className:"login-btn login-btn-outline",onClick:()=>Ee("/signup"),children:"Don't have an account? Create one free"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})]})}function hh({feature:s,children:e}){const{canAccess:t,loading:i}=ic();return i||t(s)?e:a.jsx(Ex,{to:"/upgrade",replace:!0})}function Jr({active:s}){const e=Xs(),{clientData:t}=Rr(),{isPremium:i}=ic(),l=t?.clientType==="block"&&t?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{children:"Profile"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:a.jsx("path",{d:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"})}),a.jsx("span",{children:"Workout"})]}),i&&a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),i&&a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),a.jsxs("button",{className:`block-nav-tab${s==="badges"?" active":""}`,onClick:()=>e("/client/core-buddy/badges"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M9 14l-4 8h14l-4-8"})]}),a.jsx("span",{children:"Badges"})]}),l&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Xo({children:s,onRefresh:e}){const[t,i]=w.useState(0),[l,u]=w.useState(!1),d=w.useRef(null),p=w.useRef(0),g=w.useRef(!1),y=w.useCallback(E=>{window.scrollY<=0&&(p.current=E.touches[0].clientY,g.current=!0)},[]),b=w.useCallback(E=>{if(!g.current||l)return;const O=E.touches[0].clientY-p.current;O>20&&window.scrollY<=0&&(E.preventDefault(),i(Math.min((O-20)*.35,80)))},[l]),k=w.useCallback(async()=>{t>55&&!l&&(u(!0),e?await e():window.location.reload(),u(!1)),i(0),g.current=!1},[t,l,e]);return a.jsxs("div",{ref:d,onTouchStart:y,onTouchMove:b,onTouchEnd:k,children:[a.jsxs("div",{className:`pull-refresh-indicator ${t>0?"visible":""} ${l?"refreshing":""}`,style:{height:t},children:[a.jsx("div",{className:`refresh-spinner ${l?"spinning":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),a.jsx("span",{className:"refresh-text",children:l?"Refreshing...":"Pull to refresh"})]}),s]})}function Fu(s,e,t,i,l){const u=[];for(let d=0;d<s;d++){const p=(d*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:t+i*Math.sin(p),x2:e+l*Math.cos(p),y2:t+l*Math.sin(p),thick:d%5===0})}return u}const _E=Fu(60,100,100,85,96),s3=Fu(60,100,100,78,94),r3=Fu(60,100,100,82,94);Fu(60,50,50,38,46);const DO=Fu(60,40,40,30,37);function i3({steps:s,onFinish:e,active:t}){const[i,l]=w.useState(0),[u,d]=w.useState(null),[p,g]=w.useState("below"),[y,b]=w.useState(!1),k=w.useRef(null),E=w.useRef(t);E.current=t,w.useEffect(()=>{t||l(0)},[t]),w.useEffect(()=>{if(!t)return;const Ee=we=>we.preventDefault();return document.addEventListener("touchmove",Ee,{passive:!1}),document.addEventListener("wheel",Ee,{passive:!1}),document.body.style.overflow="hidden",()=>{document.removeEventListener("touchmove",Ee),document.removeEventListener("wheel",Ee),document.body.style.overflow=""}},[t]);const O=w.useMemo(()=>t?s.filter(Ee=>document.querySelector(Ee.selector)):[],[t]),W=O[i],F=i===O.length-1,B=W?.selector,$=w.useCallback(()=>{if(!B)return;const Ee=document.querySelector(B);if(!Ee){d(null);return}const we=Ee.getBoundingClientRect(),C=8;d({top:we.top-C,left:we.left-C,width:we.width+C*2,height:we.height+C*2});const T=window.innerHeight-we.bottom;g(T<260?"above":"below")},[B]);if(w.useEffect(()=>{if(!t||!B)return;b(!0);const Ee=document.querySelector(B);if(Ee){document.body.style.overflow="",Ee.scrollIntoView({behavior:"smooth",block:"center"});let we=null,C=0,T=0;const R=60,P=()=>{T++;const A=Ee.getBoundingClientRect(),Ue=Math.round(A.top);if(we!==null&&Ue===we?C++:C=0,we=Ue,C>=3||T>=R){E.current&&(document.body.style.overflow="hidden"),$(),b(!1);return}M=requestAnimationFrame(P)};let M;const D=setTimeout(()=>{M=requestAnimationFrame(P)},120);return()=>{clearTimeout(D),M&&cancelAnimationFrame(M),E.current&&(document.body.style.overflow="hidden")}}},[t,i,B,$]),w.useEffect(()=>{if(!t)return;const Ee=()=>{k.current&&cancelAnimationFrame(k.current),k.current=requestAnimationFrame($)};return window.addEventListener("scroll",Ee,!0),window.addEventListener("resize",Ee),()=>{window.removeEventListener("scroll",Ee,!0),window.removeEventListener("resize",Ee),k.current&&cancelAnimationFrame(k.current)}},[t,$]),!t||!W||O.length===0)return null;const H=()=>{F?e():l(i+1)},K=()=>{i>0&&l(i-1)},ue=()=>e();return a.jsxs("div",{className:"st-overlay",onClick:Ee=>{Ee.stopPropagation()},children:[a.jsx("div",{className:"st-backdrop",onClick:H}),u&&a.jsx("div",{className:`st-spotlight${y?" st-transitioning":""}`,style:{top:u.top,left:u.left,width:u.width,height:u.height}}),u&&a.jsxs("div",{className:`st-tooltip st-tooltip-${p}${y?" st-transitioning":""}`,style:{top:p==="below"?Math.min(Math.max(u.top+u.height+16,16),window.innerHeight-200):void 0,bottom:p==="above"?Math.min(Math.max(window.innerHeight-u.top+16,16),window.innerHeight-60):void 0,left:Math.max(16,Math.min(u.left,window.innerWidth-320))},children:[a.jsx("div",{className:"st-dots",children:O.map((Ee,we)=>a.jsx("span",{className:`st-dot${we===i?" active":""}${we<i?" done":""}`},we))}),a.jsx("h3",{className:"st-title",children:W.title}),a.jsx("p",{className:"st-body",children:W.body}),a.jsxs("div",{className:"st-actions",children:[i>0&&a.jsx("button",{className:"st-btn st-btn-back",onClick:K,children:"Back"}),a.jsx("button",{className:"st-btn st-btn-next",onClick:H,children:W.cta||(F?"Let's Go!":"Next")})]}),a.jsx("button",{className:"st-skip",onClick:ue,children:"Skip tour"})]})]})}const a3="/login/assets/first_workout-B8SFkzJX.PNG",o3="/login/assets/workouts_10-Z5R3u0xH.PNG",l3="/login/assets/workouts_25-CzxSlcAj.PNG",c3="/login/assets/workouts_50-BpzWup3V.PNG",u3="/login/assets/workouts_100-D7_r6tn1.PNG",d3="/login/assets/streak_2-CsRr-XA9.PNG",h3="/login/assets/streak_4-BHO09tbw.PNG",f3="/login/assets/streak_8-DX2UWMko.PNG",m3="/login/assets/first_pb-aVf_CNWy.PNG",p3="/login/assets/pbs_5-Cippawgg.PNG",g3="/login/assets/pbs_10-CZgGh9Kv.PNG",y3="/login/assets/pbs_100-C67b1wfS.PNG",v3="/login/assets/nutrition_7-CHVV11fj.PNG",b3="/login/assets/leaderboard_join-BLoId4Hz.PNG",w3="/login/assets/habits_7-Dvki70KO.PNG",x3="/login/assets/starter_streak-CCltAfrC.PNG",_3="/login/assets/consistency_king-Cho2jxBt.PNG",k3="/login/assets/thirty_in_thirty-B0BVHafW.PNG",E3="/login/assets/minute_master-hA2RLkIL.PNG",T3="/login/assets/habit_machine--nFXaIUW.PNG",j3="/login/assets/iron_will-Dh2dTaie.PNG",zl=[{id:"first_workout",img:a3,name:"First Rep",desc:"Complete your first workout",category:"workouts",threshold:1},{id:"workouts_10",img:o3,name:"On Fire",desc:"Complete 10 workouts",category:"workouts",threshold:10},{id:"workouts_25",img:l3,name:"Dedicated",desc:"Complete 25 workouts",category:"workouts",threshold:25},{id:"workouts_50",img:c3,name:"Unstoppable",desc:"Complete 50 workouts",category:"workouts",threshold:50},{id:"workouts_100",img:u3,name:"Century",desc:"Complete 100 workouts",category:"workouts",threshold:100},{id:"streak_2",img:d3,name:"2 Week Streak",desc:"Work out for 2 weeks in a row",category:"streaks",threshold:2},{id:"streak_4",img:h3,name:"Month Strong",desc:"Work out for 4 weeks in a row",category:"streaks",threshold:4},{id:"streak_8",img:f3,name:"Iron Will",desc:"Work out for 8 weeks in a row",category:"streaks",threshold:8},{id:"first_pb",img:m3,name:"First PB",desc:"Set your first personal best",category:"pbs",threshold:1},{id:"pbs_5",img:p3,name:"PB Hunter",desc:"Set 5 personal bests",category:"pbs",threshold:5},{id:"pbs_10",img:g3,name:"PB Machine",desc:"Set 10 personal bests",category:"pbs",threshold:10},{id:"pbs_100",img:y3,name:"PB Legend",desc:"Set 100 personal bests",category:"pbs",threshold:100},{id:"nutrition_7",img:v3,name:"Macro Master",desc:"Hit your macro targets 7 days in a row",category:"nutrition",threshold:7},{id:"leaderboard_join",img:b3,name:"Competitor",desc:"Join the leaderboard",category:"leaderboard",threshold:1},{id:"habits_7",img:w3,name:"Habit Streak",desc:"Complete your daily habits 7 days in a row",category:"habits",threshold:7},{id:"starter_streak",img:x3,name:"Starter Streak",desc:"Complete 5 workouts in 7 days",category:"challenges",threshold:1},{id:"consistency_king",img:_3,name:"Consistency King",desc:"Complete 12 workouts in 30 days",category:"challenges",threshold:1},{id:"thirty_in_thirty",img:k3,name:"30 in 30",desc:"Complete 30 workouts in 30 days",category:"challenges",threshold:1},{id:"minute_master",img:E3,name:"Minute Master",desc:"Train for 300 total minutes in 30 days",category:"challenges",threshold:1},{id:"habit_machine",img:T3,name:"Habit Machine",desc:"Hit all daily habits for 7 days straight",category:"challenges",threshold:1},{id:"iron_will",img:j3,name:"Iron Will",desc:"Work out every day for 14 days straight",category:"challenges",threshold:1}],Fw=3,S3=5;function Kp(s){return s.toISOString().split("T")[0]}const Yp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}];function Qp(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Yc(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function C3(s,e=800){return new Promise(t=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,d=i.height;u>d?u>e&&(d=Math.round(d*e/u),u=e):d>e&&(u=Math.round(u*e/d),d=e),l.width=u,l.height=d,l.getContext("2d").drawImage(i,0,0,u,d),l.toBlob(p=>t(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}function N3(){const{currentUser:s,isClient:e,clientData:t,logout:i,updateClientData:l,loading:u}=Rr(),{isDark:d,toggleTheme:p}=Mi(),{isPremium:g,FREE_HABIT_LIMIT:y}=ic(),b=Xs(),k=g?S3:y,[E,O]=w.useState({hours:0,minutes:0,seconds:0}),[W,F]=w.useState(0),[B,$]=w.useState(0),[H,K]=w.useState(0),[ue,Ee]=w.useState(!1),[we,C]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[T,R]=w.useState(null),[P,M]=w.useState(0),[D,A]=w.useState(0),[Ue,Xe]=w.useState(Fw),[Z,je]=w.useState(!1),[Me,Se]=w.useState(!1),[Y,L]=w.useState([]),[re,ve]=w.useState(null),[_e,be]=w.useState(!1),ke=w.useRef(null),[Be,st]=w.useState(0),[Pe,qt]=w.useState(0),[un,Un]=w.useState(null),Ot=w.useCallback((S,Q="info")=>{Un({message:S,type:Q}),setTimeout(()=>Un(null),4e3)},[]),[it,vt]=w.useState([]),[ut,Bn]=w.useState(!1),[de,Mt]=w.useState(""),[bt,Bt]=w.useState(null),[et,It]=w.useState(null),[wt,an]=w.useState(!1),[Ns,rs]=w.useState(new Set),[en,se]=w.useState(new Set),[Ne,pt]=w.useState({}),[xt,at]=w.useState({}),[$e,rt]=w.useState({}),[qe,on]=w.useState({}),[dn,Ln]=w.useState({}),[zn,Xn]=w.useState({}),Xt=w.useRef(null),Fn=w.useRef(null),An=w.useRef({}),[hn,yr]=w.useState([]),[oe,Re]=w.useState(!1),Ye=w.useRef(null),[gt,ct]=w.useState([]),[_n,Rn]=w.useState(""),[gn,kn]=w.useState(!1),[As,is]=w.useState(null),[hs,tn]=w.useState([]),[In,Rs]=w.useState(null),[Ir,fi]=w.useState(!1),Mr=w.useRef(!1),Dr=(()=>{const S=[{selector:".cb-ring-container",title:"Your 24-Hour Countdown",body:"Every day resets. This ring tracks the time you have left  tap your photo to personalise your profile.",cta:"Next"},{selector:".cb-stats-row",title:"Progress at a Glance",body:"Your workout streak, sessions this week, and daily habits  all in one row. These fill up as you go."},{selector:".cb-nudge-card",title:"Smart Suggestions",body:"We'll highlight what needs your attention  your next session, unfinished habits, or a meal to log."},{selector:".cb-card-workouts-hero",title:"Workout",body:"Randomiser workouts  pick your focus, level and time. Save and replay your favourites.",cta:"Next"}];return g&&S.push({selector:".cb-card-nutrition",title:"Nutrition Tracking",body:"Set your macro targets, scan barcodes, and log meals to hit your daily goals."},{selector:".cb-card-consistency",title:"Daily Habits",body:"5 simple habits each day  train, hit protein, 10k steps, sleep, and hydrate. Build your streak."},{selector:".cb-card-buddies",title:"Buddies & Social",body:"Connect with other members, share your journey, and keep each other accountable."},{selector:".cb-journey-section",title:"Share Your Journey",body:"Post photos, updates, and milestones  your fitness journey in one place. Like and comment on each other's posts."}),S.push({selector:".block-bottom-nav",title:"You're All Set!",body:"Use the nav bar to jump between your profile, workouts, nutrition, and buddies. Time to get after it.",cta:"Let's Go!"}),S})();w.useEffect(()=>{!u&&!s&&b("/")},[u,s,b]),w.useEffect(()=>{!u&&t&&t.signupSource==="self_signup"&&!t.onboardingComplete&&b("/onboarding")},[u,t,b]),w.useEffect(()=>{let S=t?.tourComplete||Mr.current;if(!S&&t?.id)try{S=!!localStorage.getItem(`tourDone_${t.id}`)}catch{}if(ue&&t&&!S){const Q=setTimeout(()=>fi(!0),600);return()=>clearTimeout(Q)}},[ue,t]),w.useEffect(()=>{if(!(!ue||!t?.id)){try{if(localStorage.getItem(`targetHint_${t.id}`))return}catch{}if(!t?.weeklyWorkoutTarget){const S=setTimeout(()=>Se(!0),1500);return()=>clearTimeout(S)}}},[ue,t]),w.useEffect(()=>{if(t)try{const S=sessionStorage.getItem(`cbDash_${t.id}`);if(S){const Q=JSON.parse(S);$(Q.totalWorkouts??0),K(Q.habitWeekPct??0),C(Q.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),R(Q.nutritionTargetData??null),M(Q.todayHabitsCount??0),A(Q.weeklyWorkouts??0),Xe(Q.weeklyWorkoutTarget??Fw),L(Q.leaderboardTop3??[]),st(Q.streakWeeks??0),Ee(!0)}}catch{}},[t]),w.useEffect(()=>{t?.photoURL&&ve(t.photoURL),t?.weeklyWorkoutTarget&&Xe(t.weeklyWorkoutTarget)},[t]),w.useEffect(()=>{if(!t)return;const S=rn(mt(ye,"notifications"),St("toId","==",t.id)),Q=sE(S,Ce=>{const Ie=Ce.docs.map(ze=>({id:ze.id,...ze.data()}));Ie.sort((ze,dt)=>{const tt=ze.createdAt?.toMillis?.()||0;return(dt.createdAt?.toMillis?.()||0)-tt}),yr(Ie.slice(0,50))},Ce=>{console.error("Notification listener error:",Ce),Ce.code==="permission-denied"&&console.warn("Firestore rules may be missing for the notifications collection. Please update your Firestore rules in the Firebase Console.")});return()=>Q()},[t]),w.useEffect(()=>{const S=Q=>{Ye.current&&!Ye.current.contains(Q.target)&&Re(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),w.useEffect(()=>{if(!t)return;const S=t.id;(async()=>{try{const[Q,Ce,Ie]=await Promise.all([Zt(rn(mt(ye,"buddies"),St("user1","==",S))),Zt(rn(mt(ye,"buddies"),St("user2","==",S))),Zt(mt(ye,"clients"))]),ze=new Set;[...Q.docs,...Ce.docs].forEach(tt=>{const jt=tt.data();ze.add(jt.user1===S?jt.user2:jt.user1)});const dt={};Ie.docs.forEach(tt=>{dt[tt.id]=tt.data()}),ct(Array.from(ze).filter(tt=>dt[tt]).map(tt=>({id:tt,name:dt[tt].name,photoURL:dt[tt].photoURL||null})))}catch(Q){console.error("Error loading buddies for mentions:",Q)}})()},[t]);const qn=hn.filter(S=>!S.read).length,Js=async()=>{const S=hn.filter(Ce=>!Ce.read);if(!S.length)return;const Q=Dw(ye);S.forEach(Ce=>Q.update(Ke(ye,"notifications",Ce.id),{read:!0})),await Q.commit()},_s=async()=>{if(!hn.length)return;const S=Dw(ye);hn.forEach(Q=>S.delete(Ke(ye,"notifications",Q.id))),await S.commit()},Cn=async(S,Q,Ce={})=>{if(!(!t||S===t.id))try{await Nr(mt(ye,"notifications"),{toId:S,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:Q,read:!1,createdAt:Vs(),...Ce})}catch(Ie){console.error("Notification create error:",Ie),Ie.code==="permission-denied"&&Ot("Notifications blocked  check Firestore rules","error")}},On=(S,Q)=>{const Ce=Q==="compose"?Xt.current?.selectionStart:null,ze=(Ce!=null?S.slice(0,Ce):S).match(/@(\w*)$/);if(ze){kn(!0),is(Q),Rn(ze[1].toLowerCase());const dt=gt.filter(tt=>tt.name&&tt.name.toLowerCase().includes(ze[1].toLowerCase())).slice(0,5);tn(dt)}else kn(!1),tn([])},as=(S,Q)=>{if(Q==="compose"){const Ce=Xt.current,Ie=de,ze=Ce?.selectionStart??Ie.length,dt=Ie.slice(0,ze),tt=Ie.slice(ze),jt=dt.replace(/@\w*$/,`@${S.name} `);Mt(jt+tt),setTimeout(()=>{Ce?.focus(),Ce.selectionStart=Ce.selectionEnd=jt.length},0)}else{const Ie=(xt[Q]||"").replace(/@\w*$/,`@${S.name} `);at(ze=>({...ze,[Q]:Ie}))}kn(!1),tn([])},Ht=S=>S&&S.split(/(@\w[\w\s]*?\s)/g).map((Ce,Ie)=>Ce.startsWith("@")&&gt.some(ze=>Ce.trim()===`@${ze.name}`)?a.jsx("span",{className:"mention-highlight",children:Ce.trim()},Ie):Ce),Zr=async S=>{const Q=S.target.files?.[0];if(!(!Q||!t)){if(!Q.type.startsWith("image/")){Ot("Please select an image file","error");return}if(Q.size>5*1024*1024){Ot("Image must be under 5MB","error");return}be(!0);try{const Ce=await new Promise(dt=>{const tt=new Image;tt.onload=()=>{const jt=document.createElement("canvas"),ht=400;let V=tt.width,J=tt.height;V>J?(J=J/V*ht,V=ht):(V=V/J*ht,J=ht),jt.width=V,jt.height=J,jt.getContext("2d").drawImage(tt,0,0,V,J),jt.toBlob(te=>dt(te),"image/jpeg",.75)},tt.src=URL.createObjectURL(Q)}),Ie=$a(Ga,`profilePhotos/${t.id}`);await Ah(Ie,Ce);const ze=await Lo(Ie);await bs(Ke(ye,"clients",t.id),{photoURL:ze}),ve(ze),l({photoURL:ze}),Ot("Profile photo updated!","success")}catch(Ce){console.error("Photo upload error:",Ce),Ot("Failed to upload photo","error")}be(!1),ke.current&&(ke.current.value="")}};w.useEffect(()=>{const S=()=>{const Ce=new Date,Ie=new Date(Ce);Ie.setHours(23,59,59,999);const ze=Ie-Ce,dt=Math.floor(ze/(1e3*60*60)),tt=Math.floor(ze%(1e3*60*60)/(1e3*60)),jt=Math.floor(ze%(1e3*60)/1e3);O({hours:dt,minutes:tt,seconds:jt}),F(60-jt)};S();const Q=setInterval(S,1e3);return()=>clearInterval(Q)},[]),w.useEffect(()=>{const S=setInterval(()=>{qt(Q=>(Q+1)%Yp.length)},8e3);return()=>clearInterval(S)},[]),w.useEffect(()=>{if(!s||!t)return;(async()=>{let Q=null,Ce=null;try{const Ie=Kp(new Date),ze=mt(ye,"workoutLogs"),dt=rn(ze,St("clientId","==",t.id));Q=await Zt(dt),$(Q.docs.length);const tt=new Date,jt=tt.getDay(),ht=jt===0?6:jt-1,V=new Date(tt);V.setDate(tt.getDate()-ht),V.setHours(0,0,0,0);const J=V.getTime(),te=Q.docs.filter(Ut=>{const Je=Ut.data().completedAt;return Je?(Je.toDate?Je.toDate().getTime():new Date(Je).getTime())>=J:!1}).length;A(te);const pe=mt(ye,"habitLogs"),Ae=rn(pe,St("clientId","==",t.id),St("date","==",Ie)),Ve=await Zt(Ae);let He=0;if(!Ve.empty){const Ut=Ve.docs[0].data().habits||{};He=Math.min(Object.values(Ut).filter(Boolean).length,k)}K(Math.round(He/k*100)),M(He);const yt=await Ks(Ke(ye,"nutritionTargets",t.id));yt.exists()&&(R(yt.data()),Ce=yt.data());const Et=await Ks(Ke(ye,"nutritionLogs",`${t.id}_${Ie}`));if(Et.exists()){const Je=(Et.data().entries||[]).reduce((nn,zs)=>({protein:nn.protein+(zs.protein||0),carbs:nn.carbs+(zs.carbs||0),fats:nn.fats+(zs.fats||0),calories:nn.calories+(zs.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});C(Je)}}catch(Ie){console.error("Error loading dashboard stats:",Ie)}try{const Ie=mt(ye,"clients"),ze=rn(Ie,St("leaderboardOptIn","==",!0)),tt=(await Zt(ze)).docs.map(jt=>({id:jt.id,name:jt.data().name,photoURL:jt.data().photoURL||null}));L(tt.slice(0,3))}catch(Ie){console.error("Leaderboard preview error:",Ie)}try{let Ie=0;if(Q){const ze=Q.docs.map(dt=>dt.data().date).filter(Boolean).sort().reverse();if(ze.length>0){const dt=new Date;let tt=new Date(dt);e:for(let jt=0;jt<52;jt++){const ht=new Date(tt),V=ht.getDay(),J=V===0?6:V-1;ht.setDate(ht.getDate()-J),ht.setHours(0,0,0,0);const te=new Date(ht);te.setDate(te.getDate()+7);const pe=Kp(ht),Ae=Kp(te);if(ze.some(He=>He>=pe&&He<Ae))Ie++;else{if(jt>0)break e;break}tt.setDate(tt.getDate()-7)}}}st(Ie)}catch(Ie){console.error("Streak computation error:",Ie)}Ee(!0)})()},[s,t,k]),w.useEffect(()=>{if(!(!ue||!t))try{sessionStorage.setItem(`cbDash_${t.id}`,JSON.stringify({totalWorkouts:B,habitWeekPct:H,nutritionTotals:we,nutritionTargetData:T,todayHabitsCount:P,weeklyWorkouts:D,weeklyWorkoutTarget:Ue,leaderboardTop3:Y,streakWeeks:Be}))}catch{}},[ue,B,H,we,T,P,D,Ue,Y,Be,t]);const Lr=w.useCallback(async()=>{if(Mr.current=!0,fi(!1),l({tourComplete:!0}),t?.id){try{localStorage.setItem(`tourDone_${t.id}`,"1")}catch{}try{await bs(Ke(ye,"clients",t.id),{tourComplete:!0})}catch(S){console.error("Failed to save tour completion:",S)}}},[t,l]),ks=w.useCallback(async S=>{if(Xe(S),je(!1),Se(!1),t?.id){try{localStorage.setItem(`targetHint_${t.id}`,"1")}catch{}try{await bs(Ke(ye,"clients",t.id),{weeklyWorkoutTarget:S})}catch(Q){console.error("Failed to save weekly target:",Q)}}},[t]),bn=S=>{const Q=S.currentTarget,Ce=Q.querySelector(".ripple");Ce&&Ce.remove();const Ie=Q.getBoundingClientRect(),ze=Math.max(Ie.width,Ie.height),dt=S.clientX-Ie.left-ze/2,tt=S.clientY-Ie.top-ze/2,jt=document.createElement("span");jt.className="ripple",jt.style.cssText=`width:${ze}px;height:${ze}px;left:${dt}px;top:${tt}px;`,Q.appendChild(jt),setTimeout(()=>jt.remove(),600)},or=t?.name?.split(" ")[0]||"there",mi=Math.min(Math.round(D/Ue*100),100),I=Be>0?Math.min(Math.round(Be/12*100),100):0,z=[{label:"Wk Streak",value:`${Be}`,pct:I,color:"var(--color-primary)",size:"normal"},{label:"Workouts",value:`${D}/${Ue}`,pct:mi,color:"var(--color-primary)",size:"large",editable:!0},{label:"Habits Today",value:`${H}%`,pct:H,color:"var(--color-primary)",size:"normal"}],ae=S=>!T||!T[S]?0:Math.min(Math.round(we[S]/T[S]*100),100),le=(()=>{const S=new Date().getHours();return ue&&P>=k&&we.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:S>=5&&S<12?{main:"Rise and grind,",sub:"let's get after it!"}:S>=12&&S<17?{main:"Oye",sub:"crack on and make it count!"}:S>=17&&S<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),Le=ue?D===0?{label:"WORKOUT",message:"No workouts this week yet",cta:"Start One",action:()=>b("/client/core-buddy/workouts"),pct:0,ringLabel:"0"}:P<k?{label:"DAILY HABITS",message:`${P}/${k} completed`,cta:"Open Habits",action:()=>b("/client/core-buddy/consistency"),pct:H,ringLabel:`${P}/${k}`}:g&&we.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>b("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:null,Oe=w.useCallback(async()=>{if(t){Bn(!0);try{const S=await Zt(rn(mt(ye,"posts"),St("authorId","==",t.id),_u("createdAt","desc"),ku(30)));vt(S.docs.map(Ce=>({id:Ce.id,...Ce.data()})));const Q=await Zt(rn(mt(ye,"postLikes"),St("userId","==",t.id)));rs(new Set(Q.docs.map(Ce=>Ce.data().postId)))}catch(S){console.error("Error loading journey:",S)}finally{Bn(!1)}}},[t]);w.useEffect(()=>{ue&&t&&Oe()},[ue,t,Oe]);const We=S=>{const Q=S.target.files?.[0];if(Q){if(!Q.type.startsWith("image/")){Ot("Please select an image file","error");return}if(Q.size>10*1024*1024){Ot("Image must be under 10MB","error");return}Bt(Q),It(URL.createObjectURL(Q))}},Wt=()=>{Bt(null),et&&URL.revokeObjectURL(et),It(null),Fn.current&&(Fn.current.value="")},Qe=async()=>{if(!(!de.trim()&&!bt||wt||!t)){an(!0);try{let S=null;if(bt){const Ie=await C3(bt),ze=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,dt=$a(Ga,`postImages/${t.id}/${ze}`);await Ah(dt,Ie),S=await Lo(dt)}await Nr(mt(ye,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:de.trim(),type:S?"image":"text",imageURL:S||null,createdAt:Vs(),likeCount:0,commentCount:0});const Ce=de.trim().match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Ce){const Ie=new Set;Ce.forEach(ze=>{const dt=ze.slice(1).trim(),tt=gt.find(jt=>jt.name&&jt.name.toLowerCase()===dt.toLowerCase());tt&&!Ie.has(tt.id)&&(Ie.add(tt.id),Cn(tt.id,"mention",{}))})}Mt(""),Wt(),Xt.current&&(Xt.current.style.height="auto"),await Oe(),Ot("Posted!","success")}catch(S){console.error("Error posting:",S),Ot(S?.message||"Failed to post","error")}finally{an(!1)}}},Kn=async S=>{if(window.confirm("Delete this post?"))try{await Sr(Ke(ye,"posts",S)),vt(Q=>Q.filter(Ce=>Ce.id!==S)),Ot("Post deleted","info")}catch(Q){console.error("Delete error:",Q),Ot("Failed to delete","error")}},os=async S=>{if(!t)return;const Q=t.id,Ce=`${S}_${Q}`,Ie=Ns.has(S),ze=new Set(Ns);Ie?ze.delete(S):ze.add(S),rs(ze),vt(dt=>dt.map(tt=>tt.id===S?{...tt,likeCount:Math.max(0,(tt.likeCount||0)+(Ie?-1:1))}:tt));try{if(Ie)await Sr(Ke(ye,"postLikes",Ce)),await bs(Ke(ye,"posts",S),{likeCount:Ao(-1)});else{await Cs(Ke(ye,"postLikes",Ce),{postId:S,userId:Q,createdAt:Vs()}),await bs(Ke(ye,"posts",S),{likeCount:Ao(1)});const dt=it.find(tt=>tt.id===S);dt&&Cn(dt.authorId,"like",{postId:S})}}catch(dt){console.error("Like error:",dt),Oe()}},Bs=async S=>{try{const Q=await Zt(rn(mt(ye,"postComments"),St("postId","==",S),_u("createdAt","asc"),ku(50)));pt(Ce=>({...Ce,[S]:Q.docs.map(Ie=>({id:Ie.id,...Ie.data()}))}))}catch(Q){console.error("Error loading comments:",Q)}},Yn=S=>{const Q=new Set(en);Q.has(S)?Q.delete(S):(Q.add(S),Ne[S]||Bs(S)),se(Q)},vr=async S=>{const Q=(xt[S]||"").trim(),Ce=dn[S];if(!(!Q&&!Ce||!t)){rt(Ie=>({...Ie,[S]:!0}));try{let Ie=null;if(Ce){const ht=$a(Ga,`comment-images/${Date.now()}_${Ce.name}`);await Ah(ht,Ce),Ie=await Lo(ht)}const ze={postId:S,authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:Q||"",createdAt:Vs()};Ie&&(ze.imageURL=Ie);const dt=qe[S];dt&&(ze.replyToId=dt.id,ze.replyToName=dt.authorName),await Nr(mt(ye,"postComments"),ze),await bs(Ke(ye,"posts",S),{commentCount:Ao(1)});const tt=it.find(ht=>ht.id===S);tt&&Cn(tt.authorId,"comment",{postId:S});const jt=Q.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(jt){const ht=new Set;jt.forEach(V=>{const J=V.slice(1).trim(),te=gt.find(pe=>pe.name&&pe.name.toLowerCase()===J.toLowerCase());te&&!ht.has(te.id)&&(ht.add(te.id),Cn(te.id,"mention",{postId:S}))})}at(ht=>({...ht,[S]:""})),Ln(ht=>({...ht,[S]:null})),Xn(ht=>({...ht,[S]:null})),on(ht=>({...ht,[S]:null})),An.current[S]&&(An.current[S].value=""),vt(ht=>ht.map(V=>V.id===S?{...V,commentCount:(V.commentCount||0)+1}:V)),await Bs(S)}catch(Ie){console.error("Comment error:",Ie),Ot("Failed to comment","error")}finally{rt(Ie=>({...Ie,[S]:!1}))}}},ma=async(S,Q)=>{try{await Sr(Ke(ye,"postComments",Q)),await bs(Ke(ye,"posts",S),{commentCount:Ao(-1)}),pt(Ce=>({...Ce,[S]:(Ce[S]||[]).filter(Ie=>Ie.id!==Q)})),vt(Ce=>Ce.map(Ie=>Ie.id===S?{...Ie,commentCount:Math.max((Ie.commentCount||1)-1,0)}:Ie))}catch(Ce){console.error("Delete comment error:",Ce),Ot("Failed to delete comment","error")}},Di=(S,Q)=>{const Ce=Q.target.files?.[0];if(!Ce)return;if(Ce.size>5*1024*1024){Ot("Image must be under 5MB","error");return}Ln(ze=>({...ze,[S]:Ce}));const Ie=new FileReader;Ie.onload=ze=>Xn(dt=>({...dt,[S]:ze.target.result})),Ie.readAsDataURL(Ce)},Or=S=>{Ln(Q=>({...Q,[S]:null})),Xn(Q=>({...Q,[S]:null})),An.current[S]&&(An.current[S].value="")},pa=S=>{Mt(S.target.value),S.target.style.height="auto",S.target.style.height=Math.min(S.target.scrollHeight,120)+"px",On(S.target.value,"compose")},Pr=(S,Q)=>{at(Ce=>({...Ce,[S]:Q})),On(Q,S)};return a.jsx(Xo,{children:a.jsxs("div",{className:"cb-dashboard","data-theme":d?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-left-group",children:[a.jsxs("div",{className:"header-notif-wrap",ref:Ye,children:[a.jsxs("button",{className:"header-notif-btn",onClick:()=>{Re(!oe),oe||Js()},"aria-label":"Notifications",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),qn>0&&a.jsx("span",{className:"header-notif-badge",children:qn>9?"9+":qn})]}),oe&&a.jsxs("div",{className:"notif-panel",children:[a.jsxs("div",{className:"notif-panel-header",children:[a.jsx("span",{className:"notif-panel-title",children:"Notifications"}),hn.length>0&&a.jsx("button",{className:"notif-clear-btn",onClick:_s,children:"Clear all"})]}),a.jsx("div",{className:"notif-panel-list",children:hn.length===0?a.jsx("div",{className:"notif-empty",children:"No notifications yet"}):hn.map(S=>a.jsxs("div",{className:`notif-item${S.read?"":" unread"}`,onClick:()=>{if(Re(!1),S.type==="buddy_request"||S.type==="buddy_accept")b(g?"/client/core-buddy/buddies":"/upgrade");else if((S.type==="like"||S.type==="comment")&&S.postId){if(!en.has(S.postId)){const Q=new Set(en);Q.add(S.postId),se(Q),Ne[S.postId]||Bs(S.postId)}setTimeout(()=>{const Q=document.getElementById(`post-${S.postId}`);Q&&Q.scrollIntoView({behavior:"smooth",block:"center"})},150)}else S.type==="like"||S.type==="comment"?document.querySelector(".cb-journey-section")?.scrollIntoView({behavior:"smooth"}):S.type==="mention"&&b(`/client/core-buddy/profile/${S.fromId}`)},children:[a.jsx("div",{className:"notif-item-avatar",children:S.fromPhotoURL?a.jsx("img",{src:S.fromPhotoURL,alt:""}):a.jsx("span",{children:(S.fromName||"?")[0]})}),a.jsxs("div",{className:"notif-item-body",children:[a.jsxs("p",{className:"notif-item-text",children:[a.jsx("strong",{children:S.fromName})," ",S.type==="buddy_request"&&"sent you a buddy request",S.type==="buddy_accept"&&"accepted your buddy request",S.type==="like"&&"liked your post",S.type==="comment"&&"commented on your post",S.type==="mention"&&"mentioned you"]}),a.jsx("span",{className:"notif-item-time",children:Qp(S.createdAt)})]})]},S.id))})]})]}),a.jsx("button",{className:"header-icon-btn",onClick:()=>b("/client/core-buddy/settings"),"aria-label":"Settings",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{className:"header-icon-btn",onClick:p,"aria-label":d?"Switch to light mode":"Switch to dark mode",children:d?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),a.jsx("button",{className:"header-icon-btn",onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:_E.map((S,Q)=>{const Ce=Q<W;return a.jsx("line",{x1:S.x1,y1:S.y1,x2:S.x2,y2:S.y2,className:`ring-tick ${Ce?"elapsed":"remaining"}`,strokeWidth:S.thick?"3":"2"},Q)})}),a.jsxs("div",{className:"cb-ring-center",children:[a.jsxs("div",{className:"cb-ring-logo",onClick:()=>ke.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:re||"/Logo.webp",alt:re?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${_e?" uploading":""}`,children:_e?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:ke,type:"file",accept:"image/*",onChange:Zr,style:{display:"none"}})]}),!re&&!_e&&a.jsx("div",{className:"cb-photo-badge",onClick:()=>ke.current?.click(),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(E.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(E.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(E.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Yp[Pe].text," ",a.jsx("strong",{children:Yp[Pe].bold})]},Pe)]}),a.jsx("div",{className:"cb-stats-row",children:z.map(S=>{const Q=(S.size==="large",38),Ce=2*Math.PI*Q,Ie=Ce-S.pct/100*Ce,ze=S.editable;return a.jsxs("div",{className:`cb-stat-item${S.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:`cb-stat-ring${ze?" cb-stat-tappable":""}${ze&&Me?" cb-stat-hint":""}`,onClick:ze?()=>{je(!0),Se(!1)}:void 0,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:Q}),a.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:Q,style:{stroke:S.color},strokeDasharray:Ce,strokeDashoffset:Ie})]}),a.jsx("span",{className:"cb-stat-value",style:{color:S.color},children:S.value})]}),a.jsx("span",{className:"cb-stat-label",children:S.label})]},S.label)})}),Z&&a.jsx("div",{className:"cb-target-overlay",onClick:()=>je(!1),children:a.jsxs("div",{className:"cb-target-picker",onClick:S=>S.stopPropagation(),children:[a.jsx("h4",{children:"Weekly workout goal"}),a.jsx("p",{children:"How many sessions per week?"}),a.jsx("div",{className:"cb-target-options",children:[1,2,3,4,5,6,7].map(S=>a.jsx("button",{className:`cb-target-option${S===Ue?" active":""}`,onClick:()=>ks(S),children:S},S))})]})}),a.jsxs("p",{className:"cb-coach-msg",children:[le.main," ",a.jsx("strong",{children:or}),"  ",le.sub]}),Le&&a.jsxs("button",{className:"cb-nudge-card",onClick:Le.action||void 0,style:Le.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-Le.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:Le.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:Le.label}),a.jsx("span",{className:"cb-nudge-title",children:Le.message}),Le.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[Le.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[g&&a.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:S=>{bn(S),b("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:ae("protein"),color:"var(--color-primary)"},{label:"C",pct:ae("carbs"),color:"var(--color-primary)"},{label:"F",pct:ae("fats"),color:"var(--color-primary)"},{label:"Cal",pct:ae("calories"),color:"var(--color-primary)"}].map(S=>{const Ce=2*Math.PI*38,Ie=Ce-S.pct/100*Ce;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:S.color},strokeDasharray:Ce,strokeDashoffset:Ie})]}),a.jsx("span",{style:{color:S.color},children:S.label})]},S.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:S=>{bn(S),b("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workout"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[D," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[B," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-consistency ripple-btn",onClick:S=>{bn(S),b("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:"cb-habit-dots",children:Array.from({length:k},(S,Q)=>a.jsx("span",{className:`cb-habit-dot${Q<P?" done":""}`},Q))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[P,"/",k," today"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:S=>{bn(S),b("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),Y.length>0?a.jsx("div",{className:"cb-lb-preview",children:Y.map((S,Q)=>{const Ce=["#FFD700","#A8B4C0","#CD7F32"][Q],Ie=S.name?S.name.split(" ").map(dt=>dt[0]).join("").slice(0,2).toUpperCase():"?",ze=S.id===t?.id;return a.jsxs("div",{className:`cb-lb-entry${ze?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:Ce},children:S.photoURL?a.jsx("img",{src:S.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:Ie})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:Ce},children:["#",Q+1]})]},S.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("button",{className:"cb-feature-card cb-card-challenge ripple-btn",onClick:S=>{bn(S),b("/client/core-buddy/challenges")},children:[a.jsx("div",{className:"cb-card-icon-wrap cb-card-icon-challenge",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"})})}),a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Challenges"}),a.jsx("p",{children:"Push yourself with timed fitness challenges"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:S=>{bn(S),b("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("div",{className:"cb-journey-section",children:[a.jsx("h3",{className:"cb-journey-title",children:"My Journey"}),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:re?a.jsx("img",{src:re,alt:""}):a.jsx("span",{children:Yc(t?.name)})}),a.jsxs("div",{className:"journey-compose-body",style:{position:"relative"},children:[a.jsx("textarea",{ref:Xt,placeholder:"Share your progress... (use @ to mention)",value:de,onChange:pa,rows:1,maxLength:500}),gn&&As==="compose"&&hs.length>0&&a.jsx("div",{className:"mention-dropdown",children:hs.map(S=>a.jsxs("button",{className:"mention-option",onClick:()=>as(S,"compose"),children:[a.jsx("div",{className:"mention-option-avatar",children:S.photoURL?a.jsx("img",{src:S.photoURL,alt:""}):a.jsx("span",{children:Yc(S.name)})}),a.jsx("span",{children:S.name})]},S.id))}),et&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:et,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:Wt,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>Fn.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:Fn,type:"file",accept:"image/*",onChange:We,hidden:!0}),(de.trim()||bt)&&a.jsx("button",{className:"journey-post-btn",onClick:Qe,disabled:wt,children:wt?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),ut?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"cb-spinner"})}):it.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"Start sharing your fitness journey!"})]}):a.jsx("div",{className:"journey-list",children:it.map(S=>a.jsxs("div",{id:`post-${S.id}`,className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:S.authorPhotoURL?a.jsx("img",{src:S.authorPhotoURL,alt:""}):a.jsx("span",{children:Yc(S.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:S.authorName}),a.jsx("span",{className:"journey-post-time",children:Qp(S.createdAt)})]}),a.jsx("button",{className:"journey-delete-btn",onClick:()=>Kn(S.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),S.type==="workout_summary"&&S.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:S.metadata.title}),S.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:S.metadata.stats.map(Q=>`${Q.value} ${Q.label}`).join("    ")}),!S.metadata.stats?.length&&S.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:S.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed a workout using Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):S.type==="badge_earned"&&S.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame journey-card-logo-badge",children:(()=>{const Q=zl.find(Ce=>Ce.id===S.metadata.badgeId);return Q?.img?a.jsx("img",{src:Q.img,alt:S.metadata.title,className:"journey-card-logo-img"}):a.jsx("img",{src:"/Logo.webp",alt:S.metadata.title,className:"journey-card-logo-img"})})()}),a.jsx("h3",{className:"journey-card-title",children:S.metadata.title}),S.metadata.badgeDesc&&a.jsx("p",{className:"journey-card-stats-line",children:S.metadata.badgeDesc}),a.jsx("p",{className:"journey-card-cta",children:"I just earned a badge on Core Buddy"}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):S.type==="habits_summary"&&S.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:S.metadata.title}),S.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:S.metadata.stats.map(Q=>`${Q.value} ${Q.label}`).join("    ")}),S.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:S.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed my daily habits with Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):a.jsxs(a.Fragment,{children:[S.content&&a.jsx("p",{className:"journey-post-content",children:Ht(S.content)}),S.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:S.imageURL,alt:"Post",loading:"lazy"})})]}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${Ns.has(S.id)?" liked":""}`,onClick:()=>os(S.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:Ns.has(S.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:S.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${en.has(S.id)?" active":""}`,onClick:()=>Yn(S.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:S.commentCount||0})]})]}),en.has(S.id)&&a.jsxs("div",{className:"journey-comments",children:[Ne[S.id]?.length>0?Ne[S.id].map(Q=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",children:Q.authorPhotoURL?a.jsx("img",{src:Q.authorPhotoURL,alt:""}):a.jsx("span",{children:Yc(Q.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:Q.authorName}),Q.replyToName&&a.jsxs("span",{className:"journey-comment-reply-tag",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"9 14 4 9 9 4"}),a.jsx("path",{d:"M20 20v-7a4 4 0 0 0-4-4H4"})]}),Q.replyToName]}),Q.content&&a.jsx("span",{className:"journey-comment-text",children:Ht(Q.content)}),Q.imageURL&&a.jsx("img",{className:"journey-comment-image",src:Q.imageURL,alt:"Comment",loading:"lazy"})]}),a.jsxs("div",{className:"journey-comment-actions-row",children:[a.jsx("span",{className:"journey-comment-time",children:Qp(Q.createdAt)}),a.jsx("button",{className:"journey-comment-reply-btn",onClick:()=>on(Ce=>({...Ce,[S.id]:{id:Q.id,authorName:Q.authorName}})),children:"Reply"}),a.jsx("button",{className:"journey-comment-delete-btn",onClick:()=>ma(S.id,Q.id),"aria-label":"Delete comment",children:a.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})]},Q.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),qe[S.id]&&a.jsxs("div",{className:"journey-comment-replying",children:[a.jsxs("span",{children:["Replying to ",a.jsx("strong",{children:qe[S.id].authorName})]}),a.jsx("button",{onClick:()=>on(Q=>({...Q,[S.id]:null})),"aria-label":"Cancel reply",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),zn[S.id]&&a.jsxs("div",{className:"journey-comment-img-preview",children:[a.jsx("img",{src:zn[S.id],alt:"Preview"}),a.jsx("button",{onClick:()=>Or(S.id),"aria-label":"Remove image",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("button",{className:"journey-comment-img-btn",onClick:()=>An.current[S.id]?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:Q=>{An.current[S.id]=Q},type:"file",accept:"image/*",onChange:Q=>Di(S.id,Q),hidden:!0}),a.jsx("input",{type:"text",placeholder:"Comment",value:xt[S.id]||"",onChange:Q=>Pr(S.id,Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&vr(S.id)},maxLength:300}),gn&&As===S.id&&hs.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:hs.map(Q=>a.jsxs("button",{className:"mention-option",onClick:()=>as(Q,S.id),children:[a.jsx("div",{className:"mention-option-avatar",children:Q.photoURL?a.jsx("img",{src:Q.photoURL,alt:""}):a.jsx("span",{children:Yc(Q.name)})}),a.jsx("span",{children:Q.name})]},Q.id))}),a.jsx("button",{onClick:()=>vr(S.id),disabled:!(xt[S.id]||"").trim()&&!dn[S.id]||$e[S.id],children:$e[S.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},S.id))})]})]}),!g&&a.jsxs("button",{className:"cb-upgrade-cta",onClick:()=>b("/upgrade"),children:[a.jsx("span",{className:"cb-upgrade-cta-text",children:"Unlock the full experience"}),a.jsx("span",{className:"cb-upgrade-cta-sub",children:"Unlimited workout times, nutrition, buddies & more"}),a.jsxs("svg",{className:"cb-upgrade-cta-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]})]})]}),a.jsx(Jr,{active:"home"}),un&&a.jsxs("div",{className:`toast-notification ${un.type}`,children:[un.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),un.message]}),a.jsx(i3,{steps:Dr,active:Ir,onFinish:Lr})]})})}const Xp=new Map;function ii(){return new Date().toISOString().split("T")[0]}const qw=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],A3={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function R3(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function I3(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Rr(),{isDark:l,toggleTheme:u,accent:d}=Mi(),p=Xs(),[g,y]=w.useState("loading"),[b,k]=w.useState(null),[E,O]=w.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[W,F]=w.useState(null),[B,$]=w.useState(ii()),[H,K]=w.useState({entries:[]}),[ue,Ee]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[we,C]=w.useState(!1),[T,R]=w.useState(()=>{const I=new Date;return{year:I.getFullYear(),month:I.getMonth()}}),[P,M]=w.useState(!1),[D,A]=w.useState(()=>{const I=new Date;return{year:I.getFullYear(),month:I.getMonth()}}),[Ue,Xe]=w.useState(!1),[Z,je]=w.useState(R3),[Me,Se]=w.useState(null),[Y,L]=w.useState(null),[re,ve]=w.useState(!1),[_e,be]=w.useState(null),[ke,Be]=w.useState(""),[st,Pe]=w.useState(!1),[qt,un]=w.useState(""),[Un,Ot]=w.useState([]),[it,vt]=w.useState(!1),[ut,Bn]=w.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[de,Mt]=w.useState(null),[bt,Bt]=w.useState("100"),[et,It]=w.useState(0),[wt,an]=w.useState("weight"),[Ns,rs]=w.useState(0),[en,se]=w.useState(null);w.useRef(null);const Ne=w.useRef(!1),pt=w.useRef(null),xt=w.useRef(null),at=w.useRef(null),$e=w.useCallback((I,z="info")=>{se({message:I,type:z}),setTimeout(()=>se(null),3e3)},[]);w.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const z=await Ks(Ke(ye,"nutritionTargets",t.id));z.exists()?(k(z.data()),y("dashboard")):y("setup")}catch(z){console.error("Error loading nutrition data:",z),y("setup")}})()},[t?.id]),w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const z=await Ks(Ke(ye,"nutritionLogs",`${t.id}_${B}`));if(z.exists()){const ae=z.data();K({entries:ae.entries||[]})}else K({entries:[]})}catch(z){console.error("Error loading log:",z),K({entries:[]})}})()},[t?.id,B]),w.useEffect(()=>{const I=H.entries.reduce((z,ae)=>({protein:z.protein+(ae.protein||0),carbs:z.carbs+(ae.carbs||0),fats:z.fats+(ae.fats||0),calories:z.calories+(ae.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Ee(I)},[H.entries]);const rt=async I=>{try{await Cs(Ke(ye,"nutritionLogs",`${t.id}_${B}`),{clientId:t.id,date:B,entries:I.entries,updatedAt:Vt.now()})}catch(z){console.error("Error saving nutrition log:",z)}},qe=B===ii(),on=(I,z)=>new Date(I,z+1,0).getDate(),dn=(I,z)=>new Date(I,z,1).getDay(),Ln=I=>{if(I===ii())return"Today";const z=new Date(I+"T12:00:00"),ae=new Date;return ae.setDate(ae.getDate()-1),I===ae.toISOString().split("T")[0]?"Yesterday":z.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})},zn=["January","February","March","April","May","June","July","August","September","October","November","December"],Xn=["Su","Mo","Tu","We","Th","Fr","Sa"],Xt=()=>{let I=parseFloat(E.weight);E.weightUnit==="lbs"&&(I*=.453592);let z;E.heightUnit==="cm"?z=parseFloat(E.height):z=(parseFloat(E.heightFeet)||0)*30.48+(parseFloat(E.heightInches)||0)*2.54;const ae=parseInt(E.age);let le=E.gender==="male"?10*I+6.25*z-5*ae+5:10*I+6.25*z-5*ae-161;const Oe=le*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[E.dailyActivity],We={low:100,moderate:200,high:300,daily:400},Wt=Math.round(Oe+We[E.trainingFrequency]);let Qe=Wt,Kn,os;switch(E.goal){case"lose":Qe=Wt*(1-{light:.15,moderate:.2,harsh:.25}[E.deficitLevel]),Kn=2.2,os=.3;break;case"build":Qe=Wt*1.1,Kn=2,os=.22;break;default:Kn=1.8,os=.25}Qe=Math.max(Qe,E.gender==="male"?1400:1100);const Bs=Math.round(I*Kn),Yn=Math.round(Qe*os/9),vr=Math.max(0,Math.round((Qe-Bs*4-Yn*9)/4));F({calories:Math.round(Qe),protein:Bs,carbs:vr,fats:Yn,bmr:Math.round(le),neat:Math.round(Oe),exerciseAdd:We[E.trainingFrequency],tdee:Math.round(Wt)})},Fn=async()=>{if(W)try{const I={clientId:t.id,calories:W.calories,protein:W.protein,carbs:W.carbs,fats:W.fats,goal:E.goal,updatedAt:Vt.now()};await Cs(Ke(ye,"nutritionTargets",t.id),I),k(I),y("dashboard"),$e("Macro targets saved!","success")}catch(I){console.error("Error saving targets:",I),$e("Failed to save targets. Please try again.","error")}},An=()=>{const I=E.weight&&parseFloat(E.weight)>0,z=E.age&&parseInt(E.age)>0,ae=E.heightUnit==="cm"?E.height&&parseFloat(E.height)>0:E.heightFeet&&parseFloat(E.heightFeet)>0||E.heightInches&&parseFloat(E.heightInches)>0;return I&&z&&ae},hn="nut_favourite_foods",yr=()=>{try{return JSON.parse(localStorage.getItem(hn)||"[]")}catch{return[]}};w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const z=await Ks(Ke(ye,"favouriteFoods",t.id));if(z.exists()){const ae=z.data().items||[];localStorage.setItem(hn,JSON.stringify(ae)),rs(le=>le+1)}else{const ae=yr();ae.length>0&&await Cs(Ke(ye,"favouriteFoods",t.id),{items:ae,updatedAt:Vt.now()})}}catch(z){console.error("Error loading favourites:",z)}})()},[t?.id]);const oe=I=>yr().some(z=>z.name.toLowerCase()===(I||"").toLowerCase()),Re=I=>{const z=yr(),ae=z.findIndex(le=>le.name.toLowerCase()===I.name.toLowerCase());ae>=0?z.splice(ae,1):z.unshift({name:I.name,protein:I.protein,carbs:I.carbs,fats:I.fats,calories:I.calories,serving:I.serving,per100g:I.per100g||null,servingUnit:I.servingUnit||"g",portion:I.portion||null}),localStorage.setItem(hn,JSON.stringify(z)),t?.id&&Cs(Ke(ye,"favouriteFoods",t.id),{items:z,updatedAt:Vt.now()}).catch(le=>console.error("Error saving favourites:",le)),rs(le=>le+1)},Ye=I=>{const z=[...H.entries,{...I,meal:Z,id:Date.now(),addedAt:new Date().toISOString()}],ae={...H,entries:z};K(ae),rt(ae),L(null),Mt(null),Bt("100"),It(0),an("weight"),Bn({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),$e("Food added!","success")},gt=I=>{const z=H.entries.filter(le=>le.id!==I),ae={...H,entries:z};K(ae),rt(ae)},ct=async I=>{if(!(!t?.id||I===B)){Xe(!0);try{const z=await Ks(Ke(ye,"nutritionLogs",`${t.id}_${I}`));if(!z.exists()||!z.data().entries?.length){$e("No food logged on that day","error");return}const ae=z.data().entries.map(Oe=>({...Oe,id:Date.now()+Math.random(),addedAt:new Date().toISOString()})),le=[...H.entries,...ae],Le={...H,entries:le};K(Le),rt(Le),M(!1),$e(`Copied ${ae.length} items from ${Ln(I)}`,"success")}catch(z){console.error("Error copying day:",z),$e("Failed to copy day","error")}finally{Xe(!1)}}},_n=w.useRef(null),Rn=w.useRef([]),gn=3,kn=5,As=async()=>{ve(!0);const I=document.querySelector("#barcode-reader");if(!I){ve(!1),$e("Scanner container not found.","error");return}if(!_n.current)try{const ae=await Qs(()=>import("./quagga.min-BbicSfvA.js").then(le=>le.q),[]);_n.current=ae.default}catch(ae){console.error("Failed to load barcode scanner:",ae),ve(!1),$e("Could not load scanner.","error");return}const z=_n.current;z.init({inputStream:{type:"LiveStream",target:I,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},ae=>{if(ae){console.error("Quagga init error:",ae),ve(!1),$e("Could not access camera. Check permissions.","error");return}z.start(),Ne.current=!0}),Rn.current=[],z.onDetected(ae=>{const le=ae.codeResult.decodedCodes?.filter(Oe=>Oe.error!==void 0)?.map(Oe=>Oe.error)||[];if((le.length>0?le.reduce((Oe,We)=>Oe+We,0)/le.length:1)<.15){const Oe=ae.codeResult.code,We=Rn.current;We.push(Oe),We.length>kn&&We.shift(),We.filter(Qe=>Qe===Oe).length>=gn&&(z.offDetected(),Rn.current=[],be(Oe))}})},is=()=>{const I=_n.current;Ne.current&&I&&(I.stop(),I.offDetected(),Ne.current=!1),ve(!1)},hs=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,tn=I=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((I||"").replace(/\s/g,"")),In=I=>{if(!I)return{value:100,unit:"g"};const z=I.toLowerCase().replace(/\s/g,""),ae=z.match(/([\d.]+)/),le=ae?parseFloat(ae[1]):100;return tn(I)?/cl/.test(z)?{value:le*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(z)&&!/ml/.test(z)?{value:le*1e3,unit:"ml"}:{value:le,unit:"ml"}:{value:le,unit:"g"}},Rs=I=>{if(tn(I.serving_size)||tn(I.quantity))return"ml";const z=I.product_name||I.product_name_en||"";return hs.test(z)?"ml":"g"},Ir=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],fi=(I,z)=>{const ae=I||"",le=ae.match(/\((\d+\.?\d*)\s*g\)/i),Le=ae.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(le&&Le){const Wt=parseFloat(le[1]);let Qe=Le[1].replace(/^\d+\s*/,"").trim();if(Qe&&Wt>0)return{label:Qe,weight:Wt}}const Oe=ae.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Oe){const Wt=parseFloat(Oe[1]);let Qe=Oe[2].replace(/^\d+\s*/,"").trim();if(Qe&&Wt>0)return{label:Qe,weight:Wt}}const We=z||"";for(const{pattern:Wt,label:Qe,weight:Kn}of Ir)if(Wt.test(We))return{label:Qe,weight:Kn};return null},Mr=I=>{const z=I.nutriments||{},ae=Rs(I),le=In(I.serving_size),Le=ae==="ml"?le.unit==="ml"?le.value:100:le.value,Oe=I.product_name||I.product_name_en||"Unknown Product",We=fi(I.serving_size,Oe);return{name:Oe,brand:I.brands||"",image:I.image_small_url||I.image_url||null,servingSize:I.serving_size||"100g",servingValue:Le,servingUnit:ae,portion:We,protein:Math.round(z.proteins_100g||z.proteins||0),carbs:Math.round(z.carbohydrates_100g||z.carbohydrates||0),fats:Math.round(z.fat_100g||z.fat||0),calories:Math.round(z["energy-kcal_100g"]||z["energy-kcal"]||(z.energy_100g?z.energy_100g/4.184:0)),per100g:!0}},Dr=async I=>{Pe(!0);try{const z=`https://world.openfoodfacts.org/api/v2/product/${I}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,ae=await fetch(z);if(!ae.ok)throw new Error(`HTTP ${ae.status}`);const le=await ae.json();if(le.status==="success"||le.status===1||le.product){const Le=Mr(le.product);Le.calories===0&&Le.protein===0&&Le.carbs===0?$e("Product found but no nutrition data available.","error"):(Mt(Le),Le.portion?(It(1),Bt(String(Le.portion.weight)),an("portion")):(It(0),Bt(String(Le.servingValue||100)),an("weight")),Be(""))}else $e("Product not found. Try search or manual entry.","error")}catch(z){console.error("Barcode lookup error:",z),$e("Failed to look up product. Check your connection.","error")}Pe(!1)},qn=(I,z,ae)=>{const le=I.toLowerCase().trim(),Le=z.toLowerCase().trim(),Oe=ae.toLowerCase().trim();let We=0;return(le===Oe||le===Oe+"s"||le+"s"===Oe)&&(We+=100),(le.endsWith(" "+Oe)||le.endsWith(" "+Oe+"s"))&&(We+=40),(le.startsWith(Oe+" ")||le.startsWith(Oe+"s "))&&(We+=15),Oe.split(/\s+/).some(Qe=>Le===Qe||Le.startsWith(Qe))&&(We+=30),We+=Math.max(0,30-le.length),We},Js=async()=>{if(!qt.trim())return;pt.current&&pt.current.abort();const I=new AbortController;pt.current=I;const z=qt.trim().toLowerCase(),ae=z.split(/\s+/).filter(Boolean);if(Xp.has(z)){Ot(Xp.get(z));return}vt(!0);try{const Le=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(qt.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Oe=await fetch(Le,{signal:I.signal});if(!Oe.ok)throw new Error(`HTTP ${Oe.status}`);const Wt=((await Oe.json()).products||[]).map(Qe=>Mr(Qe)).filter(Qe=>Qe.name!=="Unknown Product"&&(Qe.calories>0||Qe.protein>0)).filter(Qe=>{const Kn=(Qe.name+" "+Qe.brand).toLowerCase();return ae.every(os=>Kn.includes(os))}).sort((Qe,Kn)=>qn(Kn.name,Kn.brand,z)-qn(Qe.name,Qe.brand,z)).slice(0,10);Xp.set(z,Wt),Ot(Wt),Wt.length===0&&$e("No results found. Try a different search.","info")}catch(le){if(le.name==="AbortError")return;console.error("Search error:",le),$e("Search failed. Check your connection.","error")}vt(!1)};w.useEffect(()=>{if(xt.current&&clearTimeout(xt.current),!(!qt.trim()||Y!=="search"||de))return xt.current=setTimeout(()=>{Js()},700),()=>clearTimeout(xt.current)},[qt]);const _s=l,Cn={"ring-protein":_s?"#2dd4bf":"#14b8a6","ring-carbs":_s?"#fbbf24":"#f59e0b","ring-fats":_s?"#a78bfa":"#8b5cf6","ring-cals":"var(--color-primary)"},On=80,as=2*Math.PI*On,Ht=(I,z,ae,le,Le)=>{const Oe=le>0?Math.min(100,Math.round(ae/le*100)):0,We=as-Oe/100*as,Wt=Cn[Le]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:On}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:On,style:{stroke:Wt},strokeDasharray:as,strokeDashoffset:We})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:Wt},children:Math.round(ae)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",le,I==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:Wt},children:z})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:Wt},children:[Oe,"%"]})]})};if(w.useEffect(()=>{if(!_e)return;const I=setTimeout(()=>{const z=_e;is(),be(null),Dr(z)},1500);return()=>clearTimeout(I)},[_e]),w.useEffect(()=>()=>{const I=_n.current;if(Ne.current&&I){try{I.stop(),I.offDetected()}catch{}Ne.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:E.gender==="male"?"active":"",onClick:()=>{O(I=>({...I,gender:"male"})),F(null)},children:"Male"}),a.jsx("button",{className:E.gender==="female"?"active":"",onClick:()=>{O(I=>({...I,gender:"female"})),F(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:E.age,onChange:I=>{O(z=>({...z,age:I.target.value})),F(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:E.weight,onChange:I=>{O(z=>({...z,weight:I.target.value})),F(null)},placeholder:E.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:E.weightUnit==="kg"?"active":"",onClick:()=>{O(I=>({...I,weightUnit:"kg"})),F(null)},children:"kg"}),a.jsx("button",{className:E.weightUnit==="lbs"?"active":"",onClick:()=>{O(I=>({...I,weightUnit:"lbs"})),F(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[E.heightUnit==="cm"?a.jsx("input",{type:"number",value:E.height,onChange:I=>{O(z=>({...z,height:I.target.value})),F(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:E.heightFeet,onChange:I=>{O(z=>({...z,heightFeet:I.target.value})),F(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:E.heightInches,onChange:I=>{O(z=>({...z,heightInches:I.target.value})),F(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:E.heightUnit==="cm"?"active":"",onClick:()=>{O(I=>({...I,heightUnit:"cm"})),F(null)},children:"cm"}),a.jsx("button",{className:E.heightUnit==="ft"?"active":"",onClick:()=>{O(I=>({...I,heightUnit:"ft"})),F(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:E.dailyActivity,onChange:I=>{O(z=>({...z,dailyActivity:I.target.value})),F(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:E.trainingFrequency,onChange:I=>{O(z=>({...z,trainingFrequency:I.target.value})),F(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:E.goal==="lose"?"active":"",onClick:()=>{O(I=>({...I,goal:"lose"})),F(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:E.goal==="maintain"?"active":"",onClick:()=>{O(I=>({...I,goal:"maintain"})),F(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:E.goal==="build"?"active":"",onClick:()=>{O(I=>({...I,goal:"build"})),F(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),E.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:E.deficitLevel==="light"?"active":"",onClick:()=>{O(I=>({...I,deficitLevel:"light"})),F(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:E.deficitLevel==="moderate"?"active":"",onClick:()=>{O(I=>({...I,deficitLevel:"moderate"})),F(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:E.deficitLevel==="harsh"?"active":"",onClick:()=>{O(I=>({...I,deficitLevel:"harsh"})),F(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:Xt,disabled:!An(),children:"Calculate Macros"})]}),W&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[Ht("Protein","Protein",W.protein,W.protein,"ring-protein"),Ht("Carbs","Carbs",W.carbs,W.carbs,"ring-carbs"),Ht("Fats","Fats",W.fats,W.fats,"ring-fats"),Ht("Calories","Calories",W.calories,W.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[W.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[W.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",W.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[W.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:Fn,children:"Set as My Daily Targets"})]})]}),en&&a.jsx("div",{className:`toast-notification ${en.type}`,children:en.message})]});const Zr=I=>{const z=new Date(I+"T12:00:00"),ae=z.getDay(),le=new Date(z);le.setDate(z.getDate()-(ae+6)%7);const Le=[];for(let Oe=0;Oe<7;Oe++){const We=new Date(le);We.setDate(le.getDate()+Oe),Le.push(We.toISOString().split("T")[0])}return Le},Lr=["M","T","W","T","F","S","S"],ks=(I,z="search")=>{je(I),z==="scan"?(L("scan"),Mt(null)):z==="manual"?(L("manual"),Bn({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):z==="favourites"?L("favourites"):(L("search"),Ot([]),un(""))},bn=Zr(B),or=new Date(B+"T12:00:00"),mi=`${zn[or.getMonth()]} ${or.getFullYear()}`;return a.jsx(Xo,{children:a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),F(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip anim-fade-up",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const I=new Date(B+"T12:00:00");I.setDate(I.getDate()-7);const z=I.toISOString().split("T")[0];$(z)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{C(!we),R({year:or.getFullYear(),month:or.getMonth()})},children:mi}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const I=new Date(B+"T12:00:00");I.setDate(I.getDate()+7);const z=I.toISOString().split("T")[0];z<=ii()&&$(z)},"aria-label":"Next week",disabled:bn[6]>=ii(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:bn.map((I,z)=>{const ae=new Date(I+"T12:00:00").getDate(),le=I===B,Le=I>ii(),Oe=I===ii();return a.jsxs("button",{className:`nut-week-day${le?" selected":""}${Oe?" today":""}${Le?" future":""}`,disabled:Le,onClick:()=>$(I),children:[a.jsx("span",{className:"nut-week-day-letter",children:Lr[z]}),a.jsx("span",{className:"nut-week-day-num",children:ae})]},I)})})]}),we&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>R(I=>{let z=I.month-1,ae=I.year;return z<0&&(z=11,ae--),{year:ae,month:z}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[zn[T.month]," ",T.year]}),a.jsx("button",{onClick:()=>R(I=>{let z=I.month+1,ae=I.year;return z>11&&(z=0,ae++),{year:ae,month:z}}),disabled:T.year===new Date().getFullYear()&&T.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Xn.map(I=>a.jsx("span",{children:I},I))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(dn(T.year,T.month))].map((I,z)=>a.jsx("span",{},`e${z}`)),[...Array(on(T.year,T.month))].map((I,z)=>{const ae=z+1,le=`${T.year}-${String(T.month+1).padStart(2,"0")}-${String(ae).padStart(2,"0")}`,Le=le>ii(),Oe=le===B,We=le===ii();return a.jsx("button",{className:`nut-cal-day${Oe?" selected":""}${We?" today":""}${Le?" future":""}`,disabled:Le,onClick:()=>{$(le),C(!1)},children:ae},ae)})]})]}),a.jsxs("div",{className:"nut-rings-row anim-fade-up-d2",children:[Ht("Protein","Protein",ue.protein,b.protein,"ring-protein"),Ht("Carbs","Carbs",ue.carbs,b.carbs,"ring-carbs"),Ht("Fats","Fats",ue.fats,b.fats,"ring-fats"),Ht("Calories","kCal",ue.calories,b.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone anim-fade-up-d4",children:a.jsxs("div",{className:"nut-light-content",children:[qe&&a.jsx("div",{className:"nut-quick-row",children:a.jsxs("button",{className:"nut-copy-day-btn",onClick:()=>{M(!0),A({year:new Date().getFullYear(),month:new Date().getMonth()})},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),a.jsx("span",{children:"Copy day"})]})}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:qw.map(I=>{const z=H.entries.filter(le=>(le.meal||"snacks")===I.key),ae=z.reduce((le,Le)=>({protein:le.protein+(Le.protein||0),carbs:le.carbs+(Le.carbs||0),fats:le.fats+(Le.fats||0),calories:le.calories+(Le.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${I.key}`,children:A3[I.key]}),a.jsx("span",{className:"nut-meal-card-title",children:I.label}),z.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[ae.calories," cal"]}),qe&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>Se(Me===I.key?null:I.key),"aria-label":`Add to ${I.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),z.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,b.protein>0?ae.protein/b.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[ae.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,b.carbs>0?ae.carbs/b.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[ae.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,b.fats>0?ae.fats/b.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[ae.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,b.calories>0?ae.calories/b.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:ae.calories})]})]}),z.length>0&&a.jsx("div",{className:"nut-log-list",children:z.map(le=>a.jsxs("div",{className:"nut-log-item",children:[a.jsx("button",{className:`nut-fav-star log${oe(le.name)?" active":""}`,onClick:()=>Re(le),"aria-label":oe(le.name)?"Remove from favourites":"Add to favourites",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:oe(le.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:le.name}),le.serving&&a.jsx("span",{className:"nut-log-item-serving",children:le.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[le.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[le.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[le.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:le.calories})]}),qe&&a.jsx("button",{className:"nut-log-delete",onClick:()=>gt(le.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},le.id))}),z.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:qe?"Tap + to add food":"No entries"})})]},I.key)})})})]})}),Me&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>Se(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",qw.find(I=>I.key===Me)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const I=Me;Se(null),ks(I,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const I=Me;Se(null),ks(I,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const I=Me;Se(null),ks(I,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const I=Me;Se(null),ks(I,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),P&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>M(!1),children:a.jsxs("div",{className:"nut-copy-from-popup",onClick:I=>I.stopPropagation(),children:[a.jsxs("div",{className:"nut-copy-from-header",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),a.jsx("span",{children:"Copy from..."}),a.jsx("button",{className:"nut-modal-close",onClick:()=>M(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsx("p",{className:"nut-copy-from-hint",children:"Pick a day to copy its food log into today"}),a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>A(I=>{let z=I.month-1,ae=I.year;return z<0&&(z=11,ae--),{year:ae,month:z}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[zn[D.month]," ",D.year]}),a.jsx("button",{onClick:()=>A(I=>{let z=I.month+1,ae=I.year;return z>11&&(z=0,ae++),{year:ae,month:z}}),disabled:D.year===new Date().getFullYear()&&D.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Xn.map(I=>a.jsx("span",{children:I},I))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(dn(D.year,D.month))].map((I,z)=>a.jsx("span",{},`e${z}`)),[...Array(on(D.year,D.month))].map((I,z)=>{const ae=z+1,le=`${D.year}-${String(D.month+1).padStart(2,"0")}-${String(ae).padStart(2,"0")}`,Le=le>ii(),Oe=le===B,We=le===ii(),Wt=Le||Oe;return a.jsx("button",{className:`nut-cal-day${Oe?" selected":""}${We?" today":""}${Le?" future":""}`,disabled:Wt,onClick:()=>ct(le),children:ae},ae)})]}),Ue&&a.jsxs("div",{className:"nut-copy-from-loading",children:[a.jsx("div",{className:"wk-loading-spinner"}),a.jsx("span",{children:"Copying..."})]})]})}),Y&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{is(),be(null),L(null),Mt(null)},children:a.jsxs("div",{className:"nut-modal",onClick:I=>I.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:Y==="scan"?"Scan Barcode":Y==="search"?"Search Food":Y==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{is(),be(null),L(null),Mt(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Y==="scan"&&!de&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),re&&!_e&&a.jsx("div",{className:"nut-scan-line"}),_e&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:_e})]})]}),!re&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:As,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),re&&!_e&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:ke,onChange:I=>Be(I.target.value),onKeyDown:I=>I.key==="Enter"&&ke.trim()&&Dr(ke.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>ke.trim()&&Dr(ke.trim()),disabled:!ke.trim()||st,children:st?"...":"Look Up"})]})]}),Y==="scan"&&de&&(()=>{const I=de.servingUnit||"g",z=de.portion,ae=wt==="portion"&&z?et*z.weight:parseFloat(bt)||0,le=ae/100,Le=I==="ml"?[100,200,250,500]:[50,100,150,200],Oe=wt==="portion"&&z?`${et} ${z.label}${et!==1?"s":""} (${Math.round(ae)}${I})`:`${Math.round(ae)}${I}`;return a.jsxs("div",{className:"nut-product-result",children:[de.image&&a.jsx("img",{src:de.image,alt:de.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:de.name}),a.jsx("button",{className:`nut-fav-star confirm${oe(de.name)?" active":""}`,onClick:()=>Re({name:de.name,protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories,serving:de.servingSize,per100g:{protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories},servingUnit:de.servingUnit||"g",portion:de.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:oe(de.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),de.brand&&a.jsx("p",{className:"nut-product-brand",children:de.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",I,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[de.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[de.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[de.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[de.calories," cal"]})]}),z&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:wt==="portion"?"active":"",onClick:()=>{an("portion"),et<1&&It(1)},children:"Portions"}),a.jsxs("button",{className:wt==="weight"?"active":"",onClick:()=>{an("weight"),Bt(String(Math.round(ae)||100))},children:["Custom (",I,")"]})]}),wt==="portion"&&z?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>It(Math.max(1,et-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:et}),a.jsxs("span",{className:"nut-stepper-label",children:[z.label,et!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(ae),I]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>It(et+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",I,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:bt,onChange:We=>Bt(We.target.value),onFocus:We=>We.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Le.map(We=>a.jsxs("button",{className:`nut-quick-btn${bt===String(We)?" active":""}`,onClick:()=>Bt(String(We)),children:[We,I]},We))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(de.protein*le),"p / ",Math.round(de.carbs*le),"c / ",Math.round(de.fats*le),"f / ",Math.round(de.calories*le)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{Mt(null),L("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ye({name:de.name,protein:Math.round(de.protein*le),carbs:Math.round(de.carbs*le),fats:Math.round(de.fats*le),calories:Math.round(de.calories*le),serving:Oe}),children:"Add"})]})]})})(),Y==="search"&&!de&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:at,value:qt,onChange:I=>un(I.target.value),onKeyDown:I=>{I.key==="Enter"&&(clearTimeout(xt.current),Js())},onFocus:()=>setTimeout(()=>at.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:Js,disabled:it,children:it?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[Un.map((I,z)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{Mt(I),I.portion?(It(1),Bt(String(I.portion.weight)),an("portion")):(It(0),Bt(String(I.servingValue||100)),an("weight"))},children:[I.image&&a.jsx("img",{src:I.image,alt:I.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:I.name}),I.brand&&a.jsx("span",{className:"nut-search-item-brand",children:I.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[I.calories," cal  ",I.protein,"p  ",I.carbs,"c  ",I.fats,"f per 100",I.servingUnit||"g"]})]})]},z)),Un.length===0&&qt&&!it&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),Y==="search"&&de&&(()=>{const I=de.servingUnit||"g",z=de.portion,ae=wt==="portion"&&z?et*z.weight:parseFloat(bt)||0,le=ae/100,Le=I==="ml"?[100,200,250,500]:[50,100,150,200],Oe=wt==="portion"&&z?`${et} ${z.label}${et!==1?"s":""} (${Math.round(ae)}${I})`:`${Math.round(ae)}${I}`;return a.jsxs("div",{className:"nut-product-result",children:[de.image&&a.jsx("img",{src:de.image,alt:de.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:de.name}),a.jsx("button",{className:`nut-fav-star confirm${oe(de.name)?" active":""}`,onClick:()=>Re({name:de.name,protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories,serving:de.servingSize,per100g:{protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories},servingUnit:de.servingUnit||"g",portion:de.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:oe(de.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),de.brand&&a.jsx("p",{className:"nut-product-brand",children:de.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",I,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[de.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[de.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[de.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[de.calories," cal"]})]}),z&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:wt==="portion"?"active":"",onClick:()=>{an("portion"),et<1&&It(1)},children:"Portions"}),a.jsxs("button",{className:wt==="weight"?"active":"",onClick:()=>{an("weight"),Bt(String(Math.round(ae)||100))},children:["Custom (",I,")"]})]}),wt==="portion"&&z?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>It(Math.max(1,et-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:et}),a.jsxs("span",{className:"nut-stepper-label",children:[z.label,et!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(ae),I]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>It(et+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",I,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:bt,onChange:We=>Bt(We.target.value),onFocus:We=>We.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Le.map(We=>a.jsxs("button",{className:`nut-quick-btn${bt===String(We)?" active":""}`,onClick:()=>Bt(String(We)),children:[We,I]},We))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(de.protein*le),"p / ",Math.round(de.carbs*le),"c / ",Math.round(de.fats*le),"f / ",Math.round(de.calories*le)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>Mt(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ye({name:de.name,protein:Math.round(de.protein*le),carbs:Math.round(de.carbs*le),fats:Math.round(de.fats*le),calories:Math.round(de.calories*le),serving:Oe}),children:"Add"})]})]})})(),Y==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:ut.name,onChange:I=>Bn(z=>({...z,name:I.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:ut.serving,onChange:I=>Bn(z=>({...z,serving:I.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:ut.protein,onChange:I=>Bn(z=>({...z,protein:I.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:ut.carbs,onChange:I=>Bn(z=>({...z,carbs:I.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:ut.fats,onChange:I=>Bn(z=>({...z,fats:I.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:ut.calories,onChange:I=>Bn(z=>({...z,calories:I.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!ut.name.trim(),onClick:()=>Ye({name:ut.name,protein:parseFloat(ut.protein)||0,carbs:parseFloat(ut.carbs)||0,fats:parseFloat(ut.fats)||0,calories:parseFloat(ut.calories)||0,serving:ut.serving||""}),children:"Add Food"})]}),Y==="favourites"&&!de&&(()=>{const I=yr(),z=ae=>{if(ae.per100g){const le=ae.per100g;Mt({name:ae.name,brand:"",image:null,servingSize:ae.serving||"100g",servingValue:100,servingUnit:ae.servingUnit||"g",portion:ae.portion||null,protein:le.protein,carbs:le.carbs,fats:le.fats,calories:le.calories,per100g:!0}),ae.portion?(It(1),Bt(String(ae.portion.weight)),an("portion")):(It(0),Bt("100"),an("weight"))}else Ye({name:ae.name,protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories,serving:ae.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:I.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:I.map((ae,le)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:Le=>{Le.stopPropagation(),Re(ae)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>z(ae),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:ae.name}),a.jsx("span",{className:"nut-recent-item-serving",children:ae.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[ae.calories," cal"]})]})]},le))})})})(),Y==="favourites"&&de&&(()=>{const I=de.servingUnit||"g",z=de.portion,ae=wt==="portion"&&z?et*z.weight:parseFloat(bt)||0,le=ae/100,Le=I==="ml"?[100,200,250,500]:[50,100,150,200],Oe=wt==="portion"&&z?`${et} ${z.label}${et!==1?"s":""} (${Math.round(ae)}${I})`:`${Math.round(ae)}${I}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:de.name}),a.jsx("button",{className:`nut-fav-star confirm${oe(de.name)?" active":""}`,onClick:()=>Re({name:de.name,protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories,serving:de.servingSize,per100g:{protein:de.protein,carbs:de.carbs,fats:de.fats,calories:de.calories},servingUnit:de.servingUnit||"g",portion:de.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:oe(de.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",I,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[de.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[de.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[de.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[de.calories," cal"]})]}),z&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:wt==="portion"?"active":"",onClick:()=>{an("portion"),et<1&&It(1)},children:"Portions"}),a.jsxs("button",{className:wt==="weight"?"active":"",onClick:()=>{an("weight"),Bt(String(Math.round(ae)||100))},children:["Custom (",I,")"]})]}),wt==="portion"&&z?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>It(Math.max(1,et-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:et}),a.jsxs("span",{className:"nut-stepper-label",children:[z.label,et!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(ae),I]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>It(et+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",I,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:bt,onChange:We=>Bt(We.target.value),onFocus:We=>We.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Le.map(We=>a.jsxs("button",{className:`nut-quick-btn${bt===String(We)?" active":""}`,onClick:()=>Bt(String(We)),children:[We,I]},We))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(de.protein*le),"p / ",Math.round(de.carbs*le),"c / ",Math.round(de.fats*le),"f / ",Math.round(de.calories*le)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>Mt(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ye({name:de.name,protein:Math.round(de.protein*le),carbs:Math.round(de.carbs*le),fats:Math.round(de.fats*le),calories:Math.round(de.calories*le),serving:Oe}),children:"Add"})]})]})})()]})}),a.jsx(Jr,{active:"nutrition"}),en&&a.jsx("div",{className:`toast-notification ${en.type}`,children:en.message})]})})}async function M3(s){const{type:e="workout",title:t="Workout Complete!",stats:i=[],badges:l=[],badgeImage:u,badgeDesc:d}=s,p=1080,g=1920,y=document.createElement("canvas");y.width=p,y.height=g;const b=y.getContext("2d"),k="#2a2a28",E="#ffffff",O="#A12F3A",W="#1a1a1a",F="#555555";b.fillStyle=k,b.fillRect(0,0,p,g);const B=Math.round(p*.82),$=Math.round(g*.75),H=Math.round((p-B)/2),K=Math.round((g-$)/2),ue=28,Ee=5;b.save(),b.shadowColor="rgba(0, 0, 0, 0.45)",b.shadowBlur=40,b.shadowOffsetY=10,Hw(b,H,K,B,$,ue),b.fillStyle=E,b.fill(),b.restore(),b.save(),Hw(b,H,K,B,$,ue),b.strokeStyle=O,b.lineWidth=Ee,b.stroke(),b.restore();const we=220,C=50,T=52,R=68,P=10,M=36,D=48,A=30,Ue=34,Xe=46,Z=30,je=28;b.font=`bold ${T}px 'Orbitron', sans-serif`;const Me=Qc(b,t.toUpperCase(),B-100);b.font=`500 ${M}px 'Montserrat', sans-serif`;let Se=[];e==="badge"&&d?Se=Qc(b,d,B-120):e==="badge"&&l.length>0?Se=Qc(b,l.join("    "),B-120):i.length>0&&(Se=Qc(b,i.map(vt=>`${vt.value} ${vt.label}`).join("    "),B-120));const Y=e==="badge"?"I just earned a badge on Core Buddy ":e==="habits"?"I just completed my daily habits with Core Buddy ":"I just completed a workout using Core Buddy ";b.font=`bold ${Ue}px 'Montserrat', sans-serif`;const L=Qc(b,Y,B-80);let re=Me.length*R;Se.length>0&&(re+=P+Se.length*D),re+=A+L.length*Xe,re+=Z+je;const _e=K+$-60-re,ke=K+40,Be=_e-C,st=p/2,Pe=(ke+Be)/2,qt=e==="badge"&&u?u:"/Logo.webp";b.save();const un=e==="badge"?"rgba(255, 193, 7, 0.15)":"rgba(161, 47, 58, 0.12)",Un=b.createRadialGradient(st,Pe,we*.6,st,Pe,we*1.5);Un.addColorStop(0,un),Un.addColorStop(1,"rgba(0, 0, 0, 0)"),b.fillStyle=Un,b.fillRect(st-we*1.5,Pe-we*1.5,we*3,we*3),b.restore(),b.beginPath(),b.arc(st,Pe,we+6,0,Math.PI*2),b.fillStyle=E,b.fill();const Ot=e==="badge"?"#ffc107":O;b.beginPath(),b.arc(st,Pe,we,0,Math.PI*2),b.strokeStyle=Ot,b.lineWidth=5,b.stroke();try{const vt=await D3(qt);b.save(),b.beginPath(),b.arc(st,Pe,we-6,0,Math.PI*2),b.clip();const ut=(we-6)*2;b.drawImage(vt,st-we+6,Pe-we+6,ut,ut),b.restore()}catch{b.textAlign="center",b.textBaseline="middle",b.fillStyle=O,b.font="bold 80px 'Orbitron', sans-serif",b.fillText(e==="badge"?"":"MCF",st,Pe)}let it=_e;b.textAlign="center",b.textBaseline="alphabetic",b.fillStyle=W,b.font=`bold ${T}px 'Orbitron', sans-serif`;for(const vt of Me)b.fillText(vt,p/2,it),it+=R;if(Se.length>0){it+=P,b.fillStyle=F,b.font=`500 ${M}px 'Montserrat', sans-serif`;for(const vt of Se)b.fillText(vt,p/2,it),it+=D}it+=A,b.fillStyle=W,b.font=`bold ${Ue}px 'Montserrat', sans-serif`;for(const vt of L)b.fillText(vt,p/2,it),it+=Xe;return it+=Z,b.fillStyle=O,b.font=`600 ${je}px 'Montserrat', sans-serif`,b.fillText("Make It Count with Core Buddy",p/2,it),new Promise(vt=>{y.toBlob(ut=>vt(ut),"image/png")})}function Hw(s,e,t,i,l,u){s.beginPath(),s.moveTo(e+u,t),s.lineTo(e+i-u,t),s.quadraticCurveTo(e+i,t,e+i,t+u),s.lineTo(e+i,t+l-u),s.quadraticCurveTo(e+i,t+l,e+i-u,t+l),s.lineTo(e+u,t+l),s.quadraticCurveTo(e,t+l,e,t+l-u),s.lineTo(e,t+u),s.quadraticCurveTo(e,t,e+u,t),s.closePath()}function D3(s){return new Promise((e,t)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>e(i),i.onerror=t,i.src=s})}function Qc(s,e,t){if(s.measureText(e).width<=t)return[e];const i=e.split(" "),l=[];let u="";for(const d of i){const p=u?`${u} ${d}`:d;s.measureText(p).width>t&&u?(l.push(u),u=d):u=p}return u&&l.push(u),l}function L3(){const s=w.useRef(null),e=w.useCallback(()=>{if(!s.current)try{s.current=new(window.AudioContext||window.webkitAudioContext)}catch{}const u=s.current;return u?.state==="suspended"&&u.resume(),u},[]),t=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate([40,60,30]);const u=e();if(!u)return;const d=u.currentTime,p=u.createBiquadFilter();p.type="lowpass",p.frequency.value=500,p.Q.value=.7,p.connect(u.destination);const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=50,y.gain.value=.3,y.gain.setTargetAtTime(0,d+.08,.04),g.connect(y).connect(p),g.start(d),g.stop(d+.2);const b=u.createOscillator(),k=u.createGain();b.type="sine",b.frequency.value=70,k.gain.value=.2,k.gain.setTargetAtTime(0,d+.22,.04),b.connect(k).connect(p),b.start(d+.15),b.stop(d+.35)},[e]),i=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate(30);const u=e();if(!u)return;const d=u.currentTime,p=u.createBiquadFilter();p.type="lowpass",p.frequency.value=500,p.Q.value=.7,p.connect(u.destination);const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=55,y.gain.value=.35,y.gain.setTargetAtTime(0,d+.08,.04),g.connect(y).connect(p),g.start(d),g.stop(d+.2)},[e]),l=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate([50,80,100]);const u=e();u&&[0,.12].forEach((d,p)=>{const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=p===0?523:784,y.gain.value=.12,y.gain.setTargetAtTime(0,u.currentTime+d+.15,.02),g.connect(y).connect(u.destination),g.start(u.currentTime+d),g.stop(u.currentTime+d+.2)})},[e]);return w.useEffect(()=>()=>{s.current?.close()},[]),{tap:i,tick:t,complete:l}}const O3=2e3,qg=42,Nl=2*Math.PI*qg,P3=1200,Ww=["Another one in the bank!","Consistency beats everything.","You showed up  that's what counts.","Stronger every session."];function Hg({title:s,subtitle:e,stats:t,onDone:i,onDismissStart:l,onShareJourney:u,userName:d,buttonLabel:p="Done",holdLabel:g="Hold To Complete Session",shareType:y="workout",hideShare:b=!1}){const[k,E]=w.useState("hold"),[O,W]=w.useState(!1),[F,B]=w.useState(0),[$,H]=w.useState(!1),[K,ue]=w.useState(!1),[Ee,we]=w.useState(null),C=L3(),T=w.useRef(null),R=w.useRef(null),P=w.useRef(null),M=w.useRef(null),D=w.useRef(!1),A=w.useRef(!1),Ue=w.useRef(0),Xe=w.useRef(Ww[Math.floor(Math.random()*Ww.length)]),Z=w.useRef([...Array(80)].map((be,ke)=>({x:5+Math.random()*90,delay:Math.random()*3.5,color:["#A12F3A","#ffffff","#000000"][ke%3],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.8+Math.random()*2,width:4+Math.random()*6,height:4+Math.random()*8,shape:ke%3}))),je=w.useCallback(()=>{if(D.current)return;D.current=!0,A.current=!1,Ue.current=0,W(!0),B(0),M.current=performance.now(),C.tap(),T.current&&(T.current.style.strokeDashoffset=Nl);const be=ke=>{const Be=ke-M.current,st=Math.min(Be/O3,1);if(T.current&&(T.current.style.strokeDashoffset=Nl-st*Nl),R.current){const Pe=8*(1-st),qt=1-st,un=1+st*.15;R.current.style.filter=`blur(${Pe}px) grayscale(${qt})`,R.current.style.transform=`scale(${un})`}B(st),Be-Ue.current>=P3&&(Ue.current=Be,C.tick()),st<1?P.current=requestAnimationFrame(be):(D.current=!1,A.current=!0,P.current=null,W(!1),B(1),C.complete(),E("celebrate"))};P.current=requestAnimationFrame(be)},[C]),Me=w.useCallback(()=>{D.current&&(D.current=!1,P.current&&(cancelAnimationFrame(P.current),P.current=null),T.current&&(T.current.style.strokeDashoffset=Nl),R.current&&(R.current.style.filter="",R.current.style.transform=""),W(!1),B(0))},[]),Se=w.useCallback(()=>{H(!0),l?.(),setTimeout(()=>{i?.()},300)},[i,l]),Y=w.useCallback(()=>{const be=[s||"Workout Complete!"];return e&&be.push(e),t?.length&&be.push(t.map(ke=>`${ke.value} ${ke.label}`).join(" | ")),be.push("#MindCoreFitness"),be.join(`
`)},[s,e,t]),L=w.useCallback(async()=>{if(!(K||!u))try{await u({type:y==="habits"?"habits_summary":"workout_summary",title:s||"Workout Complete!",subtitle:e,stats:t||[],quote:Xe.current}),ue(!0),we("Posted to Journey!"),setTimeout(()=>we(null),2500)}catch(be){console.error("Journey post failed:",be),we(be?.message||"Failed to post"),setTimeout(()=>we(null),3500)}},[K,u,s,e,t]),[re,ve]=w.useState(!1),_e=w.useCallback(async()=>{ve(!0);try{const be=await M3({type:y||"workout",title:s||"Workout Complete!",subtitle:e,stats:t||[],quote:Xe.current,userName:d}),ke=Y();if(navigator.share&&navigator.canShare?.({files:[new File([be],"workout.png",{type:"image/png"})]})){const Be=new File([be],"workout.png",{type:"image/png"});await navigator.share({title:"Mind Core Fitness",text:ke,files:[Be]})}else navigator.share?await navigator.share({title:"Mind Core Fitness",text:ke}):(await navigator.clipboard.writeText(ke),we("Copied to clipboard!"),setTimeout(()=>we(null),2500))}catch{try{await navigator.clipboard.writeText(Y()),we("Copied to clipboard!"),setTimeout(()=>we(null),2500)}catch{}}finally{ve(!1)}},[s,e,t,d,Y]);return k==="hold"?a.jsxs("div",{className:"wc-hold-page",children:[a.jsx("div",{className:"wc-hold-glow","aria-hidden":"true"}),a.jsx("p",{className:"wc-hold-label",children:g}),a.jsxs("div",{className:`wc-hold-ring-touch ${O?"wc-holding":""}`,onPointerDown:be=>{be.preventDefault(),je()},onPointerUp:Me,onPointerLeave:Me,onPointerCancel:Me,onClick:be=>{be.stopPropagation(),A.current&&(A.current=!1)},role:"button",tabIndex:0,"aria-label":"Press and hold to finish workout",onKeyDown:be=>{(be.key==="Enter"||be.key===" ")&&(be.preventDefault(),C.complete(),E("celebrate"))},children:[a.jsx("div",{className:"wc-hold-ring-glow","aria-hidden":"true"}),a.jsxs("svg",{className:"wc-hold-ring-svg",viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wc-hold-ring-track",cx:"50",cy:"50",r:qg}),a.jsx("circle",{className:"wc-hold-ring-fill",ref:T,cx:"50",cy:"50",r:qg,style:{strokeDasharray:Nl,strokeDashoffset:Nl}})]}),a.jsx("img",{ref:R,src:"/Logo.webp",alt:"Mind Core Fitness",className:"wc-hold-logo",draggable:!1})]})]}):a.jsxs("div",{className:`wc-celeb-overlay ${$?"wc-celeb-dismissing":""}`,children:[a.jsx("div",{className:"wc-celeb-confetti","aria-hidden":"true",children:Z.current.map((be,ke)=>a.jsx("span",{className:`wc-celeb-confetti-piece wc-confetti-shape-${be.shape}`,style:{"--x":`${be.x}%`,"--delay":`${be.delay}s`,"--color":be.color,"--drift":`${be.drift}px`,"--spin":`${be.spin}deg`,"--duration":`${be.duration}s`,width:`${be.width}px`,height:`${be.height}px`}},ke))}),a.jsxs("div",{className:"wc-celeb-content",children:[a.jsx("div",{className:"wc-celeb-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wc-celeb-logo-img"})}),a.jsx("h2",{className:"wc-celeb-heading",children:s||"Congratulations!"}),e&&a.jsx("p",{className:"wc-celeb-subtext",children:e}),a.jsx("p",{className:"wc-celeb-quote",children:Xe.current}),t&&t.length>0&&a.jsx("div",{className:"wc-celeb-stats-row",children:t.map((be,ke)=>a.jsxs("div",{className:"wc-celeb-stat",children:[a.jsx("span",{className:"wc-celeb-stat-val",children:be.value}),a.jsx("span",{className:"wc-celeb-stat-label",children:be.label})]},ke))}),!b&&a.jsxs("div",{className:"wc-share-row",children:[u&&a.jsxs("button",{className:`wc-share-btn wc-share-journey ${K?"wc-share-done":""}`,onClick:L,disabled:K,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20h9"}),a.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4Z"})]}),K?"Posted!":"Post to Journey"]}),a.jsxs("button",{className:"wc-share-btn wc-share-external",onClick:_e,disabled:re,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"18",cy:"5",r:"3"}),a.jsx("circle",{cx:"6",cy:"12",r:"3"}),a.jsx("circle",{cx:"18",cy:"19",r:"3"}),a.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),a.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),re?"Generating...":"Share"]})]}),a.jsx("button",{className:"wc-celeb-btn",onClick:Se,children:p}),Ee&&a.jsx("div",{className:"wc-share-toast",children:Ee})]})]})}const $w="/login/assets/randomiser-glq9YJkL.jpg",Gw="/login/assets/programme-card-workout-CnNzTYkz.webp",V3="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",U3="/login/assets/muscle-group-arms-C9AdZL4-.png",B3="/login/assets/arms-bicep-BUrmT1o-.png",z3="/login/assets/arms-tricep-D9tAnFnS.png",F3="/login/assets/arms-full-arms-BY3TvpJm.png",q3="/login/assets/muscle-group-chest-Cxfuc7XI.png",H3="/login/assets/chest-strength-BR4BAFTH.png",W3="/login/assets/chest-hypertrophy-B8yNrvjB.png",$3="/login/assets/chest-endurance-e-OSWtWO.png",G3="/login/assets/muscle-group-shoulders-DibNtCLF.png",K3="/login/assets/shoulders-strength-CKlZBF5A.png",Y3="/login/assets/shoulders-hypertrophy-BUd76jiS.png",Q3="/login/assets/shoulders-endurance-HuqNG5rD.png",X3="/login/assets/muscle-group-core-CPR-bdRg.png",J3="/login/assets/core-lower-abs-TVcqGMFJ.png",Z3="/login/assets/core-obliques-rotation-Djb7Qlbk.png",e5="/login/assets/core-weighted-core-4Kwh9mTv.png",t5="/login/assets/muscle-group-back-8JPV-YUo.png",n5="/login/assets/back-strength-BmSRxnwo.png",s5="/login/assets/back-hypertrophy-CXHmsnCz.png",r5="/login/assets/back-endurance-C8qJ8l5I.png",i5="/login/assets/muscle-group-legs-B8jcbdov.png",a5="/login/assets/legs-quads-DbnfsebI.png",o5="/login/assets/legs-hamstrings-glutes-BrfsvvzX.png",l5="/login/assets/legs-power-plyo-D2qBXeUR.png",c5=60,Jp=5,u5={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},d5={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},Zp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},eg=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:V3},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Xc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:U3},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z",image:q3},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z",image:t5},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",image:G3},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z",image:i5},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",image:X3}],Kw={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",image:H3,level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",image:W3,level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",image:$3,level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",image:n5,level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",image:s5,level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",image:r5,level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",image:K3,level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",image:Y3,level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",image:Q3,level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",image:B3,level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",image:z3,level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",image:F3,level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",image:a5,level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",image:o5,level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",image:l5,level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",image:J3,level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",image:Z3,level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",image:e5,level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},tg=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Kr=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],_i=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],ng=[5,10,15,20,30],fh={core:"#e85d04",upper:"#2196f3",lower:"#4caf50",fullbody:"#9c27b0",mix:"#ff9800"},Yw=["Mix up your focus areas to build balanced strength.","Consistency beats intensity  show up and press play.","Try a new difficulty level to keep your body guessing.","Short on time? A 5-minute blast still counts.","Save your favourite combos so you can replay them anytime.","Your body adapts  switch equipment for fresh stimulus.","Rest days are growth days. Listen to your body.","Challenge yourself: go one level higher this week."];function h5(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function f5(s){const e=[...s];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function m5(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Rr(),{isDark:l,toggleTheme:u,accent:d}=Mi(),{isPremium:p,FREE_RANDOMISER_DURATIONS:g,FREE_RANDOMISER_WEEKLY_LIMIT:y}=ic(),b=Xs(),[k,E]=w.useState("randomiser_hub"),[O,W]=w.useState(["bodyweight"]),[F,B]=w.useState("core"),[$,H]=w.useState("intermediate"),[K,ue]=w.useState(p?15:5),[Ee,we]=w.useState([]),[C,T]=w.useState(!1),R=w.useRef(!1),P=w.useRef([]),[M,D]=w.useState([]),[A,Ue]=w.useState(2),[Xe,Z]=w.useState(_i[1]),[je,Me]=w.useState(1),[Se,Y]=w.useState(0),[L,re]=w.useState("work"),[ve,_e]=w.useState(0),[be,ke]=w.useState(!1),[Be,st]=w.useState(0),[Pe,qt]=w.useState(!1),[un,Un]=w.useState(!1),[Ot,it]=w.useState(null),vt=w.useRef(null);w.useRef(null),w.useRef(null);const[ut,Bn]=w.useState(null),de=w.useCallback((V,J="info")=>{Bn({message:V,type:J}),setTimeout(()=>Bn(null),3e3)},[]),Mt=w.useCallback(async V=>{if(!t)throw new Error("Not signed in");const J=V&&typeof V=="object"&&V.type;await Nr(mt(ye,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:J?"":V,type:J?V.type:"text",imageURL:null,createdAt:Vs(),likeCount:0,commentCount:0,...J?{metadata:{title:V.title||"",subtitle:V.subtitle||"",stats:V.stats||[],quote:V.quote||"",badges:V.badges||[]}}:{}})},[t]),[bt,Bt]=w.useState(null),[et,It]=w.useState(null),[wt,an]=w.useState(0),[Ns,rs]=w.useState(0),[en,se]=w.useState([]),[Ne,pt]=w.useState(""),[xt,at]=w.useState(""),[$e,rt]=w.useState(!1),[qe,on]=w.useState(0),[dn,Ln]=w.useState(!1),[zn,Xn]=w.useState({}),Xt=w.useRef(null),Fn=w.useRef(null),[An,hn]=w.useState(0),[yr,oe]=w.useState(0),[Re,Ye]=w.useState(0),[gt,ct]=w.useState(0),[_n,Rn]=w.useState(0),[gn,kn]=w.useState(0),[As,is]=w.useState({beginner:0,intermediate:0,advanced:0}),hs=p?ng:ng.filter(V=>g.includes(V)),tn=!p&&An>=y,[In,Rs]=w.useState([]),[Ir,fi]=w.useState(!1),[Mr,Dr]=w.useState({}),[qn,Js]=w.useState(!1),[_s,Cn]=w.useState(!1),[On,as]=w.useState(""),[Ht,Zr]=w.useState(null),[Lr,ks]=w.useState([]),[bn,or]=w.useState({total:0,favouriteFocus:null,streak:0}),[mi,I]=w.useState(null),[z,ae]=w.useState(""),[le,Le]=w.useState(!1);w.useEffect(()=>{!i&&(!s||!e)&&b("/")},[s,e,i,b]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const J=mt(ye,"workoutLogs"),te=rn(J,St("clientId","==",t.id)),Ae=(await Zt(te)).docs.map(Ct=>Ct.data()),Ve=Ae.filter(Ct=>Ct.type!=="programme");ct(Ve.length);const He=Ve.reduce((Ct,fn)=>Ct+(fn.duration||0),0);Rn(He);const yt={beginner:0,intermediate:0,advanced:0};Ve.forEach(Ct=>{Ct.level&&yt[Ct.level]!==void 0&&yt[Ct.level]++}),is(yt);const Et=new Date,Ut=Et.getDay(),Je=Ut===0?-6:1-Ut,nn=new Date(Et);nn.setDate(Et.getDate()+Je),nn.setHours(0,0,0,0);const zs=nn.getTime(),Tt=Ae.filter(Ct=>{const fn=Ct.completedAt;return fn?(fn.toDate?fn.toDate().getTime():new Date(fn).getTime())>=zs:!1});hn(Tt.filter(Ct=>Ct.type!=="programme").length);let Hn=0;if(t)try{const Ct=await Ks(Ke(ye,"clientProgrammes",t.id));if(Ct.exists()){const fn=Ct.data(),Mn=fn.templateId;Hn=Tt.filter(fs=>fs.type==="programme"&&fs.programmeId===Mn).length,I(Mn);const Fs=eg.find(fs=>fs.id===Mn);Fs&&ae(Fs.name);const qs=u5[Mn];if(qs){const fs=Object.keys(fn.completedSessions||{}).length,Zs=qs.duration*qs.daysPerWeek;Ye(Zs>0?Math.round(fs/Zs*100):0)}}else I(null),ae(""),Ye(0)}catch{}oe(Hn);const Jn=Ve.map(Ct=>Ct.completedAt).filter(Boolean).map(Ct=>Ct.toDate?Ct.toDate().getTime():new Date(Ct).getTime()).sort((Ct,fn)=>fn-Ct);if(Jn.length===0)kn(0);else{const Ct=new Set;Jn.forEach(Zs=>{const lr=new Date(Zs),Li=lr.getDay(),Vr=Li===0?-6:1-Li,pi=new Date(lr);pi.setDate(lr.getDate()+Vr),pi.setHours(0,0,0,0),Ct.add(pi.getTime())});const fn=[...Ct].sort((Zs,lr)=>lr-Zs);let Mn=0;const Fs=new Date(Et),qs=Et.getDay()===0?-6:1-Et.getDay();Fs.setDate(Et.getDate()+qs),Fs.setHours(0,0,0,0);let fs=Fs.getTime();fn.includes(fs)||(fs-=10080*60*1e3);for(let Zs=0;Zs<200&&fn.includes(fs);Zs++)Mn++,fs-=10080*60*1e3;kn(Mn)}}catch(J){console.error("Error loading workout stats:",J)}finally{Le(!0)}})()},[s,t,k]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const J=rn(mt(ye,"savedWorkouts"),St("clientId","==",t.id)),pe=(await Zt(J)).docs.map(Ae=>({id:Ae.id,...Ae.data()}));pe.sort((Ae,Ve)=>{const He=Ae.savedAt?.toMillis?.()||Ae.savedAt?.seconds*1e3||0;return(Ve.savedAt?.toMillis?.()||Ve.savedAt?.seconds*1e3||0)-He}),Rs(pe)}catch(J){console.error("Error loading saved workouts:",J)}finally{fi(!0)}})()},[s,t]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const J=rn(mt(ye,"workoutLogs"),St("clientId","==",t.id),_u("completedAt","desc"),ku(20)),Ae=(await Zt(J)).docs.map(Tt=>Tt.data()).filter(Tt=>Tt.type!=="programme"&&Tt.type!=="muscle_group");ks(Ae.slice(0,3));const Ve=Ae.length,He={};Ae.forEach(Tt=>{Tt.focus&&(He[Tt.focus]=(He[Tt.focus]||0)+1)});const yt=Object.keys(He).sort((Tt,Hn)=>He[Hn]-He[Tt])[0]||null;let Et=0;if(Ae.length>0){const Tt=new Set;Ae.forEach(Ct=>{const fn=Ct.completedAt?.toDate?Ct.completedAt.toDate():Ct.completedAt?new Date(Ct.completedAt):null;fn&&Tt.add(new Date(fn.getFullYear(),fn.getMonth(),fn.getDate()).toDateString())});const Hn=new Date;Hn.setHours(0,0,0,0);let Jn=new Date(Hn);for(Tt.has(Jn.toDateString())||Jn.setDate(Jn.getDate()-1);Tt.has(Jn.toDateString());)Et++,Jn.setDate(Jn.getDate()-1)}or({total:Ve,favouriteFocus:yt,streak:Et});const Ut={core:null,upper:null,lower:null,fullbody:null};Ae.forEach(Tt=>{if(Tt.focus&&Ut[Tt.focus]===null&&Tt.completedAt){const Hn=Tt.completedAt.toDate?Tt.completedAt.toDate():new Date(Tt.completedAt);Ut[Tt.focus]=Hn}});let Je=null,nn=new Date;const zs=["core","upper","lower","fullbody"];for(const Tt of zs){if(Ut[Tt]===null){const Hn=Kr.find(Jn=>Jn.key===Tt)?.label||Tt;Je={focus:Tt,label:Hn,daysAgo:null,message:`You haven't tried ${Hn} yet`};break}if(Ut[Tt]<nn){nn=Ut[Tt];const Hn=Math.floor((Date.now()-Ut[Tt].getTime())/864e5);if(Hn>=5){const Jn=Kr.find(Ct=>Ct.key===Tt)?.label||Tt;Je={focus:Tt,label:Jn,daysAgo:Hn,message:`${Jn}  ${Hn} days ago`}}}}Zr(Je)}catch(J){console.error("Error loading recent workouts:",J)}})()},[s,t,k]);const Oe=async V=>{if(!(!s||!t||M.length===0)){Js(!0);try{const J=Kr.find(Ae=>Ae.key===F)?.label||F,te=V||`${J} ${K}min`,pe=await Nr(mt(ye,"savedWorkouts"),{clientId:t.id,name:te,equipment:O,focus:F,level:$,duration:K,exercises:M.map(Ae=>({name:Ae.name,videoUrl:Ae.videoUrl,isGif:Ae.isGif||!1})),rounds:A,savedAt:Vt.now()});Rs(Ae=>[{id:pe.id,clientId:t.id,name:te,equipment:O,focus:F,level:$,duration:K,exercises:M.map(Ve=>({name:Ve.name,videoUrl:Ve.videoUrl,isGif:Ve.isGif||!1})),rounds:A,savedAt:Vt.now()},...Ae]),de("Workout saved!","success")}catch(J){console.error("Error saving workout:",J),de("Failed to save workout","error")}finally{Js(!1),Cn(!1),as("")}}},We=async V=>{try{await Sr(Ke(ye,"savedWorkouts",V)),Rs(J=>J.filter(te=>te.id!==V)),de("Workout removed","info")}catch(J){console.error("Error deleting saved workout:",J),de("Failed to remove workout","error")}},Wt=V=>{W(V.equipment||["bodyweight"]),B(V.focus||"core"),H(V.level||"intermediate"),ue(V.duration||15);const J=_i.find(te=>te.key===(V.level||"intermediate"));Z(J),D(V.exercises||[]),Ue(V.rounds||2),E("preview")},Qe=async()=>{const V=JSON.parse(localStorage.getItem("mcf_last_randomiser")||"null");W(V?.equipment||["bodyweight"]),B(V?.focus||"core"),H(V?.level||"intermediate"),ue(V?.duration||15),setTimeout(()=>Yn(),50)},Kn=()=>{localStorage.setItem("mcf_last_randomiser",JSON.stringify({equipment:O,focus:F,level:$,duration:K}))};localStorage.getItem("mcf_last_randomiser");const os=()=>{const V=[];let J;F==="mix"?J=["core","upper","lower"]:F==="fullbody"?J=["upper","lower"]:J=[F];for(const te of O)for(const pe of J)V.push(`exercises/${te}/${pe}`);return V},Bs=async()=>{if(R.current){for(;R.current;)await new Promise(V=>setTimeout(V,200));return P.current}R.current=!0,T(!0);try{const V=os(),J=[];for(const Ve of V)try{const He=$a(Ga,Ve),yt=await zw(He);J.push(...yt.items)}catch{console.warn(`Folder ${Ve} not found, skipping.`)}if(J.length===0&&O.includes("bodyweight")&&F==="core")try{const Ve=$a(Ga,"core"),He=await zw(Ve);J.push(...He.items)}catch{console.warn("Legacy core/ folder not found either.")}if(J.length===0){const Ve=O.map(yt=>tg.find(Et=>Et.key===yt)?.label).join(" + "),He=Kr.find(yt=>yt.key===F)?.label;return de(`No exercises found for ${Ve} / ${He}. Upload videos to Firebase Storage.`,"error"),R.current=!1,T(!1),[]}const te=new Set,pe=J.filter(Ve=>{const He=Ve.name.replace(/\.(mp4|gif)$/i,"");return te.has(He)?!1:(te.add(He),!0)}),Ae=await Promise.all(pe.map(async Ve=>{const He=await Lo(Ve),yt=h5(Ve.name.replace(/\.(mp4|gif)$/i,"")),Et=/\.gif$/i.test(Ve.name);return{name:yt,videoUrl:He,isGif:Et}}));return P.current=Ae,we(Ae),R.current=!1,T(!1),Ae}catch(V){console.error("Error loading exercises:",V);const J=V.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${V.message||V.code||"Unknown error"}`;return de(J,"error"),R.current=!1,T(!1),[]}},Yn=async()=>{if(tn)return;Kn(),E("spinning"),P.current=[];const V=await Bs();if(V.length===0){E("setup");return}const J=_i.find(Ut=>Ut.key===$);Z(J);const te=J.work+J.rest,pe=K*60,Ae=Math.floor(pe/te);let Ve,He;Ae<=6?(Ve=Math.max(3,Math.floor(Ae/2)),He=Math.floor(Ae/Ve)):Ae<=12?(Ve=Math.min(6,Math.floor(Ae/2)),He=Math.floor(Ae/Ve)):(Ve=Math.min(10,Math.floor(Ae/2)),He=Math.floor(Ae/Ve)),He=Math.max(2,He);const yt=f5(V),Et=yt.slice(0,Math.min(Ve,yt.length));D(Et),Ue(He),setTimeout(()=>E("preview"),2e3)},vr=()=>{E("countdown"),st(3)};w.useEffect(()=>{if(k!=="countdown")return;if(Be<=0){E("workout"),Me(1),Y(0),re("work"),_e(Xe.work),ke(!1),dt();return}ze();const V=setTimeout(()=>st(J=>J-1),1e3);return()=>clearTimeout(V)},[Be,k]),w.useEffect(()=>{if(k!=="workout"||be)return;if(ve<=0){ma();return}ve<=3&&ze();const V=setTimeout(()=>_e(J=>J-1),1e3);return()=>clearTimeout(V)},[ve,k,be]);const ma=()=>{if(L==="work")re("rest"),_e(Xe.rest);else{const V=Se+1;if(V>=M.length){const J=je+1;if(J>A){qt(!0),Di();return}Me(J),Y(0)}else Y(V);re("work"),_e(Xe.work),dt()}},Di=async()=>{if(s)try{await Nr(mt(ye,"workoutLogs"),{clientId:t.id,level:$,duration:K,equipment:O,focus:F,exerciseCount:M.length,rounds:A,exercises:M.map(V=>V.name),completedAt:Vt.now()}),typeof fbq=="function"&&fbq("trackCustom","WorkoutCompleted",{duration:K,level:$,focus_area:F,exercise_count:M.length}),hn(V=>V+1),ct(V=>V+1),Rn(V=>V+K),is(V=>({...V,[$]:(V[$]||0)+1}))}catch(V){console.error("Error saving workout log:",V)}},Or=async(V,J,te)=>{if(!(!t||!J))try{const pe=t.id,Ae=await Ks(Ke(ye,"coreBuddyPBs",pe)),He=(Ae.exists()?Ae.data():null)?.exercises||{},yt=He[V];let Et=!1;if(yt?(J>(yt.weight||0)||J===(yt.weight||0)&&te>(yt.reps||0))&&(Et=!0):Et=!0,Et){const Ut={...He,[V]:{weight:J,reps:te,achievedAt:Vt.now()}};await Cs(Ke(ye,"coreBuddyPBs",pe),{clientId:t.id,exercises:Ut,updatedAt:Vt.now()}),de(`New PB! ${J}kg  ${te} reps`,"success"),ze()}}catch(pe){console.error("Error checking PB:",pe)}},pa=async V=>{if(It(V),V.interval){const pe=[];for(const Ae of V.exercises){let Ve=null,He=!1;if(Ae.storagePath)try{const yt=$a(Ga,Ae.storagePath);Ve=await Lo(yt),He=/\.gif$/i.test(Ae.storagePath)}catch{}pe.push({name:Ae.name,videoUrl:Ve,isGif:He})}D(pe),Ue(V.rounds),Z({work:V.work,rest:V.rest}),E("preview");return}const J={};for(const pe of V.exercises)if(pe.storagePath)try{const Ae=$a(Ga,pe.storagePath);J[pe.name]={url:await Lo(Ae),isGif:/\.gif$/i.test(pe.storagePath)}}catch{}Xn(J);const te=V.exercises.map(pe=>({name:pe.name,type:pe.type,targetSets:pe.sets,targetReps:pe.reps||0,targetTime:pe.time||0,sets:[]}));se(te),an(0),rs(0),pt(""),at(""),Ln(!1),rt(!1),on(0),setMgSessionBadges([]),setMgBadgeCelebration(null),E("muscle_workout")},Pr=()=>{const V=Xt.current;V&&(V.paused?(V.play(),Ln(!0)):(V.pause(),Ln(!1)))};w.useEffect(()=>{if(k!=="muscle_workout"||!$e||qe<=0){k==="muscle_workout"&&$e&&qe<=0&&(rt(!1),ze());return}return Fn.current=setTimeout(()=>on(V=>V-1),1e3),()=>clearTimeout(Fn.current)},[k,$e,qe]);const S=async()=>{const V=en[wt];let J={};if(V.type==="weighted"){const Ae=parseFloat(Ne)||0,Ve=parseInt(xt)||0;if(Ve===0){de("Enter your reps","error");return}J={weight:Ae,reps:Ve}}else if(V.type==="reps"){const Ae=parseInt(xt)||0;if(Ae===0){de("Enter your reps","error");return}J={reps:Ae}}else if(V.type==="timed"){const Ae=V.targetTime-qe;J={time:Math.max(Ae,1)}}const te=[...en];te[wt]={...V,sets:[...V.sets,J]},se(te),V.type==="weighted"&&J.weight>0&&await Or(V.name,J.weight,J.reps);const pe=V.sets.length+1;if(pe<V.targetSets)rs(pe),at(""),rt(!1),on(0);else if(wt+1<en.length){const Ae=wt+1;an(Ae),rs(0),pt(""),at(""),Ln(!1),rt(!1),on(0)}else await Q(te),Un(!0)},Q=async V=>{if(!(!s||!t))try{const J=V.reduce((te,pe)=>te+pe.sets.length,0);await Nr(mt(ye,"workoutLogs"),{clientId:t.id,type:"muscle_group",muscleGroup:bt,sessionId:et?.id,sessionName:et?.name,exerciseCount:V.length,totalSets:J,duration:Math.round(J*1.5),exercises:V.map(te=>({name:te.name,type:te.type,sets:te.sets})),completedAt:Vt.now()})}catch(J){console.error("Error saving muscle group workout log:",J)}},Ce=w.useRef(null),Ie=()=>(Ce.current||(Ce.current=new(window.AudioContext||window.webkitAudioContext)),Ce.current),ze=()=>{try{const V=Ie(),J=V.createOscillator(),te=V.createGain();J.connect(te),te.connect(V.destination),J.frequency.value=880,te.gain.value=.3,J.start(V.currentTime),J.stop(V.currentTime+.15)}catch{}},dt=()=>{try{const V=Ie(),J=V.createOscillator(),te=V.createGain();J.connect(te),te.connect(V.destination),J.frequency.value=1200,te.gain.value=.4,J.start(V.currentTime),J.stop(V.currentTime+.3)}catch{}};w.useEffect(()=>{if(k!=="workout"||L!=="work"||!M[Se]?.isGif)return;const J=setInterval(()=>{const te=vt.current;if(!te)return;const pe=te.getAttribute("src");te.removeAttribute("src"),setTimeout(()=>{vt.current&&vt.current.setAttribute("src",pe)},0)},4e3);return()=>clearInterval(J)},[k,L,Se,je,M]);const tt=(V,J,te)=>{const pe=Math.round(V/J*c5);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:r3.map((Ae,Ve)=>a.jsx("line",{x1:Ae.x1,y1:Ae.y1,x2:Ae.x2,y2:Ae.y2,className:Ve<pe?`wk-tick-filled ${te}`:"wk-tick-empty",strokeWidth:Ae.thick?"3":"2"},Ve))})},jt=()=>{const V=M.length*A;return((je-1)*M.length+Se+(L==="rest"?.5:0))/V},ht=ut&&a.jsx("div",{className:`toast-notification ${ut.type}`,children:ut.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(k==="menu")return a.jsx(Xo,{children:a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>E("randomiser_hub"),children:a.jsx("img",{src:$w,alt:"Randomise Workout",className:"wk-hero-bg"})}),!p&&a.jsxs("button",{className:"wk-hero-card wk-free-card-premium",onClick:()=>b("/upgrade"),children:[a.jsx("img",{src:Gw,alt:"Programmes",className:"wk-hero-bg"}),a.jsx("div",{className:"wk-free-card-overlay"}),a.jsxs("div",{className:"wk-free-card-content",children:[a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{className:"wk-free-card-label",children:"Unlock Full Access"})]})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[eg.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:eg.map((V,J)=>V.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>b("/client/core-buddy/programmes",{state:{templateId:V.id}}),style:{animationDelay:`${J*.06}s`},children:[a.jsx("img",{src:V.image,alt:V.name,className:"wk-prog-img"}),J===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},V.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>b("/client/core-buddy/programmes",{state:{templateId:V.id}}),style:{animationDelay:`${J*.06}s`},children:[a.jsx("img",{src:Gw,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:d5[V.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[V.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:V.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:V.name.toUpperCase()}),a.jsxs("p",{children:[V.daysPerWeek,"x per week  ",V.focus==="fullbody"?"Full Body":V.focus.charAt(0).toUpperCase()+V.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),J===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},V.id))})})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[Xc.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:Xc.map((V,J)=>a.jsx("button",{className:`wk-muscle-hero-card${V.image?" wk-muscle-thumb":""}`,onClick:()=>{Bt(V.key),E("muscle_sessions")},style:{animationDelay:`${J*.05}s`},children:V.image?a.jsx("img",{src:V.image,alt:V.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:$w,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:Zp[V.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:V.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:V.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[Kw[V.key]?.length||0," sessions"]})]})]})]})},V.key))})]})]}),a.jsx(Jr,{active:"workouts"}),ht]})});if(k==="randomiser_hub"){const V=JSON.parse(localStorage.getItem("mcf_last_randomiser")||"null")||{focus:"core",level:"intermediate",duration:15},J=Kr.find(pe=>pe.key===V.focus)?.label||V.focus,te=_i.find(pe=>pe.key===V.level)?.label||V.level;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-hub-heading wk-hub-heading-hero",children:[a.jsx("div",{className:"wk-hub-circle-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-hub-circle-logo"})}),a.jsx("h2",{children:"Randomiser"}),a.jsx("p",{children:"Generate, save & replay workouts"})]}),a.jsxs("div",{className:"wk-hub-launch-zone",children:[bn.total>0&&a.jsxs("div",{className:"wk-hub-stats",children:[a.jsxs("div",{className:"wk-hub-stat",children:[a.jsx("span",{className:"wk-hub-stat-value",children:bn.total}),a.jsx("span",{className:"wk-hub-stat-label",children:"Workouts"})]}),bn.streak>0&&a.jsxs("div",{className:"wk-hub-stat",children:[a.jsxs("span",{className:"wk-hub-stat-value",children:[bn.streak,a.jsx("small",{children:"d"})]}),a.jsx("span",{className:"wk-hub-stat-label",children:"Streak"})]}),bn.favouriteFocus&&a.jsxs("div",{className:"wk-hub-stat",children:[a.jsx("span",{className:"wk-hub-stat-value wk-hub-stat-focus",style:{color:fh[bn.favouriteFocus]||"var(--color-primary)"},children:Kr.find(pe=>pe.key===bn.favouriteFocus)?.label||bn.favouriteFocus}),a.jsx("span",{className:"wk-hub-stat-label",children:"Top Focus"})]})]}),a.jsxs("div",{className:"wk-hub-actions",children:[a.jsxs("button",{className:"wk-hub-action-btn wk-hub-new wk-hub-new-glow",onClick:()=>E("setup"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New Workout"]}),a.jsxs("button",{className:"wk-hub-action-btn wk-hub-quick",onClick:Qe,disabled:tn,children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),"Quick Start",a.jsxs("span",{className:"wk-hub-quick-meta",children:[J,"  ",te,"  ",V.duration,"min"]})]})]}),Ht&&a.jsxs("button",{className:"wk-hub-suggestion",onClick:()=>{B(Ht.focus),E("setup")},children:[a.jsx("svg",{className:"wk-hub-suggestion-bulb",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),a.jsxs("div",{className:"wk-hub-suggestion-info",children:[a.jsx("span",{className:"wk-hub-suggestion-label",children:Ht.message}),a.jsx("span",{className:"wk-hub-suggestion-cta",children:"Tap to set up "})]}),a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"wk-hub-tip",children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),Yw[Math.floor(Date.now()/864e5)%Yw.length]]})]}),p&&a.jsxs("div",{className:"wk-hub-section wk-hub-section--saved",children:[a.jsxs("h3",{className:"wk-hub-section-title",children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Saved Workouts",In.length>0&&a.jsx("span",{className:"wk-hub-count",children:In.length})]}),Ir?In.length===0?a.jsxs("div",{className:"wk-hub-empty wk-hub-empty-enhanced",children:[a.jsx("svg",{className:"wk-hub-empty-icon",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),a.jsx("p",{children:a.jsx("strong",{children:"No saved workouts yet"})}),a.jsx("p",{className:"wk-hub-empty-sub",children:"Generate a workout and hit save to stash it here for quick replay."})]}):a.jsx("div",{className:"wk-hub-saved-categories",children:Kr.map(pe=>{const Ae=In.filter(He=>He.focus===pe.key);if(Ae.length===0)return null;const Ve=Mr[pe.key]||!1;return a.jsxs("div",{className:"wk-hub-saved-cat",children:[a.jsxs("button",{className:`wk-hub-saved-cat-header${Ve?" wk-hub-saved-cat-open":""}`,style:{"--cat-color":fh[pe.key]||"var(--color-primary)"},onClick:()=>Dr(He=>({...He,[pe.key]:!He[pe.key]})),children:[a.jsxs("span",{className:"wk-hub-saved-cat-label",children:[a.jsx("span",{className:"wk-hub-focus-pill",style:{"--pill-color":fh[pe.key]||"var(--color-primary)"},children:pe.label}),a.jsx("span",{className:"wk-hub-saved-cat-count",children:Ae.length})]}),a.jsx("svg",{className:`wk-hub-saved-cat-chevron${Ve?" wk-hub-saved-cat-chevron-open":""}`,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),Ve&&a.jsx("div",{className:"wk-hub-saved-list",children:Ae.map((He,yt)=>{const Et=(He.equipment||[]).map(Je=>tg.find(nn=>nn.key===Je)?.label||Je).join(", "),Ut=_i.find(Je=>Je.key===He.level)?.label||He.level;return a.jsxs("div",{className:"wk-hub-saved-card",style:{animationDelay:`${yt*.05}s`},children:[a.jsxs("button",{className:"wk-hub-saved-main",onClick:()=>Wt(He),children:[a.jsxs("div",{className:"wk-hub-saved-info",children:[a.jsx("span",{className:"wk-hub-saved-name",children:He.name}),a.jsx("span",{className:"wk-hub-saved-tags",children:a.jsxs("span",{className:"wk-hub-saved-meta",children:[Ut,"  ",He.duration,"min  ",(He.exercises||[]).length," ex"]})}),Et&&a.jsx("span",{className:"wk-hub-saved-equip",children:Et})]}),a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]}),a.jsx("button",{className:"wk-hub-saved-delete",onClick:()=>We(He.id),"aria-label":"Remove saved workout",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"3 6 5 6 21 6"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]},He.id)})})]},pe.key)})}):a.jsx("div",{className:"wk-hub-empty",children:a.jsx("div",{className:"wk-loading-spinner"})})]}),a.jsxs("div",{className:"wk-hub-section wk-hub-section--recent",children:[a.jsxs("h3",{className:"wk-hub-section-title",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Recent"]}),Lr.length===0?a.jsxs("div",{className:"wk-hub-empty wk-hub-empty-enhanced",children:[a.jsxs("svg",{className:"wk-hub-empty-icon",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),a.jsx("p",{children:a.jsx("strong",{children:"No workouts yet"})}),a.jsx("p",{className:"wk-hub-empty-sub",children:"Complete your first workout to see your history here."})]}):a.jsx("div",{className:"wk-hub-recent-list",children:Lr.map((pe,Ae)=>{const Ve=Kr.find(Ut=>Ut.key===pe.focus)?.label||pe.focus||"",He=_i.find(Ut=>Ut.key===pe.level)?.label||pe.level||"",yt=pe.completedAt?.toDate?pe.completedAt.toDate():pe.completedAt?new Date(pe.completedAt):null,Et=yt?(()=>{const Ut=Math.floor((Date.now()-yt.getTime())/1e3);return Ut<3600?`${Math.floor(Ut/60)}m ago`:Ut<86400?`${Math.floor(Ut/3600)}h ago`:`${Math.floor(Ut/86400)}d ago`})():"";return a.jsxs("button",{className:"wk-hub-recent-card",style:{animationDelay:`${Ae*.05}s`},onClick:()=>{B(pe.focus||"core"),H(pe.level||"intermediate"),ue(pe.duration||15),pe.equipment&&W(pe.equipment),E("setup")},children:[a.jsx("div",{className:"wk-hub-recent-info",children:a.jsxs("span",{className:"wk-hub-recent-tags",children:[a.jsx("span",{className:"wk-hub-focus-pill",style:{"--pill-color":fh[pe.focus]||"var(--color-primary)"},children:Ve}),a.jsxs("span",{className:"wk-hub-recent-meta",children:[He,"  ",pe.duration||"?","min  ",pe.exerciseCount||"?"," ex"]})]})}),a.jsxs("div",{className:"wk-hub-recent-action",children:[a.jsx("span",{className:"wk-hub-recent-time",children:Et}),a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]},Ae)})})]})]}),a.jsx(Jr,{active:"workouts"}),ht]})}if(k==="setup"){const V=Kr.find(te=>te.key===F)?.label||F,J=_i.find(te=>te.key===$)?.label||$;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>E("randomiser_hub"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsx("div",{className:"wk-stats-row",children:[{label:"Total",value:`${gt}`,pct:gt>0?Math.min(Math.round(gt/100*100),100):0,color:"#14b8a6",size:"normal"},{label:"This Week",value:`${An}/${Jp}`,pct:Math.round(Math.min(An,Jp)/Jp*100),color:"var(--color-primary)",size:"large"},{label:"Wk Streak",value:`${gn}`,pct:gn>0?Math.min(Math.round(gn/12*100),100):0,color:"#38B6FF",size:"normal"}].map(te=>{const Ae=2*Math.PI*38,Ve=Ae-te.pct/100*Ae;return a.jsxs("div",{className:`wk-stat-item${te.size==="large"?" wk-stat-large":""}`,children:[a.jsxs("div",{className:"wk-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wk-stat-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"wk-stat-fill",cx:"50",cy:"50",r:38,style:{stroke:te.color},strokeDasharray:Ae,strokeDashoffset:Ve})]}),a.jsx("span",{className:"wk-stat-value",style:{color:te.color},children:te.value})]}),a.jsx("span",{className:"wk-stat-label",children:te.label})]},te.label)})}),a.jsxs("div",{className:"wk-setup-flow",children:[a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:Kr.map(te=>a.jsxs("button",{className:`wk-equip-btn${F===te.key?" active":""}${te.key==="mix"?" wk-mix-btn":""}`,onClick:()=>{ze(),B(te.key)},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:te.icon})}),a.jsx("span",{children:te.label})]},te.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:_i.map(te=>a.jsxs("button",{className:`wk-level-card wk-level-${te.key}${$===te.key?" active":""}`,onClick:()=>{ze(),H(te.key)},children:[a.jsx("span",{className:"wk-level-name",children:te.label}),a.jsx("span",{className:"wk-level-desc",children:te.desc})]},te.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:ng.map(te=>{const pe=!hs.includes(te);return a.jsxs("button",{className:`wk-time-btn${K===te?" active":""}${pe?" locked":""}`,onClick:()=>{pe||(ze(),ue(te))},disabled:pe,children:[a.jsx("span",{className:"wk-time-num",children:te}),a.jsx("span",{className:"wk-time-unit",children:pe?a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}):"min"})]},te)})})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:tg.map(te=>{const pe=O.includes(te.key);return a.jsxs("button",{className:`wk-equip-btn${pe?" active":""}`,onClick:()=>{pe&&O.length===1||(ze(),W(Ae=>pe&&Ae.length===1?Ae:pe?Ae.filter(Ve=>Ve!==te.key):[...Ae,te.key]))},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:te.icon})}),a.jsx("span",{children:te.label})]},te.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[V,"  ",J,"  ",K," min"]})})]})]}),a.jsxs("div",{className:"wk-go-sticky",children:[tn&&a.jsx("p",{className:"wk-free-limit-msg",children:"You've used your free workout this week. Upgrade for unlimited access."}),a.jsx("button",{className:"wk-randomise-btn",onClick:Yn,disabled:C||tn,children:C?"Loading exercises...":tn?"Limit Reached":"Randomise Workout"})]}),ht]})}if(k==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:s3.map((V,J)=>a.jsx("line",{x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,className:"wk-spin-tick",strokeWidth:V.thick?"3.5":"2",style:{animationDelay:`${J*.03}s`}},J))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),ht]});if(k==="preview"){const V=et?.interval?{work:et.work,rest:et.rest}:_i.find(te=>te.key===$),J=M.length*A*(V.work+V.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>E(et?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[et?.interval&&a.jsx("h2",{className:"mg-preview-title",children:et.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:M.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:A}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(J/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[V.work,"/",V.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:M.map((te,pe)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${pe*.06}s`},onClick:()=>it(te),children:[a.jsx("span",{className:"wk-preview-num",children:pe+1}),a.jsx("div",{className:"wk-preview-thumb",children:te.isGif?a.jsx("img",{src:te.videoUrl,alt:te.name,loading:"lazy"}):a.jsx("video",{src:`${te.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:te.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},pe))}),Ot&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>it(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:te=>te.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>it(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Ot.isGif?a.jsx("img",{src:Ot.videoUrl,alt:Ot.name}):a.jsx("video",{src:Ot.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Ot.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!et?.interval&&a.jsxs("div",{className:"wk-preview-actions-row",children:[a.jsxs("button",{className:"wk-btn-secondary wk-btn-half",onClick:()=>Yn(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),p&&a.jsxs("button",{className:"wk-btn-secondary wk-btn-half",onClick:()=>Cn(!0),disabled:qn,children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save"]})]}),a.jsx("button",{className:"wk-btn-primary wk-btn-full",onClick:vr,children:"Start Workout"})]}),_s&&a.jsx("div",{className:"wk-save-modal-backdrop",onClick:()=>Cn(!1),children:a.jsxs("div",{className:"wk-save-modal",onClick:te=>te.stopPropagation(),children:[a.jsx("h3",{children:"Save Workout"}),a.jsx("p",{children:"Give this workout a name (or leave blank for auto-name)"}),a.jsx("input",{type:"text",className:"wk-save-input",value:On,onChange:te=>as(te.target.value),placeholder:`${Kr.find(te=>te.key===F)?.label||F} ${K}min`,maxLength:40,autoFocus:!0}),a.jsxs("div",{className:"wk-save-modal-actions",children:[a.jsx("button",{className:"wk-btn-secondary",onClick:()=>Cn(!1),children:"Cancel"}),a.jsx("button",{className:"wk-btn-primary",onClick:()=>Oe(On),disabled:qn,children:qn?"Saving...":"Save"})]})]})})]})]})}if(k==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":d,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:Be}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(k==="workout"){const V=M[Se],J=L==="work"?Xe.work:Xe.rest,te=L==="rest"?Se+1<M.length?M[Se+1]:je<A?M[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"wk-video-container",children:L==="work"?V.isGif?a.jsx("img",{ref:vt,className:"wk-video",src:V.videoUrl,alt:V.name},V.videoUrl):a.jsx("video",{className:"wk-video",src:V.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},V.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),te&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",te.name]})]})}),a.jsx("div",{className:"wk-back-row",children:a.jsxs("button",{className:"wk-back-btn",onClick:()=>{confirm("Leave workout?")&&E("randomiser_hub")},children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[Se+1," / ",M.length]}),a.jsx("h2",{className:"wk-exercise-name",children:V.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",je," of ",A]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[tt(ve,J,L==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:ve}),a.jsx("span",{className:`wk-timer-phase ${L}`,children:L==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&E("randomiser_hub")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>ke(!be),children:be?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{_e(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${jt()*100}%`}})}),Pe&&(()=>{const pe=_i.find(Ve=>Ve.key===$),Ae=M.length*A*(pe.work+pe.rest);return a.jsxs(a.Fragment,{children:[a.jsx(Hg,{title:"Workout Complete!",stats:[{value:Math.ceil(Ae/60),label:"Minutes"},{value:M.length*A,label:"Intervals"},{value:A,label:"Rounds"}],hideShare:!p,onShareJourney:t?Mt:null,userName:t?.name,onDismissStart:()=>E("randomiser_hub"),onDone:()=>{qt(!1),It(null),Bt(null)}}),!et?.interval&&a.jsxs("button",{className:"wk-complete-save-btn",onClick:()=>Cn(!0),disabled:qn,children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save This Workout"]}),_s&&a.jsx("div",{className:"wk-save-modal-backdrop",onClick:()=>Cn(!1),style:{zIndex:10001},children:a.jsxs("div",{className:"wk-save-modal",onClick:Ve=>Ve.stopPropagation(),children:[a.jsx("h3",{children:"Save Workout"}),a.jsx("p",{children:"Give this workout a name (or leave blank for auto-name)"}),a.jsx("input",{type:"text",className:"wk-save-input",value:On,onChange:Ve=>as(Ve.target.value),placeholder:`${Kr.find(Ve=>Ve.key===F)?.label||F} ${K}min`,maxLength:40,autoFocus:!0}),a.jsxs("div",{className:"wk-save-modal-actions",children:[a.jsx("button",{className:"wk-btn-secondary",onClick:()=>Cn(!1),children:"Cancel"}),a.jsx("button",{className:"wk-btn-primary",onClick:()=>Oe(On),disabled:qn,children:qn?"Saving...":"Save"})]})]})})]})})()]})}if(k==="muscle_sessions"){const V=Xc.find(te=>te.key===bt),J=Kw[bt]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>E("randomiser_hub"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:Zp[bt]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:V?.icon})})}),a.jsxs("h2",{children:[V?.label," Workouts"]}),a.jsxs("p",{children:[J.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:J.map((te,pe)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{It(te),E("muscle_overview")},style:{animationDelay:`${pe*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:te.name}),a.jsx("p",{children:te.desc}),a.jsx("div",{className:"mg-session-meta",children:te.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[te.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[te.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[te.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const Ae=te.exercises.map(yt=>yt.sets||0),Ve=Math.min(...Ae),He=Math.max(...Ae);return Ve===He?`${Ve} sets each`:`${Ve}-${He} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},te.id))})]}),ht]})}if(k==="muscle_overview"){const V=et;if(!V)return null;const J=Xc.find(te=>te.key===bt);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>E("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:V.image?void 0:{background:Zp[bt]},children:V.image?a.jsx("img",{src:V.image,alt:V.name,className:"mg-overview-hero-img"}):a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:J?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:V.name}),V.level&&a.jsx("span",{className:"mg-overview-level",children:V.level})]}),a.jsx("p",{className:"mg-overview-desc",children:V.desc})]}),V.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:V.overview})]}),V.tips&&V.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:V.tips.map((te,pe)=>a.jsx("li",{children:te},pe))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",V.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:V.exercises.map((te,pe)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:pe+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:te.name}),V.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[V.work,"s work / ",V.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[te.sets," sets  ",te.reps?`${te.reps} reps`:`${te.time}s`,te.type==="weighted"&&"  weighted"]})]})]},pe))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>pa(V),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),ht]})}if(k==="muscle_workout"){const V=et;if(!V)return null;const J=V.exercises[wt],te=en[wt];if(!J||!te)return null;const pe=te.sets.length,Ae=V.exercises.length,Ve=V.exercises.reduce((Je,nn)=>Je+(nn.sets||0),0),yt=en.reduce((Je,nn)=>Je+nn.sets.length,0)/Ve*100,Et=zn[J.name];J.type==="timed"&&qe===0&&!$e&&pe===Ns&&setTimeout(()=>on(J.time),0);const Ut=pe+1<J.sets?"Log Set":wt+1<Ae?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${yt}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&E("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",wt+1,"/",Ae]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[Et?a.jsxs("div",{className:"mg-video-container",onClick:Pr,children:[Et.isGif?a.jsx("img",{className:"mg-video",src:Et.url,alt:J.name}):a.jsx("video",{ref:Xt,className:"mg-video",src:Et.url,loop:!0,muted:!0,playsInline:!0},J.name),!dn&&!Et.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:J.name}),a.jsx("span",{className:`mg-ex-type-badge ${J.type}`,children:J.type==="weighted"?"Weight + Reps":J.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",pe+1," of ",J.sets]}),J.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",J.reps," reps"]}),J.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",J.time,"s"]})]}),J.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:Ne,onChange:Je=>pt(Je.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:xt,onChange:Je=>at(Je.target.value),placeholder:"0"})]})]}),J.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:xt,onChange:Je=>at(Je.target.value),placeholder:"0"})]})}),J.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[qe,"s"]})}),$e?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>rt(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{qe===0&&on(J.time),rt(!0)},children:qe<J.time&&qe>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:S,children:Ut}),te.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:te.sets.map((Je,nn)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",nn+1,": ",Je.weight!=null?`${Je.weight}kg  ${Je.reps}`:Je.reps!=null?`${Je.reps} reps`:`${Je.time}s`]})]},nn))})]})]}),ht,un&&(()=>{const Je=en.reduce((Tt,Hn)=>Tt+Hn.sets.length,0),nn=Xc.find(Tt=>Tt.key===bt)?.label||"",zs=[{value:en.length,label:"Exercises"},{value:Je,label:"Sets"}];return a.jsx(Hg,{title:`${nn} Complete!`,subtitle:et?.name,stats:zs,hideShare:!p,onShareJourney:t?Mt:null,userName:t?.name,onDismissStart:()=>E("randomiser_hub"),onDone:()=>{Un(!1),It(null),Bt(null)}})})()]})}return null}const p5=[{key:"trained",label:"Trained",icon:"M4 10v4M8 7v10M8 12h8M16 7v10M20 10v4",color:"#A12F3A",darkColor:"#E8475A"},{key:"protein",label:"Hit Protein",icon:"M12 22c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10zM12 18c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z",color:"#4caf50",darkColor:"#5CDB61"},{key:"steps",label:"10k Steps",icon:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20M4 12.5A2.5 2.5 0 0 1 6.5 10H20M4 5.5A2.5 2.5 0 0 1 6.5 3H20",color:"#ff9800",darkColor:"#FFB020"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",color:"#7c3aed",darkColor:"#9B5AF2"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z",color:"#2196f3",darkColor:"#42A5F5"}],g5="M12 2l2.4 7.2L22 12l-7.6 2.8L12 22l-2.4-7.2L2 12l7.6-2.8z",y5="#e91e63",v5="#FF4D88",b5=700,Wg=42,Al=2*Math.PI*Wg,mh=["Every day counts. See you tomorrow!","Consistency is your superpower.","Perfect day  keep the streak alive!","You showed up for yourself today."];function w5(s){const e=new Date(s),t=e.getDay(),i=t===0?-6:1-t;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function So(s){return s.toISOString().split("T")[0]}function x5(s){return Array.from({length:7},(e,t)=>{const i=new Date(s);return i.setDate(s.getDate()+t),i})}function _5(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Rr(),{isDark:l,toggleTheme:u,accent:d}=Mi(),{isPremium:p,FREE_HABIT_LIMIT:g}=ic(),y=Xs(),[b,k]=w.useState({}),[E,O]=w.useState([]),[W,F]=w.useState(!0),[B,$]=w.useState(!1),[H,K]=w.useState(0),[ue,Ee]=w.useState(null),[we,C]=w.useState(null),[T,R]=w.useState(!1),[P,M]=w.useState(!1),[D,A]=w.useState(!1),[Ue,Xe]=w.useState(!1),[Z,je]=w.useState(""),[Me,Se]=w.useState(null),[Y,L]=w.useState([]),[re,ve]=w.useState(null),_e=w.useRef(null),be=w.useRef(null),ke=w.useRef(null),Be=w.useRef(null),st=w.useRef(!1),Pe=w.useRef({}),qt=w.useRef([]),un=w.useRef([]),Un=w.useRef(null),Ot=w.useRef(mh[Math.floor(Math.random()*mh.length)]),it=w.useCallback((oe,Re="info")=>{Ee({message:oe,type:Re}),setTimeout(()=>Ee(null),3e3)},[]),vt=new Date,ut=So(vt),Bn=w5(vt),de=x5(Bn),Mt=["M","T","W","T","F","S","S"],bt=(oe,Re)=>l&&Re?Re:oe,Bt=[...p5.filter(oe=>!Y.includes(oe.key)).map(oe=>({...oe,color:bt(oe.color,oe.darkColor)})),...E.map(oe=>({key:`custom_${oe.id}`,label:oe.label,icon:g5,color:bt(y5,v5),isCustom:!0,id:oe.id}))],et=p?Bt:Bt.slice(0,g);w.useEffect(()=>{!i&&(!s||!e)&&y("/")},[s,e,i,y]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const Re=mt(ye,"habitLogs"),Ye=rn(Re,St("clientId","==",t.id)),gt=await Zt(Ye),ct={};gt.docs.forEach(kn=>{const As=kn.data();ct[As.date]={...As,_id:kn.id}}),k(ct);const _n=await Ks(Ke(ye,"customHabits",t.id));if(_n.exists()){const kn=_n.data();O(kn.habits||[]),L(kn.hiddenDefaults||[])}let Rn=0;const gn=new Date(vt);for(;;){const kn=So(gn),As=ct[kn];if(As)if(Object.values(As.habits||{}).filter(Boolean).length>=3)Rn++,gn.setDate(gn.getDate()-1);else break;else if(kn===ut)gn.setDate(gn.getDate()-1);else break}K(Rn)}catch(Re){console.error("Error loading habit logs:",Re)}finally{F(!1)}})()},[s,t]);const It=b[ut]||{habits:{}};w.useEffect(()=>{Object.values(It.habits||{}).filter(Boolean).length<et.length&&D&&A(!1)},[et.length,It.habits]);const wt=async oe=>{if(!(!s||B||It.habits?.[oe])){qt.current=[...Array(10)].map((Ye,gt)=>{const ct=gt/10*2*Math.PI,_n=18+Math.random()*20;return{tx:Math.cos(ct)*_n,ty:Math.sin(ct)*_n,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),C(oe),setTimeout(()=>C(null),700),navigator.vibrate&&navigator.vibrate(50),$(!0);try{const gt={...It.habits||{},[oe]:!0},ct=It._id||`${t.id}_${ut}`;k(Rn=>({...Rn,[ut]:{clientId:t.id,date:ut,habits:gt,_id:ct}})),await Cs(Ke(ye,"habitLogs",ct),{clientId:t.id,date:ut,habits:gt}),Object.values(gt).filter(Boolean).length===et.length&&!D&&(Ot.current=mh[Math.floor(Math.random()*mh.length)],un.current=[...Array(80)].map((Rn,gn)=>({x:5+Math.random()*90,delay:Math.random()*3.5,color:["#A12F3A","#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#FFD700","#ffffff","#9c27b0"][gn%9],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.8+Math.random()*2,width:4+Math.random()*6,height:4+Math.random()*8,shape:gn%3})),setTimeout(()=>{R(!0),A(!0),setTimeout(()=>Un.current?.focus(),1100)},400))}catch(Ye){console.error("Error saving habit:",Ye),it("Failed to save. Try again.","error"),k(gt=>({...gt,[ut]:{...gt[ut],habits:{...gt[ut]?.habits||{},[oe]:!1}}}))}finally{$(!1)}}},an=async oe=>{if(!(!s||B)){$(!0);try{const Ye={...It.habits||{},[oe]:!1},gt=It._id||`${t.id}_${ut}`;await Cs(Ke(ye,"habitLogs",gt),{clientId:t.id,date:ut,habits:Ye}),k(ct=>({...ct,[ut]:{clientId:t.id,date:ut,habits:Ye,_id:gt}}))}catch(Re){console.error("Error undoing habit:",Re),it("Failed to undo. Try again.","error")}finally{$(!1)}}},Ns=oe=>{if(It.habits?.[oe]||!1||B||Be.current)return;Be.current=oe,ve(oe),be.current=performance.now();const Ye=Pe.current[oe];Ye&&(Ye.style.strokeDashoffset=Al);const gt=ct=>{const _n=ct-be.current,Rn=Math.min(_n/b5,1),gn=Pe.current[oe];gn&&(gn.style.strokeDashoffset=Al-Rn*Al),Rn<1?ke.current=requestAnimationFrame(gt):(Be.current=null,st.current=!0,ke.current=null,ve(null),wt(oe))};ke.current=requestAnimationFrame(gt)},rs=()=>{if(!Be.current)return;const oe=Be.current;Be.current=null,ke.current&&(cancelAnimationFrame(ke.current),ke.current=null),_e.current&&(clearTimeout(_e.current),_e.current=null),Pe.current[oe]&&(Pe.current[oe].style.strokeDashoffset=Al),ve(null),be.current=null};w.useEffect(()=>()=>{ke.current&&cancelAnimationFrame(ke.current),_e.current&&clearTimeout(_e.current)},[]);const en=w.useCallback(async oe=>{if(!t)throw new Error("Not signed in");const Re=oe&&typeof oe=="object"&&oe.type;await Nr(mt(ye,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:Re?"":oe,type:Re?oe.type:"text",imageURL:null,createdAt:Vs(),likeCount:0,commentCount:0,...Re?{metadata:{title:oe.title||"",subtitle:oe.subtitle||"",stats:oe.stats||[],quote:oe.quote||"",badges:oe.badges||[]}}:{}})},[t]),se=async()=>{const oe=Z.trim();if(!oe)return;if(!t?.id){it("Still loading, try again","error");return}const Re=Date.now().toString(36),Ye=[...E,{id:Re,label:oe}];try{await Cs(Ke(ye,"customHabits",t.id),{clientId:t.id,habits:Ye,hiddenDefaults:Y},{merge:!0}),O(Ye),je(""),Xe(!1),it(`Added "${oe}"`,"success")}catch(gt){console.error("Error adding custom habit:",gt),it(gt?.code==="permission-denied"?"Permission denied  check Firestore rules for customHabits":`Failed to add habit: ${gt?.message||"Unknown error"}`,"error")}},Ne=async oe=>{if(!t?.id)return;const Re=E.filter(Ye=>Ye.id!==oe);try{await Cs(Ke(ye,"customHabits",t.id),{clientId:t.id,habits:Re,hiddenDefaults:Y},{merge:!0}),O(Re),Se(null),it("Habit removed","success")}catch(Ye){console.error("Error deleting habit:",Ye),it("Failed to remove","error")}},pt=async oe=>{if(!t?.id)return;const Re=[...Y,oe];try{await Cs(Ke(ye,"customHabits",t.id),{clientId:t.id,habits:E,hiddenDefaults:Re},{merge:!0}),L(Re),Se(null),it("Habit removed","success")}catch(Ye){console.error("Error hiding default habit:",Ye),it("Failed to remove","error")}},xt=de.map(oe=>{const Re=So(oe),Ye=b[Re],gt=Ye?Object.values(Ye.habits||{}).filter(Boolean).length:0;return{date:oe,dateStr:Re,completed:gt,total:et.length}}),at=xt.reduce((oe,Re)=>oe+Re.completed,0),$e=xt.reduce((oe,Re)=>oe+Re.total,0),rt=$e>0?Math.round(at/$e*100):0,qe=Object.values(It.habits||{}).filter(Boolean).length,on=et.length>0?Math.round(qe/et.length*100):0,dn=qe===et.length&&et.length>0,Ln=(()=>{const oe=Object.keys(b).sort();let Re=0,Ye=0,gt=null;for(const ct of oe){const _n=b[ct];if(Object.values(_n.habits||{}).filter(Boolean).length>=3){if(gt){const gn=new Date(gt);Ye=(new Date(ct)-gn)/(1e3*60*60*24)===1?Ye+1:1}else Ye=1;Ye>Re&&(Re=Ye),gt=ct}else Ye=0,gt=null}return Math.max(Re,H)})(),zn=new Date(vt.getFullYear(),vt.getMonth(),1),Xn=zn.toLocaleString("default",{month:"long"}),Xt=new Date(vt.getFullYear(),vt.getMonth()+1,0).getDate(),Fn=(zn.getDay()+6)%7,An=Array.from({length:Xt},(oe,Re)=>{const Ye=new Date(vt.getFullYear(),vt.getMonth(),Re+1),gt=So(Ye),ct=b[gt],_n=ct?Object.values(ct.habits||{}).filter(Boolean).length:0,Rn=Ye>vt;return{day:Re+1,dateStr:gt,completed:_n,total:et.length,isFuture:Rn,isToday:gt===ut}}),hn=et.map(oe=>({...oe,days:de.map(Re=>{const Ye=So(Re);return b[Ye]?.habits?.[oe.key]||!1})})),yr=xt.filter(oe=>oe.completed===oe.total&&oe.total>0).length;return a.jsx(Xo,{children:a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||W?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-hero anim-fade-up",children:[a.jsxs("div",{className:`cbc-progress-ring${dn?" cbc-ring-complete":""}`,children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-on/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-count",children:[qe,a.jsx("span",{className:"cbc-ring-divider",children:"/"}),et.length]}),a.jsx("span",{className:"cbc-ring-label",children:dn?"complete":"today"})]})]}),a.jsx("p",{className:"cbc-hero-tagline",children:dn?"You showed up for yourself today.":qe===0?"Start your day strong.":`${et.length-qe} to go  keep pushing.`})]}),a.jsxs("div",{className:"cbc-streak-card anim-fade-up-d1",children:[a.jsx("div",{className:"cbc-streak-icon",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}),a.jsxs("div",{className:"cbc-streak-info",children:[a.jsx("span",{className:"cbc-streak-count",children:H}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]}),a.jsxs("div",{className:"cbc-streak-best",children:[a.jsx("span",{className:"cbc-streak-best-val",children:Ln}),a.jsx("span",{className:"cbc-streak-best-label",children:"best"})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d2",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsxs("div",{className:"cbc-habits-grid",children:[et.map(oe=>{const Re=It.habits?.[oe.key]||!1,Ye=we===oe.key,gt=re===oe.key;return a.jsxs("div",{className:`cbc-habit-tile ${Re?"cbc-habit-done":""} ${Ye?"cbc-habit-just-checked":""}`,style:{"--habit-color":oe.color},children:[p&&a.jsx("button",{className:"cbc-habit-delete",onClick:ct=>{ct.stopPropagation(),Se(oe.isCustom?{type:"custom",id:oe.id,label:oe.label}:{type:"default",key:oe.key,label:oe.label})},"aria-label":`Remove ${oe.label}`,children:a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsxs("div",{className:`cbc-habit-ring-touch ${gt?"cbc-holding":""} ${Re?"cbc-ring-completed":""}`,onPointerDown:ct=>{Re||(ct.preventDefault(),Ns(oe.key))},onPointerUp:rs,onPointerLeave:rs,onPointerCancel:rs,onClick:ct=>{if(ct.stopPropagation(),st.current){st.current=!1;return}Re&&an(oe.key)},role:"button",tabIndex:0,"aria-label":Re?`Undo ${oe.label}`:`Press and hold to complete ${oe.label}`,onKeyDown:ct=>{(ct.key==="Enter"||ct.key===" ")&&(ct.preventDefault(),Re?an(oe.key):wt(oe.key))},children:[a.jsxs("svg",{className:"cbc-habit-ring-svg",viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-habit-ring-track",cx:"50",cy:"50",r:Wg}),a.jsx("circle",{className:"cbc-habit-ring-fill",ref:ct=>{ct&&(Pe.current[oe.key]=ct)},cx:"50",cy:"50",r:Wg,style:{stroke:oe.color,strokeDasharray:Al,strokeDashoffset:Re?0:Al}})]}),Re&&a.jsx("div",{className:"cbc-habit-glow-orb",style:{"--habit-color":oe.color}}),a.jsx("div",{className:"cbc-habit-ring-icon",style:{color:oe.color},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:oe.icon})})}),Ye&&a.jsx("div",{className:"cbc-particles",children:qt.current.map((ct,_n)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${ct.tx}px`,"--ty":`${ct.ty}px`,"--size":`${ct.size}px`,"--particle-color":oe.color,animationDuration:`${ct.duration}s`}},_n))})]}),a.jsx("span",{className:"cbc-habit-label",children:oe.label}),Re?a.jsx("span",{className:"cbc-habit-done-tag",children:"Done"}):a.jsx("span",{className:"cbc-habit-hold-hint",children:"Hold to complete"})]},oe.key)}),p?a.jsxs("div",{className:"cbc-habit-tile cbc-add-tile",onClick:()=>Xe(!0),role:"button",tabIndex:0,children:[a.jsx("div",{className:"cbc-add-ring",children:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),a.jsx("span",{className:"cbc-habit-label",children:"Add Habit"}),a.jsx("span",{className:"cbc-habit-hold-hint",children:"Your own"})]}):a.jsxs("div",{className:"cbc-habit-tile cbc-unlock-tile",onClick:()=>y("/upgrade"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"cbc-unlock-ring",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("span",{className:"cbc-habit-label",children:"More Habits"}),a.jsx("span",{className:"cbc-habit-hold-hint",children:"Custom & editable"})]})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d3",children:[a.jsxs("div",{className:"cbc-section-header",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsxs("span",{className:"cbc-section-badge",children:[yr,"/7 perfect"]})]}),a.jsxs("div",{className:"cbc-weekly-card",children:[a.jsxs("div",{className:"cbc-weekly-header",children:[a.jsx("span",{className:"cbc-weekly-habit-name"}),Mt.map((oe,Re)=>a.jsx("span",{className:`cbc-weekly-day-label${de[Re]&&So(de[Re])===ut?" cbc-today-label":""}`,children:oe},Re))]}),hn.map(oe=>(oe.days.filter(Boolean).length,a.jsxs("div",{className:"cbc-weekly-row",children:[a.jsx("span",{className:"cbc-weekly-habit-name",style:{color:oe.color},children:oe.label}),oe.days.map((Re,Ye)=>a.jsx("span",{className:`cbc-weekly-dot${Re?" cbc-dot-done":""}${de[Ye]&&So(de[Ye])===ut?" cbc-dot-today":""}`,style:Re?{background:oe.color,borderColor:oe.color,boxShadow:`0 0 6px ${oe.color}40`}:void 0},Ye))]},oe.key))),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${rt}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[at,"/",$e," completed (",rt,"%)"]})]})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d4",children:[a.jsx("h2",{className:"cbc-section-title",children:Xn}),a.jsxs("div",{className:"cbc-calendar-card",children:[a.jsx("div",{className:"cbc-cal-header",children:["M","T","W","T","F","S","S"].map((oe,Re)=>a.jsx("span",{className:"cbc-cal-day-label",children:oe},Re))}),a.jsxs("div",{className:"cbc-cal-grid",children:[Array.from({length:Fn},(oe,Re)=>a.jsx("span",{className:"cbc-cal-cell cbc-cal-empty"},`e${Re}`)),An.map(oe=>{const Re=oe.total>0?oe.completed/oe.total:0,Ye=oe.isFuture?-1:Re===0?0:Re<.4?1:Re<.75?2:Re<1?3:4;return a.jsx("span",{className:`cbc-cal-cell${oe.isToday?" cbc-cal-today":""}${Ye===4?" cbc-cal-perfect":""} cbc-cal-heat-${Ye<0?"future":Ye}`,children:oe.day},oe.day)})]}),a.jsxs("div",{className:"cbc-cal-legend",children:[a.jsx("span",{className:"cbc-cal-legend-label",children:"Less"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-0"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-1"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-2"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-3"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-4"}),a.jsx("span",{className:"cbc-cal-legend-label",children:"More"})]})]})]})]}),a.jsx(Jr,{active:"home"}),Ue&&a.jsx("div",{className:"cbc-modal-overlay",onClick:()=>Xe(!1),children:a.jsxs("div",{className:"cbc-modal",onClick:oe=>oe.stopPropagation(),children:[a.jsx("h3",{className:"cbc-modal-title",children:"Add Habit"}),a.jsx("p",{className:"cbc-modal-desc",children:"Track something personal to your routine."}),a.jsx("input",{className:"cbc-modal-input",type:"text",placeholder:"e.g. Meditate, Stretch, Read...",value:Z,onChange:oe=>je(oe.target.value),maxLength:30,autoFocus:!0,onKeyDown:oe=>oe.key==="Enter"&&se()}),a.jsxs("div",{className:"cbc-modal-actions",children:[a.jsx("button",{className:"cbc-modal-cancel",onClick:()=>{Xe(!1),je("")},children:"Cancel"}),a.jsx("button",{className:"cbc-modal-save",onClick:se,disabled:!Z.trim(),children:"Add"})]})]})}),Me&&a.jsx("div",{className:"cbc-modal-overlay",onClick:()=>Se(null),children:a.jsxs("div",{className:"cbc-modal",onClick:oe=>oe.stopPropagation(),children:[a.jsxs("h3",{className:"cbc-modal-title",children:['Remove "',Me.label,'"?']}),a.jsx("p",{className:"cbc-modal-desc",children:"This will remove the habit from your daily tracker. Past logs won't be affected."}),a.jsxs("div",{className:"cbc-modal-actions",children:[a.jsx("button",{className:"cbc-modal-cancel",onClick:()=>Se(null),children:"Keep"}),a.jsx("button",{className:"cbc-modal-delete",onClick:()=>Me.type==="custom"?Ne(Me.id):pt(Me.key),children:"Remove"})]})]})}),T&&a.jsx(Hg,{title:"All Habits Complete!",subtitle:Ot.current,stats:[{value:`${qe}/${et.length}`,label:"Habits"},{value:H||1,label:"Day Streak"}],buttonLabel:"Keep Going",holdLabel:"Hold To Complete Today's Habits",shareType:"habits",hideShare:!p,onShareJourney:t?en:null,userName:t?.name,onDone:()=>{R(!1),M(!1)}}),ue&&a.jsx("div",{className:`toast-notification ${ue.type}`,children:ue.message})]})})}function ph(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Qw(s,e){return[s,e].sort().join("_")}function k5(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Rr(),{isDark:l,toggleTheme:u}=Mi(),d=Xs(),[p,g]=w.useState("buddies"),[y,b]=w.useState([]),[k,E]=w.useState([]),[O,W]=w.useState([]),[F,B]=w.useState(""),[$,H]=w.useState([]),[K,ue]=w.useState([]),[Ee,we]=w.useState(!0),[C,T]=w.useState(null),[R,P]=w.useState(null),M=w.useCallback((Y,L="info")=>{P({message:Y,type:L}),setTimeout(()=>P(null),3500)},[]);w.useEffect(()=>{!i&&(!s||!e)&&d("/")},[s,e,i,d]);const D=w.useCallback(async()=>{if(t){we(!0);try{const Y=t.id,re=(await Zt(mt(ye,"clients"))).docs.map(Pe=>({id:Pe.id,...Pe.data()}));ue(re);const ve=Object.fromEntries(re.map(Pe=>[Pe.id,Pe])),_e=await Zt(rn(mt(ye,"buddies"),St("user1","==",Y))),be=await Zt(rn(mt(ye,"buddies"),St("user2","==",Y))),ke=new Set;[..._e.docs,...be.docs].forEach(Pe=>{const qt=Pe.data(),un=qt.user1===Y?qt.user2:qt.user1;ke.add(un)}),b(Array.from(ke).map(Pe=>ve[Pe]).filter(Boolean));const Be=await Zt(rn(mt(ye,"buddyRequests"),St("toId","==",Y),St("status","==","pending")));E(Be.docs.map(Pe=>({reqId:Pe.id,...Pe.data(),fromClient:ve[Pe.data().fromId]})).filter(Pe=>Pe.fromClient));const st=await Zt(rn(mt(ye,"buddyRequests"),St("fromId","==",Y),St("status","==","pending")));W(st.docs.map(Pe=>({reqId:Pe.id,...Pe.data(),toClient:ve[Pe.data().toId]})).filter(Pe=>Pe.toClient))}catch(Y){console.error("Error fetching buddy data:",Y),M("Failed to load buddies","error")}finally{we(!1)}}},[t,M]);w.useEffect(()=>{D()},[D]),w.useEffect(()=>{if(!F.trim()||!t){H([]);return}const Y=F.toLowerCase(),L=t.id,re=new Set(y.map(ke=>ke.id)),ve=new Set(O.map(ke=>ke.toId)),_e=new Set(k.map(ke=>ke.fromId)),be=K.filter(ke=>ke.id===L||!ke.name||!ke.coreBuddyAccess&&ke.clientType!=="core_buddy"?!1:ke.name.toLowerCase().includes(Y)).map(ke=>({...ke,isBuddy:re.has(ke.id),isPendingOut:ve.has(ke.id),isPendingIn:_e.has(ke.id)})).slice(0,20);H(be)},[F,K,y,O,k,t]);const A=async(Y,L)=>{if(!(!t||Y===t.id))try{await Nr(mt(ye,"notifications"),{toId:Y,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:L,read:!1,createdAt:Vs()})}catch(re){console.error("Notification error:",re),re.code==="permission-denied"&&M("Notifications blocked  check Firestore rules","error")}},Ue=async Y=>{T(Y);try{const L=`${t.id}_${Y}`;await Cs(Ke(ye,"buddyRequests",L),{fromId:t.id,toId:Y,status:"pending",createdAt:Vs()}),await A(Y,"buddy_request"),M("Buddy request sent!","success"),await D()}catch(L){console.error("Error sending request:",L),M("Failed to send request","error")}finally{T(null)}},Xe=async Y=>{T(Y.reqId);try{const L=Qw(Y.fromId,t.id);await Cs(Ke(ye,"buddies",L),{user1:[Y.fromId,t.id].sort()[0],user2:[Y.fromId,t.id].sort()[1],connectedAt:Vs()}),await Sr(Ke(ye,"buddyRequests",Y.reqId)),await A(Y.fromId,"buddy_accept"),M("Buddy added!","success"),await D()}catch(L){console.error("Error accepting request:",L),M("Failed to accept","error")}finally{T(null)}},Z=async Y=>{T(Y.reqId);try{await Sr(Ke(ye,"buddyRequests",Y.reqId)),M("Request declined","info"),await D()}catch(L){console.error("Error declining:",L),M("Failed to decline","error")}finally{T(null)}},je=async Y=>{T(Y.reqId);try{await Sr(Ke(ye,"buddyRequests",Y.reqId)),M("Request cancelled","info"),await D()}catch(L){console.error("Error cancelling:",L),M("Failed to cancel","error")}finally{T(null)}},Me=async Y=>{T(Y);try{const L=Qw(t.id,Y);await Sr(Ke(ye,"buddies",L)),M("Buddy removed","info"),await D()}catch(L){console.error("Error removing buddy:",L),M("Failed to remove buddy","error")}finally{T(null)}},Se=k.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!t?null:a.jsx(Xo,{children:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("button",{className:"bdy-leaderboard-link",onClick:()=>d("/client/leaderboard"),children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("rect",{x:"6",y:"9",width:"12",height:"13",rx:"2"}),a.jsx("path",{d:"M12 9v13"}),a.jsx("path",{d:"M2 22h20"})]}),a.jsx("span",{children:"Leaderboard"}),a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),Se>0&&a.jsx("span",{className:"bdy-tab-badge",children:Se})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Ee?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(Y=>a.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${Y.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:Y.photoURL?a.jsx("img",{src:Y.photoURL,alt:Y.name}):a.jsx("span",{children:ph(Y.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:Y.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:L=>{L.stopPropagation(),Me(Y.id)},disabled:C===Y.id,"aria-label":"Remove buddy",children:C===Y.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},Y.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[k.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:k.map(Y=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:Y.fromClient.photoURL?a.jsx("img",{src:Y.fromClient.photoURL,alt:Y.fromClient.name}):a.jsx("span",{children:ph(Y.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:Y.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>Xe(Y),disabled:C===Y.reqId,children:C===Y.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>Z(Y),disabled:C===Y.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},Y.reqId))})]}),O.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:O.map(Y=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:Y.toClient?.photoURL?a.jsx("img",{src:Y.toClient.photoURL,alt:Y.toClient.name}):a.jsx("span",{children:ph(Y.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:Y.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>je(Y),disabled:C===Y.reqId,children:C===Y.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},Y.reqId))})]}),k.length===0&&O.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:F,onChange:Y=>B(Y.target.value),autoFocus:!0}),F&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>B(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),F.trim()&&$.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',F,'"']})}),$.length>0&&a.jsx("div",{className:"bdy-list",children:$.map(Y=>a.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${Y.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:Y.photoURL?a.jsx("img",{src:Y.photoURL,alt:Y.name}):a.jsx("span",{children:ph(Y.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:Y.name}),Y.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),Y.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):Y.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):Y.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:L=>{L.stopPropagation();const re=k.find(ve=>ve.fromId===Y.id);re&&Xe(re)},disabled:!!C,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:L=>{L.stopPropagation(),Ue(Y.id)},disabled:C===Y.id,children:C===Y.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},Y.id))})]})]})]}),a.jsx(Jr,{}),R&&a.jsxs("div",{className:`toast-notification ${R.type}`,children:[a.jsx("span",{className:"toast-icon",children:R.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):R.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:R.message})]})]})})}function gh(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function sg(s,e){return[s,e].sort().join("_")}const E5=5;function rg(s){return s.toISOString().split("T")[0]}function Xw(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function T5(){const{userId:s}=yS(),{currentUser:e,isClient:t,clientData:i,loading:l}=Rr(),{isDark:u,toggleTheme:d}=Mi(),p=Xs(),[g,y]=w.useState(null),[b,k]=w.useState("none"),[E,O]=w.useState(null),[W,F]=w.useState(!0),[B,$]=w.useState(!1),[H,K]=w.useState(null),[ue,Ee]=w.useState([]),[we,C]=w.useState(!1),[T,R]=w.useState(new Set),[P,M]=w.useState(new Set),[D,A]=w.useState({}),[Ue,Xe]=w.useState({}),[Z,je]=w.useState({}),[Me,Se]=w.useState(!0),[Y,L]=w.useState(0),[re,ve]=w.useState(0),[_e,be]=w.useState(0),[ke,Be]=w.useState([]),[st,Pe]=w.useState(!1),[qt,un]=w.useState(null),[Un,Ot]=w.useState([]),it=w.useCallback((se,Ne="info")=>{K({message:se,type:Ne}),setTimeout(()=>K(null),3500)},[]);w.useEffect(()=>{!l&&(!e||!t)&&p("/")},[e,t,l,p]),w.useEffect(()=>{i&&s&&i.id===s&&p("/client/core-buddy",{replace:!0})},[i,s,p]),w.useEffect(()=>{if(!i||!s||i.id===s)return;let se=!1;return(async()=>{F(!0);try{const xt=(await Zt(mt(ye,"clients"))).docs.map(qe=>({id:qe.id,...qe.data()})).find(qe=>qe.id===s);if(!xt){se||F(!1);return}se||y(xt);const at=i.id,$e=sg(at,s);if((await Ks(Ke(ye,"buddies",$e))).exists())se||k("buddy");else{const qe=`${at}_${s}`,on=await Ks(Ke(ye,"buddyRequests",qe));if(on.exists()&&on.data().status==="pending")se||(k("pending_out"),O(qe));else{const dn=`${s}_${at}`,Ln=await Ks(Ke(ye,"buddyRequests",dn));Ln.exists()&&Ln.data().status==="pending"?se||(k("pending_in"),O(dn)):se||k("none")}}}catch(Ne){console.error("Error loading profile:",Ne)}finally{se||F(!1)}})(),()=>{se=!0}},[i,s]),w.useEffect(()=>{if(!s||!g)return;let se=!1;return(async()=>{Se(!0);try{const Ne=await Zt(rn(mt(ye,"workoutLogs"),St("clientId","==",s)));if(se)return;const pt=Ne.docs.length;L(pt);let xt=0;const at=Ne.docs.map(rt=>rt.data().date).filter(Boolean).sort().reverse();if(at.length>0){const rt=new Date;let qe=new Date(rt);for(let on=0;on<52;on++){const dn=new Date(qe),Ln=dn.getDay(),zn=Ln===0?6:Ln-1;dn.setDate(dn.getDate()-zn),dn.setHours(0,0,0,0);const Xn=new Date(dn);Xn.setDate(Xn.getDate()+7);const Xt=rg(dn),Fn=rg(Xn);if(at.some(hn=>hn>=Xt&&hn<Fn))xt++;else{if(on>0)break;break}qe.setDate(qe.getDate()-7)}}se||ve(xt);let $e=0;for(let rt=0;rt<30;rt++){const qe=new Date;qe.setDate(qe.getDate()-rt);const on=rg(qe);try{const dn=await Zt(rn(mt(ye,"habitLogs"),St("clientId","==",s),St("date","==",on)));if(dn.empty)break;{const Ln=dn.docs[0].data().habits||{};if(Object.values(Ln).filter(Boolean).length>=E5)$e++;else break}}catch{break}}se||be($e)}catch(Ne){console.error("Error loading buddy stats:",Ne)}finally{se||Se(!1)}})(),()=>{se=!0}},[s,g]),w.useEffect(()=>{if(!i)return;const se=i.id;(async()=>{try{const[Ne,pt,xt]=await Promise.all([Zt(rn(mt(ye,"buddies"),St("user1","==",se))),Zt(rn(mt(ye,"buddies"),St("user2","==",se))),Zt(mt(ye,"clients"))]),at=new Set;[...Ne.docs,...pt.docs].forEach(rt=>{const qe=rt.data();at.add(qe.user1===se?qe.user2:qe.user1)});const $e={};xt.docs.forEach(rt=>{$e[rt.id]=rt.data()}),Be(Array.from(at).filter(rt=>$e[rt]).map(rt=>({id:rt,name:$e[rt].name,photoURL:$e[rt].photoURL||null})))}catch(Ne){console.error("Error loading buddies for mentions:",Ne)}})()},[i]);const vt=async(se,Ne,pt={})=>{if(!(!i||se===i.id))try{await Nr(mt(ye,"notifications"),{toId:se,fromId:i.id,fromName:i.name||"Someone",fromPhotoURL:i.photoURL||null,type:Ne,read:!1,createdAt:Vs(),...pt})}catch(xt){console.error("Notification error:",xt),xt.code==="permission-denied"&&it("Notifications blocked  check Firestore rules","error")}},ut=async()=>{$(!0);try{const se=`${i.id}_${s}`;await Cs(Ke(ye,"buddyRequests",se),{fromId:i.id,toId:s,status:"pending",createdAt:Vs()}),await vt(s,"buddy_request"),k("pending_out"),O(se),it("Buddy request sent!","success")}catch(se){console.error(se),it("Failed to send request","error")}finally{$(!1)}},Bn=async()=>{if(E){$(!0);try{const se=sg(i.id,s);await Cs(Ke(ye,"buddies",se),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:Vs()}),await Sr(Ke(ye,"buddyRequests",E)),await vt(s,"buddy_accept"),k("buddy"),it("Buddy added!","success")}catch(se){console.error(se),it("Failed to accept","error")}finally{$(!1)}}},de=async()=>{if(E){$(!0);try{await Sr(Ke(ye,"buddyRequests",E)),k("none"),it(b==="pending_out"?"Request cancelled":"Request declined","info")}catch(se){console.error(se),it("Failed","error")}finally{$(!1)}}},Mt=async()=>{$(!0);try{const se=sg(i.id,s);await Sr(Ke(ye,"buddies",se)),k("none"),it("Buddy removed","info")}catch(se){console.error(se),it("Failed to remove","error")}finally{$(!1)}},bt=w.useCallback(async()=>{if(s){C(!0);try{const se=await Zt(rn(mt(ye,"posts"),St("authorId","==",s),_u("createdAt","desc"),ku(30)));if(Ee(se.docs.map(Ne=>({id:Ne.id,...Ne.data()}))),i){const Ne=await Zt(rn(mt(ye,"postLikes"),St("userId","==",i.id)));R(new Set(Ne.docs.map(pt=>pt.data().postId)))}}catch(se){console.error("Error loading journey:",se)}finally{C(!1)}}},[s,i]);w.useEffect(()=>{!W&&g&&bt()},[W,g,bt]);const Bt=async se=>{if(window.confirm("Delete this post?"))try{await Sr(Ke(ye,"posts",se)),Ee(Ne=>Ne.filter(pt=>pt.id!==se)),it("Post deleted","info")}catch(Ne){console.error("Delete error:",Ne),it("Failed to delete","error")}},et=async se=>{if(!i)return;const Ne=i.id,pt=`${se}_${Ne}`,xt=T.has(se),at=new Set(T);xt?at.delete(se):at.add(se),R(at),Ee($e=>$e.map(rt=>rt.id===se?{...rt,likeCount:Math.max(0,(rt.likeCount||0)+(xt?-1:1))}:rt));try{if(xt)await Sr(Ke(ye,"postLikes",pt)),await bs(Ke(ye,"posts",se),{likeCount:Ao(-1)});else{await Cs(Ke(ye,"postLikes",pt),{postId:se,userId:Ne,createdAt:Vs()}),await bs(Ke(ye,"posts",se),{likeCount:Ao(1)});const $e=ue.find(rt=>rt.id===se);$e&&vt($e.authorId,"like",{postId:se})}}catch($e){console.error("Like error:",$e),bt()}},It=async se=>{try{const Ne=await Zt(rn(mt(ye,"postComments"),St("postId","==",se),_u("createdAt","asc"),ku(50)));A(pt=>({...pt,[se]:Ne.docs.map(xt=>({id:xt.id,...xt.data()}))}))}catch(Ne){console.error("Error loading comments:",Ne)}},wt=se=>{const Ne=new Set(P);Ne.has(se)?Ne.delete(se):(Ne.add(se),D[se]||It(se)),M(Ne)},an=(se,Ne)=>{const pt=se.match(/@(\w*)$/);if(pt){Pe(!0),un(Ne);const xt=ke.filter(at=>at.name&&at.name.toLowerCase().includes(pt[1].toLowerCase())).slice(0,5);Ot(xt)}else Pe(!1),Ot([])},Ns=(se,Ne)=>{const xt=(Ue[Ne]||"").replace(/@\w*$/,`@${se.name} `);Xe(at=>({...at,[Ne]:xt})),Pe(!1),Ot([])},rs=(se,Ne)=>{Xe(pt=>({...pt,[se]:Ne})),an(Ne,se)},en=async se=>{const Ne=(Ue[se]||"").trim();if(!(!Ne||!i)){je(pt=>({...pt,[se]:!0}));try{await Nr(mt(ye,"postComments"),{postId:se,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:Ne,createdAt:Vs()}),await bs(Ke(ye,"posts",se),{commentCount:Ao(1)});const pt=ue.find(at=>at.id===se);pt&&vt(pt.authorId,"comment",{postId:se});const xt=Ne.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(xt){const at=new Set;xt.forEach($e=>{const rt=$e.slice(1).trim(),qe=ke.find(on=>on.name&&on.name.toLowerCase()===rt.toLowerCase());qe&&!at.has(qe.id)&&(at.add(qe.id),vt(qe.id,"mention",{postId:se}))})}Xe(at=>({...at,[se]:""})),Ee(at=>at.map($e=>$e.id===se?{...$e,commentCount:($e.commentCount||0)+1}:$e)),await It(se)}catch(pt){console.error("Comment error:",pt),it("Failed to comment","error")}finally{je(pt=>({...pt,[se]:!1}))}}};return l||W||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!t?null:g?a.jsx(Xo,{children:a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:gh(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),a.jsxs("div",{className:"prf-buddy-action",children:[b==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:ut,disabled:B,children:B?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),b==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:de,disabled:B,children:B?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),b==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:Bn,disabled:B,children:B?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:de,disabled:B,children:"Decline"})]}),b==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:Mt,disabled:B,children:B?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),Me?a.jsx("div",{className:"prf-stats-loading",children:a.jsx("div",{className:"prf-spinner"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"prf-stats",children:[a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:Y}),a.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[re,a.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),a.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),_e>0&&a.jsx("div",{className:"prf-info-row",children:a.jsxs("div",{className:"prf-info-card info-habit",children:[a.jsx("div",{className:"prf-info-icon",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})}),a.jsxs("div",{className:"prf-info-text",children:[a.jsxs("span",{className:"prf-info-value",children:[_e," day",_e!==1?"s":""]}),a.jsx("span",{className:"prf-info-sub",children:"Habit Streak"})]})]})})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:`${g.name?.split(" ")[0]}'s Journey`}),we?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):ue.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:ue.map(se=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:se.authorPhotoURL?a.jsx("img",{src:se.authorPhotoURL,alt:""}):a.jsx("span",{children:gh(se.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:se.authorName}),a.jsx("span",{className:"journey-post-time",children:Xw(se.createdAt)})]}),se.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>Bt(se.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),se.type==="workout_summary"&&se.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:se.metadata.title}),se.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.stats.map(Ne=>`${Ne.value} ${Ne.label}`).join("    ")}),!se.metadata.stats?.length&&se.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed a workout using Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):se.type==="badge_earned"&&se.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame journey-card-logo-badge",children:(()=>{const Ne=zl.find(pt=>pt.id===se.metadata.badgeId);return Ne?.img?a.jsx("img",{src:Ne.img,alt:se.metadata.title,className:"journey-card-logo-img"}):a.jsx("img",{src:"/Logo.webp",alt:se.metadata.title,className:"journey-card-logo-img"})})()}),a.jsx("h3",{className:"journey-card-title",children:se.metadata.title}),se.metadata.badgeDesc&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.badgeDesc}),a.jsx("p",{className:"journey-card-cta",children:"I just earned a badge on Core Buddy"}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):se.type==="habits_summary"&&se.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:se.metadata.title}),se.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.stats.map(Ne=>`${Ne.value} ${Ne.label}`).join("    ")}),se.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed my daily habits with Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):a.jsxs(a.Fragment,{children:[se.content&&a.jsx("p",{className:"journey-post-content",children:se.content}),se.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:se.imageURL,alt:"Post",loading:"lazy"})})]}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${T.has(se.id)?" liked":""}`,onClick:()=>et(se.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:T.has(se.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:se.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${P.has(se.id)?" active":""}`,onClick:()=>wt(se.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:se.commentCount||0})]})]}),P.has(se.id)&&a.jsxs("div",{className:"journey-comments",children:[D[se.id]?.length>0?D[se.id].map(Ne=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${Ne.authorId}`),children:Ne.authorPhotoURL?a.jsx("img",{src:Ne.authorPhotoURL,alt:""}):a.jsx("span",{children:gh(Ne.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:Ne.authorName}),a.jsx("span",{className:"journey-comment-text",children:Ne.content})]}),a.jsx("span",{className:"journey-comment-time",children:Xw(Ne.createdAt)})]})]},Ne.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("input",{type:"text",placeholder:"Comment... (@ to mention)",value:Ue[se.id]||"",onChange:Ne=>rs(se.id,Ne.target.value),onKeyDown:Ne=>{Ne.key==="Enter"&&en(se.id)},maxLength:300}),st&&qt===se.id&&Un.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:Un.map(Ne=>a.jsxs("button",{className:"mention-option",onClick:()=>Ns(Ne,se.id),children:[a.jsx("div",{className:"mention-option-avatar",children:Ne.photoURL?a.jsx("img",{src:Ne.photoURL,alt:""}):a.jsx("span",{children:gh(Ne.name)})}),a.jsx("span",{children:Ne.name})]},Ne.id))}),a.jsx("button",{onClick:()=>en(se.id),disabled:!(Ue[se.id]||"").trim()||Z[se.id],children:Z[se.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},se.id))})]})]}),a.jsx(Jr,{}),H&&a.jsxs("div",{className:`toast-notification ${H.type}`,children:[a.jsx("span",{className:"toast-icon",children:H.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):H.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:H.message})]})]})}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(Jr,{})]})}const ig=[{text:"Build your dashboard...",bold:"your way"},{text:"Pick what matters to you...",bold:"nothing else"},{text:"Your goals, your layout...",bold:"your rules"}],Jw=[{id:"stats",label:"Stats Rings",desc:"Programme %, workouts this week, habits today",icon:"rings",defaultOn:!0},{id:"workouts",label:"Workouts",desc:"Sessions this week and total count",icon:"dumbbell",defaultOn:!0},{id:"habits",label:"Habits",desc:"Daily habit tracker dots",icon:"check",defaultOn:!0},{id:"pbs",label:"Personal Bests",desc:"Your top lifts at a glance",icon:"trophy"},{id:"nutrition",label:"Nutrition",desc:"Macro rings  protein, carbs, fats, cals",icon:"apple"},{id:"leaderboard",label:"Leaderboard",desc:"See where you rank among buddies",icon:"podium"},{id:"journey",label:"Journey",desc:"Your posts, likes and comments feed",icon:"feed"},{id:"coach",label:"Coach Message",desc:"Motivational nudge from Buddy",icon:"message",defaultOn:!0},{id:"nudge",label:"Smart Nudge",desc:"Contextual reminder of what to do next",icon:"lightbulb"}];function j5(s){switch(s){case"rings":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]});case"dumbbell":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M6.5 6.5h11v11h-11z",strokeLinejoin:"round"}),a.jsx("line",{x1:"2",y1:"12",x2:"6.5",y2:"12"}),a.jsx("line",{x1:"17.5",y1:"12",x2:"22",y2:"12"})]});case"check":return a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})});case"trophy":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M6 9H3V6a1 1 0 0 1 1-1h2M18 9h3V6a1 1 0 0 0-1-1h-2"}),a.jsx("path",{d:"M6 5h12v7a6 6 0 0 1-12 0V5z"}),a.jsx("path",{d:"M9 21h6"}),a.jsx("path",{d:"M12 17v4"})]});case"apple":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M12 3c-1.5 0-3 1-3 1s-3-.5-4.5 1.5S3 9 3 12s1.5 6 3 8 3 3 6 3 4.5-1 6-3 3-5 3-8-1.5-4-3-6.5S13.5 3 12 3z"}),a.jsx("path",{d:"M12 3c0 0 1-2 3-2"})]});case"podium":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"2",y:"14",width:"6",height:"8",rx:"1"}),a.jsx("rect",{x:"9",y:"8",width:"6",height:"14",rx:"1"}),a.jsx("rect",{x:"16",y:"11",width:"6",height:"11",rx:"1"})]});case"medal":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"15",r:"6"}),a.jsx("path",{d:"M8.21 13.89L7 2h10l-1.21 11.89"})]});case"feed":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3"}),a.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),a.jsx("line",{x1:"3",y1:"15",x2:"21",y2:"15"})]});case"message":return a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})});case"lightbulb":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 18h6"}),a.jsx("path",{d:"M10 22h4"}),a.jsx("path",{d:"M12 2a7 7 0 0 0-4 12.7V17h8v-2.3A7 7 0 0 0 12 2z"})]});default:return null}}function S5(){const s=Xs(),{clientData:e,currentUser:t,updateClientData:i,resolveClient:l}=Rr(),[u,d]=w.useState({hours:0,minutes:0,seconds:0}),[p,g]=w.useState(0),[y,b]=w.useState(0),[k,E]=w.useState(null),[O,W]=w.useState(!1),F=w.useRef(null),[B,$]=w.useState(()=>{const D=e?.dashboardWidgets;return D&&Array.isArray(D)?D:Jw.filter(A=>A.defaultOn).map(A=>A.id)}),[H,K]=w.useState(!1),[ue,Ee]=w.useState(!1),[we,C]=w.useState(null);w.useEffect(()=>{e?.photoURL&&E(e.photoURL)},[e?.photoURL]),w.useEffect(()=>{const D=()=>{const Ue=new Date,Xe=new Date(Ue);Xe.setHours(23,59,59,999);const Z=Xe-Ue;d({hours:Math.floor(Z/36e5),minutes:Math.floor(Z%36e5/6e4),seconds:Math.floor(Z%6e4/1e3)}),g(60-Math.floor(Z%6e4/1e3))};D();const A=setInterval(D,1e3);return()=>clearInterval(A)},[]),w.useEffect(()=>{const D=setInterval(()=>b(A=>(A+1)%ig.length),8e3);return()=>clearInterval(D)},[]);const T=async D=>{const A=D.target.files?.[0];if(!(!A||!e?.id)){W(!0);try{const Ue=$a(Ga,`profilePhotos/${e.id}`);await Ah(Ue,A);const Xe=await Lo(Ue);await bs(Ke(ye,"clients",e.id),{photoURL:Xe}),E(Xe),i({photoURL:Xe})}catch(Ue){console.error("Photo upload error:",Ue)}finally{W(!1)}}},R=D=>{Ee(!1),$(A=>A.includes(D)?A.filter(Ue=>Ue!==D):[...A,D])},P=(D,A)=>{Ee(!1),$(Ue=>{const Xe=Ue.indexOf(D);if(Xe<0)return Ue;const Z=Xe+A;if(Z<0||Z>=Ue.length)return Ue;const je=[...Ue];return[je[Xe],je[Z]]=[je[Z],je[Xe]],je})},M=async()=>{K(!0),C(null);try{const D=e||await l();if(!D?.id){C("Could not find your profile. Try refreshing."),K(!1);return}await bs(Ke(ye,"clients",D.id),{dashboardWidgets:B}),i({dashboardWidgets:B}),Ee(!0)}catch(D){console.error("Save config error:",D),C("Save failed  please try again.")}finally{K(!1)}};return a.jsx(Xo,{children:a.jsxs("div",{className:"bldr-page",children:[a.jsxs("div",{className:"bldr-container",children:[a.jsxs("div",{className:"bldr-header",children:[a.jsx("button",{className:"bldr-back",onClick:()=>s("/client/core-buddy"),children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("h1",{className:"bldr-title",children:"Build Your Dashboard"})]}),a.jsxs("div",{className:"bldr-ring-container",children:[a.jsxs("div",{className:"bldr-ring",children:[a.jsx("svg",{className:"bldr-ring-svg",viewBox:"0 0 200 200",children:_E.map((D,A)=>a.jsx("line",{x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,className:`bldr-tick ${A<p?"elapsed":"remaining"}`,strokeWidth:D.thick?"3":"2"},A))}),a.jsxs("div",{className:"bldr-ring-center",children:[a.jsxs("div",{className:"bldr-ring-photo",onClick:()=>F.current?.click(),children:[a.jsx("img",{src:k||"/Logo.webp",alt:k?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`bldr-photo-overlay${O?" uploading":""}`,children:O?a.jsx("div",{className:"bldr-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:F,type:"file",accept:"image/*",onChange:T,style:{display:"none"}})]}),!k&&!O&&a.jsx("div",{className:"bldr-photo-badge",onClick:()=>F.current?.click(),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),a.jsxs("div",{className:"bldr-countdown",children:[a.jsx("span",{className:"bldr-timer-digit",children:String(u.hours).padStart(2,"0")}),a.jsx("span",{className:"bldr-timer-colon",children:":"}),a.jsx("span",{className:"bldr-timer-digit",children:String(u.minutes).padStart(2,"0")}),a.jsx("span",{className:"bldr-timer-colon",children:":"}),a.jsx("span",{className:"bldr-timer-digit bldr-timer-sec",children:String(u.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"bldr-ring-label",children:"remaining today"}),a.jsxs("p",{className:"bldr-tagline",children:[ig[y].text," ",a.jsx("strong",{children:ig[y].bold})]})]}),a.jsxs("div",{className:"bldr-section",children:[a.jsx("h2",{className:"bldr-section-title",children:"Choose Your Widgets"}),a.jsx("p",{className:"bldr-section-desc",children:"The countdown ring and your profile always stay at the top. Pick what goes below."}),a.jsx("div",{className:"bldr-widgets-list",children:Jw.map(D=>{const A=B.includes(D.id),Ue=B.indexOf(D.id);return a.jsxs("div",{className:`bldr-widget-card${A?" active":""}`,children:[a.jsx("div",{className:"bldr-widget-icon",children:j5(D.icon)}),a.jsxs("div",{className:"bldr-widget-info",children:[a.jsx("div",{className:"bldr-widget-label",children:D.label}),a.jsx("div",{className:"bldr-widget-desc",children:D.desc})]}),a.jsxs("div",{className:"bldr-widget-actions",children:[A&&a.jsxs("div",{className:"bldr-widget-order",children:[a.jsx("button",{className:"bldr-order-btn",onClick:()=>P(D.id,-1),disabled:Ue===0,"aria-label":"Move up",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M18 15l-6-6-6 6"})})}),a.jsx("span",{className:"bldr-order-num",children:Ue+1}),a.jsx("button",{className:"bldr-order-btn",onClick:()=>P(D.id,1),disabled:Ue===B.length-1,"aria-label":"Move down",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M6 9l6 6 6-6"})})})]}),a.jsx("button",{className:`bldr-toggle${A?" on":""}`,onClick:()=>R(D.id),"aria-label":A?`Remove ${D.label}`:`Add ${D.label}`,children:a.jsx("div",{className:"bldr-toggle-thumb"})})]})]},D.id)})})]}),a.jsxs("div",{className:"bldr-save-wrap",children:[a.jsx("button",{className:`bldr-save-btn${ue?" saved":""}`,onClick:M,disabled:H||ue,children:H?"Saving...":ue?"Saved":"Save Dashboard"}),we&&a.jsx("p",{className:"bldr-save-error",children:we}),ue&&a.jsx("button",{className:"bldr-view-btn",onClick:()=>s("/client/core-buddy"),children:"View Dashboard"})]})]}),a.jsx(Jr,{active:"home"})]})})}const kE="@firebase/installations",f0="0.6.19";const EE=1e4,TE=`w:${f0}`,jE="FIS_v2",C5="https://firebaseinstallations.googleapis.com/v1",N5=3600*1e3,A5="installations",R5="Installations";const I5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fo=new Ho(A5,R5,I5);function SE(s){return s instanceof hi&&s.code.includes("request-failed")}function CE({projectId:s}){return`${C5}/projects/${s}/installations`}function NE(s){return{token:s.token,requestStatus:2,expiresIn:D5(s.expiresIn),creationTime:Date.now()}}async function AE(s,e){const i=(await e.json()).error;return Fo.create("request-failed",{requestName:s,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function RE({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function M5(s,{refreshToken:e}){const t=RE(s);return t.append("Authorization",L5(e)),t}async function IE(s){const e=await s();return e.status>=500&&e.status<600?s():e}function D5(s){return Number(s.replace("s","000"))}function L5(s){return`${jE} ${s}`}async function O5({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const i=CE(s),l=RE(s),u=e.getImmediate({optional:!0});if(u){const y=await u.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const d={fid:t,authVersion:jE,appId:s.appId,sdkVersion:TE},p={method:"POST",headers:l,body:JSON.stringify(d)},g=await IE(()=>fetch(i,p));if(g.ok){const y=await g.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:NE(y.authToken)}}else throw await AE("Create Installation",g)}function ME(s){return new Promise(e=>{setTimeout(e,s)})}function P5(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}const V5=/^[cdef][\w-]{21}$/,$g="";function U5(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=B5(s);return V5.test(t)?t:$g}catch{return $g}}function B5(s){return P5(s).substr(0,22)}function Cf(s){return`${s.appName}!${s.appId}`}const DE=new Map;function LE(s,e){const t=Cf(s);OE(t,e),z5(t,e)}function OE(s,e){const t=DE.get(s);if(t)for(const i of t)i(e)}function z5(s,e){const t=F5();t&&t.postMessage({key:s,fid:e}),q5()}let Ro=null;function F5(){return!Ro&&"BroadcastChannel"in self&&(Ro=new BroadcastChannel("[Firebase] FID Change"),Ro.onmessage=s=>{OE(s.data.key,s.data.fid)}),Ro}function q5(){DE.size===0&&Ro&&(Ro.close(),Ro=null)}const H5="firebase-installations-database",W5=1,qo="firebase-installations-store";let ag=null;function m0(){return ag||(ag=nf(H5,W5,{upgrade:(s,e)=>{e===0&&s.createObjectStore(qo)}})),ag}async function Jh(s,e){const t=Cf(s),l=(await m0()).transaction(qo,"readwrite"),u=l.objectStore(qo),d=await u.get(t);return await u.put(e,t),await l.done,(!d||d.fid!==e.fid)&&LE(s,e.fid),e}async function PE(s){const e=Cf(s),i=(await m0()).transaction(qo,"readwrite");await i.objectStore(qo).delete(e),await i.done}async function Nf(s,e){const t=Cf(s),l=(await m0()).transaction(qo,"readwrite"),u=l.objectStore(qo),d=await u.get(t),p=e(d);return p===void 0?await u.delete(t):await u.put(p,t),await l.done,p&&(!d||d.fid!==p.fid)&&LE(s,p.fid),p}async function p0(s){let e;const t=await Nf(s.appConfig,i=>{const l=$5(i),u=G5(s,l);return e=u.registrationPromise,u.installationEntry});return t.fid===$g?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function $5(s){const e=s||{fid:U5(),registrationStatus:0};return VE(e)}function G5(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(Fo.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=K5(s,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Y5(s)}:{installationEntry:e}}async function K5(s,e){try{const t=await O5(s,e);return Jh(s.appConfig,t)}catch(t){throw SE(t)&&t.customData.serverCode===409?await PE(s.appConfig):await Jh(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Y5(s){let e=await Zw(s.appConfig);for(;e.registrationStatus===1;)await ME(100),e=await Zw(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await p0(s);return i||t}return e}function Zw(s){return Nf(s,e=>{if(!e)throw Fo.create("installation-not-found");return VE(e)})}function VE(s){return Q5(s)?{fid:s.fid,registrationStatus:0}:s}function Q5(s){return s.registrationStatus===1&&s.registrationTime+EE<Date.now()}async function X5({appConfig:s,heartbeatServiceProvider:e},t){const i=J5(s,t),l=M5(s,t),u=e.getImmediate({optional:!0});if(u){const y=await u.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const d={installation:{sdkVersion:TE,appId:s.appId}},p={method:"POST",headers:l,body:JSON.stringify(d)},g=await IE(()=>fetch(i,p));if(g.ok){const y=await g.json();return NE(y)}else throw await AE("Generate Auth Token",g)}function J5(s,{fid:e}){return`${CE(s)}/${e}/authTokens:generate`}async function g0(s,e=!1){let t;const i=await Nf(s.appConfig,u=>{if(!UE(u))throw Fo.create("not-registered");const d=u.authToken;if(!e&&tL(d))return u;if(d.requestStatus===1)return t=Z5(s,e),u;{if(!navigator.onLine)throw Fo.create("app-offline");const p=sL(u);return t=eL(s,p),p}});return t?await t:i.authToken}async function Z5(s,e){let t=await ex(s.appConfig);for(;t.authToken.requestStatus===1;)await ME(100),t=await ex(s.appConfig);const i=t.authToken;return i.requestStatus===0?g0(s,e):i}function ex(s){return Nf(s,e=>{if(!UE(e))throw Fo.create("not-registered");const t=e.authToken;return rL(t)?{...e,authToken:{requestStatus:0}}:e})}async function eL(s,e){try{const t=await X5(s,e),i={...e,authToken:t};return await Jh(s.appConfig,i),t}catch(t){if(SE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await PE(s.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Jh(s.appConfig,i)}throw t}}function UE(s){return s!==void 0&&s.registrationStatus===2}function tL(s){return s.requestStatus===2&&!nL(s)}function nL(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+N5}function sL(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function rL(s){return s.requestStatus===1&&s.requestTime+EE<Date.now()}async function iL(s){const e=s,{installationEntry:t,registrationPromise:i}=await p0(e);return i?i.catch(console.error):g0(e).catch(console.error),t.fid}async function aL(s,e=!1){const t=s;return await oL(t),(await g0(t,e)).token}async function oL(s){const{registrationPromise:e}=await p0(s);e&&await e}function lL(s){if(!s||!s.options)throw og("App Configuration");if(!s.name)throw og("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw og(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function og(s){return Fo.create("missing-app-config-values",{valueName:s})}const BE="installations",cL="installations-internal",uL=s=>{const e=s.getProvider("app").getImmediate(),t=lL(e),i=Wo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},dL=s=>{const e=s.getProvider("app").getImmediate(),t=Wo(e,BE).getImmediate();return{getId:()=>iL(t),getToken:l=>aL(t,l)}};function hL(){li(new Xr(BE,uL,"PUBLIC")),li(new Xr(cL,dL,"PRIVATE"))}hL();gr(kE,f0);gr(kE,f0,"esm2020");const fL="/firebase-messaging-sw.js",mL="/firebase-cloud-messaging-push-scope",zE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pL="https://fcmregistrations.googleapis.com/v1",FE="google.c.a.c_id",gL="google.c.a.c_l",yL="google.c.a.ts",vL="google.c.a.e",tx=1e4;var nx;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(nx||(nx={}));var Eu;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(Eu||(Eu={}));function Ji(s){const e=new Uint8Array(s);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bL(s){const e="=".repeat((4-s.length%4)%4),t=(s+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),l=new Uint8Array(i.length);for(let u=0;u<i.length;++u)l[u]=i.charCodeAt(u);return l}const lg="fcm_token_details_db",wL=5,sx="fcm_token_object_Store";async function xL(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(lg))return null;let e=null;return(await nf(lg,wL,{upgrade:async(i,l,u,d)=>{if(l<2||!i.objectStoreNames.contains(sx))return;const p=d.objectStore(sx),g=await p.index("fcmSenderId").get(s);if(await p.clear(),!!g){if(l===2){const y=g;if(!y.auth||!y.p256dh||!y.endpoint)return;e={token:y.fcmToken,createTime:y.createTime??Date.now(),subscriptionOptions:{auth:y.auth,p256dh:y.p256dh,endpoint:y.endpoint,swScope:y.swScope,vapidKey:typeof y.vapidKey=="string"?y.vapidKey:Ji(y.vapidKey)}}}else if(l===3){const y=g;e={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Ji(y.auth),p256dh:Ji(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Ji(y.vapidKey)}}}else if(l===4){const y=g;e={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Ji(y.auth),p256dh:Ji(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Ji(y.vapidKey)}}}}}})).close(),await Lp(lg),await Lp("fcm_vapid_details_db"),await Lp("undefined"),_L(e)?e:null}function _L(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:e}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const kL="firebase-messaging-database",EL=1,Tu="firebase-messaging-store";let cg=null;function qE(){return cg||(cg=nf(kL,EL,{upgrade:(s,e)=>{e===0&&s.createObjectStore(Tu)}})),cg}async function TL(s){const e=HE(s),i=await(await qE()).transaction(Tu).objectStore(Tu).get(e);if(i)return i;{const l=await xL(s.appConfig.senderId);if(l)return await y0(s,l),l}}async function y0(s,e){const t=HE(s),l=(await qE()).transaction(Tu,"readwrite");return await l.objectStore(Tu).put(e,t),await l.done,e}function HE({appConfig:s}){return s.appId}const jL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ar=new Ho("messaging","Messaging",jL);async function SL(s,e){const t=await b0(s),i=WE(e),l={method:"POST",headers:t,body:JSON.stringify(i)};let u;try{u=await(await fetch(v0(s.appConfig),l)).json()}catch(d){throw ar.create("token-subscribe-failed",{errorInfo:d?.toString()})}if(u.error){const d=u.error.message;throw ar.create("token-subscribe-failed",{errorInfo:d})}if(!u.token)throw ar.create("token-subscribe-no-token");return u.token}async function CL(s,e){const t=await b0(s),i=WE(e.subscriptionOptions),l={method:"PATCH",headers:t,body:JSON.stringify(i)};let u;try{u=await(await fetch(`${v0(s.appConfig)}/${e.token}`,l)).json()}catch(d){throw ar.create("token-update-failed",{errorInfo:d?.toString()})}if(u.error){const d=u.error.message;throw ar.create("token-update-failed",{errorInfo:d})}if(!u.token)throw ar.create("token-update-no-token");return u.token}async function NL(s,e){const i={method:"DELETE",headers:await b0(s)};try{const u=await(await fetch(`${v0(s.appConfig)}/${e}`,i)).json();if(u.error){const d=u.error.message;throw ar.create("token-unsubscribe-failed",{errorInfo:d})}}catch(l){throw ar.create("token-unsubscribe-failed",{errorInfo:l?.toString()})}}function v0({projectId:s}){return`${pL}/projects/${s}/registrations`}async function b0({appConfig:s,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function WE({p256dh:s,auth:e,endpoint:t,vapidKey:i}){const l={web:{endpoint:t,auth:e,p256dh:s}};return i!==zE&&(l.web.applicationPubKey=i),l}const AL=10080*60*1e3;async function RL(s){const e=await ML(s.swRegistration,s.vapidKey),t={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:e.endpoint,auth:Ji(e.getKey("auth")),p256dh:Ji(e.getKey("p256dh"))},i=await TL(s.firebaseDependencies);if(i){if(DL(i.subscriptionOptions,t))return Date.now()>=i.createTime+AL?IL(s,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{await NL(s.firebaseDependencies,i.token)}catch(l){console.warn(l)}return rx(s.firebaseDependencies,t)}else return rx(s.firebaseDependencies,t)}async function IL(s,e){try{const t=await CL(s.firebaseDependencies,e),i={...e,token:t,createTime:Date.now()};return await y0(s.firebaseDependencies,i),t}catch(t){throw t}}async function rx(s,e){const i={token:await SL(s,e),createTime:Date.now(),subscriptionOptions:e};return await y0(s,i),i.token}async function ML(s,e){const t=await s.pushManager.getSubscription();return t||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bL(e)})}function DL(s,e){const t=e.vapidKey===s.vapidKey,i=e.endpoint===s.endpoint,l=e.auth===s.auth,u=e.p256dh===s.p256dh;return t&&i&&l&&u}function ix(s){const e={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return LL(e,s),OL(e,s),PL(e,s),e}function LL(s,e){if(!e.notification)return;s.notification={};const t=e.notification.title;t&&(s.notification.title=t);const i=e.notification.body;i&&(s.notification.body=i);const l=e.notification.image;l&&(s.notification.image=l);const u=e.notification.icon;u&&(s.notification.icon=u)}function OL(s,e){e.data&&(s.data=e.data)}function PL(s,e){if(!e.fcmOptions&&!e.notification?.click_action)return;s.fcmOptions={};const t=e.fcmOptions?.link??e.notification?.click_action;t&&(s.fcmOptions.link=t);const i=e.fcmOptions?.analytics_label;i&&(s.fcmOptions.analyticsLabel=i)}function VL(s){return typeof s=="object"&&!!s&&FE in s}function UL(s){if(!s||!s.options)throw ug("App Configuration Object");if(!s.name)throw ug("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=s;for(const i of e)if(!t[i])throw ug(i);return{appName:s.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function ug(s){return ar.create("missing-app-config-values",{valueName:s})}class BL{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const l=UL(e);this.firebaseDependencies={app:e,appConfig:l,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}async function zL(s){try{s.swRegistration=await navigator.serviceWorker.register(fL,{scope:mL}),s.swRegistration.update().catch(()=>{}),await FL(s.swRegistration)}catch(e){throw ar.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function FL(s){return new Promise((e,t)=>{const i=setTimeout(()=>t(new Error(`Service worker not registered after ${tx} ms`)),tx),l=s.installing||s.waiting;s.active?(clearTimeout(i),e()):l?l.onstatechange=u=>{u.target?.state==="activated"&&(l.onstatechange=null,clearTimeout(i),e())}:(clearTimeout(i),t(new Error("No incoming service worker found.")))})}async function qL(s,e){if(!e&&!s.swRegistration&&await zL(s),!(!e&&s.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ar.create("invalid-sw-registration");s.swRegistration=e}}async function HL(s,e){e?s.vapidKey=e:s.vapidKey||(s.vapidKey=zE)}async function $E(s,e){if(!navigator)throw ar.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ar.create("permission-blocked");return await HL(s,e?.vapidKey),await qL(s,e?.serviceWorkerRegistration),RL(s)}async function WL(s,e,t){const i=$L(e);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[FE],message_name:t[gL],message_time:t[yL],message_device_time:Math.floor(Date.now()/1e3)})}function $L(s){switch(s){case Eu.NOTIFICATION_CLICKED:return"notification_open";case Eu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function GL(s,e){const t=e.data;if(!t.isFirebaseMessaging)return;s.onMessageHandler&&t.messageType===Eu.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(ix(t)):s.onMessageHandler.next(ix(t)));const i=t.data;VL(i)&&i[vL]==="1"&&await WL(s,t.messageType,i)}const ax="@firebase/messaging",ox="0.12.23";const KL=s=>{const e=new BL(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>GL(e,t)),e},YL=s=>{const e=s.getProvider("messaging").getImmediate();return{getToken:i=>$E(e,i)}};function QL(){li(new Xr("messaging",KL,"PUBLIC")),li(new Xr("messaging-internal",YL,"PRIVATE")),gr(ax,ox),gr(ax,ox,"esm2020")}async function XL(){try{await Ux()}catch{return!1}return typeof window<"u"&&Vx()&&RC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function JL(s=Nu()){return XL().then(e=>{if(!e)throw ar.create("unsupported-browser")},e=>{throw ar.create("indexed-db-unsupported")}),Wo(vn(s),"messaging").getImmediate()}async function ZL(s,e){return s=vn(s),$E(s,e)}QL();const eO="BNVNdqAPfJYhKBjF9qd-YPEMYIbecZLWiOGUF5tOBfNuv6P1iXgJS6IoS9dHLM5gp-WMrExfir0pCpkMzOdTWKY";let dg=null;function tO(){if(!dg)try{dg=JL(Nu())}catch{return null}return dg}function Gg(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}function lx(){return"Notification"in window?Notification.permission:"denied"}function nO(s){const e=Object.getOwnPropertyDescriptor(Notification,"permission");Object.defineProperty(Notification,"permission",{get:()=>"granted",configurable:!0});const t=()=>{e?Object.defineProperty(Notification,"permission",e):delete Notification.permission};try{const i=s();return i&&typeof i.then=="function"?i.then(l=>(t(),l),l=>{throw t(),l}):(t(),i)}catch(i){throw t(),i}}async function sO(s){if(!Gg())return null;try{const e=await Notification.requestPermission(),t=tO();if(!t)return console.error("Push: could not initialise Firebase Messaging"),null;const i=await navigator.serviceWorker.ready,l=e!=="granted";let u=null;const d=3;for(let p=1;p<=d;p++){try{const g=()=>ZL(t,{vapidKey:eO,serviceWorkerRegistration:i});if(u=l?await nO(g):await g(),u)break}catch(g){console.warn(`Push getToken attempt ${p}/${d} failed:`,g)}p<d&&await new Promise(g=>setTimeout(g,1500*p))}return u&&s&&await bs(Ke(ye,"clients",s),{fcmTokens:x6(u)}),u}catch(e){return console.error("Push permission request failed:",e),null}}async function rO(s,e){if(!(!e||!s))try{await bs(Ke(ye,"clients",s),{fcmTokens:_6(e)})}catch(t){console.error("Token revoke failed:",t)}}const iO=[{key:"buddy_request",label:"Buddy requests",desc:"When someone sends you a buddy request"},{key:"buddy_accept",label:"Buddy accepted",desc:"When your buddy request is accepted"},{key:"like",label:"Likes",desc:"When someone likes your post"},{key:"comment",label:"Comments",desc:"When someone comments on your post"},{key:"mention",label:"Mentions",desc:"When someone @mentions you"}];function aO(){const{currentUser:s,clientData:e,updateClientData:t,logout:i,loading:l}=Rr(),{isDark:u,toggleTheme:d}=Mi(),p=Xs(),[g,y]=w.useState(!1),[b,k]=w.useState(null),[E,O]=w.useState(!1),[W,F]=w.useState("default"),[B,$]=w.useState({buddy_request:!0,buddy_accept:!0,like:!0,comment:!0,mention:!0}),[H,K]=w.useState(null),ue=w.useCallback((C,T="info")=>{K({message:C,type:T}),setTimeout(()=>K(null),4e3)},[]);w.useEffect(()=>{!l&&!s&&p("/")},[l,s,p]),w.useEffect(()=>{if(!e)return;const C=e.notificationPrefs;C&&$(R=>({...R,...C}));const T=e.fcmTokens||[];T.length>0&&(y(!0),k(T[T.length-1])),F(lx())},[e]);const Ee=async()=>{if(e){O(!0);try{if(g)b&&await rO(e.id,b),y(!1),k(null),t({fcmTokens:[]}),ue("Push notifications disabled","info");else{if(!Gg()){ue("Push notifications are not supported on this device","error");return}const C=await sO(e.id),T=lx();F(T),C?(y(!0),k(C),t({fcmTokens:[...e.fcmTokens||[],C]}),ue("Push notifications enabled!","success")):ue(T==="denied"?"Notifications blocked  enable them in your device settings, remove the app from your home screen and re-add it":T==="granted"?"Permission granted but setup failed  try closing and reopening the app, then toggle again":"Could not enable notifications  please try again","error")}}catch(C){console.error("Push toggle failed:",C),ue("Something went wrong  please try again","error")}finally{O(!1)}}},we=async C=>{if(!e)return;const T={...B,[C]:!B[C]};$(T);try{await bs(Ke(ye,"clients",e.id),{notificationPrefs:T}),t({notificationPrefs:T})}catch(R){console.error("Failed to save pref:",R),$(P=>({...P,[C]:!P[C]})),ue("Failed to save preference","error")}};return l||!e?a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})}):a.jsxs("div",{className:"cb-settings","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Back",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 12H5"}),a.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"settings-main",children:[a.jsx("h1",{className:"settings-title",children:"Settings"}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),"Notifications"]}),Gg()?a.jsxs("div",{className:"settings-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Push notifications"}),a.jsx("span",{className:"settings-row-desc",children:"Receive notifications even when the app is closed"})]}),a.jsx("button",{className:`settings-toggle${g?" on":""}${E?" loading":""}`,onClick:Ee,disabled:E,"aria-label":"Toggle push notifications",children:a.jsx("span",{className:"settings-toggle-knob"})})]}):a.jsx("p",{className:"settings-hint",children:"Add the app to your home screen for background push notifications. In-app notifications still work below."}),a.jsxs("div",{className:"settings-sub-section",children:[a.jsx("span",{className:"settings-sub-title",children:"Notify me about"}),iO.map(C=>a.jsxs("div",{className:"settings-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:C.label}),a.jsx("span",{className:"settings-row-desc",children:C.desc})]}),a.jsx("button",{className:`settings-toggle${B[C.key]?" on":""}`,onClick:()=>we(C.key),"aria-label":`Toggle ${C.label}`,children:a.jsx("span",{className:"settings-toggle-knob"})})]},C.key))]})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Account"]}),a.jsxs("div",{className:"settings-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Dark mode"}),a.jsx("span",{className:"settings-row-desc",children:"Switch between light and dark themes"})]}),a.jsx("button",{className:`settings-toggle${u?" on":""}`,onClick:d,"aria-label":"Toggle dark mode",children:a.jsx("span",{className:"settings-toggle-knob"})})]}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Email"}),a.jsx("span",{className:"settings-row-desc",children:e?.email||""})]})}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Plan"}),a.jsx("span",{className:"settings-row-desc",style:{textTransform:"capitalize"},children:e?.tier||"free"})]})})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Support & Feedback"]}),a.jsxs("a",{href:"mailto:ross@mindcorefitness.com?subject=Core%20Buddy%20Bug%20Report",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Report a Bug"}),a.jsx("span",{className:"settings-row-desc",children:"Found something not working? Let us know"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]}),a.jsxs("a",{href:"mailto:ross@mindcorefitness.com?subject=Core%20Buddy%20Feature%20Request",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Request a Feature"}),a.jsx("span",{className:"settings-row-desc",children:"Have an idea to improve Core Buddy?"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]}),a.jsxs("a",{href:"mailto:ross@mindcorefitness.com?subject=Core%20Buddy%20Feedback",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"General Feedback"}),a.jsx("span",{className:"settings-row-desc",children:"We'd love to hear from you"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Contact Email"}),a.jsx("span",{className:"settings-row-desc",children:"ross@mindcorefitness.com"})]})})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),a.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Legal"]}),a.jsxs("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Privacy Policy"}),a.jsx("span",{className:"settings-row-desc",children:"How we collect, use, and protect your data"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]}),a.jsxs("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Terms & Conditions"}),a.jsx("span",{className:"settings-row-desc",children:"Terms of use for Core Buddy"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"About"]}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Core Buddy"}),a.jsx("span",{className:"settings-row-desc",children:"Food. Habits. Move."})]})}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Version"}),a.jsx("span",{className:"settings-row-desc",children:"1.0.0"})]})}),a.jsxs("a",{href:"/core-buddy",target:"_blank",rel:"noopener noreferrer",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Visit Our Website"}),a.jsx("span",{className:"settings-row-desc",children:"mindcorefitness.com"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]})]}),H&&a.jsx("div",{className:`settings-toast ${H.type}`,children:H.message}),a.jsx(Jr,{active:"home"})]})}const yh=[{id:"starter_streak",name:"Starter Streak",description:"Complete 5 workouts in 7 days",goal:5,duration:7,type:"workouts",difficulty:"easy",icon:"flame",premium:!0},{id:"consistency_king",name:"Consistency King",description:"Complete 12 workouts in 30 days",goal:12,duration:30,type:"workouts",difficulty:"medium",icon:"crown",premium:!0},{id:"thirty_in_thirty",name:"30 in 30",description:"Complete 30 workouts in 30 days",goal:30,duration:30,type:"workouts",difficulty:"hard",icon:"fire",premium:!0},{id:"minute_master",name:"Minute Master",description:"Train for 300 total minutes in 30 days",goal:300,duration:30,type:"minutes",difficulty:"medium",icon:"clock",premium:!0},{id:"habit_machine",name:"Habit Machine",description:"Hit all daily habits for 7 days straight",goal:7,duration:7,type:"habits_perfect",difficulty:"medium",icon:"check",premium:!0},{id:"iron_will",name:"Iron Will",description:"Work out every day for 14 days straight",goal:14,duration:14,type:"streak",difficulty:"hard",icon:"shield",premium:!0}];function hg({icon:s,size:e=28}){const t={width:e,height:e};switch(s){case"flame":return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"})});case"crown":return a.jsxs("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7z"}),a.jsx("path",{d:"M3 20h18"})]});case"fire":return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"})});case"clock":return a.jsxs("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]});case"check":return a.jsxs("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]});case"shield":return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})});default:return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("circle",{cx:"12",cy:"12",r:"10"})})}}function cx({progress:s,goal:e,size:t=160,stroke:i=10,label:l}){const u=Math.min(s/e,1),d=(t-i)/2,p=2*Math.PI*d,g=p*(1-u);return a.jsxs("div",{className:"ch-ring-wrap",children:[a.jsxs("svg",{width:t,height:t,className:"ch-ring-svg",children:[a.jsx("circle",{cx:t/2,cy:t/2,r:d,fill:"none",stroke:"var(--ch-ring-bg)",strokeWidth:i}),a.jsx("circle",{cx:t/2,cy:t/2,r:d,fill:"none",stroke:"var(--color-primary)",strokeWidth:i,strokeDasharray:p,strokeDashoffset:g,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.6s ease",transform:"rotate(-90deg)",transformOrigin:"50% 50%"}})]}),a.jsxs("div",{className:"ch-ring-centre",children:[a.jsxs("span",{className:"ch-ring-num",children:[s,a.jsxs("span",{className:"ch-ring-slash",children:[" / ",e]})]}),l&&a.jsx("span",{className:"ch-ring-label",children:l})]})]})}const ux={easy:"#34C759",medium:"#FF9500",hard:"#FF3B30"};async function oO(s,e,t){const i=t instanceof Vt?t:Vt.fromDate(new Date(t)),l=Vt.now();switch(s.type){case"workouts":{const u=rn(mt(ye,"workoutLogs"),St("clientId","==",e),St("completedAt",">=",i),St("completedAt","<=",l));return(await Zt(u)).size}case"minutes":{const u=rn(mt(ye,"workoutLogs"),St("clientId","==",e),St("completedAt",">=",i),St("completedAt","<=",l));return(await Zt(u)).docs.reduce((p,g)=>p+(g.data().duration||0),0)}case"habits_perfect":{const u=i.toDate().toISOString().slice(0,10),d=new Date().toISOString().slice(0,10),p=rn(mt(ye,"habitLogs"),St("clientId","==",e));return(await Zt(p)).docs.filter(y=>{const b=y.data().date;if(b<u||b>d)return!1;const k=y.data().habits||{};return Object.values(k).length>0&&Object.values(k).every(E=>E===!0)}).length}case"streak":{const u=rn(mt(ye,"workoutLogs"),St("clientId","==",e),St("completedAt",">=",i),St("completedAt","<=",l)),d=await Zt(u),p=new Set(d.docs.map(k=>k.data().completedAt.toDate().toISOString().slice(0,10)));let g=0;const y=new Date(i.toDate()),b=new Date;for(;p.has(y.toISOString().slice(0,10))&&y<=b;)g++,y.setDate(y.getDate()+1);return g}default:return 0}}function lO(){const{currentUser:s,clientData:e,loading:t}=Rr(),{isDark:i,toggleTheme:l}=Mi(),{isPremium:u}=ic(),d=Xs(),[p,g]=w.useState(null),[y,b]=w.useState(null),[k,E]=w.useState(0),[O,W]=w.useState(0),[F,B]=w.useState(!0),[$,H]=w.useState(!1),[K,ue]=w.useState(null),[Ee,we]=w.useState(null),[C,T]=w.useState(!1),[R,P]=w.useState(null),M=w.useCallback((Se,Y="info")=>{we({message:Se,type:Y}),setTimeout(()=>we(null),4e3)},[]);w.useEffect(()=>{!t&&!s&&d("/")},[t,s,d]);const D=w.useCallback(async()=>{if(e){B(!0);try{const Se=rn(mt(ye,"userChallenges"),St("clientId","==",e.id),St("status","==","active")),Y=await Zt(Se);if(Y.empty)g(null),b(null);else{const ve=Y.docs[0],_e={id:ve.id,...ve.data()},be=yh.find(ke=>ke.id===_e.challengeId);if(_e.endDate.toDate()<new Date)await bs(Ke(ye,"userChallenges",ve.id),{status:"failed"}),g(null),b(null),M("Challenge expired  time ran out","error");else if(g(_e),b(be),be){const ke=await oO(be,e.id,_e.startDate);if(E(ke),ke>=be.goal&&_e.status==="active"){if(await bs(Ke(ye,"userChallenges",ve.id),{status:"completed",completedAt:Vs()}),T(!0),g(Be=>Be?{...Be,status:"completed"}:null),!_e.badgeAwarded){const Be=zl.find(st=>st.id===be.id);if(Be)try{const st=Ke(ye,"coreBuddyBadges",e.id),Pe=await Ks(st),qt=Pe.exists()?Pe.data().earned||[]:[];if(!qt.some(un=>un.id===Be.id)){const un={id:Be.id,earnedAt:new Date().toISOString()};Pe.exists()?await bs(st,{earned:[...qt,un]}):await Cs(st,{earned:[un]})}await bs(Ke(ye,"userChallenges",ve.id),{badgeAwarded:!0}),await Nr(mt(ye,"posts"),{authorId:e.id,authorName:e.name||"Anonymous",authorPhotoURL:e.photoURL||null,type:"badge_earned",metadata:{title:Be.name,badgeDesc:Be.desc,badgeId:Be.id},createdAt:Vs(),likeCount:0,commentCount:0}),P(Be)}catch(st){console.error("Badge award failed:",st)}}typeof fbq=="function"&&fbq("trackCustom","ChallengeCompleted",{challenge_name:be.name,challenge_type:be.type,duration_days:be.duration})}}}const L=rn(mt(ye,"userChallenges"),St("clientId","==",e.id),St("status","==","completed")),re=await Zt(L);W(re.size)}catch(Se){console.error("Failed to load challenges:",Se)}finally{B(!1)}}},[e,M]);w.useEffect(()=>{D()},[D]);const A=async Se=>{if(!(!e||$)){H(!0);try{const Y=yh.find(be=>be.id===Se);if(!Y)return;const L=rn(mt(ye,"userChallenges"),St("clientId","==",e.id),St("status","==","active"));if(!(await Zt(L)).empty){ue(null),M("You already have an active challenge","info"),await D();return}const ve=Vt.now(),_e=Vt.fromDate(new Date(Date.now()+Y.duration*864e5));await Nr(mt(ye,"userChallenges"),{clientId:e.id,challengeId:Se,startDate:ve,endDate:_e,status:"active",completedAt:null,badgeAwarded:!1,createdAt:Vs()}),ue(null),M(`${Y.name} started  let's go!`,"success"),await D()}catch(Y){console.error("Start challenge failed:",Y),Y?.code==="permission-denied"?M("Permission denied  please re-login and try again","error"):M("Something went wrong  try again","error")}finally{H(!1)}}},Ue=async()=>{if(!(!p||$)){H(!0);try{await bs(Ke(ye,"userChallenges",p.id),{status:"failed"}),g(null),b(null),E(0),ue(null),M("Challenge abandoned","info"),await D()}catch(Se){console.error("Give up failed:",Se),M("Something went wrong","error")}finally{H(!1)}}},Xe=p?.endDate?Math.max(0,Math.ceil((p.endDate.toDate()-new Date)/864e5)):0,Z=()=>{if(!y||!p)return"";const Se=Math.max(1,Math.ceil((Date.now()-p.startDate.toDate())/864e5)),Y=y.goal/y.duration*Se;return k>=Y*1.15?"Ahead":k>=Y*.85?"On Track":"Behind"};if(t||!e)return a.jsx("div",{className:"ch-loading",children:a.jsx("div",{className:"ch-spinner"})});const je=p&&p.status==="active"&&y,Me=C||p&&p.status==="completed";return a.jsxs("div",{className:"ch-page","data-theme":i?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Back",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 12H5"}),a.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:l,"aria-label":"Toggle theme",children:i?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ch-main",children:[a.jsx("h1",{className:"ch-title",children:"Challenges"}),a.jsx("p",{className:"ch-subtitle",children:"Push yourself with timed fitness challenges"}),F?a.jsx("div",{className:"ch-loading",children:a.jsx("div",{className:"ch-spinner"})}):Me?a.jsxs("div",{className:"ch-completed-section",children:[a.jsx(cx,{progress:y?.goal||1,goal:y?.goal||1,label:"Complete"}),a.jsx("div",{className:"ch-completed-pulse"}),a.jsx("h2",{className:"ch-completed-heading",children:"Challenge Complete!"}),a.jsx("p",{className:"ch-completed-name",children:y?.name}),a.jsxs("p",{className:"ch-completed-count",children:[O+(C?1:0)," challenge",O!==0?"s":""," completed"]}),a.jsx("button",{className:"ch-btn ch-btn-primary",onClick:()=>{T(!1),g(null),b(null),D()},children:"Choose Next Challenge"})]}):je?a.jsxs("div",{className:"ch-active-section",children:[a.jsx(cx,{progress:k,goal:y.goal,label:y.type==="minutes"?"minutes":y.type==="streak"?"day streak":y.type==="habits_perfect"?"perfect days":"workouts"}),a.jsxs("div",{className:"ch-active-info",children:[a.jsxs("div",{className:"ch-info-row",children:[a.jsxs("div",{className:"ch-info-item",children:[a.jsx("span",{className:"ch-info-val",children:Xe}),a.jsx("span",{className:"ch-info-key",children:"days left"})]}),a.jsx("div",{className:`ch-pace ch-pace-${Z().toLowerCase().replace(" ","")}`,children:Z()})]}),a.jsx("h2",{className:"ch-active-name",children:y.name}),a.jsx("p",{className:"ch-active-desc",children:y.description})]}),a.jsx("button",{className:"ch-give-up",onClick:()=>ue("giveup"),children:"Give Up"}),a.jsxs("div",{className:"ch-browse-locked",children:[a.jsx("p",{className:"ch-browse-locked-note",children:"Complete your current challenge to start a new one"}),a.jsx("div",{className:"ch-grid ch-grid-dimmed",children:yh.filter(Se=>Se.id!==y.id).map(Se=>a.jsxs("div",{className:"ch-card ch-card-locked",children:[a.jsx("div",{className:"ch-card-icon",children:a.jsx(hg,{icon:Se.icon,size:24})}),a.jsxs("div",{className:"ch-card-body",children:[a.jsx("h3",{children:Se.name}),a.jsx("p",{children:Se.description})]})]},Se.id))})]})]}):a.jsxs("div",{className:"ch-browse-section",children:[!u&&a.jsxs("div",{className:"ch-premium-banner",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{children:"Challenges are a premium feature"}),a.jsx("button",{className:"ch-upgrade-link",onClick:()=>d("/upgrade"),children:"Upgrade"})]}),a.jsx("div",{className:"ch-grid",children:yh.map(Se=>a.jsxs("button",{className:`ch-card${u?"":" ch-card-gated"}`,onClick:()=>u?ue(Se):d("/upgrade"),children:[!u&&a.jsx("div",{className:"ch-lock-overlay",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("div",{className:"ch-card-icon",children:a.jsx(hg,{icon:Se.icon})}),a.jsxs("div",{className:"ch-card-body",children:[a.jsx("h3",{children:Se.name}),a.jsx("p",{children:Se.description}),a.jsxs("div",{className:"ch-card-tags",children:[a.jsxs("span",{className:"ch-tag ch-tag-dur",children:[Se.duration," days"]}),a.jsx("span",{className:"ch-tag ch-tag-diff",style:{color:ux[Se.difficulty]},children:Se.difficulty})]})]}),a.jsx("svg",{className:"ch-card-arrow",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]},Se.id))})]})]}),K&&K!=="giveup"&&a.jsx("div",{className:"ch-modal-backdrop",onClick:()=>!$&&ue(null),children:a.jsxs("div",{className:"ch-modal",onClick:Se=>Se.stopPropagation(),children:[a.jsx("div",{className:"ch-modal-icon",children:a.jsx(hg,{icon:K.icon,size:36})}),a.jsx("h2",{children:K.name}),a.jsx("p",{children:K.description}),a.jsxs("div",{className:"ch-modal-details",children:[a.jsxs("span",{children:[K.duration," days"]}),a.jsx("span",{style:{color:ux[K.difficulty]},children:K.difficulty})]}),a.jsx("button",{className:"ch-btn ch-btn-primary",onClick:()=>A(K.id),disabled:$,children:$?"Starting...":"Start Challenge"}),a.jsx("button",{className:"ch-btn ch-btn-secondary",onClick:()=>ue(null),disabled:$,children:"Cancel"})]})}),K==="giveup"&&a.jsx("div",{className:"ch-modal-backdrop",onClick:()=>!$&&ue(null),children:a.jsxs("div",{className:"ch-modal",onClick:Se=>Se.stopPropagation(),children:[a.jsx("h2",{children:"Give Up?"}),a.jsx("p",{children:"Your progress will be lost and this challenge will be marked as failed."}),a.jsx("button",{className:"ch-btn ch-btn-danger",onClick:Ue,disabled:$,children:$?"Abandoning...":"Yes, Give Up"}),a.jsx("button",{className:"ch-btn ch-btn-secondary",onClick:()=>ue(null),disabled:$,children:"Keep Going"})]})}),R&&a.jsxs("div",{className:"cb-celebration-overlay",onClick:()=>P(null),children:[a.jsx("div",{className:"cb-confetti-container",children:Array.from({length:24}).map((Se,Y)=>a.jsx("div",{className:"cb-confetti-piece",style:{"--angle":`${Y/24*360}deg`,"--distance":`${80+Math.random()*60}px`,"--drift":`${(Math.random()-.5)*40}px`,"--size":`${4+Math.random()*4}px`,"--color":["#FFD700","#FF6B6B","#4ECDC4","#A1C4FD","#F093FB","#FFECD2"][Y%6],"--delay":`${Math.random()*.3}s`}},Y))}),a.jsxs("div",{className:"cb-celebration-content",children:[a.jsx("div",{className:"cb-celebration-glow"}),R.img&&a.jsx("img",{src:R.img,alt:R.name,className:"cb-celebration-badge-img"}),a.jsx("h2",{className:"cb-celebration-title",children:"Badge Unlocked!"}),a.jsx("p",{className:"cb-celebration-name",children:R.name}),a.jsx("p",{className:"cb-celebration-desc",children:R.desc}),a.jsx("button",{className:"cb-celebration-dismiss",children:"Tap to dismiss"})]})]}),Ee&&a.jsx("div",{className:`ch-toast ch-toast-${Ee.type}`,children:Ee.message}),a.jsx(Jr,{})]})}const cO={workouts:"Workouts",streaks:"Streaks",pbs:"Personal Bests",nutrition:"Nutrition",leaderboard:"Leaderboard",habits:"Habits",challenges:"Challenges"},uO=["workouts","streaks","pbs","nutrition","leaderboard","habits","challenges"];function dO(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Rr(),{isDark:l,toggleTheme:u}=Mi(),d=Xs(),[p,g]=w.useState(new Set),[y,b]=w.useState({}),[k,E]=w.useState(!0),[O,W]=w.useState(null);w.useEffect(()=>{!i&&(!s||!e)&&d("/")},[s,e,i,d]),w.useEffect(()=>{t&&(async()=>{E(!0);try{const $=await Ks(Ke(ye,"coreBuddyBadges",t.id));if($.exists()){const H=$.data().earned||[];g(new Set(H.map(ue=>ue.id)));const K={};H.forEach(ue=>{K[ue.id]=ue}),b(K)}}catch($){console.error("Failed to load badges:",$)}finally{E(!1)}})()},[t]);const F=uO.map($=>({key:$,label:cO[$],badges:zl.filter(H=>H.category===$)})).filter($=>$.badges.length>0),B=zl.filter($=>p.has($.id)).length;return i||!t?a.jsx("div",{className:"bdg-loading",children:a.jsx("div",{className:"bdg-spinner"})}):a.jsxs("div",{className:"bdg-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Back",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 12H5"}),a.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdg-main",children:[a.jsx("h1",{className:"bdg-title",children:"Badges"}),a.jsxs("p",{className:"bdg-subtitle",children:[B," / ",zl.length," earned"]}),k?a.jsx("div",{className:"bdg-loading-inline",children:a.jsx("div",{className:"bdg-spinner"})}):F.map($=>a.jsxs("div",{className:"bdg-category",children:[a.jsx("h2",{className:"bdg-category-title",children:$.label}),a.jsx("div",{className:"bdg-grid",children:$.badges.map(H=>{const K=p.has(H.id);return a.jsxs("button",{className:`bdg-item${K?" earned":" locked"}`,onClick:()=>W(H),children:[a.jsxs("div",{className:"bdg-img-wrap",children:[H.img?a.jsx("img",{src:H.img,alt:H.name,className:"bdg-img"}):a.jsx("div",{className:"bdg-img-placeholder",children:a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M9 14l-4 8h14l-4-8"})]})}),!K&&a.jsx("div",{className:"bdg-lock-overlay",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})})]}),a.jsx("span",{className:"bdg-name",children:H.name})]},H.id)})})]},$.key))]}),O&&a.jsx("div",{className:"bdg-modal-backdrop",onClick:()=>W(null),children:a.jsxs("div",{className:"bdg-modal",onClick:$=>$.stopPropagation(),children:[a.jsx("div",{className:`bdg-modal-img-wrap${p.has(O.id)?" earned":" locked"}`,children:O.img?a.jsx("img",{src:O.img,alt:O.name,className:"bdg-modal-img"}):a.jsx("div",{className:"bdg-modal-placeholder",children:a.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M9 14l-4 8h14l-4-8"})]})})}),a.jsx("h2",{className:"bdg-modal-name",children:O.name}),a.jsx("p",{className:"bdg-modal-desc",children:O.desc}),p.has(O.id)?a.jsxs("span",{className:"bdg-modal-status earned",children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})}),"Earned",y[O.id]?.earnedAt?`  ${new Date(y[O.id].earnedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:""]}):a.jsxs("span",{className:"bdg-modal-status locked",children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),"Locked"]}),a.jsx("button",{className:"bdg-modal-close",onClick:()=>W(null),children:"Close"})]})}),a.jsx(Jr,{active:"badges"})]})}const hO=w.lazy(()=>Qs(()=>import("./Dashboard-C1mj4i1c.js"),__vite__mapDeps([0,1,2]))),fO=w.lazy(()=>Qs(()=>import("./AddClient-D-CL5VLq.js"),__vite__mapDeps([3,4]))),mO=w.lazy(()=>Qs(()=>import("./ClientDashboard-CGimOQni.js"),__vite__mapDeps([5,1,6]))),pO=w.lazy(()=>Qs(()=>import("./ClientForms-BMKzOVcE.js"),__vite__mapDeps([7,8,6]))),gO=w.lazy(()=>Qs(()=>import("./ClientTools-C9oewgyx.js"),__vite__mapDeps([9,10,6]))),yO=w.lazy(()=>Qs(()=>import("./MacroCalculator-BOem-L1c.js"),__vite__mapDeps([11,10,6]))),vO=w.lazy(()=>Qs(()=>import("./ProteinSnacks-DB4GlOYl.js"),__vite__mapDeps([12,10,6]))),bO=w.lazy(()=>Qs(()=>import("./DailyMotivation-BcBLhJVs.js"),__vite__mapDeps([13,10,6]))),wO=w.lazy(()=>Qs(()=>import("./CircuitDashboard-CyH_XdtY.js"),__vite__mapDeps([14,15]))),xO=w.lazy(()=>Qs(()=>import("./CircuitBooking-Wimp-iuc.js"),__vite__mapDeps([16,17,15]))),_O=w.lazy(()=>Qs(()=>import("./PersonalBests-CD3Y4m3N.js"),__vite__mapDeps([18,19,6]))),kO=w.lazy(()=>Qs(()=>import("./Leaderboard-DAIyspTF.js"),__vite__mapDeps([20,21]))),EO=w.lazy(()=>Qs(()=>import("./UpgradePage-BrrEbwmk.js"),__vite__mapDeps([22,23,24]))),TO=w.lazy(()=>Qs(()=>import("./SignUp-ChJIHPRk.js"),[])),jO=w.lazy(()=>Qs(()=>import("./Onboarding-D-cVjGkc.js"),__vite__mapDeps([25,23,26])));function SO({children:s}){const{pathname:e}=Ii();return w.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),w.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function CO(){const s=Xs();return w.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function NO(){return a.jsx(KD,{children:a.jsx(GD,{children:a.jsx(ZD,{children:a.jsxs(sC,{basename:"/login",children:[a.jsx(CO,{}),a.jsx(SO,{children:a.jsx(w.Suspense,{fallback:a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:a.jsx("div",{style:{width:36,height:36,border:"3px solid var(--color-primary-light)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"app-spin .7s linear infinite"}})}),children:a.jsxs(IS,{children:[a.jsx(Sn,{path:"/",element:a.jsx(n3,{})}),a.jsx(Sn,{path:"/dashboard",element:a.jsx(hO,{})}),a.jsx(Sn,{path:"/add-client",element:a.jsx(fO,{})}),a.jsx(Sn,{path:"/client",element:a.jsx(mO,{})}),a.jsx(Sn,{path:"/client/forms",element:a.jsx(pO,{})}),a.jsx(Sn,{path:"/client/tools",element:a.jsx(gO,{})}),a.jsx(Sn,{path:"/client/tools/macros",element:a.jsx(yO,{})}),a.jsx(Sn,{path:"/client/tools/snacks",element:a.jsx(vO,{})}),a.jsx(Sn,{path:"/client/tools/motivation",element:a.jsx(bO,{})}),a.jsx(Sn,{path:"/client/personal-bests",element:a.jsx(_O,{})}),a.jsx(Sn,{path:"/client/circuit",element:a.jsx(wO,{})}),a.jsx(Sn,{path:"/client/circuit/booking",element:a.jsx(xO,{})}),a.jsx(Sn,{path:"/client/core-buddy",element:a.jsx(N3,{})}),a.jsx(Sn,{path:"/client/core-buddy/nutrition",element:a.jsx(hh,{feature:"nutrition",children:a.jsx(I3,{})})}),a.jsx(Sn,{path:"/client/core-buddy/workouts",element:a.jsx(m5,{})}),a.jsx(Sn,{path:"/client/core-buddy/consistency",element:a.jsx(hh,{feature:"consistency",children:a.jsx(_5,{})})}),a.jsx(Sn,{path:"/client/core-buddy/buddies",element:a.jsx(hh,{feature:"buddies",children:a.jsx(k5,{})})}),a.jsx(Sn,{path:"/client/core-buddy/builder",element:a.jsx(S5,{})}),a.jsx(Sn,{path:"/client/core-buddy/profile/:userId",element:a.jsx(T5,{})}),a.jsx(Sn,{path:"/client/core-buddy/settings",element:a.jsx(aO,{})}),a.jsx(Sn,{path:"/client/core-buddy/challenges",element:a.jsx(lO,{})}),a.jsx(Sn,{path:"/client/core-buddy/badges",element:a.jsx(dO,{})}),a.jsx(Sn,{path:"/client/leaderboard",element:a.jsx(hh,{feature:"leaderboard",children:a.jsx(kO,{})})}),a.jsx(Sn,{path:"/signup",element:a.jsx(TO,{})}),a.jsx(Sn,{path:"/onboarding",element:a.jsx(jO,{})}),a.jsx(Sn,{path:"/upgrade",element:a.jsx(EO,{})}),a.jsx(Sn,{path:"*",element:a.jsx(Ex,{to:"/",replace:!0})})]})})})]})})})})}Ij.createRoot(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsx(NO,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").then(s=>{setInterval(()=>s.update(),3600*1e3)}).catch(s=>console.warn("SW registration failed:",s))});export{RO as A,Vs as B,Jr as C,Xo as P,Vt as T,Nr as a,Sr as b,mt as c,ye as d,Ke as e,$A as f,Zt as g,XA as h,Cs as i,a as j,Ks as k,Rr as l,Mi as m,Xs as n,_u as o,_E as p,rn as q,w as r,MO as s,AO as t,bs as u,DO as v,St as w,ic as x,t3 as y,e3 as z};
