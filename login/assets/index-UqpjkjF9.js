const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CpP2nxKv.js","assets/scheduleUtils-a2tn0x12.js","assets/Dashboard-BvdLF0uv.css","assets/AddClient-D6Dt2yzc.js","assets/AddClient-DH1OFzHo.css","assets/ClientDashboard-B11brUP4.js","assets/ClientDashboard-BI8UXFpK.css","assets/ClientForms-Cf8buDnk.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-7gdB1RCp.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-DhHNf25d.js","assets/ProteinSnacks-B6g6-DUB.js","assets/DailyMotivation-2Wifn_3t.js","assets/CircuitDashboard-BaPFxzxX.js","assets/CircuitDashboard-C8T0uect.css","assets/CircuitBooking-uf5FysDR.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-48VhiNo6.js","assets/Leaderboard-Dq-r5svP.css","assets/UpgradePage-C68HKKp2.js","assets/UpgradePage-Blt11CID.css","assets/Onboarding-D7930vUb.js","assets/Onboarding-Bku4iVdQ.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=t(l);fetch(l.href,u)}})();var lp={exports:{}},Dc={};var lb;function lk(){if(lb)return Dc;lb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:h,ref:l!==void 0?l:null,props:u}}return Dc.Fragment=e,Dc.jsx=t,Dc.jsxs=t,Dc}var cb;function ck(){return cb||(cb=1,lp.exports=lk()),lp.exports}var a=ck(),cp={exports:{}},Ct={};var ub;function uk(){if(ub)return Ct;ub=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function O(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,z={};function ne(M,K,be){this.props=M,this.context=K,this.refs=z,this.updater=be||H}ne.prototype.isReactComponent={},ne.prototype.setState=function(M,K){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,K,"setState")},ne.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function W(){}W.prototype=ne.prototype;function ee(M,K,be){this.props=M,this.context=K,this.refs=z,this.updater=be||H}var ye=ee.prototype=new W;ye.constructor=ee,q(ye,ne.prototype),ye.isPureReactComponent=!0;var Se=Array.isArray;function _e(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function I(M,K,be){var Ce=be.ref;return{$$typeof:s,type:M,key:K,ref:Ce!==void 0?Ce:null,props:be}}function P(M,K){return I(M.type,K,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function L(M){var K={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(be){return K[be]})}var A=/\/+/g;function De(M,K){return typeof M=="object"&&M!==null&&M.key!=null?L(""+M.key):K.toString(36)}function Qe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(_e,_e):(M.status="pending",M.then(function(K){M.status==="pending"&&(M.status="fulfilled",M.value=K)},function(K){M.status==="pending"&&(M.status="rejected",M.reason=K)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function te(M,K,be,Ce,Te){var Ee=typeof M;(Ee==="undefined"||Ee==="boolean")&&(M=null);var We=!1;if(M===null)We=!0;else switch(Ee){case"bigint":case"string":case"number":We=!0;break;case"object":switch(M.$$typeof){case s:case e:We=!0;break;case b:return We=M._init,te(We(M._payload),K,be,Ce,Te)}}if(We)return Te=Te(M),We=Ce===""?"."+De(M,0):Ce,Se(Te)?(be="",We!=null&&(be=We.replace(A,"$&/")+"/"),te(Te,K,be,"",function(kn){return kn})):Te!=null&&(D(Te)&&(Te=P(Te,be+(Te.key==null||M&&M.key===Te.key?"":(""+Te.key).replace(A,"$&/")+"/")+We)),K.push(Te)),1;We=0;var nt=Ce===""?".":Ce+":";if(Se(M))for(var Be=0;Be<M.length;Be++)Ce=M[Be],Ee=nt+De(Ce,Be),We+=te(Ce,K,be,Ee,Te);else if(Be=O(M),typeof Be=="function")for(M=Be.call(M),Be=0;!(Ce=M.next()).done;)Ce=Ce.value,Ee=nt+De(Ce,Be++),We+=te(Ce,K,be,Ee,Te);else if(Ee==="object"){if(typeof M.then=="function")return te(Qe(M),K,be,Ce,Te);throw K=String(M),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return We}function xe(M,K,be){if(M==null)return M;var Ce=[],Te=0;return te(M,Ce,"","",function(Ee){return K.call(be,Ee,Te++)}),Ce}function Pe(M){if(M._status===-1){var K=M._result;K=K(),K.then(function(be){(M._status===0||M._status===-1)&&(M._status=1,M._result=be)},function(be){(M._status===0||M._status===-1)&&(M._status=2,M._result=be)}),M._status===-1&&(M._status=0,M._result=K)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},ie={map:xe,forEach:function(M,K,be){xe(M,function(){K.apply(this,arguments)},be)},count:function(M){var K=0;return xe(M,function(){K++}),K},toArray:function(M){return xe(M,function(K){return K})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ct.Activity=E,Ct.Children=ie,Ct.Component=ne,Ct.Fragment=t,Ct.Profiler=l,Ct.PureComponent=ee,Ct.StrictMode=i,Ct.Suspense=g,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(M){return R.H.useMemoCache(M)}},Ct.cache=function(M){return function(){return M.apply(null,arguments)}},Ct.cacheSignal=function(){return null},Ct.cloneElement=function(M,K,be){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var Ce=q({},M.props),Te=M.key;if(K!=null)for(Ee in K.key!==void 0&&(Te=""+K.key),K)!S.call(K,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&K.ref===void 0||(Ce[Ee]=K[Ee]);var Ee=arguments.length-2;if(Ee===1)Ce.children=be;else if(1<Ee){for(var We=Array(Ee),nt=0;nt<Ee;nt++)We[nt]=arguments[nt+2];Ce.children=We}return I(M.type,Te,Ce)},Ct.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Ct.createElement=function(M,K,be){var Ce,Te={},Ee=null;if(K!=null)for(Ce in K.key!==void 0&&(Ee=""+K.key),K)S.call(K,Ce)&&Ce!=="key"&&Ce!=="__self"&&Ce!=="__source"&&(Te[Ce]=K[Ce]);var We=arguments.length-2;if(We===1)Te.children=be;else if(1<We){for(var nt=Array(We),Be=0;Be<We;Be++)nt[Be]=arguments[Be+2];Te.children=nt}if(M&&M.defaultProps)for(Ce in We=M.defaultProps,We)Te[Ce]===void 0&&(Te[Ce]=We[Ce]);return I(M,Ee,Te)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(M){return{$$typeof:p,render:M}},Ct.isValidElement=D,Ct.lazy=function(M){return{$$typeof:b,_payload:{_status:-1,_result:M},_init:Pe}},Ct.memo=function(M,K){return{$$typeof:y,type:M,compare:K===void 0?null:K}},Ct.startTransition=function(M){var K=R.T,be={};R.T=be;try{var Ce=M(),Te=R.S;Te!==null&&Te(be,Ce),typeof Ce=="object"&&Ce!==null&&typeof Ce.then=="function"&&Ce.then(_e,qe)}catch(Ee){qe(Ee)}finally{K!==null&&be.types!==null&&(K.types=be.types),R.T=K}},Ct.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ct.use=function(M){return R.H.use(M)},Ct.useActionState=function(M,K,be){return R.H.useActionState(M,K,be)},Ct.useCallback=function(M,K){return R.H.useCallback(M,K)},Ct.useContext=function(M){return R.H.useContext(M)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(M,K){return R.H.useDeferredValue(M,K)},Ct.useEffect=function(M,K){return R.H.useEffect(M,K)},Ct.useEffectEvent=function(M){return R.H.useEffectEvent(M)},Ct.useId=function(){return R.H.useId()},Ct.useImperativeHandle=function(M,K,be){return R.H.useImperativeHandle(M,K,be)},Ct.useInsertionEffect=function(M,K){return R.H.useInsertionEffect(M,K)},Ct.useLayoutEffect=function(M,K){return R.H.useLayoutEffect(M,K)},Ct.useMemo=function(M,K){return R.H.useMemo(M,K)},Ct.useOptimistic=function(M,K){return R.H.useOptimistic(M,K)},Ct.useReducer=function(M,K,be){return R.H.useReducer(M,K,be)},Ct.useRef=function(M){return R.H.useRef(M)},Ct.useState=function(M){return R.H.useState(M)},Ct.useSyncExternalStore=function(M,K,be){return R.H.useSyncExternalStore(M,K,be)},Ct.useTransition=function(){return R.H.useTransition()},Ct.version="19.2.4",Ct}var hb;function Eg(){return hb||(hb=1,cp.exports=uk()),cp.exports}var w=Eg(),up={exports:{}},Mc={},hp={exports:{}},dp={};var db;function hk(){return db||(db=1,(function(s){function e(te,xe){var Pe=te.length;te.push(xe);e:for(;0<Pe;){var qe=Pe-1>>>1,ie=te[qe];if(0<l(ie,xe))te[qe]=xe,te[Pe]=ie,Pe=qe;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var xe=te[0],Pe=te.pop();if(Pe!==xe){te[0]=Pe;e:for(var qe=0,ie=te.length,M=ie>>>1;qe<M;){var K=2*(qe+1)-1,be=te[K],Ce=K+1,Te=te[Ce];if(0>l(be,Pe))Ce<ie&&0>l(Te,be)?(te[qe]=Te,te[Ce]=Pe,qe=Ce):(te[qe]=be,te[K]=Pe,qe=K);else if(Ce<ie&&0>l(Te,Pe))te[qe]=Te,te[Ce]=Pe,qe=Ce;else break e}}return xe}function l(te,xe){var Pe=te.sortIndex-xe.sortIndex;return Pe!==0?Pe:te.id-xe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],y=[],b=1,E=null,T=3,O=!1,H=!1,q=!1,z=!1,ne=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function ye(te){for(var xe=t(y);xe!==null;){if(xe.callback===null)i(y);else if(xe.startTime<=te)i(y),xe.sortIndex=xe.expirationTime,e(g,xe);else break;xe=t(y)}}function Se(te){if(q=!1,ye(te),!H)if(t(g)!==null)H=!0,_e||(_e=!0,L());else{var xe=t(y);xe!==null&&Qe(Se,xe.startTime-te)}}var _e=!1,R=-1,S=5,I=-1;function P(){return z?!0:!(s.unstable_now()-I<S)}function D(){if(z=!1,_e){var te=s.unstable_now();I=te;var xe=!0;try{e:{H=!1,q&&(q=!1,W(R),R=-1),O=!0;var Pe=T;try{t:{for(ye(te),E=t(g);E!==null&&!(E.expirationTime>te&&P());){var qe=E.callback;if(typeof qe=="function"){E.callback=null,T=E.priorityLevel;var ie=qe(E.expirationTime<=te);if(te=s.unstable_now(),typeof ie=="function"){E.callback=ie,ye(te),xe=!0;break t}E===t(g)&&i(g),ye(te)}else i(g);E=t(g)}if(E!==null)xe=!0;else{var M=t(y);M!==null&&Qe(Se,M.startTime-te),xe=!1}}break e}finally{E=null,T=Pe,O=!1}xe=void 0}}finally{xe?L():_e=!1}}}var L;if(typeof ee=="function")L=function(){ee(D)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,De=A.port2;A.port1.onmessage=D,L=function(){De.postMessage(null)}}else L=function(){ne(D,0)};function Qe(te,xe){R=ne(function(){te(s.unstable_now())},xe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(te){switch(T){case 1:case 2:case 3:var xe=3;break;default:xe=T}var Pe=T;T=xe;try{return te()}finally{T=Pe}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(te,xe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Pe=T;T=te;try{return xe()}finally{T=Pe}},s.unstable_scheduleCallback=function(te,xe,Pe){var qe=s.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?qe+Pe:qe):Pe=qe,te){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Pe+ie,te={id:b++,callback:xe,priorityLevel:te,startTime:Pe,expirationTime:ie,sortIndex:-1},Pe>qe?(te.sortIndex=Pe,e(y,te),t(g)===null&&te===t(y)&&(q?(W(R),R=-1):q=!0,Qe(Se,Pe-qe))):(te.sortIndex=ie,e(g,te),H||O||(H=!0,_e||(_e=!0,L()))),te},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(te){var xe=T;return function(){var Pe=T;T=xe;try{return te.apply(this,arguments)}finally{T=Pe}}}})(dp)),dp}var fb;function dk(){return fb||(fb=1,hp.exports=hk()),hp.exports}var fp={exports:{}},Xs={};var mb;function fk(){if(mb)return Xs;mb=1;var s=Eg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:g,containerInfo:y,implementation:b}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Xs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Xs.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,b)},Xs.flushSync=function(g){var y=h.T,b=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=b,i.d.f()}},Xs.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Xs.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Xs.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:O}):b==="script"&&i.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Xs.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Xs.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Xs.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Xs.requestFormReset=function(g){i.d.r(g)},Xs.unstable_batchedUpdates=function(g,y){return g(y)},Xs.useFormState=function(g,y,b){return h.H.useFormState(g,y,b)},Xs.useFormStatus=function(){return h.H.useHostTransitionStatus()},Xs.version="19.2.4",Xs}var pb;function mk(){if(pb)return fp.exports;pb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),fp.exports=fk(),fp.exports}var gb;function pk(){if(gb)return Mc;gb=1;var s=dk(),e=Eg(),t=mk();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(i(188))}function y(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),n;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var _=!1,k=f.child;k;){if(k===o){_=!0,o=f,c=m;break}if(k===c){_=!0,c=f,o=m;break}k=k.sibling}if(!_){for(k=m.child;k;){if(k===o){_=!0,o=m,c=f;break}if(k===c){_=!0,c=m,o=f;break}k=k.sibling}if(!_)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function b(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=b(n),r!==null)return r;n=n.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),_e=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var A=Symbol.for("react.client.reference");function De(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===A?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case ne:return"Profiler";case z:return"StrictMode";case Se:return"Suspense";case _e:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case H:return"Portal";case ee:return n.displayName||"Context";case W:return(n._context.displayName||"Context")+".Consumer";case ye:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return r=n.displayName||null,r!==null?r:De(n.type)||"Memo";case S:r=n._payload,n=n._init;try{return De(n(r))}catch{}}return null}var Qe=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe={pending:!1,data:null,method:null,action:null},qe=[],ie=-1;function M(n){return{current:n}}function K(n){0>ie||(n.current=qe[ie],qe[ie]=null,ie--)}function be(n,r){ie++,qe[ie]=n.current,n.current=r}var Ce=M(null),Te=M(null),Ee=M(null),We=M(null);function nt(n,r){switch(be(Ee,r),be(Te,n),be(Ce,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?R1(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=R1(r),n=I1(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}K(Ce),be(Ce,n)}function Be(){K(Ce),K(Te),K(Ee)}function kn(n){n.memoizedState!==null&&be(We,n);var r=Ce.current,o=I1(r,n.type);r!==o&&(be(Te,n),be(Ce,o))}function Sn(n){Te.current===n&&(K(Ce),K(Te)),We.current===n&&(K(We),Nc._currentValue=Pe)}var Cn,Ft;function Et(n){if(Cn===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Cn=r&&r[1]||"",Ft=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cn+n+Ft}var vt=!1;function ct(n,r){if(!n||vt)return"";vt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(ce){var se=ce}Reflect.construct(n,[],ve)}else{try{ve.call()}catch(ce){se=ce}n.call(ve.prototype)}}else{try{throw Error()}catch(ce){se=ce}(ve=n())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(ce){if(ce&&se&&typeof ce.stack=="string")return[ce.stack,se.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),_=m[0],k=m[1];if(_&&k){var U=_.split(`
`),Z=k.split(`
`);for(f=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(c===U.length||f===Z.length)for(c=U.length-1,f=Z.length-1;1<=c&&0<=f&&U[c]!==Z[f];)f--;for(;1<=c&&0<=f;c--,f--)if(U[c]!==Z[f]){if(c!==1||f!==1)do if(c--,f--,0>f||U[c]!==Z[f]){var fe=`
`+U[c].replace(" at new "," at ");return n.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",n.displayName)),fe}while(1<=c&&0<=f);break}}}finally{vt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Et(o):""}function Zn(n,r){switch(n.tag){case 26:case 27:case 5:return Et(n.type);case 16:return Et("Lazy");case 13:return n.child!==r&&r!==null?Et("Suspense Fallback"):Et("Suspense");case 19:return Et("SuspenseList");case 0:case 15:return ct(n.type,!1);case 11:return ct(n.type.render,!1);case 1:return ct(n.type,!0);case 31:return Et("Activity");default:return""}}function bt(n){try{var r="",o=null;do r+=Zn(n,o),o=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Lt=Object.prototype.hasOwnProperty,ae=s.unstable_scheduleCallback,ln=s.unstable_cancelCallback,ut=s.unstable_shouldYield,At=s.unstable_requestPaint,tt=s.unstable_now,$t=s.unstable_getCurrentPriorityLevel,nn=s.unstable_ImmediatePriority,sn=s.unstable_UserBlockingPriority,jn=s.unstable_NormalPriority,Ls=s.unstable_LowPriority,Fn=s.unstable_IdlePriority,de=s.log,Re=s.unstable_setDisableYieldValue,Ze=null,et=null;function st(n){if(typeof de=="function"&&Re(n),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(Ze,n)}catch{}}var Oe=Math.clz32?Math.clz32:rn,_t=Math.log,kt=Math.LN2;function rn(n){return n>>>=0,n===0?32:31-(_t(n)/kt|0)|0}var mn=256,pn=262144,Pt=4194304;function Vn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Nn(n,r,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var k=c&134217727;return k!==0?(c=k&~m,c!==0?f=Vn(c):(_&=k,_!==0?f=Vn(_):o||(o=k&~n,o!==0&&(f=Vn(o))))):(k=c&~m,k!==0?f=Vn(k):_!==0?f=Vn(_):o||(o=c&~n,o!==0&&(f=Vn(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function wn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function hs(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function le(){var n=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),n}function Ae(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Fe(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ht(n,r,o,c,f,m){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var k=n.entanglements,U=n.expirationTimes,Z=n.hiddenUpdates;for(o=_&~o;0<o;){var fe=31-Oe(o),ve=1<<fe;k[fe]=0,U[fe]=-1;var se=Z[fe];if(se!==null)for(Z[fe]=null,fe=0;fe<se.length;fe++){var ce=se[fe];ce!==null&&(ce.lane&=-536870913)}o&=~ve}c!==0&&rt(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~r))}function rt(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-Oe(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function qn(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-Oe(o),f=1<<c;f&r|n[c]&r&&(n[c]|=r),o&=~f}}function Hn(n,r){var o=r&-r;return o=(o&42)!==0?1:Zt(o),(o&(n.suspendedLanes|r))!==0?0:o}function Zt(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function gn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Os(){var n=xe.p;return n!==0?n:(n=window.event,n===void 0?32:tb(n.type))}function _s(n,r){var o=xe.p;try{return xe.p=n,r()}finally{xe.p=o}}var es=Math.random().toString(36).slice(2),cn="__reactFiber$"+es,ts="__reactProps$"+es,Cs="__reactContainer$"+es,Or="__reactEvents$"+es,hr="__reactListeners$"+es,dr="__reactHandles$"+es,Pr="__reactResources$"+es,ws="__reactMarker$"+es;function fr(n){delete n[cn],delete n[ts],delete n[Or],delete n[hr],delete n[dr]}function Ps(n){var r=n[cn];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Cs]||o[cn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=U1(n);n!==null;){if(o=n[cn])return o;n=U1(n)}return r}n=o,o=n.parentNode}return null}function Qn(n){if(n=n[cn]||n[Cs]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Un(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function js(n){var r=n[Pr];return r||(r=n[Pr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function yn(n){n[ws]=!0}var Vs=new Set,Qs={};function ds(n,r){xn(n,r),xn(n+"Capture",r)}function xn(n,r){for(Qs[n]=r,n=0;n<r.length;n++)Vs.add(r[n])}var ti=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vr={},mr={};function Ns(n){return Lt.call(mr,n)?!0:Lt.call(Vr,n)?!1:ti.test(n)?mr[n]=!0:(Vr[n]=!0,!1)}function As(n,r,o){if(Ns(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function xs(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function C(n,r,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+c)}}function B(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function re(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ue(n,r,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Me(n){if(!n._valueTracker){var r=re(n)?"checked":"value";n._valueTracker=ue(n,r,""+n[r])}}function Ge(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=re(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function ze(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Bt=/[\n"\\]/g;function dt(n){return n.replace(Bt,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xn(n,r,o,c,f,m,_,k){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),r!=null?_==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+B(r)):n.value!==""+B(r)&&(n.value=""+B(r)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),r!=null?Ur(n,_,B(r)):o!=null?Ur(n,_,B(o)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.name=""+B(k):n.removeAttribute("name")}function nr(n,r,o,c,f,m,_,k){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Me(n);return}o=o!=null?""+B(o):"",r=r!=null?""+B(r):o,k||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=k?n.checked:!!c,n.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Me(n)}function Ur(n,r,o){r==="number"&&ze(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Us(n,r,o,c){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+B(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function mi(n,r,o){if(r!=null&&(r=""+B(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+B(o):""}function Br(n,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(Qe(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=B(r),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Me(n)}function j(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var G=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ne(n,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,o):typeof o!="number"||o===0||G.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Ie(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&Ne(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Ne(n,m,r[m])}function He(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(n){return Xe.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function wt(){}var vn=null;function un(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Wn=null,Es=null;function Er(n){var r=Qn(n);if(r&&(n=r.stateNode)){var o=n[ts]||null;e:switch(n=r.stateNode,r.type){case"input":if(Xn(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+dt(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var f=c[ts]||null;if(!f)throw Error(i(90));Xn(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===n.form&&Ge(c)}break e;case"textarea":mi(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Us(n,!!o.multiple,r,!1)}}}var Rs=!1;function V(n,r,o){if(Rs)return n(r,o);Rs=!0;try{var c=n(r);return c}finally{if(Rs=!1,(Wn!==null||Es!==null)&&(kh(),Wn&&(r=Wn,n=Es,Es=Wn=null,Er(r),n)))for(r=0;r<n.length;r++)Er(n[r])}}function X(n,r){var o=n.stateNode;if(o===null)return null;var c=o[ts]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var J=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ge=!1;if(J)try{var he={};Object.defineProperty(he,"passive",{get:function(){ge=!0}}),window.addEventListener("test",he,he),window.removeEventListener("test",he,he)}catch{ge=!1}var je=null,Ue=null,ft=null;function Rt(){if(ft)return ft;var n,r=Ue,o=r.length,c,f="value"in je?je.value:je.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var _=o-n;for(c=1;c<=_&&r[o-c]===f[m-c];c++);return ft=f.slice(n,1<c?1-c:void 0)}function Vt(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function ot(){return!0}function qt(){return!1}function tn(n){function r(o,c,f,m,_){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(o=n[k],this[k]=o?o(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ot:qt,this.isPropagationStopped=qt,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ot)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ot)},persist:function(){},isPersistent:ot}),r}var lt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xt=tn(lt),zt=E({},lt,{view:0,detail:0}),Nt=tn(zt),hn,sr,Bs,zr=E({},zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ma,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bs&&(Bs&&n.type==="mousemove"?(hn=n.screenX-Bs.screenX,sr=n.screenY-Bs.screenY):sr=hn=0,Bs=n),hn)},movementY:function(n){return"movementY"in n?n.movementY:sr}}),zs=tn(zr),Fs=E({},zr,{dataTransfer:0}),pi=tn(Fs),oo=E({},zt,{relatedTarget:0}),Oi=tn(oo),Pi=E({},lt,{animationName:0,elapsedTime:0,pseudoElement:0}),Lu=tn(Pi),Go=E({},lt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ou=tn(Go),Pu=E({},lt,{data:0}),gi=tn(Pu),Vu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zu(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Bu[n])?!!r[n]:!1}function ma(){return zu}var rr=E({},zt,{key:function(n){if(n.key){var r=Vu[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Vt(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Uu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ma,charCode:function(n){return n.type==="keypress"?Vt(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Vt(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fu=tn(rr),qu=E({},zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vi=tn(qu),d=E({},zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ma}),v=tn(d),x=E({},lt,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=tn(x),Y=E({},zr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),oe=tn(Y),Le=E({},lt,{newState:0,oldState:0}),It=tn(Le),os=[9,13,27,32],dn=J&&"CompositionEvent"in window,$n=null;J&&"documentMode"in document&&($n=document.documentMode);var Fr=J&&"TextEvent"in window&&!$n,yi=J&&(!dn||$n&&8<$n&&11>=$n),ni=" ",si=!1;function lo(n,r){switch(n){case"keyup":return os.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ko(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yo=!1;function IE(n,r){switch(n){case"compositionend":return Ko(r);case"keypress":return r.which!==32?null:(si=!0,ni);case"textInput":return n=r.data,n===ni&&si?null:n;default:return null}}function DE(n,r){if(Yo)return n==="compositionend"||!dn&&lo(n,r)?(n=Rt(),ft=Ue=je=null,Yo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yi&&r.locale!=="ko"?null:r.data;default:return null}}var ME={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fy(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!ME[n.type]:r==="textarea"}function qy(n,r,o,c){Wn?Es?Es.push(c):Es=[c]:Wn=c,r=Ih(r,"onChange"),0<r.length&&(o=new xt("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var Xl=null,Jl=null;function LE(n){k1(n,0)}function Hu(n){var r=Un(n);if(Ge(r))return n}function Hy(n,r){if(n==="change")return r}var Wy=!1;if(J){var pf;if(J){var gf="oninput"in document;if(!gf){var $y=document.createElement("div");$y.setAttribute("oninput","return;"),gf=typeof $y.oninput=="function"}pf=gf}else pf=!1;Wy=pf&&(!document.documentMode||9<document.documentMode)}function Gy(){Xl&&(Xl.detachEvent("onpropertychange",Ky),Jl=Xl=null)}function Ky(n){if(n.propertyName==="value"&&Hu(Jl)){var r=[];qy(r,Jl,n,un(n)),V(LE,r)}}function OE(n,r,o){n==="focusin"?(Gy(),Xl=r,Jl=o,Xl.attachEvent("onpropertychange",Ky)):n==="focusout"&&Gy()}function PE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hu(Jl)}function VE(n,r){if(n==="click")return Hu(r)}function UE(n,r){if(n==="input"||n==="change")return Hu(r)}function BE(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Tr=typeof Object.is=="function"?Object.is:BE;function Zl(n,r){if(Tr(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Lt.call(r,f)||!Tr(n[f],r[f]))return!1}return!0}function Yy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Qy(n,r){var o=Yy(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Yy(o)}}function Xy(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Xy(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Jy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=ze(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=ze(n.document)}return r}function yf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var zE=J&&"documentMode"in document&&11>=document.documentMode,Qo=null,vf=null,ec=null,bf=!1;function Zy(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;bf||Qo==null||Qo!==ze(c)||(c=Qo,"selectionStart"in c&&yf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ec&&Zl(ec,c)||(ec=c,c=Ih(vf,"onSelect"),0<c.length&&(r=new xt("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=Qo)))}function co(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Xo={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionrun:co("Transition","TransitionRun"),transitionstart:co("Transition","TransitionStart"),transitioncancel:co("Transition","TransitionCancel"),transitionend:co("Transition","TransitionEnd")},_f={},ev={};J&&(ev=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function uo(n){if(_f[n])return _f[n];if(!Xo[n])return n;var r=Xo[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in ev)return _f[n]=r[o];return n}var tv=uo("animationend"),nv=uo("animationiteration"),sv=uo("animationstart"),FE=uo("transitionrun"),qE=uo("transitionstart"),HE=uo("transitioncancel"),rv=uo("transitionend"),iv=new Map,wf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wf.push("scrollEnd");function ri(n,r){iv.set(n,r),ds(r,[n])}var Wu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},qr=[],Jo=0,xf=0;function $u(){for(var n=Jo,r=xf=Jo=0;r<n;){var o=qr[r];qr[r++]=null;var c=qr[r];qr[r++]=null;var f=qr[r];qr[r++]=null;var m=qr[r];if(qr[r++]=null,c!==null&&f!==null){var _=c.pending;_===null?f.next=f:(f.next=_.next,_.next=f),c.pending=f}m!==0&&av(o,f,m)}}function Gu(n,r,o,c){qr[Jo++]=n,qr[Jo++]=r,qr[Jo++]=o,qr[Jo++]=c,xf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Ef(n,r,o,c){return Gu(n,r,o,c),Ku(n)}function ho(n,r){return Gu(n,null,null,r),Ku(n)}function av(n,r,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-Oe(o),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function Ku(n){if(50<xc)throw xc=0,Im=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Zo={};function WE(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(n,r,o,c){return new WE(n,r,o,c)}function Tf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ui(n,r){var o=n.alternate;return o===null?(o=kr(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ov(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Yu(n,r,o,c,f,m){var _=0;if(c=n,typeof n=="function")Tf(n)&&(_=1);else if(typeof n=="string")_=QT(n,o,Ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=kr(31,o,r,f),n.elementType=I,n.lanes=m,n;case q:return fo(o.children,f,m,r);case z:_=8,f|=24;break;case ne:return n=kr(12,o,r,f|2),n.elementType=ne,n.lanes=m,n;case Se:return n=kr(13,o,r,f),n.elementType=Se,n.lanes=m,n;case _e:return n=kr(19,o,r,f),n.elementType=_e,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ee:_=10;break e;case W:_=9;break e;case ye:_=11;break e;case R:_=14;break e;case S:_=16,c=null;break e}_=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=kr(_,o,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function fo(n,r,o,c){return n=kr(7,n,c,r),n.lanes=o,n}function kf(n,r,o){return n=kr(6,n,null,r),n.lanes=o,n}function lv(n){var r=kr(18,null,null,0);return r.stateNode=n,r}function Sf(n,r,o){return r=kr(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var cv=new WeakMap;function Hr(n,r){if(typeof n=="object"&&n!==null){var o=cv.get(n);return o!==void 0?o:(r={value:n,source:r,stack:bt(r)},cv.set(n,r),r)}return{value:n,source:r,stack:bt(r)}}var el=[],tl=0,Qu=null,tc=0,Wr=[],$r=0,pa=null,vi=1,bi="";function Bi(n,r){el[tl++]=tc,el[tl++]=Qu,Qu=n,tc=r}function uv(n,r,o){Wr[$r++]=vi,Wr[$r++]=bi,Wr[$r++]=pa,pa=n;var c=vi;n=bi;var f=32-Oe(c)-1;c&=~(1<<f),o+=1;var m=32-Oe(r)+f;if(30<m){var _=f-f%5;m=(c&(1<<_)-1).toString(32),c>>=_,f-=_,vi=1<<32-Oe(r)+f|o<<f|c,bi=m+n}else vi=1<<m|o<<f|c,bi=n}function Cf(n){n.return!==null&&(Bi(n,1),uv(n,1,0))}function jf(n){for(;n===Qu;)Qu=el[--tl],el[tl]=null,tc=el[--tl],el[tl]=null;for(;n===pa;)pa=Wr[--$r],Wr[$r]=null,bi=Wr[--$r],Wr[$r]=null,vi=Wr[--$r],Wr[$r]=null}function hv(n,r){Wr[$r++]=vi,Wr[$r++]=bi,Wr[$r++]=pa,vi=r.id,bi=r.overflow,pa=n}var qs=null,Bn=null,Jt=!1,ga=null,Gr=!1,Nf=Error(i(519));function ya(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nc(Hr(r,n)),Nf}function dv(n){var r=n.stateNode,o=n.type,c=n.memoizedProps;switch(r[cn]=n,r[ts]=c,o){case"dialog":Wt("cancel",r),Wt("close",r);break;case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(o=0;o<Tc.length;o++)Wt(Tc[o],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"details":Wt("toggle",r);break;case"input":Wt("invalid",r),nr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Wt("invalid",r);break;case"textarea":Wt("invalid",r),Br(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||N1(r.textContent,o)?(c.popover!=null&&(Wt("beforetoggle",r),Wt("toggle",r)),c.onScroll!=null&&Wt("scroll",r),c.onScrollEnd!=null&&Wt("scrollend",r),c.onClick!=null&&(r.onclick=wt),r=!0):r=!1,r||ya(n,!0)}function fv(n){for(qs=n.return;qs;)switch(qs.tag){case 5:case 31:case 13:Gr=!1;return;case 27:case 3:Gr=!0;return;default:qs=qs.return}}function nl(n){if(n!==qs)return!1;if(!Jt)return fv(n),Jt=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Gm(n.type,n.memoizedProps)),o=!o),o&&Bn&&ya(n),fv(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Bn=V1(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Bn=V1(n)}else r===27?(r=Bn,Ra(n.type)?(n=Jm,Jm=null,Bn=n):Bn=r):Bn=qs?Yr(n.stateNode.nextSibling):null;return!0}function mo(){Bn=qs=null,Jt=!1}function Af(){var n=ga;return n!==null&&(vr===null?vr=n:vr.push.apply(vr,n),ga=null),n}function nc(n){ga===null?ga=[n]:ga.push(n)}var Rf=M(null),po=null,zi=null;function va(n,r,o){be(Rf,r._currentValue),r._currentValue=o}function Fi(n){n._currentValue=Rf.current,K(Rf)}function If(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function Df(n,r,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var k=m;m=f;for(var U=0;U<r.length;U++)if(k.context===r[U]){m.lanes|=o,k=m.alternate,k!==null&&(k.lanes|=o),If(m.return,o,n),c||(_=null);break e}m=k.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),If(_,o,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function sl(n,r,o,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var k=f.type;Tr(f.pendingProps.value,_.value)||(n!==null?n.push(k):n=[k])}}else if(f===We.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Nc):n=[Nc])}f=f.return}n!==null&&Df(r,n,o,c),r.flags|=262144}function Xu(n){for(n=n.firstContext;n!==null;){if(!Tr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function go(n){po=n,zi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Hs(n){return mv(po,n)}function Ju(n,r){return po===null&&go(n),mv(n,r)}function mv(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},zi===null){if(n===null)throw Error(i(308));zi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else zi=zi.next=r;return o}var $E=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},GE=s.unstable_scheduleCallback,KE=s.unstable_NormalPriority,fs={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mf(){return{controller:new $E,data:new Map,refCount:0}}function sc(n){n.refCount--,n.refCount===0&&GE(KE,function(){n.controller.abort()})}var rc=null,Lf=0,rl=0,il=null;function YE(n,r){if(rc===null){var o=rc=[];Lf=0,rl=Vm(),il={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Lf++,r.then(pv,pv),r}function pv(){if(--Lf===0&&rc!==null){il!==null&&(il.status="fulfilled");var n=rc;rc=null,rl=0,il=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function QE(n,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var gv=te.S;te.S=function(n,r){Z0=tt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&YE(n,r),gv!==null&&gv(n,r)};var yo=M(null);function Of(){var n=yo.current;return n!==null?n:Ln.pooledCache}function Zu(n,r){r===null?be(yo,yo.current):be(yo,r.pool)}function yv(){var n=Of();return n===null?null:{parent:fs._currentValue,pool:n}}var al=Error(i(460)),Pf=Error(i(474)),eh=Error(i(542)),th={then:function(){}};function vv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function bv(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(wt,wt),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,wv(n),n;default:if(typeof r.status=="string")r.then(wt,wt);else{if(n=Ln,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,wv(n),n}throw bo=r,al}}function vo(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(bo=o,al):o}}var bo=null;function _v(){if(bo===null)throw Error(i(459));var n=bo;return bo=null,n}function wv(n){if(n===al||n===eh)throw Error(i(483))}var ol=null,ic=0;function nh(n){var r=ic;return ic+=1,ol===null&&(ol=[]),bv(ol,n,r)}function ac(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function sh(n,r){throw r.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function xv(n){function r($,F){if(n){var Q=$.deletions;Q===null?($.deletions=[F],$.flags|=16):Q.push(F)}}function o($,F){if(!n)return null;for(;F!==null;)r($,F),F=F.sibling;return null}function c($){for(var F=new Map;$!==null;)$.key!==null?F.set($.key,$):F.set($.index,$),$=$.sibling;return F}function f($,F){return $=Ui($,F),$.index=0,$.sibling=null,$}function m($,F,Q){return $.index=Q,n?(Q=$.alternate,Q!==null?(Q=Q.index,Q<F?($.flags|=67108866,F):Q):($.flags|=67108866,F)):($.flags|=1048576,F)}function _($){return n&&$.alternate===null&&($.flags|=67108866),$}function k($,F,Q,pe){return F===null||F.tag!==6?(F=kf(Q,$.mode,pe),F.return=$,F):(F=f(F,Q),F.return=$,F)}function U($,F,Q,pe){var it=Q.type;return it===q?fe($,F,Q.props.children,pe,Q.key):F!==null&&(F.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===S&&vo(it)===F.type)?(F=f(F,Q.props),ac(F,Q),F.return=$,F):(F=Yu(Q.type,Q.key,Q.props,null,$.mode,pe),ac(F,Q),F.return=$,F)}function Z($,F,Q,pe){return F===null||F.tag!==4||F.stateNode.containerInfo!==Q.containerInfo||F.stateNode.implementation!==Q.implementation?(F=Sf(Q,$.mode,pe),F.return=$,F):(F=f(F,Q.children||[]),F.return=$,F)}function fe($,F,Q,pe,it){return F===null||F.tag!==7?(F=fo(Q,$.mode,pe,it),F.return=$,F):(F=f(F,Q),F.return=$,F)}function ve($,F,Q){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=kf(""+F,$.mode,Q),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case O:return Q=Yu(F.type,F.key,F.props,null,$.mode,Q),ac(Q,F),Q.return=$,Q;case H:return F=Sf(F,$.mode,Q),F.return=$,F;case S:return F=vo(F),ve($,F,Q)}if(Qe(F)||L(F))return F=fo(F,$.mode,Q,null),F.return=$,F;if(typeof F.then=="function")return ve($,nh(F),Q);if(F.$$typeof===ee)return ve($,Ju($,F),Q);sh($,F)}return null}function se($,F,Q,pe){var it=F!==null?F.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return it!==null?null:k($,F,""+Q,pe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case O:return Q.key===it?U($,F,Q,pe):null;case H:return Q.key===it?Z($,F,Q,pe):null;case S:return Q=vo(Q),se($,F,Q,pe)}if(Qe(Q)||L(Q))return it!==null?null:fe($,F,Q,pe,null);if(typeof Q.then=="function")return se($,F,nh(Q),pe);if(Q.$$typeof===ee)return se($,F,Ju($,Q),pe);sh($,Q)}return null}function ce($,F,Q,pe,it){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return $=$.get(Q)||null,k(F,$,""+pe,it);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case O:return $=$.get(pe.key===null?Q:pe.key)||null,U(F,$,pe,it);case H:return $=$.get(pe.key===null?Q:pe.key)||null,Z(F,$,pe,it);case S:return pe=vo(pe),ce($,F,Q,pe,it)}if(Qe(pe)||L(pe))return $=$.get(Q)||null,fe(F,$,pe,it,null);if(typeof pe.then=="function")return ce($,F,Q,nh(pe),it);if(pe.$$typeof===ee)return ce($,F,Q,Ju(F,pe),it);sh(F,pe)}return null}function Ke($,F,Q,pe){for(var it=null,an=null,Je=F,Ot=F=0,Kt=null;Je!==null&&Ot<Q.length;Ot++){Je.index>Ot?(Kt=Je,Je=null):Kt=Je.sibling;var on=se($,Je,Q[Ot],pe);if(on===null){Je===null&&(Je=Kt);break}n&&Je&&on.alternate===null&&r($,Je),F=m(on,F,Ot),an===null?it=on:an.sibling=on,an=on,Je=Kt}if(Ot===Q.length)return o($,Je),Jt&&Bi($,Ot),it;if(Je===null){for(;Ot<Q.length;Ot++)Je=ve($,Q[Ot],pe),Je!==null&&(F=m(Je,F,Ot),an===null?it=Je:an.sibling=Je,an=Je);return Jt&&Bi($,Ot),it}for(Je=c(Je);Ot<Q.length;Ot++)Kt=ce(Je,$,Ot,Q[Ot],pe),Kt!==null&&(n&&Kt.alternate!==null&&Je.delete(Kt.key===null?Ot:Kt.key),F=m(Kt,F,Ot),an===null?it=Kt:an.sibling=Kt,an=Kt);return n&&Je.forEach(function(Oa){return r($,Oa)}),Jt&&Bi($,Ot),it}function mt($,F,Q,pe){if(Q==null)throw Error(i(151));for(var it=null,an=null,Je=F,Ot=F=0,Kt=null,on=Q.next();Je!==null&&!on.done;Ot++,on=Q.next()){Je.index>Ot?(Kt=Je,Je=null):Kt=Je.sibling;var Oa=se($,Je,on.value,pe);if(Oa===null){Je===null&&(Je=Kt);break}n&&Je&&Oa.alternate===null&&r($,Je),F=m(Oa,F,Ot),an===null?it=Oa:an.sibling=Oa,an=Oa,Je=Kt}if(on.done)return o($,Je),Jt&&Bi($,Ot),it;if(Je===null){for(;!on.done;Ot++,on=Q.next())on=ve($,on.value,pe),on!==null&&(F=m(on,F,Ot),an===null?it=on:an.sibling=on,an=on);return Jt&&Bi($,Ot),it}for(Je=c(Je);!on.done;Ot++,on=Q.next())on=ce(Je,$,Ot,on.value,pe),on!==null&&(n&&on.alternate!==null&&Je.delete(on.key===null?Ot:on.key),F=m(on,F,Ot),an===null?it=on:an.sibling=on,an=on);return n&&Je.forEach(function(ok){return r($,ok)}),Jt&&Bi($,Ot),it}function In($,F,Q,pe){if(typeof Q=="object"&&Q!==null&&Q.type===q&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case O:e:{for(var it=Q.key;F!==null;){if(F.key===it){if(it=Q.type,it===q){if(F.tag===7){o($,F.sibling),pe=f(F,Q.props.children),pe.return=$,$=pe;break e}}else if(F.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===S&&vo(it)===F.type){o($,F.sibling),pe=f(F,Q.props),ac(pe,Q),pe.return=$,$=pe;break e}o($,F);break}else r($,F);F=F.sibling}Q.type===q?(pe=fo(Q.props.children,$.mode,pe,Q.key),pe.return=$,$=pe):(pe=Yu(Q.type,Q.key,Q.props,null,$.mode,pe),ac(pe,Q),pe.return=$,$=pe)}return _($);case H:e:{for(it=Q.key;F!==null;){if(F.key===it)if(F.tag===4&&F.stateNode.containerInfo===Q.containerInfo&&F.stateNode.implementation===Q.implementation){o($,F.sibling),pe=f(F,Q.children||[]),pe.return=$,$=pe;break e}else{o($,F);break}else r($,F);F=F.sibling}pe=Sf(Q,$.mode,pe),pe.return=$,$=pe}return _($);case S:return Q=vo(Q),In($,F,Q,pe)}if(Qe(Q))return Ke($,F,Q,pe);if(L(Q)){if(it=L(Q),typeof it!="function")throw Error(i(150));return Q=it.call(Q),mt($,F,Q,pe)}if(typeof Q.then=="function")return In($,F,nh(Q),pe);if(Q.$$typeof===ee)return In($,F,Ju($,Q),pe);sh($,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,F!==null&&F.tag===6?(o($,F.sibling),pe=f(F,Q),pe.return=$,$=pe):(o($,F),pe=kf(Q,$.mode,pe),pe.return=$,$=pe),_($)):o($,F)}return function($,F,Q,pe){try{ic=0;var it=In($,F,Q,pe);return ol=null,it}catch(Je){if(Je===al||Je===eh)throw Je;var an=kr(29,Je,null,$.mode);return an.lanes=pe,an.return=$,an}}}var _o=xv(!0),Ev=xv(!1),ba=!1;function Vf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function _a(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function wa(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(fn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Ku(n),av(n,null,o),r}return Gu(n,c,r,o),Ku(n)}function oc(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,qn(n,o)}}function Bf(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var zf=!1;function lc(){if(zf){var n=il;if(n!==null)throw n}}function cc(n,r,o,c){zf=!1;var f=n.updateQueue;ba=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var U=k,Z=U.next;U.next=null,_===null?m=Z:_.next=Z,_=U;var fe=n.alternate;fe!==null&&(fe=fe.updateQueue,k=fe.lastBaseUpdate,k!==_&&(k===null?fe.firstBaseUpdate=Z:k.next=Z,fe.lastBaseUpdate=U))}if(m!==null){var ve=f.baseState;_=0,fe=Z=U=null,k=m;do{var se=k.lane&-536870913,ce=se!==k.lane;if(ce?(Gt&se)===se:(c&se)===se){se!==0&&se===rl&&(zf=!0),fe!==null&&(fe=fe.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ke=n,mt=k;se=r;var In=o;switch(mt.tag){case 1:if(Ke=mt.payload,typeof Ke=="function"){ve=Ke.call(In,ve,se);break e}ve=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=mt.payload,se=typeof Ke=="function"?Ke.call(In,ve,se):Ke,se==null)break e;ve=E({},ve,se);break e;case 2:ba=!0}}se=k.callback,se!==null&&(n.flags|=64,ce&&(n.flags|=8192),ce=f.callbacks,ce===null?f.callbacks=[se]:ce.push(se))}else ce={lane:se,tag:k.tag,payload:k.payload,callback:k.callback,next:null},fe===null?(Z=fe=ce,U=ve):fe=fe.next=ce,_|=se;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;ce=k,k=ce.next,ce.next=null,f.lastBaseUpdate=ce,f.shared.pending=null}}while(!0);fe===null&&(U=ve),f.baseState=U,f.firstBaseUpdate=Z,f.lastBaseUpdate=fe,m===null&&(f.shared.lanes=0),Sa|=_,n.lanes=_,n.memoizedState=ve}}function Tv(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function kv(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Tv(o[n],r)}var ll=M(null),rh=M(0);function Sv(n,r){n=Xi,be(rh,n),be(ll,r),Xi=n|r.baseLanes}function Ff(){be(rh,Xi),be(ll,ll.current)}function qf(){Xi=rh.current,K(ll),K(rh)}var Sr=M(null),Kr=null;function xa(n){var r=n.alternate;be(ls,ls.current&1),be(Sr,n),Kr===null&&(r===null||ll.current!==null||r.memoizedState!==null)&&(Kr=n)}function Hf(n){be(ls,ls.current),be(Sr,n),Kr===null&&(Kr=n)}function Cv(n){n.tag===22?(be(ls,ls.current),be(Sr,n),Kr===null&&(Kr=n)):Ea()}function Ea(){be(ls,ls.current),be(Sr,Sr.current)}function Cr(n){K(Sr),Kr===n&&(Kr=null),K(ls)}var ls=M(0);function ih(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Qm(o)||Xm(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var qi=0,Dt=null,An=null,ms=null,ah=!1,cl=!1,wo=!1,oh=0,uc=0,ul=null,XE=0;function ns(){throw Error(i(321))}function Wf(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Tr(n[o],r[o]))return!1;return!0}function $f(n,r,o,c,f,m){return qi=m,Dt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,te.H=n===null||n.memoizedState===null?u0:om,wo=!1,m=o(c,f),wo=!1,cl&&(m=Nv(r,o,c,f)),jv(n),m}function jv(n){te.H=fc;var r=An!==null&&An.next!==null;if(qi=0,ms=An=Dt=null,ah=!1,uc=0,ul=null,r)throw Error(i(300));n===null||ps||(n=n.dependencies,n!==null&&Xu(n)&&(ps=!0))}function Nv(n,r,o,c){Dt=n;var f=0;do{if(cl&&(ul=null),uc=0,cl=!1,25<=f)throw Error(i(301));if(f+=1,ms=An=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}te.H=h0,m=r(o,c)}while(cl);return m}function JE(){var n=te.H,r=n.useState()[0];return r=typeof r.then=="function"?hc(r):r,n=n.useState()[0],(An!==null?An.memoizedState:null)!==n&&(Dt.flags|=1024),r}function Gf(){var n=oh!==0;return oh=0,n}function Kf(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function Yf(n){if(ah){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ah=!1}qi=0,ms=An=Dt=null,cl=!1,uc=oh=0,ul=null}function ir(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ms===null?Dt.memoizedState=ms=n:ms=ms.next=n,ms}function cs(){if(An===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=An.next;var r=ms===null?Dt.memoizedState:ms.next;if(r!==null)ms=r,An=n;else{if(n===null)throw Dt.alternate===null?Error(i(467)):Error(i(310));An=n,n={memoizedState:An.memoizedState,baseState:An.baseState,baseQueue:An.baseQueue,queue:An.queue,next:null},ms===null?Dt.memoizedState=ms=n:ms=ms.next=n}return ms}function lh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(n){var r=uc;return uc+=1,ul===null&&(ul=[]),n=bv(ul,n,r),r=Dt,(ms===null?r.memoizedState:ms.next)===null&&(r=r.alternate,te.H=r===null||r.memoizedState===null?u0:om),n}function ch(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return hc(n);if(n.$$typeof===ee)return Hs(n)}throw Error(i(438,String(n)))}function Qf(n){var r=null,o=Dt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Dt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=lh(),Dt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),c=0;c<n;c++)o[c]=P;return r.index++,o}function Hi(n,r){return typeof r=="function"?r(n):r}function uh(n){var r=cs();return Xf(r,An,n)}function Xf(n,r,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var k=_=null,U=null,Z=r,fe=!1;do{var ve=Z.lane&-536870913;if(ve!==Z.lane?(Gt&ve)===ve:(qi&ve)===ve){var se=Z.revertLane;if(se===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ve===rl&&(fe=!0);else if((qi&se)===se){Z=Z.next,se===rl&&(fe=!0);continue}else ve={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},U===null?(k=U=ve,_=m):U=U.next=ve,Dt.lanes|=se,Sa|=se;ve=Z.action,wo&&o(m,ve),m=Z.hasEagerState?Z.eagerState:o(m,ve)}else se={lane:ve,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},U===null?(k=U=se,_=m):U=U.next=se,Dt.lanes|=ve,Sa|=ve;Z=Z.next}while(Z!==null&&Z!==r);if(U===null?_=m:U.next=k,!Tr(m,n.memoizedState)&&(ps=!0,fe&&(o=il,o!==null)))throw o;n.memoizedState=m,n.baseState=_,n.baseQueue=U,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Jf(n){var r=cs(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);Tr(m,r.memoizedState)||(ps=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function Av(n,r,o){var c=Dt,f=cs(),m=Jt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var _=!Tr((An||f).memoizedState,o);if(_&&(f.memoizedState=o,ps=!0),f=f.queue,tm(Dv.bind(null,c,f,n),[n]),f.getSnapshot!==r||_||ms!==null&&ms.memoizedState.tag&1){if(c.flags|=2048,hl(9,{destroy:void 0},Iv.bind(null,c,f,o,r),null),Ln===null)throw Error(i(349));m||(qi&127)!==0||Rv(c,r,o)}return o}function Rv(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Dt.updateQueue,r===null?(r=lh(),Dt.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Iv(n,r,o,c){r.value=o,r.getSnapshot=c,Mv(r)&&Lv(n)}function Dv(n,r,o){return o(function(){Mv(r)&&Lv(n)})}function Mv(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Tr(n,o)}catch{return!0}}function Lv(n){var r=ho(n,2);r!==null&&br(r,n,2)}function Zf(n){var r=ir();if(typeof n=="function"){var o=n;if(n=o(),wo){st(!0);try{o()}finally{st(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:n},r}function Ov(n,r,o,c){return n.baseState=o,Xf(n,An,typeof c=="function"?c:Hi)}function ZE(n,r,o,c,f){if(fh(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};te.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,Pv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function Pv(n,r){var o=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=te.T,_={};te.T=_;try{var k=o(f,c),U=te.S;U!==null&&U(_,k),Vv(n,r,k)}catch(Z){em(n,r,Z)}finally{m!==null&&_.types!==null&&(m.types=_.types),te.T=m}}else try{m=o(f,c),Vv(n,r,m)}catch(Z){em(n,r,Z)}}function Vv(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Uv(n,r,c)},function(c){return em(n,r,c)}):Uv(n,r,o)}function Uv(n,r,o){r.status="fulfilled",r.value=o,Bv(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,Pv(n,o)))}function em(n,r,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Bv(r),r=r.next;while(r!==c)}n.action=null}function Bv(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function zv(n,r){return r}function Fv(n,r){if(Jt){var o=Ln.formState;if(o!==null){e:{var c=Dt;if(Jt){if(Bn){t:{for(var f=Bn,m=Gr;f.nodeType!==8;){if(!m){f=null;break t}if(f=Yr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Bn=Yr(f.nextSibling),c=f.data==="F!";break e}}ya(c)}c=!1}c&&(r=o[0])}}return o=ir(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zv,lastRenderedState:r},o.queue=c,o=o0.bind(null,Dt,c),c.dispatch=o,c=Zf(!1),m=am.bind(null,Dt,!1,c.queue),c=ir(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,o=ZE.bind(null,Dt,f,m,o),f.dispatch=o,c.memoizedState=n,[r,o,!1]}function qv(n){var r=cs();return Hv(r,An,n)}function Hv(n,r,o){if(r=Xf(n,r,zv)[0],n=uh(Hi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=hc(r)}catch(_){throw _===al?eh:_}else c=r;r=cs();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Dt.flags|=2048,hl(9,{destroy:void 0},eT.bind(null,f,o),null)),[c,m,n]}function eT(n,r){n.action=r}function Wv(n){var r=cs(),o=An;if(o!==null)return Hv(r,o,n);cs(),r=r.memoizedState,o=cs();var c=o.queue.dispatch;return o.memoizedState=n,[r,c,!1]}function hl(n,r,o,c){return n={tag:n,create:o,deps:c,inst:r,next:null},r=Dt.updateQueue,r===null&&(r=lh(),Dt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n),n}function $v(){return cs().memoizedState}function hh(n,r,o,c){var f=ir();Dt.flags|=n,f.memoizedState=hl(1|r,{destroy:void 0},o,c===void 0?null:c)}function dh(n,r,o,c){var f=cs();c=c===void 0?null:c;var m=f.memoizedState.inst;An!==null&&c!==null&&Wf(c,An.memoizedState.deps)?f.memoizedState=hl(r,m,o,c):(Dt.flags|=n,f.memoizedState=hl(1|r,m,o,c))}function Gv(n,r){hh(8390656,8,n,r)}function tm(n,r){dh(2048,8,n,r)}function tT(n){Dt.flags|=4;var r=Dt.updateQueue;if(r===null)r=lh(),Dt.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function Kv(n){var r=cs().memoizedState;return tT({ref:r,nextImpl:n}),function(){if((fn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Yv(n,r){return dh(4,2,n,r)}function Qv(n,r){return dh(4,4,n,r)}function Xv(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Jv(n,r,o){o=o!=null?o.concat([n]):null,dh(4,4,Xv.bind(null,r,n),o)}function nm(){}function Zv(n,r){var o=cs();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Wf(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function e0(n,r){var o=cs();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Wf(r,c[1]))return c[0];if(c=n(),wo){st(!0);try{n()}finally{st(!1)}}return o.memoizedState=[c,r],c}function sm(n,r,o){return o===void 0||(qi&1073741824)!==0&&(Gt&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=t1(),Dt.lanes|=n,Sa|=n,o)}function t0(n,r,o,c){return Tr(o,r)?o:ll.current!==null?(n=sm(n,o,c),Tr(n,r)||(ps=!0),n):(qi&42)===0||(qi&1073741824)!==0&&(Gt&261930)===0?(ps=!0,n.memoizedState=o):(n=t1(),Dt.lanes|=n,Sa|=n,r)}function n0(n,r,o,c,f){var m=xe.p;xe.p=m!==0&&8>m?m:8;var _=te.T,k={};te.T=k,am(n,!1,r,o);try{var U=f(),Z=te.S;if(Z!==null&&Z(k,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var fe=QE(U,c);dc(n,r,fe,Ar(n))}else dc(n,r,c,Ar(n))}catch(ve){dc(n,r,{then:function(){},status:"rejected",reason:ve},Ar())}finally{xe.p=m,_!==null&&k.types!==null&&(_.types=k.types),te.T=_}}function nT(){}function rm(n,r,o,c){if(n.tag!==5)throw Error(i(476));var f=s0(n).queue;n0(n,f,r,Pe,o===null?nT:function(){return r0(n),o(c)})}function s0(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Pe,baseState:Pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:Pe},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function r0(n){var r=s0(n);r.next===null&&(r=n.alternate.memoizedState),dc(n,r.next.queue,{},Ar())}function im(){return Hs(Nc)}function i0(){return cs().memoizedState}function a0(){return cs().memoizedState}function sT(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Ar();n=_a(o);var c=wa(r,n,o);c!==null&&(br(c,r,o),oc(c,r,o)),r={cache:Mf()},n.payload=r;return}r=r.return}}function rT(n,r,o){var c=Ar();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},fh(n)?l0(r,o):(o=Ef(n,r,o,c),o!==null&&(br(o,n,c),c0(o,r,c)))}function o0(n,r,o){var c=Ar();dc(n,r,o,c)}function dc(n,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(fh(n))l0(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,k=m(_,o);if(f.hasEagerState=!0,f.eagerState=k,Tr(k,_))return Gu(n,r,f,0),Ln===null&&$u(),!1}catch{}if(o=Ef(n,r,f,c),o!==null)return br(o,n,c),c0(o,r,c),!0}return!1}function am(n,r,o,c){if(c={lane:2,revertLane:Vm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},fh(n)){if(r)throw Error(i(479))}else r=Ef(n,o,c,2),r!==null&&br(r,n,2)}function fh(n){var r=n.alternate;return n===Dt||r!==null&&r===Dt}function l0(n,r){cl=ah=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function c0(n,r,o){if((o&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,qn(n,o)}}var fc={readContext:Hs,use:ch,useCallback:ns,useContext:ns,useEffect:ns,useImperativeHandle:ns,useLayoutEffect:ns,useInsertionEffect:ns,useMemo:ns,useReducer:ns,useRef:ns,useState:ns,useDebugValue:ns,useDeferredValue:ns,useTransition:ns,useSyncExternalStore:ns,useId:ns,useHostTransitionStatus:ns,useFormState:ns,useActionState:ns,useOptimistic:ns,useMemoCache:ns,useCacheRefresh:ns};fc.useEffectEvent=ns;var u0={readContext:Hs,use:ch,useCallback:function(n,r){return ir().memoizedState=[n,r===void 0?null:r],n},useContext:Hs,useEffect:Gv,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,hh(4194308,4,Xv.bind(null,r,n),o)},useLayoutEffect:function(n,r){return hh(4194308,4,n,r)},useInsertionEffect:function(n,r){hh(4,2,n,r)},useMemo:function(n,r){var o=ir();r=r===void 0?null:r;var c=n();if(wo){st(!0);try{n()}finally{st(!1)}}return o.memoizedState=[c,r],c},useReducer:function(n,r,o){var c=ir();if(o!==void 0){var f=o(r);if(wo){st(!0);try{o(r)}finally{st(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=rT.bind(null,Dt,n),[c.memoizedState,n]},useRef:function(n){var r=ir();return n={current:n},r.memoizedState=n},useState:function(n){n=Zf(n);var r=n.queue,o=o0.bind(null,Dt,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:nm,useDeferredValue:function(n,r){var o=ir();return sm(o,n,r)},useTransition:function(){var n=Zf(!1);return n=n0.bind(null,Dt,n.queue,!0,!1),ir().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var c=Dt,f=ir();if(Jt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Ln===null)throw Error(i(349));(Gt&127)!==0||Rv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Gv(Dv.bind(null,c,m,n),[n]),c.flags|=2048,hl(9,{destroy:void 0},Iv.bind(null,c,m,o,r),null),o},useId:function(){var n=ir(),r=Ln.identifierPrefix;if(Jt){var o=bi,c=vi;o=(c&~(1<<32-Oe(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=oh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=XE++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:im,useFormState:Fv,useActionState:Fv,useOptimistic:function(n){var r=ir();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=am.bind(null,Dt,!0,o),o.dispatch=r,[n,r]},useMemoCache:Qf,useCacheRefresh:function(){return ir().memoizedState=sT.bind(null,Dt)},useEffectEvent:function(n){var r=ir(),o={impl:n};return r.memoizedState=o,function(){if((fn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},om={readContext:Hs,use:ch,useCallback:Zv,useContext:Hs,useEffect:tm,useImperativeHandle:Jv,useInsertionEffect:Yv,useLayoutEffect:Qv,useMemo:e0,useReducer:uh,useRef:$v,useState:function(){return uh(Hi)},useDebugValue:nm,useDeferredValue:function(n,r){var o=cs();return t0(o,An.memoizedState,n,r)},useTransition:function(){var n=uh(Hi)[0],r=cs().memoizedState;return[typeof n=="boolean"?n:hc(n),r]},useSyncExternalStore:Av,useId:i0,useHostTransitionStatus:im,useFormState:qv,useActionState:qv,useOptimistic:function(n,r){var o=cs();return Ov(o,An,n,r)},useMemoCache:Qf,useCacheRefresh:a0};om.useEffectEvent=Kv;var h0={readContext:Hs,use:ch,useCallback:Zv,useContext:Hs,useEffect:tm,useImperativeHandle:Jv,useInsertionEffect:Yv,useLayoutEffect:Qv,useMemo:e0,useReducer:Jf,useRef:$v,useState:function(){return Jf(Hi)},useDebugValue:nm,useDeferredValue:function(n,r){var o=cs();return An===null?sm(o,n,r):t0(o,An.memoizedState,n,r)},useTransition:function(){var n=Jf(Hi)[0],r=cs().memoizedState;return[typeof n=="boolean"?n:hc(n),r]},useSyncExternalStore:Av,useId:i0,useHostTransitionStatus:im,useFormState:Wv,useActionState:Wv,useOptimistic:function(n,r){var o=cs();return An!==null?Ov(o,An,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Qf,useCacheRefresh:a0};h0.useEffectEvent=Kv;function lm(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:E({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var cm={enqueueSetState:function(n,r,o){n=n._reactInternals;var c=Ar(),f=_a(c);f.payload=r,o!=null&&(f.callback=o),r=wa(n,f,c),r!==null&&(br(r,n,c),oc(r,n,c))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=Ar(),f=_a(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=wa(n,f,c),r!==null&&(br(r,n,c),oc(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Ar(),c=_a(o);c.tag=2,r!=null&&(c.callback=r),r=wa(n,c,o),r!==null&&(br(r,n,o),oc(r,n,o))}};function d0(n,r,o,c,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,_):r.prototype&&r.prototype.isPureReactComponent?!Zl(o,c)||!Zl(f,m):!0}function f0(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&cm.enqueueReplaceState(r,r.state,null)}function xo(n,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(n=n.defaultProps){o===r&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function m0(n){Wu(n)}function p0(n){console.error(n)}function g0(n){Wu(n)}function mh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function y0(n,r,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function um(n,r,o){return o=_a(o),o.tag=3,o.payload={element:null},o.callback=function(){mh(n,r)},o}function v0(n){return n=_a(n),n.tag=3,n}function b0(n,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){y0(r,o,c)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){y0(r,o,c),typeof f!="function"&&(Ca===null?Ca=new Set([this]):Ca.add(this));var k=c.stack;this.componentDidCatch(c.value,{componentStack:k!==null?k:""})})}function iT(n,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&sl(r,o,f,!0),o=Sr.current,o!==null){switch(o.tag){case 31:case 13:return Kr===null?Sh():o.alternate===null&&ss===0&&(ss=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===th?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Lm(n,c,f)),!1;case 22:return o.flags|=65536,c===th?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Lm(n,c,f)),!1}throw Error(i(435,o.tag))}return Lm(n,c,f),Sh(),!1}if(Jt)return r=Sr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Nf&&(n=Error(i(422),{cause:c}),nc(Hr(n,o)))):(c!==Nf&&(r=Error(i(423),{cause:c}),nc(Hr(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Hr(c,o),f=um(n.stateNode,c,f),Bf(n,f),ss!==4&&(ss=2)),!1;var m=Error(i(520),{cause:c});if(m=Hr(m,o),wc===null?wc=[m]:wc.push(m),ss!==4&&(ss=2),r===null)return!0;c=Hr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=um(o.stateNode,c,n),Bf(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ca===null||!Ca.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=v0(f),b0(f,n,o,c),Bf(o,f),!1}o=o.return}while(o!==null);return!1}var hm=Error(i(461)),ps=!1;function Ws(n,r,o,c){r.child=n===null?Ev(r,null,o,c):_o(r,n.child,o,c)}function _0(n,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var _={};for(var k in c)k!=="ref"&&(_[k]=c[k])}else _=c;return go(r),c=$f(n,r,o,_,m,f),k=Gf(),n!==null&&!ps?(Kf(n,r,f),Wi(n,r,f)):(Jt&&k&&Cf(r),r.flags|=1,Ws(n,r,c,f),r.child)}function w0(n,r,o,c,f){if(n===null){var m=o.type;return typeof m=="function"&&!Tf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,x0(n,r,m,c,f)):(n=Yu(o.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!bm(n,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Zl,o(_,c)&&n.ref===r.ref)return Wi(n,r,f)}return r.flags|=1,n=Ui(m,c),n.ref=r.ref,n.return=r,r.child=n}function x0(n,r,o,c,f){if(n!==null){var m=n.memoizedProps;if(Zl(m,c)&&n.ref===r.ref)if(ps=!1,r.pendingProps=c=m,bm(n,f))(n.flags&131072)!==0&&(ps=!0);else return r.lanes=n.lanes,Wi(n,r,f)}return dm(n,r,o,c,f)}function E0(n,r,o,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return T0(n,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Zu(r,m!==null?m.cachePool:null),m!==null?Sv(r,m):Ff(),Cv(r);else return c=r.lanes=536870912,T0(n,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Zu(r,m.cachePool),Sv(r,m),Ea(),r.memoizedState=null):(n!==null&&Zu(r,null),Ff(),Ea());return Ws(n,r,f,o),r.child}function mc(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function T0(n,r,o,c,f){var m=Of();return m=m===null?null:{parent:fs._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},n!==null&&Zu(r,null),Ff(),Cv(r),n!==null&&sl(n,r,c,!0),r.childLanes=f,null}function ph(n,r){return r=yh({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function k0(n,r,o){return _o(r,n.child,null,o),n=ph(r,r.pendingProps),n.flags|=2,Cr(r),r.memoizedState=null,n}function aT(n,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Jt){if(c.mode==="hidden")return n=ph(r,c),r.lanes=536870912,mc(null,n);if(Hf(r),(n=Bn)?(n=P1(n,Gr),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:pa!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=lv(n),o.return=r,r.child=o,qs=r,Bn=null)):n=null,n===null)throw ya(r);return r.lanes=536870912,null}return ph(r,c)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(Hf(r),f)if(r.flags&256)r.flags&=-257,r=k0(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(ps||sl(n,r,o,!1),f=(o&n.childLanes)!==0,ps||f){if(c=Ln,c!==null&&(_=Hn(c,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,ho(n,_),br(c,n,_),hm;Sh(),r=k0(n,r,o)}else n=m.treeContext,Bn=Yr(_.nextSibling),qs=r,Jt=!0,ga=null,Gr=!1,n!==null&&hv(r,n),r=ph(r,c),r.flags|=4096;return r}return n=Ui(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function gh(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function dm(n,r,o,c,f){return go(r),o=$f(n,r,o,c,void 0,f),c=Gf(),n!==null&&!ps?(Kf(n,r,f),Wi(n,r,f)):(Jt&&c&&Cf(r),r.flags|=1,Ws(n,r,o,f),r.child)}function S0(n,r,o,c,f,m){return go(r),r.updateQueue=null,o=Nv(r,c,o,f),jv(n),c=Gf(),n!==null&&!ps?(Kf(n,r,m),Wi(n,r,m)):(Jt&&c&&Cf(r),r.flags|=1,Ws(n,r,o,m),r.child)}function C0(n,r,o,c,f){if(go(r),r.stateNode===null){var m=Zo,_=o.contextType;typeof _=="object"&&_!==null&&(m=Hs(_)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=cm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Vf(r),_=o.contextType,m.context=typeof _=="object"&&_!==null?Hs(_):Zo,m.state=r.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(lm(r,o,_,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&cm.enqueueReplaceState(m,m.state,null),cc(r,c,m,f),lc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var k=r.memoizedProps,U=xo(o,k);m.props=U;var Z=m.context,fe=o.contextType;_=Zo,typeof fe=="object"&&fe!==null&&(_=Hs(fe));var ve=o.getDerivedStateFromProps;fe=typeof ve=="function"||typeof m.getSnapshotBeforeUpdate=="function",k=r.pendingProps!==k,fe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(k||Z!==_)&&f0(r,m,c,_),ba=!1;var se=r.memoizedState;m.state=se,cc(r,c,m,f),lc(),Z=r.memoizedState,k||se!==Z||ba?(typeof ve=="function"&&(lm(r,o,ve,c),Z=r.memoizedState),(U=ba||d0(r,o,U,c,se,Z,_))?(fe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Z),m.props=c,m.state=Z,m.context=_,c=U):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Uf(n,r),_=r.memoizedProps,fe=xo(o,_),m.props=fe,ve=r.pendingProps,se=m.context,Z=o.contextType,U=Zo,typeof Z=="object"&&Z!==null&&(U=Hs(Z)),k=o.getDerivedStateFromProps,(Z=typeof k=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ve||se!==U)&&f0(r,m,c,U),ba=!1,se=r.memoizedState,m.state=se,cc(r,c,m,f),lc();var ce=r.memoizedState;_!==ve||se!==ce||ba||n!==null&&n.dependencies!==null&&Xu(n.dependencies)?(typeof k=="function"&&(lm(r,o,k,c),ce=r.memoizedState),(fe=ba||d0(r,o,fe,c,se,ce,U)||n!==null&&n.dependencies!==null&&Xu(n.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ce,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ce,U)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&se===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&se===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ce),m.props=c,m.state=ce,m.context=U,c=fe):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&se===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&se===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,gh(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=_o(r,n.child,null,f),r.child=_o(r,null,o,f)):Ws(n,r,o,f),r.memoizedState=m.state,n=r.child):n=Wi(n,r,f),n}function j0(n,r,o,c){return mo(),r.flags|=256,Ws(n,r,o,c),r.child}var fm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mm(n){return{baseLanes:n,cachePool:yv()}}function pm(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Nr),n}function N0(n,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(ls.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,n===null){if(Jt){if(f?xa(r):Ea(),(n=Bn)?(n=P1(n,Gr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:pa!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=lv(n),o.return=r,r.child=o,qs=r,Bn=null)):n=null,n===null)throw ya(r);return Xm(n)?r.lanes=32:r.lanes=536870912,null}var k=c.children;return c=c.fallback,f?(Ea(),f=r.mode,k=yh({mode:"hidden",children:k},f),c=fo(c,f,o,null),k.return=r,c.return=r,k.sibling=c,r.child=k,c=r.child,c.memoizedState=mm(o),c.childLanes=pm(n,_,o),r.memoizedState=fm,mc(null,c)):(xa(r),gm(r,k))}var U=n.memoizedState;if(U!==null&&(k=U.dehydrated,k!==null)){if(m)r.flags&256?(xa(r),r.flags&=-257,r=ym(n,r,o)):r.memoizedState!==null?(Ea(),r.child=n.child,r.flags|=128,r=null):(Ea(),k=c.fallback,f=r.mode,c=yh({mode:"visible",children:c.children},f),k=fo(k,f,o,null),k.flags|=2,c.return=r,k.return=r,c.sibling=k,r.child=c,_o(r,n.child,null,o),c=r.child,c.memoizedState=mm(o),c.childLanes=pm(n,_,o),r.memoizedState=fm,r=mc(null,c));else if(xa(r),Xm(k)){if(_=k.nextSibling&&k.nextSibling.dataset,_)var Z=_.dgst;_=Z,c=Error(i(419)),c.stack="",c.digest=_,nc({value:c,source:null,stack:null}),r=ym(n,r,o)}else if(ps||sl(n,r,o,!1),_=(o&n.childLanes)!==0,ps||_){if(_=Ln,_!==null&&(c=Hn(_,o),c!==0&&c!==U.retryLane))throw U.retryLane=c,ho(n,c),br(_,n,c),hm;Qm(k)||Sh(),r=ym(n,r,o)}else Qm(k)?(r.flags|=192,r.child=n.child,r=null):(n=U.treeContext,Bn=Yr(k.nextSibling),qs=r,Jt=!0,ga=null,Gr=!1,n!==null&&hv(r,n),r=gm(r,c.children),r.flags|=4096);return r}return f?(Ea(),k=c.fallback,f=r.mode,U=n.child,Z=U.sibling,c=Ui(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,Z!==null?k=Ui(Z,k):(k=fo(k,f,o,null),k.flags|=2),k.return=r,c.return=r,c.sibling=k,r.child=c,mc(null,c),c=r.child,k=n.child.memoizedState,k===null?k=mm(o):(f=k.cachePool,f!==null?(U=fs._currentValue,f=f.parent!==U?{parent:U,pool:U}:f):f=yv(),k={baseLanes:k.baseLanes|o,cachePool:f}),c.memoizedState=k,c.childLanes=pm(n,_,o),r.memoizedState=fm,mc(n.child,c)):(xa(r),o=n.child,n=o.sibling,o=Ui(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,n!==null&&(_=r.deletions,_===null?(r.deletions=[n],r.flags|=16):_.push(n)),r.child=o,r.memoizedState=null,o)}function gm(n,r){return r=yh({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function yh(n,r){return n=kr(22,n,null,r),n.lanes=0,n}function ym(n,r,o){return _o(r,n.child,null,o),n=gm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function A0(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),If(n.return,r,o)}function vm(n,r,o,c,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function R0(n,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var _=ls.current,k=(_&2)!==0;if(k?(_=_&1|2,r.flags|=128):_&=1,be(ls,_),Ws(n,r,c,o),c=Jt?tc:0,!k&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&A0(n,o,r);else if(n.tag===19)A0(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&ih(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),vm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&ih(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}vm(r,!0,o,null,m,c);break;case"together":vm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Wi(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Sa|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(sl(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Ui(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Ui(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function bm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Xu(n)))}function oT(n,r,o){switch(r.tag){case 3:nt(r,r.stateNode.containerInfo),va(r,fs,n.memoizedState.cache),mo();break;case 27:case 5:kn(r);break;case 4:nt(r,r.stateNode.containerInfo);break;case 10:va(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Hf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(xa(r),r.flags|=128,null):(o&r.child.childLanes)!==0?N0(n,r,o):(xa(r),n=Wi(n,r,o),n!==null?n.sibling:null);xa(r);break;case 19:var f=(n.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(sl(n,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return R0(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),be(ls,ls.current),c)break;return null;case 22:return r.lanes=0,E0(n,r,o,r.pendingProps);case 24:va(r,fs,n.memoizedState.cache)}return Wi(n,r,o)}function I0(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)ps=!0;else{if(!bm(n,o)&&(r.flags&128)===0)return ps=!1,oT(n,r,o);ps=(n.flags&131072)!==0}else ps=!1,Jt&&(r.flags&1048576)!==0&&uv(r,tc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=vo(r.elementType),r.type=n,typeof n=="function")Tf(n)?(c=xo(n,c),r.tag=1,r=C0(null,r,n,c,o)):(r.tag=0,r=dm(null,r,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===ye){r.tag=11,r=_0(null,r,n,c,o);break e}else if(f===R){r.tag=14,r=w0(null,r,n,c,o);break e}}throw r=De(n)||n,Error(i(306,r,""))}}return r;case 0:return dm(n,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=xo(c,r.pendingProps),C0(n,r,c,f,o);case 3:e:{if(nt(r,r.stateNode.containerInfo),n===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Uf(n,r),cc(r,c,null,o);var _=r.memoizedState;if(c=_.cache,va(r,fs,c),c!==m.cache&&Df(r,[fs],o,!0),lc(),c=_.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=j0(n,r,c,o);break e}else if(c!==f){f=Hr(Error(i(424)),r),nc(f),r=j0(n,r,c,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Bn=Yr(n.firstChild),qs=r,Jt=!0,ga=null,Gr=!0,o=Ev(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(mo(),c===f){r=Wi(n,r,o);break e}Ws(n,r,c,o)}r=r.child}return r;case 26:return gh(n,r),n===null?(o=q1(r.type,null,r.pendingProps,null))?r.memoizedState=o:Jt||(o=r.type,n=r.pendingProps,c=Dh(Ee.current).createElement(o),c[cn]=r,c[ts]=n,$s(c,o,n),yn(c),r.stateNode=c):r.memoizedState=q1(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return kn(r),n===null&&Jt&&(c=r.stateNode=B1(r.type,r.pendingProps,Ee.current),qs=r,Gr=!0,f=Bn,Ra(r.type)?(Jm=f,Bn=Yr(c.firstChild)):Bn=f),Ws(n,r,r.pendingProps.children,o),gh(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Jt&&((f=c=Bn)&&(c=PT(c,r.type,r.pendingProps,Gr),c!==null?(r.stateNode=c,qs=r,Bn=Yr(c.firstChild),Gr=!1,f=!0):f=!1),f||ya(r)),kn(r),f=r.type,m=r.pendingProps,_=n!==null?n.memoizedProps:null,c=m.children,Gm(f,m)?c=null:_!==null&&Gm(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=$f(n,r,JE,null,null,o),Nc._currentValue=f),gh(n,r),Ws(n,r,c,o),r.child;case 6:return n===null&&Jt&&((n=o=Bn)&&(o=VT(o,r.pendingProps,Gr),o!==null?(r.stateNode=o,qs=r,Bn=null,n=!0):n=!1),n||ya(r)),null;case 13:return N0(n,r,o);case 4:return nt(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=_o(r,null,c,o):Ws(n,r,c,o),r.child;case 11:return _0(n,r,r.type,r.pendingProps,o);case 7:return Ws(n,r,r.pendingProps,o),r.child;case 8:return Ws(n,r,r.pendingProps.children,o),r.child;case 12:return Ws(n,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,va(r,r.type,c.value),Ws(n,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,go(r),f=Hs(f),c=c(f),r.flags|=1,Ws(n,r,c,o),r.child;case 14:return w0(n,r,r.type,r.pendingProps,o);case 15:return x0(n,r,r.type,r.pendingProps,o);case 19:return R0(n,r,o);case 31:return aT(n,r,o);case 22:return E0(n,r,o,r.pendingProps);case 24:return go(r),c=Hs(fs),n===null?(f=Of(),f===null&&(f=Ln,m=Mf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},Vf(r),va(r,fs,f)):((n.lanes&o)!==0&&(Uf(n,r),cc(r,null,null,o),lc()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),va(r,fs,c)):(c=m.cache,va(r,fs,c),c!==f.cache&&Df(r,[fs],o,!0))),Ws(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function $i(n){n.flags|=4}function _m(n,r,o,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(i1())n.flags|=8192;else throw bo=th,Pf}else n.flags&=-16777217}function D0(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!K1(r))if(i1())n.flags|=8192;else throw bo=th,Pf}function vh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?le():536870912,n.lanes|=r,pl|=r)}function pc(n,r){if(!Jt)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function zn(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function lT(n,r,o){var c=r.pendingProps;switch(jf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(r),null;case 1:return zn(r),null;case 3:return o=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Fi(fs),Be(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(nl(r)?$i(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Af())),zn(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?($i(r),m!==null?(zn(r),D0(r,m)):(zn(r),_m(r,f,null,c,o))):m?m!==n.memoizedState?($i(r),zn(r),D0(r,m)):(zn(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&$i(r),zn(r),_m(r,f,n,c,o)),null;case 27:if(Sn(r),o=Ee.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&$i(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return zn(r),null}n=Ce.current,nl(r)?dv(r):(n=B1(f,c,o),r.stateNode=n,$i(r))}return zn(r),null;case 5:if(Sn(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&$i(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return zn(r),null}if(m=Ce.current,nl(r))dv(r);else{var _=Dh(Ee.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?_.createElement("select",{is:c.is}):_.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?_.createElement(f,{is:c.is}):_.createElement(f)}}m[cn]=r,m[ts]=c;e:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break e;for(;_.sibling===null;){if(_.return===null||_.return===r)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=m;e:switch($s(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&$i(r)}}return zn(r),_m(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&$i(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=Ee.current,nl(r)){if(n=r.stateNode,o=r.memoizedProps,c=null,f=qs,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[cn]=r,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||N1(n.nodeValue,o)),n||ya(r,!0)}else n=Dh(n).createTextNode(c),n[cn]=r,r.stateNode=n}return zn(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(c=nl(r),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[cn]=r}else mo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;zn(r),n=!1}else o=Af(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(Cr(r),r):(Cr(r),null);if((r.flags&128)!==0)throw Error(i(558))}return zn(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=nl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[cn]=r}else mo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;zn(r),f=!1}else f=Af(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Cr(r),r):(Cr(r),null)}return Cr(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),vh(r,r.updateQueue),zn(r),null);case 4:return Be(),n===null&&Fm(r.stateNode.containerInfo),zn(r),null;case 10:return Fi(r.type),zn(r),null;case 19:if(K(ls),c=r.memoizedState,c===null)return zn(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)pc(c,!1);else{if(ss!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=ih(n),m!==null){for(r.flags|=128,pc(c,!1),n=m.updateQueue,r.updateQueue=n,vh(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)ov(o,n),o=o.sibling;return be(ls,ls.current&1|2),Jt&&Bi(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&tt()>Eh&&(r.flags|=128,f=!0,pc(c,!1),r.lanes=4194304)}else{if(!f)if(n=ih(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,vh(r,n),pc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Jt)return zn(r),null}else 2*tt()-c.renderingStartTime>Eh&&o!==536870912&&(r.flags|=128,f=!0,pc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(n=c.last,n!==null?n.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=tt(),n.sibling=null,o=ls.current,be(ls,f?o&1|2:o&1),Jt&&Bi(r,c.treeForkCount),n):(zn(r),null);case 22:case 23:return Cr(r),qf(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(zn(r),r.subtreeFlags&6&&(r.flags|=8192)):zn(r),o=r.updateQueue,o!==null&&vh(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),n!==null&&K(yo),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Fi(fs),zn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function cT(n,r){switch(jf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Fi(fs),Be(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Sn(r),null;case 31:if(r.memoizedState!==null){if(Cr(r),r.alternate===null)throw Error(i(340));mo()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Cr(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));mo()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return K(ls),null;case 4:return Be(),null;case 10:return Fi(r.type),null;case 22:case 23:return Cr(r),qf(),n!==null&&K(yo),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Fi(fs),null;case 25:return null;default:return null}}function M0(n,r){switch(jf(r),r.tag){case 3:Fi(fs),Be();break;case 26:case 27:case 5:Sn(r);break;case 4:Be();break;case 31:r.memoizedState!==null&&Cr(r);break;case 13:Cr(r);break;case 19:K(ls);break;case 10:Fi(r.type);break;case 22:case 23:Cr(r),qf(),n!==null&&K(yo);break;case 24:Fi(fs)}}function gc(n,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var m=o.create,_=o.inst;c=m(),_.destroy=c}o=o.next}while(o!==f)}}catch(k){Tn(r,r.return,k)}}function Ta(n,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var _=c.inst,k=_.destroy;if(k!==void 0){_.destroy=void 0,f=r;var U=o,Z=k;try{Z()}catch(fe){Tn(f,U,fe)}}}c=c.next}while(c!==m)}}catch(fe){Tn(r,r.return,fe)}}function L0(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{kv(r,o)}catch(c){Tn(n,n.return,c)}}}function O0(n,r,o){o.props=xo(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){Tn(n,r,c)}}function yc(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){Tn(n,r,f)}}function _i(n,r){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){Tn(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Tn(n,r,f)}else o.current=null}function P0(n){var r=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){Tn(n,n.return,f)}}function wm(n,r,o){try{var c=n.stateNode;RT(c,n.type,o,r),c[ts]=r}catch(f){Tn(n,n.return,f)}}function V0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ra(n.type)||n.tag===4}function xm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||V0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ra(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Em(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=wt));else if(c!==4&&(c===27&&Ra(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Em(n,r,o),n=n.sibling;n!==null;)Em(n,r,o),n=n.sibling}function bh(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&(c===27&&Ra(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(bh(n,r,o),n=n.sibling;n!==null;)bh(n,r,o),n=n.sibling}function U0(n){var r=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);$s(r,c,o),r[cn]=n,r[ts]=o}catch(m){Tn(n,n.return,m)}}var Gi=!1,gs=!1,Tm=!1,B0=typeof WeakSet=="function"?WeakSet:Set,Is=null;function uT(n,r){if(n=n.containerInfo,Wm=Bh,n=Jy(n),yf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,k=-1,U=-1,Z=0,fe=0,ve=n,se=null;t:for(;;){for(var ce;ve!==o||f!==0&&ve.nodeType!==3||(k=_+f),ve!==m||c!==0&&ve.nodeType!==3||(U=_+c),ve.nodeType===3&&(_+=ve.nodeValue.length),(ce=ve.firstChild)!==null;)se=ve,ve=ce;for(;;){if(ve===n)break t;if(se===o&&++Z===f&&(k=_),se===m&&++fe===c&&(U=_),(ce=ve.nextSibling)!==null)break;ve=se,se=ve.parentNode}ve=ce}o=k===-1||U===-1?null:{start:k,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for($m={focusedElem:n,selectionRange:o},Bh=!1,Is=r;Is!==null;)if(r=Is,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Is=n;else for(;Is!==null;){switch(r=Is,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var Ke=xo(o.type,f);n=c.getSnapshotBeforeUpdate(Ke,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(mt){Tn(o,o.return,mt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)Ym(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ym(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Is=n;break}Is=r.return}}function z0(n,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Yi(n,o),c&4&&gc(5,o);break;case 1:if(Yi(n,o),c&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(_){Tn(o,o.return,_)}else{var f=xo(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Tn(o,o.return,_)}}c&64&&L0(o),c&512&&yc(o,o.return);break;case 3:if(Yi(n,o),c&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{kv(n,r)}catch(_){Tn(o,o.return,_)}}break;case 27:r===null&&c&4&&U0(o);case 26:case 5:Yi(n,o),r===null&&c&4&&P0(o),c&512&&yc(o,o.return);break;case 12:Yi(n,o);break;case 31:Yi(n,o),c&4&&H0(n,o);break;case 13:Yi(n,o),c&4&&W0(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=bT.bind(null,o),UT(n,o))));break;case 22:if(c=o.memoizedState!==null||Gi,!c){r=r!==null&&r.memoizedState!==null||gs,f=Gi;var m=gs;Gi=c,(gs=r)&&!m?Qi(n,o,(o.subtreeFlags&8772)!==0):Yi(n,o),Gi=f,gs=m}break;case 30:break;default:Yi(n,o)}}function F0(n){var r=n.alternate;r!==null&&(n.alternate=null,F0(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&fr(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Gn=null,pr=!1;function Ki(n,r,o){for(o=o.child;o!==null;)q0(n,r,o),o=o.sibling}function q0(n,r,o){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Ze,o)}catch{}switch(o.tag){case 26:gs||_i(o,r),Ki(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:gs||_i(o,r);var c=Gn,f=pr;Ra(o.type)&&(Gn=o.stateNode,pr=!1),Ki(n,r,o),Sc(o.stateNode),Gn=c,pr=f;break;case 5:gs||_i(o,r);case 6:if(c=Gn,f=pr,Gn=null,Ki(n,r,o),Gn=c,pr=f,Gn!==null)if(pr)try{(Gn.nodeType===9?Gn.body:Gn.nodeName==="HTML"?Gn.ownerDocument.body:Gn).removeChild(o.stateNode)}catch(m){Tn(o,r,m)}else try{Gn.removeChild(o.stateNode)}catch(m){Tn(o,r,m)}break;case 18:Gn!==null&&(pr?(n=Gn,L1(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),El(n)):L1(Gn,o.stateNode));break;case 4:c=Gn,f=pr,Gn=o.stateNode.containerInfo,pr=!0,Ki(n,r,o),Gn=c,pr=f;break;case 0:case 11:case 14:case 15:Ta(2,o,r),gs||Ta(4,o,r),Ki(n,r,o);break;case 1:gs||(_i(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&O0(o,r,c)),Ki(n,r,o);break;case 21:Ki(n,r,o);break;case 22:gs=(c=gs)||o.memoizedState!==null,Ki(n,r,o),gs=c;break;default:Ki(n,r,o)}}function H0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{El(n)}catch(o){Tn(r,r.return,o)}}}function W0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{El(n)}catch(o){Tn(r,r.return,o)}}function hT(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new B0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new B0),r;default:throw Error(i(435,n.tag))}}function _h(n,r){var o=hT(n);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=_T.bind(null,n,c);c.then(f,f)}})}function gr(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=n,_=r,k=_;e:for(;k!==null;){switch(k.tag){case 27:if(Ra(k.type)){Gn=k.stateNode,pr=!1;break e}break;case 5:Gn=k.stateNode,pr=!1;break e;case 3:case 4:Gn=k.stateNode.containerInfo,pr=!0;break e}k=k.return}if(Gn===null)throw Error(i(160));q0(m,_,f),Gn=null,pr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)$0(r,n),r=r.sibling}var ii=null;function $0(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gr(r,n),yr(n),c&4&&(Ta(3,n,n.return),gc(3,n),Ta(5,n,n.return));break;case 1:gr(r,n),yr(n),c&512&&(gs||o===null||_i(o,o.return)),c&64&&Gi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=ii;if(gr(r,n),yr(n),c&512&&(gs||o===null||_i(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ws]||m[cn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),$s(m,c,o),m[cn]=n,yn(m),c=m;break e;case"link":var _=$1("link","href",f).get(c+(o.href||""));if(_){for(var k=0;k<_.length;k++)if(m=_[k],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(k,1);break t}}m=f.createElement(c),$s(m,c,o),f.head.appendChild(m);break;case"meta":if(_=$1("meta","content",f).get(c+(o.content||""))){for(k=0;k<_.length;k++)if(m=_[k],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(k,1);break t}}m=f.createElement(c),$s(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[cn]=n,yn(m),c=m}n.stateNode=c}else G1(f,n.type,n.stateNode);else n.stateNode=W1(f,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?G1(f,n.type,n.stateNode):W1(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&wm(n,n.memoizedProps,o.memoizedProps)}break;case 27:gr(r,n),yr(n),c&512&&(gs||o===null||_i(o,o.return)),o!==null&&c&4&&wm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(gr(r,n),yr(n),c&512&&(gs||o===null||_i(o,o.return)),n.flags&32){f=n.stateNode;try{j(f,"")}catch(Ke){Tn(n,n.return,Ke)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,wm(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Tm=!0);break;case 6:if(gr(r,n),yr(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Ke){Tn(n,n.return,Ke)}}break;case 3:if(Oh=null,f=ii,ii=Mh(r.containerInfo),gr(r,n),ii=f,yr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{El(r.containerInfo)}catch(Ke){Tn(n,n.return,Ke)}Tm&&(Tm=!1,G0(n));break;case 4:c=ii,ii=Mh(n.stateNode.containerInfo),gr(r,n),yr(n),ii=c;break;case 12:gr(r,n),yr(n);break;case 31:gr(r,n),yr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,_h(n,c)));break;case 13:gr(r,n),yr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(xh=tt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,_h(n,c)));break;case 22:f=n.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,Z=Gi,fe=gs;if(Gi=Z||f,gs=fe||U,gr(r,n),gs=fe,Gi=Z,yr(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||U||Gi||gs||Eo(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){U=o=r;try{if(m=U.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{k=U.stateNode;var ve=U.memoizedProps.style,se=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;k.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(Ke){Tn(U,U.return,Ke)}}}else if(r.tag===6){if(o===null){U=r;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(Ke){Tn(U,U.return,Ke)}}}else if(r.tag===18){if(o===null){U=r;try{var ce=U.stateNode;f?O1(ce,!0):O1(U.stateNode,!1)}catch(Ke){Tn(U,U.return,Ke)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,_h(n,o))));break;case 19:gr(r,n),yr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,_h(n,c)));break;case 30:break;case 21:break;default:gr(r,n),yr(n)}}function yr(n){var r=n.flags;if(r&2){try{for(var o,c=n.return;c!==null;){if(V0(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=xm(n);bh(n,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(j(_,""),o.flags&=-33);var k=xm(n);bh(n,k,_);break;case 3:case 4:var U=o.stateNode.containerInfo,Z=xm(n);Em(n,Z,U);break;default:throw Error(i(161))}}catch(fe){Tn(n,n.return,fe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function G0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;G0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Yi(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)z0(n,r.alternate,r),r=r.sibling}function Eo(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Ta(4,r,r.return),Eo(r);break;case 1:_i(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&O0(r,r.return,o),Eo(r);break;case 27:Sc(r.stateNode);case 26:case 5:_i(r,r.return),Eo(r);break;case 22:r.memoizedState===null&&Eo(r);break;case 30:Eo(r);break;default:Eo(r)}n=n.sibling}}function Qi(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,_=m.flags;switch(m.tag){case 0:case 11:case 15:Qi(f,m,o),gc(4,m);break;case 1:if(Qi(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){Tn(c,c.return,Z)}if(c=m,f=c.updateQueue,f!==null){var k=c.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)Tv(U[f],k)}catch(Z){Tn(c,c.return,Z)}}o&&_&64&&L0(m),yc(m,m.return);break;case 27:U0(m);case 26:case 5:Qi(f,m,o),o&&c===null&&_&4&&P0(m),yc(m,m.return);break;case 12:Qi(f,m,o);break;case 31:Qi(f,m,o),o&&_&4&&H0(f,m);break;case 13:Qi(f,m,o),o&&_&4&&W0(f,m);break;case 22:m.memoizedState===null&&Qi(f,m,o),yc(m,m.return);break;case 30:break;default:Qi(f,m,o)}r=r.sibling}}function km(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&sc(o))}function Sm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&sc(n))}function ai(n,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)K0(n,r,o,c),r=r.sibling}function K0(n,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ai(n,r,o,c),f&2048&&gc(9,r);break;case 1:ai(n,r,o,c);break;case 3:ai(n,r,o,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&sc(n)));break;case 12:if(f&2048){ai(n,r,o,c),n=r.stateNode;try{var m=r.memoizedProps,_=m.id,k=m.onPostCommit;typeof k=="function"&&k(_,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(U){Tn(r,r.return,U)}}else ai(n,r,o,c);break;case 31:ai(n,r,o,c);break;case 13:ai(n,r,o,c);break;case 23:break;case 22:m=r.stateNode,_=r.alternate,r.memoizedState!==null?m._visibility&2?ai(n,r,o,c):vc(n,r):m._visibility&2?ai(n,r,o,c):(m._visibility|=2,dl(n,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&km(_,r);break;case 24:ai(n,r,o,c),f&2048&&Sm(r.alternate,r);break;default:ai(n,r,o,c)}}function dl(n,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,_=r,k=o,U=c,Z=_.flags;switch(_.tag){case 0:case 11:case 15:dl(m,_,k,U,f),gc(8,_);break;case 23:break;case 22:var fe=_.stateNode;_.memoizedState!==null?fe._visibility&2?dl(m,_,k,U,f):vc(m,_):(fe._visibility|=2,dl(m,_,k,U,f)),f&&Z&2048&&km(_.alternate,_);break;case 24:dl(m,_,k,U,f),f&&Z&2048&&Sm(_.alternate,_);break;default:dl(m,_,k,U,f)}r=r.sibling}}function vc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,c=r,f=c.flags;switch(c.tag){case 22:vc(o,c),f&2048&&km(c.alternate,c);break;case 24:vc(o,c),f&2048&&Sm(c.alternate,c);break;default:vc(o,c)}r=r.sibling}}var bc=8192;function fl(n,r,o){if(n.subtreeFlags&bc)for(n=n.child;n!==null;)Y0(n,r,o),n=n.sibling}function Y0(n,r,o){switch(n.tag){case 26:fl(n,r,o),n.flags&bc&&n.memoizedState!==null&&XT(o,ii,n.memoizedState,n.memoizedProps);break;case 5:fl(n,r,o);break;case 3:case 4:var c=ii;ii=Mh(n.stateNode.containerInfo),fl(n,r,o),ii=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=bc,bc=16777216,fl(n,r,o),bc=c):fl(n,r,o));break;default:fl(n,r,o)}}function Q0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function _c(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Is=c,J0(c,n)}Q0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)X0(n),n=n.sibling}function X0(n){switch(n.tag){case 0:case 11:case 15:_c(n),n.flags&2048&&Ta(9,n,n.return);break;case 3:_c(n);break;case 12:_c(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,wh(n)):_c(n);break;default:_c(n)}}function wh(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Is=c,J0(c,n)}Q0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Ta(8,r,r.return),wh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,wh(r));break;default:wh(r)}n=n.sibling}}function J0(n,r){for(;Is!==null;){var o=Is;switch(o.tag){case 0:case 11:case 15:Ta(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:sc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Is=c;else e:for(o=n;Is!==null;){c=Is;var f=c.sibling,m=c.return;if(F0(c),c===o){Is=null;break e}if(f!==null){f.return=m,Is=f;break e}Is=m}}}var dT={getCacheForType:function(n){var r=Hs(fs),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return Hs(fs).controller.signal}},fT=typeof WeakMap=="function"?WeakMap:Map,fn=0,Ln=null,Ht=null,Gt=0,En=0,jr=null,ka=!1,ml=!1,Cm=!1,Xi=0,ss=0,Sa=0,To=0,jm=0,Nr=0,pl=0,wc=null,vr=null,Nm=!1,xh=0,Z0=0,Eh=1/0,Th=null,Ca=null,Ts=0,ja=null,gl=null,Ji=0,Am=0,Rm=null,e1=null,xc=0,Im=null;function Ar(){return(fn&2)!==0&&Gt!==0?Gt&-Gt:te.T!==null?Vm():Os()}function t1(){if(Nr===0)if((Gt&536870912)===0||Jt){var n=pn;pn<<=1,(pn&3932160)===0&&(pn=262144),Nr=n}else Nr=536870912;return n=Sr.current,n!==null&&(n.flags|=32),Nr}function br(n,r,o){(n===Ln&&(En===2||En===9)||n.cancelPendingCommit!==null)&&(yl(n,0),Na(n,Gt,Nr,!1)),Fe(n,o),((fn&2)===0||n!==Ln)&&(n===Ln&&((fn&2)===0&&(To|=o),ss===4&&Na(n,Gt,Nr,!1)),wi(n))}function n1(n,r,o){if((fn&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&n.expiredLanes)===0||wn(n,r),f=c?gT(n,r):Mm(n,r,!0),m=c;do{if(f===0){ml&&!c&&Na(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!mT(o)){f=Mm(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var k=n;f=wc;var U=k.current.memoizedState.isDehydrated;if(U&&(yl(k,_).flags|=256),_=Mm(k,_,!1),_!==2){if(Cm&&!U){k.errorRecoveryDisabledLanes|=m,To|=m,f=4;break e}m=vr,vr=f,m!==null&&(vr===null?vr=m:vr.push.apply(vr,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){yl(n,0),Na(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Na(c,r,Nr,!ka);break e;case 2:vr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=xh+300-tt(),10<f)){if(Na(c,r,Nr,!ka),Nn(c,0,!0)!==0)break e;Ji=r,c.timeoutHandle=D1(s1.bind(null,c,o,vr,Th,Nm,r,Nr,To,pl,ka,m,"Throttled",-0,0),f);break e}s1(c,o,vr,Th,Nm,r,Nr,To,pl,ka,m,null,-0,0)}}break}while(!0);wi(n)}function s1(n,r,o,c,f,m,_,k,U,Z,fe,ve,se,ce){if(n.timeoutHandle=-1,ve=r.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wt},Y0(r,m,ve);var Ke=(m&62914560)===m?xh-tt():(m&4194048)===m?Z0-tt():0;if(Ke=JT(ve,Ke),Ke!==null){Ji=m,n.cancelPendingCommit=Ke(h1.bind(null,n,r,m,o,c,f,_,k,U,fe,ve,null,se,ce)),Na(n,m,_,!Z);return}}h1(n,r,m,o,c,f,_,k,U)}function mT(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!Tr(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Na(n,r,o,c){r&=~jm,r&=~To,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-Oe(f),_=1<<m;c[m]=-1,f&=~_}o!==0&&rt(n,o,r)}function kh(){return(fn&6)===0?(Ec(0),!1):!0}function Dm(){if(Ht!==null){if(En===0)var n=Ht.return;else n=Ht,zi=po=null,Yf(n),ol=null,ic=0,n=Ht;for(;n!==null;)M0(n.alternate,n),n=n.return;Ht=null}}function yl(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,MT(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ji=0,Dm(),Ln=n,Ht=o=Ui(n.current,null),Gt=r,En=0,jr=null,ka=!1,ml=wn(n,r),Cm=!1,pl=Nr=jm=To=Sa=ss=0,vr=wc=null,Nm=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-Oe(c),m=1<<f;r|=n[f],c&=~m}return Xi=r,$u(),o}function r1(n,r){Dt=null,te.H=fc,r===al||r===eh?(r=_v(),En=3):r===Pf?(r=_v(),En=4):En=r===hm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,jr=r,Ht===null&&(ss=1,mh(n,Hr(r,n.current)))}function i1(){var n=Sr.current;return n===null?!0:(Gt&4194048)===Gt?Kr===null:(Gt&62914560)===Gt||(Gt&536870912)!==0?n===Kr:!1}function a1(){var n=te.H;return te.H=fc,n===null?fc:n}function o1(){var n=te.A;return te.A=dT,n}function Sh(){ss=4,ka||(Gt&4194048)!==Gt&&Sr.current!==null||(ml=!0),(Sa&134217727)===0&&(To&134217727)===0||Ln===null||Na(Ln,Gt,Nr,!1)}function Mm(n,r,o){var c=fn;fn|=2;var f=a1(),m=o1();(Ln!==n||Gt!==r)&&(Th=null,yl(n,r)),r=!1;var _=ss;e:do try{if(En!==0&&Ht!==null){var k=Ht,U=jr;switch(En){case 8:Dm(),_=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(r=!0);var Z=En;if(En=0,jr=null,vl(n,k,U,Z),o&&ml){_=0;break e}break;default:Z=En,En=0,jr=null,vl(n,k,U,Z)}}pT(),_=ss;break}catch(fe){r1(n,fe)}while(!0);return r&&n.shellSuspendCounter++,zi=po=null,fn=c,te.H=f,te.A=m,Ht===null&&(Ln=null,Gt=0,$u()),_}function pT(){for(;Ht!==null;)l1(Ht)}function gT(n,r){var o=fn;fn|=2;var c=a1(),f=o1();Ln!==n||Gt!==r?(Th=null,Eh=tt()+500,yl(n,r)):ml=wn(n,r);e:do try{if(En!==0&&Ht!==null){r=Ht;var m=jr;t:switch(En){case 1:En=0,jr=null,vl(n,r,m,1);break;case 2:case 9:if(vv(m)){En=0,jr=null,c1(r);break}r=function(){En!==2&&En!==9||Ln!==n||(En=7),wi(n)},m.then(r,r);break e;case 3:En=7;break e;case 4:En=5;break e;case 7:vv(m)?(En=0,jr=null,c1(r)):(En=0,jr=null,vl(n,r,m,7));break;case 5:var _=null;switch(Ht.tag){case 26:_=Ht.memoizedState;case 5:case 27:var k=Ht;if(_?K1(_):k.stateNode.complete){En=0,jr=null;var U=k.sibling;if(U!==null)Ht=U;else{var Z=k.return;Z!==null?(Ht=Z,Ch(Z)):Ht=null}break t}}En=0,jr=null,vl(n,r,m,5);break;case 6:En=0,jr=null,vl(n,r,m,6);break;case 8:Dm(),ss=6;break e;default:throw Error(i(462))}}yT();break}catch(fe){r1(n,fe)}while(!0);return zi=po=null,te.H=c,te.A=f,fn=o,Ht!==null?0:(Ln=null,Gt=0,$u(),ss)}function yT(){for(;Ht!==null&&!ut();)l1(Ht)}function l1(n){var r=I0(n.alternate,n,Xi);n.memoizedProps=n.pendingProps,r===null?Ch(n):Ht=r}function c1(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=S0(o,r,r.pendingProps,r.type,void 0,Gt);break;case 11:r=S0(o,r,r.pendingProps,r.type.render,r.ref,Gt);break;case 5:Yf(r);default:M0(o,r),r=Ht=ov(r,Xi),r=I0(o,r,Xi)}n.memoizedProps=n.pendingProps,r===null?Ch(n):Ht=r}function vl(n,r,o,c){zi=po=null,Yf(r),ol=null,ic=0;var f=r.return;try{if(iT(n,f,r,o,Gt)){ss=1,mh(n,Hr(o,n.current)),Ht=null;return}}catch(m){if(f!==null)throw Ht=f,m;ss=1,mh(n,Hr(o,n.current)),Ht=null;return}r.flags&32768?(Jt||c===1?n=!0:ml||(Gt&536870912)!==0?n=!1:(ka=n=!0,(c===2||c===9||c===3||c===6)&&(c=Sr.current,c!==null&&c.tag===13&&(c.flags|=16384))),u1(r,n)):Ch(r)}function Ch(n){var r=n;do{if((r.flags&32768)!==0){u1(r,ka);return}n=r.return;var o=lT(r.alternate,r,Xi);if(o!==null){Ht=o;return}if(r=r.sibling,r!==null){Ht=r;return}Ht=r=n}while(r!==null);ss===0&&(ss=5)}function u1(n,r){do{var o=cT(n.alternate,n);if(o!==null){o.flags&=32767,Ht=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Ht=n;return}Ht=n=o}while(n!==null);ss=6,Ht=null}function h1(n,r,o,c,f,m,_,k,U){n.cancelPendingCommit=null;do jh();while(Ts!==0);if((fn&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=xf,ht(n,o,m,_,k,U),n===Ln&&(Ht=Ln=null,Gt=0),gl=r,ja=n,Ji=o,Am=m,Rm=f,e1=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,wT(jn,function(){return g1(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,f=xe.p,xe.p=2,_=fn,fn|=4;try{uT(n,r,o)}finally{fn=_,xe.p=f,te.T=c}}Ts=1,d1(),f1(),m1()}}function d1(){if(Ts===1){Ts=0;var n=ja,r=gl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=te.T,te.T=null;var c=xe.p;xe.p=2;var f=fn;fn|=4;try{$0(r,n);var m=$m,_=Jy(n.containerInfo),k=m.focusedElem,U=m.selectionRange;if(_!==k&&k&&k.ownerDocument&&Xy(k.ownerDocument.documentElement,k)){if(U!==null&&yf(k)){var Z=U.start,fe=U.end;if(fe===void 0&&(fe=Z),"selectionStart"in k)k.selectionStart=Z,k.selectionEnd=Math.min(fe,k.value.length);else{var ve=k.ownerDocument||document,se=ve&&ve.defaultView||window;if(se.getSelection){var ce=se.getSelection(),Ke=k.textContent.length,mt=Math.min(U.start,Ke),In=U.end===void 0?mt:Math.min(U.end,Ke);!ce.extend&&mt>In&&(_=In,In=mt,mt=_);var $=Qy(k,mt),F=Qy(k,In);if($&&F&&(ce.rangeCount!==1||ce.anchorNode!==$.node||ce.anchorOffset!==$.offset||ce.focusNode!==F.node||ce.focusOffset!==F.offset)){var Q=ve.createRange();Q.setStart($.node,$.offset),ce.removeAllRanges(),mt>In?(ce.addRange(Q),ce.extend(F.node,F.offset)):(Q.setEnd(F.node,F.offset),ce.addRange(Q))}}}}for(ve=[],ce=k;ce=ce.parentNode;)ce.nodeType===1&&ve.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ve.length;k++){var pe=ve[k];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}Bh=!!Wm,$m=Wm=null}finally{fn=f,xe.p=c,te.T=o}}n.current=r,Ts=2}}function f1(){if(Ts===2){Ts=0;var n=ja,r=gl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=te.T,te.T=null;var c=xe.p;xe.p=2;var f=fn;fn|=4;try{z0(n,r.alternate,r)}finally{fn=f,xe.p=c,te.T=o}}Ts=3}}function m1(){if(Ts===4||Ts===3){Ts=0,At();var n=ja,r=gl,o=Ji,c=e1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ts=5:(Ts=0,gl=ja=null,p1(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Ca=null),gn(o),r=r.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Ze,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=te.T,f=xe.p,xe.p=2,te.T=null;try{for(var m=n.onRecoverableError,_=0;_<c.length;_++){var k=c[_];m(k.value,{componentStack:k.stack})}}finally{te.T=r,xe.p=f}}(Ji&3)!==0&&jh(),wi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Im?xc++:(xc=0,Im=n):xc=0,Ec(0)}}function p1(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,sc(r)))}function jh(){return d1(),f1(),m1(),g1()}function g1(){if(Ts!==5)return!1;var n=ja,r=Am;Am=0;var o=gn(Ji),c=te.T,f=xe.p;try{xe.p=32>o?32:o,te.T=null,o=Rm,Rm=null;var m=ja,_=Ji;if(Ts=0,gl=ja=null,Ji=0,(fn&6)!==0)throw Error(i(331));var k=fn;if(fn|=4,X0(m.current),K0(m,m.current,_,o),fn=k,Ec(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Ze,m)}catch{}return!0}finally{xe.p=f,te.T=c,p1(n,r)}}function y1(n,r,o){r=Hr(o,r),r=um(n.stateNode,r,2),n=wa(n,r,2),n!==null&&(Fe(n,2),wi(n))}function Tn(n,r,o){if(n.tag===3)y1(n,n,o);else for(;r!==null;){if(r.tag===3){y1(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ca===null||!Ca.has(c))){n=Hr(o,n),o=v0(2),c=wa(r,o,2),c!==null&&(b0(o,c,r,n),Fe(c,2),wi(c));break}}r=r.return}}function Lm(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new fT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(Cm=!0,f.add(o),n=vT.bind(null,n,r,o),r.then(n,n))}function vT(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Ln===n&&(Gt&o)===o&&(ss===4||ss===3&&(Gt&62914560)===Gt&&300>tt()-xh?(fn&2)===0&&yl(n,0):jm|=o,pl===Gt&&(pl=0)),wi(n)}function v1(n,r){r===0&&(r=le()),n=ho(n,r),n!==null&&(Fe(n,r),wi(n))}function bT(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),v1(n,o)}function _T(n,r){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),v1(n,o)}function wT(n,r){return ae(n,r)}var Nh=null,bl=null,Om=!1,Ah=!1,Pm=!1,Aa=0;function wi(n){n!==bl&&n.next===null&&(bl===null?Nh=bl=n:bl=bl.next=n),Ah=!0,Om||(Om=!0,ET())}function Ec(n,r){if(!Pm&&Ah){Pm=!0;do for(var o=!1,c=Nh;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var _=c.suspendedLanes,k=c.pingedLanes;m=(1<<31-Oe(42|n)+1)-1,m&=f&~(_&~k),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,x1(c,m))}else m=Gt,m=Nn(c,c===Ln?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||wn(c,m)||(o=!0,x1(c,m));c=c.next}while(o);Pm=!1}}function xT(){b1()}function b1(){Ah=Om=!1;var n=0;Aa!==0&&DT()&&(n=Aa);for(var r=tt(),o=null,c=Nh;c!==null;){var f=c.next,m=_1(c,r);m===0?(c.next=null,o===null?Nh=f:o.next=f,f===null&&(bl=o)):(o=c,(n!==0||(m&3)!==0)&&(Ah=!0)),c=f}Ts!==0&&Ts!==5||Ec(n),Aa!==0&&(Aa=0)}function _1(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-Oe(m),k=1<<_,U=f[_];U===-1?((k&o)===0||(k&c)!==0)&&(f[_]=hs(k,r)):U<=r&&(n.expiredLanes|=k),m&=~k}if(r=Ln,o=Gt,o=Nn(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===r&&(En===2||En===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&ln(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||wn(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(c!==null&&ln(c),gn(o)){case 2:case 8:o=sn;break;case 32:o=jn;break;case 268435456:o=Fn;break;default:o=jn}return c=w1.bind(null,n),o=ae(o,c),n.callbackPriority=r,n.callbackNode=o,r}return c!==null&&c!==null&&ln(c),n.callbackPriority=2,n.callbackNode=null,2}function w1(n,r){if(Ts!==0&&Ts!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(jh()&&n.callbackNode!==o)return null;var c=Gt;return c=Nn(n,n===Ln?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(n1(n,c,r),_1(n,tt()),n.callbackNode!=null&&n.callbackNode===o?w1.bind(null,n):null)}function x1(n,r){if(jh())return null;n1(n,r,!0)}function ET(){LT(function(){(fn&6)!==0?ae(nn,xT):b1()})}function Vm(){if(Aa===0){var n=rl;n===0&&(n=mn,mn<<=1,(mn&261888)===0&&(mn=256)),Aa=n}return Aa}function E1(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Tt(""+n)}function T1(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function TT(n,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=E1((f[ts]||null).action),_=c.submitter;_&&(r=(r=_[ts]||null)?E1(r.formAction):_.getAttribute("formAction"),r!==null&&(m=r,_=null));var k=new xt("action","action",null,c,f);n.push({event:k,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Aa!==0){var U=_?T1(f,_):new FormData(f);rm(o,{pending:!0,data:U,method:f.method,action:m},null,U)}}else typeof m=="function"&&(k.preventDefault(),U=_?T1(f,_):new FormData(f),rm(o,{pending:!0,data:U,method:f.method,action:m},m,U))},currentTarget:f}]})}}for(var Um=0;Um<wf.length;Um++){var Bm=wf[Um],kT=Bm.toLowerCase(),ST=Bm[0].toUpperCase()+Bm.slice(1);ri(kT,"on"+ST)}ri(tv,"onAnimationEnd"),ri(nv,"onAnimationIteration"),ri(sv,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(FE,"onTransitionRun"),ri(qE,"onTransitionStart"),ri(HE,"onTransitionCancel"),ri(rv,"onTransitionEnd"),xn("onMouseEnter",["mouseout","mouseover"]),xn("onMouseLeave",["mouseout","mouseover"]),xn("onPointerEnter",["pointerout","pointerover"]),xn("onPointerLeave",["pointerout","pointerover"]),ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tc));function k1(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var _=c.length-1;0<=_;_--){var k=c[_],U=k.instance,Z=k.currentTarget;if(k=k.listener,U!==m&&f.isPropagationStopped())break e;m=k,f.currentTarget=Z;try{m(f)}catch(fe){Wu(fe)}f.currentTarget=null,m=U}else for(_=0;_<c.length;_++){if(k=c[_],U=k.instance,Z=k.currentTarget,k=k.listener,U!==m&&f.isPropagationStopped())break e;m=k,f.currentTarget=Z;try{m(f)}catch(fe){Wu(fe)}f.currentTarget=null,m=U}}}}function Wt(n,r){var o=r[Or];o===void 0&&(o=r[Or]=new Set);var c=n+"__bubble";o.has(c)||(S1(r,n,2,!1),o.add(c))}function zm(n,r,o){var c=0;r&&(c|=4),S1(o,n,c,r)}var Rh="_reactListening"+Math.random().toString(36).slice(2);function Fm(n){if(!n[Rh]){n[Rh]=!0,Vs.forEach(function(o){o!=="selectionchange"&&(CT.has(o)||zm(o,!1,n),zm(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Rh]||(r[Rh]=!0,zm("selectionchange",!1,r))}}function S1(n,r,o,c){switch(tb(r)){case 2:var f=tk;break;case 8:f=nk;break;default:f=sp}o=f.bind(null,r,o,n),f=void 0,!ge||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function qm(n,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var k=c.stateNode.containerInfo;if(k===f)break;if(_===4)for(_=c.return;_!==null;){var U=_.tag;if((U===3||U===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;k!==null;){if(_=Ps(k),_===null)return;if(U=_.tag,U===5||U===6||U===26||U===27){c=m=_;continue e}k=k.parentNode}}c=c.return}V(function(){var Z=m,fe=un(o),ve=[];e:{var se=iv.get(n);if(se!==void 0){var ce=xt,Ke=n;switch(n){case"keypress":if(Vt(o)===0)break e;case"keydown":case"keyup":ce=Fu;break;case"focusin":Ke="focus",ce=Oi;break;case"focusout":Ke="blur",ce=Oi;break;case"beforeblur":case"afterblur":ce=Oi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=zs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=pi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=v;break;case tv:case nv:case sv:ce=Lu;break;case rv:ce=N;break;case"scroll":case"scrollend":ce=Nt;break;case"wheel":ce=oe;break;case"copy":case"cut":case"paste":ce=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Vi;break;case"toggle":case"beforetoggle":ce=It}var mt=(r&4)!==0,In=!mt&&(n==="scroll"||n==="scrollend"),$=mt?se!==null?se+"Capture":null:se;mt=[];for(var F=Z,Q;F!==null;){var pe=F;if(Q=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||Q===null||$===null||(pe=X(F,$),pe!=null&&mt.push(kc(F,pe,Q))),In)break;F=F.return}0<mt.length&&(se=new ce(se,Ke,null,o,fe),ve.push({event:se,listeners:mt}))}}if((r&7)===0){e:{if(se=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",se&&o!==vn&&(Ke=o.relatedTarget||o.fromElement)&&(Ps(Ke)||Ke[Cs]))break e;if((ce||se)&&(se=fe.window===fe?fe:(se=fe.ownerDocument)?se.defaultView||se.parentWindow:window,ce?(Ke=o.relatedTarget||o.toElement,ce=Z,Ke=Ke?Ps(Ke):null,Ke!==null&&(In=u(Ke),mt=Ke.tag,Ke!==In||mt!==5&&mt!==27&&mt!==6)&&(Ke=null)):(ce=null,Ke=Z),ce!==Ke)){if(mt=zs,pe="onMouseLeave",$="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(mt=Vi,pe="onPointerLeave",$="onPointerEnter",F="pointer"),In=ce==null?se:Un(ce),Q=Ke==null?se:Un(Ke),se=new mt(pe,F+"leave",ce,o,fe),se.target=In,se.relatedTarget=Q,pe=null,Ps(fe)===Z&&(mt=new mt($,F+"enter",Ke,o,fe),mt.target=Q,mt.relatedTarget=In,pe=mt),In=pe,ce&&Ke)t:{for(mt=jT,$=ce,F=Ke,Q=0,pe=$;pe;pe=mt(pe))Q++;pe=0;for(var it=F;it;it=mt(it))pe++;for(;0<Q-pe;)$=mt($),Q--;for(;0<pe-Q;)F=mt(F),pe--;for(;Q--;){if($===F||F!==null&&$===F.alternate){mt=$;break t}$=mt($),F=mt(F)}mt=null}else mt=null;ce!==null&&C1(ve,se,ce,mt,!1),Ke!==null&&In!==null&&C1(ve,In,Ke,mt,!0)}}e:{if(se=Z?Un(Z):window,ce=se.nodeName&&se.nodeName.toLowerCase(),ce==="select"||ce==="input"&&se.type==="file")var an=Hy;else if(Fy(se))if(Wy)an=UE;else{an=PE;var Je=OE}else ce=se.nodeName,!ce||ce.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?Z&&He(Z.elementType)&&(an=Hy):an=VE;if(an&&(an=an(n,Z))){qy(ve,an,o,fe);break e}Je&&Je(n,se,Z),n==="focusout"&&Z&&se.type==="number"&&Z.memoizedProps.value!=null&&Ur(se,"number",se.value)}switch(Je=Z?Un(Z):window,n){case"focusin":(Fy(Je)||Je.contentEditable==="true")&&(Qo=Je,vf=Z,ec=null);break;case"focusout":ec=vf=Qo=null;break;case"mousedown":bf=!0;break;case"contextmenu":case"mouseup":case"dragend":bf=!1,Zy(ve,o,fe);break;case"selectionchange":if(zE)break;case"keydown":case"keyup":Zy(ve,o,fe)}var Ot;if(dn)e:{switch(n){case"compositionstart":var Kt="onCompositionStart";break e;case"compositionend":Kt="onCompositionEnd";break e;case"compositionupdate":Kt="onCompositionUpdate";break e}Kt=void 0}else Yo?lo(n,o)&&(Kt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Kt="onCompositionStart");Kt&&(yi&&o.locale!=="ko"&&(Yo||Kt!=="onCompositionStart"?Kt==="onCompositionEnd"&&Yo&&(Ot=Rt()):(je=fe,Ue="value"in je?je.value:je.textContent,Yo=!0)),Je=Ih(Z,Kt),0<Je.length&&(Kt=new gi(Kt,n,null,o,fe),ve.push({event:Kt,listeners:Je}),Ot?Kt.data=Ot:(Ot=Ko(o),Ot!==null&&(Kt.data=Ot)))),(Ot=Fr?IE(n,o):DE(n,o))&&(Kt=Ih(Z,"onBeforeInput"),0<Kt.length&&(Je=new gi("onBeforeInput","beforeinput",null,o,fe),ve.push({event:Je,listeners:Kt}),Je.data=Ot)),TT(ve,n,Z,o,fe)}k1(ve,r)})}function kc(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Ih(n,r){for(var o=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=X(n,o),f!=null&&c.unshift(kc(n,f,m)),f=X(n,r),f!=null&&c.push(kc(n,f,m))),n.tag===3)return c;n=n.return}return[]}function jT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function C1(n,r,o,c,f){for(var m=r._reactName,_=[];o!==null&&o!==c;){var k=o,U=k.alternate,Z=k.stateNode;if(k=k.tag,U!==null&&U===c)break;k!==5&&k!==26&&k!==27||Z===null||(U=Z,f?(Z=X(o,m),Z!=null&&_.unshift(kc(o,Z,U))):f||(Z=X(o,m),Z!=null&&_.push(kc(o,Z,U)))),o=o.return}_.length!==0&&n.push({event:r,listeners:_})}var NT=/\r\n?/g,AT=/\u0000|\uFFFD/g;function j1(n){return(typeof n=="string"?n:""+n).replace(NT,`
`).replace(AT,"")}function N1(n,r){return r=j1(r),j1(n)===r}function Rn(n,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||j(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&j(n,""+c);break;case"className":xs(n,"class",c);break;case"tabIndex":xs(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":xs(n,o,c);break;case"style":Ie(n,c,m);break;case"data":if(r!=="object"){xs(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Tt(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&Rn(n,r,"name",f.name,f,null),Rn(n,r,"formEncType",f.formEncType,f,null),Rn(n,r,"formMethod",f.formMethod,f,null),Rn(n,r,"formTarget",f.formTarget,f,null)):(Rn(n,r,"encType",f.encType,f,null),Rn(n,r,"method",f.method,f,null),Rn(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=Tt(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=wt);break;case"onScroll":c!=null&&Wt("scroll",n);break;case"onScrollEnd":c!=null&&Wt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=Tt(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Wt("beforetoggle",n),Wt("toggle",n),As(n,"popover",c);break;case"xlinkActuate":C(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":C(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":C(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":C(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":C(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":C(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":C(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":C(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":C(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":As(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=pt.get(o)||o,As(n,o,c))}}function Hm(n,r,o,c,f,m){switch(o){case"style":Ie(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?j(n,c):(typeof c=="number"||typeof c=="bigint")&&j(n,""+c);break;case"onScroll":c!=null&&Wt("scroll",n);break;case"onScrollEnd":c!=null&&Wt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=wt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qs.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[ts]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):As(n,o,c)}}}function $s(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Wt("error",n),Wt("load",n);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Rn(n,r,m,_,o,null)}}f&&Rn(n,r,"srcSet",o.srcSet,o,null),c&&Rn(n,r,"src",o.src,o,null);return;case"input":Wt("invalid",n);var k=m=_=f=null,U=null,Z=null;for(c in o)if(o.hasOwnProperty(c)){var fe=o[c];if(fe!=null)switch(c){case"name":f=fe;break;case"type":_=fe;break;case"checked":U=fe;break;case"defaultChecked":Z=fe;break;case"value":m=fe;break;case"defaultValue":k=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,r));break;default:Rn(n,r,c,fe,o,null)}}nr(n,m,k,U,Z,_,f,!1);return;case"select":Wt("invalid",n),c=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(k=o[f],k!=null))switch(f){case"value":m=k;break;case"defaultValue":_=k;break;case"multiple":c=k;default:Rn(n,r,f,k,o,null)}r=m,o=_,n.multiple=!!c,r!=null?Us(n,!!c,r,!1):o!=null&&Us(n,!!c,o,!0);return;case"textarea":Wt("invalid",n),m=f=c=null;for(_ in o)if(o.hasOwnProperty(_)&&(k=o[_],k!=null))switch(_){case"value":c=k;break;case"defaultValue":f=k;break;case"children":m=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:Rn(n,r,_,k,o,null)}Br(n,c,f,m);return;case"option":for(U in o)o.hasOwnProperty(U)&&(c=o[U],c!=null)&&(U==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Rn(n,r,U,c,o,null));return;case"dialog":Wt("beforetoggle",n),Wt("toggle",n),Wt("cancel",n),Wt("close",n);break;case"iframe":case"object":Wt("load",n);break;case"video":case"audio":for(c=0;c<Tc.length;c++)Wt(Tc[c],n);break;case"image":Wt("error",n),Wt("load",n);break;case"details":Wt("toggle",n);break;case"embed":case"source":case"link":Wt("error",n),Wt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(c=o[Z],c!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Rn(n,r,Z,c,o,null)}return;default:if(He(r)){for(fe in o)o.hasOwnProperty(fe)&&(c=o[fe],c!==void 0&&Hm(n,r,fe,c,o,void 0));return}}for(k in o)o.hasOwnProperty(k)&&(c=o[k],c!=null&&Rn(n,r,k,c,o,null))}function RT(n,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,k=null,U=null,Z=null,fe=null;for(ce in o){var ve=o[ce];if(o.hasOwnProperty(ce)&&ve!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":U=ve;default:c.hasOwnProperty(ce)||Rn(n,r,ce,null,c,ve)}}for(var se in c){var ce=c[se];if(ve=o[se],c.hasOwnProperty(se)&&(ce!=null||ve!=null))switch(se){case"type":m=ce;break;case"name":f=ce;break;case"checked":Z=ce;break;case"defaultChecked":fe=ce;break;case"value":_=ce;break;case"defaultValue":k=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,r));break;default:ce!==ve&&Rn(n,r,se,ce,c,ve)}}Xn(n,_,k,U,Z,fe,m,f);return;case"select":ce=_=k=se=null;for(m in o)if(U=o[m],o.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":ce=U;default:c.hasOwnProperty(m)||Rn(n,r,m,null,c,U)}for(f in c)if(m=c[f],U=o[f],c.hasOwnProperty(f)&&(m!=null||U!=null))switch(f){case"value":se=m;break;case"defaultValue":k=m;break;case"multiple":_=m;default:m!==U&&Rn(n,r,f,m,c,U)}r=k,o=_,c=ce,se!=null?Us(n,!!o,se,!1):!!c!=!!o&&(r!=null?Us(n,!!o,r,!0):Us(n,!!o,o?[]:"",!1));return;case"textarea":ce=se=null;for(k in o)if(f=o[k],o.hasOwnProperty(k)&&f!=null&&!c.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Rn(n,r,k,null,c,f)}for(_ in c)if(f=c[_],m=o[_],c.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":se=f;break;case"defaultValue":ce=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Rn(n,r,_,f,c,m)}mi(n,se,ce);return;case"option":for(var Ke in o)se=o[Ke],o.hasOwnProperty(Ke)&&se!=null&&!c.hasOwnProperty(Ke)&&(Ke==="selected"?n.selected=!1:Rn(n,r,Ke,null,c,se));for(U in c)se=c[U],ce=o[U],c.hasOwnProperty(U)&&se!==ce&&(se!=null||ce!=null)&&(U==="selected"?n.selected=se&&typeof se!="function"&&typeof se!="symbol":Rn(n,r,U,se,c,ce));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in o)se=o[mt],o.hasOwnProperty(mt)&&se!=null&&!c.hasOwnProperty(mt)&&Rn(n,r,mt,null,c,se);for(Z in c)if(se=c[Z],ce=o[Z],c.hasOwnProperty(Z)&&se!==ce&&(se!=null||ce!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,r));break;default:Rn(n,r,Z,se,c,ce)}return;default:if(He(r)){for(var In in o)se=o[In],o.hasOwnProperty(In)&&se!==void 0&&!c.hasOwnProperty(In)&&Hm(n,r,In,void 0,c,se);for(fe in c)se=c[fe],ce=o[fe],!c.hasOwnProperty(fe)||se===ce||se===void 0&&ce===void 0||Hm(n,r,fe,se,c,ce);return}}for(var $ in o)se=o[$],o.hasOwnProperty($)&&se!=null&&!c.hasOwnProperty($)&&Rn(n,r,$,null,c,se);for(ve in c)se=c[ve],ce=o[ve],!c.hasOwnProperty(ve)||se===ce||se==null&&ce==null||Rn(n,r,ve,se,c,ce)}function A1(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function IT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,_=f.initiatorType,k=f.duration;if(m&&k&&A1(_)){for(_=0,k=f.responseEnd,c+=1;c<o.length;c++){var U=o[c],Z=U.startTime;if(Z>k)break;var fe=U.transferSize,ve=U.initiatorType;fe&&A1(ve)&&(U=U.responseEnd,_+=fe*(U<k?1:(k-Z)/(U-Z)))}if(--c,r+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Wm=null,$m=null;function Dh(n){return n.nodeType===9?n:n.ownerDocument}function R1(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function I1(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Gm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Km=null;function DT(){var n=window.event;return n&&n.type==="popstate"?n===Km?!1:(Km=n,!0):(Km=null,!1)}var D1=typeof setTimeout=="function"?setTimeout:void 0,MT=typeof clearTimeout=="function"?clearTimeout:void 0,M1=typeof Promise=="function"?Promise:void 0,LT=typeof queueMicrotask=="function"?queueMicrotask:typeof M1<"u"?function(n){return M1.resolve(null).then(n).catch(OT)}:D1;function OT(n){setTimeout(function(){throw n})}function Ra(n){return n==="head"}function L1(n,r){var o=r,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),El(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Sc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Sc(o);for(var m=o.firstChild;m;){var _=m.nextSibling,k=m.nodeName;m[ws]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&Sc(n.ownerDocument.body);o=f}while(o);El(r)}function O1(n,r){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Ym(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ym(o),fr(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function PT(n,r,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[ws])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Yr(n.nextSibling),n===null)break}return null}function VT(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Yr(n.nextSibling),n===null))return null;return n}function P1(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Yr(n.nextSibling),n===null))return null;return n}function Qm(n){return n.data==="$?"||n.data==="$~"}function Xm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function UT(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Yr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Jm=null;function V1(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return Yr(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function U1(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function B1(n,r,o){switch(r=Dh(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Sc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);fr(n)}var Qr=new Map,z1=new Set;function Mh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Zi=xe.d;xe.d={f:BT,r:zT,D:FT,C:qT,L:HT,m:WT,X:GT,S:$T,M:KT};function BT(){var n=Zi.f(),r=kh();return n||r}function zT(n){var r=Qn(n);r!==null&&r.tag===5&&r.type==="form"?r0(r):Zi.r(n)}var _l=typeof document>"u"?null:document;function F1(n,r,o){var c=_l;if(c&&typeof r=="string"&&r){var f=dt(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),z1.has(f)||(z1.add(f),n={rel:n,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),$s(r,"link",n),yn(r),c.head.appendChild(r)))}}function FT(n){Zi.D(n),F1("dns-prefetch",n,null)}function qT(n,r){Zi.C(n,r),F1("preconnect",n,r)}function HT(n,r,o){Zi.L(n,r,o);var c=_l;if(c&&n&&r){var f='link[rel="preload"][as="'+dt(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+dt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+dt(o.imageSizes)+'"]')):f+='[href="'+dt(n)+'"]';var m=f;switch(r){case"style":m=wl(n);break;case"script":m=xl(n)}Qr.has(m)||(n=E({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Qr.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Cc(m))||r==="script"&&c.querySelector(jc(m))||(r=c.createElement("link"),$s(r,"link",n),yn(r),c.head.appendChild(r)))}}function WT(n,r){Zi.m(n,r);var o=_l;if(o&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+dt(c)+'"][href="'+dt(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=xl(n)}if(!Qr.has(m)&&(n=E({rel:"modulepreload",href:n},r),Qr.set(m,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(jc(m)))return}c=o.createElement("link"),$s(c,"link",n),yn(c),o.head.appendChild(c)}}}function $T(n,r,o){Zi.S(n,r,o);var c=_l;if(c&&n){var f=js(c).hoistableStyles,m=wl(n);r=r||"default";var _=f.get(m);if(!_){var k={loading:0,preload:null};if(_=c.querySelector(Cc(m)))k.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Qr.get(m))&&Zm(n,o);var U=_=c.createElement("link");yn(U),$s(U,"link",n),U._p=new Promise(function(Z,fe){U.onload=Z,U.onerror=fe}),U.addEventListener("load",function(){k.loading|=1}),U.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Lh(_,r,c)}_={type:"stylesheet",instance:_,count:1,state:k},f.set(m,_)}}}function GT(n,r){Zi.X(n,r);var o=_l;if(o&&n){var c=js(o).hoistableScripts,f=xl(n),m=c.get(f);m||(m=o.querySelector(jc(f)),m||(n=E({src:n,async:!0},r),(r=Qr.get(f))&&ep(n,r),m=o.createElement("script"),yn(m),$s(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function KT(n,r){Zi.M(n,r);var o=_l;if(o&&n){var c=js(o).hoistableScripts,f=xl(n),m=c.get(f);m||(m=o.querySelector(jc(f)),m||(n=E({src:n,async:!0,type:"module"},r),(r=Qr.get(f))&&ep(n,r),m=o.createElement("script"),yn(m),$s(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function q1(n,r,o,c){var f=(f=Ee.current)?Mh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=wl(o.href),o=js(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=wl(o.href);var m=js(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(Cc(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Qr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Qr.set(n,o),m||YT(f,n,o,_.state))),r&&c===null)throw Error(i(528,""));return _}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=xl(o),o=js(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function wl(n){return'href="'+dt(n)+'"'}function Cc(n){return'link[rel="stylesheet"]['+n+"]"}function H1(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function YT(n,r,o,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),$s(r,"link",o),yn(r),n.head.appendChild(r))}function xl(n){return'[src="'+dt(n)+'"]'}function jc(n){return"script[async]"+n}function W1(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+dt(o.href)+'"]');if(c)return r.instance=c,yn(c),c;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),yn(c),$s(c,"style",f),Lh(c,o.precedence,n),r.instance=c;case"stylesheet":f=wl(o.href);var m=n.querySelector(Cc(f));if(m)return r.state.loading|=4,r.instance=m,yn(m),m;c=H1(o),(f=Qr.get(f))&&Zm(c,f),m=(n.ownerDocument||n).createElement("link"),yn(m);var _=m;return _._p=new Promise(function(k,U){_.onload=k,_.onerror=U}),$s(m,"link",c),r.state.loading|=4,Lh(m,o.precedence,n),r.instance=m;case"script":return m=xl(o.src),(f=n.querySelector(jc(m)))?(r.instance=f,yn(f),f):(c=o,(f=Qr.get(m))&&(c=E({},o),ep(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),yn(f),$s(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Lh(c,o.precedence,n));return r.instance}function Lh(n,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,_=0;_<c.length;_++){var k=c[_];if(k.dataset.precedence===r)m=k;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function Zm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function ep(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Oh=null;function $1(n,r,o){if(Oh===null){var c=new Map,f=Oh=new Map;f.set(o,c)}else f=Oh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[ws]||m[cn]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(r)||"";_=n+_;var k=c.get(_);k?k.push(m):c.set(_,[m])}}return c}function G1(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function QT(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function K1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function XT(n,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=wl(c.href),m=r.querySelector(Cc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Ph.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=m,yn(m);return}m=r.ownerDocument||r,c=H1(c),(f=Qr.get(f))&&Zm(c,f),m=m.createElement("link"),yn(m);var _=m;_._p=new Promise(function(k,U){_.onload=k,_.onerror=U}),$s(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Ph.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var tp=0;function JT(n,r){return n.stylesheets&&n.count===0&&Uh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Uh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&tp===0&&(tp=62500*IT());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Uh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>tp?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Ph(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Vh=null;function Uh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Vh=new Map,r.forEach(ZT,n),Vh=null,Ph.call(n))}function ZT(n,r){if(!(r.state.loading&4)){var o=Vh.get(n);if(o)var c=o.get(null);else{o=new Map,Vh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),c=_)}c&&o.set(null,c)}f=r.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||c,m===c&&o.set(null,f),o.set(_,f),this.count++,c=Ph.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Nc={$$typeof:ee,Provider:null,Consumer:null,_currentValue:Pe,_currentValue2:Pe,_threadCount:0};function ek(n,r,o,c,f,m,_,k,U){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Y1(n,r,o,c,f,m,_,k,U,Z,fe,ve){return n=new ek(n,r,o,_,U,Z,fe,ve,k),r=1,m===!0&&(r|=24),m=kr(3,null,null,r),n.current=m,m.stateNode=n,r=Mf(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Vf(m),n}function Q1(n){return n?(n=Zo,n):Zo}function X1(n,r,o,c,f,m){f=Q1(f),c.context===null?c.context=f:c.pendingContext=f,c=_a(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=wa(n,c,r),o!==null&&(br(o,n,r),oc(o,n,r))}function J1(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function np(n,r){J1(n,r),(n=n.alternate)&&J1(n,r)}function Z1(n){if(n.tag===13||n.tag===31){var r=ho(n,67108864);r!==null&&br(r,n,67108864),np(n,67108864)}}function eb(n){if(n.tag===13||n.tag===31){var r=Ar();r=Zt(r);var o=ho(n,r);o!==null&&br(o,n,r),np(n,r)}}var Bh=!0;function tk(n,r,o,c){var f=te.T;te.T=null;var m=xe.p;try{xe.p=2,sp(n,r,o,c)}finally{xe.p=m,te.T=f}}function nk(n,r,o,c){var f=te.T;te.T=null;var m=xe.p;try{xe.p=8,sp(n,r,o,c)}finally{xe.p=m,te.T=f}}function sp(n,r,o,c){if(Bh){var f=rp(c);if(f===null)qm(n,r,c,zh,o),nb(n,c);else if(rk(f,n,r,o,c))c.stopPropagation();else if(nb(n,c),r&4&&-1<sk.indexOf(n)){for(;f!==null;){var m=Qn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Vn(m.pendingLanes);if(_!==0){var k=m;for(k.pendingLanes|=2,k.entangledLanes|=2;_;){var U=1<<31-Oe(_);k.entanglements[1]|=U,_&=~U}wi(m),(fn&6)===0&&(Eh=tt()+500,Ec(0))}}break;case 31:case 13:k=ho(m,2),k!==null&&br(k,m,2),kh(),np(m,2)}if(m=rp(c),m===null&&qm(n,r,c,zh,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else qm(n,r,c,null,o)}}function rp(n){return n=un(n),ip(n)}var zh=null;function ip(n){if(zh=null,n=Ps(n),n!==null){var r=u(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=h(r),n!==null)return n;n=null}else if(o===31){if(n=p(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return zh=n,null}function tb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case nn:return 2;case sn:return 8;case jn:case Ls:return 32;case Fn:return 268435456;default:return 32}default:return 32}}var ap=!1,Ia=null,Da=null,Ma=null,Ac=new Map,Rc=new Map,La=[],sk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nb(n,r){switch(n){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Da=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":Ac.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(r.pointerId)}}function Ic(n,r,o,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Qn(r),r!==null&&Z1(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function rk(n,r,o,c,f){switch(r){case"focusin":return Ia=Ic(Ia,n,r,o,c,f),!0;case"dragenter":return Da=Ic(Da,n,r,o,c,f),!0;case"mouseover":return Ma=Ic(Ma,n,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Ac.set(m,Ic(Ac.get(m)||null,n,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Rc.set(m,Ic(Rc.get(m)||null,n,r,o,c,f)),!0}return!1}function sb(n){var r=Ps(n.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=h(o),r!==null){n.blockedOn=r,_s(n.priority,function(){eb(o)});return}}else if(r===31){if(r=p(o),r!==null){n.blockedOn=r,_s(n.priority,function(){eb(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=rp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);vn=c,o.target.dispatchEvent(c),vn=null}else return r=Qn(o),r!==null&&Z1(r),n.blockedOn=o,!1;r.shift()}return!0}function rb(n,r,o){Fh(n)&&o.delete(r)}function ik(){ap=!1,Ia!==null&&Fh(Ia)&&(Ia=null),Da!==null&&Fh(Da)&&(Da=null),Ma!==null&&Fh(Ma)&&(Ma=null),Ac.forEach(rb),Rc.forEach(rb)}function qh(n,r){n.blockedOn===r&&(n.blockedOn=null,ap||(ap=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,ik)))}var Hh=null;function ib(n){Hh!==n&&(Hh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Hh===n&&(Hh=null);for(var r=0;r<n.length;r+=3){var o=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(ip(c||o)===null)continue;break}var m=Qn(o);m!==null&&(n.splice(r,3),r-=3,rm(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function El(n){function r(U){return qh(U,n)}Ia!==null&&qh(Ia,n),Da!==null&&qh(Da,n),Ma!==null&&qh(Ma,n),Ac.forEach(r),Rc.forEach(r);for(var o=0;o<La.length;o++){var c=La[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<La.length&&(o=La[0],o.blockedOn===null);)sb(o),o.blockedOn===null&&La.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],_=f[ts]||null;if(typeof m=="function")_||ib(o);else if(_){var k=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[ts]||null)k=_.formAction;else if(ip(f)!==null)continue}else k=_.action;typeof k=="function"?o[c+1]=k:(o.splice(c,3),c-=3),ib(o)}}}function ab(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function op(n){this._internalRoot=n}Wh.prototype.render=op.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=Ar();X1(o,c,n,r,null,null)},Wh.prototype.unmount=op.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;X1(n.current,2,null,n,null,null),kh(),r[Cs]=null}};function Wh(n){this._internalRoot=n}Wh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Os();n={blockedOn:null,target:n,priority:r};for(var o=0;o<La.length&&r!==0&&r<La[o].priority;o++);La.splice(o,0,n),o===0&&sb(n)}};var ob=e.version;if(ob!=="19.2.4")throw Error(i(527,ob,"19.2.4"));xe.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(r),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var ak={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$h.isDisabled&&$h.supportsFiber)try{Ze=$h.inject(ak),et=$h}catch{}}return Mc.createRoot=function(n,r){if(!l(n))throw Error(i(299));var o=!1,c="",f=m0,m=p0,_=g0;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=Y1(n,1,!1,null,null,o,c,null,f,m,_,ab),n[Cs]=r.current,Fm(n),new op(r)},Mc.hydrateRoot=function(n,r,o){if(!l(n))throw Error(i(299));var c=!1,f="",m=m0,_=p0,k=g0,U=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(k=o.onRecoverableError),o.formState!==void 0&&(U=o.formState)),r=Y1(n,1,!0,r,o??null,c,f,U,m,_,k,ab),r.context=Q1(null),o=r.current,c=Ar(),c=Zt(c),f=_a(c),f.callback=null,wa(o,f,c),o=c,r.current.lanes=o,Fe(r,o),wi(r),n[Cs]=r.current,Fm(n),new Wh(r)},Mc.version="19.2.4",Mc}var yb;function gk(){if(yb)return up.exports;yb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),up.exports=pk(),up.exports}var yk=gk();const vk="modulepreload",bk=function(s){return"/login/"+s},vb={},ur=function(e,t,i){let l=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=g(t.map(y=>{if(y=bk(y),y in vb)return;vb[y]=!0;const b=y.endsWith(".css"),E=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${E}`))return;const T=document.createElement("link");if(T.rel=b?"stylesheet":vk,b||(T.as="script"),T.crossOrigin="",T.href=y,p&&T.setAttribute("nonce",p),document.head.appendChild(T),b)return new Promise((O,H)=>{T.addEventListener("load",O),T.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var bb="popstate";function _k(s={}){function e(i,l){let{pathname:u,search:h,hash:p}=i.location;return Hp("",{pathname:u,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(i,l){return typeof l=="string"?l:eu(l)}return xk(e,t,null,s)}function Yn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ei(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wk(){return Math.random().toString(36).substring(2,10)}function _b(s,e){return{usr:s.state,key:s.key,idx:e}}function Hp(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Fl(e):e,state:t,key:e&&e.key||i||wk()}}function eu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Fl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function xk(s,e,t,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,h=l.history,p="POP",g=null,y=b();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function b(){return(h.state||{idx:null}).idx}function E(){p="POP";let z=b(),ne=z==null?null:z-y;y=z,g&&g({action:p,location:q.location,delta:ne})}function T(z,ne){p="PUSH";let W=Hp(q.location,z,ne);y=b()+1;let ee=_b(W,y),ye=q.createHref(W);try{h.pushState(ee,"",ye)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;l.location.assign(ye)}u&&g&&g({action:p,location:q.location,delta:1})}function O(z,ne){p="REPLACE";let W=Hp(q.location,z,ne);y=b();let ee=_b(W,y),ye=q.createHref(W);h.replaceState(ee,"",ye),u&&g&&g({action:p,location:q.location,delta:0})}function H(z){return Ek(z)}let q={get action(){return p},get location(){return s(l,h)},listen(z){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(bb,E),g=z,()=>{l.removeEventListener(bb,E),g=null}},createHref(z){return e(l,z)},createURL:H,encodeLocation(z){let ne=H(z);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:T,replace:O,go(z){return h.go(z)}};return q}function Ek(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Yn(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:eu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function w_(s,e,t="/"){return Tk(s,e,t,!1)}function Tk(s,e,t,i){let l=typeof e=="string"?Fl(e):e,u=ia(l.pathname||"/",t);if(u==null)return null;let h=x_(s);kk(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=Ok(u);p=Mk(h[g],y,i)}return p}function x_(s,e=[],t=[],i="",l=!1){let u=(h,p,g=l,y)=>{let b={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;Yn(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let E=na([i,b.relativePath]),T=t.concat(b);h.children&&h.children.length>0&&(Yn(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),x_(h.children,e,T,E,g)),!(h.path==null&&!h.index)&&e.push({path:E,score:Ik(E,h.index),routesMeta:T})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of E_(h.path))u(h,p,!0,g)}),e}function E_(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,l=t.endsWith("?"),u=t.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let h=E_(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function kk(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Dk(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Sk=/^:[\w-]+$/,Ck=3,jk=2,Nk=1,Ak=10,Rk=-2,wb=s=>s==="*";function Ik(s,e){let t=s.split("/"),i=t.length;return t.some(wb)&&(i+=Rk),e&&(i+=jk),t.filter(l=>!wb(l)).reduce((l,u)=>l+(Sk.test(u)?Ck:u===""?Nk:Ak),i)}function Dk(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function Mk(s,e,t=!1){let{routesMeta:i}=s,l={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,b=u==="/"?e:e.slice(u.length)||"/",E=wd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),T=g.route;if(!E&&y&&t&&!i[i.length-1].route.index&&(E=wd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!E)return null;Object.assign(l,E.params),h.push({params:l,pathname:na([u,E.pathname]),pathnameBase:Bk(na([u,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(u=na([u,E.pathnameBase]))}return h}function wd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=Lk(s.path,s.caseSensitive,s.end),l=e.match(t);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:E},T)=>{if(b==="*"){let H=p[T]||"";h=u.slice(0,u.length-H.length).replace(/(.)\/+$/,"$1")}const O=p[T];return E&&!O?y[b]=void 0:y[b]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:s}}function Lk(s,e=!1,t=!0){ei(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function Ok(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ei(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ia(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var Pk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Vk(s,e="/"){let{pathname:t,search:i="",hash:l=""}=typeof s=="string"?Fl(s):s,u;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?u=xb(t.substring(1),"/"):u=xb(t,e)):u=e,{pathname:u,search:zk(i),hash:Fk(l)}}function xb(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function mp(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Uk(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Tg(s){let e=Uk(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function kg(s,e,t,i=!1){let l;typeof s=="string"?l=Fl(s):(l={...s},Yn(!l.pathname||!l.pathname.includes("?"),mp("?","pathname","search",l)),Yn(!l.pathname||!l.pathname.includes("#"),mp("#","pathname","hash",l)),Yn(!l.search||!l.search.includes("#"),mp("#","search","hash",l)));let u=s===""||l.pathname==="",h=u?"/":l.pathname,p;if(h==null)p=t;else{let E=e.length-1;if(!i&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),E-=1;l.pathname=T.join("/")}p=E>=0?e[E]:"/"}let g=Vk(l,p),y=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var na=s=>s.join("/").replace(/\/\/+/g,"/"),Bk=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),zk=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Fk=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,qk=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Hk(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Wk(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var T_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function k_(s,e){let t=s;if(typeof t!="string"||!Pk.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,l=!1;if(T_)try{let u=new URL(window.location.href),h=t.startsWith("//")?new URL(u.protocol+t):new URL(t),p=ia(h.pathname,e);h.origin===u.origin&&p!=null?t=p+h.search+h.hash:l=!0}catch{ei(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var S_=["POST","PUT","PATCH","DELETE"];new Set(S_);var $k=["GET",...S_];new Set($k);var ql=w.createContext(null);ql.displayName="DataRouter";var Fd=w.createContext(null);Fd.displayName="DataRouterState";var Gk=w.createContext(!1),C_=w.createContext({isTransitioning:!1});C_.displayName="ViewTransition";var Kk=w.createContext(new Map);Kk.displayName="Fetchers";var Yk=w.createContext(null);Yk.displayName="Await";var Mr=w.createContext(null);Mr.displayName="Navigation";var pu=w.createContext(null);pu.displayName="Location";var fi=w.createContext({outlet:null,matches:[],isDataRoute:!1});fi.displayName="Route";var Sg=w.createContext(null);Sg.displayName="RouteError";var j_="REACT_ROUTER_ERROR",Qk="REDIRECT",Xk="ROUTE_ERROR_RESPONSE";function Jk(s){if(s.startsWith(`${j_}:${Qk}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Zk(s){if(s.startsWith(`${j_}:${Xk}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new qk(e.status,e.statusText,e.data)}catch{}}function eS(s,{relative:e}={}){Yn(Hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=w.useContext(Mr),{hash:l,pathname:u,search:h}=gu(s,{relative:e}),p=u;return t!=="/"&&(p=u==="/"?t:na([t,u])),i.createHref({pathname:p,search:h,hash:l})}function Hl(){return w.useContext(pu)!=null}function Di(){return Yn(Hl(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(pu).location}var N_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function A_(s){w.useContext(Mr).static||w.useLayoutEffect(s)}function Lr(){let{isDataRoute:s}=w.useContext(fi);return s?mS():tS()}function tS(){Yn(Hl(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(ql),{basename:e,navigator:t}=w.useContext(Mr),{matches:i}=w.useContext(fi),{pathname:l}=Di(),u=JSON.stringify(Tg(i)),h=w.useRef(!1);return A_(()=>{h.current=!0}),w.useCallback((g,y={})=>{if(ei(h.current,N_),!h.current)return;if(typeof g=="number"){t.go(g);return}let b=kg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:na([e,b.pathname])),(y.replace?t.replace:t.push)(b,y.state,y)},[e,t,u,l,s])}w.createContext(null);function nS(){let{matches:s}=w.useContext(fi),e=s[s.length-1];return e?e.params:{}}function gu(s,{relative:e}={}){let{matches:t}=w.useContext(fi),{pathname:i}=Di(),l=JSON.stringify(Tg(t));return w.useMemo(()=>kg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function sS(s,e){return R_(s,e)}function R_(s,e,t,i,l){Yn(Hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(Mr),{matches:h}=w.useContext(fi),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",E=p&&p.route;{let W=E&&E.path||"";D_(y,!E||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let T=Di(),O;if(e){let W=typeof e=="string"?Fl(e):e;Yn(b==="/"||W.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${W.pathname}" was given in the \`location\` prop.`),O=W}else O=T;let H=O.pathname||"/",q=H;if(b!=="/"){let W=b.replace(/^\//,"").split("/");q="/"+H.replace(/^\//,"").split("/").slice(W.length).join("/")}let z=w_(s,{pathname:q});ei(E||z!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),ei(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ne=lS(z&&z.map(W=>Object.assign({},W,{params:Object.assign({},g,W.params),pathname:na([b,u.encodeLocation?u.encodeLocation(W.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?b:na([b,u.encodeLocation?u.encodeLocation(W.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:W.pathnameBase])})),h,t,i,l);return e&&ne?w.createElement(pu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},ne):ne}function rS(){let s=fS(),e=Hk(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:l},t):null,h)}var iS=w.createElement(rS,null),I_=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=Zk(s.digest);t&&(s=t)}let e=s!==void 0?w.createElement(fi.Provider,{value:this.props.routeContext},w.createElement(Sg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?w.createElement(aS,{error:s},e):e}};I_.contextType=Gk;var pp=new WeakMap;function aS({children:s,error:e}){let{basename:t}=w.useContext(Mr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=Jk(e.digest);if(i){let l=pp.get(e);if(l)throw l;let u=k_(i.location,t);if(T_&&!pp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw pp.set(e,h),h}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function oS({routeContext:s,match:e,children:t}){let i=w.useContext(ql);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(fi.Provider,{value:s},t)}function lS(s,e=[],t=null,i=null,l=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,h=t?.errors;if(h!=null){let b=u.findIndex(E=>E.route.id&&h?.[E.route.id]!==void 0);Yn(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(t)for(let b=0;b<u.length;b++){let E=u[b];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=b),E.route.id){let{loaderData:T,errors:O}=t,H=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!O||O[E.route.id]===void 0);if(E.route.lazy||H){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=t&&i?(b,E)=>{i(b,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:Wk(t.matches),errorInfo:E})}:void 0;return u.reduceRight((b,E,T)=>{let O,H=!1,q=null,z=null;t&&(O=h&&E.route.id?h[E.route.id]:void 0,q=E.route.errorElement||iS,p&&(g<0&&T===0?(D_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,z=null):g===T&&(H=!0,z=E.route.hydrateFallbackElement||null)));let ne=e.concat(u.slice(0,T+1)),W=()=>{let ee;return O?ee=q:H?ee=z:E.route.Component?ee=w.createElement(E.route.Component,null):E.route.element?ee=E.route.element:ee=b,w.createElement(oS,{match:E,routeContext:{outlet:b,matches:ne,isDataRoute:t!=null},children:ee})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?w.createElement(I_,{location:t.location,revalidation:t.revalidation,component:q,error:O,children:W(),routeContext:{outlet:null,matches:ne,isDataRoute:!0},onError:y}):W()},null)}function Cg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cS(s){let e=w.useContext(ql);return Yn(e,Cg(s)),e}function uS(s){let e=w.useContext(Fd);return Yn(e,Cg(s)),e}function hS(s){let e=w.useContext(fi);return Yn(e,Cg(s)),e}function jg(s){let e=hS(s),t=e.matches[e.matches.length-1];return Yn(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function dS(){return jg("useRouteId")}function fS(){let s=w.useContext(Sg),e=uS("useRouteError"),t=jg("useRouteError");return s!==void 0?s:e.errors?.[t]}function mS(){let{router:s}=cS("useNavigate"),e=jg("useNavigate"),t=w.useRef(!1);return A_(()=>{t.current=!0}),w.useCallback(async(l,u={})=>{ei(t.current,N_),t.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var Eb={};function D_(s,e,t){!e&&!Eb[s]&&(Eb[s]=!0,ei(!1,t))}w.memo(pS);function pS({routes:s,future:e,state:t,onError:i}){return R_(s,void 0,t,i,e)}function M_({to:s,replace:e,state:t,relative:i}){Yn(Hl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=w.useContext(Mr);ei(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=w.useContext(fi),{pathname:h}=Di(),p=Lr(),g=kg(s,Tg(u),h,i==="path"),y=JSON.stringify(g);return w.useEffect(()=>{p(JSON.parse(y),{replace:e,state:t,relative:i})},[p,y,i,e,t]),null}function Kn(s){Yn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gS({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){Yn(!Hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[p,l,u,h]);typeof t=="string"&&(t=Fl(t));let{pathname:y="/",search:b="",hash:E="",state:T=null,key:O="default"}=t,H=w.useMemo(()=>{let q=ia(y,p);return q==null?null:{location:{pathname:q,search:b,hash:E,state:T,key:O},navigationType:i}},[p,y,b,E,T,O,i]);return ei(H!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${E}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:w.createElement(Mr.Provider,{value:g},w.createElement(pu.Provider,{children:e,value:H}))}function yS({children:s,location:e}){return sS(Wp(s),e)}function Wp(s,e=[]){let t=[];return w.Children.forEach(s,(i,l)=>{if(!w.isValidElement(i))return;let u=[...e,l];if(i.type===w.Fragment){t.push.apply(t,Wp(i.props.children,u));return}Yn(i.type===Kn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Yn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Wp(i.props.children,u)),t.push(h)}),t}var ld="get",cd="application/x-www-form-urlencoded";function qd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function vS(s){return qd(s)&&s.tagName.toLowerCase()==="button"}function bS(s){return qd(s)&&s.tagName.toLowerCase()==="form"}function _S(s){return qd(s)&&s.tagName.toLowerCase()==="input"}function wS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function xS(s,e){return s.button===0&&(!e||e==="_self")&&!wS(s)}function $p(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let i=s[t];return e.concat(Array.isArray(i)?i.map(l=>[t,l]):[[t,i]])},[]))}function ES(s,e){let t=$p(s);return e&&e.forEach((i,l)=>{t.has(l)||e.getAll(l).forEach(u=>{t.append(l,u)})}),t}var Gh=null;function TS(){if(Gh===null)try{new FormData(document.createElement("form"),0),Gh=!1}catch{Gh=!0}return Gh}var kS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gp(s){return s!=null&&!kS.has(s)?(ei(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cd}"`),null):s}function SS(s,e){let t,i,l,u,h;if(bS(s)){let p=s.getAttribute("action");i=p?ia(p,e):null,t=s.getAttribute("method")||ld,l=gp(s.getAttribute("enctype"))||cd,u=new FormData(s)}else if(vS(s)||_S(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?ia(g,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||ld,l=gp(s.getAttribute("formenctype"))||gp(p.getAttribute("enctype"))||cd,u=new FormData(p,s),!TS()){let{name:y,type:b,value:E}=s;if(b==="image"){let T=y?`${y}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else y&&u.append(y,E)}}else{if(qd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ld,i=null,l=cd,h=s}return u&&l==="text/plain"&&(h=u,u=void 0),{action:i,method:t.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ng(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function CS(s,e,t,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&ia(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function jS(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function AS(s,e,t){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await jS(u,t);return h.links?h.links():[]}return[]}));return MS(i.flat(1).filter(NS).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Tb(s,e,t,i,l,u){let h=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,p=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function RS(s,e,{includeHydrateFallback:t}={}){return IS(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function IS(s){return[...new Set(s)]}function DS(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function MS(s,e){let t=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(DS(l));return t.has(u)||(t.add(u),i.push({key:u,link:l})),i},[])}function L_(){let s=w.useContext(ql);return Ng(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function LS(){let s=w.useContext(Fd);return Ng(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Ag=w.createContext(void 0);Ag.displayName="FrameworkContext";function O_(){let s=w.useContext(Ag);return Ng(s,"You must render this element inside a <HydratedRouter> element"),s}function OS(s,e){let t=w.useContext(Ag),[i,l]=w.useState(!1),[u,h]=w.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:E}=e,T=w.useRef(null);w.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let q=ne=>{ne.forEach(W=>{h(W.isIntersecting)})},z=new IntersectionObserver(q,{threshold:.5});return T.current&&z.observe(T.current),()=>{z.disconnect()}}},[s]),w.useEffect(()=>{if(i){let q=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(q)}}},[i]);let O=()=>{l(!0)},H=()=>{l(!1),h(!1)};return t?s!=="intent"?[u,T,{}]:[u,T,{onFocus:Lc(p,O),onBlur:Lc(g,H),onMouseEnter:Lc(y,O),onMouseLeave:Lc(b,H),onTouchStart:Lc(E,O)}]:[!1,T,{}]}function Lc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function PS({page:s,...e}){let{router:t}=L_(),i=w.useMemo(()=>w_(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?w.createElement(US,{page:s,matches:i,...e}):null}function VS(s){let{manifest:e,routeModules:t}=O_(),[i,l]=w.useState([]);return w.useEffect(()=>{let u=!1;return AS(s,e,t).then(h=>{u||l(h)}),()=>{u=!0}},[s,e,t]),i}function US({page:s,matches:e,...t}){let i=Di(),{future:l,manifest:u,routeModules:h}=O_(),{basename:p}=L_(),{loaderData:g,matches:y}=LS(),b=w.useMemo(()=>Tb(s,e,y,u,i,"data"),[s,e,y,u,i]),E=w.useMemo(()=>Tb(s,e,y,u,i,"assets"),[s,e,y,u,i]),T=w.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let q=new Set,z=!1;if(e.forEach(W=>{let ee=u.routes[W.route.id];!ee||!ee.hasLoader||(!b.some(ye=>ye.route.id===W.route.id)&&W.route.id in g&&h[W.route.id]?.shouldRevalidate||ee.hasClientLoader?z=!0:q.add(W.route.id))}),q.size===0)return[];let ne=CS(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return z&&q.size>0&&ne.searchParams.set("_routes",e.filter(W=>q.has(W.route.id)).map(W=>W.route.id).join(",")),[ne.pathname+ne.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,b,e,s,h]),O=w.useMemo(()=>RS(E,u),[E,u]),H=VS(E);return w.createElement(w.Fragment,null,T.map(q=>w.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...t})),O.map(q=>w.createElement("link",{key:q,rel:"modulepreload",href:q,...t})),H.map(({key:q,link:z})=>w.createElement("link",{key:q,nonce:t.nonce,...z,crossOrigin:z.crossOrigin??t.crossOrigin})))}function BS(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var zS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zS&&(window.__reactRouterVersion="7.13.0")}catch{}function FS({basename:s,children:e,unstable_useTransitions:t,window:i}){let l=w.useRef();l.current==null&&(l.current=_k({window:i,v5Compat:!0}));let u=l.current,[h,p]=w.useState({action:u.action,location:u.location}),g=w.useCallback(y=>{t===!1?p(y):w.startTransition(()=>p(y))},[t]);return w.useLayoutEffect(()=>u.listen(g),[u,g]),w.createElement(gS,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:t})}var P_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V_=w.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:l,reloadDocument:u,replace:h,state:p,target:g,to:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T,...O},H){let{basename:q,unstable_useTransitions:z}=w.useContext(Mr),ne=typeof y=="string"&&P_.test(y),W=k_(y,q);y=W.to;let ee=eS(y,{relative:l}),[ye,Se,_e]=OS(i,O),R=$S(y,{replace:h,state:p,target:g,preventScrollReset:b,relative:l,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:z});function S(P){e&&e(P),P.defaultPrevented||R(P)}let I=w.createElement("a",{...O,..._e,href:W.absoluteURL||ee,onClick:W.isExternal||u?e:S,ref:BS(H,Se),target:g,"data-discover":!ne&&t==="render"?"true":void 0});return ye&&!ne?w.createElement(w.Fragment,null,I,w.createElement(PS,{page:ee})):I});V_.displayName="Link";var qS=w.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:l=!1,style:u,to:h,viewTransition:p,children:g,...y},b){let E=gu(h,{relative:y.relative}),T=Di(),O=w.useContext(Fd),{navigator:H,basename:q}=w.useContext(Mr),z=O!=null&&XS(E)&&p===!0,ne=H.encodeLocation?H.encodeLocation(E).pathname:E.pathname,W=T.pathname,ee=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;t||(W=W.toLowerCase(),ee=ee?ee.toLowerCase():null,ne=ne.toLowerCase()),ee&&q&&(ee=ia(ee,q)||ee);const ye=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let Se=W===ne||!l&&W.startsWith(ne)&&W.charAt(ye)==="/",_e=ee!=null&&(ee===ne||!l&&ee.startsWith(ne)&&ee.charAt(ne.length)==="/"),R={isActive:Se,isPending:_e,isTransitioning:z},S=Se?e:void 0,I;typeof i=="function"?I=i(R):I=[i,Se?"active":null,_e?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(R):u;return w.createElement(V_,{...y,"aria-current":S,className:I,ref:b,style:P,to:h,viewTransition:p},typeof g=="function"?g(R):g)});qS.displayName="NavLink";var HS=w.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:l,state:u,method:h=ld,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T,...O},H)=>{let{unstable_useTransitions:q}=w.useContext(Mr),z=YS(),ne=QS(p,{relative:y}),W=h.toLowerCase()==="get"?"get":"post",ee=typeof p=="string"&&P_.test(p),ye=Se=>{if(g&&g(Se),Se.defaultPrevented)return;Se.preventDefault();let _e=Se.nativeEvent.submitter,R=_e?.getAttribute("formmethod")||h,S=()=>z(_e||Se.currentTarget,{fetcherKey:e,method:R,navigate:t,replace:l,state:u,relative:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T});q&&t!==!1?w.startTransition(()=>S()):S()};return w.createElement("form",{ref:H,method:W,action:ne,onSubmit:i?g:ye,...O,"data-discover":!ee&&s==="render"?"true":void 0})});HS.displayName="Form";function WS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U_(s){let e=w.useContext(ql);return Yn(e,WS(s)),e}function $S(s,{target:e,replace:t,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Lr(),b=Di(),E=gu(s,{relative:u});return w.useCallback(T=>{if(xS(T,e)){T.preventDefault();let O=t!==void 0?t:eu(b)===eu(E),H=()=>y(s,{replace:O,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?w.startTransition(()=>H()):H()}},[b,y,E,t,i,e,s,l,u,h,p,g])}function S3(s){ei(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef($p(s)),t=w.useRef(!1),i=Di(),l=w.useMemo(()=>ES(i.search,t.current?null:e.current),[i.search]),u=Lr(),h=w.useCallback((p,g)=>{const y=$p(typeof p=="function"?p(new URLSearchParams(l)):p);t.current=!0,u("?"+y,g)},[u,l]);return[l,h]}var GS=0,KS=()=>`__${String(++GS)}__`;function YS(){let{router:s}=U_("useSubmit"),{basename:e}=w.useContext(Mr),t=dS(),i=s.fetch,l=s.navigate;return w.useCallback(async(u,h={})=>{let{action:p,method:g,encType:y,formData:b,body:E}=SS(u,e);if(h.navigate===!1){let T=h.fetcherKey||KS();await i(T,t,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:b,body:E,formMethod:h.method||g,formEncType:h.encType||y,flushSync:h.flushSync})}else await l(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:b,body:E,formMethod:h.method||g,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:t,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,l,e,t])}function QS(s,{relative:e}={}){let{basename:t}=w.useContext(Mr),i=w.useContext(fi);Yn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...gu(s||".",{relative:e})},h=Di();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(E=>E).forEach(E=>p.append("index",E));let b=p.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:na([t,u.pathname])),eu(u)}function XS(s,{relative:e}={}){let t=w.useContext(C_);Yn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=U_("useViewTransitionState"),l=gu(s,{relative:e});if(!t.isTransitioning)return!1;let u=ia(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=ia(t.nextLocation.pathname,i)||t.nextLocation.pathname;return wd(l.pathname,h)!=null||wd(l.pathname,u)!=null}const JS=()=>{};var kb={};const B_=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},ZS=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const l=s[t++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[t++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[t++],h=s[t++],p=s[t++],g=((l&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],h=s[t++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},z_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,p=h?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,b=u>>2,E=(u&3)<<4|p>>4;let T=(p&15)<<2|y>>6,O=y&63;g||(O=64,h||(T=64)),i.push(t[b],t[E],t[T],t[O])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(B_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):ZS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=t[s.charAt(l++)],p=l<s.length?t[s.charAt(l)]:0;++l;const y=l<s.length?t[s.charAt(l)]:64;++l;const E=l<s.length?t[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||E==null)throw new eC;const T=u<<2|p>>4;if(i.push(T),y!==64){const O=p<<4&240|y>>2;if(i.push(O),E!==64){const H=y<<6&192|E;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class eC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tC=function(s){const e=B_(s);return z_.encodeByteArray(e,!0)},xd=function(s){return tC(s).replace(/\./g,"")},F_=function(s){try{return z_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const sC=()=>nC().__FIREBASE_DEFAULTS__,rC=()=>{if(typeof process>"u"||typeof kb>"u")return;const s=kb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},iC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&F_(s[1]);return e&&JSON.parse(e)},Hd=()=>{try{return JS()||sC()||rC()||iC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},q_=s=>Hd()?.emulatorHosts?.[s],H_=s=>{const e=q_(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},W_=()=>Hd()?.config,$_=s=>Hd()?.[`_${s}`];class aC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function so(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Rg(s){return(await fetch(s,{credentials:"include"})).ok}function G_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[xd(JSON.stringify(t)),xd(JSON.stringify(h)),""].join(".")}const Gc={};function oC(){const s={prod:[],emulator:[]};for(const e of Object.keys(Gc))Gc[e]?s.emulator.push(e):s.prod.push(e);return s}function lC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Sb=!1;function Ig(s,e){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||Gc[s]===e||Gc[s]||Sb)return;Gc[s]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",u=oC().prod.length>0;function h(){const T=document.getElementById(i);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,O){T.setAttribute("width","24"),T.setAttribute("id",O),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Sb=!0,h()},T}function b(T,O){T.setAttribute("id",O),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=lC(i),O=t("text"),H=document.getElementById(O)||document.createElement("span"),q=t("learnmore"),z=document.getElementById(q)||document.createElement("a"),ne=t("preprendIcon"),W=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const ee=T.element;p(ee),b(z,q);const ye=y();g(W,ne),ee.append(W,H,z,ye),document.body.appendChild(ee)}u?(H.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function tr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tr())}function uC(){const s=Hd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dC(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function fC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mC(){const s=tr();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function pC(){return!uC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gC(){try{return typeof indexedDB=="object"}catch{return!1}}function yC(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(t){e(t)}})}const vC="FirebaseError";class Mi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=vC,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yu.prototype.create)}}class yu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?bC(u,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new Mi(l,p,i)}}function bC(s,e){return s.replace(_C,(t,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const _C=/\{\$([^}]+)}/g;function wC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Mo(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const l of t){if(!i.includes(l))return!1;const u=s[l],h=e[l];if(Cb(u)&&Cb(h)){if(!Mo(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!t.includes(l))return!1;return!0}function Cb(s){return s!==null&&typeof s=="object"}function vu(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function zc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Fc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function xC(s,e){const t=new EC(s,e);return t.subscribe.bind(t)}class EC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let l;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");TC(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:i},l.next===void 0&&(l.next=yp),l.error===void 0&&(l.error=yp),l.complete===void 0&&(l.complete=yp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TC(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function yp(){}function Mn(s){return s&&s._delegate?s._delegate:s}class Qa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Co="[DEFAULT]";class kC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new aC;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CC(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(l)}return l}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const l of i)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:SC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SC(s){return s===Co?void 0:s}function CC(s){return s.instantiationMode==="EAGER"}class jC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Yt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Yt||(Yt={}));const NC={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},AC=Yt.INFO,RC={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},IC=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=RC[e];if(l)console[l](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dg{constructor(e){this.name=e,this._logLevel=AC,this._logHandler=IC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}const DC=(s,e)=>e.some(t=>s instanceof t);let jb,Nb;function MC(){return jb||(jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LC(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K_=new WeakMap,Gp=new WeakMap,Y_=new WeakMap,vp=new WeakMap,Mg=new WeakMap;function OC(s){const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t($a(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&K_.set(t,s)}).catch(()=>{}),Mg.set(e,s),e}function PC(s){if(Gp.has(s))return;const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Gp.set(s,e)}let Kp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Gp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Y_.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $a(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function VC(s){Kp=s(Kp)}function UC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(bp(this),e,...t);return Y_.set(i,e.sort?e.sort():[e]),$a(i)}:LC().includes(s)?function(...e){return s.apply(bp(this),e),$a(K_.get(this))}:function(...e){return $a(s.apply(bp(this),e))}}function BC(s){return typeof s=="function"?UC(s):(s instanceof IDBTransaction&&PC(s),DC(s,MC())?new Proxy(s,Kp):s)}function $a(s){if(s instanceof IDBRequest)return OC(s);if(vp.has(s))return vp.get(s);const e=BC(s);return e!==s&&(vp.set(s,e),Mg.set(e,s)),e}const bp=s=>Mg.get(s);function zC(s,e,{blocked:t,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(s,e),p=$a(h);return i&&h.addEventListener("upgradeneeded",g=>{i($a(h.result),g.oldVersion,g.newVersion,$a(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const FC=["get","getKey","getAll","getAllKeys","count"],qC=["put","add","delete","clear"],_p=new Map;function Ab(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(_p.get(e))return _p.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,l=qC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(l||FC.includes(t)))return;const u=async function(h,...p){const g=this.transaction(h,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),l&&g.done]))[0]};return _p.set(e,u),u}VC(s=>({...s,get:(e,t,i)=>Ab(e,t)||s.get(e,t,i),has:(e,t)=>!!Ab(e,t)||s.has(e,t)}));class HC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function WC(s){return s.getComponent()?.type==="VERSION"}const Yp="@firebase/app",Rb="0.14.7";const aa=new Dg("@firebase/app"),$C="@firebase/app-compat",GC="@firebase/analytics-compat",KC="@firebase/analytics",YC="@firebase/app-check-compat",QC="@firebase/app-check",XC="@firebase/auth",JC="@firebase/auth-compat",ZC="@firebase/database",ej="@firebase/data-connect",tj="@firebase/database-compat",nj="@firebase/functions",sj="@firebase/functions-compat",rj="@firebase/installations",ij="@firebase/installations-compat",aj="@firebase/messaging",oj="@firebase/messaging-compat",lj="@firebase/performance",cj="@firebase/performance-compat",uj="@firebase/remote-config",hj="@firebase/remote-config-compat",dj="@firebase/storage",fj="@firebase/storage-compat",mj="@firebase/firestore",pj="@firebase/ai",gj="@firebase/firestore-compat",yj="firebase",vj="12.8.0";const Qp="[DEFAULT]",bj={[Yp]:"fire-core",[$C]:"fire-core-compat",[KC]:"fire-analytics",[GC]:"fire-analytics-compat",[QC]:"fire-app-check",[YC]:"fire-app-check-compat",[XC]:"fire-auth",[JC]:"fire-auth-compat",[ZC]:"fire-rtdb",[ej]:"fire-data-connect",[tj]:"fire-rtdb-compat",[nj]:"fire-fn",[sj]:"fire-fn-compat",[rj]:"fire-iid",[ij]:"fire-iid-compat",[aj]:"fire-fcm",[oj]:"fire-fcm-compat",[lj]:"fire-perf",[cj]:"fire-perf-compat",[uj]:"fire-rc",[hj]:"fire-rc-compat",[dj]:"fire-gcs",[fj]:"fire-gcs-compat",[mj]:"fire-fst",[gj]:"fire-fst-compat",[pj]:"fire-vertex","fire-js":"fire-js",[yj]:"fire-js-all"};const Ed=new Map,_j=new Map,Xp=new Map;function Ib(s,e){try{s.container.addComponent(e)}catch(t){aa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Lo(s){const e=s.name;if(Xp.has(e))return aa.debug(`There were multiple attempts to register component ${e}.`),!1;Xp.set(e,s);for(const t of Ed.values())Ib(t,s);for(const t of _j.values())Ib(t,s);return!0}function Wd(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Rr(s){return s==null?!1:s.settings!==void 0}const wj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ga=new yu("app","Firebase",wj);class xj{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Qa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ga.create("app-deleted",{appName:this._name})}}const Fo=vj;function Lg(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:Qp,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Ga.create("bad-app-name",{appName:String(l)});if(t||(t=W_()),!t)throw Ga.create("no-options");const u=Ed.get(l);if(u){if(Mo(t,u.options)&&Mo(i,u.config))return u;throw Ga.create("duplicate-app",{appName:l})}const h=new jC(l);for(const g of Xp.values())h.addComponent(g);const p=new xj(t,i,h);return Ed.set(l,p),p}function Og(s=Qp){const e=Ed.get(s);if(!e&&s===Qp&&W_())return Lg();if(!e)throw Ga.create("no-app",{appName:s});return e}function ki(s,e,t){let i=bj[s]??s;t&&(i+=`-${t}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),aa.warn(h.join(" "));return}Lo(new Qa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Ej="firebase-heartbeat-database",Tj=1,tu="firebase-heartbeat-store";let wp=null;function Q_(){return wp||(wp=zC(Ej,Tj,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(tu)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ga.create("idb-open",{originalErrorMessage:s.message})})),wp}async function kj(s){try{const t=(await Q_()).transaction(tu),i=await t.objectStore(tu).get(X_(s));return await t.done,i}catch(e){if(e instanceof Mi)aa.warn(e.message);else{const t=Ga.create("idb-get",{originalErrorMessage:e?.message});aa.warn(t.message)}}}async function Db(s,e){try{const i=(await Q_()).transaction(tu,"readwrite");await i.objectStore(tu).put(e,X_(s)),await i.done}catch(t){if(t instanceof Mi)aa.warn(t.message);else{const i=Ga.create("idb-set",{originalErrorMessage:t?.message});aa.warn(i.message)}}}function X_(s){return`${s.name}!${s.options.appId}`}const Sj=1024,Cj=30;class jj{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Aj(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Mb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>Cj){const l=Rj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){aa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Mb(),{heartbeatsToSend:t,unsentEntries:i}=Nj(this._heartbeatsCache.heartbeats),l=xd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return aa.warn(e),""}}}function Mb(){return new Date().toISOString().substring(0,10)}function Nj(s,e=Sj){const t=[];let i=s.slice();for(const l of s){const u=t.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),Lb(t)>e){u.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),Lb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Aj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gC()?yC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Db(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Db(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Lb(s){return xd(JSON.stringify({version:2,heartbeats:s})).length}function Rj(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function Ij(s){Lo(new Qa("platform-logger",e=>new HC(e),"PRIVATE")),Lo(new Qa("heartbeat",e=>new jj(e),"PRIVATE")),ki(Yp,Rb,s),ki(Yp,Rb,"esm2020"),ki("fire-js","")}Ij("");function J_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dj=J_,Z_=new yu("auth","Firebase",J_());const Td=new Dg("@firebase/auth");function Mj(s,...e){Td.logLevel<=Yt.WARN&&Td.warn(`Auth (${Fo}): ${s}`,...e)}function ud(s,...e){Td.logLevel<=Yt.ERROR&&Td.error(`Auth (${Fo}): ${s}`,...e)}function hi(s,...e){throw Pg(s,...e)}function Si(s,...e){return Pg(s,...e)}function ew(s,e,t){const i={...Dj(),[e]:t};return new yu("auth","Firebase",i).create(e,{appName:s.name})}function sa(s){return ew(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pg(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return Z_.create(s,...e)}function gt(s,e,...t){if(!s)throw Pg(e,...t)}function ea(s){const e="INTERNAL ASSERTION FAILED: "+s;throw ud(e),new Error(e)}function oa(s,e){s||ea(e)}function Jp(){return typeof self<"u"&&self.location?.href||""}function Lj(){return Ob()==="http:"||Ob()==="https:"}function Ob(){return typeof self<"u"&&self.location?.protocol||null}function Oj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lj()||dC()||"connection"in navigator)?navigator.onLine:!0}function Pj(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,oa(t>e,"Short delay should be less than long delay!"),this.isMobile=cC()||fC()}get(){return Oj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vg(s,e){oa(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class tw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ea("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ea("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ea("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const Uj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Bj=new bu(3e4,6e4);function ha(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function da(s,e,t,i,l={}){return nw(s,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=vu({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return hC()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&so(s.emulatorConfig.host)&&(y.credentials="include"),tw.fetch()(await sw(s,s.config.apiHost,t,p),y)})}async function nw(s,e,t){s._canInitEmulator=!1;const i={...Vj,...e};try{const l=new Fj(s),u=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Kh(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kh(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Kh(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Kh(s,"user-disabled",h);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ew(s,b,y);hi(s,b)}}catch(l){if(l instanceof Mi)throw l;hi(s,"network-request-failed",{message:String(l)})}}async function _u(s,e,t,i,l={}){const u=await da(s,e,t,i,l);return"mfaPendingCredential"in u&&hi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function sw(s,e,t,i){const l=`${e}${t}?${i}`,u=s,h=u.config.emulator?Vg(s.config,l):`${s.config.apiScheme}://${l}`;return Uj.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function zj(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Si(this.auth,"network-request-failed")),Bj.get())})}}function Kh(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const l=Si(s,e,i);return l.customData._tokenResponse=t,l}function Pb(s){return s!==void 0&&s.enterprise!==void 0}class qj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Hj(s,e){return da(s,"GET","/v2/recaptchaConfig",ha(s,e))}async function Wj(s,e){return da(s,"POST","/v1/accounts:delete",e)}async function kd(s,e){return da(s,"POST","/v1/accounts:lookup",e)}function Kc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $j(s,e=!1){const t=Mn(s),i=await t.getIdToken(e),l=Ug(i);gt(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:Kc(xp(l.auth_time)),issuedAtTime:Kc(xp(l.iat)),expirationTime:Kc(xp(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function xp(s){return Number(s)*1e3}function Ug(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return ud("JWT malformed, contained fewer than 3 sections"),null;try{const l=F_(t);return l?JSON.parse(l):(ud("Failed to decode base64 JWT payload"),null)}catch(l){return ud("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Vb(s){const e=Ug(s);return gt(e,"internal-error"),gt(typeof e.exp<"u","internal-error"),gt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nu(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Mi&&Gj(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function Gj({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class Kj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Zp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kc(this.lastLoginAt),this.creationTime=Kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sd(s){const e=s.auth,t=await s.getIdToken(),i=await nu(s,kd(e,{idToken:t}));gt(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?rw(l.providerUserInfo):[],h=Qj(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!h?.length,y=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Zp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function Yj(s){const e=Mn(s);await Sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qj(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function rw(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Xj(s,e){const t=await nw(s,{},async()=>{const i=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,h=await sw(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&so(s.emulatorConfig.host)&&(g.credentials="include"),tw.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Jj(s,e){return da(s,"POST","/v2/accounts:revokeToken",ha(s,e))}class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gt(e.idToken,"internal-error"),gt(typeof e.idToken<"u","internal-error"),gt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){gt(e.length!==0,"internal-error");const t=Vb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:l,expiresIn:u}=await Xj(e,t);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:l,expirationTime:u}=t,h=new Rl;return i&&(gt(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(gt(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(gt(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return ea("not implemented")}}function Pa(s,e){gt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new Kj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Zp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await nu(this,this.stsTokenManager.getToken(this.auth,e));return gt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $j(this,e)}reload(){return Yj(this)}_assign(e){this!==e&&(gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Sd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rr(this.auth.app))return Promise.reject(sa(this.auth));const e=await this.getIdToken();return await nu(this,Wj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,l=t.email??void 0,u=t.phoneNumber??void 0,h=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:O,providerData:H,stsTokenManager:q}=t;gt(E&&q,e,"internal-error");const z=Rl.fromJSON(this.name,q);gt(typeof E=="string",e,"internal-error"),Pa(i,e.name),Pa(l,e.name),gt(typeof T=="boolean",e,"internal-error"),gt(typeof O=="boolean",e,"internal-error"),Pa(u,e.name),Pa(h,e.name),Pa(p,e.name),Pa(g,e.name),Pa(y,e.name),Pa(b,e.name);const ne=new li({uid:E,auth:e,email:l,emailVerified:T,displayName:i,isAnonymous:O,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:z,createdAt:y,lastLoginAt:b});return H&&Array.isArray(H)&&(ne.providerData=H.map(W=>({...W}))),g&&(ne._redirectEventId=g),ne}static async _fromIdTokenResponse(e,t,i=!1){const l=new Rl;l.updateFromServerResponse(t);const u=new li({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Sd(u),u}static async _fromGetAccountInfoResponse(e,t,i){const l=t.users[0];gt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?rw(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,p=new Rl;p.updateFromIdToken(i);const g=new li({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Zp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const Ub=new Map;function ta(s){oa(s instanceof Function,"Expected a class definition");let e=Ub.get(s);return e?(oa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Ub.set(s,e),e)}class iw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}iw.type="NONE";const Bb=iw;function hd(s,e,t){return`firebase:${s}:${e}:${t}`}class Il{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=hd(this.userKey,l.apiKey,u),this.fullPersistenceKey=hd("persistence",l.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await kd(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Il(ta(Bb),e,i);const l=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||ta(Bb);const h=hd(i,e.config.apiKey,e.name);let p=null;for(const y of t)try{const b=await y._get(h);if(b){let E;if(typeof b=="string"){const T=await kd(e,{idToken:b}).catch(()=>{});if(!T)break;E=await li._fromGetAccountInfoResponse(e,T,b)}else E=li._fromJSON(e,b);y!==u&&(p=E),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Il(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new Il(u,e,i))}}function zb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hw(e))return"Blackberry";if(dw(e))return"Webos";if(ow(e))return"Safari";if((e.includes("chrome/")||lw(e))&&!e.includes("edge/"))return"Chrome";if(uw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function aw(s=tr()){return/firefox\//i.test(s)}function ow(s=tr()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lw(s=tr()){return/crios\//i.test(s)}function cw(s=tr()){return/iemobile/i.test(s)}function uw(s=tr()){return/android/i.test(s)}function hw(s=tr()){return/blackberry/i.test(s)}function dw(s=tr()){return/webos/i.test(s)}function Bg(s=tr()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Zj(s=tr()){return Bg(s)&&!!window.navigator?.standalone}function eN(){return mC()&&document.documentMode===10}function fw(s=tr()){return Bg(s)||uw(s)||dw(s)||hw(s)||/windows phone/i.test(s)||cw(s)}function mw(s,e=[]){let t;switch(s){case"Browser":t=zb(tr());break;case"Worker":t=`${zb(tr())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${i}`}class tN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function nN(s,e={}){return da(s,"GET","/v2/passwordPolicy",ha(s,e))}const sN=6;class rN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??sN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class iN{constructor(e,t,i,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fb(this),this.idTokenSubscription=new Fb(this),this.beforeStateQueue=new tN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ta(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Il.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kd(this,{idToken:e}),i=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Pj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rr(this.app))return Promise.reject(sa(this));const t=e?Mn(e):null;return t&&gt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rr(this.app)?Promise.reject(sa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rr(this.app)?Promise.reject(sa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ta(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nN(this),t=new rN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Jj(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ta(e)||this._popupRedirectResolver;gt(t,this,"argument-error"),this.redirectPersistenceManager=await Il.create(this,[ta(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,l){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,l);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Mj(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ro(s){return Mn(s)}class Fb{constructor(e){this.auth=e,this.observer=null,this.addObserver=xC(t=>this.observer=t)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aN(s){$d=s}function pw(s){return $d.loadJS(s)}function oN(){return $d.recaptchaEnterpriseScript}function lN(){return $d.gapiScript}function cN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class uN{constructor(){this.enterprise=new hN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class hN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const dN="recaptcha-enterprise",gw="NO_RECAPTCHA";class fN{constructor(e){this.type=dN,this.auth=ro(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{Hj(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new qj(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,h,p){const g=window.grecaptcha;Pb(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(gw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uN().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!t&&Pb(window.grecaptcha))l(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=oN();g.length!==0&&(g+=p),pw(g).then(()=>{l(p,u,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function qb(s,e,t,i=!1,l=!1){const u=new fN(s);let h;if(l)h=gw;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Cd(s,e,t,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await qb(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await qb(s,e,t,t==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function mN(s,e){const t=Wd(s,"auth");if(t.isInitialized()){const l=t.getImmediate(),u=t.getOptions();if(Mo(u,e??{}))return l;hi(l,"already-initialized")}return t.initialize({options:e})}function pN(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ta);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function gN(s,e,t){const i=ro(s);gt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=yw(e),{host:h,port:p}=yN(e),g=p===null?"":`:${p}`,y={url:`${u}//${h}${g}/`},b=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){gt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),gt(Mo(y,i.config.emulator)&&Mo(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,so(h)?(Rg(`${u}//${h}${g}`),Ig("Auth",!0)):vN()}function yw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function yN(s){const e=yw(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:Hb(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:Hb(h)}}}function Hb(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function vN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class zg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ea("not implemented")}_getIdTokenResponse(e){return ea("not implemented")}_linkToIdToken(e,t){return ea("not implemented")}_getReauthenticationResolver(e){return ea("not implemented")}}async function bN(s,e){return da(s,"POST","/v1/accounts:signUp",e)}async function _N(s,e){return _u(s,"POST","/v1/accounts:signInWithPassword",ha(s,e))}async function vw(s,e){return da(s,"POST","/v1/accounts:sendOobCode",ha(s,e))}async function wN(s,e){return vw(s,e)}async function xN(s,e){return vw(s,e)}async function EN(s,e){return _u(s,"POST","/v1/accounts:signInWithEmailLink",ha(s,e))}async function TN(s,e){return _u(s,"POST","/v1/accounts:signInWithEmailLink",ha(s,e))}class su extends zg{constructor(e,t,i,l=null){super("password",i),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new su(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new su(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,t,"signInWithPassword",_N);case"emailLink":return EN(e,{email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,i,"signUpPassword",bN);case"emailLink":return TN(e,{idToken:t,email:this._email,oobCode:this._password});default:hi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Dl(s,e){return _u(s,"POST","/v1/accounts:signInWithIdp",ha(s,e))}const kN="http://localhost";class Oo extends zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=t;if(!i||!l)return null;const h=new Oo(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Dl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Dl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Dl(e,t)}buildRequest(){const e={requestUri:kN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vu(t)}return e}}function SN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CN(s){const e=zc(Fc(s)).link,t=e?zc(Fc(e)).deep_link_id:null,i=zc(Fc(s)).deep_link_id;return(i?zc(Fc(i)).link:null)||i||t||e||s}class Fg{constructor(e){const t=zc(Fc(e)),i=t.apiKey??null,l=t.oobCode??null,u=SN(t.mode??null);gt(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=CN(e);try{return new Fg(t)}catch{return null}}}class Wl{constructor(){this.providerId=Wl.PROVIDER_ID}static credential(e,t){return su._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Fg.parseLink(t);return gt(i,"argument-error"),su._fromEmailAndCode(e,i.code,i.tenantId)}}Wl.PROVIDER_ID="password";Wl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wu extends bw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Va extends wu{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:Va.PROVIDER_ID,signInMethod:Va.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Va.credentialFromTaggedObject(e)}static credentialFromError(e){return Va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Va.credential(e.oauthAccessToken)}catch{return null}}}Va.FACEBOOK_SIGN_IN_METHOD="facebook.com";Va.PROVIDER_ID="facebook.com";class Ua extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oo._fromParams({providerId:Ua.PROVIDER_ID,signInMethod:Ua.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ua.credentialFromTaggedObject(e)}static credentialFromError(e){return Ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ua.credential(t,i)}catch{return null}}}Ua.GOOGLE_SIGN_IN_METHOD="google.com";Ua.PROVIDER_ID="google.com";class Ba extends wu{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ba.credential(e.oauthAccessToken)}catch{return null}}}Ba.GITHUB_SIGN_IN_METHOD="github.com";Ba.PROVIDER_ID="github.com";class za extends wu{constructor(){super("twitter.com")}static credential(e,t){return Oo._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return za.credentialFromTaggedObject(e)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return za.credential(t,i)}catch{return null}}}za.TWITTER_SIGN_IN_METHOD="twitter.com";za.PROVIDER_ID="twitter.com";async function jN(s,e){return _u(s,"POST","/v1/accounts:signUp",ha(s,e))}class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,l=!1){const u=await li._fromIdTokenResponse(e,i,l),h=Wb(i);return new Po({user:u,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const l=Wb(i);return new Po({user:e,providerId:l,_tokenResponse:i,operationType:t})}}function Wb(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class jd extends Mi{constructor(e,t,i,l){super(t.code,t.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,l){return new jd(e,t,i,l)}}function _w(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?jd._fromErrorAndOperation(s,u,e,i):u})}async function NN(s,e,t=!1){const i=await nu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Po._forOperation(s,"link",i)}async function AN(s,e,t=!1){const{auth:i}=s;if(Rr(i.app))return Promise.reject(sa(i));const l="reauthenticate";try{const u=await nu(s,_w(i,l,e,s),t);gt(u.idToken,i,"internal-error");const h=Ug(u.idToken);gt(h,i,"internal-error");const{sub:p}=h;return gt(s.uid===p,i,"user-mismatch"),Po._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&hi(i,"user-mismatch"),u}}async function ww(s,e,t=!1){if(Rr(s.app))return Promise.reject(sa(s));const i="signIn",l=await _w(s,i,e),u=await Po._fromIdTokenResponse(s,i,l);return t||await s._updateCurrentUser(u.user),u}async function RN(s,e){return ww(ro(s),e)}async function xw(s){const e=ro(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IN(s,e,t){const i=ro(s);await Cd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",xN)}async function DN(s,e,t){if(Rr(s.app))return Promise.reject(sa(s));const i=ro(s),h=await Cd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jN).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&xw(s),g}),p=await Po._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function MN(s,e,t){return Rr(s.app)?Promise.reject(sa(s)):RN(Mn(s),Wl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&xw(s),i})}async function C3(s,e){const t=Mn(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:u}=await wN(t.auth,l);u!==s.email&&await s.reload()}function $b(s,e){return Mn(s).setPersistence(e)}function LN(s,e,t,i){return Mn(s).onIdTokenChanged(e,t,i)}function ON(s,e,t){return Mn(s).beforeAuthStateChanged(e,t)}function PN(s,e,t,i){return Mn(s).onAuthStateChanged(e,t,i)}function VN(s){return Mn(s).signOut()}const Nd="__sak";class Ew{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nd,"1"),this.storage.removeItem(Nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const UN=1e3,BN=10;class Tw extends Ew{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),l=this.localCache[t];i!==l&&e(t,l,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);eN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,BN):l()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},UN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tw.type="LOCAL";const eg=Tw;class kw extends Ew{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kw.type="SESSION";const qg=kw;function zN(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Gd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const i=new Gd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:l,data:u}=t.data,h=this.handlersMap[l];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async y=>y(t.origin,u)),g=await zN(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gd.receivers=[];function Hg(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class FN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const y=Hg("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(T.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Ci(){return window}function qN(s){Ci().location.href=s}function Sw(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function HN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WN(){return navigator?.serviceWorker?.controller||null}function $N(){return Sw()?self:null}const Cw="firebaseLocalStorageDb",GN=1,Ad="firebaseLocalStorage",jw="fbase_key";class xu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kd(s,e){return s.transaction([Ad],e?"readwrite":"readonly").objectStore(Ad)}function KN(){const s=indexedDB.deleteDatabase(Cw);return new xu(s).toPromise()}function tg(){const s=indexedDB.open(Cw,GN);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Ad,{keyPath:jw})}catch(l){t(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Ad)?e(i):(i.close(),await KN(),e(await tg()))})})}async function Gb(s,e,t){const i=Kd(s,!0).put({[jw]:e,value:t});return new xu(i).toPromise()}async function YN(s,e){const t=Kd(s,!1).get(e),i=await new xu(t).toPromise();return i===void 0?null:i.value}function Kb(s,e){const t=Kd(s,!0).delete(e);return new xu(t).toPromise()}const QN=800,XN=3;class Nw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>XN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gd._getInstance($N()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await HN(),!this.activeServiceWorker)return;this.sender=new FN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tg();return await Gb(e,Nd,"1"),await Kb(e,Nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Gb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>YN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Kb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Kd(l,!1).getAll();return new xu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Nw.type="LOCAL";const JN=Nw;new bu(3e4,6e4);function ZN(s,e){return e?ta(e):(gt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Wg extends zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Dl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function eA(s){return ww(s.auth,new Wg(s),s.bypassAuthState)}function tA(s){const{auth:e,user:t}=s;return gt(t,e,"internal-error"),AN(t,new Wg(s),s.bypassAuthState)}async function nA(s){const{auth:e,user:t}=s;return gt(t,e,"internal-error"),NN(t,new Wg(s),s.bypassAuthState)}class Aw{constructor(e,t,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:l,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eA;case"linkViaPopup":case"linkViaRedirect":return nA;case"reauthViaPopup":case"reauthViaRedirect":return tA;default:hi(this.auth,"internal-error")}}resolve(e){oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sA=new bu(2e3,1e4);class Al extends Aw{constructor(e,t,i,l,u){super(e,t,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Al.currentPopupAction&&Al.currentPopupAction.cancel(),Al.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gt(e,this.auth,"internal-error"),e}async onExecution(){oa(this.filter.length===1,"Popup operations only handle one event");const e=Hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Al.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sA.get())};e()}}Al.currentPopupAction=null;const rA="pendingRedirect",dd=new Map;class iA extends Aw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=dd.get(this.auth._key());if(!e){try{const i=await aA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}dd.set(this.auth._key(),e)}return this.bypassAuthState||dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aA(s,e){const t=cA(e),i=lA(s);if(!await i._isAvailable())return!1;const l=await i._get(t)==="true";return await i._remove(t),l}function oA(s,e){dd.set(s._key(),e)}function lA(s){return ta(s._redirectPersistence)}function cA(s){return hd(rA,s.config.apiKey,s.name)}async function uA(s,e,t=!1){if(Rr(s.app))return Promise.reject(sa(s));const i=ro(s),l=ZN(i,e),h=await new iA(i,l,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const hA=600*1e3;class dA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Rw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Si(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yb(e))}saveEventToCache(e){this.cachedEventUids.add(Yb(e)),this.lastProcessedEventTime=Date.now()}}function Yb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Rw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function fA(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rw(s);default:return!1}}async function mA(s,e={}){return da(s,"GET","/v1/projects",e)}const pA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gA=/^https?/;async function yA(s){if(s.config.emulator)return;const{authorizedDomains:e}=await mA(s);for(const t of e)try{if(vA(t))return}catch{}hi(s,"unauthorized-domain")}function vA(s){const e=Jp(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!gA.test(t))return!1;if(pA.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const bA=new bu(3e4,6e4);function Qb(){const s=Ci().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function _A(s){return new Promise((e,t)=>{function i(){Qb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qb(),t(Si(s,"network-request-failed"))},timeout:bA.get()})}if(Ci().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ci().gapi?.load)i();else{const l=cN("iframefcb");return Ci()[l]=()=>{gapi.load?i():t(Si(s,"network-request-failed"))},pw(`${lN()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw fd=null,e})}let fd=null;function wA(s){return fd=fd||_A(s),fd}const xA=new bu(5e3,15e3),EA="__/auth/iframe",TA="emulator/auth/iframe",kA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CA(s){const e=s.config;gt(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Vg(e,TA):`https://${s.config.authDomain}/${EA}`,i={apiKey:e.apiKey,appName:s.name,v:Fo},l=SA.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${vu(i).slice(1)}`}async function jA(s){const e=await wA(s),t=Ci().gapi;return gt(t,s,"internal-error"),e.open({where:document.body,url:CA(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kA,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=Si(s,"network-request-failed"),p=Ci().setTimeout(()=>{u(h)},xA.get());function g(){Ci().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(h)})}))}const NA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AA=500,RA=600,IA="_blank",DA="http://localhost";class Xb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MA(s,e,t,i=AA,l=RA){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...NA,width:i.toString(),height:l.toString(),top:u,left:h},y=tr().toLowerCase();t&&(p=lw(y)?IA:t),aw(y)&&(e=e||DA,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[O,H])=>`${T}${O}=${H},`,"");if(Zj(y)&&p!=="_self")return LA(e||"",p),new Xb(null);const E=window.open(e||"",p,b);gt(E,s,"popup-blocked");try{E.focus()}catch{}return new Xb(E)}function LA(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const OA="__/auth/handler",PA="emulator/auth/handler",VA=encodeURIComponent("fac");async function Jb(s,e,t,i,l,u){gt(s.config.authDomain,s,"auth-domain-config-required"),gt(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Fo,eventId:l};if(e instanceof bw){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",wC(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))h[b]=E}if(e instanceof wu){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(h.scopes=b.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),y=g?`#${VA}=${encodeURIComponent(g)}`:"";return`${UA(s)}?${vu(p).slice(1)}${y}`}function UA({config:s}){return s.emulator?Vg(s,PA):`https://${s.authDomain}/${OA}`}const Ep="webStorageSupport";class BA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qg,this._completeRedirectFn=uA,this._overrideRedirectResult=oA}async _openPopup(e,t,i,l){oa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Jb(e,t,i,Jp(),l);return MA(e,u,Hg())}async _openRedirect(e,t,i,l){await this._originValidation(e);const u=await Jb(e,t,i,Jp(),l);return qN(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:u}=this.eventManagers[t];return l?Promise.resolve(l):(oa(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await jA(e),i=new dA(e);return t.register("authEvent",l=>(gt(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ep,{type:Ep},l=>{const u=l?.[0]?.[Ep];u!==void 0&&t(!!u),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=yA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fw()||ow()||Bg()}}const zA=BA;var Zb="@firebase/auth",e2="1.12.0";class FA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qA(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HA(s){Lo(new Qa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;gt(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mw(s)},y=new iN(i,l,u,g);return pN(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Lo(new Qa("auth-internal",e=>{const t=ro(e.getProvider("auth").getImmediate());return(i=>new FA(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(Zb,e2,qA(s)),ki(Zb,e2,"esm2020")}const WA=300,$A=$_("authIdTokenMaxAge")||WA;let t2=null;const GA=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>$A)return;const l=t?.token;t2!==l&&(t2=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Iw(s=Og()){const e=Wd(s,"auth");if(e.isInitialized())return e.getImmediate();const t=mN(s,{popupRedirectResolver:zA,persistence:[JN,eg,qg]}),i=$_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=GA(u.toString());ON(t,h,()=>h(t.currentUser)),LN(t,p=>h(p))}}const l=q_("auth");return l&&gN(t,`http://${l}`),t}function KA(){return document.getElementsByTagName("head")?.[0]??document}aN({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=Si("internal-error");u.customData=l,t(u)},i.type="text/javascript",i.charset="UTF-8",KA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HA("Browser");var n2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ka,Dw;(function(){var s;function e(R,S){function I(){}I.prototype=S.prototype,R.F=S.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(P,D,L){for(var A=Array(arguments.length-2),De=2;De<arguments.length;De++)A[De-2]=arguments[De];return S.prototype[D].apply(P,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(R,S,I){I||(I=0);const P=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)P[D]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(D=0;D<16;++D)P[D]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=R.g[0],I=R.g[1],D=R.g[2];let L=R.g[3],A;A=S+(L^I&(D^L))+P[0]+3614090360&4294967295,S=I+(A<<7&4294967295|A>>>25),A=L+(D^S&(I^D))+P[1]+3905402710&4294967295,L=S+(A<<12&4294967295|A>>>20),A=D+(I^L&(S^I))+P[2]+606105819&4294967295,D=L+(A<<17&4294967295|A>>>15),A=I+(S^D&(L^S))+P[3]+3250441966&4294967295,I=D+(A<<22&4294967295|A>>>10),A=S+(L^I&(D^L))+P[4]+4118548399&4294967295,S=I+(A<<7&4294967295|A>>>25),A=L+(D^S&(I^D))+P[5]+1200080426&4294967295,L=S+(A<<12&4294967295|A>>>20),A=D+(I^L&(S^I))+P[6]+2821735955&4294967295,D=L+(A<<17&4294967295|A>>>15),A=I+(S^D&(L^S))+P[7]+4249261313&4294967295,I=D+(A<<22&4294967295|A>>>10),A=S+(L^I&(D^L))+P[8]+1770035416&4294967295,S=I+(A<<7&4294967295|A>>>25),A=L+(D^S&(I^D))+P[9]+2336552879&4294967295,L=S+(A<<12&4294967295|A>>>20),A=D+(I^L&(S^I))+P[10]+4294925233&4294967295,D=L+(A<<17&4294967295|A>>>15),A=I+(S^D&(L^S))+P[11]+2304563134&4294967295,I=D+(A<<22&4294967295|A>>>10),A=S+(L^I&(D^L))+P[12]+1804603682&4294967295,S=I+(A<<7&4294967295|A>>>25),A=L+(D^S&(I^D))+P[13]+4254626195&4294967295,L=S+(A<<12&4294967295|A>>>20),A=D+(I^L&(S^I))+P[14]+2792965006&4294967295,D=L+(A<<17&4294967295|A>>>15),A=I+(S^D&(L^S))+P[15]+1236535329&4294967295,I=D+(A<<22&4294967295|A>>>10),A=S+(D^L&(I^D))+P[1]+4129170786&4294967295,S=I+(A<<5&4294967295|A>>>27),A=L+(I^D&(S^I))+P[6]+3225465664&4294967295,L=S+(A<<9&4294967295|A>>>23),A=D+(S^I&(L^S))+P[11]+643717713&4294967295,D=L+(A<<14&4294967295|A>>>18),A=I+(L^S&(D^L))+P[0]+3921069994&4294967295,I=D+(A<<20&4294967295|A>>>12),A=S+(D^L&(I^D))+P[5]+3593408605&4294967295,S=I+(A<<5&4294967295|A>>>27),A=L+(I^D&(S^I))+P[10]+38016083&4294967295,L=S+(A<<9&4294967295|A>>>23),A=D+(S^I&(L^S))+P[15]+3634488961&4294967295,D=L+(A<<14&4294967295|A>>>18),A=I+(L^S&(D^L))+P[4]+3889429448&4294967295,I=D+(A<<20&4294967295|A>>>12),A=S+(D^L&(I^D))+P[9]+568446438&4294967295,S=I+(A<<5&4294967295|A>>>27),A=L+(I^D&(S^I))+P[14]+3275163606&4294967295,L=S+(A<<9&4294967295|A>>>23),A=D+(S^I&(L^S))+P[3]+4107603335&4294967295,D=L+(A<<14&4294967295|A>>>18),A=I+(L^S&(D^L))+P[8]+1163531501&4294967295,I=D+(A<<20&4294967295|A>>>12),A=S+(D^L&(I^D))+P[13]+2850285829&4294967295,S=I+(A<<5&4294967295|A>>>27),A=L+(I^D&(S^I))+P[2]+4243563512&4294967295,L=S+(A<<9&4294967295|A>>>23),A=D+(S^I&(L^S))+P[7]+1735328473&4294967295,D=L+(A<<14&4294967295|A>>>18),A=I+(L^S&(D^L))+P[12]+2368359562&4294967295,I=D+(A<<20&4294967295|A>>>12),A=S+(I^D^L)+P[5]+4294588738&4294967295,S=I+(A<<4&4294967295|A>>>28),A=L+(S^I^D)+P[8]+2272392833&4294967295,L=S+(A<<11&4294967295|A>>>21),A=D+(L^S^I)+P[11]+1839030562&4294967295,D=L+(A<<16&4294967295|A>>>16),A=I+(D^L^S)+P[14]+4259657740&4294967295,I=D+(A<<23&4294967295|A>>>9),A=S+(I^D^L)+P[1]+2763975236&4294967295,S=I+(A<<4&4294967295|A>>>28),A=L+(S^I^D)+P[4]+1272893353&4294967295,L=S+(A<<11&4294967295|A>>>21),A=D+(L^S^I)+P[7]+4139469664&4294967295,D=L+(A<<16&4294967295|A>>>16),A=I+(D^L^S)+P[10]+3200236656&4294967295,I=D+(A<<23&4294967295|A>>>9),A=S+(I^D^L)+P[13]+681279174&4294967295,S=I+(A<<4&4294967295|A>>>28),A=L+(S^I^D)+P[0]+3936430074&4294967295,L=S+(A<<11&4294967295|A>>>21),A=D+(L^S^I)+P[3]+3572445317&4294967295,D=L+(A<<16&4294967295|A>>>16),A=I+(D^L^S)+P[6]+76029189&4294967295,I=D+(A<<23&4294967295|A>>>9),A=S+(I^D^L)+P[9]+3654602809&4294967295,S=I+(A<<4&4294967295|A>>>28),A=L+(S^I^D)+P[12]+3873151461&4294967295,L=S+(A<<11&4294967295|A>>>21),A=D+(L^S^I)+P[15]+530742520&4294967295,D=L+(A<<16&4294967295|A>>>16),A=I+(D^L^S)+P[2]+3299628645&4294967295,I=D+(A<<23&4294967295|A>>>9),A=S+(D^(I|~L))+P[0]+4096336452&4294967295,S=I+(A<<6&4294967295|A>>>26),A=L+(I^(S|~D))+P[7]+1126891415&4294967295,L=S+(A<<10&4294967295|A>>>22),A=D+(S^(L|~I))+P[14]+2878612391&4294967295,D=L+(A<<15&4294967295|A>>>17),A=I+(L^(D|~S))+P[5]+4237533241&4294967295,I=D+(A<<21&4294967295|A>>>11),A=S+(D^(I|~L))+P[12]+1700485571&4294967295,S=I+(A<<6&4294967295|A>>>26),A=L+(I^(S|~D))+P[3]+2399980690&4294967295,L=S+(A<<10&4294967295|A>>>22),A=D+(S^(L|~I))+P[10]+4293915773&4294967295,D=L+(A<<15&4294967295|A>>>17),A=I+(L^(D|~S))+P[1]+2240044497&4294967295,I=D+(A<<21&4294967295|A>>>11),A=S+(D^(I|~L))+P[8]+1873313359&4294967295,S=I+(A<<6&4294967295|A>>>26),A=L+(I^(S|~D))+P[15]+4264355552&4294967295,L=S+(A<<10&4294967295|A>>>22),A=D+(S^(L|~I))+P[6]+2734768916&4294967295,D=L+(A<<15&4294967295|A>>>17),A=I+(L^(D|~S))+P[13]+1309151649&4294967295,I=D+(A<<21&4294967295|A>>>11),A=S+(D^(I|~L))+P[4]+4149444226&4294967295,S=I+(A<<6&4294967295|A>>>26),A=L+(I^(S|~D))+P[11]+3174756917&4294967295,L=S+(A<<10&4294967295|A>>>22),A=D+(S^(L|~I))+P[2]+718787259&4294967295,D=L+(A<<15&4294967295|A>>>17),A=I+(L^(D|~S))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(D+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+L&4294967295}i.prototype.v=function(R,S){S===void 0&&(S=R.length);const I=S-this.blockSize,P=this.C;let D=this.h,L=0;for(;L<S;){if(D==0)for(;L<=I;)l(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<S;)if(P[D++]=R.charCodeAt(L++),D==this.blockSize){l(this,P),D=0;break}}else for(;L<S;)if(P[D++]=R[L++],D==this.blockSize){l(this,P),D=0;break}}this.h=D,this.o+=S},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,I=0;I<4;++I)for(let P=0;P<32;P+=8)R[S++]=this.g[I]>>>P&255;return R};function u(R,S){var I=p;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=S(R)}function h(R,S){this.h=S;const I=[];let P=!0;for(let D=R.length-1;D>=0;D--){const L=R[D]|0;P&&L==S||(I[D]=L,P=!1)}this.g=I}var p={};function g(R){return-128<=R&&R<128?u(R,function(S){return new h([S|0],S<0?-1:0)}):new h([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return E;if(R<0)return z(y(-R));const S=[];let I=1;for(let P=0;R>=I;P++)S[P]=R/I|0,I*=4294967296;return new h(S,0)}function b(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return z(b(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(S,8));let P=E;for(let L=0;L<R.length;L+=8){var D=Math.min(8,R.length-L);const A=parseInt(R.substring(L,L+D),S);D<8?(D=y(Math.pow(S,D)),P=P.j(D).add(y(A))):(P=P.j(I),P=P.add(y(A)))}return P}var E=g(0),T=g(1),O=g(16777216);s=h.prototype,s.m=function(){if(q(this))return-z(this).m();let R=0,S=1;for(let I=0;I<this.g.length;I++){const P=this.i(I);R+=(P>=0?P:4294967296+P)*S,S*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(H(this))return"0";if(q(this))return"-"+z(this).toString(R);const S=y(Math.pow(R,6));var I=this;let P="";for(;;){const D=ye(I,S).g;I=ne(I,D.j(S));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=D,H(I))return L+P;for(;L.length<6;)L="0"+L;P=L+P}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function H(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function q(R){return R.h==-1}s.l=function(R){return R=ne(this,R),q(R)?-1:H(R)?0:1};function z(R){const S=R.g.length,I=[];for(let P=0;P<S;P++)I[P]=~R.g[P];return new h(I,~R.h).add(T)}s.abs=function(){return q(this)?z(this):this},s.add=function(R){const S=Math.max(this.g.length,R.g.length),I=[];let P=0;for(let D=0;D<=S;D++){let L=P+(this.i(D)&65535)+(R.i(D)&65535),A=(L>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);P=A>>>16,L&=65535,A&=65535,I[D]=A<<16|L}return new h(I,I[I.length-1]&-2147483648?-1:0)};function ne(R,S){return R.add(z(S))}s.j=function(R){if(H(this)||H(R))return E;if(q(this))return q(R)?z(this).j(z(R)):z(z(this).j(R));if(q(R))return z(this.j(z(R)));if(this.l(O)<0&&R.l(O)<0)return y(this.m()*R.m());const S=this.g.length+R.g.length,I=[];for(var P=0;P<2*S;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<R.g.length;D++){const L=this.i(P)>>>16,A=this.i(P)&65535,De=R.i(D)>>>16,Qe=R.i(D)&65535;I[2*P+2*D]+=A*Qe,W(I,2*P+2*D),I[2*P+2*D+1]+=L*Qe,W(I,2*P+2*D+1),I[2*P+2*D+1]+=A*De,W(I,2*P+2*D+1),I[2*P+2*D+2]+=L*De,W(I,2*P+2*D+2)}for(R=0;R<S;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=S;R<2*S;R++)I[R]=0;return new h(I,0)};function W(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function ee(R,S){this.g=R,this.h=S}function ye(R,S){if(H(S))throw Error("division by zero");if(H(R))return new ee(E,E);if(q(R))return S=ye(z(R),S),new ee(z(S.g),z(S.h));if(q(S))return S=ye(R,z(S)),new ee(z(S.g),S.h);if(R.g.length>30){if(q(R)||q(S))throw Error("slowDivide_ only works with positive integers.");for(var I=T,P=S;P.l(R)<=0;)I=Se(I),P=Se(P);var D=_e(I,1),L=_e(P,1);for(P=_e(P,2),I=_e(I,2);!H(P);){var A=L.add(P);A.l(R)<=0&&(D=D.add(I),L=A),P=_e(P,1),I=_e(I,1)}return S=ne(R,D.j(S)),new ee(D,S)}for(D=E;R.l(S)>=0;){for(I=Math.max(1,Math.floor(R.m()/S.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),L=y(I),A=L.j(S);q(A)||A.l(R)>0;)I-=P,L=y(I),A=L.j(S);H(L)&&(L=T),D=D.add(L),R=ne(R,A)}return new ee(D,R)}s.B=function(R){return ye(this,R).h},s.and=function(R){const S=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<S;P++)I[P]=this.i(P)&R.i(P);return new h(I,this.h&R.h)},s.or=function(R){const S=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<S;P++)I[P]=this.i(P)|R.i(P);return new h(I,this.h|R.h)},s.xor=function(R){const S=Math.max(this.g.length,R.g.length),I=[];for(let P=0;P<S;P++)I[P]=this.i(P)^R.i(P);return new h(I,this.h^R.h)};function Se(R){const S=R.g.length+1,I=[];for(let P=0;P<S;P++)I[P]=R.i(P)<<1|R.i(P-1)>>>31;return new h(I,R.h)}function _e(R,S){const I=S>>5;S%=32;const P=R.g.length-I,D=[];for(let L=0;L<P;L++)D[L]=S>0?R.i(L+I)>>>S|R.i(L+I+1)<<32-S:R.i(L+I);return new h(D,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Dw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=b,Ka=h}).apply(typeof n2<"u"?n2:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Mw,qc,Lw,md,ng,Ow,Pw,Vw;(function(){var s,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var v=0;v<d.length;++v){var x=d[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=t(this);function l(d,v){if(v)e:{var x=i;d=d.split(".");for(var N=0;N<d.length-1;N++){var Y=d[N];if(!(Y in x))break e;x=x[Y]}d=d[d.length-1],N=x[d],v=v(N),v!=N&&v!=null&&e(x,d,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(v){var x=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&x.push([N,v[N]]);return x}});var u=u||{},h=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,x){return d.call.apply(d.bind,arguments)}function y(d,v,x){return y=g,y.apply(null,arguments)}function b(d,v){var x=Array.prototype.slice.call(arguments,1);return function(){var N=x.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function E(d,v){function x(){}x.prototype=v.prototype,d.Z=v.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(N,Y,oe){for(var Le=Array(arguments.length-2),It=2;It<arguments.length;It++)Le[It-2]=arguments[It];return v.prototype[Y].apply(N,Le)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function O(d){const v=d.length;if(v>0){const x=Array(v);for(let N=0;N<v;N++)x[N]=d[N];return x}return[]}function H(d,v){for(let N=1;N<arguments.length;N++){const Y=arguments[N];var x=typeof Y;if(x=x!="object"?x:Y?Array.isArray(Y)?"array":x:"null",x=="array"||x=="object"&&typeof Y.length=="number"){x=d.length||0;const oe=Y.length||0;d.length=x+oe;for(let Le=0;Le<oe;Le++)d[x+Le]=Y[Le]}else d.push(Y)}}class q{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function z(d){h.setTimeout(()=>{throw d},0)}function ne(){var d=R;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class W{constructor(){this.h=this.g=null}add(v,x){const N=ee.get();N.set(v,x),this.h?this.h.next=N:this.g=N,this.h=N}}var ee=new q(()=>new ye,d=>d.reset());class ye{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,_e=!1,R=new W,S=()=>{const d=Promise.resolve(void 0);Se=()=>{d.then(I)}};function I(){for(var d;d=ne();){try{d.h.call(d.g)}catch(x){z(x)}var v=ee;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}_e=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};h.addEventListener("test",x,v),h.removeEventListener("test",x,v)}catch{}return d})();function A(d){return/^[\s\xa0]*$/.test(d)}function De(d,v){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}E(De,D),De.prototype.init=function(d,v){const x=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(x=="mouseover"?v=d.fromElement:x=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Qe="closure_listenable_"+(Math.random()*1e6|0),te=0;function xe(d,v,x,N,Y){this.listener=d,this.proxy=null,this.src=v,this.type=x,this.capture=!!N,this.ha=Y,this.key=++te,this.da=this.fa=!1}function Pe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function qe(d,v,x){for(const N in d)v.call(x,d[N],N,d)}function ie(d,v){for(const x in d)v.call(void 0,d[x],x,d)}function M(d){const v={};for(const x in d)v[x]=d[x];return v}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(d,v){let x,N;for(let Y=1;Y<arguments.length;Y++){N=arguments[Y];for(x in N)d[x]=N[x];for(let oe=0;oe<K.length;oe++)x=K[oe],Object.prototype.hasOwnProperty.call(N,x)&&(d[x]=N[x])}}function Ce(d){this.src=d,this.g={},this.h=0}Ce.prototype.add=function(d,v,x,N,Y){const oe=d.toString();d=this.g[oe],d||(d=this.g[oe]=[],this.h++);const Le=Ee(d,v,N,Y);return Le>-1?(v=d[Le],x||(v.fa=!1)):(v=new xe(v,this.src,oe,!!N,Y),v.fa=x,d.push(v)),v};function Te(d,v){const x=v.type;if(x in d.g){var N=d.g[x],Y=Array.prototype.indexOf.call(N,v,void 0),oe;(oe=Y>=0)&&Array.prototype.splice.call(N,Y,1),oe&&(Pe(v),d.g[x].length==0&&(delete d.g[x],d.h--))}}function Ee(d,v,x,N){for(let Y=0;Y<d.length;++Y){const oe=d[Y];if(!oe.da&&oe.listener==v&&oe.capture==!!x&&oe.ha==N)return Y}return-1}var We="closure_lm_"+(Math.random()*1e6|0),nt={};function Be(d,v,x,N,Y){if(Array.isArray(v)){for(let oe=0;oe<v.length;oe++)Be(d,v[oe],x,N,Y);return null}return x=bt(x),d&&d[Qe]?d.J(v,x,p(N)?!!N.capture:!1,Y):kn(d,v,x,!1,N,Y)}function kn(d,v,x,N,Y,oe){if(!v)throw Error("Invalid event type");const Le=p(Y)?!!Y.capture:!!Y;let It=ct(d);if(It||(d[We]=It=new Ce(d)),x=It.add(v,x,N,Le,oe),x.proxy)return x;if(N=Sn(),x.proxy=N,N.src=d,N.listener=x,d.addEventListener)L||(Y=Le),Y===void 0&&(Y=!1),d.addEventListener(v.toString(),N,Y);else if(d.attachEvent)d.attachEvent(Et(v.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Sn(){function d(x){return v.call(d.src,d.listener,x)}const v=vt;return d}function Cn(d,v,x,N,Y){if(Array.isArray(v))for(var oe=0;oe<v.length;oe++)Cn(d,v[oe],x,N,Y);else N=p(N)?!!N.capture:!!N,x=bt(x),d&&d[Qe]?(d=d.i,oe=String(v).toString(),oe in d.g&&(v=d.g[oe],x=Ee(v,x,N,Y),x>-1&&(Pe(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete d.g[oe],d.h--)))):d&&(d=ct(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Ee(v,x,N,Y)),(x=d>-1?v[d]:null)&&Ft(x))}function Ft(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[Qe])Te(v.i,d);else{var x=d.type,N=d.proxy;v.removeEventListener?v.removeEventListener(x,N,d.capture):v.detachEvent?v.detachEvent(Et(x),N):v.addListener&&v.removeListener&&v.removeListener(N),(x=ct(v))?(Te(x,d),x.h==0&&(x.src=null,v[We]=null)):Pe(d)}}}function Et(d){return d in nt?nt[d]:nt[d]="on"+d}function vt(d,v){if(d.da)d=!0;else{v=new De(v,this);const x=d.listener,N=d.ha||d.src;d.fa&&Ft(d),d=x.call(N,v)}return d}function ct(d){return d=d[We],d instanceof Ce?d:null}var Zn="__closure_events_fn_"+(Math.random()*1e9>>>0);function bt(d){return typeof d=="function"?d:(d[Zn]||(d[Zn]=function(v){return d.handleEvent(v)}),d[Zn])}function Lt(){P.call(this),this.i=new Ce(this),this.M=this,this.G=null}E(Lt,P),Lt.prototype[Qe]=!0,Lt.prototype.removeEventListener=function(d,v,x,N){Cn(this,d,v,x,N)};function ae(d,v){var x,N=d.G;if(N)for(x=[];N;N=N.G)x.push(N);if(d=d.M,N=v.type||v,typeof v=="string")v=new D(v,d);else if(v instanceof D)v.target=v.target||d;else{var Y=v;v=new D(N,d),be(v,Y)}Y=!0;let oe,Le;if(x)for(Le=x.length-1;Le>=0;Le--)oe=v.g=x[Le],Y=ln(oe,N,!0,v)&&Y;if(oe=v.g=d,Y=ln(oe,N,!0,v)&&Y,Y=ln(oe,N,!1,v)&&Y,x)for(Le=0;Le<x.length;Le++)oe=v.g=x[Le],Y=ln(oe,N,!1,v)&&Y}Lt.prototype.N=function(){if(Lt.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const x=d.g[v];for(let N=0;N<x.length;N++)Pe(x[N]);delete d.g[v],d.h--}}this.G=null},Lt.prototype.J=function(d,v,x,N){return this.i.add(String(d),v,!1,x,N)},Lt.prototype.K=function(d,v,x,N){return this.i.add(String(d),v,!0,x,N)};function ln(d,v,x,N){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let Y=!0;for(let oe=0;oe<v.length;++oe){const Le=v[oe];if(Le&&!Le.da&&Le.capture==x){const It=Le.listener,os=Le.ha||Le.src;Le.fa&&Te(d.i,Le),Y=It.call(os,N)!==!1&&Y}}return Y&&!N.defaultPrevented}function ut(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(d,v||0)}function At(d){d.g=ut(()=>{d.g=null,d.i&&(d.i=!1,At(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class tt extends P{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(d){P.call(this),this.h=d,this.g={}}E($t,P);var nn=[];function sn(d){qe(d.g,function(v,x){this.g.hasOwnProperty(x)&&Ft(v)},d),d.g={}}$t.prototype.N=function(){$t.Z.N.call(this),sn(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=h.JSON.stringify,Ls=h.JSON.parse,Fn=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function de(){}function Re(){}var Ze={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function et(){D.call(this,"d")}E(et,D);function st(){D.call(this,"c")}E(st,D);var Oe={},_t=null;function kt(){return _t=_t||new Lt}Oe.Ia="serverreachability";function rn(d){D.call(this,Oe.Ia,d)}E(rn,D);function mn(d){const v=kt();ae(v,new rn(v))}Oe.STAT_EVENT="statevent";function pn(d,v){D.call(this,Oe.STAT_EVENT,d),this.stat=v}E(pn,D);function Pt(d){const v=kt();ae(v,new pn(v,d))}Oe.Ja="timingevent";function Vn(d,v){D.call(this,Oe.Ja,d),this.size=v}E(Vn,D);function Nn(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function wn(){this.g=!0}wn.prototype.ua=function(){this.g=!1};function hs(d,v,x,N,Y,oe){d.info(function(){if(d.g)if(oe){var Le="",It=oe.split("&");for(let dn=0;dn<It.length;dn++){var os=It[dn].split("=");if(os.length>1){const $n=os[0];os=os[1];const Fr=$n.split("_");Le=Fr.length>=2&&Fr[1]=="type"?Le+($n+"="+os+"&"):Le+($n+"=redacted&")}}}else Le=null;else Le=oe;return"XMLHTTP REQ ("+N+") [attempt "+Y+"]: "+v+`
`+x+`
`+Le})}function le(d,v,x,N,Y,oe,Le){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+Y+"]: "+v+`
`+x+`
`+oe+" "+Le})}function Ae(d,v,x,N){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+ht(d,x)+(N?" "+N:"")})}function Fe(d,v){d.info(function(){return"TIMEOUT: "+v})}wn.prototype.info=function(){};function ht(d,v){if(!d.g)return v;if(!v)return null;try{const oe=JSON.parse(v);if(oe){for(d=0;d<oe.length;d++)if(Array.isArray(oe[d])){var x=oe[d];if(!(x.length<2)){var N=x[1];if(Array.isArray(N)&&!(N.length<1)){var Y=N[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let Le=1;Le<N.length;Le++)N[Le]=""}}}}return jn(oe)}catch{return v}}var rt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},qn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Hn;function Zt(){}E(Zt,de),Zt.prototype.g=function(){return new XMLHttpRequest},Hn=new Zt;function gn(d){return encodeURIComponent(String(d))}function Os(d){var v=1;d=d.split(":");const x=[];for(;v>0&&d.length;)x.push(d.shift()),v--;return d.length&&x.push(d.join(":")),x}function _s(d,v,x,N){this.j=d,this.i=v,this.l=x,this.S=N||1,this.V=new $t(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new es}function es(){this.i=null,this.g="",this.h=!1}var cn={},ts={};function Cs(d,v,x){d.M=1,d.A=Ge(C(v)),d.u=x,d.R=!0,Or(d,null)}function Or(d,v){d.F=Date.now(),ws(d),d.B=C(d.A);var x=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),He(x.i,"t",N),d.C=0,x=d.j.L,d.h=new es,d.g=Bu(d.j,x?v:null,!d.u),d.P>0&&(d.O=new tt(y(d.Y,d,d.g),d.P)),v=d.V,x=d.g,N=d.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(nn[0]=Y.toString()),Y=nn);for(let oe=0;oe<Y.length;oe++){const Le=Be(x,Y[oe],N||v.handleEvent,!1,v.h||v);if(!Le)break;v.g[Le.key]=Le}v=d.J?M(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),mn(),hs(d.i,d.v,d.B,d.l,d.S,d.u)}_s.prototype.ba=function(d){d=d.target;const v=this.O;v&&qt(d)==3?v.j():this.Y(d)},_s.prototype.Y=function(d){try{if(d==this.g)e:{const It=qt(this.g),os=this.g.ya(),dn=this.g.ca();if(!(It<3)&&(It!=3||this.g&&(this.h.h||this.g.la()||tn(this.g)))){this.K||It!=4||os==7||(os==8||dn<=0?mn(3):mn(2)),Ps(this);var v=this.g.ca();this.X=v;var x=hr(this);if(this.o=v==200,le(this.i,this.v,this.B,this.l,this.S,It,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,Y=this.g;if((N=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(N)){var oe=N;break t}}oe=null}if(d=oe)Ae(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,js(this,d);else{this.o=!1,this.m=3,Pt(12),Un(this),Qn(this);break e}}if(this.R){d=!0;let $n;for(;!this.K&&this.C<x.length;)if($n=Pr(this,x),$n==ts){It==4&&(this.m=4,Pt(14),d=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}else if($n==cn){this.m=4,Pt(15),Ae(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else Ae(this.i,this.l,$n,null),js(this,$n);if(dr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||x.length!=0||this.h.h||(this.m=1,Pt(16),d=!1),this.o=this.o&&d,!d)Ae(this.i,this.l,x,"[Invalid Chunked Response]"),Un(this),Qn(this);else if(x.length>0&&!this.W){this.W=!0;var Le=this.j;Le.g==this&&Le.aa&&!Le.P&&(Le.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Pi(Le),Le.P=!0,Pt(11))}}else Ae(this.i,this.l,x,null),js(this,x);It==4&&Un(this),this.o&&!this.K&&(It==4?Ou(this.j,this):(this.o=!1,ws(this)))}else lt(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),Un(this),Qn(this)}}}catch{}};function hr(d){if(!dr(d))return d.g.la();const v=tn(d.g);if(v==="")return"";let x="";const N=v.length,Y=qt(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Un(d),Qn(d),"";d.h.i=new h.TextDecoder}for(let oe=0;oe<N;oe++)d.h.h=!0,x+=d.h.i.decode(v[oe],{stream:!(Y&&oe==N-1)});return v.length=0,d.h.g+=x,d.C=0,d.h.g}function dr(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Pr(d,v){var x=d.C,N=v.indexOf(`
`,x);return N==-1?ts:(x=Number(v.substring(x,N)),isNaN(x)?cn:(N+=1,N+x>v.length?ts:(v=v.slice(N,N+x),d.C=N+x,v)))}_s.prototype.cancel=function(){this.K=!0,Un(this)};function ws(d){d.T=Date.now()+d.H,fr(d,d.H)}function fr(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Nn(y(d.aa,d),v)}function Ps(d){d.D&&(h.clearTimeout(d.D),d.D=null)}_s.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Fe(this.i,this.B),this.M!=2&&(mn(),Pt(17)),Un(this),this.m=2,Qn(this)):fr(this,this.T-d)};function Qn(d){d.j.I==0||d.K||Ou(d.j,d)}function Un(d){Ps(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,sn(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function js(d,v){try{var x=d.j;if(x.I!=0&&(x.g==d||xn(x.h,d))){if(!d.L&&xn(x.h,d)&&x.I==3){try{var N=x.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var Y=N;if(Y[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)Go(x),hn(x);else break e;Oi(x),Pt(18)}}else x.xa=Y[1],0<x.xa-x.K&&Y[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Nn(y(x.Va,x),6e3));ds(x.h)<=1&&x.ta&&(x.ta=void 0)}else gi(x,11)}else if((d.L||x.g==d)&&Go(x),!A(v))for(Y=x.Ba.g.parse(v),v=0;v<Y.length;v++){let dn=Y[v];const $n=dn[0];if(!($n<=x.K))if(x.K=$n,dn=dn[1],x.I==2)if(dn[0]=="c"){x.M=dn[1],x.ba=dn[2];const Fr=dn[3];Fr!=null&&(x.ka=Fr,x.j.info("VER="+x.ka));const yi=dn[4];yi!=null&&(x.za=yi,x.j.info("SVER="+x.za));const ni=dn[5];ni!=null&&typeof ni=="number"&&ni>0&&(N=1.5*ni,x.O=N,x.j.info("backChannelRequestTimeoutMs_="+N)),N=x;const si=d.g;if(si){const lo=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lo){var oe=N.h;oe.g||lo.indexOf("spdy")==-1&&lo.indexOf("quic")==-1&&lo.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(ti(oe,oe.h),oe.h=null))}if(N.G){const Ko=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;Ko&&(N.wa=Ko,Me(N.J,N.G,Ko))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),N=x;var Le=d;if(N.na=Uu(N,N.L?N.ba:null,N.W),Le.L){Vr(N.h,Le);var It=Le,os=N.O;os&&(It.H=os),It.D&&(Ps(It),ws(It)),N.g=Le}else oo(N);x.i.length>0&&Bs(x)}else dn[0]!="stop"&&dn[0]!="close"||gi(x,7);else x.I==3&&(dn[0]=="stop"||dn[0]=="close"?dn[0]=="stop"?gi(x,7):Nt(x):dn[0]!="noop"&&x.l&&x.l.qa(dn),x.A=0)}}mn(4)}catch{}}var yn=class{constructor(d,v){this.g=d,this.map=v}};function Vs(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qs(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ds(d){return d.h?1:d.g?d.g.size:0}function xn(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function ti(d,v){d.g?d.g.add(v):d.h=v}function Vr(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Vs.prototype.cancel=function(){if(this.i=mr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function mr(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const x of d.g.values())v=v.concat(x.G);return v}return O(d.i)}var Ns=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function As(d,v){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const N=d[x].indexOf("=");let Y,oe=null;N>=0?(Y=d[x].substring(0,N),oe=d[x].substring(N+1)):Y=d[x],v(Y,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function xs(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof xs?(this.l=d.l,B(this,d.j),this.o=d.o,this.g=d.g,re(this,d.u),this.h=d.h,ue(this,pt(d.i)),this.m=d.m):d&&(v=String(d).match(Ns))?(this.l=!1,B(this,v[1]||"",!0),this.o=ze(v[2]||""),this.g=ze(v[3]||"",!0),re(this,v[4]),this.h=ze(v[5]||"",!0),ue(this,v[6]||"",!0),this.m=ze(v[7]||"")):(this.l=!1,this.i=new Br(null,this.l))}xs.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(Bt(v,Xn,!0),":");var x=this.g;return(x||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Bt(v,Xn,!0),"@"),d.push(gn(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Bt(x,x.charAt(0)=="/"?Ur:nr,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Bt(x,mi)),d.join("")},xs.prototype.resolve=function(d){const v=C(this);let x=!!d.j;x?B(v,d.j):x=!!d.o,x?v.o=d.o:x=!!d.g,x?v.g=d.g:x=d.u!=null;var N=d.h;if(x)re(v,d.u);else if(x=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var Y=v.h.lastIndexOf("/");Y!=-1&&(N=v.h.slice(0,Y+1)+N)}if(Y=N,Y==".."||Y==".")N="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){N=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const oe=[];for(let Le=0;Le<Y.length;){const It=Y[Le++];It=="."?N&&Le==Y.length&&oe.push(""):It==".."?((oe.length>1||oe.length==1&&oe[0]!="")&&oe.pop(),N&&Le==Y.length&&oe.push("")):(oe.push(It),N=!0)}N=oe.join("/")}else N=Y}return x?v.h=N:x=d.i.toString()!=="",x?ue(v,pt(d.i)):x=!!d.m,x&&(v.m=d.m),v};function C(d){return new xs(d)}function B(d,v,x){d.j=x?ze(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function re(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function ue(d,v,x){v instanceof Br?(d.i=v,Tt(d.i,d.l)):(x||(v=Bt(v,Us)),d.i=new Br(v,d.l))}function Me(d,v,x){d.i.set(v,x)}function Ge(d){return Me(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ze(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Bt(d,v,x){return typeof d=="string"?(d=encodeURI(d).replace(v,dt),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function dt(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Xn=/[#\/\?@]/g,nr=/[#\?:]/g,Ur=/[#\?]/g,Us=/[#\?@]/g,mi=/#/g;function Br(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function j(d){d.g||(d.g=new Map,d.h=0,d.i&&As(d.i,function(v,x){d.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}s=Br.prototype,s.add=function(d,v){j(this),this.i=null,d=Xe(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(v),this.h+=1,this};function G(d,v){j(d),v=Xe(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Ne(d,v){return j(d),v=Xe(d,v),d.g.has(v)}s.forEach=function(d,v){j(this),this.g.forEach(function(x,N){x.forEach(function(Y){d.call(v,Y,N,this)},this)},this)};function Ie(d,v){j(d);let x=[];if(typeof v=="string")Ne(d,v)&&(x=x.concat(d.g.get(Xe(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)x=x.concat(d[v]);return x}s.set=function(d,v){return j(this),this.i=null,d=Xe(this,d),Ne(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=Ie(this,d),d.length>0?String(d[0]):v):v};function He(d,v,x){G(d,v),x.length>0&&(d.i=null,d.g.set(Xe(d,v),O(x)),d.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var x=v[N];const Y=gn(x);x=Ie(this,x);for(let oe=0;oe<x.length;oe++){let Le=Y;x[oe]!==""&&(Le+="="+gn(x[oe])),d.push(Le)}}return this.i=d.join("&")};function pt(d){const v=new Br;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Xe(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Tt(d,v){v&&!d.j&&(j(d),d.i=null,d.g.forEach(function(x,N){const Y=N.toLowerCase();N!=Y&&(G(this,N),He(this,Y,x))},d)),d.j=v}function wt(d,v){const x=new wn;if(h.Image){const N=new Image;N.onload=b(un,x,"TestLoadImage: loaded",!0,v,N),N.onerror=b(un,x,"TestLoadImage: error",!1,v,N),N.onabort=b(un,x,"TestLoadImage: abort",!1,v,N),N.ontimeout=b(un,x,"TestLoadImage: timeout",!1,v,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else v(!1)}function vn(d,v){const x=new wn,N=new AbortController,Y=setTimeout(()=>{N.abort(),un(x,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:N.signal}).then(oe=>{clearTimeout(Y),oe.ok?un(x,"TestPingServer: ok",!0,v):un(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Y),un(x,"TestPingServer: error",!1,v)})}function un(d,v,x,N,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),N(x)}catch{}}function Wn(){this.g=new Fn}function Es(d){this.i=d.Sb||null,this.h=d.ab||!1}E(Es,de),Es.prototype.g=function(){return new Er(this.i,this.h)};function Er(d,v){Lt.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Er,Lt),s=Er.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,X(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,V(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,X(this)),this.g&&(this.readyState=3,X(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rs(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rs(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?V(this):X(this),this.readyState==3&&Rs(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,V(this))},s.Na=function(d){this.g&&(this.response=d,V(this))},s.ga=function(){this.g&&V(this)};function V(d){d.readyState=4,d.l=null,d.j=null,d.B=null,X(d)}s.setRequestHeader=function(d,v){this.A.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=v.next();return d.join(`\r
`)};function X(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Er.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function J(d){let v="";return qe(d,function(x,N){v+=N,v+=":",v+=x,v+=`\r
`}),v}function ge(d,v,x){e:{for(N in x){var N=!1;break e}N=!0}N||(x=J(x),typeof d=="string"?x!=null&&gn(x):Me(d,v,x))}function he(d){Lt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(he,Lt);var je=/^https?$/i,Ue=["POST","PUT"];s=he.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,v,x,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Hn.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(oe){ft(this,oe);return}if(d=x||"",x=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var Y in N)x.set(Y,N[Y]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const oe of N.keys())x.set(oe,N.get(oe));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(x.keys()).find(oe=>oe.toLowerCase()=="content-type"),Y=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Ue,v,void 0)>=0)||N||Y||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,Le]of x)this.g.setRequestHeader(oe,Le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(oe){ft(this,oe)}};function ft(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Rt(d),ot(d)}function Rt(d){d.A||(d.A=!0,ae(d,"complete"),ae(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,ae(this,"complete"),ae(this,"abort"),ot(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ot(this,!0)),he.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Vt(this):this.Xa())},s.Xa=function(){Vt(this)};function Vt(d){if(d.h&&typeof u<"u"){if(d.v&&qt(d)==4)setTimeout(d.Ca.bind(d),0);else if(ae(d,"readystatechange"),qt(d)==4){d.h=!1;try{const oe=d.ca();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var N;if(N=oe===0){let Le=String(d.D).match(Ns)[1]||null;!Le&&h.self&&h.self.location&&(Le=h.self.location.protocol.slice(0,-1)),N=!je.test(Le?Le.toLowerCase():"")}x=N}if(x)ae(d,"complete"),ae(d,"success");else{d.o=6;try{var Y=qt(d)>2?d.g.statusText:""}catch{Y=""}d.l=Y+" ["+d.ca()+"]",Rt(d)}}finally{ot(d)}}}}function ot(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,v||ae(d,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function qt(d){return d.g?d.g.readyState:0}s.ca=function(){try{return qt(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Ls(v)}};function tn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function lt(d){const v={};d=(d.g&&qt(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(A(d[N]))continue;var x=Os(d[N]);const Y=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const oe=v[Y]||[];v[Y]=oe,oe.push(x)}ie(v,function(N){return N.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xt(d,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||v}function zt(d){this.za=0,this.i=[],this.j=new wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xt("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xt("baseRetryDelayMs",5e3,d),this.Za=xt("retryDelaySeedMs",1e4,d),this.Ta=xt("forwardChannelMaxRetries",2,d),this.va=xt("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Vs(d&&d.concurrentRequestLimit),this.Ba=new Wn,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=zt.prototype,s.ka=8,s.I=1,s.connect=function(d,v,x,N){Pt(0),this.W=d,this.H=v||{},x&&N!==void 0&&(this.H.OSID=x,this.H.OAID=N),this.F=this.X,this.J=Uu(this,null,this.W),Bs(this)};function Nt(d){if(sr(d),d.I==3){var v=d.V++,x=C(d.J);if(Me(x,"SID",d.M),Me(x,"RID",v),Me(x,"TYPE","terminate"),Fs(d,x),v=new _s(d,d.j,v),v.M=2,v.A=Ge(C(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&h.Image&&(new Image().src=v.A,x=!0),x||(v.g=Bu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ws(v)}Vu(d)}function hn(d){d.g&&(Pi(d),d.g.cancel(),d.g=null)}function sr(d){hn(d),d.v&&(h.clearTimeout(d.v),d.v=null),Go(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Bs(d){if(!Qs(d.h)&&!d.m){d.m=!0;var v=d.Ea;Se||S(),_e||(Se(),_e=!0),R.add(v,d),d.D=0}}function zr(d,v){return ds(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Nn(y(d.Ea,d,v),Pu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const Y=new _s(this,this.j,d);let oe=this.o;if(this.U&&(oe?(oe=M(oe),be(oe,this.U)):oe=this.U),this.u!==null||this.R||(Y.J=oe,oe=null),this.S)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var N=this.i[x];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=pi(this,Y,v),x=C(this.J),Me(x,"RID",d),Me(x,"CVER",22),this.G&&Me(x,"X-HTTP-Session-Id",this.G),Fs(this,x),oe&&(this.R?v="headers="+gn(J(oe))+"&"+v:this.u&&ge(x,this.u,oe)),ti(this.h,Y),this.Ra&&Me(x,"TYPE","init"),this.S?(Me(x,"$req",v),Me(x,"SID","null"),Y.U=!0,Cs(Y,x,null)):Cs(Y,x,v),this.I=2}}else this.I==3&&(d?zs(this,d):this.i.length==0||Qs(this.h)||zs(this))};function zs(d,v){var x;v?x=v.l:x=d.V++;const N=C(d.J);Me(N,"SID",d.M),Me(N,"RID",x),Me(N,"AID",d.K),Fs(d,N),d.u&&d.o&&ge(N,d.u,d.o),x=new _s(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),v&&(d.i=v.G.concat(d.i)),v=pi(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),ti(d.h,x),Cs(x,N,v)}function Fs(d,v){d.H&&qe(d.H,function(x,N){Me(v,N,x)}),d.l&&qe({},function(x,N){Me(v,N,x)})}function pi(d,v,x){x=Math.min(d.i.length,x);const N=d.l?y(d.l.Ka,d.l,d):null;e:{var Y=d.i;let It=-1;for(;;){const os=["count="+x];It==-1?x>0?(It=Y[0].g,os.push("ofs="+It)):It=0:os.push("ofs="+It);let dn=!0;for(let $n=0;$n<x;$n++){var oe=Y[$n].g;const Fr=Y[$n].map;if(oe-=It,oe<0)It=Math.max(0,Y[$n].g-100),dn=!1;else try{oe="req"+oe+"_"||"";try{var Le=Fr instanceof Map?Fr:Object.entries(Fr);for(const[yi,ni]of Le){let si=ni;p(ni)&&(si=jn(ni)),os.push(oe+yi+"="+encodeURIComponent(si))}}catch(yi){throw os.push(oe+"type="+encodeURIComponent("_badmap")),yi}}catch{N&&N(Fr)}}if(dn){Le=os.join("&");break e}}Le=void 0}return d=d.i.splice(0,x),v.G=d,Le}function oo(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;Se||S(),_e||(Se(),_e=!0),R.add(v,d),d.A=0}}function Oi(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Nn(y(d.Da,d),Pu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Nn(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),hn(this),Lu(this))};function Pi(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Lu(d){d.g=new _s(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=C(d.na);Me(v,"RID","rpc"),Me(v,"SID",d.M),Me(v,"AID",d.K),Me(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&Me(v,"TO",d.ia),Me(v,"TYPE","xmlhttp"),Fs(d,v),d.u&&d.o&&ge(v,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=Ge(C(v)),x.u=null,x.R=!0,Or(x,d)}s.Va=function(){this.C!=null&&(this.C=null,hn(this),Oi(this),Pt(19))};function Go(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Ou(d,v){var x=null;if(d.g==v){Go(d),Pi(d),d.g=null;var N=2}else if(xn(d.h,v))x=v.G,Vr(d.h,v),N=1;else return;if(d.I!=0){if(v.o)if(N==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var Y=d.D;N=kt(),ae(N,new Vn(N,x)),Bs(d)}else oo(d);else if(Y=v.m,Y==3||Y==0&&v.X>0||!(N==1&&zr(d,v)||N==2&&Oi(d)))switch(x&&x.length>0&&(v=d.h,v.i=v.i.concat(x)),Y){case 1:gi(d,5);break;case 4:gi(d,10);break;case 3:gi(d,6);break;default:gi(d,2)}}}function Pu(d,v){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*v}function gi(d,v){if(d.j.info("Error code "+v),v==2){var x=y(d.bb,d),N=d.Ua;const Y=!N;N=new xs(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||B(N,"https"),Ge(N),Y?wt(N.toString(),x):vn(N.toString(),x)}else Pt(2);d.I=0,d.l&&d.l.pa(v),Vu(d),sr(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Vu(d){if(d.I=0,d.ja=[],d.l){const v=mr(d.h);(v.length!=0||d.i.length!=0)&&(H(d.ja,v),H(d.ja,d.i),d.h.i.length=0,O(d.i),d.i.length=0),d.l.oa()}}function Uu(d,v,x){var N=x instanceof xs?C(x):new xs(x);if(N.g!="")v&&(N.g=v+"."+N.g),re(N,N.u);else{var Y=h.location;N=Y.protocol,v=v?v+"."+Y.hostname:Y.hostname,Y=+Y.port;const oe=new xs(null);N&&B(oe,N),v&&(oe.g=v),Y&&re(oe,Y),x&&(oe.h=x),N=oe}return x=d.G,v=d.wa,x&&v&&Me(N,x,v),Me(N,"VER",d.ka),Fs(d,N),N}function Bu(d,v,x){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new he(new Es({ab:x})):new he(d.ma),v.Fa(d.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}s=zu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ma(){}ma.prototype.g=function(d,v){return new rr(d,v)};function rr(d,v){Lt.call(this),this.g=new zt(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!A(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!A(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Vi(this)}E(rr,Lt),rr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){Nt(this.g)},rr.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=jn(d),d=x);v.i.push(new yn(v.Ya++,d)),v.I==3&&Bs(v)},rr.prototype.N=function(){this.g.l=null,delete this.j,Nt(this.g),delete this.g,rr.Z.N.call(this)};function Fu(d){et.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const x in v){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}E(Fu,et);function qu(){st.call(this),this.status=1}E(qu,st);function Vi(d){this.g=d}E(Vi,zu),Vi.prototype.ra=function(){ae(this.g,"a")},Vi.prototype.qa=function(d){ae(this.g,new Fu(d))},Vi.prototype.pa=function(d){ae(this.g,new qu)},Vi.prototype.oa=function(){ae(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,Vw=function(){return new ma},Pw=function(){return kt()},Ow=Oe,ng={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},rt.NO_ERROR=0,rt.TIMEOUT=8,rt.HTTP_ERROR=6,md=rt,qn.COMPLETE="complete",Lw=qn,Re.EventType=Ze,Ze.OPEN="a",Ze.CLOSE="b",Ze.ERROR="c",Ze.MESSAGE="d",Lt.prototype.listen=Lt.prototype.J,qc=Re,he.prototype.listenOnce=he.prototype.K,he.prototype.getLastError=he.prototype.Ha,he.prototype.getLastErrorCode=he.prototype.ya,he.prototype.getStatus=he.prototype.ca,he.prototype.getResponseJson=he.prototype.La,he.prototype.getResponseText=he.prototype.la,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Fa,Mw=he}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});class Zs{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zs.UNAUTHENTICATED=new Zs(null),Zs.GOOGLE_CREDENTIALS=new Zs("google-credentials-uid"),Zs.FIRST_PARTY=new Zs("first-party-uid"),Zs.MOCK_USER=new Zs("mock-user");let $l="12.8.0";function YA(s){$l=s}const Vo=new Dg("@firebase/firestore");function Sl(){return Vo.logLevel}function $e(s,...e){if(Vo.logLevel<=Yt.DEBUG){const t=e.map($g);Vo.debug(`Firestore (${$l}): ${s}`,...t)}}function la(s,...e){if(Vo.logLevel<=Yt.ERROR){const t=e.map($g);Vo.error(`Firestore (${$l}): ${s}`,...t)}}function Ol(s,...e){if(Vo.logLevel<=Yt.WARN){const t=e.map($g);Vo.warn(`Firestore (${$l}): ${s}`,...t)}}function $g(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function yt(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Uw(s,i,t)}function Uw(s,e,t){let i=`FIRESTORE (${$l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw la(i),new Error(i)}function _n(s,e,t,i){let l="Unexpected state";typeof t=="string"?l=t:i=t,s||Uw(e,l,i)}function jt(s,e){return s}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends Mi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ra{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Bw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zs.UNAUTHENTICATED)))}shutdown(){}}class XA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class JA{constructor(e){this.t=e,this.currentUser=Zs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_n(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new ra;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ra,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ra)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_n(typeof i.accessToken=="string",31837,{l:i}),new Bw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _n(e===null||typeof e=="string",2055,{h:e}),new Zs(e)}}class ZA{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Zs.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class eR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new ZA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class s2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_n(this.o===void 0,3512);const i=u=>{u.error!=null&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,$e("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new s2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_n(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new s2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function nR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class Gg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=nR(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<t&&(i+=e.charAt(l[u]%62))}return i}}function Qt(s,e){return s<e?-1:s>e?1:0}function sg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return Tp(l)===Tp(u)?Qt(l,u):Tp(l)?1:-1}return Qt(s.length,e.length)}const sR=55296,rR=57343;function Tp(s){const e=s.charCodeAt(0);return e>=sR&&e<=rR}function Pl(s,e,t){return s.length===e.length&&s.every(((i,l)=>t(i,e[l])))}const r2="__name__";class Ei{constructor(e,t,i){t===void 0?t=0:t>e.length&&yt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&yt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ei.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ei?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let l=0;l<i;l++){const u=Ei.compareSegments(e.get(l),t.get(l));if(u!==0)return u}return Qt(e.length,t.length)}static compareSegments(e,t){const i=Ei.isNumericId(e),l=Ei.isNumericId(t);return i&&!l?-1:!i&&l?1:i&&l?Ei.extractNumericId(e).compare(Ei.extractNumericId(t)):sg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ka.fromString(e.substring(4,e.length-2))}}class Pn extends Ei{construct(e,t,i){return new Pn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ve(me.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((l=>l.length>0)))}return new Pn(t)}static emptyPath(){return new Pn([])}}const iR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ks extends Ei{construct(e,t,i){return new Ks(e,t,i)}static isValidIdentifier(e){return iR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ks.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===r2}static keyField(){return new Ks([r2])}static fromServerFormat(e){const t=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Ve(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Ve(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ve(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(h=!h,l++):p!=="."||h?(i+=p,l++):(u(),l++)}if(u(),h)throw new Ve(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ks(t)}static emptyPath(){return new Ks([])}}class at{constructor(e){this.path=e}static fromPath(e){return new at(Pn.fromString(e))}static fromName(e){return new at(Pn.fromString(e).popFirst(5))}static empty(){return new at(Pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new Pn(e.slice()))}}function zw(s,e,t){if(!t)throw new Ve(me.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function aR(s,e,t,i){if(e===!0&&i===!0)throw new Ve(me.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function i2(s){if(!at.isDocumentKey(s))throw new Ve(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function a2(s){if(at.isDocumentKey(s))throw new Ve(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Fw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Yd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":yt(12329,{type:typeof s})}function lr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ve(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yd(s);throw new Ve(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function oR(s,e){if(e<=0)throw new Ve(me.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function bs(s,e){const t={typeString:s};return e&&(t.value=e),t}function Eu(s,e){if(!Fw(s))throw new Ve(me.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const h=s[i];if(l&&typeof h!==l){t=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new Ve(me.INVALID_ARGUMENT,t);return!0}const o2=-62135596800,l2=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(e){return Ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*l2);return new Ut(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<o2)throw new Ve(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/l2}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,Ut._jsonSchema))return new Ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ut._jsonSchemaVersion="firestore/timestamp/1.0",Ut._jsonSchema={type:bs("string",Ut._jsonSchemaVersion),seconds:bs("number"),nanoseconds:bs("number")};class St{static fromTimestamp(e){return new St(e)}static min(){return new St(new Ut(0,0))}static max(){return new St(new Ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ru=-1;function lR(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=St.fromTimestamp(i===1e9?new Ut(t+1,0):new Ut(t,i));return new Xa(l,at.empty(),e)}function cR(s){return new Xa(s.readTime,s.key,ru)}class Xa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Xa(St.min(),at.empty(),ru)}static max(){return new Xa(St.max(),at.empty(),ru)}}function uR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=at.comparator(s.documentKey,e.documentKey),t!==0?t:Qt(s.largestBatchId,e.largestBatchId))}const hR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Gl(s){if(s.code!==me.FAILED_PRECONDITION||s.message!==hR)throw s;$e("LocalStore","Unexpectedly lost primary lease")}class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new we(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof we?t:we.resolve(t)}catch(t){return we.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):we.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):we.reject(t)}static resolve(e){return new we(((t,i)=>{t(e)}))}static reject(e){return new we(((t,i)=>{i(e)}))}static waitFor(e){return new we(((t,i)=>{let l=0,u=0,h=!1;e.forEach((p=>{++l,p.next((()=>{++u,h&&u===l&&t()}),(g=>i(g)))})),h=!0,u===l&&t()}))}static or(e){let t=we.resolve(!1);for(const i of e)t=t.next((l=>l?we.resolve(l):i()));return t}static forEach(e,t){const i=[];return e.forEach(((l,u)=>{i.push(t.call(this,l,u))})),this.waitFor(i)}static mapArray(e,t){return new we(((i,l)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next((b=>{h[y]=b,++p,p===u&&i(h)}),(b=>l(b)))}}))}static doWhile(e,t){return new we(((i,l)=>{const u=()=>{e()===!0?t().next((()=>{u()}),l):i()};u()}))}}function fR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Kl(s){return s.name==="IndexedDbTransactionError"}class Qd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qd.ce=-1;const Kg=-1;function Xd(s){return s==null}function Rd(s){return s===0&&1/s==-1/0}function mR(s){return typeof s=="number"&&Number.isInteger(s)&&!Rd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const qw="";function pR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=c2(e)),e=gR(s.get(t),e);return c2(e)}function gR(s,e){let t=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":t+="";break;case qw:t+="";break;default:t+=u}}return t}function c2(s){return s+qw+""}function u2(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function io(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Hw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Jn{constructor(e,t){this.comparator=e,this.root=t||Gs.EMPTY}insert(e,t){return new Jn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gs.BLACK,null,null))}remove(e){return new Jn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return t+i.left.size;l<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qh(this.root,e,this.comparator,!0)}}class Qh{constructor(e,t,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gs{constructor(e,t,i,l,u){this.key=e,this.value=t,this.color=i??Gs.RED,this.left=l??Gs.EMPTY,this.right=u??Gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,l,u){return new Gs(e??this.key,t??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,t,i),null):u===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Gs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Gs.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yt(27949);return e+(this.isRed()?0:1)}}Gs.EMPTY=null,Gs.RED=!0,Gs.BLACK=!1;Gs.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(e,t,i,l,u){return this}insert(e,t,i){return new Gs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ss{constructor(e){this.comparator=e,this.data=new Jn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h2(this.data.getIterator())}getIteratorFrom(e){return new h2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ss)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ss(this.comparator);return t.data=e,t}}class h2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Dr{constructor(e){this.fields=e,e.sort(Ks.comparator)}static empty(){return new Dr([])}unionWith(e){let t=new Ss(Ks.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Ww extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ys{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Ww("Invalid base64 string: "+u):u}})(e);return new Ys(t)}static fromUint8Array(e){const t=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new Ys(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ys.EMPTY_BYTE_STRING=new Ys("");const yR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(s){if(_n(!!s,39018),typeof s=="string"){let e=0;const t=yR.exec(s);if(_n(!!t,46558,{timestamp:s}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:us(s.seconds),nanos:us(s.nanos)}}function us(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Za(s){return typeof s=="string"?Ys.fromBase64String(s):Ys.fromUint8Array(s)}const $w="server_timestamp",Gw="__type__",Kw="__previous_value__",Yw="__local_write_time__";function Yg(s){return(s?.mapValue?.fields||{})[Gw]?.stringValue===$w}function Jd(s){const e=s.mapValue.fields[Kw];return Yg(e)?Jd(e):e}function iu(s){const e=Ja(s.mapValue.fields[Yw].timestampValue);return new Ut(e.seconds,e.nanos)}class vR{constructor(e,t,i,l,u,h,p,g,y,b,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=E}}const Id="(default)";class au{constructor(e,t){this.projectId=e,this.database=t||Id}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===Id}isEqual(e){return e instanceof au&&e.projectId===this.projectId&&e.database===this.database}}function bR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ve(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(s.options.projectId,e)}const Qw="__type__",_R="__max__",Xh={mapValue:{}},Xw="__vector__",Dd="value";function eo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Yg(s)?4:xR(s)?9007199254740991:wR(s)?10:11:yt(28295,{value:s})}function Ri(s,e){if(s===e)return!0;const t=eo(s);if(t!==eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return iu(s).isEqual(iu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=Ja(l.timestampValue),p=Ja(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Za(l.bytesValue).isEqual(Za(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return us(l.geoPointValue.latitude)===us(u.geoPointValue.latitude)&&us(l.geoPointValue.longitude)===us(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return us(l.integerValue)===us(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=us(l.doubleValue),p=us(u.doubleValue);return h===p?Rd(h)===Rd(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return Pl(s.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},p=u.mapValue.fields||{};if(u2(h)!==u2(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Ri(h[g],p[g])))return!1;return!0})(s,e);default:return yt(52216,{left:s})}}function ou(s,e){return(s.values||[]).find((t=>Ri(t,e)))!==void 0}function Vl(s,e){if(s===e)return 0;const t=eo(s),i=eo(e);if(t!==i)return Qt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qt(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=us(u.integerValue||u.doubleValue),g=us(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return d2(s.timestampValue,e.timestampValue);case 4:return d2(iu(s),iu(e));case 5:return sg(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=Za(u),g=Za(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Qt(p[y],g[y]);if(b!==0)return b}return Qt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=Qt(us(u.latitude),us(h.latitude));return p!==0?p:Qt(us(u.longitude),us(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return f2(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},y=p[Dd]?.arrayValue,b=g[Dd]?.arrayValue,E=Qt(y?.values?.length||0,b?.values?.length||0);return E!==0?E:f2(y,b)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Xh.mapValue&&h===Xh.mapValue)return 0;if(u===Xh.mapValue)return 1;if(h===Xh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=h.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let E=0;E<g.length&&E<b.length;++E){const T=sg(g[E],b[E]);if(T!==0)return T;const O=Vl(p[g[E]],y[b[E]]);if(O!==0)return O}return Qt(g.length,b.length)})(s.mapValue,e.mapValue);default:throw yt(23264,{he:t})}}function d2(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Qt(s,e);const t=Ja(s),i=Ja(e),l=Qt(t.seconds,i.seconds);return l!==0?l:Qt(t.nanos,i.nanos)}function f2(s,e){const t=s.values||[],i=e.values||[];for(let l=0;l<t.length&&l<i.length;++l){const u=Vl(t[l],i[l]);if(u)return u}return Qt(t.length,i.length)}function Ul(s){return rg(s)}function rg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Ja(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Za(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return at.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",l=!0;for(const u of t.values||[])l?l=!1:i+=",",i+=rg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let l="{",u=!0;for(const h of i)u?u=!1:l+=",",l+=`${h}:${rg(t.fields[h])}`;return l+"}"})(s.mapValue):yt(61005,{value:s})}function pd(s){switch(eo(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jd(s);return e?16+pd(e):16;case 5:return 2*s.stringValue.length;case 6:return Za(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+pd(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return io(i.fields,((u,h)=>{l+=u.length+pd(h)})),l})(s.mapValue);default:throw yt(13486,{value:s})}}function m2(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function ig(s){return!!s&&"integerValue"in s}function Qg(s){return!!s&&"arrayValue"in s}function p2(s){return!!s&&"nullValue"in s}function g2(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function gd(s){return!!s&&"mapValue"in s}function wR(s){return(s?.mapValue?.fields||{})[Qw]?.stringValue===Xw}function Yc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return io(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Yc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yc(s.arrayValue.values[t]);return e}return{...s}}function xR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===_R}class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(t)}setAll(e){let t=Ks.emptyPath(),i={},l=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,l),i={},l=[],t=p.popLast()}h?i[p.lastSegment()]=Yc(h):l.push(p.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,l)}delete(e){const t=this.field(e.popLast());gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=t.mapValue.fields[e.get(i)];gd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,i){io(t,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new wr(Yc(this.value))}}function Jw(s){const e=[];return io(s.fields,((t,i)=>{const l=new Ks([t]);if(gd(i)){const u=Jw(i.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new Dr(e)}class er{constructor(e,t,i,l,u,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=l,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new er(e,0,St.min(),St.min(),St.min(),wr.empty(),0)}static newFoundDocument(e,t,i,l){return new er(e,1,t,St.min(),i,l,0)}static newNoDocument(e,t){return new er(e,2,t,St.min(),St.min(),wr.empty(),0)}static newUnknownDocument(e,t){return new er(e,3,t,St.min(),St.min(),wr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Md{constructor(e,t){this.position=e,this.inclusive=t}}function y2(s,e,t){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],h=s.position[l];if(u.field.isKeyField()?i=at.comparator(at.fromName(h.referenceValue),t.key):i=Vl(h,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function v2(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ri(s.position[t],e.position[t]))return!1;return!0}class lu{constructor(e,t="asc"){this.field=e,this.dir=t}}function ER(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Zw{}class vs extends Zw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new kR(e,t,i):t==="array-contains"?new jR(e,i):t==="in"?new NR(e,i):t==="not-in"?new AR(e,i):t==="array-contains-any"?new RR(e,i):new vs(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new SR(e,i):new CR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vl(t,this.value)):t!==null&&eo(this.value)===eo(t)&&this.matchesComparison(Vl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class di extends Zw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new di(e,t)}matches(e){return ex(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ex(s){return s.op==="and"}function tx(s){return TR(s)&&ex(s)}function TR(s){for(const e of s.filters)if(e instanceof di)return!1;return!0}function ag(s){if(s instanceof vs)return s.field.canonicalString()+s.op.toString()+Ul(s.value);if(tx(s))return s.filters.map((e=>ag(e))).join(",");{const e=s.filters.map((t=>ag(t))).join(",");return`${s.op}(${e})`}}function nx(s,e){return s instanceof vs?(function(i,l){return l instanceof vs&&i.op===l.op&&i.field.isEqual(l.field)&&Ri(i.value,l.value)})(s,e):s instanceof di?(function(i,l){return l instanceof di&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,h,p)=>u&&nx(h,l.filters[p])),!0):!1})(s,e):void yt(19439)}function sx(s){return s instanceof vs?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ul(t.value)}`})(s):s instanceof di?(function(t){return t.op.toString()+" {"+t.getFilters().map(sx).join(" ,")+"}"})(s):"Filter"}class kR extends vs{constructor(e,t,i){super(e,t,i),this.key=at.fromName(i.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.matchesComparison(t)}}class SR extends vs{constructor(e,t){super(e,"in",t),this.keys=rx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class CR extends vs{constructor(e,t){super(e,"not-in",t),this.keys=rx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function rx(s,e){return(e.arrayValue?.values||[]).map((t=>at.fromName(t.referenceValue)))}class jR extends vs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qg(t)&&ou(t.arrayValue,this.value)}}class NR extends vs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ou(this.value.arrayValue,t)}}class AR extends vs{constructor(e,t){super(e,"not-in",t)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ou(this.value.arrayValue,t)}}class RR extends vs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>ou(this.value.arrayValue,i)))}}class IR{constructor(e,t=null,i=[],l=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function b2(s,e=null,t=[],i=[],l=null,u=null,h=null){return new IR(s,e,t,i,l,u,h)}function Xg(s){const e=jt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>ag(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Xd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ul(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ul(i))).join(",")),e.Te=t}return e.Te}function Jg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!ER(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!nx(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!v2(s.startAt,e.startAt)&&v2(s.endAt,e.endAt)}function og(s){return at.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Yl{constructor(e,t=null,i=[],l=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function DR(s,e,t,i,l,u,h,p){return new Yl(s,e,t,i,l,u,h,p)}function Zd(s){return new Yl(s)}function _2(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function MR(s){return at.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function ix(s){return s.collectionGroup!==null}function Qc(s){const e=jt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Ss(Ks.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new lu(u,i))})),t.has(Ks.keyField().canonicalString())||e.Ie.push(new lu(Ks.keyField(),i))}return e.Ie}function ji(s){const e=jt(s);return e.Ee||(e.Ee=LR(e,Qc(s))),e.Ee}function LR(s,e){if(s.limitType==="F")return b2(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new lu(l.field,u)}));const t=s.endAt?new Md(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Md(s.startAt.position,s.startAt.inclusive):null;return b2(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function lg(s,e){const t=s.filters.concat([e]);return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function OR(s,e){const t=s.explicitOrderBy.concat([e]);return new Yl(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Ld(s,e,t){return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function ef(s,e){return Jg(ji(s),ji(e))&&s.limitType===e.limitType}function ax(s){return`${Xg(ji(s))}|lt:${s.limitType}`}function Cl(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((l=>sx(l))).join(", ")}]`),Xd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((l=>Ul(l))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((l=>Ul(l))).join(",")),`Target(${i})`})(ji(s))}; limitType=${s.limitType})`}function tf(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):at.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of Qc(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(h,p,g){const y=y2(h,p,g);return h.inclusive?y<=0:y<0})(i.startAt,Qc(i),l)||i.endAt&&!(function(h,p,g){const y=y2(h,p,g);return h.inclusive?y>=0:y>0})(i.endAt,Qc(i),l))})(s,e)}function PR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ox(s){return(e,t)=>{let i=!1;for(const l of Qc(s)){const u=VR(l,e,t);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function VR(s,e,t){const i=s.field.isKeyField()?at.comparator(e.key,t.key):(function(u,h,p){const g=h.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Vl(g,y):yt(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return yt(19790,{direction:s.dir})}}class qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[t]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){io(this.inner,((t,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return Hw(this.inner)}size(){return this.innerSize}}const UR=new Jn(at.comparator);function ca(){return UR}const lx=new Jn(at.comparator);function Hc(...s){let e=lx;for(const t of s)e=e.insert(t.key,t);return e}function cx(s){let e=lx;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function jo(){return Xc()}function ux(){return Xc()}function Xc(){return new qo((s=>s.toString()),((s,e)=>s.isEqual(e)))}const BR=new Jn(at.comparator),zR=new Ss(at.comparator);function Xt(...s){let e=zR;for(const t of s)e=e.add(t);return e}const FR=new Ss(Qt);function qR(){return FR}function Zg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rd(e)?"-0":e}}function hx(s){return{integerValue:""+s}}function dx(s,e){return mR(e)?hx(e):Zg(s,e)}class nf{constructor(){this._=void 0}}function HR(s,e,t){return s instanceof cu?(function(l,u){const h={fields:{[Gw]:{stringValue:$w},[Yw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Yg(u)&&(u=Jd(u)),u&&(h.fields[Kw]=u),{mapValue:h}})(t,e):s instanceof uu?mx(s,e):s instanceof hu?px(s,e):(function(l,u){const h=fx(l,u),p=w2(h)+w2(l.Ae);return ig(h)&&ig(l.Ae)?hx(p):Zg(l.serializer,p)})(s,e)}function WR(s,e,t){return s instanceof uu?mx(s,e):s instanceof hu?px(s,e):t}function fx(s,e){return s instanceof du?(function(i){return ig(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class cu extends nf{}class uu extends nf{constructor(e){super(),this.elements=e}}function mx(s,e){const t=gx(e);for(const i of s.elements)t.some((l=>Ri(l,i)))||t.push(i);return{arrayValue:{values:t}}}class hu extends nf{constructor(e){super(),this.elements=e}}function px(s,e){let t=gx(e);for(const i of s.elements)t=t.filter((l=>!Ri(l,i)));return{arrayValue:{values:t}}}class du extends nf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function w2(s){return us(s.integerValue||s.doubleValue)}function gx(s){return Qg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class yx{constructor(e,t){this.field=e,this.transform=t}}function $R(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof uu&&l instanceof uu||i instanceof hu&&l instanceof hu?Pl(i.elements,l.elements,Ri):i instanceof du&&l instanceof du?Ri(i.Ae,l.Ae):i instanceof cu&&l instanceof cu})(s.transform,e.transform)}class GR{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class sf{}function vx(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new rf(s.key,cr.none()):new Tu(s.key,s.data,cr.none());{const t=s.data,i=wr.empty();let l=new Ss(Ks.comparator);for(let u of e.fields)if(!l.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?i.delete(u):i.set(u,h),l=l.add(u)}return new ao(s.key,i,new Dr(l.toArray()),cr.none())}}function KR(s,e,t){s instanceof Tu?(function(l,u,h){const p=l.value.clone(),g=E2(l.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,t):s instanceof ao?(function(l,u,h){if(!yd(l.precondition,u))return void u.convertToUnknownDocument(h.version);const p=E2(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(bx(l)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Jc(s,e,t,i){return s instanceof Tu?(function(u,h,p,g){if(!yd(u.precondition,h))return p;const y=u.value.clone(),b=T2(u.fieldTransforms,g,h);return y.setAll(b),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,t,i):s instanceof ao?(function(u,h,p,g){if(!yd(u.precondition,h))return p;const y=T2(u.fieldTransforms,g,h),b=h.data;return b.setAll(bx(u)),b.setAll(y),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(s,e,t,i):(function(u,h,p){return yd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,t)}function YR(s,e){let t=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=fx(i.transform,l||null);u!=null&&(t===null&&(t=wr.empty()),t.set(i.field,u))}return t||null}function x2(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Pl(i,l,((u,h)=>$R(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Tu extends sf{constructor(e,t,i,l=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ao extends sf{constructor(e,t,i,l,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function bx(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function E2(s,e,t){const i=new Map;_n(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let l=0;l<t.length;l++){const u=s[l],h=u.transform,p=e.data.field(u.field);i.set(u.field,WR(h,p,t[l]))}return i}function T2(s,e,t){const i=new Map;for(const l of s){const u=l.transform,h=t.data.field(l.field);i.set(l.field,HR(u,h,e))}return i}class rf extends sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QR extends sf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XR{constructor(e,t,i,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&KR(u,e,i[l])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Jc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Jc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=ux();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=t.has(l.key)?null:p;const g=vx(h,p);g!==null&&i.set(l.key,g),h.isValidDocument()||h.convertToNoDocument(St.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xt())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((t,i)=>x2(t,i)))&&Pl(this.baseMutations,e.baseMutations,((t,i)=>x2(t,i)))}}class ey{constructor(e,t,i,l){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=l}static from(e,t,i){_n(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return BR})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,i[h].version);return new ey(e,t,i,l)}}class JR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ZR{constructor(e,t){this.count=e,this.unchangedNames=t}}var ys,en;function e4(s){switch(s){case me.OK:return yt(64938);case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0;default:return yt(15467,{code:s})}}function _x(s){if(s===void 0)return la("GRPC error has no .code"),me.UNKNOWN;switch(s){case ys.OK:return me.OK;case ys.CANCELLED:return me.CANCELLED;case ys.UNKNOWN:return me.UNKNOWN;case ys.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case ys.INTERNAL:return me.INTERNAL;case ys.UNAVAILABLE:return me.UNAVAILABLE;case ys.UNAUTHENTICATED:return me.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case ys.NOT_FOUND:return me.NOT_FOUND;case ys.ALREADY_EXISTS:return me.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return me.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case ys.ABORTED:return me.ABORTED;case ys.OUT_OF_RANGE:return me.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return me.UNIMPLEMENTED;case ys.DATA_LOSS:return me.DATA_LOSS;default:return yt(39323,{code:s})}}(en=ys||(ys={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";function t4(){return new TextEncoder}const n4=new Ka([4294967295,4294967295],0);function k2(s){const e=t4().encode(s),t=new Dw;return t.update(e),new Uint8Array(t.digest())}function S2(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ka([t,i],0),new Ka([l,u],0)]}class ty{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Wc(`Invalid padding: ${t}`);if(i<0)throw new Wc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Wc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ka.fromNumber(this.ge)}ye(e,t,i){let l=e.add(t.multiply(Ka.fromNumber(i)));return l.compare(n4)===1&&(l=new Ka([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=k2(e),[i,l]=S2(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);if(!this.we(h))return!1}return!0}static create(e,t,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new ty(u,l,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const t=k2(e),[i,l]=S2(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);this.be(h)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class af{constructor(e,t,i,l,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const l=new Map;return l.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new af(St.min(),l,new Jn(Qt),ca(),Xt())}}class ku{constructor(e,t,i,l,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ku(i,t,Xt(),Xt(),Xt())}}class vd{constructor(e,t,i,l){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=l}}class wx{constructor(e,t){this.targetId=e,this.Ce=t}}class xx{constructor(e,t,i=Ys.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=l}}class C2{constructor(){this.ve=0,this.Fe=j2(),this.Me=Ys.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xt(),t=Xt(),i=Xt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:i=i.add(l);break;default:yt(38017,{changeType:u})}})),new ku(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=j2()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,_n(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class s4{constructor(e){this.Ge=e,this.ze=new Map,this.je=ca(),this.He=Jh(),this.Je=Jh(),this.Ze=new Jn(Qt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:yt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,i=e.Ce.count,l=this.ot(t);if(l){const u=l.target;if(og(u))if(i===0){const h=new at(u.path);this.et(t,h,er.newNoDocument(h,St.min()))}else _n(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=t;let h,p;try{h=Za(i).toUint8Array()}catch(g){if(g instanceof Ww)return Ol("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new ty(h,l,u)}catch(g){return Ol(g instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let l=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(t,u,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&og(p.target)){const g=new at(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,er.newNoDocument(g,e))}u.Be&&(t.set(h,u.ke()),u.Ke())}}));let i=Xt();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new af(e,t,this.Ze,this.je,i);return this.je=ca(),this.He=Jh(),this.Je=Jh(),this.Ze=new Jn(Qt),l}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.qe(t,1):l.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new C2,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ss(Qt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ss(Qt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||$e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new C2),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jh(){return new Jn(at.comparator)}function j2(){return new Jn(at.comparator)}const r4={asc:"ASCENDING",desc:"DESCENDING"},i4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a4={and:"AND",or:"OR"};class o4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cg(s,e){return s.useProto3Json||Xd(e)?e:{value:e}}function Od(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ex(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function l4(s,e){return Od(s,e.toTimestamp())}function Ni(s){return _n(!!s,49232),St.fromTimestamp((function(t){const i=Ja(t);return new Ut(i.seconds,i.nanos)})(s))}function ny(s,e){return ug(s,e).canonicalString()}function ug(s,e){const t=(function(l){return new Pn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?t:t.child(e)}function Tx(s){const e=Pn.fromString(s);return _n(Nx(e),10190,{key:e.toString()}),e}function hg(s,e){return ny(s.databaseId,e.path)}function kp(s,e){const t=Tx(e);if(t.get(1)!==s.databaseId.projectId)throw new Ve(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ve(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new at(Sx(t))}function kx(s,e){return ny(s.databaseId,e)}function c4(s){const e=Tx(s);return e.length===4?Pn.emptyPath():Sx(e)}function dg(s){return new Pn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Sx(s){return _n(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function N2(s,e,t){return{name:hg(s,e),fields:t.value.mapValue.fields}}function u4(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:yt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(_n(b===void 0||typeof b=="string",58123),Ys.fromBase64String(b||"")):(_n(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Ys.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const b=y.code===void 0?me.UNKNOWN:_x(y.code);return new Ve(b,y.message||"")})(h);t=new xx(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=kp(s,i.document.name),u=Ni(i.document.updateTime),h=i.document.createTime?Ni(i.document.createTime):St.min(),p=new wr({mapValue:{fields:i.document.fields}}),g=er.newFoundDocument(l,u,h,p),y=i.targetIds||[],b=i.removedTargetIds||[];t=new vd(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=kp(s,i.document),u=i.readTime?Ni(i.readTime):St.min(),h=er.newNoDocument(l,u),p=i.removedTargetIds||[];t=new vd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=kp(s,i.document),u=i.removedTargetIds||[];t=new vd([],u,l,null)}else{if(!("filter"in e))return yt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,h=new ZR(l,u),p=i.targetId;t=new wx(p,h)}}return t}function h4(s,e){let t;if(e instanceof Tu)t={update:N2(s,e.key,e.value)};else if(e instanceof rf)t={delete:hg(s,e.key)};else if(e instanceof ao)t={update:N2(s,e.key,e.data),updateMask:_4(e.fieldMask)};else{if(!(e instanceof QR))return yt(16599,{dt:e.type});t={verify:hg(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof cu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof uu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof hu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof du)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw yt(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:l4(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:yt(27497)})(s,e.precondition)),t}function d4(s,e){return s&&s.length>0?(_n(e!==void 0,14353),s.map((t=>(function(l,u){let h=l.updateTime?Ni(l.updateTime):Ni(u);return h.isEqual(St.min())&&(h=Ni(u)),new GR(h,l.transformResults||[])})(t,e)))):[]}function f4(s,e){return{documents:[kx(s,e.path)]}}function m4(s,e){const t={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=kx(s,l);const u=(function(y){if(y.length!==0)return jx(di.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:jl(T.field),direction:y4(T.dir)}})(b)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=cg(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:l}}function p4(s){let e=c4(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let l=null;if(i>0){_n(i===1,65062);const b=t.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=(function(E){const T=Cx(E);return T instanceof di&&tx(T)?T.getFilters():[T]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((T=>(function(H){return new lu(Nl(H.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(T)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let T;return T=typeof E=="object"?E.value:E,Xd(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(E){const T=!!E.before,O=E.values||[];return new Md(O,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const T=!E.before,O=E.values||[];return new Md(O,T)})(t.endAt)),DR(e,l,h,u,p,"F",g,y)}function g4(s,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Cx(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Nl(t.unaryFilter.field);return vs.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Nl(t.unaryFilter.field);return vs.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Nl(t.unaryFilter.field);return vs.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Nl(t.unaryFilter.field);return vs.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return vs.create(Nl(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return di.create(t.compositeFilter.filters.map((i=>Cx(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return yt(1026)}})(t.compositeFilter.op))})(s):yt(30097,{filter:s})}function y4(s){return r4[s]}function v4(s){return i4[s]}function b4(s){return a4[s]}function jl(s){return{fieldPath:s.canonicalString()}}function Nl(s){return Ks.fromServerFormat(s.fieldPath)}function jx(s){return s instanceof vs?(function(t){if(t.op==="=="){if(g2(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NAN"}};if(p2(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(g2(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NAN"}};if(p2(t.value))return{unaryFilter:{field:jl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jl(t.field),op:v4(t.op),value:t.value}}})(s):s instanceof di?(function(t){const i=t.getFilters().map((l=>jx(l)));return i.length===1?i[0]:{compositeFilter:{op:b4(t.op),filters:i}}})(s):yt(54877,{filter:s})}function _4(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Nx(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function Ax(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class qa{constructor(e,t,i,l,u=St.min(),h=St.min(),p=Ys.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new qa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class w4{constructor(e){this.yt=e}}function x4(s){const e=p4({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ld(e,e.limit,"L"):e}class E4{constructor(){this.Sn=new T4}addToCollectionParentIndex(e,t){return this.Sn.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(Xa.min())}getMinOffsetFromCollectionGroup(e,t){return we.resolve(Xa.min())}updateCollectionGroup(e,t,i){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}}class T4{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t]||new Ss(Pn.comparator),u=!l.has(i);return this.index[t]=l.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t];return l&&l.has(i)}getEntries(e){return(this.index[e]||new Ss(Pn.comparator)).toArray()}}const A2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rx=41943040;class _r{static withCacheSize(e){return new _r(e,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}_r.DEFAULT_COLLECTION_PERCENTILE=10,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_r.DEFAULT=new _r(Rx,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_r.DISABLED=new _r(-1,0,0);class Bl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Bl(0)}static ar(){return new Bl(-1)}}const R2="LruGarbageCollector",k4=1048576;function I2([s,e],[t,i]){const l=Qt(s,t);return l===0?Qt(e,i):l}class S4{constructor(e){this.Pr=e,this.buffer=new Ss(I2),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();I2(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class C4{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){$e(R2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Kl(t)?$e(R2,"Ignoring IndexedDB error during garbage collection: ",t):await Gl(t)}await this.Ar(3e5)}))}}class j4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return we.resolve(Qd.ce);const i=new S4(t);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($e("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(A2)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A2):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,l,u,h,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,h=Date.now(),this.nthSequenceNumber(e,l)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,t)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),Sl()<=Yt.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${l} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:E}))))}}function N4(s,e){return new j4(s,e)}class A4{constructor(){this.changes=new qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?we.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class R4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class I4{constructor(e,t,i,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(i!==null&&Jc(i.mutation,l,Dr.empty(),Ut.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Xt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Xt()){const l=jo();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,i).next((u=>{let h=Hc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=jo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Xt())))}populateOverlays(e,t,i){const l=[];return i.forEach((u=>{t.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,l){let u=ca();const h=Xc(),p=(function(){return Xc()})();return t.forEach(((g,y)=>{const b=i.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof ao)?u=u.insert(y.key,y):b!==void 0?(h.set(y.key,b.mutation.getFieldMask()),Jc(b.mutation,y,b.mutation.getFieldMask(),Ut.now())):h.set(y.key,Dr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,b)=>h.set(y,b))),t.forEach(((y,b)=>p.set(y,new R4(b,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=Xc();let l=new Jn(((h,p)=>h-p)),u=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let b=i.get(g)||Dr.empty();b=p.applyToLocalView(y,b),i.set(g,b);const E=(l.get(p.batchId)||Xt()).add(g);l=l.insert(p.batchId,E)}))})).next((()=>{const h=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,E=ux();b.forEach((T=>{if(!u.has(T)){const O=vx(t.get(T),i.get(T));O!==null&&E.set(T,O),u=u.add(T)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return we.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,l){return MR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ix(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,l):this.getDocumentsMatchingCollectionQuery(e,t,i,l)}getNextDocuments(e,t,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,l-u.size):we.resolve(jo());let p=ru,g=u;return h.next((y=>we.forEach(y,((b,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),u.get(b)?we.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Xt()))).next((b=>({batchId:p,changes:cx(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next((i=>{let l=Hc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,l){const u=t.collectionGroup;let h=Hc();return this.indexManager.getCollectionParents(e,u).next((p=>we.forEach(p,(g=>{const y=(function(E,T){return new Yl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((b=>{b.forEach(((E,T)=>{h=h.insert(E,T)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,l)))).next((h=>{u.forEach(((g,y)=>{const b=y.getKey();h.get(b)===null&&(h=h.insert(b,er.newInvalidDocument(b)))}));let p=Hc();return h.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&Jc(b.mutation,y,Dr.empty(),Ut.now()),tf(t,y)&&(p=p.insert(g,y))})),p}))}}class D4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return we.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Ni(l.createTime)}})(t)),we.resolve()}getNamedQuery(e,t){return we.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(l){return{name:l.name,query:x4(l.bundledQuery),readTime:Ni(l.readTime)}})(t)),we.resolve()}}class M4{constructor(){this.overlays=new Jn(at.comparator),this.Lr=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}getOverlays(e,t){const i=jo();return we.forEach(t,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((l,u)=>{this.bt(e,t,u)})),we.resolve()}removeOverlaysForBatchId(e,t,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),we.resolve()}getOverlaysForCollection(e,t,i){const l=jo(),u=t.length+1,h=new at(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return we.resolve(l)}getOverlaysForCollectionGroup(e,t,i,l){let u=new Jn(((y,b)=>y-b));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let b=u.get(y.largestBatchId);b===null&&(b=jo(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=jo(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=l)););return we.resolve(p)}bt(e,t,i){const l=this.overlays.get(i.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new JR(t,i));let u=this.Lr.get(t);u===void 0&&(u=Xt(),this.Lr.set(t,u)),this.Lr.set(t,u.add(i.key))}}class L4{constructor(){this.sessionToken=Ys.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,we.resolve()}}class sy{constructor(){this.kr=new Ss(Ds.Kr),this.qr=new Ss(Ds.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Ds(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Ds(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new at(new Pn([])),i=new Ds(t,e),l=new Ds(t,e+1),u=[];return this.qr.forEachInRange([i,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new at(new Pn([])),i=new Ds(t,e),l=new Ds(t,e+1);let u=Xt();return this.qr.forEachInRange([i,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new Ds(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ds{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return at.comparator(e.key,t.key)||Qt(e.Hr,t.Hr)}static Ur(e,t){return Qt(e.Hr,t.Hr)||at.comparator(e.key,t.key)}}class O4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ss(Ds.Kr)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new XR(u,t,i,l);this.mutationQueue.push(h);for(const p of l)this.Jr=this.Jr.add(new Ds(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return we.resolve(h)}lookupMutationBatch(e,t){return we.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,l=this.Xr(i),u=l<0?0:l;return we.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?Kg:this.Yn-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ds(t,0),l=new Ds(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(h=>{const p=this.Zr(h.Hr);u.push(p)})),we.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ss(Qt);return t.forEach((l=>{const u=new Ds(l,0),h=new Ds(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),we.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,l=i.length+1;let u=i;at.isDocumentKey(u)||(u=u.child(""));const h=new Ds(new at(u),0);let p=new Ss(Qt);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),h),we.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){_n(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return we.forEach(t.mutations,(l=>{const u=new Ds(l.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Ds(t,0),l=this.Jr.firstAfterOrEqual(i);return we.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class P4{constructor(e){this.ti=e,this.docs=(function(){return new Jn(at.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,l=this.docs.get(i),u=l?l.size:0,h=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return we.resolve(i?i.document.mutableCopy():er.newInvalidDocument(t))}getEntries(e,t){let i=ca();return t.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():er.newInvalidDocument(l))})),we.resolve(i)}getDocumentsMatchingQuery(e,t,i,l){let u=ca();const h=t.path,p=new at(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||uR(cR(b),i)<=0||(l.has(b.key)||tf(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return we.resolve(u)}getAllFromCollectionGroup(e,t,i,l){yt(9500)}ni(e,t){return we.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new V4(this)}getSize(e){return we.resolve(this.size)}}class V4 extends A4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?t.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),we.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class U4{constructor(e){this.persistence=e,this.ri=new qo((t=>Xg(t)),Jg),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.ii=0,this.si=new sy,this.targetCount=0,this.oi=Bl._r()}forEachTarget(e,t){return this.ri.forEach(((i,l)=>t(l))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),we.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Bl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.lr(t),we.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,i){let l=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),we.waitFor(u).next((()=>l))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return we.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),we.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const l=this.persistence.referenceDelegate,u=[];return l&&t.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),we.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),we.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return we.resolve(i)}containsKey(e,t){return we.resolve(this.si.containsKey(t))}}class Ix{constructor(e,t){this._i={},this.overlays={},this.ai=new Qd(0),this.ui=!1,this.ui=!0,this.ci=new L4,this.referenceDelegate=e(this),this.li=new U4(this),this.indexManager=new E4,this.remoteDocumentCache=(function(l){return new P4(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new w4(t),this.Pi=new D4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new O4(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){$e("MemoryPersistence","Starting transaction:",e);const l=new B4(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,t){return we.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class B4 extends dR{constructor(e){super(),this.currentSequenceNumber=e}}class ry{constructor(e){this.persistence=e,this.Ri=new sy,this.Ai=null}static Vi(e){return new ry(e)}get di(){if(this.Ai)return this.Ai;throw yt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),we.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),we.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.di,(i=>{const l=at.fromPath(i);return this.mi(e,l).next((u=>{u||t.removeEntry(l,St.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return we.or([()=>we.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Pd{constructor(e,t){this.persistence=e,this.fi=new qo((i=>pR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=N4(this,t)}static Vi(e,t){return new Pd(e,t)}Ti(){}Ii(e){return we.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((l=>i+l))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return we.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?we.resolve():t(l)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(h=>this.wr(e,h,t).next((p=>{p||(i++,u.removeEntry(h,St.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),we.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),we.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),we.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pd(e.data.value)),t}wr(e,t,i){return we.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.fi.get(t);return we.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class iy{constructor(e,t,i,l){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=l}static Es(e,t){let i=Xt(),l=Xt();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new iy(e,t.fromCache,i,l)}}class z4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class F4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return pC()?8:fR(tr())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,l){const u={result:null};return this.gs(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,t,l,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new z4;return this.ys(e,t,h).next((p=>{if(u.result=p,this.As)return this.ws(e,t,h,p.size)}))})).next((()=>u.result))}ws(e,t,i,l){return i.documentReadCount<this.Vs?(Sl()<=Yt.DEBUG&&$e("QueryEngine","SDK will not create cache indexes for query:",Cl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),we.resolve()):(Sl()<=Yt.DEBUG&&$e("QueryEngine","Query:",Cl(t),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Sl()<=Yt.DEBUG&&$e("QueryEngine","The SDK decides to create cache indexes for query:",Cl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(t))):we.resolve())}gs(e,t){if(_2(t))return we.resolve(null);let i=ji(t);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Ld(t,null,"F"),i=ji(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=Xt(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(t,p);return this.Ss(t,y,h,g.readTime)?this.gs(e,Ld(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,i,l){return _2(t)||l.isEqual(St.min())?we.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(t,u);return this.Ss(t,h,i,l)?we.resolve(null):(Sl()<=Yt.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Cl(t)),this.Ds(e,h,t,lR(l,ru)).next((p=>p)))}))}bs(e,t){let i=new Ss(ox(e));return t.forEach(((l,u)=>{tf(e,u)&&(i=i.add(u))})),i}Ss(e,t,i,l){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,t,i){return Sl()<=Yt.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",Cl(t)),this.fs.getDocumentsMatchingQuery(e,t,Xa.min(),i)}Ds(e,t,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const ay="LocalStore",q4=3e8;class H4{constructor(e,t,i,l){this.persistence=e,this.Cs=t,this.serializer=l,this.vs=new Jn(Qt),this.Fs=new qo((u=>Xg(u)),Jg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function W4(s,e,t,i){return new H4(s,e,t,i)}async function Dx(s,e){const t=jt(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return t.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=Xt();for(const y of l){h.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function $4(s,e){const t=jt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const E=y.batch,T=E.keys();let O=we.resolve();return T.forEach((H=>{O=O.next((()=>b.getEntry(g,H))).next((q=>{const z=y.docVersions.get(H);_n(z!==null,48541),q.version.compareTo(z)<0&&(E.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),b.addEntry(q)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Xt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,l)))}))}function Mx(s){const e=jt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function G4(s,e){const t=jt(s),i=e.snapshotVersion;let l=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});l=t.vs;const p=[];e.targetChanges.forEach(((b,E)=>{const T=l.get(E);if(!T)return;p.push(t.li.removeMatchingKeys(u,b.removedDocuments,E).next((()=>t.li.addMatchingKeys(u,b.addedDocuments,E))));let O=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?O=O.withResumeToken(Ys.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):b.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(b.resumeToken,i)),l=l.insert(E,O),(function(q,z,ne){return q.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=q4?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(T,O,b)&&p.push(t.li.updateTargetData(u,O))}));let g=ca(),y=Xt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(K4(u,h,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!i.isEqual(St.min())){const b=t.li.getLastRemoteSnapshotVersion(u).next((E=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(b)}return we.waitFor(p).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(t.vs=l,u)))}function K4(s,e,t){let i=Xt(),l=Xt();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=ca();return t.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(St.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):$e(ay,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function Y4(s,e){const t=jt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Kg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Q4(s,e){const t=jt(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return t.li.getTargetData(i,e).next((u=>u?(l=u,we.resolve(l)):t.li.allocateTargetId(i).next((h=>(l=new qa(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=t.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function fg(s,e,t){const i=jt(s),l=i.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!Kl(h))throw h;$e(ay,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function D2(s,e,t){const i=jt(s);let l=St.min(),u=Xt();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,b){const E=jt(g),T=E.Fs.get(b);return T!==void 0?we.resolve(E.vs.get(T)):E.li.getTargetData(y,b)})(i,h,ji(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?l:St.min(),t?u:Xt()))).next((p=>(X4(i,PR(e),p),{documents:p,ks:u})))))}function X4(s,e,t){let i=s.Ms.get(e)||St.min();t.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class M2{constructor(){this.activeTargetIds=qR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class J4{constructor(){this.vo=new M2,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new M2,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Z4{Mo(e){}shutdown(){}}const L2="ConnectivityMonitor";class O2{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){$e(L2,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){$e(L2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zh=null;function mg(){return Zh===null?Zh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zh++,"0x"+Zh.toString(16)}const Sp="RestConnection",eI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class tI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Id?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,t,i,l,u){const h=mg(),p=this.Qo(e,t.toUriEncodedString());$e(Sp,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),b=so(y);return this.zo(e,p,g,i,b).then((E=>($e(Sp,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw Ol(Sp,`RPC '${e}' ${h} failed with error: `,E,"url: ",p,"request:",i),E}))}jo(e,t,i,l,u,h){return this.Wo(e,t,i,l,u)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$l})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,t){const i=eI[e];let l=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class nI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Js="WebChannelConnection",Oc=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Ml extends tI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ml.c_){const e=Pw();Oc(e,Ow.STAT_EVENT,(t=>{t.stat===ng.PROXY?$e(Js,"STAT_EVENT: detected buffering proxy"):t.stat===ng.NOPROXY&&$e(Js,"STAT_EVENT: detected no buffering proxy")})),Ml.c_=!0}}zo(e,t,i,l,u){const h=mg();return new Promise(((p,g)=>{const y=new Mw;y.setWithCredentials(!0),y.listenOnce(Lw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case md.NO_ERROR:const E=y.getResponseJson();$e(Js,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),p(E);break;case md.TIMEOUT:$e(Js,`RPC '${e}' ${h} timed out`),g(new Ve(me.DEADLINE_EXCEEDED,"Request time out"));break;case md.HTTP_ERROR:const T=y.getStatus();if($e(Js,`RPC '${e}' ${h} failed with status:`,T,"response text:",y.getResponseText()),T>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const H=O?.error;if(H&&H.status&&H.message){const q=(function(ne){const W=ne.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(W)>=0?W:me.UNKNOWN})(H.status);g(new Ve(q,H.message))}else g(new Ve(me.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ve(me.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{$e(Js,`RPC '${e}' ${h} completed.`)}}));const b=JSON.stringify(l);$e(Js,`RPC '${e}' ${h} sending request:`,l),y.send(t,"POST",b,i,15)}))}T_(e,t,i){const l=mg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=u.join("");$e(Js,`Creating RPC '${e}' stream ${l}: ${y}`,p);const b=h.createWebChannel(y,p);this.I_(b);let E=!1,T=!1;const O=new nI({Ho:H=>{T?$e(Js,`Not sending because RPC '${e}' stream ${l} is closed:`,H):(E||($e(Js,`Opening RPC '${e}' stream ${l} transport.`),b.open(),E=!0),$e(Js,`RPC '${e}' stream ${l} sending:`,H),b.send(H))},Jo:()=>b.close()});return Oc(b,qc.EventType.OPEN,(()=>{T||($e(Js,`RPC '${e}' stream ${l} transport opened.`),O.i_())})),Oc(b,qc.EventType.CLOSE,(()=>{T||(T=!0,$e(Js,`RPC '${e}' stream ${l} transport closed`),O.o_(),this.E_(b))})),Oc(b,qc.EventType.ERROR,(H=>{T||(T=!0,Ol(Js,`RPC '${e}' stream ${l} transport errored. Name:`,H.name,"Message:",H.message),O.o_(new Ve(me.UNAVAILABLE,"The operation could not be completed")))})),Oc(b,qc.EventType.MESSAGE,(H=>{if(!T){const q=H.data[0];_n(!!q,16349);const z=q,ne=z?.error||z[0]?.error;if(ne){$e(Js,`RPC '${e}' stream ${l} received error:`,ne);const W=ne.status;let ee=(function(_e){const R=ys[_e];if(R!==void 0)return _x(R)})(W),ye=ne.message;ee===void 0&&(ee=me.INTERNAL,ye="Unknown error status: "+W+" with message "+ne.message),T=!0,O.o_(new Ve(ee,ye)),b.close()}else $e(Js,`RPC '${e}' stream ${l} received:`,q),O.__(q)}})),Ml.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Vw()}}function sI(s){return new Ml(s)}function Cp(){return typeof document<"u"?document:null}function of(s){return new o4(s,!0)}Ml.c_=!1;class Lx{constructor(e,t,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-i);l>0&&$e("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const P2="PersistentStream";class Ox{constructor(e,t,i,l,u,h,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Lx(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(la(t.toString()),la("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===t&&this.G_(i,l)}),(i=>{e((()=>{const l=new Ve(me.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return $e(P2,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():($e(P2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rI extends Ox{constructor(e,t,i,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,l,h),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=u4(this.serializer,e),i=(function(u){if(!("targetChange"in u))return St.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?St.min():h.readTime?Ni(h.readTime):St.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=dg(this.serializer),t.addTarget=(function(u,h){let p;const g=h.target;if(p=og(g)?{documents:f4(u,g)}:{query:m4(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=Ex(u,h.resumeToken);const y=cg(u,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(St.min())>0){p.readTime=Od(u,h.snapshotVersion.toTimestamp());const y=cg(u,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=g4(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=dg(this.serializer),t.removeTarget=e,this.K_(t)}}class iI extends Ox{constructor(e,t,i,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return _n(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_n(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_n(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=d4(e.writeResults,e.commitTime),i=Ni(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=dg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>h4(this.serializer,i)))};this.K_(t)}}class aI{}class oI extends aI{constructor(e,t,i,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ve(me.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,ug(t,i),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ve(me.UNKNOWN,u.toString())}))}jo(e,t,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,ug(t,i),l,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ve(me.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function lI(s,e,t,i){return new oI(s,e,t,i)}class cI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(la(t),this.aa=!1):$e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Uo="RemoteStore";class uI{constructor(e,t,i,l,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{Ho(this)&&($e(Uo,"Restarting streams for network reachability change."),await(async function(g){const y=jt(g);y.Ea.add(4),await Su(y),y.Va.set("Unknown"),y.Ea.delete(4),await lf(y)})(this))}))})),this.Va=new cI(i,l)}}async function lf(s){if(Ho(s))for(const e of s.Ra)await e(!0)}async function Su(s){for(const e of s.Ra)await e(!1)}function Px(s,e){const t=jt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),uy(t)?cy(t):Ql(t).O_()&&ly(t,e))}function oy(s,e){const t=jt(s),i=Ql(t);t.Ia.delete(e),i.O_()&&Vx(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ho(t)&&t.Va.set("Unknown"))}function ly(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(St.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ql(s).Z_(e)}function Vx(s,e){s.da.$e(e),Ql(s).X_(e)}function cy(s){s.da=new s4({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ql(s).start(),s.Va.ua()}function uy(s){return Ho(s)&&!Ql(s).x_()&&s.Ia.size>0}function Ho(s){return jt(s).Ea.size===0}function Ux(s){s.da=void 0}async function hI(s){s.Va.set("Online")}async function dI(s){s.Ia.forEach(((e,t)=>{ly(s,e)}))}async function fI(s,e){Ux(s),uy(s)?(s.Va.ha(e),cy(s)):s.Va.set("Unknown")}async function mI(s,e,t){if(s.Va.set("Online"),e instanceof xx&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,h),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){$e(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vd(s,i)}else if(e instanceof vd?s.da.Xe(e):e instanceof wx?s.da.st(e):s.da.tt(e),!t.isEqual(St.min()))try{const i=await Mx(s.localStore);t.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(Ys.EMPTY_BYTE_STRING,b.snapshotVersion)),Vx(u,g);const E=new qa(b.target,g,y,b.sequenceNumber);ly(u,E)})),u.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(i){$e(Uo,"Failed to raise snapshot:",i),await Vd(s,i)}}async function Vd(s,e,t){if(!Kl(e))throw e;s.Ea.add(1),await Su(s),s.Va.set("Offline"),t||(t=()=>Mx(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{$e(Uo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await lf(s)}))}function Bx(s,e){return e().catch((t=>Vd(s,t,e)))}async function cf(s){const e=jt(s),t=to(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kg;for(;pI(e);)try{const l=await Y4(e.localStore,i);if(l===null){e.Ta.length===0&&t.L_();break}i=l.batchId,gI(e,l)}catch(l){await Vd(e,l)}zx(e)&&Fx(e)}function pI(s){return Ho(s)&&s.Ta.length<10}function gI(s,e){s.Ta.push(e);const t=to(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function zx(s){return Ho(s)&&!to(s).x_()&&s.Ta.length>0}function Fx(s){to(s).start()}async function yI(s){to(s).ra()}async function vI(s){const e=to(s);for(const t of s.Ta)e.ea(t.mutations)}async function bI(s,e,t){const i=s.Ta.shift(),l=ey.from(i,e,t);await Bx(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await cf(s)}async function _I(s,e){e&&to(s).Y_&&await(async function(i,l){if((function(h){return e4(h)&&h!==me.ABORTED})(l.code)){const u=i.Ta.shift();to(i).B_(),await Bx(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await cf(i)}})(s,e),zx(s)&&Fx(s)}async function V2(s,e){const t=jt(s);t.asyncQueue.verifyOperationInProgress(),$e(Uo,"RemoteStore received new credentials");const i=Ho(t);t.Ea.add(3),await Su(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await lf(t)}async function wI(s,e){const t=jt(s);e?(t.Ea.delete(2),await lf(t)):e||(t.Ea.add(2),await Su(t),t.Va.set("Unknown"))}function Ql(s){return s.ma||(s.ma=(function(t,i,l){const u=jt(t);return u.sa(),new rI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:hI.bind(null,s),Yo:dI.bind(null,s),t_:fI.bind(null,s),J_:mI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),uy(s)?cy(s):s.Va.set("Unknown")):(await s.ma.stop(),Ux(s))}))),s.ma}function to(s){return s.fa||(s.fa=(function(t,i,l){const u=jt(t);return u.sa(),new iI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:yI.bind(null,s),t_:_I.bind(null,s),ta:vI.bind(null,s),na:bI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await cf(s)):(await s.fa.stop(),s.Ta.length>0&&($e(Uo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class hy{constructor(e,t,i,l,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,l,u){const h=Date.now()+i,p=new hy(e,t,h,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dy(s,e){if(la("AsyncQueue",`${e}: ${s}`),Kl(s))return new Ve(me.UNAVAILABLE,`${e}: ${s}`);throw s}class Ll{static emptySet(e){return new Ll(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||at.comparator(t.key,i.key):(t,i)=>at.comparator(t.key,i.key),this.keyedMap=Hc(),this.sortedSet=new Jn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ll)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ll;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class U2{constructor(){this.ga=new Jn(at.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):yt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class zl{constructor(e,t,i,l,u,h,p,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,l,u){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new zl(e,t,Ll.emptySet(t),h,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==i[l].type||!t[l].doc.isEqual(i[l].doc))return!1;return!0}}class xI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class EI{constructor(){this.queries=B2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const l=jt(t),u=l.queries;l.queries=B2(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Ve(me.ABORTED,"Firestore shutting down"))}}function B2(){return new qo((s=>ax(s)),ef)}async function fy(s,e){const t=jt(s);let i=3;const l=e.query;let u=t.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new xI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(l,!0);break;case 1:u.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(h){const p=dy(h,`Initialization of query '${Cl(e.query)}' failed`);return void e.onError(p)}t.queries.set(l,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&py(t)}async function my(s,e){const t=jt(s),i=e.query;let l=3;const u=t.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function TI(s,e){const t=jt(s);let i=!1;for(const l of e){const u=l.query,h=t.queries.get(u);if(h){for(const p of h.ba)p.Fa(l)&&(i=!0);h.wa=l}}i&&py(t)}function kI(s,e,t){const i=jt(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(t);i.queries.delete(e)}function py(s){s.Ca.forEach((e=>{e.next()}))}var pg,z2;(z2=pg||(pg={})).Ma="default",z2.Cache="cache";class gy{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new zl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==pg.Cache}}class qx{constructor(e){this.key=e}}class Hx{constructor(e){this.key=e}}class SI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xt(),this.mutatedKeys=Xt(),this.eu=ox(e),this.tu=new Ll(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new U2,l=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,h=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,E)=>{const T=l.get(b),O=tf(this.query,E)?E:null,H=!!T&&this.mutatedKeys.has(T.key),q=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let z=!1;T&&O?T.data.isEqual(O.data)?H!==q&&(i.track({type:3,doc:O}),z=!0):this.su(T,O)||(i.track({type:2,doc:O}),z=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(p=!0)):!T&&O?(i.track({type:0,doc:O}),z=!0):T&&!O&&(i.track({type:1,doc:T}),z=!0,(g||y)&&(p=!0)),z&&(O?(h=h.add(O),u=q?u.add(b):u.delete(b)):(h=h.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),i.track({type:1,doc:b})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((b,E)=>(function(O,H){const q=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Vt:z})}};return q(O)-q(H)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(i),l=l??!1;const p=t&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,h.length!==0||y?{snapshot:new zl(this.query,e.tu,u,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new U2,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new Hx(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new qx(i))})),t}cu(e){this.Za=e.ks,this.Ya=Xt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const yy="SyncEngine";class CI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class jI{constructor(e){this.key=e,this.hu=!1}}class NI{constructor(e,t,i,l,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new qo((p=>ax(p)),ef),this.Iu=new Map,this.Eu=new Set,this.Ru=new Jn(at.comparator),this.Au=new Map,this.Vu=new sy,this.du={},this.mu=new Map,this.fu=Bl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function AI(s,e,t=!0){const i=Qx(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await Wx(i,e,t,!0),l}async function RI(s,e){const t=Qx(s);await Wx(t,e,!0,!1)}async function Wx(s,e,t,i){const l=await Q4(s.localStore,ji(e)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let p;return i&&(p=await II(s,e,u,h==="current",l.resumeToken)),s.isPrimaryClient&&t&&Px(s.remoteStore,l),p}async function II(s,e,t,i,l){s.pu=(E,T,O)=>(async function(q,z,ne,W){let ee=z.view.ru(ne);ee.Ss&&(ee=await D2(q.localStore,z.query,!1).then((({documents:R})=>z.view.ru(R,ee))));const ye=W&&W.targetChanges.get(z.targetId),Se=W&&W.targetMismatches.get(z.targetId)!=null,_e=z.view.applyChanges(ee,q.isPrimaryClient,ye,Se);return q2(q,z.targetId,_e.au),_e.snapshot})(s,E,T,O);const u=await D2(s.localStore,e,!0),h=new SI(e,u.ks),p=h.ru(u.documents),g=ku.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",l),y=h.applyChanges(p,s.isPrimaryClient,g);q2(s,t,y.au);const b=new CI(e,t,h);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function DI(s,e,t){const i=jt(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((h=>!ef(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await fg(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),t&&oy(i.remoteStore,l.targetId),gg(i,l.targetId)})).catch(Gl)):(gg(i,l.targetId),await fg(i.localStore,l.targetId,!0))}async function MI(s,e){const t=jt(s),i=t.Tu.get(e),l=t.Iu.get(i.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),oy(t.remoteStore,i.targetId))}async function LI(s,e,t){const i=FI(s);try{const l=await(function(h,p){const g=jt(h),y=Ut.now(),b=p.reduce(((O,H)=>O.add(H.key)),Xt());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let H=ca(),q=Xt();return g.xs.getEntries(O,b).next((z=>{H=z,H.forEach(((ne,W)=>{W.isValidDocument()||(q=q.add(ne))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,H))).next((z=>{E=z;const ne=[];for(const W of p){const ee=YR(W,E.get(W.key).overlayedDocument);ee!=null&&ne.push(new ao(W.key,ee,Jw(ee.value.mapValue),cr.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,ne,p)})).next((z=>{T=z;const ne=z.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(O,z.batchId,ne)}))})).then((()=>({batchId:T.batchId,changes:cx(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(h,p,g){let y=h.du[h.currentUser.toKey()];y||(y=new Jn(Qt)),y=y.insert(p,g),h.du[h.currentUser.toKey()]=y})(i,l.batchId,t),await Cu(i,l.changes),await cf(i.remoteStore)}catch(l){const u=dy(l,"Failed to persist write");t.reject(u)}}async function $x(s,e){const t=jt(s);try{const i=await G4(t.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=t.Au.get(u);h&&(_n(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?_n(h.hu,14607):l.removedDocuments.size>0&&(_n(h.hu,42227),h.hu=!1))})),await Cu(t,i,e)}catch(i){await Gl(i)}}function F2(s,e,t){const i=jt(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const l=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(h,p){const g=jt(h);g.onlineState=p;let y=!1;g.queries.forEach(((b,E)=>{for(const T of E.ba)T.va(p)&&(y=!0)})),y&&py(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function OI(s,e,t){const i=jt(s);i.sharedClientState.updateQueryState(e,"rejected",t);const l=i.Au.get(e),u=l&&l.key;if(u){let h=new Jn(at.comparator);h=h.insert(u,er.newNoDocument(u,St.min()));const p=Xt().add(u),g=new af(St.min(),new Map,new Jn(Qt),h,p);await $x(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),vy(i)}else await fg(i.localStore,e,!1).then((()=>gg(i,e,t))).catch(Gl)}async function PI(s,e){const t=jt(s),i=e.batch.batchId;try{const l=await $4(t.localStore,e);Kx(t,i,null),Gx(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Cu(t,l)}catch(l){await Gl(l)}}async function VI(s,e,t){const i=jt(s);try{const l=await(function(h,p){const g=jt(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((E=>(_n(E!==null,37113),b=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);Kx(i,e,t),Gx(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Cu(i,l)}catch(l){await Gl(l)}}function Gx(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function Kx(s,e,t){const i=jt(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(t?u.reject(t):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function gg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||Yx(s,i)}))}function Yx(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(oy(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),vy(s))}function q2(s,e,t){for(const i of t)i instanceof qx?(s.Vu.addReference(i.key,e),UI(s,i)):i instanceof Hx?($e(yy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||Yx(s,i.key)):yt(19791,{wu:i})}function UI(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||($e(yy,"New document in limbo: "+t),s.Eu.add(i),vy(s))}function vy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new at(Pn.fromString(e)),i=s.fu.next();s.Au.set(i,new jI(t)),s.Ru=s.Ru.insert(t,i),Px(s.remoteStore,new qa(ji(Zd(t.path)),i,"TargetPurposeLimboResolution",Qd.ce))}}async function Cu(s,e,t){const i=jt(s),l=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const b=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){l.push(y);const b=iy.Es(g.targetId,y);u.push(b)}})))})),await Promise.all(h),i.Pu.J_(l),await(async function(g,y){const b=jt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>we.forEach(y,(T=>we.forEach(T.Ts,(O=>b.persistence.referenceDelegate.addReference(E,T.targetId,O))).next((()=>we.forEach(T.Is,(O=>b.persistence.referenceDelegate.removeReference(E,T.targetId,O)))))))))}catch(E){if(!Kl(E))throw E;$e(ay,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const O=b.vs.get(T),H=O.snapshotVersion,q=O.withLastLimboFreeSnapshotVersion(H);b.vs=b.vs.insert(T,q)}}})(i.localStore,u))}async function BI(s,e){const t=jt(s);if(!t.currentUser.isEqual(e)){$e(yy,"User change. New user:",e.toKey());const i=await Dx(t.localStore,e);t.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ve(me.CANCELLED,h))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cu(t,i.Ns)}}function zI(s,e){const t=jt(s),i=t.Au.get(e);if(i&&i.hu)return Xt().add(i.key);{let l=Xt();const u=t.Iu.get(e);if(!u)return l;for(const h of u){const p=t.Tu.get(h);l=l.unionWith(p.view.nu)}return l}}function Qx(s){const e=jt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=$x.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OI.bind(null,e),e.Pu.J_=TI.bind(null,e.eventManager),e.Pu.yu=kI.bind(null,e.eventManager),e}function FI(s){const e=jt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VI.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=of(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return W4(this.persistence,new F4,e.initialUser,this.serializer)}Cu(e){return new Ix(ry.Vi,this.serializer)}Du(e){return new J4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class qI extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_n(this.persistence.referenceDelegate instanceof Pd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new C4(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_r.withCacheSize(this.cacheSizeBytes):_r.DEFAULT;return new Ix((i=>Pd.Vi(i,t)),this.serializer)}}class yg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>F2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BI.bind(null,this.syncEngine),await wI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new EI})()}createDatastore(e){const t=of(e.databaseInfo.databaseId),i=sI(e.databaseInfo);return lI(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,l,u,h,p){return new uI(i,l,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>F2(this.syncEngine,t,0)),(function(){return O2.v()?new O2:new Z4})())}createSyncEngine(e,t){return(function(l,u,h,p,g,y,b){const E=new NI(l,u,h,p,g,y);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=jt(t);$e(Uo,"RemoteStore shutting down."),i.Ea.add(5),await Su(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}yg.provider={build:()=>new yg};class by{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):la("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const no="FirestoreClient";class HI{constructor(e,t,i,l,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=l,this.user=Zs.UNAUTHENTICATED,this.clientId=Gg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{$e(no,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>($e(no,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=dy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function jp(s,e){s.asyncQueue.verifyOperationInProgress(),$e(no,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await Dx(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function H2(s,e){s.asyncQueue.verifyOperationInProgress();const t=await WI(s);$e(no,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>V2(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>V2(e.remoteStore,l))),s._onlineComponents=e}async function WI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){$e(no,"Using user provided OfflineComponentProvider");try{await jp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===me.FAILED_PRECONDITION||l.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;Ol("Error using user provided cache. Falling back to memory cache: "+t),await jp(s,new Ud)}}else $e(no,"Using default OfflineComponentProvider"),await jp(s,new qI(void 0));return s._offlineComponents}async function Xx(s){return s._onlineComponents||(s._uninitializedComponentsProvider?($e(no,"Using user provided OnlineComponentProvider"),await H2(s,s._uninitializedComponentsProvider._online)):($e(no,"Using default OnlineComponentProvider"),await H2(s,new yg))),s._onlineComponents}function $I(s){return Xx(s).then((e=>e.syncEngine))}async function Bd(s){const e=await Xx(s),t=e.eventManager;return t.onListen=AI.bind(null,e.syncEngine),t.onUnlisten=DI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MI.bind(null,e.syncEngine),t}function GI(s,e,t,i){const l=new by(i),u=new gy(e,l,t);return s.asyncQueue.enqueueAndForget((async()=>fy(await Bd(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>my(await Bd(s),u)))}}function KI(s,e,t={}){const i=new ra;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const b=new by({next:T=>{b.Nu(),h.enqueueAndForget((()=>my(u,E)));const O=T.docs.has(p);!O&&T.fromCache?y.reject(new Ve(me.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&T.fromCache&&g&&g.source==="server"?y.reject(new Ve(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new gy(Zd(p.path),b,{includeMetadataChanges:!0,Ka:!0});return fy(u,E)})(await Bd(s),s.asyncQueue,e,t,i))),i.promise}function YI(s,e,t={}){const i=new ra;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const b=new by({next:T=>{b.Nu(),h.enqueueAndForget((()=>my(u,E))),T.fromCache&&g.source==="server"?y.reject(new Ve(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new gy(p,b,{includeMetadataChanges:!0,Ka:!0});return fy(u,E)})(await Bd(s),s.asyncQueue,e,t,i))),i.promise}function QI(s,e){const t=new ra;return s.asyncQueue.enqueueAndForget((async()=>LI(await $I(s),e,t))),t.promise}function Jx(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const XI="ComponentProvider",W2=new Map;function JI(s,e,t,i,l){return new vR(s,e,t,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Jx(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const Zx="firestore.googleapis.com",$2=!0;class G2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zx,this.ssl=$2}else this.host=e.host,this.ssl=e.ssl??$2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<k4)throw new Ve(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jx(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ve(me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ve(me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ve(me.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class uf{constructor(e,t,i,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new QA;switch(i.type){case"firstParty":return new eR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ve(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=W2.get(t);i&&($e(XI,"Removing Datastore"),W2.delete(t),i.terminate())})(this),Promise.resolve()}}function ZI(s,e,t,i={}){s=lr(s,uf);const l=so(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;l&&(Rg(`https://${p}`),Ig("Firestore",!0)),u.host!==Zx&&u.host!==p&&Ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!Mo(g,h)&&(s._setSettings(g),i.mockUserToken)){let y,b;if(typeof i.mockUserToken=="string")y=i.mockUserToken,b=Zs.MOCK_USER;else{y=G_(i.mockUserToken,s._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new Ve(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Zs(E)}s._authCredentials=new XA(new Bw(y,b))}}class fa{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fa(this.firestore,e,this._query)}}class rs{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rs(this.firestore,e,this._key)}toJSON(){return{type:rs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Eu(t,rs._jsonSchema))return new rs(e,i||null,new at(Pn.fromString(t.referencePath)))}}rs._jsonSchemaVersion="firestore/documentReference/1.0",rs._jsonSchema={type:bs("string",rs._jsonSchemaVersion),referencePath:bs("string")};class Ya extends fa{constructor(e,t,i){super(e,t,Zd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rs(this.firestore,null,new at(e))}withConverter(e){return new Ya(this.firestore,e,this._path)}}function Mt(s,e,...t){if(s=Mn(s),zw("collection","path",e),s instanceof uf){const i=Pn.fromString(e,...t);return a2(i),new Ya(s,null,i)}{if(!(s instanceof rs||s instanceof Ya))throw new Ve(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Pn.fromString(e,...t));return a2(i),new Ya(s.firestore,null,i)}}function Ye(s,e,...t){if(s=Mn(s),arguments.length===1&&(e=Gg.newId()),zw("doc","path",e),s instanceof uf){const i=Pn.fromString(e,...t);return i2(i),new rs(s,null,new at(i))}{if(!(s instanceof rs||s instanceof Ya))throw new Ve(me.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Pn.fromString(e,...t));return i2(i),new rs(s.firestore,s instanceof Ya?s.converter:null,new at(i))}}const K2="AsyncQueue";class Y2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Lx(this,"async_queue_retry"),this._c=()=>{const i=Cp();i&&$e(K2,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Cp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Cp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ra;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Kl(e))throw e;$e(K2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,la("INTERNAL UNHANDLED ERROR: ",Q2(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=hy.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&yt(47125,{Pc:Q2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Q2(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ii extends uf{constructor(e,t,i,l){super(e,t,i,l),this.type="firestore",this._queue=new Y2,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Y2(e),this._firestoreClient=void 0,await e}}}function eD(s,e){const t=typeof s=="object"?s:Og(),i=typeof s=="string"?s:Id,l=Wd(t,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=H_("firestore");u&&ZI(l,...u)}return l}function ju(s){if(s._terminated)throw new Ve(me.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||tD(s),s._firestoreClient}function tD(s){const e=s._freezeSettings(),t=JI(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new HI(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class Zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zr(Ys.fromBase64String(e))}catch(t){throw new Ve(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zr(Ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,Zr._jsonSchema))return Zr.fromBase64String(e.bytes)}}Zr._jsonSchemaVersion="firestore/bytes/1.0",Zr._jsonSchema={type:bs("string",Zr._jsonSchemaVersion),bytes:bs("string")};class hf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ks(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nu{constructor(e){this._methodName=e}}class Ai{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:bs("string",Ai._jsonSchemaVersion),latitude:bs("number"),longitude:bs("number")};class ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ui(e.vectorValues);throw new Ve(me.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:bs("string",ui._jsonSchemaVersion),vectorValues:bs("object")};const nD=/^__.*__$/;class sD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tu(e,this.data,t,this.fieldTransforms)}}class eE{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{dataSource:s})}}class _y{constructor(e,t,i,l,u,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new _y({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return zd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(tE(this.dataSource)&&nD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class rD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||of(e)}createContext(e,t,i,l=!1){return new _y({dataSource:e,methodName:t,targetDoc:i,path:Ks.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Au(s){const e=s._freezeSettings(),t=of(s._databaseId);return new rD(s._databaseId,!!e.ignoreUndefinedProperties,t)}function wy(s,e,t,i,l,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,t,l);Ty("Data must be an object, but it was:",h,i);const p=rE(i,h);let g,y;if(u.merge)g=new Dr(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const b=[];for(const E of u.mergeFields){const T=Bo(e,E,t);if(!h.contains(T))throw new Ve(me.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);oE(b,T)||b.push(T)}g=new Dr(b),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new sD(new wr(p),g,y)}class df extends Nu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof df}}class xy extends Nu{_toFieldTransform(e){return new yx(e.path,new cu)}isEqual(e){return e instanceof xy}}class Ey extends Nu{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new du(e.serializer,dx(e.serializer,this.Vc));return new yx(e.path,t)}isEqual(e){return e instanceof Ey&&this.Vc===e.Vc}}function nE(s,e,t,i){const l=s.createContext(1,e,t);Ty("Data must be an object, but it was:",l,i);const u=[],h=wr.empty();io(i,((g,y)=>{const b=aE(e,g,t);y=Mn(y);const E=l.childContextForFieldPath(b);if(y instanceof df)u.push(b);else{const T=Ru(y,E);T!=null&&(u.push(b),h.set(b,T))}}));const p=new Dr(u);return new eE(h,p,l.fieldTransforms)}function sE(s,e,t,i,l,u){const h=s.createContext(1,e,t),p=[Bo(e,i,t)],g=[l];if(u.length%2!=0)throw new Ve(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)p.push(Bo(e,u[T])),g.push(u[T+1]);const y=[],b=wr.empty();for(let T=p.length-1;T>=0;--T)if(!oE(y,p[T])){const O=p[T];let H=g[T];H=Mn(H);const q=h.childContextForFieldPath(O);if(H instanceof df)y.push(O);else{const z=Ru(H,q);z!=null&&(y.push(O),b.set(O,z))}}const E=new Dr(y);return new eE(b,E,h.fieldTransforms)}function iD(s,e,t,i=!1){return Ru(t,s.createContext(i?4:3,e))}function Ru(s,e){if(iE(s=Mn(s)))return Ty("Unsupported field value:",e,s),rE(s,e);if(s instanceof Nu)return(function(i,l){if(!tE(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let h=0;for(const p of i){let g=Ru(p,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=Mn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dx(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Ut.fromDate(i);return{timestampValue:Od(l.serializer,u)}}if(i instanceof Ut){const u=new Ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Od(l.serializer,u)}}if(i instanceof Ai)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Zr)return{bytesValue:Ex(l.serializer,i._byteString)};if(i instanceof rs){const u=l.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ny(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof ui)return(function(h,p){const g=h instanceof ui?h.toArray():h;return{mapValue:{fields:{[Qw]:{stringValue:Xw},[Dd]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return Zg(p.serializer,b)}))}}}}}})(i,l);if(Ax(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Yd(i)}`)})(s,e)}function rE(s,e){const t={};return Hw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):io(s,((i,l)=>{const u=Ru(l,e.childContextForField(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function iE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ut||s instanceof Ai||s instanceof Zr||s instanceof rs||s instanceof Nu||s instanceof ui||Ax(s))}function Ty(s,e,t){if(!iE(t)||!Fw(t)){const i=Yd(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Bo(s,e,t){if((e=Mn(e))instanceof hf)return e._internalPath;if(typeof e=="string")return aE(s,e);throw zd("Field path arguments must be of type string or ",s,!1,void 0,t)}const aD=new RegExp("[~\\*/\\[\\]]");function aE(s,e,t){if(e.search(aD)>=0)throw zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new hf(...e.split("."))._internalPath}catch{throw zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function zd(s,e,t,i,l){const u=i&&!i.isEmpty(),h=l!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${l}`),g+=")"),new Ve(me.INVALID_ARGUMENT,p+s+g)}function oE(s,e){return s.some((t=>t.isEqual(e)))}class oD{convertValue(e,t="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return us(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Za(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw yt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return io(e,((l,u)=>{i[l]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[Dd].arrayValue?.values?.map((i=>us(i.doubleValue)));return new ui(t)}convertGeoPoint(e){return new Ai(us(e.latitude),us(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Jd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const t=Ja(e);return new Ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Pn.fromString(e);_n(Nx(i),9688,{name:e});const l=new au(i.get(1),i.get(3)),u=new at(i.popFirst(5));return l.isEqual(t)||la(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class ky extends oD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rs(this.firestore,null,t)}}function xr(){return new xy("serverTimestamp")}function No(s){return new Ey("increment",s)}const X2="@firebase/firestore",J2="4.10.0";function Z2(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const l=t;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class lE{constructor(e,t,i,l,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new rs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Bo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class lD extends lE{data(){return super.data()}}function cE(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ve(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sy{}class Cy extends Sy{}function On(s,e,...t){let i=[];e instanceof Sy&&i.push(e),i=i.concat(t),(function(u){const h=u.filter((g=>g instanceof jy)).length,p=u.filter((g=>g instanceof ff)).length;if(h>1||h>0&&p>0)throw new Ve(me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class ff extends Cy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ff(e,t,i)}_apply(e){const t=this._parse(e);return uE(e._query,t),new fa(e.firestore,e.converter,lg(e._query,t))}_parse(e){const t=Au(e.firestore);return(function(u,h,p,g,y,b,E){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ve(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){t_(E,b);const H=[];for(const q of E)H.push(e_(g,u,q));T={arrayValue:{values:H}}}else T=e_(g,u,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||t_(E,b),T=iD(p,h,E,b==="in"||b==="not-in");return vs.create(y,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function bn(s,e,t){const i=e,l=Bo("where",s);return ff._create(l,i,t)}class jy extends Sy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:di.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,u){let h=l;const p=u.getFlattenedFilters();for(const g of p)uE(h,g),h=lg(h,g)})(e._query,t),new fa(e.firestore,e.converter,lg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ny extends Cy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ny(e,t)}_apply(e){const t=(function(l,u,h){if(l.startAt!==null)throw new Ve(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ve(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lu(u,h)})(e._query,this._field,this._direction);return new fa(e.firestore,e.converter,OR(e._query,t))}}function fu(s,e="asc"){const t=e,i=Bo("orderBy",s);return Ny._create(i,t)}class Ay extends Cy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Ay(e,t,i)}_apply(e){return new fa(e.firestore,e.converter,Ld(e._query,this._limit,this._limitType))}}function mu(s){return oR("limit",s),Ay._create("limit",s,"F")}function e_(s,e,t){if(typeof(t=Mn(t))=="string"){if(t==="")throw new Ve(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ix(e)&&t.indexOf("/")!==-1)throw new Ve(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Pn.fromString(t));if(!at.isDocumentKey(i))throw new Ve(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return m2(s,new at(i))}if(t instanceof rs)return m2(s,t._key);throw new Ve(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yd(t)}.`)}function t_(s,e){if(!Array.isArray(s)||s.length===0)throw new Ve(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uE(s,e){const t=(function(l,u){for(const h of l)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ve(me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ry(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class $c{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ao extends lE{constructor(e,t,i,l,u,h){super(e,t,i,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Bo("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(me.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ao._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ao._jsonSchema={type:bs("string",Ao._jsonSchemaVersion),bundleSource:bs("string","DocumentSnapshot"),bundleName:bs("string"),bundle:bs("string")};class bd extends Ao{data(e={}){return super.data(e)}}class Ro{constructor(e,t,i,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new $c(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new bd(this._firestore,this._userDataWriter,i.key,i,new $c(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((p=>{const g=new bd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new $c(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new bd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new $c(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),b=h.indexOf(p.doc.key)),{type:cD(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(me.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cD(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:s})}}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:bs("string",Ro._jsonSchemaVersion),bundleSource:bs("string","QuerySnapshot"),bundleName:bs("string"),bundle:bs("string")};class uD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Au(e)}set(e,t,i){this._verifyNotCommitted();const l=Np(e,this._firestore),u=Ry(l.converter,t,i),h=wy(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,i);return this._mutations.push(h.toMutation(l._key,cr.none())),this}update(e,t,i,...l){this._verifyNotCommitted();const u=Np(e,this._firestore);let h;return h=typeof(t=Mn(t))=="string"||t instanceof hf?sE(this._dataReader,"WriteBatch.update",u._key,t,i,l):nE(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Np(e,this._firestore);return this._mutations=this._mutations.concat(new rf(t._key,cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Np(s,e){if((s=Mn(s)).firestore!==e)throw new Ve(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Ms(s){s=lr(s,rs);const e=lr(s.firestore,Ii),t=ju(e);return KI(t,s._key).then((i=>dE(e,s,i)))}function Dn(s){s=lr(s,fa);const e=lr(s.firestore,Ii),t=ju(e),i=new ky(e);return cE(s._query),YI(t,s._query).then((l=>new Ro(e,i,s,l)))}function ks(s,e,t){s=lr(s,rs);const i=lr(s.firestore,Ii),l=Ry(s.converter,e,t),u=Au(i);return Iu(i,[wy(u,"setDoc",s._key,l,s.converter!==null,t).toMutation(s._key,cr.none())])}function Jr(s,e,t,...i){s=lr(s,rs);const l=lr(s.firestore,Ii),u=Au(l);let h;return h=typeof(e=Mn(e))=="string"||e instanceof hf?sE(u,"updateDoc",s._key,e,t,i):nE(u,"updateDoc",s._key,e),Iu(l,[h.toMutation(s._key,cr.exists(!0))])}function Ir(s){return Iu(lr(s.firestore,Ii),[new rf(s._key,cr.none())])}function ci(s,e){const t=lr(s.firestore,Ii),i=Ye(s),l=Ry(s.converter,e),u=Au(s.firestore);return Iu(t,[wy(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,cr.exists(!1))]).then((()=>i))}function hE(s,...e){s=Mn(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Z2(e[i])||(t=e[i++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Z2(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,h,p;if(s instanceof rs)h=lr(s.firestore,Ii),p=Zd(s._key.path),u={next:y=>{e[i]&&e[i](dE(h,s,y))},error:e[i+1],complete:e[i+2]};else{const y=lr(s,fa);h=lr(y.firestore,Ii),p=y._query;const b=new ky(h);u={next:E=>{e[i]&&e[i](new Ro(h,b,y,E))},error:e[i+1],complete:e[i+2]},cE(s._query)}const g=ju(h);return GI(g,p,l,u)}function Iu(s,e){const t=ju(s);return QI(t,e)}function dE(s,e,t){const i=t.docs.get(e._key),l=new ky(s);return new Ao(s,l,e._key,i,new $c(t.hasPendingWrites,t.fromCache),e.converter)}function n_(s){return s=lr(s,Ii),ju(s),new uD(s,(e=>Iu(s,e)))}(function(e,t=!0){YA(Fo),Lo(new Qa("firestore",((i,{instanceIdentifier:l,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new Ii(new JA(i.getProvider("auth-internal")),new tR(h,i.getProvider("app-check-internal")),bR(h,l),h);return u={useFetchStreams:t,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ki(X2,J2,e),ki(X2,J2,"esm2020")})();var hD="firebase",dD="12.8.0";ki(hD,dD,"app");const fE="firebasestorage.googleapis.com",mE="storageBucket",fD=120*1e3,mD=600*1e3;class as extends Mi{constructor(e,t,i=0){super(Ap(e),`Firebase Storage: ${t} (${Ap(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,as.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var is;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(is||(is={}));function Ap(s){return"storage/"+s}function Iy(){const s="An unknown error occurred, please check the error payload for server response.";return new as(is.UNKNOWN,s)}function pD(s){return new as(is.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function gD(s){return new as(is.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yD(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new as(is.UNAUTHENTICATED,s)}function vD(){return new as(is.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bD(s){return new as(is.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function _D(){return new as(is.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wD(){return new as(is.CANCELED,"User canceled the upload/download.")}function xD(s){return new as(is.INVALID_URL,"Invalid URL '"+s+"'.")}function ED(s){return new as(is.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function TD(){return new as(is.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mE+"' property when initializing the app?")}function kD(){return new as(is.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SD(){return new as(is.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function CD(s){return new as(is.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vg(s){return new as(is.INVALID_ARGUMENT,s)}function pE(){return new as(is.APP_DELETED,"The Firebase app was deleted.")}function jD(s){return new as(is.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zc(s,e){return new as(is.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Pc(s){throw new as(is.INTERNAL_ERROR,"Internal error: "+s)}class or{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=or.makeFromUrl(e,t)}catch{return new or(e,"")}if(i.path==="")return i;throw ED(e)}static makeFromUrl(e,t){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(ye){ye.path.charAt(ye.path.length-1)==="/"&&(ye.path_=ye.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+l+h,"i"),g={bucket:1,path:3};function y(ye){ye.path_=decodeURIComponent(ye.path)}const b="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",O=new RegExp(`^https?://${E}/${b}/b/${l}/o${T}`,"i"),H={bucket:1,path:3},q=t===fE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,z="([^?#]*)",ne=new RegExp(`^https?://${q}/${l}/${z}`,"i"),ee=[{regex:p,indices:g,postModify:u},{regex:O,indices:H,postModify:y},{regex:ne,indices:{bucket:1,path:2},postModify:y}];for(let ye=0;ye<ee.length;ye++){const Se=ee[ye],_e=Se.regex.exec(e);if(_e){const R=_e[Se.indices.bucket];let S=_e[Se.indices.path];S||(S=""),i=new or(R,S),Se.postModify(i);break}}if(i==null)throw xD(e);return i}}class ND{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function AD(s,e,t){let i=1,l=null,u=null,h=!1,p=0;function g(){return p===2}let y=!1;function b(...z){y||(y=!0,e.apply(null,z))}function E(z){l=setTimeout(()=>{l=null,s(O,g())},z)}function T(){u&&clearTimeout(u)}function O(z,...ne){if(y){T();return}if(z){T(),b.call(null,z,...ne);return}if(g()||h){T(),b.call(null,z,...ne);return}i<64&&(i*=2);let ee;p===1?(p=2,ee=0):ee=(i+Math.random())*1e3,E(ee)}let H=!1;function q(z){H||(H=!0,T(),!y&&(l!==null?(z||(p=2),clearTimeout(l),E(0)):z||(p=1)))}return E(0),u=setTimeout(()=>{h=!0,q(!0)},t),q}function RD(s){s(!1)}function ID(s){return s!==void 0}function DD(s){return typeof s=="object"&&!Array.isArray(s)}function Dy(s){return typeof s=="string"||s instanceof String}function s_(s){return My()&&s instanceof Blob}function My(){return typeof Blob<"u"}function bg(s,e,t,i){if(i<e)throw vg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>t)throw vg(`Invalid value for '${s}'. Expected ${t} or less.`)}function mf(s,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${s}`}function gE(s){const e=encodeURIComponent;let t="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);t=t+l+"&"}return t=t.slice(0,-1),t}var Io;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Io||(Io={}));function MD(s,e){const t=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||l||u}class LD{constructor(e,t,i,l,u,h,p,g,y,b,E,T=!0,O=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,q)=>{this.resolve_=H,this.reject_=q,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new ed(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===Io.NO_ERROR,g=u.getStatus();if(!p||MD(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Io.ABORT;i(!1,new ed(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new ed(y,u))})},t=(i,l)=>{const u=this.resolve_,h=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());ID(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=Iy();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(l.canceled){const g=this.appDelete_?pE():wD();h(g)}else{const g=_D();h(g)}};this.canceled_?t(!1,new ed(!1,null,!0)):this.backoffId_=AD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ed{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function OD(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function PD(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function UD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function BD(s,e,t,i,l,u,h=!0,p=!1){const g=gE(s.urlParams),y=s.url+g,b=Object.assign({},s.headers);return VD(b,e),OD(b,t),PD(b,u),UD(b,i),new LD(y,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,h,p)}function zD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function FD(...s){const e=zD();if(e!==void 0){const t=new e;for(let i=0;i<s.length;i++)t.append(s[i]);return t.getBlob()}else{if(My())return new Blob(s);throw new as(is.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qD(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function HD(s){if(typeof atob>"u")throw CD("base-64");return atob(s)}const Ti={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rp{constructor(e,t){this.data=e,this.contentType=t||null}}function WD(s,e){switch(s){case Ti.RAW:return new Rp(yE(e));case Ti.BASE64:case Ti.BASE64URL:return new Rp(vE(s,e));case Ti.DATA_URL:return new Rp(GD(e),KD(e))}throw Iy()}function yE(s){const e=[];for(let t=0;t<s.length;t++){let i=s.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++t);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function $D(s){let e;try{e=decodeURIComponent(s)}catch{throw Zc(Ti.DATA_URL,"Malformed data URL.")}return yE(e)}function vE(s,e){switch(s){case Ti.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw Zc(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case Ti.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw Zc(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=HD(e)}catch(l){throw l.message.includes("polyfill")?l:Zc(s,"Invalid character found")}const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i}class bE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Zc(Ti.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=YD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function GD(s){const e=new bE(s);return e.base64?vE(Ti.BASE64,e.rest):$D(e.rest)}function KD(s){return new bE(s).contentType}function YD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Fa{constructor(e,t){let i=0,l="";s_(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(s_(this.data_)){const i=this.data_,l=qD(i,e,t);return l===null?null:new Fa(l)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Fa(i,!0)}}static getBlob(...e){if(My()){const t=e.map(i=>i instanceof Fa?i.data_:i);return new Fa(FD.apply(null,t))}else{const t=e.map(h=>Dy(h)?WD(Ti.RAW,h).data:h.data_);let i=0;t.forEach(h=>{i+=h.byteLength});const l=new Uint8Array(i);let u=0;return t.forEach(h=>{for(let p=0;p<h.length;p++)l[u++]=h[p]}),new Fa(l,!0)}}uploadData(){return this.data_}}function Ly(s){let e;try{e=JSON.parse(s)}catch{return null}return DD(e)?e:null}function QD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function XD(s,e){const t=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?t:s+"/"+t}function _E(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function JD(s,e){return e}class ar{constructor(e,t,i,l){this.server=e,this.local=t||e,this.writable=!!i,this.xform=l||JD}}let td=null;function ZD(s){return!Dy(s)||s.length<2?s:_E(s)}function wE(){if(td)return td;const s=[];s.push(new ar("bucket")),s.push(new ar("generation")),s.push(new ar("metageneration")),s.push(new ar("name","fullPath",!0));function e(u,h){return ZD(h)}const t=new ar("name");t.xform=e,s.push(t);function i(u,h){return h!==void 0?Number(h):h}const l=new ar("size");return l.xform=i,s.push(l),s.push(new ar("timeCreated")),s.push(new ar("updated")),s.push(new ar("md5Hash",null,!0)),s.push(new ar("cacheControl",null,!0)),s.push(new ar("contentDisposition",null,!0)),s.push(new ar("contentEncoding",null,!0)),s.push(new ar("contentLanguage",null,!0)),s.push(new ar("contentType",null,!0)),s.push(new ar("metadata","customMetadata",!0)),td=s,td}function eM(s,e){function t(){const i=s.bucket,l=s.fullPath,u=new or(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function tM(s,e,t){const i={};i.type="file";const l=t.length;for(let u=0;u<l;u++){const h=t[u];i[h.local]=h.xform(i,e[h.server])}return eM(i,s),i}function xE(s,e,t){const i=Ly(e);return i===null?null:tM(s,i,t)}function nM(s,e,t,i){const l=Ly(e);if(l===null||!Dy(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(y=>{const b=s.bucket,E=s.fullPath,T="/b/"+h(b)+"/o/"+h(E),O=mf(T,t,i),H=gE({alt:"media",token:y});return O+H})[0]}function sM(s,e){const t={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}const r_="prefixes",i_="items";function rM(s,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[r_])for(const l of t[r_]){const u=l.replace(/\/$/,""),h=s._makeStorageReference(new or(e,u));i.prefixes.push(h)}if(t[i_])for(const l of t[i_]){const u=s._makeStorageReference(new or(e,l.name));i.items.push(u)}return i}function iM(s,e,t){const i=Ly(t);return i===null?null:rM(s,e,i)}class Oy{constructor(e,t,i,l){this.url=e,this.method=t,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Py(s){if(!s)throw Iy()}function aM(s,e){function t(i,l){const u=xE(s,l,e);return Py(u!==null),u}return t}function oM(s,e){function t(i,l){const u=iM(s,e,l);return Py(u!==null),u}return t}function lM(s,e){function t(i,l){const u=xE(s,l,e);return Py(u!==null),nM(u,l,s.host,s._protocol)}return t}function Vy(s){function e(t,i){let l;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?l=vD():l=yD():t.getStatus()===402?l=gD(s.bucket):t.getStatus()===403?l=bD(s.path):l=i,l.status=t.getStatus(),l.serverResponse=i.serverResponse,l}return e}function cM(s){const e=Vy(s);function t(i,l){let u=e(i,l);return i.getStatus()===404&&(u=pD(s.path)),u.serverResponse=l.serverResponse,u}return t}function uM(s,e,t,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",t.length>0&&(u.delimiter=t),i&&(u.pageToken=i),l&&(u.maxResults=l);const h=e.bucketOnlyServerUrl(),p=mf(h,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,b=new Oy(p,g,oM(s,e.bucket),y);return b.urlParams=u,b.errorHandler=Vy(e),b}function hM(s,e,t){const i=e.fullServerUrl(),l=mf(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new Oy(l,u,lM(s,t),h);return p.errorHandler=cM(e),p}function dM(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function fM(s,e,t){const i=Object.assign({},t);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=dM(null,e)),i}function mM(s,e,t,i,l){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let ee="";for(let ye=0;ye<2;ye++)ee=ee+Math.random().toString().slice(2);return ee}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const y=fM(e,i,l),b=sM(y,t),E="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",O=Fa.getBlob(E,i,T);if(O===null)throw kD();const H={name:y.fullPath},q=mf(u,s.host,s._protocol),z="POST",ne=s.maxUploadRetryTime,W=new Oy(q,z,aM(s,t),ne);return W.urlParams=H,W.headers=h,W.body=O.uploadData(),W.errorHandler=Vy(e),W}class pM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Io.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Io.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Io.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,l,u){if(this.sent_)throw Pc("cannot .send() more than once");if(so(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class gM extends pM{initXhr(){this.xhr_.responseType="text"}}function Uy(){return new gM}class zo{constructor(e,t){this._service=e,t instanceof or?this._location=t:this._location=or.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new zo(e,t)}get root(){const e=new or(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _E(this._location.path)}get storage(){return this._service}get parent(){const e=QD(this._location.path);if(e===null)return null;const t=new or(this._location.bucket,e);return new zo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw jD(e)}}function yM(s,e,t){s._throwIfRoot("uploadBytes");const i=mM(s.storage,s._location,wE(),new Fa(e,!0),t);return s.storage.makeRequestWithTokens(i,Uy).then(l=>({metadata:l,ref:s}))}function vM(s){const e={prefixes:[],items:[]};return EE(s,e).then(()=>e)}async function EE(s,e,t){const l=await bM(s,{pageToken:t});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await EE(s,e,l.nextPageToken)}function bM(s,e){e!=null&&typeof e.maxResults=="number"&&bg("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=uM(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(i,Uy)}function _M(s){s._throwIfRoot("getDownloadURL");const e=hM(s.storage,s._location,wE());return s.storage.makeRequestWithTokens(e,Uy).then(t=>{if(t===null)throw SD();return t})}function wM(s,e){const t=XD(s._location.path,e),i=new or(s._location.bucket,t);return new zo(s.storage,i)}function xM(s){return/^[A-Za-z]+:\/\//.test(s)}function EM(s,e){return new zo(s,e)}function TE(s,e){if(s instanceof By){const t=s;if(t._bucket==null)throw TD();const i=new zo(t,t._bucket);return e!=null?TE(i,e):i}else return e!==void 0?wM(s,e):s}function TM(s,e){if(e&&xM(e)){if(s instanceof By)return EM(s,e);throw vg("To use ref(service, url), the first argument must be a Storage instance.")}else return TE(s,e)}function a_(s,e){const t=e?.[mE];return t==null?null:or.makeFromBucketSpec(t,s)}function kM(s,e,t,i={}){s.host=`${e}:${t}`;const l=so(e);l&&(Rg(`https://${s.host}/b`),Ig("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:G_(u,s.app.options.projectId))}class By{constructor(e,t,i,l,u,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=fE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fD,this._maxUploadRetryTime=mD,this._requests=new Set,l!=null?this._bucket=or.makeFromBucketSpec(l,this._host):this._bucket=a_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=or.makeFromBucketSpec(this._url,e):this._bucket=a_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zo(this,e)}_makeRequest(e,t,i,l,u=!0){if(this._deleted)return new ND(pE());{const h=BD(e,this._appId,i,l,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,l).getPromise()}}const o_="@firebase/storage",l_="0.14.0";const kE="storage";function _d(s,e,t){return s=Mn(s),yM(s,e,t)}function c_(s){return s=Mn(s),vM(s)}function Do(s){return s=Mn(s),_M(s)}function Ha(s,e){return s=Mn(s),TM(s,e)}function SM(s=Og(),e){s=Mn(s);const i=Wd(s,kE).getImmediate({identifier:e}),l=H_("storage");return l&&CM(i,...l),i}function CM(s,e,t,i={}){kM(s,e,t,i)}function jM(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new By(t,i,l,e,Fo)}function NM(){Lo(new Qa(kE,jM,"PUBLIC").setMultipleInstances(!0)),ki(o_,l_,""),ki(o_,l_,"esm2020")}NM();const SE={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},zy=Lg(SE),ko=Iw(zy),ke=eD(zy),Wa=SM(zy),AM=Lg(SE,"secondary"),N3=Iw(AM),RM="EYdciKDOi3UYBLk1u8hHams5tmO2",CE=w.createContext();function Li(){return w.useContext(CE)}function IM({children:s}){const[e,t]=w.useState(null),[i,l]=w.useState(!1),[u,h]=w.useState(!1),[p,g]=w.useState(null),[y,b]=w.useState(!0);w.useEffect(()=>{let W=null;const ee=PN(ko,ye=>{if(t(ye),W&&(W(),W=null),ye)if(ye.uid===RM)l(!0),h(!1),g(null),b(!1);else{l(!1);const Se=On(Mt(ke,"clients"),bn("uid","==",ye.uid)),_e=async()=>{const R=localStorage.getItem("mcf_clientId");if(R)try{const S=await Ms(Ye(ke,"clients",R));S.exists()&&(h(!0),g({id:S.id,...S.data()}))}catch(S){console.error("Direct client read failed:",S)}};W=hE(Se,async R=>{if(R.empty)await _e();else{const S=R.docs[0];h(!0),g({id:S.id,...S.data()});try{localStorage.setItem("mcf_clientId",S.id)}catch{}}b(!1)},async R=>{console.error("Error listening to client data:",R),await _e(),b(!1)})}else l(!1),h(!1),g(null),b(!1)});return()=>{ee(),W&&W()}},[]);const ne={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:W=>{g(ee=>ee?{...ee,...W}:W)},resolveClient:async()=>{if(p)return p;const W=localStorage.getItem("mcf_clientId");if(W)try{const ee=await Ms(Ye(ke,"clients",W));if(ee.exists()){const ye={id:ee.id,...ee.data()};return h(!0),g(ye),ye}}catch(ee){console.error("resolveClient direct read failed:",ee)}if(e){const ee=On(Mt(ke,"clients"),bn("uid","==",e.uid)),ye=await Dn(ee);if(!ye.empty){const Se={id:ye.docs[0].id,...ye.docs[0].data()};return h(!0),g(Se),Se}}return null},login:async(W,ee,ye=!0)=>(await $b(ko,ye?eg:qg),await MN(ko,W,ee)),signup:async(W,ee,ye)=>{await $b(ko,eg);const Se=await DN(ko,ee.trim().toLowerCase(),ye),_e=Se.user,R=Ye(Mt(ke,"clients")),S={uid:_e.uid,name:W.trim(),email:ee.trim().toLowerCase(),clientType:"core_buddy",coreBuddyAccess:!0,status:"active",tier:"free",subscriptionStatus:null,signupSource:"self_signup",createdAt:Ut.now()};await ks(R,S),h(!0),g({id:R.id,...S});try{localStorage.setItem("mcf_clientId",R.id)}catch{}return Se},logout:()=>{try{localStorage.removeItem("mcf_clientId")}catch{}return VN(ko)},resetPassword:W=>IN(ko,W),loading:y};return a.jsx(CE.Provider,{value:ne,children:s})}const jE=w.createContext();function Wo(){return w.useContext(jE)}function DM({children:s}){const[e,t]=w.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=w.useState(()=>localStorage.getItem("accent")||"red");w.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),w.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),t(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(jE.Provider,{value:p,children:s})}const NE=w.createContext();function Du(){return w.useContext(NE)}const MM=["nutrition","buddies"],LM=[5,10],OM=3,PM=1;function VM({children:s}){const{clientData:e,loading:t}=Li(),i=w.useMemo(()=>{const l=e?.tier||"free",u=e?.subscriptionStatus||null,h=e&&e.signupSource!=="self_signup",p=l==="premium"||!!h;function g(y){return p?!0:!MM.includes(y)}return{tier:l,subscriptionStatus:u,isPremium:p,canAccess:g,loading:t,FREE_RANDOMISER_DURATIONS:LM,FREE_RANDOMISER_WEEKLY_LIMIT:OM,FREE_HABIT_LIMIT:PM}},[e?.tier,e?.subscriptionStatus,e?.signupSource,t]);return a.jsx(NE.Provider,{value:i,children:s})}function UM(s){if(s?.signupSource==="self_signup"&&!s?.onboardingComplete)return"/onboarding";const e=s?.clientType;return e==="core_buddy"?"/client/core-buddy":e==="circuit_vip"||e==="circuit_dropin"?"/client/circuit":"/client"}function BM({className:s=""}){const{isDark:e,toggleTheme:t}=Wo();return a.jsx("button",{className:s||"theme-toggle",onClick:t,"aria-label":e?"Switch to light mode":"Switch to dark mode",children:e?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})})}function zM(){const[s,e]=w.useState(""),[t,i]=w.useState(""),[l,u]=w.useState(!0),[h,p]=w.useState(""),[g,y]=w.useState(!1),[b,E]=w.useState(!1),[T,O]=w.useState(!1),{login:H,resetPassword:q,currentUser:z,isAdmin:ne,isClient:W,clientData:ee,loading:ye}=Li(),Se=Lr();if(w.useEffect(()=>{!ye&&z&&(ne?Se("/dashboard"):W?Se(UM(ee)):(y(!1),p("No account found. Please sign up or contact your trainer.")))},[ye,z,ne,W,ee,Se]),ye||z)return a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"var(--bg-body)"},children:a.jsx("div",{style:{width:36,height:36,border:"3px solid var(--color-primary-light)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"app-spin .7s linear infinite"}})});const _e=async S=>{S.preventDefault(),p(""),y(!0);try{await H(s,t,l)}catch(I){p(I.message||"Failed to log in"),y(!1)}},R=async S=>{if(S.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await q(s.trim()),O(!0)}catch(I){I.code==="auth/user-not-found"?p("No account found with this email"):p(I.message||"Failed to send reset email")}y(!1)};return a.jsxs("div",{className:"login-container",children:[a.jsx(BM,{className:"login-theme-toggle"}),a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:a.jsx("strong",{children:b?"Reset Password":"Sign in as 1-2-1 or a Core Buddy"})})]}),h&&a.jsx("div",{className:"error-message",children:h}),T?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{E(!1),O(!1),p("")},children:"Back to Log In"})]}):b?a.jsxs("form",{onSubmit:R,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:_e,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:t,onChange:S=>i(S.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:S=>u(S.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!0),p("")},children:"Forgot password?"}),a.jsx("button",{type:"button",className:"login-btn login-btn-outline",onClick:()=>Se("/signup"),children:"Don't have an account? Create one free"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})]})}function nd({feature:s,children:e}){const{canAccess:t,loading:i}=Du();return i||t(s)?e:a.jsx(M_,{to:"/upgrade",replace:!0})}function ua({active:s}){const e=Lr(),{clientData:t}=Li(),{isPremium:i}=Du(),l=t?.clientType==="block"&&t?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{children:"Profile"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:a.jsx("path",{d:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"})}),a.jsx("span",{children:"Workout"})]}),i&&a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),i&&a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),l&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function $o({children:s,onRefresh:e}){const[t,i]=w.useState(0),[l,u]=w.useState(!1),h=w.useRef(null),p=w.useRef(0),g=w.useRef(!1),y=w.useCallback(T=>{window.scrollY<=0&&(p.current=T.touches[0].clientY,g.current=!0)},[]),b=w.useCallback(T=>{if(!g.current||l)return;const O=T.touches[0].clientY-p.current;O>20&&window.scrollY<=0&&(T.preventDefault(),i(Math.min((O-20)*.35,80)))},[l]),E=w.useCallback(async()=>{t>55&&!l&&(u(!0),e?await e():window.location.reload(),u(!1)),i(0),g.current=!1},[t,l,e]);return a.jsxs("div",{ref:h,onTouchStart:y,onTouchMove:b,onTouchEnd:E,children:[a.jsxs("div",{className:`pull-refresh-indicator ${t>0?"visible":""} ${l?"refreshing":""}`,style:{height:t},children:[a.jsx("div",{className:`refresh-spinner ${l?"spinning":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),a.jsx("span",{className:"refresh-text",children:l?"Refreshing...":"Pull to refresh"})]}),s]})}function Mu(s,e,t,i,l){const u=[];for(let h=0;h<s;h++){const p=(h*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:t+i*Math.sin(p),x2:e+l*Math.cos(p),y2:t+l*Math.sin(p),thick:h%5===0})}return u}const AE=Mu(60,100,100,85,96),FM=Mu(60,100,100,78,94),qM=Mu(60,100,100,82,94);Mu(60,50,50,38,46);Mu(60,40,40,30,37);function HM({steps:s,onFinish:e,active:t}){const[i,l]=w.useState(0),[u,h]=w.useState(null),[p,g]=w.useState("below"),[y,b]=w.useState(!1),E=w.useRef(null),T=w.useRef(t);T.current=t,w.useEffect(()=>{t||l(0)},[t]),w.useEffect(()=>{if(!t)return;const Se=_e=>_e.preventDefault();return document.addEventListener("touchmove",Se,{passive:!1}),document.addEventListener("wheel",Se,{passive:!1}),document.body.style.overflow="hidden",()=>{document.removeEventListener("touchmove",Se),document.removeEventListener("wheel",Se),document.body.style.overflow=""}},[t]);const O=w.useMemo(()=>t?s.filter(Se=>document.querySelector(Se.selector)):[],[t]),H=O[i],q=i===O.length-1,z=H?.selector,ne=w.useCallback(()=>{if(!z)return;const Se=document.querySelector(z);if(!Se){h(null);return}const _e=Se.getBoundingClientRect(),R=8;h({top:_e.top-R,left:_e.left-R,width:_e.width+R*2,height:_e.height+R*2});const S=window.innerHeight-_e.bottom;g(S<260?"above":"below")},[z]);if(w.useEffect(()=>{if(!t||!z)return;b(!0);const Se=document.querySelector(z);if(Se){document.body.style.overflow="",Se.scrollIntoView({behavior:"smooth",block:"center"});let _e=null,R=0,S=0;const I=60,P=()=>{S++;const A=Se.getBoundingClientRect(),De=Math.round(A.top);if(_e!==null&&De===_e?R++:R=0,_e=De,R>=3||S>=I){T.current&&(document.body.style.overflow="hidden"),ne(),b(!1);return}D=requestAnimationFrame(P)};let D;const L=setTimeout(()=>{D=requestAnimationFrame(P)},120);return()=>{clearTimeout(L),D&&cancelAnimationFrame(D),T.current&&(document.body.style.overflow="hidden")}}},[t,i,z,ne]),w.useEffect(()=>{if(!t)return;const Se=()=>{E.current&&cancelAnimationFrame(E.current),E.current=requestAnimationFrame(ne)};return window.addEventListener("scroll",Se,!0),window.addEventListener("resize",Se),()=>{window.removeEventListener("scroll",Se,!0),window.removeEventListener("resize",Se),E.current&&cancelAnimationFrame(E.current)}},[t,ne]),!t||!H||O.length===0)return null;const W=()=>{q?e():l(i+1)},ee=()=>{i>0&&l(i-1)},ye=()=>e();return a.jsxs("div",{className:"st-overlay",onClick:Se=>{Se.stopPropagation()},children:[a.jsx("div",{className:"st-backdrop",onClick:W}),u&&a.jsx("div",{className:`st-spotlight${y?" st-transitioning":""}`,style:{top:u.top,left:u.left,width:u.width,height:u.height}}),u&&a.jsxs("div",{className:`st-tooltip st-tooltip-${p}${y?" st-transitioning":""}`,style:{top:p==="below"?Math.min(Math.max(u.top+u.height+16,16),window.innerHeight-200):void 0,bottom:p==="above"?Math.min(Math.max(window.innerHeight-u.top+16,16),window.innerHeight-60):void 0,left:Math.max(16,Math.min(u.left,window.innerWidth-320))},children:[a.jsx("div",{className:"st-dots",children:O.map((Se,_e)=>a.jsx("span",{className:`st-dot${_e===i?" active":""}${_e<i?" done":""}`},_e))}),a.jsx("h3",{className:"st-title",children:H.title}),a.jsx("p",{className:"st-body",children:H.body}),a.jsxs("div",{className:"st-actions",children:[i>0&&a.jsx("button",{className:"st-btn st-btn-back",onClick:ee,children:"Back"}),a.jsx("button",{className:"st-btn st-btn-next",onClick:W,children:H.cta||(q?"Let's Go!":"Next")})]}),a.jsx("button",{className:"st-skip",onClick:ye,children:"Skip tour"})]})]})}const u_=3,WM=5;function Ip(s){return s.toISOString().split("T")[0]}const Dp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}];function Mp(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Vc(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function $M(s,e=800){return new Promise(t=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,h=i.height;u>h?u>e&&(h=Math.round(h*e/u),u=e):h>e&&(u=Math.round(u*e/h),h=e),l.width=u,l.height=h,l.getContext("2d").drawImage(i,0,0,u,h),l.toBlob(p=>t(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}function GM(){const{currentUser:s,isClient:e,clientData:t,logout:i,updateClientData:l,loading:u}=Li(),{isDark:h,toggleTheme:p}=Wo(),{isPremium:g,FREE_HABIT_LIMIT:y}=Du(),b=Lr(),E=g?WM:y,[T,O]=w.useState({hours:0,minutes:0,seconds:0}),[H,q]=w.useState(0),[z,ne]=w.useState(0),[W,ee]=w.useState(0),[ye,Se]=w.useState(!1),[_e,R]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[S,I]=w.useState(null),[P,D]=w.useState(0),[L,A]=w.useState(0),[De,Qe]=w.useState(u_),[te,xe]=w.useState(!1),[Pe,qe]=w.useState(!1),[ie,M]=w.useState([]),[K,be]=w.useState(null),[Ce,Te]=w.useState(!1),Ee=w.useRef(null),[We,nt]=w.useState(0),[Be,kn]=w.useState(0),[Sn,Cn]=w.useState(null),Ft=w.useCallback((j,G="info")=>{Cn({message:j,type:G}),setTimeout(()=>Cn(null),4e3)},[]),[Et,vt]=w.useState([]),[ct,Zn]=w.useState(!1),[bt,Lt]=w.useState(""),[ae,ln]=w.useState(null),[ut,At]=w.useState(null),[tt,$t]=w.useState(!1),[nn,sn]=w.useState(new Set),[jn,Ls]=w.useState(new Set),[Fn,de]=w.useState({}),[Re,Ze]=w.useState({}),[et,st]=w.useState({}),[Oe,_t]=w.useState({}),[kt,rn]=w.useState({}),[mn,pn]=w.useState({}),Pt=w.useRef(null),Vn=w.useRef(null),Nn=w.useRef({}),[wn,hs]=w.useState([]),[le,Ae]=w.useState(!1),Fe=w.useRef(null),[ht,rt]=w.useState([]),[qn,Hn]=w.useState(""),[Zt,gn]=w.useState(!1),[Os,_s]=w.useState(null),[es,cn]=w.useState([]),[ts,Cs]=w.useState(null),[Or,hr]=w.useState(!1),dr=w.useRef(!1),Pr=(()=>{const j=[{selector:".cb-ring-container",title:"Your 24-Hour Countdown",body:"Every day resets. This ring tracks the time you have left  tap your photo to personalise your profile.",cta:"Next"},{selector:".cb-stats-row",title:"Progress at a Glance",body:"Your workout streak, sessions this week, and daily habits  all in one row. These fill up as you go."},{selector:".cb-nudge-card",title:"Smart Suggestions",body:"We'll highlight what needs your attention  your next session, unfinished habits, or a meal to log."},{selector:".cb-card-workouts-hero",title:"Workout",body:"Randomiser workouts  pick your focus, level and time. Save and replay your favourites.",cta:"Next"}];return g&&j.push({selector:".cb-card-nutrition",title:"Nutrition Tracking",body:"Set your macro targets, scan barcodes, and log meals to hit your daily goals."},{selector:".cb-card-consistency",title:"Daily Habits",body:"5 simple habits each day  train, hit protein, 10k steps, sleep, and hydrate. Build your streak."},{selector:".cb-card-buddies",title:"Buddies & Social",body:"Connect with other members, share your journey, and keep each other accountable."},{selector:".cb-journey-section",title:"Share Your Journey",body:"Post photos, updates, and milestones  your fitness journey in one place. Like and comment on each other's posts."}),j.push({selector:".block-bottom-nav",title:"You're All Set!",body:"Use the nav bar to jump between your profile, workouts, nutrition, and buddies. Time to get after it.",cta:"Let's Go!"}),j})();w.useEffect(()=>{!u&&!s&&b("/")},[u,s,b]),w.useEffect(()=>{!u&&t&&t.signupSource==="self_signup"&&!t.onboardingComplete&&b("/onboarding")},[u,t,b]),w.useEffect(()=>{let j=t?.tourComplete||dr.current;if(!j&&t?.id)try{j=!!localStorage.getItem(`tourDone_${t.id}`)}catch{}if(ye&&t&&!j){const G=setTimeout(()=>hr(!0),600);return()=>clearTimeout(G)}},[ye,t]),w.useEffect(()=>{if(!(!ye||!t?.id)){try{if(localStorage.getItem(`targetHint_${t.id}`))return}catch{}if(!t?.weeklyWorkoutTarget){const j=setTimeout(()=>qe(!0),1500);return()=>clearTimeout(j)}}},[ye,t]),w.useEffect(()=>{if(t)try{const j=sessionStorage.getItem(`cbDash_${t.id}`);if(j){const G=JSON.parse(j);ne(G.totalWorkouts??0),ee(G.habitWeekPct??0),R(G.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),I(G.nutritionTargetData??null),D(G.todayHabitsCount??0),A(G.weeklyWorkouts??0),Qe(G.weeklyWorkoutTarget??u_),M(G.leaderboardTop3??[]),nt(G.streakWeeks??0),Se(!0)}}catch{}},[t]),w.useEffect(()=>{t?.photoURL&&be(t.photoURL),t?.weeklyWorkoutTarget&&Qe(t.weeklyWorkoutTarget)},[t]),w.useEffect(()=>{if(!t)return;const j=On(Mt(ke,"notifications"),bn("toId","==",t.id)),G=hE(j,Ne=>{const Ie=Ne.docs.map(He=>({id:He.id,...He.data()}));Ie.sort((He,pt)=>{const Xe=He.createdAt?.toMillis?.()||0;return(pt.createdAt?.toMillis?.()||0)-Xe}),hs(Ie.slice(0,50))},Ne=>{console.error("Notification listener error:",Ne),Ne.code==="permission-denied"&&console.warn("Firestore rules may be missing for the notifications collection. Please update your Firestore rules in the Firebase Console.")});return()=>G()},[t]),w.useEffect(()=>{const j=G=>{Fe.current&&!Fe.current.contains(G.target)&&Ae(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),w.useEffect(()=>{if(!t)return;const j=t.id;(async()=>{try{const[G,Ne,Ie]=await Promise.all([Dn(On(Mt(ke,"buddies"),bn("user1","==",j))),Dn(On(Mt(ke,"buddies"),bn("user2","==",j))),Dn(Mt(ke,"clients"))]),He=new Set;[...G.docs,...Ne.docs].forEach(Xe=>{const Tt=Xe.data();He.add(Tt.user1===j?Tt.user2:Tt.user1)});const pt={};Ie.docs.forEach(Xe=>{pt[Xe.id]=Xe.data()}),rt(Array.from(He).filter(Xe=>pt[Xe]).map(Xe=>({id:Xe,name:pt[Xe].name,photoURL:pt[Xe].photoURL||null})))}catch(G){console.error("Error loading buddies for mentions:",G)}})()},[t]);const ws=wn.filter(j=>!j.read).length,fr=async()=>{const j=wn.filter(Ne=>!Ne.read);if(!j.length)return;const G=n_(ke);j.forEach(Ne=>G.update(Ye(ke,"notifications",Ne.id),{read:!0})),await G.commit()},Ps=async()=>{if(!wn.length)return;const j=n_(ke);wn.forEach(G=>j.delete(Ye(ke,"notifications",G.id))),await j.commit()},Qn=async(j,G,Ne={})=>{if(!(!t||j===t.id))try{await ci(Mt(ke,"notifications"),{toId:j,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:G,read:!1,createdAt:xr(),...Ne})}catch(Ie){console.error("Notification create error:",Ie),Ie.code==="permission-denied"&&Ft("Notifications blocked  check Firestore rules","error")}},Un=(j,G)=>{const Ne=G==="compose"?Pt.current?.selectionStart:null,He=(Ne!=null?j.slice(0,Ne):j).match(/@(\w*)$/);if(He){gn(!0),_s(G),Hn(He[1].toLowerCase());const pt=ht.filter(Xe=>Xe.name&&Xe.name.toLowerCase().includes(He[1].toLowerCase())).slice(0,5);cn(pt)}else gn(!1),cn([])},js=(j,G)=>{if(G==="compose"){const Ne=Pt.current,Ie=bt,He=Ne?.selectionStart??Ie.length,pt=Ie.slice(0,He),Xe=Ie.slice(He),Tt=pt.replace(/@\w*$/,`@${j.name} `);Lt(Tt+Xe),setTimeout(()=>{Ne?.focus(),Ne.selectionStart=Ne.selectionEnd=Tt.length},0)}else{const Ie=(Re[G]||"").replace(/@\w*$/,`@${j.name} `);Ze(He=>({...He,[G]:Ie}))}gn(!1),cn([])},yn=j=>j&&j.split(/(@\w[\w\s]*?\s)/g).map((Ne,Ie)=>Ne.startsWith("@")&&ht.some(He=>Ne.trim()===`@${He.name}`)?a.jsx("span",{className:"mention-highlight",children:Ne.trim()},Ie):Ne),Vs=async j=>{const G=j.target.files?.[0];if(!(!G||!t)){if(!G.type.startsWith("image/")){Ft("Please select an image file","error");return}if(G.size>5*1024*1024){Ft("Image must be under 5MB","error");return}Te(!0);try{const Ne=await new Promise(pt=>{const Xe=new Image;Xe.onload=()=>{const Tt=document.createElement("canvas"),wt=400;let vn=Xe.width,un=Xe.height;vn>un?(un=un/vn*wt,vn=wt):(vn=vn/un*wt,un=wt),Tt.width=vn,Tt.height=un,Tt.getContext("2d").drawImage(Xe,0,0,vn,un),Tt.toBlob(Wn=>pt(Wn),"image/jpeg",.75)},Xe.src=URL.createObjectURL(G)}),Ie=Ha(Wa,`profilePhotos/${t.id}`);await _d(Ie,Ne);const He=await Do(Ie);await Jr(Ye(ke,"clients",t.id),{photoURL:He}),be(He),l({photoURL:He}),Ft("Profile photo updated!","success")}catch(Ne){console.error("Photo upload error:",Ne),Ft("Failed to upload photo","error")}Te(!1),Ee.current&&(Ee.current.value="")}};w.useEffect(()=>{const j=()=>{const Ne=new Date,Ie=new Date(Ne);Ie.setHours(23,59,59,999);const He=Ie-Ne,pt=Math.floor(He/(1e3*60*60)),Xe=Math.floor(He%(1e3*60*60)/(1e3*60)),Tt=Math.floor(He%(1e3*60)/1e3);O({hours:pt,minutes:Xe,seconds:Tt}),q(60-Tt)};j();const G=setInterval(j,1e3);return()=>clearInterval(G)},[]),w.useEffect(()=>{const j=setInterval(()=>{kn(G=>(G+1)%Dp.length)},8e3);return()=>clearInterval(j)},[]),w.useEffect(()=>{if(!s||!t)return;(async()=>{let G=null,Ne=null;try{const Ie=Ip(new Date),He=Mt(ke,"workoutLogs"),pt=On(He,bn("clientId","==",t.id));G=await Dn(pt),ne(G.docs.length);const Xe=new Date,Tt=Xe.getDay(),wt=Tt===0?6:Tt-1,vn=new Date(Xe);vn.setDate(Xe.getDate()-wt),vn.setHours(0,0,0,0);const un=vn.getTime(),Wn=G.docs.filter(ge=>{const he=ge.data().completedAt;return he?(he.toDate?he.toDate().getTime():new Date(he).getTime())>=un:!1}).length;A(Wn);const Es=Mt(ke,"habitLogs"),Er=On(Es,bn("clientId","==",t.id),bn("date","==",Ie)),Rs=await Dn(Er);let V=0;if(!Rs.empty){const ge=Rs.docs[0].data().habits||{};V=Math.min(Object.values(ge).filter(Boolean).length,E)}ee(Math.round(V/E*100)),D(V);const X=await Ms(Ye(ke,"nutritionTargets",t.id));X.exists()&&(I(X.data()),Ne=X.data());const J=await Ms(Ye(ke,"nutritionLogs",`${t.id}_${Ie}`));if(J.exists()){const he=(J.data().entries||[]).reduce((je,Ue)=>({protein:je.protein+(Ue.protein||0),carbs:je.carbs+(Ue.carbs||0),fats:je.fats+(Ue.fats||0),calories:je.calories+(Ue.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});R(he)}}catch(Ie){console.error("Error loading dashboard stats:",Ie)}try{const Ie=Mt(ke,"clients"),He=On(Ie,bn("leaderboardOptIn","==",!0)),Xe=(await Dn(He)).docs.map(Tt=>({id:Tt.id,name:Tt.data().name,photoURL:Tt.data().photoURL||null}));M(Xe.slice(0,3))}catch(Ie){console.error("Leaderboard preview error:",Ie)}try{let Ie=0;if(G){const He=G.docs.map(pt=>pt.data().date).filter(Boolean).sort().reverse();if(He.length>0){const pt=new Date;let Xe=new Date(pt);e:for(let Tt=0;Tt<52;Tt++){const wt=new Date(Xe),vn=wt.getDay(),un=vn===0?6:vn-1;wt.setDate(wt.getDate()-un),wt.setHours(0,0,0,0);const Wn=new Date(wt);Wn.setDate(Wn.getDate()+7);const Es=Ip(wt),Er=Ip(Wn);if(He.some(V=>V>=Es&&V<Er))Ie++;else{if(Tt>0)break e;break}Xe.setDate(Xe.getDate()-7)}}}nt(Ie)}catch(Ie){console.error("Streak computation error:",Ie)}Se(!0)})()},[s,t,E]),w.useEffect(()=>{if(!(!ye||!t))try{sessionStorage.setItem(`cbDash_${t.id}`,JSON.stringify({totalWorkouts:z,habitWeekPct:W,nutritionTotals:_e,nutritionTargetData:S,todayHabitsCount:P,weeklyWorkouts:L,weeklyWorkoutTarget:De,leaderboardTop3:ie,streakWeeks:We}))}catch{}},[ye,z,W,_e,S,P,L,De,ie,We,t]);const Qs=w.useCallback(async()=>{if(dr.current=!0,hr(!1),l({tourComplete:!0}),t?.id){try{localStorage.setItem(`tourDone_${t.id}`,"1")}catch{}try{await Jr(Ye(ke,"clients",t.id),{tourComplete:!0})}catch(j){console.error("Failed to save tour completion:",j)}}},[t,l]),ds=w.useCallback(async j=>{if(Qe(j),xe(!1),qe(!1),t?.id){try{localStorage.setItem(`targetHint_${t.id}`,"1")}catch{}try{await Jr(Ye(ke,"clients",t.id),{weeklyWorkoutTarget:j})}catch(G){console.error("Failed to save weekly target:",G)}}},[t]),xn=j=>{const G=j.currentTarget,Ne=G.querySelector(".ripple");Ne&&Ne.remove();const Ie=G.getBoundingClientRect(),He=Math.max(Ie.width,Ie.height),pt=j.clientX-Ie.left-He/2,Xe=j.clientY-Ie.top-He/2,Tt=document.createElement("span");Tt.className="ripple",Tt.style.cssText=`width:${He}px;height:${He}px;left:${pt}px;top:${Xe}px;`,G.appendChild(Tt),setTimeout(()=>Tt.remove(),600)},ti=t?.name?.split(" ")[0]||"there",Vr=Math.min(Math.round(L/De*100),100),mr=We>0?Math.min(Math.round(We/12*100),100):0,Ns=[{label:"Wk Streak",value:`${We}`,pct:mr,color:"var(--color-primary)",size:"normal"},{label:"Workouts",value:`${L}/${De}`,pct:Vr,color:"var(--color-primary)",size:"large",editable:!0},{label:"Habits Today",value:`${W}%`,pct:W,color:"var(--color-primary)",size:"normal"}],As=j=>!S||!S[j]?0:Math.min(Math.round(_e[j]/S[j]*100),100),xs=(()=>{const j=new Date().getHours();return ye&&P>=E&&_e.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:j>=5&&j<12?{main:"Rise and grind,",sub:"let's get after it!"}:j>=12&&j<17?{main:"Oye",sub:"crack on and make it count!"}:j>=17&&j<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),C=ye?L===0?{label:"WORKOUT",message:"No workouts this week yet",cta:"Start One",action:()=>b("/client/core-buddy/workouts"),pct:0,ringLabel:"0"}:P<E?{label:"DAILY HABITS",message:`${P}/${E} completed`,cta:"Open Habits",action:()=>b("/client/core-buddy/consistency"),pct:W,ringLabel:`${P}/${E}`}:g&&_e.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>b("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:null,B=w.useCallback(async()=>{if(t){Zn(!0);try{const j=await Dn(On(Mt(ke,"posts"),bn("authorId","==",t.id),fu("createdAt","desc"),mu(30)));vt(j.docs.map(Ne=>({id:Ne.id,...Ne.data()})));const G=await Dn(On(Mt(ke,"postLikes"),bn("userId","==",t.id)));sn(new Set(G.docs.map(Ne=>Ne.data().postId)))}catch(j){console.error("Error loading journey:",j)}finally{Zn(!1)}}},[t]);w.useEffect(()=>{ye&&t&&B()},[ye,t,B]);const re=j=>{const G=j.target.files?.[0];if(G){if(!G.type.startsWith("image/")){Ft("Please select an image file","error");return}if(G.size>10*1024*1024){Ft("Image must be under 10MB","error");return}ln(G),At(URL.createObjectURL(G))}},ue=()=>{ln(null),ut&&URL.revokeObjectURL(ut),At(null),Vn.current&&(Vn.current.value="")},Me=async()=>{if(!(!bt.trim()&&!ae||tt||!t)){$t(!0);try{let j=null;if(ae){const Ie=await $M(ae),He=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,pt=Ha(Wa,`postImages/${t.id}/${He}`);await _d(pt,Ie),j=await Do(pt)}await ci(Mt(ke,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:bt.trim(),type:j?"image":"text",imageURL:j||null,createdAt:xr(),likeCount:0,commentCount:0});const Ne=bt.trim().match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Ne){const Ie=new Set;Ne.forEach(He=>{const pt=He.slice(1).trim(),Xe=ht.find(Tt=>Tt.name&&Tt.name.toLowerCase()===pt.toLowerCase());Xe&&!Ie.has(Xe.id)&&(Ie.add(Xe.id),Qn(Xe.id,"mention",{}))})}Lt(""),ue(),Pt.current&&(Pt.current.style.height="auto"),await B(),Ft("Posted!","success")}catch(j){console.error("Error posting:",j),Ft(j?.message||"Failed to post","error")}finally{$t(!1)}}},Ge=async j=>{if(window.confirm("Delete this post?"))try{await Ir(Ye(ke,"posts",j)),vt(G=>G.filter(Ne=>Ne.id!==j)),Ft("Post deleted","info")}catch(G){console.error("Delete error:",G),Ft("Failed to delete","error")}},ze=async j=>{if(!t)return;const G=t.id,Ne=`${j}_${G}`,Ie=nn.has(j),He=new Set(nn);Ie?He.delete(j):He.add(j),sn(He),vt(pt=>pt.map(Xe=>Xe.id===j?{...Xe,likeCount:Math.max(0,(Xe.likeCount||0)+(Ie?-1:1))}:Xe));try{if(Ie)await Ir(Ye(ke,"postLikes",Ne)),await Jr(Ye(ke,"posts",j),{likeCount:No(-1)});else{await ks(Ye(ke,"postLikes",Ne),{postId:j,userId:G,createdAt:xr()}),await Jr(Ye(ke,"posts",j),{likeCount:No(1)});const pt=Et.find(Xe=>Xe.id===j);pt&&Qn(pt.authorId,"like",{postId:j})}}catch(pt){console.error("Like error:",pt),B()}},Bt=async j=>{try{const G=await Dn(On(Mt(ke,"postComments"),bn("postId","==",j),fu("createdAt","asc"),mu(50)));de(Ne=>({...Ne,[j]:G.docs.map(Ie=>({id:Ie.id,...Ie.data()}))}))}catch(G){console.error("Error loading comments:",G)}},dt=j=>{const G=new Set(jn);G.has(j)?G.delete(j):(G.add(j),Fn[j]||Bt(j)),Ls(G)},Xn=async j=>{const G=(Re[j]||"").trim(),Ne=kt[j];if(!(!G&&!Ne||!t)){st(Ie=>({...Ie,[j]:!0}));try{let Ie=null;if(Ne){const wt=Ha(Wa,`comment-images/${Date.now()}_${Ne.name}`);await _d(wt,Ne),Ie=await Do(wt)}const He={postId:j,authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:G||"",createdAt:xr()};Ie&&(He.imageURL=Ie);const pt=Oe[j];pt&&(He.replyToId=pt.id,He.replyToName=pt.authorName),await ci(Mt(ke,"postComments"),He),await Jr(Ye(ke,"posts",j),{commentCount:No(1)});const Xe=Et.find(wt=>wt.id===j);Xe&&Qn(Xe.authorId,"comment",{postId:j});const Tt=G.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Tt){const wt=new Set;Tt.forEach(vn=>{const un=vn.slice(1).trim(),Wn=ht.find(Es=>Es.name&&Es.name.toLowerCase()===un.toLowerCase());Wn&&!wt.has(Wn.id)&&(wt.add(Wn.id),Qn(Wn.id,"mention",{postId:j}))})}Ze(wt=>({...wt,[j]:""})),rn(wt=>({...wt,[j]:null})),pn(wt=>({...wt,[j]:null})),_t(wt=>({...wt,[j]:null})),Nn.current[j]&&(Nn.current[j].value=""),vt(wt=>wt.map(vn=>vn.id===j?{...vn,commentCount:(vn.commentCount||0)+1}:vn)),await Bt(j)}catch(Ie){console.error("Comment error:",Ie),Ft("Failed to comment","error")}finally{st(Ie=>({...Ie,[j]:!1}))}}},nr=async(j,G)=>{try{await Ir(Ye(ke,"postComments",G)),await Jr(Ye(ke,"posts",j),{commentCount:No(-1)}),de(Ne=>({...Ne,[j]:(Ne[j]||[]).filter(Ie=>Ie.id!==G)})),vt(Ne=>Ne.map(Ie=>Ie.id===j?{...Ie,commentCount:Math.max((Ie.commentCount||1)-1,0)}:Ie))}catch(Ne){console.error("Delete comment error:",Ne),Ft("Failed to delete comment","error")}},Ur=(j,G)=>{const Ne=G.target.files?.[0];if(!Ne)return;if(Ne.size>5*1024*1024){Ft("Image must be under 5MB","error");return}rn(He=>({...He,[j]:Ne}));const Ie=new FileReader;Ie.onload=He=>pn(pt=>({...pt,[j]:He.target.result})),Ie.readAsDataURL(Ne)},Us=j=>{rn(G=>({...G,[j]:null})),pn(G=>({...G,[j]:null})),Nn.current[j]&&(Nn.current[j].value="")},mi=j=>{Lt(j.target.value),j.target.style.height="auto",j.target.style.height=Math.min(j.target.scrollHeight,120)+"px",Un(j.target.value,"compose")},Br=(j,G)=>{Ze(Ne=>({...Ne,[j]:G})),Un(G,j)};return a.jsx($o,{children:a.jsxs("div",{className:"cb-dashboard","data-theme":h?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-notif-wrap",ref:Fe,children:[a.jsxs("button",{className:"header-notif-btn",onClick:()=>{Ae(!le),le||fr()},"aria-label":"Notifications",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),ws>0&&a.jsx("span",{className:"header-notif-badge",children:ws>9?"9+":ws})]}),le&&a.jsxs("div",{className:"notif-panel",children:[a.jsxs("div",{className:"notif-panel-header",children:[a.jsx("span",{className:"notif-panel-title",children:"Notifications"}),wn.length>0&&a.jsx("button",{className:"notif-clear-btn",onClick:Ps,children:"Clear all"})]}),a.jsx("div",{className:"notif-panel-list",children:wn.length===0?a.jsx("div",{className:"notif-empty",children:"No notifications yet"}):wn.map(j=>a.jsxs("div",{className:`notif-item${j.read?"":" unread"}`,onClick:()=>{if(Ae(!1),j.type==="buddy_request"||j.type==="buddy_accept")b(g?"/client/core-buddy/buddies":"/upgrade");else if((j.type==="like"||j.type==="comment")&&j.postId){if(!jn.has(j.postId)){const G=new Set(jn);G.add(j.postId),Ls(G),Fn[j.postId]||Bt(j.postId)}setTimeout(()=>{const G=document.getElementById(`post-${j.postId}`);G&&G.scrollIntoView({behavior:"smooth",block:"center"})},150)}else j.type==="like"||j.type==="comment"?document.querySelector(".cb-journey-section")?.scrollIntoView({behavior:"smooth"}):j.type==="mention"&&b(`/client/core-buddy/profile/${j.fromId}`)},children:[a.jsx("div",{className:"notif-item-avatar",children:j.fromPhotoURL?a.jsx("img",{src:j.fromPhotoURL,alt:""}):a.jsx("span",{children:(j.fromName||"?")[0]})}),a.jsxs("div",{className:"notif-item-body",children:[a.jsxs("p",{className:"notif-item-text",children:[a.jsx("strong",{children:j.fromName})," ",j.type==="buddy_request"&&"sent you a buddy request",j.type==="buddy_accept"&&"accepted your buddy request",j.type==="like"&&"liked your post",j.type==="comment"&&"commented on your post",j.type==="mention"&&"mentioned you"]}),a.jsx("span",{className:"notif-item-time",children:Mp(j.createdAt)})]})]},j.id))})]})]}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:h?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:AE.map((j,G)=>{const Ne=G<H;return a.jsx("line",{x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,className:`ring-tick ${Ne?"elapsed":"remaining"}`,strokeWidth:j.thick?"3":"2"},G)})}),a.jsxs("div",{className:"cb-ring-center",children:[a.jsxs("div",{className:"cb-ring-logo",onClick:()=>Ee.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:K||"/Logo.webp",alt:K?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${Ce?" uploading":""}`,children:Ce?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:Ee,type:"file",accept:"image/*",onChange:Vs,style:{display:"none"}})]}),!K&&!Ce&&a.jsx("div",{className:"cb-photo-badge",onClick:()=>Ee.current?.click(),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(T.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(T.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(T.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Dp[Be].text," ",a.jsx("strong",{children:Dp[Be].bold})]},Be)]}),a.jsx("div",{className:"cb-stats-row",children:Ns.map(j=>{const G=(j.size==="large",38),Ne=2*Math.PI*G,Ie=Ne-j.pct/100*Ne,He=j.editable;return a.jsxs("div",{className:`cb-stat-item${j.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:`cb-stat-ring${He?" cb-stat-tappable":""}${He&&Pe?" cb-stat-hint":""}`,onClick:He?()=>{xe(!0),qe(!1)}:void 0,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:G}),a.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:G,style:{stroke:j.color},strokeDasharray:Ne,strokeDashoffset:Ie})]}),a.jsx("span",{className:"cb-stat-value",style:{color:j.color},children:j.value})]}),a.jsx("span",{className:"cb-stat-label",children:j.label})]},j.label)})}),te&&a.jsx("div",{className:"cb-target-overlay",onClick:()=>xe(!1),children:a.jsxs("div",{className:"cb-target-picker",onClick:j=>j.stopPropagation(),children:[a.jsx("h4",{children:"Weekly workout goal"}),a.jsx("p",{children:"How many sessions per week?"}),a.jsx("div",{className:"cb-target-options",children:[1,2,3,4,5,6,7].map(j=>a.jsx("button",{className:`cb-target-option${j===De?" active":""}`,onClick:()=>ds(j),children:j},j))})]})}),a.jsxs("p",{className:"cb-coach-msg",children:[xs.main," ",a.jsx("strong",{children:ti}),"  ",xs.sub]}),C&&a.jsxs("button",{className:"cb-nudge-card",onClick:C.action||void 0,style:C.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-C.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:C.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:C.label}),a.jsx("span",{className:"cb-nudge-title",children:C.message}),C.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[C.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[g&&a.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:j=>{xn(j),b("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:As("protein"),color:"var(--color-primary)"},{label:"C",pct:As("carbs"),color:"var(--color-primary)"},{label:"F",pct:As("fats"),color:"var(--color-primary)"},{label:"Cal",pct:As("calories"),color:"var(--color-primary)"}].map(j=>{const Ne=2*Math.PI*38,Ie=Ne-j.pct/100*Ne;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:j.color},strokeDasharray:Ne,strokeDashoffset:Ie})]}),a.jsx("span",{style:{color:j.color},children:j.label})]},j.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:j=>{xn(j),b("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workout"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[L," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[z," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-consistency ripple-btn",onClick:j=>{xn(j),b("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:"cb-habit-dots",children:Array.from({length:E},(j,G)=>a.jsx("span",{className:`cb-habit-dot${G<P?" done":""}`},G))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[P,"/",E," today"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:j=>{xn(j),b("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),ie.length>0?a.jsx("div",{className:"cb-lb-preview",children:ie.map((j,G)=>{const Ne=["#FFD700","#A8B4C0","#CD7F32"][G],Ie=j.name?j.name.split(" ").map(pt=>pt[0]).join("").slice(0,2).toUpperCase():"?",He=j.id===t?.id;return a.jsxs("div",{className:`cb-lb-entry${He?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:Ne},children:j.photoURL?a.jsx("img",{src:j.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:Ie})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:Ne},children:["#",G+1]})]},j.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:j=>{xn(j),b("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("div",{className:"cb-journey-section",children:[a.jsx("h3",{className:"cb-journey-title",children:"My Journey"}),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:K?a.jsx("img",{src:K,alt:""}):a.jsx("span",{children:Vc(t?.name)})}),a.jsxs("div",{className:"journey-compose-body",style:{position:"relative"},children:[a.jsx("textarea",{ref:Pt,placeholder:"Share your progress... (use @ to mention)",value:bt,onChange:mi,rows:1,maxLength:500}),Zt&&Os==="compose"&&es.length>0&&a.jsx("div",{className:"mention-dropdown",children:es.map(j=>a.jsxs("button",{className:"mention-option",onClick:()=>js(j,"compose"),children:[a.jsx("div",{className:"mention-option-avatar",children:j.photoURL?a.jsx("img",{src:j.photoURL,alt:""}):a.jsx("span",{children:Vc(j.name)})}),a.jsx("span",{children:j.name})]},j.id))}),ut&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:ut,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:ue,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>Vn.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:Vn,type:"file",accept:"image/*",onChange:re,hidden:!0}),(bt.trim()||ae)&&a.jsx("button",{className:"journey-post-btn",onClick:Me,disabled:tt,children:tt?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),ct?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"cb-spinner"})}):Et.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"Start sharing your fitness journey!"})]}):a.jsx("div",{className:"journey-list",children:Et.map(j=>a.jsxs("div",{id:`post-${j.id}`,className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:j.authorPhotoURL?a.jsx("img",{src:j.authorPhotoURL,alt:""}):a.jsx("span",{children:Vc(j.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:j.authorName}),a.jsx("span",{className:"journey-post-time",children:Mp(j.createdAt)})]}),a.jsx("button",{className:"journey-delete-btn",onClick:()=>Ge(j.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),j.type==="workout_summary"&&j.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:j.metadata.title}),j.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:j.metadata.stats.map(G=>`${G.value} ${G.label}`).join("    ")}),!j.metadata.stats?.length&&j.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:j.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed a workout using Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):j.type==="badge_earned"&&j.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame journey-card-logo-badge",children:a.jsx("img",{src:"/Logo.webp",alt:j.metadata.title,className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:j.metadata.title}),j.metadata.badgeDesc&&a.jsx("p",{className:"journey-card-stats-line",children:j.metadata.badgeDesc}),a.jsx("p",{className:"journey-card-cta",children:"I just earned a badge on Core Buddy"}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):j.type==="habits_summary"&&j.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:j.metadata.title}),j.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:j.metadata.stats.map(G=>`${G.value} ${G.label}`).join("    ")}),j.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:j.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed my daily habits with Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):a.jsxs(a.Fragment,{children:[j.content&&a.jsx("p",{className:"journey-post-content",children:yn(j.content)}),j.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:j.imageURL,alt:"Post",loading:"lazy"})})]}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${nn.has(j.id)?" liked":""}`,onClick:()=>ze(j.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:nn.has(j.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:j.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${jn.has(j.id)?" active":""}`,onClick:()=>dt(j.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:j.commentCount||0})]})]}),jn.has(j.id)&&a.jsxs("div",{className:"journey-comments",children:[Fn[j.id]?.length>0?Fn[j.id].map(G=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",children:G.authorPhotoURL?a.jsx("img",{src:G.authorPhotoURL,alt:""}):a.jsx("span",{children:Vc(G.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:G.authorName}),G.replyToName&&a.jsxs("span",{className:"journey-comment-reply-tag",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"9 14 4 9 9 4"}),a.jsx("path",{d:"M20 20v-7a4 4 0 0 0-4-4H4"})]}),G.replyToName]}),G.content&&a.jsx("span",{className:"journey-comment-text",children:yn(G.content)}),G.imageURL&&a.jsx("img",{className:"journey-comment-image",src:G.imageURL,alt:"Comment",loading:"lazy"})]}),a.jsxs("div",{className:"journey-comment-actions-row",children:[a.jsx("span",{className:"journey-comment-time",children:Mp(G.createdAt)}),a.jsx("button",{className:"journey-comment-reply-btn",onClick:()=>_t(Ne=>({...Ne,[j.id]:{id:G.id,authorName:G.authorName}})),children:"Reply"}),a.jsx("button",{className:"journey-comment-delete-btn",onClick:()=>nr(j.id,G.id),"aria-label":"Delete comment",children:a.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})]},G.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),Oe[j.id]&&a.jsxs("div",{className:"journey-comment-replying",children:[a.jsxs("span",{children:["Replying to ",a.jsx("strong",{children:Oe[j.id].authorName})]}),a.jsx("button",{onClick:()=>_t(G=>({...G,[j.id]:null})),"aria-label":"Cancel reply",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),mn[j.id]&&a.jsxs("div",{className:"journey-comment-img-preview",children:[a.jsx("img",{src:mn[j.id],alt:"Preview"}),a.jsx("button",{onClick:()=>Us(j.id),"aria-label":"Remove image",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("button",{className:"journey-comment-img-btn",onClick:()=>Nn.current[j.id]?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:G=>{Nn.current[j.id]=G},type:"file",accept:"image/*",onChange:G=>Ur(j.id,G),hidden:!0}),a.jsx("input",{type:"text",placeholder:"Comment",value:Re[j.id]||"",onChange:G=>Br(j.id,G.target.value),onKeyDown:G=>{G.key==="Enter"&&Xn(j.id)},maxLength:300}),Zt&&Os===j.id&&es.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:es.map(G=>a.jsxs("button",{className:"mention-option",onClick:()=>js(G,j.id),children:[a.jsx("div",{className:"mention-option-avatar",children:G.photoURL?a.jsx("img",{src:G.photoURL,alt:""}):a.jsx("span",{children:Vc(G.name)})}),a.jsx("span",{children:G.name})]},G.id))}),a.jsx("button",{onClick:()=>Xn(j.id),disabled:!(Re[j.id]||"").trim()&&!kt[j.id]||et[j.id],children:et[j.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},j.id))})]})]}),!g&&a.jsxs("button",{className:"cb-upgrade-cta",onClick:()=>b("/upgrade"),children:[a.jsx("span",{className:"cb-upgrade-cta-text",children:"Unlock the full experience"}),a.jsx("span",{className:"cb-upgrade-cta-sub",children:"Nutrition, buddies, achievements & more"}),a.jsxs("svg",{className:"cb-upgrade-cta-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]})]})]}),a.jsx(ua,{active:"home"}),Sn&&a.jsxs("div",{className:`toast-notification ${Sn.type}`,children:[Sn.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Sn.message]}),a.jsx(HM,{steps:Pr,active:Or,onFinish:Qs})]})})}const Lp=new Map;function oi(){return new Date().toISOString().split("T")[0]}const h_=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],KM={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function YM(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function QM(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Li(),{isDark:l,toggleTheme:u,accent:h}=Wo(),p=Lr(),[g,y]=w.useState("loading"),[b,E]=w.useState(null),[T,O]=w.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[H,q]=w.useState(null),[z,ne]=w.useState(oi()),[W,ee]=w.useState({entries:[],water:0}),[ye,Se]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[_e,R]=w.useState(!1),[S,I]=w.useState(!1),[P,D]=w.useState(()=>{const C=new Date;return{year:C.getFullYear(),month:C.getMonth()}}),[L,A]=w.useState(!1),[De,Qe]=w.useState(()=>{const C=new Date;return{year:C.getFullYear(),month:C.getMonth()}}),[te,xe]=w.useState(!1),[Pe,qe]=w.useState(YM),[ie,M]=w.useState(null),[K,be]=w.useState(null),[Ce,Te]=w.useState(!1),[Ee,We]=w.useState(null),[nt,Be]=w.useState(""),[kn,Sn]=w.useState(!1),[Cn,Ft]=w.useState(""),[Et,vt]=w.useState([]),[ct,Zn]=w.useState(!1),[bt,Lt]=w.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[ae,ln]=w.useState(null),[ut,At]=w.useState("100"),[tt,$t]=w.useState(0),[nn,sn]=w.useState("weight"),[jn,Ls]=w.useState(0),[Fn,de]=w.useState(null);w.useRef(null);const Re=w.useRef(!1),Ze=w.useRef(null),et=w.useRef(null),st=w.useRef(null),Oe=w.useCallback((C,B="info")=>{de({message:C,type:B}),setTimeout(()=>de(null),3e3)},[]);w.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const B=await Ms(Ye(ke,"nutritionTargets",t.id));B.exists()?(E(B.data()),y("dashboard")):y("setup")}catch(B){console.error("Error loading nutrition data:",B),y("setup")}})()},[t?.id]),w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const B=await Ms(Ye(ke,"nutritionLogs",`${t.id}_${z}`));if(B.exists()){const re=B.data();ee({entries:re.entries||[],water:re.water||0})}else ee({entries:[],water:0})}catch(B){console.error("Error loading log:",B),ee({entries:[],water:0})}})()},[t?.id,z]),w.useEffect(()=>{const C=W.entries.reduce((B,re)=>({protein:B.protein+(re.protein||0),carbs:B.carbs+(re.carbs||0),fats:B.fats+(re.fats||0),calories:B.calories+(re.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Se(C)},[W.entries]);const _t=async C=>{try{await ks(Ye(ke,"nutritionLogs",`${t.id}_${z}`),{clientId:t.id,date:z,entries:C.entries,water:C.water,updatedAt:Ut.now()})}catch(B){console.error("Error saving nutrition log:",B)}},kt=z===oi(),rn=(C,B)=>new Date(C,B+1,0).getDate(),mn=(C,B)=>new Date(C,B,1).getDay(),pn=C=>{if(C===oi())return"Today";const B=new Date(C+"T12:00:00"),re=new Date;return re.setDate(re.getDate()-1),C===re.toISOString().split("T")[0]?"Yesterday":B.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})},Pt=["January","February","March","April","May","June","July","August","September","October","November","December"],Vn=["Su","Mo","Tu","We","Th","Fr","Sa"],Nn=()=>{let C=parseFloat(T.weight);T.weightUnit==="lbs"&&(C*=.453592);let B;T.heightUnit==="cm"?B=parseFloat(T.height):B=(parseFloat(T.heightFeet)||0)*30.48+(parseFloat(T.heightInches)||0)*2.54;const re=parseInt(T.age);let ue=T.gender==="male"?10*C+6.25*B-5*re+5:10*C+6.25*B-5*re-161;const Ge=ue*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[T.dailyActivity],ze={low:100,moderate:200,high:300,daily:400},Bt=Math.round(Ge+ze[T.trainingFrequency]);let dt=Bt,Xn,nr;switch(T.goal){case"lose":dt=Bt*(1-{light:.15,moderate:.2,harsh:.25}[T.deficitLevel]),Xn=2.2,nr=.3;break;case"build":dt=Bt*1.1,Xn=2,nr=.22;break;default:Xn=1.8,nr=.25}dt=Math.max(dt,T.gender==="male"?1400:1100);const Ur=Math.round(C*Xn),Us=Math.round(dt*nr/9),mi=Math.max(0,Math.round((dt-Ur*4-Us*9)/4));q({calories:Math.round(dt),protein:Ur,carbs:mi,fats:Us,bmr:Math.round(ue),neat:Math.round(Ge),exerciseAdd:ze[T.trainingFrequency],tdee:Math.round(Bt)})},wn=async()=>{if(H)try{const C={clientId:t.id,calories:H.calories,protein:H.protein,carbs:H.carbs,fats:H.fats,waterGoal:8,goal:T.goal,updatedAt:Ut.now()};await ks(Ye(ke,"nutritionTargets",t.id),C),E(C),y("dashboard"),Oe("Macro targets saved!","success")}catch(C){console.error("Error saving targets:",C),Oe("Failed to save targets. Please try again.","error")}},hs=()=>{const C=T.weight&&parseFloat(T.weight)>0,B=T.age&&parseInt(T.age)>0,re=T.heightUnit==="cm"?T.height&&parseFloat(T.height)>0:T.heightFeet&&parseFloat(T.heightFeet)>0||T.heightInches&&parseFloat(T.heightInches)>0;return C&&B&&re},le="nut_favourite_foods",Ae=()=>{try{return JSON.parse(localStorage.getItem(le)||"[]")}catch{return[]}};w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const B=await Ms(Ye(ke,"favouriteFoods",t.id));if(B.exists()){const re=B.data().items||[];localStorage.setItem(le,JSON.stringify(re)),Ls(ue=>ue+1)}else{const re=Ae();re.length>0&&await ks(Ye(ke,"favouriteFoods",t.id),{items:re,updatedAt:Ut.now()})}}catch(B){console.error("Error loading favourites:",B)}})()},[t?.id]);const Fe=C=>Ae().some(B=>B.name.toLowerCase()===(C||"").toLowerCase()),ht=C=>{const B=Ae(),re=B.findIndex(ue=>ue.name.toLowerCase()===C.name.toLowerCase());re>=0?B.splice(re,1):B.unshift({name:C.name,protein:C.protein,carbs:C.carbs,fats:C.fats,calories:C.calories,serving:C.serving,per100g:C.per100g||null,servingUnit:C.servingUnit||"g",portion:C.portion||null}),localStorage.setItem(le,JSON.stringify(B)),t?.id&&ks(Ye(ke,"favouriteFoods",t.id),{items:B,updatedAt:Ut.now()}).catch(ue=>console.error("Error saving favourites:",ue)),Ls(ue=>ue+1)},rt=C=>{const B=[...W.entries,{...C,meal:Pe,id:Date.now(),addedAt:new Date().toISOString()}],re={...W,entries:B};ee(re),_t(re),be(null),ln(null),At("100"),$t(0),sn("weight"),Lt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),Oe("Food added!","success")},qn=C=>{const B=W.entries.filter(ue=>ue.id!==C),re={...W,entries:B};ee(re),_t(re)},Hn=async C=>{if(!(!t?.id||C===z)){xe(!0);try{const B=await Ms(Ye(ke,"nutritionLogs",`${t.id}_${C}`));if(!B.exists()||!B.data().entries?.length){Oe("No food logged on that day","error");return}const re=B.data().entries.map(Ge=>({...Ge,id:Date.now()+Math.random(),addedAt:new Date().toISOString()})),ue=[...W.entries,...re],Me={...W,entries:ue};ee(Me),_t(Me),A(!1),Oe(`Copied ${re.length} items from ${pn(C)}`,"success")}catch(B){console.error("Error copying day:",B),Oe("Failed to copy day","error")}finally{xe(!1)}}},Zt=w.useRef(null),gn=w.useRef([]),Os=3,_s=5,es=async()=>{Te(!0);const C=document.querySelector("#barcode-reader");if(!C){Te(!1),Oe("Scanner container not found.","error");return}if(!Zt.current)try{const re=await ur(()=>import("./quagga.min-BbicSfvA.js").then(ue=>ue.q),[]);Zt.current=re.default}catch(re){console.error("Failed to load barcode scanner:",re),Te(!1),Oe("Could not load scanner.","error");return}const B=Zt.current;B.init({inputStream:{type:"LiveStream",target:C,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},re=>{if(re){console.error("Quagga init error:",re),Te(!1),Oe("Could not access camera. Check permissions.","error");return}B.start(),Re.current=!0}),gn.current=[],B.onDetected(re=>{const ue=re.codeResult.decodedCodes?.filter(Ge=>Ge.error!==void 0)?.map(Ge=>Ge.error)||[];if((ue.length>0?ue.reduce((Ge,ze)=>Ge+ze,0)/ue.length:1)<.15){const Ge=re.codeResult.code,ze=gn.current;ze.push(Ge),ze.length>_s&&ze.shift(),ze.filter(dt=>dt===Ge).length>=Os&&(B.offDetected(),gn.current=[],We(Ge))}})},cn=()=>{const C=Zt.current;Re.current&&C&&(C.stop(),C.offDetected(),Re.current=!1),Te(!1)},ts=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,Cs=C=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((C||"").replace(/\s/g,"")),Or=C=>{if(!C)return{value:100,unit:"g"};const B=C.toLowerCase().replace(/\s/g,""),re=B.match(/([\d.]+)/),ue=re?parseFloat(re[1]):100;return Cs(C)?/cl/.test(B)?{value:ue*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(B)&&!/ml/.test(B)?{value:ue*1e3,unit:"ml"}:{value:ue,unit:"ml"}:{value:ue,unit:"g"}},hr=C=>{if(Cs(C.serving_size)||Cs(C.quantity))return"ml";const B=C.product_name||C.product_name_en||"";return ts.test(B)?"ml":"g"},dr=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],Pr=(C,B)=>{const re=C||"",ue=re.match(/\((\d+\.?\d*)\s*g\)/i),Me=re.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(ue&&Me){const Bt=parseFloat(ue[1]);let dt=Me[1].replace(/^\d+\s*/,"").trim();if(dt&&Bt>0)return{label:dt,weight:Bt}}const Ge=re.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Ge){const Bt=parseFloat(Ge[1]);let dt=Ge[2].replace(/^\d+\s*/,"").trim();if(dt&&Bt>0)return{label:dt,weight:Bt}}const ze=B||"";for(const{pattern:Bt,label:dt,weight:Xn}of dr)if(Bt.test(ze))return{label:dt,weight:Xn};return null},ws=C=>{const B=C.nutriments||{},re=hr(C),ue=Or(C.serving_size),Me=re==="ml"?ue.unit==="ml"?ue.value:100:ue.value,Ge=C.product_name||C.product_name_en||"Unknown Product",ze=Pr(C.serving_size,Ge);return{name:Ge,brand:C.brands||"",image:C.image_small_url||C.image_url||null,servingSize:C.serving_size||"100g",servingValue:Me,servingUnit:re,portion:ze,protein:Math.round(B.proteins_100g||B.proteins||0),carbs:Math.round(B.carbohydrates_100g||B.carbohydrates||0),fats:Math.round(B.fat_100g||B.fat||0),calories:Math.round(B["energy-kcal_100g"]||B["energy-kcal"]||(B.energy_100g?B.energy_100g/4.184:0)),per100g:!0}},fr=async C=>{Sn(!0);try{const B=`https://world.openfoodfacts.org/api/v2/product/${C}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,re=await fetch(B);if(!re.ok)throw new Error(`HTTP ${re.status}`);const ue=await re.json();if(ue.status==="success"||ue.status===1||ue.product){const Me=ws(ue.product);Me.calories===0&&Me.protein===0&&Me.carbs===0?Oe("Product found but no nutrition data available.","error"):(ln(Me),Me.portion?($t(1),At(String(Me.portion.weight)),sn("portion")):($t(0),At(String(Me.servingValue||100)),sn("weight")),Be(""))}else Oe("Product not found. Try search or manual entry.","error")}catch(B){console.error("Barcode lookup error:",B),Oe("Failed to look up product. Check your connection.","error")}Sn(!1)},Ps=(C,B,re)=>{const ue=C.toLowerCase().trim(),Me=B.toLowerCase().trim(),Ge=re.toLowerCase().trim();let ze=0;return(ue===Ge||ue===Ge+"s"||ue+"s"===Ge)&&(ze+=100),(ue.endsWith(" "+Ge)||ue.endsWith(" "+Ge+"s"))&&(ze+=40),(ue.startsWith(Ge+" ")||ue.startsWith(Ge+"s "))&&(ze+=15),Ge.split(/\s+/).some(dt=>Me===dt||Me.startsWith(dt))&&(ze+=30),ze+=Math.max(0,30-ue.length),ze},Qn=async()=>{if(!Cn.trim())return;Ze.current&&Ze.current.abort();const C=new AbortController;Ze.current=C;const B=Cn.trim().toLowerCase(),re=B.split(/\s+/).filter(Boolean);if(Lp.has(B)){vt(Lp.get(B));return}Zn(!0);try{const Me=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Cn.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Ge=await fetch(Me,{signal:C.signal});if(!Ge.ok)throw new Error(`HTTP ${Ge.status}`);const Bt=((await Ge.json()).products||[]).map(dt=>ws(dt)).filter(dt=>dt.name!=="Unknown Product"&&(dt.calories>0||dt.protein>0)).filter(dt=>{const Xn=(dt.name+" "+dt.brand).toLowerCase();return re.every(nr=>Xn.includes(nr))}).sort((dt,Xn)=>Ps(Xn.name,Xn.brand,B)-Ps(dt.name,dt.brand,B)).slice(0,10);Lp.set(B,Bt),vt(Bt),Bt.length===0&&Oe("No results found. Try a different search.","info")}catch(ue){if(ue.name==="AbortError")return;console.error("Search error:",ue),Oe("Search failed. Check your connection.","error")}Zn(!1)};w.useEffect(()=>{if(et.current&&clearTimeout(et.current),!(!Cn.trim()||K!=="search"||ae))return et.current=setTimeout(()=>{Qn()},700),()=>clearTimeout(et.current)},[Cn]);const Un=()=>{const C={...W,water:W.water+1};ee(C),_t(C)},js=()=>{if(W.water<=0)return;const C={...W,water:W.water-1};ee(C),_t(C)},yn=l,Vs={"ring-protein":yn?"#2dd4bf":"#14b8a6","ring-carbs":yn?"#fbbf24":"#f59e0b","ring-fats":yn?"#a78bfa":"#8b5cf6","ring-cals":"var(--color-primary)"},Qs=80,ds=2*Math.PI*Qs,xn=(C,B,re,ue,Me)=>{const Ge=ue>0?Math.min(100,Math.round(re/ue*100)):0,ze=ds-Ge/100*ds,Bt=Vs[Me]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:Qs}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:Qs,style:{stroke:Bt},strokeDasharray:ds,strokeDashoffset:ze})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:Bt},children:Math.round(re)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",ue,C==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:Bt},children:B})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:Bt},children:[Ge,"%"]})]})};if(w.useEffect(()=>{if(!Ee)return;const C=setTimeout(()=>{const B=Ee;cn(),We(null),fr(B)},1500);return()=>clearTimeout(C)},[Ee]),w.useEffect(()=>()=>{const C=Zt.current;if(Re.current&&C){try{C.stop(),C.offDetected()}catch{}Re.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:T.gender==="male"?"active":"",onClick:()=>{O(C=>({...C,gender:"male"})),q(null)},children:"Male"}),a.jsx("button",{className:T.gender==="female"?"active":"",onClick:()=>{O(C=>({...C,gender:"female"})),q(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:T.age,onChange:C=>{O(B=>({...B,age:C.target.value})),q(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:T.weight,onChange:C=>{O(B=>({...B,weight:C.target.value})),q(null)},placeholder:T.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:T.weightUnit==="kg"?"active":"",onClick:()=>{O(C=>({...C,weightUnit:"kg"})),q(null)},children:"kg"}),a.jsx("button",{className:T.weightUnit==="lbs"?"active":"",onClick:()=>{O(C=>({...C,weightUnit:"lbs"})),q(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[T.heightUnit==="cm"?a.jsx("input",{type:"number",value:T.height,onChange:C=>{O(B=>({...B,height:C.target.value})),q(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:T.heightFeet,onChange:C=>{O(B=>({...B,heightFeet:C.target.value})),q(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:T.heightInches,onChange:C=>{O(B=>({...B,heightInches:C.target.value})),q(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:T.heightUnit==="cm"?"active":"",onClick:()=>{O(C=>({...C,heightUnit:"cm"})),q(null)},children:"cm"}),a.jsx("button",{className:T.heightUnit==="ft"?"active":"",onClick:()=>{O(C=>({...C,heightUnit:"ft"})),q(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:T.dailyActivity,onChange:C=>{O(B=>({...B,dailyActivity:C.target.value})),q(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:T.trainingFrequency,onChange:C=>{O(B=>({...B,trainingFrequency:C.target.value})),q(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:T.goal==="lose"?"active":"",onClick:()=>{O(C=>({...C,goal:"lose"})),q(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:T.goal==="maintain"?"active":"",onClick:()=>{O(C=>({...C,goal:"maintain"})),q(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:T.goal==="build"?"active":"",onClick:()=>{O(C=>({...C,goal:"build"})),q(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),T.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:T.deficitLevel==="light"?"active":"",onClick:()=>{O(C=>({...C,deficitLevel:"light"})),q(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:T.deficitLevel==="moderate"?"active":"",onClick:()=>{O(C=>({...C,deficitLevel:"moderate"})),q(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:T.deficitLevel==="harsh"?"active":"",onClick:()=>{O(C=>({...C,deficitLevel:"harsh"})),q(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:Nn,disabled:!hs(),children:"Calculate Macros"})]}),H&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[xn("Protein","Protein",H.protein,H.protein,"ring-protein"),xn("Carbs","Carbs",H.carbs,H.carbs,"ring-carbs"),xn("Fats","Fats",H.fats,H.fats,"ring-fats"),xn("Calories","Calories",H.calories,H.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[H.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[H.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",H.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[H.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:wn,children:"Set as My Daily Targets"})]})]}),Fn&&a.jsx("div",{className:`toast-notification ${Fn.type}`,children:Fn.message})]});const ti=C=>{const B=new Date(C+"T12:00:00"),re=B.getDay(),ue=new Date(B);ue.setDate(B.getDate()-(re+6)%7);const Me=[];for(let Ge=0;Ge<7;Ge++){const ze=new Date(ue);ze.setDate(ue.getDate()+Ge),Me.push(ze.toISOString().split("T")[0])}return Me},Vr=["M","T","W","T","F","S","S"],mr=(C,B="search")=>{qe(C),B==="scan"?(be("scan"),ln(null)):B==="manual"?(be("manual"),Lt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):B==="favourites"?be("favourites"):(be("search"),vt([]),Ft(""))},Ns=ti(z),As=new Date(z+"T12:00:00"),xs=`${Pt[As.getMonth()]} ${As.getFullYear()}`;return a.jsx($o,{children:a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),q(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip anim-fade-up",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const C=new Date(z+"T12:00:00");C.setDate(C.getDate()-7);const B=C.toISOString().split("T")[0];ne(B)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{R(!_e),D({year:As.getFullYear(),month:As.getMonth()})},children:xs}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const C=new Date(z+"T12:00:00");C.setDate(C.getDate()+7);const B=C.toISOString().split("T")[0];B<=oi()&&ne(B)},"aria-label":"Next week",disabled:Ns[6]>=oi(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:Ns.map((C,B)=>{const re=new Date(C+"T12:00:00").getDate(),ue=C===z,Me=C>oi(),Ge=C===oi();return a.jsxs("button",{className:`nut-week-day${ue?" selected":""}${Ge?" today":""}${Me?" future":""}`,disabled:Me,onClick:()=>ne(C),children:[a.jsx("span",{className:"nut-week-day-letter",children:Vr[B]}),a.jsx("span",{className:"nut-week-day-num",children:re})]},C)})})]}),_e&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>D(C=>{let B=C.month-1,re=C.year;return B<0&&(B=11,re--),{year:re,month:B}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[Pt[P.month]," ",P.year]}),a.jsx("button",{onClick:()=>D(C=>{let B=C.month+1,re=C.year;return B>11&&(B=0,re++),{year:re,month:B}}),disabled:P.year===new Date().getFullYear()&&P.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Vn.map(C=>a.jsx("span",{children:C},C))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(mn(P.year,P.month))].map((C,B)=>a.jsx("span",{},`e${B}`)),[...Array(rn(P.year,P.month))].map((C,B)=>{const re=B+1,ue=`${P.year}-${String(P.month+1).padStart(2,"0")}-${String(re).padStart(2,"0")}`,Me=ue>oi(),Ge=ue===z,ze=ue===oi();return a.jsx("button",{className:`nut-cal-day${Ge?" selected":""}${ze?" today":""}${Me?" future":""}`,disabled:Me,onClick:()=>{ne(ue),R(!1)},children:re},re)})]})]}),a.jsxs("div",{className:"nut-rings-row anim-fade-up-d2",children:[xn("Protein","Protein",ye.protein,b.protein,"ring-protein"),xn("Carbs","Carbs",ye.carbs,b.carbs,"ring-carbs"),xn("Fats","Fats",ye.fats,b.fats,"ring-fats"),xn("Calories","kCal",ye.calories,b.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone anim-fade-up-d4",children:a.jsxs("div",{className:"nut-light-content",children:[kt&&a.jsxs("div",{className:"nut-quick-row",children:[a.jsxs("button",{className:"nut-water-quick",onClick:()=>I(!0),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsxs("span",{className:"nut-water-quick-count",children:[W.water," / ",b?.waterGoal||8]}),a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),a.jsxs("button",{className:"nut-copy-day-btn",onClick:()=>{A(!0),Qe({year:new Date().getFullYear(),month:new Date().getMonth()})},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),a.jsx("span",{children:"Copy day"})]})]}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:h_.map(C=>{const B=W.entries.filter(ue=>(ue.meal||"snacks")===C.key),re=B.reduce((ue,Me)=>({protein:ue.protein+(Me.protein||0),carbs:ue.carbs+(Me.carbs||0),fats:ue.fats+(Me.fats||0),calories:ue.calories+(Me.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${C.key}`,children:KM[C.key]}),a.jsx("span",{className:"nut-meal-card-title",children:C.label}),B.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[re.calories," cal"]}),kt&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>M(ie===C.key?null:C.key),"aria-label":`Add to ${C.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),B.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,b.protein>0?re.protein/b.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[re.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,b.carbs>0?re.carbs/b.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[re.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,b.fats>0?re.fats/b.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[re.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,b.calories>0?re.calories/b.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:re.calories})]})]}),B.length>0&&a.jsx("div",{className:"nut-log-list",children:B.map(ue=>a.jsxs("div",{className:"nut-log-item",children:[a.jsx("button",{className:`nut-fav-star log${Fe(ue.name)?" active":""}`,onClick:()=>ht(ue),"aria-label":Fe(ue.name)?"Remove from favourites":"Add to favourites",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:Fe(ue.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:ue.name}),ue.serving&&a.jsx("span",{className:"nut-log-item-serving",children:ue.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ue.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[ue.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[ue.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:ue.calories})]}),kt&&a.jsx("button",{className:"nut-log-delete",onClick:()=>qn(ue.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ue.id))}),B.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:kt?"Tap + to add food":"No entries"})})]},C.key)})})})]})}),ie&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>M(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",h_.find(C=>C.key===ie)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const C=ie;M(null),mr(C,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const C=ie;M(null),mr(C,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const C=ie;M(null),mr(C,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const C=ie;M(null),mr(C,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),L&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>A(!1),children:a.jsxs("div",{className:"nut-copy-from-popup",onClick:C=>C.stopPropagation(),children:[a.jsxs("div",{className:"nut-copy-from-header",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),a.jsx("span",{children:"Copy from..."}),a.jsx("button",{className:"nut-modal-close",onClick:()=>A(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsx("p",{className:"nut-copy-from-hint",children:"Pick a day to copy its food log into today"}),a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>Qe(C=>{let B=C.month-1,re=C.year;return B<0&&(B=11,re--),{year:re,month:B}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[Pt[De.month]," ",De.year]}),a.jsx("button",{onClick:()=>Qe(C=>{let B=C.month+1,re=C.year;return B>11&&(B=0,re++),{year:re,month:B}}),disabled:De.year===new Date().getFullYear()&&De.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Vn.map(C=>a.jsx("span",{children:C},C))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(mn(De.year,De.month))].map((C,B)=>a.jsx("span",{},`e${B}`)),[...Array(rn(De.year,De.month))].map((C,B)=>{const re=B+1,ue=`${De.year}-${String(De.month+1).padStart(2,"0")}-${String(re).padStart(2,"0")}`,Me=ue>oi(),Ge=ue===z,ze=ue===oi(),Bt=Me||Ge;return a.jsx("button",{className:`nut-cal-day${Ge?" selected":""}${ze?" today":""}${Me?" future":""}`,disabled:Bt,onClick:()=>Hn(ue),children:re},re)})]}),te&&a.jsxs("div",{className:"nut-copy-from-loading",children:[a.jsx("div",{className:"wk-loading-spinner"}),a.jsx("span",{children:"Copying..."})]})]})}),S&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>I(!1),children:a.jsxs("div",{className:"nut-water-popup",onClick:C=>C.stopPropagation(),children:[a.jsxs("div",{className:"nut-water-popup-header",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsx("span",{children:"Water Intake"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>I(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsxs("div",{className:"nut-water-popup-body",children:[a.jsx("div",{className:"nut-water-glasses",children:[...Array(b?.waterGoal||8)].map((C,B)=>a.jsx("div",{className:`nut-water-glass ${B<W.water?"filled":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:B<W.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},B))}),a.jsxs("div",{className:"nut-water-popup-count",children:[W.water," / ",b?.waterGoal||8," glasses"]}),a.jsxs("div",{className:"nut-water-btns",children:[a.jsx("button",{onClick:js,disabled:W.water<=0,children:"-"}),a.jsx("button",{onClick:Un,children:"+"})]})]})]})}),K&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{cn(),We(null),be(null),ln(null)},children:a.jsxs("div",{className:"nut-modal",onClick:C=>C.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:K==="scan"?"Scan Barcode":K==="search"?"Search Food":K==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{cn(),We(null),be(null),ln(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),K==="scan"&&!ae&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),Ce&&!Ee&&a.jsx("div",{className:"nut-scan-line"}),Ee&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:Ee})]})]}),!Ce&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:es,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),Ce&&!Ee&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:nt,onChange:C=>Be(C.target.value),onKeyDown:C=>C.key==="Enter"&&nt.trim()&&fr(nt.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>nt.trim()&&fr(nt.trim()),disabled:!nt.trim()||kn,children:kn?"...":"Look Up"})]})]}),K==="scan"&&ae&&(()=>{const C=ae.servingUnit||"g",B=ae.portion,re=nn==="portion"&&B?tt*B.weight:parseFloat(ut)||0,ue=re/100,Me=C==="ml"?[100,200,250,500]:[50,100,150,200],Ge=nn==="portion"&&B?`${tt} ${B.label}${tt!==1?"s":""} (${Math.round(re)}${C})`:`${Math.round(re)}${C}`;return a.jsxs("div",{className:"nut-product-result",children:[ae.image&&a.jsx("img",{src:ae.image,alt:ae.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:ae.name}),a.jsx("button",{className:`nut-fav-star confirm${Fe(ae.name)?" active":""}`,onClick:()=>ht({name:ae.name,protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories,serving:ae.servingSize,per100g:{protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories},servingUnit:ae.servingUnit||"g",portion:ae.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Fe(ae.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ae.brand&&a.jsx("p",{className:"nut-product-brand",children:ae.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",C,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ae.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[ae.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[ae.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[ae.calories," cal"]})]}),B&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:nn==="portion"?"active":"",onClick:()=>{sn("portion"),tt<1&&$t(1)},children:"Portions"}),a.jsxs("button",{className:nn==="weight"?"active":"",onClick:()=>{sn("weight"),At(String(Math.round(re)||100))},children:["Custom (",C,")"]})]}),nn==="portion"&&B?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>$t(Math.max(1,tt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:tt}),a.jsxs("span",{className:"nut-stepper-label",children:[B.label,tt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),C]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>$t(tt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",C,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:ut,onChange:ze=>At(ze.target.value),onFocus:ze=>ze.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Me.map(ze=>a.jsxs("button",{className:`nut-quick-btn${ut===String(ze)?" active":""}`,onClick:()=>At(String(ze)),children:[ze,C]},ze))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(ae.protein*ue),"p / ",Math.round(ae.carbs*ue),"c / ",Math.round(ae.fats*ue),"f / ",Math.round(ae.calories*ue)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{ln(null),be("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>rt({name:ae.name,protein:Math.round(ae.protein*ue),carbs:Math.round(ae.carbs*ue),fats:Math.round(ae.fats*ue),calories:Math.round(ae.calories*ue),serving:Ge}),children:"Add"})]})]})})(),K==="search"&&!ae&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:st,value:Cn,onChange:C=>Ft(C.target.value),onKeyDown:C=>{C.key==="Enter"&&(clearTimeout(et.current),Qn())},onFocus:()=>setTimeout(()=>st.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:Qn,disabled:ct,children:ct?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[Et.map((C,B)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{ln(C),C.portion?($t(1),At(String(C.portion.weight)),sn("portion")):($t(0),At(String(C.servingValue||100)),sn("weight"))},children:[C.image&&a.jsx("img",{src:C.image,alt:C.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:C.name}),C.brand&&a.jsx("span",{className:"nut-search-item-brand",children:C.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[C.calories," cal  ",C.protein,"p  ",C.carbs,"c  ",C.fats,"f per 100",C.servingUnit||"g"]})]})]},B)),Et.length===0&&Cn&&!ct&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),K==="search"&&ae&&(()=>{const C=ae.servingUnit||"g",B=ae.portion,re=nn==="portion"&&B?tt*B.weight:parseFloat(ut)||0,ue=re/100,Me=C==="ml"?[100,200,250,500]:[50,100,150,200],Ge=nn==="portion"&&B?`${tt} ${B.label}${tt!==1?"s":""} (${Math.round(re)}${C})`:`${Math.round(re)}${C}`;return a.jsxs("div",{className:"nut-product-result",children:[ae.image&&a.jsx("img",{src:ae.image,alt:ae.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:ae.name}),a.jsx("button",{className:`nut-fav-star confirm${Fe(ae.name)?" active":""}`,onClick:()=>ht({name:ae.name,protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories,serving:ae.servingSize,per100g:{protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories},servingUnit:ae.servingUnit||"g",portion:ae.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Fe(ae.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ae.brand&&a.jsx("p",{className:"nut-product-brand",children:ae.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",C,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ae.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[ae.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[ae.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[ae.calories," cal"]})]}),B&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:nn==="portion"?"active":"",onClick:()=>{sn("portion"),tt<1&&$t(1)},children:"Portions"}),a.jsxs("button",{className:nn==="weight"?"active":"",onClick:()=>{sn("weight"),At(String(Math.round(re)||100))},children:["Custom (",C,")"]})]}),nn==="portion"&&B?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>$t(Math.max(1,tt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:tt}),a.jsxs("span",{className:"nut-stepper-label",children:[B.label,tt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),C]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>$t(tt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",C,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:ut,onChange:ze=>At(ze.target.value),onFocus:ze=>ze.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Me.map(ze=>a.jsxs("button",{className:`nut-quick-btn${ut===String(ze)?" active":""}`,onClick:()=>At(String(ze)),children:[ze,C]},ze))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(ae.protein*ue),"p / ",Math.round(ae.carbs*ue),"c / ",Math.round(ae.fats*ue),"f / ",Math.round(ae.calories*ue)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>ln(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>rt({name:ae.name,protein:Math.round(ae.protein*ue),carbs:Math.round(ae.carbs*ue),fats:Math.round(ae.fats*ue),calories:Math.round(ae.calories*ue),serving:Ge}),children:"Add"})]})]})})(),K==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:bt.name,onChange:C=>Lt(B=>({...B,name:C.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:bt.serving,onChange:C=>Lt(B=>({...B,serving:C.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:bt.protein,onChange:C=>Lt(B=>({...B,protein:C.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:bt.carbs,onChange:C=>Lt(B=>({...B,carbs:C.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:bt.fats,onChange:C=>Lt(B=>({...B,fats:C.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:bt.calories,onChange:C=>Lt(B=>({...B,calories:C.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!bt.name.trim(),onClick:()=>rt({name:bt.name,protein:parseFloat(bt.protein)||0,carbs:parseFloat(bt.carbs)||0,fats:parseFloat(bt.fats)||0,calories:parseFloat(bt.calories)||0,serving:bt.serving||""}),children:"Add Food"})]}),K==="favourites"&&!ae&&(()=>{const C=Ae(),B=re=>{if(re.per100g){const ue=re.per100g;ln({name:re.name,brand:"",image:null,servingSize:re.serving||"100g",servingValue:100,servingUnit:re.servingUnit||"g",portion:re.portion||null,protein:ue.protein,carbs:ue.carbs,fats:ue.fats,calories:ue.calories,per100g:!0}),re.portion?($t(1),At(String(re.portion.weight)),sn("portion")):($t(0),At("100"),sn("weight"))}else rt({name:re.name,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,serving:re.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:C.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:C.map((re,ue)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:Me=>{Me.stopPropagation(),ht(re)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>B(re),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:re.name}),a.jsx("span",{className:"nut-recent-item-serving",children:re.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[re.calories," cal"]})]})]},ue))})})})(),K==="favourites"&&ae&&(()=>{const C=ae.servingUnit||"g",B=ae.portion,re=nn==="portion"&&B?tt*B.weight:parseFloat(ut)||0,ue=re/100,Me=C==="ml"?[100,200,250,500]:[50,100,150,200],Ge=nn==="portion"&&B?`${tt} ${B.label}${tt!==1?"s":""} (${Math.round(re)}${C})`:`${Math.round(re)}${C}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:ae.name}),a.jsx("button",{className:`nut-fav-star confirm${Fe(ae.name)?" active":""}`,onClick:()=>ht({name:ae.name,protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories,serving:ae.servingSize,per100g:{protein:ae.protein,carbs:ae.carbs,fats:ae.fats,calories:ae.calories},servingUnit:ae.servingUnit||"g",portion:ae.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Fe(ae.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",C,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ae.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[ae.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[ae.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[ae.calories," cal"]})]}),B&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:nn==="portion"?"active":"",onClick:()=>{sn("portion"),tt<1&&$t(1)},children:"Portions"}),a.jsxs("button",{className:nn==="weight"?"active":"",onClick:()=>{sn("weight"),At(String(Math.round(re)||100))},children:["Custom (",C,")"]})]}),nn==="portion"&&B?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>$t(Math.max(1,tt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:tt}),a.jsxs("span",{className:"nut-stepper-label",children:[B.label,tt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(re),C]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>$t(tt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",C,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:ut,onChange:ze=>At(ze.target.value),onFocus:ze=>ze.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Me.map(ze=>a.jsxs("button",{className:`nut-quick-btn${ut===String(ze)?" active":""}`,onClick:()=>At(String(ze)),children:[ze,C]},ze))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(ae.protein*ue),"p / ",Math.round(ae.carbs*ue),"c / ",Math.round(ae.fats*ue),"f / ",Math.round(ae.calories*ue)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>ln(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>rt({name:ae.name,protein:Math.round(ae.protein*ue),carbs:Math.round(ae.carbs*ue),fats:Math.round(ae.fats*ue),calories:Math.round(ae.calories*ue),serving:Ge}),children:"Add"})]})]})})()]})}),a.jsx(ua,{active:"nutrition"}),Fn&&a.jsx("div",{className:`toast-notification ${Fn.type}`,children:Fn.message})]})})}async function RE(s){const{type:e="workout",title:t="Workout Complete!",stats:i=[],badges:l=[],badgeImage:u,badgeDesc:h}=s,p=1080,g=1920,y=document.createElement("canvas");y.width=p,y.height=g;const b=y.getContext("2d"),E="#2a2a28",T="#ffffff",O="#A12F3A",H="#1a1a1a",q="#555555";b.fillStyle=E,b.fillRect(0,0,p,g);const z=Math.round(p*.82),ne=Math.round(g*.75),W=Math.round((p-z)/2),ee=Math.round((g-ne)/2),ye=28,Se=5;b.save(),b.shadowColor="rgba(0, 0, 0, 0.45)",b.shadowBlur=40,b.shadowOffsetY=10,d_(b,W,ee,z,ne,ye),b.fillStyle=T,b.fill(),b.restore(),b.save(),d_(b,W,ee,z,ne,ye),b.strokeStyle=O,b.lineWidth=Se,b.stroke(),b.restore();const _e=220,R=50,S=52,I=68,P=10,D=36,L=48,A=30,De=34,Qe=46,te=30,xe=28;b.font=`bold ${S}px 'Orbitron', sans-serif`;const Pe=Uc(b,t.toUpperCase(),z-100);b.font=`500 ${D}px 'Montserrat', sans-serif`;let qe=[];e==="badge"&&h?qe=Uc(b,h,z-120):e==="badge"&&l.length>0?qe=Uc(b,l.join("    "),z-120):i.length>0&&(qe=Uc(b,i.map(vt=>`${vt.value} ${vt.label}`).join("    "),z-120));const ie=e==="badge"?"I just earned a badge on Core Buddy ":e==="habits"?"I just completed my daily habits with Core Buddy ":"I just completed a workout using Core Buddy ";b.font=`bold ${De}px 'Montserrat', sans-serif`;const M=Uc(b,ie,z-80);let K=Pe.length*I;qe.length>0&&(K+=P+qe.length*L),K+=A+M.length*Qe,K+=te+xe;const Ce=ee+ne-60-K,Ee=ee+40,We=Ce-R,nt=p/2,Be=(Ee+We)/2,kn=e==="badge"&&u?u:"/Logo.webp";b.save();const Sn=e==="badge"?"rgba(255, 193, 7, 0.15)":"rgba(161, 47, 58, 0.12)",Cn=b.createRadialGradient(nt,Be,_e*.6,nt,Be,_e*1.5);Cn.addColorStop(0,Sn),Cn.addColorStop(1,"rgba(0, 0, 0, 0)"),b.fillStyle=Cn,b.fillRect(nt-_e*1.5,Be-_e*1.5,_e*3,_e*3),b.restore(),b.beginPath(),b.arc(nt,Be,_e+6,0,Math.PI*2),b.fillStyle=T,b.fill();const Ft=e==="badge"?"#ffc107":O;b.beginPath(),b.arc(nt,Be,_e,0,Math.PI*2),b.strokeStyle=Ft,b.lineWidth=5,b.stroke();try{const vt=await XM(kn);b.save(),b.beginPath(),b.arc(nt,Be,_e-6,0,Math.PI*2),b.clip();const ct=(_e-6)*2;b.drawImage(vt,nt-_e+6,Be-_e+6,ct,ct),b.restore()}catch{b.textAlign="center",b.textBaseline="middle",b.fillStyle=O,b.font="bold 80px 'Orbitron', sans-serif",b.fillText(e==="badge"?"":"MCF",nt,Be)}let Et=Ce;b.textAlign="center",b.textBaseline="alphabetic",b.fillStyle=H,b.font=`bold ${S}px 'Orbitron', sans-serif`;for(const vt of Pe)b.fillText(vt,p/2,Et),Et+=I;if(qe.length>0){Et+=P,b.fillStyle=q,b.font=`500 ${D}px 'Montserrat', sans-serif`;for(const vt of qe)b.fillText(vt,p/2,Et),Et+=L}Et+=A,b.fillStyle=H,b.font=`bold ${De}px 'Montserrat', sans-serif`;for(const vt of M)b.fillText(vt,p/2,Et),Et+=Qe;return Et+=te,b.fillStyle=O,b.font=`600 ${xe}px 'Montserrat', sans-serif`,b.fillText("Make It Count with Core Buddy",p/2,Et),new Promise(vt=>{y.toBlob(ct=>vt(ct),"image/png")})}function d_(s,e,t,i,l,u){s.beginPath(),s.moveTo(e+u,t),s.lineTo(e+i-u,t),s.quadraticCurveTo(e+i,t,e+i,t+u),s.lineTo(e+i,t+l-u),s.quadraticCurveTo(e+i,t+l,e+i-u,t+l),s.lineTo(e+u,t+l),s.quadraticCurveTo(e,t+l,e,t+l-u),s.lineTo(e,t+u),s.quadraticCurveTo(e,t,e+u,t),s.closePath()}function XM(s){return new Promise((e,t)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>e(i),i.onerror=t,i.src=s})}function Uc(s,e,t){if(s.measureText(e).width<=t)return[e];const i=e.split(" "),l=[];let u="";for(const h of i){const p=u?`${u} ${h}`:h;s.measureText(p).width>t&&u?(l.push(u),u=h):u=p}return u&&l.push(u),l}function JM(){const s=w.useRef(null),e=w.useCallback(()=>{if(!s.current)try{s.current=new(window.AudioContext||window.webkitAudioContext)}catch{}const u=s.current;return u?.state==="suspended"&&u.resume(),u},[]),t=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate([40,60,30]);const u=e();if(!u)return;const h=u.currentTime,p=u.createBiquadFilter();p.type="lowpass",p.frequency.value=500,p.Q.value=.7,p.connect(u.destination);const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=50,y.gain.value=.3,y.gain.setTargetAtTime(0,h+.08,.04),g.connect(y).connect(p),g.start(h),g.stop(h+.2);const b=u.createOscillator(),E=u.createGain();b.type="sine",b.frequency.value=70,E.gain.value=.2,E.gain.setTargetAtTime(0,h+.22,.04),b.connect(E).connect(p),b.start(h+.15),b.stop(h+.35)},[e]),i=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate(30);const u=e();if(!u)return;const h=u.currentTime,p=u.createBiquadFilter();p.type="lowpass",p.frequency.value=500,p.Q.value=.7,p.connect(u.destination);const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=55,y.gain.value=.35,y.gain.setTargetAtTime(0,h+.08,.04),g.connect(y).connect(p),g.start(h),g.stop(h+.2)},[e]),l=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate([50,80,100]);const u=e();u&&[0,.12].forEach((h,p)=>{const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=p===0?523:784,y.gain.value=.12,y.gain.setTargetAtTime(0,u.currentTime+h+.15,.02),g.connect(y).connect(u.destination),g.start(u.currentTime+h),g.stop(u.currentTime+h+.2)})},[e]);return w.useEffect(()=>()=>{s.current?.close()},[]),{tap:i,tick:t,complete:l}}const ZM=2e3,_g=42,Tl=2*Math.PI*_g,e6=1200,f_=["Another one in the bank!","Consistency beats everything.","You showed up  that's what counts.","Stronger every session."];function wg({title:s,subtitle:e,stats:t,onDone:i,onDismissStart:l,onShareJourney:u,userName:h,buttonLabel:p="Done",holdLabel:g="Hold To Complete Session",shareType:y="workout",hideShare:b=!1}){const[E,T]=w.useState("hold"),[O,H]=w.useState(!1),[q,z]=w.useState(0),[ne,W]=w.useState(!1),[ee,ye]=w.useState(!1),[Se,_e]=w.useState(null),R=JM(),S=w.useRef(null),I=w.useRef(null),P=w.useRef(null),D=w.useRef(null),L=w.useRef(!1),A=w.useRef(!1),De=w.useRef(0),Qe=w.useRef(f_[Math.floor(Math.random()*f_.length)]),te=w.useRef([...Array(80)].map((Te,Ee)=>({x:5+Math.random()*90,delay:Math.random()*3.5,color:["#A12F3A","#ffffff","#000000"][Ee%3],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.8+Math.random()*2,width:4+Math.random()*6,height:4+Math.random()*8,shape:Ee%3}))),xe=w.useCallback(()=>{if(L.current)return;L.current=!0,A.current=!1,De.current=0,H(!0),z(0),D.current=performance.now(),R.tap(),S.current&&(S.current.style.strokeDashoffset=Tl);const Te=Ee=>{const We=Ee-D.current,nt=Math.min(We/ZM,1);if(S.current&&(S.current.style.strokeDashoffset=Tl-nt*Tl),I.current){const Be=8*(1-nt),kn=1-nt,Sn=1+nt*.15;I.current.style.filter=`blur(${Be}px) grayscale(${kn})`,I.current.style.transform=`scale(${Sn})`}z(nt),We-De.current>=e6&&(De.current=We,R.tick()),nt<1?P.current=requestAnimationFrame(Te):(L.current=!1,A.current=!0,P.current=null,H(!1),z(1),R.complete(),T("celebrate"))};P.current=requestAnimationFrame(Te)},[R]),Pe=w.useCallback(()=>{L.current&&(L.current=!1,P.current&&(cancelAnimationFrame(P.current),P.current=null),S.current&&(S.current.style.strokeDashoffset=Tl),I.current&&(I.current.style.filter="",I.current.style.transform=""),H(!1),z(0))},[]),qe=w.useCallback(()=>{W(!0),l?.(),setTimeout(()=>{i?.()},300)},[i,l]),ie=w.useCallback(()=>{const Te=[s||"Workout Complete!"];return e&&Te.push(e),t?.length&&Te.push(t.map(Ee=>`${Ee.value} ${Ee.label}`).join(" | ")),Te.push("#MindCoreFitness"),Te.join(`
`)},[s,e,t]),M=w.useCallback(async()=>{if(!(ee||!u))try{await u({type:y==="habits"?"habits_summary":"workout_summary",title:s||"Workout Complete!",subtitle:e,stats:t||[],quote:Qe.current}),ye(!0),_e("Posted to Journey!"),setTimeout(()=>_e(null),2500)}catch(Te){console.error("Journey post failed:",Te),_e(Te?.message||"Failed to post"),setTimeout(()=>_e(null),3500)}},[ee,u,s,e,t]),[K,be]=w.useState(!1),Ce=w.useCallback(async()=>{be(!0);try{const Te=await RE({type:y||"workout",title:s||"Workout Complete!",subtitle:e,stats:t||[],quote:Qe.current,userName:h}),Ee=ie();if(navigator.share&&navigator.canShare?.({files:[new File([Te],"workout.png",{type:"image/png"})]})){const We=new File([Te],"workout.png",{type:"image/png"});await navigator.share({title:"Mind Core Fitness",text:Ee,files:[We]})}else navigator.share?await navigator.share({title:"Mind Core Fitness",text:Ee}):(await navigator.clipboard.writeText(Ee),_e("Copied to clipboard!"),setTimeout(()=>_e(null),2500))}catch{try{await navigator.clipboard.writeText(ie()),_e("Copied to clipboard!"),setTimeout(()=>_e(null),2500)}catch{}}finally{be(!1)}},[s,e,t,h,ie]);return E==="hold"?a.jsxs("div",{className:"wc-hold-page",children:[a.jsx("div",{className:"wc-hold-glow","aria-hidden":"true"}),a.jsx("p",{className:"wc-hold-label",children:g}),a.jsxs("div",{className:`wc-hold-ring-touch ${O?"wc-holding":""}`,onPointerDown:Te=>{Te.preventDefault(),xe()},onPointerUp:Pe,onPointerLeave:Pe,onPointerCancel:Pe,onClick:Te=>{Te.stopPropagation(),A.current&&(A.current=!1)},role:"button",tabIndex:0,"aria-label":"Press and hold to finish workout",onKeyDown:Te=>{(Te.key==="Enter"||Te.key===" ")&&(Te.preventDefault(),R.complete(),T("celebrate"))},children:[a.jsx("div",{className:"wc-hold-ring-glow","aria-hidden":"true"}),a.jsxs("svg",{className:"wc-hold-ring-svg",viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wc-hold-ring-track",cx:"50",cy:"50",r:_g}),a.jsx("circle",{className:"wc-hold-ring-fill",ref:S,cx:"50",cy:"50",r:_g,style:{strokeDasharray:Tl,strokeDashoffset:Tl}})]}),a.jsx("img",{ref:I,src:"/Logo.webp",alt:"Mind Core Fitness",className:"wc-hold-logo",draggable:!1})]})]}):a.jsxs("div",{className:`wc-celeb-overlay ${ne?"wc-celeb-dismissing":""}`,children:[a.jsx("div",{className:"wc-celeb-confetti","aria-hidden":"true",children:te.current.map((Te,Ee)=>a.jsx("span",{className:`wc-celeb-confetti-piece wc-confetti-shape-${Te.shape}`,style:{"--x":`${Te.x}%`,"--delay":`${Te.delay}s`,"--color":Te.color,"--drift":`${Te.drift}px`,"--spin":`${Te.spin}deg`,"--duration":`${Te.duration}s`,width:`${Te.width}px`,height:`${Te.height}px`}},Ee))}),a.jsxs("div",{className:"wc-celeb-content",children:[a.jsx("div",{className:"wc-celeb-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wc-celeb-logo-img"})}),a.jsx("h2",{className:"wc-celeb-heading",children:s||"Congratulations!"}),e&&a.jsx("p",{className:"wc-celeb-subtext",children:e}),a.jsx("p",{className:"wc-celeb-quote",children:Qe.current}),t&&t.length>0&&a.jsx("div",{className:"wc-celeb-stats-row",children:t.map((Te,Ee)=>a.jsxs("div",{className:"wc-celeb-stat",children:[a.jsx("span",{className:"wc-celeb-stat-val",children:Te.value}),a.jsx("span",{className:"wc-celeb-stat-label",children:Te.label})]},Ee))}),!b&&a.jsxs("div",{className:"wc-share-row",children:[u&&a.jsxs("button",{className:`wc-share-btn wc-share-journey ${ee?"wc-share-done":""}`,onClick:M,disabled:ee,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20h9"}),a.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4Z"})]}),ee?"Posted!":"Post to Journey"]}),a.jsxs("button",{className:"wc-share-btn wc-share-external",onClick:Ce,disabled:K,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"18",cy:"5",r:"3"}),a.jsx("circle",{cx:"6",cy:"12",r:"3"}),a.jsx("circle",{cx:"18",cy:"19",r:"3"}),a.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),a.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),K?"Generating...":"Share"]})]}),a.jsx("button",{className:"wc-celeb-btn",onClick:qe,children:p}),Se&&a.jsx("div",{className:"wc-share-toast",children:Se})]})]})}const t6="/login/assets/first_workout-B8SFkzJX.PNG",n6="/login/assets/workouts_10-Z5R3u0xH.PNG",s6="/login/assets/workouts_25-CzxSlcAj.PNG",r6="/login/assets/workouts_50-BpzWup3V.PNG",i6="/login/assets/workouts_100-D7_r6tn1.PNG",a6="/login/assets/streak_2-CsRr-XA9.PNG",o6="/login/assets/streak_4-BHO09tbw.PNG",l6="/login/assets/streak_8-DX2UWMko.PNG",c6="/login/assets/first_pb-aVf_CNWy.PNG",u6="/login/assets/pbs_5-Cippawgg.PNG",h6="/login/assets/pbs_10-CZgGh9Kv.PNG",d6="/login/assets/pbs_100-C67b1wfS.PNG",f6="/login/assets/nutrition_7-CHVV11fj.PNG",m6="/login/assets/leaderboard_join-BLoId4Hz.PNG",p6="/login/assets/habits_7-Dvki70KO.PNG",sd=[{id:"first_workout",img:t6,name:"First Rep",desc:"Complete your first workout",category:"workouts",threshold:1},{id:"workouts_10",img:n6,name:"On Fire",desc:"Complete 10 workouts",category:"workouts",threshold:10},{id:"workouts_25",img:s6,name:"Dedicated",desc:"Complete 25 workouts",category:"workouts",threshold:25},{id:"workouts_50",img:r6,name:"Unstoppable",desc:"Complete 50 workouts",category:"workouts",threshold:50},{id:"workouts_100",img:i6,name:"Century",desc:"Complete 100 workouts",category:"workouts",threshold:100},{id:"streak_2",img:a6,name:"2 Week Streak",desc:"Work out for 2 weeks in a row",category:"streaks",threshold:2},{id:"streak_4",img:o6,name:"Month Strong",desc:"Work out for 4 weeks in a row",category:"streaks",threshold:4},{id:"streak_8",img:l6,name:"Iron Will",desc:"Work out for 8 weeks in a row",category:"streaks",threshold:8},{id:"first_pb",img:c6,name:"First PB",desc:"Set your first personal best",category:"pbs",threshold:1},{id:"pbs_5",img:u6,name:"PB Hunter",desc:"Set 5 personal bests",category:"pbs",threshold:5},{id:"pbs_10",img:h6,name:"PB Machine",desc:"Set 10 personal bests",category:"pbs",threshold:10},{id:"pbs_100",img:d6,name:"PB Legend",desc:"Set 100 personal bests",category:"pbs",threshold:100},{id:"nutrition_7",img:f6,name:"Macro Master",desc:"Hit your macro targets 7 days in a row",category:"nutrition",threshold:7},{id:"leaderboard_join",img:m6,name:"Competitor",desc:"Join the leaderboard",category:"leaderboard",threshold:1},{id:"habits_7",img:p6,name:"Habit Streak",desc:"Complete your daily habits 7 days in a row",category:"habits",threshold:7}],m_="/login/assets/randomiser-glq9YJkL.jpg",p_="/login/assets/programme-card-workout-CnNzTYkz.webp",g6="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",y6="/login/assets/muscle-group-arms-C9AdZL4-.png",v6="/login/assets/arms-bicep-BUrmT1o-.png",b6="/login/assets/arms-tricep-D9tAnFnS.png",_6="/login/assets/arms-full-arms-BY3TvpJm.png",w6="/login/assets/muscle-group-chest-Cxfuc7XI.png",x6="/login/assets/chest-strength-BR4BAFTH.png",E6="/login/assets/chest-hypertrophy-B8yNrvjB.png",T6="/login/assets/chest-endurance-e-OSWtWO.png",k6="/login/assets/muscle-group-shoulders-DibNtCLF.png",S6="/login/assets/shoulders-strength-CKlZBF5A.png",C6="/login/assets/shoulders-hypertrophy-BUd76jiS.png",j6="/login/assets/shoulders-endurance-HuqNG5rD.png",N6="/login/assets/muscle-group-core-CPR-bdRg.png",A6="/login/assets/core-lower-abs-TVcqGMFJ.png",R6="/login/assets/core-obliques-rotation-Djb7Qlbk.png",I6="/login/assets/core-weighted-core-4Kwh9mTv.png",D6="/login/assets/muscle-group-back-8JPV-YUo.png",M6="/login/assets/back-strength-BmSRxnwo.png",L6="/login/assets/back-hypertrophy-CXHmsnCz.png",O6="/login/assets/back-endurance-C8qJ8l5I.png",P6="/login/assets/muscle-group-legs-B8jcbdov.png",V6="/login/assets/legs-quads-DbnfsebI.png",U6="/login/assets/legs-hamstrings-glutes-BrfsvvzX.png",B6="/login/assets/legs-power-plyo-D2qBXeUR.png",z6=60,Op=5,F6=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],q6={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},H6={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},W6={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},Pp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Vp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:g6},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Bc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:y6},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z",image:w6},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z",image:D6},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",image:k6},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z",image:P6},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",image:N6}],g_={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",image:x6,level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",image:E6,level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",image:T6,level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",image:M6,level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",image:L6,level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",image:O6,level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",image:S6,level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",image:C6,level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",image:j6,level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",image:v6,level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",image:b6,level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",image:_6,level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",image:V6,level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",image:U6,level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",image:B6,level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",image:A6,level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",image:R6,level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",image:I6,level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},Up=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Xr=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],xi=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],Bp=[5,10,15,20,30],rd={core:"#e85d04",upper:"#2196f3",lower:"#4caf50",fullbody:"#9c27b0",mix:"#ff9800"},y_=["Mix up your focus areas to build balanced strength.","Consistency beats intensity  show up and press play.","Try a new difficulty level to keep your body guessing.","Short on time? A 5-minute blast still counts.","Save your favourite combos so you can replay them anytime.","Your body adapts  switch equipment for fresh stimulus.","Rest days are growth days. Listen to your body.","Challenge yourself: go one level higher this week."];function $6(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function G6(s){const e=[...s];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function K6(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Li(),{isDark:l,toggleTheme:u,accent:h}=Wo(),{isPremium:p,FREE_RANDOMISER_DURATIONS:g,FREE_RANDOMISER_WEEKLY_LIMIT:y}=Du(),b=Lr(),[E,T]=w.useState("randomiser_hub"),[O,H]=w.useState(["bodyweight"]),[q,z]=w.useState("core"),[ne,W]=w.useState("intermediate"),[ee,ye]=w.useState(p?15:5),[Se,_e]=w.useState([]),[R,S]=w.useState(!1),I=w.useRef(!1),P=w.useRef([]),[D,L]=w.useState([]),[A,De]=w.useState(2),[Qe,te]=w.useState(xi[1]),[xe,Pe]=w.useState(1),[qe,ie]=w.useState(0),[M,K]=w.useState("work"),[be,Ce]=w.useState(0),[Te,Ee]=w.useState(!1),[We,nt]=w.useState(0),[Be,kn]=w.useState(!1),[Sn,Cn]=w.useState(!1),[Ft,Et]=w.useState(null),vt=w.useRef(null);w.useRef(null),w.useRef(null);const[ct,Zn]=w.useState(null),bt=w.useCallback((V,X="info")=>{Zn({message:V,type:X}),setTimeout(()=>Zn(null),3e3)},[]),Lt=w.useCallback(async V=>{if(!t)throw new Error("Not signed in");const X=V&&typeof V=="object"&&V.type;await ci(Mt(ke,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:X?"":V,type:X?V.type:"text",imageURL:null,createdAt:xr(),likeCount:0,commentCount:0,...X?{metadata:{title:V.title||"",subtitle:V.subtitle||"",stats:V.stats||[],quote:V.quote||"",badges:V.badges||[]}}:{}})},[t]),[ae,ln]=w.useState(null),[ut,At]=w.useState(null),[tt,$t]=w.useState(0),[nn,sn]=w.useState(0),[jn,Ls]=w.useState([]),[Fn,de]=w.useState(""),[Re,Ze]=w.useState(""),[et,st]=w.useState(!1),[Oe,_t]=w.useState(0),[kt,rn]=w.useState(!1),[mn,pn]=w.useState({}),Pt=w.useRef(null),Vn=w.useRef(null),[Nn,wn]=w.useState([]),[hs,le]=w.useState(null),[Ae,Fe]=w.useState(0),[ht,rt]=w.useState(0),[qn,Hn]=w.useState(0),[Zt,gn]=w.useState(0),[Os,_s]=w.useState(0),[es,cn]=w.useState(0),[ts,Cs]=w.useState({beginner:0,intermediate:0,advanced:0}),Or=p?Bp:Bp.filter(V=>g.includes(V)),hr=!p&&Ae>=y,[dr,Pr]=w.useState([]),[ws,fr]=w.useState(!1),[Ps,Qn]=w.useState({}),[Un,js]=w.useState(!1),[yn,Vs]=w.useState(!1),[Qs,ds]=w.useState(""),[xn,ti]=w.useState(null),[Vr,mr]=w.useState([]),[Ns,As]=w.useState({total:0,favouriteFocus:null,streak:0}),[xs,C]=w.useState(null),[B,re]=w.useState(""),[ue,Me]=w.useState(!1);w.useEffect(()=>{!i&&(!s||!e)&&b("/")},[s,e,i,b]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const X=Mt(ke,"workoutLogs"),J=On(X,bn("clientId","==",t.id)),he=(await Dn(J)).docs.map(Nt=>Nt.data()),je=he.filter(Nt=>Nt.type!=="programme");gn(je.length);const Ue=je.reduce((Nt,hn)=>Nt+(hn.duration||0),0);_s(Ue);const ft={beginner:0,intermediate:0,advanced:0};je.forEach(Nt=>{Nt.level&&ft[Nt.level]!==void 0&&ft[Nt.level]++}),Cs(ft);const Rt=new Date,Vt=Rt.getDay(),ot=Vt===0?-6:1-Vt,qt=new Date(Rt);qt.setDate(Rt.getDate()+ot),qt.setHours(0,0,0,0);const tn=qt.getTime(),lt=he.filter(Nt=>{const hn=Nt.completedAt;return hn?(hn.toDate?hn.toDate().getTime():new Date(hn).getTime())>=tn:!1});Fe(lt.filter(Nt=>Nt.type!=="programme").length);let xt=0;if(t)try{const Nt=await Ms(Ye(ke,"clientProgrammes",t.id));if(Nt.exists()){const hn=Nt.data(),sr=hn.templateId;xt=lt.filter(zs=>zs.type==="programme"&&zs.programmeId===sr).length,C(sr);const Bs=Vp.find(zs=>zs.id===sr);Bs&&re(Bs.name);const zr=H6[sr];if(zr){const zs=Object.keys(hn.completedSessions||{}).length,Fs=zr.duration*zr.daysPerWeek;Hn(Fs>0?Math.round(zs/Fs*100):0)}}else C(null),re(""),Hn(0)}catch{}rt(xt);const zt=je.map(Nt=>Nt.completedAt).filter(Boolean).map(Nt=>Nt.toDate?Nt.toDate().getTime():new Date(Nt).getTime()).sort((Nt,hn)=>hn-Nt);if(zt.length===0)cn(0);else{const Nt=new Set;zt.forEach(Fs=>{const pi=new Date(Fs),oo=pi.getDay(),Oi=oo===0?-6:1-oo,Pi=new Date(pi);Pi.setDate(pi.getDate()+Oi),Pi.setHours(0,0,0,0),Nt.add(Pi.getTime())});const hn=[...Nt].sort((Fs,pi)=>pi-Fs);let sr=0;const Bs=new Date(Rt),zr=Rt.getDay()===0?-6:1-Rt.getDay();Bs.setDate(Rt.getDate()+zr),Bs.setHours(0,0,0,0);let zs=Bs.getTime();hn.includes(zs)||(zs-=10080*60*1e3);for(let Fs=0;Fs<200&&hn.includes(zs);Fs++)sr++,zs-=10080*60*1e3;cn(sr)}}catch(X){console.error("Error loading workout stats:",X)}finally{Me(!0)}})()},[s,t,E]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const X=On(Mt(ke,"savedWorkouts"),bn("clientId","==",t.id)),ge=(await Dn(X)).docs.map(he=>({id:he.id,...he.data()}));ge.sort((he,je)=>{const Ue=he.savedAt?.toMillis?.()||he.savedAt?.seconds*1e3||0;return(je.savedAt?.toMillis?.()||je.savedAt?.seconds*1e3||0)-Ue}),Pr(ge)}catch(X){console.error("Error loading saved workouts:",X)}finally{fr(!0)}})()},[s,t]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const X=On(Mt(ke,"workoutLogs"),bn("clientId","==",t.id),fu("completedAt","desc"),mu(20)),he=(await Dn(X)).docs.map(lt=>lt.data()).filter(lt=>lt.type!=="programme"&&lt.type!=="muscle_group");mr(he.slice(0,3));const je=he.length,Ue={};he.forEach(lt=>{lt.focus&&(Ue[lt.focus]=(Ue[lt.focus]||0)+1)});const ft=Object.keys(Ue).sort((lt,xt)=>Ue[xt]-Ue[lt])[0]||null;let Rt=0;if(he.length>0){const lt=new Set;he.forEach(Nt=>{const hn=Nt.completedAt?.toDate?Nt.completedAt.toDate():Nt.completedAt?new Date(Nt.completedAt):null;hn&&lt.add(new Date(hn.getFullYear(),hn.getMonth(),hn.getDate()).toDateString())});const xt=new Date;xt.setHours(0,0,0,0);let zt=new Date(xt);for(lt.has(zt.toDateString())||zt.setDate(zt.getDate()-1);lt.has(zt.toDateString());)Rt++,zt.setDate(zt.getDate()-1)}As({total:je,favouriteFocus:ft,streak:Rt});const Vt={core:null,upper:null,lower:null,fullbody:null};he.forEach(lt=>{if(lt.focus&&Vt[lt.focus]===null&&lt.completedAt){const xt=lt.completedAt.toDate?lt.completedAt.toDate():new Date(lt.completedAt);Vt[lt.focus]=xt}});let ot=null,qt=new Date;const tn=["core","upper","lower","fullbody"];for(const lt of tn){if(Vt[lt]===null){const xt=Xr.find(zt=>zt.key===lt)?.label||lt;ot={focus:lt,label:xt,daysAgo:null,message:`You haven't tried ${xt} yet`};break}if(Vt[lt]<qt){qt=Vt[lt];const xt=Math.floor((Date.now()-Vt[lt].getTime())/864e5);if(xt>=5){const zt=Xr.find(Nt=>Nt.key===lt)?.label||lt;ot={focus:lt,label:zt,daysAgo:xt,message:`${zt}  ${xt} days ago`}}}}ti(ot)}catch(X){console.error("Error loading recent workouts:",X)}})()},[s,t,E]);const Ge=async V=>{if(!(!s||!t||D.length===0)){js(!0);try{const X=Xr.find(he=>he.key===q)?.label||q,J=V||`${X} ${ee}min`,ge=await ci(Mt(ke,"savedWorkouts"),{clientId:t.id,name:J,equipment:O,focus:q,level:ne,duration:ee,exercises:D.map(he=>({name:he.name,videoUrl:he.videoUrl,isGif:he.isGif||!1})),rounds:A,savedAt:Ut.now()});Pr(he=>[{id:ge.id,clientId:t.id,name:J,equipment:O,focus:q,level:ne,duration:ee,exercises:D.map(je=>({name:je.name,videoUrl:je.videoUrl,isGif:je.isGif||!1})),rounds:A,savedAt:Ut.now()},...he]),bt("Workout saved!","success")}catch(X){console.error("Error saving workout:",X),bt("Failed to save workout","error")}finally{js(!1),Vs(!1),ds("")}}},ze=async V=>{try{await Ir(Ye(ke,"savedWorkouts",V)),Pr(X=>X.filter(J=>J.id!==V)),bt("Workout removed","info")}catch(X){console.error("Error deleting saved workout:",X),bt("Failed to remove workout","error")}},Bt=V=>{H(V.equipment||["bodyweight"]),z(V.focus||"core"),W(V.level||"intermediate"),ye(V.duration||15);const X=xi.find(J=>J.key===(V.level||"intermediate"));te(X),L(V.exercises||[]),De(V.rounds||2),T("preview")},dt=async()=>{const V=JSON.parse(localStorage.getItem("mcf_last_randomiser")||"null");V&&(H(V.equipment||["bodyweight"]),z(V.focus||"core"),W(V.level||"intermediate"),ye(V.duration||15)),setTimeout(()=>Us(),50)},Xn=()=>{localStorage.setItem("mcf_last_randomiser",JSON.stringify({equipment:O,focus:q,level:ne,duration:ee}))};localStorage.getItem("mcf_last_randomiser");const nr=()=>{const V=[];let X;q==="mix"?X=["core","upper","lower"]:q==="fullbody"?X=["upper","lower"]:X=[q];for(const J of O)for(const ge of X)V.push(`exercises/${J}/${ge}`);return V},Ur=async()=>{if(I.current){for(;I.current;)await new Promise(V=>setTimeout(V,200));return P.current}I.current=!0,S(!0);try{const V=nr(),X=[];for(const je of V)try{const Ue=Ha(Wa,je),ft=await c_(Ue);X.push(...ft.items)}catch{console.warn(`Folder ${je} not found, skipping.`)}if(X.length===0&&O.includes("bodyweight")&&q==="core")try{const je=Ha(Wa,"core"),Ue=await c_(je);X.push(...Ue.items)}catch{console.warn("Legacy core/ folder not found either.")}if(X.length===0){const je=O.map(ft=>Up.find(Rt=>Rt.key===ft)?.label).join(" + "),Ue=Xr.find(ft=>ft.key===q)?.label;return bt(`No exercises found for ${je} / ${Ue}. Upload videos to Firebase Storage.`,"error"),I.current=!1,S(!1),[]}const J=new Set,ge=X.filter(je=>{const Ue=je.name.replace(/\.(mp4|gif)$/i,"");return J.has(Ue)?!1:(J.add(Ue),!0)}),he=await Promise.all(ge.map(async je=>{const Ue=await Do(je),ft=$6(je.name.replace(/\.(mp4|gif)$/i,"")),Rt=/\.gif$/i.test(je.name);return{name:ft,videoUrl:Ue,isGif:Rt}}));return P.current=he,_e(he),I.current=!1,S(!1),he}catch(V){console.error("Error loading exercises:",V);const X=V.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${V.message||V.code||"Unknown error"}`;return bt(X,"error"),I.current=!1,S(!1),[]}},Us=async()=>{if(hr)return;Xn(),T("spinning"),P.current=[];const V=await Ur();if(V.length===0){T("setup");return}const X=xi.find(Vt=>Vt.key===ne);te(X);const J=X.work+X.rest,ge=ee*60,he=Math.floor(ge/J);let je,Ue;he<=6?(je=Math.max(3,Math.floor(he/2)),Ue=Math.floor(he/je)):he<=12?(je=Math.min(6,Math.floor(he/2)),Ue=Math.floor(he/je)):(je=Math.min(10,Math.floor(he/2)),Ue=Math.floor(he/je)),Ue=Math.max(2,Ue);const ft=G6(V),Rt=ft.slice(0,Math.min(je,ft.length));L(Rt),De(Ue),setTimeout(()=>T("preview"),2e3)},mi=()=>{T("countdown"),nt(3)};w.useEffect(()=>{if(E!=="countdown")return;if(We<=0){T("workout"),Pe(1),ie(0),K("work"),Ce(Qe.work),Ee(!1),Wn();return}un();const V=setTimeout(()=>nt(X=>X-1),1e3);return()=>clearTimeout(V)},[We,E]),w.useEffect(()=>{if(E!=="workout"||Te)return;if(be<=0){Br();return}be<=3&&un();const V=setTimeout(()=>Ce(X=>X-1),1e3);return()=>clearTimeout(V)},[be,E,Te]);const Br=()=>{if(M==="work")K("rest"),Ce(Qe.rest);else{const V=qe+1;if(V>=D.length){const X=xe+1;if(X>A){kn(!0),j();return}Pe(X),ie(0)}else ie(V);K("work"),Ce(Qe.work),Wn()}},j=async()=>{if(s)try{await ci(Mt(ke,"workoutLogs"),{clientId:t.id,level:ne,duration:ee,equipment:O,focus:q,exerciseCount:D.length,rounds:A,exercises:D.map(V=>V.name),completedAt:Ut.now()}),Fe(V=>V+1),gn(V=>V+1),_s(V=>V+ee),Cs(V=>({...V,[ne]:(V[ne]||0)+1}))}catch(V){console.error("Error saving workout log:",V)}},G=async(V,X,J)=>{if(!(!t||!X))try{const ge=t.id,he=await Ms(Ye(ke,"coreBuddyPBs",ge)),Ue=(he.exists()?he.data():null)?.exercises||{},ft=Ue[V];let Rt=!1;if(ft?(X>(ft.weight||0)||X===(ft.weight||0)&&J>(ft.reps||0))&&(Rt=!0):Rt=!0,Rt){const Vt={...Ue,[V]:{weight:X,reps:J,achievedAt:Ut.now()}};await ks(Ye(ke,"coreBuddyPBs",ge),{clientId:t.id,exercises:Vt,updatedAt:Ut.now()}),bt(`New PB! ${X}kg  ${J} reps`,"success"),un(),await Ne(V,X)}}catch(ge){console.error("Error checking PB:",ge)}},Ne=async(V,X)=>{if(t)try{const J=await Ms(Ye(ke,"coreBuddyTargets",t.id));if(!J.exists())return;const he=(J.data().targets||{})[V];if(!he||X<he.targetWeight)return;const je=await Ms(Ye(ke,"coreBuddyAchievements",t.id)),Ue=je.exists()?je.data():{clientId:t.id,badges:[],totalVolume:0};if(Ue.badges.some(ot=>ot.type==="pb_target"&&ot.exercise===V&&ot.targetWeight===he.targetWeight))return;const Rt={type:"pb_target",exercise:V,group:q6[V]||"push",targetWeight:he.targetWeight,achievedAt:Ut.now()},Vt=[...Ue.badges,Rt];await ks(Ye(ke,"coreBuddyAchievements",t.id),{...Ue,badges:Vt,updatedAt:Ut.now()}),wn(ot=>[...ot,Rt])}catch(J){console.error("Error checking target badge:",J)}},Ie=async V=>{if(!(!t||V<=0))try{const X=await Ms(Ye(ke,"coreBuddyAchievements",t.id)),J=X.exists()?X.data():{clientId:t.id,badges:[],totalVolume:0},ge=J.totalVolume||0,he=ge+V,je=[];F6.forEach(ft=>{he>=ft.threshold&&ge<ft.threshold&&(J.badges.some(Vt=>Vt.type==="volume_milestone"&&Vt.milestone===ft.threshold)||je.push({type:"volume_milestone",milestone:ft.threshold,label:ft.label,achievedAt:Ut.now()}))});const Ue=[...J.badges,...je];await ks(Ye(ke,"coreBuddyAchievements",t.id),{clientId:t.id,badges:Ue,totalVolume:Math.round(he),updatedAt:Ut.now()}),je.length>0&&wn(ft=>[...ft,...je])}catch(X){console.error("Error updating volume:",X)}},He=async V=>{if(At(V),V.interval){const ge=[];for(const he of V.exercises){let je=null,Ue=!1;if(he.storagePath)try{const ft=Ha(Wa,he.storagePath);je=await Do(ft),Ue=/\.gif$/i.test(he.storagePath)}catch{}ge.push({name:he.name,videoUrl:je,isGif:Ue})}L(ge),De(V.rounds),te({work:V.work,rest:V.rest}),T("preview");return}const X={};for(const ge of V.exercises)if(ge.storagePath)try{const he=Ha(Wa,ge.storagePath);X[ge.name]={url:await Do(he),isGif:/\.gif$/i.test(ge.storagePath)}}catch{}pn(X);const J=V.exercises.map(ge=>({name:ge.name,type:ge.type,targetSets:ge.sets,targetReps:ge.reps||0,targetTime:ge.time||0,sets:[]}));Ls(J),$t(0),sn(0),de(""),Ze(""),rn(!1),st(!1),_t(0),wn([]),le(null),T("muscle_workout")},pt=()=>{const V=Pt.current;V&&(V.paused?(V.play(),rn(!0)):(V.pause(),rn(!1)))};w.useEffect(()=>{if(E!=="muscle_workout"||!et||Oe<=0){E==="muscle_workout"&&et&&Oe<=0&&(st(!1),un());return}return Vn.current=setTimeout(()=>_t(V=>V-1),1e3),()=>clearTimeout(Vn.current)},[E,et,Oe]);const Xe=async()=>{const V=jn[tt];let X={};if(V.type==="weighted"){const he=parseFloat(Fn)||0,je=parseInt(Re)||0;if(je===0){bt("Enter your reps","error");return}X={weight:he,reps:je}}else if(V.type==="reps"){const he=parseInt(Re)||0;if(he===0){bt("Enter your reps","error");return}X={reps:he}}else if(V.type==="timed"){const he=V.targetTime-Oe;X={time:Math.max(he,1)}}const J=[...jn];J[tt]={...V,sets:[...V.sets,X]},Ls(J),V.type==="weighted"&&X.weight>0&&await G(V.name,X.weight,X.reps);const ge=V.sets.length+1;if(ge<V.targetSets)sn(ge),Ze(""),st(!1),_t(0);else if(tt+1<jn.length){const he=tt+1;$t(he),sn(0),de(""),Ze(""),rn(!1),st(!1),_t(0)}else await Tt(J),Cn(!0)},Tt=async V=>{if(!(!s||!t))try{const X=V.reduce((ge,he)=>ge+he.sets.reduce((je,Ue)=>je+(Ue.weight||0)*(Ue.reps||0),0),0),J=V.reduce((ge,he)=>ge+he.sets.length,0);await ci(Mt(ke,"workoutLogs"),{clientId:t.id,type:"muscle_group",muscleGroup:ae,sessionId:ut?.id,sessionName:ut?.name,exerciseCount:V.length,totalSets:J,duration:Math.round(J*1.5),volume:Math.round(X),exercises:V.map(ge=>({name:ge.name,type:ge.type,sets:ge.sets})),completedAt:Ut.now()}),X>0&&await Ie(X),Nn.length>0&&le({badges:[...Nn]})}catch(X){console.error("Error saving muscle group workout log:",X)}},wt=w.useRef(null),vn=()=>(wt.current||(wt.current=new(window.AudioContext||window.webkitAudioContext)),wt.current),un=()=>{try{const V=vn(),X=V.createOscillator(),J=V.createGain();X.connect(J),J.connect(V.destination),X.frequency.value=880,J.gain.value=.3,X.start(V.currentTime),X.stop(V.currentTime+.15)}catch{}},Wn=()=>{try{const V=vn(),X=V.createOscillator(),J=V.createGain();X.connect(J),J.connect(V.destination),X.frequency.value=1200,J.gain.value=.4,X.start(V.currentTime),X.stop(V.currentTime+.3)}catch{}};w.useEffect(()=>{if(E!=="workout"||M!=="work"||!D[qe]?.isGif)return;const X=setInterval(()=>{const J=vt.current;if(!J)return;const ge=J.getAttribute("src");J.removeAttribute("src"),setTimeout(()=>{vt.current&&vt.current.setAttribute("src",ge)},0)},4e3);return()=>clearInterval(X)},[E,M,qe,xe,D]);const Es=(V,X,J)=>{const ge=Math.round(V/X*z6);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:qM.map((he,je)=>a.jsx("line",{x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,className:je<ge?`wk-tick-filled ${J}`:"wk-tick-empty",strokeWidth:he.thick?"3":"2"},je))})},Er=()=>{const V=D.length*A;return((xe-1)*D.length+qe+(M==="rest"?.5:0))/V},Rs=ct&&a.jsx("div",{className:`toast-notification ${ct.type}`,children:ct.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(E==="menu")return a.jsx($o,{children:a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>T("randomiser_hub"),children:a.jsx("img",{src:m_,alt:"Randomise Workout",className:"wk-hero-bg"})}),!p&&a.jsxs("button",{className:"wk-hero-card wk-free-card-premium",onClick:()=>b("/upgrade"),children:[a.jsx("img",{src:p_,alt:"Programmes",className:"wk-hero-bg"}),a.jsx("div",{className:"wk-free-card-overlay"}),a.jsxs("div",{className:"wk-free-card-content",children:[a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{className:"wk-free-card-label",children:"Unlock Full Access"})]})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[Vp.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:Vp.map((V,X)=>V.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>b("/client/core-buddy/programmes",{state:{templateId:V.id}}),style:{animationDelay:`${X*.06}s`},children:[a.jsx("img",{src:V.image,alt:V.name,className:"wk-prog-img"}),X===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},V.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>b("/client/core-buddy/programmes",{state:{templateId:V.id}}),style:{animationDelay:`${X*.06}s`},children:[a.jsx("img",{src:p_,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:W6[V.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[V.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:V.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:V.name.toUpperCase()}),a.jsxs("p",{children:[V.daysPerWeek,"x per week  ",V.focus==="fullbody"?"Full Body":V.focus.charAt(0).toUpperCase()+V.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),X===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},V.id))})})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[Bc.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:Bc.map((V,X)=>a.jsx("button",{className:`wk-muscle-hero-card${V.image?" wk-muscle-thumb":""}`,onClick:()=>{ln(V.key),T("muscle_sessions")},style:{animationDelay:`${X*.05}s`},children:V.image?a.jsx("img",{src:V.image,alt:V.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:m_,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:Pp[V.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:V.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:V.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[g_[V.key]?.length||0," sessions"]})]})]})]})},V.key))})]})]}),a.jsx(ua,{active:"workouts"}),Rs]})});if(E==="randomiser_hub"){const V=JSON.parse(localStorage.getItem("mcf_last_randomiser")||"null"),X=V?Xr.find(ge=>ge.key===V.focus)?.label||V.focus:null,J=V?xi.find(ge=>ge.key===V.level)?.label||V.level:null;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-hub-heading wk-hub-heading-hero",children:[a.jsxs("div",{className:"wk-hub-logo-wrap",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-hub-logo-img"}),a.jsx("div",{className:"wk-hub-dice-float",children:a.jsxs("svg",{className:"wk-hub-dice-icon",width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.2",fill:"currentColor",stroke:"none"}),a.jsx("circle",{cx:"15.5",cy:"8.5",r:"1.2",fill:"currentColor",stroke:"none"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.2",fill:"currentColor",stroke:"none"}),a.jsx("circle",{cx:"8.5",cy:"15.5",r:"1.2",fill:"currentColor",stroke:"none"}),a.jsx("circle",{cx:"15.5",cy:"15.5",r:"1.2",fill:"currentColor",stroke:"none"})]})})]}),a.jsx("h2",{children:"Randomiser"}),a.jsx("p",{children:"Generate, save & replay workouts"})]}),Ns.total>0&&a.jsxs("div",{className:"wk-hub-stats",children:[a.jsxs("div",{className:"wk-hub-stat",children:[a.jsx("span",{className:"wk-hub-stat-value",children:Ns.total}),a.jsx("span",{className:"wk-hub-stat-label",children:"Workouts"})]}),Ns.streak>0&&a.jsxs("div",{className:"wk-hub-stat",children:[a.jsxs("span",{className:"wk-hub-stat-value",children:[Ns.streak,a.jsx("small",{children:"d"})]}),a.jsx("span",{className:"wk-hub-stat-label",children:"Streak"})]}),Ns.favouriteFocus&&a.jsxs("div",{className:"wk-hub-stat",children:[a.jsx("span",{className:"wk-hub-stat-value wk-hub-stat-focus",style:{color:rd[Ns.favouriteFocus]||"var(--color-primary)"},children:Xr.find(ge=>ge.key===Ns.favouriteFocus)?.label||Ns.favouriteFocus}),a.jsx("span",{className:"wk-hub-stat-label",children:"Top Focus"})]})]}),a.jsxs("div",{className:"wk-hub-tip",children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),y_[Math.floor(Date.now()/864e5)%y_.length]]}),a.jsxs("div",{className:"wk-hub-actions",children:[a.jsxs("button",{className:"wk-hub-action-btn wk-hub-new wk-hub-new-glow",onClick:()=>T("setup"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New Workout"]}),V&&a.jsxs("button",{className:"wk-hub-action-btn wk-hub-quick",onClick:dt,disabled:hr,children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),"Quick Start",a.jsxs("span",{className:"wk-hub-quick-meta",children:[X,"  ",J,"  ",V.duration,"min"]})]})]}),xn&&a.jsxs("div",{className:"wk-hub-section",children:[a.jsxs("h3",{className:"wk-hub-section-title",children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Suggested For You"]}),a.jsxs("button",{className:"wk-hub-suggestion",onClick:()=>{z(xn.focus),T("setup")},children:[a.jsxs("div",{className:"wk-hub-suggestion-info",children:[a.jsx("span",{className:"wk-hub-suggestion-label",children:xn.message}),a.jsx("span",{className:"wk-hub-suggestion-cta",children:"Tap to set up "})]}),a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),a.jsxs("div",{className:"wk-hub-section",children:[a.jsxs("h3",{className:"wk-hub-section-title",children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Saved Workouts",dr.length>0&&a.jsx("span",{className:"wk-hub-count",children:dr.length})]}),ws?dr.length===0?a.jsxs("div",{className:"wk-hub-empty wk-hub-empty-enhanced",children:[a.jsx("svg",{className:"wk-hub-empty-icon",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),a.jsx("p",{children:a.jsx("strong",{children:"No saved workouts yet"})}),a.jsx("p",{className:"wk-hub-empty-sub",children:"Generate a workout and hit save to stash it here for quick replay."})]}):a.jsx("div",{className:"wk-hub-saved-categories",children:Xr.map(ge=>{const he=dr.filter(Ue=>Ue.focus===ge.key);if(he.length===0)return null;const je=Ps[ge.key]||!1;return a.jsxs("div",{className:"wk-hub-saved-cat",children:[a.jsxs("button",{className:`wk-hub-saved-cat-header${je?" wk-hub-saved-cat-open":""}`,style:{"--cat-color":rd[ge.key]||"var(--color-primary)"},onClick:()=>Qn(Ue=>({...Ue,[ge.key]:!Ue[ge.key]})),children:[a.jsxs("span",{className:"wk-hub-saved-cat-label",children:[a.jsx("span",{className:"wk-hub-focus-pill",style:{"--pill-color":rd[ge.key]||"var(--color-primary)"},children:ge.label}),a.jsx("span",{className:"wk-hub-saved-cat-count",children:he.length})]}),a.jsx("svg",{className:`wk-hub-saved-cat-chevron${je?" wk-hub-saved-cat-chevron-open":""}`,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),je&&a.jsx("div",{className:"wk-hub-saved-list",children:he.map((Ue,ft)=>{const Rt=(Ue.equipment||[]).map(ot=>Up.find(qt=>qt.key===ot)?.label||ot).join(", "),Vt=xi.find(ot=>ot.key===Ue.level)?.label||Ue.level;return a.jsxs("div",{className:"wk-hub-saved-card",style:{animationDelay:`${ft*.05}s`},children:[a.jsxs("button",{className:"wk-hub-saved-main",onClick:()=>Bt(Ue),children:[a.jsxs("div",{className:"wk-hub-saved-info",children:[a.jsx("span",{className:"wk-hub-saved-name",children:Ue.name}),a.jsx("span",{className:"wk-hub-saved-tags",children:a.jsxs("span",{className:"wk-hub-saved-meta",children:[Vt,"  ",Ue.duration,"min  ",(Ue.exercises||[]).length," ex"]})}),Rt&&a.jsx("span",{className:"wk-hub-saved-equip",children:Rt})]}),a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]}),a.jsx("button",{className:"wk-hub-saved-delete",onClick:()=>ze(Ue.id),"aria-label":"Remove saved workout",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"3 6 5 6 21 6"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]},Ue.id)})})]},ge.key)})}):a.jsx("div",{className:"wk-hub-empty",children:a.jsx("div",{className:"wk-loading-spinner"})})]}),Vr.length>0&&a.jsxs("div",{className:"wk-hub-section",children:[a.jsxs("h3",{className:"wk-hub-section-title",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Recent"]}),a.jsx("div",{className:"wk-hub-recent-list",children:Vr.map((ge,he)=>{const je=Xr.find(Vt=>Vt.key===ge.focus)?.label||ge.focus||"",Ue=xi.find(Vt=>Vt.key===ge.level)?.label||ge.level||"",ft=ge.completedAt?.toDate?ge.completedAt.toDate():ge.completedAt?new Date(ge.completedAt):null,Rt=ft?(()=>{const Vt=Math.floor((Date.now()-ft.getTime())/1e3);return Vt<3600?`${Math.floor(Vt/60)}m ago`:Vt<86400?`${Math.floor(Vt/3600)}h ago`:`${Math.floor(Vt/86400)}d ago`})():"";return a.jsxs("div",{className:"wk-hub-recent-card",style:{animationDelay:`${he*.05}s`},children:[a.jsx("div",{className:"wk-hub-recent-info",children:a.jsxs("span",{className:"wk-hub-recent-tags",children:[a.jsx("span",{className:"wk-hub-focus-pill",style:{"--pill-color":rd[ge.focus]||"var(--color-primary)"},children:je}),a.jsxs("span",{className:"wk-hub-recent-meta",children:[Ue,"  ",ge.duration||"?","min  ",ge.exerciseCount||"?"," ex"]})]})}),a.jsx("span",{className:"wk-hub-recent-time",children:Rt})]},he)})})]})]}),a.jsx(ua,{active:"workouts"}),Rs]})}if(E==="setup"){const V=Xr.find(J=>J.key===q)?.label||q,X=xi.find(J=>J.key===ne)?.label||ne;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("randomiser_hub"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsx("div",{className:"wk-stats-row",children:[{label:"Total",value:`${Zt}`,pct:Zt>0?Math.min(Math.round(Zt/100*100),100):0,color:"#14b8a6",size:"normal"},{label:"This Week",value:`${Ae}/${Op}`,pct:Math.round(Math.min(Ae,Op)/Op*100),color:"var(--color-primary)",size:"large"},{label:"Wk Streak",value:`${es}`,pct:es>0?Math.min(Math.round(es/12*100),100):0,color:"#38B6FF",size:"normal"}].map(J=>{const he=2*Math.PI*38,je=he-J.pct/100*he;return a.jsxs("div",{className:`wk-stat-item${J.size==="large"?" wk-stat-large":""}`,children:[a.jsxs("div",{className:"wk-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wk-stat-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"wk-stat-fill",cx:"50",cy:"50",r:38,style:{stroke:J.color},strokeDasharray:he,strokeDashoffset:je})]}),a.jsx("span",{className:"wk-stat-value",style:{color:J.color},children:J.value})]}),a.jsx("span",{className:"wk-stat-label",children:J.label})]},J.label)})}),a.jsxs("div",{className:"wk-setup-flow",children:[a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:Xr.map(J=>a.jsxs("button",{className:`wk-equip-btn${q===J.key?" active":""}${J.key==="mix"?" wk-mix-btn":""}`,onClick:()=>z(J.key),children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:J.icon})}),a.jsx("span",{children:J.label})]},J.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:xi.map(J=>a.jsxs("button",{className:`wk-level-card wk-level-${J.key}${ne===J.key?" active":""}`,onClick:()=>W(J.key),children:[a.jsx("span",{className:"wk-level-name",children:J.label}),a.jsx("span",{className:"wk-level-desc",children:J.desc})]},J.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:Bp.map(J=>{const ge=!Or.includes(J);return a.jsxs("button",{className:`wk-time-btn${ee===J?" active":""}${ge?" locked":""}`,onClick:()=>!ge&&ye(J),disabled:ge,children:[a.jsx("span",{className:"wk-time-num",children:J}),a.jsx("span",{className:"wk-time-unit",children:ge?a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}):"min"})]},J)})})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:Up.map(J=>{const ge=O.includes(J.key);return a.jsxs("button",{className:`wk-equip-btn${ge?" active":""}`,onClick:()=>{H(he=>ge&&he.length===1?he:ge?he.filter(je=>je!==J.key):[...he,J.key])},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:J.icon})}),a.jsx("span",{children:J.label})]},J.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[V,"  ",X,"  ",ee," min"]})})]})]}),a.jsxs("div",{className:"wk-go-sticky",children:[hr&&a.jsx("p",{className:"wk-free-limit-msg",children:"You've used your free workout this week. Upgrade for unlimited access."}),a.jsx("button",{className:"wk-randomise-btn",onClick:Us,disabled:R||hr,children:R?"Loading exercises...":hr?"Limit Reached":"Randomise Workout"})]}),Rs]})}if(E==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:FM.map((V,X)=>a.jsx("line",{x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,className:"wk-spin-tick",strokeWidth:V.thick?"3.5":"2",style:{animationDelay:`${X*.03}s`}},X))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),Rs]});if(E==="preview"){const V=ut?.interval?{work:ut.work,rest:ut.rest}:xi.find(J=>J.key===ne),X=D.length*A*(V.work+V.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T(ut?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[ut?.interval&&a.jsx("h2",{className:"mg-preview-title",children:ut.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:D.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:A}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(X/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[V.work,"/",V.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:D.map((J,ge)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${ge*.06}s`},onClick:()=>Et(J),children:[a.jsx("span",{className:"wk-preview-num",children:ge+1}),a.jsx("div",{className:"wk-preview-thumb",children:J.isGif?a.jsx("img",{src:J.videoUrl,alt:J.name,loading:"lazy"}):a.jsx("video",{src:`${J.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:J.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},ge))}),Ft&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>Et(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:J=>J.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>Et(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Ft.isGif?a.jsx("img",{src:Ft.videoUrl,alt:Ft.name}):a.jsx("video",{src:Ft.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Ft.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!ut?.interval&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"wk-btn-secondary",onClick:()=>Us(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),a.jsxs("button",{className:"wk-btn-save",onClick:()=>Vs(!0),disabled:Un,children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save"]})]}),a.jsx("button",{className:"wk-btn-primary",onClick:mi,children:"Start Workout"})]}),yn&&a.jsx("div",{className:"wk-save-modal-backdrop",onClick:()=>Vs(!1),children:a.jsxs("div",{className:"wk-save-modal",onClick:J=>J.stopPropagation(),children:[a.jsx("h3",{children:"Save Workout"}),a.jsx("p",{children:"Give this workout a name (or leave blank for auto-name)"}),a.jsx("input",{type:"text",className:"wk-save-input",value:Qs,onChange:J=>ds(J.target.value),placeholder:`${Xr.find(J=>J.key===q)?.label||q} ${ee}min`,maxLength:40,autoFocus:!0}),a.jsxs("div",{className:"wk-save-modal-actions",children:[a.jsx("button",{className:"wk-btn-secondary",onClick:()=>Vs(!1),children:"Cancel"}),a.jsx("button",{className:"wk-btn-primary",onClick:()=>Ge(Qs),disabled:Un,children:Un?"Saving...":"Save"})]})]})})]})]})}if(E==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:We}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(E==="workout"){const V=D[qe],X=M==="work"?Qe.work:Qe.rest,J=M==="rest"?qe+1<D.length?D[qe+1]:xe<A?D[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"wk-video-container",children:M==="work"?V.isGif?a.jsx("img",{ref:vt,className:"wk-video",src:V.videoUrl,alt:V.name},V.videoUrl):a.jsx("video",{className:"wk-video",src:V.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},V.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),J&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",J.name]})]})}),a.jsx("div",{className:"wk-back-row",children:a.jsxs("button",{className:"wk-back-btn",onClick:()=>{confirm("Leave workout?")&&T("randomiser_hub")},children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[qe+1," / ",D.length]}),a.jsx("h2",{className:"wk-exercise-name",children:V.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",xe," of ",A]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[Es(be,X,M==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:be}),a.jsx("span",{className:`wk-timer-phase ${M}`,children:M==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&T("randomiser_hub")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>Ee(!Te),children:Te?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{Ce(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${Er()*100}%`}})}),Be&&(()=>{const ge=xi.find(je=>je.key===ne),he=D.length*A*(ge.work+ge.rest);return a.jsxs(a.Fragment,{children:[a.jsx(wg,{title:"Workout Complete!",stats:[{value:Math.ceil(he/60),label:"Minutes"},{value:D.length*A,label:"Intervals"},{value:A,label:"Rounds"}],hideShare:!p,onShareJourney:t?Lt:null,userName:t?.name,onDismissStart:()=>T("randomiser_hub"),onDone:()=>{kn(!1),At(null),ln(null)}}),!ut?.interval&&a.jsxs("button",{className:"wk-complete-save-btn",onClick:()=>Vs(!0),disabled:Un,children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save This Workout"]}),yn&&a.jsx("div",{className:"wk-save-modal-backdrop",onClick:()=>Vs(!1),style:{zIndex:10001},children:a.jsxs("div",{className:"wk-save-modal",onClick:je=>je.stopPropagation(),children:[a.jsx("h3",{children:"Save Workout"}),a.jsx("p",{children:"Give this workout a name (or leave blank for auto-name)"}),a.jsx("input",{type:"text",className:"wk-save-input",value:Qs,onChange:je=>ds(je.target.value),placeholder:`${Xr.find(je=>je.key===q)?.label||q} ${ee}min`,maxLength:40,autoFocus:!0}),a.jsxs("div",{className:"wk-save-modal-actions",children:[a.jsx("button",{className:"wk-btn-secondary",onClick:()=>Vs(!1),children:"Cancel"}),a.jsx("button",{className:"wk-btn-primary",onClick:()=>Ge(Qs),disabled:Un,children:Un?"Saving...":"Save"})]})]})})]})})()]})}if(E==="muscle_sessions"){const V=Bc.find(J=>J.key===ae),X=g_[ae]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("randomiser_hub"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:Pp[ae]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:V?.icon})})}),a.jsxs("h2",{children:[V?.label," Workouts"]}),a.jsxs("p",{children:[X.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:X.map((J,ge)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{At(J),T("muscle_overview")},style:{animationDelay:`${ge*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:J.name}),a.jsx("p",{children:J.desc}),a.jsx("div",{className:"mg-session-meta",children:J.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[J.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[J.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[J.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const he=J.exercises.map(ft=>ft.sets||0),je=Math.min(...he),Ue=Math.max(...he);return je===Ue?`${je} sets each`:`${je}-${Ue} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},J.id))})]}),Rs]})}if(E==="muscle_overview"){const V=ut;if(!V)return null;const X=Bc.find(J=>J.key===ae);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:V.image?void 0:{background:Pp[ae]},children:V.image?a.jsx("img",{src:V.image,alt:V.name,className:"mg-overview-hero-img"}):a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:X?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:V.name}),V.level&&a.jsx("span",{className:"mg-overview-level",children:V.level})]}),a.jsx("p",{className:"mg-overview-desc",children:V.desc})]}),V.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:V.overview})]}),V.tips&&V.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:V.tips.map((J,ge)=>a.jsx("li",{children:J},ge))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",V.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:V.exercises.map((J,ge)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:ge+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:J.name}),V.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[V.work,"s work / ",V.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[J.sets," sets  ",J.reps?`${J.reps} reps`:`${J.time}s`,J.type==="weighted"&&"  weighted"]})]})]},ge))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>He(V),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),Rs]})}if(E==="muscle_workout"){const V=ut;if(!V)return null;const X=V.exercises[tt],J=jn[tt];if(!X||!J)return null;const ge=J.sets.length,he=V.exercises.length,je=V.exercises.reduce((ot,qt)=>ot+(qt.sets||0),0),ft=jn.reduce((ot,qt)=>ot+qt.sets.length,0)/je*100,Rt=mn[X.name];X.type==="timed"&&Oe===0&&!et&&ge===nn&&setTimeout(()=>_t(X.time),0);const Vt=ge+1<X.sets?"Log Set":tt+1<he?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${ft}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&T("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",tt+1,"/",he]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[Rt?a.jsxs("div",{className:"mg-video-container",onClick:pt,children:[Rt.isGif?a.jsx("img",{className:"mg-video",src:Rt.url,alt:X.name}):a.jsx("video",{ref:Pt,className:"mg-video",src:Rt.url,loop:!0,muted:!0,playsInline:!0},X.name),!kt&&!Rt.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:X.name}),a.jsx("span",{className:`mg-ex-type-badge ${X.type}`,children:X.type==="weighted"?"Weight + Reps":X.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",ge+1," of ",X.sets]}),X.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",X.reps," reps"]}),X.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",X.time,"s"]})]}),X.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:Fn,onChange:ot=>de(ot.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Re,onChange:ot=>Ze(ot.target.value),placeholder:"0"})]})]}),X.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Re,onChange:ot=>Ze(ot.target.value),placeholder:"0"})]})}),X.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[Oe,"s"]})}),et?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>st(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{Oe===0&&_t(X.time),st(!0)},children:Oe<X.time&&Oe>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:Xe,children:Vt}),J.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:J.sets.map((ot,qt)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",qt+1,": ",ot.weight!=null?`${ot.weight}kg  ${ot.reps}`:ot.reps!=null?`${ot.reps} reps`:`${ot.time}s`]})]},qt))})]})]}),Rs,Sn&&(()=>{const ot=jn.reduce((xt,zt)=>xt+zt.sets.length,0),qt=jn.reduce((xt,zt)=>xt+zt.sets.reduce((Nt,hn)=>Nt+(hn.weight||0)*(hn.reps||0),0),0),tn=Bc.find(xt=>xt.key===ae)?.label||"",lt=[{value:jn.length,label:"Exercises"},{value:ot,label:"Sets"}];return qt>0&&lt.push({value:Math.round(qt).toLocaleString(),label:"Volume (kg)"}),a.jsx(wg,{title:`${tn} Complete!`,subtitle:ut?.name,stats:lt,hideShare:!p,onShareJourney:t?Lt:null,userName:t?.name,onDismissStart:()=>T("randomiser_hub"),onDone:()=>{Cn(!1),At(null),ln(null),le(null)}})})(),hs&&a.jsx("div",{className:"mg-badge-celebration",onClick:()=>le(null),children:a.jsxs("div",{className:"mg-badge-celebration-card",children:[a.jsx("div",{className:"mg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:a.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),a.jsx("h3",{className:"mg-badge-celebration-title",children:hs.badges.length===1?"Badge Earned!":`${hs.badges.length} Badges Earned!`}),a.jsx("div",{className:"mg-badge-celebration-list",children:hs.badges.map((ot,qt)=>a.jsx("div",{className:"mg-badge-celebration-item",children:ot.type==="pb_target"?`${ot.exercise}  ${ot.targetWeight}kg`:ot.label},qt))}),a.jsxs("div",{className:"mg-badge-share-row",children:[a.jsxs("button",{className:"mg-badge-share-btn",onClick:async ot=>{ot.stopPropagation();const qt=hs.badges[0],tn=hs.badges.map(xt=>xt.type==="pb_target"?`PB Target Hit: ${xt.exercise}  ${xt.targetWeight}kg`:xt.label),lt=sd.find(xt=>xt.id===qt?.id)||sd.find(xt=>xt.name===qt?.label);await Lt({type:"badge_earned",title:tn.length===1?tn[0]:`${tn.length} Badges Earned!`,badges:tn,badgeDesc:lt?.desc}),bt("Posted to Journey!","success")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20h9"}),a.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4Z"})]}),"Journey"]}),a.jsxs("button",{className:"mg-badge-share-btn",onClick:async ot=>{ot.stopPropagation();const qt=hs.badges[0],tn=hs.badges.map(zt=>zt.type==="pb_target"?`PB Target Hit: ${zt.exercise}  ${zt.targetWeight}kg`:zt.label),lt=sd.find(zt=>zt.id===qt?.id)||sd.find(zt=>zt.name===qt?.label),xt=`Badge Earned! ${tn.join(", ")}
#MindCoreFitness`;try{const zt=await RE({type:"badge",title:tn.length===1?tn[0]:"Badges Earned!",badges:tn,badgeImage:lt?.img,badgeDesc:lt?.desc});navigator.share&&navigator.canShare?.({files:[new File([zt],"badge.png",{type:"image/png"})]})?await navigator.share({title:"Mind Core Fitness",text:xt,files:[new File([zt],"badge.png",{type:"image/png"})]}):navigator.share?await navigator.share({title:"Mind Core Fitness",text:xt}):(await navigator.clipboard.writeText(xt),bt("Copied!","success"))}catch{try{await navigator.clipboard.writeText(xt),bt("Copied!","success")}catch{}}},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"18",cy:"5",r:"3"}),a.jsx("circle",{cx:"6",cy:"12",r:"3"}),a.jsx("circle",{cx:"18",cy:"19",r:"3"}),a.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),a.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),"Share"]})]}),a.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const Y6=[{key:"trained",label:"Trained",icon:"M4 10v4M8 7v10M8 12h8M16 7v10M20 10v4",color:"#A12F3A",darkColor:"#E8475A"},{key:"protein",label:"Hit Protein",icon:"M12 22c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10zM12 18c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z",color:"#4caf50",darkColor:"#5CDB61"},{key:"steps",label:"10k Steps",icon:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20M4 12.5A2.5 2.5 0 0 1 6.5 10H20M4 5.5A2.5 2.5 0 0 1 6.5 3H20",color:"#ff9800",darkColor:"#FFB020"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",color:"#7c3aed",darkColor:"#9B5AF2"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z",color:"#2196f3",darkColor:"#42A5F5"}],Q6="M12 2l2.4 7.2L22 12l-7.6 2.8L12 22l-2.4-7.2L2 12l7.6-2.8z",X6="#e91e63",J6="#FF4D88",Z6=700,xg=42,kl=2*Math.PI*xg,id=["Every day counts. See you tomorrow!","Consistency is your superpower.","Perfect day  keep the streak alive!","You showed up for yourself today."];function e3(s){const e=new Date(s),t=e.getDay(),i=t===0?-6:1-t;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function So(s){return s.toISOString().split("T")[0]}function t3(s){return Array.from({length:7},(e,t)=>{const i=new Date(s);return i.setDate(s.getDate()+t),i})}function n3(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Li(),{isDark:l,toggleTheme:u,accent:h}=Wo(),{isPremium:p,FREE_HABIT_LIMIT:g}=Du(),y=Lr(),[b,E]=w.useState({}),[T,O]=w.useState([]),[H,q]=w.useState(!0),[z,ne]=w.useState(!1),[W,ee]=w.useState(0),[ye,Se]=w.useState(null),[_e,R]=w.useState(null),[S,I]=w.useState(!1),[P,D]=w.useState(!1),[L,A]=w.useState(!1),[De,Qe]=w.useState(!1),[te,xe]=w.useState(""),[Pe,qe]=w.useState(null),[ie,M]=w.useState([]),[K,be]=w.useState(null),Ce=w.useRef(null),Te=w.useRef(null),Ee=w.useRef(null),We=w.useRef(null),nt=w.useRef(!1),Be=w.useRef({}),kn=w.useRef([]),Sn=w.useRef([]),Cn=w.useRef(null),Ft=w.useRef(id[Math.floor(Math.random()*id.length)]),Et=w.useCallback((le,Ae="info")=>{Se({message:le,type:Ae}),setTimeout(()=>Se(null),3e3)},[]),vt=new Date,ct=So(vt),Zn=e3(vt),bt=t3(Zn),Lt=["M","T","W","T","F","S","S"],ae=(le,Ae)=>l&&Ae?Ae:le,ln=[...Y6.filter(le=>!ie.includes(le.key)).map(le=>({...le,color:ae(le.color,le.darkColor)})),...T.map(le=>({key:`custom_${le.id}`,label:le.label,icon:Q6,color:ae(X6,J6),isCustom:!0,id:le.id}))],ut=p?ln:ln.slice(0,g);w.useEffect(()=>{!i&&(!s||!e)&&y("/")},[s,e,i,y]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const Ae=Mt(ke,"habitLogs"),Fe=On(Ae,bn("clientId","==",t.id)),ht=await Dn(Fe),rt={};ht.docs.forEach(gn=>{const Os=gn.data();rt[Os.date]={...Os,_id:gn.id}}),E(rt);const qn=await Ms(Ye(ke,"customHabits",t.id));if(qn.exists()){const gn=qn.data();O(gn.habits||[]),M(gn.hiddenDefaults||[])}let Hn=0;const Zt=new Date(vt);for(;;){const gn=So(Zt),Os=rt[gn];if(Os)if(Object.values(Os.habits||{}).filter(Boolean).length>=3)Hn++,Zt.setDate(Zt.getDate()-1);else break;else if(gn===ct)Zt.setDate(Zt.getDate()-1);else break}ee(Hn)}catch(Ae){console.error("Error loading habit logs:",Ae)}finally{q(!1)}})()},[s,t]);const At=b[ct]||{habits:{}};w.useEffect(()=>{Object.values(At.habits||{}).filter(Boolean).length<ut.length&&L&&A(!1)},[ut.length,At.habits]);const tt=async le=>{if(!(!s||z||At.habits?.[le])){kn.current=[...Array(10)].map((Fe,ht)=>{const rt=ht/10*2*Math.PI,qn=18+Math.random()*20;return{tx:Math.cos(rt)*qn,ty:Math.sin(rt)*qn,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),R(le),setTimeout(()=>R(null),700),navigator.vibrate&&navigator.vibrate(50),ne(!0);try{const ht={...At.habits||{},[le]:!0},rt=At._id||`${t.id}_${ct}`;E(Hn=>({...Hn,[ct]:{clientId:t.id,date:ct,habits:ht,_id:rt}})),await ks(Ye(ke,"habitLogs",rt),{clientId:t.id,date:ct,habits:ht}),Object.values(ht).filter(Boolean).length===ut.length&&!L&&(Ft.current=id[Math.floor(Math.random()*id.length)],Sn.current=[...Array(80)].map((Hn,Zt)=>({x:5+Math.random()*90,delay:Math.random()*3.5,color:["#A12F3A","#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#FFD700","#ffffff","#9c27b0"][Zt%9],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.8+Math.random()*2,width:4+Math.random()*6,height:4+Math.random()*8,shape:Zt%3})),setTimeout(()=>{I(!0),A(!0),setTimeout(()=>Cn.current?.focus(),1100)},400))}catch(Fe){console.error("Error saving habit:",Fe),Et("Failed to save. Try again.","error"),E(ht=>({...ht,[ct]:{...ht[ct],habits:{...ht[ct]?.habits||{},[le]:!1}}}))}finally{ne(!1)}}},$t=async le=>{if(!(!s||z)){ne(!0);try{const Fe={...At.habits||{},[le]:!1},ht=At._id||`${t.id}_${ct}`;await ks(Ye(ke,"habitLogs",ht),{clientId:t.id,date:ct,habits:Fe}),E(rt=>({...rt,[ct]:{clientId:t.id,date:ct,habits:Fe,_id:ht}}))}catch(Ae){console.error("Error undoing habit:",Ae),Et("Failed to undo. Try again.","error")}finally{ne(!1)}}},nn=le=>{if(At.habits?.[le]||!1||z||We.current)return;We.current=le,be(le),Te.current=performance.now();const Fe=Be.current[le];Fe&&(Fe.style.strokeDashoffset=kl);const ht=rt=>{const qn=rt-Te.current,Hn=Math.min(qn/Z6,1),Zt=Be.current[le];Zt&&(Zt.style.strokeDashoffset=kl-Hn*kl),Hn<1?Ee.current=requestAnimationFrame(ht):(We.current=null,nt.current=!0,Ee.current=null,be(null),tt(le))};Ee.current=requestAnimationFrame(ht)},sn=()=>{if(!We.current)return;const le=We.current;We.current=null,Ee.current&&(cancelAnimationFrame(Ee.current),Ee.current=null),Ce.current&&(clearTimeout(Ce.current),Ce.current=null),Be.current[le]&&(Be.current[le].style.strokeDashoffset=kl),be(null),Te.current=null};w.useEffect(()=>()=>{Ee.current&&cancelAnimationFrame(Ee.current),Ce.current&&clearTimeout(Ce.current)},[]);const jn=w.useCallback(async le=>{if(!t)throw new Error("Not signed in");const Ae=le&&typeof le=="object"&&le.type;await ci(Mt(ke,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:Ae?"":le,type:Ae?le.type:"text",imageURL:null,createdAt:xr(),likeCount:0,commentCount:0,...Ae?{metadata:{title:le.title||"",subtitle:le.subtitle||"",stats:le.stats||[],quote:le.quote||"",badges:le.badges||[]}}:{}})},[t]),Ls=async()=>{const le=te.trim();if(!le)return;if(!t?.id){Et("Still loading, try again","error");return}const Ae=Date.now().toString(36),Fe=[...T,{id:Ae,label:le}];try{await ks(Ye(ke,"customHabits",t.id),{clientId:t.id,habits:Fe,hiddenDefaults:ie},{merge:!0}),O(Fe),xe(""),Qe(!1),Et(`Added "${le}"`,"success")}catch(ht){console.error("Error adding custom habit:",ht),Et(ht?.code==="permission-denied"?"Permission denied  check Firestore rules for customHabits":`Failed to add habit: ${ht?.message||"Unknown error"}`,"error")}},Fn=async le=>{if(!t?.id)return;const Ae=T.filter(Fe=>Fe.id!==le);try{await ks(Ye(ke,"customHabits",t.id),{clientId:t.id,habits:Ae,hiddenDefaults:ie},{merge:!0}),O(Ae),qe(null),Et("Habit removed","success")}catch(Fe){console.error("Error deleting habit:",Fe),Et("Failed to remove","error")}},de=async le=>{if(!t?.id)return;const Ae=[...ie,le];try{await ks(Ye(ke,"customHabits",t.id),{clientId:t.id,habits:T,hiddenDefaults:Ae},{merge:!0}),M(Ae),qe(null),Et("Habit removed","success")}catch(Fe){console.error("Error hiding default habit:",Fe),Et("Failed to remove","error")}},Re=bt.map(le=>{const Ae=So(le),Fe=b[Ae],ht=Fe?Object.values(Fe.habits||{}).filter(Boolean).length:0;return{date:le,dateStr:Ae,completed:ht,total:ut.length}}),Ze=Re.reduce((le,Ae)=>le+Ae.completed,0),et=Re.reduce((le,Ae)=>le+Ae.total,0),st=et>0?Math.round(Ze/et*100):0,Oe=Object.values(At.habits||{}).filter(Boolean).length,_t=ut.length>0?Math.round(Oe/ut.length*100):0,kt=Oe===ut.length&&ut.length>0,rn=(()=>{const le=Object.keys(b).sort();let Ae=0,Fe=0,ht=null;for(const rt of le){const qn=b[rt];if(Object.values(qn.habits||{}).filter(Boolean).length>=3){if(ht){const Zt=new Date(ht);Fe=(new Date(rt)-Zt)/(1e3*60*60*24)===1?Fe+1:1}else Fe=1;Fe>Ae&&(Ae=Fe),ht=rt}else Fe=0,ht=null}return Math.max(Ae,W)})(),mn=new Date(vt.getFullYear(),vt.getMonth(),1),pn=mn.toLocaleString("default",{month:"long"}),Pt=new Date(vt.getFullYear(),vt.getMonth()+1,0).getDate(),Vn=(mn.getDay()+6)%7,Nn=Array.from({length:Pt},(le,Ae)=>{const Fe=new Date(vt.getFullYear(),vt.getMonth(),Ae+1),ht=So(Fe),rt=b[ht],qn=rt?Object.values(rt.habits||{}).filter(Boolean).length:0,Hn=Fe>vt;return{day:Ae+1,dateStr:ht,completed:qn,total:ut.length,isFuture:Hn,isToday:ht===ct}}),wn=ut.map(le=>({...le,days:bt.map(Ae=>{const Fe=So(Ae);return b[Fe]?.habits?.[le.key]||!1})})),hs=Re.filter(le=>le.completed===le.total&&le.total>0).length;return a.jsx($o,{children:a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||H?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-hero anim-fade-up",children:[a.jsxs("div",{className:`cbc-progress-ring${kt?" cbc-ring-complete":""}`,children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-_t/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-count",children:[Oe,a.jsx("span",{className:"cbc-ring-divider",children:"/"}),ut.length]}),a.jsx("span",{className:"cbc-ring-label",children:kt?"complete":"today"})]})]}),a.jsx("p",{className:"cbc-hero-tagline",children:kt?"You showed up for yourself today.":Oe===0?"Start your day strong.":`${ut.length-Oe} to go  keep pushing.`})]}),a.jsxs("div",{className:"cbc-streak-card anim-fade-up-d1",children:[a.jsx("div",{className:"cbc-streak-icon",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}),a.jsxs("div",{className:"cbc-streak-info",children:[a.jsx("span",{className:"cbc-streak-count",children:W}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]}),a.jsxs("div",{className:"cbc-streak-best",children:[a.jsx("span",{className:"cbc-streak-best-val",children:rn}),a.jsx("span",{className:"cbc-streak-best-label",children:"best"})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d2",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsxs("div",{className:"cbc-habits-grid",children:[ut.map(le=>{const Ae=At.habits?.[le.key]||!1,Fe=_e===le.key,ht=K===le.key;return a.jsxs("div",{className:`cbc-habit-tile ${Ae?"cbc-habit-done":""} ${Fe?"cbc-habit-just-checked":""}`,style:{"--habit-color":le.color},children:[p&&a.jsx("button",{className:"cbc-habit-delete",onClick:rt=>{rt.stopPropagation(),qe(le.isCustom?{type:"custom",id:le.id,label:le.label}:{type:"default",key:le.key,label:le.label})},"aria-label":`Remove ${le.label}`,children:a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsxs("div",{className:`cbc-habit-ring-touch ${ht?"cbc-holding":""} ${Ae?"cbc-ring-completed":""}`,onPointerDown:rt=>{Ae||(rt.preventDefault(),nn(le.key))},onPointerUp:sn,onPointerLeave:sn,onPointerCancel:sn,onClick:rt=>{if(rt.stopPropagation(),nt.current){nt.current=!1;return}Ae&&$t(le.key)},role:"button",tabIndex:0,"aria-label":Ae?`Undo ${le.label}`:`Press and hold to complete ${le.label}`,onKeyDown:rt=>{(rt.key==="Enter"||rt.key===" ")&&(rt.preventDefault(),Ae?$t(le.key):tt(le.key))},children:[a.jsxs("svg",{className:"cbc-habit-ring-svg",viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-habit-ring-track",cx:"50",cy:"50",r:xg}),a.jsx("circle",{className:"cbc-habit-ring-fill",ref:rt=>{rt&&(Be.current[le.key]=rt)},cx:"50",cy:"50",r:xg,style:{stroke:le.color,strokeDasharray:kl,strokeDashoffset:Ae?0:kl}})]}),Ae&&a.jsx("div",{className:"cbc-habit-glow-orb",style:{"--habit-color":le.color}}),a.jsx("div",{className:"cbc-habit-ring-icon",style:{color:le.color},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:le.icon})})}),Fe&&a.jsx("div",{className:"cbc-particles",children:kn.current.map((rt,qn)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${rt.tx}px`,"--ty":`${rt.ty}px`,"--size":`${rt.size}px`,"--particle-color":le.color,animationDuration:`${rt.duration}s`}},qn))})]}),a.jsx("span",{className:"cbc-habit-label",children:le.label}),Ae?a.jsx("span",{className:"cbc-habit-done-tag",children:"Done"}):a.jsx("span",{className:"cbc-habit-hold-hint",children:"Hold to complete"})]},le.key)}),p?a.jsxs("div",{className:"cbc-habit-tile cbc-add-tile",onClick:()=>Qe(!0),role:"button",tabIndex:0,children:[a.jsx("div",{className:"cbc-add-ring",children:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),a.jsx("span",{className:"cbc-habit-label",children:"Add Habit"}),a.jsx("span",{className:"cbc-habit-hold-hint",children:"Your own"})]}):a.jsxs("div",{className:"cbc-habit-tile cbc-unlock-tile",onClick:()=>y("/upgrade"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"cbc-unlock-ring",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("span",{className:"cbc-habit-label",children:"More Habits"}),a.jsx("span",{className:"cbc-habit-hold-hint",children:"Custom & editable"})]})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d3",children:[a.jsxs("div",{className:"cbc-section-header",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsxs("span",{className:"cbc-section-badge",children:[hs,"/7 perfect"]})]}),a.jsxs("div",{className:"cbc-weekly-card",children:[a.jsxs("div",{className:"cbc-weekly-header",children:[a.jsx("span",{className:"cbc-weekly-habit-name"}),Lt.map((le,Ae)=>a.jsx("span",{className:`cbc-weekly-day-label${bt[Ae]&&So(bt[Ae])===ct?" cbc-today-label":""}`,children:le},Ae))]}),wn.map(le=>(le.days.filter(Boolean).length,a.jsxs("div",{className:"cbc-weekly-row",children:[a.jsx("span",{className:"cbc-weekly-habit-name",style:{color:le.color},children:le.label}),le.days.map((Ae,Fe)=>a.jsx("span",{className:`cbc-weekly-dot${Ae?" cbc-dot-done":""}${bt[Fe]&&So(bt[Fe])===ct?" cbc-dot-today":""}`,style:Ae?{background:le.color,borderColor:le.color,boxShadow:`0 0 6px ${le.color}40`}:void 0},Fe))]},le.key))),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${st}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[Ze,"/",et," completed (",st,"%)"]})]})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d4",children:[a.jsx("h2",{className:"cbc-section-title",children:pn}),a.jsxs("div",{className:"cbc-calendar-card",children:[a.jsx("div",{className:"cbc-cal-header",children:["M","T","W","T","F","S","S"].map((le,Ae)=>a.jsx("span",{className:"cbc-cal-day-label",children:le},Ae))}),a.jsxs("div",{className:"cbc-cal-grid",children:[Array.from({length:Vn},(le,Ae)=>a.jsx("span",{className:"cbc-cal-cell cbc-cal-empty"},`e${Ae}`)),Nn.map(le=>{const Ae=le.total>0?le.completed/le.total:0,Fe=le.isFuture?-1:Ae===0?0:Ae<.4?1:Ae<.75?2:Ae<1?3:4;return a.jsx("span",{className:`cbc-cal-cell${le.isToday?" cbc-cal-today":""}${Fe===4?" cbc-cal-perfect":""} cbc-cal-heat-${Fe<0?"future":Fe}`,children:le.day},le.day)})]}),a.jsxs("div",{className:"cbc-cal-legend",children:[a.jsx("span",{className:"cbc-cal-legend-label",children:"Less"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-0"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-1"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-2"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-3"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-4"}),a.jsx("span",{className:"cbc-cal-legend-label",children:"More"})]})]})]})]}),a.jsx(ua,{active:"home"}),De&&a.jsx("div",{className:"cbc-modal-overlay",onClick:()=>Qe(!1),children:a.jsxs("div",{className:"cbc-modal",onClick:le=>le.stopPropagation(),children:[a.jsx("h3",{className:"cbc-modal-title",children:"Add Habit"}),a.jsx("p",{className:"cbc-modal-desc",children:"Track something personal to your routine."}),a.jsx("input",{className:"cbc-modal-input",type:"text",placeholder:"e.g. Meditate, Stretch, Read...",value:te,onChange:le=>xe(le.target.value),maxLength:30,autoFocus:!0,onKeyDown:le=>le.key==="Enter"&&Ls()}),a.jsxs("div",{className:"cbc-modal-actions",children:[a.jsx("button",{className:"cbc-modal-cancel",onClick:()=>{Qe(!1),xe("")},children:"Cancel"}),a.jsx("button",{className:"cbc-modal-save",onClick:Ls,disabled:!te.trim(),children:"Add"})]})]})}),Pe&&a.jsx("div",{className:"cbc-modal-overlay",onClick:()=>qe(null),children:a.jsxs("div",{className:"cbc-modal",onClick:le=>le.stopPropagation(),children:[a.jsxs("h3",{className:"cbc-modal-title",children:['Remove "',Pe.label,'"?']}),a.jsx("p",{className:"cbc-modal-desc",children:"This will remove the habit from your daily tracker. Past logs won't be affected."}),a.jsxs("div",{className:"cbc-modal-actions",children:[a.jsx("button",{className:"cbc-modal-cancel",onClick:()=>qe(null),children:"Keep"}),a.jsx("button",{className:"cbc-modal-delete",onClick:()=>Pe.type==="custom"?Fn(Pe.id):de(Pe.key),children:"Remove"})]})]})}),S&&a.jsx(wg,{title:"All Habits Complete!",subtitle:Ft.current,stats:[{value:`${Oe}/${ut.length}`,label:"Habits"},{value:W||1,label:"Day Streak"}],buttonLabel:"Keep Going",holdLabel:"Hold To Complete Today's Habits",shareType:"habits",hideShare:!p,onShareJourney:t?jn:null,userName:t?.name,onDone:()=>{I(!1),D(!1)}}),ye&&a.jsx("div",{className:`toast-notification ${ye.type}`,children:ye.message})]})})}function ad(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function v_(s,e){return[s,e].sort().join("_")}function s3(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Li(),{isDark:l,toggleTheme:u}=Wo(),h=Lr(),[p,g]=w.useState("buddies"),[y,b]=w.useState([]),[E,T]=w.useState([]),[O,H]=w.useState([]),[q,z]=w.useState(""),[ne,W]=w.useState([]),[ee,ye]=w.useState([]),[Se,_e]=w.useState(!0),[R,S]=w.useState(null),[I,P]=w.useState(null),D=w.useCallback((ie,M="info")=>{P({message:ie,type:M}),setTimeout(()=>P(null),3500)},[]);w.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const L=w.useCallback(async()=>{if(t){_e(!0);try{const ie=t.id,K=(await Dn(Mt(ke,"clients"))).docs.map(Be=>({id:Be.id,...Be.data()}));ye(K);const be=Object.fromEntries(K.map(Be=>[Be.id,Be])),Ce=await Dn(On(Mt(ke,"buddies"),bn("user1","==",ie))),Te=await Dn(On(Mt(ke,"buddies"),bn("user2","==",ie))),Ee=new Set;[...Ce.docs,...Te.docs].forEach(Be=>{const kn=Be.data(),Sn=kn.user1===ie?kn.user2:kn.user1;Ee.add(Sn)}),b(Array.from(Ee).map(Be=>be[Be]).filter(Boolean));const We=await Dn(On(Mt(ke,"buddyRequests"),bn("toId","==",ie),bn("status","==","pending")));T(We.docs.map(Be=>({reqId:Be.id,...Be.data(),fromClient:be[Be.data().fromId]})).filter(Be=>Be.fromClient));const nt=await Dn(On(Mt(ke,"buddyRequests"),bn("fromId","==",ie),bn("status","==","pending")));H(nt.docs.map(Be=>({reqId:Be.id,...Be.data(),toClient:be[Be.data().toId]})).filter(Be=>Be.toClient))}catch(ie){console.error("Error fetching buddy data:",ie),D("Failed to load buddies","error")}finally{_e(!1)}}},[t,D]);w.useEffect(()=>{L()},[L]),w.useEffect(()=>{if(!q.trim()||!t){W([]);return}const ie=q.toLowerCase(),M=t.id,K=new Set(y.map(Ee=>Ee.id)),be=new Set(O.map(Ee=>Ee.toId)),Ce=new Set(E.map(Ee=>Ee.fromId)),Te=ee.filter(Ee=>Ee.id===M||!Ee.name||!Ee.coreBuddyAccess&&Ee.clientType!=="core_buddy"?!1:Ee.name.toLowerCase().includes(ie)).map(Ee=>({...Ee,isBuddy:K.has(Ee.id),isPendingOut:be.has(Ee.id),isPendingIn:Ce.has(Ee.id)})).slice(0,20);W(Te)},[q,ee,y,O,E,t]);const A=async(ie,M)=>{if(!(!t||ie===t.id))try{await ci(Mt(ke,"notifications"),{toId:ie,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:M,read:!1,createdAt:xr()})}catch(K){console.error("Notification error:",K),K.code==="permission-denied"&&D("Notifications blocked  check Firestore rules","error")}},De=async ie=>{S(ie);try{const M=`${t.id}_${ie}`;await ks(Ye(ke,"buddyRequests",M),{fromId:t.id,toId:ie,status:"pending",createdAt:xr()}),await A(ie,"buddy_request"),D("Buddy request sent!","success"),await L()}catch(M){console.error("Error sending request:",M),D("Failed to send request","error")}finally{S(null)}},Qe=async ie=>{S(ie.reqId);try{const M=v_(ie.fromId,t.id);await ks(Ye(ke,"buddies",M),{user1:[ie.fromId,t.id].sort()[0],user2:[ie.fromId,t.id].sort()[1],connectedAt:xr()}),await Ir(Ye(ke,"buddyRequests",ie.reqId)),await A(ie.fromId,"buddy_accept"),D("Buddy added!","success"),await L()}catch(M){console.error("Error accepting request:",M),D("Failed to accept","error")}finally{S(null)}},te=async ie=>{S(ie.reqId);try{await Ir(Ye(ke,"buddyRequests",ie.reqId)),D("Request declined","info"),await L()}catch(M){console.error("Error declining:",M),D("Failed to decline","error")}finally{S(null)}},xe=async ie=>{S(ie.reqId);try{await Ir(Ye(ke,"buddyRequests",ie.reqId)),D("Request cancelled","info"),await L()}catch(M){console.error("Error cancelling:",M),D("Failed to cancel","error")}finally{S(null)}},Pe=async ie=>{S(ie);try{const M=v_(t.id,ie);await Ir(Ye(ke,"buddies",M)),D("Buddy removed","info"),await L()}catch(M){console.error("Error removing buddy:",M),D("Failed to remove buddy","error")}finally{S(null)}},qe=E.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!t?null:a.jsx($o,{children:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("button",{className:"bdy-leaderboard-link",onClick:()=>h("/client/leaderboard"),children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("rect",{x:"6",y:"9",width:"12",height:"13",rx:"2"}),a.jsx("path",{d:"M12 9v13"}),a.jsx("path",{d:"M2 22h20"})]}),a.jsx("span",{children:"Leaderboard"}),a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),qe>0&&a.jsx("span",{className:"bdy-tab-badge",children:qe})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Se?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(ie=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${ie.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:ie.photoURL?a.jsx("img",{src:ie.photoURL,alt:ie.name}):a.jsx("span",{children:ad(ie.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:ie.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:M=>{M.stopPropagation(),Pe(ie.id)},disabled:R===ie.id,"aria-label":"Remove buddy",children:R===ie.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ie.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[E.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:E.map(ie=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:ie.fromClient.photoURL?a.jsx("img",{src:ie.fromClient.photoURL,alt:ie.fromClient.name}):a.jsx("span",{children:ad(ie.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ie.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>Qe(ie),disabled:R===ie.reqId,children:R===ie.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>te(ie),disabled:R===ie.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},ie.reqId))})]}),O.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:O.map(ie=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:ie.toClient?.photoURL?a.jsx("img",{src:ie.toClient.photoURL,alt:ie.toClient.name}):a.jsx("span",{children:ad(ie.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ie.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>xe(ie),disabled:R===ie.reqId,children:R===ie.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},ie.reqId))})]}),E.length===0&&O.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:q,onChange:ie=>z(ie.target.value),autoFocus:!0}),q&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>z(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),q.trim()&&ne.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',q,'"']})}),ne.length>0&&a.jsx("div",{className:"bdy-list",children:ne.map(ie=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${ie.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:ie.photoURL?a.jsx("img",{src:ie.photoURL,alt:ie.name}):a.jsx("span",{children:ad(ie.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ie.name}),ie.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),ie.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):ie.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):ie.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:M=>{M.stopPropagation();const K=E.find(be=>be.fromId===ie.id);K&&Qe(K)},disabled:!!R,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:M=>{M.stopPropagation(),De(ie.id)},disabled:R===ie.id,children:R===ie.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},ie.id))})]})]})]}),a.jsx(ua,{}),I&&a.jsxs("div",{className:`toast-notification ${I.type}`,children:[a.jsx("span",{className:"toast-icon",children:I.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):I.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:I.message})]})]})})}function od(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function zp(s,e){return[s,e].sort().join("_")}const r3=5;function Fp(s){return s.toISOString().split("T")[0]}function i3(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function b_(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function a3(){const{userId:s}=nS(),{currentUser:e,isClient:t,clientData:i,loading:l}=Li(),{isDark:u,toggleTheme:h}=Wo(),p=Lr(),[g,y]=w.useState(null),[b,E]=w.useState("none"),[T,O]=w.useState(null),[H,q]=w.useState(!0),[z,ne]=w.useState(!1),[W,ee]=w.useState(null),[ye,Se]=w.useState([]),[_e,R]=w.useState(!1),[S,I]=w.useState(new Set),[P,D]=w.useState(new Set),[L,A]=w.useState({}),[De,Qe]=w.useState({}),[te,xe]=w.useState({}),[Pe,qe]=w.useState(!0),[ie,M]=w.useState(0),[K,be]=w.useState(0),[Ce,Te]=w.useState(0),[Ee,We]=w.useState(0),[nt,Be]=w.useState([]),[kn,Sn]=w.useState(!1),[Cn,Ft]=w.useState(null),[Et,vt]=w.useState([]),ct=w.useCallback((de,Re="info")=>{ee({message:de,type:Re}),setTimeout(()=>ee(null),3500)},[]);w.useEffect(()=>{!l&&(!e||!t)&&p("/")},[e,t,l,p]),w.useEffect(()=>{i&&s&&i.id===s&&p("/client/core-buddy",{replace:!0})},[i,s,p]),w.useEffect(()=>{if(!i||!s||i.id===s)return;let de=!1;return(async()=>{q(!0);try{const et=(await Dn(Mt(ke,"clients"))).docs.map(kt=>({id:kt.id,...kt.data()})).find(kt=>kt.id===s);if(!et){de||q(!1);return}de||y(et);const st=i.id,Oe=zp(st,s);if((await Ms(Ye(ke,"buddies",Oe))).exists())de||E("buddy");else{const kt=`${st}_${s}`,rn=await Ms(Ye(ke,"buddyRequests",kt));if(rn.exists()&&rn.data().status==="pending")de||(E("pending_out"),O(kt));else{const mn=`${s}_${st}`,pn=await Ms(Ye(ke,"buddyRequests",mn));pn.exists()&&pn.data().status==="pending"?de||(E("pending_in"),O(mn)):de||E("none")}}}catch(Re){console.error("Error loading profile:",Re)}finally{de||q(!1)}})(),()=>{de=!0}},[i,s]),w.useEffect(()=>{if(!s||!g)return;let de=!1;return(async()=>{qe(!0);try{const[Re,Ze]=await Promise.all([Dn(On(Mt(ke,"workoutLogs"),bn("clientId","==",s))),Ms(Ye(ke,"coreBuddyAchievements",s))]);if(de)return;const et=Re.docs.length;M(et),Ze.exists()&&be(Ze.data().totalVolume||0);let st=0;const Oe=Re.docs.map(kt=>kt.data().date).filter(Boolean).sort().reverse();if(Oe.length>0){const kt=new Date;let rn=new Date(kt);for(let mn=0;mn<52;mn++){const pn=new Date(rn),Pt=pn.getDay(),Vn=Pt===0?6:Pt-1;pn.setDate(pn.getDate()-Vn),pn.setHours(0,0,0,0);const Nn=new Date(pn);Nn.setDate(Nn.getDate()+7);const wn=Fp(pn),hs=Fp(Nn);if(Oe.some(Ae=>Ae>=wn&&Ae<hs))st++;else{if(mn>0)break;break}rn.setDate(rn.getDate()-7)}}de||Te(st);let _t=0;for(let kt=0;kt<30;kt++){const rn=new Date;rn.setDate(rn.getDate()-kt);const mn=Fp(rn);try{const pn=await Dn(On(Mt(ke,"habitLogs"),bn("clientId","==",s),bn("date","==",mn)));if(pn.empty)break;{const Pt=pn.docs[0].data().habits||{};if(Object.values(Pt).filter(Boolean).length>=r3)_t++;else break}}catch{break}}de||We(_t)}catch(Re){console.error("Error loading buddy stats:",Re)}finally{de||qe(!1)}})(),()=>{de=!0}},[s,g]),w.useEffect(()=>{if(!i)return;const de=i.id;(async()=>{try{const[Re,Ze,et]=await Promise.all([Dn(On(Mt(ke,"buddies"),bn("user1","==",de))),Dn(On(Mt(ke,"buddies"),bn("user2","==",de))),Dn(Mt(ke,"clients"))]),st=new Set;[...Re.docs,...Ze.docs].forEach(_t=>{const kt=_t.data();st.add(kt.user1===de?kt.user2:kt.user1)});const Oe={};et.docs.forEach(_t=>{Oe[_t.id]=_t.data()}),Be(Array.from(st).filter(_t=>Oe[_t]).map(_t=>({id:_t,name:Oe[_t].name,photoURL:Oe[_t].photoURL||null})))}catch(Re){console.error("Error loading buddies for mentions:",Re)}})()},[i]);const Zn=async(de,Re,Ze={})=>{if(!(!i||de===i.id))try{await ci(Mt(ke,"notifications"),{toId:de,fromId:i.id,fromName:i.name||"Someone",fromPhotoURL:i.photoURL||null,type:Re,read:!1,createdAt:xr(),...Ze})}catch(et){console.error("Notification error:",et),et.code==="permission-denied"&&ct("Notifications blocked  check Firestore rules","error")}},bt=async()=>{ne(!0);try{const de=`${i.id}_${s}`;await ks(Ye(ke,"buddyRequests",de),{fromId:i.id,toId:s,status:"pending",createdAt:xr()}),await Zn(s,"buddy_request"),E("pending_out"),O(de),ct("Buddy request sent!","success")}catch(de){console.error(de),ct("Failed to send request","error")}finally{ne(!1)}},Lt=async()=>{if(T){ne(!0);try{const de=zp(i.id,s);await ks(Ye(ke,"buddies",de),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:xr()}),await Ir(Ye(ke,"buddyRequests",T)),await Zn(s,"buddy_accept"),E("buddy"),ct("Buddy added!","success")}catch(de){console.error(de),ct("Failed to accept","error")}finally{ne(!1)}}},ae=async()=>{if(T){ne(!0);try{await Ir(Ye(ke,"buddyRequests",T)),E("none"),ct(b==="pending_out"?"Request cancelled":"Request declined","info")}catch(de){console.error(de),ct("Failed","error")}finally{ne(!1)}}},ln=async()=>{ne(!0);try{const de=zp(i.id,s);await Ir(Ye(ke,"buddies",de)),E("none"),ct("Buddy removed","info")}catch(de){console.error(de),ct("Failed to remove","error")}finally{ne(!1)}},ut=w.useCallback(async()=>{if(s){R(!0);try{const de=await Dn(On(Mt(ke,"posts"),bn("authorId","==",s),fu("createdAt","desc"),mu(30)));if(Se(de.docs.map(Re=>({id:Re.id,...Re.data()}))),i){const Re=await Dn(On(Mt(ke,"postLikes"),bn("userId","==",i.id)));I(new Set(Re.docs.map(Ze=>Ze.data().postId)))}}catch(de){console.error("Error loading journey:",de)}finally{R(!1)}}},[s,i]);w.useEffect(()=>{!H&&g&&ut()},[H,g,ut]);const At=async de=>{if(window.confirm("Delete this post?"))try{await Ir(Ye(ke,"posts",de)),Se(Re=>Re.filter(Ze=>Ze.id!==de)),ct("Post deleted","info")}catch(Re){console.error("Delete error:",Re),ct("Failed to delete","error")}},tt=async de=>{if(!i)return;const Re=i.id,Ze=`${de}_${Re}`,et=S.has(de),st=new Set(S);et?st.delete(de):st.add(de),I(st),Se(Oe=>Oe.map(_t=>_t.id===de?{..._t,likeCount:Math.max(0,(_t.likeCount||0)+(et?-1:1))}:_t));try{if(et)await Ir(Ye(ke,"postLikes",Ze)),await Jr(Ye(ke,"posts",de),{likeCount:No(-1)});else{await ks(Ye(ke,"postLikes",Ze),{postId:de,userId:Re,createdAt:xr()}),await Jr(Ye(ke,"posts",de),{likeCount:No(1)});const Oe=ye.find(_t=>_t.id===de);Oe&&Zn(Oe.authorId,"like",{postId:de})}}catch(Oe){console.error("Like error:",Oe),ut()}},$t=async de=>{try{const Re=await Dn(On(Mt(ke,"postComments"),bn("postId","==",de),fu("createdAt","asc"),mu(50)));A(Ze=>({...Ze,[de]:Re.docs.map(et=>({id:et.id,...et.data()}))}))}catch(Re){console.error("Error loading comments:",Re)}},nn=de=>{const Re=new Set(P);Re.has(de)?Re.delete(de):(Re.add(de),L[de]||$t(de)),D(Re)},sn=(de,Re)=>{const Ze=de.match(/@(\w*)$/);if(Ze){Sn(!0),Ft(Re);const et=nt.filter(st=>st.name&&st.name.toLowerCase().includes(Ze[1].toLowerCase())).slice(0,5);vt(et)}else Sn(!1),vt([])},jn=(de,Re)=>{const et=(De[Re]||"").replace(/@\w*$/,`@${de.name} `);Qe(st=>({...st,[Re]:et})),Sn(!1),vt([])},Ls=(de,Re)=>{Qe(Ze=>({...Ze,[de]:Re})),sn(Re,de)},Fn=async de=>{const Re=(De[de]||"").trim();if(!(!Re||!i)){xe(Ze=>({...Ze,[de]:!0}));try{await ci(Mt(ke,"postComments"),{postId:de,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:Re,createdAt:xr()}),await Jr(Ye(ke,"posts",de),{commentCount:No(1)});const Ze=ye.find(st=>st.id===de);Ze&&Zn(Ze.authorId,"comment",{postId:de});const et=Re.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(et){const st=new Set;et.forEach(Oe=>{const _t=Oe.slice(1).trim(),kt=nt.find(rn=>rn.name&&rn.name.toLowerCase()===_t.toLowerCase());kt&&!st.has(kt.id)&&(st.add(kt.id),Zn(kt.id,"mention",{postId:de}))})}Qe(st=>({...st,[de]:""})),Se(st=>st.map(Oe=>Oe.id===de?{...Oe,commentCount:(Oe.commentCount||0)+1}:Oe)),await $t(de)}catch(Ze){console.error("Comment error:",Ze),ct("Failed to comment","error")}finally{xe(Ze=>({...Ze,[de]:!1}))}}};return l||H||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!t?null:g?a.jsx($o,{children:a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:h,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:od(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),a.jsxs("div",{className:"prf-buddy-action",children:[b==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:bt,disabled:z,children:z?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),b==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:ae,disabled:z,children:z?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),b==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:Lt,disabled:z,children:z?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:ae,disabled:z,children:"Decline"})]}),b==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:ln,disabled:z,children:z?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),Pe?a.jsx("div",{className:"prf-stats-loading",children:a.jsx("div",{className:"prf-spinner"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"prf-stats",children:[a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:ie}),a.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[i3(K),a.jsx("span",{className:"prf-stat-unit",children:K>=1e3?"":"kg"})]}),a.jsxs("span",{className:"prf-stat-label",children:[K>=1e6?"Million kg":K>=1e3?"Tonnes":"Volume"," Lifted"]})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[Ce,a.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),a.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),Ee>0&&a.jsx("div",{className:"prf-info-row",children:a.jsxs("div",{className:"prf-info-card info-habit",children:[a.jsx("div",{className:"prf-info-icon",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})}),a.jsxs("div",{className:"prf-info-text",children:[a.jsxs("span",{className:"prf-info-value",children:[Ee," day",Ee!==1?"s":""]}),a.jsx("span",{className:"prf-info-sub",children:"Habit Streak"})]})]})})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:`${g.name?.split(" ")[0]}'s Journey`}),_e?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):ye.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:ye.map(de=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:de.authorPhotoURL?a.jsx("img",{src:de.authorPhotoURL,alt:""}):a.jsx("span",{children:od(de.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:de.authorName}),a.jsx("span",{className:"journey-post-time",children:b_(de.createdAt)})]}),de.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>At(de.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),de.content&&a.jsx("p",{className:"journey-post-content",children:de.content}),de.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:de.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${S.has(de.id)?" liked":""}`,onClick:()=>tt(de.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:S.has(de.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:de.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${P.has(de.id)?" active":""}`,onClick:()=>nn(de.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:de.commentCount||0})]})]}),P.has(de.id)&&a.jsxs("div",{className:"journey-comments",children:[L[de.id]?.length>0?L[de.id].map(Re=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${Re.authorId}`),children:Re.authorPhotoURL?a.jsx("img",{src:Re.authorPhotoURL,alt:""}):a.jsx("span",{children:od(Re.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:Re.authorName}),a.jsx("span",{className:"journey-comment-text",children:Re.content})]}),a.jsx("span",{className:"journey-comment-time",children:b_(Re.createdAt)})]})]},Re.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("input",{type:"text",placeholder:"Comment... (@ to mention)",value:De[de.id]||"",onChange:Re=>Ls(de.id,Re.target.value),onKeyDown:Re=>{Re.key==="Enter"&&Fn(de.id)},maxLength:300}),kn&&Cn===de.id&&Et.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:Et.map(Re=>a.jsxs("button",{className:"mention-option",onClick:()=>jn(Re,de.id),children:[a.jsx("div",{className:"mention-option-avatar",children:Re.photoURL?a.jsx("img",{src:Re.photoURL,alt:""}):a.jsx("span",{children:od(Re.name)})}),a.jsx("span",{children:Re.name})]},Re.id))}),a.jsx("button",{onClick:()=>Fn(de.id),disabled:!(De[de.id]||"").trim()||te[de.id],children:te[de.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},de.id))})]})]}),a.jsx(ua,{}),W&&a.jsxs("div",{className:`toast-notification ${W.type}`,children:[a.jsx("span",{className:"toast-icon",children:W.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):W.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:W.message})]})]})}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(ua,{})]})}const qp=[{text:"Build your dashboard...",bold:"your way"},{text:"Pick what matters to you...",bold:"nothing else"},{text:"Your goals, your layout...",bold:"your rules"}],__=[{id:"stats",label:"Stats Rings",desc:"Programme %, workouts this week, habits today",icon:"rings",defaultOn:!0},{id:"workouts",label:"Workouts",desc:"Sessions this week and total count",icon:"dumbbell",defaultOn:!0},{id:"habits",label:"Habits",desc:"Daily habit tracker dots",icon:"check",defaultOn:!0},{id:"pbs",label:"Personal Bests",desc:"Your top lifts at a glance",icon:"trophy"},{id:"nutrition",label:"Nutrition",desc:"Macro rings  protein, carbs, fats, cals",icon:"apple"},{id:"leaderboard",label:"Leaderboard",desc:"See where you rank among buddies",icon:"podium"},{id:"achievements",label:"Achievements",desc:"Badge showcase and progress",icon:"medal"},{id:"journey",label:"Journey",desc:"Your posts, likes and comments feed",icon:"feed"},{id:"coach",label:"Coach Message",desc:"Motivational nudge from Buddy",icon:"message",defaultOn:!0},{id:"nudge",label:"Smart Nudge",desc:"Contextual reminder of what to do next",icon:"lightbulb"}];function o3(s){switch(s){case"rings":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]});case"dumbbell":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M6.5 6.5h11v11h-11z",strokeLinejoin:"round"}),a.jsx("line",{x1:"2",y1:"12",x2:"6.5",y2:"12"}),a.jsx("line",{x1:"17.5",y1:"12",x2:"22",y2:"12"})]});case"check":return a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})});case"trophy":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M6 9H3V6a1 1 0 0 1 1-1h2M18 9h3V6a1 1 0 0 0-1-1h-2"}),a.jsx("path",{d:"M6 5h12v7a6 6 0 0 1-12 0V5z"}),a.jsx("path",{d:"M9 21h6"}),a.jsx("path",{d:"M12 17v4"})]});case"apple":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M12 3c-1.5 0-3 1-3 1s-3-.5-4.5 1.5S3 9 3 12s1.5 6 3 8 3 3 6 3 4.5-1 6-3 3-5 3-8-1.5-4-3-6.5S13.5 3 12 3z"}),a.jsx("path",{d:"M12 3c0 0 1-2 3-2"})]});case"podium":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"2",y:"14",width:"6",height:"8",rx:"1"}),a.jsx("rect",{x:"9",y:"8",width:"6",height:"14",rx:"1"}),a.jsx("rect",{x:"16",y:"11",width:"6",height:"11",rx:"1"})]});case"medal":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"15",r:"6"}),a.jsx("path",{d:"M8.21 13.89L7 2h10l-1.21 11.89"})]});case"feed":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3"}),a.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),a.jsx("line",{x1:"3",y1:"15",x2:"21",y2:"15"})]});case"message":return a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})});case"lightbulb":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 18h6"}),a.jsx("path",{d:"M10 22h4"}),a.jsx("path",{d:"M12 2a7 7 0 0 0-4 12.7V17h8v-2.3A7 7 0 0 0 12 2z"})]});default:return null}}function l3(){const s=Lr(),{clientData:e,currentUser:t,updateClientData:i,resolveClient:l}=Li(),[u,h]=w.useState({hours:0,minutes:0,seconds:0}),[p,g]=w.useState(0),[y,b]=w.useState(0),[E,T]=w.useState(null),[O,H]=w.useState(!1),q=w.useRef(null),[z,ne]=w.useState(()=>{const L=e?.dashboardWidgets;return L&&Array.isArray(L)?L:__.filter(A=>A.defaultOn).map(A=>A.id)}),[W,ee]=w.useState(!1),[ye,Se]=w.useState(!1),[_e,R]=w.useState(null);w.useEffect(()=>{e?.photoURL&&T(e.photoURL)},[e?.photoURL]),w.useEffect(()=>{const L=()=>{const De=new Date,Qe=new Date(De);Qe.setHours(23,59,59,999);const te=Qe-De;h({hours:Math.floor(te/36e5),minutes:Math.floor(te%36e5/6e4),seconds:Math.floor(te%6e4/1e3)}),g(60-Math.floor(te%6e4/1e3))};L();const A=setInterval(L,1e3);return()=>clearInterval(A)},[]),w.useEffect(()=>{const L=setInterval(()=>b(A=>(A+1)%qp.length),8e3);return()=>clearInterval(L)},[]);const S=async L=>{const A=L.target.files?.[0];if(!(!A||!e?.id)){H(!0);try{const De=Ha(Wa,`profilePhotos/${e.id}`);await _d(De,A);const Qe=await Do(De);await Jr(Ye(ke,"clients",e.id),{photoURL:Qe}),T(Qe),i({photoURL:Qe})}catch(De){console.error("Photo upload error:",De)}finally{H(!1)}}},I=L=>{Se(!1),ne(A=>A.includes(L)?A.filter(De=>De!==L):[...A,L])},P=(L,A)=>{Se(!1),ne(De=>{const Qe=De.indexOf(L);if(Qe<0)return De;const te=Qe+A;if(te<0||te>=De.length)return De;const xe=[...De];return[xe[Qe],xe[te]]=[xe[te],xe[Qe]],xe})},D=async()=>{ee(!0),R(null);try{const L=e||await l();if(!L?.id){R("Could not find your profile. Try refreshing."),ee(!1);return}await Jr(Ye(ke,"clients",L.id),{dashboardWidgets:z}),i({dashboardWidgets:z}),Se(!0)}catch(L){console.error("Save config error:",L),R("Save failed  please try again.")}finally{ee(!1)}};return a.jsx($o,{children:a.jsxs("div",{className:"bldr-page",children:[a.jsxs("div",{className:"bldr-container",children:[a.jsxs("div",{className:"bldr-header",children:[a.jsx("button",{className:"bldr-back",onClick:()=>s("/client/core-buddy"),children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("h1",{className:"bldr-title",children:"Build Your Dashboard"})]}),a.jsxs("div",{className:"bldr-ring-container",children:[a.jsxs("div",{className:"bldr-ring",children:[a.jsx("svg",{className:"bldr-ring-svg",viewBox:"0 0 200 200",children:AE.map((L,A)=>a.jsx("line",{x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,className:`bldr-tick ${A<p?"elapsed":"remaining"}`,strokeWidth:L.thick?"3":"2"},A))}),a.jsxs("div",{className:"bldr-ring-center",children:[a.jsxs("div",{className:"bldr-ring-photo",onClick:()=>q.current?.click(),children:[a.jsx("img",{src:E||"/Logo.webp",alt:E?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`bldr-photo-overlay${O?" uploading":""}`,children:O?a.jsx("div",{className:"bldr-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:S,style:{display:"none"}})]}),!E&&!O&&a.jsx("div",{className:"bldr-photo-badge",onClick:()=>q.current?.click(),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),a.jsxs("div",{className:"bldr-countdown",children:[a.jsx("span",{className:"bldr-timer-digit",children:String(u.hours).padStart(2,"0")}),a.jsx("span",{className:"bldr-timer-colon",children:":"}),a.jsx("span",{className:"bldr-timer-digit",children:String(u.minutes).padStart(2,"0")}),a.jsx("span",{className:"bldr-timer-colon",children:":"}),a.jsx("span",{className:"bldr-timer-digit bldr-timer-sec",children:String(u.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"bldr-ring-label",children:"remaining today"}),a.jsxs("p",{className:"bldr-tagline",children:[qp[y].text," ",a.jsx("strong",{children:qp[y].bold})]})]}),a.jsxs("div",{className:"bldr-section",children:[a.jsx("h2",{className:"bldr-section-title",children:"Choose Your Widgets"}),a.jsx("p",{className:"bldr-section-desc",children:"The countdown ring and your profile always stay at the top. Pick what goes below."}),a.jsx("div",{className:"bldr-widgets-list",children:__.map(L=>{const A=z.includes(L.id),De=z.indexOf(L.id);return a.jsxs("div",{className:`bldr-widget-card${A?" active":""}`,children:[a.jsx("div",{className:"bldr-widget-icon",children:o3(L.icon)}),a.jsxs("div",{className:"bldr-widget-info",children:[a.jsx("div",{className:"bldr-widget-label",children:L.label}),a.jsx("div",{className:"bldr-widget-desc",children:L.desc})]}),a.jsxs("div",{className:"bldr-widget-actions",children:[A&&a.jsxs("div",{className:"bldr-widget-order",children:[a.jsx("button",{className:"bldr-order-btn",onClick:()=>P(L.id,-1),disabled:De===0,"aria-label":"Move up",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M18 15l-6-6-6 6"})})}),a.jsx("span",{className:"bldr-order-num",children:De+1}),a.jsx("button",{className:"bldr-order-btn",onClick:()=>P(L.id,1),disabled:De===z.length-1,"aria-label":"Move down",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M6 9l6 6 6-6"})})})]}),a.jsx("button",{className:`bldr-toggle${A?" on":""}`,onClick:()=>I(L.id),"aria-label":A?`Remove ${L.label}`:`Add ${L.label}`,children:a.jsx("div",{className:"bldr-toggle-thumb"})})]})]},L.id)})})]}),a.jsxs("div",{className:"bldr-save-wrap",children:[a.jsx("button",{className:`bldr-save-btn${ye?" saved":""}`,onClick:D,disabled:W||ye,children:W?"Saving...":ye?"Saved":"Save Dashboard"}),_e&&a.jsx("p",{className:"bldr-save-error",children:_e}),ye&&a.jsx("button",{className:"bldr-view-btn",onClick:()=>s("/client/core-buddy"),children:"View Dashboard"})]})]}),a.jsx(ua,{active:"home"})]})})}const c3=w.lazy(()=>ur(()=>import("./Dashboard-CpP2nxKv.js"),__vite__mapDeps([0,1,2]))),u3=w.lazy(()=>ur(()=>import("./AddClient-D6Dt2yzc.js"),__vite__mapDeps([3,4]))),h3=w.lazy(()=>ur(()=>import("./ClientDashboard-B11brUP4.js"),__vite__mapDeps([5,1,6]))),d3=w.lazy(()=>ur(()=>import("./ClientForms-Cf8buDnk.js"),__vite__mapDeps([7,8,6]))),f3=w.lazy(()=>ur(()=>import("./ClientTools-7gdB1RCp.js"),__vite__mapDeps([9,10,6]))),m3=w.lazy(()=>ur(()=>import("./MacroCalculator-DhHNf25d.js"),__vite__mapDeps([11,10,6]))),p3=w.lazy(()=>ur(()=>import("./ProteinSnacks-B6g6-DUB.js"),__vite__mapDeps([12,10,6]))),g3=w.lazy(()=>ur(()=>import("./DailyMotivation-2Wifn_3t.js"),__vite__mapDeps([13,10,6]))),y3=w.lazy(()=>ur(()=>import("./CircuitDashboard-BaPFxzxX.js"),__vite__mapDeps([14,15]))),v3=w.lazy(()=>ur(()=>import("./CircuitBooking-uf5FysDR.js"),__vite__mapDeps([16,17,15]))),b3=w.lazy(()=>ur(()=>import("./Leaderboard-48VhiNo6.js"),__vite__mapDeps([18,19]))),_3=w.lazy(()=>ur(()=>import("./UpgradePage-C68HKKp2.js"),__vite__mapDeps([20,21]))),w3=w.lazy(()=>ur(()=>import("./SignUp-DeHNHF8M.js"),[])),x3=w.lazy(()=>ur(()=>import("./Onboarding-D7930vUb.js"),__vite__mapDeps([22,23])));function E3({children:s}){const{pathname:e}=Di();return w.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),w.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function T3(){const s=Lr();return w.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function k3(){return a.jsx(DM,{children:a.jsx(IM,{children:a.jsx(VM,{children:a.jsxs(FS,{basename:"/login",children:[a.jsx(T3,{}),a.jsx(E3,{children:a.jsx(w.Suspense,{fallback:a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:a.jsx("div",{style:{width:36,height:36,border:"3px solid var(--color-primary-light)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"app-spin .7s linear infinite"}})}),children:a.jsxs(yS,{children:[a.jsx(Kn,{path:"/",element:a.jsx(zM,{})}),a.jsx(Kn,{path:"/dashboard",element:a.jsx(c3,{})}),a.jsx(Kn,{path:"/add-client",element:a.jsx(u3,{})}),a.jsx(Kn,{path:"/client",element:a.jsx(h3,{})}),a.jsx(Kn,{path:"/client/forms",element:a.jsx(d3,{})}),a.jsx(Kn,{path:"/client/tools",element:a.jsx(f3,{})}),a.jsx(Kn,{path:"/client/tools/macros",element:a.jsx(m3,{})}),a.jsx(Kn,{path:"/client/tools/snacks",element:a.jsx(p3,{})}),a.jsx(Kn,{path:"/client/tools/motivation",element:a.jsx(g3,{})}),a.jsx(Kn,{path:"/client/circuit",element:a.jsx(y3,{})}),a.jsx(Kn,{path:"/client/circuit/booking",element:a.jsx(v3,{})}),a.jsx(Kn,{path:"/client/core-buddy",element:a.jsx(GM,{})}),a.jsx(Kn,{path:"/client/core-buddy/nutrition",element:a.jsx(nd,{feature:"nutrition",children:a.jsx(QM,{})})}),a.jsx(Kn,{path:"/client/core-buddy/workouts",element:a.jsx(K6,{})}),a.jsx(Kn,{path:"/client/core-buddy/consistency",element:a.jsx(nd,{feature:"consistency",children:a.jsx(n3,{})})}),a.jsx(Kn,{path:"/client/core-buddy/buddies",element:a.jsx(nd,{feature:"buddies",children:a.jsx(s3,{})})}),a.jsx(Kn,{path:"/client/core-buddy/builder",element:a.jsx(l3,{})}),a.jsx(Kn,{path:"/client/core-buddy/profile/:userId",element:a.jsx(a3,{})}),a.jsx(Kn,{path:"/client/leaderboard",element:a.jsx(nd,{feature:"leaderboard",children:a.jsx(b3,{})})}),a.jsx(Kn,{path:"/signup",element:a.jsx(w3,{})}),a.jsx(Kn,{path:"/onboarding",element:a.jsx(x3,{})}),a.jsx(Kn,{path:"/upgrade",element:a.jsx(_3,{})}),a.jsx(Kn,{path:"*",element:a.jsx(M_,{to:"/",replace:!0})})]})})})]})})})})}yk.createRoot(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsx(k3,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").then(s=>{setInterval(()=>s.update(),3600*1e3)}).catch(s=>console.warn("SW registration failed:",s))});export{xr as A,ua as C,$o as P,Ut as T,ci as a,Ir as b,Mt as c,ke as d,Ye as e,DN as f,Dn as g,VN as h,ks as i,a as j,Ms as k,Li as l,Wo as m,Lr as n,fu as o,AE as p,On as q,w as r,N3 as s,Du as t,Jr as u,BM as v,bn as w,UM as x,C3 as y,S3 as z};
