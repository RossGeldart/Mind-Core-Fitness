const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-3vcdqUlm.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-Ds774UBN.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-DO5Yhap-.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-D_RaM70n.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-BR63_s2D.js","assets/ProteinSnacks-SvNhZrhj.js","assets/DailyMotivation-CNBIUwY7.js","assets/CircuitDashboard-D-1xLqMc.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-8gx37XBE.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-CHEO8l-4.js","assets/Leaderboard-lyZEtGxw.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var np={exports:{}},Mc={};var X0;function QT(){if(X0)return Mc;X0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:d,ref:l!==void 0?l:null,props:u}}return Mc.Fragment=e,Mc.jsx=n,Mc.jsxs=n,Mc}var J0;function XT(){return J0||(J0=1,np.exports=QT()),np.exports}var a=XT(),sp={exports:{}},Pt={};var Z0;function JT(){if(Z0)return Pt;Z0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.iterator;function L(N){return N===null||typeof N!="object"?null:(N=j&&N[j]||N["@@iterator"],typeof N=="function"?N:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,O={};function ee(N,V,ie){this.props=N,this.context=V,this.refs=O,this.updater=ie||H}ee.prototype.isReactComponent={},ee.prototype.setState=function(N,V){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,V,"setState")},ee.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Q(){}Q.prototype=ee.prototype;function oe(N,V,ie){this.props=N,this.context=V,this.refs=O,this.updater=ie||H}var be=oe.prototype=new Q;be.constructor=oe,B(be,ee.prototype),be.isPureReactComponent=!0;var Ve=Array.isArray;function Ae(){}var I={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function A(N,V,ie){var pe=ie.ref;return{$$typeof:s,type:N,key:V,ref:pe!==void 0?pe:null,props:ie}}function P(N,V){return A(N.type,V,N.props)}function D(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function z(N){var V={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ie){return V[ie]})}var M=/\/+/g;function ke(N,V){return typeof N=="object"&&N!==null&&N.key!=null?z(""+N.key):V.toString(36)}function ht(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(Ae,Ae):(N.status="pending",N.then(function(V){N.status==="pending"&&(N.status="fulfilled",N.value=V)},function(V){N.status==="pending"&&(N.status="rejected",N.reason=V)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function K(N,V,ie,pe,Se){var Me=typeof N;(Me==="undefined"||Me==="boolean")&&(N=null);var Qe=!1;if(N===null)Qe=!0;else switch(Me){case"bigint":case"string":case"number":Qe=!0;break;case"object":switch(N.$$typeof){case s:case e:Qe=!0;break;case x:return Qe=N._init,K(Qe(N._payload),V,ie,pe,Se)}}if(Qe)return Se=Se(N),Qe=pe===""?"."+ke(N,0):pe,Ve(Se)?(ie="",Qe!=null&&(ie=Qe.replace(M,"$&/")+"/"),K(Se,V,ie,"",function(bt){return bt})):Se!=null&&(D(Se)&&(Se=P(Se,ie+(Se.key==null||N&&N.key===Se.key?"":(""+Se.key).replace(M,"$&/")+"/")+Qe)),V.push(Se)),1;Qe=0;var Fe=pe===""?".":pe+":";if(Ve(N))for(var Ge=0;Ge<N.length;Ge++)pe=N[Ge],Me=Fe+ke(pe,Ge),Qe+=K(pe,V,ie,Me,Se);else if(Ge=L(N),typeof Ge=="function")for(N=Ge.call(N),Ge=0;!(pe=N.next()).done;)pe=pe.value,Me=Fe+ke(pe,Ge++),Qe+=K(pe,V,ie,Me,Se);else if(Me==="object"){if(typeof N.then=="function")return K(ht(N),V,ie,pe,Se);throw V=String(N),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Qe}function we(N,V,ie){if(N==null)return N;var pe=[],Se=0;return K(N,pe,"","",function(Me){return V.call(ie,Me,Se++)}),pe}function Le(N){if(N._status===-1){var V=N._result;V=V(),V.then(function(ie){(N._status===0||N._status===-1)&&(N._status=1,N._result=ie)},function(ie){(N._status===0||N._status===-1)&&(N._status=2,N._result=ie)}),N._status===-1&&(N._status=0,N._result=V)}if(N._status===1)return N._result.default;throw N._result}var re=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},De={map:we,forEach:function(N,V,ie){we(N,function(){V.apply(this,arguments)},ie)},count:function(N){var V=0;return we(N,function(){V++}),V},toArray:function(N){return we(N,function(V){return V})||[]},only:function(N){if(!D(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Pt.Activity=k,Pt.Children=De,Pt.Component=ee,Pt.Fragment=n,Pt.Profiler=l,Pt.PureComponent=oe,Pt.StrictMode=i,Pt.Suspense=g,Pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Pt.__COMPILER_RUNTIME={__proto__:null,c:function(N){return I.H.useMemoCache(N)}},Pt.cache=function(N){return function(){return N.apply(null,arguments)}},Pt.cacheSignal=function(){return null},Pt.cloneElement=function(N,V,ie){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var pe=B({},N.props),Se=N.key;if(V!=null)for(Me in V.key!==void 0&&(Se=""+V.key),V)!E.call(V,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&V.ref===void 0||(pe[Me]=V[Me]);var Me=arguments.length-2;if(Me===1)pe.children=ie;else if(1<Me){for(var Qe=Array(Me),Fe=0;Fe<Me;Fe++)Qe[Fe]=arguments[Fe+2];pe.children=Qe}return A(N.type,Se,pe)},Pt.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Pt.createElement=function(N,V,ie){var pe,Se={},Me=null;if(V!=null)for(pe in V.key!==void 0&&(Me=""+V.key),V)E.call(V,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Se[pe]=V[pe]);var Qe=arguments.length-2;if(Qe===1)Se.children=ie;else if(1<Qe){for(var Fe=Array(Qe),Ge=0;Ge<Qe;Ge++)Fe[Ge]=arguments[Ge+2];Se.children=Fe}if(N&&N.defaultProps)for(pe in Qe=N.defaultProps,Qe)Se[pe]===void 0&&(Se[pe]=Qe[pe]);return A(N,Me,Se)},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(N){return{$$typeof:p,render:N}},Pt.isValidElement=D,Pt.lazy=function(N){return{$$typeof:x,_payload:{_status:-1,_result:N},_init:Le}},Pt.memo=function(N,V){return{$$typeof:y,type:N,compare:V===void 0?null:V}},Pt.startTransition=function(N){var V=I.T,ie={};I.T=ie;try{var pe=N(),Se=I.S;Se!==null&&Se(ie,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(Ae,re)}catch(Me){re(Me)}finally{V!==null&&ie.types!==null&&(V.types=ie.types),I.T=V}},Pt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Pt.use=function(N){return I.H.use(N)},Pt.useActionState=function(N,V,ie){return I.H.useActionState(N,V,ie)},Pt.useCallback=function(N,V){return I.H.useCallback(N,V)},Pt.useContext=function(N){return I.H.useContext(N)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(N,V){return I.H.useDeferredValue(N,V)},Pt.useEffect=function(N,V){return I.H.useEffect(N,V)},Pt.useEffectEvent=function(N){return I.H.useEffectEvent(N)},Pt.useId=function(){return I.H.useId()},Pt.useImperativeHandle=function(N,V,ie){return I.H.useImperativeHandle(N,V,ie)},Pt.useInsertionEffect=function(N,V){return I.H.useInsertionEffect(N,V)},Pt.useLayoutEffect=function(N,V){return I.H.useLayoutEffect(N,V)},Pt.useMemo=function(N,V){return I.H.useMemo(N,V)},Pt.useOptimistic=function(N,V){return I.H.useOptimistic(N,V)},Pt.useReducer=function(N,V,ie){return I.H.useReducer(N,V,ie)},Pt.useRef=function(N){return I.H.useRef(N)},Pt.useState=function(N){return I.H.useState(N)},Pt.useSyncExternalStore=function(N,V,ie){return I.H.useSyncExternalStore(N,V,ie)},Pt.useTransition=function(){return I.H.useTransition()},Pt.version="19.2.4",Pt}var e1;function mg(){return e1||(e1=1,sp.exports=JT()),sp.exports}var _=mg(),rp={exports:{}},Dc={},ap={exports:{}},ip={};var t1;function ZT(){return t1||(t1=1,(function(s){function e(K,we){var Le=K.length;K.push(we);e:for(;0<Le;){var re=Le-1>>>1,De=K[re];if(0<l(De,we))K[re]=we,K[Le]=De,Le=re;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var we=K[0],Le=K.pop();if(Le!==we){K[0]=Le;e:for(var re=0,De=K.length,N=De>>>1;re<N;){var V=2*(re+1)-1,ie=K[V],pe=V+1,Se=K[pe];if(0>l(ie,Le))pe<De&&0>l(Se,ie)?(K[re]=Se,K[pe]=Le,re=pe):(K[re]=ie,K[V]=Le,re=V);else if(pe<De&&0>l(Se,Le))K[re]=Se,K[pe]=Le,re=pe;else break e}}return we}function l(K,we){var Le=K.sortIndex-we.sortIndex;return Le!==0?Le:K.id-we.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],x=1,k=null,j=3,L=!1,H=!1,B=!1,O=!1,ee=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function be(K){for(var we=n(y);we!==null;){if(we.callback===null)i(y);else if(we.startTime<=K)i(y),we.sortIndex=we.expirationTime,e(g,we);else break;we=n(y)}}function Ve(K){if(B=!1,be(K),!H)if(n(g)!==null)H=!0,Ae||(Ae=!0,z());else{var we=n(y);we!==null&&ht(Ve,we.startTime-K)}}var Ae=!1,I=-1,E=5,A=-1;function P(){return O?!0:!(s.unstable_now()-A<E)}function D(){if(O=!1,Ae){var K=s.unstable_now();A=K;var we=!0;try{e:{H=!1,B&&(B=!1,Q(I),I=-1),L=!0;var Le=j;try{t:{for(be(K),k=n(g);k!==null&&!(k.expirationTime>K&&P());){var re=k.callback;if(typeof re=="function"){k.callback=null,j=k.priorityLevel;var De=re(k.expirationTime<=K);if(K=s.unstable_now(),typeof De=="function"){k.callback=De,be(K),we=!0;break t}k===n(g)&&i(g),be(K)}else i(g);k=n(g)}if(k!==null)we=!0;else{var N=n(y);N!==null&&ht(Ve,N.startTime-K),we=!1}}break e}finally{k=null,j=Le,L=!1}we=void 0}}finally{we?z():Ae=!1}}}var z;if(typeof oe=="function")z=function(){oe(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ke=M.port2;M.port1.onmessage=D,z=function(){ke.postMessage(null)}}else z=function(){ee(D,0)};function ht(K,we){I=ee(function(){K(s.unstable_now())},we)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return j},s.unstable_next=function(K){switch(j){case 1:case 2:case 3:var we=3;break;default:we=j}var Le=j;j=we;try{return K()}finally{j=Le}},s.unstable_requestPaint=function(){O=!0},s.unstable_runWithPriority=function(K,we){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Le=j;j=K;try{return we()}finally{j=Le}},s.unstable_scheduleCallback=function(K,we,Le){var re=s.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?re+Le:re):Le=re,K){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=Le+De,K={id:x++,callback:we,priorityLevel:K,startTime:Le,expirationTime:De,sortIndex:-1},Le>re?(K.sortIndex=Le,e(y,K),n(g)===null&&K===n(y)&&(B?(Q(I),I=-1):B=!0,ht(Ve,Le-re))):(K.sortIndex=De,e(g,K),H||L||(H=!0,Ae||(Ae=!0,z()))),K},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(K){var we=j;return function(){var Le=j;j=we;try{return K.apply(this,arguments)}finally{j=Le}}}})(ip)),ip}var n1;function eE(){return n1||(n1=1,ap.exports=ZT()),ap.exports}var op={exports:{}},Rs={};var s1;function tE(){if(s1)return Rs;s1=1;var s=mg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,x){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:k==null?null:""+k,children:g,containerInfo:y,implementation:x}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Rs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Rs.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,x)},Rs.flushSync=function(g){var y=d.T,x=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=y,i.p=x,i.d.f()}},Rs.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Rs.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Rs.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,k=p(x,y.crossOrigin),j=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:k,integrity:j,fetchPriority:L}):x==="script"&&i.d.X(g,{crossOrigin:k,integrity:j,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Rs.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Rs.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,k=p(x,y.crossOrigin);i.d.L(g,x,{crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Rs.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Rs.requestFormReset=function(g){i.d.r(g)},Rs.unstable_batchedUpdates=function(g,y){return g(y)},Rs.useFormState=function(g,y,x){return d.H.useFormState(g,y,x)},Rs.useFormStatus=function(){return d.H.useHostTransitionStatus()},Rs.version="19.2.4",Rs}var r1;function nE(){if(r1)return op.exports;r1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),op.exports=tE(),op.exports}var a1;function sE(){if(a1)return Dc;a1=1;var s=eE(),e=mg(),n=nE();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var o=t,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var b=!1,S=f.child;S;){if(S===o){b=!0,o=f,c=m;break}if(S===c){b=!0,c=f,o=m;break}S=S.sibling}if(!b){for(S=m.child;S;){if(S===o){b=!0,o=m,c=f;break}if(S===c){b=!0,c=m,o=f;break}S=S.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?t:r}function x(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=x(t),r!==null)return r;t=t.sibling}return null}var k=Object.assign,j=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),Ve=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var M=Symbol.for("react.client.reference");function ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===M?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case ee:return"Profiler";case O:return"StrictMode";case Ve:return"Suspense";case Ae:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case H:return"Portal";case oe:return t.displayName||"Context";case Q:return(t._context.displayName||"Context")+".Consumer";case be:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return r=t.displayName||null,r!==null?r:ke(t.type)||"Memo";case E:r=t._payload,t=t._init;try{return ke(t(r))}catch{}}return null}var ht=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le={pending:!1,data:null,method:null,action:null},re=[],De=-1;function N(t){return{current:t}}function V(t){0>De||(t.current=re[De],re[De]=null,De--)}function ie(t,r){De++,re[De]=t.current,t.current=r}var pe=N(null),Se=N(null),Me=N(null),Qe=N(null);function Fe(t,r){switch(ie(Me,r),ie(Se,t),ie(pe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?x0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=x0(r),t=w0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}V(pe),ie(pe,t)}function Ge(){V(pe),V(Se),V(Me)}function bt(t){t.memoizedState!==null&&ie(Qe,t);var r=pe.current,o=w0(r,t.type);r!==o&&(ie(Se,t),ie(pe,o))}function nn(t){Se.current===t&&(V(pe),V(Se)),Qe.current===t&&(V(Qe),Cc._currentValue=Le)}var wt,vt;function ne(t){if(wt===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);wt=r&&r[1]||"",vt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+t+vt}var ln=!1;function Vt(t,r){if(!t||ln)return"";ln=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(ue){var se=ue}Reflect.construct(t,[],je)}else{try{je.call()}catch(ue){se=ue}t.call(je.prototype)}}else{try{throw Error()}catch(ue){se=ue}(je=t())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(ue){if(ue&&se&&typeof ue.stack=="string")return[ue.stack,se.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],S=m[1];if(b&&S){var U=b.split(`
`),te=S.split(`
`);for(f=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;f<te.length&&!te[f].includes("DetermineComponentFrameRoot");)f++;if(c===U.length||f===te.length)for(c=U.length-1,f=te.length-1;1<=c&&0<=f&&U[c]!==te[f];)f--;for(;1<=c&&0<=f;c--,f--)if(U[c]!==te[f]){if(c!==1||f!==1)do if(c--,f--,0>f||U[c]!==te[f]){var ye=`
`+U[c].replace(" at new "," at ");return t.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",t.displayName)),ye}while(1<=c&&0<=f);break}}}finally{ln=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?ne(o):""}function _t(t,r){switch(t.tag){case 26:case 27:case 5:return ne(t.type);case 16:return ne("Lazy");case 13:return t.child!==r&&r!==null?ne("Suspense Fallback"):ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return Vt(t.type,!1);case 11:return Vt(t.type.render,!1);case 1:return Vt(t.type,!0);case 31:return ne("Activity");default:return""}}function At(t){try{var r="",o=null;do r+=_t(t,o),o=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ct=Object.prototype.hasOwnProperty,Xe=s.unstable_scheduleCallback,Gt=s.unstable_cancelCallback,is=s.unstable_shouldYield,It=s.unstable_requestPaint,zt=s.unstable_now,Bn=s.unstable_getCurrentPriorityLevel,Ht=s.unstable_ImmediatePriority,wn=s.unstable_UserBlockingPriority,me=s.unstable_NormalPriority,Te=s.unstable_LowPriority,Re=s.unstable_IdlePriority,st=s.log,Je=s.unstable_setDisableYieldValue,qe=null,et=null;function Ke(t){if(typeof st=="function"&&Je(t),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(qe,t)}catch{}}var Ue=Math.clz32?Math.clz32:lt,xe=Math.log,ze=Math.LN2;function lt(t){return t>>>=0,t===0?32:31-(xe(t)/ze|0)|0}var Et=256,$t=262144,Ye=4194304;function jt(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ct(t,r,o){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=jt(c):(b&=S,b!==0?f=jt(b):o||(o=S&~t,o!==0&&(f=jt(o))))):(S=c&~m,S!==0?f=jt(S):b!==0?f=jt(b):o||(o=c&~t,o!==0&&(f=jt(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function Dt(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function Ft(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tt(){var t=Ye;return Ye<<=1,(Ye&62914560)===0&&(Ye=4194304),t}function sn(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Wt(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function rn(t,r,o,c,f,m){var b=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var S=t.entanglements,U=t.expirationTimes,te=t.hiddenUpdates;for(o=b&~o;0<o;){var ye=31-Ue(o),je=1<<ye;S[ye]=0,U[ye]=-1;var se=te[ye];if(se!==null)for(te[ye]=null,ye=0;ye<se.length;ye++){var ue=se[ye];ue!==null&&(ue.lane&=-536870913)}o&=~je}c!==0&&un(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~r))}function un(t,r,o){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-Ue(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|o&261930}function fn(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-Ue(o),f=1<<c;f&r|t[c]&r&&(t[c]|=r),o&=~f}}function Rn(t,r){var o=r&-r;return o=(o&42)!==0?1:q(o),(o&(t.suspendedLanes|r))!==0?0:o}function q(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function fe(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ge(){var t=we.p;return t!==0?t:(t=window.event,t===void 0?32:H0(t.type))}function ve(t,r){var o=we.p;try{return we.p=t,r()}finally{we.p=o}}var de=Math.random().toString(36).slice(2),We="__reactFiber$"+de,mt="__reactProps$"+de,tt="__reactContainer$"+de,dt="__reactEvents$"+de,pt="__reactListeners$"+de,an="__reactHandles$"+de,Ns="__reactResources$"+de,Wn="__reactMarker$"+de;function Qn(t){delete t[We],delete t[mt],delete t[dt],delete t[pt],delete t[an]}function mn(t){var r=t[We];if(r)return r;for(var o=t.parentNode;o;){if(r=o[tt]||o[We]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=N0(t);t!==null;){if(o=t[We])return o;t=N0(t)}return r}t=o,o=t.parentNode}return null}function F(t){if(t=t[We]||t[tt]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function ce(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function T(t){var r=t[Ns];return r||(r=t[Ns]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function R(t){t[Wn]=!0}var G=new Set,J={};function He(t,r){Be(t,r),Be(t+"Capture",r)}function Be(t,r){for(J[t]=r,t=0;t<r.length;t++)G.add(r[t])}var Oe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ot={},xt={};function W(t){return ct.call(xt,t)?!0:ct.call(Ot,t)?!1:Oe.test(t)?xt[t]=!0:(Ot[t]=!0,!1)}function he(t,r,o){if(W(r))if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+o)}}function ae(t,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+o)}}function Ce(t,r,o,c){if(c===null)t.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(r,o,""+c)}}function Pe(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function at(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Rt(t,r,o){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){o=""+b,m.call(this,b)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function it(t){if(!t._valueTracker){var r=at(t)?"checked":"value";t._valueTracker=Rt(t,r,""+t[r])}}function Qt(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=at(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function Un(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var pn=/[\n"\\]/g;function Pn(t){return t.replace(pn,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Fa(t,r,o,c,f,m,b,S){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Pe(r)):t.value!==""+Pe(r)&&(t.value=""+Pe(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?qa(t,b,Pe(r)):o!=null?qa(t,b,Pe(o)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Pe(S):t.removeAttribute("name")}function qi(t,r,o,c,f,m,b,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){it(t);return}o=o!=null?""+Pe(o):"",r=r!=null?""+Pe(r):o,S||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=S?t.checked:!!c,t.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),it(t)}function qa(t,r,o){r==="number"&&Un(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function wr(t,r,o,c){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+Pe(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function hn(t,r,o){if(r!=null&&(r=""+Pe(r),r!==t.value&&(t.value=r),o==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=o!=null?""+Pe(o):""}function Gn(t,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(ht(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Pe(r),t.defaultValue=o,c=t.textContent,c===o&&c!==""&&c!==null&&(t.value=c),it(t)}function Kn(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var _r=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kr(t,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,o):typeof o!="number"||o===0||_r.has(r)?r==="float"?t.cssFloat=o:t[r]=(""+o).trim():t[r]=o+"px"}function vs(t,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&kr(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&kr(t,m,r[m])}function Cs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ha(t){return Tr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ps(){}var $l=null;function ar(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $a=null,$r=null;function Hi(t){var r=F(t);if(r&&(t=r.stateNode)){var o=t[mt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Fa(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var f=c[mt]||null;if(!f)throw Error(i(90));Fa(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===t.form&&Qt(c)}break e;case"textarea":hn(t,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&wr(t,!!o.multiple,r,!1)}}}var Mo=!1;function Wa(t,r,o){if(Mo)return t(r,o);Mo=!0;try{var c=t(r);return c}finally{if(Mo=!1,($a!==null||$r!==null)&&(_h(),$a&&(r=$a,t=$r,$r=$a=null,Hi(r),t)))for(r=0;r<t.length;r++)Hi(t[r])}}function Er(t,r){var o=t.stateNode;if(o===null)return null;var c=o[mt]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$i=!1;if(ir)try{var En={};Object.defineProperty(En,"passive",{get:function(){$i=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{$i=!1}var Wr=null,Wl=null,Wi=null;function Gl(){if(Wi)return Wi;var t,r=Wl,o=r.length,c,f="value"in Wr?Wr.value:Wr.textContent,m=f.length;for(t=0;t<o&&r[t]===f[t];t++);var b=o-t;for(c=1;c<=b&&r[o-c]===f[m-c];c++);return Wi=f.slice(t,1<c?1-c:void 0)}function Gi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function da(){return!0}function jr(){return!1}function bs(t){function r(o,c,f,m,b){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(o=t[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?da:jr,this.isPropagationStopped=jr,this}return k(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=da)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=da)},persist:function(){},isPersistent:da}),r}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gr=bs(fa),Ga=k({},fa,{view:0,detail:0}),Kl=bs(Ga),Ka,Do,Kr,Po=k({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kr&&(Kr&&t.type==="mousemove"?(Ka=t.screenX-Kr.screenX,Do=t.screenY-Kr.screenY):Do=Ka=0,Kr=t),Ka)},movementY:function(t){return"movementY"in t?t.movementY:Do}}),Yl=bs(Po),Ki=k({},Po,{dataTransfer:0}),Ru=bs(Ki),Au=k({},Ga,{relatedTarget:0}),Yi=bs(Au),Ql=k({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),Iu=bs(Ql),Lo=k({},fa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mu=bs(Lo),Du=k({},fa,{data:0}),Yr=bs(Du),Pu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ou[t])?!!r[t]:!1}function Ya(){return Vu}var Ls=k({},Ga,{key:function(t){if(t.key){var r=Pu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Gi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(t){return t.type==="keypress"?Gi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bu=bs(Ls),Uu=k({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ma=bs(Uu),h=k({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),v=bs(h),w=k({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=bs(w),X=k({},Po,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),le=bs(X),$e=k({},fa,{newState:0,oldState:0}),Bt=bs($e),ts=[9,13,27,32],vn=ir&&"CompositionEvent"in window,zn=null;ir&&"documentMode"in document&&(zn=document.documentMode);var or=ir&&"TextEvent"in window&&!zn,Qr=ir&&(!vn||zn&&8<zn&&11>=zn),Sr=" ",Nr=!1;function Qi(t,r){switch(t){case"keyup":return ts.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vo=!1;function xk(t,r){switch(t){case"compositionend":return Oo(r);case"keypress":return r.which!==32?null:(Nr=!0,Sr);case"textInput":return t=r.data,t===Sr&&Nr?null:t;default:return null}}function wk(t,r){if(Vo)return t==="compositionend"||!vn&&Qi(t,r)?(t=Gl(),Wi=Wl=Wr=null,Vo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Qr&&r.locale!=="ko"?null:r.data;default:return null}}var _k={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ay(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!_k[t.type]:r==="textarea"}function Iy(t,r,o,c){$a?$r?$r.push(c):$r=[c]:$a=c,r=Ch(r,"onChange"),0<r.length&&(o=new Gr("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var Xl=null,Jl=null;function kk(t){m0(t,0)}function zu(t){var r=ce(t);if(Qt(r))return t}function My(t,r){if(t==="change")return r}var Dy=!1;if(ir){var cf;if(ir){var uf="oninput"in document;if(!uf){var Py=document.createElement("div");Py.setAttribute("oninput","return;"),uf=typeof Py.oninput=="function"}cf=uf}else cf=!1;Dy=cf&&(!document.documentMode||9<document.documentMode)}function Ly(){Xl&&(Xl.detachEvent("onpropertychange",Oy),Jl=Xl=null)}function Oy(t){if(t.propertyName==="value"&&zu(Jl)){var r=[];Iy(r,Jl,t,ar(t)),Wa(kk,r)}}function Tk(t,r,o){t==="focusin"?(Ly(),Xl=r,Jl=o,Xl.attachEvent("onpropertychange",Oy)):t==="focusout"&&Ly()}function Ek(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zu(Jl)}function jk(t,r){if(t==="click")return zu(r)}function Sk(t,r){if(t==="input"||t==="change")return zu(r)}function Nk(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Ks=typeof Object.is=="function"?Object.is:Nk;function Zl(t,r){if(Ks(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!ct.call(r,f)||!Ks(t[f],r[f]))return!1}return!0}function Vy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function By(t,r){var o=Vy(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Vy(o)}}function Uy(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Uy(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function zy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Un(t.document);r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Un(t.document)}return r}function hf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Ck=ir&&"documentMode"in document&&11>=document.documentMode,Bo=null,df=null,ec=null,ff=!1;function Fy(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ff||Bo==null||Bo!==Un(c)||(c=Bo,"selectionStart"in c&&hf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ec&&Zl(ec,c)||(ec=c,c=Ch(df,"onSelect"),0<c.length&&(r=new Gr("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=Bo)))}function Xi(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Uo={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},mf={},qy={};ir&&(qy=document.createElement("div").style,"AnimationEvent"in window||(delete Uo.animationend.animation,delete Uo.animationiteration.animation,delete Uo.animationstart.animation),"TransitionEvent"in window||delete Uo.transitionend.transition);function Ji(t){if(mf[t])return mf[t];if(!Uo[t])return t;var r=Uo[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in qy)return mf[t]=r[o];return t}var Hy=Ji("animationend"),$y=Ji("animationiteration"),Wy=Ji("animationstart"),Rk=Ji("transitionrun"),Ak=Ji("transitionstart"),Ik=Ji("transitioncancel"),Gy=Ji("transitionend"),Ky=new Map,pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pf.push("scrollEnd");function Cr(t,r){Ky.set(t,r),He(r,[t])}var Fu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},lr=[],zo=0,gf=0;function qu(){for(var t=zo,r=gf=zo=0;r<t;){var o=lr[r];lr[r++]=null;var c=lr[r];lr[r++]=null;var f=lr[r];lr[r++]=null;var m=lr[r];if(lr[r++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}m!==0&&Yy(o,f,m)}}function Hu(t,r,o,c){lr[zo++]=t,lr[zo++]=r,lr[zo++]=o,lr[zo++]=c,gf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function yf(t,r,o,c){return Hu(t,r,o,c),$u(t)}function Zi(t,r){return Hu(t,null,null,r),$u(t)}function Yy(t,r,o){t.lanes|=o;var c=t.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=t.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-Ue(o),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function $u(t){if(50<_c)throw _c=0,jm=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Fo={};function Mk(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(t,r,o,c){return new Mk(t,r,o,c)}function vf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pa(t,r){var o=t.alternate;return o===null?(o=Ys(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function Qy(t,r){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,r=o.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Wu(t,r,o,c,f,m){var b=0;if(c=t,typeof t=="function")vf(t)&&(b=1);else if(typeof t=="string")b=VT(t,o,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Ys(31,o,r,f),t.elementType=A,t.lanes=m,t;case B:return eo(o.children,f,m,r);case O:b=8,f|=24;break;case ee:return t=Ys(12,o,r,f|2),t.elementType=ee,t.lanes=m,t;case Ve:return t=Ys(13,o,r,f),t.elementType=Ve,t.lanes=m,t;case Ae:return t=Ys(19,o,r,f),t.elementType=Ae,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oe:b=10;break e;case Q:b=9;break e;case be:b=11;break e;case I:b=14;break e;case E:b=16,c=null;break e}b=29,o=Error(i(130,t===null?"null":typeof t,"")),c=null}return r=Ys(b,o,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function eo(t,r,o,c){return t=Ys(7,t,c,r),t.lanes=o,t}function bf(t,r,o){return t=Ys(6,t,null,r),t.lanes=o,t}function Xy(t){var r=Ys(18,null,null,0);return r.stateNode=t,r}function xf(t,r,o){return r=Ys(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Jy=new WeakMap;function cr(t,r){if(typeof t=="object"&&t!==null){var o=Jy.get(t);return o!==void 0?o:(r={value:t,source:r,stack:At(r)},Jy.set(t,r),r)}return{value:t,source:r,stack:At(r)}}var qo=[],Ho=0,Gu=null,tc=0,ur=[],hr=0,Qa=null,Xr=1,Jr="";function ga(t,r){qo[Ho++]=tc,qo[Ho++]=Gu,Gu=t,tc=r}function Zy(t,r,o){ur[hr++]=Xr,ur[hr++]=Jr,ur[hr++]=Qa,Qa=t;var c=Xr;t=Jr;var f=32-Ue(c)-1;c&=~(1<<f),o+=1;var m=32-Ue(r)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,Xr=1<<32-Ue(r)+f|o<<f|c,Jr=m+t}else Xr=1<<m|o<<f|c,Jr=t}function wf(t){t.return!==null&&(ga(t,1),Zy(t,1,0))}function _f(t){for(;t===Gu;)Gu=qo[--Ho],qo[Ho]=null,tc=qo[--Ho],qo[Ho]=null;for(;t===Qa;)Qa=ur[--hr],ur[hr]=null,Jr=ur[--hr],ur[hr]=null,Xr=ur[--hr],ur[hr]=null}function ev(t,r){ur[hr++]=Xr,ur[hr++]=Jr,ur[hr++]=Qa,Xr=r.id,Jr=r.overflow,Qa=t}var xs=null,Ln=null,on=!1,Xa=null,dr=!1,kf=Error(i(519));function Ja(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nc(cr(r,t)),kf}function tv(t){var r=t.stateNode,o=t.type,c=t.memoizedProps;switch(r[We]=t,r[mt]=c,o){case"dialog":Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":case"embed":Yt("load",r);break;case"video":case"audio":for(o=0;o<Tc.length;o++)Yt(Tc[o],r);break;case"source":Yt("error",r);break;case"img":case"image":case"link":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"input":Yt("invalid",r),qi(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Yt("invalid",r);break;case"textarea":Yt("invalid",r),Gn(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||v0(r.textContent,o)?(c.popover!=null&&(Yt("beforetoggle",r),Yt("toggle",r)),c.onScroll!=null&&Yt("scroll",r),c.onScrollEnd!=null&&Yt("scrollend",r),c.onClick!=null&&(r.onclick=Ps),r=!0):r=!1,r||Ja(t,!0)}function nv(t){for(xs=t.return;xs;)switch(xs.tag){case 5:case 31:case 13:dr=!1;return;case 27:case 3:dr=!0;return;default:xs=xs.return}}function $o(t){if(t!==xs)return!1;if(!on)return nv(t),on=!0,!1;var r=t.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||zm(t.type,t.memoizedProps)),o=!o),o&&Ln&&Ja(t),nv(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ln=S0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ln=S0(t)}else r===27?(r=Ln,di(t.type)?(t=Wm,Wm=null,Ln=t):Ln=r):Ln=xs?mr(t.stateNode.nextSibling):null;return!0}function to(){Ln=xs=null,on=!1}function Tf(){var t=Xa;return t!==null&&(qs===null?qs=t:qs.push.apply(qs,t),Xa=null),t}function nc(t){Xa===null?Xa=[t]:Xa.push(t)}var Ef=N(null),no=null,ya=null;function Za(t,r,o){ie(Ef,r._currentValue),r._currentValue=o}function va(t){t._currentValue=Ef.current,V(Ef)}function jf(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Sf(t,r,o,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var U=0;U<r.length;U++)if(S.context===r[U]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),jf(m.return,o,t),c||(b=null);break e}m=S.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),jf(b,o,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Wo(t,r,o,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var S=f.type;Ks(f.pendingProps.value,b.value)||(t!==null?t.push(S):t=[S])}}else if(f===Qe.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Cc):t=[Cc])}f=f.return}t!==null&&Sf(r,t,o,c),r.flags|=262144}function Ku(t){for(t=t.firstContext;t!==null;){if(!Ks(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function so(t){no=t,ya=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ws(t){return sv(no,t)}function Yu(t,r){return no===null&&so(t),sv(t,r)}function sv(t,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ya===null){if(t===null)throw Error(i(308));ya=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ya=ya.next=r;return o}var Dk=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(o,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(o){return o()})}},Pk=s.unstable_scheduleCallback,Lk=s.unstable_NormalPriority,os={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nf(){return{controller:new Dk,data:new Map,refCount:0}}function sc(t){t.refCount--,t.refCount===0&&Pk(Lk,function(){t.controller.abort()})}var rc=null,Cf=0,Go=0,Ko=null;function Ok(t,r){if(rc===null){var o=rc=[];Cf=0,Go=Im(),Ko={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Cf++,r.then(rv,rv),r}function rv(){if(--Cf===0&&rc!==null){Ko!==null&&(Ko.status="fulfilled");var t=rc;rc=null,Go=0,Ko=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Vk(t,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var av=K.S;K.S=function(t,r){Fb=zt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ok(t,r),av!==null&&av(t,r)};var ro=N(null);function Rf(){var t=ro.current;return t!==null?t:An.pooledCache}function Qu(t,r){r===null?ie(ro,ro.current):ie(ro,r.pool)}function iv(){var t=Rf();return t===null?null:{parent:os._currentValue,pool:t}}var Yo=Error(i(460)),Af=Error(i(474)),Xu=Error(i(542)),Ju={then:function(){}};function ov(t){return t=t.status,t==="fulfilled"||t==="rejected"}function lv(t,r,o){switch(o=t[o],o===void 0?t.push(r):o!==r&&(r.then(Ps,Ps),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,uv(t),t;default:if(typeof r.status=="string")r.then(Ps,Ps);else{if(t=An,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,uv(t),t}throw io=r,Yo}}function ao(t){try{var r=t._init;return r(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(io=o,Yo):o}}var io=null;function cv(){if(io===null)throw Error(i(459));var t=io;return io=null,t}function uv(t){if(t===Yo||t===Xu)throw Error(i(483))}var Qo=null,ac=0;function Zu(t){var r=ac;return ac+=1,Qo===null&&(Qo=[]),lv(Qo,t,r)}function ic(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function eh(t,r){throw r.$$typeof===j?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function hv(t){function r(Y,$){if(t){var Z=Y.deletions;Z===null?(Y.deletions=[$],Y.flags|=16):Z.push($)}}function o(Y,$){if(!t)return null;for(;$!==null;)r(Y,$),$=$.sibling;return null}function c(Y){for(var $=new Map;Y!==null;)Y.key!==null?$.set(Y.key,Y):$.set(Y.index,Y),Y=Y.sibling;return $}function f(Y,$){return Y=pa(Y,$),Y.index=0,Y.sibling=null,Y}function m(Y,$,Z){return Y.index=Z,t?(Z=Y.alternate,Z!==null?(Z=Z.index,Z<$?(Y.flags|=67108866,$):Z):(Y.flags|=67108866,$)):(Y.flags|=1048576,$)}function b(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function S(Y,$,Z,_e){return $===null||$.tag!==6?($=bf(Z,Y.mode,_e),$.return=Y,$):($=f($,Z),$.return=Y,$)}function U(Y,$,Z,_e){var gt=Z.type;return gt===B?ye(Y,$,Z.props.children,_e,Z.key):$!==null&&($.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===E&&ao(gt)===$.type)?($=f($,Z.props),ic($,Z),$.return=Y,$):($=Wu(Z.type,Z.key,Z.props,null,Y.mode,_e),ic($,Z),$.return=Y,$)}function te(Y,$,Z,_e){return $===null||$.tag!==4||$.stateNode.containerInfo!==Z.containerInfo||$.stateNode.implementation!==Z.implementation?($=xf(Z,Y.mode,_e),$.return=Y,$):($=f($,Z.children||[]),$.return=Y,$)}function ye(Y,$,Z,_e,gt){return $===null||$.tag!==7?($=eo(Z,Y.mode,_e,gt),$.return=Y,$):($=f($,Z),$.return=Y,$)}function je(Y,$,Z){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=bf(""+$,Y.mode,Z),$.return=Y,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case L:return Z=Wu($.type,$.key,$.props,null,Y.mode,Z),ic(Z,$),Z.return=Y,Z;case H:return $=xf($,Y.mode,Z),$.return=Y,$;case E:return $=ao($),je(Y,$,Z)}if(ht($)||z($))return $=eo($,Y.mode,Z,null),$.return=Y,$;if(typeof $.then=="function")return je(Y,Zu($),Z);if($.$$typeof===oe)return je(Y,Yu(Y,$),Z);eh(Y,$)}return null}function se(Y,$,Z,_e){var gt=$!==null?$.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return gt!==null?null:S(Y,$,""+Z,_e);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case L:return Z.key===gt?U(Y,$,Z,_e):null;case H:return Z.key===gt?te(Y,$,Z,_e):null;case E:return Z=ao(Z),se(Y,$,Z,_e)}if(ht(Z)||z(Z))return gt!==null?null:ye(Y,$,Z,_e,null);if(typeof Z.then=="function")return se(Y,$,Zu(Z),_e);if(Z.$$typeof===oe)return se(Y,$,Yu(Y,Z),_e);eh(Y,Z)}return null}function ue(Y,$,Z,_e,gt){if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return Y=Y.get(Z)||null,S($,Y,""+_e,gt);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case L:return Y=Y.get(_e.key===null?Z:_e.key)||null,U($,Y,_e,gt);case H:return Y=Y.get(_e.key===null?Z:_e.key)||null,te($,Y,_e,gt);case E:return _e=ao(_e),ue(Y,$,Z,_e,gt)}if(ht(_e)||z(_e))return Y=Y.get(Z)||null,ye($,Y,_e,gt,null);if(typeof _e.then=="function")return ue(Y,$,Z,Zu(_e),gt);if(_e.$$typeof===oe)return ue(Y,$,Z,Yu($,_e),gt);eh($,_e)}return null}function ot(Y,$,Z,_e){for(var gt=null,gn=null,ut=$,qt=$=0,Jt=null;ut!==null&&qt<Z.length;qt++){ut.index>qt?(Jt=ut,ut=null):Jt=ut.sibling;var yn=se(Y,ut,Z[qt],_e);if(yn===null){ut===null&&(ut=Jt);break}t&&ut&&yn.alternate===null&&r(Y,ut),$=m(yn,$,qt),gn===null?gt=yn:gn.sibling=yn,gn=yn,ut=Jt}if(qt===Z.length)return o(Y,ut),on&&ga(Y,qt),gt;if(ut===null){for(;qt<Z.length;qt++)ut=je(Y,Z[qt],_e),ut!==null&&($=m(ut,$,qt),gn===null?gt=ut:gn.sibling=ut,gn=ut);return on&&ga(Y,qt),gt}for(ut=c(ut);qt<Z.length;qt++)Jt=ue(ut,Y,qt,Z[qt],_e),Jt!==null&&(t&&Jt.alternate!==null&&ut.delete(Jt.key===null?qt:Jt.key),$=m(Jt,$,qt),gn===null?gt=Jt:gn.sibling=Jt,gn=Jt);return t&&ut.forEach(function(yi){return r(Y,yi)}),on&&ga(Y,qt),gt}function kt(Y,$,Z,_e){if(Z==null)throw Error(i(151));for(var gt=null,gn=null,ut=$,qt=$=0,Jt=null,yn=Z.next();ut!==null&&!yn.done;qt++,yn=Z.next()){ut.index>qt?(Jt=ut,ut=null):Jt=ut.sibling;var yi=se(Y,ut,yn.value,_e);if(yi===null){ut===null&&(ut=Jt);break}t&&ut&&yi.alternate===null&&r(Y,ut),$=m(yi,$,qt),gn===null?gt=yi:gn.sibling=yi,gn=yi,ut=Jt}if(yn.done)return o(Y,ut),on&&ga(Y,qt),gt;if(ut===null){for(;!yn.done;qt++,yn=Z.next())yn=je(Y,yn.value,_e),yn!==null&&($=m(yn,$,qt),gn===null?gt=yn:gn.sibling=yn,gn=yn);return on&&ga(Y,qt),gt}for(ut=c(ut);!yn.done;qt++,yn=Z.next())yn=ue(ut,Y,qt,yn.value,_e),yn!==null&&(t&&yn.alternate!==null&&ut.delete(yn.key===null?qt:yn.key),$=m(yn,$,qt),gn===null?gt=yn:gn.sibling=yn,gn=yn);return t&&ut.forEach(function(YT){return r(Y,YT)}),on&&ga(Y,qt),gt}function Nn(Y,$,Z,_e){if(typeof Z=="object"&&Z!==null&&Z.type===B&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case L:e:{for(var gt=Z.key;$!==null;){if($.key===gt){if(gt=Z.type,gt===B){if($.tag===7){o(Y,$.sibling),_e=f($,Z.props.children),_e.return=Y,Y=_e;break e}}else if($.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===E&&ao(gt)===$.type){o(Y,$.sibling),_e=f($,Z.props),ic(_e,Z),_e.return=Y,Y=_e;break e}o(Y,$);break}else r(Y,$);$=$.sibling}Z.type===B?(_e=eo(Z.props.children,Y.mode,_e,Z.key),_e.return=Y,Y=_e):(_e=Wu(Z.type,Z.key,Z.props,null,Y.mode,_e),ic(_e,Z),_e.return=Y,Y=_e)}return b(Y);case H:e:{for(gt=Z.key;$!==null;){if($.key===gt)if($.tag===4&&$.stateNode.containerInfo===Z.containerInfo&&$.stateNode.implementation===Z.implementation){o(Y,$.sibling),_e=f($,Z.children||[]),_e.return=Y,Y=_e;break e}else{o(Y,$);break}else r(Y,$);$=$.sibling}_e=xf(Z,Y.mode,_e),_e.return=Y,Y=_e}return b(Y);case E:return Z=ao(Z),Nn(Y,$,Z,_e)}if(ht(Z))return ot(Y,$,Z,_e);if(z(Z)){if(gt=z(Z),typeof gt!="function")throw Error(i(150));return Z=gt.call(Z),kt(Y,$,Z,_e)}if(typeof Z.then=="function")return Nn(Y,$,Zu(Z),_e);if(Z.$$typeof===oe)return Nn(Y,$,Yu(Y,Z),_e);eh(Y,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,$!==null&&$.tag===6?(o(Y,$.sibling),_e=f($,Z),_e.return=Y,Y=_e):(o(Y,$),_e=bf(Z,Y.mode,_e),_e.return=Y,Y=_e),b(Y)):o(Y,$)}return function(Y,$,Z,_e){try{ac=0;var gt=Nn(Y,$,Z,_e);return Qo=null,gt}catch(ut){if(ut===Yo||ut===Xu)throw ut;var gn=Ys(29,ut,null,Y.mode);return gn.lanes=_e,gn.return=Y,gn}}}var oo=hv(!0),dv=hv(!1),ei=!1;function If(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ti(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ni(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(bn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=$u(t),Yy(t,null,o),r}return Hu(t,c,r,o),$u(t)}function oc(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,fn(t,o)}}function Df(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}var Pf=!1;function lc(){if(Pf){var t=Ko;if(t!==null)throw t}}function cc(t,r,o,c){Pf=!1;var f=t.updateQueue;ei=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var U=S,te=U.next;U.next=null,b===null?m=te:b.next=te,b=U;var ye=t.alternate;ye!==null&&(ye=ye.updateQueue,S=ye.lastBaseUpdate,S!==b&&(S===null?ye.firstBaseUpdate=te:S.next=te,ye.lastBaseUpdate=U))}if(m!==null){var je=f.baseState;b=0,ye=te=U=null,S=m;do{var se=S.lane&-536870913,ue=se!==S.lane;if(ue?(Xt&se)===se:(c&se)===se){se!==0&&se===Go&&(Pf=!0),ye!==null&&(ye=ye.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ot=t,kt=S;se=r;var Nn=o;switch(kt.tag){case 1:if(ot=kt.payload,typeof ot=="function"){je=ot.call(Nn,je,se);break e}je=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=kt.payload,se=typeof ot=="function"?ot.call(Nn,je,se):ot,se==null)break e;je=k({},je,se);break e;case 2:ei=!0}}se=S.callback,se!==null&&(t.flags|=64,ue&&(t.flags|=8192),ue=f.callbacks,ue===null?f.callbacks=[se]:ue.push(se))}else ue={lane:se,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ye===null?(te=ye=ue,U=je):ye=ye.next=ue,b|=se;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;ue=S,S=ue.next,ue.next=null,f.lastBaseUpdate=ue,f.shared.pending=null}}while(!0);ye===null&&(U=je),f.baseState=U,f.firstBaseUpdate=te,f.lastBaseUpdate=ye,m===null&&(f.shared.lanes=0),oi|=b,t.lanes=b,t.memoizedState=je}}function fv(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function mv(t,r){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)fv(o[t],r)}var Xo=N(null),th=N(0);function pv(t,r){t=Sa,ie(th,t),ie(Xo,r),Sa=t|r.baseLanes}function Lf(){ie(th,Sa),ie(Xo,Xo.current)}function Of(){Sa=th.current,V(Xo),V(th)}var Qs=N(null),fr=null;function si(t){var r=t.alternate;ie(ns,ns.current&1),ie(Qs,t),fr===null&&(r===null||Xo.current!==null||r.memoizedState!==null)&&(fr=t)}function Vf(t){ie(ns,ns.current),ie(Qs,t),fr===null&&(fr=t)}function gv(t){t.tag===22?(ie(ns,ns.current),ie(Qs,t),fr===null&&(fr=t)):ri()}function ri(){ie(ns,ns.current),ie(Qs,Qs.current)}function Xs(t){V(Qs),fr===t&&(fr=null),V(ns)}var ns=N(0);function nh(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Hm(o)||$m(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ba=0,Ut=null,jn=null,ls=null,sh=!1,Jo=!1,lo=!1,rh=0,uc=0,Zo=null,Bk=0;function Xn(){throw Error(i(321))}function Bf(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Ks(t[o],r[o]))return!1;return!0}function Uf(t,r,o,c,f,m){return ba=m,Ut=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,K.H=t===null||t.memoizedState===null?Zv:tm,lo=!1,m=o(c,f),lo=!1,Jo&&(m=vv(r,o,c,f)),yv(t),m}function yv(t){K.H=fc;var r=jn!==null&&jn.next!==null;if(ba=0,ls=jn=Ut=null,sh=!1,uc=0,Zo=null,r)throw Error(i(300));t===null||cs||(t=t.dependencies,t!==null&&Ku(t)&&(cs=!0))}function vv(t,r,o,c){Ut=t;var f=0;do{if(Jo&&(Zo=null),uc=0,Jo=!1,25<=f)throw Error(i(301));if(f+=1,ls=jn=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=eb,m=r(o,c)}while(Jo);return m}function Uk(){var t=K.H,r=t.useState()[0];return r=typeof r.then=="function"?hc(r):r,t=t.useState()[0],(jn!==null?jn.memoizedState:null)!==t&&(Ut.flags|=1024),r}function zf(){var t=rh!==0;return rh=0,t}function Ff(t,r,o){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o}function qf(t){if(sh){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}sh=!1}ba=0,ls=jn=Ut=null,Jo=!1,uc=rh=0,Zo=null}function Os(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ls===null?Ut.memoizedState=ls=t:ls=ls.next=t,ls}function ss(){if(jn===null){var t=Ut.alternate;t=t!==null?t.memoizedState:null}else t=jn.next;var r=ls===null?Ut.memoizedState:ls.next;if(r!==null)ls=r,jn=t;else{if(t===null)throw Ut.alternate===null?Error(i(467)):Error(i(310));jn=t,t={memoizedState:jn.memoizedState,baseState:jn.baseState,baseQueue:jn.baseQueue,queue:jn.queue,next:null},ls===null?Ut.memoizedState=ls=t:ls=ls.next=t}return ls}function ah(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(t){var r=uc;return uc+=1,Zo===null&&(Zo=[]),t=lv(Zo,t,r),r=Ut,(ls===null?r.memoizedState:ls.next)===null&&(r=r.alternate,K.H=r===null||r.memoizedState===null?Zv:tm),t}function ih(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return hc(t);if(t.$$typeof===oe)return ws(t)}throw Error(i(438,String(t)))}function Hf(t){var r=null,o=Ut.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Ut.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=ah(),Ut.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(t),c=0;c<t;c++)o[c]=P;return r.index++,o}function xa(t,r){return typeof r=="function"?r(t):r}function oh(t){var r=ss();return $f(r,jn,t)}function $f(t,r,o){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var S=b=null,U=null,te=r,ye=!1;do{var je=te.lane&-536870913;if(je!==te.lane?(Xt&je)===je:(ba&je)===je){var se=te.revertLane;if(se===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),je===Go&&(ye=!0);else if((ba&se)===se){te=te.next,se===Go&&(ye=!0);continue}else je={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},U===null?(S=U=je,b=m):U=U.next=je,Ut.lanes|=se,oi|=se;je=te.action,lo&&o(m,je),m=te.hasEagerState?te.eagerState:o(m,je)}else se={lane:je,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},U===null?(S=U=se,b=m):U=U.next=se,Ut.lanes|=je,oi|=je;te=te.next}while(te!==null&&te!==r);if(U===null?b=m:U.next=S,!Ks(m,t.memoizedState)&&(cs=!0,ye&&(o=Ko,o!==null)))throw o;t.memoizedState=m,t.baseState=b,t.baseQueue=U,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Wf(t){var r=ss(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);Ks(m,r.memoizedState)||(cs=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function bv(t,r,o){var c=Ut,f=ss(),m=on;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var b=!Ks((jn||f).memoizedState,o);if(b&&(f.memoizedState=o,cs=!0),f=f.queue,Yf(_v.bind(null,c,f,t),[t]),f.getSnapshot!==r||b||ls!==null&&ls.memoizedState.tag&1){if(c.flags|=2048,el(9,{destroy:void 0},wv.bind(null,c,f,o,r),null),An===null)throw Error(i(349));m||(ba&127)!==0||xv(c,r,o)}return o}function xv(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Ut.updateQueue,r===null?(r=ah(),Ut.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function wv(t,r,o,c){r.value=o,r.getSnapshot=c,kv(r)&&Tv(t)}function _v(t,r,o){return o(function(){kv(r)&&Tv(t)})}function kv(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Ks(t,o)}catch{return!0}}function Tv(t){var r=Zi(t,2);r!==null&&Hs(r,t,2)}function Gf(t){var r=Os();if(typeof t=="function"){var o=t;if(t=o(),lo){Ke(!0);try{o()}finally{Ke(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},r}function Ev(t,r,o,c){return t.baseState=o,$f(t,jn,typeof c=="function"?c:xa)}function zk(t,r,o,c,f){if(uh(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};K.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,jv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function jv(t,r){var o=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=K.T,b={};K.T=b;try{var S=o(f,c),U=K.S;U!==null&&U(b,S),Sv(t,r,S)}catch(te){Kf(t,r,te)}finally{m!==null&&b.types!==null&&(m.types=b.types),K.T=m}}else try{m=o(f,c),Sv(t,r,m)}catch(te){Kf(t,r,te)}}function Sv(t,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Nv(t,r,c)},function(c){return Kf(t,r,c)}):Nv(t,r,o)}function Nv(t,r,o){r.status="fulfilled",r.value=o,Cv(r),t.state=o,r=t.pending,r!==null&&(o=r.next,o===r?t.pending=null:(o=o.next,r.next=o,jv(t,o)))}function Kf(t,r,o){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Cv(r),r=r.next;while(r!==c)}t.action=null}function Cv(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Rv(t,r){return r}function Av(t,r){if(on){var o=An.formState;if(o!==null){e:{var c=Ut;if(on){if(Ln){t:{for(var f=Ln,m=dr;f.nodeType!==8;){if(!m){f=null;break t}if(f=mr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ln=mr(f.nextSibling),c=f.data==="F!";break e}}Ja(c)}c=!1}c&&(r=o[0])}}return o=Os(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rv,lastRenderedState:r},o.queue=c,o=Qv.bind(null,Ut,c),c.dispatch=o,c=Gf(!1),m=em.bind(null,Ut,!1,c.queue),c=Os(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,o=zk.bind(null,Ut,f,m,o),f.dispatch=o,c.memoizedState=t,[r,o,!1]}function Iv(t){var r=ss();return Mv(r,jn,t)}function Mv(t,r,o){if(r=$f(t,r,Rv)[0],t=oh(xa)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=hc(r)}catch(b){throw b===Yo?Xu:b}else c=r;r=ss();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Ut.flags|=2048,el(9,{destroy:void 0},Fk.bind(null,f,o),null)),[c,m,t]}function Fk(t,r){t.action=r}function Dv(t){var r=ss(),o=jn;if(o!==null)return Mv(r,o,t);ss(),r=r.memoizedState,o=ss();var c=o.queue.dispatch;return o.memoizedState=t,[r,c,!1]}function el(t,r,o,c){return t={tag:t,create:o,deps:c,inst:r,next:null},r=Ut.updateQueue,r===null&&(r=ah(),Ut.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t),t}function Pv(){return ss().memoizedState}function lh(t,r,o,c){var f=Os();Ut.flags|=t,f.memoizedState=el(1|r,{destroy:void 0},o,c===void 0?null:c)}function ch(t,r,o,c){var f=ss();c=c===void 0?null:c;var m=f.memoizedState.inst;jn!==null&&c!==null&&Bf(c,jn.memoizedState.deps)?f.memoizedState=el(r,m,o,c):(Ut.flags|=t,f.memoizedState=el(1|r,m,o,c))}function Lv(t,r){lh(8390656,8,t,r)}function Yf(t,r){ch(2048,8,t,r)}function qk(t){Ut.flags|=4;var r=Ut.updateQueue;if(r===null)r=ah(),Ut.updateQueue=r,r.events=[t];else{var o=r.events;o===null?r.events=[t]:o.push(t)}}function Ov(t){var r=ss().memoizedState;return qk({ref:r,nextImpl:t}),function(){if((bn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Vv(t,r){return ch(4,2,t,r)}function Bv(t,r){return ch(4,4,t,r)}function Uv(t,r){if(typeof r=="function"){t=t();var o=r(t);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function zv(t,r,o){o=o!=null?o.concat([t]):null,ch(4,4,Uv.bind(null,r,t),o)}function Qf(){}function Fv(t,r){var o=ss();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Bf(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function qv(t,r){var o=ss();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Bf(r,c[1]))return c[0];if(c=t(),lo){Ke(!0);try{t()}finally{Ke(!1)}}return o.memoizedState=[c,r],c}function Xf(t,r,o){return o===void 0||(ba&1073741824)!==0&&(Xt&261930)===0?t.memoizedState=r:(t.memoizedState=o,t=Hb(),Ut.lanes|=t,oi|=t,o)}function Hv(t,r,o,c){return Ks(o,r)?o:Xo.current!==null?(t=Xf(t,o,c),Ks(t,r)||(cs=!0),t):(ba&42)===0||(ba&1073741824)!==0&&(Xt&261930)===0?(cs=!0,t.memoizedState=o):(t=Hb(),Ut.lanes|=t,oi|=t,r)}function $v(t,r,o,c,f){var m=we.p;we.p=m!==0&&8>m?m:8;var b=K.T,S={};K.T=S,em(t,!1,r,o);try{var U=f(),te=K.S;if(te!==null&&te(S,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ye=Vk(U,c);dc(t,r,ye,er(t))}else dc(t,r,c,er(t))}catch(je){dc(t,r,{then:function(){},status:"rejected",reason:je},er())}finally{we.p=m,b!==null&&S.types!==null&&(b.types=S.types),K.T=b}}function Hk(){}function Jf(t,r,o,c){if(t.tag!==5)throw Error(i(476));var f=Wv(t).queue;$v(t,f,r,Le,o===null?Hk:function(){return Gv(t),o(c)})}function Wv(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Le,baseState:Le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:Le},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:o},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Gv(t){var r=Wv(t);r.next===null&&(r=t.alternate.memoizedState),dc(t,r.next.queue,{},er())}function Zf(){return ws(Cc)}function Kv(){return ss().memoizedState}function Yv(){return ss().memoizedState}function $k(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var o=er();t=ti(o);var c=ni(r,t,o);c!==null&&(Hs(c,r,o),oc(c,r,o)),r={cache:Nf()},t.payload=r;return}r=r.return}}function Wk(t,r,o){var c=er();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},uh(t)?Xv(r,o):(o=yf(t,r,o,c),o!==null&&(Hs(o,t,c),Jv(o,r,c)))}function Qv(t,r,o){var c=er();dc(t,r,o,c)}function dc(t,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(uh(t))Xv(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,S=m(b,o);if(f.hasEagerState=!0,f.eagerState=S,Ks(S,b))return Hu(t,r,f,0),An===null&&qu(),!1}catch{}if(o=yf(t,r,f,c),o!==null)return Hs(o,t,c),Jv(o,r,c),!0}return!1}function em(t,r,o,c){if(c={lane:2,revertLane:Im(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},uh(t)){if(r)throw Error(i(479))}else r=yf(t,o,c,2),r!==null&&Hs(r,t,2)}function uh(t){var r=t.alternate;return t===Ut||r!==null&&r===Ut}function Xv(t,r){Jo=sh=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Jv(t,r,o){if((o&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,fn(t,o)}}var fc={readContext:ws,use:ih,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useLayoutEffect:Xn,useInsertionEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useSyncExternalStore:Xn,useId:Xn,useHostTransitionStatus:Xn,useFormState:Xn,useActionState:Xn,useOptimistic:Xn,useMemoCache:Xn,useCacheRefresh:Xn};fc.useEffectEvent=Xn;var Zv={readContext:ws,use:ih,useCallback:function(t,r){return Os().memoizedState=[t,r===void 0?null:r],t},useContext:ws,useEffect:Lv,useImperativeHandle:function(t,r,o){o=o!=null?o.concat([t]):null,lh(4194308,4,Uv.bind(null,r,t),o)},useLayoutEffect:function(t,r){return lh(4194308,4,t,r)},useInsertionEffect:function(t,r){lh(4,2,t,r)},useMemo:function(t,r){var o=Os();r=r===void 0?null:r;var c=t();if(lo){Ke(!0);try{t()}finally{Ke(!1)}}return o.memoizedState=[c,r],c},useReducer:function(t,r,o){var c=Os();if(o!==void 0){var f=o(r);if(lo){Ke(!0);try{o(r)}finally{Ke(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=Wk.bind(null,Ut,t),[c.memoizedState,t]},useRef:function(t){var r=Os();return t={current:t},r.memoizedState=t},useState:function(t){t=Gf(t);var r=t.queue,o=Qv.bind(null,Ut,r);return r.dispatch=o,[t.memoizedState,o]},useDebugValue:Qf,useDeferredValue:function(t,r){var o=Os();return Xf(o,t,r)},useTransition:function(){var t=Gf(!1);return t=$v.bind(null,Ut,t.queue,!0,!1),Os().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,o){var c=Ut,f=Os();if(on){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),An===null)throw Error(i(349));(Xt&127)!==0||xv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Lv(_v.bind(null,c,m,t),[t]),c.flags|=2048,el(9,{destroy:void 0},wv.bind(null,c,m,o,r),null),o},useId:function(){var t=Os(),r=An.identifierPrefix;if(on){var o=Jr,c=Xr;o=(c&~(1<<32-Ue(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=rh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Bk++,r="_"+r+"r_"+o.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Zf,useFormState:Av,useActionState:Av,useOptimistic:function(t){var r=Os();r.memoizedState=r.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=em.bind(null,Ut,!0,o),o.dispatch=r,[t,r]},useMemoCache:Hf,useCacheRefresh:function(){return Os().memoizedState=$k.bind(null,Ut)},useEffectEvent:function(t){var r=Os(),o={impl:t};return r.memoizedState=o,function(){if((bn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},tm={readContext:ws,use:ih,useCallback:Fv,useContext:ws,useEffect:Yf,useImperativeHandle:zv,useInsertionEffect:Vv,useLayoutEffect:Bv,useMemo:qv,useReducer:oh,useRef:Pv,useState:function(){return oh(xa)},useDebugValue:Qf,useDeferredValue:function(t,r){var o=ss();return Hv(o,jn.memoizedState,t,r)},useTransition:function(){var t=oh(xa)[0],r=ss().memoizedState;return[typeof t=="boolean"?t:hc(t),r]},useSyncExternalStore:bv,useId:Kv,useHostTransitionStatus:Zf,useFormState:Iv,useActionState:Iv,useOptimistic:function(t,r){var o=ss();return Ev(o,jn,t,r)},useMemoCache:Hf,useCacheRefresh:Yv};tm.useEffectEvent=Ov;var eb={readContext:ws,use:ih,useCallback:Fv,useContext:ws,useEffect:Yf,useImperativeHandle:zv,useInsertionEffect:Vv,useLayoutEffect:Bv,useMemo:qv,useReducer:Wf,useRef:Pv,useState:function(){return Wf(xa)},useDebugValue:Qf,useDeferredValue:function(t,r){var o=ss();return jn===null?Xf(o,t,r):Hv(o,jn.memoizedState,t,r)},useTransition:function(){var t=Wf(xa)[0],r=ss().memoizedState;return[typeof t=="boolean"?t:hc(t),r]},useSyncExternalStore:bv,useId:Kv,useHostTransitionStatus:Zf,useFormState:Dv,useActionState:Dv,useOptimistic:function(t,r){var o=ss();return jn!==null?Ev(o,jn,t,r):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:Hf,useCacheRefresh:Yv};eb.useEffectEvent=Ov;function nm(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:k({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var sm={enqueueSetState:function(t,r,o){t=t._reactInternals;var c=er(),f=ti(c);f.payload=r,o!=null&&(f.callback=o),r=ni(t,f,c),r!==null&&(Hs(r,t,c),oc(r,t,c))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=er(),f=ti(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=ni(t,f,c),r!==null&&(Hs(r,t,c),oc(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=er(),c=ti(o);c.tag=2,r!=null&&(c.callback=r),r=ni(t,c,o),r!==null&&(Hs(r,t,o),oc(r,t,o))}};function tb(t,r,o,c,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!Zl(o,c)||!Zl(f,m):!0}function nb(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&sm.enqueueReplaceState(r,r.state,null)}function co(t,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(t=t.defaultProps){o===r&&(o=k({},o));for(var f in t)o[f]===void 0&&(o[f]=t[f])}return o}function sb(t){Fu(t)}function rb(t){console.error(t)}function ab(t){Fu(t)}function hh(t,r){try{var o=t.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function ib(t,r,o){try{var c=t.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function rm(t,r,o){return o=ti(o),o.tag=3,o.payload={element:null},o.callback=function(){hh(t,r)},o}function ob(t){return t=ti(t),t.tag=3,t}function lb(t,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){ib(r,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){ib(r,o,c),typeof f!="function"&&(li===null?li=new Set([this]):li.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function Gk(t,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Wo(r,o,f,!0),o=Qs.current,o!==null){switch(o.tag){case 31:case 13:return fr===null?kh():o.alternate===null&&Jn===0&&(Jn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Ju?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Cm(t,c,f)),!1;case 22:return o.flags|=65536,c===Ju?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Cm(t,c,f)),!1}throw Error(i(435,o.tag))}return Cm(t,c,f),kh(),!1}if(on)return r=Qs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==kf&&(t=Error(i(422),{cause:c}),nc(cr(t,o)))):(c!==kf&&(r=Error(i(423),{cause:c}),nc(cr(r,o))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=cr(c,o),f=rm(t.stateNode,c,f),Df(t,f),Jn!==4&&(Jn=2)),!1;var m=Error(i(520),{cause:c});if(m=cr(m,o),wc===null?wc=[m]:wc.push(m),Jn!==4&&(Jn=2),r===null)return!0;c=cr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,t=f&-f,o.lanes|=t,t=rm(o.stateNode,c,t),Df(o,t),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(li===null||!li.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=ob(f),lb(f,t,o,c),Df(o,f),!1}o=o.return}while(o!==null);return!1}var am=Error(i(461)),cs=!1;function _s(t,r,o,c){r.child=t===null?dv(r,null,o,c):oo(r,t.child,o,c)}function cb(t,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var b={};for(var S in c)S!=="ref"&&(b[S]=c[S])}else b=c;return so(r),c=Uf(t,r,o,b,m,f),S=zf(),t!==null&&!cs?(Ff(t,r,f),wa(t,r,f)):(on&&S&&wf(r),r.flags|=1,_s(t,r,c,f),r.child)}function ub(t,r,o,c,f){if(t===null){var m=o.type;return typeof m=="function"&&!vf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,hb(t,r,m,c,f)):(t=Wu(o.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!fm(t,f)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:Zl,o(b,c)&&t.ref===r.ref)return wa(t,r,f)}return r.flags|=1,t=pa(m,c),t.ref=r.ref,t.return=r,r.child=t}function hb(t,r,o,c,f){if(t!==null){var m=t.memoizedProps;if(Zl(m,c)&&t.ref===r.ref)if(cs=!1,r.pendingProps=c=m,fm(t,f))(t.flags&131072)!==0&&(cs=!0);else return r.lanes=t.lanes,wa(t,r,f)}return im(t,r,o,c,f)}function db(t,r,o,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return fb(t,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Qu(r,m!==null?m.cachePool:null),m!==null?pv(r,m):Lf(),gv(r);else return c=r.lanes=536870912,fb(t,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Qu(r,m.cachePool),pv(r,m),ri(),r.memoizedState=null):(t!==null&&Qu(r,null),Lf(),ri());return _s(t,r,f,o),r.child}function mc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function fb(t,r,o,c,f){var m=Rf();return m=m===null?null:{parent:os._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},t!==null&&Qu(r,null),Lf(),gv(r),t!==null&&Wo(t,r,c,!0),r.childLanes=f,null}function dh(t,r){return r=mh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function mb(t,r,o){return oo(r,t.child,null,o),t=dh(r,r.pendingProps),t.flags|=2,Xs(r),r.memoizedState=null,t}function Kk(t,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(on){if(c.mode==="hidden")return t=dh(r,c),r.lanes=536870912,mc(null,t);if(Vf(r),(t=Ln)?(t=j0(t,dr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Qa!==null?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},o=Xy(t),o.return=r,r.child=o,xs=r,Ln=null)):t=null,t===null)throw Ja(r);return r.lanes=536870912,null}return dh(r,c)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(Vf(r),f)if(r.flags&256)r.flags&=-257,r=mb(t,r,o);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(cs||Wo(t,r,o,!1),f=(o&t.childLanes)!==0,cs||f){if(c=An,c!==null&&(b=Rn(c,o),b!==0&&b!==m.retryLane))throw m.retryLane=b,Zi(t,b),Hs(c,t,b),am;kh(),r=mb(t,r,o)}else t=m.treeContext,Ln=mr(b.nextSibling),xs=r,on=!0,Xa=null,dr=!1,t!==null&&ev(r,t),r=dh(r,c),r.flags|=4096;return r}return t=pa(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function fh(t,r){var o=r.ref;if(o===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(t===null||t.ref!==o)&&(r.flags|=4194816)}}function im(t,r,o,c,f){return so(r),o=Uf(t,r,o,c,void 0,f),c=zf(),t!==null&&!cs?(Ff(t,r,f),wa(t,r,f)):(on&&c&&wf(r),r.flags|=1,_s(t,r,o,f),r.child)}function pb(t,r,o,c,f,m){return so(r),r.updateQueue=null,o=vv(r,c,o,f),yv(t),c=zf(),t!==null&&!cs?(Ff(t,r,m),wa(t,r,m)):(on&&c&&wf(r),r.flags|=1,_s(t,r,o,m),r.child)}function gb(t,r,o,c,f){if(so(r),r.stateNode===null){var m=Fo,b=o.contextType;typeof b=="object"&&b!==null&&(m=ws(b)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=sm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},If(r),b=o.contextType,m.context=typeof b=="object"&&b!==null?ws(b):Fo,m.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(nm(r,o,b,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&sm.enqueueReplaceState(m,m.state,null),cc(r,c,m,f),lc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var S=r.memoizedProps,U=co(o,S);m.props=U;var te=m.context,ye=o.contextType;b=Fo,typeof ye=="object"&&ye!==null&&(b=ws(ye));var je=o.getDerivedStateFromProps;ye=typeof je=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,ye||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||te!==b)&&nb(r,m,c,b),ei=!1;var se=r.memoizedState;m.state=se,cc(r,c,m,f),lc(),te=r.memoizedState,S||se!==te||ei?(typeof je=="function"&&(nm(r,o,je,c),te=r.memoizedState),(U=ei||tb(r,o,U,c,se,te,b))?(ye||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=te),m.props=c,m.state=te,m.context=b,c=U):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Mf(t,r),b=r.memoizedProps,ye=co(o,b),m.props=ye,je=r.pendingProps,se=m.context,te=o.contextType,U=Fo,typeof te=="object"&&te!==null&&(U=ws(te)),S=o.getDerivedStateFromProps,(te=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==je||se!==U)&&nb(r,m,c,U),ei=!1,se=r.memoizedState,m.state=se,cc(r,c,m,f),lc();var ue=r.memoizedState;b!==je||se!==ue||ei||t!==null&&t.dependencies!==null&&Ku(t.dependencies)?(typeof S=="function"&&(nm(r,o,S,c),ue=r.memoizedState),(ye=ei||tb(r,o,ye,c,se,ue,U)||t!==null&&t.dependencies!==null&&Ku(t.dependencies))?(te||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ue,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ue,U)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&se===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&se===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ue),m.props=c,m.state=ue,m.context=U,c=ye):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&se===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&se===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,fh(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=oo(r,t.child,null,f),r.child=oo(r,null,o,f)):_s(t,r,o,f),r.memoizedState=m.state,t=r.child):t=wa(t,r,f),t}function yb(t,r,o,c){return to(),r.flags|=256,_s(t,r,o,c),r.child}var om={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lm(t){return{baseLanes:t,cachePool:iv()}}function cm(t,r,o){return t=t!==null?t.childLanes&~o:0,r&&(t|=Zs),t}function vb(t,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(ns.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(on){if(f?si(r):ri(),(t=Ln)?(t=j0(t,dr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Qa!==null?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},o=Xy(t),o.return=r,r.child=o,xs=r,Ln=null)):t=null,t===null)throw Ja(r);return $m(t)?r.lanes=32:r.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(ri(),f=r.mode,S=mh({mode:"hidden",children:S},f),c=eo(c,f,o,null),S.return=r,c.return=r,S.sibling=c,r.child=S,c=r.child,c.memoizedState=lm(o),c.childLanes=cm(t,b,o),r.memoizedState=om,mc(null,c)):(si(r),um(r,S))}var U=t.memoizedState;if(U!==null&&(S=U.dehydrated,S!==null)){if(m)r.flags&256?(si(r),r.flags&=-257,r=hm(t,r,o)):r.memoizedState!==null?(ri(),r.child=t.child,r.flags|=128,r=null):(ri(),S=c.fallback,f=r.mode,c=mh({mode:"visible",children:c.children},f),S=eo(S,f,o,null),S.flags|=2,c.return=r,S.return=r,c.sibling=S,r.child=c,oo(r,t.child,null,o),c=r.child,c.memoizedState=lm(o),c.childLanes=cm(t,b,o),r.memoizedState=om,r=mc(null,c));else if(si(r),$m(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var te=b.dgst;b=te,c=Error(i(419)),c.stack="",c.digest=b,nc({value:c,source:null,stack:null}),r=hm(t,r,o)}else if(cs||Wo(t,r,o,!1),b=(o&t.childLanes)!==0,cs||b){if(b=An,b!==null&&(c=Rn(b,o),c!==0&&c!==U.retryLane))throw U.retryLane=c,Zi(t,c),Hs(b,t,c),am;Hm(S)||kh(),r=hm(t,r,o)}else Hm(S)?(r.flags|=192,r.child=t.child,r=null):(t=U.treeContext,Ln=mr(S.nextSibling),xs=r,on=!0,Xa=null,dr=!1,t!==null&&ev(r,t),r=um(r,c.children),r.flags|=4096);return r}return f?(ri(),S=c.fallback,f=r.mode,U=t.child,te=U.sibling,c=pa(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,te!==null?S=pa(te,S):(S=eo(S,f,o,null),S.flags|=2),S.return=r,c.return=r,c.sibling=S,r.child=c,mc(null,c),c=r.child,S=t.child.memoizedState,S===null?S=lm(o):(f=S.cachePool,f!==null?(U=os._currentValue,f=f.parent!==U?{parent:U,pool:U}:f):f=iv(),S={baseLanes:S.baseLanes|o,cachePool:f}),c.memoizedState=S,c.childLanes=cm(t,b,o),r.memoizedState=om,mc(t.child,c)):(si(r),o=t.child,t=o.sibling,o=pa(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=o,r.memoizedState=null,o)}function um(t,r){return r=mh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function mh(t,r){return t=Ys(22,t,null,r),t.lanes=0,t}function hm(t,r,o){return oo(r,t.child,null,o),t=um(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function bb(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),jf(t.return,r,o)}function dm(t,r,o,c,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=f,b.treeForkCount=m)}function xb(t,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var b=ns.current,S=(b&2)!==0;if(S?(b=b&1|2,r.flags|=128):b&=1,ie(ns,b),_s(t,r,c,o),c=on?tc:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bb(t,o,r);else if(t.tag===19)bb(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&nh(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),dm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&nh(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}dm(r,!0,o,null,m,c);break;case"together":dm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function wa(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),oi|=r.lanes,(o&r.childLanes)===0)if(t!==null){if(Wo(t,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,o=pa(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=pa(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function fm(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Ku(t)))}function Yk(t,r,o){switch(r.tag){case 3:Fe(r,r.stateNode.containerInfo),Za(r,os,t.memoizedState.cache),to();break;case 27:case 5:bt(r);break;case 4:Fe(r,r.stateNode.containerInfo);break;case 10:Za(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Vf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(si(r),r.flags|=128,null):(o&r.child.childLanes)!==0?vb(t,r,o):(si(r),t=wa(t,r,o),t!==null?t.sibling:null);si(r);break;case 19:var f=(t.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Wo(t,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return xb(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ie(ns,ns.current),c)break;return null;case 22:return r.lanes=0,db(t,r,o,r.pendingProps);case 24:Za(r,os,t.memoizedState.cache)}return wa(t,r,o)}function wb(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps)cs=!0;else{if(!fm(t,o)&&(r.flags&128)===0)return cs=!1,Yk(t,r,o);cs=(t.flags&131072)!==0}else cs=!1,on&&(r.flags&1048576)!==0&&Zy(r,tc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=ao(r.elementType),r.type=t,typeof t=="function")vf(t)?(c=co(t,c),r.tag=1,r=gb(null,r,t,c,o)):(r.tag=0,r=im(null,r,t,c,o));else{if(t!=null){var f=t.$$typeof;if(f===be){r.tag=11,r=cb(null,r,t,c,o);break e}else if(f===I){r.tag=14,r=ub(null,r,t,c,o);break e}}throw r=ke(t)||t,Error(i(306,r,""))}}return r;case 0:return im(t,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=co(c,r.pendingProps),gb(t,r,c,f,o);case 3:e:{if(Fe(r,r.stateNode.containerInfo),t===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Mf(t,r),cc(r,c,null,o);var b=r.memoizedState;if(c=b.cache,Za(r,os,c),c!==m.cache&&Sf(r,[os],o,!0),lc(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=yb(t,r,c,o);break e}else if(c!==f){f=cr(Error(i(424)),r),nc(f),r=yb(t,r,c,o);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ln=mr(t.firstChild),xs=r,on=!0,Xa=null,dr=!0,o=dv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(to(),c===f){r=wa(t,r,o);break e}_s(t,r,c,o)}r=r.child}return r;case 26:return fh(t,r),t===null?(o=I0(r.type,null,r.pendingProps,null))?r.memoizedState=o:on||(o=r.type,t=r.pendingProps,c=Rh(Me.current).createElement(o),c[We]=r,c[mt]=t,ks(c,o,t),R(c),r.stateNode=c):r.memoizedState=I0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return bt(r),t===null&&on&&(c=r.stateNode=C0(r.type,r.pendingProps,Me.current),xs=r,dr=!0,f=Ln,di(r.type)?(Wm=f,Ln=mr(c.firstChild)):Ln=f),_s(t,r,r.pendingProps.children,o),fh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&on&&((f=c=Ln)&&(c=ET(c,r.type,r.pendingProps,dr),c!==null?(r.stateNode=c,xs=r,Ln=mr(c.firstChild),dr=!1,f=!0):f=!1),f||Ja(r)),bt(r),f=r.type,m=r.pendingProps,b=t!==null?t.memoizedProps:null,c=m.children,zm(f,m)?c=null:b!==null&&zm(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Uf(t,r,Uk,null,null,o),Cc._currentValue=f),fh(t,r),_s(t,r,c,o),r.child;case 6:return t===null&&on&&((t=o=Ln)&&(o=jT(o,r.pendingProps,dr),o!==null?(r.stateNode=o,xs=r,Ln=null,t=!0):t=!1),t||Ja(r)),null;case 13:return vb(t,r,o);case 4:return Fe(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=oo(r,null,c,o):_s(t,r,c,o),r.child;case 11:return cb(t,r,r.type,r.pendingProps,o);case 7:return _s(t,r,r.pendingProps,o),r.child;case 8:return _s(t,r,r.pendingProps.children,o),r.child;case 12:return _s(t,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Za(r,r.type,c.value),_s(t,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,so(r),f=ws(f),c=c(f),r.flags|=1,_s(t,r,c,o),r.child;case 14:return ub(t,r,r.type,r.pendingProps,o);case 15:return hb(t,r,r.type,r.pendingProps,o);case 19:return xb(t,r,o);case 31:return Kk(t,r,o);case 22:return db(t,r,o,r.pendingProps);case 24:return so(r),c=ws(os),t===null?(f=Rf(),f===null&&(f=An,m=Nf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},If(r),Za(r,os,f)):((t.lanes&o)!==0&&(Mf(t,r),cc(r,null,null,o),lc()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Za(r,os,c)):(c=m.cache,Za(r,os,c),c!==f.cache&&Sf(r,[os],o,!0))),_s(t,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function _a(t){t.flags|=4}function mm(t,r,o,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Kb())t.flags|=8192;else throw io=Ju,Af}else t.flags&=-16777217}function _b(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!O0(r))if(Kb())t.flags|=8192;else throw io=Ju,Af}function ph(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Tt():536870912,t.lanes|=r,rl|=r)}function pc(t,r){if(!on)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function On(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function Qk(t,r,o){var c=r.pendingProps;switch(_f(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(r),null;case 1:return On(r),null;case 3:return o=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),va(os),Ge(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&($o(r)?_a(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Tf())),On(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(_a(r),m!==null?(On(r),_b(r,m)):(On(r),mm(r,f,null,c,o))):m?m!==t.memoizedState?(_a(r),On(r),_b(r,m)):(On(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&_a(r),On(r),mm(r,f,t,c,o)),null;case 27:if(nn(r),o=Me.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&_a(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return On(r),null}t=pe.current,$o(r)?tv(r):(t=C0(f,c,o),r.stateNode=t,_a(r))}return On(r),null;case 5:if(nn(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&_a(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return On(r),null}if(m=pe.current,$o(r))tv(r);else{var b=Rh(Me.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(f,{is:c.is}):b.createElement(f)}}m[We]=r,m[mt]=c;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(ks(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&_a(r)}}return On(r),mm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,o),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&_a(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(t=Me.current,$o(r)){if(t=r.stateNode,o=r.memoizedProps,c=null,f=xs,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[We]=r,t=!!(t.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||v0(t.nodeValue,o)),t||Ja(r,!0)}else t=Rh(t).createTextNode(c),t[We]=r,r.stateNode=t}return On(r),null;case 31:if(o=r.memoizedState,t===null||t.memoizedState!==null){if(c=$o(r),o!==null){if(t===null){if(!c)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[We]=r}else to(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;On(r),t=!1}else o=Tf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return r.flags&256?(Xs(r),r):(Xs(r),null);if((r.flags&128)!==0)throw Error(i(558))}return On(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=$o(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[We]=r}else to(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;On(r),f=!1}else f=Tf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Xs(r),r):(Xs(r),null)}return Xs(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,t=t!==null&&t.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==t&&o&&(r.child.flags|=8192),ph(r,r.updateQueue),On(r),null);case 4:return Ge(),t===null&&Lm(r.stateNode.containerInfo),On(r),null;case 10:return va(r.type),On(r),null;case 19:if(V(ns),c=r.memoizedState,c===null)return On(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)pc(c,!1);else{if(Jn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=nh(t),m!==null){for(r.flags|=128,pc(c,!1),t=m.updateQueue,r.updateQueue=t,ph(r,t),r.subtreeFlags=0,t=o,o=r.child;o!==null;)Qy(o,t),o=o.sibling;return ie(ns,ns.current&1|2),on&&ga(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&zt()>xh&&(r.flags|=128,f=!0,pc(c,!1),r.lanes=4194304)}else{if(!f)if(t=nh(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,ph(r,t),pc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!on)return On(r),null}else 2*zt()-c.renderingStartTime>xh&&o!==536870912&&(r.flags|=128,f=!0,pc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=zt(),t.sibling=null,o=ns.current,ie(ns,f?o&1|2:o&1),on&&ga(r,c.treeForkCount),t):(On(r),null);case 22:case 23:return Xs(r),Of(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(On(r),r.subtreeFlags&6&&(r.flags|=8192)):On(r),o=r.updateQueue,o!==null&&ph(r,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),t!==null&&V(ro),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),va(os),On(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Xk(t,r){switch(_f(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return va(os),Ge(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return nn(r),null;case 31:if(r.memoizedState!==null){if(Xs(r),r.alternate===null)throw Error(i(340));to()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Xs(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));to()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return V(ns),null;case 4:return Ge(),null;case 10:return va(r.type),null;case 22:case 23:return Xs(r),Of(),t!==null&&V(ro),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return va(os),null;case 25:return null;default:return null}}function kb(t,r){switch(_f(r),r.tag){case 3:va(os),Ge();break;case 26:case 27:case 5:nn(r);break;case 4:Ge();break;case 31:r.memoizedState!==null&&Xs(r);break;case 13:Xs(r);break;case 19:V(ns);break;case 10:va(r.type);break;case 22:case 23:Xs(r),Of(),t!==null&&V(ro);break;case 24:va(os)}}function gc(t,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&t)===t){c=void 0;var m=o.create,b=o.inst;c=m(),b.destroy=c}o=o.next}while(o!==f)}}catch(S){kn(r,r.return,S)}}function ai(t,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var b=c.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,f=r;var U=o,te=S;try{te()}catch(ye){kn(f,U,ye)}}}c=c.next}while(c!==m)}}catch(ye){kn(r,r.return,ye)}}function Tb(t){var r=t.updateQueue;if(r!==null){var o=t.stateNode;try{mv(r,o)}catch(c){kn(t,t.return,c)}}}function Eb(t,r,o){o.props=co(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(c){kn(t,r,c)}}function yc(t,r){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof o=="function"?t.refCleanup=o(c):o.current=c}}catch(f){kn(t,r,f)}}function Zr(t,r){var o=t.ref,c=t.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){kn(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){kn(t,r,f)}else o.current=null}function jb(t){var r=t.type,o=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){kn(t,t.return,f)}}function pm(t,r,o){try{var c=t.stateNode;bT(c,t.type,o,r),c[mt]=r}catch(f){kn(t,t.return,f)}}function Sb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&di(t.type)||t.tag===4}function gm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Sb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&di(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ym(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(t),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ps));else if(c!==4&&(c===27&&di(t.type)&&(o=t.stateNode,r=null),t=t.child,t!==null))for(ym(t,r,o),t=t.sibling;t!==null;)ym(t,r,o),t=t.sibling}function gh(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(c===27&&di(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(gh(t,r,o),t=t.sibling;t!==null;)gh(t,r,o),t=t.sibling}function Nb(t){var r=t.stateNode,o=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);ks(r,c,o),r[We]=t,r[mt]=o}catch(m){kn(t,t.return,m)}}var ka=!1,us=!1,vm=!1,Cb=typeof WeakSet=="function"?WeakSet:Set,gs=null;function Jk(t,r){if(t=t.containerInfo,Bm=Oh,t=zy(t),hf(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var b=0,S=-1,U=-1,te=0,ye=0,je=t,se=null;t:for(;;){for(var ue;je!==o||f!==0&&je.nodeType!==3||(S=b+f),je!==m||c!==0&&je.nodeType!==3||(U=b+c),je.nodeType===3&&(b+=je.nodeValue.length),(ue=je.firstChild)!==null;)se=je,je=ue;for(;;){if(je===t)break t;if(se===o&&++te===f&&(S=b),se===m&&++ye===c&&(U=b),(ue=je.nextSibling)!==null)break;je=se,se=je.parentNode}je=ue}o=S===-1||U===-1?null:{start:S,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(Um={focusedElem:t,selectionRange:o},Oh=!1,gs=r;gs!==null;)if(r=gs,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,gs=t;else for(;gs!==null;){switch(r=gs,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)f=t[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var ot=co(o.type,f);t=c.getSnapshotBeforeUpdate(ot,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(kt){kn(o,o.return,kt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,o=t.nodeType,o===9)qm(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":qm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,gs=t;break}gs=r.return}}function Rb(t,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ea(t,o),c&4&&gc(5,o);break;case 1:if(Ea(t,o),c&4)if(t=o.stateNode,r===null)try{t.componentDidMount()}catch(b){kn(o,o.return,b)}else{var f=co(o.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){kn(o,o.return,b)}}c&64&&Tb(o),c&512&&yc(o,o.return);break;case 3:if(Ea(t,o),c&64&&(t=o.updateQueue,t!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{mv(t,r)}catch(b){kn(o,o.return,b)}}break;case 27:r===null&&c&4&&Nb(o);case 26:case 5:Ea(t,o),r===null&&c&4&&jb(o),c&512&&yc(o,o.return);break;case 12:Ea(t,o);break;case 31:Ea(t,o),c&4&&Mb(t,o);break;case 13:Ea(t,o),c&4&&Db(t,o),c&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=oT.bind(null,o),ST(t,o))));break;case 22:if(c=o.memoizedState!==null||ka,!c){r=r!==null&&r.memoizedState!==null||us,f=ka;var m=us;ka=c,(us=r)&&!m?ja(t,o,(o.subtreeFlags&8772)!==0):Ea(t,o),ka=f,us=m}break;case 30:break;default:Ea(t,o)}}function Ab(t){var r=t.alternate;r!==null&&(t.alternate=null,Ab(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Qn(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Fn=null,Us=!1;function Ta(t,r,o){for(o=o.child;o!==null;)Ib(t,r,o),o=o.sibling}function Ib(t,r,o){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(qe,o)}catch{}switch(o.tag){case 26:us||Zr(o,r),Ta(t,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:us||Zr(o,r);var c=Fn,f=Us;di(o.type)&&(Fn=o.stateNode,Us=!1),Ta(t,r,o),jc(o.stateNode),Fn=c,Us=f;break;case 5:us||Zr(o,r);case 6:if(c=Fn,f=Us,Fn=null,Ta(t,r,o),Fn=c,Us=f,Fn!==null)if(Us)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(o.stateNode)}catch(m){kn(o,r,m)}else try{Fn.removeChild(o.stateNode)}catch(m){kn(o,r,m)}break;case 18:Fn!==null&&(Us?(t=Fn,T0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),dl(t)):T0(Fn,o.stateNode));break;case 4:c=Fn,f=Us,Fn=o.stateNode.containerInfo,Us=!0,Ta(t,r,o),Fn=c,Us=f;break;case 0:case 11:case 14:case 15:ai(2,o,r),us||ai(4,o,r),Ta(t,r,o);break;case 1:us||(Zr(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Eb(o,r,c)),Ta(t,r,o);break;case 21:Ta(t,r,o);break;case 22:us=(c=us)||o.memoizedState!==null,Ta(t,r,o),us=c;break;default:Ta(t,r,o)}}function Mb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{dl(t)}catch(o){kn(r,r.return,o)}}}function Db(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{dl(t)}catch(o){kn(r,r.return,o)}}function Zk(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Cb),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Cb),r;default:throw Error(i(435,t.tag))}}function yh(t,r){var o=Zk(t);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=lT.bind(null,t,c);c.then(f,f)}})}function zs(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=t,b=r,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(di(S.type)){Fn=S.stateNode,Us=!1;break e}break;case 5:Fn=S.stateNode,Us=!1;break e;case 3:case 4:Fn=S.stateNode.containerInfo,Us=!0;break e}S=S.return}if(Fn===null)throw Error(i(160));Ib(m,b,f),Fn=null,Us=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Pb(r,t),r=r.sibling}var Rr=null;function Pb(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zs(r,t),Fs(t),c&4&&(ai(3,t,t.return),gc(3,t),ai(5,t,t.return));break;case 1:zs(r,t),Fs(t),c&512&&(us||o===null||Zr(o,o.return)),c&64&&ka&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Rr;if(zs(r,t),Fs(t),c&512&&(us||o===null||Zr(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=t.memoizedState,o===null)if(c===null)if(t.stateNode===null){e:{c=t.type,o=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Wn]||m[We]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),ks(m,c,o),m[We]=t,R(m),c=m;break e;case"link":var b=P0("link","href",f).get(c+(o.href||""));if(b){for(var S=0;S<b.length;S++)if(m=b[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(S,1);break t}}m=f.createElement(c),ks(m,c,o),f.head.appendChild(m);break;case"meta":if(b=P0("meta","content",f).get(c+(o.content||""))){for(S=0;S<b.length;S++)if(m=b[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(S,1);break t}}m=f.createElement(c),ks(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[We]=t,R(m),c=m}t.stateNode=c}else L0(f,t.type,t.stateNode);else t.stateNode=D0(f,c,t.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?L0(f,t.type,t.stateNode):D0(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&pm(t,t.memoizedProps,o.memoizedProps)}break;case 27:zs(r,t),Fs(t),c&512&&(us||o===null||Zr(o,o.return)),o!==null&&c&4&&pm(t,t.memoizedProps,o.memoizedProps);break;case 5:if(zs(r,t),Fs(t),c&512&&(us||o===null||Zr(o,o.return)),t.flags&32){f=t.stateNode;try{Kn(f,"")}catch(ot){kn(t,t.return,ot)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,pm(t,f,o!==null?o.memoizedProps:f)),c&1024&&(vm=!0);break;case 6:if(zs(r,t),Fs(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,o=t.stateNode;try{o.nodeValue=c}catch(ot){kn(t,t.return,ot)}}break;case 3:if(Mh=null,f=Rr,Rr=Ah(r.containerInfo),zs(r,t),Rr=f,Fs(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{dl(r.containerInfo)}catch(ot){kn(t,t.return,ot)}vm&&(vm=!1,Lb(t));break;case 4:c=Rr,Rr=Ah(t.stateNode.containerInfo),zs(r,t),Fs(t),Rr=c;break;case 12:zs(r,t),Fs(t);break;case 31:zs(r,t),Fs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,yh(t,c)));break;case 13:zs(r,t),Fs(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(bh=zt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,yh(t,c)));break;case 22:f=t.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,te=ka,ye=us;if(ka=te||f,us=ye||U,zs(r,t),us=ye,ka=te,Fs(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||U||ka||us||uo(t)),o=null,r=t;;){if(r.tag===5||r.tag===26){if(o===null){U=o=r;try{if(m=U.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=U.stateNode;var je=U.memoizedProps.style,se=je!=null&&je.hasOwnProperty("display")?je.display:null;S.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ot){kn(U,U.return,ot)}}}else if(r.tag===6){if(o===null){U=r;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(ot){kn(U,U.return,ot)}}}else if(r.tag===18){if(o===null){U=r;try{var ue=U.stateNode;f?E0(ue,!0):E0(U.stateNode,!1)}catch(ot){kn(U,U.return,ot)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,yh(t,o))));break;case 19:zs(r,t),Fs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,yh(t,c)));break;case 30:break;case 21:break;default:zs(r,t),Fs(t)}}function Fs(t){var r=t.flags;if(r&2){try{for(var o,c=t.return;c!==null;){if(Sb(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=gm(t);gh(t,m,f);break;case 5:var b=o.stateNode;o.flags&32&&(Kn(b,""),o.flags&=-33);var S=gm(t);gh(t,S,b);break;case 3:case 4:var U=o.stateNode.containerInfo,te=gm(t);ym(t,te,U);break;default:throw Error(i(161))}}catch(ye){kn(t,t.return,ye)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Lb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Lb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ea(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Rb(t,r.alternate,r),r=r.sibling}function uo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ai(4,r,r.return),uo(r);break;case 1:Zr(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Eb(r,r.return,o),uo(r);break;case 27:jc(r.stateNode);case 26:case 5:Zr(r,r.return),uo(r);break;case 22:r.memoizedState===null&&uo(r);break;case 30:uo(r);break;default:uo(r)}t=t.sibling}}function ja(t,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:ja(f,m,o),gc(4,m);break;case 1:if(ja(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(te){kn(c,c.return,te)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)fv(U[f],S)}catch(te){kn(c,c.return,te)}}o&&b&64&&Tb(m),yc(m,m.return);break;case 27:Nb(m);case 26:case 5:ja(f,m,o),o&&c===null&&b&4&&jb(m),yc(m,m.return);break;case 12:ja(f,m,o);break;case 31:ja(f,m,o),o&&b&4&&Mb(f,m);break;case 13:ja(f,m,o),o&&b&4&&Db(f,m);break;case 22:m.memoizedState===null&&ja(f,m,o),yc(m,m.return);break;case 30:break;default:ja(f,m,o)}r=r.sibling}}function bm(t,r){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&sc(o))}function xm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&sc(t))}function Ar(t,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ob(t,r,o,c),r=r.sibling}function Ob(t,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Ar(t,r,o,c),f&2048&&gc(9,r);break;case 1:Ar(t,r,o,c);break;case 3:Ar(t,r,o,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&sc(t)));break;case 12:if(f&2048){Ar(t,r,o,c),t=r.stateNode;try{var m=r.memoizedProps,b=m.id,S=m.onPostCommit;typeof S=="function"&&S(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(U){kn(r,r.return,U)}}else Ar(t,r,o,c);break;case 31:Ar(t,r,o,c);break;case 13:Ar(t,r,o,c);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?Ar(t,r,o,c):vc(t,r):m._visibility&2?Ar(t,r,o,c):(m._visibility|=2,tl(t,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&bm(b,r);break;case 24:Ar(t,r,o,c),f&2048&&xm(r.alternate,r);break;default:Ar(t,r,o,c)}}function tl(t,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,b=r,S=o,U=c,te=b.flags;switch(b.tag){case 0:case 11:case 15:tl(m,b,S,U,f),gc(8,b);break;case 23:break;case 22:var ye=b.stateNode;b.memoizedState!==null?ye._visibility&2?tl(m,b,S,U,f):vc(m,b):(ye._visibility|=2,tl(m,b,S,U,f)),f&&te&2048&&bm(b.alternate,b);break;case 24:tl(m,b,S,U,f),f&&te&2048&&xm(b.alternate,b);break;default:tl(m,b,S,U,f)}r=r.sibling}}function vc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=t,c=r,f=c.flags;switch(c.tag){case 22:vc(o,c),f&2048&&bm(c.alternate,c);break;case 24:vc(o,c),f&2048&&xm(c.alternate,c);break;default:vc(o,c)}r=r.sibling}}var bc=8192;function nl(t,r,o){if(t.subtreeFlags&bc)for(t=t.child;t!==null;)Vb(t,r,o),t=t.sibling}function Vb(t,r,o){switch(t.tag){case 26:nl(t,r,o),t.flags&bc&&t.memoizedState!==null&&BT(o,Rr,t.memoizedState,t.memoizedProps);break;case 5:nl(t,r,o);break;case 3:case 4:var c=Rr;Rr=Ah(t.stateNode.containerInfo),nl(t,r,o),Rr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=bc,bc=16777216,nl(t,r,o),bc=c):nl(t,r,o));break;default:nl(t,r,o)}}function Bb(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function xc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];gs=c,zb(c,t)}Bb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ub(t),t=t.sibling}function Ub(t){switch(t.tag){case 0:case 11:case 15:xc(t),t.flags&2048&&ai(9,t,t.return);break;case 3:xc(t);break;case 12:xc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,vh(t)):xc(t);break;default:xc(t)}}function vh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];gs=c,zb(c,t)}Bb(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ai(8,r,r.return),vh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,vh(r));break;default:vh(r)}t=t.sibling}}function zb(t,r){for(;gs!==null;){var o=gs;switch(o.tag){case 0:case 11:case 15:ai(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:sc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,gs=c;else e:for(o=t;gs!==null;){c=gs;var f=c.sibling,m=c.return;if(Ab(c),c===o){gs=null;break e}if(f!==null){f.return=m,gs=f;break e}gs=m}}}var eT={getCacheForType:function(t){var r=ws(os),o=r.data.get(t);return o===void 0&&(o=t(),r.data.set(t,o)),o},cacheSignal:function(){return ws(os).controller.signal}},tT=typeof WeakMap=="function"?WeakMap:Map,bn=0,An=null,Kt=null,Xt=0,_n=0,Js=null,ii=!1,sl=!1,wm=!1,Sa=0,Jn=0,oi=0,ho=0,_m=0,Zs=0,rl=0,wc=null,qs=null,km=!1,bh=0,Fb=0,xh=1/0,wh=null,li=null,ms=0,ci=null,al=null,Na=0,Tm=0,Em=null,qb=null,_c=0,jm=null;function er(){return(bn&2)!==0&&Xt!==0?Xt&-Xt:K.T!==null?Im():ge()}function Hb(){if(Zs===0)if((Xt&536870912)===0||on){var t=$t;$t<<=1,($t&3932160)===0&&($t=262144),Zs=t}else Zs=536870912;return t=Qs.current,t!==null&&(t.flags|=32),Zs}function Hs(t,r,o){(t===An&&(_n===2||_n===9)||t.cancelPendingCommit!==null)&&(il(t,0),ui(t,Xt,Zs,!1)),Wt(t,o),((bn&2)===0||t!==An)&&(t===An&&((bn&2)===0&&(ho|=o),Jn===4&&ui(t,Xt,Zs,!1)),ea(t))}function $b(t,r,o){if((bn&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&t.expiredLanes)===0||Dt(t,r),f=c?rT(t,r):Nm(t,r,!0),m=c;do{if(f===0){sl&&!c&&ui(t,r,0,!1);break}else{if(o=t.current.alternate,m&&!nT(o)){f=Nm(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var S=t;f=wc;var U=S.current.memoizedState.isDehydrated;if(U&&(il(S,b).flags|=256),b=Nm(S,b,!1),b!==2){if(wm&&!U){S.errorRecoveryDisabledLanes|=m,ho|=m,f=4;break e}m=qs,qs=f,m!==null&&(qs===null?qs=m:qs.push.apply(qs,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){il(t,0),ui(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ui(c,r,Zs,!ii);break e;case 2:qs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=bh+300-zt(),10<f)){if(ui(c,r,Zs,!ii),Ct(c,0,!0)!==0)break e;Na=r,c.timeoutHandle=_0(Wb.bind(null,c,o,qs,wh,km,r,Zs,ho,rl,ii,m,"Throttled",-0,0),f);break e}Wb(c,o,qs,wh,km,r,Zs,ho,rl,ii,m,null,-0,0)}}break}while(!0);ea(t)}function Wb(t,r,o,c,f,m,b,S,U,te,ye,je,se,ue){if(t.timeoutHandle=-1,je=r.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ps},Vb(r,m,je);var ot=(m&62914560)===m?bh-zt():(m&4194048)===m?Fb-zt():0;if(ot=UT(je,ot),ot!==null){Na=m,t.cancelPendingCommit=ot(e0.bind(null,t,r,m,o,c,f,b,S,U,ye,je,null,se,ue)),ui(t,m,b,!te);return}}e0(t,r,m,o,c,f,b,S,U)}function nT(t){for(var r=t;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!Ks(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ui(t,r,o,c){r&=~_m,r&=~ho,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-Ue(f),b=1<<m;c[m]=-1,f&=~b}o!==0&&un(t,o,r)}function _h(){return(bn&6)===0?(kc(0),!1):!0}function Sm(){if(Kt!==null){if(_n===0)var t=Kt.return;else t=Kt,ya=no=null,qf(t),Qo=null,ac=0,t=Kt;for(;t!==null;)kb(t.alternate,t),t=t.return;Kt=null}}function il(t,r){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,_T(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),Na=0,Sm(),An=t,Kt=o=pa(t.current,null),Xt=r,_n=0,Js=null,ii=!1,sl=Dt(t,r),wm=!1,rl=Zs=_m=ho=oi=Jn=0,qs=wc=null,km=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-Ue(c),m=1<<f;r|=t[f],c&=~m}return Sa=r,qu(),o}function Gb(t,r){Ut=null,K.H=fc,r===Yo||r===Xu?(r=cv(),_n=3):r===Af?(r=cv(),_n=4):_n=r===am?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Js=r,Kt===null&&(Jn=1,hh(t,cr(r,t.current)))}function Kb(){var t=Qs.current;return t===null?!0:(Xt&4194048)===Xt?fr===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?t===fr:!1}function Yb(){var t=K.H;return K.H=fc,t===null?fc:t}function Qb(){var t=K.A;return K.A=eT,t}function kh(){Jn=4,ii||(Xt&4194048)!==Xt&&Qs.current!==null||(sl=!0),(oi&134217727)===0&&(ho&134217727)===0||An===null||ui(An,Xt,Zs,!1)}function Nm(t,r,o){var c=bn;bn|=2;var f=Yb(),m=Qb();(An!==t||Xt!==r)&&(wh=null,il(t,r)),r=!1;var b=Jn;e:do try{if(_n!==0&&Kt!==null){var S=Kt,U=Js;switch(_n){case 8:Sm(),b=6;break e;case 3:case 2:case 9:case 6:Qs.current===null&&(r=!0);var te=_n;if(_n=0,Js=null,ol(t,S,U,te),o&&sl){b=0;break e}break;default:te=_n,_n=0,Js=null,ol(t,S,U,te)}}sT(),b=Jn;break}catch(ye){Gb(t,ye)}while(!0);return r&&t.shellSuspendCounter++,ya=no=null,bn=c,K.H=f,K.A=m,Kt===null&&(An=null,Xt=0,qu()),b}function sT(){for(;Kt!==null;)Xb(Kt)}function rT(t,r){var o=bn;bn|=2;var c=Yb(),f=Qb();An!==t||Xt!==r?(wh=null,xh=zt()+500,il(t,r)):sl=Dt(t,r);e:do try{if(_n!==0&&Kt!==null){r=Kt;var m=Js;t:switch(_n){case 1:_n=0,Js=null,ol(t,r,m,1);break;case 2:case 9:if(ov(m)){_n=0,Js=null,Jb(r);break}r=function(){_n!==2&&_n!==9||An!==t||(_n=7),ea(t)},m.then(r,r);break e;case 3:_n=7;break e;case 4:_n=5;break e;case 7:ov(m)?(_n=0,Js=null,Jb(r)):(_n=0,Js=null,ol(t,r,m,7));break;case 5:var b=null;switch(Kt.tag){case 26:b=Kt.memoizedState;case 5:case 27:var S=Kt;if(b?O0(b):S.stateNode.complete){_n=0,Js=null;var U=S.sibling;if(U!==null)Kt=U;else{var te=S.return;te!==null?(Kt=te,Th(te)):Kt=null}break t}}_n=0,Js=null,ol(t,r,m,5);break;case 6:_n=0,Js=null,ol(t,r,m,6);break;case 8:Sm(),Jn=6;break e;default:throw Error(i(462))}}aT();break}catch(ye){Gb(t,ye)}while(!0);return ya=no=null,K.H=c,K.A=f,bn=o,Kt!==null?0:(An=null,Xt=0,qu(),Jn)}function aT(){for(;Kt!==null&&!is();)Xb(Kt)}function Xb(t){var r=wb(t.alternate,t,Sa);t.memoizedProps=t.pendingProps,r===null?Th(t):Kt=r}function Jb(t){var r=t,o=r.alternate;switch(r.tag){case 15:case 0:r=pb(o,r,r.pendingProps,r.type,void 0,Xt);break;case 11:r=pb(o,r,r.pendingProps,r.type.render,r.ref,Xt);break;case 5:qf(r);default:kb(o,r),r=Kt=Qy(r,Sa),r=wb(o,r,Sa)}t.memoizedProps=t.pendingProps,r===null?Th(t):Kt=r}function ol(t,r,o,c){ya=no=null,qf(r),Qo=null,ac=0;var f=r.return;try{if(Gk(t,f,r,o,Xt)){Jn=1,hh(t,cr(o,t.current)),Kt=null;return}}catch(m){if(f!==null)throw Kt=f,m;Jn=1,hh(t,cr(o,t.current)),Kt=null;return}r.flags&32768?(on||c===1?t=!0:sl||(Xt&536870912)!==0?t=!1:(ii=t=!0,(c===2||c===9||c===3||c===6)&&(c=Qs.current,c!==null&&c.tag===13&&(c.flags|=16384))),Zb(r,t)):Th(r)}function Th(t){var r=t;do{if((r.flags&32768)!==0){Zb(r,ii);return}t=r.return;var o=Qk(r.alternate,r,Sa);if(o!==null){Kt=o;return}if(r=r.sibling,r!==null){Kt=r;return}Kt=r=t}while(r!==null);Jn===0&&(Jn=5)}function Zb(t,r){do{var o=Xk(t.alternate,t);if(o!==null){o.flags&=32767,Kt=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(t=t.sibling,t!==null)){Kt=t;return}Kt=t=o}while(t!==null);Jn=6,Kt=null}function e0(t,r,o,c,f,m,b,S,U){t.cancelPendingCommit=null;do Eh();while(ms!==0);if((bn&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=gf,rn(t,o,m,b,S,U),t===An&&(Kt=An=null,Xt=0),al=r,ci=t,Na=o,Tm=m,Em=f,qb=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,cT(me,function(){return a0(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=K.T,K.T=null,f=we.p,we.p=2,b=bn,bn|=4;try{Jk(t,r,o)}finally{bn=b,we.p=f,K.T=c}}ms=1,t0(),n0(),s0()}}function t0(){if(ms===1){ms=0;var t=ci,r=al,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=K.T,K.T=null;var c=we.p;we.p=2;var f=bn;bn|=4;try{Pb(r,t);var m=Um,b=zy(t.containerInfo),S=m.focusedElem,U=m.selectionRange;if(b!==S&&S&&S.ownerDocument&&Uy(S.ownerDocument.documentElement,S)){if(U!==null&&hf(S)){var te=U.start,ye=U.end;if(ye===void 0&&(ye=te),"selectionStart"in S)S.selectionStart=te,S.selectionEnd=Math.min(ye,S.value.length);else{var je=S.ownerDocument||document,se=je&&je.defaultView||window;if(se.getSelection){var ue=se.getSelection(),ot=S.textContent.length,kt=Math.min(U.start,ot),Nn=U.end===void 0?kt:Math.min(U.end,ot);!ue.extend&&kt>Nn&&(b=Nn,Nn=kt,kt=b);var Y=By(S,kt),$=By(S,Nn);if(Y&&$&&(ue.rangeCount!==1||ue.anchorNode!==Y.node||ue.anchorOffset!==Y.offset||ue.focusNode!==$.node||ue.focusOffset!==$.offset)){var Z=je.createRange();Z.setStart(Y.node,Y.offset),ue.removeAllRanges(),kt>Nn?(ue.addRange(Z),ue.extend($.node,$.offset)):(Z.setEnd($.node,$.offset),ue.addRange(Z))}}}}for(je=[],ue=S;ue=ue.parentNode;)ue.nodeType===1&&je.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<je.length;S++){var _e=je[S];_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}Oh=!!Bm,Um=Bm=null}finally{bn=f,we.p=c,K.T=o}}t.current=r,ms=2}}function n0(){if(ms===2){ms=0;var t=ci,r=al,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=K.T,K.T=null;var c=we.p;we.p=2;var f=bn;bn|=4;try{Rb(t,r.alternate,r)}finally{bn=f,we.p=c,K.T=o}}ms=3}}function s0(){if(ms===4||ms===3){ms=0,It();var t=ci,r=al,o=Na,c=qb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ms=5:(ms=0,al=ci=null,r0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(li=null),fe(o),r=r.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(qe,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=K.T,f=we.p,we.p=2,K.T=null;try{for(var m=t.onRecoverableError,b=0;b<c.length;b++){var S=c[b];m(S.value,{componentStack:S.stack})}}finally{K.T=r,we.p=f}}(Na&3)!==0&&Eh(),ea(t),f=t.pendingLanes,(o&261930)!==0&&(f&42)!==0?t===jm?_c++:(_c=0,jm=t):_c=0,kc(0)}}function r0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,sc(r)))}function Eh(){return t0(),n0(),s0(),a0()}function a0(){if(ms!==5)return!1;var t=ci,r=Tm;Tm=0;var o=fe(Na),c=K.T,f=we.p;try{we.p=32>o?32:o,K.T=null,o=Em,Em=null;var m=ci,b=Na;if(ms=0,al=ci=null,Na=0,(bn&6)!==0)throw Error(i(331));var S=bn;if(bn|=4,Ub(m.current),Ob(m,m.current,b,o),bn=S,kc(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(qe,m)}catch{}return!0}finally{we.p=f,K.T=c,r0(t,r)}}function i0(t,r,o){r=cr(o,r),r=rm(t.stateNode,r,2),t=ni(t,r,2),t!==null&&(Wt(t,2),ea(t))}function kn(t,r,o){if(t.tag===3)i0(t,t,o);else for(;r!==null;){if(r.tag===3){i0(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(li===null||!li.has(c))){t=cr(o,t),o=ob(2),c=ni(r,o,2),c!==null&&(lb(o,c,r,t),Wt(c,2),ea(c));break}}r=r.return}}function Cm(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new tT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(wm=!0,f.add(o),t=iT.bind(null,t,r,o),r.then(t,t))}function iT(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,An===t&&(Xt&o)===o&&(Jn===4||Jn===3&&(Xt&62914560)===Xt&&300>zt()-bh?(bn&2)===0&&il(t,0):_m|=o,rl===Xt&&(rl=0)),ea(t)}function o0(t,r){r===0&&(r=Tt()),t=Zi(t,r),t!==null&&(Wt(t,r),ea(t))}function oT(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),o0(t,o)}function lT(t,r){var o=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),o0(t,o)}function cT(t,r){return Xe(t,r)}var jh=null,ll=null,Rm=!1,Sh=!1,Am=!1,hi=0;function ea(t){t!==ll&&t.next===null&&(ll===null?jh=ll=t:ll=ll.next=t),Sh=!0,Rm||(Rm=!0,hT())}function kc(t,r){if(!Am&&Sh){Am=!0;do for(var o=!1,c=jh;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var b=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-Ue(42|t)+1)-1,m&=f&~(b&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,h0(c,m))}else m=Xt,m=Ct(c,c===An?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Dt(c,m)||(o=!0,h0(c,m));c=c.next}while(o);Am=!1}}function uT(){l0()}function l0(){Sh=Rm=!1;var t=0;hi!==0&&wT()&&(t=hi);for(var r=zt(),o=null,c=jh;c!==null;){var f=c.next,m=c0(c,r);m===0?(c.next=null,o===null?jh=f:o.next=f,f===null&&(ll=o)):(o=c,(t!==0||(m&3)!==0)&&(Sh=!0)),c=f}ms!==0&&ms!==5||kc(t),hi!==0&&(hi=0)}function c0(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Ue(m),S=1<<b,U=f[b];U===-1?((S&o)===0||(S&c)!==0)&&(f[b]=Ft(S,r)):U<=r&&(t.expiredLanes|=S),m&=~S}if(r=An,o=Xt,o=Ct(t,t===r?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,o===0||t===r&&(_n===2||_n===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Gt(c),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||Dt(t,o)){if(r=o&-o,r===t.callbackPriority)return r;switch(c!==null&&Gt(c),fe(o)){case 2:case 8:o=wn;break;case 32:o=me;break;case 268435456:o=Re;break;default:o=me}return c=u0.bind(null,t),o=Xe(o,c),t.callbackPriority=r,t.callbackNode=o,r}return c!==null&&c!==null&&Gt(c),t.callbackPriority=2,t.callbackNode=null,2}function u0(t,r){if(ms!==0&&ms!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(Eh()&&t.callbackNode!==o)return null;var c=Xt;return c=Ct(t,t===An?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:($b(t,c,r),c0(t,zt()),t.callbackNode!=null&&t.callbackNode===o?u0.bind(null,t):null)}function h0(t,r){if(Eh())return null;$b(t,r,!0)}function hT(){kT(function(){(bn&6)!==0?Xe(Ht,uT):l0()})}function Im(){if(hi===0){var t=Go;t===0&&(t=Et,Et<<=1,(Et&261888)===0&&(Et=256)),hi=t}return hi}function d0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ha(""+t)}function f0(t,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,t.id&&o.setAttribute("form",t.id),r.parentNode.insertBefore(o,r),t=new FormData(t),o.parentNode.removeChild(o),t}function dT(t,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=d0((f[mt]||null).action),b=c.submitter;b&&(r=(r=b[mt]||null)?d0(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var S=new Gr("action","action",null,c,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hi!==0){var U=b?f0(f,b):new FormData(f);Jf(o,{pending:!0,data:U,method:f.method,action:m},null,U)}}else typeof m=="function"&&(S.preventDefault(),U=b?f0(f,b):new FormData(f),Jf(o,{pending:!0,data:U,method:f.method,action:m},m,U))},currentTarget:f}]})}}for(var Mm=0;Mm<pf.length;Mm++){var Dm=pf[Mm],fT=Dm.toLowerCase(),mT=Dm[0].toUpperCase()+Dm.slice(1);Cr(fT,"on"+mT)}Cr(Hy,"onAnimationEnd"),Cr($y,"onAnimationIteration"),Cr(Wy,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(Rk,"onTransitionRun"),Cr(Ak,"onTransitionStart"),Cr(Ik,"onTransitionCancel"),Cr(Gy,"onTransitionEnd"),Be("onMouseEnter",["mouseout","mouseover"]),Be("onMouseLeave",["mouseout","mouseover"]),Be("onPointerEnter",["pointerout","pointerover"]),Be("onPointerLeave",["pointerout","pointerover"]),He("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),He("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),He("onBeforeInput",["compositionend","keypress","textInput","paste"]),He("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),He("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),He("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tc));function m0(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var S=c[b],U=S.instance,te=S.currentTarget;if(S=S.listener,U!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=te;try{m(f)}catch(ye){Fu(ye)}f.currentTarget=null,m=U}else for(b=0;b<c.length;b++){if(S=c[b],U=S.instance,te=S.currentTarget,S=S.listener,U!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=te;try{m(f)}catch(ye){Fu(ye)}f.currentTarget=null,m=U}}}}function Yt(t,r){var o=r[dt];o===void 0&&(o=r[dt]=new Set);var c=t+"__bubble";o.has(c)||(p0(r,t,2,!1),o.add(c))}function Pm(t,r,o){var c=0;r&&(c|=4),p0(o,t,c,r)}var Nh="_reactListening"+Math.random().toString(36).slice(2);function Lm(t){if(!t[Nh]){t[Nh]=!0,G.forEach(function(o){o!=="selectionchange"&&(pT.has(o)||Pm(o,!1,t),Pm(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Nh]||(r[Nh]=!0,Pm("selectionchange",!1,r))}}function p0(t,r,o,c){switch(H0(r)){case 2:var f=qT;break;case 8:f=HT;break;default:f=Xm}o=f.bind(null,r,o,t),f=void 0,!$i||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function Om(t,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var S=c.stateNode.containerInfo;if(S===f)break;if(b===4)for(b=c.return;b!==null;){var U=b.tag;if((U===3||U===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;S!==null;){if(b=mn(S),b===null)return;if(U=b.tag,U===5||U===6||U===26||U===27){c=m=b;continue e}S=S.parentNode}}c=c.return}Wa(function(){var te=m,ye=ar(o),je=[];e:{var se=Ky.get(t);if(se!==void 0){var ue=Gr,ot=t;switch(t){case"keypress":if(Gi(o)===0)break e;case"keydown":case"keyup":ue=Bu;break;case"focusin":ot="focus",ue=Yi;break;case"focusout":ot="blur",ue=Yi;break;case"beforeblur":case"afterblur":ue=Yi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=v;break;case Hy:case $y:case Wy:ue=Iu;break;case Gy:ue=C;break;case"scroll":case"scrollend":ue=Kl;break;case"wheel":ue=le;break;case"copy":case"cut":case"paste":ue=Mu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=ma;break;case"toggle":case"beforetoggle":ue=Bt}var kt=(r&4)!==0,Nn=!kt&&(t==="scroll"||t==="scrollend"),Y=kt?se!==null?se+"Capture":null:se;kt=[];for(var $=te,Z;$!==null;){var _e=$;if(Z=_e.stateNode,_e=_e.tag,_e!==5&&_e!==26&&_e!==27||Z===null||Y===null||(_e=Er($,Y),_e!=null&&kt.push(Ec($,_e,Z))),Nn)break;$=$.return}0<kt.length&&(se=new ue(se,ot,null,o,ye),je.push({event:se,listeners:kt}))}}if((r&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",ue=t==="mouseout"||t==="pointerout",se&&o!==$l&&(ot=o.relatedTarget||o.fromElement)&&(mn(ot)||ot[tt]))break e;if((ue||se)&&(se=ye.window===ye?ye:(se=ye.ownerDocument)?se.defaultView||se.parentWindow:window,ue?(ot=o.relatedTarget||o.toElement,ue=te,ot=ot?mn(ot):null,ot!==null&&(Nn=u(ot),kt=ot.tag,ot!==Nn||kt!==5&&kt!==27&&kt!==6)&&(ot=null)):(ue=null,ot=te),ue!==ot)){if(kt=Yl,_e="onMouseLeave",Y="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(kt=ma,_e="onPointerLeave",Y="onPointerEnter",$="pointer"),Nn=ue==null?se:ce(ue),Z=ot==null?se:ce(ot),se=new kt(_e,$+"leave",ue,o,ye),se.target=Nn,se.relatedTarget=Z,_e=null,mn(ye)===te&&(kt=new kt(Y,$+"enter",ot,o,ye),kt.target=Z,kt.relatedTarget=Nn,_e=kt),Nn=_e,ue&&ot)t:{for(kt=gT,Y=ue,$=ot,Z=0,_e=Y;_e;_e=kt(_e))Z++;_e=0;for(var gt=$;gt;gt=kt(gt))_e++;for(;0<Z-_e;)Y=kt(Y),Z--;for(;0<_e-Z;)$=kt($),_e--;for(;Z--;){if(Y===$||$!==null&&Y===$.alternate){kt=Y;break t}Y=kt(Y),$=kt($)}kt=null}else kt=null;ue!==null&&g0(je,se,ue,kt,!1),ot!==null&&Nn!==null&&g0(je,Nn,ot,kt,!0)}}e:{if(se=te?ce(te):window,ue=se.nodeName&&se.nodeName.toLowerCase(),ue==="select"||ue==="input"&&se.type==="file")var gn=My;else if(Ay(se))if(Dy)gn=Sk;else{gn=Ek;var ut=Tk}else ue=se.nodeName,!ue||ue.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?te&&Cs(te.elementType)&&(gn=My):gn=jk;if(gn&&(gn=gn(t,te))){Iy(je,gn,o,ye);break e}ut&&ut(t,se,te),t==="focusout"&&te&&se.type==="number"&&te.memoizedProps.value!=null&&qa(se,"number",se.value)}switch(ut=te?ce(te):window,t){case"focusin":(Ay(ut)||ut.contentEditable==="true")&&(Bo=ut,df=te,ec=null);break;case"focusout":ec=df=Bo=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,Fy(je,o,ye);break;case"selectionchange":if(Ck)break;case"keydown":case"keyup":Fy(je,o,ye)}var qt;if(vn)e:{switch(t){case"compositionstart":var Jt="onCompositionStart";break e;case"compositionend":Jt="onCompositionEnd";break e;case"compositionupdate":Jt="onCompositionUpdate";break e}Jt=void 0}else Vo?Qi(t,o)&&(Jt="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Jt="onCompositionStart");Jt&&(Qr&&o.locale!=="ko"&&(Vo||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&Vo&&(qt=Gl()):(Wr=ye,Wl="value"in Wr?Wr.value:Wr.textContent,Vo=!0)),ut=Ch(te,Jt),0<ut.length&&(Jt=new Yr(Jt,t,null,o,ye),je.push({event:Jt,listeners:ut}),qt?Jt.data=qt:(qt=Oo(o),qt!==null&&(Jt.data=qt)))),(qt=or?xk(t,o):wk(t,o))&&(Jt=Ch(te,"onBeforeInput"),0<Jt.length&&(ut=new Yr("onBeforeInput","beforeinput",null,o,ye),je.push({event:ut,listeners:Jt}),ut.data=qt)),dT(je,t,te,o,ye)}m0(je,r)})}function Ec(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ch(t,r){for(var o=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Er(t,o),f!=null&&c.unshift(Ec(t,f,m)),f=Er(t,r),f!=null&&c.push(Ec(t,f,m))),t.tag===3)return c;t=t.return}return[]}function gT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function g0(t,r,o,c,f){for(var m=r._reactName,b=[];o!==null&&o!==c;){var S=o,U=S.alternate,te=S.stateNode;if(S=S.tag,U!==null&&U===c)break;S!==5&&S!==26&&S!==27||te===null||(U=te,f?(te=Er(o,m),te!=null&&b.unshift(Ec(o,te,U))):f||(te=Er(o,m),te!=null&&b.push(Ec(o,te,U)))),o=o.return}b.length!==0&&t.push({event:r,listeners:b})}var yT=/\r\n?/g,vT=/\u0000|\uFFFD/g;function y0(t){return(typeof t=="string"?t:""+t).replace(yT,`
`).replace(vT,"")}function v0(t,r){return r=y0(r),y0(t)===r}function Sn(t,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Kn(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Kn(t,""+c);break;case"className":ae(t,"class",c);break;case"tabIndex":ae(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ae(t,o,c);break;case"style":vs(t,c,m);break;case"data":if(r!=="object"){ae(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){t.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=Ha(""+c),t.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&Sn(t,r,"name",f.name,f,null),Sn(t,r,"formEncType",f.formEncType,f,null),Sn(t,r,"formMethod",f.formMethod,f,null),Sn(t,r,"formTarget",f.formTarget,f,null)):(Sn(t,r,"encType",f.encType,f,null),Sn(t,r,"method",f.method,f,null),Sn(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=Ha(""+c),t.setAttribute(o,c);break;case"onClick":c!=null&&(t.onclick=Ps);break;case"onScroll":c!=null&&Yt("scroll",t);break;case"onScrollEnd":c!=null&&Yt("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}o=Ha(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""+c):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":c===!0?t.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,c):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(o,c):t.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(o):t.setAttribute(o,c);break;case"popover":Yt("beforetoggle",t),Yt("toggle",t),he(t,"popover",c);break;case"xlinkActuate":Ce(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ce(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ce(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ce(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ce(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ce(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ce(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ce(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ce(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":he(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Hr.get(o)||o,he(t,o,c))}}function Vm(t,r,o,c,f,m){switch(o){case"style":vs(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"children":typeof c=="string"?Kn(t,c):(typeof c=="number"||typeof c=="bigint")&&Kn(t,""+c);break;case"onScroll":c!=null&&Yt("scroll",t);break;case"onScrollEnd":c!=null&&Yt("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Ps);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!J.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=t[mt]||null,m=m!=null?m[o]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(r,c,f);break e}o in t?t[o]=c:c===!0?t.setAttribute(o,""):he(t,o,c)}}}function ks(t,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",t),Yt("load",t);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Sn(t,r,m,b,o,null)}}f&&Sn(t,r,"srcSet",o.srcSet,o,null),c&&Sn(t,r,"src",o.src,o,null);return;case"input":Yt("invalid",t);var S=m=b=f=null,U=null,te=null;for(c in o)if(o.hasOwnProperty(c)){var ye=o[c];if(ye!=null)switch(c){case"name":f=ye;break;case"type":b=ye;break;case"checked":U=ye;break;case"defaultChecked":te=ye;break;case"value":m=ye;break;case"defaultValue":S=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(i(137,r));break;default:Sn(t,r,c,ye,o,null)}}qi(t,m,S,U,te,b,f,!1);return;case"select":Yt("invalid",t),c=b=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":b=S;break;case"multiple":c=S;default:Sn(t,r,f,S,o,null)}r=m,o=b,t.multiple=!!c,r!=null?wr(t,!!c,r,!1):o!=null&&wr(t,!!c,o,!0);return;case"textarea":Yt("invalid",t),m=f=c=null;for(b in o)if(o.hasOwnProperty(b)&&(S=o[b],S!=null))switch(b){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:Sn(t,r,b,S,o,null)}Gn(t,c,f,m);return;case"option":for(U in o)o.hasOwnProperty(U)&&(c=o[U],c!=null)&&(U==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":Sn(t,r,U,c,o,null));return;case"dialog":Yt("beforetoggle",t),Yt("toggle",t),Yt("cancel",t),Yt("close",t);break;case"iframe":case"object":Yt("load",t);break;case"video":case"audio":for(c=0;c<Tc.length;c++)Yt(Tc[c],t);break;case"image":Yt("error",t),Yt("load",t);break;case"details":Yt("toggle",t);break;case"embed":case"source":case"link":Yt("error",t),Yt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in o)if(o.hasOwnProperty(te)&&(c=o[te],c!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Sn(t,r,te,c,o,null)}return;default:if(Cs(r)){for(ye in o)o.hasOwnProperty(ye)&&(c=o[ye],c!==void 0&&Vm(t,r,ye,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&Sn(t,r,S,c,o,null))}function bT(t,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,S=null,U=null,te=null,ye=null;for(ue in o){var je=o[ue];if(o.hasOwnProperty(ue)&&je!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":U=je;default:c.hasOwnProperty(ue)||Sn(t,r,ue,null,c,je)}}for(var se in c){var ue=c[se];if(je=o[se],c.hasOwnProperty(se)&&(ue!=null||je!=null))switch(se){case"type":m=ue;break;case"name":f=ue;break;case"checked":te=ue;break;case"defaultChecked":ye=ue;break;case"value":b=ue;break;case"defaultValue":S=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,r));break;default:ue!==je&&Sn(t,r,se,ue,c,je)}}Fa(t,b,S,U,te,ye,m,f);return;case"select":ue=b=S=se=null;for(m in o)if(U=o[m],o.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":ue=U;default:c.hasOwnProperty(m)||Sn(t,r,m,null,c,U)}for(f in c)if(m=c[f],U=o[f],c.hasOwnProperty(f)&&(m!=null||U!=null))switch(f){case"value":se=m;break;case"defaultValue":S=m;break;case"multiple":b=m;default:m!==U&&Sn(t,r,f,m,c,U)}r=S,o=b,c=ue,se!=null?wr(t,!!o,se,!1):!!c!=!!o&&(r!=null?wr(t,!!o,r,!0):wr(t,!!o,o?[]:"",!1));return;case"textarea":ue=se=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Sn(t,r,S,null,c,f)}for(b in c)if(f=c[b],m=o[b],c.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":se=f;break;case"defaultValue":ue=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Sn(t,r,b,f,c,m)}hn(t,se,ue);return;case"option":for(var ot in o)se=o[ot],o.hasOwnProperty(ot)&&se!=null&&!c.hasOwnProperty(ot)&&(ot==="selected"?t.selected=!1:Sn(t,r,ot,null,c,se));for(U in c)se=c[U],ue=o[U],c.hasOwnProperty(U)&&se!==ue&&(se!=null||ue!=null)&&(U==="selected"?t.selected=se&&typeof se!="function"&&typeof se!="symbol":Sn(t,r,U,se,c,ue));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in o)se=o[kt],o.hasOwnProperty(kt)&&se!=null&&!c.hasOwnProperty(kt)&&Sn(t,r,kt,null,c,se);for(te in c)if(se=c[te],ue=o[te],c.hasOwnProperty(te)&&se!==ue&&(se!=null||ue!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,r));break;default:Sn(t,r,te,se,c,ue)}return;default:if(Cs(r)){for(var Nn in o)se=o[Nn],o.hasOwnProperty(Nn)&&se!==void 0&&!c.hasOwnProperty(Nn)&&Vm(t,r,Nn,void 0,c,se);for(ye in c)se=c[ye],ue=o[ye],!c.hasOwnProperty(ye)||se===ue||se===void 0&&ue===void 0||Vm(t,r,ye,se,c,ue);return}}for(var Y in o)se=o[Y],o.hasOwnProperty(Y)&&se!=null&&!c.hasOwnProperty(Y)&&Sn(t,r,Y,null,c,se);for(je in c)se=c[je],ue=o[je],!c.hasOwnProperty(je)||se===ue||se==null&&ue==null||Sn(t,r,je,se,c,ue)}function b0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,b=f.initiatorType,S=f.duration;if(m&&S&&b0(b)){for(b=0,S=f.responseEnd,c+=1;c<o.length;c++){var U=o[c],te=U.startTime;if(te>S)break;var ye=U.transferSize,je=U.initiatorType;ye&&b0(je)&&(U=U.responseEnd,b+=ye*(U<S?1:(S-te)/(U-te)))}if(--c,r+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bm=null,Um=null;function Rh(t){return t.nodeType===9?t:t.ownerDocument}function x0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function zm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Fm=null;function wT(){var t=window.event;return t&&t.type==="popstate"?t===Fm?!1:(Fm=t,!0):(Fm=null,!1)}var _0=typeof setTimeout=="function"?setTimeout:void 0,_T=typeof clearTimeout=="function"?clearTimeout:void 0,k0=typeof Promise=="function"?Promise:void 0,kT=typeof queueMicrotask=="function"?queueMicrotask:typeof k0<"u"?function(t){return k0.resolve(null).then(t).catch(TT)}:_0;function TT(t){setTimeout(function(){throw t})}function di(t){return t==="head"}function T0(t,r){var o=r,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){t.removeChild(f),dl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")jc(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,jc(o);for(var m=o.firstChild;m;){var b=m.nextSibling,S=m.nodeName;m[Wn]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=b}}else o==="body"&&jc(t.ownerDocument.body);o=f}while(o);dl(r)}function E0(t,r){var o=t;t=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=c}while(o)}function qm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":qm(o),Qn(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function ET(t,r,o,c){for(;t.nodeType===1;){var f=o;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Wn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=mr(t.nextSibling),t===null)break}return null}function jT(t,r,o){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=mr(t.nextSibling),t===null))return null;return t}function j0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=mr(t.nextSibling),t===null))return null;return t}function Hm(t){return t.data==="$?"||t.data==="$~"}function $m(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ST(t,r){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function mr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Wm=null;function S0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(r===0)return mr(t.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}t=t.nextSibling}return null}function N0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return t;r--}else o!=="/$"&&o!=="/&"||r++}t=t.previousSibling}return null}function C0(t,r,o){switch(r=Rh(o),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function jc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Qn(t)}var pr=new Map,R0=new Set;function Ah(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ca=we.d;we.d={f:NT,r:CT,D:RT,C:AT,L:IT,m:MT,X:PT,S:DT,M:LT};function NT(){var t=Ca.f(),r=_h();return t||r}function CT(t){var r=F(t);r!==null&&r.tag===5&&r.type==="form"?Gv(r):Ca.r(t)}var cl=typeof document>"u"?null:document;function A0(t,r,o){var c=cl;if(c&&typeof r=="string"&&r){var f=Pn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),R0.has(f)||(R0.add(f),t={rel:t,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),ks(r,"link",t),R(r),c.head.appendChild(r)))}}function RT(t){Ca.D(t),A0("dns-prefetch",t,null)}function AT(t,r){Ca.C(t,r),A0("preconnect",t,r)}function IT(t,r,o){Ca.L(t,r,o);var c=cl;if(c&&t&&r){var f='link[rel="preload"][as="'+Pn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Pn(o.imageSizes)+'"]')):f+='[href="'+Pn(t)+'"]';var m=f;switch(r){case"style":m=ul(t);break;case"script":m=hl(t)}pr.has(m)||(t=k({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:t,as:r},o),pr.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(Sc(m))||r==="script"&&c.querySelector(Nc(m))||(r=c.createElement("link"),ks(r,"link",t),R(r),c.head.appendChild(r)))}}function MT(t,r){Ca.m(t,r);var o=cl;if(o&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Pn(c)+'"][href="'+Pn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=hl(t)}if(!pr.has(m)&&(t=k({rel:"modulepreload",href:t},r),pr.set(m,t),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Nc(m)))return}c=o.createElement("link"),ks(c,"link",t),R(c),o.head.appendChild(c)}}}function DT(t,r,o){Ca.S(t,r,o);var c=cl;if(c&&t){var f=T(c).hoistableStyles,m=ul(t);r=r||"default";var b=f.get(m);if(!b){var S={loading:0,preload:null};if(b=c.querySelector(Sc(m)))S.loading=5;else{t=k({rel:"stylesheet",href:t,"data-precedence":r},o),(o=pr.get(m))&&Gm(t,o);var U=b=c.createElement("link");R(U),ks(U,"link",t),U._p=new Promise(function(te,ye){U.onload=te,U.onerror=ye}),U.addEventListener("load",function(){S.loading|=1}),U.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Ih(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:S},f.set(m,b)}}}function PT(t,r){Ca.X(t,r);var o=cl;if(o&&t){var c=T(o).hoistableScripts,f=hl(t),m=c.get(f);m||(m=o.querySelector(Nc(f)),m||(t=k({src:t,async:!0},r),(r=pr.get(f))&&Km(t,r),m=o.createElement("script"),R(m),ks(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function LT(t,r){Ca.M(t,r);var o=cl;if(o&&t){var c=T(o).hoistableScripts,f=hl(t),m=c.get(f);m||(m=o.querySelector(Nc(f)),m||(t=k({src:t,async:!0,type:"module"},r),(r=pr.get(f))&&Km(t,r),m=o.createElement("script"),R(m),ks(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function I0(t,r,o,c){var f=(f=Me.current)?Ah(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=ul(o.href),o=T(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=ul(o.href);var m=T(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(Sc(t)))&&!m._p&&(b.instance=m,b.state.loading=5),pr.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},pr.set(t,o),m||OT(f,t,o,b.state))),r&&c===null)throw Error(i(528,""));return b}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=hl(o),o=T(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function ul(t){return'href="'+Pn(t)+'"'}function Sc(t){return'link[rel="stylesheet"]['+t+"]"}function M0(t){return k({},t,{"data-precedence":t.precedence,precedence:null})}function OT(t,r,o,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),ks(r,"link",o),R(r),t.head.appendChild(r))}function hl(t){return'[src="'+Pn(t)+'"]'}function Nc(t){return"script[async]"+t}function D0(t,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+Pn(o.href)+'"]');if(c)return r.instance=c,R(c),c;var f=k({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),R(c),ks(c,"style",f),Ih(c,o.precedence,t),r.instance=c;case"stylesheet":f=ul(o.href);var m=t.querySelector(Sc(f));if(m)return r.state.loading|=4,r.instance=m,R(m),m;c=M0(o),(f=pr.get(f))&&Gm(c,f),m=(t.ownerDocument||t).createElement("link"),R(m);var b=m;return b._p=new Promise(function(S,U){b.onload=S,b.onerror=U}),ks(m,"link",c),r.state.loading|=4,Ih(m,o.precedence,t),r.instance=m;case"script":return m=hl(o.src),(f=t.querySelector(Nc(m)))?(r.instance=f,R(f),f):(c=o,(f=pr.get(m))&&(c=k({},o),Km(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),R(f),ks(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Ih(c,o.precedence,t));return r.instance}function Ih(t,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,b=0;b<c.length;b++){var S=c[b];if(S.dataset.precedence===r)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(t,r.firstChild))}function Gm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Km(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Mh=null;function P0(t,r,o){if(Mh===null){var c=new Map,f=Mh=new Map;f.set(o,c)}else f=Mh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(t))return c;for(c.set(t,null),o=o.getElementsByTagName(t),f=0;f<o.length;f++){var m=o[f];if(!(m[Wn]||m[We]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=t+b;var S=c.get(b);S?S.push(m):c.set(b,[m])}}return c}function L0(t,r,o){t=t.ownerDocument||t,t.head.insertBefore(o,r==="title"?t.querySelector("head > title"):null)}function VT(t,r,o){if(o===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function O0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function BT(t,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=ul(c.href),m=r.querySelector(Sc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Dh.bind(t),r.then(t,t)),o.state.loading|=4,o.instance=m,R(m);return}m=r.ownerDocument||r,c=M0(c),(f=pr.get(f))&&Gm(c,f),m=m.createElement("link"),R(m);var b=m;b._p=new Promise(function(S,U){b.onload=S,b.onerror=U}),ks(m,"link",c),o.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Dh.bind(t),r.addEventListener("load",o),r.addEventListener("error",o))}}var Ym=0;function UT(t,r){return t.stylesheets&&t.count===0&&Lh(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var c=setTimeout(function(){if(t.stylesheets&&Lh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Ym===0&&(Ym=62500*xT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Lh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Ym?50:800)+r);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Dh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Lh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ph=null;function Lh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ph=new Map,r.forEach(zT,t),Ph=null,Dh.call(t))}function zT(t,r){if(!(r.state.loading&4)){var o=Ph.get(t);if(o)var c=o.get(null);else{o=new Map,Ph.set(t,o);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}f=r.instance,b=f.getAttribute("data-precedence"),m=o.get(b)||c,m===c&&o.set(null,f),o.set(b,f),this.count++,c=Dh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Cc={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Le,_currentValue2:Le,_threadCount:0};function FT(t,r,o,c,f,m,b,S,U){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sn(0),this.hiddenUpdates=sn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function V0(t,r,o,c,f,m,b,S,U,te,ye,je){return t=new FT(t,r,o,b,U,te,ye,je,S),r=1,m===!0&&(r|=24),m=Ys(3,null,null,r),t.current=m,m.stateNode=t,r=Nf(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},If(m),t}function B0(t){return t?(t=Fo,t):Fo}function U0(t,r,o,c,f,m){f=B0(f),c.context===null?c.context=f:c.pendingContext=f,c=ti(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=ni(t,c,r),o!==null&&(Hs(o,t,r),oc(o,t,r))}function z0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Qm(t,r){z0(t,r),(t=t.alternate)&&z0(t,r)}function F0(t){if(t.tag===13||t.tag===31){var r=Zi(t,67108864);r!==null&&Hs(r,t,67108864),Qm(t,67108864)}}function q0(t){if(t.tag===13||t.tag===31){var r=er();r=q(r);var o=Zi(t,r);o!==null&&Hs(o,t,r),Qm(t,r)}}var Oh=!0;function qT(t,r,o,c){var f=K.T;K.T=null;var m=we.p;try{we.p=2,Xm(t,r,o,c)}finally{we.p=m,K.T=f}}function HT(t,r,o,c){var f=K.T;K.T=null;var m=we.p;try{we.p=8,Xm(t,r,o,c)}finally{we.p=m,K.T=f}}function Xm(t,r,o,c){if(Oh){var f=Jm(c);if(f===null)Om(t,r,c,Vh,o),$0(t,c);else if(WT(f,t,r,o,c))c.stopPropagation();else if($0(t,c),r&4&&-1<$T.indexOf(t)){for(;f!==null;){var m=F(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=jt(m.pendingLanes);if(b!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var U=1<<31-Ue(b);S.entanglements[1]|=U,b&=~U}ea(m),(bn&6)===0&&(xh=zt()+500,kc(0))}}break;case 31:case 13:S=Zi(m,2),S!==null&&Hs(S,m,2),_h(),Qm(m,2)}if(m=Jm(c),m===null&&Om(t,r,c,Vh,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Om(t,r,c,null,o)}}function Jm(t){return t=ar(t),Zm(t)}var Vh=null;function Zm(t){if(Vh=null,t=mn(t),t!==null){var r=u(t);if(r===null)t=null;else{var o=r.tag;if(o===13){if(t=d(r),t!==null)return t;t=null}else if(o===31){if(t=p(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Vh=t,null}function H0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bn()){case Ht:return 2;case wn:return 8;case me:case Te:return 32;case Re:return 268435456;default:return 32}default:return 32}}var ep=!1,fi=null,mi=null,pi=null,Rc=new Map,Ac=new Map,gi=[],$T="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $0(t,r){switch(t){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":Rc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(r.pointerId)}}function Ic(t,r,o,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=F(r),r!==null&&F0(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function WT(t,r,o,c,f){switch(r){case"focusin":return fi=Ic(fi,t,r,o,c,f),!0;case"dragenter":return mi=Ic(mi,t,r,o,c,f),!0;case"mouseover":return pi=Ic(pi,t,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Rc.set(m,Ic(Rc.get(m)||null,t,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Ac.set(m,Ic(Ac.get(m)||null,t,r,o,c,f)),!0}return!1}function W0(t){var r=mn(t.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=d(o),r!==null){t.blockedOn=r,ve(t.priority,function(){q0(o)});return}}else if(r===31){if(r=p(o),r!==null){t.blockedOn=r,ve(t.priority,function(){q0(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=Jm(t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);$l=c,o.target.dispatchEvent(c),$l=null}else return r=F(o),r!==null&&F0(r),t.blockedOn=o,!1;r.shift()}return!0}function G0(t,r,o){Bh(t)&&o.delete(r)}function GT(){ep=!1,fi!==null&&Bh(fi)&&(fi=null),mi!==null&&Bh(mi)&&(mi=null),pi!==null&&Bh(pi)&&(pi=null),Rc.forEach(G0),Ac.forEach(G0)}function Uh(t,r){t.blockedOn===r&&(t.blockedOn=null,ep||(ep=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,GT)))}var zh=null;function K0(t){zh!==t&&(zh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){zh===t&&(zh=null);for(var r=0;r<t.length;r+=3){var o=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(Zm(c||o)===null)continue;break}var m=F(o);m!==null&&(t.splice(r,3),r-=3,Jf(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function dl(t){function r(U){return Uh(U,t)}fi!==null&&Uh(fi,t),mi!==null&&Uh(mi,t),pi!==null&&Uh(pi,t),Rc.forEach(r),Ac.forEach(r);for(var o=0;o<gi.length;o++){var c=gi[o];c.blockedOn===t&&(c.blockedOn=null)}for(;0<gi.length&&(o=gi[0],o.blockedOn===null);)W0(o),o.blockedOn===null&&gi.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],b=f[mt]||null;if(typeof m=="function")b||K0(o);else if(b){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[mt]||null)S=b.formAction;else if(Zm(f)!==null)continue}else S=b.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),K0(o)}}}function Y0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function tp(t){this._internalRoot=t}Fh.prototype.render=tp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=er();U0(o,c,t,r,null,null)},Fh.prototype.unmount=tp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;U0(t.current,2,null,t,null,null),_h(),r[tt]=null}};function Fh(t){this._internalRoot=t}Fh.prototype.unstable_scheduleHydration=function(t){if(t){var r=ge();t={blockedOn:null,target:t,priority:r};for(var o=0;o<gi.length&&r!==0&&r<gi[o].priority;o++);gi.splice(o,0,t),o===0&&W0(t)}};var Q0=e.version;if(Q0!=="19.2.4")throw Error(i(527,Q0,"19.2.4"));we.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var KT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qh.isDisabled&&qh.supportsFiber)try{qe=qh.inject(KT),et=qh}catch{}}return Dc.createRoot=function(t,r){if(!l(t))throw Error(i(299));var o=!1,c="",f=sb,m=rb,b=ab;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=V0(t,1,!1,null,null,o,c,null,f,m,b,Y0),t[tt]=r.current,Lm(t),new tp(r)},Dc.hydrateRoot=function(t,r,o){if(!l(t))throw Error(i(299));var c=!1,f="",m=sb,b=rb,S=ab,U=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(U=o.formState)),r=V0(t,1,!0,r,o??null,c,f,U,m,b,S,Y0),r.context=B0(null),o=r.current,c=er(),c=q(c),f=ti(c),f.callback=null,ni(o,f,c),o=c,r.current.lanes=o,Wt(r,o),ea(r),t[tt]=r.current,Lm(t),new Fh(r)},Dc.version="19.2.4",Dc}var i1;function rE(){if(i1)return rp.exports;i1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),rp.exports=sE(),rp.exports}var aE=rE();const iE="modulepreload",oE=function(s){return"/login/"+s},o1={},xr=function(e,n,i){let l=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");l=g(n.map(y=>{if(y=oE(y),y in o1)return;o1[y]=!0;const x=y.endsWith(".css"),k=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${k}`))return;const j=document.createElement("link");if(j.rel=x?"stylesheet":iE,x||(j.as="script"),j.crossOrigin="",j.href=y,p&&j.setAttribute("nonce",p),document.head.appendChild(j),x)return new Promise((L,H)=>{j.addEventListener("load",L),j.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var l1="popstate";function lE(s={}){function e(i,l){let{pathname:u,search:d,hash:p}=i.location;return Bp("",{pathname:u,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:eu(l)}return uE(e,n,null,s)}function Hn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function br(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cE(){return Math.random().toString(36).substring(2,10)}function c1(s,e){return{usr:s.state,key:s.key,idx:e}}function Bp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ll(e):e,state:n,key:e&&e.key||i||cE()}}function eu({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Ll(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function uE(s,e,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,d=l.history,p="POP",g=null,y=x();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function x(){return(d.state||{idx:null}).idx}function k(){p="POP";let O=x(),ee=O==null?null:O-y;y=O,g&&g({action:p,location:B.location,delta:ee})}function j(O,ee){p="PUSH";let Q=Bp(B.location,O,ee);y=x()+1;let oe=c1(Q,y),be=B.createHref(Q);try{d.pushState(oe,"",be)}catch(Ve){if(Ve instanceof DOMException&&Ve.name==="DataCloneError")throw Ve;l.location.assign(be)}u&&g&&g({action:p,location:B.location,delta:1})}function L(O,ee){p="REPLACE";let Q=Bp(B.location,O,ee);y=x();let oe=c1(Q,y),be=B.createHref(Q);d.replaceState(oe,"",be),u&&g&&g({action:p,location:B.location,delta:0})}function H(O){return hE(O)}let B={get action(){return p},get location(){return s(l,d)},listen(O){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(l1,k),g=O,()=>{l.removeEventListener(l1,k),g=null}},createHref(O){return e(l,O)},createURL:H,encodeLocation(O){let ee=H(O);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:j,replace:L,go(O){return d.go(O)}};return B}function hE(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Hn(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:eu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function ux(s,e,n="/"){return dE(s,e,n,!1)}function dE(s,e,n,i){let l=typeof e=="string"?Ll(e):e,u=Pa(l.pathname||"/",n);if(u==null)return null;let d=hx(s);fE(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=TE(u);p=_E(d[g],y,i)}return p}function hx(s,e=[],n=[],i="",l=!1){let u=(d,p,g=l,y)=>{let x={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&g)return;Hn(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let k=Ia([i,x.relativePath]),j=n.concat(x);d.children&&d.children.length>0&&(Hn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),hx(d.children,e,j,k,g)),!(d.path==null&&!d.index)&&e.push({path:k,score:xE(k,d.index),routesMeta:j})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of dx(d.path))u(d,p,!0,g)}),e}function dx(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let d=dx(i.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function fE(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:wE(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var mE=/^:[\w-]+$/,pE=3,gE=2,yE=1,vE=10,bE=-2,u1=s=>s==="*";function xE(s,e){let n=s.split("/"),i=n.length;return n.some(u1)&&(i+=bE),e&&(i+=gE),n.filter(l=>!u1(l)).reduce((l,u)=>l+(mE.test(u)?pE:u===""?yE:vE),i)}function wE(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function _E(s,e,n=!1){let{routesMeta:i}=s,l={},u="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,x=u==="/"?e:e.slice(u.length)||"/",k=yd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),j=g.route;if(!k&&y&&n&&!i[i.length-1].route.index&&(k=yd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!k)return null;Object.assign(l,k.params),d.push({params:l,pathname:Ia([u,k.pathname]),pathnameBase:NE(Ia([u,k.pathnameBase])),route:j}),k.pathnameBase!=="/"&&(u=Ia([u,k.pathnameBase]))}return d}function yd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=kE(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:x,isOptional:k},j)=>{if(x==="*"){let H=p[j]||"";d=u.slice(0,u.length-H.length).replace(/(.)\/+$/,"$1")}const L=p[j];return k&&!L?y[x]=void 0:y[x]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function kE(s,e=!1,n=!0){br(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function TE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return br(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Pa(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var EE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function jE(s,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof s=="string"?Ll(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=h1(n.substring(1),"/"):u=h1(n,e)):u=e,{pathname:u,search:CE(i),hash:RE(l)}}function h1(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function lp(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SE(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pg(s){let e=SE(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function gg(s,e,n,i=!1){let l;typeof s=="string"?l=Ll(s):(l={...s},Hn(!l.pathname||!l.pathname.includes("?"),lp("?","pathname","search",l)),Hn(!l.pathname||!l.pathname.includes("#"),lp("#","pathname","hash",l)),Hn(!l.search||!l.search.includes("#"),lp("#","search","hash",l)));let u=s===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=n;else{let k=e.length-1;if(!i&&d.startsWith("..")){let j=d.split("/");for(;j[0]==="..";)j.shift(),k-=1;l.pathname=j.join("/")}p=k>=0?e[k]:"/"}let g=jE(l,p),y=d&&d!=="/"&&d.endsWith("/"),x=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var Ia=s=>s.join("/").replace(/\/\/+/g,"/"),NE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),CE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,RE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,AE=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function IE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function ME(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var fx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mx(s,e){let n=s;if(typeof n!="string"||!EE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(fx)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=Pa(d.pathname,e);d.origin===u.origin&&p!=null?n=p+d.search+d.hash:l=!0}catch{br(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var px=["POST","PUT","PATCH","DELETE"];new Set(px);var DE=["GET",...px];new Set(DE);var Ol=_.createContext(null);Ol.displayName="DataRouter";var Od=_.createContext(null);Od.displayName="DataRouterState";var PE=_.createContext(!1),gx=_.createContext({isTransitioning:!1});gx.displayName="ViewTransition";var LE=_.createContext(new Map);LE.displayName="Fetchers";var OE=_.createContext(null);OE.displayName="Await";var sr=_.createContext(null);sr.displayName="Navigation";var mu=_.createContext(null);mu.displayName="Location";var zr=_.createContext({outlet:null,matches:[],isDataRoute:!1});zr.displayName="Route";var yg=_.createContext(null);yg.displayName="RouteError";var yx="REACT_ROUTER_ERROR",VE="REDIRECT",BE="ROUTE_ERROR_RESPONSE";function UE(s){if(s.startsWith(`${yx}:${VE}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function zE(s){if(s.startsWith(`${yx}:${BE}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new AE(e.status,e.statusText,e.data)}catch{}}function FE(s,{relative:e}={}){Hn(Vl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=_.useContext(sr),{hash:l,pathname:u,search:d}=pu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Ia([n,u])),i.createHref({pathname:p,search:d,hash:l})}function Vl(){return _.useContext(mu)!=null}function Fr(){return Hn(Vl(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(mu).location}var vx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bx(s){_.useContext(sr).static||_.useLayoutEffect(s)}function Ss(){let{isDataRoute:s}=_.useContext(zr);return s?nj():qE()}function qE(){Hn(Vl(),"useNavigate() may be used only in the context of a <Router> component.");let s=_.useContext(Ol),{basename:e,navigator:n}=_.useContext(sr),{matches:i}=_.useContext(zr),{pathname:l}=Fr(),u=JSON.stringify(pg(i)),d=_.useRef(!1);return bx(()=>{d.current=!0}),_.useCallback((g,y={})=>{if(br(d.current,vx),!d.current)return;if(typeof g=="number"){n.go(g);return}let x=gg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Ia([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,u,l,s])}_.createContext(null);function HE(){let{matches:s}=_.useContext(zr),e=s[s.length-1];return e?e.params:{}}function pu(s,{relative:e}={}){let{matches:n}=_.useContext(zr),{pathname:i}=Fr(),l=JSON.stringify(pg(n));return _.useMemo(()=>gg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function $E(s,e){return xx(s,e)}function xx(s,e,n,i,l){Hn(Vl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=_.useContext(sr),{matches:d}=_.useContext(zr),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",x=p?p.pathnameBase:"/",k=p&&p.route;{let Q=k&&k.path||"";_x(y,!k||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let j=Fr(),L;if(e){let Q=typeof e=="string"?Ll(e):e;Hn(x==="/"||Q.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),L=Q}else L=j;let H=L.pathname||"/",B=H;if(x!=="/"){let Q=x.replace(/^\//,"").split("/");B="/"+H.replace(/^\//,"").split("/").slice(Q.length).join("/")}let O=ux(s,{pathname:B});br(k||O!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),br(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ee=QE(O&&O.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:Ia([x,u.encodeLocation?u.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?x:Ia([x,u.encodeLocation?u.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),d,n,i,l);return e&&ee?_.createElement(mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},ee):ee}function WE(){let s=tj(),e=IE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:l},n):null,d)}var GE=_.createElement(WE,null),wx=class extends _.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=zE(s.digest);n&&(s=n)}let e=s!==void 0?_.createElement(zr.Provider,{value:this.props.routeContext},_.createElement(yg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?_.createElement(KE,{error:s},e):e}};wx.contextType=PE;var cp=new WeakMap;function KE({children:s,error:e}){let{basename:n}=_.useContext(sr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=UE(e.digest);if(i){let l=cp.get(e);if(l)throw l;let u=mx(i.location,n);if(fx&&!cp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw cp.set(e,d),d}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function YE({routeContext:s,match:e,children:n}){let i=_.useContext(Ol);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(zr.Provider,{value:s},n)}function QE(s,e=[],n=null,i=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,d=n?.errors;if(d!=null){let x=u.findIndex(k=>k.route.id&&d?.[k.route.id]!==void 0);Hn(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,x+1))}let p=!1,g=-1;if(n)for(let x=0;x<u.length;x++){let k=u[x];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(g=x),k.route.id){let{loaderData:j,errors:L}=n,H=k.route.loader&&!j.hasOwnProperty(k.route.id)&&(!L||L[k.route.id]===void 0);if(k.route.lazy||H){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&i?(x,k)=>{i(x,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:ME(n.matches),errorInfo:k})}:void 0;return u.reduceRight((x,k,j)=>{let L,H=!1,B=null,O=null;n&&(L=d&&k.route.id?d[k.route.id]:void 0,B=k.route.errorElement||GE,p&&(g<0&&j===0?(_x("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,O=null):g===j&&(H=!0,O=k.route.hydrateFallbackElement||null)));let ee=e.concat(u.slice(0,j+1)),Q=()=>{let oe;return L?oe=B:H?oe=O:k.route.Component?oe=_.createElement(k.route.Component,null):k.route.element?oe=k.route.element:oe=x,_.createElement(YE,{match:k,routeContext:{outlet:x,matches:ee,isDataRoute:n!=null},children:oe})};return n&&(k.route.ErrorBoundary||k.route.errorElement||j===0)?_.createElement(wx,{location:n.location,revalidation:n.revalidation,component:B,error:L,children:Q(),routeContext:{outlet:null,matches:ee,isDataRoute:!0},onError:y}):Q()},null)}function vg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XE(s){let e=_.useContext(Ol);return Hn(e,vg(s)),e}function JE(s){let e=_.useContext(Od);return Hn(e,vg(s)),e}function ZE(s){let e=_.useContext(zr);return Hn(e,vg(s)),e}function bg(s){let e=ZE(s),n=e.matches[e.matches.length-1];return Hn(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function ej(){return bg("useRouteId")}function tj(){let s=_.useContext(yg),e=JE("useRouteError"),n=bg("useRouteError");return s!==void 0?s:e.errors?.[n]}function nj(){let{router:s}=XE("useNavigate"),e=bg("useNavigate"),n=_.useRef(!1);return bx(()=>{n.current=!0}),_.useCallback(async(l,u={})=>{br(n.current,vx),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var d1={};function _x(s,e,n){!e&&!d1[s]&&(d1[s]=!0,br(!1,n))}_.memo(sj);function sj({routes:s,future:e,state:n,onError:i}){return xx(s,void 0,n,i,e)}function rj({to:s,replace:e,state:n,relative:i}){Hn(Vl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=_.useContext(sr);br(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext(zr),{pathname:d}=Fr(),p=Ss(),g=gg(s,pg(u),d,i==="path"),y=JSON.stringify(g);return _.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function qn(s){Hn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aj({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){Hn(!Vl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=_.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[p,l,u,d]);typeof n=="string"&&(n=Ll(n));let{pathname:y="/",search:x="",hash:k="",state:j=null,key:L="default"}=n,H=_.useMemo(()=>{let B=Pa(y,p);return B==null?null:{location:{pathname:B,search:x,hash:k,state:j,key:L},navigationType:i}},[p,y,x,k,j,L,i]);return br(H!=null,`<Router basename="${p}"> is not able to match the URL "${y}${x}${k}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:_.createElement(sr.Provider,{value:g},_.createElement(mu.Provider,{children:e,value:H}))}function ij({children:s,location:e}){return $E(Up(s),e)}function Up(s,e=[]){let n=[];return _.Children.forEach(s,(i,l)=>{if(!_.isValidElement(i))return;let u=[...e,l];if(i.type===_.Fragment){n.push.apply(n,Up(i.props.children,u));return}Hn(i.type===qn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Hn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Up(i.props.children,u)),n.push(d)}),n}var rd="get",ad="application/x-www-form-urlencoded";function Vd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function oj(s){return Vd(s)&&s.tagName.toLowerCase()==="button"}function lj(s){return Vd(s)&&s.tagName.toLowerCase()==="form"}function cj(s){return Vd(s)&&s.tagName.toLowerCase()==="input"}function uj(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function hj(s,e){return s.button===0&&(!e||e==="_self")&&!uj(s)}function zp(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let i=s[n];return e.concat(Array.isArray(i)?i.map(l=>[n,l]):[[n,i]])},[]))}function dj(s,e){let n=zp(s);return e&&e.forEach((i,l)=>{n.has(l)||e.getAll(l).forEach(u=>{n.append(l,u)})}),n}var Hh=null;function fj(){if(Hh===null)try{new FormData(document.createElement("form"),0),Hh=!1}catch{Hh=!0}return Hh}var mj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function up(s){return s!=null&&!mj.has(s)?(br(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ad}"`),null):s}function pj(s,e){let n,i,l,u,d;if(lj(s)){let p=s.getAttribute("action");i=p?Pa(p,e):null,n=s.getAttribute("method")||rd,l=up(s.getAttribute("enctype"))||ad,u=new FormData(s)}else if(oj(s)||cj(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?Pa(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||rd,l=up(s.getAttribute("formenctype"))||up(p.getAttribute("enctype"))||ad,u=new FormData(p,s),!fj()){let{name:y,type:x,value:k}=s;if(x==="image"){let j=y?`${y}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else y&&u.append(y,k)}}else{if(Vd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rd,i=null,l=ad,d=s}return u&&l==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function gj(s,e,n,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&Pa(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function yj(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vj(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function bj(s,e,n){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await yj(u,n);return d.links?d.links():[]}return[]}));return kj(i.flat(1).filter(vj).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function f1(s,e,n,i,l,u){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let x=i.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let k=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function xj(s,e,{includeHydrateFallback:n}={}){return wj(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function wj(s){return[...new Set(s)]}function _j(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function kj(s,e){let n=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(_j(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function kx(){let s=_.useContext(Ol);return xg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Tj(){let s=_.useContext(Od);return xg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var wg=_.createContext(void 0);wg.displayName="FrameworkContext";function Tx(){let s=_.useContext(wg);return xg(s,"You must render this element inside a <HydratedRouter> element"),s}function Ej(s,e){let n=_.useContext(wg),[i,l]=_.useState(!1),[u,d]=_.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:k}=e,j=_.useRef(null);_.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let B=ee=>{ee.forEach(Q=>{d(Q.isIntersecting)})},O=new IntersectionObserver(B,{threshold:.5});return j.current&&O.observe(j.current),()=>{O.disconnect()}}},[s]),_.useEffect(()=>{if(i){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[i]);let L=()=>{l(!0)},H=()=>{l(!1),d(!1)};return n?s!=="intent"?[u,j,{}]:[u,j,{onFocus:Pc(p,L),onBlur:Pc(g,H),onMouseEnter:Pc(y,L),onMouseLeave:Pc(x,H),onTouchStart:Pc(k,L)}]:[!1,j,{}]}function Pc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function jj({page:s,...e}){let{router:n}=kx(),i=_.useMemo(()=>ux(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?_.createElement(Nj,{page:s,matches:i,...e}):null}function Sj(s){let{manifest:e,routeModules:n}=Tx(),[i,l]=_.useState([]);return _.useEffect(()=>{let u=!1;return bj(s,e,n).then(d=>{u||l(d)}),()=>{u=!0}},[s,e,n]),i}function Nj({page:s,matches:e,...n}){let i=Fr(),{future:l,manifest:u,routeModules:d}=Tx(),{basename:p}=kx(),{loaderData:g,matches:y}=Tj(),x=_.useMemo(()=>f1(s,e,y,u,i,"data"),[s,e,y,u,i]),k=_.useMemo(()=>f1(s,e,y,u,i,"assets"),[s,e,y,u,i]),j=_.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let B=new Set,O=!1;if(e.forEach(Q=>{let oe=u.routes[Q.route.id];!oe||!oe.hasLoader||(!x.some(be=>be.route.id===Q.route.id)&&Q.route.id in g&&d[Q.route.id]?.shouldRevalidate||oe.hasClientLoader?O=!0:B.add(Q.route.id))}),B.size===0)return[];let ee=gj(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return O&&B.size>0&&ee.searchParams.set("_routes",e.filter(Q=>B.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[ee.pathname+ee.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,x,e,s,d]),L=_.useMemo(()=>xj(k,u),[k,u]),H=Sj(k);return _.createElement(_.Fragment,null,j.map(B=>_.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),L.map(B=>_.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),H.map(({key:B,link:O})=>_.createElement("link",{key:B,nonce:n.nonce,...O,crossOrigin:O.crossOrigin??n.crossOrigin})))}function Cj(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Rj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Rj&&(window.__reactRouterVersion="7.13.0")}catch{}function Aj({basename:s,children:e,unstable_useTransitions:n,window:i}){let l=_.useRef();l.current==null&&(l.current=lE({window:i,v5Compat:!0}));let u=l.current,[d,p]=_.useState({action:u.action,location:u.location}),g=_.useCallback(y=>{n===!1?p(y):_.startTransition(()=>p(y))},[n]);return _.useLayoutEffect(()=>u.listen(g),[u,g]),_.createElement(aj,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var Ex=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jx=_.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j,...L},H){let{basename:B,unstable_useTransitions:O}=_.useContext(sr),ee=typeof y=="string"&&Ex.test(y),Q=mx(y,B);y=Q.to;let oe=FE(y,{relative:l}),[be,Ve,Ae]=Ej(i,L),I=Pj(y,{replace:d,state:p,target:g,preventScrollReset:x,relative:l,viewTransition:k,unstable_defaultShouldRevalidate:j,unstable_useTransitions:O});function E(P){e&&e(P),P.defaultPrevented||I(P)}let A=_.createElement("a",{...L,...Ae,href:Q.absoluteURL||oe,onClick:Q.isExternal||u?e:E,ref:Cj(H,Ve),target:g,"data-discover":!ee&&n==="render"?"true":void 0});return be&&!ee?_.createElement(_.Fragment,null,A,_.createElement(jj,{page:oe})):A});jx.displayName="Link";var Ij=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:p,children:g,...y},x){let k=pu(d,{relative:y.relative}),j=Fr(),L=_.useContext(Od),{navigator:H,basename:B}=_.useContext(sr),O=L!=null&&zj(k)&&p===!0,ee=H.encodeLocation?H.encodeLocation(k).pathname:k.pathname,Q=j.pathname,oe=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;n||(Q=Q.toLowerCase(),oe=oe?oe.toLowerCase():null,ee=ee.toLowerCase()),oe&&B&&(oe=Pa(oe,B)||oe);const be=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let Ve=Q===ee||!l&&Q.startsWith(ee)&&Q.charAt(be)==="/",Ae=oe!=null&&(oe===ee||!l&&oe.startsWith(ee)&&oe.charAt(ee.length)==="/"),I={isActive:Ve,isPending:Ae,isTransitioning:O},E=Ve?e:void 0,A;typeof i=="function"?A=i(I):A=[i,Ve?"active":null,Ae?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(I):u;return _.createElement(jx,{...y,"aria-current":E,className:A,ref:x,style:P,to:d,viewTransition:p},typeof g=="function"?g(I):g)});Ij.displayName="NavLink";var Mj=_.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:u,method:d=rd,action:p,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j,...L},H)=>{let{unstable_useTransitions:B}=_.useContext(sr),O=Bj(),ee=Uj(p,{relative:y}),Q=d.toLowerCase()==="get"?"get":"post",oe=typeof p=="string"&&Ex.test(p),be=Ve=>{if(g&&g(Ve),Ve.defaultPrevented)return;Ve.preventDefault();let Ae=Ve.nativeEvent.submitter,I=Ae?.getAttribute("formmethod")||d,E=()=>O(Ae||Ve.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:l,state:u,relative:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j});B&&n!==!1?_.startTransition(()=>E()):E()};return _.createElement("form",{ref:H,method:Q,action:ee,onSubmit:i?g:be,...L,"data-discover":!oe&&s==="render"?"true":void 0})});Mj.displayName="Form";function Dj(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sx(s){let e=_.useContext(Ol);return Hn(e,Dj(s)),e}function Pj(s,{target:e,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Ss(),x=Fr(),k=pu(s,{relative:u});return _.useCallback(j=>{if(hj(j,e)){j.preventDefault();let L=n!==void 0?n:eu(x)===eu(k),H=()=>y(s,{replace:L,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?_.startTransition(()=>H()):H()}},[x,y,k,n,i,e,s,l,u,d,p,g])}function Lj(s){br(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=_.useRef(zp(s)),n=_.useRef(!1),i=Fr(),l=_.useMemo(()=>dj(i.search,n.current?null:e.current),[i.search]),u=Ss(),d=_.useCallback((p,g)=>{const y=zp(typeof p=="function"?p(new URLSearchParams(l)):p);n.current=!0,u("?"+y,g)},[u,l]);return[l,d]}var Oj=0,Vj=()=>`__${String(++Oj)}__`;function Bj(){let{router:s}=Sx("useSubmit"),{basename:e}=_.useContext(sr),n=ej(),i=s.fetch,l=s.navigate;return _.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:x,body:k}=pj(u,e);if(d.navigate===!1){let j=d.fetcherKey||Vj();await i(j,n,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:k,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await l(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:k,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,l,e,n])}function Uj(s,{relative:e}={}){let{basename:n}=_.useContext(sr),i=_.useContext(zr);Hn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...pu(s||".",{relative:e})},d=Fr();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(k=>k).forEach(k=>p.append("index",k));let x=p.toString();u.search=x?`?${x}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Ia([n,u.pathname])),eu(u)}function zj(s,{relative:e}={}){let n=_.useContext(gx);Hn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Sx("useViewTransitionState"),l=pu(s,{relative:e});if(!n.isTransitioning)return!1;let u=Pa(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=Pa(n.nextLocation.pathname,i)||n.nextLocation.pathname;return yd(l.pathname,d)!=null||yd(l.pathname,u)!=null}const Fj=()=>{};var m1={};const Nx=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},qj=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],d=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Cx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],d=l+1<s.length,p=d?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,x=u>>2,k=(u&3)<<4|p>>4;let j=(p&15)<<2|y>>6,L=y&63;g||(L=64,d||(j=64)),i.push(n[x],n[k],n[j],n[L])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Nx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):qj(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const k=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||k==null)throw new Hj;const j=u<<2|p>>4;if(i.push(j),y!==64){const L=p<<4&240|y>>2;if(i.push(L),k!==64){const H=y<<6&192|k;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Hj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $j=function(s){const e=Nx(s);return Cx.encodeByteArray(e,!0)},vd=function(s){return $j(s).replace(/\./g,"")},Rx=function(s){try{return Cx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Wj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Gj=()=>Wj().__FIREBASE_DEFAULTS__,Kj=()=>{if(typeof process>"u"||typeof m1>"u")return;const s=m1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Yj=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Rx(s[1]);return e&&JSON.parse(e)},Bd=()=>{try{return Fj()||Gj()||Kj()||Yj()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Ax=s=>Bd()?.emulatorHosts?.[s],Ix=s=>{const e=Ax(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Mx=()=>Bd()?.config,Dx=s=>Bd()?.[`_${s}`];class Qj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Vi(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _g(s){return(await fetch(s,{credentials:"include"})).ok}function Px(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[vd(JSON.stringify(n)),vd(JSON.stringify(d)),""].join(".")}const Wc={};function Xj(){const s={prod:[],emulator:[]};for(const e of Object.keys(Wc))Wc[e]?s.emulator.push(e):s.prod.push(e);return s}function Jj(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let p1=!1;function kg(s,e){if(typeof window>"u"||typeof document>"u"||!Vi(window.location.host)||Wc[s]===e||Wc[s]||p1)return;Wc[s]=e;function n(j){return`__firebase__banner__${j}`}const i="__firebase__banner",u=Xj().prod.length>0;function d(){const j=document.getElementById(i);j&&j.remove()}function p(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function g(j,L){j.setAttribute("width","24"),j.setAttribute("id",L),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function y(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{p1=!0,d()},j}function x(j,L){j.setAttribute("id",L),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function k(){const j=Jj(i),L=n("text"),H=document.getElementById(L)||document.createElement("span"),B=n("learnmore"),O=document.getElementById(B)||document.createElement("a"),ee=n("preprendIcon"),Q=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const oe=j.element;p(oe),x(O,B);const be=y();g(Q,ee),oe.append(Q,H,O,be),document.body.appendChild(oe)}u?(H.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}function Ds(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ds())}function eS(){const s=Bd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function sS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rS(){const s=Ds();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function aS(){return!eS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iS(){try{return typeof indexedDB=="object"}catch{return!1}}function oS(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const lS="FirebaseError";class ha extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=lS,Object.setPrototypeOf(this,ha.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gu.prototype.create)}}class gu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?cS(u,i):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new ha(l,p,i)}}function cS(s,e){return s.replace(uS,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const uS=/\{\$([^}]+)}/g;function hS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function wo(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=s[l],d=e[l];if(g1(u)&&g1(d)){if(!wo(u,d))return!1}else if(u!==d)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function g1(s){return s!==null&&typeof s=="object"}function yu(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Uc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function zc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function dS(s,e){const n=new fS(s,e);return n.subscribe.bind(n)}class fS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");mS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=hp),l.error===void 0&&(l.error=hp),l.complete===void 0&&(l.complete=hp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function hp(){}function $n(s){return s&&s._delegate?s._delegate:s}class Ai{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const po="[DEFAULT]";class pS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Qj;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yS(e))try{this.getOrInitializeService({instanceIdentifier:po})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=po){return this.instances.has(e)}getOptions(e=po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&d.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:gS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=po){return this.component?this.component.multipleInstances?e:po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gS(s){return s===po?void 0:s}function yS(s){return s.instantiationMode==="EAGER"}class vS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Zt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Zt||(Zt={}));const bS={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},xS=Zt.INFO,wS={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},_S=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=wS[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tg{constructor(e){this.name=e,this._logLevel=xS,this._logHandler=_S,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}const kS=(s,e)=>e.some(n=>s instanceof n);let y1,v1;function TS(){return y1||(y1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ES(){return v1||(v1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lx=new WeakMap,Fp=new WeakMap,Ox=new WeakMap,dp=new WeakMap,Eg=new WeakMap;function jS(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(Si(s.result)),l()},d=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Lx.set(n,s)}).catch(()=>{}),Eg.set(e,s),e}function SS(s){if(Fp.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),l()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});Fp.set(s,e)}let qp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Fp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Ox.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Si(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function NS(s){qp=s(qp)}function CS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(fp(this),e,...n);return Ox.set(i,e.sort?e.sort():[e]),Si(i)}:ES().includes(s)?function(...e){return s.apply(fp(this),e),Si(Lx.get(this))}:function(...e){return Si(s.apply(fp(this),e))}}function RS(s){return typeof s=="function"?CS(s):(s instanceof IDBTransaction&&SS(s),kS(s,TS())?new Proxy(s,qp):s)}function Si(s){if(s instanceof IDBRequest)return jS(s);if(dp.has(s))return dp.get(s);const e=RS(s);return e!==s&&(dp.set(s,e),Eg.set(e,s)),e}const fp=s=>Eg.get(s);function AS(s,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const d=indexedDB.open(s,e),p=Si(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Si(d.result),g.oldVersion,g.newVersion,Si(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const IS=["get","getKey","getAll","getAllKeys","count"],MS=["put","add","delete","clear"],mp=new Map;function b1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(mp.get(e))return mp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=MS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||IS.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return mp.set(e,u),u}NS(s=>({...s,get:(e,n,i)=>b1(e,n)||s.get(e,n,i),has:(e,n)=>!!b1(e,n)||s.has(e,n)}));class DS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function PS(s){return s.getComponent()?.type==="VERSION"}const Hp="@firebase/app",x1="0.14.7";const La=new Tg("@firebase/app"),LS="@firebase/app-compat",OS="@firebase/analytics-compat",VS="@firebase/analytics",BS="@firebase/app-check-compat",US="@firebase/app-check",zS="@firebase/auth",FS="@firebase/auth-compat",qS="@firebase/database",HS="@firebase/data-connect",$S="@firebase/database-compat",WS="@firebase/functions",GS="@firebase/functions-compat",KS="@firebase/installations",YS="@firebase/installations-compat",QS="@firebase/messaging",XS="@firebase/messaging-compat",JS="@firebase/performance",ZS="@firebase/performance-compat",eN="@firebase/remote-config",tN="@firebase/remote-config-compat",nN="@firebase/storage",sN="@firebase/storage-compat",rN="@firebase/firestore",aN="@firebase/ai",iN="@firebase/firestore-compat",oN="firebase",lN="12.8.0";const $p="[DEFAULT]",cN={[Hp]:"fire-core",[LS]:"fire-core-compat",[VS]:"fire-analytics",[OS]:"fire-analytics-compat",[US]:"fire-app-check",[BS]:"fire-app-check-compat",[zS]:"fire-auth",[FS]:"fire-auth-compat",[qS]:"fire-rtdb",[HS]:"fire-data-connect",[$S]:"fire-rtdb-compat",[WS]:"fire-fn",[GS]:"fire-fn-compat",[KS]:"fire-iid",[YS]:"fire-iid-compat",[QS]:"fire-fcm",[XS]:"fire-fcm-compat",[JS]:"fire-perf",[ZS]:"fire-perf-compat",[eN]:"fire-rc",[tN]:"fire-rc-compat",[nN]:"fire-gcs",[sN]:"fire-gcs-compat",[rN]:"fire-fst",[iN]:"fire-fst-compat",[aN]:"fire-vertex","fire-js":"fire-js",[oN]:"fire-js-all"};const bd=new Map,uN=new Map,Wp=new Map;function w1(s,e){try{s.container.addComponent(e)}catch(n){La.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function _o(s){const e=s.name;if(Wp.has(e))return La.debug(`There were multiple attempts to register component ${e}.`),!1;Wp.set(e,s);for(const n of bd.values())w1(n,s);for(const n of uN.values())w1(n,s);return!0}function Ud(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function tr(s){return s==null?!1:s.settings!==void 0}const hN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new gu("app","Firebase",hN);class dN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}const Co=lN;function jg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:$p,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Ni.create("bad-app-name",{appName:String(l)});if(n||(n=Mx()),!n)throw Ni.create("no-options");const u=bd.get(l);if(u){if(wo(n,u.options)&&wo(i,u.config))return u;throw Ni.create("duplicate-app",{appName:l})}const d=new vS(l);for(const g of Wp.values())d.addComponent(g);const p=new dN(n,i,d);return bd.set(l,p),p}function Sg(s=$p){const e=bd.get(s);if(!e&&s===$p&&Mx())return jg();if(!e)throw Ni.create("no-app",{appName:s});return e}function ra(s,e,n){let i=cN[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),La.warn(d.join(" "));return}_o(new Ai(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const fN="firebase-heartbeat-database",mN=1,tu="firebase-heartbeat-store";let pp=null;function Vx(){return pp||(pp=AS(fN,mN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(tu)}catch(n){console.warn(n)}}}}).catch(s=>{throw Ni.create("idb-open",{originalErrorMessage:s.message})})),pp}async function pN(s){try{const n=(await Vx()).transaction(tu),i=await n.objectStore(tu).get(Bx(s));return await n.done,i}catch(e){if(e instanceof ha)La.warn(e.message);else{const n=Ni.create("idb-get",{originalErrorMessage:e?.message});La.warn(n.message)}}}async function _1(s,e){try{const i=(await Vx()).transaction(tu,"readwrite");await i.objectStore(tu).put(e,Bx(s)),await i.done}catch(n){if(n instanceof ha)La.warn(n.message);else{const i=Ni.create("idb-set",{originalErrorMessage:n?.message});La.warn(i.message)}}}function Bx(s){return`${s.name}!${s.options.appId}`}const gN=1024,yN=30;class vN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new xN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=k1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>yN){const l=wN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){La.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=k1(),{heartbeatsToSend:n,unsentEntries:i}=bN(this._heartbeatsCache.heartbeats),l=vd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return La.warn(e),""}}}function k1(){return new Date().toISOString().substring(0,10)}function bN(s,e=gN){const n=[];let i=s.slice();for(const l of s){const u=n.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),T1(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),T1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class xN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iS()?oS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return _1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return _1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function T1(s){return vd(JSON.stringify({version:2,heartbeats:s})).length}function wN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function _N(s){_o(new Ai("platform-logger",e=>new DS(e),"PRIVATE")),_o(new Ai("heartbeat",e=>new vN(e),"PRIVATE")),ra(Hp,x1,s),ra(Hp,x1,"esm2020"),ra("fire-js","")}_N("");function Ux(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kN=Ux,zx=new gu("auth","Firebase",Ux());const xd=new Tg("@firebase/auth");function TN(s,...e){xd.logLevel<=Zt.WARN&&xd.warn(`Auth (${Co}): ${s}`,...e)}function id(s,...e){xd.logLevel<=Zt.ERROR&&xd.error(`Auth (${Co}): ${s}`,...e)}function Or(s,...e){throw Ng(s,...e)}function aa(s,...e){return Ng(s,...e)}function Fx(s,e,n){const i={...kN(),[e]:n};return new gu("auth","Firebase",i).create(e,{appName:s.name})}function Ma(s){return Fx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ng(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return zx.create(s,...e)}function St(s,e,...n){if(!s)throw Ng(e,...n)}function Ra(s){const e="INTERNAL ASSERTION FAILED: "+s;throw id(e),new Error(e)}function Oa(s,e){s||Ra(e)}function Gp(){return typeof self<"u"&&self.location?.href||""}function EN(){return E1()==="http:"||E1()==="https:"}function E1(){return typeof self<"u"&&self.location?.protocol||null}function jN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EN()||nS()||"connection"in navigator)?navigator.onLine:!0}function SN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class vu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Oa(n>e,"Short delay should be less than long delay!"),this.isMobile=Zj()||sS()}get(){return jN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cg(s,e){Oa(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class qx{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ra("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ra("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ra("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const NN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const CN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RN=new vu(3e4,6e4);function Ua(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function za(s,e,n,i,l={}){return Hx(s,l,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const p=yu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return tS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Vi(s.emulatorConfig.host)&&(y.credentials="include"),qx.fetch()(await $x(s,s.config.apiHost,n,p),y)})}async function Hx(s,e,n){s._canInitEmulator=!1;const i={...NN,...e};try{const l=new IN(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw $h(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw $h(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw $h(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw $h(s,"user-disabled",d);const x=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Fx(s,x,y);Or(s,x)}}catch(l){if(l instanceof ha)throw l;Or(s,"network-request-failed",{message:String(l)})}}async function bu(s,e,n,i,l={}){const u=await za(s,e,n,i,l);return"mfaPendingCredential"in u&&Or(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function $x(s,e,n,i){const l=`${e}${n}?${i}`,u=s,d=u.config.emulator?Cg(s.config,l):`${s.config.apiScheme}://${l}`;return CN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function AN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(aa(this.auth,"network-request-failed")),RN.get())})}}function $h(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=aa(s,e,i);return l.customData._tokenResponse=n,l}function j1(s){return s!==void 0&&s.enterprise!==void 0}class MN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DN(s,e){return za(s,"GET","/v2/recaptchaConfig",Ua(s,e))}async function PN(s,e){return za(s,"POST","/v1/accounts:delete",e)}async function wd(s,e){return za(s,"POST","/v1/accounts:lookup",e)}function Gc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LN(s,e=!1){const n=$n(s),i=await n.getIdToken(e),l=Rg(i);St(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:i,authTime:Gc(gp(l.auth_time)),issuedAtTime:Gc(gp(l.iat)),expirationTime:Gc(gp(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function gp(s){return Number(s)*1e3}function Rg(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return id("JWT malformed, contained fewer than 3 sections"),null;try{const l=Rx(n);return l?JSON.parse(l):(id("Failed to decode base64 JWT payload"),null)}catch(l){return id("Caught error parsing JWT payload as JSON",l?.toString()),null}}function S1(s){const e=Rg(s);return St(e,"internal-error"),St(typeof e.exp<"u","internal-error"),St(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function nu(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ha&&ON(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function ON({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class VN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Kp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gc(this.lastLoginAt),this.creationTime=Gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _d(s){const e=s.auth,n=await s.getIdToken(),i=await nu(s,wd(e,{idToken:n}));St(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?Wx(l.providerUserInfo):[],d=UN(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!d?.length,y=p?g:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Kp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function BN(s){const e=$n(s);await _d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UN(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function Wx(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function zN(s,e){const n=await Hx(s,{},async()=>{const i=yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,d=await $x(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&Vi(s.emulatorConfig.host)&&(g.credentials="include"),qx.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FN(s,e){return za(s,"POST","/v2/accounts:revokeToken",Ua(s,e))}class Tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){St(e.idToken,"internal-error"),St(typeof e.idToken<"u","internal-error"),St(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){St(e.length!==0,"internal-error");const n=S1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await zN(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,d=new Tl;return i&&(St(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),l&&(St(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(St(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Tl,this.toJSON())}_performRefresh(){return Ra("not implemented")}}function vi(s,e){St(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Pr{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new VN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Kp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await nu(this,this.stsTokenManager.getToken(this.auth,e));return St(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LN(this,e)}reload(){return BN(this)}_assign(e){this!==e&&(St(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Pr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await _d(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(Ma(this.auth));const e=await this.getIdToken();return await nu(this,PN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:k,emailVerified:j,isAnonymous:L,providerData:H,stsTokenManager:B}=n;St(k&&B,e,"internal-error");const O=Tl.fromJSON(this.name,B);St(typeof k=="string",e,"internal-error"),vi(i,e.name),vi(l,e.name),St(typeof j=="boolean",e,"internal-error"),St(typeof L=="boolean",e,"internal-error"),vi(u,e.name),vi(d,e.name),vi(p,e.name),vi(g,e.name),vi(y,e.name),vi(x,e.name);const ee=new Pr({uid:k,auth:e,email:l,emailVerified:j,displayName:i,isAnonymous:L,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:O,createdAt:y,lastLoginAt:x});return H&&Array.isArray(H)&&(ee.providerData=H.map(Q=>({...Q}))),g&&(ee._redirectEventId=g),ee}static async _fromIdTokenResponse(e,n,i=!1){const l=new Tl;l.updateFromServerResponse(n);const u=new Pr({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await _d(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];St(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Wx(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,p=new Tl;p.updateFromIdToken(i);const g=new Pr({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Kp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const N1=new Map;function Aa(s){Oa(s instanceof Function,"Expected a class definition");let e=N1.get(s);return e?(Oa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,N1.set(s,e),e)}class Gx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Gx.type="NONE";const C1=Gx;function od(s,e,n){return`firebase:${s}:${e}:${n}`}class El{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=od(this.userKey,l.apiKey,u),this.fullPersistenceKey=od("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wd(this.auth,{idToken:e}).catch(()=>{});return n?Pr._fromGetAccountInfoResponse(this.auth,n,e):null}return Pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new El(Aa(C1),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Aa(C1);const d=od(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(d);if(x){let k;if(typeof x=="string"){const j=await wd(e,{idToken:x}).catch(()=>{});if(!j)break;k=await Pr._fromGetAccountInfoResponse(e,j,x)}else k=Pr._fromJSON(e,x);y!==u&&(p=k),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new El(u,e,i):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new El(u,e,i))}}function R1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zx(e))return"Blackberry";if(ew(e))return"Webos";if(Yx(e))return"Safari";if((e.includes("chrome/")||Qx(e))&&!e.includes("edge/"))return"Chrome";if(Jx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Kx(s=Ds()){return/firefox\//i.test(s)}function Yx(s=Ds()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qx(s=Ds()){return/crios\//i.test(s)}function Xx(s=Ds()){return/iemobile/i.test(s)}function Jx(s=Ds()){return/android/i.test(s)}function Zx(s=Ds()){return/blackberry/i.test(s)}function ew(s=Ds()){return/webos/i.test(s)}function Ag(s=Ds()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function qN(s=Ds()){return Ag(s)&&!!window.navigator?.standalone}function HN(){return rS()&&document.documentMode===10}function tw(s=Ds()){return Ag(s)||Jx(s)||ew(s)||Zx(s)||/windows phone/i.test(s)||Xx(s)}function nw(s,e=[]){let n;switch(s){case"Browser":n=R1(Ds());break;case"Worker":n=`${R1(Ds())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Co}/${i}`}class $N{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function WN(s,e={}){return za(s,"GET","/v2/passwordPolicy",Ua(s,e))}const GN=6;class KN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??GN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class YN{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new A1(this),this.idTokenSubscription=new A1(this),this.beforeStateQueue=new $N(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Aa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await El.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wd(this,{idToken:e}),i=await Pr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(tr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _d(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(Ma(this));const n=e?$n(e):null;return n&&St(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&St(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(Ma(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(Ma(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WN(this),n=new KN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await FN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Aa(e)||this._popupRedirectResolver;St(n,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[Aa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,l);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&TN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bi(s){return $n(s)}class A1{constructor(e){this.auth=e,this.observer=null,this.addObserver=dS(n=>this.observer=n)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QN(s){zd=s}function sw(s){return zd.loadJS(s)}function XN(){return zd.recaptchaEnterpriseScript}function JN(){return zd.gapiScript}function ZN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class e4{constructor(){this.enterprise=new t4}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class t4{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const n4="recaptcha-enterprise",rw="NO_RECAPTCHA";class s4{constructor(e){this.type=n4,this.auth=Bi(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{DN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new MN(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,d,p){const g=window.grecaptcha;j1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(rw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new e4().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(p=>{if(!n&&j1(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=XN();g.length!==0&&(g+=p),sw(g).then(()=>{l(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function I1(s,e,n,i=!1,l=!1){const u=new s4(s);let d;if(l)d=rw;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function kd(s,e,n,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await I1(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await I1(s,e,n,n==="getOobCode");return i(s,d)}else return Promise.reject(u)})}function r4(s,e){const n=Ud(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(wo(u,e??{}))return l;Or(l,"already-initialized")}return n.initialize({options:e})}function a4(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Aa);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function i4(s,e,n){const i=Bi(s);St(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=aw(e),{host:d,port:p}=o4(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},x=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){St(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),St(wo(y,i.config.emulator)&&wo(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,Vi(d)?(_g(`${u}//${d}${g}`),kg("Auth",!0)):l4()}function aw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function o4(s){const e=aw(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:M1(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:M1(d)}}}function M1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function l4(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Ig{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ra("not implemented")}_getIdTokenResponse(e){return Ra("not implemented")}_linkToIdToken(e,n){return Ra("not implemented")}_getReauthenticationResolver(e){return Ra("not implemented")}}async function c4(s,e){return za(s,"POST","/v1/accounts:signUp",e)}async function u4(s,e){return bu(s,"POST","/v1/accounts:signInWithPassword",Ua(s,e))}async function h4(s,e){return za(s,"POST","/v1/accounts:sendOobCode",Ua(s,e))}async function d4(s,e){return h4(s,e)}async function f4(s,e){return bu(s,"POST","/v1/accounts:signInWithEmailLink",Ua(s,e))}async function m4(s,e){return bu(s,"POST","/v1/accounts:signInWithEmailLink",Ua(s,e))}class su extends Ig{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new su(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new su(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kd(e,n,"signInWithPassword",u4);case"emailLink":return f4(e,{email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kd(e,i,"signUpPassword",c4);case"emailLink":return m4(e,{idToken:n,email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function jl(s,e){return bu(s,"POST","/v1/accounts:signInWithIdp",Ua(s,e))}const p4="http://localhost";class ko extends Ig{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const d=new ko(i,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return jl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,jl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jl(e,n)}buildRequest(){const e={requestUri:p4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=yu(n)}return e}}function g4(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y4(s){const e=Uc(zc(s)).link,n=e?Uc(zc(e)).deep_link_id:null,i=Uc(zc(s)).deep_link_id;return(i?Uc(zc(i)).link:null)||i||n||e||s}class Mg{constructor(e){const n=Uc(zc(e)),i=n.apiKey??null,l=n.oobCode??null,u=g4(n.mode??null);St(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=y4(e);try{return new Mg(n)}catch{return null}}}class Bl{constructor(){this.providerId=Bl.PROVIDER_ID}static credential(e,n){return su._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Mg.parseLink(n);return St(i,"argument-error"),su._fromEmailAndCode(e,i.code,i.tenantId)}}Bl.PROVIDER_ID="password";Bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class iw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class xu extends iw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wi extends xu{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";class _i extends xu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ko._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return _i.credential(n,i)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";class ki extends xu{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";class Ti extends xu{constructor(){super("twitter.com")}static credential(e,n){return ko._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ti.credential(n,i)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";async function v4(s,e){return bu(s,"POST","/v1/accounts:signUp",Ua(s,e))}class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await Pr._fromIdTokenResponse(e,i,l),d=D1(i);return new To({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=D1(i);return new To({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function D1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Td extends ha{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Td.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Td(e,n,i,l)}}function ow(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Td._fromErrorAndOperation(s,u,e,i):u})}async function b4(s,e,n=!1){const i=await nu(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return To._forOperation(s,"link",i)}async function x4(s,e,n=!1){const{auth:i}=s;if(tr(i.app))return Promise.reject(Ma(i));const l="reauthenticate";try{const u=await nu(s,ow(i,l,e,s),n);St(u.idToken,i,"internal-error");const d=Rg(u.idToken);St(d,i,"internal-error");const{sub:p}=d;return St(s.uid===p,i,"user-mismatch"),To._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Or(i,"user-mismatch"),u}}async function lw(s,e,n=!1){if(tr(s.app))return Promise.reject(Ma(s));const i="signIn",l=await ow(s,i,e),u=await To._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(u.user),u}async function w4(s,e){return lw(Bi(s),e)}async function cw(s){const e=Bi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _4(s,e,n){const i=Bi(s);await kd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",d4)}async function LD(s,e,n){if(tr(s.app))return Promise.reject(Ma(s));const i=Bi(s),d=await kd(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v4).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&cw(s),g}),p=await To._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function k4(s,e,n){return tr(s.app)?Promise.reject(Ma(s)):w4($n(s),Bl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&cw(s),i})}function T4(s,e){return $n(s).setPersistence(e)}function E4(s,e,n,i){return $n(s).onIdTokenChanged(e,n,i)}function j4(s,e,n){return $n(s).beforeAuthStateChanged(e,n)}function S4(s,e,n,i){return $n(s).onAuthStateChanged(e,n,i)}function N4(s){return $n(s).signOut()}const Ed="__sak";class uw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const C4=1e3,R4=10;class hw extends uw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);HN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,R4):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},C4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hw.type="LOCAL";const dw=hw;class fw extends uw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fw.type="SESSION";const Dg=fw;function A4(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new Fd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,u)),g=await A4(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fd.receivers=[];function Pg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class I4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=Pg("",20);l.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:l,onMessage(k){const j=k;if(j.data.eventId===y)switch(j.data.status){case"ack":clearTimeout(x),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(j.data.response);break;default:clearTimeout(x),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ia(){return window}function M4(s){ia().location.href=s}function mw(){return typeof ia().WorkerGlobalScope<"u"&&typeof ia().importScripts=="function"}async function D4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P4(){return navigator?.serviceWorker?.controller||null}function L4(){return mw()?self:null}const pw="firebaseLocalStorageDb",O4=1,jd="firebaseLocalStorage",gw="fbase_key";class wu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qd(s,e){return s.transaction([jd],e?"readwrite":"readonly").objectStore(jd)}function V4(){const s=indexedDB.deleteDatabase(pw);return new wu(s).toPromise()}function Yp(){const s=indexedDB.open(pw,O4);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(jd,{keyPath:gw})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(jd)?e(i):(i.close(),await V4(),e(await Yp()))})})}async function P1(s,e,n){const i=qd(s,!0).put({[gw]:e,value:n});return new wu(i).toPromise()}async function B4(s,e){const n=qd(s,!1).get(e),i=await new wu(n).toPromise();return i===void 0?null:i.value}function L1(s,e){const n=qd(s,!0).delete(e);return new wu(n).toPromise()}const U4=800,z4=3;class yw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>z4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fd._getInstance(L4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await D4(),!this.activeServiceWorker)return;this.sender=new I4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await P1(e,Ed,"1"),await L1(e,Ed),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>P1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>B4(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>L1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=qd(l,!1).getAll();return new wu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yw.type="LOCAL";const F4=yw;new vu(3e4,6e4);function q4(s,e){return e?Aa(e):(St(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Lg extends Ig{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function H4(s){return lw(s.auth,new Lg(s),s.bypassAuthState)}function $4(s){const{auth:e,user:n}=s;return St(n,e,"internal-error"),x4(n,new Lg(s),s.bypassAuthState)}async function W4(s){const{auth:e,user:n}=s;return St(n,e,"internal-error"),b4(n,new Lg(s),s.bypassAuthState)}class vw{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H4;case"linkViaPopup":case"linkViaRedirect":return W4;case"reauthViaPopup":case"reauthViaRedirect":return $4;default:Or(this.auth,"internal-error")}}resolve(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const G4=new vu(2e3,1e4);class wl extends vw{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,wl.currentPopupAction&&wl.currentPopupAction.cancel(),wl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return St(e,this.auth,"internal-error"),e}async onExecution(){Oa(this.filter.length===1,"Popup operations only handle one event");const e=Pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(aa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(aa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(aa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,G4.get())};e()}}wl.currentPopupAction=null;const K4="pendingRedirect",ld=new Map;class Y4 extends vw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ld.get(this.auth._key());if(!e){try{const i=await Q4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ld.set(this.auth._key(),e)}return this.bypassAuthState||ld.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q4(s,e){const n=Z4(e),i=J4(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function X4(s,e){ld.set(s._key(),e)}function J4(s){return Aa(s._redirectPersistence)}function Z4(s){return od(K4,s.config.apiKey,s.name)}async function eC(s,e,n=!1){if(tr(s.app))return Promise.reject(Ma(s));const i=Bi(s),l=q4(i,e),d=await new Y4(i,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}const tC=600*1e3;class nC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!bw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(aa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tC&&this.cachedEventUids.clear(),this.cachedEventUids.has(O1(e))}saveEventToCache(e){this.cachedEventUids.add(O1(e)),this.lastProcessedEventTime=Date.now()}}function O1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function bw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function sC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bw(s);default:return!1}}async function rC(s,e={}){return za(s,"GET","/v1/projects",e)}const aC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iC=/^https?/;async function oC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await rC(s);for(const n of e)try{if(lC(n))return}catch{}Or(s,"unauthorized-domain")}function lC(s){const e=Gp(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!iC.test(n))return!1;if(aC.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const cC=new vu(3e4,6e4);function V1(){const s=ia().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function uC(s){return new Promise((e,n)=>{function i(){V1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V1(),n(aa(s,"network-request-failed"))},timeout:cC.get()})}if(ia().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ia().gapi?.load)i();else{const l=ZN("iframefcb");return ia()[l]=()=>{gapi.load?i():n(aa(s,"network-request-failed"))},sw(`${JN()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw cd=null,e})}let cd=null;function hC(s){return cd=cd||uC(s),cd}const dC=new vu(5e3,15e3),fC="__/auth/iframe",mC="emulator/auth/iframe",pC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yC(s){const e=s.config;St(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Cg(e,mC):`https://${s.config.authDomain}/${fC}`,i={apiKey:e.apiKey,appName:s.name,v:Co},l=gC.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${yu(i).slice(1)}`}async function vC(s){const e=await hC(s),n=ia().gapi;return St(n,s,"internal-error"),e.open({where:document.body,url:yC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pC,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const d=aa(s,"network-request-failed"),p=ia().setTimeout(()=>{u(d)},dC.get());function g(){ia().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(d)})}))}const bC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xC=500,wC=600,_C="_blank",kC="http://localhost";class B1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TC(s,e,n,i=xC,l=wC){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...bC,width:i.toString(),height:l.toString(),top:u,left:d},y=Ds().toLowerCase();n&&(p=Qx(y)?_C:n),Kx(y)&&(e=e||kC,g.scrollbars="yes");const x=Object.entries(g).reduce((j,[L,H])=>`${j}${L}=${H},`,"");if(qN(y)&&p!=="_self")return EC(e||"",p),new B1(null);const k=window.open(e||"",p,x);St(k,s,"popup-blocked");try{k.focus()}catch{}return new B1(k)}function EC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const jC="__/auth/handler",SC="emulator/auth/handler",NC=encodeURIComponent("fac");async function U1(s,e,n,i,l,u){St(s.config.authDomain,s,"auth-domain-config-required"),St(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Co,eventId:l};if(e instanceof iw){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",hS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,k]of Object.entries({}))d[x]=k}if(e instanceof xu){const x=e.getScopes().filter(k=>k!=="");x.length>0&&(d.scopes=x.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await s._getAppCheckToken(),y=g?`#${NC}=${encodeURIComponent(g)}`:"";return`${CC(s)}?${yu(p).slice(1)}${y}`}function CC({config:s}){return s.emulator?Cg(s,SC):`https://${s.authDomain}/${jC}`}const yp="webStorageSupport";class RC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dg,this._completeRedirectFn=eC,this._overrideRedirectResult=X4}async _openPopup(e,n,i,l){Oa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await U1(e,n,i,Gp(),l);return TC(e,u,Pg())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await U1(e,n,i,Gp(),l);return M4(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Oa(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await vC(e),i=new nC(e);return n.register("authEvent",l=>(St(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yp,{type:yp},l=>{const u=l?.[0]?.[yp];u!==void 0&&n(!!u),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tw()||Yx()||Ag()}}const AC=RC;var z1="@firebase/auth",F1="1.12.0";class IC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function MC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DC(s){_o(new Ai("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;St(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nw(s)},y=new YN(i,l,u,g);return a4(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),_o(new Ai("auth-internal",e=>{const n=Bi(e.getProvider("auth").getImmediate());return(i=>new IC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ra(z1,F1,MC(s)),ra(z1,F1,"esm2020")}const PC=300,LC=Dx("authIdTokenMaxAge")||PC;let q1=null;const OC=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>LC)return;const l=n?.token;q1!==l&&(q1=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function xw(s=Sg()){const e=Ud(s,"auth");if(e.isInitialized())return e.getImmediate();const n=r4(s,{popupRedirectResolver:AC,persistence:[F4,dw,Dg]}),i=Dx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=OC(u.toString());j4(n,d,()=>d(n.currentUser)),E4(n,p=>d(p))}}const l=Ax("auth");return l&&i4(n,`http://${l}`),n}function VC(){return document.getElementsByTagName("head")?.[0]??document}QN({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=aa("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",VC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DC("Browser");var H1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ci,ww;(function(){var s;function e(I,E){function A(){}A.prototype=E.prototype,I.F=E.prototype,I.prototype=new A,I.prototype.constructor=I,I.D=function(P,D,z){for(var M=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)M[ke-2]=arguments[ke];return E.prototype[D].apply(P,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,E,A){A||(A=0);const P=Array(16);if(typeof E=="string")for(var D=0;D<16;++D)P[D]=E.charCodeAt(A++)|E.charCodeAt(A++)<<8|E.charCodeAt(A++)<<16|E.charCodeAt(A++)<<24;else for(D=0;D<16;++D)P[D]=E[A++]|E[A++]<<8|E[A++]<<16|E[A++]<<24;E=I.g[0],A=I.g[1],D=I.g[2];let z=I.g[3],M;M=E+(z^A&(D^z))+P[0]+3614090360&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(D^E&(A^D))+P[1]+3905402710&4294967295,z=E+(M<<12&4294967295|M>>>20),M=D+(A^z&(E^A))+P[2]+606105819&4294967295,D=z+(M<<17&4294967295|M>>>15),M=A+(E^D&(z^E))+P[3]+3250441966&4294967295,A=D+(M<<22&4294967295|M>>>10),M=E+(z^A&(D^z))+P[4]+4118548399&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(D^E&(A^D))+P[5]+1200080426&4294967295,z=E+(M<<12&4294967295|M>>>20),M=D+(A^z&(E^A))+P[6]+2821735955&4294967295,D=z+(M<<17&4294967295|M>>>15),M=A+(E^D&(z^E))+P[7]+4249261313&4294967295,A=D+(M<<22&4294967295|M>>>10),M=E+(z^A&(D^z))+P[8]+1770035416&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(D^E&(A^D))+P[9]+2336552879&4294967295,z=E+(M<<12&4294967295|M>>>20),M=D+(A^z&(E^A))+P[10]+4294925233&4294967295,D=z+(M<<17&4294967295|M>>>15),M=A+(E^D&(z^E))+P[11]+2304563134&4294967295,A=D+(M<<22&4294967295|M>>>10),M=E+(z^A&(D^z))+P[12]+1804603682&4294967295,E=A+(M<<7&4294967295|M>>>25),M=z+(D^E&(A^D))+P[13]+4254626195&4294967295,z=E+(M<<12&4294967295|M>>>20),M=D+(A^z&(E^A))+P[14]+2792965006&4294967295,D=z+(M<<17&4294967295|M>>>15),M=A+(E^D&(z^E))+P[15]+1236535329&4294967295,A=D+(M<<22&4294967295|M>>>10),M=E+(D^z&(A^D))+P[1]+4129170786&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^D&(E^A))+P[6]+3225465664&4294967295,z=E+(M<<9&4294967295|M>>>23),M=D+(E^A&(z^E))+P[11]+643717713&4294967295,D=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(D^z))+P[0]+3921069994&4294967295,A=D+(M<<20&4294967295|M>>>12),M=E+(D^z&(A^D))+P[5]+3593408605&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^D&(E^A))+P[10]+38016083&4294967295,z=E+(M<<9&4294967295|M>>>23),M=D+(E^A&(z^E))+P[15]+3634488961&4294967295,D=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(D^z))+P[4]+3889429448&4294967295,A=D+(M<<20&4294967295|M>>>12),M=E+(D^z&(A^D))+P[9]+568446438&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^D&(E^A))+P[14]+3275163606&4294967295,z=E+(M<<9&4294967295|M>>>23),M=D+(E^A&(z^E))+P[3]+4107603335&4294967295,D=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(D^z))+P[8]+1163531501&4294967295,A=D+(M<<20&4294967295|M>>>12),M=E+(D^z&(A^D))+P[13]+2850285829&4294967295,E=A+(M<<5&4294967295|M>>>27),M=z+(A^D&(E^A))+P[2]+4243563512&4294967295,z=E+(M<<9&4294967295|M>>>23),M=D+(E^A&(z^E))+P[7]+1735328473&4294967295,D=z+(M<<14&4294967295|M>>>18),M=A+(z^E&(D^z))+P[12]+2368359562&4294967295,A=D+(M<<20&4294967295|M>>>12),M=E+(A^D^z)+P[5]+4294588738&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^D)+P[8]+2272392833&4294967295,z=E+(M<<11&4294967295|M>>>21),M=D+(z^E^A)+P[11]+1839030562&4294967295,D=z+(M<<16&4294967295|M>>>16),M=A+(D^z^E)+P[14]+4259657740&4294967295,A=D+(M<<23&4294967295|M>>>9),M=E+(A^D^z)+P[1]+2763975236&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^D)+P[4]+1272893353&4294967295,z=E+(M<<11&4294967295|M>>>21),M=D+(z^E^A)+P[7]+4139469664&4294967295,D=z+(M<<16&4294967295|M>>>16),M=A+(D^z^E)+P[10]+3200236656&4294967295,A=D+(M<<23&4294967295|M>>>9),M=E+(A^D^z)+P[13]+681279174&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^D)+P[0]+3936430074&4294967295,z=E+(M<<11&4294967295|M>>>21),M=D+(z^E^A)+P[3]+3572445317&4294967295,D=z+(M<<16&4294967295|M>>>16),M=A+(D^z^E)+P[6]+76029189&4294967295,A=D+(M<<23&4294967295|M>>>9),M=E+(A^D^z)+P[9]+3654602809&4294967295,E=A+(M<<4&4294967295|M>>>28),M=z+(E^A^D)+P[12]+3873151461&4294967295,z=E+(M<<11&4294967295|M>>>21),M=D+(z^E^A)+P[15]+530742520&4294967295,D=z+(M<<16&4294967295|M>>>16),M=A+(D^z^E)+P[2]+3299628645&4294967295,A=D+(M<<23&4294967295|M>>>9),M=E+(D^(A|~z))+P[0]+4096336452&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~D))+P[7]+1126891415&4294967295,z=E+(M<<10&4294967295|M>>>22),M=D+(E^(z|~A))+P[14]+2878612391&4294967295,D=z+(M<<15&4294967295|M>>>17),M=A+(z^(D|~E))+P[5]+4237533241&4294967295,A=D+(M<<21&4294967295|M>>>11),M=E+(D^(A|~z))+P[12]+1700485571&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~D))+P[3]+2399980690&4294967295,z=E+(M<<10&4294967295|M>>>22),M=D+(E^(z|~A))+P[10]+4293915773&4294967295,D=z+(M<<15&4294967295|M>>>17),M=A+(z^(D|~E))+P[1]+2240044497&4294967295,A=D+(M<<21&4294967295|M>>>11),M=E+(D^(A|~z))+P[8]+1873313359&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~D))+P[15]+4264355552&4294967295,z=E+(M<<10&4294967295|M>>>22),M=D+(E^(z|~A))+P[6]+2734768916&4294967295,D=z+(M<<15&4294967295|M>>>17),M=A+(z^(D|~E))+P[13]+1309151649&4294967295,A=D+(M<<21&4294967295|M>>>11),M=E+(D^(A|~z))+P[4]+4149444226&4294967295,E=A+(M<<6&4294967295|M>>>26),M=z+(A^(E|~D))+P[11]+3174756917&4294967295,z=E+(M<<10&4294967295|M>>>22),M=D+(E^(z|~A))+P[2]+718787259&4294967295,D=z+(M<<15&4294967295|M>>>17),M=A+(z^(D|~E))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+E&4294967295,I.g[1]=I.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+z&4294967295}i.prototype.v=function(I,E){E===void 0&&(E=I.length);const A=E-this.blockSize,P=this.C;let D=this.h,z=0;for(;z<E;){if(D==0)for(;z<=A;)l(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<E;)if(P[D++]=I.charCodeAt(z++),D==this.blockSize){l(this,P),D=0;break}}else for(;z<E;)if(P[D++]=I[z++],D==this.blockSize){l(this,P),D=0;break}}this.h=D,this.o+=E},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var E=1;E<I.length-8;++E)I[E]=0;E=this.o*8;for(var A=I.length-8;A<I.length;++A)I[A]=E&255,E/=256;for(this.v(I),I=Array(16),E=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)I[E++]=this.g[A]>>>P&255;return I};function u(I,E){var A=p;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=E(I)}function d(I,E){this.h=E;const A=[];let P=!0;for(let D=I.length-1;D>=0;D--){const z=I[D]|0;P&&z==E||(A[D]=z,P=!1)}this.g=A}var p={};function g(I){return-128<=I&&I<128?u(I,function(E){return new d([E|0],E<0?-1:0)}):new d([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return k;if(I<0)return O(y(-I));const E=[];let A=1;for(let P=0;I>=A;P++)E[P]=I/A|0,A*=4294967296;return new d(E,0)}function x(I,E){if(I.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(I.charAt(0)=="-")return O(x(I.substring(1),E));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=y(Math.pow(E,8));let P=k;for(let z=0;z<I.length;z+=8){var D=Math.min(8,I.length-z);const M=parseInt(I.substring(z,z+D),E);D<8?(D=y(Math.pow(E,D)),P=P.j(D).add(y(M))):(P=P.j(A),P=P.add(y(M)))}return P}var k=g(0),j=g(1),L=g(16777216);s=d.prototype,s.m=function(){if(B(this))return-O(this).m();let I=0,E=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);I+=(P>=0?P:4294967296+P)*E,E*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(H(this))return"0";if(B(this))return"-"+O(this).toString(I);const E=y(Math.pow(I,6));var A=this;let P="";for(;;){const D=be(A,E).g;A=ee(A,D.j(E));let z=((A.g.length>0?A.g[0]:A.h)>>>0).toString(I);if(A=D,H(A))return z+P;for(;z.length<6;)z="0"+z;P=z+P}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function H(I){if(I.h!=0)return!1;for(let E=0;E<I.g.length;E++)if(I.g[E]!=0)return!1;return!0}function B(I){return I.h==-1}s.l=function(I){return I=ee(this,I),B(I)?-1:H(I)?0:1};function O(I){const E=I.g.length,A=[];for(let P=0;P<E;P++)A[P]=~I.g[P];return new d(A,~I.h).add(j)}s.abs=function(){return B(this)?O(this):this},s.add=function(I){const E=Math.max(this.g.length,I.g.length),A=[];let P=0;for(let D=0;D<=E;D++){let z=P+(this.i(D)&65535)+(I.i(D)&65535),M=(z>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);P=M>>>16,z&=65535,M&=65535,A[D]=M<<16|z}return new d(A,A[A.length-1]&-2147483648?-1:0)};function ee(I,E){return I.add(O(E))}s.j=function(I){if(H(this)||H(I))return k;if(B(this))return B(I)?O(this).j(O(I)):O(O(this).j(I));if(B(I))return O(this.j(O(I)));if(this.l(L)<0&&I.l(L)<0)return y(this.m()*I.m());const E=this.g.length+I.g.length,A=[];for(var P=0;P<2*E;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let D=0;D<I.g.length;D++){const z=this.i(P)>>>16,M=this.i(P)&65535,ke=I.i(D)>>>16,ht=I.i(D)&65535;A[2*P+2*D]+=M*ht,Q(A,2*P+2*D),A[2*P+2*D+1]+=z*ht,Q(A,2*P+2*D+1),A[2*P+2*D+1]+=M*ke,Q(A,2*P+2*D+1),A[2*P+2*D+2]+=z*ke,Q(A,2*P+2*D+2)}for(I=0;I<E;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=E;I<2*E;I++)A[I]=0;return new d(A,0)};function Q(I,E){for(;(I[E]&65535)!=I[E];)I[E+1]+=I[E]>>>16,I[E]&=65535,E++}function oe(I,E){this.g=I,this.h=E}function be(I,E){if(H(E))throw Error("division by zero");if(H(I))return new oe(k,k);if(B(I))return E=be(O(I),E),new oe(O(E.g),O(E.h));if(B(E))return E=be(I,O(E)),new oe(O(E.g),E.h);if(I.g.length>30){if(B(I)||B(E))throw Error("slowDivide_ only works with positive integers.");for(var A=j,P=E;P.l(I)<=0;)A=Ve(A),P=Ve(P);var D=Ae(A,1),z=Ae(P,1);for(P=Ae(P,2),A=Ae(A,2);!H(P);){var M=z.add(P);M.l(I)<=0&&(D=D.add(A),z=M),P=Ae(P,1),A=Ae(A,1)}return E=ee(I,D.j(E)),new oe(D,E)}for(D=k;I.l(E)>=0;){for(A=Math.max(1,Math.floor(I.m()/E.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),z=y(A),M=z.j(E);B(M)||M.l(I)>0;)A-=P,z=y(A),M=z.j(E);H(z)&&(z=j),D=D.add(z),I=ee(I,M)}return new oe(D,I)}s.B=function(I){return be(this,I).h},s.and=function(I){const E=Math.max(this.g.length,I.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)&I.i(P);return new d(A,this.h&I.h)},s.or=function(I){const E=Math.max(this.g.length,I.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)|I.i(P);return new d(A,this.h|I.h)},s.xor=function(I){const E=Math.max(this.g.length,I.g.length),A=[];for(let P=0;P<E;P++)A[P]=this.i(P)^I.i(P);return new d(A,this.h^I.h)};function Ve(I){const E=I.g.length+1,A=[];for(let P=0;P<E;P++)A[P]=I.i(P)<<1|I.i(P-1)>>>31;return new d(A,I.h)}function Ae(I,E){const A=E>>5;E%=32;const P=I.g.length-A,D=[];for(let z=0;z<P;z++)D[z]=E>0?I.i(z+A)>>>E|I.i(z+A+1)<<32-E:I.i(z+A);return new d(D,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ww=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=x,Ci=d}).apply(typeof H1<"u"?H1:typeof self<"u"?self:typeof window<"u"?window:{});var Wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _w,Fc,kw,ud,Qp,Tw,Ew,jw;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wh=="object"&&Wh];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function l(h,v){if(v)e:{var w=i;h=h.split(".");for(var C=0;C<h.length-1;C++){var X=h[C];if(!(X in w))break e;w=w[X]}h=h[h.length-1],C=w[h],v=v(C),v!=C&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(v){var w=[],C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&w.push([C,v[C]]);return w}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,w){return h.call.apply(h.bind,arguments)}function y(h,v,w){return y=g,y.apply(null,arguments)}function x(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function k(h,v){function w(){}w.prototype=v.prototype,h.Z=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(C,X,le){for(var $e=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)$e[Bt-2]=arguments[Bt];return v.prototype[X].apply(C,$e)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function L(h){const v=h.length;if(v>0){const w=Array(v);for(let C=0;C<v;C++)w[C]=h[C];return w}return[]}function H(h,v){for(let C=1;C<arguments.length;C++){const X=arguments[C];var w=typeof X;if(w=w!="object"?w:X?Array.isArray(X)?"array":w:"null",w=="array"||w=="object"&&typeof X.length=="number"){w=h.length||0;const le=X.length||0;h.length=w+le;for(let $e=0;$e<le;$e++)h[w+$e]=X[$e]}else h.push(X)}}class B{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function O(h){d.setTimeout(()=>{throw h},0)}function ee(){var h=I;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Q{constructor(){this.h=this.g=null}add(v,w){const C=oe.get();C.set(v,w),this.h?this.h.next=C:this.g=C,this.h=C}}var oe=new B(()=>new be,h=>h.reset());class be{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,Ae=!1,I=new Q,E=()=>{const h=Promise.resolve(void 0);Ve=()=>{h.then(A)}};function A(){for(var h;h=ee();){try{h.h.call(h.g)}catch(w){O(w)}var v=oe;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}Ae=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return h})();function M(h){return/^[\s\xa0]*$/.test(h)}function ke(h,v){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}k(ke,D),ke.prototype.init=function(h,v){const w=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ht="closure_listenable_"+(Math.random()*1e6|0),K=0;function we(h,v,w,C,X){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!C,this.ha=X,this.key=++K,this.da=this.fa=!1}function Le(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function re(h,v,w){for(const C in h)v.call(w,h[C],C,h)}function De(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function N(h){const v={};for(const w in h)v[w]=h[w];return v}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(h,v){let w,C;for(let X=1;X<arguments.length;X++){C=arguments[X];for(w in C)h[w]=C[w];for(let le=0;le<V.length;le++)w=V[le],Object.prototype.hasOwnProperty.call(C,w)&&(h[w]=C[w])}}function pe(h){this.src=h,this.g={},this.h=0}pe.prototype.add=function(h,v,w,C,X){const le=h.toString();h=this.g[le],h||(h=this.g[le]=[],this.h++);const $e=Me(h,v,C,X);return $e>-1?(v=h[$e],w||(v.fa=!1)):(v=new we(v,this.src,le,!!C,X),v.fa=w,h.push(v)),v};function Se(h,v){const w=v.type;if(w in h.g){var C=h.g[w],X=Array.prototype.indexOf.call(C,v,void 0),le;(le=X>=0)&&Array.prototype.splice.call(C,X,1),le&&(Le(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Me(h,v,w,C){for(let X=0;X<h.length;++X){const le=h[X];if(!le.da&&le.listener==v&&le.capture==!!w&&le.ha==C)return X}return-1}var Qe="closure_lm_"+(Math.random()*1e6|0),Fe={};function Ge(h,v,w,C,X){if(Array.isArray(v)){for(let le=0;le<v.length;le++)Ge(h,v[le],w,C,X);return null}return w=At(w),h&&h[ht]?h.J(v,w,p(C)?!!C.capture:!1,X):bt(h,v,w,!1,C,X)}function bt(h,v,w,C,X,le){if(!v)throw Error("Invalid event type");const $e=p(X)?!!X.capture:!!X;let Bt=Vt(h);if(Bt||(h[Qe]=Bt=new pe(h)),w=Bt.add(v,w,C,$e,le),w.proxy)return w;if(C=nn(),w.proxy=C,C.src=h,C.listener=w,h.addEventListener)z||(X=$e),X===void 0&&(X=!1),h.addEventListener(v.toString(),C,X);else if(h.attachEvent)h.attachEvent(ne(v.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function nn(){function h(w){return v.call(h.src,h.listener,w)}const v=ln;return h}function wt(h,v,w,C,X){if(Array.isArray(v))for(var le=0;le<v.length;le++)wt(h,v[le],w,C,X);else C=p(C)?!!C.capture:!!C,w=At(w),h&&h[ht]?(h=h.i,le=String(v).toString(),le in h.g&&(v=h.g[le],w=Me(v,w,C,X),w>-1&&(Le(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete h.g[le],h.h--)))):h&&(h=Vt(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Me(v,w,C,X)),(w=h>-1?v[h]:null)&&vt(w))}function vt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[ht])Se(v.i,h);else{var w=h.type,C=h.proxy;v.removeEventListener?v.removeEventListener(w,C,h.capture):v.detachEvent?v.detachEvent(ne(w),C):v.addListener&&v.removeListener&&v.removeListener(C),(w=Vt(v))?(Se(w,h),w.h==0&&(w.src=null,v[Qe]=null)):Le(h)}}}function ne(h){return h in Fe?Fe[h]:Fe[h]="on"+h}function ln(h,v){if(h.da)h=!0;else{v=new ke(v,this);const w=h.listener,C=h.ha||h.src;h.fa&&vt(h),h=w.call(C,v)}return h}function Vt(h){return h=h[Qe],h instanceof pe?h:null}var _t="__closure_events_fn_"+(Math.random()*1e9>>>0);function At(h){return typeof h=="function"?h:(h[_t]||(h[_t]=function(v){return h.handleEvent(v)}),h[_t])}function ct(){P.call(this),this.i=new pe(this),this.M=this,this.G=null}k(ct,P),ct.prototype[ht]=!0,ct.prototype.removeEventListener=function(h,v,w,C){wt(this,h,v,w,C)};function Xe(h,v){var w,C=h.G;if(C)for(w=[];C;C=C.G)w.push(C);if(h=h.M,C=v.type||v,typeof v=="string")v=new D(v,h);else if(v instanceof D)v.target=v.target||h;else{var X=v;v=new D(C,h),ie(v,X)}X=!0;let le,$e;if(w)for($e=w.length-1;$e>=0;$e--)le=v.g=w[$e],X=Gt(le,C,!0,v)&&X;if(le=v.g=h,X=Gt(le,C,!0,v)&&X,X=Gt(le,C,!1,v)&&X,w)for($e=0;$e<w.length;$e++)le=v.g=w[$e],X=Gt(le,C,!1,v)&&X}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const w=h.g[v];for(let C=0;C<w.length;C++)Le(w[C]);delete h.g[v],h.h--}}this.G=null},ct.prototype.J=function(h,v,w,C){return this.i.add(String(h),v,!1,w,C)},ct.prototype.K=function(h,v,w,C){return this.i.add(String(h),v,!0,w,C)};function Gt(h,v,w,C){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let X=!0;for(let le=0;le<v.length;++le){const $e=v[le];if($e&&!$e.da&&$e.capture==w){const Bt=$e.listener,ts=$e.ha||$e.src;$e.fa&&Se(h.i,$e),X=Bt.call(ts,C)!==!1&&X}}return X&&!C.defaultPrevented}function is(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function It(h){h.g=is(()=>{h.g=null,h.i&&(h.i=!1,It(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class zt extends P{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bn(h){P.call(this),this.h=h,this.g={}}k(Bn,P);var Ht=[];function wn(h){re(h.g,function(v,w){this.g.hasOwnProperty(w)&&vt(v)},h),h.g={}}Bn.prototype.N=function(){Bn.Z.N.call(this),wn(this)},Bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var me=d.JSON.stringify,Te=d.JSON.parse,Re=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function st(){}function Je(){}var qe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function et(){D.call(this,"d")}k(et,D);function Ke(){D.call(this,"c")}k(Ke,D);var Ue={},xe=null;function ze(){return xe=xe||new ct}Ue.Ia="serverreachability";function lt(h){D.call(this,Ue.Ia,h)}k(lt,D);function Et(h){const v=ze();Xe(v,new lt(v))}Ue.STAT_EVENT="statevent";function $t(h,v){D.call(this,Ue.STAT_EVENT,h),this.stat=v}k($t,D);function Ye(h){const v=ze();Xe(v,new $t(v,h))}Ue.Ja="timingevent";function jt(h,v){D.call(this,Ue.Ja,h),this.size=v}k(jt,D);function Ct(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Dt(){this.g=!0}Dt.prototype.ua=function(){this.g=!1};function Ft(h,v,w,C,X,le){h.info(function(){if(h.g)if(le){var $e="",Bt=le.split("&");for(let vn=0;vn<Bt.length;vn++){var ts=Bt[vn].split("=");if(ts.length>1){const zn=ts[0];ts=ts[1];const or=zn.split("_");$e=or.length>=2&&or[1]=="type"?$e+(zn+"="+ts+"&"):$e+(zn+"=redacted&")}}}else $e=null;else $e=le;return"XMLHTTP REQ ("+C+") [attempt "+X+"]: "+v+`
`+w+`
`+$e})}function Tt(h,v,w,C,X,le,$e){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+X+"]: "+v+`
`+w+`
`+le+" "+$e})}function sn(h,v,w,C){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+rn(h,w)+(C?" "+C:"")})}function Wt(h,v){h.info(function(){return"TIMEOUT: "+v})}Dt.prototype.info=function(){};function rn(h,v){if(!h.g)return v;if(!v)return null;try{const le=JSON.parse(v);if(le){for(h=0;h<le.length;h++)if(Array.isArray(le[h])){var w=le[h];if(!(w.length<2)){var C=w[1];if(Array.isArray(C)&&!(C.length<1)){var X=C[0];if(X!="noop"&&X!="stop"&&X!="close")for(let $e=1;$e<C.length;$e++)C[$e]=""}}}}return me(le)}catch{return v}}var un={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Rn;function q(){}k(q,st),q.prototype.g=function(){return new XMLHttpRequest},Rn=new q;function fe(h){return encodeURIComponent(String(h))}function ge(h){var v=1;h=h.split(":");const w=[];for(;v>0&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function ve(h,v,w,C){this.j=h,this.i=v,this.l=w,this.S=C||1,this.V=new Bn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}var We={},mt={};function tt(h,v,w){h.M=1,h.A=Qt(Ce(v)),h.u=w,h.R=!0,dt(h,null)}function dt(h,v){h.F=Date.now(),Wn(h),h.B=Ce(h.A);var w=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),Cs(w.i,"t",C),h.C=0,w=h.j.L,h.h=new de,h.g=Ou(h.j,w?v:null,!h.u),h.P>0&&(h.O=new zt(y(h.Y,h,h.g),h.P)),v=h.V,w=h.g,C=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(Ht[0]=X.toString()),X=Ht);for(let le=0;le<X.length;le++){const $e=Ge(w,X[le],C||v.handleEvent,!1,v.h||v);if(!$e)break;v.g[$e.key]=$e}v=h.J?N(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Et(),Ft(h.i,h.v,h.B,h.l,h.S,h.u)}ve.prototype.ba=function(h){h=h.target;const v=this.O;v&&jr(h)==3?v.j():this.Y(h)},ve.prototype.Y=function(h){try{if(h==this.g)e:{const Bt=jr(this.g),ts=this.g.ya(),vn=this.g.ca();if(!(Bt<3)&&(Bt!=3||this.g&&(this.h.h||this.g.la()||bs(this.g)))){this.K||Bt!=4||ts==7||(ts==8||vn<=0?Et(3):Et(2)),mn(this);var v=this.g.ca();this.X=v;var w=pt(this);if(this.o=v==200,Tt(this.i,this.v,this.B,this.l,this.S,Bt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var C,X=this.g;if((C=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(C)){var le=C;break t}}le=null}if(h=le)sn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,T(this,h);else{this.o=!1,this.m=3,Ye(12),ce(this),F(this);break e}}if(this.R){h=!0;let zn;for(;!this.K&&this.C<w.length;)if(zn=Ns(this,w),zn==mt){Bt==4&&(this.m=4,Ye(14),h=!1),sn(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==We){this.m=4,Ye(15),sn(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else sn(this.i,this.l,zn,null),T(this,zn);if(an(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||w.length!=0||this.h.h||(this.m=1,Ye(16),h=!1),this.o=this.o&&h,!h)sn(this.i,this.l,w,"[Invalid Chunked Response]"),ce(this),F(this);else if(w.length>0&&!this.W){this.W=!0;var $e=this.j;$e.g==this&&$e.aa&&!$e.P&&($e.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Ql($e),$e.P=!0,Ye(11))}}else sn(this.i,this.l,w,null),T(this,w);Bt==4&&ce(this),this.o&&!this.K&&(Bt==4?Mu(this.j,this):(this.o=!1,Wn(this)))}else fa(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,Ye(12)):(this.m=0,Ye(13)),ce(this),F(this)}}}catch{}};function pt(h){if(!an(h))return h.g.la();const v=bs(h.g);if(v==="")return"";let w="";const C=v.length,X=jr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ce(h),F(h),"";h.h.i=new d.TextDecoder}for(let le=0;le<C;le++)h.h.h=!0,w+=h.h.i.decode(v[le],{stream:!(X&&le==C-1)});return v.length=0,h.h.g+=w,h.C=0,h.h.g}function an(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ns(h,v){var w=h.C,C=v.indexOf(`
`,w);return C==-1?mt:(w=Number(v.substring(w,C)),isNaN(w)?We:(C+=1,C+w>v.length?mt:(v=v.slice(C,C+w),h.C=C+w,v)))}ve.prototype.cancel=function(){this.K=!0,ce(this)};function Wn(h){h.T=Date.now()+h.H,Qn(h,h.H)}function Qn(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ct(y(h.aa,h),v)}function mn(h){h.D&&(d.clearTimeout(h.D),h.D=null)}ve.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Wt(this.i,this.B),this.M!=2&&(Et(),Ye(17)),ce(this),this.m=2,F(this)):Qn(this,this.T-h)};function F(h){h.j.I==0||h.K||Mu(h.j,h)}function ce(h){mn(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,wn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function T(h,v){try{var w=h.j;if(w.I!=0&&(w.g==h||Be(w.h,h))){if(!h.L&&Be(w.h,h)&&w.I==3){try{var C=w.Ba.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var X=C;if(X[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Lo(w),Ka(w);else break e;Yi(w),Ye(18)}}else w.xa=X[1],0<w.xa-w.K&&X[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ct(y(w.Va,w),6e3));He(w.h)<=1&&w.ta&&(w.ta=void 0)}else Yr(w,11)}else if((h.L||w.g==h)&&Lo(w),!M(v))for(X=w.Ba.g.parse(v),v=0;v<X.length;v++){let vn=X[v];const zn=vn[0];if(!(zn<=w.K))if(w.K=zn,vn=vn[1],w.I==2)if(vn[0]=="c"){w.M=vn[1],w.ba=vn[2];const or=vn[3];or!=null&&(w.ka=or,w.j.info("VER="+w.ka));const Qr=vn[4];Qr!=null&&(w.za=Qr,w.j.info("SVER="+w.za));const Sr=vn[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(C=1.5*Sr,w.O=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Nr=h.g;if(Nr){const Qi=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qi){var le=C.h;le.g||Qi.indexOf("spdy")==-1&&Qi.indexOf("quic")==-1&&Qi.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(Oe(le,le.h),le.h=null))}if(C.G){const Oo=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Oo&&(C.wa=Oo,it(C.J,C.G,Oo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),C=w;var $e=h;if(C.na=Lu(C,C.L?C.ba:null,C.W),$e.L){Ot(C.h,$e);var Bt=$e,ts=C.O;ts&&(Bt.H=ts),Bt.D&&(mn(Bt),Wn(Bt)),C.g=$e}else Au(C);w.i.length>0&&Kr(w)}else vn[0]!="stop"&&vn[0]!="close"||Yr(w,7);else w.I==3&&(vn[0]=="stop"||vn[0]=="close"?vn[0]=="stop"?Yr(w,7):Kl(w):vn[0]!="noop"&&w.l&&w.l.qa(vn),w.A=0)}}Et(4)}catch{}}var R=class{constructor(h,v){this.g=h,this.map=v}};function G(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function J(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function He(h){return h.h?1:h.g?h.g.size:0}function Be(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Oe(h,v){h.g?h.g.add(v):h.h=v}function Ot(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}G.prototype.cancel=function(){if(this.i=xt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function xt(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.G);return v}return L(h.i)}var W=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function he(h,v){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const C=h[w].indexOf("=");let X,le=null;C>=0?(X=h[w].substring(0,C),le=h[w].substring(C+1)):X=h[w],v(X,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function ae(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof ae?(this.l=h.l,Pe(this,h.j),this.o=h.o,this.g=h.g,at(this,h.u),this.h=h.h,Rt(this,Hr(h.i)),this.m=h.m):h&&(v=String(h).match(W))?(this.l=!1,Pe(this,v[1]||"",!0),this.o=Un(v[2]||""),this.g=Un(v[3]||"",!0),at(this,v[4]),this.h=Un(v[5]||"",!0),Rt(this,v[6]||"",!0),this.m=Un(v[7]||"")):(this.l=!1,this.i=new Gn(null,this.l))}ae.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(pn(v,Fa,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(pn(v,Fa,!0),"@"),h.push(fe(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(pn(w,w.charAt(0)=="/"?qa:qi,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",pn(w,hn)),h.join("")},ae.prototype.resolve=function(h){const v=Ce(this);let w=!!h.j;w?Pe(v,h.j):w=!!h.o,w?v.o=h.o:w=!!h.g,w?v.g=h.g:w=h.u!=null;var C=h.h;if(w)at(v,h.u);else if(w=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var X=v.h.lastIndexOf("/");X!=-1&&(C=v.h.slice(0,X+1)+C)}if(X=C,X==".."||X==".")C="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){C=X.lastIndexOf("/",0)==0,X=X.split("/");const le=[];for(let $e=0;$e<X.length;){const Bt=X[$e++];Bt=="."?C&&$e==X.length&&le.push(""):Bt==".."?((le.length>1||le.length==1&&le[0]!="")&&le.pop(),C&&$e==X.length&&le.push("")):(le.push(Bt),C=!0)}C=le.join("/")}else C=X}return w?v.h=C:w=h.i.toString()!=="",w?Rt(v,Hr(h.i)):w=!!h.m,w&&(v.m=h.m),v};function Ce(h){return new ae(h)}function Pe(h,v,w){h.j=w?Un(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function at(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Rt(h,v,w){v instanceof Gn?(h.i=v,Ha(h.i,h.l)):(w||(v=pn(v,wr)),h.i=new Gn(v,h.l))}function it(h,v,w){h.i.set(v,w)}function Qt(h){return it(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Un(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function pn(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,Pn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Pn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fa=/[#\/\?@]/g,qi=/[#\?:]/g,qa=/[#\?]/g,wr=/[#\?@]/g,hn=/#/g;function Gn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Kn(h){h.g||(h.g=new Map,h.h=0,h.i&&he(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}s=Gn.prototype,s.add=function(h,v){Kn(this),this.i=null,h=Tr(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function _r(h,v){Kn(h),v=Tr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function kr(h,v){return Kn(h),v=Tr(h,v),h.g.has(v)}s.forEach=function(h,v){Kn(this),this.g.forEach(function(w,C){w.forEach(function(X){h.call(v,X,C,this)},this)},this)};function vs(h,v){Kn(h);let w=[];if(typeof v=="string")kr(h,v)&&(w=w.concat(h.g.get(Tr(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)w=w.concat(h[v]);return w}s.set=function(h,v){return Kn(this),this.i=null,h=Tr(this,h),kr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=vs(this,h),h.length>0?String(h[0]):v):v};function Cs(h,v,w){_r(h,v),w.length>0&&(h.i=null,h.g.set(Tr(h,v),L(w)),h.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let C=0;C<v.length;C++){var w=v[C];const X=fe(w);w=vs(this,w);for(let le=0;le<w.length;le++){let $e=X;w[le]!==""&&($e+="="+fe(w[le])),h.push($e)}}return this.i=h.join("&")};function Hr(h){const v=new Gn;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Tr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ha(h,v){v&&!h.j&&(Kn(h),h.i=null,h.g.forEach(function(w,C){const X=C.toLowerCase();C!=X&&(_r(this,C),Cs(this,X,w))},h)),h.j=v}function Ps(h,v){const w=new Dt;if(d.Image){const C=new Image;C.onload=x(ar,w,"TestLoadImage: loaded",!0,v,C),C.onerror=x(ar,w,"TestLoadImage: error",!1,v,C),C.onabort=x(ar,w,"TestLoadImage: abort",!1,v,C),C.ontimeout=x(ar,w,"TestLoadImage: timeout",!1,v,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else v(!1)}function $l(h,v){const w=new Dt,C=new AbortController,X=setTimeout(()=>{C.abort(),ar(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:C.signal}).then(le=>{clearTimeout(X),le.ok?ar(w,"TestPingServer: ok",!0,v):ar(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(X),ar(w,"TestPingServer: error",!1,v)})}function ar(h,v,w,C,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),C(w)}catch{}}function $a(){this.g=new Re}function $r(h){this.i=h.Sb||null,this.h=h.ab||!1}k($r,st),$r.prototype.g=function(){return new Hi(this.i,this.h)};function Hi(h,v){ct.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(Hi,ct),s=Hi.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Er(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Er(this)),this.g&&(this.readyState=3,Er(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Wa(this):Er(this),this.readyState==3&&Mo(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Wa(this))},s.Na=function(h){this.g&&(this.response=h,Wa(this))},s.ga=function(){this.g&&Wa(this)};function Wa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Er(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function Er(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Hi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ir(h){let v="";return re(h,function(w,C){v+=C,v+=":",v+=w,v+=`\r
`}),v}function $i(h,v,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=ir(w),typeof h=="string"?w!=null&&fe(w):it(h,v,w))}function En(h){ct.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(En,ct);var Wr=/^https?$/i,Wl=["POST","PUT"];s=En.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Rn.g(),this.g.onreadystatechange=j(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(le){Wi(this,le);return}if(h=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var X in C)w.set(X,C[X]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const le of C.keys())w.set(le,C.get(le));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(le=>le.toLowerCase()=="content-type"),X=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Wl,v,void 0)>=0)||C||X||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,$e]of w)this.g.setRequestHeader(le,$e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(le){Wi(this,le)}};function Wi(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Gl(h),da(h)}function Gl(h){h.A||(h.A=!0,Xe(h,"complete"),Xe(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Xe(this,"complete"),Xe(this,"abort"),da(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),da(this,!0)),En.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Gi(this):this.Xa())},s.Xa=function(){Gi(this)};function Gi(h){if(h.h&&typeof u<"u"){if(h.v&&jr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Xe(h,"readystatechange"),jr(h)==4){h.h=!1;try{const le=h.ca();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var C;if(C=le===0){let $e=String(h.D).match(W)[1]||null;!$e&&d.self&&d.self.location&&($e=d.self.location.protocol.slice(0,-1)),C=!Wr.test($e?$e.toLowerCase():"")}w=C}if(w)Xe(h,"complete"),Xe(h,"success");else{h.o=6;try{var X=jr(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",Gl(h)}}finally{da(h)}}}}function da(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,v||Xe(h,"ready");try{w.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function jr(h){return h.g?h.g.readyState:0}s.ca=function(){try{return jr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Te(v)}};function bs(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function fa(h){const v={};h=(h.g&&jr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(M(h[C]))continue;var w=ge(h[C]);const X=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const le=v[X]||[];v[X]=le,le.push(w)}De(v,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function Ga(h){this.za=0,this.i=[],this.j=new Dt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gr("baseRetryDelayMs",5e3,h),this.Za=Gr("retryDelaySeedMs",1e4,h),this.Ta=Gr("forwardChannelMaxRetries",2,h),this.va=Gr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new G(h&&h.concurrentRequestLimit),this.Ba=new $a,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ga.prototype,s.ka=8,s.I=1,s.connect=function(h,v,w,C){Ye(0),this.W=h,this.H=v||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.J=Lu(this,null,this.W),Kr(this)};function Kl(h){if(Do(h),h.I==3){var v=h.V++,w=Ce(h.J);if(it(w,"SID",h.M),it(w,"RID",v),it(w,"TYPE","terminate"),Ki(h,w),v=new ve(h,h.j,v),v.M=2,v.A=Qt(Ce(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.A,w=!0),w||(v.g=Ou(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Wn(v)}Pu(h)}function Ka(h){h.g&&(Ql(h),h.g.cancel(),h.g=null)}function Do(h){Ka(h),h.v&&(d.clearTimeout(h.v),h.v=null),Lo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Kr(h){if(!J(h.h)&&!h.m){h.m=!0;var v=h.Ea;Ve||E(),Ae||(Ve(),Ae=!0),I.add(v,h),h.D=0}}function Po(h,v){return He(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ct(y(h.Ea,h,v),Du(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new ve(this,this.j,h);let le=this.o;if(this.U&&(le?(le=N(le),ie(le,this.U)):le=this.U),this.u!==null||this.R||(X.J=le,le=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=Ru(this,X,v),w=Ce(this.J),it(w,"RID",h),it(w,"CVER",22),this.G&&it(w,"X-HTTP-Session-Id",this.G),Ki(this,w),le&&(this.R?v="headers="+fe(ir(le))+"&"+v:this.u&&$i(w,this.u,le)),Oe(this.h,X),this.Ra&&it(w,"TYPE","init"),this.S?(it(w,"$req",v),it(w,"SID","null"),X.U=!0,tt(X,w,null)):tt(X,w,v),this.I=2}}else this.I==3&&(h?Yl(this,h):this.i.length==0||J(this.h)||Yl(this))};function Yl(h,v){var w;v?w=v.l:w=h.V++;const C=Ce(h.J);it(C,"SID",h.M),it(C,"RID",w),it(C,"AID",h.K),Ki(h,C),h.u&&h.o&&$i(C,h.u,h.o),w=new ve(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Ru(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Oe(h.h,w),tt(w,C,v)}function Ki(h,v){h.H&&re(h.H,function(w,C){it(v,C,w)}),h.l&&re({},function(w,C){it(v,C,w)})}function Ru(h,v,w){w=Math.min(h.i.length,w);const C=h.l?y(h.l.Ka,h.l,h):null;e:{var X=h.i;let Bt=-1;for(;;){const ts=["count="+w];Bt==-1?w>0?(Bt=X[0].g,ts.push("ofs="+Bt)):Bt=0:ts.push("ofs="+Bt);let vn=!0;for(let zn=0;zn<w;zn++){var le=X[zn].g;const or=X[zn].map;if(le-=Bt,le<0)Bt=Math.max(0,X[zn].g-100),vn=!1;else try{le="req"+le+"_"||"";try{var $e=or instanceof Map?or:Object.entries(or);for(const[Qr,Sr]of $e){let Nr=Sr;p(Sr)&&(Nr=me(Sr)),ts.push(le+Qr+"="+encodeURIComponent(Nr))}}catch(Qr){throw ts.push(le+"type="+encodeURIComponent("_badmap")),Qr}}catch{C&&C(or)}}if(vn){$e=ts.join("&");break e}}$e=void 0}return h=h.i.splice(0,w),v.G=h,$e}function Au(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;Ve||E(),Ae||(Ve(),Ae=!0),I.add(v,h),h.A=0}}function Yi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ct(y(h.Da,h),Du(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Iu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ct(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ye(10),Ka(this),Iu(this))};function Ql(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Iu(h){h.g=new ve(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Ce(h.na);it(v,"RID","rpc"),it(v,"SID",h.M),it(v,"AID",h.K),it(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&it(v,"TO",h.ia),it(v,"TYPE","xmlhttp"),Ki(h,v),h.u&&h.o&&$i(v,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Qt(Ce(v)),w.u=null,w.R=!0,dt(w,h)}s.Va=function(){this.C!=null&&(this.C=null,Ka(this),Yi(this),Ye(19))};function Lo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Mu(h,v){var w=null;if(h.g==v){Lo(h),Ql(h),h.g=null;var C=2}else if(Be(h.h,v))w=v.G,Ot(h.h,v),C=1;else return;if(h.I!=0){if(v.o)if(C==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var X=h.D;C=ze(),Xe(C,new jt(C,w)),Kr(h)}else Au(h);else if(X=v.m,X==3||X==0&&v.X>0||!(C==1&&Po(h,v)||C==2&&Yi(h)))switch(w&&w.length>0&&(v=h.h,v.i=v.i.concat(w)),X){case 1:Yr(h,5);break;case 4:Yr(h,10);break;case 3:Yr(h,6);break;default:Yr(h,2)}}}function Du(h,v){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*v}function Yr(h,v){if(h.j.info("Error code "+v),v==2){var w=y(h.bb,h),C=h.Ua;const X=!C;C=new ae(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Pe(C,"https"),Qt(C),X?Ps(C.toString(),w):$l(C.toString(),w)}else Ye(2);h.I=0,h.l&&h.l.pa(v),Pu(h),Do(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function Pu(h){if(h.I=0,h.ja=[],h.l){const v=xt(h.h);(v.length!=0||h.i.length!=0)&&(H(h.ja,v),H(h.ja,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.oa()}}function Lu(h,v,w){var C=w instanceof ae?Ce(w):new ae(w);if(C.g!="")v&&(C.g=v+"."+C.g),at(C,C.u);else{var X=d.location;C=X.protocol,v=v?v+"."+X.hostname:X.hostname,X=+X.port;const le=new ae(null);C&&Pe(le,C),v&&(le.g=v),X&&at(le,X),w&&(le.h=w),C=le}return w=h.G,v=h.wa,w&&v&&it(C,w,v),it(C,"VER",h.ka),Ki(h,C),C}function Ou(h,v,w){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new En(new $r({ab:w})):new En(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vu(){}s=Vu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ya(){}Ya.prototype.g=function(h,v){return new Ls(h,v)};function Ls(h,v){ct.call(this),this.g=new Ga(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!M(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!M(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ma(this)}k(Ls,ct),Ls.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ls.prototype.close=function(){Kl(this.g)},Ls.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=me(h),h=w);v.i.push(new R(v.Ya++,h)),v.I==3&&Kr(v)},Ls.prototype.N=function(){this.g.l=null,delete this.j,Kl(this.g),delete this.g,Ls.Z.N.call(this)};function Bu(h){et.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}k(Bu,et);function Uu(){Ke.call(this),this.status=1}k(Uu,Ke);function ma(h){this.g=h}k(ma,Vu),ma.prototype.ra=function(){Xe(this.g,"a")},ma.prototype.qa=function(h){Xe(this.g,new Bu(h))},ma.prototype.pa=function(h){Xe(this.g,new Uu)},ma.prototype.oa=function(){Xe(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,Ls.prototype.send=Ls.prototype.o,Ls.prototype.open=Ls.prototype.m,Ls.prototype.close=Ls.prototype.close,jw=function(){return new Ya},Ew=function(){return ze()},Tw=Ue,Qp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},un.NO_ERROR=0,un.TIMEOUT=8,un.HTTP_ERROR=6,ud=un,fn.COMPLETE="complete",kw=fn,Je.EventType=qe,qe.OPEN="a",qe.CLOSE="b",qe.ERROR="c",qe.MESSAGE="d",ct.prototype.listen=ct.prototype.J,Fc=Je,En.prototype.listenOnce=En.prototype.K,En.prototype.getLastError=En.prototype.Ha,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.ca,En.prototype.getResponseJson=En.prototype.La,En.prototype.getResponseText=En.prototype.la,En.prototype.send=En.prototype.ea,En.prototype.setWithCredentials=En.prototype.Fa,_w=En}).apply(typeof Wh<"u"?Wh:typeof self<"u"?self:typeof window<"u"?window:{});class Is{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Is.UNAUTHENTICATED=new Is(null),Is.GOOGLE_CREDENTIALS=new Is("google-credentials-uid"),Is.FIRST_PARTY=new Is("first-party-uid"),Is.MOCK_USER=new Is("mock-user");let Ul="12.8.0";function BC(s){Ul=s}const Eo=new Tg("@firebase/firestore");function yl(){return Eo.logLevel}function rt(s,...e){if(Eo.logLevel<=Zt.DEBUG){const n=e.map(Og);Eo.debug(`Firestore (${Ul}): ${s}`,...n)}}function Va(s,...e){if(Eo.logLevel<=Zt.ERROR){const n=e.map(Og);Eo.error(`Firestore (${Ul}): ${s}`,...n)}}function Rl(s,...e){if(Eo.logLevel<=Zt.WARN){const n=e.map(Og);Eo.warn(`Firestore (${Ul}): ${s}`,...n)}}function Og(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Nt(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Sw(s,i,n)}function Sw(s,e,n){let i=`FIRESTORE (${Ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Va(i),new Error(i)}function xn(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||Sw(e,l,i)}function Lt(s,e){return s}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends ha{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Da{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Nw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Is.UNAUTHENTICATED)))}shutdown(){}}class zC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class FC{constructor(e){this.t=e,this.currentUser=Is.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xn(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new Da;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Da,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Da)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xn(typeof i.accessToken=="string",31837,{l:i}),new Nw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xn(e===null||typeof e=="string",2055,{h:e}),new Is(e)}}class qC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Is.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class HC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new qC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Is.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $C{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xn(this.o===void 0,3512);const i=u=>{u.error!=null&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,rt("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(xn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function WC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class Vg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=WC(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function en(s,e){return s<e?-1:s>e?1:0}function Xp(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return vp(l)===vp(u)?en(l,u):vp(l)?1:-1}return en(s.length,e.length)}const GC=55296,KC=57343;function vp(s){const e=s.charCodeAt(0);return e>=GC&&e<=KC}function Al(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}const W1="__name__";class na{constructor(e,n,i){n===void 0?n=0:n>e.length&&Nt(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Nt(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return na.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof na?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=na.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return en(e.length,n.length)}static compareSegments(e,n){const i=na.isNumericId(e),l=na.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?na.extractNumericId(e).compare(na.extractNumericId(n)):Xp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class Mn extends na{construct(e,n,i){return new Mn(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new Mn(n)}static emptyPath(){return new Mn([])}}const YC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Es extends na{construct(e,n,i){return new Es(e,n,i)}static isValidIdentifier(e){return YC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Es.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===W1}static keyField(){return new Es([W1])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Ze(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ze(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(i+=p,l++):(u(),l++)}if(u(),d)throw new Ze(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Es(n)}static emptyPath(){return new Es([])}}class yt{constructor(e){this.path=e}static fromPath(e){return new yt(Mn.fromString(e))}static fromName(e){return new yt(Mn.fromString(e).popFirst(5))}static empty(){return new yt(Mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Mn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new Mn(e.slice()))}}function Cw(s,e,n){if(!n)throw new Ze(Ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function QC(s,e,n,i){if(e===!0&&i===!0)throw new Ze(Ee.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function G1(s){if(!yt.isDocumentKey(s))throw new Ze(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function K1(s){if(yt.isDocumentKey(s))throw new Ze(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Rw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Hd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Nt(12329,{type:typeof s})}function Vr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ze(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hd(s);throw new Ze(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function fs(s,e){const n={typeString:s};return e&&(n.value=e),n}function _u(s,e){if(!Rw(s))throw new Ze(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(l&&typeof d!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Ze(Ee.INVALID_ARGUMENT,n);return!0}const Y1=-62135596800,Q1=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Q1);return new ft(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Y1)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q1}_compareTo(e){return this.seconds===e.seconds?en(this.nanoseconds,e.nanoseconds):en(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_u(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:fs("string",ft._jsonSchemaVersion),seconds:fs("number"),nanoseconds:fs("number")};class Mt{static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new ft(0,0))}static max(){return new Mt(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ru=-1;function XC(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=Mt.fromTimestamp(i===1e9?new ft(n+1,0):new ft(n,i));return new Ii(l,yt.empty(),e)}function JC(s){return new Ii(s.readTime,s.key,ru)}class Ii{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ii(Mt.min(),yt.empty(),ru)}static max(){return new Ii(Mt.max(),yt.empty(),ru)}}function ZC(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=yt.comparator(s.documentKey,e.documentKey),n!==0?n:en(s.largestBatchId,e.largestBatchId))}const eR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function zl(s){if(s.code!==Ee.FAILED_PRECONDITION||s.message!==eR)throw s;rt("LocalStore","Unexpectedly lost primary lease")}class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ne(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ne?n:Ne.resolve(n)}catch(n){return Ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ne.reject(n)}static resolve(e){return new Ne(((n,i)=>{n(e)}))}static reject(e){return new Ne(((n,i)=>{i(e)}))}static waitFor(e){return new Ne(((n,i)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&n()}),(g=>i(g)))})),d=!0,u===l&&n()}))}static or(e){let n=Ne.resolve(!1);for(const i of e)n=n.next((l=>l?Ne.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new Ne(((i,l)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((x=>{d[y]=x,++p,p===u&&i(d)}),(x=>l(x)))}}))}static doWhile(e,n){return new Ne(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function nR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fl(s){return s.name==="IndexedDbTransactionError"}class $d{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$d.ce=-1;const Bg=-1;function Wd(s){return s==null}function Sd(s){return s===0&&1/s==-1/0}function sR(s){return typeof s=="number"&&Number.isInteger(s)&&!Sd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Aw="";function rR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=X1(e)),e=aR(s.get(n),e);return X1(e)}function aR(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case Aw:n+="";break;default:n+=u}}return n}function X1(s){return s+Aw+""}function J1(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ui(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Iw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Yn{constructor(e,n){this.comparator=e,this.root=n||Ts.EMPTY}insert(e,n){return new Yn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ts.BLACK,null,null))}remove(e){return new Yn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ts.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gh(this.root,e,this.comparator,!0)}}class Gh{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ts{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??Ts.RED,this.left=l??Ts.EMPTY,this.right=u??Ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new Ts(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Ts.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Nt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Nt(27949);return e+(this.isRed()?0:1)}}Ts.EMPTY=null,Ts.RED=!0,Ts.BLACK=!1;Ts.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt(57766)}get value(){throw Nt(16141)}get color(){throw Nt(16727)}get left(){throw Nt(29726)}get right(){throw Nt(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new Ts(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ps{constructor(e){this.comparator=e,this.data=new Yn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z1(this.data.getIterator())}getIteratorFrom(e){return new Z1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof ps)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ps(this.comparator);return n.data=e,n}}class Z1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class nr{constructor(e){this.fields=e,e.sort(Es.comparator)}static empty(){return new nr([])}unionWith(e){let n=new ps(Es.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new nr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class Mw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class js{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Mw("Invalid base64 string: "+u):u}})(e);return new js(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new js(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return en(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}js.EMPTY_BYTE_STRING=new js("");const iR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(s){if(xn(!!s,39018),typeof s=="string"){let e=0;const n=iR.exec(s);if(xn(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:rs(s.seconds),nanos:rs(s.nanos)}}function rs(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Di(s){return typeof s=="string"?js.fromBase64String(s):js.fromUint8Array(s)}const Dw="server_timestamp",Pw="__type__",Lw="__previous_value__",Ow="__local_write_time__";function Ug(s){return(s?.mapValue?.fields||{})[Pw]?.stringValue===Dw}function Gd(s){const e=s.mapValue.fields[Lw];return Ug(e)?Gd(e):e}function au(s){const e=Mi(s.mapValue.fields[Ow].timestampValue);return new ft(e.seconds,e.nanos)}class oR{constructor(e,n,i,l,u,d,p,g,y,x,k){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x,this.apiKey=k}}const Nd="(default)";class iu{constructor(e,n){this.projectId=e,this.database=n||Nd}static empty(){return new iu("","")}get isDefaultDatabase(){return this.database===Nd}isEqual(e){return e instanceof iu&&e.projectId===this.projectId&&e.database===this.database}}function lR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ze(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new iu(s.options.projectId,e)}const Vw="__type__",cR="__max__",Kh={mapValue:{}},Bw="__vector__",Cd="value";function Pi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ug(s)?4:hR(s)?9007199254740991:uR(s)?10:11:Nt(28295,{value:s})}function ua(s,e){if(s===e)return!0;const n=Pi(s);if(n!==Pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return au(s).isEqual(au(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=Mi(l.timestampValue),p=Mi(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Di(l.bytesValue).isEqual(Di(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return rs(l.geoPointValue.latitude)===rs(u.geoPointValue.latitude)&&rs(l.geoPointValue.longitude)===rs(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return rs(l.integerValue)===rs(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=rs(l.doubleValue),p=rs(u.doubleValue);return d===p?Sd(d)===Sd(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return Al(s.arrayValue.values||[],e.arrayValue.values||[],ua);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(J1(d)!==J1(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!ua(d[g],p[g])))return!1;return!0})(s,e);default:return Nt(52216,{left:s})}}function ou(s,e){return(s.values||[]).find((n=>ua(n,e)))!==void 0}function Il(s,e){if(s===e)return 0;const n=Pi(s),i=Pi(e);if(n!==i)return en(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return en(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=rs(u.integerValue||u.doubleValue),g=rs(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return e2(s.timestampValue,e.timestampValue);case 4:return e2(au(s),au(e));case 5:return Xp(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Di(u),g=Di(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const x=en(p[y],g[y]);if(x!==0)return x}return en(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=en(rs(u.latitude),rs(d.latitude));return p!==0?p:en(rs(u.longitude),rs(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return t2(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[Cd]?.arrayValue,x=g[Cd]?.arrayValue,k=en(y?.values?.length||0,x?.values?.length||0);return k!==0?k:t2(y,x)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Kh.mapValue&&d===Kh.mapValue)return 0;if(u===Kh.mapValue)return 1;if(d===Kh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let k=0;k<g.length&&k<x.length;++k){const j=Xp(g[k],x[k]);if(j!==0)return j;const L=Il(p[g[k]],y[x[k]]);if(L!==0)return L}return en(g.length,x.length)})(s.mapValue,e.mapValue);default:throw Nt(23264,{he:n})}}function e2(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return en(s,e);const n=Mi(s),i=Mi(e),l=en(n.seconds,i.seconds);return l!==0?l:en(n.nanos,i.nanos)}function t2(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=Il(n[l],i[l]);if(u)return u}return en(n.length,i.length)}function Ml(s){return Jp(s)}function Jp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Mi(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Di(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return yt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=Jp(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const d of i)u?u=!1:l+=",",l+=`${d}:${Jp(n.fields[d])}`;return l+"}"})(s.mapValue):Nt(61005,{value:s})}function hd(s){switch(Pi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gd(s);return e?16+hd(e):16;case 5:return 2*s.stringValue.length;case 6:return Di(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+hd(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return Ui(i.fields,((u,d)=>{l+=u.length+hd(d)})),l})(s.mapValue);default:throw Nt(13486,{value:s})}}function n2(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Zp(s){return!!s&&"integerValue"in s}function zg(s){return!!s&&"arrayValue"in s}function s2(s){return!!s&&"nullValue"in s}function r2(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function dd(s){return!!s&&"mapValue"in s}function uR(s){return(s?.mapValue?.fields||{})[Vw]?.stringValue===Bw}function Kc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ui(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Kc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kc(s.arrayValue.values[n]);return e}return{...s}}function hR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===cR}class Gs{constructor(e){this.value=e}static empty(){return new Gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!dd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(n)}setAll(e){let n=Es.emptyPath(),i={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,l),i={},l=[],n=p.popLast()}d?i[p.lastSegment()]=Kc(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());dd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ua(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];dd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){Ui(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new Gs(Kc(this.value))}}function Uw(s){const e=[];return Ui(s.fields,((n,i)=>{const l=new Es([n]);if(dd(i)){const u=Uw(i.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new nr(e)}class Ms{constructor(e,n,i,l,u,d,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Ms(e,0,Mt.min(),Mt.min(),Mt.min(),Gs.empty(),0)}static newFoundDocument(e,n,i,l){return new Ms(e,1,n,Mt.min(),i,l,0)}static newNoDocument(e,n){return new Ms(e,2,n,Mt.min(),Mt.min(),Gs.empty(),0)}static newUnknownDocument(e,n){return new Ms(e,3,n,Mt.min(),Mt.min(),Gs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ms&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ms(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rd{constructor(e,n){this.position=e,this.inclusive=n}}function a2(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],d=s.position[l];if(u.field.isKeyField()?i=yt.comparator(yt.fromName(d.referenceValue),n.key):i=Il(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function i2(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ua(s.position[n],e.position[n]))return!1;return!0}class lu{constructor(e,n="asc"){this.field=e,this.dir=n}}function dR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class zw{}class ds extends zw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new mR(e,n,i):n==="array-contains"?new yR(e,i):n==="in"?new vR(e,i):n==="not-in"?new bR(e,i):n==="array-contains-any"?new xR(e,i):new ds(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new pR(e,i):new gR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Il(n,this.value)):n!==null&&Pi(this.value)===Pi(n)&&this.matchesComparison(Il(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends zw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Br(e,n)}matches(e){return Fw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fw(s){return s.op==="and"}function qw(s){return fR(s)&&Fw(s)}function fR(s){for(const e of s.filters)if(e instanceof Br)return!1;return!0}function eg(s){if(s instanceof ds)return s.field.canonicalString()+s.op.toString()+Ml(s.value);if(qw(s))return s.filters.map((e=>eg(e))).join(",");{const e=s.filters.map((n=>eg(n))).join(",");return`${s.op}(${e})`}}function Hw(s,e){return s instanceof ds?(function(i,l){return l instanceof ds&&i.op===l.op&&i.field.isEqual(l.field)&&ua(i.value,l.value)})(s,e):s instanceof Br?(function(i,l){return l instanceof Br&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,d,p)=>u&&Hw(d,l.filters[p])),!0):!1})(s,e):void Nt(19439)}function $w(s){return s instanceof ds?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ml(n.value)}`})(s):s instanceof Br?(function(n){return n.op.toString()+" {"+n.getFilters().map($w).join(" ,")+"}"})(s):"Filter"}class mR extends ds{constructor(e,n,i){super(e,n,i),this.key=yt.fromName(i.referenceValue)}matches(e){const n=yt.comparator(e.key,this.key);return this.matchesComparison(n)}}class pR extends ds{constructor(e,n){super(e,"in",n),this.keys=Ww("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class gR extends ds{constructor(e,n){super(e,"not-in",n),this.keys=Ww("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Ww(s,e){return(e.arrayValue?.values||[]).map((n=>yt.fromName(n.referenceValue)))}class yR extends ds{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return zg(n)&&ou(n.arrayValue,this.value)}}class vR extends ds{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ou(this.value.arrayValue,n)}}class bR extends ds{constructor(e,n){super(e,"not-in",n)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ou(this.value.arrayValue,n)}}class xR extends ds{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!zg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>ou(this.value.arrayValue,i)))}}class wR{constructor(e,n=null,i=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function o2(s,e=null,n=[],i=[],l=null,u=null,d=null){return new wR(s,e,n,i,l,u,d)}function Fg(s){const e=Lt(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>eg(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Wd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Ml(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Ml(i))).join(",")),e.Te=n}return e.Te}function qg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!dR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Hw(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!i2(s.startAt,e.startAt)&&i2(s.endAt,e.endAt)}function tg(s){return yt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class ql{constructor(e,n=null,i=[],l=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function _R(s,e,n,i,l,u,d,p){return new ql(s,e,n,i,l,u,d,p)}function Hg(s){return new ql(s)}function l2(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function kR(s){return yt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Gw(s){return s.collectionGroup!==null}function Yc(s){const e=Lt(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new ps(Es.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new lu(u,i))})),n.has(Es.keyField().canonicalString())||e.Ie.push(new lu(Es.keyField(),i))}return e.Ie}function oa(s){const e=Lt(s);return e.Ee||(e.Ee=TR(e,Yc(s))),e.Ee}function TR(s,e){if(s.limitType==="F")return o2(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new lu(l.field,u)}));const n=s.endAt?new Rd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Rd(s.startAt.position,s.startAt.inclusive):null;return o2(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function ng(s,e){const n=s.filters.concat([e]);return new ql(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function ER(s,e){const n=s.explicitOrderBy.concat([e]);return new ql(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Ad(s,e,n){return new ql(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Kd(s,e){return qg(oa(s),oa(e))&&s.limitType===e.limitType}function Kw(s){return`${Fg(oa(s))}|lt:${s.limitType}`}function vl(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>$w(l))).join(", ")}]`),Wd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Ml(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Ml(l))).join(",")),`Target(${i})`})(oa(s))}; limitType=${s.limitType})`}function Yd(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):yt.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of Yc(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(d,p,g){const y=a2(d,p,g);return d.inclusive?y<=0:y<0})(i.startAt,Yc(i),l)||i.endAt&&!(function(d,p,g){const y=a2(d,p,g);return d.inclusive?y>=0:y>0})(i.endAt,Yc(i),l))})(s,e)}function jR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Yw(s){return(e,n)=>{let i=!1;for(const l of Yc(s)){const u=SR(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function SR(s,e,n){const i=s.field.isKeyField()?yt.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Il(g,y):Nt(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Nt(19790,{direction:s.dir})}}class Ro{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return Iw(this.inner)}size(){return this.innerSize}}const NR=new Yn(yt.comparator);function Ba(){return NR}const Qw=new Yn(yt.comparator);function qc(...s){let e=Qw;for(const n of s)e=e.insert(n.key,n);return e}function Xw(s){let e=Qw;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function go(){return Qc()}function Jw(){return Qc()}function Qc(){return new Ro((s=>s.toString()),((s,e)=>s.isEqual(e)))}const CR=new Yn(yt.comparator),RR=new ps(yt.comparator);function tn(...s){let e=RR;for(const n of s)e=e.add(n);return e}const AR=new ps(en);function IR(){return AR}function $g(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function Zw(s){return{integerValue:""+s}}function e_(s,e){return sR(e)?Zw(e):$g(s,e)}class Qd{constructor(){this._=void 0}}function MR(s,e,n){return s instanceof cu?(function(l,u){const d={fields:{[Pw]:{stringValue:Dw},[Ow]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Ug(u)&&(u=Gd(u)),u&&(d.fields[Lw]=u),{mapValue:d}})(n,e):s instanceof uu?n_(s,e):s instanceof hu?s_(s,e):(function(l,u){const d=t_(l,u),p=c2(d)+c2(l.Ae);return Zp(d)&&Zp(l.Ae)?Zw(p):$g(l.serializer,p)})(s,e)}function DR(s,e,n){return s instanceof uu?n_(s,e):s instanceof hu?s_(s,e):n}function t_(s,e){return s instanceof du?(function(i){return Zp(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class cu extends Qd{}class uu extends Qd{constructor(e){super(),this.elements=e}}function n_(s,e){const n=r_(e);for(const i of s.elements)n.some((l=>ua(l,i)))||n.push(i);return{arrayValue:{values:n}}}class hu extends Qd{constructor(e){super(),this.elements=e}}function s_(s,e){let n=r_(e);for(const i of s.elements)n=n.filter((l=>!ua(l,i)));return{arrayValue:{values:n}}}class du extends Qd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function c2(s){return rs(s.integerValue||s.doubleValue)}function r_(s){return zg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class a_{constructor(e,n){this.field=e,this.transform=n}}function PR(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof uu&&l instanceof uu||i instanceof hu&&l instanceof hu?Al(i.elements,l.elements,ua):i instanceof du&&l instanceof du?ua(i.Ae,l.Ae):i instanceof cu&&l instanceof cu})(s.transform,e.transform)}class LR{constructor(e,n){this.version=e,this.transformResults=n}}class vr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Xd{}function i_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Wg(s.key,vr.none()):new ku(s.key,s.data,vr.none());{const n=s.data,i=Gs.empty();let l=new ps(Es.comparator);for(let u of e.fields)if(!l.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),l=l.add(u)}return new zi(s.key,i,new nr(l.toArray()),vr.none())}}function OR(s,e,n){s instanceof ku?(function(l,u,d){const p=l.value.clone(),g=h2(l.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof zi?(function(l,u,d){if(!fd(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=h2(l.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(o_(l)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Xc(s,e,n,i){return s instanceof ku?(function(u,d,p,g){if(!fd(u.precondition,d))return p;const y=u.value.clone(),x=d2(u.fieldTransforms,g,d);return y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof zi?(function(u,d,p,g){if(!fd(u.precondition,d))return p;const y=d2(u.fieldTransforms,g,d),x=d.data;return x.setAll(o_(u)),x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((k=>k.field)))})(s,e,n,i):(function(u,d,p){return fd(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function VR(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=t_(i.transform,l||null);u!=null&&(n===null&&(n=Gs.empty()),n.set(i.field,u))}return n||null}function u2(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Al(i,l,((u,d)=>PR(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ku extends Xd{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class zi extends Xd{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function o_(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function h2(s,e,n){const i=new Map;xn(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],d=u.transform,p=e.data.field(u.field);i.set(u.field,DR(d,p,n[l]))}return i}function d2(s,e,n){const i=new Map;for(const l of s){const u=l.transform,d=n.data.field(l.field);i.set(l.field,MR(u,d,e))}return i}class Wg extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BR extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UR{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&OR(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Xc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Xc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Jw();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(l.key)?null:p;const g=i_(d,p);g!==null&&i.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Mt.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),tn())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,((n,i)=>u2(n,i)))&&Al(this.baseMutations,e.baseMutations,((n,i)=>u2(n,i)))}}class Gg{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){xn(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return CR})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,i[d].version);return new Gg(e,n,i,l)}}class zR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class FR{constructor(e,n){this.count=e,this.unchangedNames=n}}var hs,cn;function qR(s){switch(s){case Ee.OK:return Nt(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Nt(15467,{code:s})}}function l_(s){if(s===void 0)return Va("GRPC error has no .code"),Ee.UNKNOWN;switch(s){case hs.OK:return Ee.OK;case hs.CANCELLED:return Ee.CANCELLED;case hs.UNKNOWN:return Ee.UNKNOWN;case hs.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case hs.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case hs.INTERNAL:return Ee.INTERNAL;case hs.UNAVAILABLE:return Ee.UNAVAILABLE;case hs.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case hs.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case hs.NOT_FOUND:return Ee.NOT_FOUND;case hs.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case hs.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case hs.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case hs.ABORTED:return Ee.ABORTED;case hs.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case hs.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case hs.DATA_LOSS:return Ee.DATA_LOSS;default:return Nt(39323,{code:s})}}(cn=hs||(hs={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";function HR(){return new TextEncoder}const $R=new Ci([4294967295,4294967295],0);function f2(s){const e=HR().encode(s),n=new ww;return n.update(e),new Uint8Array(n.digest())}function m2(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ci([n,i],0),new Ci([l,u],0)]}class Kg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Hc(`Invalid padding: ${n}`);if(i<0)throw new Hc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Hc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Hc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ci.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Ci.fromNumber(i)));return l.compare($R)===1&&(l=new Ci([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=f2(e),[i,l]=m2(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);if(!this.we(d))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Kg(u,l,n);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=f2(e),[i,l]=m2(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);this.be(d)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jd{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,Tu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Jd(Mt.min(),l,new Yn(en),Ba(),tn())}}class Tu{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Tu(i,n,tn(),tn(),tn())}}class md{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class c_{constructor(e,n){this.targetId=e,this.Ce=n}}class u_{constructor(e,n,i=js.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class p2{constructor(){this.ve=0,this.Fe=g2(),this.Me=js.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tn(),n=tn(),i=tn();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:Nt(38017,{changeType:u})}})),new Tu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=g2()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,xn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class WR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ba(),this.He=Yh(),this.Je=Yh(),this.Ze=new Yn(en)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Nt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(tg(u))if(i===0){const d=new yt(u.path);this.et(n,d,Ms.newNoDocument(d,Mt.min()))}else xn(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let d,p;try{d=Di(i).toUint8Array()}catch(g){if(g instanceof Mw)return Rl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Kg(d,l,u)}catch(g){return Rl(g instanceof Hc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&tg(p.target)){const g=new yt(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Ms.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let i=tn();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new Jd(e,n,this.Ze,this.je,i);return this.je=Ba(),this.He=Yh(),this.Je=Yh(),this.Ze=new Yn(en),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new p2,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ps(en),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ps(en),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||rt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new p2),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Yh(){return new Yn(yt.comparator)}function g2(){return new Yn(yt.comparator)}const GR={asc:"ASCENDING",desc:"DESCENDING"},KR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YR={and:"AND",or:"OR"};class QR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sg(s,e){return s.useProto3Json||Wd(e)?e:{value:e}}function Id(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function h_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function XR(s,e){return Id(s,e.toTimestamp())}function la(s){return xn(!!s,49232),Mt.fromTimestamp((function(n){const i=Mi(n);return new ft(i.seconds,i.nanos)})(s))}function Yg(s,e){return rg(s,e).canonicalString()}function rg(s,e){const n=(function(l){return new Mn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function d_(s){const e=Mn.fromString(s);return xn(y_(e),10190,{key:e.toString()}),e}function ag(s,e){return Yg(s.databaseId,e.path)}function bp(s,e){const n=d_(e);if(n.get(1)!==s.databaseId.projectId)throw new Ze(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Ze(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new yt(m_(n))}function f_(s,e){return Yg(s.databaseId,e)}function JR(s){const e=d_(s);return e.length===4?Mn.emptyPath():m_(e)}function ig(s){return new Mn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function m_(s){return xn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function y2(s,e,n){return{name:ag(s,e),fields:n.value.mapValue.fields}}function ZR(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Nt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,x){return y.useProto3Json?(xn(x===void 0||typeof x=="string",58123),js.fromBase64String(x||"")):(xn(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),js.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const x=y.code===void 0?Ee.UNKNOWN:l_(y.code);return new Ze(x,y.message||"")})(d);n=new u_(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=bp(s,i.document.name),u=la(i.document.updateTime),d=i.document.createTime?la(i.document.createTime):Mt.min(),p=new Gs({mapValue:{fields:i.document.fields}}),g=Ms.newFoundDocument(l,u,d,p),y=i.targetIds||[],x=i.removedTargetIds||[];n=new md(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=bp(s,i.document),u=i.readTime?la(i.readTime):Mt.min(),d=Ms.newNoDocument(l,u),p=i.removedTargetIds||[];n=new md([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=bp(s,i.document),u=i.removedTargetIds||[];n=new md([],u,l,null)}else{if(!("filter"in e))return Nt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,d=new FR(l,u),p=i.targetId;n=new c_(p,d)}}return n}function eA(s,e){let n;if(e instanceof ku)n={update:y2(s,e.key,e.value)};else if(e instanceof Wg)n={delete:ag(s,e.key)};else if(e instanceof zi)n={update:y2(s,e.key,e.data),updateMask:cA(e.fieldMask)};else{if(!(e instanceof BR))return Nt(16599,{dt:e.type});n={verify:ag(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const p=d.transform;if(p instanceof cu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof uu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof hu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof du)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Nt(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:XR(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Nt(27497)})(s,e.precondition)),n}function tA(s,e){return s&&s.length>0?(xn(e!==void 0,14353),s.map((n=>(function(l,u){let d=l.updateTime?la(l.updateTime):la(u);return d.isEqual(Mt.min())&&(d=la(u)),new LR(d,l.transformResults||[])})(n,e)))):[]}function nA(s,e){return{documents:[f_(s,e.path)]}}function sA(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=f_(s,l);const u=(function(y){if(y.length!==0)return g_(Br.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((x=>(function(j){return{field:bl(j.field),direction:iA(j.dir)}})(x)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=sg(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function rA(s){let e=JR(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){xn(i===1,65062);const x=n.from[0];x.allDescendants?l=x.collectionId:e=e.child(x.collectionId)}let u=[];n.where&&(u=(function(k){const j=p_(k);return j instanceof Br&&qw(j)?j.getFilters():[j]})(n.where));let d=[];n.orderBy&&(d=(function(k){return k.map((j=>(function(H){return new lu(xl(H.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(j)))})(n.orderBy));let p=null;n.limit&&(p=(function(k){let j;return j=typeof k=="object"?k.value:k,Wd(j)?null:j})(n.limit));let g=null;n.startAt&&(g=(function(k){const j=!!k.before,L=k.values||[];return new Rd(L,j)})(n.startAt));let y=null;return n.endAt&&(y=(function(k){const j=!k.before,L=k.values||[];return new Rd(L,j)})(n.endAt)),_R(e,l,d,u,p,"F",g,y)}function aA(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nt(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function p_(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=xl(n.unaryFilter.field);return ds.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=xl(n.unaryFilter.field);return ds.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=xl(n.unaryFilter.field);return ds.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=xl(n.unaryFilter.field);return ds.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Nt(61313);default:return Nt(60726)}})(s):s.fieldFilter!==void 0?(function(n){return ds.create(xl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Nt(58110);default:return Nt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Br.create(n.compositeFilter.filters.map((i=>p_(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Nt(1026)}})(n.compositeFilter.op))})(s):Nt(30097,{filter:s})}function iA(s){return GR[s]}function oA(s){return KR[s]}function lA(s){return YR[s]}function bl(s){return{fieldPath:s.canonicalString()}}function xl(s){return Es.fromServerFormat(s.fieldPath)}function g_(s){return s instanceof ds?(function(n){if(n.op==="=="){if(r2(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NAN"}};if(s2(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(r2(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NOT_NAN"}};if(s2(n.value))return{unaryFilter:{field:bl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bl(n.field),op:oA(n.op),value:n.value}}})(s):s instanceof Br?(function(n){const i=n.getFilters().map((l=>g_(l)));return i.length===1?i[0]:{compositeFilter:{op:lA(n.op),filters:i}}})(s):Nt(54877,{filter:s})}function cA(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function y_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function v_(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class ji{constructor(e,n,i,l,u=Mt.min(),d=Mt.min(),p=js.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class uA{constructor(e){this.yt=e}}function hA(s){const e=rA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Ad(e,e.limit,"L"):e}class dA{constructor(){this.Sn=new fA}addToCollectionParentIndex(e,n){return this.Sn.add(n),Ne.resolve()}getCollectionParents(e,n){return Ne.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Ne.resolve()}deleteFieldIndex(e,n){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,n){return Ne.resolve()}getDocumentsMatchingTarget(e,n){return Ne.resolve(null)}getIndexType(e,n){return Ne.resolve(0)}getFieldIndexes(e,n){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,n){return Ne.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,n){return Ne.resolve(Ii.min())}updateCollectionGroup(e,n,i){return Ne.resolve()}updateIndexEntries(e,n){return Ne.resolve()}}class fA{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new ps(Mn.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new ps(Mn.comparator)).toArray()}}const v2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},b_=41943040;class Ws{static withCacheSize(e){return new Ws(e,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(b_,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);class Dl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Dl(0)}static ar(){return new Dl(-1)}}const b2="LruGarbageCollector",mA=1048576;function x2([s,e],[n,i]){const l=en(s,n);return l===0?en(e,i):l}class pA{constructor(e){this.Pr=e,this.buffer=new ps(x2),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();x2(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gA{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){rt(b2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fl(n)?rt(b2,"Ignoring IndexedDB error during garbage collection: ",n):await zl(n)}await this.Ar(3e5)}))}}class yA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return Ne.resolve($d.ce);const i=new pA(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(v2)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),v2):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,u,d,p,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),l=this.params.maximumSequenceNumbersToCollect):l=k,d=Date.now(),this.nthSequenceNumber(e,l)))).next((k=>(i=k,p=Date.now(),this.removeTargets(e,i,n)))).next((k=>(u=k,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((k=>(y=Date.now(),yl()<=Zt.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${k} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:k}))))}}function vA(s,e){return new yA(s,e)}class bA{constructor(){this.changes=new Ro((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ms.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Ne.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class wA{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&Xc(i.mutation,l,nr.empty(),ft.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,tn()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=tn()){const l=go();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let d=qc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=go();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,tn())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,i,l){let u=Ba();const d=Qc(),p=(function(){return Qc()})();return n.forEach(((g,y)=>{const x=i.get(y.key);l.has(y.key)&&(x===void 0||x.mutation instanceof zi)?u=u.insert(y.key,y):x!==void 0?(d.set(y.key,x.mutation.getFieldMask()),Xc(x.mutation,y,x.mutation.getFieldMask(),ft.now())):d.set(y.key,nr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,x)=>d.set(y,x))),n.forEach(((y,x)=>p.set(y,new xA(x,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=Qc();let l=new Yn(((d,p)=>d-p)),u=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let x=i.get(g)||nr.empty();x=p.applyToLocalView(y,x),i.set(g,x);const k=(l.get(p.batchId)||tn()).add(g);l=l.insert(p.batchId,k)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,x=g.value,k=Jw();x.forEach((j=>{if(!u.has(j)){const L=i_(n.get(j),i.get(j));L!==null&&k.set(j,L),u=u.add(j)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,k))}return Ne.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return kR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Gw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):Ne.resolve(go());let p=ru,g=u;return d.next((y=>Ne.forEach(y,((x,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),u.get(x)?Ne.resolve():this.remoteDocumentCache.getEntry(e,x).next((j=>{g=g.insert(x,j)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,tn()))).next((x=>({batchId:p,changes:Xw(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new yt(n)).next((i=>{let l=qc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let d=qc();return this.indexManager.getCollectionParents(e,u).next((p=>Ne.forEach(p,(g=>{const y=(function(k,j){return new ql(j,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((x=>{x.forEach(((k,j)=>{d=d.insert(k,j)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((d=>{u.forEach(((g,y)=>{const x=y.getKey();d.get(x)===null&&(d=d.insert(x,Ms.newInvalidDocument(x)))}));let p=qc();return d.forEach(((g,y)=>{const x=u.get(g);x!==void 0&&Xc(x.mutation,y,nr.empty(),ft.now()),Yd(n,y)&&(p=p.insert(g,y))})),p}))}}class _A{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Ne.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:la(l.createTime)}})(n)),Ne.resolve()}getNamedQuery(e,n){return Ne.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:hA(l.bundledQuery),readTime:la(l.readTime)}})(n)),Ne.resolve()}}class kA{constructor(){this.overlays=new Yn(yt.comparator),this.Lr=new Map}getOverlay(e,n){return Ne.resolve(this.overlays.get(n))}getOverlays(e,n){const i=go();return Ne.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.bt(e,n,u)})),Ne.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),Ne.resolve()}getOverlaysForCollection(e,n,i){const l=go(),u=n.length+1,d=new yt(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return Ne.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new Yn(((y,x)=>y-x));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let x=u.get(y.largestBatchId);x===null&&(x=go(),u=u.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=go(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>p.set(y,x))),!(p.size()>=l)););return Ne.resolve(p)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new zR(n,i));let u=this.Lr.get(n);u===void 0&&(u=tn(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class TA{constructor(){this.sessionToken=js.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ne.resolve()}}class Qg{constructor(){this.kr=new ps(ys.Kr),this.qr=new ps(ys.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new ys(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new ys(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new yt(new Mn([])),i=new ys(n,e),l=new ys(n,e+1),u=[];return this.qr.forEachInRange([i,l],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new yt(new Mn([])),i=new ys(n,e),l=new ys(n,e+1);let u=tn();return this.qr.forEachInRange([i,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new ys(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ys{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return yt.comparator(e.key,n.key)||en(e.Hr,n.Hr)}static Ur(e,n){return en(e.Hr,n.Hr)||yt.comparator(e.key,n.key)}}class EA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ps(ys.Kr)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new UR(u,n,i,l);this.mutationQueue.push(d);for(const p of l)this.Jr=this.Jr.add(new ys(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Ne.resolve(d)}lookupMutationBatch(e,n){return Ne.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),u=l<0?0:l;return Ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?Bg:this.Yn-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ys(n,0),l=new ys(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(d=>{const p=this.Zr(d.Hr);u.push(p)})),Ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ps(en);return n.forEach((l=>{const u=new ys(l,0),d=new ys(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{i=i.add(p.Hr)}))})),Ne.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;yt.isDocumentKey(u)||(u=u.child(""));const d=new ys(new yt(u),0);let p=new ps(en);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),d),Ne.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){xn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Ne.forEach(n.mutations,(l=>{const u=new ys(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new ys(n,0),l=this.Jr.firstAfterOrEqual(i);return Ne.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class jA{constructor(e){this.ti=e,this.docs=(function(){return new Yn(yt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,d=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Ne.resolve(i?i.document.mutableCopy():Ms.newInvalidDocument(n))}getEntries(e,n){let i=Ba();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Ms.newInvalidDocument(l))})),Ne.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=Ba();const d=n.path,p=new yt(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||ZC(JC(x),i)<=0||(l.has(x.key)||Yd(n,x))&&(u=u.insert(x.key,x.mutableCopy()))}return Ne.resolve(u)}getAllFromCollectionGroup(e,n,i,l){Nt(9500)}ni(e,n){return Ne.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new SA(this)}getSize(e){return Ne.resolve(this.size)}}class SA extends bA{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),Ne.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class NA{constructor(e){this.persistence=e,this.ri=new Ro((n=>Fg(n)),qg),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.ii=0,this.si=new Qg,this.targetCount=0,this.oi=Dl._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),Ne.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Dl(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Ne.resolve()}updateTargetData(e,n){return this.lr(n),Ne.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Ne.waitFor(u).next((()=>l))}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return Ne.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),Ne.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),Ne.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Ne.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return Ne.resolve(i)}containsKey(e,n){return Ne.resolve(this.si.containsKey(n))}}class x_{constructor(e,n){this._i={},this.overlays={},this.ai=new $d(0),this.ui=!1,this.ui=!0,this.ci=new TA,this.referenceDelegate=e(this),this.li=new NA(this),this.indexManager=new dA,this.remoteDocumentCache=(function(l){return new jA(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new uA(n),this.Pi=new _A(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new EA(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){rt("MemoryPersistence","Starting transaction:",e);const l=new CA(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return Ne.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class CA extends tR{constructor(e){super(),this.currentSequenceNumber=e}}class Xg{constructor(e){this.persistence=e,this.Ri=new Qg,this.Ai=null}static Vi(e){return new Xg(e)}get di(){if(this.Ai)return this.Ai;throw Nt(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),Ne.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),Ne.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Ne.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.di,(i=>{const l=yt.fromPath(i);return this.mi(e,l).next((u=>{u||n.removeEntry(l,Mt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Md{constructor(e,n){this.persistence=e,this.fi=new Ro((i=>rR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=vA(this,n)}static Vi(e,n){return new Md(e,n)}Ti(){}Ii(e){return Ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return Ne.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?Ne.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(i++,u.removeEntry(d,Mt.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Ne.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Ne.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hd(e.data.value)),n}wr(e,n,i){return Ne.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return Ne.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Jg{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=tn(),l=tn();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Jg(e,n.fromCache,i,l)}}class RA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class AA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return aS()?8:nR(Ds())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,l,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new RA;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(yl()<=Zt.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",vl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ne.resolve()):(yl()<=Zt.DEBUG&&rt("QueryEngine","Query:",vl(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(yl()<=Zt.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",vl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oa(n))):Ne.resolve())}gs(e,n){if(l2(n))return Ne.resolve(null);let i=oa(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Ad(n,null,"F"),i=oa(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=tn(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,d,g.readTime)?this.gs(e,Ad(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,i,l){return l2(n)||l.isEqual(Mt.min())?Ne.resolve(null):this.fs.getDocuments(e,i).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,i,l)?Ne.resolve(null):(yl()<=Zt.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),vl(n)),this.Ds(e,d,n,XC(l,ru)).next((p=>p)))}))}bs(e,n){let i=new ps(Yw(e));return n.forEach(((l,u)=>{Yd(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,i){return yl()<=Zt.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",vl(n)),this.fs.getDocumentsMatchingQuery(e,n,Ii.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Zg="LocalStore",IA=3e8;class MA{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new Yn(en),this.Fs=new Ro((u=>Fg(u)),qg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function DA(s,e,n,i){return new MA(s,e,n,i)}async function w_(s,e){const n=Lt(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],p=[];let g=tn();for(const y of l){d.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of u){p.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function PA(s,e){const n=Lt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,x){const k=y.batch,j=k.keys();let L=Ne.resolve();return j.forEach((H=>{L=L.next((()=>x.getEntry(g,H))).next((B=>{const O=y.docVersions.get(H);xn(O!==null,48541),B.version.compareTo(O)<0&&(k.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),x.addEntry(B)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(g,k)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=tn();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function __(s){const e=Lt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function LA(s,e){const n=Lt(s),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((x,k)=>{const j=l.get(k);if(!j)return;p.push(n.li.removeMatchingKeys(u,x.removedDocuments,k).next((()=>n.li.addMatchingKeys(u,x.addedDocuments,k))));let L=j.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(k)!==null?L=L.withResumeToken(js.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):x.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(x.resumeToken,i)),l=l.insert(k,L),(function(B,O,ee){return B.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=IA?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(j,L,x)&&p.push(n.li.updateTargetData(u,L))}));let g=Ba(),y=tn();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,x))})),p.push(OA(u,d,e.documentUpdates).next((x=>{g=x.Bs,y=x.Ls}))),!i.isEqual(Mt.min())){const x=n.li.getLastRemoteSnapshotVersion(u).next((k=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(x)}return Ne.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=l,u)))}function OA(s,e,n){let i=tn(),l=tn();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=Ba();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Mt.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):rt(Zg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:l}}))}function VA(s,e){const n=Lt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Bg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function BA(s,e){const n=Lt(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((u=>u?(l=u,Ne.resolve(l)):n.li.allocateTargetId(i).next((d=>(l=new ji(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function og(s,e,n){const i=Lt(s),l=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!Fl(d))throw d;rt(Zg,`Failed to update sequence numbers for target ${e}: ${d}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function w2(s,e,n){const i=Lt(s);let l=Mt.min(),u=tn();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,x){const k=Lt(g),j=k.Fs.get(x);return j!==void 0?Ne.resolve(k.vs.get(j)):k.li.getTargetData(y,x)})(i,d,oa(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,n?l:Mt.min(),n?u:tn()))).next((p=>(UA(i,jR(e),p),{documents:p,ks:u})))))}function UA(s,e,n){let i=s.Ms.get(e)||Mt.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class _2{constructor(){this.activeTargetIds=IR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zA{constructor(){this.vo=new _2,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new _2,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class FA{Mo(e){}shutdown(){}}const k2="ConnectivityMonitor";class T2{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){rt(k2,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){rt(k2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Qh=null;function lg(){return Qh===null?Qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Qh++,"0x"+Qh.toString(16)}const xp="RestConnection",qA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class HA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Nd?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,u){const d=lg(),p=this.Qo(e,n.toUriEncodedString());rt(xp,`Sending RPC '${e}' ${d}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),x=Vi(y);return this.zo(e,p,g,i,x).then((k=>(rt(xp,`Received RPC '${e}' ${d}: `,k),k)),(k=>{throw Rl(xp,`RPC '${e}' ${d} failed with error: `,k,"url: ",p,"request:",i),k}))}jo(e,n,i,l,u,d){return this.Wo(e,n,i,l,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ul})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const i=qA[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class $A{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const As="WebChannelConnection",Lc=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Sl extends HA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Sl.c_){const e=Ew();Lc(e,Tw.STAT_EVENT,(n=>{n.stat===Qp.PROXY?rt(As,"STAT_EVENT: detected buffering proxy"):n.stat===Qp.NOPROXY&&rt(As,"STAT_EVENT: detected no buffering proxy")})),Sl.c_=!0}}zo(e,n,i,l,u){const d=lg();return new Promise(((p,g)=>{const y=new _w;y.setWithCredentials(!0),y.listenOnce(kw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case ud.NO_ERROR:const k=y.getResponseJson();rt(As,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(k)),p(k);break;case ud.TIMEOUT:rt(As,`RPC '${e}' ${d} timed out`),g(new Ze(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case ud.HTTP_ERROR:const j=y.getStatus();if(rt(As,`RPC '${e}' ${d} failed with status:`,j,"response text:",y.getResponseText()),j>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const H=L?.error;if(H&&H.status&&H.message){const B=(function(ee){const Q=ee.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(Q)>=0?Q:Ee.UNKNOWN})(H.status);g(new Ze(B,H.message))}else g(new Ze(Ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ze(Ee.UNAVAILABLE,"Connection failed."));break;default:Nt(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{rt(As,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(l);rt(As,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",x,i,15)}))}T_(e,n,i){const l=lg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const y=u.join("");rt(As,`Creating RPC '${e}' stream ${l}: ${y}`,p);const x=d.createWebChannel(y,p);this.I_(x);let k=!1,j=!1;const L=new $A({Ho:H=>{j?rt(As,`Not sending because RPC '${e}' stream ${l} is closed:`,H):(k||(rt(As,`Opening RPC '${e}' stream ${l} transport.`),x.open(),k=!0),rt(As,`RPC '${e}' stream ${l} sending:`,H),x.send(H))},Jo:()=>x.close()});return Lc(x,Fc.EventType.OPEN,(()=>{j||(rt(As,`RPC '${e}' stream ${l} transport opened.`),L.i_())})),Lc(x,Fc.EventType.CLOSE,(()=>{j||(j=!0,rt(As,`RPC '${e}' stream ${l} transport closed`),L.o_(),this.E_(x))})),Lc(x,Fc.EventType.ERROR,(H=>{j||(j=!0,Rl(As,`RPC '${e}' stream ${l} transport errored. Name:`,H.name,"Message:",H.message),L.o_(new Ze(Ee.UNAVAILABLE,"The operation could not be completed")))})),Lc(x,Fc.EventType.MESSAGE,(H=>{if(!j){const B=H.data[0];xn(!!B,16349);const O=B,ee=O?.error||O[0]?.error;if(ee){rt(As,`RPC '${e}' stream ${l} received error:`,ee);const Q=ee.status;let oe=(function(Ae){const I=hs[Ae];if(I!==void 0)return l_(I)})(Q),be=ee.message;oe===void 0&&(oe=Ee.INTERNAL,be="Unknown error status: "+Q+" with message "+ee.message),j=!0,L.o_(new Ze(oe,be)),x.close()}else rt(As,`RPC '${e}' stream ${l} received:`,B),L.__(B)}})),Sl.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return jw()}}function WA(s){return new Sl(s)}function wp(){return typeof document<"u"?document:null}function Zd(s){return new QR(s,!0)}Sl.c_=!1;class k_{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&rt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const E2="PersistentStream";class T_{constructor(e,n,i,l,u,d,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new k_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(Va(n.toString()),Va("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new Ze(Ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return rt(E2,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(rt(E2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GA extends T_{constructor(e,n,i,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ZR(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Mt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Mt.min():d.readTime?la(d.readTime):Mt.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=ig(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=tg(g)?{documents:nA(u,g)}:{query:sA(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=h_(u,d.resumeToken);const y=sg(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Mt.min())>0){p.readTime=Id(u,d.snapshotVersion.toTimestamp());const y=sg(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=aA(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=ig(this.serializer),n.removeTarget=e,this.K_(n)}}class KA extends T_{constructor(e,n,i,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return xn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=tA(e.writeResults,e.commitTime),i=la(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=ig(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>eA(this.serializer,i)))};this.K_(n)}}class YA{}class QA extends YA{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ze(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,rg(n,i),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ze(Ee.UNKNOWN,u.toString())}))}jo(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,rg(n,i),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ze(Ee.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function XA(s,e,n,i){return new QA(s,e,n,i)}class JA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Va(n),this.aa=!1):rt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const jo="RemoteStore";class ZA{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{i.enqueueAndForget((async()=>{Ao(this)&&(rt(jo,"Restarting streams for network reachability change."),await(async function(g){const y=Lt(g);y.Ea.add(4),await Eu(y),y.Va.set("Unknown"),y.Ea.delete(4),await ef(y)})(this))}))})),this.Va=new JA(i,l)}}async function ef(s){if(Ao(s))for(const e of s.Ra)await e(!0)}async function Eu(s){for(const e of s.Ra)await e(!1)}function E_(s,e){const n=Lt(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),sy(n)?ny(n):Hl(n).O_()&&ty(n,e))}function ey(s,e){const n=Lt(s),i=Hl(n);n.Ia.delete(e),i.O_()&&j_(n,e),n.Ia.size===0&&(i.O_()?i.L_():Ao(n)&&n.Va.set("Unknown"))}function ty(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Mt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hl(s).Z_(e)}function j_(s,e){s.da.$e(e),Hl(s).X_(e)}function ny(s){s.da=new WR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Hl(s).start(),s.Va.ua()}function sy(s){return Ao(s)&&!Hl(s).x_()&&s.Ia.size>0}function Ao(s){return Lt(s).Ea.size===0}function S_(s){s.da=void 0}async function eI(s){s.Va.set("Online")}async function tI(s){s.Ia.forEach(((e,n)=>{ty(s,e)}))}async function nI(s,e){S_(s),sy(s)?(s.Va.ha(e),ny(s)):s.Va.set("Unknown")}async function sI(s,e,n){if(s.Va.set("Online"),e instanceof u_&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){rt(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dd(s,i)}else if(e instanceof md?s.da.Xe(e):e instanceof c_?s.da.st(e):s.da.tt(e),!n.isEqual(Mt.min()))try{const i=await __(s.localStore);n.compareTo(i)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=u.Ia.get(y);x&&u.Ia.set(y,x.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const x=u.Ia.get(g);if(!x)return;u.Ia.set(g,x.withResumeToken(js.EMPTY_BYTE_STRING,x.snapshotVersion)),j_(u,g);const k=new ji(x.target,g,y,x.sequenceNumber);ty(u,k)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){rt(jo,"Failed to raise snapshot:",i),await Dd(s,i)}}async function Dd(s,e,n){if(!Fl(e))throw e;s.Ea.add(1),await Eu(s),s.Va.set("Offline"),n||(n=()=>__(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{rt(jo,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await ef(s)}))}function N_(s,e){return e().catch((n=>Dd(s,n,e)))}async function tf(s){const e=Lt(s),n=Li(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Bg;for(;rI(e);)try{const l=await VA(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,aI(e,l)}catch(l){await Dd(e,l)}C_(e)&&R_(e)}function rI(s){return Ao(s)&&s.Ta.length<10}function aI(s,e){s.Ta.push(e);const n=Li(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function C_(s){return Ao(s)&&!Li(s).x_()&&s.Ta.length>0}function R_(s){Li(s).start()}async function iI(s){Li(s).ra()}async function oI(s){const e=Li(s);for(const n of s.Ta)e.ea(n.mutations)}async function lI(s,e,n){const i=s.Ta.shift(),l=Gg.from(i,e,n);await N_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await tf(s)}async function cI(s,e){e&&Li(s).Y_&&await(async function(i,l){if((function(d){return qR(d)&&d!==Ee.ABORTED})(l.code)){const u=i.Ta.shift();Li(i).B_(),await N_(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await tf(i)}})(s,e),C_(s)&&R_(s)}async function j2(s,e){const n=Lt(s);n.asyncQueue.verifyOperationInProgress(),rt(jo,"RemoteStore received new credentials");const i=Ao(n);n.Ea.add(3),await Eu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ef(n)}async function uI(s,e){const n=Lt(s);e?(n.Ea.delete(2),await ef(n)):e||(n.Ea.add(2),await Eu(n),n.Va.set("Unknown"))}function Hl(s){return s.ma||(s.ma=(function(n,i,l){const u=Lt(n);return u.sa(),new GA(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:eI.bind(null,s),Yo:tI.bind(null,s),t_:nI.bind(null,s),J_:sI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),sy(s)?ny(s):s.Va.set("Unknown")):(await s.ma.stop(),S_(s))}))),s.ma}function Li(s){return s.fa||(s.fa=(function(n,i,l){const u=Lt(n);return u.sa(),new KA(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:iI.bind(null,s),t_:cI.bind(null,s),ta:oI.bind(null,s),na:lI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await tf(s)):(await s.fa.stop(),s.Ta.length>0&&(rt(jo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class ry{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const d=Date.now()+i,p=new ry(e,n,d,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ay(s,e){if(Va("AsyncQueue",`${e}: ${s}`),Fl(s))return new Ze(Ee.UNAVAILABLE,`${e}: ${s}`);throw s}class Nl{static emptySet(e){return new Nl(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||yt.comparator(n.key,i.key):(n,i)=>yt.comparator(n.key,i.key),this.keyedMap=qc(),this.sortedSet=new Yn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Nl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Nl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class S2{constructor(){this.ga=new Yn(yt.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Nt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Pl{constructor(e,n,i,l,u,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,l,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Pl(e,n,Nl.emptySet(n),d,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}class hI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class dI{constructor(){this.queries=N2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=Lt(n),u=l.queries;l.queries=N2(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Ze(Ee.ABORTED,"Firestore shutting down"))}}function N2(){return new Ro((s=>Kw(s)),Kd)}async function A_(s,e){const n=Lt(s);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new hI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=ay(d,`Initialization of query '${vl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&iy(n)}async function I_(s,e){const n=Lt(s),i=e.query;let l=3;const u=n.queries.get(i);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function fI(s,e){const n=Lt(s);let i=!1;for(const l of e){const u=l.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(l)&&(i=!0);d.wa=l}}i&&iy(n)}function mI(s,e,n){const i=Lt(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(n);i.queries.delete(e)}function iy(s){s.Ca.forEach((e=>{e.next()}))}var cg,C2;(C2=cg||(cg={})).Ma="default",C2.Cache="cache";class M_{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Pl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cg.Cache}}class D_{constructor(e){this.key=e}}class P_{constructor(e){this.key=e}}class pI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=tn(),this.mutatedKeys=tn(),this.eu=Yw(e),this.tu=new Nl(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new S2,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((x,k)=>{const j=l.get(x),L=Yd(this.query,k)?k:null,H=!!j&&this.mutatedKeys.has(j.key),B=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let O=!1;j&&L?j.data.isEqual(L.data)?H!==B&&(i.track({type:3,doc:L}),O=!0):this.su(j,L)||(i.track({type:2,doc:L}),O=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(p=!0)):!j&&L?(i.track({type:0,doc:L}),O=!0):j&&!L&&(i.track({type:1,doc:j}),O=!0,(g||y)&&(p=!0)),O&&(L?(d=d.add(L),u=B?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),i.track({type:1,doc:x})}return{tu:d,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,k)=>(function(L,H){const B=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt(20277,{Vt:O})}};return B(L)-B(H)})(x.type,k.type)||this.eu(x.doc,k.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new Pl(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new S2,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=tn(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new P_(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new D_(i))})),n}cu(e){this.Za=e.ks,this.Ya=tn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Pl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const oy="SyncEngine";class gI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class yI{constructor(e){this.key=e,this.hu=!1}}class vI{constructor(e,n,i,l,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ro((p=>Kw(p)),Kd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Yn(yt.comparator),this.Au=new Map,this.Vu=new Qg,this.du={},this.mu=new Map,this.fu=Dl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bI(s,e,n=!0){const i=z_(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await L_(i,e,n,!0),l}async function xI(s,e){const n=z_(s);await L_(n,e,!0,!1)}async function L_(s,e,n,i){const l=await BA(s.localStore,oa(e)),u=l.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await wI(s,e,u,d==="current",l.resumeToken)),s.isPrimaryClient&&n&&E_(s.remoteStore,l),p}async function wI(s,e,n,i,l){s.pu=(k,j,L)=>(async function(B,O,ee,Q){let oe=O.view.ru(ee);oe.Ss&&(oe=await w2(B.localStore,O.query,!1).then((({documents:I})=>O.view.ru(I,oe))));const be=Q&&Q.targetChanges.get(O.targetId),Ve=Q&&Q.targetMismatches.get(O.targetId)!=null,Ae=O.view.applyChanges(oe,B.isPrimaryClient,be,Ve);return A2(B,O.targetId,Ae.au),Ae.snapshot})(s,k,j,L);const u=await w2(s.localStore,e,!0),d=new pI(e,u.ks),p=d.ru(u.documents),g=Tu.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),y=d.applyChanges(p,s.isPrimaryClient,g);A2(s,n,y.au);const x=new gI(e,n,d);return s.Tu.set(e,x),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function _I(s,e,n){const i=Lt(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((d=>!Kd(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await og(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&ey(i.remoteStore,l.targetId),ug(i,l.targetId)})).catch(zl)):(ug(i,l.targetId),await og(i.localStore,l.targetId,!0))}async function kI(s,e){const n=Lt(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ey(n.remoteStore,i.targetId))}async function TI(s,e,n){const i=AI(s);try{const l=await(function(d,p){const g=Lt(d),y=ft.now(),x=p.reduce(((L,H)=>L.add(H.key)),tn());let k,j;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let H=Ba(),B=tn();return g.xs.getEntries(L,x).next((O=>{H=O,H.forEach(((ee,Q)=>{Q.isValidDocument()||(B=B.add(ee))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,H))).next((O=>{k=O;const ee=[];for(const Q of p){const oe=VR(Q,k.get(Q.key).overlayedDocument);oe!=null&&ee.push(new zi(Q.key,oe,Uw(oe.value.mapValue),vr.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,ee,p)})).next((O=>{j=O;const ee=O.applyToLocalDocumentSet(k,B);return g.documentOverlayCache.saveOverlays(L,O.batchId,ee)}))})).then((()=>({batchId:j.batchId,changes:Xw(k)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new Yn(en)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(i,l.batchId,n),await ju(i,l.changes),await tf(i.remoteStore)}catch(l){const u=ay(l,"Failed to persist write");n.reject(u)}}async function O_(s,e){const n=Lt(s);try{const i=await LA(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=n.Au.get(u);d&&(xn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?xn(d.hu,14607):l.removedDocuments.size>0&&(xn(d.hu,42227),d.hu=!1))})),await ju(n,i,e)}catch(i){await zl(i)}}function R2(s,e,n){const i=Lt(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=Lt(d);g.onlineState=p;let y=!1;g.queries.forEach(((x,k)=>{for(const j of k.ba)j.va(p)&&(y=!0)})),y&&iy(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function EI(s,e,n){const i=Lt(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let d=new Yn(yt.comparator);d=d.insert(u,Ms.newNoDocument(u,Mt.min()));const p=tn().add(u),g=new Jd(Mt.min(),new Map,new Yn(en),d,p);await O_(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),ly(i)}else await og(i.localStore,e,!1).then((()=>ug(i,e,n))).catch(zl)}async function jI(s,e){const n=Lt(s),i=e.batch.batchId;try{const l=await PA(n.localStore,e);B_(n,i,null),V_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ju(n,l)}catch(l){await zl(l)}}async function SI(s,e,n){const i=Lt(s);try{const l=await(function(d,p){const g=Lt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,p).next((k=>(xn(k!==null,37113),x=k.keys(),g.mutationQueue.removeMutationBatch(y,k)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(i.localStore,e);B_(i,e,n),V_(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await ju(i,l)}catch(l){await zl(l)}}function V_(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function B_(s,e,n){const i=Lt(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function ug(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||U_(s,i)}))}function U_(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(ey(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),ly(s))}function A2(s,e,n){for(const i of n)i instanceof D_?(s.Vu.addReference(i.key,e),NI(s,i)):i instanceof P_?(rt(oy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||U_(s,i.key)):Nt(19791,{wu:i})}function NI(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(rt(oy,"New document in limbo: "+n),s.Eu.add(i),ly(s))}function ly(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new yt(Mn.fromString(e)),i=s.fu.next();s.Au.set(i,new yI(n)),s.Ru=s.Ru.insert(n,i),E_(s.remoteStore,new ji(oa(Hg(n.path)),i,"TargetPurposeLimboResolution",$d.ce))}}async function ju(s,e,n){const i=Lt(s),l=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{d.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const x=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){l.push(y);const x=Jg.Es(g.targetId,y);u.push(x)}})))})),await Promise.all(d),i.Pu.J_(l),await(async function(g,y){const x=Lt(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>Ne.forEach(y,(j=>Ne.forEach(j.Ts,(L=>x.persistence.referenceDelegate.addReference(k,j.targetId,L))).next((()=>Ne.forEach(j.Is,(L=>x.persistence.referenceDelegate.removeReference(k,j.targetId,L)))))))))}catch(k){if(!Fl(k))throw k;rt(Zg,"Failed to update sequence numbers: "+k)}for(const k of y){const j=k.targetId;if(!k.fromCache){const L=x.vs.get(j),H=L.snapshotVersion,B=L.withLastLimboFreeSnapshotVersion(H);x.vs=x.vs.insert(j,B)}}})(i.localStore,u))}async function CI(s,e){const n=Lt(s);if(!n.currentUser.isEqual(e)){rt(oy,"User change. New user:",e.toKey());const i=await w_(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ze(Ee.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ju(n,i.Ns)}}function RI(s,e){const n=Lt(s),i=n.Au.get(e);if(i&&i.hu)return tn().add(i.key);{let l=tn();const u=n.Iu.get(e);if(!u)return l;for(const d of u){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function z_(s){const e=Lt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=O_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EI.bind(null,e),e.Pu.J_=fI.bind(null,e.eventManager),e.Pu.yu=mI.bind(null,e.eventManager),e}function AI(s){const e=Lt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SI.bind(null,e),e}class Pd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return DA(this.persistence,new AA,e.initialUser,this.serializer)}Cu(e){return new x_(Xg.Vi,this.serializer)}Du(e){return new zA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pd.provider={build:()=>new Pd};class II extends Pd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xn(this.persistence.referenceDelegate instanceof Md,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new gA(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new x_((i=>Md.Vi(i,n)),this.serializer)}}class hg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>R2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=CI.bind(null,this.syncEngine),await uI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dI})()}createDatastore(e){const n=Zd(e.databaseInfo.databaseId),i=WA(e.databaseInfo);return XA(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,d,p){return new ZA(i,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>R2(this.syncEngine,n,0)),(function(){return T2.v()?new T2:new FA})())}createSyncEngine(e,n){return(function(l,u,d,p,g,y,x){const k=new vI(l,u,d,p,g,y);return x&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Lt(n);rt(jo,"RemoteStore shutting down."),i.Ea.add(5),await Eu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hg.provider={build:()=>new hg};class F_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Va("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Oi="FirestoreClient";class MI{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=Is.UNAUTHENTICATED,this.clientId=Vg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{rt(Oi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(rt(Oi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ay(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function _p(s,e){s.asyncQueue.verifyOperationInProgress(),rt(Oi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await w_(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function I2(s,e){s.asyncQueue.verifyOperationInProgress();const n=await DI(s);rt(Oi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>j2(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>j2(e.remoteStore,l))),s._onlineComponents=e}async function DI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){rt(Oi,"Using user provided OfflineComponentProvider");try{await _p(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Ee.FAILED_PRECONDITION||l.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Rl("Error using user provided cache. Falling back to memory cache: "+n),await _p(s,new Pd)}}else rt(Oi,"Using default OfflineComponentProvider"),await _p(s,new II(void 0));return s._offlineComponents}async function q_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(rt(Oi,"Using user provided OnlineComponentProvider"),await I2(s,s._uninitializedComponentsProvider._online)):(rt(Oi,"Using default OnlineComponentProvider"),await I2(s,new hg))),s._onlineComponents}function PI(s){return q_(s).then((e=>e.syncEngine))}async function H_(s){const e=await q_(s),n=e.eventManager;return n.onListen=bI.bind(null,e.syncEngine),n.onUnlisten=_I.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=kI.bind(null,e.syncEngine),n}function LI(s,e,n={}){const i=new Da;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const x=new F_({next:j=>{x.Nu(),d.enqueueAndForget((()=>I_(u,k)));const L=j.docs.has(p);!L&&j.fromCache?y.reject(new Ze(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&j.fromCache&&g&&g.source==="server"?y.reject(new Ze(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(j)},error:j=>y.reject(j)}),k=new M_(Hg(p.path),x,{includeMetadataChanges:!0,Ka:!0});return A_(u,k)})(await H_(s),s.asyncQueue,e,n,i))),i.promise}function OI(s,e,n={}){const i=new Da;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const x=new F_({next:j=>{x.Nu(),d.enqueueAndForget((()=>I_(u,k))),j.fromCache&&g.source==="server"?y.reject(new Ze(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(j)},error:j=>y.reject(j)}),k=new M_(p,x,{includeMetadataChanges:!0,Ka:!0});return A_(u,k)})(await H_(s),s.asyncQueue,e,n,i))),i.promise}function VI(s,e){const n=new Da;return s.asyncQueue.enqueueAndForget((async()=>TI(await PI(s),e,n))),n.promise}function $_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const BI="ComponentProvider",M2=new Map;function UI(s,e,n,i,l){return new oR(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,$_(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const W_="firestore.googleapis.com",D2=!0;class P2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=W_,this.ssl=D2}else this.host=e.host,this.ssl=e.ssl??D2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=b_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mA)throw new Ze(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ze(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nf{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new UC;switch(i.type){case"firstParty":return new HC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ze(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=M2.get(n);i&&(rt(BI,"Removing Datastore"),M2.delete(n),i.terminate())})(this),Promise.resolve()}}function zI(s,e,n,i={}){s=Vr(s,nf);const l=Vi(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(_g(`https://${p}`),kg("Firestore",!0)),u.host!==W_&&u.host!==p&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!wo(g,d)&&(s._setSettings(g),i.mockUserToken)){let y,x;if(typeof i.mockUserToken=="string")y=i.mockUserToken,x=Is.MOCK_USER;else{y=Px(i.mockUserToken,s._app?.options.projectId);const k=i.mockUserToken.sub||i.mockUserToken.user_id;if(!k)throw new Ze(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Is(k)}s._authCredentials=new zC(new Nw(y,x))}}class Fi{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Fi(this.firestore,e,this._query)}}class as{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new as(this.firestore,e,this._key)}toJSON(){return{type:as._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(_u(n,as._jsonSchema))return new as(e,i||null,new yt(Mn.fromString(n.referencePath)))}}as._jsonSchemaVersion="firestore/documentReference/1.0",as._jsonSchema={type:fs("string",as._jsonSchemaVersion),referencePath:fs("string")};class Ri extends Fi{constructor(e,n,i){super(e,n,Hg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new as(this.firestore,null,new yt(e))}withConverter(e){return new Ri(this.firestore,e,this._path)}}function dn(s,e,...n){if(s=$n(s),Cw("collection","path",e),s instanceof nf){const i=Mn.fromString(e,...n);return K1(i),new Ri(s,null,i)}{if(!(s instanceof as||s instanceof Ri))throw new Ze(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Mn.fromString(e,...n));return K1(i),new Ri(s.firestore,null,i)}}function nt(s,e,...n){if(s=$n(s),arguments.length===1&&(e=Vg.newId()),Cw("doc","path",e),s instanceof nf){const i=Mn.fromString(e,...n);return G1(i),new as(s,null,new yt(i))}{if(!(s instanceof as||s instanceof Ri))throw new Ze(Ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Mn.fromString(e,...n));return G1(i),new as(s.firestore,s instanceof Ri?s.converter:null,new yt(i))}}const L2="AsyncQueue";class O2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new k_(this,"async_queue_retry"),this._c=()=>{const i=wp();i&&rt(L2,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=wp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=wp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Da;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Fl(e))throw e;rt(L2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Va("INTERNAL UNHANDLED ERROR: ",V2(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=ry.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Nt(47125,{Pc:V2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function V2(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Io extends nf{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new O2,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new O2(e),this._firestoreClient=void 0,await e}}}function FI(s,e){const n=typeof s=="object"?s:Sg(),i=typeof s=="string"?s:Nd,l=Ud(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=Ix("firestore");u&&zI(l,...u)}return l}function cy(s){if(s._terminated)throw new Ze(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||qI(s),s._firestoreClient}function qI(s){const e=s._freezeSettings(),n=UI(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new MI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class gr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gr(js.fromBase64String(e))}catch(n){throw new Ze(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gr(js.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_u(e,gr._jsonSchema))return gr.fromBase64String(e.bytes)}}gr._jsonSchemaVersion="firestore/bytes/1.0",gr._jsonSchema={type:fs("string",gr._jsonSchemaVersion),bytes:fs("string")};class uy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ze(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Es(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Su{constructor(e){this._methodName=e}}class ca{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ze(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ze(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return en(this._lat,e._lat)||en(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ca._jsonSchemaVersion}}static fromJSON(e){if(_u(e,ca._jsonSchema))return new ca(e.latitude,e.longitude)}}ca._jsonSchemaVersion="firestore/geoPoint/1.0",ca._jsonSchema={type:fs("string",ca._jsonSchemaVersion),latitude:fs("number"),longitude:fs("number")};class Lr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_u(e,Lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Lr(e.vectorValues);throw new Ze(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Lr._jsonSchemaVersion="firestore/vectorValue/1.0",Lr._jsonSchema={type:fs("string",Lr._jsonSchemaVersion),vectorValues:fs("object")};const HI=/^__.*__$/;class $I{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ku(e,this.data,n,this.fieldTransforms)}}class G_{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new zi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function K_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt(40011,{dataSource:s})}}class hy{constructor(e,n,i,l,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new hy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ld(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(K_(this.dataSource)&&HI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class WI{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Zd(e)}createContext(e,n,i,l=!1){return new hy({dataSource:e,methodName:n,targetDoc:i,path:Es.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sf(s){const e=s._freezeSettings(),n=Zd(s._databaseId);return new WI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Y_(s,e,n,i,l,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);my("Data must be an object, but it was:",d,i);const p=Q_(i,d);let g,y;if(u.merge)g=new nr(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const k of u.mergeFields){const j=So(e,k,n);if(!d.contains(j))throw new Ze(Ee.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);Z_(x,j)||x.push(j)}g=new nr(x),y=d.fieldTransforms.filter((k=>g.covers(k.field)))}else g=null,y=d.fieldTransforms;return new $I(new Gs(p),g,y)}class rf extends Su{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rf}}class dy extends Su{_toFieldTransform(e){return new a_(e.path,new cu)}isEqual(e){return e instanceof dy}}class fy extends Su{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new du(e.serializer,e_(e.serializer,this.Vc));return new a_(e.path,n)}isEqual(e){return e instanceof fy&&this.Vc===e.Vc}}function GI(s,e,n,i){const l=s.createContext(1,e,n);my("Data must be an object, but it was:",l,i);const u=[],d=Gs.empty();Ui(i,((g,y)=>{const x=J_(e,g,n);y=$n(y);const k=l.childContextForFieldPath(x);if(y instanceof rf)u.push(x);else{const j=Nu(y,k);j!=null&&(u.push(x),d.set(x,j))}}));const p=new nr(u);return new G_(d,p,l.fieldTransforms)}function KI(s,e,n,i,l,u){const d=s.createContext(1,e,n),p=[So(e,i,n)],g=[l];if(u.length%2!=0)throw new Ze(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)p.push(So(e,u[j])),g.push(u[j+1]);const y=[],x=Gs.empty();for(let j=p.length-1;j>=0;--j)if(!Z_(y,p[j])){const L=p[j];let H=g[j];H=$n(H);const B=d.childContextForFieldPath(L);if(H instanceof rf)y.push(L);else{const O=Nu(H,B);O!=null&&(y.push(L),x.set(L,O))}}const k=new nr(y);return new G_(x,k,d.fieldTransforms)}function YI(s,e,n,i=!1){return Nu(n,s.createContext(i?4:3,e))}function Nu(s,e){if(X_(s=$n(s)))return my("Unsupported field value:",e,s),Q_(s,e);if(s instanceof Su)return(function(i,l){if(!K_(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let d=0;for(const p of i){let g=Nu(p,l.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=$n(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return e_(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=ft.fromDate(i);return{timestampValue:Id(l.serializer,u)}}if(i instanceof ft){const u=new ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Id(l.serializer,u)}}if(i instanceof ca)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof gr)return{bytesValue:h_(l.serializer,i._byteString)};if(i instanceof as){const u=l.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Yg(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof Lr)return(function(d,p){const g=d instanceof Lr?d.toArray():d;return{mapValue:{fields:{[Vw]:{stringValue:Bw},[Cd]:{arrayValue:{values:g.map((x=>{if(typeof x!="number")throw p.createError("VectorValues must only contain numeric values.");return $g(p.serializer,x)}))}}}}}})(i,l);if(v_(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Hd(i)}`)})(s,e)}function Q_(s,e){const n={};return Iw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(s,((i,l)=>{const u=Nu(l,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function X_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ft||s instanceof ca||s instanceof gr||s instanceof as||s instanceof Su||s instanceof Lr||v_(s))}function my(s,e,n){if(!X_(n)||!Rw(n)){const i=Hd(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function So(s,e,n){if((e=$n(e))instanceof uy)return e._internalPath;if(typeof e=="string")return J_(s,e);throw Ld("Field path arguments must be of type string or ",s,!1,void 0,n)}const QI=new RegExp("[~\\*/\\[\\]]");function J_(s,e,n){if(e.search(QI)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new uy(...e.split("."))._internalPath}catch{throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Ld(s,e,n,i,l){const u=i&&!i.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${l}`),g+=")"),new Ze(Ee.INVALID_ARGUMENT,p+s+g)}function Z_(s,e){return s.some((n=>n.isEqual(e)))}class XI{convertValue(e,n="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Nt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ui(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[Cd].arrayValue?.values?.map((i=>rs(i.doubleValue)));return new Lr(n)}convertGeoPoint(e){return new ca(rs(e.latitude),rs(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Gd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){const n=Mi(e);return new ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Mn.fromString(e);xn(y_(i),9688,{name:e});const l=new iu(i.get(1),i.get(3)),u=new yt(i.popFirst(5));return l.isEqual(n)||Va(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class ek extends XI{constructor(e){super(),this.firestore=e}convertBytes(e){return new gr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new as(this.firestore,null,n)}}function vo(){return new dy("serverTimestamp")}function kp(s){return new fy("increment",s)}const B2="@firebase/firestore",U2="4.10.0";class tk{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new as(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(So("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JI extends tk{data(){return super.data()}}function ZI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ze(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class py{}class gy extends py{}function Vn(s,e,...n){let i=[];e instanceof py&&i.push(e),i=i.concat(n),(function(u){const d=u.filter((g=>g instanceof yy)).length,p=u.filter((g=>g instanceof af)).length;if(d>1||d>0&&p>0)throw new Ze(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class af extends gy{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new af(e,n,i)}_apply(e){const n=this._parse(e);return nk(e._query,n),new Fi(e.firestore,e.converter,ng(e._query,n))}_parse(e){const n=sf(e.firestore);return(function(u,d,p,g,y,x,k){let j;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new Ze(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){H2(k,x);const H=[];for(const B of k)H.push(q2(g,u,B));j={arrayValue:{values:H}}}else j=q2(g,u,k)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||H2(k,x),j=YI(p,d,k,x==="in"||x==="not-in");return ds.create(y,x,j)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Tn(s,e,n){const i=e,l=So("where",s);return af._create(l,i,n)}class yy extends py{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yy(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let d=l;const p=u.getFlattenedFilters();for(const g of p)nk(d,g),d=ng(d,g)})(e._query,n),new Fi(e.firestore,e.converter,ng(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vy extends gy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new vy(e,n)}_apply(e){const n=(function(l,u,d){if(l.startAt!==null)throw new Ze(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ze(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new lu(u,d)})(e._query,this._field,this._direction);return new Fi(e.firestore,e.converter,ER(e._query,n))}}function z2(s,e="asc"){const n=e,i=So("orderBy",s);return vy._create(i,n)}class by extends gy{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new by(e,n,i)}_apply(e){return new Fi(e.firestore,e.converter,Ad(e._query,this._limit,this._limitType))}}function F2(s){return by._create("limit",s,"F")}function q2(s,e,n){if(typeof(n=$n(n))=="string"){if(n==="")throw new Ze(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gw(e)&&n.indexOf("/")!==-1)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Mn.fromString(n));if(!yt.isDocumentKey(i))throw new Ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return n2(s,new yt(i))}if(n instanceof as)return n2(s,n._key);throw new Ze(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hd(n)}.`)}function H2(s,e){if(!Array.isArray(s)||s.length===0)throw new Ze(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nk(s,e){const n=(function(l,u){for(const d of l)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ze(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function sk(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class $c{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bo extends tk{constructor(e,n,i,l,u,d){super(e,n,i,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(So("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=bo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",bo._jsonSchema={type:fs("string",bo._jsonSchemaVersion),bundleSource:fs("string","DocumentSnapshot"),bundleName:fs("string"),bundle:fs("string")};class pd extends bo{data(e={}){return super.data(e)}}class Cl{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new $c(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new pd(this._firestore,this._userDataWriter,i.key,i,new $c(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ze(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new pd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new $c(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new pd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new $c(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,x=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),x=d.indexOf(p.doc.key)),{type:eM(p.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eM(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt(61501,{type:s})}}Cl._jsonSchemaVersion="firestore/querySnapshot/1.0",Cl._jsonSchema={type:fs("string",Cl._jsonSchemaVersion),bundleSource:fs("string","QuerySnapshot"),bundleName:fs("string"),bundle:fs("string")};function Dn(s){s=Vr(s,as);const e=Vr(s.firestore,Io),n=cy(e);return LI(n,s._key).then((i=>tM(e,s,i)))}function Cn(s){s=Vr(s,Fi);const e=Vr(s.firestore,Io),n=cy(e),i=new ek(e);return ZI(s._query),OI(n,s._query).then((l=>new Cl(e,i,s,l)))}function In(s,e,n){s=Vr(s,as);const i=Vr(s.firestore,Io),l=sk(s.converter,e,n),u=sf(i);return of(i,[Y_(u,"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,vr.none())])}function gd(s,e,n,...i){s=Vr(s,as);const l=Vr(s.firestore,Io),u=sf(l);let d;return d=typeof(e=$n(e))=="string"||e instanceof uy?KI(u,"updateDoc",s._key,e,n,i):GI(u,"updateDoc",s._key,e),of(l,[d.toMutation(s._key,vr.exists(!0))])}function yr(s){return of(Vr(s.firestore,Io),[new Wg(s._key,vr.none())])}function fu(s,e){const n=Vr(s.firestore,Io),i=nt(s),l=sk(s.converter,e),u=sf(s.firestore);return of(n,[Y_(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,vr.exists(!1))]).then((()=>i))}function of(s,e){const n=cy(s);return VI(n,e)}function tM(s,e,n){const i=n.docs.get(e._key),l=new ek(s);return new bo(s,l,e._key,i,new $c(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){BC(Co),_o(new Ai("firestore",((i,{instanceIdentifier:l,options:u})=>{const d=i.getProvider("app").getImmediate(),p=new Io(new FC(i.getProvider("auth-internal")),new $C(d,i.getProvider("app-check-internal")),lR(d,l),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ra(B2,U2,e),ra(B2,U2,"esm2020")})();var nM="firebase",sM="12.8.0";ra(nM,sM,"app");const rk="firebasestorage.googleapis.com",ak="storageBucket",rM=120*1e3,aM=600*1e3;class es extends ha{constructor(e,n,i=0){super(Tp(e),`Firebase Storage: ${n} (${Tp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,es.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zn||(Zn={}));function Tp(s){return"storage/"+s}function xy(){const s="An unknown error occurred, please check the error payload for server response.";return new es(Zn.UNKNOWN,s)}function iM(s){return new es(Zn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function oM(s){return new es(Zn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lM(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new es(Zn.UNAUTHENTICATED,s)}function cM(){return new es(Zn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function uM(s){return new es(Zn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function hM(){return new es(Zn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dM(){return new es(Zn.CANCELED,"User canceled the upload/download.")}function fM(s){return new es(Zn.INVALID_URL,"Invalid URL '"+s+"'.")}function mM(s){return new es(Zn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function pM(){return new es(Zn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ak+"' property when initializing the app?")}function gM(){return new es(Zn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yM(){return new es(Zn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vM(s){return new es(Zn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dg(s){return new es(Zn.INVALID_ARGUMENT,s)}function ik(){return new es(Zn.APP_DELETED,"The Firebase app was deleted.")}function bM(s){return new es(Zn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Jc(s,e){return new es(Zn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Oc(s){throw new es(Zn.INTERNAL_ERROR,"Internal error: "+s)}class Bs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Bs.makeFromUrl(e,n)}catch{return new Bs(e,"")}if(i.path==="")return i;throw mM(e)}static makeFromUrl(e,n){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(be){be.path.charAt(be.path.length-1)==="/"&&(be.path_=be.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function y(be){be.path_=decodeURIComponent(be.path)}const x="v[A-Za-z0-9_]+",k=n.replace(/[.]/g,"\\."),j="(/([^?#]*).*)?$",L=new RegExp(`^https?://${k}/${x}/b/${l}/o${j}`,"i"),H={bucket:1,path:3},B=n===rk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,O="([^?#]*)",ee=new RegExp(`^https?://${B}/${l}/${O}`,"i"),oe=[{regex:p,indices:g,postModify:u},{regex:L,indices:H,postModify:y},{regex:ee,indices:{bucket:1,path:2},postModify:y}];for(let be=0;be<oe.length;be++){const Ve=oe[be],Ae=Ve.regex.exec(e);if(Ae){const I=Ae[Ve.indices.bucket];let E=Ae[Ve.indices.path];E||(E=""),i=new Bs(I,E),Ve.postModify(i);break}}if(i==null)throw fM(e);return i}}class xM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function wM(s,e,n){let i=1,l=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function x(...O){y||(y=!0,e.apply(null,O))}function k(O){l=setTimeout(()=>{l=null,s(L,g())},O)}function j(){u&&clearTimeout(u)}function L(O,...ee){if(y){j();return}if(O){j(),x.call(null,O,...ee);return}if(g()||d){j(),x.call(null,O,...ee);return}i<64&&(i*=2);let oe;p===1?(p=2,oe=0):oe=(i+Math.random())*1e3,k(oe)}let H=!1;function B(O){H||(H=!0,j(),!y&&(l!==null?(O||(p=2),clearTimeout(l),k(0)):O||(p=1)))}return k(0),u=setTimeout(()=>{d=!0,B(!0)},n),B}function _M(s){s(!1)}function kM(s){return s!==void 0}function TM(s){return typeof s=="object"&&!Array.isArray(s)}function wy(s){return typeof s=="string"||s instanceof String}function $2(s){return _y()&&s instanceof Blob}function _y(){return typeof Blob<"u"}function fg(s,e,n,i){if(i<e)throw dg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw dg(`Invalid value for '${s}'. Expected ${n} or less.`)}function lf(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function ok(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);n=n+l+"&"}return n=n.slice(0,-1),n}var xo;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(xo||(xo={}));function EM(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class jM{constructor(e,n,i,l,u,d,p,g,y,x,k,j=!0,L=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=k,this.retry=j,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,B)=>{this.resolve_=H,this.reject_=B,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new Xh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===xo.NO_ERROR,g=u.getStatus();if(!p||EM(g,this.additionalRetryCodes_)&&this.retry){const x=u.getErrorCode()===xo.ABORT;i(!1,new Xh(!1,null,x));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new Xh(y,u))})},n=(i,l)=>{const u=this.resolve_,d=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());kM(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=xy();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(l.canceled){const g=this.appDelete_?ik():dM();d(g)}else{const g=hM();d(g)}};this.canceled_?n(!1,new Xh(!1,null,!0)):this.backoffId_=wM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_M(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function SM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function NM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function CM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function RM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function AM(s,e,n,i,l,u,d=!0,p=!1){const g=ok(s.urlParams),y=s.url+g,x=Object.assign({},s.headers);return CM(x,e),SM(x,n),NM(x,u),RM(x,i),new jM(y,s.method,x,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,d,p)}function IM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function MM(...s){const e=IM();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(_y())return new Blob(s);throw new es(Zn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function DM(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function PM(s){if(typeof atob>"u")throw vM("base-64");return atob(s)}const sa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ep{constructor(e,n){this.data=e,this.contentType=n||null}}function LM(s,e){switch(s){case sa.RAW:return new Ep(lk(e));case sa.BASE64:case sa.BASE64URL:return new Ep(ck(s,e));case sa.DATA_URL:return new Ep(VM(e),BM(e))}throw xy()}function lk(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=i,d=s.charCodeAt(++n);i=65536|(u&1023)<<10|d&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function OM(s){let e;try{e=decodeURIComponent(s)}catch{throw Jc(sa.DATA_URL,"Malformed data URL.")}return lk(e)}function ck(s,e){switch(s){case sa.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw Jc(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case sa.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw Jc(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=PM(e)}catch(l){throw l.message.includes("polyfill")?l:Jc(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i}class uk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Jc(sa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=UM(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function VM(s){const e=new uk(s);return e.base64?ck(sa.BASE64,e.rest):OM(e.rest)}function BM(s){return new uk(s).contentType}function UM(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Ei{constructor(e,n){let i=0,l="";$2(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if($2(this.data_)){const i=this.data_,l=DM(i,e,n);return l===null?null:new Ei(l)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ei(i,!0)}}static getBlob(...e){if(_y()){const n=e.map(i=>i instanceof Ei?i.data_:i);return new Ei(MM.apply(null,n))}else{const n=e.map(d=>wy(d)?LM(sa.RAW,d).data:d.data_);let i=0;n.forEach(d=>{i+=d.byteLength});const l=new Uint8Array(i);let u=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)l[u++]=d[p]}),new Ei(l,!0)}}uploadData(){return this.data_}}function ky(s){let e;try{e=JSON.parse(s)}catch{return null}return TM(e)?e:null}function zM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function FM(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function hk(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function qM(s,e){return e}class Vs{constructor(e,n,i,l){this.server=e,this.local=n||e,this.writable=!!i,this.xform=l||qM}}let Jh=null;function HM(s){return!wy(s)||s.length<2?s:hk(s)}function dk(){if(Jh)return Jh;const s=[];s.push(new Vs("bucket")),s.push(new Vs("generation")),s.push(new Vs("metageneration")),s.push(new Vs("name","fullPath",!0));function e(u,d){return HM(d)}const n=new Vs("name");n.xform=e,s.push(n);function i(u,d){return d!==void 0?Number(d):d}const l=new Vs("size");return l.xform=i,s.push(l),s.push(new Vs("timeCreated")),s.push(new Vs("updated")),s.push(new Vs("md5Hash",null,!0)),s.push(new Vs("cacheControl",null,!0)),s.push(new Vs("contentDisposition",null,!0)),s.push(new Vs("contentEncoding",null,!0)),s.push(new Vs("contentLanguage",null,!0)),s.push(new Vs("contentType",null,!0)),s.push(new Vs("metadata","customMetadata",!0)),Jh=s,Jh}function $M(s,e){function n(){const i=s.bucket,l=s.fullPath,u=new Bs(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function WM(s,e,n){const i={};i.type="file";const l=n.length;for(let u=0;u<l;u++){const d=n[u];i[d.local]=d.xform(i,e[d.server])}return $M(i,s),i}function fk(s,e,n){const i=ky(e);return i===null?null:WM(s,i,n)}function GM(s,e,n,i){const l=ky(e);if(l===null||!wy(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const x=s.bucket,k=s.fullPath,j="/b/"+d(x)+"/o/"+d(k),L=lf(j,n,i),H=ok({alt:"media",token:y});return L+H})[0]}function KM(s,e){const n={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}const W2="prefixes",G2="items";function YM(s,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[W2])for(const l of n[W2]){const u=l.replace(/\/$/,""),d=s._makeStorageReference(new Bs(e,u));i.prefixes.push(d)}if(n[G2])for(const l of n[G2]){const u=s._makeStorageReference(new Bs(e,l.name));i.items.push(u)}return i}function QM(s,e,n){const i=ky(n);return i===null?null:YM(s,e,i)}class Ty{constructor(e,n,i,l){this.url=e,this.method=n,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ey(s){if(!s)throw xy()}function XM(s,e){function n(i,l){const u=fk(s,l,e);return Ey(u!==null),u}return n}function JM(s,e){function n(i,l){const u=QM(s,e,l);return Ey(u!==null),u}return n}function ZM(s,e){function n(i,l){const u=fk(s,l,e);return Ey(u!==null),GM(u,l,s.host,s._protocol)}return n}function jy(s){function e(n,i){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=cM():l=lM():n.getStatus()===402?l=oM(s.bucket):n.getStatus()===403?l=uM(s.path):l=i,l.status=n.getStatus(),l.serverResponse=i.serverResponse,l}return e}function e3(s){const e=jy(s);function n(i,l){let u=e(i,l);return i.getStatus()===404&&(u=iM(s.path)),u.serverResponse=l.serverResponse,u}return n}function t3(s,e,n,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),i&&(u.pageToken=i),l&&(u.maxResults=l);const d=e.bucketOnlyServerUrl(),p=lf(d,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,x=new Ty(p,g,JM(s,e.bucket),y);return x.urlParams=u,x.errorHandler=jy(e),x}function n3(s,e,n){const i=e.fullServerUrl(),l=lf(i,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new Ty(l,u,ZM(s,n),d);return p.errorHandler=e3(e),p}function s3(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function r3(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=s3(null,e)),i}function a3(s,e,n,i,l){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let oe="";for(let be=0;be<2;be++)oe=oe+Math.random().toString().slice(2);return oe}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=r3(e,i,l),x=KM(y,n),k="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,j=`\r
--`+g+"--",L=Ei.getBlob(k,i,j);if(L===null)throw gM();const H={name:y.fullPath},B=lf(u,s.host,s._protocol),O="POST",ee=s.maxUploadRetryTime,Q=new Ty(B,O,XM(s,n),ee);return Q.urlParams=H,Q.headers=d,Q.body=L.uploadData(),Q.errorHandler=jy(e),Q}class i3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,l,u){if(this.sent_)throw Oc("cannot .send() more than once");if(Vi(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class o3 extends i3{initXhr(){this.xhr_.responseType="text"}}function Sy(){return new o3}class No{constructor(e,n){this._service=e,n instanceof Bs?this._location=n:this._location=Bs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new No(e,n)}get root(){const e=new Bs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hk(this._location.path)}get storage(){return this._service}get parent(){const e=zM(this._location.path);if(e===null)return null;const n=new Bs(this._location.bucket,e);return new No(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw bM(e)}}function l3(s,e,n){s._throwIfRoot("uploadBytes");const i=a3(s.storage,s._location,dk(),new Ei(e,!0),n);return s.storage.makeRequestWithTokens(i,Sy).then(l=>({metadata:l,ref:s}))}function c3(s){const e={prefixes:[],items:[]};return mk(s,e).then(()=>e)}async function mk(s,e,n){const l=await u3(s,{pageToken:n});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await mk(s,e,l.nextPageToken)}function u3(s,e){e!=null&&typeof e.maxResults=="number"&&fg("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=t3(s.storage,s._location,"/",n.pageToken,n.maxResults);return s.storage.makeRequestWithTokens(i,Sy)}function h3(s){s._throwIfRoot("getDownloadURL");const e=n3(s.storage,s._location,dk());return s.storage.makeRequestWithTokens(e,Sy).then(n=>{if(n===null)throw yM();return n})}function d3(s,e){const n=FM(s._location.path,e),i=new Bs(s._location.bucket,n);return new No(s.storage,i)}function f3(s){return/^[A-Za-z]+:\/\//.test(s)}function m3(s,e){return new No(s,e)}function pk(s,e){if(s instanceof Ny){const n=s;if(n._bucket==null)throw pM();const i=new No(n,n._bucket);return e!=null?pk(i,e):i}else return e!==void 0?d3(s,e):s}function p3(s,e){if(e&&f3(e)){if(s instanceof Ny)return m3(s,e);throw dg("To use ref(service, url), the first argument must be a Storage instance.")}else return pk(s,e)}function K2(s,e){const n=e?.[ak];return n==null?null:Bs.makeFromBucketSpec(n,s)}function g3(s,e,n,i={}){s.host=`${e}:${n}`;const l=Vi(e);l&&(_g(`https://${s.host}/b`),kg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:Px(u,s.app.options.projectId))}class Ny{constructor(e,n,i,l,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=rk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rM,this._maxUploadRetryTime=aM,this._requests=new Set,l!=null?this._bucket=Bs.makeFromBucketSpec(l,this._host):this._bucket=K2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bs.makeFromBucketSpec(this._url,e):this._bucket=K2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new No(this,e)}_makeRequest(e,n,i,l,u=!0){if(this._deleted)return new xM(ik());{const d=AM(e,this._appId,i,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,l).getPromise()}}const Y2="@firebase/storage",Q2="0.14.0";const gk="storage";function y3(s,e,n){return s=$n(s),l3(s,e,n)}function X2(s){return s=$n(s),c3(s)}function Zc(s){return s=$n(s),h3(s)}function _l(s,e){return s=$n(s),p3(s,e)}function v3(s=Sg(),e){s=$n(s);const i=Ud(s,gk).getImmediate({identifier:e}),l=Ix("storage");return l&&b3(i,...l),i}function b3(s,e,n,i={}){g3(s,e,n,i)}function x3(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new Ny(n,i,l,e,Co)}function w3(){_o(new Ai(gk,x3,"PUBLIC").setMultipleInstances(!0)),ra(Y2,Q2,""),ra(Y2,Q2,"esm2020")}w3();const yk={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},Cy=jg(yk),Vc=xw(Cy),Ie=FI(Cy),kl=v3(Cy),_3=jg(yk,"secondary"),VD=xw(_3),k3="EYdciKDOi3UYBLk1u8hHams5tmO2",vk=_.createContext();function rr(){return _.useContext(vk)}function T3({children:s}){const[e,n]=_.useState(null),[i,l]=_.useState(!1),[u,d]=_.useState(!1),[p,g]=_.useState(null),[y,x]=_.useState(!0);_.useEffect(()=>S4(Vc,async ee=>{if(n(ee),ee)if(ee.uid===k3)l(!0),d(!1),g(null);else{l(!1);try{const Q=Vn(dn(Ie,"clients"),Tn("uid","==",ee.uid)),oe=await Cn(Q);if(oe.empty)d(!1),g(null);else{const be=oe.docs[0];d(!0),g({id:be.id,...be.data()})}}catch(Q){console.error("Error fetching client data:",Q),d(!1),g(null)}}else l(!1),d(!1),g(null);x(!1)}),[]);const B={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:O=>{g(ee=>ee&&{...ee,...O})},login:async(O,ee,Q=!0)=>(await T4(Vc,Q?dw:Dg),await k4(Vc,O,ee)),logout:()=>N4(Vc),resetPassword:O=>_4(Vc,O),loading:y};return a.jsx(vk.Provider,{value:B,children:s})}const bk=_.createContext();function qr(){return _.useContext(bk)}function E3({children:s}){const[e,n]=_.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=_.useState(()=>localStorage.getItem("accent")||"red");_.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),_.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(bk.Provider,{value:p,children:s})}function j3(){const[s,e]=_.useState(""),[n,i]=_.useState(""),[l,u]=_.useState(!0),[d,p]=_.useState(""),[g,y]=_.useState(!1),[x,k]=_.useState(!1),[j,L]=_.useState(!1),{login:H,resetPassword:B,currentUser:O,isAdmin:ee,isClient:Q,clientData:oe,loading:be}=rr(),Ve=Ss();if(_.useEffect(()=>{if(!be&&O){if(ee)Ve("/dashboard");else if(Q){const E=oe?.clientType;Ve(E==="core_buddy"?"/client/core-buddy":E==="circuit_vip"||E==="circuit_dropin"?"/client/circuit":"/client")}}},[be,O,ee,Q,oe,Ve]),be)return null;const Ae=async E=>{E.preventDefault(),p(""),y(!0);try{await H(s,n,l)}catch(A){p(A.message||"Failed to log in"),y(!1)}},I=async E=>{if(E.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await B(s.trim()),L(!0)}catch(A){A.code==="auth/user-not-found"?p("No account found with this email"):p(A.message||"Failed to send reset email")}y(!1)};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:x?"Reset Password":"Client Portal"})]}),d&&a.jsx("div",{className:"error-message",children:d}),j?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{k(!1),L(!1),p("")},children:"Back to Log In"})]}):x?a.jsxs("form",{onSubmit:I,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:E=>e(E.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:Ae,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:E=>e(E.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:n,onChange:E=>i(E.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:E=>u(E.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!0),p("")},children:"Forgot password?"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Ur({active:s}){const e=Ss(),{clientData:n}=rr(),i=n?.clientType==="block"&&n?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"})}),a.jsx("span",{children:"Workouts"})]}),a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),i&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Cu(s,e,n,i,l){const u=[];for(let d=0;d<s;d++){const p=(d*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:n+i*Math.sin(p),x2:e+l*Math.cos(p),y2:n+l*Math.sin(p),thick:d%5===0})}return u}const Ry=Cu(60,100,100,85,96),yo=Cu(60,100,100,78,94),S3=Cu(60,100,100,82,94);Cu(60,50,50,38,46);const N3=Cu(60,40,40,30,37),jp=[10,25,50,100,200,500,1e3],bi=5;function fl(s){return s.toISOString().split("T")[0]}function C3(s){let e=0;for(const n of jp){if(s<n)return{prev:e,next:n};e=n}return{prev:jp[jp.length-1],next:s+100}}const R3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},A3={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},Sp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}],$s={first_workout:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 4v16"}),a.jsx("path",{d:"M18 4v16"}),a.jsx("path",{d:"M6 12h12"}),a.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),a.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]}),workouts_10:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),a.jsx("path",{d:"M12 14v4"}),a.jsx("path",{d:"M10 18h4"})]}),workouts_25:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),workouts_50:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12h4"}),a.jsx("path",{d:"M16 12h4"}),a.jsx("path",{d:"M12 4v4"}),a.jsx("path",{d:"M12 16v4"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]}),workouts_100:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),streak_2:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M9 16l2 2 4-4"})]}),streak_4:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M8 16h8"}),a.jsx("path",{d:"M12 14v4"})]}),streak_8:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),a.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]}),programme_done:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("path",{d:"M4 22h16"}),a.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),a.jsx("path",{d:"M9 12l2 2 4-4"})]}),habits_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),nutrition_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),a.jsx("path",{d:"M9 7h6"})]}),first_pb:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M12 14v8"}),a.jsx("path",{d:"M9 18l3 3 3-3"}),a.jsx("path",{d:"M10 6l2 2 2-2"})]}),pbs_5:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 20h18"}),a.jsx("path",{d:"M5 20V10l4-6"}),a.jsx("path",{d:"M9 20V4"}),a.jsx("path",{d:"M13 20V10l4-6"}),a.jsx("path",{d:"M17 20V4"}),a.jsx("path",{d:"M21 20V10"})]}),leaderboard_join:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},J2=[{id:"first_workout",icon:$s.first_workout,name:"First Rep",desc:"Complete your first workout",category:"workouts"},{id:"workouts_10",icon:$s.workouts_10,name:"On Fire",desc:"Complete 10 workouts",category:"workouts"},{id:"workouts_25",icon:$s.workouts_25,name:"Lightning",desc:"Complete 25 workouts",category:"workouts"},{id:"workouts_50",icon:$s.workouts_50,name:"Iron Will",desc:"Complete 50 workouts",category:"workouts"},{id:"workouts_100",icon:$s.workouts_100,name:"Century Club",desc:"Complete 100 workouts",category:"workouts"},{id:"streak_2",icon:$s.streak_2,name:"2 Week Warrior",desc:"2-week workout streak",category:"streak"},{id:"streak_4",icon:$s.streak_4,name:"Month Strong",desc:"4-week workout streak",category:"streak"},{id:"streak_8",icon:$s.streak_8,name:"Unbreakable",desc:"8-week workout streak",category:"streak"},{id:"programme_done",icon:$s.programme_done,name:"Finisher",desc:"Complete a programme",category:"programme"},{id:"habits_7",icon:$s.habits_7,name:"Habit Machine",desc:"7-day perfect habit streak",category:"habits"},{id:"nutrition_7",icon:$s.nutrition_7,name:"Fuel Master",desc:"Log nutrition 7 days in a row",category:"nutrition"},{id:"first_pb",icon:$s.first_pb,name:"Record Breaker",desc:"Set your first PB",category:"pbs"},{id:"pbs_5",icon:$s.pbs_5,name:"Climbing",desc:"Set 5 personal bests",category:"pbs"},{id:"leaderboard_join",icon:$s.leaderboard_join,name:"Competitor",desc:"Join the leaderboard",category:"social"}];function I3(){const{currentUser:s,isClient:e,clientData:n,logout:i,updateClientData:l,loading:u}=rr(),{isDark:d,toggleTheme:p}=qr(),g=Ss(),[y,x]=_.useState({hours:0,minutes:0,seconds:0}),[k,j]=_.useState(0),[L,H]=_.useState(0),[B,O]=_.useState(""),[ee,Q]=_.useState(0),[oe,be]=_.useState(0),[Ve,Ae]=_.useState(!1),[I,E]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[A,P]=_.useState(null),[D,z]=_.useState(0),[M,ke]=_.useState(null),[ht,K]=_.useState(!1),[we,Le]=_.useState(!1),[re,De]=_.useState(0),[N,V]=_.useState(0),[ie,pe]=_.useState([]),[Se,Me]=_.useState([]),[Qe,Fe]=_.useState(null),[Ge,bt]=_.useState(!1),nn=_.useRef(null),[wt,vt]=_.useState([]),[ne,ln]=_.useState(null),[Vt,_t]=_.useState(0),[At,ct]=_.useState(0),[Xe,Gt]=_.useState(0),[is,It]=_.useState(0),[zt,Bn]=_.useState(null),Ht=_.useCallback((xe,ze="info")=>{Bn({message:xe,type:ze}),setTimeout(()=>Bn(null),4e3)},[]);_.useEffect(()=>{!u&&!s&&g("/")},[u,s,g]),_.useEffect(()=>{if(n)try{const xe=sessionStorage.getItem(`cbDash_${n.id}`);if(xe){const ze=JSON.parse(xe);H(ze.programmePct??0),O(ze.programmeName??""),Q(ze.totalWorkouts??0),be(ze.habitWeekPct??0),E(ze.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),P(ze.nutritionTargetData??null),z(ze.todayHabitsCount??0),ke(ze.nextSession??null),K(ze.hasProgramme??!1),Le(ze.programmeComplete??!1),De(ze.weeklyWorkouts??0),V(ze.pbCount??0),pe(ze.topPBs??[]),Me(ze.leaderboardTop3??[]),vt(ze.unlockedBadges??[]),_t(ze.streakWeeks??0),Ae(!0)}}catch{}},[n]),_.useEffect(()=>{n?.photoURL&&Fe(n.photoURL)},[n]);const wn=async xe=>{const ze=xe.target.files?.[0];if(!(!ze||!n)){if(!ze.type.startsWith("image/")){Ht("Please select an image file","error");return}if(ze.size>5*1024*1024){Ht("Image must be under 5MB","error");return}bt(!0);try{const lt=await new Promise(Ye=>{const jt=new Image;jt.onload=()=>{const Ct=document.createElement("canvas"),Dt=400;let Ft=jt.width,Tt=jt.height;Ft>Tt?(Tt=Tt/Ft*Dt,Ft=Dt):(Ft=Ft/Tt*Dt,Tt=Dt),Ct.width=Ft,Ct.height=Tt,Ct.getContext("2d").drawImage(jt,0,0,Ft,Tt),Ct.toBlob(sn=>Ye(sn),"image/jpeg",.75)},jt.src=URL.createObjectURL(ze)}),Et=_l(kl,`profilePhotos/${n.id}`);await y3(Et,lt);const $t=await Zc(Et);await gd(nt(Ie,"clients",n.id),{photoURL:$t}),Fe($t),l({photoURL:$t}),Ht("Profile photo updated!","success")}catch(lt){console.error("Photo upload error:",lt),Ht("Failed to upload photo","error")}bt(!1),nn.current&&(nn.current.value="")}};_.useEffect(()=>{const xe=()=>{const lt=new Date,Et=new Date(lt);Et.setHours(23,59,59,999);const $t=Et-lt,Ye=Math.floor($t/(1e3*60*60)),jt=Math.floor($t%(1e3*60*60)/(1e3*60)),Ct=Math.floor($t%(1e3*60)/1e3);x({hours:Ye,minutes:jt,seconds:Ct}),j(60-Ct)};xe();const ze=setInterval(xe,1e3);return()=>clearInterval(ze)},[]),_.useEffect(()=>{const xe=setInterval(()=>{It(ze=>(ze+1)%Sp.length)},8e3);return()=>clearInterval(xe)},[]),_.useEffect(()=>{if(!s||!n)return;(async()=>{let ze=null,lt=0,Et=[],$t=!1;try{const Ye=fl(new Date),jt=await Dn(nt(Ie,"clientProgrammes",n.id));if(jt.exists()){const We=jt.data(),mt=R3[We.templateId];if(K(!0),mt){const tt=We.completedSessions||{},dt=Object.keys(tt).length,pt=mt.duration*mt.daysPerWeek;H(pt>0?Math.round(dt/pt*100):0);const an=We.templateId.replace(/_/g," ").replace(/\b\w/g,Qn=>Qn.toUpperCase());O(an);const Ns=A3[We.templateId];let Wn=!1;for(let Qn=1;Qn<=mt.duration&&!Wn;Qn++)for(let mn=0;mn<mt.daysPerWeek&&!Wn;mn++)tt[`w${Qn}d${mn}`]||(ke({week:Qn,dayIdx:mn,label:Ns?.[mn]||`Day ${mn+1}`}),Wn=!0);Wn||(Le(!0),$t=!0)}}const Ct=dn(Ie,"workoutLogs"),Dt=Vn(Ct,Tn("clientId","==",n.id));ze=await Cn(Dt);const Ft=ze.docs.filter(We=>We.data().type!=="programme").length;Q(Ft);const Tt=new Date,sn=Tt.getDay(),Wt=sn===0?6:sn-1,rn=new Date(Tt);rn.setDate(Tt.getDate()-Wt),rn.setHours(0,0,0,0);const un=fl(rn),fn=ze.docs.filter(We=>(We.data().date||"")>=un).length;De(fn);const Rn=dn(Ie,"habitLogs"),q=Vn(Rn,Tn("clientId","==",n.id),Tn("date","==",Ye)),fe=await Cn(q);let ge=0;if(!fe.empty){const We=fe.docs[0].data().habits||{};ge=Object.values(We).filter(Boolean).length}be(Math.round(ge/bi*100)),z(ge);const ve=await Dn(nt(Ie,"nutritionTargets",n.id));ve.exists()&&P(ve.data());const de=await Dn(nt(Ie,"nutritionLogs",`${n.id}_${Ye}`));if(de.exists()){const mt=(de.data().entries||[]).reduce((tt,dt)=>({protein:tt.protein+(dt.protein||0),carbs:tt.carbs+(dt.carbs||0),fats:tt.fats+(dt.fats||0),calories:tt.calories+(dt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});E(mt)}}catch(Ye){console.error("Error loading dashboard stats:",Ye)}try{let Ye=[];const jt=await Dn(nt(Ie,"coreBuddyPBs",n.id));if(jt.exists()){const Ct=jt.data().exercises||{};V(Object.keys(Ct).length),lt=Object.keys(Ct).length,Ye=Object.entries(Ct).sort(([,Dt],[,Ft])=>(Ft.weight||0)-(Dt.weight||0)).slice(0,3).map(([Dt,Ft])=>({name:Dt,weight:Ft.weight,reps:Ft.reps}))}if(Ye.length===0){const Ct={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},Dt=Vn(dn(Ie,"personalBests"),Tn("clientId","==",n.id)),Ft=await Cn(Dt);if(!Ft.empty){const Tt={};Ft.docs.forEach(Wt=>{const rn=Wt.data().benchmarks||{};Object.entries(rn).forEach(([un,fn])=>{if(!fn.weight||!Ct[un])return;const Rn=(fn.weight||0)*(fn.reps||1);(!Tt[un]||Rn>(Tt[un].weight||0)*(Tt[un].reps||1))&&(Tt[un]={name:Ct[un],weight:fn.weight,reps:fn.reps})})});const sn=Object.values(Tt);V(sn.length),lt=sn.length,Ye=sn.sort((Wt,rn)=>(rn.weight||0)-(Wt.weight||0)).slice(0,3)}}Et=Ye,pe(Ye)}catch(Ye){console.error("PB fetch error:",Ye)}try{const Ye=dn(Ie,"clients"),jt=Vn(Ye,Tn("leaderboardOptIn","==",!0)),Dt=(await Cn(jt)).docs.map(Ft=>({id:Ft.id,name:Ft.data().name,photoURL:Ft.data().photoURL||null}));Me(Dt.slice(0,3))}catch(Ye){console.error("Leaderboard preview error:",Ye)}try{let Ye=0;if(ze){const Wt=ze.docs.map(rn=>rn.data().date).filter(Boolean).sort().reverse();if(Wt.length>0){const rn=new Date;let un=new Date(rn);e:for(let fn=0;fn<52;fn++){const Rn=new Date(un),q=Rn.getDay(),fe=q===0?6:q-1;Rn.setDate(Rn.getDate()-fe),Rn.setHours(0,0,0,0);const ge=new Date(Rn);ge.setDate(ge.getDate()+7);const ve=fl(Rn),de=fl(ge);if(Wt.some(mt=>mt>=ve&&mt<de))Ye++;else{if(fn>0)break e;break}un.setDate(un.getDate()-7)}}}_t(Ye);let jt=0;for(let Wt=0;Wt<30;Wt++){const rn=new Date;rn.setDate(rn.getDate()-Wt);const un=fl(rn);try{const fn=await Cn(Vn(dn(Ie,"habitLogs"),Tn("clientId","==",n.id),Tn("date","==",un)));if(fn.empty)break;{const Rn=fn.docs[0].data().habits||{};if(Object.values(Rn).filter(Boolean).length>=bi)jt++;else break}}catch{break}}ct(jt);let Ct=0;for(let Wt=0;Wt<30;Wt++){const rn=new Date;rn.setDate(rn.getDate()-Wt);const un=fl(rn);try{const fn=await Dn(nt(Ie,"nutritionLogs",`${n.id}_${un}`));if(fn.exists()&&(fn.data().entries||[]).length>0)Ct++;else break}catch{break}}Gt(Ct);const Dt=ze?ze.docs.length:0,Ft=[],Tt=Wt=>Ft.push(Wt);Dt>=1&&Tt("first_workout"),Dt>=10&&Tt("workouts_10"),Dt>=25&&Tt("workouts_25"),Dt>=50&&Tt("workouts_50"),Dt>=100&&Tt("workouts_100"),Ye>=2&&Tt("streak_2"),Ye>=4&&Tt("streak_4"),Ye>=8&&Tt("streak_8"),$t&&Tt("programme_done"),jt>=7&&Tt("habits_7"),Ct>=7&&Tt("nutrition_7"),(lt>0||Et.length>0)&&Tt("first_pb"),lt>=5&&Tt("pbs_5"),n.leaderboardOptIn&&Tt("leaderboard_join"),vt(Ft);const sn={};Ft.forEach(Wt=>{sn[Wt]={unlockedAt:new Date().toISOString()}}),In(nt(Ie,"achievements",n.id),{badges:sn,updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(Ye){console.error("Achievement computation error:",Ye)}Ae(!0)})()},[s,n]),_.useEffect(()=>{if(!(!Ve||!n))try{sessionStorage.setItem(`cbDash_${n.id}`,JSON.stringify({programmePct:L,programmeName:B,totalWorkouts:ee,habitWeekPct:oe,nutritionTotals:I,nutritionTargetData:A,todayHabitsCount:D,nextSession:M,hasProgramme:ht,programmeComplete:we,weeklyWorkouts:re,pbCount:N,topPBs:ie,leaderboardTop3:Se,unlockedBadges:wt,streakWeeks:Vt}))}catch{}},[Ve,L,B,ee,oe,I,A,D,M,ht,we,re,N,ie,Se,wt,Vt,n]);const me=xe=>{const ze=xe.currentTarget,lt=ze.querySelector(".ripple");lt&&lt.remove();const Et=ze.getBoundingClientRect(),$t=Math.max(Et.width,Et.height),Ye=xe.clientX-Et.left-$t/2,jt=xe.clientY-Et.top-$t/2,Ct=document.createElement("span");Ct.className="ripple",Ct.style.cssText=`width:${$t}px;height:${$t}px;left:${Ye}px;top:${jt}px;`,ze.appendChild(Ct),setTimeout(()=>Ct.remove(),600)},Te=n?.name?.split(" ")[0]||"there",{prev:Re,next:st}=C3(ee),Je=st>Re?Math.round((ee-Re)/(st-Re)*100):100,qe=[{label:"Programme",value:`${L}%`,pct:L,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${ee}`,pct:Je,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${oe}%`,pct:oe,color:"#38B6FF",size:"normal"}],et=xe=>!A||!A[xe]?0:Math.min(Math.round(I[xe]/A[xe]*100),100),Ke=(()=>{const xe=new Date().getHours();return Ve&&D>=bi&&I.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:xe>=5&&xe<12?{main:"Rise and grind,",sub:"let's get after it!"}:xe>=12&&xe<17?{main:"Oye",sub:"crack on and make it count!"}:xe>=17&&xe<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),Ue=Ve?ht&&M&&!we?{label:"NEXT SESSION",message:`Week ${M.week}, Day ${M.dayIdx+1}  ${M.label}`,cta:"Continue",action:()=>g("/client/core-buddy/programmes"),pct:L,ringLabel:`${L}%`}:D<bi?{label:"DAILY HABITS",message:`${D}/${bi} completed`,cta:"Open Habits",action:()=>g("/client/core-buddy/consistency"),pct:oe,ringLabel:`${D}/${bi}`}:I.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>g("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:ht?we?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>g("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>g("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null;return a.jsxs("div",{className:"cb-dashboard","data-theme":d?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:d?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:Ry.map((xe,ze)=>{const lt=ze<k;return a.jsx("line",{x1:xe.x1,y1:xe.y1,x2:xe.x2,y2:xe.y2,className:`ring-tick ${lt?"elapsed":"remaining"}`,strokeWidth:xe.thick?"3":"2"},ze)})}),a.jsx("div",{className:"cb-ring-center",children:a.jsxs("div",{className:"cb-ring-logo",onClick:()=>nn.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:Qe||"/Logo.webp",alt:Qe?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${Ge?" uploading":""}`,children:Ge?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:nn,type:"file",accept:"image/*",onChange:wn,style:{display:"none"}})]})})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(y.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(y.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(y.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Sp[is].text," ",a.jsx("strong",{children:Sp[is].bold})]},is)]}),a.jsx("div",{className:"cb-stats-row",children:qe.map(xe=>{const ze=(xe.size==="large",38),lt=2*Math.PI*ze,Et=lt-xe.pct/100*lt;return a.jsxs("div",{className:`cb-stat-item${xe.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:"cb-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:ze}),a.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:ze,style:{stroke:xe.color},strokeDasharray:lt,strokeDashoffset:Et})]}),a.jsx("span",{className:"cb-stat-value",style:{color:xe.color},children:xe.value})]}),a.jsx("span",{className:"cb-stat-label",children:xe.label})]},xe.label)})}),a.jsxs("p",{className:"cb-coach-msg",children:[Ke.main," ",a.jsx("strong",{children:Te}),"  ",Ke.sub]}),Ue&&a.jsxs("button",{className:"cb-nudge-card",onClick:Ue.action||void 0,style:Ue.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-Ue.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:Ue.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:Ue.label}),a.jsx("span",{className:"cb-nudge-title",children:Ue.message}),Ue.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[Ue.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[a.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:xe=>{me(xe),g("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:et("protein"),color:"#14b8a6"},{label:"C",pct:et("carbs"),color:"var(--color-primary)"},{label:"F",pct:et("fats"),color:"#eab308"},{label:"Cal",pct:et("calories"),color:"#38B6FF"}].map(xe=>{const lt=2*Math.PI*38,Et=lt-xe.pct/100*lt;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:xe.color},strokeDasharray:lt,strokeDashoffset:Et})]}),a.jsx("span",{style:{color:xe.color},children:xe.label})]},xe.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:xe=>{me(xe),g("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[re," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[ee," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-grid-row",children:[a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:xe=>{me(xe),g("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:"cb-habit-dots",children:Array.from({length:bi},(xe,ze)=>a.jsx("span",{className:`cb-habit-dot${ze<D?" done":""}`},ze))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[D,"/",bi," today"]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:xe=>{me(xe),g("/client/personal-bests?mode=corebuddy")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"PBs"}),ie.length>0?a.jsx("div",{className:"cb-pb-preview",children:ie.slice(0,2).map(xe=>a.jsxs("div",{className:"cb-pb-entry",children:[a.jsx("span",{className:"cb-pb-name",children:xe.name}),a.jsxs("span",{className:"cb-pb-value",children:[xe.weight,"kg"]})]},xe.name))}):a.jsxs("div",{className:"cb-progress-preview",children:[a.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{children:"Start lifting!"})]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:xe=>{me(xe),g("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),Se.length>0?a.jsx("div",{className:"cb-lb-preview",children:Se.map((xe,ze)=>{const lt=["#FFD700","#A8B4C0","#CD7F32"][ze],Et=xe.name?xe.name.split(" ").map(Ye=>Ye[0]).join("").slice(0,2).toUpperCase():"?",$t=xe.id===n?.id;return a.jsxs("div",{className:`cb-lb-entry${$t?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:lt},children:xe.photoURL?a.jsx("img",{src:xe.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:Et})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:lt},children:["#",ze+1]})]},xe.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:xe=>{me(xe),g("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-feed ripple-btn",onClick:xe=>{me(xe),g("/client/core-buddy/feed")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Feed"}),a.jsx("p",{children:"See what your buddies are up to and share updates"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-achievements-section",children:[a.jsx("h3",{className:"cb-achievements-title",children:"Achievements"}),a.jsx("div",{className:"cb-badges-scroll",children:J2.map(xe=>{const ze=wt.includes(xe.id);return a.jsxs("button",{className:`cb-badge${ze?" unlocked":" locked"}`,onClick:()=>ln(ne?.id===xe.id?null:xe),children:[a.jsx("span",{className:"cb-badge-icon",children:xe.icon}),a.jsx("span",{className:"cb-badge-name",children:xe.name})]},xe.id)})}),ne&&a.jsxs("div",{className:"cb-badge-detail",children:[a.jsx("span",{className:"cb-badge-detail-icon",children:ne.icon}),a.jsxs("div",{className:"cb-badge-detail-info",children:[a.jsx("strong",{children:ne.name}),a.jsx("span",{children:ne.desc}),wt.includes(ne.id)?a.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):a.jsx("span",{className:"cb-badge-status locked",children:"Locked"})]})]}),a.jsxs("p",{className:"cb-badges-count",children:[wt.length,"/",J2.length," unlocked"]})]})]})]}),a.jsx(Ur,{active:"home"}),zt&&a.jsxs("div",{className:`toast-notification ${zt.type}`,children:[zt.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),zt.message]})]})}const Np=new Map;function xi(){return new Date().toISOString().split("T")[0]}const Z2=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],M3={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function D3(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function P3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=rr(),{isDark:l,toggleTheme:u,accent:d}=qr(),p=Ss(),[g,y]=_.useState("loading"),[x,k]=_.useState(null),[j,L]=_.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[H,B]=_.useState(null),[O,ee]=_.useState(xi()),[Q,oe]=_.useState({entries:[],water:0}),[be,Ve]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[Ae,I]=_.useState(!1),[E,A]=_.useState(!1),[P,D]=_.useState(()=>{const T=new Date;return{year:T.getFullYear(),month:T.getMonth()}}),[z,M]=_.useState(D3),[ke,ht]=_.useState(null),[K,we]=_.useState(null),[Le,re]=_.useState(!1),[De,N]=_.useState(null),[V,ie]=_.useState(""),[pe,Se]=_.useState(!1),[Me,Qe]=_.useState(""),[Fe,Ge]=_.useState([]),[bt,nn]=_.useState(!1),[wt,vt]=_.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[ne,ln]=_.useState(null),[Vt,_t]=_.useState("100"),[At,ct]=_.useState(0),[Xe,Gt]=_.useState("weight"),[is,It]=_.useState(0),[zt,Bn]=_.useState(null);_.useRef(null);const Ht=_.useRef(!1),wn=_.useRef(null),me=_.useRef(null),Te=_.useRef(null),Re=_.useCallback((T,R="info")=>{Bn({message:T,type:R}),setTimeout(()=>Bn(null),3e3)},[]);_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const R=await Dn(nt(Ie,"nutritionTargets",n.id));R.exists()?(k(R.data()),y("dashboard")):y("setup")}catch(R){console.error("Error loading nutrition data:",R),y("setup")}})()},[n?.id]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const R=await Dn(nt(Ie,"nutritionLogs",`${n.id}_${O}`));if(R.exists()){const G=R.data();oe({entries:G.entries||[],water:G.water||0})}else oe({entries:[],water:0})}catch(R){console.error("Error loading log:",R),oe({entries:[],water:0})}})()},[n?.id,O]),_.useEffect(()=>{const T=Q.entries.reduce((R,G)=>({protein:R.protein+(G.protein||0),carbs:R.carbs+(G.carbs||0),fats:R.fats+(G.fats||0),calories:R.calories+(G.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Ve(T)},[Q.entries]);const st=async T=>{try{await In(nt(Ie,"nutritionLogs",`${n.id}_${O}`),{clientId:n.id,date:O,entries:T.entries,water:T.water,updatedAt:ft.now()})}catch(R){console.error("Error saving nutrition log:",R)}},Je=O===xi(),qe=(T,R)=>new Date(T,R+1,0).getDate(),et=(T,R)=>new Date(T,R,1).getDay(),Ke=["January","February","March","April","May","June","July","August","September","October","November","December"],Ue=["Su","Mo","Tu","We","Th","Fr","Sa"],xe=()=>{let T=parseFloat(j.weight);j.weightUnit==="lbs"&&(T*=.453592);let R;j.heightUnit==="cm"?R=parseFloat(j.height):R=(parseFloat(j.heightFeet)||0)*30.48+(parseFloat(j.heightInches)||0)*2.54;const G=parseInt(j.age);let J=j.gender==="male"?10*T+6.25*R-5*G+5:10*T+6.25*R-5*G-161;const Be=J*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[j.dailyActivity],Oe={low:100,moderate:200,high:300,daily:400},Ot=Math.round(Be+Oe[j.trainingFrequency]);let xt=Ot,W,he;switch(j.goal){case"lose":xt=Ot*(1-{light:.15,moderate:.2,harsh:.25}[j.deficitLevel]),W=2.2,he=.3;break;case"build":xt=Ot*1.1,W=2,he=.22;break;default:W=1.8,he=.25}xt=Math.max(xt,j.gender==="male"?1400:1100);const ae=Math.round(T*W),Ce=Math.round(xt*he/9),Pe=Math.max(0,Math.round((xt-ae*4-Ce*9)/4));B({calories:Math.round(xt),protein:ae,carbs:Pe,fats:Ce,bmr:Math.round(J),neat:Math.round(Be),exerciseAdd:Oe[j.trainingFrequency],tdee:Math.round(Ot)})},ze=async()=>{if(H)try{const T={clientId:n.id,calories:H.calories,protein:H.protein,carbs:H.carbs,fats:H.fats,waterGoal:8,goal:j.goal,updatedAt:ft.now()};await In(nt(Ie,"nutritionTargets",n.id),T),k(T),y("dashboard"),Re("Macro targets saved!","success")}catch(T){console.error("Error saving targets:",T),Re("Failed to save targets. Please try again.","error")}},lt=()=>{const T=j.weight&&parseFloat(j.weight)>0,R=j.age&&parseInt(j.age)>0,G=j.heightUnit==="cm"?j.height&&parseFloat(j.height)>0:j.heightFeet&&parseFloat(j.heightFeet)>0||j.heightInches&&parseFloat(j.heightInches)>0;return T&&R&&G},Et="nut_favourite_foods",$t=()=>{try{return JSON.parse(localStorage.getItem(Et)||"[]")}catch{return[]}},Ye=T=>$t().some(R=>R.name.toLowerCase()===(T||"").toLowerCase()),jt=T=>{const R=$t(),G=R.findIndex(J=>J.name.toLowerCase()===T.name.toLowerCase());G>=0?R.splice(G,1):R.unshift({name:T.name,protein:T.protein,carbs:T.carbs,fats:T.fats,calories:T.calories,serving:T.serving,per100g:T.per100g||null,servingUnit:T.servingUnit||"g",portion:T.portion||null}),localStorage.setItem(Et,JSON.stringify(R)),It(J=>J+1)},Ct=T=>{const R=[...Q.entries,{...T,meal:z,id:Date.now(),addedAt:new Date().toISOString()}],G={...Q,entries:R};oe(G),st(G),we(null),ln(null),_t("100"),ct(0),Gt("weight"),vt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),Re("Food added!","success")},Dt=T=>{const R=Q.entries.filter(J=>J.id!==T),G={...Q,entries:R};oe(G),st(G)},Ft=_.useRef(null),Tt=async()=>{re(!0);const T=document.querySelector("#barcode-reader");if(!T){re(!1),Re("Scanner container not found.","error");return}if(!Ft.current)try{const G=await xr(()=>import("./quagga.min-BbicSfvA.js").then(J=>J.q),[]);Ft.current=G.default}catch(G){console.error("Failed to load barcode scanner:",G),re(!1),Re("Could not load scanner.","error");return}const R=Ft.current;R.init({inputStream:{type:"LiveStream",target:T,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},G=>{if(G){console.error("Quagga init error:",G),re(!1),Re("Could not access camera. Check permissions.","error");return}R.start(),Ht.current=!0}),R.onDetected(G=>{const J=G.codeResult.decodedCodes?.filter(Be=>Be.error!==void 0)?.map(Be=>Be.error)||[];if((J.length>0?J.reduce((Be,Oe)=>Be+Oe,0)/J.length:1)<.15){const Be=G.codeResult.code;R.offDetected(),N(Be)}})},sn=()=>{const T=Ft.current;Ht.current&&T&&(T.stop(),T.offDetected(),Ht.current=!1),re(!1)},Wt=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,rn=T=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((T||"").replace(/\s/g,"")),un=T=>{if(!T)return{value:100,unit:"g"};const R=T.toLowerCase().replace(/\s/g,""),G=R.match(/([\d.]+)/),J=G?parseFloat(G[1]):100;return rn(T)?/cl/.test(R)?{value:J*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(R)&&!/ml/.test(R)?{value:J*1e3,unit:"ml"}:{value:J,unit:"ml"}:{value:J,unit:"g"}},fn=T=>{if(rn(T.serving_size)||rn(T.quantity))return"ml";const R=T.product_name||T.product_name_en||"";return Wt.test(R)?"ml":"g"},Rn=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],q=(T,R)=>{const G=T||"",J=G.match(/\((\d+\.?\d*)\s*g\)/i),He=G.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(J&&He){const Ot=parseFloat(J[1]);let xt=He[1].replace(/^\d+\s*/,"").trim();if(xt&&Ot>0)return{label:xt,weight:Ot}}const Be=G.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Be){const Ot=parseFloat(Be[1]);let xt=Be[2].replace(/^\d+\s*/,"").trim();if(xt&&Ot>0)return{label:xt,weight:Ot}}const Oe=R||"";for(const{pattern:Ot,label:xt,weight:W}of Rn)if(Ot.test(Oe))return{label:xt,weight:W};return null},fe=T=>{const R=T.nutriments||{},G=fn(T),J=un(T.serving_size),He=G==="ml"?J.unit==="ml"?J.value:100:J.value,Be=T.product_name||T.product_name_en||"Unknown Product",Oe=q(T.serving_size,Be);return{name:Be,brand:T.brands||"",image:T.image_small_url||T.image_url||null,servingSize:T.serving_size||"100g",servingValue:He,servingUnit:G,portion:Oe,protein:Math.round(R.proteins_100g||R.proteins||0),carbs:Math.round(R.carbohydrates_100g||R.carbohydrates||0),fats:Math.round(R.fat_100g||R.fat||0),calories:Math.round(R["energy-kcal_100g"]||R["energy-kcal"]||(R.energy_100g?R.energy_100g/4.184:0)),per100g:!0}},ge=async T=>{Se(!0);try{const R=`https://world.openfoodfacts.org/api/v2/product/${T}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,G=await fetch(R);if(!G.ok)throw new Error(`HTTP ${G.status}`);const J=await G.json();if(J.status==="success"||J.status===1||J.product){const He=fe(J.product);He.calories===0&&He.protein===0&&He.carbs===0?Re("Product found but no nutrition data available.","error"):(ln(He),He.portion?(ct(1),_t(String(He.portion.weight)),Gt("portion")):(ct(0),_t(String(He.servingValue||100)),Gt("weight")),ie(""))}else Re("Product not found. Try search or manual entry.","error")}catch(R){console.error("Barcode lookup error:",R),Re("Failed to look up product. Check your connection.","error")}Se(!1)},ve=(T,R,G)=>{const J=T.toLowerCase().trim(),He=R.toLowerCase().trim(),Be=G.toLowerCase().trim();let Oe=0;return(J===Be||J===Be+"s"||J+"s"===Be)&&(Oe+=100),(J.endsWith(" "+Be)||J.endsWith(" "+Be+"s"))&&(Oe+=40),(J.startsWith(Be+" ")||J.startsWith(Be+"s "))&&(Oe+=15),Be.split(/\s+/).some(xt=>He===xt||He.startsWith(xt))&&(Oe+=30),Oe+=Math.max(0,30-J.length),Oe},de=async()=>{if(!Me.trim())return;wn.current&&wn.current.abort();const T=new AbortController;wn.current=T;const R=Me.trim().toLowerCase(),G=R.split(/\s+/).filter(Boolean);if(Np.has(R)){Ge(Np.get(R));return}nn(!0);try{const He=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Me.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Be=await fetch(He,{signal:T.signal});if(!Be.ok)throw new Error(`HTTP ${Be.status}`);const Ot=((await Be.json()).products||[]).map(xt=>fe(xt)).filter(xt=>xt.name!=="Unknown Product"&&(xt.calories>0||xt.protein>0)).filter(xt=>{const W=(xt.name+" "+xt.brand).toLowerCase();return G.every(he=>W.includes(he))}).sort((xt,W)=>ve(W.name,W.brand,R)-ve(xt.name,xt.brand,R)).slice(0,10);Np.set(R,Ot),Ge(Ot),Ot.length===0&&Re("No results found. Try a different search.","info")}catch(J){if(J.name==="AbortError")return;console.error("Search error:",J),Re("Search failed. Check your connection.","error")}nn(!1)};_.useEffect(()=>{if(me.current&&clearTimeout(me.current),!(!Me.trim()||K!=="search"||ne))return me.current=setTimeout(()=>{de()},700),()=>clearTimeout(me.current)},[Me]);const We=()=>{const T={...Q,water:Q.water+1};oe(T),st(T)},mt=()=>{if(Q.water<=0)return;const T={...Q,water:Q.water-1};oe(T),st(T)},tt={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},dt=80,pt=2*Math.PI*dt,an=(T,R,G,J,He)=>{const Be=J>0?Math.min(100,Math.round(G/J*100)):0,Oe=pt-Be/100*pt,Ot=tt[He]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:dt}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:dt,style:{stroke:Ot},strokeDasharray:pt,strokeDashoffset:Oe})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:Ot},children:Math.round(G)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",J,T==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:Ot},children:R})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:Ot},children:[Be,"%"]})]})};if(_.useEffect(()=>{if(!De)return;const T=setTimeout(()=>{const R=De;sn(),N(null),ge(R)},1500);return()=>clearTimeout(T)},[De]),_.useEffect(()=>()=>{const T=Ft.current;if(Ht.current&&T){try{T.stop(),T.offDetected()}catch{}Ht.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:j.gender==="male"?"active":"",onClick:()=>{L(T=>({...T,gender:"male"})),B(null)},children:"Male"}),a.jsx("button",{className:j.gender==="female"?"active":"",onClick:()=>{L(T=>({...T,gender:"female"})),B(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:j.age,onChange:T=>{L(R=>({...R,age:T.target.value})),B(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:j.weight,onChange:T=>{L(R=>({...R,weight:T.target.value})),B(null)},placeholder:j.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:j.weightUnit==="kg"?"active":"",onClick:()=>{L(T=>({...T,weightUnit:"kg"})),B(null)},children:"kg"}),a.jsx("button",{className:j.weightUnit==="lbs"?"active":"",onClick:()=>{L(T=>({...T,weightUnit:"lbs"})),B(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[j.heightUnit==="cm"?a.jsx("input",{type:"number",value:j.height,onChange:T=>{L(R=>({...R,height:T.target.value})),B(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:j.heightFeet,onChange:T=>{L(R=>({...R,heightFeet:T.target.value})),B(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:j.heightInches,onChange:T=>{L(R=>({...R,heightInches:T.target.value})),B(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:j.heightUnit==="cm"?"active":"",onClick:()=>{L(T=>({...T,heightUnit:"cm"})),B(null)},children:"cm"}),a.jsx("button",{className:j.heightUnit==="ft"?"active":"",onClick:()=>{L(T=>({...T,heightUnit:"ft"})),B(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:j.dailyActivity,onChange:T=>{L(R=>({...R,dailyActivity:T.target.value})),B(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:j.trainingFrequency,onChange:T=>{L(R=>({...R,trainingFrequency:T.target.value})),B(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:j.goal==="lose"?"active":"",onClick:()=>{L(T=>({...T,goal:"lose"})),B(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:j.goal==="maintain"?"active":"",onClick:()=>{L(T=>({...T,goal:"maintain"})),B(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:j.goal==="build"?"active":"",onClick:()=>{L(T=>({...T,goal:"build"})),B(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),j.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:j.deficitLevel==="light"?"active":"",onClick:()=>{L(T=>({...T,deficitLevel:"light"})),B(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:j.deficitLevel==="moderate"?"active":"",onClick:()=>{L(T=>({...T,deficitLevel:"moderate"})),B(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:j.deficitLevel==="harsh"?"active":"",onClick:()=>{L(T=>({...T,deficitLevel:"harsh"})),B(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:xe,disabled:!lt(),children:"Calculate Macros"})]}),H&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[an("Protein","Protein",H.protein,H.protein,"ring-protein"),an("Carbs","Carbs",H.carbs,H.carbs,"ring-carbs"),an("Fats","Fats",H.fats,H.fats,"ring-fats"),an("Calories","Calories",H.calories,H.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[H.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[H.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",H.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[H.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:ze,children:"Set as My Daily Targets"})]})]}),zt&&a.jsx("div",{className:`toast-notification ${zt.type}`,children:zt.message})]});const Ns=T=>{const R=new Date(T+"T12:00:00"),G=R.getDay(),J=new Date(R);J.setDate(R.getDate()-(G+6)%7);const He=[];for(let Be=0;Be<7;Be++){const Oe=new Date(J);Oe.setDate(J.getDate()+Be),He.push(Oe.toISOString().split("T")[0])}return He},Wn=["M","T","W","T","F","S","S"],Qn=(T,R="search")=>{M(T),R==="scan"?(we("scan"),ln(null)):R==="manual"?(we("manual"),vt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):R==="favourites"?we("favourites"):(we("search"),Ge([]),Qe(""))},mn=Ns(O),F=new Date(O+"T12:00:00"),ce=`${Ke[F.getMonth()]} ${F.getFullYear()}`;return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),B(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const T=new Date(O+"T12:00:00");T.setDate(T.getDate()-7);const R=T.toISOString().split("T")[0];ee(R)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{I(!Ae),D({year:F.getFullYear(),month:F.getMonth()})},children:ce}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const T=new Date(O+"T12:00:00");T.setDate(T.getDate()+7);const R=T.toISOString().split("T")[0];R<=xi()&&ee(R)},"aria-label":"Next week",disabled:mn[6]>=xi(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:mn.map((T,R)=>{const G=new Date(T+"T12:00:00").getDate(),J=T===O,He=T>xi(),Be=T===xi();return a.jsxs("button",{className:`nut-week-day${J?" selected":""}${Be?" today":""}${He?" future":""}`,disabled:He,onClick:()=>ee(T),children:[a.jsx("span",{className:"nut-week-day-letter",children:Wn[R]}),a.jsx("span",{className:"nut-week-day-num",children:G})]},T)})})]}),Ae&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>D(T=>{let R=T.month-1,G=T.year;return R<0&&(R=11,G--),{year:G,month:R}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[Ke[P.month]," ",P.year]}),a.jsx("button",{onClick:()=>D(T=>{let R=T.month+1,G=T.year;return R>11&&(R=0,G++),{year:G,month:R}}),disabled:P.year===new Date().getFullYear()&&P.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Ue.map(T=>a.jsx("span",{children:T},T))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(et(P.year,P.month))].map((T,R)=>a.jsx("span",{},`e${R}`)),[...Array(qe(P.year,P.month))].map((T,R)=>{const G=R+1,J=`${P.year}-${String(P.month+1).padStart(2,"0")}-${String(G).padStart(2,"0")}`,He=J>xi(),Be=J===O,Oe=J===xi();return a.jsx("button",{className:`nut-cal-day${Be?" selected":""}${Oe?" today":""}${He?" future":""}`,disabled:He,onClick:()=>{ee(J),I(!1)},children:G},G)})]})]}),a.jsxs("div",{className:"nut-rings-row",children:[an("Protein","Protein",be.protein,x.protein,"ring-protein"),an("Carbs","Carbs",be.carbs,x.carbs,"ring-carbs"),an("Fats","Fats",be.fats,x.fats,"ring-fats"),an("Calories","kCal",be.calories,x.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone",children:a.jsxs("div",{className:"nut-light-content",children:[Je&&a.jsxs("button",{className:"nut-water-quick",onClick:()=>A(!0),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsxs("span",{className:"nut-water-quick-count",children:[Q.water," / ",x?.waterGoal||8]}),a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:Z2.map(T=>{const R=Q.entries.filter(J=>(J.meal||"snacks")===T.key),G=R.reduce((J,He)=>({protein:J.protein+(He.protein||0),carbs:J.carbs+(He.carbs||0),fats:J.fats+(He.fats||0),calories:J.calories+(He.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${T.key}`,children:M3[T.key]}),a.jsx("span",{className:"nut-meal-card-title",children:T.label}),R.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[G.calories," cal"]}),Je&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>ht(ke===T.key?null:T.key),"aria-label":`Add to ${T.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),R.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,x.protein>0?G.protein/x.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[G.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,x.carbs>0?G.carbs/x.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[G.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,x.fats>0?G.fats/x.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[G.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,x.calories>0?G.calories/x.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:G.calories})]})]}),R.length>0&&a.jsx("div",{className:"nut-log-list",children:R.map(J=>a.jsxs("div",{className:"nut-log-item",children:[a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:J.name}),J.serving&&a.jsx("span",{className:"nut-log-item-serving",children:J.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[J.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[J.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[J.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:J.calories})]}),Je&&a.jsx("button",{className:"nut-log-delete",onClick:()=>Dt(J.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},J.id))}),R.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:Je?"Tap + to add food":"No entries"})})]},T.key)})})})]})}),ke&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>ht(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",Z2.find(T=>T.key===ke)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const T=ke;ht(null),Qn(T,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const T=ke;ht(null),Qn(T,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const T=ke;ht(null),Qn(T,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const T=ke;ht(null),Qn(T,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),E&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>A(!1),children:a.jsxs("div",{className:"nut-water-popup",onClick:T=>T.stopPropagation(),children:[a.jsxs("div",{className:"nut-water-popup-header",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsx("span",{children:"Water Intake"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>A(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsxs("div",{className:"nut-water-popup-body",children:[a.jsx("div",{className:"nut-water-glasses",children:[...Array(x?.waterGoal||8)].map((T,R)=>a.jsx("div",{className:`nut-water-glass ${R<Q.water?"filled":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:R<Q.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},R))}),a.jsxs("div",{className:"nut-water-popup-count",children:[Q.water," / ",x?.waterGoal||8," glasses"]}),a.jsxs("div",{className:"nut-water-btns",children:[a.jsx("button",{onClick:mt,disabled:Q.water<=0,children:"-"}),a.jsx("button",{onClick:We,children:"+"})]})]})]})}),K&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{sn(),N(null),we(null),ln(null)},children:a.jsxs("div",{className:"nut-modal",onClick:T=>T.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:K==="scan"?"Scan Barcode":K==="search"?"Search Food":K==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{sn(),N(null),we(null),ln(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),K==="scan"&&!ne&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),Le&&!De&&a.jsx("div",{className:"nut-scan-line"}),De&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:De})]})]}),!Le&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:Tt,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),Le&&!De&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:V,onChange:T=>ie(T.target.value),onKeyDown:T=>T.key==="Enter"&&V.trim()&&ge(V.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>V.trim()&&ge(V.trim()),disabled:!V.trim()||pe,children:pe?"...":"Look Up"})]})]}),K==="scan"&&ne&&(()=>{const T=ne.servingUnit||"g",R=ne.portion,G=Xe==="portion"&&R?At*R.weight:parseFloat(Vt)||0,J=G/100,He=T==="ml"?[100,200,250,500]:[50,100,150,200],Be=Xe==="portion"&&R?`${At} ${R.label}${At!==1?"s":""} (${Math.round(G)}${T})`:`${Math.round(G)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[ne.image&&a.jsx("img",{src:ne.image,alt:ne.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:ne.name}),a.jsx("button",{className:`nut-fav-star confirm${Ye(ne.name)?" active":""}`,onClick:()=>jt({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Ye(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ne.brand&&a.jsx("p",{className:"nut-product-brand",children:ne.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),R&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Xe==="portion"?"active":"",onClick:()=>{Gt("portion"),At<1&&ct(1)},children:"Portions"}),a.jsxs("button",{className:Xe==="weight"?"active":"",onClick:()=>{Gt("weight"),_t(String(Math.round(G)||100))},children:["Custom (",T,")"]})]}),Xe==="portion"&&R?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,At-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:At}),a.jsxs("span",{className:"nut-stepper-label",children:[R.label,At!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(G),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(At+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:Vt,onChange:Oe=>_t(Oe.target.value),onFocus:Oe=>Oe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:He.map(Oe=>a.jsxs("button",{className:`nut-quick-btn${Vt===String(Oe)?" active":""}`,onClick:()=>_t(String(Oe)),children:[Oe,T]},Oe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{ln(null),we("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ct({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Be}),children:"Add"})]})]})})(),K==="search"&&!ne&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:Te,value:Me,onChange:T=>Qe(T.target.value),onKeyDown:T=>{T.key==="Enter"&&(clearTimeout(me.current),de())},onFocus:()=>setTimeout(()=>Te.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:de,disabled:bt,children:bt?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[Fe.map((T,R)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{ln(T),T.portion?(ct(1),_t(String(T.portion.weight)),Gt("portion")):(ct(0),_t(String(T.servingValue||100)),Gt("weight"))},children:[T.image&&a.jsx("img",{src:T.image,alt:T.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:T.name}),T.brand&&a.jsx("span",{className:"nut-search-item-brand",children:T.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[T.calories," cal  ",T.protein,"p  ",T.carbs,"c  ",T.fats,"f per 100",T.servingUnit||"g"]})]})]},R)),Fe.length===0&&Me&&!bt&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),K==="search"&&ne&&(()=>{const T=ne.servingUnit||"g",R=ne.portion,G=Xe==="portion"&&R?At*R.weight:parseFloat(Vt)||0,J=G/100,He=T==="ml"?[100,200,250,500]:[50,100,150,200],Be=Xe==="portion"&&R?`${At} ${R.label}${At!==1?"s":""} (${Math.round(G)}${T})`:`${Math.round(G)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[ne.image&&a.jsx("img",{src:ne.image,alt:ne.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:ne.name}),a.jsx("button",{className:`nut-fav-star confirm${Ye(ne.name)?" active":""}`,onClick:()=>jt({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Ye(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ne.brand&&a.jsx("p",{className:"nut-product-brand",children:ne.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),R&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Xe==="portion"?"active":"",onClick:()=>{Gt("portion"),At<1&&ct(1)},children:"Portions"}),a.jsxs("button",{className:Xe==="weight"?"active":"",onClick:()=>{Gt("weight"),_t(String(Math.round(G)||100))},children:["Custom (",T,")"]})]}),Xe==="portion"&&R?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,At-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:At}),a.jsxs("span",{className:"nut-stepper-label",children:[R.label,At!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(G),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(At+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:Vt,onChange:Oe=>_t(Oe.target.value),onFocus:Oe=>Oe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:He.map(Oe=>a.jsxs("button",{className:`nut-quick-btn${Vt===String(Oe)?" active":""}`,onClick:()=>_t(String(Oe)),children:[Oe,T]},Oe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>ln(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ct({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Be}),children:"Add"})]})]})})(),K==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:wt.name,onChange:T=>vt(R=>({...R,name:T.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:wt.serving,onChange:T=>vt(R=>({...R,serving:T.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:wt.protein,onChange:T=>vt(R=>({...R,protein:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:wt.carbs,onChange:T=>vt(R=>({...R,carbs:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:wt.fats,onChange:T=>vt(R=>({...R,fats:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:wt.calories,onChange:T=>vt(R=>({...R,calories:T.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!wt.name.trim(),onClick:()=>Ct({name:wt.name,protein:parseFloat(wt.protein)||0,carbs:parseFloat(wt.carbs)||0,fats:parseFloat(wt.fats)||0,calories:parseFloat(wt.calories)||0,serving:wt.serving||""}),children:"Add Food"})]}),K==="favourites"&&!ne&&(()=>{const T=$t(),R=G=>{if(G.per100g){const J=G.per100g;ln({name:G.name,brand:"",image:null,servingSize:G.serving||"100g",servingValue:100,servingUnit:G.servingUnit||"g",portion:G.portion||null,protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories,per100g:!0}),G.portion?(ct(1),_t(String(G.portion.weight)),Gt("portion")):(ct(0),_t("100"),Gt("weight"))}else Ct({name:G.name,protein:G.protein,carbs:G.carbs,fats:G.fats,calories:G.calories,serving:G.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:T.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:T.map((G,J)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:He=>{He.stopPropagation(),jt(G)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>R(G),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:G.name}),a.jsx("span",{className:"nut-recent-item-serving",children:G.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[G.calories," cal"]})]})]},J))})})})(),K==="favourites"&&ne&&(()=>{const T=ne.servingUnit||"g",R=ne.portion,G=Xe==="portion"&&R?At*R.weight:parseFloat(Vt)||0,J=G/100,He=T==="ml"?[100,200,250,500]:[50,100,150,200],Be=Xe==="portion"&&R?`${At} ${R.label}${At!==1?"s":""} (${Math.round(G)}${T})`:`${Math.round(G)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:ne.name}),a.jsx("button",{className:`nut-fav-star confirm${Ye(ne.name)?" active":""}`,onClick:()=>jt({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Ye(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),R&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Xe==="portion"?"active":"",onClick:()=>{Gt("portion"),At<1&&ct(1)},children:"Portions"}),a.jsxs("button",{className:Xe==="weight"?"active":"",onClick:()=>{Gt("weight"),_t(String(Math.round(G)||100))},children:["Custom (",T,")"]})]}),Xe==="portion"&&R?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,At-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:At}),a.jsxs("span",{className:"nut-stepper-label",children:[R.label,At!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(G),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(At+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:Vt,onChange:Oe=>_t(Oe.target.value),onFocus:Oe=>Oe.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:He.map(Oe=>a.jsxs("button",{className:`nut-quick-btn${Vt===String(Oe)?" active":""}`,onClick:()=>_t(String(Oe)),children:[Oe,T]},Oe))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>ln(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ct({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Be}),children:"Add"})]})]})})()]})}),a.jsx(Ur,{active:"nutrition"}),zt&&a.jsx("div",{className:`toast-notification ${zt.type}`,children:zt.message})]})}const ex="/login/assets/randomiser-glq9YJkL.jpg",L3="/login/assets/programme-card-workout-CnNzTYkz.webp",O3="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",V3="/login/assets/mg-arms-BeOQU3wx.jpg",tx=60,Cp=5,B3=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],U3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},z3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},F3={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},Rp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Ap=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:O3},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Bc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:V3},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],nx={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},sx=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Ip=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],ml=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],q3=[5,10,15,20,30];function H3(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function $3(s){const e=[...s];for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[e[n],e[i]]=[e[i],e[n]]}return e}function W3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=rr(),{isDark:l,toggleTheme:u,accent:d}=qr(),p=Ss(),[g,y]=_.useState("menu"),[x,k]=_.useState(["bodyweight"]),[j,L]=_.useState("core"),[H,B]=_.useState("intermediate"),[O,ee]=_.useState(15),[Q,oe]=_.useState([]),[be,Ve]=_.useState(!1),Ae=_.useRef(!1),I=_.useRef([]),[E,A]=_.useState([]),[P,D]=_.useState(2),[z,M]=_.useState(ml[1]),[ke,ht]=_.useState(1),[K,we]=_.useState(0),[Le,re]=_.useState("work"),[De,N]=_.useState(0),[V,ie]=_.useState(!1),[pe,Se]=_.useState(0),[Me,Qe]=_.useState(null),Fe=_.useRef(null);_.useRef(null),_.useRef(null);const[Ge,bt]=_.useState(null),nn=_.useCallback((W,he="info")=>{bt({message:W,type:he}),setTimeout(()=>bt(null),3e3)},[]),[wt,vt]=_.useState(null),[ne,ln]=_.useState(null),[Vt,_t]=_.useState(0),[At,ct]=_.useState(0),[Xe,Gt]=_.useState([]),[is,It]=_.useState(""),[zt,Bn]=_.useState(""),[Ht,wn]=_.useState(!1),[me,Te]=_.useState(0),[Re,st]=_.useState(!1),[Je,qe]=_.useState({}),et=_.useRef(null),Ke=_.useRef(null),[Ue,xe]=_.useState([]),[ze,lt]=_.useState(null),[Et,$t]=_.useState(0),[Ye,jt]=_.useState(0),[Ct,Dt]=_.useState(0),[Ft,Tt]=_.useState(0),[sn,Wt]=_.useState(0),[rn,un]=_.useState(0),[fn,Rn]=_.useState({beginner:0,intermediate:0,advanced:0}),[q,fe]=_.useState(null),[ge,ve]=_.useState(""),[de,We]=_.useState(!1);_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const he=dn(Ie,"workoutLogs"),ae=Vn(he,Tn("clientId","==",n.id)),Pe=(await Cn(ae)).docs.map(hn=>hn.data()),at=Pe.filter(hn=>hn.type!=="programme");Tt(at.length);const Rt=at.reduce((hn,Gn)=>hn+(Gn.duration||0),0);Wt(Rt);const it={beginner:0,intermediate:0,advanced:0};at.forEach(hn=>{hn.level&&it[hn.level]!==void 0&&it[hn.level]++}),Rn(it);const Qt=new Date,Un=Qt.getDay(),pn=Un===0?-6:1-Un,Pn=new Date(Qt);Pn.setDate(Qt.getDate()+pn),Pn.setHours(0,0,0,0);const Fa=Pn.getTime(),qi=Pe.filter(hn=>{const Gn=hn.completedAt;return Gn?(Gn.toDate?Gn.toDate().getTime():new Date(Gn).getTime())>=Fa:!1});$t(qi.filter(hn=>hn.type!=="programme").length);let qa=0;if(n)try{const hn=await Dn(nt(Ie,"clientProgrammes",n.id));if(hn.exists()){const Gn=hn.data(),Kn=Gn.templateId;qa=qi.filter(vs=>vs.type==="programme"&&vs.programmeId===Kn).length,fe(Kn);const _r=Ap.find(vs=>vs.id===Kn);_r&&ve(_r.name);const kr=z3[Kn];if(kr){const vs=Object.keys(Gn.completedSessions||{}).length,Cs=kr.duration*kr.daysPerWeek;Dt(Cs>0?Math.round(vs/Cs*100):0)}}else fe(null),ve(""),Dt(0)}catch{}jt(qa);const wr=at.map(hn=>hn.completedAt).filter(Boolean).map(hn=>hn.toDate?hn.toDate().getTime():new Date(hn).getTime()).sort((hn,Gn)=>Gn-hn);if(wr.length===0)un(0);else{const hn=new Set;wr.forEach(Cs=>{const Hr=new Date(Cs),Tr=Hr.getDay(),Ha=Tr===0?-6:1-Tr,Ps=new Date(Hr);Ps.setDate(Hr.getDate()+Ha),Ps.setHours(0,0,0,0),hn.add(Ps.getTime())});const Gn=[...hn].sort((Cs,Hr)=>Hr-Cs);let Kn=0;const _r=new Date(Qt),kr=Qt.getDay()===0?-6:1-Qt.getDay();_r.setDate(Qt.getDate()+kr),_r.setHours(0,0,0,0);let vs=_r.getTime();Gn.includes(vs)||(vs-=10080*60*1e3);for(let Cs=0;Cs<200&&Gn.includes(vs);Cs++)Kn++,vs-=10080*60*1e3;un(Kn)}}catch(he){console.error("Error loading workout stats:",he)}finally{We(!0)}})()},[s,n,g]);const mt=()=>{const W=[];let he;j==="mix"?he=["core","upper","lower"]:j==="fullbody"?he=["upper","lower"]:he=[j];for(const ae of x)for(const Ce of he)W.push(`exercises/${ae}/${Ce}`);return W},tt=async()=>{if(Ae.current){for(;Ae.current;)await new Promise(W=>setTimeout(W,200));return I.current}Ae.current=!0,Ve(!0);try{const W=mt(),he=[];for(const at of W)try{const Rt=_l(kl,at),it=await X2(Rt);he.push(...it.items)}catch{console.warn(`Folder ${at} not found, skipping.`)}if(he.length===0&&x.includes("bodyweight")&&j==="core")try{const at=_l(kl,"core"),Rt=await X2(at);he.push(...Rt.items)}catch{console.warn("Legacy core/ folder not found either.")}if(he.length===0){const at=x.map(it=>sx.find(Qt=>Qt.key===it)?.label).join(" + "),Rt=Ip.find(it=>it.key===j)?.label;return nn(`No exercises found for ${at} / ${Rt}. Upload videos to Firebase Storage.`,"error"),Ae.current=!1,Ve(!1),[]}const ae=new Set,Ce=he.filter(at=>{const Rt=at.name.replace(/\.(mp4|gif)$/i,"");return ae.has(Rt)?!1:(ae.add(Rt),!0)}),Pe=await Promise.all(Ce.map(async at=>{const Rt=await Zc(at),it=H3(at.name.replace(/\.(mp4|gif)$/i,"")),Qt=/\.gif$/i.test(at.name);return{name:it,videoUrl:Rt,isGif:Qt}}));return I.current=Pe,oe(Pe),Ae.current=!1,Ve(!1),Pe}catch(W){console.error("Error loading exercises:",W);const he=W.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${W.message||W.code||"Unknown error"}`;return nn(he,"error"),Ae.current=!1,Ve(!1),[]}},dt=async()=>{y("spinning"),I.current=[];const W=await tt();if(W.length===0){y("setup");return}const he=ml.find(Un=>Un.key===H);M(he);const ae=he.work+he.rest,Ce=O*60,Pe=Math.floor(Ce/ae);let at,Rt;Pe<=6?(at=Math.max(3,Math.floor(Pe/2)),Rt=Math.floor(Pe/at)):Pe<=12?(at=Math.min(6,Math.floor(Pe/2)),Rt=Math.floor(Pe/at)):(at=Math.min(10,Math.floor(Pe/2)),Rt=Math.floor(Pe/at)),Rt=Math.max(2,Rt);const it=$3(W),Qt=it.slice(0,Math.min(at,it.length));A(Qt),D(Rt),setTimeout(()=>y("preview"),2e3)},pt=()=>{y("countdown"),Se(3)};_.useEffect(()=>{if(g!=="countdown")return;if(pe<=0){y("workout"),ht(1),we(0),re("work"),N(z.work),ie(!1),Be();return}He();const W=setTimeout(()=>Se(he=>he-1),1e3);return()=>clearTimeout(W)},[pe,g]),_.useEffect(()=>{if(g!=="workout"||V)return;if(De<=0){an();return}De<=3&&He();const W=setTimeout(()=>N(he=>he-1),1e3);return()=>clearTimeout(W)},[De,g,V]);const an=()=>{if(Le==="work")re("rest"),N(z.rest);else{const W=K+1;if(W>=E.length){const he=ke+1;if(he>P){y("complete"),Ns();return}ht(he),we(0)}else we(W);re("work"),N(z.work),Be()}},Ns=async()=>{if(s)try{await fu(dn(Ie,"workoutLogs"),{clientId:n.id,level:H,duration:O,equipment:x,focus:j,exerciseCount:E.length,rounds:P,exercises:E.map(W=>W.name),completedAt:ft.now()}),$t(W=>W+1),Tt(W=>W+1),Wt(W=>W+O),Rn(W=>({...W,[H]:(W[H]||0)+1}))}catch(W){console.error("Error saving workout log:",W)}},Wn=async(W,he,ae)=>{if(!(!n||!he))try{const Ce=n.id,Pe=await Dn(nt(Ie,"coreBuddyPBs",Ce)),Rt=(Pe.exists()?Pe.data():null)?.exercises||{},it=Rt[W];let Qt=!1;if(it?(he>(it.weight||0)||he===(it.weight||0)&&ae>(it.reps||0))&&(Qt=!0):Qt=!0,Qt){const Un={...Rt,[W]:{weight:he,reps:ae,achievedAt:ft.now()}};await In(nt(Ie,"coreBuddyPBs",Ce),{clientId:n.id,exercises:Un,updatedAt:ft.now()}),nn(`New PB! ${he}kg  ${ae} reps`,"success"),He(),await Qn(W,he)}}catch(Ce){console.error("Error checking PB:",Ce)}},Qn=async(W,he)=>{if(n)try{const ae=await Dn(nt(Ie,"coreBuddyTargets",n.id));if(!ae.exists())return;const Pe=(ae.data().targets||{})[W];if(!Pe||he<Pe.targetWeight)return;const at=await Dn(nt(Ie,"coreBuddyAchievements",n.id)),Rt=at.exists()?at.data():{clientId:n.id,badges:[],totalVolume:0};if(Rt.badges.some(pn=>pn.type==="pb_target"&&pn.exercise===W&&pn.targetWeight===Pe.targetWeight))return;const Qt={type:"pb_target",exercise:W,group:U3[W]||"push",targetWeight:Pe.targetWeight,achievedAt:ft.now()},Un=[...Rt.badges,Qt];await In(nt(Ie,"coreBuddyAchievements",n.id),{...Rt,badges:Un,updatedAt:ft.now()}),xe(pn=>[...pn,Qt])}catch(ae){console.error("Error checking target badge:",ae)}},mn=async W=>{if(!(!n||W<=0))try{const he=await Dn(nt(Ie,"coreBuddyAchievements",n.id)),ae=he.exists()?he.data():{clientId:n.id,badges:[],totalVolume:0},Ce=ae.totalVolume||0,Pe=Ce+W,at=[];B3.forEach(it=>{Pe>=it.threshold&&Ce<it.threshold&&(ae.badges.some(Un=>Un.type==="volume_milestone"&&Un.milestone===it.threshold)||at.push({type:"volume_milestone",milestone:it.threshold,label:it.label,achievedAt:ft.now()}))});const Rt=[...ae.badges,...at];await In(nt(Ie,"coreBuddyAchievements",n.id),{clientId:n.id,badges:Rt,totalVolume:Math.round(Pe),updatedAt:ft.now()}),at.length>0&&xe(it=>[...it,...at])}catch(he){console.error("Error updating volume:",he)}},F=async W=>{if(ln(W),W.interval){const Ce=[];for(const Pe of W.exercises){let at=null,Rt=!1;if(Pe.storagePath)try{const it=_l(kl,Pe.storagePath);at=await Zc(it),Rt=/\.gif$/i.test(Pe.storagePath)}catch{}Ce.push({name:Pe.name,videoUrl:at,isGif:Rt})}A(Ce),D(W.rounds),M({work:W.work,rest:W.rest}),y("preview");return}const he={};for(const Ce of W.exercises)if(Ce.storagePath)try{const Pe=_l(kl,Ce.storagePath);he[Ce.name]={url:await Zc(Pe),isGif:/\.gif$/i.test(Ce.storagePath)}}catch{}qe(he);const ae=W.exercises.map(Ce=>({name:Ce.name,type:Ce.type,targetSets:Ce.sets,targetReps:Ce.reps||0,targetTime:Ce.time||0,sets:[]}));Gt(ae),_t(0),ct(0),It(""),Bn(""),st(!1),wn(!1),Te(0),xe([]),lt(null),y("muscle_workout")},ce=()=>{const W=et.current;W&&(W.paused?(W.play(),st(!0)):(W.pause(),st(!1)))};_.useEffect(()=>{if(g!=="muscle_workout"||!Ht||me<=0){g==="muscle_workout"&&Ht&&me<=0&&(wn(!1),He());return}return Ke.current=setTimeout(()=>Te(W=>W-1),1e3),()=>clearTimeout(Ke.current)},[g,Ht,me]);const T=async()=>{const W=Xe[Vt];let he={};if(W.type==="weighted"){const Pe=parseFloat(is)||0,at=parseInt(zt)||0;if(at===0){nn("Enter your reps","error");return}he={weight:Pe,reps:at}}else if(W.type==="reps"){const Pe=parseInt(zt)||0;if(Pe===0){nn("Enter your reps","error");return}he={reps:Pe}}else if(W.type==="timed"){const Pe=W.targetTime-me;he={time:Math.max(Pe,1)}}const ae=[...Xe];ae[Vt]={...W,sets:[...W.sets,he]},Gt(ae),W.type==="weighted"&&he.weight>0&&await Wn(W.name,he.weight,he.reps);const Ce=W.sets.length+1;if(Ce<W.targetSets)ct(Ce),Bn(""),wn(!1),Te(0);else if(Vt+1<Xe.length){const Pe=Vt+1;_t(Pe),ct(0),It(""),Bn(""),st(!1),wn(!1),Te(0)}else await R(ae),y("muscle_complete")},R=async W=>{if(!(!s||!n))try{const he=W.reduce((Ce,Pe)=>Ce+Pe.sets.reduce((at,Rt)=>at+(Rt.weight||0)*(Rt.reps||0),0),0),ae=W.reduce((Ce,Pe)=>Ce+Pe.sets.length,0);await fu(dn(Ie,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:wt,sessionId:ne?.id,sessionName:ne?.name,exerciseCount:W.length,totalSets:ae,duration:Math.round(ae*1.5),volume:Math.round(he),exercises:W.map(Ce=>({name:Ce.name,type:Ce.type,sets:Ce.sets})),completedAt:ft.now()}),he>0&&await mn(he),Ue.length>0&&lt({badges:[...Ue]})}catch(he){console.error("Error saving muscle group workout log:",he)}},G=_.useRef(null),J=()=>(G.current||(G.current=new(window.AudioContext||window.webkitAudioContext)),G.current),He=()=>{try{const W=J(),he=W.createOscillator(),ae=W.createGain();he.connect(ae),ae.connect(W.destination),he.frequency.value=880,ae.gain.value=.3,he.start(W.currentTime),he.stop(W.currentTime+.15)}catch{}},Be=()=>{try{const W=J(),he=W.createOscillator(),ae=W.createGain();he.connect(ae),ae.connect(W.destination),he.frequency.value=1200,ae.gain.value=.4,he.start(W.currentTime),he.stop(W.currentTime+.3)}catch{}};_.useEffect(()=>{if(g!=="workout"||Le!=="work"||!E[K]?.isGif)return;const he=setInterval(()=>{const ae=Fe.current;if(!ae)return;const Ce=ae.getAttribute("src");ae.removeAttribute("src"),setTimeout(()=>{Fe.current&&Fe.current.setAttribute("src",Ce)},0)},4e3);return()=>clearInterval(he)},[g,Le,K,ke,E]);const Oe=(W,he,ae)=>{const Ce=Math.round(W/he*tx);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:S3.map((Pe,at)=>a.jsx("line",{x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,className:at<Ce?`wk-tick-filled ${ae}`:"wk-tick-empty",strokeWidth:Pe.thick?"3":"2"},at))})},Ot=()=>{const W=E.length*P;return((ke-1)*E.length+K+(Le==="rest"?.5:0))/W},xt=Ge&&a.jsx("div",{className:`toast-notification ${Ge.type}`,children:Ge.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:a.jsx("img",{src:ex,alt:"Randomise Workout",className:"wk-hero-bg"})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[Ap.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:Ap.map((W,he)=>W.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:W.id}}),style:{animationDelay:`${he*.06}s`},children:[a.jsx("img",{src:W.image,alt:W.name,className:"wk-prog-img"}),he===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},W.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:W.id}}),style:{animationDelay:`${he*.06}s`},children:[a.jsx("img",{src:L3,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:F3[W.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[W.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:W.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:W.name.toUpperCase()}),a.jsxs("p",{children:[W.daysPerWeek,"x per week  ",W.focus==="fullbody"?"Full Body":W.focus.charAt(0).toUpperCase()+W.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),he===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},W.id))})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[Bc.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:Bc.map((W,he)=>a.jsx("button",{className:`wk-muscle-hero-card${W.image?" wk-muscle-thumb":""}`,onClick:()=>{vt(W.key),y("muscle_sessions")},style:{animationDelay:`${he*.05}s`},children:W.image?a.jsx("img",{src:W.image,alt:W.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:ex,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:Rp[W.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:W.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:W.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[nx[W.key]?.length||0," sessions"]})]})]})]})},W.key))})]}),a.jsx(Ur,{active:"workouts"}),xt]});if(g==="setup"){const W=Ip.find(ae=>ae.key===j)?.label||j,he=ml.find(ae=>ae.key===H)?.label||H;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsxs("div",{className:"wk-stats-strip",children:[a.jsxs("div",{className:"wk-stats-strip-ring",children:[a.jsx("svg",{viewBox:"0 0 200 200",children:yo.map((ae,Ce)=>{const Pe=Math.round(Math.min(Et,Cp)/Cp*tx);return a.jsx("line",{x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,className:Ce<Pe?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:ae.thick?"3":"2"},Ce)})}),a.jsxs("span",{className:"wk-stats-strip-ring-num",children:[Et,a.jsxs("small",{children:["/",Cp]})]})]}),a.jsxs("div",{className:"wk-stats-strip-items",children:[a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:Ft}),a.jsx("span",{className:"wk-stats-strip-label",children:"Workouts"})]}),a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:sn}),a.jsx("span",{className:"wk-stats-strip-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stats-strip-item",children:[a.jsx("span",{className:"wk-stats-strip-num",children:rn}),a.jsx("span",{className:"wk-stats-strip-label",children:"Wk Streak"})]})]})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:Ip.map(ae=>a.jsxs("button",{className:`wk-equip-btn${j===ae.key?" active":""}${ae.key==="mix"?" wk-mix-btn":""}`,onClick:()=>L(ae.key),children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:ae.icon})}),a.jsx("span",{children:ae.label})]},ae.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:ml.map(ae=>a.jsxs("button",{className:`wk-level-card wk-level-${ae.key}${H===ae.key?" active":""}`,onClick:()=>B(ae.key),children:[a.jsx("span",{className:"wk-level-name",children:ae.label}),a.jsx("span",{className:"wk-level-desc",children:ae.desc})]},ae.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:q3.map(ae=>a.jsxs("button",{className:`wk-time-btn${O===ae?" active":""}`,onClick:()=>ee(ae),children:[a.jsx("span",{className:"wk-time-num",children:ae}),a.jsx("span",{className:"wk-time-unit",children:"min"})]},ae))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:sx.map(ae=>{const Ce=x.includes(ae.key);return a.jsxs("button",{className:`wk-equip-btn${Ce?" active":""}`,onClick:()=>{k(Pe=>Ce&&Pe.length===1?Pe:Ce?Pe.filter(at=>at!==ae.key):[...Pe,ae.key])},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:ae.icon})}),a.jsx("span",{children:ae.label})]},ae.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[W,"  ",he,"  ",O," min"]})})]}),a.jsx("div",{className:"wk-go-sticky",children:a.jsx("button",{className:"wk-randomise-btn",onClick:dt,disabled:be,children:be?"Loading exercises...":"Randomise Workout"})}),xt]})}if(g==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:yo.map((W,he)=>a.jsx("line",{x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,className:"wk-spin-tick",strokeWidth:W.thick?"3.5":"2",style:{animationDelay:`${he*.03}s`}},he))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),xt]});if(g==="preview"){const W=ne?.interval?{work:ne.work,rest:ne.rest}:ml.find(ae=>ae.key===H),he=E.length*P*(W.work+W.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y(ne?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[ne?.interval&&a.jsx("h2",{className:"mg-preview-title",children:ne.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:E.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:P}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(he/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[W.work,"/",W.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:E.map((ae,Ce)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${Ce*.06}s`},onClick:()=>Qe(ae),children:[a.jsx("span",{className:"wk-preview-num",children:Ce+1}),a.jsx("div",{className:"wk-preview-thumb",children:ae.isGif?a.jsx("img",{src:ae.videoUrl,alt:ae.name,loading:"lazy"}):a.jsx("video",{src:`${ae.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:ae.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},Ce))}),Me&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>Qe(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:ae=>ae.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>Qe(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Me.isGif?a.jsx("img",{src:Me.videoUrl,alt:Me.name}):a.jsx("video",{src:Me.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Me.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!ne?.interval&&a.jsxs("button",{className:"wk-btn-secondary",onClick:()=>dt(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),a.jsx("button",{className:"wk-btn-primary",onClick:pt,children:"Start Workout"})]})]})]})}if(g==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":d,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:pe}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const W=E[K],he=Le==="work"?z.work:z.rest,ae=Le==="rest"?K+1<E.length?E[K+1]:ke<P?E[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"wk-video-container",children:Le==="work"?W.isGif?a.jsx("img",{ref:Fe,className:"wk-video",src:W.videoUrl,alt:W.name},W.videoUrl):a.jsx("video",{className:"wk-video",src:W.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},W.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),ae&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",ae.name]})]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[K+1," / ",E.length]}),a.jsx("h2",{className:"wk-exercise-name",children:W.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",ke," of ",P]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[Oe(De,he,Le==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:De}),a.jsx("span",{className:`wk-timer-phase ${Le}`,children:Le==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>ie(!V),children:V?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{N(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${Ot()*100}%`}})})]})}if(g==="complete"){const W=ml.find(ae=>ae.key===H),he=E.length*P*(W.work+W.rest);return a.jsx("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:yo.map((ae,Ce)=>a.jsx("line",{x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,className:"wk-tick-complete",strokeWidth:ae.thick?"3.5":"2",style:{animationDelay:`${Ce*.02}s`}},Ce))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(he/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:E.length*P}),a.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:P}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{ln(null),vt(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const W=Bc.find(ae=>ae.key===wt),he=nx[wt]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:Rp[wt]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:W?.icon})})}),a.jsxs("h2",{children:[W?.label," Workouts"]}),a.jsxs("p",{children:[he.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:he.map((ae,Ce)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{ln(ae),y("muscle_overview")},style:{animationDelay:`${Ce*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:ae.name}),a.jsx("p",{children:ae.desc}),a.jsx("div",{className:"mg-session-meta",children:ae.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[ae.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[ae.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[ae.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const Pe=ae.exercises.map(it=>it.sets||0),at=Math.min(...Pe),Rt=Math.max(...Pe);return at===Rt?`${at} sets each`:`${at}-${Rt} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},ae.id))})]}),xt]})}if(g==="muscle_overview"){const W=ne;if(!W)return null;const he=Bc.find(ae=>ae.key===wt);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:{background:Rp[wt]},children:a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:he?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:W.name}),W.level&&a.jsx("span",{className:"mg-overview-level",children:W.level})]}),a.jsx("p",{className:"mg-overview-desc",children:W.desc})]}),W.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:W.overview})]}),W.tips&&W.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:W.tips.map((ae,Ce)=>a.jsx("li",{children:ae},Ce))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",W.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:W.exercises.map((ae,Ce)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:Ce+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:ae.name}),W.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[W.work,"s work / ",W.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[ae.sets," sets  ",ae.reps?`${ae.reps} reps`:`${ae.time}s`,ae.type==="weighted"&&"  weighted"]})]})]},Ce))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>F(W),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),xt]})}if(g==="muscle_workout"){const W=ne;if(!W)return null;const he=W.exercises[Vt],ae=Xe[Vt];if(!he||!ae)return null;const Ce=ae.sets.length,Pe=W.exercises.length,at=W.exercises.reduce((pn,Pn)=>pn+(Pn.sets||0),0),it=Xe.reduce((pn,Pn)=>pn+Pn.sets.length,0)/at*100,Qt=Je[he.name];he.type==="timed"&&me===0&&!Ht&&Ce===At&&setTimeout(()=>Te(he.time),0);const Un=Ce+1<he.sets?"Log Set":Vt+1<Pe?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${it}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",Vt+1,"/",Pe]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[Qt?a.jsxs("div",{className:"mg-video-container",onClick:ce,children:[Qt.isGif?a.jsx("img",{className:"mg-video",src:Qt.url,alt:he.name}):a.jsx("video",{ref:et,className:"mg-video",src:Qt.url,loop:!0,muted:!0,playsInline:!0},he.name),!Re&&!Qt.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:he.name}),a.jsx("span",{className:`mg-ex-type-badge ${he.type}`,children:he.type==="weighted"?"Weight + Reps":he.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",Ce+1," of ",he.sets]}),he.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",he.reps," reps"]}),he.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",he.time,"s"]})]}),he.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:is,onChange:pn=>It(pn.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:zt,onChange:pn=>Bn(pn.target.value),placeholder:"0"})]})]}),he.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:zt,onChange:pn=>Bn(pn.target.value),placeholder:"0"})]})}),he.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[me,"s"]})}),Ht?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>wn(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{me===0&&Te(he.time),wn(!0)},children:me<he.time&&me>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:T,children:Un}),ae.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:ae.sets.map((pn,Pn)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",Pn+1,": ",pn.weight!=null?`${pn.weight}kg  ${pn.reps}`:pn.reps!=null?`${pn.reps} reps`:`${pn.time}s`]})]},Pn))})]})]}),xt]})}if(g==="muscle_complete"){const W=Xe.reduce((Ce,Pe)=>Ce+Pe.sets.length,0),he=Xe.reduce((Ce,Pe)=>Ce+Pe.sets.reduce((at,Rt)=>at+(Rt.weight||0)*(Rt.reps||0),0),0),ae=Bc.find(Ce=>Ce.key===wt)?.label||"";return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:yo.map((Ce,Pe)=>a.jsx("line",{x1:Ce.x1,y1:Ce.y1,x2:Ce.x2,y2:Ce.y2,className:"wk-tick-complete",strokeWidth:Ce.thick?"3.5":"2",style:{animationDelay:`${Pe*.02}s`}},Pe))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsxs("h2",{className:"wk-complete-title",children:[ae," Complete!"]}),a.jsx("p",{className:"mg-complete-session-name",children:ne?.name}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Xe.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:W}),a.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),he>0&&a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.round(he).toLocaleString()}),a.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{ln(null),vt(null),lt(null),y("menu")},children:"Done"})})]}),ze&&a.jsx("div",{className:"mg-badge-celebration",onClick:()=>lt(null),children:a.jsxs("div",{className:"mg-badge-celebration-card",children:[a.jsx("div",{className:"mg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:a.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),a.jsx("h3",{className:"mg-badge-celebration-title",children:ze.badges.length===1?"Badge Earned!":`${ze.badges.length} Badges Earned!`}),a.jsx("div",{className:"mg-badge-celebration-list",children:ze.badges.map((Ce,Pe)=>a.jsx("div",{className:"mg-badge-celebration-item",children:Ce.type==="pb_target"?`${Ce.exercise}  ${Ce.targetWeight}kg`:Ce.label},Pe))}),a.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const G3=60,K3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},Y3=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],rx=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function Zh(s,e,n){const i=s.baseReps?s.baseReps+(e-1)*(n.repProg||0):void 0,l=s.baseTime?s.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:s.sets,reps:i,time:l}}const Q3={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function X3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=rr(),{isDark:l,toggleTheme:u,accent:d}=qr(),p=Ss(),g=Fr(),[y,x]=_.useState("loading"),[k,j]=_.useState(null),L=_.useRef(!1),[H,B]=_.useState(null),[O,ee]=_.useState(1),[Q,oe]=_.useState(0),[be,Ve]=_.useState(0),[Ae,I]=_.useState(0),[E,A]=_.useState([]),[P,D]=_.useState(""),[z,M]=_.useState(""),[ke,ht]=_.useState(!1),[K,we]=_.useState(0),Le=_.useRef(null),[re,De]=_.useState({}),[N,V]=_.useState(!1),ie=_.useRef(null),[pe,Se]=_.useState(null),[Me,Qe]=_.useState([]);_.useEffect(()=>{window.scrollTo(0,0)},[y]);const[Fe,Ge]=_.useState(null),bt=_.useCallback((me,Te="info")=>{Ge({message:me,type:Te}),setTimeout(()=>Ge(null),4e3)},[]),nn=_.useRef(null),wt=()=>(nn.current||(nn.current=new(window.AudioContext||window.webkitAudioContext)),nn.current),vt=()=>{try{const me=wt(),Te=me.createOscillator(),Re=me.createGain();Te.connect(Re),Re.connect(me.destination),Te.frequency.value=1200,Re.gain.value=.4,Te.start(me.currentTime),Te.stop(me.currentTime+.3)}catch{}};_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const Te=nt(Ie,"clientProgrammes",n.id),Re=await Dn(Te);Re.exists()?(B(Re.data()),x("dashboard")):g.state?.templateId?x("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(Te){console.error("Error loading programme:",Te),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),_.useEffect(()=>{if(L.current||y==="loading")return;const me=g.state?.templateId;if(!me)return;const Te=rx.find(Re=>Re.id===me);Te&&(L.current=!0,j(Te),x("overview"))},[y,g.state]),_.useEffect(()=>{if(!ke||K<=0){ke&&K<=0&&(ht(!1),vt());return}return Le.current=setTimeout(()=>we(me=>me-1),1e3),()=>clearTimeout(Le.current)},[ke,K]);const ne=async me=>{if(n)try{await In(nt(Ie,"clientProgrammes",n.id),me),B(me)}catch(Te){console.error("Error saving programme:",Te),bt("Failed to save. Check Firestore rules for clientProgrammes.","error")}},ln=async me=>{const Te={templateId:me.id,startDate:ft.now(),completedSessions:{}};await ne(Te),x("dashboard")},Vt=async()=>{if(n)try{await yr(nt(Ie,"clientProgrammes",n.id)),B(null),x("browse")}catch(me){console.error("Error quitting programme:",me)}},_t=()=>H?rx.find(me=>me.id===H.templateId):null,At=()=>{if(!H)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const me=H.completedSessions||{},Te=Object.keys(me).length,Re=_t();if(!Re)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const st=Re.duration*Re.daysPerWeek,Je=Math.min(Math.floor(Te/Re.daysPerWeek)+1,Re.duration),qe=Te-(Je-1)*Re.daysPerWeek;for(let et=1;et<=Re.duration;et++)for(let Ke=0;Ke<Re.daysPerWeek;Ke++){const Ue=`w${et}d${Ke}`;if(!me[Ue])return{currentWeek:et,completedThisWeek:qe,nextDay:Ke,nextWeek:et,totalCompleted:Te,totalSessions:st}}return{currentWeek:Re.duration,completedThisWeek:Re.daysPerWeek,nextDay:-1,totalCompleted:Te,totalSessions:st,complete:!0}},ct=(me,Te,Re)=>{if(!H||me<=1)return null;const st=`w${me-1}d${Te}`,Je=H.completedSessions?.[st];if(!Je)return null;const qe=Je.exercises?.find(et=>et.name===Re);return qe?.sets?.length?qe.sets[qe.sets.length-1]:null},Xe=(me,Te)=>{const Re=_t();if(!Re)return;ee(me),oe(Te),Ve(0),I(0),A([]),M(""),ht(!1),we(0),V(!1),De({});const st=Re.days[Te],Je=st.exercises.map(Ue=>{const xe=Zh(Ue,me,Re);return{name:Ue.name,type:Ue.type,pbKey:Ue.pbKey,targetSets:xe.sets,targetReps:xe.reps,targetTime:xe.time,sets:[]}});A(Je);const qe=st.exercises[0],et=ct(me,Te,qe.name);et?.weight&&qe.type==="weighted"?D(String(et.weight)):D(""),(async()=>{const Ue={};for(const xe of st.exercises)if(xe.storagePath)try{const ze=_l(kl,xe.storagePath),lt=await Zc(ze);Ue[xe.name]={url:lt,isGif:/\.gif$/i.test(xe.storagePath)}}catch(ze){console.warn(`Video not found for ${xe.name}:`,ze)}De(Ue)})(),x("session")},Gt=async()=>{_t();const me=E[be];if(!me)return;let Te={};if(me.type==="weighted"){const Je=parseFloat(P)||0,qe=parseInt(z)||0;if(qe===0){bt("Enter your reps","error");return}Te={weight:Je,reps:qe}}else if(me.type==="reps"){const Je=parseInt(z)||0;if(Je===0){bt("Enter your reps","error");return}Te={reps:Je}}else if(me.type==="timed"){const Je=me.targetTime-K;Te={time:Math.max(Je,1)}}const Re=[...E];Re[be]={...me,sets:[...me.sets,Te]},A(Re),me.type==="weighted"&&Te.weight>0&&await zt(me.name,Te.weight,Te.reps);const st=me.sets.length+1;if(st<me.targetSets)I(st),D(Te.weight?String(Te.weight):""),M(""),ht(!1),we(0);else if(be+1<E.length){const Je=be+1;Ve(Je),I(0),V(!1);const et=_t()?.days[Q]?.exercises[Je],Ke=ct(O,Q,et?.name);Ke?.weight&&et?.type==="weighted"?D(String(Ke.weight)):D(""),M(""),ht(!1),we(0)}else await is(Re)},is=async me=>{if(!H||!n)return;const Te=`w${O}d${Q}`,Re={...H.completedSessions,[Te]:{completedAt:new Date().toISOString(),exercises:me.map(qe=>({name:qe.name,type:qe.type,sets:qe.sets}))}},st={...H,completedSessions:Re};await ne(st);const Je=me.reduce((qe,et)=>qe+et.sets.reduce((Ke,Ue)=>Ke+(Ue.weight||0)*(Ue.reps||0),0),0);Je>0&&await It(Je);try{const qe=_t();await fu(dn(Ie,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:qe?.id,programmeName:qe?.name,week:O,day:Q+1,exerciseCount:me.length,duration:Math.round(me.reduce((et,Ke)=>et+Ke.sets.length*1.5,0)),volume:Math.round(Je),completedAt:ft.now()})}catch(qe){console.error("Error saving workout log:",qe)}Me.length>0&&(Se({badges:[...Me]}),Qe([])),x("sessionComplete")},It=async me=>{if(n)try{const Te=await Dn(nt(Ie,"coreBuddyAchievements",n.id)),Re=Te.exists()?Te.data():{clientId:n.id,badges:[],totalVolume:0},st=Re.totalVolume||0,Je=st+me,qe=[];Y3.forEach(Ke=>{Je>=Ke.threshold&&st<Ke.threshold&&(Re.badges.some(xe=>xe.type==="volume_milestone"&&xe.milestone===Ke.threshold)||qe.push({type:"volume_milestone",milestone:Ke.threshold,label:Ke.label,achievedAt:ft.now()}))});const et=[...Re.badges,...qe];await In(nt(Ie,"coreBuddyAchievements",n.id),{clientId:n.id,badges:et,totalVolume:Math.round(Je),updatedAt:ft.now()}),qe.length>0&&Qe(Ke=>[...Ke,...qe])}catch(Te){console.error("Error updating volume:",Te)}},zt=async(me,Te,Re)=>{if(n)try{const st=n.id,Je=await Dn(nt(Ie,"coreBuddyPBs",st)),et=(Je.exists()?Je.data():null)?.exercises||{},Ke=et[me];let Ue=!1;if(Ke?(Te>(Ke.weight||0)||Te===(Ke.weight||0)&&Re>(Ke.reps||0))&&(Ue=!0):Ue=!0,Ue){const xe={...et,[me]:{weight:Te,reps:Re,achievedAt:ft.now()}};await In(nt(Ie,"coreBuddyPBs",st),{clientId:n.id,exercises:xe,updatedAt:ft.now()}),bt(`New PB! ${Te}kg  ${Re} reps`,"success"),vt(),await Bn(me,Te)}}catch(st){console.error("Error checking PB:",st)}},Bn=async(me,Te)=>{if(n)try{const Re=await Dn(nt(Ie,"coreBuddyTargets",n.id));if(!Re.exists())return;const Je=(Re.data().targets||{})[me];if(!Je||Te<Je.targetWeight)return;const qe=await Dn(nt(Ie,"coreBuddyAchievements",n.id)),et=qe.exists()?qe.data():{clientId:n.id,badges:[],totalVolume:0};if(et.badges.some(ze=>ze.type==="pb_target"&&ze.exercise===me&&ze.targetWeight===Je.targetWeight))return;const Ue={type:"pb_target",exercise:me,group:K3[me]||"push",targetWeight:Je.targetWeight,achievedAt:ft.now()},xe=[...et.badges,Ue];await In(nt(Ie,"coreBuddyAchievements",n.id),{...et,badges:xe,updatedAt:ft.now()}),Qe(ze=>[...ze,Ue])}catch(Re){console.error("Error checking target badge:",Re)}},Ht=Fe&&a.jsxs("div",{className:`toast-notification ${Fe.type}`,children:[Fe.type==="success"&&a.jsx("span",{children:" "}),Fe.message]}),wn=(me,Te)=>a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:Te,"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(i||y==="loading")return a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&k){const me=k;return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":d,children:[wn(me.name,()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-overview-hero",children:[a.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:Q3[me.focus]})}),a.jsx("h2",{className:"pg-overview-name",children:me.name}),a.jsx("p",{className:"pg-overview-desc",children:me.description}),a.jsxs("div",{className:"pg-overview-stats",children:[a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:me.duration}),a.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:me.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:me.duration*me.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),a.jsx("div",{className:"pg-overview-days",children:me.days.map((Te,Re)=>a.jsxs("div",{className:"pg-day-card",children:[a.jsxs("div",{className:"pg-day-header",children:[a.jsx("span",{className:"pg-day-name",children:Te.name}),a.jsx("span",{className:"pg-day-label",children:Te.label})]}),a.jsx("div",{className:"pg-day-exercises",children:Te.exercises.map((st,Je)=>{const qe=Zh(st,1,me);return a.jsxs("div",{className:"pg-day-ex",children:[a.jsx("span",{className:"pg-day-ex-name",children:st.name}),a.jsx("span",{className:"pg-day-ex-target",children:st.type==="timed"?`${qe.sets}${qe.time}s`:`${qe.sets}${qe.reps}`}),a.jsx("span",{className:`pg-day-ex-badge pg-badge-${st.type}`,children:st.type==="weighted"?"WT":st.type==="timed"?"TMR":"BW"})]},Je)})})]},Re))}),a.jsxs("div",{className:"pg-overview-note",children:[a.jsx("strong",{children:"Progressive Overload:"})," +",me.repProg," reps/week",me.timeProg?`, +${me.timeProg}s/week for timed`:""]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>ln(me),children:"Start Programme"})]}),Ht]})}if(y==="dashboard"){const me=_t();if(!me)return x("browse"),null;const Te=At(),Re=H?.completedSessions||{},st=Te.totalSessions?Math.round(Te.totalCompleted/Te.totalSessions*100):0,Je=Math.round(Te.totalCompleted/(Te.totalSessions||1)*G3);return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":d,children:[wn("Programme",()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-dash-hero",children:[a.jsxs("div",{className:"pg-dash-ring-wrap",children:[a.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:yo.map((qe,et)=>a.jsx("line",{x1:qe.x1,y1:qe.y1,x2:qe.x2,y2:qe.y2,className:et<Je?"pg-tick-filled":"pg-tick-empty",strokeWidth:qe.thick?"3":"2"},et))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"pg-dash-ring-logo",width:"50",height:"50"})]}),a.jsx("h2",{className:"pg-dash-name",children:me.name}),a.jsxs("div",{className:"pg-dash-progress-text",children:[a.jsxs("span",{className:"pg-dash-pct",children:[st,"%"]}),a.jsxs("span",{className:"pg-dash-week",children:["Week ",Te.currentWeek," of ",me.duration]})]})]}),a.jsx("div",{className:"pg-weeks",children:Array.from({length:me.duration},(qe,et)=>{const Ke=et+1;return a.jsxs("div",{className:`pg-week-row${Ke===Te.currentWeek?" pg-week-current":""}`,children:[a.jsxs("span",{className:"pg-week-label",children:["W",Ke]}),a.jsx("div",{className:"pg-week-days",children:me.days.map((Ue,xe)=>{const ze=`w${Ke}d${xe}`,lt=!!Re[ze],Et=!Te.complete&&Ke===Te.nextWeek&&xe===Te.nextDay;return a.jsx("button",{className:`pg-day-dot${lt?" done":""}${Et?" next":""}`,disabled:lt,onClick:()=>{Et&&Xe(Ke,xe)},children:lt?a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}):a.jsx("span",{children:Ue.name.replace("Day ","")})},xe)})})]},et)})}),!Te.complete&&Te.nextDay>=0&&a.jsxs("div",{className:"pg-next-session",children:[a.jsx("h3",{children:"Next Session"}),a.jsxs("p",{className:"pg-next-info",children:["Week ",Te.nextWeek,"  ",me.days[Te.nextDay].name,": ",me.days[Te.nextDay].label]}),a.jsx("div",{className:"pg-next-exercises",children:me.days[Te.nextDay].exercises.map((qe,et)=>{const Ke=Zh(qe,Te.nextWeek,me);return a.jsxs("div",{className:"pg-next-ex",children:[a.jsx("span",{className:"pg-next-ex-name",children:qe.name}),a.jsx("span",{className:"pg-next-ex-target",children:qe.type==="timed"?`${Ke.sets}${Ke.time}s`:`${Ke.sets}${Ke.reps}`})]},et)})}),a.jsx("button",{className:"pg-start-btn",onClick:()=>Xe(Te.nextWeek,Te.nextDay),children:"Start Session"})]}),Te.complete&&a.jsxs("div",{className:"pg-complete-msg",children:[a.jsx("h3",{children:"Programme Complete! "}),a.jsxs("p",{children:["You finished all ",Te.totalSessions," sessions."]}),a.jsx("button",{className:"pg-start-btn",onClick:Vt,children:"Choose New Programme"})]}),a.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&Vt()},children:"Quit Programme"})]}),a.jsx(Ur,{active:"workouts"}),Ht]})}if(y==="session"){const me=_t();if(!me)return null;const Te=me.days[Q],Re=Te.exercises[be],st=Zh(Re,O,me),Je=E[be],qe=Je?.sets?.length||0,et=Te.exercises.length,Ke=(be+qe/st.sets)/et,Ue=re[Re.name],xe=ct(O,Q,Re.name);Re.type==="timed"&&K===0&&!ke&&qe===Ae&&setTimeout(()=>we(st.time),0);const ze=()=>{Ue?.isGif?V(!N):ie.current&&(N?ie.current.pause():ie.current.play(),V(!N))};return a.jsxs("div",{className:"pg-page pg-page-session","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"pg-session-progress",children:a.jsx("div",{className:"pg-session-progress-fill",style:{width:`${Ke*100}%`}})}),a.jsxs("div",{className:"pg-session-header",children:[a.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&x("dashboard")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),a.jsxs("div",{className:"pg-session-title",children:[a.jsxs("span",{className:"pg-session-counter",children:[be+1," / ",et]}),a.jsxs("span",{className:"pg-session-week",children:["Week ",O,"  ",Te.name]})]})]}),Ue&&a.jsxs("div",{className:"pg-video-container",onClick:ze,children:[Ue.isGif?a.jsx("img",{className:"pg-video",src:Ue.url,alt:Re.name}):a.jsx("video",{ref:ie,className:"pg-video",src:Ue.url,loop:!0,muted:!0,playsInline:!0},Re.name),!N&&a.jsxs("div",{className:"pg-video-overlay",children:[a.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),a.jsx("div",{className:"pg-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"pg-exercise-card",children:[a.jsx("h2",{className:"pg-ex-name",children:Re.name}),a.jsx("span",{className:`pg-ex-type-badge pg-badge-${Re.type}`,children:Re.type==="weighted"?"Weight + Reps":Re.type==="timed"?"Timed":"Reps Only"}),Re.type==="weighted"&&xe&&a.jsxs("div",{className:"pg-last-week",children:[a.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),a.jsxs("span",{className:"pg-last-week-value",children:[xe.weight,"kg x ",xe.reps," reps"]})]}),a.jsxs("div",{className:"pg-ex-set-info",children:[a.jsxs("span",{className:"pg-ex-set-num",children:["Set ",qe+1," of ",st.sets]}),a.jsxs("span",{className:"pg-ex-target",children:["Target: ",Re.type==="timed"?`${st.time}s hold`:`${st.reps} reps`]})]}),Re.type==="weighted"&&a.jsxs("div",{className:"pg-input-area",children:[a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",value:P,onChange:lt=>D(lt.target.value),placeholder:"0",className:"pg-input"})]}),a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:z,onChange:lt=>M(lt.target.value),placeholder:String(st.reps),className:"pg-input"})]})]}),Re.type==="reps"&&a.jsx("div",{className:"pg-input-area",children:a.jsxs("div",{className:"pg-input-group pg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:z,onChange:lt=>M(lt.target.value),placeholder:String(st.reps),className:"pg-input"})]})}),Re.type==="timed"&&a.jsxs("div",{className:"pg-timer-area",children:[a.jsx("div",{className:"pg-timer-display",children:a.jsxs("span",{className:"pg-timer-value",children:[K,"s"]})}),ke?a.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>ht(!1),children:"Stop"}):a.jsx("button",{className:"pg-timer-btn",onClick:()=>{K===0&&we(st.time),ht(!0)},children:K<st.time&&K>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"pg-log-set-btn",onClick:Gt,disabled:Re.type==="timed"&&ke,children:qe+1<st.sets?"Log Set":be+1<et?"Log Set  Next Exercise":"Log Set  Complete"}),Je?.sets?.length>0&&a.jsx("div",{className:"pg-completed-sets",children:Je.sets.map((lt,Et)=>a.jsxs("div",{className:"pg-completed-set",children:[a.jsx("span",{className:"pg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",Et+1,": ",lt.weight!==void 0?`${lt.weight}kg  ${lt.reps}`:lt.time!==void 0?`${lt.time}s`:`${lt.reps} reps`]})]},Et))})]}),Ht]})}if(y==="sessionComplete"){const Te=_t()?.days[Q],Re=E.reduce((Je,qe)=>Je+qe.sets.length,0),st=E.reduce((Je,qe)=>Je+qe.sets.reduce((et,Ke)=>et+(Ke.weight||0)*(Ke.reps||0),0),0);return a.jsxs("div",{className:"pg-page pg-page-center","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"pg-session-done",children:[a.jsxs("div",{className:"pg-done-ring",children:[a.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:yo.map((Je,qe)=>a.jsx("line",{x1:Je.x1,y1:Je.y1,x2:Je.x2,y2:Je.y2,className:"pg-tick-complete",strokeWidth:Je.thick?"3.5":"2",style:{animationDelay:`${qe*.02}s`}},qe))}),a.jsx("div",{className:"pg-done-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),a.jsxs("p",{className:"pg-done-subtitle",children:["Week ",O,"  ",Te?.name,": ",Te?.label]}),a.jsxs("div",{className:"pg-done-stats",children:[a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:E.length}),a.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Re}),a.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),st>0&&a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Math.round(st).toLocaleString()}),a.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>x("dashboard"),children:"Back to Programme"})]}),pe&&a.jsx("div",{className:"pg-badge-celebration",onClick:()=>Se(null),children:a.jsxs("div",{className:"pg-badge-celebration-card",onClick:Je=>Je.stopPropagation(),children:[a.jsx("div",{className:"pg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pg-badge-celebration-title",children:pe.badges.length===1?"Badge Earned!":`${pe.badges.length} Badges Earned!`}),a.jsx("div",{className:"pg-badge-celebration-list",children:pe.badges.map((Je,qe)=>a.jsx("div",{className:"pg-badge-celebration-item",children:Je.type==="pb_target"?`${Je.exercise}  ${Je.targetWeight}kg`:Je.label},qe))}),a.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Se(null),children:"Tap to dismiss"})]})}),Ht]})}return null}const J3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},Z3={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},Mp=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function eD(s){return J3[s]||"push"}function tD(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function nD(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function sD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=rr(),{isDark:l,toggleTheme:u,accent:d}=qr(),p=Ss(),[g,y]=_.useState(!0),[x,k]=_.useState(null),[j,L]=_.useState({});_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const[A,P]=await Promise.all([Dn(nt(Ie,"coreBuddyAchievements",n.id)),Dn(nt(Ie,"coreBuddyPBs",n.id))]);A.exists()&&k(A.data()),P.exists()&&L(P.data().exercises||{})}catch(A){console.error("Error loading achievements:",A)}y(!1)})()},[n]);const H=x?.badges||[],B=x?.totalVolume||0,O=H.filter(E=>E.type==="pb_target"),ee=H.filter(E=>E.type==="volume_milestone"),Q={push:[],pull:[],lower:[],core:[]};O.forEach(E=>{const A=E.group||eD(E.exercise);Q[A]&&Q[A].push(E)});const oe=Mp.find(E=>B<E.threshold),be=Mp.filter(E=>B>=E.threshold).pop()?.threshold||0,Ve=oe?(B-be)/(oe.threshold-be):1;if(i||g)return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsx("div",{className:"ach-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});const Ae=H.length,I=Ae>0||B>0;return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ach-main",children:[a.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/core-buddy"),children:" Back"}),a.jsxs("div",{className:"ach-stats-banner",children:[a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Ae}),a.jsx("span",{className:"ach-stat-label",children:Ae===1?"Badge":"Badges"})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:tD(B)}),a.jsxs("span",{className:"ach-stat-label",children:[nD(B)," lifted"]})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Object.keys(j).length}),a.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!I&&a.jsxs("div",{className:"ach-empty",children:[a.jsx("div",{className:"ach-empty-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),a.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),a.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),a.jsx("h4",{children:"No achievements yet"}),a.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),a.jsxs("div",{className:"ach-volume-hero",children:[a.jsxs("div",{className:"ach-volume-ring",children:[a.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:yo.map((E,A)=>{const P=A<Math.round(Ve*60);return a.jsx("line",{x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,className:P?"ach-tick-filled":"ach-tick-empty",strokeWidth:E.thick?"3":"2"},A)})}),a.jsxs("div",{className:"ach-volume-center",children:[a.jsx("span",{className:"ach-volume-number",children:Math.round(B).toLocaleString()}),a.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),oe&&a.jsxs("div",{className:"ach-volume-next",children:["Next: ",a.jsx("strong",{children:oe.label})," (",(oe.threshold-B).toLocaleString(),"kg to go)"]})]}),a.jsx("div",{className:"ach-milestone-shelf",children:Mp.map((E,A)=>{const P=B>=E.threshold,D=ee.find(z=>z.milestone===E.threshold);return a.jsxs("div",{className:`ach-milestone ${P?"unlocked":"locked"}`,children:[a.jsx("div",{className:"ach-milestone-hex",children:a.jsx("span",{className:"ach-milestone-icon",children:E.icon})}),a.jsx("span",{className:"ach-milestone-label",children:E.label}),D?.achievedAt&&a.jsx("span",{className:"ach-milestone-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},A)})})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),O.length===0?a.jsx("div",{className:"ach-pb-empty",children:a.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",a.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(Q).map(([E,A])=>{if(A.length===0)return null;const P=Z3[E];return a.jsxs("div",{className:"ach-group",children:[a.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:P.color},children:[a.jsx("span",{className:"ach-group-label",style:{color:P.color},children:P.label}),a.jsx("span",{className:"ach-group-count",children:A.length})]}),a.jsx("div",{className:"ach-badge-grid",children:A.map((D,z)=>a.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${z*.06}s`,"--group-color":P.color},children:[a.jsx("div",{className:"ach-badge-hex",style:{borderColor:P.color,boxShadow:`0 0 12px ${P.color}33`},children:a.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:P.color,strokeWidth:"2",strokeLinecap:"round",children:a.jsx("path",{d:P.icon})})}),a.jsxs("div",{className:"ach-badge-info",children:[a.jsx("span",{className:"ach-badge-exercise",children:D.exercise}),a.jsxs("span",{className:"ach-badge-value",style:{color:P.color},children:[D.targetWeight,"kg"]}),D.achievedAt&&a.jsx("span",{className:"ach-badge-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},z))})]},E)})]})]}),a.jsx(Ur,{active:"home"})]})}const ed=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function rD(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Dp(s){return s.toISOString().split("T")[0]}function aD(s){return Array.from({length:7},(e,n)=>{const i=new Date(s);return i.setDate(s.getDate()+n),i})}function iD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=rr(),{isDark:l,toggleTheme:u,accent:d}=qr(),p=Ss(),[g,y]=_.useState({}),[x,k]=_.useState(!0),[j,L]=_.useState(!1),[H,B]=_.useState(0),[O,ee]=_.useState(null),[Q,oe]=_.useState(null),[be,Ve]=_.useState(!1),Ae=_.useRef([]),I=_.useRef([]),E=_.useCallback((V,ie="info")=>{ee({message:V,type:ie}),setTimeout(()=>ee(null),3e3)},[]),A=new Date,P=Dp(A),D=rD(A),z=aD(D),M=["M","T","W","T","F","S","S"];_.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const ie=dn(Ie,"habitLogs"),pe=Vn(ie,Tn("clientId","==",n.id)),Se=await Cn(pe),Me={};Se.docs.forEach(Ge=>{const bt=Ge.data();Me[bt.date]={...bt,_id:Ge.id}}),y(Me);let Qe=0;const Fe=new Date(A);for(;;){const Ge=Dp(Fe),bt=Me[Ge];if(bt)if(Object.values(bt.habits||{}).filter(Boolean).length>=3)Qe++,Fe.setDate(Fe.getDate()-1);else break;else if(Ge===P)Fe.setDate(Fe.getDate()-1);else break}B(Qe)}catch(ie){console.error("Error loading habit logs:",ie)}finally{k(!1)}})()},[s,n]);const ke=g[P]||{habits:{}},ht=async V=>{if(!s||j)return;const ie=ke.habits?.[V]||!1;ie||(Ae.current=[...Array(10)].map((pe,Se)=>{const Me=Se/10*2*Math.PI,Qe=18+Math.random()*20;return{tx:Math.cos(Me)*Qe,ty:Math.sin(Me)*Qe,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),oe(V),setTimeout(()=>oe(null),700)),L(!0);try{const pe=ke.habits||{},Se={...pe,[V]:!pe[V]},Me=ke._id||`${n.id}_${P}`;await In(nt(Ie,"habitLogs",Me),{clientId:n.id,date:P,habits:Se}),y(Fe=>({...Fe,[P]:{clientId:n.id,date:P,habits:Se,_id:Me}})),Object.values(Se).filter(Boolean).length===ed.length&&!ie&&(I.current=[...Array(50)].map((Fe,Ge)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][Ge%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{Ve(!0),setTimeout(()=>Ve(!1),3500)},500))}catch(pe){console.error("Error saving habit:",pe),E("Failed to save. Try again.","error")}finally{L(!1)}},K=z.map(V=>{const ie=Dp(V),pe=g[ie],Se=pe?Object.values(pe.habits||{}).filter(Boolean).length:0;return{date:V,dateStr:ie,completed:Se,total:ed.length}}),we=K.reduce((V,ie)=>V+ie.completed,0),Le=K.reduce((V,ie)=>V+ie.total,0),re=Le>0?Math.round(we/Le*100):0,De=Object.values(ke.habits||{}).filter(Boolean).length,N=Math.round(De/ed.length*100);return a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||x?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-ring-section",children:[a.jsxs("div",{className:"cbc-progress-ring",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-N/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-pct",children:[N,"%"]}),a.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),a.jsxs("div",{className:"cbc-streak",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{className:"cbc-streak-count",children:H}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsx("div",{className:"cbc-habits",children:ed.map(V=>{const ie=ke.habits?.[V.key]||!1,pe=Q===V.key;return a.jsxs("button",{className:`cbc-habit-btn cbc-habit-${V.key} ${ie?"cbc-habit-done":""} ${pe?"cbc-habit-just-checked":""}`,onClick:()=>ht(V.key),disabled:j,children:[a.jsx("div",{className:"cbc-habit-check",children:ie?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${pe?"cbc-check-animate":""}`})}):a.jsx("div",{className:"cbc-habit-circle"})}),pe&&a.jsx("div",{className:"cbc-particles",children:Ae.current.map((Se,Me)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${Se.tx}px`,"--ty":`${Se.ty}px`,"--size":`${Se.size}px`,animationDuration:`${Se.duration}s`}},Me))}),a.jsx("div",{className:`cbc-habit-icon cbc-icon-${V.key}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:V.icon})})}),a.jsx("span",{className:"cbc-habit-label",children:V.label})]},V.key)})})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsx("div",{className:"cbc-week-grid",children:K.map((V,ie)=>{const pe=V.dateStr===P,Se=V.total>0?V.completed/V.total:0,Me=38,Qe=2*Math.PI*Me,Fe=Qe-Se*Qe;return a.jsxs("div",{className:`cbc-day-ring ${pe?"cbc-day-today":""} ${V.completed>0?"cbc-day-active":""}`,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:Me}),a.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:Me,strokeDasharray:Qe,strokeDashoffset:Fe})]}),a.jsx("span",{className:"cbc-day-label",children:M[ie]}),a.jsxs("span",{className:"cbc-day-count",children:[V.completed,"/",V.total]})]},ie)})}),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${re}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[we," / ",Le," habits this week (",re,"%)"]})]})]})]}),a.jsx(Ur,{active:"home"}),be&&a.jsxs("div",{className:"cbc-celebration",onClick:()=>Ve(!1),children:[a.jsx("div",{className:"cbc-confetti-container",children:I.current.map((V,ie)=>a.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${V.x}%`,"--delay":`${V.delay}s`,"--color":V.color,"--drift":`${V.drift}px`,"--spin":`${V.spin}deg`,"--duration":`${V.duration}s`,width:`${V.width}px`,height:`${V.height}px`}},ie))}),a.jsxs("div",{className:"cbc-celebration-card",children:[a.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),a.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),a.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),O&&a.jsx("div",{className:`toast-notification ${O.type}`,children:O.message})]})}function td(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function ax(s,e){return[s,e].sort().join("_")}function oD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=rr(),{isDark:l,toggleTheme:u}=qr(),d=Ss(),[p,g]=_.useState("buddies"),[y,x]=_.useState([]),[k,j]=_.useState([]),[L,H]=_.useState([]),[B,O]=_.useState(""),[ee,Q]=_.useState([]),[oe,be]=_.useState([]),[Ve,Ae]=_.useState(!0),[I,E]=_.useState(null),[A,P]=_.useState(null),D=_.useCallback((re,De="info")=>{P({message:re,type:De}),setTimeout(()=>P(null),3500)},[]);_.useEffect(()=>{!i&&(!s||!e)&&d("/")},[s,e,i,d]);const z=_.useCallback(async()=>{if(n){Ae(!0);try{const re=n.id,N=(await Cn(dn(Ie,"clients"))).docs.map(Fe=>({id:Fe.id,...Fe.data()}));be(N);const V=Object.fromEntries(N.map(Fe=>[Fe.id,Fe])),ie=await Cn(Vn(dn(Ie,"buddies"),Tn("user1","==",re))),pe=await Cn(Vn(dn(Ie,"buddies"),Tn("user2","==",re))),Se=new Set;[...ie.docs,...pe.docs].forEach(Fe=>{const Ge=Fe.data(),bt=Ge.user1===re?Ge.user2:Ge.user1;Se.add(bt)}),x(Array.from(Se).map(Fe=>V[Fe]).filter(Boolean));const Me=await Cn(Vn(dn(Ie,"buddyRequests"),Tn("toId","==",re),Tn("status","==","pending")));j(Me.docs.map(Fe=>({reqId:Fe.id,...Fe.data(),fromClient:V[Fe.data().fromId]})).filter(Fe=>Fe.fromClient));const Qe=await Cn(Vn(dn(Ie,"buddyRequests"),Tn("fromId","==",re),Tn("status","==","pending")));H(Qe.docs.map(Fe=>({reqId:Fe.id,...Fe.data(),toClient:V[Fe.data().toId]})).filter(Fe=>Fe.toClient))}catch(re){console.error("Error fetching buddy data:",re),D("Failed to load buddies","error")}finally{Ae(!1)}}},[n,D]);_.useEffect(()=>{z()},[z]),_.useEffect(()=>{if(!B.trim()||!n){Q([]);return}const re=B.toLowerCase(),De=n.id,N=new Set(y.map(Se=>Se.id)),V=new Set(L.map(Se=>Se.toId)),ie=new Set(k.map(Se=>Se.fromId)),pe=oe.filter(Se=>Se.id===De||!Se.name||!Se.coreBuddyAccess?!1:Se.name.toLowerCase().includes(re)).map(Se=>({...Se,isBuddy:N.has(Se.id),isPendingOut:V.has(Se.id),isPendingIn:ie.has(Se.id)})).slice(0,20);Q(pe)},[B,oe,y,L,k,n]);const M=async re=>{E(re);try{const De=`${n.id}_${re}`;await In(nt(Ie,"buddyRequests",De),{fromId:n.id,toId:re,status:"pending",createdAt:vo()}),D("Buddy request sent!","success"),await z()}catch(De){console.error("Error sending request:",De),D("Failed to send request","error")}finally{E(null)}},ke=async re=>{E(re.reqId);try{const De=ax(re.fromId,n.id);await In(nt(Ie,"buddies",De),{user1:[re.fromId,n.id].sort()[0],user2:[re.fromId,n.id].sort()[1],connectedAt:vo()}),await yr(nt(Ie,"buddyRequests",re.reqId)),D("Buddy added!","success"),await z()}catch(De){console.error("Error accepting request:",De),D("Failed to accept","error")}finally{E(null)}},ht=async re=>{E(re.reqId);try{await yr(nt(Ie,"buddyRequests",re.reqId)),D("Request declined","info"),await z()}catch(De){console.error("Error declining:",De),D("Failed to decline","error")}finally{E(null)}},K=async re=>{E(re.reqId);try{await yr(nt(Ie,"buddyRequests",re.reqId)),D("Request cancelled","info"),await z()}catch(De){console.error("Error cancelling:",De),D("Failed to cancel","error")}finally{E(null)}},we=async re=>{E(re);try{const De=ax(n.id,re);await yr(nt(Ie,"buddies",De)),D("Buddy removed","info"),await z()}catch(De){console.error("Error removing buddy:",De),D("Failed to remove buddy","error")}finally{E(null)}},Le=k.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!n?null:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),Le>0&&a.jsx("span",{className:"bdy-tab-badge",children:Le})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Ve?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(re=>a.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${re.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:re.photoURL?a.jsx("img",{src:re.photoURL,alt:re.name}):a.jsx("span",{children:td(re.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:re.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:De=>{De.stopPropagation(),we(re.id)},disabled:I===re.id,"aria-label":"Remove buddy",children:I===re.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},re.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[k.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:k.map(re=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:re.fromClient.photoURL?a.jsx("img",{src:re.fromClient.photoURL,alt:re.fromClient.name}):a.jsx("span",{children:td(re.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:re.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>ke(re),disabled:I===re.reqId,children:I===re.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>ht(re),disabled:I===re.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},re.reqId))})]}),L.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:L.map(re=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:re.toClient?.photoURL?a.jsx("img",{src:re.toClient.photoURL,alt:re.toClient.name}):a.jsx("span",{children:td(re.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:re.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>K(re),disabled:I===re.reqId,children:I===re.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},re.reqId))})]}),k.length===0&&L.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:B,onChange:re=>O(re.target.value),autoFocus:!0}),B&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>O(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),B.trim()&&ee.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',B,'"']})}),ee.length>0&&a.jsx("div",{className:"bdy-list",children:ee.map(re=>a.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${re.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:re.photoURL?a.jsx("img",{src:re.photoURL,alt:re.name}):a.jsx("span",{children:td(re.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:re.name}),re.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),re.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):re.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):re.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:De=>{De.stopPropagation();const N=k.find(V=>V.fromId===re.id);N&&ke(N)},disabled:!!I,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:De=>{De.stopPropagation(),M(re.id)},disabled:I===re.id,children:I===re.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},re.id))})]})]})]}),a.jsx(Ur,{}),A&&a.jsxs("div",{className:`toast-notification ${A.type}`,children:[a.jsx("span",{className:"toast-icon",children:A.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):A.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:A.message})]})]})}function lD(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Pp(s,e){return[s,e].sort().join("_")}function cD(s){if(s<60)return`${s}m`;const e=Math.floor(s/60),n=s%60;return n>0?`${e}h ${n}m`:`${e}h`}function uD(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function ix(s){return s.toISOString().split("T")[0]}function hD(s){if(s.size===0)return 0;const n=uD(new Date);let i=0,l=new Date(n);const u=new Date(l);u.setDate(u.getDate()+6);let d=!1;s.forEach(p=>{const g=new Date(p);g>=l&&g<=u&&(d=!0)}),d||l.setDate(l.getDate()-7);for(let p=0;p<52;p++){const g=new Date(l),y=new Date(l);y.setDate(y.getDate()+6);let x=!1;if(s.forEach(k=>{const j=new Date(k);j>=g&&j<=y&&(x=!0)}),x)i++,l.setDate(l.getDate()-7);else break}return i}const ox=[{id:"first_workout",name:"First Rep",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 4v16"}),a.jsx("path",{d:"M18 4v16"}),a.jsx("path",{d:"M6 12h12"}),a.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),a.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]})},{id:"workouts_10",name:"On Fire",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),a.jsx("path",{d:"M12 14v4"}),a.jsx("path",{d:"M10 18h4"})]})},{id:"workouts_25",name:"Lightning",icon:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})},{id:"workouts_50",name:"Iron Will",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12h4"}),a.jsx("path",{d:"M16 12h4"}),a.jsx("path",{d:"M12 4v4"}),a.jsx("path",{d:"M12 16v4"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]})},{id:"workouts_100",name:"Century",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]})},{id:"streak_2",name:"2 Wk",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M9 16l2 2 4-4"})]})},{id:"streak_4",name:"4 Wk",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M8 16h8"}),a.jsx("path",{d:"M12 14v4"})]})},{id:"streak_8",name:"8 Wk",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),a.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]})},{id:"programme_done",name:"Finisher",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("path",{d:"M4 22h16"}),a.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),a.jsx("path",{d:"M9 12l2 2 4-4"})]})},{id:"habits_7",name:"Habits",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})},{id:"nutrition_7",name:"Fuel",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),a.jsx("path",{d:"M9 7h6"})]})},{id:"first_pb",name:"PB",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M12 14v8"}),a.jsx("path",{d:"M9 18l3 3 3-3"}),a.jsx("path",{d:"M10 6l2 2 2-2"})]})},{id:"pbs_5",name:"Climb",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 20h18"}),a.jsx("path",{d:"M5 20V10l4-6"}),a.jsx("path",{d:"M9 20V4"}),a.jsx("path",{d:"M13 20V10l4-6"}),a.jsx("path",{d:"M17 20V4"}),a.jsx("path",{d:"M21 20V10"})]})},{id:"leaderboard_join",name:"Social",icon:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}];function dD(){const{userId:s}=HE(),{currentUser:e,isClient:n,clientData:i,loading:l}=rr(),{isDark:u,toggleTheme:d}=qr(),p=Ss(),[g,y]=_.useState(null),[x,k]=_.useState({workouts:0,minutes:0,streak:0}),[j,L]=_.useState([]),[H,B]=_.useState("none"),[O,ee]=_.useState(null),[Q,oe]=_.useState(!0),[be,Ve]=_.useState(!1),[Ae,I]=_.useState(null),E=_.useCallback((ke,ht="info")=>{I({message:ke,type:ht}),setTimeout(()=>I(null),3500)},[]);_.useEffect(()=>{!l&&(!e||!n)&&p("/")},[e,n,l,p]);const A=i?.id===s;_.useEffect(()=>{if(!i||!s)return;let ke=!1;return(async()=>{oe(!0);try{const we=(await Cn(dn(Ie,"clients"))).docs.map(Ge=>({id:Ge.id,...Ge.data()})).find(Ge=>Ge.id===s);if(!we){ke||oe(!1);return}ke||y(we);const Le=new Date,re=new Date(Le);re.setDate(re.getDate()-365),re.setHours(0,0,0,0);let De=0,N=0;const V=new Set;(await Cn(Vn(dn(Ie,"workoutLogs"),Tn("clientId","==",s)))).docs.forEach(Ge=>{const bt=Ge.data();De++,N+=bt.duration||0,bt.completedAt&&V.add(ix(bt.completedAt.toDate()))}),(await Cn(dn(Ie,"circuitSessions"))).docs.forEach(Ge=>{const bt=Ge.data();(bt.slots||[]).forEach(nn=>{nn.attended&&nn.memberId===s&&(De++,N+=45,V.add(bt.date))})});const Se=ix(new Date);(await Cn(Vn(dn(Ie,"sessions"),Tn("clientId","==",s)))).docs.forEach(Ge=>{const bt=Ge.data();bt.date<=Se&&(De++,N+=bt.duration||45,V.add(bt.date))});const Qe=hD(V);ke||k({workouts:De,minutes:N,streak:Qe});const Fe=await Dn(nt(Ie,"coreBuddyAchievements",s));if(ke||L(Fe.exists()?Fe.data().unlocked||[]:[]),!A){const Ge=i.id,bt=Pp(Ge,s);if((await Dn(nt(Ie,"buddies",bt))).exists())ke||B("buddy");else{const wt=`${Ge}_${s}`,vt=await Dn(nt(Ie,"buddyRequests",wt));if(vt.exists()&&vt.data().status==="pending")ke||(B("pending_out"),ee(wt));else{const ne=`${s}_${Ge}`,ln=await Dn(nt(Ie,"buddyRequests",ne));ln.exists()&&ln.data().status==="pending"?ke||(B("pending_in"),ee(ne)):ke||B("none")}}}}catch(ht){console.error("Error loading profile:",ht)}finally{ke||oe(!1)}})(),()=>{ke=!0}},[i,s,A]);const P=async()=>{Ve(!0);try{const ke=`${i.id}_${s}`;await In(nt(Ie,"buddyRequests",ke),{fromId:i.id,toId:s,status:"pending",createdAt:vo()}),B("pending_out"),ee(ke),E("Buddy request sent!","success")}catch(ke){console.error(ke),E("Failed to send request","error")}finally{Ve(!1)}},D=async()=>{if(O){Ve(!0);try{const ke=Pp(i.id,s);await In(nt(Ie,"buddies",ke),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:vo()}),await yr(nt(Ie,"buddyRequests",O)),B("buddy"),E("Buddy added!","success")}catch(ke){console.error(ke),E("Failed to accept","error")}finally{Ve(!1)}}},z=async()=>{if(O){Ve(!0);try{await yr(nt(Ie,"buddyRequests",O)),B("none"),E(H==="pending_out"?"Request cancelled":"Request declined","info")}catch(ke){console.error(ke),E("Failed","error")}finally{Ve(!1)}}},M=async()=>{Ve(!0);try{const ke=Pp(i.id,s);await yr(nt(Ie,"buddies",ke)),B("none"),E("Buddy removed","info")}catch(ke){console.error(ke),E("Failed to remove","error")}finally{Ve(!1)}};return l||Q||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!n?null:g?a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:lD(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),A&&a.jsx("span",{className:"prf-you-label",children:"You"}),!A&&a.jsxs("div",{className:"prf-buddy-action",children:[H==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:P,disabled:be,children:be?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),H==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:z,disabled:be,children:be?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),H==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:D,disabled:be,children:be?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:z,disabled:be,children:"Decline"})]}),H==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:M,disabled:be,children:be?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),a.jsxs("div",{className:"prf-stats",children:[a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:x.workouts}),a.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:cD(x.minutes)}),a.jsx("span",{className:"prf-stat-label",children:"Active Time"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[x.streak,a.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),a.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:"Achievements"}),a.jsx("div",{className:"prf-badges",children:ox.map(ke=>{const ht=j.includes(ke.id);return a.jsxs("div",{className:`prf-badge${ht?" unlocked":" locked"}`,title:ke.name,children:[a.jsx("span",{className:"prf-badge-icon",children:ke.icon}),a.jsx("span",{className:"prf-badge-name",children:ke.name})]},ke.id)})}),a.jsxs("p",{className:"prf-badges-count",children:[j.length,"/",ox.length," unlocked"]})]})]}),a.jsx(Ur,{}),Ae&&a.jsxs("div",{className:`toast-notification ${Ae.type}`,children:[a.jsx("span",{className:"toast-icon",children:Ae.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):Ae.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:Ae.message})]})]}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(Ur,{})]})}function Lp(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function lx(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function fD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=rr(),{isDark:l,toggleTheme:u}=qr(),d=Ss(),[p,g]=_.useState([]),[y,x]=_.useState(!0),[k,j]=_.useState(""),[L,H]=_.useState(!1),[B,O]=_.useState(new Set),[ee,Q]=_.useState(new Set),[oe,be]=_.useState({}),[Ve,Ae]=_.useState({}),[I,E]=_.useState({}),[A,P]=_.useState(null),D=_.useRef(null),z=_.useCallback((N,V="info")=>{P({message:N,type:V}),setTimeout(()=>P(null),3500)},[]);_.useEffect(()=>{!i&&(!s||!e)&&d("/")},[s,e,i,d]);const M=_.useCallback(async()=>{if(n){x(!0);try{const N=n.id,V=await Cn(Vn(dn(Ie,"buddies"),Tn("user1","==",N))),ie=await Cn(Vn(dn(Ie,"buddies"),Tn("user2","==",N))),pe=new Set;[...V.docs,...ie.docs].forEach(Fe=>{const Ge=Fe.data();pe.add(Ge.user1===N?Ge.user2:Ge.user1)});const Se=[N,...Array.from(pe)].slice(0,30);let Me=[];Se.length>0&&(Me=(await Cn(Vn(dn(Ie,"posts"),Tn("authorId","in",Se),z2("createdAt","desc"),F2(50)))).docs.map(Ge=>({id:Ge.id,...Ge.data()}))),g(Me);const Qe=await Cn(Vn(dn(Ie,"postLikes"),Tn("userId","==",N)));O(new Set(Qe.docs.map(Fe=>Fe.data().postId)))}catch(N){console.error("Error loading feed:",N),z("Failed to load feed","error")}finally{x(!1)}}},[n,z]);_.useEffect(()=>{M()},[M]);const ke=async()=>{if(!(!k.trim()||L||!n)){H(!0);try{await fu(dn(Ie,"posts"),{authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:k.trim(),type:"text",createdAt:vo(),likeCount:0,commentCount:0}),j(""),D.current&&(D.current.style.height="auto"),await M(),z("Posted!","success")}catch(N){console.error("Error posting:",N),z("Failed to post","error")}finally{H(!1)}}},ht=async N=>{if(window.confirm("Delete this post?"))try{await yr(nt(Ie,"posts",N)),g(V=>V.filter(ie=>ie.id!==N)),z("Post deleted","info")}catch(V){console.error("Delete error:",V),z("Failed to delete","error")}},K=async N=>{if(!n)return;const V=n.id,ie=`${N}_${V}`,pe=B.has(N),Se=new Set(B);pe?Se.delete(N):Se.add(N),O(Se),g(Me=>Me.map(Qe=>Qe.id===N?{...Qe,likeCount:Math.max(0,(Qe.likeCount||0)+(pe?-1:1))}:Qe));try{pe?(await yr(nt(Ie,"postLikes",ie)),await gd(nt(Ie,"posts",N),{likeCount:kp(-1)})):(await In(nt(Ie,"postLikes",ie),{postId:N,userId:V,createdAt:vo()}),await gd(nt(Ie,"posts",N),{likeCount:kp(1)}))}catch(Me){console.error("Like error:",Me),M()}},we=async N=>{try{const V=await Cn(Vn(dn(Ie,"postComments"),Tn("postId","==",N),z2("createdAt","asc"),F2(50)));be(ie=>({...ie,[N]:V.docs.map(pe=>({id:pe.id,...pe.data()}))}))}catch(V){console.error("Error loading comments:",V)}},Le=N=>{const V=new Set(ee);V.has(N)?V.delete(N):(V.add(N),oe[N]||we(N)),Q(V)},re=async N=>{const V=(Ve[N]||"").trim();if(!(!V||!n)){E(ie=>({...ie,[N]:!0}));try{await fu(dn(Ie,"postComments"),{postId:N,authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:V,createdAt:vo()}),await gd(nt(Ie,"posts",N),{commentCount:kp(1)}),Ae(ie=>({...ie,[N]:""})),g(ie=>ie.map(pe=>pe.id===N?{...pe,commentCount:(pe.commentCount||0)+1}:pe)),await we(N)}catch(ie){console.error("Comment error:",ie),z("Failed to comment","error")}finally{E(ie=>({...ie,[N]:!1}))}}},De=N=>{j(N.target.value),N.target.style.height="auto",N.target.style.height=Math.min(N.target.scrollHeight,120)+"px"};return i?a.jsx("div",{className:"feed-loading","data-theme":l?"dark":"light",children:a.jsx("div",{className:"feed-spinner"})}):!s||!e||!n?null:a.jsxs("div",{className:"feed-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"feed-main",children:[a.jsx("h1",{className:"feed-title",children:"Feed"}),a.jsxs("div",{className:"feed-compose",children:[a.jsx("div",{className:"feed-compose-avatar",children:n.photoURL?a.jsx("img",{src:n.photoURL,alt:""}):a.jsx("span",{children:Lp(n.name)})}),a.jsxs("div",{className:"feed-compose-body",children:[a.jsx("textarea",{ref:D,placeholder:"Share an update with your buddies...",value:k,onChange:De,rows:1,maxLength:500}),k.trim()&&a.jsx("button",{className:"feed-post-btn",onClick:ke,disabled:L,children:L?a.jsx("div",{className:"feed-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]}),y?a.jsx("div",{className:"feed-content-loading",children:a.jsx("div",{className:"feed-spinner"})}):p.length===0?a.jsxs("div",{className:"feed-empty",children:[a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("h3",{children:"No posts yet"}),a.jsx("p",{children:"Share an update or add buddies to see their posts here!"})]}):a.jsx("div",{className:"feed-list",children:p.map(N=>a.jsxs("div",{className:"feed-post",children:[a.jsxs("div",{className:"feed-post-header",children:[a.jsx("div",{className:"feed-post-avatar",onClick:()=>d(`/client/core-buddy/profile/${N.authorId}`),children:N.authorPhotoURL?a.jsx("img",{src:N.authorPhotoURL,alt:""}):a.jsx("span",{children:Lp(N.authorName)})}),a.jsxs("div",{className:"feed-post-meta",onClick:()=>d(`/client/core-buddy/profile/${N.authorId}`),children:[a.jsx("span",{className:"feed-post-name",children:N.authorName}),a.jsx("span",{className:"feed-post-time",children:lx(N.createdAt)})]}),N.authorId===n.id&&a.jsx("button",{className:"feed-delete-btn",onClick:()=>ht(N.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),a.jsx("p",{className:"feed-post-content",children:N.content}),a.jsxs("div",{className:"feed-post-actions",children:[a.jsxs("button",{className:`feed-action-btn${B.has(N.id)?" liked":""}`,onClick:()=>K(N.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:B.has(N.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:N.likeCount||0})]}),a.jsxs("button",{className:`feed-action-btn${ee.has(N.id)?" active":""}`,onClick:()=>Le(N.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:N.commentCount||0})]})]}),ee.has(N.id)&&a.jsxs("div",{className:"feed-comments",children:[oe[N.id]?.length>0?oe[N.id].map(V=>a.jsxs("div",{className:"feed-comment",children:[a.jsx("div",{className:"feed-comment-avatar",onClick:()=>d(`/client/core-buddy/profile/${V.authorId}`),children:V.authorPhotoURL?a.jsx("img",{src:V.authorPhotoURL,alt:""}):a.jsx("span",{children:Lp(V.authorName)})}),a.jsxs("div",{className:"feed-comment-body",children:[a.jsxs("div",{className:"feed-comment-bubble",children:[a.jsx("span",{className:"feed-comment-name",children:V.authorName}),a.jsx("span",{className:"feed-comment-text",children:V.content})]}),a.jsx("span",{className:"feed-comment-time",children:lx(V.createdAt)})]})]},V.id)):a.jsx("p",{className:"feed-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"feed-comment-input",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",value:Ve[N.id]||"",onChange:V=>Ae(ie=>({...ie,[N.id]:V.target.value})),onKeyDown:V=>{V.key==="Enter"&&re(N.id)},maxLength:300}),a.jsx("button",{onClick:()=>re(N.id),disabled:!(Ve[N.id]||"").trim()||I[N.id],children:I[N.id]?a.jsx("div",{className:"feed-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},N.id))})]}),a.jsx(Ur,{}),A&&a.jsxs("div",{className:`toast-notification ${A.type}`,children:[a.jsx("span",{className:"toast-icon",children:A.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):A.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:A.message})]})]})}const Ir=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],fo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function mD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Mr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function pD(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function gD(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function nd(s,e){if(!e)return"-";switch(s.unit){case"weight":return gD(e.weight,e.reps);case"time":return pD(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function pl(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function Op(s,e){return!e||e===0?null:(s-e)/e*100}function yD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(B=>{const O=B.benchmarks?.[e];if(!O)return 0;switch(n){case"weight":return(O.weight||0)*(O.reps||0);case"time":return O.time||0;case"reps":return O.reps||0;case"distance":return O.distance||0;default:return 0}}),l=Math.max(...i),u=Math.min(...i),d=l-u||1,p=300,g=100,y=20,x=p-y*2,k=g-y*2,j=i.map((B,O)=>{const ee=y+O/(i.length-1)*x,Q=y+k-(B-u)/d*k;return{x:ee,y:Q,value:B}}),L=j.map((B,O)=>`${O===0?"M":"L"} ${B.x} ${B.y}`).join(" "),H=L+` L ${j[j.length-1].x} ${y+k} L ${j[0].x} ${y+k} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:H,fill:"url(#trendGradientJr)"}),a.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((B,O)=>a.jsx("circle",{cx:B.x,cy:B.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},O))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((B,O)=>a.jsxs("span",{className:"pb-trend-label",children:[B.month.split("-")[1],"/",B.month.split("-")[0].slice(2)]},O))})]})}function vD(){const[s,e]=_.useState("bests"),[n,i]=_.useState([]),[l,u]=_.useState(!0),[d,p]=_.useState(!1),[g,y]=_.useState(0),[x,k]=_.useState(!1),[j,L]=_.useState(!1),[H,B]=_.useState(!1),[O,ee]=_.useState({}),[Q,oe]=_.useState({}),[be,Ve]=_.useState({}),[Ae,I]=_.useState({}),[E,A]=_.useState({}),[P,D]=_.useState(!1),[z,M]=_.useState({}),[ke,ht]=_.useState([]),[K,we]=_.useState(null),[Le,re]=_.useState(null),[De,N]=_.useState(!1),[V,ie]=_.useState(""),[pe,Se]=_.useState(""),Me=_.useRef(null),Qe=_.useRef(0),Fe=_.useRef(0),Ge=_.useRef("right"),bt=_.useCallback(q=>{y(fe=>{const ge=Math.max(0,Math.min(Ir.length-1,q));return ge===fe?fe:(Ge.current=ge>fe?"right":"left",ge)})},[]),{currentUser:nn,isClient:wt,clientData:vt,loading:ne}=rr(),{isDark:ln}=qr(),Vt=Ss(),_t=_.useCallback((q,fe="info")=>{re({message:q,type:fe}),setTimeout(()=>re(null),4e3)},[]);_.useEffect(()=>{!ne&&(!nn||!wt)&&Vt("/")},[nn,wt,ne,Vt]),_.useEffect(()=>{vt&&At()},[vt]);const At=async()=>{try{const q=Vn(dn(Ie,"juniorPBs"),Tn("clientId","==",vt.id)),ge=(await Cn(q)).docs.map(tt=>({id:tt.id,...tt.data()}));ge.sort((tt,dt)=>tt.month.localeCompare(dt.month)),i(ge);const ve=Vn(dn(Ie,"juniorPBTargets"),Tn("clientId","==",vt.id)),de=await Cn(ve);if(!de.empty){const tt=de.docs[0].data();Ve(tt.targets||{}),I(tt.metricTargets||{}),A(tt.targets||{}),M(tt.metricTargets||{})}const We=Vn(dn(Ie,"juniorAchievements"),Tn("clientId","==",vt.id)),mt=await Cn(We);mt.empty||ht(mt.docs[0].data().badges||[])}catch(q){console.error("Error fetching junior personal bests:",q)}u(!1)},ct=mD(),Xe=n.find(q=>q.month===ct),Gt=n.filter(q=>q.month<ct),is=Gt.length>0?Gt[Gt.length-1]:null;_.useEffect(()=>{Xe?(ee(Xe.benchmarks||{}),oe(Xe.bodyMetrics||{})):(ee({}),oe({}))},[Xe?.id]);const It=async(q,fe)=>{const ge=[];if(q==="strength"?Ir.forEach(ve=>{const de=be[ve.key];if(!de)return;const We=fe[ve.key];if(!We)return;let mt;if(de.targetType==="time"){if(!de.targetValue)return;const tt=de.startValue||0,dt=We.time||0,pt=de.targetValue-tt;mt=pt===0?dt>=de.targetValue?1:0:Math.max(0,(dt-tt)/pt)}else if(de.targetType==="reps"){if(!de.targetReps)return;const tt=de.startReps||0,dt=We.reps||0,pt=de.targetReps-tt;mt=pt===0?dt>=de.targetReps?1:0:Math.max(0,(dt-tt)/pt)}else if(de.targetType==="distance"){if(!de.targetDistance)return;const tt=de.startDistance||0,dt=We.distance||0,pt=de.targetDistance-tt;mt=pt===0?dt>=de.targetDistance?1:0:Math.max(0,(dt-tt)/pt)}else{if(!de.targetWeight&&!de.targetReps)return;const tt=(de.startWeight||0)*(de.startReps||0),dt=(de.targetWeight||0)*(de.targetReps||0),pt=(We.weight||0)*(We.reps||0),an=dt-tt;mt=an===0?pt>=dt?1:0:Math.max(0,(pt-tt)/an)}if(mt>=1){let tt,dt;de.targetType==="time"?(tt=ke.some(pt=>pt.type==="strength"&&pt.key===ve.key&&pt.targetValue===de.targetValue),dt=`${ve.name} ${de.targetValue}s`):de.targetType==="reps"?(tt=ke.some(pt=>pt.type==="strength"&&pt.key===ve.key&&pt.targetReps===de.targetReps),dt=`${ve.name} ${de.targetReps} reps`):de.targetType==="distance"?(tt=ke.some(pt=>pt.type==="strength"&&pt.key===ve.key&&pt.targetDistance===de.targetDistance),dt=`${ve.name} ${de.targetDistance}cm`):(tt=ke.some(pt=>pt.type==="strength"&&pt.key===ve.key&&pt.targetWeight===de.targetWeight&&pt.targetReps===de.targetReps),dt=`${ve.name} ${de.targetWeight}kg  ${de.targetReps}`),tt||ge.push({type:"strength",key:ve.key,...de.targetType==="time"?{targetType:"time",targetValue:de.targetValue}:de.targetType==="reps"?{targetType:"reps",targetReps:de.targetReps}:de.targetType==="distance"?{targetType:"distance",targetDistance:de.targetDistance}:{targetWeight:de.targetWeight,targetReps:de.targetReps},achievedMonth:ct,label:dt})}}):fo.forEach(ve=>{const de=Ae[ve.key];if(!de||!de.targetValue)return;const We=fe[ve.key];if(We==null)return;const mt=de.startValue||0,tt=de.targetValue,dt=tt-mt;(dt===0?We===tt?1:0:Math.max(0,(We-mt)/dt))>=1&&(ke.some(Ns=>Ns.type==="metric"&&Ns.key===ve.key&&Ns.targetValue===tt)||ge.push({type:"metric",key:ve.key,targetValue:tt,achievedMonth:ct,label:`${ve.name} ${tt}${ve.suffix}`}))}),ge.length>0){const ve=[...ke,...ge];await In(nt(Ie,"juniorAchievements",vt.id),{clientId:vt.id,badges:ve,updatedAt:ft.now()}),ht(ve),we(ge),setTimeout(()=>we(null),5e3)}},zt=(q,fe)=>{if(q==="strength"){const ge=be[fe];if(!ge)return!1;switch(Ir.find(de=>de.key===fe)?.unit){case"time":return ke.some(de=>de.type==="strength"&&de.key===fe&&de.targetValue===ge.targetValue);case"reps":return ke.some(de=>de.type==="strength"&&de.key===fe&&de.targetReps===ge.targetReps);case"distance":return ke.some(de=>de.type==="strength"&&de.key===fe&&de.targetDistance===ge.targetDistance);default:return!ge.targetWeight&&!ge.targetReps?!1:ke.some(de=>de.type==="strength"&&de.key===fe&&de.targetWeight===ge.targetWeight&&de.targetReps===ge.targetReps)}}else{const ge=Ae[fe];return!ge||!ge.targetValue?!1:ke.some(ve=>ve.type==="metric"&&ve.key===fe&&ve.targetValue===ge.targetValue)}},Bn=async()=>{p(!0);try{const q=`${vt.id}_${ct}`,fe=Xe||{};await In(nt(Ie,"juniorPBs",q),{clientId:vt.id,month:ct,benchmarks:O,bodyMetrics:fe.bodyMetrics||Q||{},createdAt:fe.createdAt||ft.now(),updatedAt:ft.now()}),await It("strength",O),_t("Benchmarks saved!","success"),k(!1),await At()}catch(q){console.error("Error saving benchmarks:",q),_t("Failed to save. Please try again.","error")}p(!1)},Ht=async()=>{p(!0);try{const q=`${vt.id}_${ct}`,fe=Xe||{};await In(nt(Ie,"juniorPBs",q),{clientId:vt.id,month:ct,benchmarks:fe.benchmarks||O||{},bodyMetrics:Q,createdAt:fe.createdAt||ft.now(),updatedAt:ft.now()}),await It("metric",Q),_t("Body metrics saved!","success"),L(!1),await At()}catch(q){console.error("Error saving metrics:",q),_t("Failed to save. Please try again.","error")}p(!1)},wn=(q,fe,ge)=>{ee(ve=>({...ve,[q]:{...ve[q],[fe]:ge===""?"":parseFloat(ge)}}))},me=(q,fe)=>{oe(ge=>({...ge,[q]:fe===""?"":parseFloat(fe)}))},Te=(q,fe,ge)=>{A(ve=>({...ve,[q]:{...ve[q],[fe]:ge===""?"":parseFloat(ge)}}))},Re=async()=>{p(!0);try{const q=`targets_${vt.id}`,fe=Xe?.benchmarks||{},ge={};Ir.forEach(ve=>{const de=fe[ve.key];switch(ve.unit){case"time":E[ve.key]?.targetValue&&(ge[ve.key]={targetType:"time",targetValue:E[ve.key].targetValue,startValue:de?.time||0});break;case"reps":E[ve.key]?.targetReps&&(ge[ve.key]={targetType:"reps",targetReps:E[ve.key].targetReps,startReps:de?.reps||0});break;case"distance":E[ve.key]?.targetDistance&&(ge[ve.key]={targetType:"distance",targetDistance:E[ve.key].targetDistance,startDistance:de?.distance||0});break;default:(E[ve.key]?.targetWeight||E[ve.key]?.targetReps)&&(ge[ve.key]={targetWeight:E[ve.key].targetWeight||0,targetReps:E[ve.key].targetReps||0,startWeight:de?.weight||0,startReps:de?.reps||0})}}),await In(nt(Ie,"juniorPBTargets",q),{clientId:vt.id,targets:ge,metricTargets:Ae,updatedAt:ft.now()}),Ve(ge),A(ge),_t("Targets saved!","success"),B(!1)}catch(q){console.error("Error saving targets:",q),_t("Failed to save targets.","error")}p(!1)},st=(q,fe)=>{M(ge=>({...ge,[q]:{...ge[q],targetValue:fe===""?"":parseFloat(fe)}}))},Je=async()=>{p(!0);try{const q=`targets_${vt.id}`,fe={};fo.forEach(ge=>{if(z[ge.key]?.targetValue){const ve=Xe?.bodyMetrics?.[ge.key]||0;fe[ge.key]={targetValue:z[ge.key].targetValue,startValue:ve}}}),await In(nt(Ie,"juniorPBTargets",q),{clientId:vt.id,targets:be,metricTargets:fe,updatedAt:ft.now()}),I(fe),M(fe),_t("Metric targets saved!","success"),D(!1)}catch(q){console.error("Error saving metric targets:",q),_t("Failed to save targets.","error")}p(!1)},qe=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const q=nt(Ie,"juniorPBTargets",`targets_${vt.id}`);await yr(q),Ve({}),I({}),A({}),M({}),_t("All goals have been reset","success")}catch(q){console.error("Error resetting targets:",q),_t("Failed to reset goals","error")}p(!1)}},et=(q,fe)=>{const ge=be[q];if(!ge||!fe)return null;if(ge.targetType==="time"){if(!ge.targetValue)return null;const tt=ge.startValue||0,dt=ge.targetValue,pt=fe.time||0,an=dt-tt;return an<=0?pt>=dt?1:0:Math.max(0,Math.min((pt-tt)/an,1))}if(ge.targetType==="reps"){if(!ge.targetReps)return null;const tt=ge.startReps||0,dt=ge.targetReps,pt=fe.reps||0,an=dt-tt;return an<=0?pt>=dt?1:0:Math.max(0,Math.min((pt-tt)/an,1))}if(ge.targetType==="distance"){if(!ge.targetDistance)return null;const tt=ge.startDistance||0,dt=ge.targetDistance,pt=fe.distance||0,an=dt-tt;return an<=0?pt>=dt?1:0:Math.max(0,Math.min((pt-tt)/an,1))}if(!ge.targetWeight&&!ge.targetReps)return null;const ve=(ge.startWeight||0)*(ge.startReps||0),de=(ge.targetWeight||0)*(ge.targetReps||0),We=(fe.weight||0)*(fe.reps||0),mt=de-ve;return mt<=0?We>=de?1:0:Math.max(0,Math.min((We-ve)/mt,1))},Ke=q=>{const fe=Ae[q];if(!fe||!fe.targetValue)return null;const ge=Xe?.bodyMetrics?.[q];if(ge==null)return null;const ve=fe.startValue||0,de=fe.targetValue,We=de-ve;return We===0?ge===de?1:0:Math.max(0,Math.min((ge-ve)/We,1))},Ue=q=>{Qe.current=q.touches[0].clientX,Fe.current=0},xe=q=>{Fe.current=q.touches[0].clientX-Qe.current},ze=()=>{Fe.current<-50?bt(g+1):Fe.current>50&&bt(g-1),Fe.current=0},lt=q=>{const fe=Xe?.bodyMetrics?.[q],ge=is?.bodyMetrics?.[q];return fe==null||ge==null?null:parseFloat((fe-ge).toFixed(2))},Et=n.find(q=>q.month===V),$t=n.find(q=>q.month===pe);if(ne||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!nn||!wt||!vt)return null;const Ye=Ir[g],jt=Xe?.benchmarks?.[Ye.key],Ct=is?.benchmarks?.[Ye.key],Dt=pl(Ye,jt),Ft=pl(Ye,Ct),Tt=Op(Dt,Ft),sn=et(Ye.key,jt),Wt=sn!==null,rn=sn!==null&&sn>=1,un=Wt?Math.round(sn*60):Dt>0?15:0,fn=be[Ye.key],Rn=q=>q?q.targetType==="time"?`${q.startValue||0}s  ${q.targetValue}s`:q.targetType==="reps"?`${q.startReps||0}  ${q.targetReps} reps`:q.targetType==="distance"?`${q.startDistance||0}  ${q.targetDistance}cm`:`${q.startWeight||0}kg${q.startReps||0}  ${q.targetWeight}kg${q.targetReps}`:null;return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>Vt("/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Junior Strength Tests"}),a.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!x&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:Me,onTouchStart:Ue,onTouchMove:xe,onTouchEnd:ze,children:[a.jsx("div",{className:`pb-ring-container slide-from-${Ge.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Ry.map((q,fe)=>{const ge=fe<Math.round(un);return a.jsx("line",{x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,className:`pb-ring-tick ${ge?rn?"hit":"filled":"empty"}`,strokeWidth:q.thick?"3":"2"},fe)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:Ye.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[Ye.name,zt("strength",Ye.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:jt?nd(Ye,jt):"-"}),Tt!==null&&a.jsxs("div",{className:`pb-ring-change ${Tt>=0?"positive":"negative"}`,children:[Tt>=0?"+":"",Tt.toFixed(1),"%"]}),Tt===null&&jt&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),fn&&a.jsx("div",{className:`pb-ring-target ${rn?"hit":""}`,children:rn?"Target hit!":Rn(fn)}),!fn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:Ir.map((q,fe)=>a.jsx("button",{className:`pb-dot ${fe===g?"active":""}`,onClick:()=>bt(fe)},fe))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>bt(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>bt(g+1),disabled:g===Ir.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(yD,{data:n,exerciseKey:Ye.key,unit:Ye.unit})]})]}),!x&&!H&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:Xe?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>B(!0),children:Object.keys(be).length>0?"Edit Targets":"Set Targets"}),(Object.keys(be).length>0||Object.keys(Ae).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:qe,disabled:d,children:"Reset All Goals"})]}),x&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Mr(ct)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),ee(Xe?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:Ir.map(q=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),q.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:O[q.key]?.weight??"",onChange:fe=>wn(q.key,"weight",fe.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:O[q.key]?.reps??"",onChange:fe=>wn(q.key,"reps",fe.target.value),placeholder:"0"})]})]}):q.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Reps (max in 1 min)"}),a.jsx("input",{type:"number",value:O[q.key]?.reps??"",onChange:fe=>wn(q.key,"reps",fe.target.value),placeholder:"0"})]})}):q.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:O[q.key]?.distance??"",onChange:fe=>wn(q.key,"distance",fe.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:O[q.key]?.time??"",onChange:fe=>wn(q.key,"time",fe.target.value),placeholder:"0"})]})})]},q.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),ee(Xe?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Bn,disabled:d,children:d?"Saving...":"Save"})]})]}),H&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),A(be)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Ir.map(q=>{const fe=Xe?.benchmarks?.[q.key];let ge="-";if(fe)switch(q.unit){case"weight":(fe.weight||fe.reps)&&(ge=`${fe.weight||0}kg  ${fe.reps||0}`);break;case"time":fe.time&&(ge=`${fe.time}s`);break;case"reps":fe.reps&&(ge=`${fe.reps} reps`);break;case"distance":fe.distance&&(ge=`${fe.distance} cm`);break}return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ge]})]}),q.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:E[q.key]?.targetWeight??"",onChange:ve=>Te(q.key,"targetWeight",ve.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:E[q.key]?.targetReps??"",onChange:ve=>Te(q.key,"targetReps",ve.target.value),placeholder:"0"})]})]}):q.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Reps (in 1 min)"}),a.jsx("input",{type:"number",value:E[q.key]?.targetReps??"",onChange:ve=>Te(q.key,"targetReps",ve.target.value),placeholder:"0"})]})}):q.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:E[q.key]?.targetDistance??"",onChange:ve=>Te(q.key,"targetDistance",ve.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:E[q.key]?.targetValue??"",onChange:ve=>Te(q.key,"targetValue",ve.target.value),placeholder:"0"})]})})]},q.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),A(be)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Re,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!j&&!P&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Mr(ct)}),a.jsx("div",{className:"pb-metrics-list",children:fo.map(q=>{const fe=Xe?.bodyMetrics?.[q.key],ge=lt(q.key),ve=Ae[q.key],de=Ke(q.key),We=de!==null&&de>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[q.name,zt("metric",q.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),ve&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",ve.targetValue," ",q.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:fe!=null?`${fe} ${q.suffix}`:"-"}),ge!==null&&a.jsxs("span",{className:`pb-metric-change ${ge>0?"up":ge<0?"down":"same"}`,children:[ge>0?"+":"",ge," ",q.suffix]})]})]}),de!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${We?"hit":""}`,style:{width:`${Math.round(de*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${We?"hit":""}`,children:We?"Hit!":`${Math.round(de*100)}%`})]})]},q.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:Xe?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(be).length>0||Object.keys(Ae).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:qe,disabled:d,children:"Reset All Goals"})]})]}),j&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Mr(ct)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),oe(Xe?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:fo.map(q=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[q.name," (",q.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:Q[q.key]??"",onChange:fe=>me(q.key,fe.target.value),placeholder:"0"})]})},q.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),oe(Xe?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ht,disabled:d,children:d?"Saving...":"Save"})]})]}),P&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),M(Ae)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),fo.map(q=>{const fe=Xe?.bodyMetrics?.[q.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",fe!=null?`${fe} ${q.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",q.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:z[q.key]?.targetValue??"",onChange:ge=>st(q.key,ge.target.value),placeholder:"0"})]})})]},q.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),M(Ae)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Je,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[ke.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...ke].reverse().map((q,fe)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${fe*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:q.label}),a.jsx("span",{className:"pb-achievement-date",children:Mr(q.achievedMonth)})]})]},fe))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${De?"active":""}`,onClick:()=>{N(!De),!De&&n.length>=2&&(ie(n[0].month),Se(n[n.length-1].month))},children:De?"Back to Timeline":"Compare Months"})}),De?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:V,onChange:q=>ie(q.target.value),children:n.map(q=>a.jsx("option",{value:q.month,children:Mr(q.month)},q.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:pe,onChange:q=>Se(q.target.value),children:n.map(q=>a.jsx("option",{value:q.month,children:Mr(q.month)},q.month))})]})]}),Et&&$t&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Tests"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Mr(V).split(" ")[0]}),a.jsx("span",{children:Mr(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),Ir.map(q=>{const fe=Et.benchmarks?.[q.key],ge=$t.benchmarks?.[q.key],ve=pl(q,fe),de=pl(q,ge),We=Op(de,ve);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:q.name}),a.jsx("span",{className:"pb-compare-val",children:fe?nd(q,fe):"-"}),a.jsx("span",{className:"pb-compare-val",children:ge?nd(q,ge):"-"}),a.jsx("span",{className:`pb-compare-change ${We!==null?We>=0?"positive":"negative":""}`,children:We!==null?`${We>=0?"+":""}${We.toFixed(1)}%`:"-"})]},q.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Mr(V).split(" ")[0]}),a.jsx("span",{children:Mr(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),fo.map(q=>{const fe=Et.bodyMetrics?.[q.key],ge=$t.bodyMetrics?.[q.key],ve=fe!=null&&ge!=null?parseFloat((ge-fe).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:q.name}),a.jsx("span",{className:"pb-compare-val",children:fe!=null?`${fe}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:ge!=null?`${ge}`:"-"}),a.jsx("span",{className:`pb-compare-change ${ve!==null?ve>0?"positive":ve<0?"negative":"neutral":""}`,children:ve!==null?`${ve>0?"+":""}${ve} ${q.suffix}`:"-"})]},q.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((q,fe)=>{const ge=n.filter(ve=>ve.month<q.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${fe*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Mr(q.month)}),q.benchmarks&&Object.keys(q.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Tests"}),Ir.map(ve=>{const de=q.benchmarks[ve.key];if(!de)return null;const We=ge?.benchmarks?.[ve.key],mt=pl(ve,de),tt=pl(ve,We),dt=Op(mt,tt);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:ve.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:nd(ve,de)}),dt!==null&&a.jsxs("span",{className:`pb-timeline-change ${dt>=0?"positive":"negative"}`,children:[dt>=0?"+":"",dt.toFixed(1),"%"]})]})]},ve.key)})]}),q.bodyMetrics&&Object.keys(q.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),fo.map(ve=>{const de=q.bodyMetrics[ve.key];if(de==null)return null;const We=ge?.bodyMetrics?.[ve.key],mt=We!=null?parseFloat((de-We).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:ve.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[de," ",ve.suffix]}),mt!==null&&a.jsxs("span",{className:`pb-timeline-change ${mt>0?"positive":mt<0?"negative":"neutral"}`,children:[mt>0?"+":"",mt," ",ve.suffix]})]})]},ve.key)})]})]})]},q.id)})})]})})]}),K&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>we(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:K.length===1?"Target Achieved!":`${K.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:K.map((q,fe)=>a.jsx("div",{className:"pb-celebration-badge",children:q.label},fe))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Le&&a.jsxs("div",{className:`toast-notification ${Le.type}`,children:[a.jsx("span",{className:"toast-icon",children:Le.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Le.message}),a.jsx("button",{className:"toast-close",onClick:()=>re(null),children:""})]}),a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>Vt("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Vt("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Vt("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),vt?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>Vt("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]})]})}const ta=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],mo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function bD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Dr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function sd(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function cx(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function gl(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Vp(s,e){return!e||e===0?null:(s-e)/e*100}function xD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(B=>{const O=B.benchmarks?.[e];return O?n==="time"?O.time||0:(O.weight||0)*(O.reps||0):0}),l=Math.max(...i),u=Math.min(...i),d=l-u||1,p=300,g=100,y=20,x=p-y*2,k=g-y*2,j=i.map((B,O)=>{const ee=y+O/(i.length-1)*x,Q=y+k-(B-u)/d*k;return{x:ee,y:Q,value:B}}),L=j.map((B,O)=>`${O===0?"M":"L"} ${B.x} ${B.y}`).join(" "),H=L+` L ${j[j.length-1].x} ${y+k} L ${j[0].x} ${y+k} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:H,fill:"url(#trendGradient)"}),a.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((B,O)=>a.jsx("circle",{cx:B.x,cy:B.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},O))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((B,O)=>a.jsxs("span",{className:"pb-trend-label",children:[B.month.split("-")[1],"/",B.month.split("-")[0].slice(2)]},O))})]})}function wD(){const[s,e]=_.useState("bests"),[n,i]=_.useState([]),[l,u]=_.useState(!0),[d,p]=_.useState(!1),[g,y]=_.useState(0),[x,k]=_.useState(!1),[j,L]=_.useState(!1),[H,B]=_.useState(!1),[O,ee]=_.useState({}),[Q,oe]=_.useState({}),[be,Ve]=_.useState({}),[Ae,I]=_.useState({}),[E,A]=_.useState({}),[P,D]=_.useState(!1),[z,M]=_.useState({}),[ke,ht]=_.useState([]),[K,we]=_.useState(null),[Le,re]=_.useState(null),[De,N]=_.useState(!1),[V,ie]=_.useState(""),[pe,Se]=_.useState(""),[Me,Qe]=_.useState({}),[Fe,Ge]=_.useState({}),[bt,nn]=_.useState(null),[wt,vt]=_.useState(null),[ne,ln]=_.useState(""),Vt=_.useRef(null),_t=_.useRef(0),At=_.useRef(0),ct=_.useRef("right"),Xe=_.useCallback(F=>{y(ce=>{const T=Math.max(0,Math.min(ta.length-1,F));return T===ce?ce:(ct.current=T>ce?"right":"left",T)})},[]),{currentUser:Gt,isClient:is,clientData:It,loading:zt}=rr(),{isDark:Bn}=qr(),Ht=Ss(),[wn]=Lj(),me=wn.get("mode")==="corebuddy",Te=!me&&(!It?.clientType||It.clientType==="block"),Re=_.useCallback((F,ce="info")=>{re({message:F,type:ce}),setTimeout(()=>re(null),4e3)},[]);_.useEffect(()=>{!zt&&(!Gt||!is)&&Ht("/")},[Gt,is,zt,Ht]),_.useEffect(()=>{It&&(Te?st():(async()=>{try{const[ce,T,R]=await Promise.all([Dn(nt(Ie,"coreBuddyPBs",It.id)),Dn(nt(Ie,"coreBuddyTargets",It.id)),Dn(nt(Ie,"coreBuddyAchievements",It.id))]);ce.exists()&&Qe(ce.data().exercises||{}),T.exists()&&Ge(T.data().targets||{}),R.exists()&&nn(R.data())}catch(ce){console.error("Error loading Core Buddy PBs:",ce)}u(!1)})())},[It]);const st=async()=>{try{const F=Vn(dn(Ie,"personalBests"),Tn("clientId","==",It.id)),T=(await Cn(F)).docs.map(Be=>({id:Be.id,...Be.data()}));T.sort((Be,Oe)=>Be.month.localeCompare(Oe.month)),i(T);const R=Vn(dn(Ie,"personalBestTargets"),Tn("clientId","==",It.id)),G=await Cn(R);if(!G.empty){const Be=G.docs[0].data();Ve(Be.targets||{}),I(Be.metricTargets||{}),A(Be.targets||{}),M(Be.metricTargets||{})}const J=Vn(dn(Ie,"achievements"),Tn("clientId","==",It.id)),He=await Cn(J);He.empty||ht(He.docs[0].data().badges||[])}catch(F){console.error("Error fetching personal bests:",F)}u(!1)},Je=async()=>{if(!wt||!ne||!It)return;const F=parseFloat(ne),ce=Me[wt];if(!ce||F<=ce.weight){Re("Target must be higher than current PB","error");return}p(!0);try{const T={...Fe,[wt]:{targetWeight:F,setAt:ft.now(),currentPBWhenSet:ce.weight}};await In(nt(Ie,"coreBuddyTargets",It.id),{clientId:It.id,targets:T,updatedAt:ft.now()}),Ge(T),vt(null),ln(""),Re("Target set!","success")}catch(T){console.error("Error saving target:",T),Re("Failed to save target","error")}p(!1)},qe=F=>{if(!bt?.badges)return!1;const ce=Fe[F];return ce?bt.badges.some(T=>T.type==="pb_target"&&T.exercise===F&&T.targetWeight===ce.targetWeight):!1},et=F=>{const ce=Fe[F];if(!ce)return null;const T=Me[F];if(!T)return 0;const R=ce.currentPBWhenSet||0,G=ce.targetWeight,J=G-R;return J<=0?T.weight>=G?1:0:Math.max(0,Math.min((T.weight-R)/J,1))},Ke=bD(),Ue=n.find(F=>F.month===Ke),xe=n.filter(F=>F.month<Ke),ze=xe.length>0?xe[xe.length-1]:null;_.useEffect(()=>{Ue?(ee(Ue.benchmarks||{}),oe(Ue.bodyMetrics||{})):(ee({}),oe({}))},[Ue?.id]);const lt=async(F,ce)=>{const T=[];if(F==="strength"?ta.forEach(R=>{const G=be[R.key];if(!G)return;const J=ce[R.key];if(!J)return;let He;if(G.targetType==="time"){if(!G.targetValue)return;const Be=G.startValue||0,Oe=J.time||0,Ot=G.targetValue-Be;He=Ot===0?Oe>=G.targetValue?1:0:Math.max(0,(Oe-Be)/Ot)}else{if(!G.targetWeight&&!G.targetReps)return;const Be=(G.startWeight||0)*(G.startReps||0),Oe=(G.targetWeight||0)*(G.targetReps||0),Ot=(J.weight||0)*(J.reps||0),xt=Oe-Be;He=xt===0?Ot>=Oe?1:0:Math.max(0,(Ot-Be)/xt)}if(He>=1&&!(G.targetType==="time"?ke.some(Oe=>Oe.type==="strength"&&Oe.key===R.key&&Oe.targetValue===G.targetValue):ke.some(Oe=>Oe.type==="strength"&&Oe.key===R.key&&Oe.targetWeight===G.targetWeight&&Oe.targetReps===G.targetReps))){const Oe=G.targetType==="time"?`${R.name} ${G.targetValue}s`:`${R.name} ${G.targetWeight}kg  ${G.targetReps}`;T.push({type:"strength",key:R.key,...G.targetType==="time"?{targetType:"time",targetValue:G.targetValue}:{targetWeight:G.targetWeight,targetReps:G.targetReps},achievedMonth:Ke,label:Oe})}}):mo.forEach(R=>{const G=Ae[R.key];if(!G||!G.targetValue)return;const J=ce[R.key];if(J==null)return;const He=G.startValue||0,Be=G.targetValue,Oe=Be-He;(Oe===0?J===Be?1:0:Math.max(0,(J-He)/Oe))>=1&&(ke.some(W=>W.type==="metric"&&W.key===R.key&&W.targetValue===Be)||T.push({type:"metric",key:R.key,targetValue:Be,achievedMonth:Ke,label:`${R.name} ${Be}${R.suffix}`}))}),T.length>0){const R=[...ke,...T];await In(nt(Ie,"achievements",It.id),{clientId:It.id,badges:R,updatedAt:ft.now()}),ht(R),we(T),setTimeout(()=>we(null),5e3)}},Et=(F,ce)=>{if(F==="strength"){const T=be[ce];return T?T.targetType==="time"?ke.some(R=>R.type==="strength"&&R.key===ce&&R.targetValue===T.targetValue):!T.targetWeight&&!T.targetReps?!1:ke.some(R=>R.type==="strength"&&R.key===ce&&R.targetWeight===T.targetWeight&&R.targetReps===T.targetReps):!1}else{const T=Ae[ce];return!T||!T.targetValue?!1:ke.some(R=>R.type==="metric"&&R.key===ce&&R.targetValue===T.targetValue)}},$t=async()=>{p(!0);try{const F=`${It.id}_${Ke}`,ce=Ue||{};await In(nt(Ie,"personalBests",F),{clientId:It.id,month:Ke,benchmarks:O,bodyMetrics:ce.bodyMetrics||Q||{},createdAt:ce.createdAt||ft.now(),updatedAt:ft.now()}),await lt("strength",O),Re("Benchmarks saved!","success"),k(!1),await st()}catch(F){console.error("Error saving benchmarks:",F),Re("Failed to save. Please try again.","error")}p(!1)},Ye=async()=>{p(!0);try{const F=`${It.id}_${Ke}`,ce=Ue||{};await In(nt(Ie,"personalBests",F),{clientId:It.id,month:Ke,benchmarks:ce.benchmarks||O||{},bodyMetrics:Q,createdAt:ce.createdAt||ft.now(),updatedAt:ft.now()}),await lt("metric",Q),Re("Body metrics saved!","success"),L(!1),await st()}catch(F){console.error("Error saving metrics:",F),Re("Failed to save. Please try again.","error")}p(!1)},jt=(F,ce,T)=>{ee(R=>({...R,[F]:{...R[F],[ce]:T===""?"":parseFloat(T)}}))},Ct=(F,ce)=>{oe(T=>({...T,[F]:ce===""?"":parseFloat(ce)}))},Dt=(F,ce,T)=>{A(R=>({...R,[F]:{...R[F],[ce]:T===""?"":parseFloat(T)}}))},Ft=async()=>{p(!0);try{const F=`targets_${It.id}`,ce=Ue?.benchmarks||{},T={};ta.forEach(R=>{const G=ce[R.key];R.unit==="time"?E[R.key]?.targetValue&&(T[R.key]={targetType:"time",targetValue:E[R.key].targetValue,startValue:G?.time||0}):(E[R.key]?.targetWeight||E[R.key]?.targetReps)&&(T[R.key]={targetWeight:E[R.key].targetWeight||0,targetReps:E[R.key].targetReps||0,startWeight:G?.weight||0,startReps:G?.reps||0})}),await In(nt(Ie,"personalBestTargets",F),{clientId:It.id,targets:T,metricTargets:Ae,updatedAt:ft.now()}),Ve(T),A(T),Re("Targets saved!","success"),B(!1)}catch(F){console.error("Error saving targets:",F),Re("Failed to save targets.","error")}p(!1)},Tt=(F,ce)=>{M(T=>({...T,[F]:{...T[F],targetValue:ce===""?"":parseFloat(ce)}}))},sn=async()=>{p(!0);try{const F=`targets_${It.id}`,ce={};mo.forEach(T=>{if(z[T.key]?.targetValue){const R=Ue?.bodyMetrics?.[T.key]||0;ce[T.key]={targetValue:z[T.key].targetValue,startValue:R}}}),await In(nt(Ie,"personalBestTargets",F),{clientId:It.id,targets:be,metricTargets:ce,updatedAt:ft.now()}),I(ce),M(ce),Re("Metric targets saved!","success"),D(!1)}catch(F){console.error("Error saving metric targets:",F),Re("Failed to save targets.","error")}p(!1)},Wt=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const F=nt(Ie,"personalBestTargets",`targets_${It.id}`);await yr(F),Ve({}),I({}),A({}),M({}),Re("All goals have been reset","success")}catch(F){console.error("Error resetting targets:",F),Re("Failed to reset goals","error")}p(!1)}},rn=(F,ce)=>{const T=be[F];if(!T||!ce)return null;if(T.targetType==="time"){if(!T.targetValue)return null;const Be=T.startValue||0,Oe=T.targetValue,Ot=ce.time||0,xt=Oe-Be;return xt<=0?Ot>=Oe?1:0:Math.max(0,Math.min((Ot-Be)/xt,1))}if(!T.targetWeight&&!T.targetReps)return null;const R=(T.startWeight||0)*(T.startReps||0),G=(T.targetWeight||0)*(T.targetReps||0),J=(ce.weight||0)*(ce.reps||0),He=G-R;return He<=0?J>=G?1:0:Math.max(0,Math.min((J-R)/He,1))},un=F=>{const ce=Ae[F];if(!ce||!ce.targetValue)return null;const T=Ue?.bodyMetrics?.[F];if(T==null)return null;const R=ce.startValue||0,G=ce.targetValue,J=G-R;return J===0?T===G?1:0:Math.max(0,Math.min((T-R)/J,1))},fn=F=>{_t.current=F.touches[0].clientX,At.current=0},Rn=F=>{At.current=F.touches[0].clientX-_t.current},q=()=>{At.current<-50?Xe(g+1):At.current>50&&Xe(g-1),At.current=0},fe=F=>{const ce=Ue?.bodyMetrics?.[F],T=ze?.bodyMetrics?.[F];return ce==null||T==null?null:parseFloat((ce-T).toFixed(2))},ge=n.find(F=>F.month===V),ve=n.find(F=>F.month===pe);if(zt||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Gt||!is||!It)return null;if(Te&&It?.isJunior)return a.jsx(vD,{});const de=ta[g],We=Ue?.benchmarks?.[de.key],mt=ze?.benchmarks?.[de.key],tt=gl(de,We),dt=gl(de,mt),pt=Vp(tt,dt),an=rn(de.key,We),Ns=an!==null,Wn=an!==null&&an>=1,Qn=Ns?Math.round(an*60):tt>0?15:0,mn=be[de.key];return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>Ht(me?"/client/core-buddy":"/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Personal Bests"}),a.jsx("p",{children:Te?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!Te&&a.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Me).length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("div",{className:"pb-cb-empty-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),a.jsx("h4",{children:"No personal bests yet"}),a.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):a.jsx("div",{className:"pb-cb-grid",children:Object.entries(Me).sort(([F],[ce])=>F.localeCompare(ce)).map(([F,ce],T)=>{const R=Fe[F],G=et(F),J=G!==null&&G>=1,He=qe(F),Be=G!==null?Math.round(G*60):60;return a.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${T*.05}s`},children:[a.jsxs("div",{className:"pb-cb-card-ring",children:[a.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:N3.map((Oe,Ot)=>{const xt=Ot<Be;return a.jsx("line",{x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,className:`pb-ring-tick ${xt?J?"hit":"filled":"empty"}`,strokeWidth:Oe.thick?"2":"1.5"},Ot)})}),a.jsx("div",{className:"pb-cb-ring-icon",children:He?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),a.jsxs("div",{className:"pb-cb-card-info",children:[a.jsx("h4",{className:"pb-cb-card-name",children:F}),a.jsxs("div",{className:"pb-cb-card-value",children:[ce.weight,"kg  ",ce.reps]}),ce.achievedAt&&a.jsx("div",{className:"pb-cb-card-date",children:(ce.achievedAt.toDate?ce.achievedAt.toDate():new Date(ce.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),R&&!J&&a.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",R.targetWeight,"kg (",Math.round((G||0)*100),"%)"]}),R&&J&&!He&&a.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),He&&a.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),a.jsx("div",{className:"pb-cb-card-action",children:R?J&&He?a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{vt(F),ln("")},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{vt(F),ln("")},children:a.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},F)})}),Object.keys(Me).length>0&&a.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>Ht("/client/core-buddy/achievements"),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),wt&&a.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>vt(null),children:a.jsxs("div",{className:"pb-cb-target-modal",onClick:F=>F.stopPropagation(),children:[a.jsx("h3",{children:"Set Target"}),a.jsx("p",{className:"pb-cb-target-exercise-name",children:wt}),a.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",a.jsxs("strong",{children:[Me[wt]?.weight,"kg"]})]}),a.jsxs("div",{className:"pb-cb-target-input-wrap",children:[a.jsx("label",{children:"Your target (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:ne,onChange:F=>ln(F.target.value),placeholder:String((Me[wt]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),a.jsxs("div",{className:"pb-cb-target-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>vt(null),children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Je,disabled:d,children:d?"Saving...":"Set Target"})]})]})})]}),Te&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!x&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:Vt,onTouchStart:fn,onTouchMove:Rn,onTouchEnd:q,children:[a.jsx("div",{className:`pb-ring-container slide-from-${ct.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Ry.map((F,ce)=>{const T=ce<Math.round(Qn);return a.jsx("line",{x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,className:`pb-ring-tick ${T?Wn?"hit":"filled":"empty"}`,strokeWidth:F.thick?"3":"2"},ce)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:de.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[de.name,Et("strength",de.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:We?de.unit==="time"?sd(We.time):cx(We.weight,We.reps):"-"}),pt!==null&&a.jsxs("div",{className:`pb-ring-change ${pt>=0?"positive":"negative"}`,children:[pt>=0?"+":"",pt.toFixed(1),"%"]}),pt===null&&We&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),mn&&a.jsx("div",{className:`pb-ring-target ${Wn?"hit":""}`,children:Wn?"Target hit!":mn.targetType==="time"?`${mn.startValue||0}s  ${mn.targetValue}s`:`${mn.startWeight||0}kg${mn.startReps||0}  ${mn.targetWeight}kg${mn.targetReps}`}),!mn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:ta.map((F,ce)=>a.jsx("button",{className:`pb-dot ${ce===g?"active":""}`,onClick:()=>Xe(ce)},ce))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Xe(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Xe(g+1),disabled:g===ta.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(xD,{data:n,exerciseKey:de.key,unit:de.unit})]})]}),!x&&!H&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:Ue?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>B(!0),children:Object.keys(be).length>0?"Edit Targets":"Set Targets"}),(Object.keys(be).length>0||Object.keys(Ae).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Wt,disabled:d,children:"Reset All Goals"})]}),x&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Dr(Ke)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),ee(Ue?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:ta.map(F=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:F.name}),F.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:O[F.key]?.weight??"",onChange:ce=>jt(F.key,"weight",ce.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:O[F.key]?.reps??"",onChange:ce=>jt(F.key,"reps",ce.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:O[F.key]?.time??"",onChange:ce=>jt(F.key,"time",ce.target.value),placeholder:"0"})]})})]},F.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),ee(Ue?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:$t,disabled:d,children:d?"Saving...":"Save"})]})]}),H&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),A(be)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),ta.map(F=>{const ce=Ue?.benchmarks?.[F.key];let T="-";return ce&&(F.unit==="time"&&ce.time?T=`${ce.time}s`:(ce.weight||ce.reps)&&(T=`${ce.weight||0}kg  ${ce.reps||0}`)),a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:F.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",T]})]}),F.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:E[F.key]?.targetWeight??"",onChange:R=>Dt(F.key,"targetWeight",R.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:E[F.key]?.targetReps??"",onChange:R=>Dt(F.key,"targetReps",R.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:E[F.key]?.targetValue??"",onChange:R=>Dt(F.key,"targetValue",R.target.value),placeholder:"0"})]})})]},F.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),A(be)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ft,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!j&&!P&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Dr(Ke)}),a.jsx("div",{className:"pb-metrics-list",children:mo.map(F=>{const ce=Ue?.bodyMetrics?.[F.key],T=fe(F.key),R=Ae[F.key],G=un(F.key),J=G!==null&&G>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[F.name,Et("metric",F.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),R&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",R.targetValue," ",F.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ce!=null?`${ce} ${F.suffix}`:"-"}),T!==null&&a.jsxs("span",{className:`pb-metric-change ${T>0?"up":T<0?"down":"same"}`,children:[T>0?"+":"",T," ",F.suffix]})]})]}),G!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${J?"hit":""}`,style:{width:`${Math.round(G*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${J?"hit":""}`,children:J?"Hit!":`${Math.round(G*100)}%`})]})]},F.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:Ue?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(be).length>0||Object.keys(Ae).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Wt,disabled:d,children:"Reset All Goals"})]})]}),j&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Dr(Ke)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),oe(Ue?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:mo.map(F=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[F.name," (",F.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:Q[F.key]??"",onChange:ce=>Ct(F.key,ce.target.value),placeholder:"0"})]})},F.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),oe(Ue?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ye,disabled:d,children:d?"Saving...":"Save"})]})]}),P&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),M(Ae)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),mo.map(F=>{const ce=Ue?.bodyMetrics?.[F.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:F.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ce!=null?`${ce} ${F.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",F.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:z[F.key]?.targetValue??"",onChange:T=>Tt(F.key,T.target.value),placeholder:"0"})]})})]},F.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),M(Ae)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:sn,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[ke.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...ke].reverse().map((F,ce)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ce*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:F.label}),a.jsx("span",{className:"pb-achievement-date",children:Dr(F.achievedMonth)})]})]},ce))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${De?"active":""}`,onClick:()=>{N(!De),!De&&n.length>=2&&(ie(n[0].month),Se(n[n.length-1].month))},children:De?"Back to Timeline":"Compare Months"})}),De?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:V,onChange:F=>ie(F.target.value),children:n.map(F=>a.jsx("option",{value:F.month,children:Dr(F.month)},F.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:pe,onChange:F=>Se(F.target.value),children:n.map(F=>a.jsx("option",{value:F.month,children:Dr(F.month)},F.month))})]})]}),ge&&ve&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Benchmarks"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Dr(V).split(" ")[0]}),a.jsx("span",{children:Dr(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),ta.map(F=>{const ce=ge.benchmarks?.[F.key],T=ve.benchmarks?.[F.key],R=gl(F,ce),G=gl(F,T),J=Vp(G,R);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:F.name}),a.jsx("span",{className:"pb-compare-val",children:ce?F.unit==="time"?sd(ce.time):`${ce.weight}x${ce.reps}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:T?F.unit==="time"?sd(T.time):`${T.weight}x${T.reps}`:"-"}),a.jsx("span",{className:`pb-compare-change ${J!==null?J>=0?"positive":"negative":""}`,children:J!==null?`${J>=0?"+":""}${J.toFixed(1)}%`:"-"})]},F.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Dr(V).split(" ")[0]}),a.jsx("span",{children:Dr(pe).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),mo.map(F=>{const ce=ge.bodyMetrics?.[F.key],T=ve.bodyMetrics?.[F.key],R=ce!=null&&T!=null?parseFloat((T-ce).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:F.name}),a.jsx("span",{className:"pb-compare-val",children:ce!=null?`${ce}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:T!=null?`${T}`:"-"}),a.jsx("span",{className:`pb-compare-change ${R!==null?R>0?"positive":R<0?"negative":"neutral":""}`,children:R!==null?`${R>0?"+":""}${R} ${F.suffix}`:"-"})]},F.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((F,ce)=>{const T=n.find(R=>R.month<F.month&&n.indexOf(R)===n.indexOf(F)-1)||n.filter(R=>R.month<F.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ce*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Dr(F.month)}),F.benchmarks&&Object.keys(F.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Benchmarks"}),ta.map(R=>{const G=F.benchmarks[R.key];if(!G)return null;const J=T?.benchmarks?.[R.key],He=gl(R,G),Be=gl(R,J),Oe=Vp(He,Be);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:R.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:R.unit==="time"?sd(G.time):cx(G.weight,G.reps)}),Oe!==null&&a.jsxs("span",{className:`pb-timeline-change ${Oe>=0?"positive":"negative"}`,children:[Oe>=0?"+":"",Oe.toFixed(1),"%"]})]})]},R.key)})]}),F.bodyMetrics&&Object.keys(F.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),mo.map(R=>{const G=F.bodyMetrics[R.key];if(G==null)return null;const J=T?.bodyMetrics?.[R.key],He=J!=null?parseFloat((G-J).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:R.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[G," ",R.suffix]}),He!==null&&a.jsxs("span",{className:`pb-timeline-change ${He>0?"positive":He<0?"negative":"neutral"}`,children:[He>0?"+":"",He," ",R.suffix]})]})]},R.key)})]})]})]},F.id)})})]})})]})]}),K&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>we(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:K.length===1?"Target Achieved!":`${K.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:K.map((F,ce)=>a.jsx("div",{className:"pb-celebration-badge",children:F.label},ce))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Le&&a.jsxs("div",{className:`toast-notification ${Le.type}`,children:[a.jsx("span",{className:"toast-icon",children:Le.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Le.message}),a.jsx("button",{className:"toast-close",onClick:()=>re(null),children:""})]}),Te&&a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),It?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]}),me&&a.jsx(Ur,{active:"progress"})]})}const _D=_.lazy(()=>xr(()=>import("./Dashboard-3vcdqUlm.js"),__vite__mapDeps([0,1]))),kD=_.lazy(()=>xr(()=>import("./AddClient-Ds774UBN.js"),__vite__mapDeps([2,3]))),TD=_.lazy(()=>xr(()=>import("./ClientDashboard-qvu2yVAW.js"),[])),ED=_.lazy(()=>xr(()=>import("./ClientForms-DO5Yhap-.js"),__vite__mapDeps([4,5]))),jD=_.lazy(()=>xr(()=>import("./ClientTools-D_RaM70n.js"),__vite__mapDeps([6,7]))),SD=_.lazy(()=>xr(()=>import("./MacroCalculator-BR63_s2D.js"),__vite__mapDeps([8,7]))),ND=_.lazy(()=>xr(()=>import("./ProteinSnacks-SvNhZrhj.js"),__vite__mapDeps([9,7]))),CD=_.lazy(()=>xr(()=>import("./DailyMotivation-CNBIUwY7.js"),__vite__mapDeps([10,7]))),RD=_.lazy(()=>xr(()=>import("./CircuitDashboard-D-1xLqMc.js"),__vite__mapDeps([11,12]))),AD=_.lazy(()=>xr(()=>import("./CircuitBooking-8gx37XBE.js"),__vite__mapDeps([13,14,12]))),ID=_.lazy(()=>xr(()=>import("./Leaderboard-CHEO8l-4.js"),__vite__mapDeps([15,16])));function MD({children:s}){const{pathname:e}=Fr();return _.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),_.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function DD(){const s=Ss();return _.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function PD(){return a.jsx(E3,{children:a.jsx(T3,{children:a.jsxs(Aj,{basename:"/login",children:[a.jsx(DD,{}),a.jsx(MD,{children:a.jsx(_.Suspense,{fallback:null,children:a.jsxs(ij,{children:[a.jsx(qn,{path:"/",element:a.jsx(j3,{})}),a.jsx(qn,{path:"/dashboard",element:a.jsx(_D,{})}),a.jsx(qn,{path:"/add-client",element:a.jsx(kD,{})}),a.jsx(qn,{path:"/client",element:a.jsx(TD,{})}),a.jsx(qn,{path:"/client/forms",element:a.jsx(ED,{})}),a.jsx(qn,{path:"/client/tools",element:a.jsx(jD,{})}),a.jsx(qn,{path:"/client/tools/macros",element:a.jsx(SD,{})}),a.jsx(qn,{path:"/client/tools/snacks",element:a.jsx(ND,{})}),a.jsx(qn,{path:"/client/tools/motivation",element:a.jsx(CD,{})}),a.jsx(qn,{path:"/client/personal-bests",element:a.jsx(wD,{})}),a.jsx(qn,{path:"/client/circuit",element:a.jsx(RD,{})}),a.jsx(qn,{path:"/client/circuit/booking",element:a.jsx(AD,{})}),a.jsx(qn,{path:"/client/core-buddy",element:a.jsx(I3,{})}),a.jsx(qn,{path:"/client/core-buddy/nutrition",element:a.jsx(P3,{})}),a.jsx(qn,{path:"/client/core-buddy/workouts",element:a.jsx(W3,{})}),a.jsx(qn,{path:"/client/core-buddy/programmes",element:a.jsx(X3,{})}),a.jsx(qn,{path:"/client/core-buddy/achievements",element:a.jsx(sD,{})}),a.jsx(qn,{path:"/client/core-buddy/consistency",element:a.jsx(iD,{})}),a.jsx(qn,{path:"/client/core-buddy/buddies",element:a.jsx(oD,{})}),a.jsx(qn,{path:"/client/core-buddy/profile/:userId",element:a.jsx(dD,{})}),a.jsx(qn,{path:"/client/core-buddy/feed",element:a.jsx(fD,{})}),a.jsx(qn,{path:"/client/leaderboard",element:a.jsx(ID,{})}),a.jsx(qn,{path:"*",element:a.jsx(rj,{to:"/",replace:!0})})]})})})]})})})}aE.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(PD,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{Ur as C,ft as T,fu as a,yr as b,dn as c,Ie as d,nt as e,LD as f,Cn as g,N4 as h,Dn as i,a as j,rr as k,qr as l,Ss as m,Ry as n,z2 as o,In as p,Vn as q,_ as r,VD as s,gd as u,Tn as w};
