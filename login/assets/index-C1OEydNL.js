(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var fm={exports:{}},Ql={};var j_;function rA(){if(j_)return Ql;j_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:c}}return Ql.Fragment=e,Ql.jsx=n,Ql.jsxs=n,Ql}var V_;function aA(){return V_||(V_=1,fm.exports=rA()),fm.exports}var m=aA(),mm={exports:{}},De={};var L_;function oA(){if(L_)return De;L_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),w=Symbol.iterator;function P(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,z={};function ee(V,ie,Y){this.props=V,this.context=ie,this.refs=z,this.updater=Y||L}ee.prototype.isReactComponent={},ee.prototype.setState=function(V,ie){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ie,"setState")},ee.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function G(){}G.prototype=ee.prototype;function le(V,ie,Y){this.props=V,this.context=ie,this.refs=z,this.updater=Y||L}var pe=le.prototype=new G;pe.constructor=le,j(pe,ee.prototype),pe.isPureReactComponent=!0;var $=Array.isArray;function te(){}var N={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R(V,ie,Y){var Z=Y.ref;return{$$typeof:s,type:V,key:ie,ref:Z!==void 0?Z:null,props:Y}}function D(V,ie){return R(V.type,ie,V.props)}function x(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function k(V){var ie={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(Y){return ie[Y]})}var I=/\/+/g;function we(V,ie){return typeof V=="object"&&V!==null&&V.key!=null?k(""+V.key):ie.toString(36)}function Ve(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(te,te):(V.status="pending",V.then(function(ie){V.status==="pending"&&(V.status="fulfilled",V.value=ie)},function(ie){V.status==="pending"&&(V.status="rejected",V.reason=ie)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function J(V,ie,Y,Z,ue){var fe=typeof V;(fe==="undefined"||fe==="boolean")&&(V=null);var ce=!1;if(V===null)ce=!0;else switch(fe){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(V.$$typeof){case s:case e:ce=!0;break;case T:return ce=V._init,J(ce(V._payload),ie,Y,Z,ue)}}if(ce)return ue=ue(V),ce=Z===""?"."+we(V,0):Z,$(ue)?(Y="",ce!=null&&(Y=ce.replace(I,"$&/")+"/"),J(ue,ie,Y,"",function(at){return at})):ue!=null&&(x(ue)&&(ue=D(ue,Y+(ue.key==null||V&&V.key===ue.key?"":(""+ue.key).replace(I,"$&/")+"/")+ce)),ie.push(ue)),1;ce=0;var Re=Z===""?".":Z+":";if($(V))for(var Me=0;Me<V.length;Me++)Z=V[Me],fe=Re+we(Z,Me),ce+=J(Z,ie,Y,fe,ue);else if(Me=P(V),typeof Me=="function")for(V=Me.call(V),Me=0;!(Z=V.next()).done;)Z=Z.value,fe=Re+we(Z,Me++),ce+=J(Z,ie,Y,fe,ue);else if(fe==="object"){if(typeof V.then=="function")return J(Ve(V),ie,Y,Z,ue);throw ie=String(V),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ce}function he(V,ie,Y){if(V==null)return V;var Z=[],ue=0;return J(V,Z,"","",function(fe){return ie.call(Y,fe,ue++)}),Z}function _e(V){if(V._status===-1){var ie=V._result;ie=ie(),ie.then(function(Y){(V._status===0||V._status===-1)&&(V._status=1,V._result=Y)},function(Y){(V._status===0||V._status===-1)&&(V._status=2,V._result=Y)}),V._status===-1&&(V._status=0,V._result=ie)}if(V._status===1)return V._result.default;throw V._result}var Ue=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Be={map:he,forEach:function(V,ie,Y){he(V,function(){ie.apply(this,arguments)},Y)},count:function(V){var ie=0;return he(V,function(){ie++}),ie},toArray:function(V){return he(V,function(ie){return ie})||[]},only:function(V){if(!x(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return De.Activity=S,De.Children=Be,De.Component=ee,De.Fragment=n,De.Profiler=o,De.PureComponent=le,De.StrictMode=r,De.Suspense=g,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,De.__COMPILER_RUNTIME={__proto__:null,c:function(V){return N.H.useMemoCache(V)}},De.cache=function(V){return function(){return V.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(V,ie,Y){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Z=j({},V.props),ue=V.key;if(ie!=null)for(fe in ie.key!==void 0&&(ue=""+ie.key),ie)!C.call(ie,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&ie.ref===void 0||(Z[fe]=ie[fe]);var fe=arguments.length-2;if(fe===1)Z.children=Y;else if(1<fe){for(var ce=Array(fe),Re=0;Re<fe;Re++)ce[Re]=arguments[Re+2];Z.children=ce}return R(V.type,ue,Z)},De.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:c,_context:V},V},De.createElement=function(V,ie,Y){var Z,ue={},fe=null;if(ie!=null)for(Z in ie.key!==void 0&&(fe=""+ie.key),ie)C.call(ie,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ue[Z]=ie[Z]);var ce=arguments.length-2;if(ce===1)ue.children=Y;else if(1<ce){for(var Re=Array(ce),Me=0;Me<ce;Me++)Re[Me]=arguments[Me+2];ue.children=Re}if(V&&V.defaultProps)for(Z in ce=V.defaultProps,ce)ue[Z]===void 0&&(ue[Z]=ce[Z]);return R(V,fe,ue)},De.createRef=function(){return{current:null}},De.forwardRef=function(V){return{$$typeof:p,render:V}},De.isValidElement=x,De.lazy=function(V){return{$$typeof:T,_payload:{_status:-1,_result:V},_init:_e}},De.memo=function(V,ie){return{$$typeof:v,type:V,compare:ie===void 0?null:ie}},De.startTransition=function(V){var ie=N.T,Y={};N.T=Y;try{var Z=V(),ue=N.S;ue!==null&&ue(Y,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(te,Ue)}catch(fe){Ue(fe)}finally{ie!==null&&Y.types!==null&&(ie.types=Y.types),N.T=ie}},De.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},De.use=function(V){return N.H.use(V)},De.useActionState=function(V,ie,Y){return N.H.useActionState(V,ie,Y)},De.useCallback=function(V,ie){return N.H.useCallback(V,ie)},De.useContext=function(V){return N.H.useContext(V)},De.useDebugValue=function(){},De.useDeferredValue=function(V,ie){return N.H.useDeferredValue(V,ie)},De.useEffect=function(V,ie){return N.H.useEffect(V,ie)},De.useEffectEvent=function(V){return N.H.useEffectEvent(V)},De.useId=function(){return N.H.useId()},De.useImperativeHandle=function(V,ie,Y){return N.H.useImperativeHandle(V,ie,Y)},De.useInsertionEffect=function(V,ie){return N.H.useInsertionEffect(V,ie)},De.useLayoutEffect=function(V,ie){return N.H.useLayoutEffect(V,ie)},De.useMemo=function(V,ie){return N.H.useMemo(V,ie)},De.useOptimistic=function(V,ie){return N.H.useOptimistic(V,ie)},De.useReducer=function(V,ie,Y){return N.H.useReducer(V,ie,Y)},De.useRef=function(V){return N.H.useRef(V)},De.useState=function(V){return N.H.useState(V)},De.useSyncExternalStore=function(V,ie,Y){return N.H.useSyncExternalStore(V,ie,Y)},De.useTransition=function(){return N.H.useTransition()},De.version="19.2.4",De}var P_;function mp(){return P_||(P_=1,mm.exports=oA()),mm.exports}var M=mp(),pm={exports:{}},Xl={},gm={exports:{}},ym={};var U_;function lA(){return U_||(U_=1,(function(s){function e(J,he){var _e=J.length;J.push(he);e:for(;0<_e;){var Ue=_e-1>>>1,Be=J[Ue];if(0<o(Be,he))J[Ue]=he,J[_e]=Be,_e=Ue;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var he=J[0],_e=J.pop();if(_e!==he){J[0]=_e;e:for(var Ue=0,Be=J.length,V=Be>>>1;Ue<V;){var ie=2*(Ue+1)-1,Y=J[ie],Z=ie+1,ue=J[Z];if(0>o(Y,_e))Z<Be&&0>o(ue,Y)?(J[Ue]=ue,J[Z]=_e,Ue=Z):(J[Ue]=Y,J[ie]=_e,Ue=ie);else if(Z<Be&&0>o(ue,_e))J[Ue]=ue,J[Z]=_e,Ue=Z;else break e}}return he}function o(J,he){var _e=J.sortIndex-he.sortIndex;return _e!==0?_e:J.id-he.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],v=[],T=1,S=null,w=3,P=!1,L=!1,j=!1,z=!1,ee=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function pe(J){for(var he=n(v);he!==null;){if(he.callback===null)r(v);else if(he.startTime<=J)r(v),he.sortIndex=he.expirationTime,e(g,he);else break;he=n(v)}}function $(J){if(j=!1,pe(J),!L)if(n(g)!==null)L=!0,te||(te=!0,k());else{var he=n(v);he!==null&&Ve($,he.startTime-J)}}var te=!1,N=-1,C=5,R=-1;function D(){return z?!0:!(s.unstable_now()-R<C)}function x(){if(z=!1,te){var J=s.unstable_now();R=J;var he=!0;try{e:{L=!1,j&&(j=!1,G(N),N=-1),P=!0;var _e=w;try{t:{for(pe(J),S=n(g);S!==null&&!(S.expirationTime>J&&D());){var Ue=S.callback;if(typeof Ue=="function"){S.callback=null,w=S.priorityLevel;var Be=Ue(S.expirationTime<=J);if(J=s.unstable_now(),typeof Be=="function"){S.callback=Be,pe(J),he=!0;break t}S===n(g)&&r(g),pe(J)}else r(g);S=n(g)}if(S!==null)he=!0;else{var V=n(v);V!==null&&Ve($,V.startTime-J),he=!1}}break e}finally{S=null,w=_e,P=!1}he=void 0}}finally{he?k():te=!1}}}var k;if(typeof le=="function")k=function(){le(x)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,we=I.port2;I.port1.onmessage=x,k=function(){we.postMessage(null)}}else k=function(){ee(x,0)};function Ve(J,he){N=ee(function(){J(s.unstable_now())},he)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(J){J.callback=null},s.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<J?Math.floor(1e3/J):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(J){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var _e=w;w=he;try{return J()}finally{w=_e}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var _e=w;w=J;try{return he()}finally{w=_e}},s.unstable_scheduleCallback=function(J,he,_e){var Ue=s.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Ue+_e:Ue):_e=Ue,J){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=_e+Be,J={id:T++,callback:he,priorityLevel:J,startTime:_e,expirationTime:Be,sortIndex:-1},_e>Ue?(J.sortIndex=_e,e(v,J),n(g)===null&&J===n(v)&&(j?(G(N),N=-1):j=!0,Ve($,_e-Ue))):(J.sortIndex=Be,e(g,J),L||P||(L=!0,te||(te=!0,k()))),J},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(J){var he=w;return function(){var _e=w;w=he;try{return J.apply(this,arguments)}finally{w=_e}}}})(ym)),ym}var z_;function cA(){return z_||(z_=1,gm.exports=lA()),gm.exports}var vm={exports:{}},gn={};var B_;function uA(){if(B_)return gn;B_=1;var s=mp();function e(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,v,T){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:g,containerInfo:v,implementation:T}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gn.createPortal=function(g,v){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return c(g,v,null,T)},gn.flushSync=function(g){var v=h.T,T=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=v,r.p=T,r.d.f()}},gn.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(g,v))},gn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},gn.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var T=v.as,S=p(T,v.crossOrigin),w=typeof v.integrity=="string"?v.integrity:void 0,P=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;T==="style"?r.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:S,integrity:w,fetchPriority:P}):T==="script"&&r.d.X(g,{crossOrigin:S,integrity:w,fetchPriority:P,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},gn.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var T=p(v.as,v.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(g)},gn.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var T=v.as,S=p(T,v.crossOrigin);r.d.L(g,T,{crossOrigin:S,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},gn.preloadModule=function(g,v){if(typeof g=="string")if(v){var T=p(v.as,v.crossOrigin);r.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(g)},gn.requestFormReset=function(g){r.d.r(g)},gn.unstable_batchedUpdates=function(g,v){return g(v)},gn.useFormState=function(g,v,T){return h.H.useFormState(g,v,T)},gn.useFormStatus=function(){return h.H.useHostTransitionStatus()},gn.version="19.2.4",gn}var q_;function hA(){if(q_)return vm.exports;q_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),vm.exports=uA(),vm.exports}var H_;function dA(){if(H_)return Xl;H_=1;var s=cA(),e=mp(),n=hA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(r(188))}function v(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return g(d),t;if(f===l)return g(d),i;f=f.sibling}throw Error(r(188))}if(a.return!==l.return)a=d,l=f;else{for(var _=!1,b=d.child;b;){if(b===a){_=!0,a=d,l=f;break}if(b===l){_=!0,l=d,a=f;break}b=b.sibling}if(!_){for(b=f.child;b;){if(b===a){_=!0,a=f,l=d;break}if(b===l){_=!0,l=f,a=d;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function T(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=T(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,w=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),le=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function we(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case ee:return"Profiler";case z:return"StrictMode";case $:return"Suspense";case te:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case le:return t.displayName||"Context";case G:return(t._context.displayName||"Context")+".Consumer";case pe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:we(t.type)||"Memo";case C:i=t._payload,t=t._init;try{return we(t(i))}catch{}}return null}var Ve=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Ue=[],Be=-1;function V(t){return{current:t}}function ie(t){0>Be||(t.current=Ue[Be],Ue[Be]=null,Be--)}function Y(t,i){Be++,Ue[Be]=t.current,t.current=i}var Z=V(null),ue=V(null),fe=V(null),ce=V(null);function Re(t,i){switch(Y(fe,i),Y(ue,t),Y(Z,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?s_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=s_(i),t=r_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ie(Z),Y(Z,t)}function Me(){ie(Z),ie(ue),ie(fe)}function at(t){t.memoizedState!==null&&Y(ce,t);var i=Z.current,a=r_(i,t.type);i!==a&&(Y(ue,t),Y(Z,a))}function Te(t){ue.current===t&&(ie(Z),ie(ue)),ce.current===t&&(ie(ce),Gl._currentValue=_e)}var pt,Mt;function Ft(t){if(pt===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);pt=i&&i[1]||"",Mt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pt+t+Mt}var oi=!1;function vt(t,i){if(!t||oi)return"";oi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(W){var K=W}Reflect.construct(t,[],re)}else{try{re.call()}catch(W){K=W}t.call(re.prototype)}}else{try{throw Error()}catch(W){K=W}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(W){if(W&&K&&typeof W.stack=="string")return[W.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],b=f[1];if(_&&b){var O=_.split(`
`),F=b.split(`
`);for(d=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(l===O.length||d===F.length)for(l=O.length-1,d=F.length-1;1<=l&&0<=d&&O[l]!==F[d];)d--;for(;1<=l&&0<=d;l--,d--)if(O[l]!==F[d]){if(l!==1||d!==1)do if(l--,d--,0>d||O[l]!==F[d]){var ne=`
`+O[l].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=l&&0<=d);break}}}finally{oi=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ft(a):""}function Wt(t,i){switch(t.tag){case 26:case 27:case 5:return Ft(t.type);case 16:return Ft("Lazy");case 13:return t.child!==i&&i!==null?Ft("Suspense Fallback"):Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 15:return vt(t.type,!1);case 11:return vt(t.type.render,!1);case 1:return vt(t.type,!0);case 31:return Ft("Activity");default:return""}}function Mn(t){try{var i="",a=null;do i+=Wt(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Xe=Object.prototype.hasOwnProperty,We=s.unstable_scheduleCallback,li=s.unstable_cancelCallback,zr=s.unstable_shouldYield,Ca=s.unstable_requestPaint,Jt=s.unstable_now,Ni=s.unstable_getCurrentPriorityLevel,Br=s.unstable_ImmediatePriority,is=s.unstable_UserBlockingPriority,ci=s.unstable_NormalPriority,Vs=s.unstable_LowPriority,Na=s.unstable_IdlePriority,Ia=s.log,Da=s.unstable_setDisableYieldValue,kn=null,Gt=null;function bn(t){if(typeof Ia=="function"&&Da(t),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(kn,t)}catch{}}var ot=Math.clz32?Math.clz32:qr,xa=Math.log,Ii=Math.LN2;function qr(t){return t>>>=0,t===0?32:31-(xa(t)/Ii|0)|0}var Zt=256,Di=262144,Q=4194304;function ye(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function qe(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~f,l!==0?d=ye(l):(_&=b,_!==0?d=ye(_):a||(a=b&~t,a!==0&&(d=ye(a))))):(b=l&~f,b!==0?d=ye(b):_!==0?d=ye(_):a||(a=l&~t,a!==0&&(d=ye(a)))),d===0?0:i!==0&&i!==d&&(i&f)===0&&(f=d&-d,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:d}function Oe(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function $t(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function en(){var t=Q;return Q<<=1,(Q&62914560)===0&&(Q=4194304),t}function Nt(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function xi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Oa(t,i,a,l,d,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,O=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var ne=31-ot(a),re=1<<ne;b[ne]=0,O[ne]=-1;var K=F[ne];if(K!==null)for(F[ne]=null,ne=0;ne<K.length;ne++){var W=K[ne];W!==null&&(W.lane&=-536870913)}a&=~re}l!==0&&ss(t,l,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~i))}function ss(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-ot(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function et(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-ot(a),d=1<<l;d&i|t[l]&i&&(t[l]|=i),a&=~d}}function ui(t,i){var a=i&-i;return a=(a&42)!==0?1:hi(a),(a&(t.suspendedLanes|i))!==0?0:a}function hi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function rs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Uc(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:N_(t.type))}function di(t,i){var a=he.p;try{return he.p=t,i()}finally{he.p=a}}var fi=Math.random().toString(36).slice(2),kt="__reactFiber$"+fi,tn="__reactProps$"+fi,Oi="__reactContainer$"+fi,Ma="__reactEvents$"+fi,vd="__reactListeners$"+fi,zc="__reactHandles$"+fi,Bc="__reactResources$"+fi,Mi="__reactMarker$"+fi;function ka(t){delete t[kt],delete t[tn],delete t[Ma],delete t[vd],delete t[zc]}function ki(t){var i=t[kt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Oi]||a[kt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=d_(t);t!==null;){if(a=t[kt])return a;t=d_(t)}return i}t=a,a=t.parentNode}return null}function Yn(t){if(t=t[kt]||t[Oi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function jn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function ji(t){var i=t[Bc];return i||(i=t[Bc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function jt(t){t[Mi]=!0}var Jo=new Set,Zo={};function Vi(t,i){Li(t,i),Li(t+"Capture",i)}function Li(t,i){for(Zo[t]=i,t=0;t<i.length;t++)Jo.add(i[t])}var el=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tl={},nl={};function qc(t){return Xe.call(nl,t)?!0:Xe.call(tl,t)?!1:el.test(t)?nl[t]=!0:(tl[t]=!0,!1)}function ja(t,i,a){if(qc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Vn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Vt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function nn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ls(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function il(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function lt(t){if(!t._valueTracker){var i=Ls(t)?"checked":"value";t._valueTracker=il(t,i,""+t[i])}}function Hr(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Ls(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Pi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Fr=/[\n"\\]/g;function wn(t){return t.replace(Fr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Va(t,i,a,l,d,f,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+nn(i)):t.value!==""+nn(i)&&(t.value=""+nn(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?sl(t,_,nn(i)):a!=null?sl(t,_,nn(a)):l!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+nn(b):t.removeAttribute("name")}function Hc(t,i,a,l,d,f,_,b){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){lt(t);return}a=a!=null?""+nn(a):"",i=i!=null?""+nn(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),lt(t)}function sl(t,i,a){i==="number"&&Pi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ps(t,i,a,l){if(t=t.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=i.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&l&&(t[a].defaultSelected=!0)}else{for(a=""+nn(a),i=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,l&&(t[d].defaultSelected=!0);return}i!==null||t[d].disabled||(i=t[d])}i!==null&&(i.selected=!0)}}function Fc(t,i,a){if(i!=null&&(i=""+nn(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+nn(a):""}function Us(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ve(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=nn(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),lt(t)}function An(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Gc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Gc.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function al(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var d in i)l=i[d],i.hasOwnProperty(d)&&a[d]!==l&&rl(t,d,l)}else for(var f in i)i.hasOwnProperty(f)&&rl(t,f,i[f])}function La(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $c=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pa(t){return zs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function mi(){}var ol=null;function Kn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bs=null,Ui=null;function Gr(t){var i=Yn(t);if(i&&(t=i.stateNode)){var a=t[tn]||null;e:switch(t=i.stateNode,i.type){case"input":if(Va(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+wn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var d=l[tn]||null;if(!d)throw Error(r(90));Va(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Hr(l)}break e;case"textarea":Fc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ps(t,!!a.multiple,i,!1)}}}var Ua=!1;function qs(t,i,a){if(Ua)return t(i,a);Ua=!0;try{var l=t(i);return l}finally{if(Ua=!1,(Bs!==null||Ui!==null)&&(Uu(),Bs&&(i=Bs,t=Ui,Ui=Bs=null,Gr(i),t)))for(i=0;i<t.length;i++)Gr(t[i])}}function pi(t,i){var a=t.stateNode;if(a===null)return null;var l=a[tn]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$r=!1;if(Qn)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){$r=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{$r=!1}var zi=null,ll=null,Yr=null;function cl(){if(Yr)return Yr;var t,i=ll,a=i.length,l,d="value"in zi?zi.value:zi.textContent,f=d.length;for(t=0;t<a&&i[t]===d[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===d[f-l];l++);return Yr=d.slice(t,1<l?1-l:void 0)}function Kr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function as(){return!0}function gi(){return!1}function on(t){function i(a,l,d,f,_){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(f):f[b]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?as:gi,this.isPropagationStopped=gi,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),i}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=on(os),Hs=S({},os,{view:0,detail:0}),ul=on(Hs),Fs,za,qi,Ba=S({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qi&&(qi&&t.type==="mousemove"?(Fs=t.screenX-qi.screenX,za=t.screenY-qi.screenY):za=Fs=0,qi=t),Fs)},movementY:function(t){return"movementY"in t?t.movementY:za}}),hl=on(Ba),Qr=S({},Ba,{dataTransfer:0}),Yc=on(Qr),Kc=S({},Hs,{relatedTarget:0}),Xr=on(Kc),dl=S({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),Qc=on(dl),qa=S({},os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xc=on(qa),Wc=S({},os,{data:0}),Hi=on(Wc),Jc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=eu[t])?!!i[t]:!1}function Gs(){return tu}var Tn=S({},Hs,{key:function(t){if(t.key){var i=Jc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Kr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(t){return t.type==="keypress"?Kr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nu=on(Tn),iu=S({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ls=on(iu),u=S({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),y=on(u),E=S({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=on(E),q=S({},Ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),X=on(q),de=S({},os,{newState:0,oldState:0}),ke=on(de),It=[9,13,27,32],it=Qn&&"CompositionEvent"in window,Tt=null;Qn&&"documentMode"in document&&(Tt=document.documentMode);var Xn=Qn&&"TextEvent"in window&&!Tt,Fi=Qn&&(!it||Tt&&8<Tt&&11>=Tt),yi=" ",vi=!1;function Wr(t,i){switch(t){case"keyup":return It.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ha(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fa=!1;function Ib(t,i){switch(t){case"compositionend":return Ha(i);case"keypress":return i.which!==32?null:(vi=!0,yi);case"textInput":return t=i.data,t===yi&&vi?null:t;default:return null}}function Db(t,i){if(Fa)return t==="compositionend"||!it&&Wr(t,i)?(t=cl(),Yr=ll=zi=null,Fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fi&&i.locale!=="ko"?null:i.data;default:return null}}var xb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!xb[t.type]:i==="textarea"}function gg(t,i,a,l){Bs?Ui?Ui.push(l):Ui=[l]:Bs=l,i=$u(i,"onChange"),0<i.length&&(a=new Bi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var fl=null,ml=null;function Ob(t){Jv(t,0)}function su(t){var i=jn(t);if(Hr(i))return t}function yg(t,i){if(t==="change")return i}var vg=!1;if(Qn){var _d;if(Qn){var Ed="oninput"in document;if(!Ed){var _g=document.createElement("div");_g.setAttribute("oninput","return;"),Ed=typeof _g.oninput=="function"}_d=Ed}else _d=!1;vg=_d&&(!document.documentMode||9<document.documentMode)}function Eg(){fl&&(fl.detachEvent("onpropertychange",Tg),ml=fl=null)}function Tg(t){if(t.propertyName==="value"&&su(ml)){var i=[];gg(i,ml,t,Kn(t)),qs(Ob,i)}}function Mb(t,i,a){t==="focusin"?(Eg(),fl=i,ml=a,fl.attachEvent("onpropertychange",Tg)):t==="focusout"&&Eg()}function kb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return su(ml)}function jb(t,i){if(t==="click")return su(i)}function Vb(t,i){if(t==="input"||t==="change")return su(i)}function Lb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Ln=typeof Object.is=="function"?Object.is:Lb;function pl(t,i){if(Ln(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Xe.call(i,d)||!Ln(t[d],i[d]))return!1}return!0}function Sg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bg(t,i){var a=Sg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Sg(a)}}function wg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?wg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Ag(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Pi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Pi(t.document)}return i}function Td(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var Pb=Qn&&"documentMode"in document&&11>=document.documentMode,Ga=null,Sd=null,gl=null,bd=!1;function Rg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bd||Ga==null||Ga!==Pi(l)||(l=Ga,"selectionStart"in l&&Td(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),gl&&pl(gl,l)||(gl=l,l=$u(Sd,"onSelect"),0<l.length&&(i=new Bi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Ga)))}function Jr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var $a={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},wd={},Cg={};Qn&&(Cg=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function Zr(t){if(wd[t])return wd[t];if(!$a[t])return t;var i=$a[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Cg)return wd[t]=i[a];return t}var Ng=Zr("animationend"),Ig=Zr("animationiteration"),Dg=Zr("animationstart"),Ub=Zr("transitionrun"),zb=Zr("transitionstart"),Bb=Zr("transitioncancel"),xg=Zr("transitionend"),Og=new Map,Ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ad.push("scrollEnd");function _i(t,i){Og.set(t,i),Vi(i,[t])}var ru=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Wn=[],Ya=0,Rd=0;function au(){for(var t=Ya,i=Rd=Ya=0;i<t;){var a=Wn[i];Wn[i++]=null;var l=Wn[i];Wn[i++]=null;var d=Wn[i];Wn[i++]=null;var f=Wn[i];if(Wn[i++]=null,l!==null&&d!==null){var _=l.pending;_===null?d.next=d:(d.next=_.next,_.next=d),l.pending=d}f!==0&&Mg(a,d,f)}}function ou(t,i,a,l){Wn[Ya++]=t,Wn[Ya++]=i,Wn[Ya++]=a,Wn[Ya++]=l,Rd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Cd(t,i,a,l){return ou(t,i,a,l),lu(t)}function ea(t,i){return ou(t,null,null,i),lu(t)}function Mg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&i!==null&&(d=31-ot(a),t=f.hiddenUpdates,l=t[d],l===null?t[d]=[i]:l.push(i),i.lane=a|536870912),f):null}function lu(t){if(50<Pl)throw Pl=0,Lf=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ka={};function qb(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,i,a,l){return new qb(t,i,a,l)}function Nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cs(t,i){var a=t.alternate;return a===null?(a=Pn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function kg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function cu(t,i,a,l,d,f){var _=0;if(l=t,typeof t=="function")Nd(t)&&(_=1);else if(typeof t=="string")_=Yw(t,a,Z.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Pn(31,a,i,d),t.elementType=R,t.lanes=f,t;case j:return ta(a.children,d,f,i);case z:_=8,d|=24;break;case ee:return t=Pn(12,a,i,d|2),t.elementType=ee,t.lanes=f,t;case $:return t=Pn(13,a,i,d),t.elementType=$,t.lanes=f,t;case te:return t=Pn(19,a,i,d),t.elementType=te,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case le:_=10;break e;case G:_=9;break e;case pe:_=11;break e;case N:_=14;break e;case C:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=Pn(_,a,i,d),i.elementType=t,i.type=l,i.lanes=f,i}function ta(t,i,a,l){return t=Pn(7,t,l,i),t.lanes=a,t}function Id(t,i,a){return t=Pn(6,t,null,i),t.lanes=a,t}function jg(t){var i=Pn(18,null,null,0);return i.stateNode=t,i}function Dd(t,i,a){return i=Pn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Vg=new WeakMap;function Jn(t,i){if(typeof t=="object"&&t!==null){var a=Vg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Mn(i)},Vg.set(t,i),i)}return{value:t,source:i,stack:Mn(i)}}var Qa=[],Xa=0,uu=null,yl=0,Zn=[],ei=0,$s=null,Gi=1,$i="";function us(t,i){Qa[Xa++]=yl,Qa[Xa++]=uu,uu=t,yl=i}function Lg(t,i,a){Zn[ei++]=Gi,Zn[ei++]=$i,Zn[ei++]=$s,$s=t;var l=Gi;t=$i;var d=32-ot(l)-1;l&=~(1<<d),a+=1;var f=32-ot(i)+d;if(30<f){var _=d-d%5;f=(l&(1<<_)-1).toString(32),l>>=_,d-=_,Gi=1<<32-ot(i)+d|a<<d|l,$i=f+t}else Gi=1<<f|a<<d|l,$i=t}function xd(t){t.return!==null&&(us(t,1),Lg(t,1,0))}function Od(t){for(;t===uu;)uu=Qa[--Xa],Qa[Xa]=null,yl=Qa[--Xa],Qa[Xa]=null;for(;t===$s;)$s=Zn[--ei],Zn[ei]=null,$i=Zn[--ei],Zn[ei]=null,Gi=Zn[--ei],Zn[ei]=null}function Pg(t,i){Zn[ei++]=Gi,Zn[ei++]=$i,Zn[ei++]=$s,Gi=i.id,$i=i.overflow,$s=t}var ln=null,_t=null,Je=!1,Ys=null,ti=!1,Md=Error(r(519));function Ks(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vl(Jn(i,t)),Md}function Ug(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[kt]=t,i[tn]=l,a){case"dialog":Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":case"embed":Fe("load",i);break;case"video":case"audio":for(a=0;a<zl.length;a++)Fe(zl[a],i);break;case"source":Fe("error",i);break;case"img":case"image":case"link":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"input":Fe("invalid",i),Hc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Fe("invalid",i);break;case"textarea":Fe("invalid",i),Us(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||n_(i.textContent,a)?(l.popover!=null&&(Fe("beforetoggle",i),Fe("toggle",i)),l.onScroll!=null&&Fe("scroll",i),l.onScrollEnd!=null&&Fe("scrollend",i),l.onClick!=null&&(i.onclick=mi),i=!0):i=!1,i||Ks(t,!0)}function zg(t){for(ln=t.return;ln;)switch(ln.tag){case 5:case 31:case 13:ti=!1;return;case 27:case 3:ti=!0;return;default:ln=ln.return}}function Wa(t){if(t!==ln)return!1;if(!Je)return zg(t),Je=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Jf(t.type,t.memoizedProps)),a=!a),a&&_t&&Ks(t),zg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));_t=h_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));_t=h_(t)}else i===27?(i=_t,lr(t.type)?(t=im,im=null,_t=t):_t=i):_t=ln?ii(t.stateNode.nextSibling):null;return!0}function na(){_t=ln=null,Je=!1}function kd(){var t=Ys;return t!==null&&(In===null?In=t:In.push.apply(In,t),Ys=null),t}function vl(t){Ys===null?Ys=[t]:Ys.push(t)}var jd=V(null),ia=null,hs=null;function Qs(t,i,a){Y(jd,i._currentValue),i._currentValue=a}function ds(t){t._currentValue=jd.current,ie(jd)}function Vd(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Ld(t,i,a,l){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var _=d.child;f=f.firstContext;e:for(;f!==null;){var b=f;f=d;for(var O=0;O<i.length;O++)if(b.context===i[O]){f.lanes|=a,b=f.alternate,b!==null&&(b.lanes|=a),Vd(f.return,a,t),l||(_=null);break e}f=b.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Vd(_,a,t),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===t){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Ja(t,i,a,l){t=null;for(var d=i,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=d.type;Ln(d.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(d===ce.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Gl):t=[Gl])}d=d.return}t!==null&&Ld(i,t,a,l),i.flags|=262144}function hu(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function sa(t){ia=t,hs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function cn(t){return Bg(ia,t)}function du(t,i){return ia===null&&sa(t),Bg(t,i)}function Bg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},hs===null){if(t===null)throw Error(r(308));hs=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else hs=hs.next=i;return a}var Hb=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},Fb=s.unstable_scheduleCallback,Gb=s.unstable_NormalPriority,Lt={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pd(){return{controller:new Hb,data:new Map,refCount:0}}function _l(t){t.refCount--,t.refCount===0&&Fb(Gb,function(){t.controller.abort()})}var El=null,Ud=0,Za=0,eo=null;function $b(t,i){if(El===null){var a=El=[];Ud=0,Za=Hf(),eo={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ud++,i.then(qg,qg),i}function qg(){if(--Ud===0&&El!==null){eo!==null&&(eo.status="fulfilled");var t=El;El=null,Za=0,eo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Yb(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var d=0;d<a.length;d++)(0,a[d])(i)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Hg=J.S;J.S=function(t,i){Rv=Jt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&$b(t,i),Hg!==null&&Hg(t,i)};var ra=V(null);function zd(){var t=ra.current;return t!==null?t:gt.pooledCache}function fu(t,i){i===null?Y(ra,ra.current):Y(ra,i.pool)}function Fg(){var t=zd();return t===null?null:{parent:Lt._currentValue,pool:t}}var to=Error(r(460)),Bd=Error(r(474)),mu=Error(r(542)),pu={then:function(){}};function Gg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function $g(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(mi,mi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Kg(t),t;default:if(typeof i.status=="string")i.then(mi,mi);else{if(t=gt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=l}},function(l){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Kg(t),t}throw oa=i,to}}function aa(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(oa=a,to):a}}var oa=null;function Yg(){if(oa===null)throw Error(r(459));var t=oa;return oa=null,t}function Kg(t){if(t===to||t===mu)throw Error(r(483))}var no=null,Tl=0;function gu(t){var i=Tl;return Tl+=1,no===null&&(no=[]),$g(no,t,i)}function Sl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function yu(t,i){throw i.$$typeof===w?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Qg(t){function i(B,U){if(t){var H=B.deletions;H===null?(B.deletions=[U],B.flags|=16):H.push(U)}}function a(B,U){if(!t)return null;for(;U!==null;)i(B,U),U=U.sibling;return null}function l(B){for(var U=new Map;B!==null;)B.key!==null?U.set(B.key,B):U.set(B.index,B),B=B.sibling;return U}function d(B,U){return B=cs(B,U),B.index=0,B.sibling=null,B}function f(B,U,H){return B.index=H,t?(H=B.alternate,H!==null?(H=H.index,H<U?(B.flags|=67108866,U):H):(B.flags|=67108866,U)):(B.flags|=1048576,U)}function _(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function b(B,U,H,se){return U===null||U.tag!==6?(U=Id(H,B.mode,se),U.return=B,U):(U=d(U,H),U.return=B,U)}function O(B,U,H,se){var Se=H.type;return Se===j?ne(B,U,H.props.children,se,H.key):U!==null&&(U.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===C&&aa(Se)===U.type)?(U=d(U,H.props),Sl(U,H),U.return=B,U):(U=cu(H.type,H.key,H.props,null,B.mode,se),Sl(U,H),U.return=B,U)}function F(B,U,H,se){return U===null||U.tag!==4||U.stateNode.containerInfo!==H.containerInfo||U.stateNode.implementation!==H.implementation?(U=Dd(H,B.mode,se),U.return=B,U):(U=d(U,H.children||[]),U.return=B,U)}function ne(B,U,H,se,Se){return U===null||U.tag!==7?(U=ta(H,B.mode,se,Se),U.return=B,U):(U=d(U,H),U.return=B,U)}function re(B,U,H){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Id(""+U,B.mode,H),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case P:return H=cu(U.type,U.key,U.props,null,B.mode,H),Sl(H,U),H.return=B,H;case L:return U=Dd(U,B.mode,H),U.return=B,U;case C:return U=aa(U),re(B,U,H)}if(Ve(U)||k(U))return U=ta(U,B.mode,H,null),U.return=B,U;if(typeof U.then=="function")return re(B,gu(U),H);if(U.$$typeof===le)return re(B,du(B,U),H);yu(B,U)}return null}function K(B,U,H,se){var Se=U!==null?U.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Se!==null?null:b(B,U,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case P:return H.key===Se?O(B,U,H,se):null;case L:return H.key===Se?F(B,U,H,se):null;case C:return H=aa(H),K(B,U,H,se)}if(Ve(H)||k(H))return Se!==null?null:ne(B,U,H,se,null);if(typeof H.then=="function")return K(B,U,gu(H),se);if(H.$$typeof===le)return K(B,U,du(B,H),se);yu(B,H)}return null}function W(B,U,H,se,Se){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return B=B.get(H)||null,b(U,B,""+se,Se);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case P:return B=B.get(se.key===null?H:se.key)||null,O(U,B,se,Se);case L:return B=B.get(se.key===null?H:se.key)||null,F(U,B,se,Se);case C:return se=aa(se),W(B,U,H,se,Se)}if(Ve(se)||k(se))return B=B.get(H)||null,ne(U,B,se,Se,null);if(typeof se.then=="function")return W(B,U,H,gu(se),Se);if(se.$$typeof===le)return W(B,U,H,du(U,se),Se);yu(U,se)}return null}function ve(B,U,H,se){for(var Se=null,tt=null,Ee=U,Le=U=0,$e=null;Ee!==null&&Le<H.length;Le++){Ee.index>Le?($e=Ee,Ee=null):$e=Ee.sibling;var nt=K(B,Ee,H[Le],se);if(nt===null){Ee===null&&(Ee=$e);break}t&&Ee&&nt.alternate===null&&i(B,Ee),U=f(nt,U,Le),tt===null?Se=nt:tt.sibling=nt,tt=nt,Ee=$e}if(Le===H.length)return a(B,Ee),Je&&us(B,Le),Se;if(Ee===null){for(;Le<H.length;Le++)Ee=re(B,H[Le],se),Ee!==null&&(U=f(Ee,U,Le),tt===null?Se=Ee:tt.sibling=Ee,tt=Ee);return Je&&us(B,Le),Se}for(Ee=l(Ee);Le<H.length;Le++)$e=W(Ee,B,Le,H[Le],se),$e!==null&&(t&&$e.alternate!==null&&Ee.delete($e.key===null?Le:$e.key),U=f($e,U,Le),tt===null?Se=$e:tt.sibling=$e,tt=$e);return t&&Ee.forEach(function(fr){return i(B,fr)}),Je&&us(B,Le),Se}function Ae(B,U,H,se){if(H==null)throw Error(r(151));for(var Se=null,tt=null,Ee=U,Le=U=0,$e=null,nt=H.next();Ee!==null&&!nt.done;Le++,nt=H.next()){Ee.index>Le?($e=Ee,Ee=null):$e=Ee.sibling;var fr=K(B,Ee,nt.value,se);if(fr===null){Ee===null&&(Ee=$e);break}t&&Ee&&fr.alternate===null&&i(B,Ee),U=f(fr,U,Le),tt===null?Se=fr:tt.sibling=fr,tt=fr,Ee=$e}if(nt.done)return a(B,Ee),Je&&us(B,Le),Se;if(Ee===null){for(;!nt.done;Le++,nt=H.next())nt=re(B,nt.value,se),nt!==null&&(U=f(nt,U,Le),tt===null?Se=nt:tt.sibling=nt,tt=nt);return Je&&us(B,Le),Se}for(Ee=l(Ee);!nt.done;Le++,nt=H.next())nt=W(Ee,B,Le,nt.value,se),nt!==null&&(t&&nt.alternate!==null&&Ee.delete(nt.key===null?Le:nt.key),U=f(nt,U,Le),tt===null?Se=nt:tt.sibling=nt,tt=nt);return t&&Ee.forEach(function(sA){return i(B,sA)}),Je&&us(B,Le),Se}function mt(B,U,H,se){if(typeof H=="object"&&H!==null&&H.type===j&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case P:e:{for(var Se=H.key;U!==null;){if(U.key===Se){if(Se=H.type,Se===j){if(U.tag===7){a(B,U.sibling),se=d(U,H.props.children),se.return=B,B=se;break e}}else if(U.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===C&&aa(Se)===U.type){a(B,U.sibling),se=d(U,H.props),Sl(se,H),se.return=B,B=se;break e}a(B,U);break}else i(B,U);U=U.sibling}H.type===j?(se=ta(H.props.children,B.mode,se,H.key),se.return=B,B=se):(se=cu(H.type,H.key,H.props,null,B.mode,se),Sl(se,H),se.return=B,B=se)}return _(B);case L:e:{for(Se=H.key;U!==null;){if(U.key===Se)if(U.tag===4&&U.stateNode.containerInfo===H.containerInfo&&U.stateNode.implementation===H.implementation){a(B,U.sibling),se=d(U,H.children||[]),se.return=B,B=se;break e}else{a(B,U);break}else i(B,U);U=U.sibling}se=Dd(H,B.mode,se),se.return=B,B=se}return _(B);case C:return H=aa(H),mt(B,U,H,se)}if(Ve(H))return ve(B,U,H,se);if(k(H)){if(Se=k(H),typeof Se!="function")throw Error(r(150));return H=Se.call(H),Ae(B,U,H,se)}if(typeof H.then=="function")return mt(B,U,gu(H),se);if(H.$$typeof===le)return mt(B,U,du(B,H),se);yu(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,U!==null&&U.tag===6?(a(B,U.sibling),se=d(U,H),se.return=B,B=se):(a(B,U),se=Id(H,B.mode,se),se.return=B,B=se),_(B)):a(B,U)}return function(B,U,H,se){try{Tl=0;var Se=mt(B,U,H,se);return no=null,Se}catch(Ee){if(Ee===to||Ee===mu)throw Ee;var tt=Pn(29,Ee,null,B.mode);return tt.lanes=se,tt.return=B,tt}}}var la=Qg(!0),Xg=Qg(!1),Xs=!1;function qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ws(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Js(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(st&2)!==0){var d=l.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),l.pending=i,i=lu(t),Mg(t,null,a),i}return ou(t,l,i,a),lu(t)}function bl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,et(t,a)}}function Fd(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?d=f=i:f=f.next=i}else d=f=i;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Gd=!1;function wl(){if(Gd){var t=eo;if(t!==null)throw t}}function Al(t,i,a,l){Gd=!1;var d=t.updateQueue;Xs=!1;var f=d.firstBaseUpdate,_=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var O=b,F=O.next;O.next=null,_===null?f=F:_.next=F,_=O;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,b=ne.lastBaseUpdate,b!==_&&(b===null?ne.firstBaseUpdate=F:b.next=F,ne.lastBaseUpdate=O))}if(f!==null){var re=d.baseState;_=0,ne=F=O=null,b=f;do{var K=b.lane&-536870913,W=K!==b.lane;if(W?(Ge&K)===K:(l&K)===K){K!==0&&K===Za&&(Gd=!0),ne!==null&&(ne=ne.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ve=t,Ae=b;K=i;var mt=a;switch(Ae.tag){case 1:if(ve=Ae.payload,typeof ve=="function"){re=ve.call(mt,re,K);break e}re=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ae.payload,K=typeof ve=="function"?ve.call(mt,re,K):ve,K==null)break e;re=S({},re,K);break e;case 2:Xs=!0}}K=b.callback,K!==null&&(t.flags|=64,W&&(t.flags|=8192),W=d.callbacks,W===null?d.callbacks=[K]:W.push(K))}else W={lane:K,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ne===null?(F=ne=W,O=re):ne=ne.next=W,_|=K;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;W=b,b=W.next,W.next=null,d.lastBaseUpdate=W,d.shared.pending=null}}while(!0);ne===null&&(O=re),d.baseState=O,d.firstBaseUpdate=F,d.lastBaseUpdate=ne,f===null&&(d.shared.lanes=0),ir|=_,t.lanes=_,t.memoizedState=re}}function Wg(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function Jg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Wg(a[t],i)}var io=V(null),vu=V(0);function Zg(t,i){t=Ts,Y(vu,t),Y(io,i),Ts=t|i.baseLanes}function $d(){Y(vu,Ts),Y(io,io.current)}function Yd(){Ts=vu.current,ie(io),ie(vu)}var Un=V(null),ni=null;function Zs(t){var i=t.alternate;Y(Dt,Dt.current&1),Y(Un,t),ni===null&&(i===null||io.current!==null||i.memoizedState!==null)&&(ni=t)}function Kd(t){Y(Dt,Dt.current),Y(Un,t),ni===null&&(ni=t)}function ey(t){t.tag===22?(Y(Dt,Dt.current),Y(Un,t),ni===null&&(ni=t)):er()}function er(){Y(Dt,Dt.current),Y(Un,Un.current)}function zn(t){ie(Un),ni===t&&(ni=null),ie(Dt)}var Dt=V(0);function _u(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||tm(a)||nm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var fs=0,je=null,dt=null,Pt=null,Eu=!1,so=!1,ca=!1,Tu=0,Rl=0,ro=null,Kb=0;function Rt(){throw Error(r(321))}function Qd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Ln(t[a],i[a]))return!1;return!0}function Xd(t,i,a,l,d,f){return fs=f,je=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,J.H=t===null||t.memoizedState===null?Ly:df,ca=!1,f=a(l,d),ca=!1,so&&(f=ny(i,a,l,d)),ty(t),f}function ty(t){J.H=Il;var i=dt!==null&&dt.next!==null;if(fs=0,Pt=dt=je=null,Eu=!1,Rl=0,ro=null,i)throw Error(r(300));t===null||Ut||(t=t.dependencies,t!==null&&hu(t)&&(Ut=!0))}function ny(t,i,a,l){je=t;var d=0;do{if(so&&(ro=null),Rl=0,so=!1,25<=d)throw Error(r(301));if(d+=1,Pt=dt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}J.H=Py,f=i(a,l)}while(so);return f}function Qb(){var t=J.H,i=t.useState()[0];return i=typeof i.then=="function"?Cl(i):i,t=t.useState()[0],(dt!==null?dt.memoizedState:null)!==t&&(je.flags|=1024),i}function Wd(){var t=Tu!==0;return Tu=0,t}function Jd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Zd(t){if(Eu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Eu=!1}fs=0,Pt=dt=je=null,so=!1,Rl=Tu=0,ro=null}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?je.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function xt(){if(dt===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var i=Pt===null?je.memoizedState:Pt.next;if(i!==null)Pt=i,dt=t;else{if(t===null)throw je.alternate===null?Error(r(467)):Error(r(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Pt===null?je.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function Su(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cl(t){var i=Rl;return Rl+=1,ro===null&&(ro=[]),t=$g(ro,t,i),i=je,(Pt===null?i.memoizedState:Pt.next)===null&&(i=i.alternate,J.H=i===null||i.memoizedState===null?Ly:df),t}function bu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Cl(t);if(t.$$typeof===le)return cn(t)}throw Error(r(438,String(t)))}function ef(t){var i=null,a=je.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Su(),je.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=D;return i.index++,a}function ms(t,i){return typeof i=="function"?i(t):i}function wu(t){var i=xt();return tf(i,dt,t)}function tf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var d=t.baseQueue,f=l.pending;if(f!==null){if(d!==null){var _=d.next;d.next=f.next,f.next=_}i.baseQueue=d=f,l.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{i=d.next;var b=_=null,O=null,F=i,ne=!1;do{var re=F.lane&-536870913;if(re!==F.lane?(Ge&re)===re:(fs&re)===re){var K=F.revertLane;if(K===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),re===Za&&(ne=!0);else if((fs&K)===K){F=F.next,K===Za&&(ne=!0);continue}else re={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(b=O=re,_=f):O=O.next=re,je.lanes|=K,ir|=K;re=F.action,ca&&a(f,re),f=F.hasEagerState?F.eagerState:a(f,re)}else K={lane:re,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(b=O=K,_=f):O=O.next=K,je.lanes|=re,ir|=re;F=F.next}while(F!==null&&F!==i);if(O===null?_=f:O.next=b,!Ln(f,t.memoizedState)&&(Ut=!0,ne&&(a=eo,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=O,l.lastRenderedState=f}return d===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function nf(t){var i=xt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,d=a.pending,f=i.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do f=t(f,_.action),_=_.next;while(_!==d);Ln(f,i.memoizedState)||(Ut=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function iy(t,i,a){var l=je,d=xt(),f=Je;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Ln((dt||d).memoizedState,a);if(_&&(d.memoizedState=a,Ut=!0),d=d.queue,af(ay.bind(null,l,d,t),[t]),d.getSnapshot!==i||_||Pt!==null&&Pt.memoizedState.tag&1){if(l.flags|=2048,ao(9,{destroy:void 0},ry.bind(null,l,d,a,i),null),gt===null)throw Error(r(349));f||(fs&127)!==0||sy(l,i,a)}return a}function sy(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=je.updateQueue,i===null?(i=Su(),je.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function ry(t,i,a,l){i.value=a,i.getSnapshot=l,oy(i)&&ly(t)}function ay(t,i,a){return a(function(){oy(i)&&ly(t)})}function oy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Ln(t,a)}catch{return!0}}function ly(t){var i=ea(t,2);i!==null&&Dn(i,t,2)}function sf(t){var i=Sn();if(typeof t=="function"){var a=t;if(t=a(),ca){bn(!0);try{a()}finally{bn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:t},i}function cy(t,i,a,l){return t.baseState=a,tf(t,dt,typeof l=="function"?l:ms)}function Xb(t,i,a,l,d){if(Cu(t))throw Error(r(485));if(t=i.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};J.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,uy(i,f)):(f.next=a.next,i.pending=a.next=f)}}function uy(t,i){var a=i.action,l=i.payload,d=t.state;if(i.isTransition){var f=J.T,_={};J.T=_;try{var b=a(d,l),O=J.S;O!==null&&O(_,b),hy(t,i,b)}catch(F){rf(t,i,F)}finally{f!==null&&_.types!==null&&(f.types=_.types),J.T=f}}else try{f=a(d,l),hy(t,i,f)}catch(F){rf(t,i,F)}}function hy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){dy(t,i,l)},function(l){return rf(t,i,l)}):dy(t,i,a)}function dy(t,i,a){i.status="fulfilled",i.value=a,fy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,uy(t,a)))}function rf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,fy(i),i=i.next;while(i!==l)}t.action=null}function fy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function my(t,i){return i}function py(t,i){if(Je){var a=gt.formState;if(a!==null){e:{var l=je;if(Je){if(_t){t:{for(var d=_t,f=ti;d.nodeType!==8;){if(!f){d=null;break t}if(d=ii(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){_t=ii(d.nextSibling),l=d.data==="F!";break e}}Ks(l)}l=!1}l&&(i=a[0])}}return a=Sn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:my,lastRenderedState:i},a.queue=l,a=ky.bind(null,je,l),l.dispatch=a,l=sf(!1),f=hf.bind(null,je,!1,l.queue),l=Sn(),d={state:i,dispatch:null,action:t,pending:null},l.queue=d,a=Xb.bind(null,je,d,f,a),d.dispatch=a,l.memoizedState=t,[i,a,!1]}function gy(t){var i=xt();return yy(i,dt,t)}function yy(t,i,a){if(i=tf(t,i,my)[0],t=wu(ms)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Cl(i)}catch(_){throw _===to?mu:_}else l=i;i=xt();var d=i.queue,f=d.dispatch;return a!==i.memoizedState&&(je.flags|=2048,ao(9,{destroy:void 0},Wb.bind(null,d,a),null)),[l,f,t]}function Wb(t,i){t.action=i}function vy(t){var i=xt(),a=dt;if(a!==null)return yy(i,a,t);xt(),i=i.memoizedState,a=xt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function ao(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=je.updateQueue,i===null&&(i=Su(),je.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function _y(){return xt().memoizedState}function Au(t,i,a,l){var d=Sn();je.flags|=t,d.memoizedState=ao(1|i,{destroy:void 0},a,l===void 0?null:l)}function Ru(t,i,a,l){var d=xt();l=l===void 0?null:l;var f=d.memoizedState.inst;dt!==null&&l!==null&&Qd(l,dt.memoizedState.deps)?d.memoizedState=ao(i,f,a,l):(je.flags|=t,d.memoizedState=ao(1|i,f,a,l))}function Ey(t,i){Au(8390656,8,t,i)}function af(t,i){Ru(2048,8,t,i)}function Jb(t){je.flags|=4;var i=je.updateQueue;if(i===null)i=Su(),je.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Ty(t){var i=xt().memoizedState;return Jb({ref:i,nextImpl:t}),function(){if((st&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Sy(t,i){return Ru(4,2,t,i)}function by(t,i){return Ru(4,4,t,i)}function wy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ay(t,i,a){a=a!=null?a.concat([t]):null,Ru(4,4,wy.bind(null,i,t),a)}function of(){}function Ry(t,i){var a=xt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Qd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Cy(t,i){var a=xt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Qd(i,l[1]))return l[0];if(l=t(),ca){bn(!0);try{t()}finally{bn(!1)}}return a.memoizedState=[l,i],l}function lf(t,i,a){return a===void 0||(fs&1073741824)!==0&&(Ge&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=Nv(),je.lanes|=t,ir|=t,a)}function Ny(t,i,a,l){return Ln(a,i)?a:io.current!==null?(t=lf(t,a,l),Ln(t,i)||(Ut=!0),t):(fs&42)===0||(fs&1073741824)!==0&&(Ge&261930)===0?(Ut=!0,t.memoizedState=a):(t=Nv(),je.lanes|=t,ir|=t,i)}function Iy(t,i,a,l,d){var f=he.p;he.p=f!==0&&8>f?f:8;var _=J.T,b={};J.T=b,hf(t,!1,i,a);try{var O=d(),F=J.S;if(F!==null&&F(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ne=Yb(O,l);Nl(t,i,ne,Hn(t))}else Nl(t,i,l,Hn(t))}catch(re){Nl(t,i,{then:function(){},status:"rejected",reason:re},Hn())}finally{he.p=f,_!==null&&b.types!==null&&(_.types=b.types),J.T=_}}function Zb(){}function cf(t,i,a,l){if(t.tag!==5)throw Error(r(476));var d=Dy(t).queue;Iy(t,d,i,_e,a===null?Zb:function(){return xy(t),a(l)})}function Dy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:_e},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function xy(t){var i=Dy(t);i.next===null&&(i=t.alternate.memoizedState),Nl(t,i.next.queue,{},Hn())}function uf(){return cn(Gl)}function Oy(){return xt().memoizedState}function My(){return xt().memoizedState}function ew(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Hn();t=Ws(a);var l=Js(i,t,a);l!==null&&(Dn(l,i,a),bl(l,i,a)),i={cache:Pd()},t.payload=i;return}i=i.return}}function tw(t,i,a){var l=Hn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cu(t)?jy(i,a):(a=Cd(t,i,a,l),a!==null&&(Dn(a,t,l),Vy(a,i,l)))}function ky(t,i,a){var l=Hn();Nl(t,i,a,l)}function Nl(t,i,a,l){var d={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cu(t))jy(i,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,b=f(_,a);if(d.hasEagerState=!0,d.eagerState=b,Ln(b,_))return ou(t,i,d,0),gt===null&&au(),!1}catch{}if(a=Cd(t,i,d,l),a!==null)return Dn(a,t,l),Vy(a,i,l),!0}return!1}function hf(t,i,a,l){if(l={lane:2,revertLane:Hf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Cu(t)){if(i)throw Error(r(479))}else i=Cd(t,a,l,2),i!==null&&Dn(i,t,2)}function Cu(t){var i=t.alternate;return t===je||i!==null&&i===je}function jy(t,i){so=Eu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Vy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,et(t,a)}}var Il={readContext:cn,use:bu,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};Il.useEffectEvent=Rt;var Ly={readContext:cn,use:bu,useCallback:function(t,i){return Sn().memoizedState=[t,i===void 0?null:i],t},useContext:cn,useEffect:Ey,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Au(4194308,4,wy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Au(4194308,4,t,i)},useInsertionEffect:function(t,i){Au(4,2,t,i)},useMemo:function(t,i){var a=Sn();i=i===void 0?null:i;var l=t();if(ca){bn(!0);try{t()}finally{bn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=Sn();if(a!==void 0){var d=a(i);if(ca){bn(!0);try{a(i)}finally{bn(!1)}}}else d=i;return l.memoizedState=l.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},l.queue=t,t=t.dispatch=tw.bind(null,je,t),[l.memoizedState,t]},useRef:function(t){var i=Sn();return t={current:t},i.memoizedState=t},useState:function(t){t=sf(t);var i=t.queue,a=ky.bind(null,je,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:of,useDeferredValue:function(t,i){var a=Sn();return lf(a,t,i)},useTransition:function(){var t=sf(!1);return t=Iy.bind(null,je,t.queue,!0,!1),Sn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=je,d=Sn();if(Je){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),gt===null)throw Error(r(349));(Ge&127)!==0||sy(l,i,a)}d.memoizedState=a;var f={value:a,getSnapshot:i};return d.queue=f,Ey(ay.bind(null,l,f,t),[t]),l.flags|=2048,ao(9,{destroy:void 0},ry.bind(null,l,f,a,i),null),a},useId:function(){var t=Sn(),i=gt.identifierPrefix;if(Je){var a=$i,l=Gi;a=(l&~(1<<32-ot(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Tu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Kb++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:uf,useFormState:py,useActionState:py,useOptimistic:function(t){var i=Sn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=hf.bind(null,je,!0,a),a.dispatch=i,[t,i]},useMemoCache:ef,useCacheRefresh:function(){return Sn().memoizedState=ew.bind(null,je)},useEffectEvent:function(t){var i=Sn(),a={impl:t};return i.memoizedState=a,function(){if((st&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},df={readContext:cn,use:bu,useCallback:Ry,useContext:cn,useEffect:af,useImperativeHandle:Ay,useInsertionEffect:Sy,useLayoutEffect:by,useMemo:Cy,useReducer:wu,useRef:_y,useState:function(){return wu(ms)},useDebugValue:of,useDeferredValue:function(t,i){var a=xt();return Ny(a,dt.memoizedState,t,i)},useTransition:function(){var t=wu(ms)[0],i=xt().memoizedState;return[typeof t=="boolean"?t:Cl(t),i]},useSyncExternalStore:iy,useId:Oy,useHostTransitionStatus:uf,useFormState:gy,useActionState:gy,useOptimistic:function(t,i){var a=xt();return cy(a,dt,t,i)},useMemoCache:ef,useCacheRefresh:My};df.useEffectEvent=Ty;var Py={readContext:cn,use:bu,useCallback:Ry,useContext:cn,useEffect:af,useImperativeHandle:Ay,useInsertionEffect:Sy,useLayoutEffect:by,useMemo:Cy,useReducer:nf,useRef:_y,useState:function(){return nf(ms)},useDebugValue:of,useDeferredValue:function(t,i){var a=xt();return dt===null?lf(a,t,i):Ny(a,dt.memoizedState,t,i)},useTransition:function(){var t=nf(ms)[0],i=xt().memoizedState;return[typeof t=="boolean"?t:Cl(t),i]},useSyncExternalStore:iy,useId:Oy,useHostTransitionStatus:uf,useFormState:vy,useActionState:vy,useOptimistic:function(t,i){var a=xt();return dt!==null?cy(a,dt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ef,useCacheRefresh:My};Py.useEffectEvent=Ty;function ff(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var mf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Hn(),d=Ws(l);d.payload=i,a!=null&&(d.callback=a),i=Js(t,d,l),i!==null&&(Dn(i,t,l),bl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Hn(),d=Ws(l);d.tag=1,d.payload=i,a!=null&&(d.callback=a),i=Js(t,d,l),i!==null&&(Dn(i,t,l),bl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Hn(),l=Ws(a);l.tag=2,i!=null&&(l.callback=i),i=Js(t,l,a),i!==null&&(Dn(i,t,a),bl(i,t,a))}};function Uy(t,i,a,l,d,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):i.prototype&&i.prototype.isPureReactComponent?!pl(a,l)||!pl(d,f):!0}function zy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&mf.enqueueReplaceState(i,i.state,null)}function ua(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}function By(t){ru(t)}function qy(t){console.error(t)}function Hy(t){ru(t)}function Nu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Fy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function pf(t,i,a){return a=Ws(a),a.tag=3,a.payload={element:null},a.callback=function(){Nu(t,i)},a}function Gy(t){return t=Ws(t),t.tag=3,t}function $y(t,i,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;t.payload=function(){return d(f)},t.callback=function(){Fy(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Fy(i,a,l),typeof d!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function nw(t,i,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Ja(i,a,d,!0),a=Un.current,a!==null){switch(a.tag){case 31:case 13:return ni===null?zu():a.alternate===null&&Ct===0&&(Ct=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===pu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),zf(t,l,d)),!1;case 22:return a.flags|=65536,l===pu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),zf(t,l,d)),!1}throw Error(r(435,a.tag))}return zf(t,l,d),zu(),!1}if(Je)return i=Un.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,l!==Md&&(t=Error(r(422),{cause:l}),vl(Jn(t,a)))):(l!==Md&&(i=Error(r(423),{cause:l}),vl(Jn(i,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,l=Jn(l,a),d=pf(t.stateNode,l,d),Fd(t,d),Ct!==4&&(Ct=2)),!1;var f=Error(r(520),{cause:l});if(f=Jn(f,a),Ll===null?Ll=[f]:Ll.push(f),Ct!==4&&(Ct=2),i===null)return!0;l=Jn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=pf(a.stateNode,l,t),Fd(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(sr===null||!sr.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Gy(d),$y(d,t,a,l),Fd(a,d),!1}a=a.return}while(a!==null);return!1}var gf=Error(r(461)),Ut=!1;function un(t,i,a,l){i.child=t===null?Xg(i,null,a,l):la(i,t.child,a,l)}function Yy(t,i,a,l,d){a=a.render;var f=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return sa(i),l=Xd(t,i,a,_,f,d),b=Wd(),t!==null&&!Ut?(Jd(t,i,d),ps(t,i,d)):(Je&&b&&xd(i),i.flags|=1,un(t,i,l,d),i.child)}function Ky(t,i,a,l,d){if(t===null){var f=a.type;return typeof f=="function"&&!Nd(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Qy(t,i,f,l,d)):(t=cu(a.type,null,l,i,i.mode,d),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!wf(t,d)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:pl,a(_,l)&&t.ref===i.ref)return ps(t,i,d)}return i.flags|=1,t=cs(f,l),t.ref=i.ref,t.return=i,i.child=t}function Qy(t,i,a,l,d){if(t!==null){var f=t.memoizedProps;if(pl(f,l)&&t.ref===i.ref)if(Ut=!1,i.pendingProps=l=f,wf(t,d))(t.flags&131072)!==0&&(Ut=!0);else return i.lanes=t.lanes,ps(t,i,d)}return yf(t,i,a,l,d)}function Xy(t,i,a,l){var d=l.children,f=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=i.child=t.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,i.child=null;return Wy(t,i,f,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&fu(i,f!==null?f.cachePool:null),f!==null?Zg(i,f):$d(),ey(i);else return l=i.lanes=536870912,Wy(t,i,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(fu(i,f.cachePool),Zg(i,f),er(),i.memoizedState=null):(t!==null&&fu(i,null),$d(),er());return un(t,i,d,a),i.child}function Dl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Wy(t,i,a,l,d){var f=zd();return f=f===null?null:{parent:Lt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&fu(i,null),$d(),ey(i),t!==null&&Ja(t,i,l,!0),i.childLanes=d,null}function Iu(t,i){return i=xu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Jy(t,i,a){return la(i,t.child,null,a),t=Iu(i,i.pendingProps),t.flags|=2,zn(i),i.memoizedState=null,t}function iw(t,i,a){var l=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Je){if(l.mode==="hidden")return t=Iu(i,l),i.lanes=536870912,Dl(null,t);if(Kd(i),(t=_t)?(t=u_(t,ti),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:$s!==null?{id:Gi,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},a=jg(t),a.return=i,i.child=a,ln=i,_t=null)):t=null,t===null)throw Ks(i);return i.lanes=536870912,null}return Iu(i,l)}var f=t.memoizedState;if(f!==null){var _=f.dehydrated;if(Kd(i),d)if(i.flags&256)i.flags&=-257,i=Jy(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Ut||Ja(t,i,a,!1),d=(a&t.childLanes)!==0,Ut||d){if(l=gt,l!==null&&(_=ui(l,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,ea(t,_),Dn(l,t,_),gf;zu(),i=Jy(t,i,a)}else t=f.treeContext,_t=ii(_.nextSibling),ln=i,Je=!0,Ys=null,ti=!1,t!==null&&Pg(i,t),i=Iu(i,l),i.flags|=4096;return i}return t=cs(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Du(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function yf(t,i,a,l,d){return sa(i),a=Xd(t,i,a,l,void 0,d),l=Wd(),t!==null&&!Ut?(Jd(t,i,d),ps(t,i,d)):(Je&&l&&xd(i),i.flags|=1,un(t,i,a,d),i.child)}function Zy(t,i,a,l,d,f){return sa(i),i.updateQueue=null,a=ny(i,l,a,d),ty(t),l=Wd(),t!==null&&!Ut?(Jd(t,i,f),ps(t,i,f)):(Je&&l&&xd(i),i.flags|=1,un(t,i,a,f),i.child)}function ev(t,i,a,l,d){if(sa(i),i.stateNode===null){var f=Ka,_=a.contextType;typeof _=="object"&&_!==null&&(f=cn(_)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=mf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},qd(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?cn(_):Ka,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(ff(i,a,_,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&mf.enqueueReplaceState(f,f.state,null),Al(i,l,f,d),wl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var b=i.memoizedProps,O=ua(a,b);f.props=O;var F=f.context,ne=a.contextType;_=Ka,typeof ne=="object"&&ne!==null&&(_=cn(ne));var re=a.getDerivedStateFromProps;ne=typeof re=="function"||typeof f.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,ne||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b||F!==_)&&zy(i,f,l,_),Xs=!1;var K=i.memoizedState;f.state=K,Al(i,l,f,d),wl(),F=i.memoizedState,b||K!==F||Xs?(typeof re=="function"&&(ff(i,a,re,l),F=i.memoizedState),(O=Xs||Uy(i,a,O,l,K,F,_))?(ne||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=F),f.props=l,f.state=F,f.context=_,l=O):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,Hd(t,i),_=i.memoizedProps,ne=ua(a,_),f.props=ne,re=i.pendingProps,K=f.context,F=a.contextType,O=Ka,typeof F=="object"&&F!==null&&(O=cn(F)),b=a.getDerivedStateFromProps,(F=typeof b=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==re||K!==O)&&zy(i,f,l,O),Xs=!1,K=i.memoizedState,f.state=K,Al(i,l,f,d),wl();var W=i.memoizedState;_!==re||K!==W||Xs||t!==null&&t.dependencies!==null&&hu(t.dependencies)?(typeof b=="function"&&(ff(i,a,b,l),W=i.memoizedState),(ne=Xs||Uy(i,a,ne,l,K,W,O)||t!==null&&t.dependencies!==null&&hu(t.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,W,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,W,O)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=W),f.props=l,f.state=W,f.context=O,l=ne):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&K===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,Du(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=la(i,t.child,null,d),i.child=la(i,null,a,d)):un(t,i,a,d),i.memoizedState=f.state,t=i.child):t=ps(t,i,d),t}function tv(t,i,a,l){return na(),i.flags|=256,un(t,i,a,l),i.child}var vf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _f(t){return{baseLanes:t,cachePool:Fg()}}function Ef(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=qn),t}function nv(t,i,a){var l=i.pendingProps,d=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),_&&(d=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Je){if(d?Zs(i):er(),(t=_t)?(t=u_(t,ti),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:$s!==null?{id:Gi,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},a=jg(t),a.return=i,i.child=a,ln=i,_t=null)):t=null,t===null)throw Ks(i);return nm(t)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,d?(er(),d=i.mode,b=xu({mode:"hidden",children:b},d),l=ta(l,d,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=_f(a),l.childLanes=Ef(t,_,a),i.memoizedState=vf,Dl(null,l)):(Zs(i),Tf(i,b))}var O=t.memoizedState;if(O!==null&&(b=O.dehydrated,b!==null)){if(f)i.flags&256?(Zs(i),i.flags&=-257,i=Sf(t,i,a)):i.memoizedState!==null?(er(),i.child=t.child,i.flags|=128,i=null):(er(),b=l.fallback,d=i.mode,l=xu({mode:"visible",children:l.children},d),b=ta(b,d,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,la(i,t.child,null,a),l=i.child,l.memoizedState=_f(a),l.childLanes=Ef(t,_,a),i.memoizedState=vf,i=Dl(null,l));else if(Zs(i),nm(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(r(419)),l.stack="",l.digest=_,vl({value:l,source:null,stack:null}),i=Sf(t,i,a)}else if(Ut||Ja(t,i,a,!1),_=(a&t.childLanes)!==0,Ut||_){if(_=gt,_!==null&&(l=ui(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,ea(t,l),Dn(_,t,l),gf;tm(b)||zu(),i=Sf(t,i,a)}else tm(b)?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,_t=ii(b.nextSibling),ln=i,Je=!0,Ys=null,ti=!1,t!==null&&Pg(i,t),i=Tf(i,l.children),i.flags|=4096);return i}return d?(er(),b=l.fallback,d=i.mode,O=t.child,F=O.sibling,l=cs(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,F!==null?b=cs(F,b):(b=ta(b,d,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,Dl(null,l),l=i.child,b=t.child.memoizedState,b===null?b=_f(a):(d=b.cachePool,d!==null?(O=Lt._currentValue,d=d.parent!==O?{parent:O,pool:O}:d):d=Fg(),b={baseLanes:b.baseLanes|a,cachePool:d}),l.memoizedState=b,l.childLanes=Ef(t,_,a),i.memoizedState=vf,Dl(t.child,l)):(Zs(i),a=t.child,t=a.sibling,a=cs(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Tf(t,i){return i=xu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function xu(t,i){return t=Pn(22,t,null,i),t.lanes=0,t}function Sf(t,i,a){return la(i,t.child,null,a),t=Tf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function iv(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Vd(t.return,i,a)}function bf(t,i,a,l,d,f){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d,treeForkCount:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=d,_.treeForkCount=f)}function sv(t,i,a){var l=i.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var _=Dt.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,Y(Dt,_),un(t,i,l,a),l=Je?yl:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iv(t,a,i);else if(t.tag===19)iv(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(a=i.child,d=null;a!==null;)t=a.alternate,t!==null&&_u(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),bf(i,!1,d,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(t=d.alternate,t!==null&&_u(t)===null){i.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}bf(i,!0,a,null,f,l);break;case"together":bf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ps(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),ir|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ja(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=cs(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=cs(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function wf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&hu(t)))}function sw(t,i,a){switch(i.tag){case 3:Re(i,i.stateNode.containerInfo),Qs(i,Lt,t.memoizedState.cache),na();break;case 27:case 5:at(i);break;case 4:Re(i,i.stateNode.containerInfo);break;case 10:Qs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Kd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Zs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?nv(t,i,a):(Zs(i),t=ps(t,i,a),t!==null?t.sibling:null);Zs(i);break;case 19:var d=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Ja(t,i,a,!1),l=(a&i.childLanes)!==0),d){if(l)return sv(t,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Y(Dt,Dt.current),l)break;return null;case 22:return i.lanes=0,Xy(t,i,a,i.pendingProps);case 24:Qs(i,Lt,t.memoizedState.cache)}return ps(t,i,a)}function rv(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Ut=!0;else{if(!wf(t,a)&&(i.flags&128)===0)return Ut=!1,sw(t,i,a);Ut=(t.flags&131072)!==0}else Ut=!1,Je&&(i.flags&1048576)!==0&&Lg(i,yl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=aa(i.elementType),i.type=t,typeof t=="function")Nd(t)?(l=ua(t,l),i.tag=1,i=ev(null,i,t,l,a)):(i.tag=0,i=yf(null,i,t,l,a));else{if(t!=null){var d=t.$$typeof;if(d===pe){i.tag=11,i=Yy(null,i,t,l,a);break e}else if(d===N){i.tag=14,i=Ky(null,i,t,l,a);break e}}throw i=we(t)||t,Error(r(306,i,""))}}return i;case 0:return yf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,d=ua(l,i.pendingProps),ev(t,i,l,d,a);case 3:e:{if(Re(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var f=i.memoizedState;d=f.element,Hd(t,i),Al(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Qs(i,Lt,l),l!==f.cache&&Ld(i,[Lt],a,!0),wl(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=tv(t,i,l,a);break e}else if(l!==d){d=Jn(Error(r(424)),i),vl(d),i=tv(t,i,l,a);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,_t=ii(t.firstChild),ln=i,Je=!0,Ys=null,ti=!0,a=Xg(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(na(),l===d){i=ps(t,i,a);break e}un(t,i,l,a)}i=i.child}return i;case 26:return Du(t,i),t===null?(a=g_(i.type,null,i.pendingProps,null))?i.memoizedState=a:Je||(a=i.type,t=i.pendingProps,l=Yu(fe.current).createElement(a),l[kt]=i,l[tn]=t,hn(l,a,t),jt(l),i.stateNode=l):i.memoizedState=g_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return at(i),t===null&&Je&&(l=i.stateNode=f_(i.type,i.pendingProps,fe.current),ln=i,ti=!0,d=_t,lr(i.type)?(im=d,_t=ii(l.firstChild)):_t=d),un(t,i,i.pendingProps.children,a),Du(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Je&&((d=l=_t)&&(l=kw(l,i.type,i.pendingProps,ti),l!==null?(i.stateNode=l,ln=i,_t=ii(l.firstChild),ti=!1,d=!0):d=!1),d||Ks(i)),at(i),d=i.type,f=i.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,Jf(d,f)?l=null:_!==null&&Jf(d,_)&&(i.flags|=32),i.memoizedState!==null&&(d=Xd(t,i,Qb,null,null,a),Gl._currentValue=d),Du(t,i),un(t,i,l,a),i.child;case 6:return t===null&&Je&&((t=a=_t)&&(a=jw(a,i.pendingProps,ti),a!==null?(i.stateNode=a,ln=i,_t=null,t=!0):t=!1),t||Ks(i)),null;case 13:return nv(t,i,a);case 4:return Re(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=la(i,null,l,a):un(t,i,l,a),i.child;case 11:return Yy(t,i,i.type,i.pendingProps,a);case 7:return un(t,i,i.pendingProps,a),i.child;case 8:return un(t,i,i.pendingProps.children,a),i.child;case 12:return un(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Qs(i,i.type,l.value),un(t,i,l.children,a),i.child;case 9:return d=i.type._context,l=i.pendingProps.children,sa(i),d=cn(d),l=l(d),i.flags|=1,un(t,i,l,a),i.child;case 14:return Ky(t,i,i.type,i.pendingProps,a);case 15:return Qy(t,i,i.type,i.pendingProps,a);case 19:return sv(t,i,a);case 31:return iw(t,i,a);case 22:return Xy(t,i,a,i.pendingProps);case 24:return sa(i),l=cn(Lt),t===null?(d=zd(),d===null&&(d=gt,f=Pd(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),i.memoizedState={parent:l,cache:d},qd(i),Qs(i,Lt,d)):((t.lanes&a)!==0&&(Hd(t,i),Al(i,null,null,a),wl()),d=t.memoizedState,f=i.memoizedState,d.parent!==l?(d={parent:l,cache:l},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Qs(i,Lt,l)):(l=f.cache,Qs(i,Lt,l),l!==d.cache&&Ld(i,[Lt],a,!0))),un(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function gs(t){t.flags|=4}function Af(t,i,a,l,d){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Ov())t.flags|=8192;else throw oa=pu,Bd}else t.flags&=-16777217}function av(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!T_(i))if(Ov())t.flags|=8192;else throw oa=pu,Bd}function Ou(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?en():536870912,t.lanes|=i,uo|=i)}function xl(t,i){if(!Je)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Et(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function rw(t,i,a){var l=i.pendingProps;switch(Od(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(i),null;case 1:return Et(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ds(Lt),Me(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Wa(i)?gs(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,kd())),Et(i),null;case 26:var d=i.type,f=i.memoizedState;return t===null?(gs(i),f!==null?(Et(i),av(i,f)):(Et(i),Af(i,d,null,l,a))):f?f!==t.memoizedState?(gs(i),Et(i),av(i,f)):(Et(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&gs(i),Et(i),Af(i,d,t,l,a)),null;case 27:if(Te(i),a=fe.current,d=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&gs(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return Et(i),null}t=Z.current,Wa(i)?Ug(i):(t=f_(d,l,a),i.stateNode=t,gs(i))}return Et(i),null;case 5:if(Te(i),d=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&gs(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return Et(i),null}if(f=Z.current,Wa(i))Ug(i);else{var _=Yu(fe.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?_.createElement(d,{is:l.is}):_.createElement(d)}}f[kt]=i,f[tn]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=f;e:switch(hn(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&gs(i)}}return Et(i),Af(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&gs(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=fe.current,Wa(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,d=ln,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}t[kt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||n_(t.nodeValue,a)),t||Ks(i,!0)}else t=Yu(t).createTextNode(l),t[kt]=i,i.stateNode=t}return Et(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Wa(i),a!==null){if(t===null){if(!l)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[kt]=i}else na(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Et(i),t=!1}else a=kd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(zn(i),i):(zn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return Et(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Wa(i),l!==null&&l.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[kt]=i}else na(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Et(i),d=!1}else d=kd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(zn(i),i):(zn(i),null)}return zn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Ou(i,i.updateQueue),Et(i),null);case 4:return Me(),t===null&&Yf(i.stateNode.containerInfo),Et(i),null;case 10:return ds(i.type),Et(i),null;case 19:if(ie(Dt),l=i.memoizedState,l===null)return Et(i),null;if(d=(i.flags&128)!==0,f=l.rendering,f===null)if(d)xl(l,!1);else{if(Ct!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=_u(t),f!==null){for(i.flags|=128,xl(l,!1),t=f.updateQueue,i.updateQueue=t,Ou(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)kg(a,t),a=a.sibling;return Y(Dt,Dt.current&1|2),Je&&us(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Jt()>Lu&&(i.flags|=128,d=!0,xl(l,!1),i.lanes=4194304)}else{if(!d)if(t=_u(f),t!==null){if(i.flags|=128,d=!0,t=t.updateQueue,i.updateQueue=t,Ou(i,t),xl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Je)return Et(i),null}else 2*Jt()-l.renderingStartTime>Lu&&a!==536870912&&(i.flags|=128,d=!0,xl(l,!1),i.lanes=4194304);l.isBackwards?(f.sibling=i.child,i.child=f):(t=l.last,t!==null?t.sibling=f:i.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Jt(),t.sibling=null,a=Dt.current,Y(Dt,d?a&1|2:a&1),Je&&us(i,l.treeForkCount),t):(Et(i),null);case 22:case 23:return zn(i),Yd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(Et(i),i.subtreeFlags&6&&(i.flags|=8192)):Et(i),a=i.updateQueue,a!==null&&Ou(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ie(ra),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ds(Lt),Et(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function aw(t,i){switch(Od(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ds(Lt),Me(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Te(i),null;case 31:if(i.memoizedState!==null){if(zn(i),i.alternate===null)throw Error(r(340));na()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(zn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));na()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ie(Dt),null;case 4:return Me(),null;case 10:return ds(i.type),null;case 22:case 23:return zn(i),Yd(),t!==null&&ie(ra),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ds(Lt),null;case 25:return null;default:return null}}function ov(t,i){switch(Od(i),i.tag){case 3:ds(Lt),Me();break;case 26:case 27:case 5:Te(i);break;case 4:Me();break;case 31:i.memoizedState!==null&&zn(i);break;case 13:zn(i);break;case 19:ie(Dt);break;case 10:ds(i.type);break;case 22:case 23:zn(i),Yd(),t!==null&&ie(ra);break;case 24:ds(Lt)}}function Ol(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&t)===t){l=void 0;var f=a.create,_=a.inst;l=f(),_.destroy=l}a=a.next}while(a!==d)}}catch(b){ut(i,i.return,b)}}function tr(t,i,a){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,d=i;var O=a,F=b;try{F()}catch(ne){ut(d,O,ne)}}}l=l.next}while(l!==f)}}catch(ne){ut(i,i.return,ne)}}function lv(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Jg(i,a)}catch(l){ut(t,t.return,l)}}}function cv(t,i,a){a.props=ua(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ut(t,i,l)}}function Ml(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(d){ut(t,i,d)}}function Yi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){ut(t,i,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ut(t,i,d)}else a.current=null}function uv(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){ut(t,t.return,d)}}function Rf(t,i,a){try{var l=t.stateNode;Nw(l,t.type,a,i),l[tn]=i}catch(d){ut(t,t.return,d)}}function hv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&lr(t.type)||t.tag===4}function Cf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&lr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=mi));else if(l!==4&&(l===27&&lr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Nf(t,i,a),t=t.sibling;t!==null;)Nf(t,i,a),t=t.sibling}function Mu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&lr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Mu(t,i,a),t=t.sibling;t!==null;)Mu(t,i,a),t=t.sibling}function dv(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);hn(i,l,a),i[kt]=t,i[tn]=a}catch(f){ut(t,t.return,f)}}var ys=!1,zt=!1,If=!1,fv=typeof WeakSet=="function"?WeakSet:Set,sn=null;function ow(t,i){if(t=t.containerInfo,Xf=eh,t=Ag(t),Td(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,b=-1,O=-1,F=0,ne=0,re=t,K=null;t:for(;;){for(var W;re!==a||d!==0&&re.nodeType!==3||(b=_+d),re!==f||l!==0&&re.nodeType!==3||(O=_+l),re.nodeType===3&&(_+=re.nodeValue.length),(W=re.firstChild)!==null;)K=re,re=W;for(;;){if(re===t)break t;if(K===a&&++F===d&&(b=_),K===f&&++ne===l&&(O=_),(W=re.nextSibling)!==null)break;re=K,K=re.parentNode}re=W}a=b===-1||O===-1?null:{start:b,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Wf={focusedElem:t,selectionRange:a},eh=!1,sn=i;sn!==null;)if(i=sn,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,sn=t;else for(;sn!==null;){switch(i=sn,f=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)d=t[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,d=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var ve=ua(a.type,d);t=l.getSnapshotBeforeUpdate(ve,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ae){ut(a,a.return,Ae)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)em(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":em(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,sn=t;break}sn=i.return}}function mv(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:_s(t,a),l&4&&Ol(5,a);break;case 1:if(_s(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){ut(a,a.return,_)}else{var d=ua(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(d,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ut(a,a.return,_)}}l&64&&lv(a),l&512&&Ml(a,a.return);break;case 3:if(_s(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Jg(t,i)}catch(_){ut(a,a.return,_)}}break;case 27:i===null&&l&4&&dv(a);case 26:case 5:_s(t,a),i===null&&l&4&&uv(a),l&512&&Ml(a,a.return);break;case 12:_s(t,a);break;case 31:_s(t,a),l&4&&yv(t,a);break;case 13:_s(t,a),l&4&&vv(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=gw.bind(null,a),Vw(t,a))));break;case 22:if(l=a.memoizedState!==null||ys,!l){i=i!==null&&i.memoizedState!==null||zt,d=ys;var f=zt;ys=l,(zt=i)&&!f?Es(t,a,(a.subtreeFlags&8772)!==0):_s(t,a),ys=d,zt=f}break;case 30:break;default:_s(t,a)}}function pv(t){var i=t.alternate;i!==null&&(t.alternate=null,pv(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ka(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var St=null,Rn=!1;function vs(t,i,a){for(a=a.child;a!==null;)gv(t,i,a),a=a.sibling}function gv(t,i,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(kn,a)}catch{}switch(a.tag){case 26:zt||Yi(a,i),vs(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:zt||Yi(a,i);var l=St,d=Rn;lr(a.type)&&(St=a.stateNode,Rn=!1),vs(t,i,a),ql(a.stateNode),St=l,Rn=d;break;case 5:zt||Yi(a,i);case 6:if(l=St,d=Rn,St=null,vs(t,i,a),St=l,Rn=d,St!==null)if(Rn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(a.stateNode)}catch(f){ut(a,i,f)}else try{St.removeChild(a.stateNode)}catch(f){ut(a,i,f)}break;case 18:St!==null&&(Rn?(t=St,l_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),_o(t)):l_(St,a.stateNode));break;case 4:l=St,d=Rn,St=a.stateNode.containerInfo,Rn=!0,vs(t,i,a),St=l,Rn=d;break;case 0:case 11:case 14:case 15:tr(2,a,i),zt||tr(4,a,i),vs(t,i,a);break;case 1:zt||(Yi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&cv(a,i,l)),vs(t,i,a);break;case 21:vs(t,i,a);break;case 22:zt=(l=zt)||a.memoizedState!==null,vs(t,i,a),zt=l;break;default:vs(t,i,a)}}function yv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{_o(t)}catch(a){ut(i,i.return,a)}}}function vv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{_o(t)}catch(a){ut(i,i.return,a)}}function lw(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new fv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new fv),i;default:throw Error(r(435,t.tag))}}function ku(t,i){var a=lw(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var d=yw.bind(null,t,l);l.then(d,d)}})}function Cn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],f=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(lr(b.type)){St=b.stateNode,Rn=!1;break e}break;case 5:St=b.stateNode,Rn=!1;break e;case 3:case 4:St=b.stateNode.containerInfo,Rn=!0;break e}b=b.return}if(St===null)throw Error(r(160));gv(f,_,d),St=null,Rn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)_v(i,t),i=i.sibling}var Ei=null;function _v(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Cn(i,t),Nn(t),l&4&&(tr(3,t,t.return),Ol(3,t),tr(5,t,t.return));break;case 1:Cn(i,t),Nn(t),l&512&&(zt||a===null||Yi(a,a.return)),l&64&&ys&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=Ei;if(Cn(i,t),Nn(t),l&512&&(zt||a===null||Yi(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Mi]||f[kt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),hn(f,l,a),f[kt]=t,jt(f),l=f;break e;case"link":var _=__("link","href",d).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(f=_[b],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}f=d.createElement(l),hn(f,l,a),d.head.appendChild(f);break;case"meta":if(_=__("meta","content",d).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(f=_[b],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}f=d.createElement(l),hn(f,l,a),d.head.appendChild(f);break;default:throw Error(r(468,l))}f[kt]=t,jt(f),l=f}t.stateNode=l}else E_(d,t.type,t.stateNode);else t.stateNode=v_(d,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?E_(d,t.type,t.stateNode):v_(d,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Rf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Cn(i,t),Nn(t),l&512&&(zt||a===null||Yi(a,a.return)),a!==null&&l&4&&Rf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Cn(i,t),Nn(t),l&512&&(zt||a===null||Yi(a,a.return)),t.flags&32){d=t.stateNode;try{An(d,"")}catch(ve){ut(t,t.return,ve)}}l&4&&t.stateNode!=null&&(d=t.memoizedProps,Rf(t,d,a!==null?a.memoizedProps:d)),l&1024&&(If=!0);break;case 6:if(Cn(i,t),Nn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ve){ut(t,t.return,ve)}}break;case 3:if(Xu=null,d=Ei,Ei=Ku(i.containerInfo),Cn(i,t),Ei=d,Nn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{_o(i.containerInfo)}catch(ve){ut(t,t.return,ve)}If&&(If=!1,Ev(t));break;case 4:l=Ei,Ei=Ku(t.stateNode.containerInfo),Cn(i,t),Nn(t),Ei=l;break;case 12:Cn(i,t),Nn(t);break;case 31:Cn(i,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 13:Cn(i,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vu=Jt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 22:d=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,F=ys,ne=zt;if(ys=F||d,zt=ne||O,Cn(i,t),zt=ne,ys=F,Nn(t),l&8192)e:for(i=t.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(a===null||O||ys||zt||ha(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(f=O.stateNode,d)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=O.stateNode;var re=O.memoizedProps.style,K=re!=null&&re.hasOwnProperty("display")?re.display:null;b.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ve){ut(O,O.return,ve)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(ve){ut(O,O.return,ve)}}}else if(i.tag===18){if(a===null){O=i;try{var W=O.stateNode;d?c_(W,!0):c_(O.stateNode,!1)}catch(ve){ut(O,O.return,ve)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ku(t,a))));break;case 19:Cn(i,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 30:break;case 21:break;default:Cn(i,t),Nn(t)}}function Nn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(hv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,f=Cf(t);Mu(t,f,d);break;case 5:var _=a.stateNode;a.flags&32&&(An(_,""),a.flags&=-33);var b=Cf(t);Mu(t,b,_);break;case 3:case 4:var O=a.stateNode.containerInfo,F=Cf(t);Nf(t,F,O);break;default:throw Error(r(161))}}catch(ne){ut(t,t.return,ne)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Ev(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Ev(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function _s(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)mv(t,i.alternate,i),i=i.sibling}function ha(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:tr(4,i,i.return),ha(i);break;case 1:Yi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&cv(i,i.return,a),ha(i);break;case 27:ql(i.stateNode);case 26:case 5:Yi(i,i.return),ha(i);break;case 22:i.memoizedState===null&&ha(i);break;case 30:ha(i);break;default:ha(i)}t=t.sibling}}function Es(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,d=t,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:Es(d,f,a),Ol(4,f);break;case 1:if(Es(d,f,a),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){ut(l,l.return,F)}if(l=f,d=l.updateQueue,d!==null){var b=l.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)Wg(O[d],b)}catch(F){ut(l,l.return,F)}}a&&_&64&&lv(f),Ml(f,f.return);break;case 27:dv(f);case 26:case 5:Es(d,f,a),a&&l===null&&_&4&&uv(f),Ml(f,f.return);break;case 12:Es(d,f,a);break;case 31:Es(d,f,a),a&&_&4&&yv(d,f);break;case 13:Es(d,f,a),a&&_&4&&vv(d,f);break;case 22:f.memoizedState===null&&Es(d,f,a),Ml(f,f.return);break;case 30:break;default:Es(d,f,a)}i=i.sibling}}function Df(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&_l(a))}function xf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&_l(t))}function Ti(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Tv(t,i,a,l),i=i.sibling}function Tv(t,i,a,l){var d=i.flags;switch(i.tag){case 0:case 11:case 15:Ti(t,i,a,l),d&2048&&Ol(9,i);break;case 1:Ti(t,i,a,l);break;case 3:Ti(t,i,a,l),d&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&_l(t)));break;case 12:if(d&2048){Ti(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,_=f.id,b=f.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){ut(i,i.return,O)}}else Ti(t,i,a,l);break;case 31:Ti(t,i,a,l);break;case 13:Ti(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?Ti(t,i,a,l):kl(t,i):f._visibility&2?Ti(t,i,a,l):(f._visibility|=2,oo(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),d&2048&&Df(_,i);break;case 24:Ti(t,i,a,l),d&2048&&xf(i.alternate,i);break;default:Ti(t,i,a,l)}}function oo(t,i,a,l,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=t,_=i,b=a,O=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:oo(f,_,b,O,d),Ol(8,_);break;case 23:break;case 22:var ne=_.stateNode;_.memoizedState!==null?ne._visibility&2?oo(f,_,b,O,d):kl(f,_):(ne._visibility|=2,oo(f,_,b,O,d)),d&&F&2048&&Df(_.alternate,_);break;case 24:oo(f,_,b,O,d),d&&F&2048&&xf(_.alternate,_);break;default:oo(f,_,b,O,d)}i=i.sibling}}function kl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,d=l.flags;switch(l.tag){case 22:kl(a,l),d&2048&&Df(l.alternate,l);break;case 24:kl(a,l),d&2048&&xf(l.alternate,l);break;default:kl(a,l)}i=i.sibling}}var jl=8192;function lo(t,i,a){if(t.subtreeFlags&jl)for(t=t.child;t!==null;)Sv(t,i,a),t=t.sibling}function Sv(t,i,a){switch(t.tag){case 26:lo(t,i,a),t.flags&jl&&t.memoizedState!==null&&Kw(a,Ei,t.memoizedState,t.memoizedProps);break;case 5:lo(t,i,a);break;case 3:case 4:var l=Ei;Ei=Ku(t.stateNode.containerInfo),lo(t,i,a),Ei=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=jl,jl=16777216,lo(t,i,a),jl=l):lo(t,i,a));break;default:lo(t,i,a)}}function bv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Vl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];sn=l,Av(l,t)}bv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wv(t),t=t.sibling}function wv(t){switch(t.tag){case 0:case 11:case 15:Vl(t),t.flags&2048&&tr(9,t,t.return);break;case 3:Vl(t);break;case 12:Vl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,ju(t)):Vl(t);break;default:Vl(t)}}function ju(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];sn=l,Av(l,t)}bv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:tr(8,i,i.return),ju(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ju(i));break;default:ju(i)}t=t.sibling}}function Av(t,i){for(;sn!==null;){var a=sn;switch(a.tag){case 0:case 11:case 15:tr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:_l(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,sn=l;else e:for(a=t;sn!==null;){l=sn;var d=l.sibling,f=l.return;if(pv(l),l===a){sn=null;break e}if(d!==null){d.return=f,sn=d;break e}sn=f}}}var cw={getCacheForType:function(t){var i=cn(Lt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return cn(Lt).controller.signal}},uw=typeof WeakMap=="function"?WeakMap:Map,st=0,gt=null,He=null,Ge=0,ct=0,Bn=null,nr=!1,co=!1,Of=!1,Ts=0,Ct=0,ir=0,da=0,Mf=0,qn=0,uo=0,Ll=null,In=null,kf=!1,Vu=0,Rv=0,Lu=1/0,Pu=null,sr=null,Yt=0,rr=null,ho=null,Ss=0,jf=0,Vf=null,Cv=null,Pl=0,Lf=null;function Hn(){return(st&2)!==0&&Ge!==0?Ge&-Ge:J.T!==null?Hf():Uc()}function Nv(){if(qn===0)if((Ge&536870912)===0||Je){var t=Di;Di<<=1,(Di&3932160)===0&&(Di=262144),qn=t}else qn=536870912;return t=Un.current,t!==null&&(t.flags|=32),qn}function Dn(t,i,a){(t===gt&&(ct===2||ct===9)||t.cancelPendingCommit!==null)&&(fo(t,0),ar(t,Ge,qn,!1)),xi(t,a),((st&2)===0||t!==gt)&&(t===gt&&((st&2)===0&&(da|=a),Ct===4&&ar(t,Ge,qn,!1)),Ki(t))}function Iv(t,i,a){if((st&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Oe(t,i),d=l?fw(t,i):Uf(t,i,!0),f=l;do{if(d===0){co&&!l&&ar(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!hw(a)){d=Uf(t,i,!1),f=!1;continue}if(d===2){if(f=i,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;d=Ll;var O=b.current.memoizedState.isDehydrated;if(O&&(fo(b,_).flags|=256),_=Uf(b,_,!1),_!==2){if(Of&&!O){b.errorRecoveryDisabledLanes|=f,da|=f,d=4;break e}f=In,In=d,f!==null&&(In===null?In=f:In.push.apply(In,f))}d=_}if(f=!1,d!==2)continue}}if(d===1){fo(t,0),ar(t,i,0,!0);break}e:{switch(l=t,f=d,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ar(l,i,qn,!nr);break e;case 2:In=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(d=Vu+300-Jt(),10<d)){if(ar(l,i,qn,!nr),qe(l,0,!0)!==0)break e;Ss=i,l.timeoutHandle=a_(Dv.bind(null,l,a,In,Pu,kf,i,qn,da,uo,nr,f,"Throttled",-0,0),d);break e}Dv(l,a,In,Pu,kf,i,qn,da,uo,nr,f,null,-0,0)}}break}while(!0);Ki(t)}function Dv(t,i,a,l,d,f,_,b,O,F,ne,re,K,W){if(t.timeoutHandle=-1,re=i.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mi},Sv(i,f,re);var ve=(f&62914560)===f?Vu-Jt():(f&4194048)===f?Rv-Jt():0;if(ve=Qw(re,ve),ve!==null){Ss=f,t.cancelPendingCommit=ve(Pv.bind(null,t,i,f,a,l,d,_,b,O,ne,re,null,K,W)),ar(t,f,_,!F);return}}Pv(t,i,f,a,l,d,_,b,O)}function hw(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],f=d.getSnapshot;d=d.value;try{if(!Ln(f(),d))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ar(t,i,a,l){i&=~Mf,i&=~da,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var d=i;0<d;){var f=31-ot(d),_=1<<f;l[f]=-1,d&=~_}a!==0&&ss(t,a,i)}function Uu(){return(st&6)===0?(Ul(0),!1):!0}function Pf(){if(He!==null){if(ct===0)var t=He.return;else t=He,hs=ia=null,Zd(t),no=null,Tl=0,t=He;for(;t!==null;)ov(t.alternate,t),t=t.return;He=null}}function fo(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,xw(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Ss=0,Pf(),gt=t,He=a=cs(t.current,null),Ge=i,ct=0,Bn=null,nr=!1,co=Oe(t,i),Of=!1,uo=qn=Mf=da=ir=Ct=0,In=Ll=null,kf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var d=31-ot(l),f=1<<d;i|=t[d],l&=~f}return Ts=i,au(),a}function xv(t,i){je=null,J.H=Il,i===to||i===mu?(i=Yg(),ct=3):i===Bd?(i=Yg(),ct=4):ct=i===gf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Bn=i,He===null&&(Ct=1,Nu(t,Jn(i,t.current)))}function Ov(){var t=Un.current;return t===null?!0:(Ge&4194048)===Ge?ni===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?t===ni:!1}function Mv(){var t=J.H;return J.H=Il,t===null?Il:t}function kv(){var t=J.A;return J.A=cw,t}function zu(){Ct=4,nr||(Ge&4194048)!==Ge&&Un.current!==null||(co=!0),(ir&134217727)===0&&(da&134217727)===0||gt===null||ar(gt,Ge,qn,!1)}function Uf(t,i,a){var l=st;st|=2;var d=Mv(),f=kv();(gt!==t||Ge!==i)&&(Pu=null,fo(t,i)),i=!1;var _=Ct;e:do try{if(ct!==0&&He!==null){var b=He,O=Bn;switch(ct){case 8:Pf(),_=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(i=!0);var F=ct;if(ct=0,Bn=null,mo(t,b,O,F),a&&co){_=0;break e}break;default:F=ct,ct=0,Bn=null,mo(t,b,O,F)}}dw(),_=Ct;break}catch(ne){xv(t,ne)}while(!0);return i&&t.shellSuspendCounter++,hs=ia=null,st=l,J.H=d,J.A=f,He===null&&(gt=null,Ge=0,au()),_}function dw(){for(;He!==null;)jv(He)}function fw(t,i){var a=st;st|=2;var l=Mv(),d=kv();gt!==t||Ge!==i?(Pu=null,Lu=Jt()+500,fo(t,i)):co=Oe(t,i);e:do try{if(ct!==0&&He!==null){i=He;var f=Bn;t:switch(ct){case 1:ct=0,Bn=null,mo(t,i,f,1);break;case 2:case 9:if(Gg(f)){ct=0,Bn=null,Vv(i);break}i=function(){ct!==2&&ct!==9||gt!==t||(ct=7),Ki(t)},f.then(i,i);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Gg(f)?(ct=0,Bn=null,Vv(i)):(ct=0,Bn=null,mo(t,i,f,7));break;case 5:var _=null;switch(He.tag){case 26:_=He.memoizedState;case 5:case 27:var b=He;if(_?T_(_):b.stateNode.complete){ct=0,Bn=null;var O=b.sibling;if(O!==null)He=O;else{var F=b.return;F!==null?(He=F,Bu(F)):He=null}break t}}ct=0,Bn=null,mo(t,i,f,5);break;case 6:ct=0,Bn=null,mo(t,i,f,6);break;case 8:Pf(),Ct=6;break e;default:throw Error(r(462))}}mw();break}catch(ne){xv(t,ne)}while(!0);return hs=ia=null,J.H=l,J.A=d,st=a,He!==null?0:(gt=null,Ge=0,au(),Ct)}function mw(){for(;He!==null&&!zr();)jv(He)}function jv(t){var i=rv(t.alternate,t,Ts);t.memoizedProps=t.pendingProps,i===null?Bu(t):He=i}function Vv(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Zy(a,i,i.pendingProps,i.type,void 0,Ge);break;case 11:i=Zy(a,i,i.pendingProps,i.type.render,i.ref,Ge);break;case 5:Zd(i);default:ov(a,i),i=He=kg(i,Ts),i=rv(a,i,Ts)}t.memoizedProps=t.pendingProps,i===null?Bu(t):He=i}function mo(t,i,a,l){hs=ia=null,Zd(i),no=null,Tl=0;var d=i.return;try{if(nw(t,d,i,a,Ge)){Ct=1,Nu(t,Jn(a,t.current)),He=null;return}}catch(f){if(d!==null)throw He=d,f;Ct=1,Nu(t,Jn(a,t.current)),He=null;return}i.flags&32768?(Je||l===1?t=!0:co||(Ge&536870912)!==0?t=!1:(nr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Un.current,l!==null&&l.tag===13&&(l.flags|=16384))),Lv(i,t)):Bu(i)}function Bu(t){var i=t;do{if((i.flags&32768)!==0){Lv(i,nr);return}t=i.return;var a=rw(i.alternate,i,Ts);if(a!==null){He=a;return}if(i=i.sibling,i!==null){He=i;return}He=i=t}while(i!==null);Ct===0&&(Ct=5)}function Lv(t,i){do{var a=aw(t.alternate,t);if(a!==null){a.flags&=32767,He=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){He=t;return}He=t=a}while(t!==null);Ct=6,He=null}function Pv(t,i,a,l,d,f,_,b,O){t.cancelPendingCommit=null;do qu();while(Yt!==0);if((st&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(f=i.lanes|i.childLanes,f|=Rd,Oa(t,a,f,_,b,O),t===gt&&(He=gt=null,Ge=0),ho=i,rr=t,Ss=a,jf=f,Vf=d,Cv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,vw(ci,function(){return Hv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=J.T,J.T=null,d=he.p,he.p=2,_=st,st|=4;try{ow(t,i,a)}finally{st=_,he.p=d,J.T=l}}Yt=1,Uv(),zv(),Bv()}}function Uv(){if(Yt===1){Yt=0;var t=rr,i=ho,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=J.T,J.T=null;var l=he.p;he.p=2;var d=st;st|=4;try{_v(i,t);var f=Wf,_=Ag(t.containerInfo),b=f.focusedElem,O=f.selectionRange;if(_!==b&&b&&b.ownerDocument&&wg(b.ownerDocument.documentElement,b)){if(O!==null&&Td(b)){var F=O.start,ne=O.end;if(ne===void 0&&(ne=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(ne,b.value.length);else{var re=b.ownerDocument||document,K=re&&re.defaultView||window;if(K.getSelection){var W=K.getSelection(),ve=b.textContent.length,Ae=Math.min(O.start,ve),mt=O.end===void 0?Ae:Math.min(O.end,ve);!W.extend&&Ae>mt&&(_=mt,mt=Ae,Ae=_);var B=bg(b,Ae),U=bg(b,mt);if(B&&U&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==U.node||W.focusOffset!==U.offset)){var H=re.createRange();H.setStart(B.node,B.offset),W.removeAllRanges(),Ae>mt?(W.addRange(H),W.extend(U.node,U.offset)):(H.setEnd(U.node,U.offset),W.addRange(H))}}}}for(re=[],W=b;W=W.parentNode;)W.nodeType===1&&re.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<re.length;b++){var se=re[b];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}eh=!!Xf,Wf=Xf=null}finally{st=d,he.p=l,J.T=a}}t.current=i,Yt=2}}function zv(){if(Yt===2){Yt=0;var t=rr,i=ho,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=J.T,J.T=null;var l=he.p;he.p=2;var d=st;st|=4;try{mv(t,i.alternate,i)}finally{st=d,he.p=l,J.T=a}}Yt=3}}function Bv(){if(Yt===4||Yt===3){Yt=0,Ca();var t=rr,i=ho,a=Ss,l=Cv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Yt=5:(Yt=0,ho=rr=null,qv(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(sr=null),rs(a),i=i.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(kn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=J.T,d=he.p,he.p=2,J.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];f(b.value,{componentStack:b.stack})}}finally{J.T=i,he.p=d}}(Ss&3)!==0&&qu(),Ki(t),d=t.pendingLanes,(a&261930)!==0&&(d&42)!==0?t===Lf?Pl++:(Pl=0,Lf=t):Pl=0,Ul(0)}}function qv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,_l(i)))}function qu(){return Uv(),zv(),Bv(),Hv()}function Hv(){if(Yt!==5)return!1;var t=rr,i=jf;jf=0;var a=rs(Ss),l=J.T,d=he.p;try{he.p=32>a?32:a,J.T=null,a=Vf,Vf=null;var f=rr,_=Ss;if(Yt=0,ho=rr=null,Ss=0,(st&6)!==0)throw Error(r(331));var b=st;if(st|=4,wv(f.current),Tv(f,f.current,_,a),st=b,Ul(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(kn,f)}catch{}return!0}finally{he.p=d,J.T=l,qv(t,i)}}function Fv(t,i,a){i=Jn(a,i),i=pf(t.stateNode,i,2),t=Js(t,i,2),t!==null&&(xi(t,2),Ki(t))}function ut(t,i,a){if(t.tag===3)Fv(t,t,a);else for(;i!==null;){if(i.tag===3){Fv(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(sr===null||!sr.has(l))){t=Jn(a,t),a=Gy(2),l=Js(i,a,2),l!==null&&($y(a,l,i,t),xi(l,2),Ki(l));break}}i=i.return}}function zf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new uw;var d=new Set;l.set(i,d)}else d=l.get(i),d===void 0&&(d=new Set,l.set(i,d));d.has(a)||(Of=!0,d.add(a),t=pw.bind(null,t,i,a),i.then(t,t))}function pw(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,gt===t&&(Ge&a)===a&&(Ct===4||Ct===3&&(Ge&62914560)===Ge&&300>Jt()-Vu?(st&2)===0&&fo(t,0):Mf|=a,uo===Ge&&(uo=0)),Ki(t)}function Gv(t,i){i===0&&(i=en()),t=ea(t,i),t!==null&&(xi(t,i),Ki(t))}function gw(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Gv(t,a)}function yw(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Gv(t,a)}function vw(t,i){return We(t,i)}var Hu=null,po=null,Bf=!1,Fu=!1,qf=!1,or=0;function Ki(t){t!==po&&t.next===null&&(po===null?Hu=po=t:po=po.next=t),Fu=!0,Bf||(Bf=!0,Ew())}function Ul(t,i){if(!qf&&Fu){qf=!0;do for(var a=!1,l=Hu;l!==null;){if(t!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var _=l.suspendedLanes,b=l.pingedLanes;f=(1<<31-ot(42|t)+1)-1,f&=d&~(_&~b),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Qv(l,f))}else f=Ge,f=qe(l,l===gt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Oe(l,f)||(a=!0,Qv(l,f));l=l.next}while(a);qf=!1}}function _w(){$v()}function $v(){Fu=Bf=!1;var t=0;or!==0&&Dw()&&(t=or);for(var i=Jt(),a=null,l=Hu;l!==null;){var d=l.next,f=Yv(l,i);f===0?(l.next=null,a===null?Hu=d:a.next=d,d===null&&(po=a)):(a=l,(t!==0||(f&3)!==0)&&(Fu=!0)),l=d}Yt!==0&&Yt!==5||Ul(t),or!==0&&(or=0)}function Yv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-ot(f),b=1<<_,O=d[_];O===-1?((b&a)===0||(b&l)!==0)&&(d[_]=$t(b,i)):O<=i&&(t.expiredLanes|=b),f&=~b}if(i=gt,a=Ge,a=qe(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(ct===2||ct===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&li(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Oe(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&li(l),rs(a)){case 2:case 8:a=is;break;case 32:a=ci;break;case 268435456:a=Na;break;default:a=ci}return l=Kv.bind(null,t),a=We(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&li(l),t.callbackPriority=2,t.callbackNode=null,2}function Kv(t,i){if(Yt!==0&&Yt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(qu()&&t.callbackNode!==a)return null;var l=Ge;return l=qe(t,t===gt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Iv(t,l,i),Yv(t,Jt()),t.callbackNode!=null&&t.callbackNode===a?Kv.bind(null,t):null)}function Qv(t,i){if(qu())return null;Iv(t,i,!0)}function Ew(){Ow(function(){(st&6)!==0?We(Br,_w):$v()})}function Hf(){if(or===0){var t=Za;t===0&&(t=Zt,Zt<<=1,(Zt&261888)===0&&(Zt=256)),or=t}return or}function Xv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Pa(""+t)}function Wv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Tw(t,i,a,l,d){if(i==="submit"&&a&&a.stateNode===d){var f=Xv((d[tn]||null).action),_=l.submitter;_&&(i=(i=_[tn]||null)?Xv(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var b=new Bi("action","action",null,l,d);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(or!==0){var O=_?Wv(d,_):new FormData(d);cf(a,{pending:!0,data:O,method:d.method,action:f},null,O)}}else typeof f=="function"&&(b.preventDefault(),O=_?Wv(d,_):new FormData(d),cf(a,{pending:!0,data:O,method:d.method,action:f},f,O))},currentTarget:d}]})}}for(var Ff=0;Ff<Ad.length;Ff++){var Gf=Ad[Ff],Sw=Gf.toLowerCase(),bw=Gf[0].toUpperCase()+Gf.slice(1);_i(Sw,"on"+bw)}_i(Ng,"onAnimationEnd"),_i(Ig,"onAnimationIteration"),_i(Dg,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(Ub,"onTransitionRun"),_i(zb,"onTransitionStart"),_i(Bb,"onTransitionCancel"),_i(xg,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ww=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function Jv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],d=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],O=b.instance,F=b.currentTarget;if(b=b.listener,O!==f&&d.isPropagationStopped())break e;f=b,d.currentTarget=F;try{f(d)}catch(ne){ru(ne)}d.currentTarget=null,f=O}else for(_=0;_<l.length;_++){if(b=l[_],O=b.instance,F=b.currentTarget,b=b.listener,O!==f&&d.isPropagationStopped())break e;f=b,d.currentTarget=F;try{f(d)}catch(ne){ru(ne)}d.currentTarget=null,f=O}}}}function Fe(t,i){var a=i[Ma];a===void 0&&(a=i[Ma]=new Set);var l=t+"__bubble";a.has(l)||(Zv(i,t,2,!1),a.add(l))}function $f(t,i,a){var l=0;i&&(l|=4),Zv(a,t,l,i)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function Yf(t){if(!t[Gu]){t[Gu]=!0,Jo.forEach(function(a){a!=="selectionchange"&&(ww.has(a)||$f(a,!1,t),$f(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Gu]||(i[Gu]=!0,$f("selectionchange",!1,i))}}function Zv(t,i,a,l){switch(N_(i)){case 2:var d=Jw;break;case 8:d=Zw;break;default:d=lm}a=d.bind(null,i,a,t),d=void 0,!$r||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),l?d!==void 0?t.addEventListener(i,a,{capture:!0,passive:d}):t.addEventListener(i,a,!0):d!==void 0?t.addEventListener(i,a,{passive:d}):t.addEventListener(i,a,!1)}function Kf(t,i,a,l,d){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===d)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;b!==null;){if(_=ki(b),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=f=_;continue e}b=b.parentNode}}l=l.return}qs(function(){var F=f,ne=Kn(a),re=[];e:{var K=Og.get(t);if(K!==void 0){var W=Bi,ve=t;switch(t){case"keypress":if(Kr(a)===0)break e;case"keydown":case"keyup":W=nu;break;case"focusin":ve="focus",W=Xr;break;case"focusout":ve="blur",W=Xr;break;case"beforeblur":case"afterblur":W=Xr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Yc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case Ng:case Ig:case Dg:W=Qc;break;case xg:W=A;break;case"scroll":case"scrollend":W=ul;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=Xc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ls;break;case"toggle":case"beforetoggle":W=ke}var Ae=(i&4)!==0,mt=!Ae&&(t==="scroll"||t==="scrollend"),B=Ae?K!==null?K+"Capture":null:K;Ae=[];for(var U=F,H;U!==null;){var se=U;if(H=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||H===null||B===null||(se=pi(U,B),se!=null&&Ae.push(Bl(U,se,H))),mt)break;U=U.return}0<Ae.length&&(K=new W(K,ve,null,a,ne),re.push({event:K,listeners:Ae}))}}if((i&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",K&&a!==ol&&(ve=a.relatedTarget||a.fromElement)&&(ki(ve)||ve[Oi]))break e;if((W||K)&&(K=ne.window===ne?ne:(K=ne.ownerDocument)?K.defaultView||K.parentWindow:window,W?(ve=a.relatedTarget||a.toElement,W=F,ve=ve?ki(ve):null,ve!==null&&(mt=c(ve),Ae=ve.tag,ve!==mt||Ae!==5&&Ae!==27&&Ae!==6)&&(ve=null)):(W=null,ve=F),W!==ve)){if(Ae=hl,se="onMouseLeave",B="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=ls,se="onPointerLeave",B="onPointerEnter",U="pointer"),mt=W==null?K:jn(W),H=ve==null?K:jn(ve),K=new Ae(se,U+"leave",W,a,ne),K.target=mt,K.relatedTarget=H,se=null,ki(ne)===F&&(Ae=new Ae(B,U+"enter",ve,a,ne),Ae.target=H,Ae.relatedTarget=mt,se=Ae),mt=se,W&&ve)t:{for(Ae=Aw,B=W,U=ve,H=0,se=B;se;se=Ae(se))H++;se=0;for(var Se=U;Se;Se=Ae(Se))se++;for(;0<H-se;)B=Ae(B),H--;for(;0<se-H;)U=Ae(U),se--;for(;H--;){if(B===U||U!==null&&B===U.alternate){Ae=B;break t}B=Ae(B),U=Ae(U)}Ae=null}else Ae=null;W!==null&&e_(re,K,W,Ae,!1),ve!==null&&mt!==null&&e_(re,mt,ve,Ae,!0)}}e:{if(K=F?jn(F):window,W=K.nodeName&&K.nodeName.toLowerCase(),W==="select"||W==="input"&&K.type==="file")var tt=yg;else if(pg(K))if(vg)tt=Vb;else{tt=kb;var Ee=Mb}else W=K.nodeName,!W||W.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?F&&La(F.elementType)&&(tt=yg):tt=jb;if(tt&&(tt=tt(t,F))){gg(re,tt,a,ne);break e}Ee&&Ee(t,K,F),t==="focusout"&&F&&K.type==="number"&&F.memoizedProps.value!=null&&sl(K,"number",K.value)}switch(Ee=F?jn(F):window,t){case"focusin":(pg(Ee)||Ee.contentEditable==="true")&&(Ga=Ee,Sd=F,gl=null);break;case"focusout":gl=Sd=Ga=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,Rg(re,a,ne);break;case"selectionchange":if(Pb)break;case"keydown":case"keyup":Rg(re,a,ne)}var Le;if(it)e:{switch(t){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Fa?Wr(t,a)&&($e="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&($e="onCompositionStart");$e&&(Fi&&a.locale!=="ko"&&(Fa||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Fa&&(Le=cl()):(zi=ne,ll="value"in zi?zi.value:zi.textContent,Fa=!0)),Ee=$u(F,$e),0<Ee.length&&($e=new Hi($e,t,null,a,ne),re.push({event:$e,listeners:Ee}),Le?$e.data=Le:(Le=Ha(a),Le!==null&&($e.data=Le)))),(Le=Xn?Ib(t,a):Db(t,a))&&($e=$u(F,"onBeforeInput"),0<$e.length&&(Ee=new Hi("onBeforeInput","beforeinput",null,a,ne),re.push({event:Ee,listeners:$e}),Ee.data=Le)),Tw(re,t,F,a,ne)}Jv(re,i)})}function Bl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function $u(t,i){for(var a=i+"Capture",l=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=pi(t,a),d!=null&&l.unshift(Bl(t,d,f)),d=pi(t,i),d!=null&&l.push(Bl(t,d,f))),t.tag===3)return l;t=t.return}return[]}function Aw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function e_(t,i,a,l,d){for(var f=i._reactName,_=[];a!==null&&a!==l;){var b=a,O=b.alternate,F=b.stateNode;if(b=b.tag,O!==null&&O===l)break;b!==5&&b!==26&&b!==27||F===null||(O=F,d?(F=pi(a,f),F!=null&&_.unshift(Bl(a,F,O))):d||(F=pi(a,f),F!=null&&_.push(Bl(a,F,O)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var Rw=/\r\n?/g,Cw=/\u0000|\uFFFD/g;function t_(t){return(typeof t=="string"?t:""+t).replace(Rw,`
`).replace(Cw,"")}function n_(t,i){return i=t_(i),t_(t)===i}function ft(t,i,a,l,d,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||An(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&An(t,""+l);break;case"className":Vn(t,"class",l);break;case"tabIndex":Vn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(t,a,l);break;case"style":al(t,l,f);break;case"data":if(i!=="object"){Vn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Pa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&ft(t,i,"name",d.name,d,null),ft(t,i,"formEncType",d.formEncType,d,null),ft(t,i,"formMethod",d.formMethod,d,null),ft(t,i,"formTarget",d.formTarget,d,null)):(ft(t,i,"encType",d.encType,d,null),ft(t,i,"method",d.method,d,null),ft(t,i,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Pa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=mi);break;case"onScroll":l!=null&&Fe("scroll",t);break;case"onScrollEnd":l!=null&&Fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Pa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Fe("beforetoggle",t),Fe("toggle",t),ja(t,"popover",l);break;case"xlinkActuate":Vt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Vt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Vt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Vt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Vt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Vt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ja(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=$c.get(a)||a,ja(t,a,l))}}function Qf(t,i,a,l,d,f){switch(a){case"style":al(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?An(t,l):(typeof l=="number"||typeof l=="bigint")&&An(t,""+l);break;case"onScroll":l!=null&&Fe("scroll",t);break;case"onScrollEnd":l!=null&&Fe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=mi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),i=a.slice(2,d?a.length-7:void 0),f=t[tn]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,d);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ja(t,a,l)}}}function hn(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",t),Fe("load",t);var l=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ft(t,i,f,_,a,null)}}d&&ft(t,i,"srcSet",a.srcSet,a,null),l&&ft(t,i,"src",a.src,a,null);return;case"input":Fe("invalid",t);var b=f=_=d=null,O=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var ne=a[l];if(ne!=null)switch(l){case"name":d=ne;break;case"type":_=ne;break;case"checked":O=ne;break;case"defaultChecked":F=ne;break;case"value":f=ne;break;case"defaultValue":b=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,i));break;default:ft(t,i,l,ne,a,null)}}Hc(t,f,b,O,F,_,d,!1);return;case"select":Fe("invalid",t),l=_=f=null;for(d in a)if(a.hasOwnProperty(d)&&(b=a[d],b!=null))switch(d){case"value":f=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:ft(t,i,d,b,a,null)}i=f,a=_,t.multiple=!!l,i!=null?Ps(t,!!l,i,!1):a!=null&&Ps(t,!!l,a,!0);return;case"textarea":Fe("invalid",t),f=d=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":d=b;break;case"children":f=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:ft(t,i,_,b,a,null)}Us(t,l,d,f);return;case"option":for(O in a)a.hasOwnProperty(O)&&(l=a[O],l!=null)&&(O==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":ft(t,i,O,l,a,null));return;case"dialog":Fe("beforetoggle",t),Fe("toggle",t),Fe("cancel",t),Fe("close",t);break;case"iframe":case"object":Fe("load",t);break;case"video":case"audio":for(l=0;l<zl.length;l++)Fe(zl[l],t);break;case"image":Fe("error",t),Fe("load",t);break;case"details":Fe("toggle",t);break;case"embed":case"source":case"link":Fe("error",t),Fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ft(t,i,F,l,a,null)}return;default:if(La(i)){for(ne in a)a.hasOwnProperty(ne)&&(l=a[ne],l!==void 0&&Qf(t,i,ne,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&ft(t,i,b,l,a,null))}function Nw(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,_=null,b=null,O=null,F=null,ne=null;for(W in a){var re=a[W];if(a.hasOwnProperty(W)&&re!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":O=re;default:l.hasOwnProperty(W)||ft(t,i,W,null,l,re)}}for(var K in l){var W=l[K];if(re=a[K],l.hasOwnProperty(K)&&(W!=null||re!=null))switch(K){case"type":f=W;break;case"name":d=W;break;case"checked":F=W;break;case"defaultChecked":ne=W;break;case"value":_=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:W!==re&&ft(t,i,K,W,l,re)}}Va(t,_,b,O,F,ne,f,d);return;case"select":W=_=b=K=null;for(f in a)if(O=a[f],a.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":W=O;default:l.hasOwnProperty(f)||ft(t,i,f,null,l,O)}for(d in l)if(f=l[d],O=a[d],l.hasOwnProperty(d)&&(f!=null||O!=null))switch(d){case"value":K=f;break;case"defaultValue":b=f;break;case"multiple":_=f;default:f!==O&&ft(t,i,d,f,l,O)}i=b,a=_,l=W,K!=null?Ps(t,!!a,K,!1):!!l!=!!a&&(i!=null?Ps(t,!!a,i,!0):Ps(t,!!a,a?[]:"",!1));return;case"textarea":W=K=null;for(b in a)if(d=a[b],a.hasOwnProperty(b)&&d!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ft(t,i,b,null,l,d)}for(_ in l)if(d=l[_],f=a[_],l.hasOwnProperty(_)&&(d!=null||f!=null))switch(_){case"value":K=d;break;case"defaultValue":W=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==f&&ft(t,i,_,d,l,f)}Fc(t,K,W);return;case"option":for(var ve in a)K=a[ve],a.hasOwnProperty(ve)&&K!=null&&!l.hasOwnProperty(ve)&&(ve==="selected"?t.selected=!1:ft(t,i,ve,null,l,K));for(O in l)K=l[O],W=a[O],l.hasOwnProperty(O)&&K!==W&&(K!=null||W!=null)&&(O==="selected"?t.selected=K&&typeof K!="function"&&typeof K!="symbol":ft(t,i,O,K,l,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)K=a[Ae],a.hasOwnProperty(Ae)&&K!=null&&!l.hasOwnProperty(Ae)&&ft(t,i,Ae,null,l,K);for(F in l)if(K=l[F],W=a[F],l.hasOwnProperty(F)&&K!==W&&(K!=null||W!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:ft(t,i,F,K,l,W)}return;default:if(La(i)){for(var mt in a)K=a[mt],a.hasOwnProperty(mt)&&K!==void 0&&!l.hasOwnProperty(mt)&&Qf(t,i,mt,void 0,l,K);for(ne in l)K=l[ne],W=a[ne],!l.hasOwnProperty(ne)||K===W||K===void 0&&W===void 0||Qf(t,i,ne,K,l,W);return}}for(var B in a)K=a[B],a.hasOwnProperty(B)&&K!=null&&!l.hasOwnProperty(B)&&ft(t,i,B,null,l,K);for(re in l)K=l[re],W=a[re],!l.hasOwnProperty(re)||K===W||K==null&&W==null||ft(t,i,re,K,l,W)}function i_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Iw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var d=a[l],f=d.transferSize,_=d.initiatorType,b=d.duration;if(f&&b&&i_(_)){for(_=0,b=d.responseEnd,l+=1;l<a.length;l++){var O=a[l],F=O.startTime;if(F>b)break;var ne=O.transferSize,re=O.initiatorType;ne&&i_(re)&&(O=O.responseEnd,_+=ne*(O<b?1:(b-F)/(O-F)))}if(--l,i+=8*(f+_)/(d.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Xf=null,Wf=null;function Yu(t){return t.nodeType===9?t:t.ownerDocument}function s_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Jf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Zf=null;function Dw(){var t=window.event;return t&&t.type==="popstate"?t===Zf?!1:(Zf=t,!0):(Zf=null,!1)}var a_=typeof setTimeout=="function"?setTimeout:void 0,xw=typeof clearTimeout=="function"?clearTimeout:void 0,o_=typeof Promise=="function"?Promise:void 0,Ow=typeof queueMicrotask=="function"?queueMicrotask:typeof o_<"u"?function(t){return o_.resolve(null).then(t).catch(Mw)}:a_;function Mw(t){setTimeout(function(){throw t})}function lr(t){return t==="head"}function l_(t,i){var a=i,l=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(d),_o(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ql(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,ql(a);for(var f=a.firstChild;f;){var _=f.nextSibling,b=f.nodeName;f[Mi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&ql(t.ownerDocument.body);a=d}while(a);_o(i)}function c_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function em(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":em(a),ka(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function kw(t,i,a,l){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Mi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=ii(t.nextSibling),t===null)break}return null}function jw(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ii(t.nextSibling),t===null))return null;return t}function u_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ii(t.nextSibling),t===null))return null;return t}function tm(t){return t.data==="$?"||t.data==="$~"}function nm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Vw(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ii(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var im=null;function h_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return ii(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function d_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function f_(t,i,a){switch(i=Yu(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function ql(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ka(t)}var si=new Map,m_=new Set;function Ku(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var bs=he.d;he.d={f:Lw,r:Pw,D:Uw,C:zw,L:Bw,m:qw,X:Fw,S:Hw,M:Gw};function Lw(){var t=bs.f(),i=Uu();return t||i}function Pw(t){var i=Yn(t);i!==null&&i.tag===5&&i.type==="form"?xy(i):bs.r(t)}var go=typeof document>"u"?null:document;function p_(t,i,a){var l=go;if(l&&typeof i=="string"&&i){var d=wn(i);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),m_.has(d)||(m_.add(d),t={rel:t,crossOrigin:a,href:i},l.querySelector(d)===null&&(i=l.createElement("link"),hn(i,"link",t),jt(i),l.head.appendChild(i)))}}function Uw(t){bs.D(t),p_("dns-prefetch",t,null)}function zw(t,i){bs.C(t,i),p_("preconnect",t,i)}function Bw(t,i,a){bs.L(t,i,a);var l=go;if(l&&t&&i){var d='link[rel="preload"][as="'+wn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+wn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+wn(a.imageSizes)+'"]')):d+='[href="'+wn(t)+'"]';var f=d;switch(i){case"style":f=yo(t);break;case"script":f=vo(t)}si.has(f)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),si.set(f,t),l.querySelector(d)!==null||i==="style"&&l.querySelector(Hl(f))||i==="script"&&l.querySelector(Fl(f))||(i=l.createElement("link"),hn(i,"link",t),jt(i),l.head.appendChild(i)))}}function qw(t,i){bs.m(t,i);var a=go;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+wn(l)+'"][href="'+wn(t)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=vo(t)}if(!si.has(f)&&(t=S({rel:"modulepreload",href:t},i),si.set(f,t),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fl(f)))return}l=a.createElement("link"),hn(l,"link",t),jt(l),a.head.appendChild(l)}}}function Hw(t,i,a){bs.S(t,i,a);var l=go;if(l&&t){var d=ji(l).hoistableStyles,f=yo(t);i=i||"default";var _=d.get(f);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(Hl(f)))b.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=si.get(f))&&sm(t,a);var O=_=l.createElement("link");jt(O),hn(O,"link",t),O._p=new Promise(function(F,ne){O.onload=F,O.onerror=ne}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Qu(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},d.set(f,_)}}}function Fw(t,i){bs.X(t,i);var a=go;if(a&&t){var l=ji(a).hoistableScripts,d=vo(t),f=l.get(d);f||(f=a.querySelector(Fl(d)),f||(t=S({src:t,async:!0},i),(i=si.get(d))&&rm(t,i),f=a.createElement("script"),jt(f),hn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function Gw(t,i){bs.M(t,i);var a=go;if(a&&t){var l=ji(a).hoistableScripts,d=vo(t),f=l.get(d);f||(f=a.querySelector(Fl(d)),f||(t=S({src:t,async:!0,type:"module"},i),(i=si.get(d))&&rm(t,i),f=a.createElement("script"),jt(f),hn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function g_(t,i,a,l){var d=(d=fe.current)?Ku(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=yo(a.href),a=ji(d).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=yo(a.href);var f=ji(d).hoistableStyles,_=f.get(t);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=d.querySelector(Hl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),si.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},si.set(t,a),f||$w(d,t,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=vo(a),a=ji(d).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function yo(t){return'href="'+wn(t)+'"'}function Hl(t){return'link[rel="stylesheet"]['+t+"]"}function y_(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function $w(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),hn(i,"link",a),jt(i),t.head.appendChild(i))}function vo(t){return'[src="'+wn(t)+'"]'}function Fl(t){return"script[async]"+t}function v_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+wn(a.href)+'"]');if(l)return i.instance=l,jt(l),l;var d=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),jt(l),hn(l,"style",d),Qu(l,a.precedence,t),i.instance=l;case"stylesheet":d=yo(a.href);var f=t.querySelector(Hl(d));if(f)return i.state.loading|=4,i.instance=f,jt(f),f;l=y_(a),(d=si.get(d))&&sm(l,d),f=(t.ownerDocument||t).createElement("link"),jt(f);var _=f;return _._p=new Promise(function(b,O){_.onload=b,_.onerror=O}),hn(f,"link",l),i.state.loading|=4,Qu(f,a.precedence,t),i.instance=f;case"script":return f=vo(a.src),(d=t.querySelector(Fl(f)))?(i.instance=d,jt(d),d):(l=a,(d=si.get(f))&&(l=S({},a),rm(l,d)),t=t.ownerDocument||t,d=t.createElement("script"),jt(d),hn(d,"link",l),t.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Qu(l,a.precedence,t));return i.instance}function Qu(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)f=b;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function sm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function rm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Xu=null;function __(t,i,a){if(Xu===null){var l=new Map,d=Xu=new Map;d.set(a,l)}else d=Xu,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[Mi]||f[kt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=t+_;var b=l.get(_);b?b.push(f):l.set(_,[f])}}return l}function E_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function Yw(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function T_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Kw(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=yo(l.href),f=i.querySelector(Hl(d));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Wu.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=f,jt(f);return}f=i.ownerDocument||i,l=y_(l),(d=si.get(d))&&sm(l,d),f=f.createElement("link"),jt(f);var _=f;_._p=new Promise(function(b,O){_.onload=b,_.onerror=O}),hn(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Wu.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var am=0;function Qw(t,i){return t.stylesheets&&t.count===0&&Zu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+i);0<t.imgBytes&&am===0&&(am=62500*Iw());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>am?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Wu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ju=null;function Zu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ju=new Map,i.forEach(Xw,t),Ju=null,Wu.call(t))}function Xw(t,i){if(!(i.state.loading&4)){var a=Ju.get(t);if(a)var l=a.get(null);else{a=new Map,Ju.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var _=d[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}d=i.instance,_=d.getAttribute("data-precedence"),f=a.get(_)||l,f===l&&a.set(null,d),a.set(_,d),this.count++,l=Wu.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),i.state.loading|=4}}var Gl={$$typeof:le,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function Ww(t,i,a,l,d,f,_,b,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function S_(t,i,a,l,d,f,_,b,O,F,ne,re){return t=new Ww(t,i,a,_,O,F,ne,re,b),i=1,f===!0&&(i|=24),f=Pn(3,null,null,i),t.current=f,f.stateNode=t,i=Pd(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},qd(f),t}function b_(t){return t?(t=Ka,t):Ka}function w_(t,i,a,l,d,f){d=b_(d),l.context===null?l.context=d:l.pendingContext=d,l=Ws(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Js(t,l,i),a!==null&&(Dn(a,t,i),bl(a,t,i))}function A_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function om(t,i){A_(t,i),(t=t.alternate)&&A_(t,i)}function R_(t){if(t.tag===13||t.tag===31){var i=ea(t,67108864);i!==null&&Dn(i,t,67108864),om(t,67108864)}}function C_(t){if(t.tag===13||t.tag===31){var i=Hn();i=hi(i);var a=ea(t,i);a!==null&&Dn(a,t,i),om(t,i)}}var eh=!0;function Jw(t,i,a,l){var d=J.T;J.T=null;var f=he.p;try{he.p=2,lm(t,i,a,l)}finally{he.p=f,J.T=d}}function Zw(t,i,a,l){var d=J.T;J.T=null;var f=he.p;try{he.p=8,lm(t,i,a,l)}finally{he.p=f,J.T=d}}function lm(t,i,a,l){if(eh){var d=cm(l);if(d===null)Kf(t,i,l,th,a),I_(t,l);else if(tA(d,t,i,a,l))l.stopPropagation();else if(I_(t,l),i&4&&-1<eA.indexOf(t)){for(;d!==null;){var f=Yn(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=ye(f.pendingLanes);if(_!==0){var b=f;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var O=1<<31-ot(_);b.entanglements[1]|=O,_&=~O}Ki(f),(st&6)===0&&(Lu=Jt()+500,Ul(0))}}break;case 31:case 13:b=ea(f,2),b!==null&&Dn(b,f,2),Uu(),om(f,2)}if(f=cm(l),f===null&&Kf(t,i,l,th,a),f===d)break;d=f}d!==null&&l.stopPropagation()}else Kf(t,i,l,null,a)}}function cm(t){return t=Kn(t),um(t)}var th=null;function um(t){if(th=null,t=ki(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=h(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return th=t,null}function N_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ni()){case Br:return 2;case is:return 8;case ci:case Vs:return 32;case Na:return 268435456;default:return 32}default:return 32}}var hm=!1,cr=null,ur=null,hr=null,$l=new Map,Yl=new Map,dr=[],eA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function I_(t,i){switch(t){case"focusin":case"focusout":cr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":$l.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(i.pointerId)}}function Kl(t,i,a,l,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},i!==null&&(i=Yn(i),i!==null&&R_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),t)}function tA(t,i,a,l,d){switch(i){case"focusin":return cr=Kl(cr,t,i,a,l,d),!0;case"dragenter":return ur=Kl(ur,t,i,a,l,d),!0;case"mouseover":return hr=Kl(hr,t,i,a,l,d),!0;case"pointerover":var f=d.pointerId;return $l.set(f,Kl($l.get(f)||null,t,i,a,l,d)),!0;case"gotpointercapture":return f=d.pointerId,Yl.set(f,Kl(Yl.get(f)||null,t,i,a,l,d)),!0}return!1}function D_(t){var i=ki(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){t.blockedOn=i,di(t.priority,function(){C_(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,di(t.priority,function(){C_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nh(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=cm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);ol=l,a.target.dispatchEvent(l),ol=null}else return i=Yn(a),i!==null&&R_(i),t.blockedOn=a,!1;i.shift()}return!0}function x_(t,i,a){nh(t)&&a.delete(i)}function nA(){hm=!1,cr!==null&&nh(cr)&&(cr=null),ur!==null&&nh(ur)&&(ur=null),hr!==null&&nh(hr)&&(hr=null),$l.forEach(x_),Yl.forEach(x_)}function ih(t,i){t.blockedOn===i&&(t.blockedOn=null,hm||(hm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nA)))}var sh=null;function O_(t){sh!==t&&(sh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){sh===t&&(sh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],d=t[i+2];if(typeof l!="function"){if(um(l||a)===null)continue;break}var f=Yn(a);f!==null&&(t.splice(i,3),i-=3,cf(f,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function _o(t){function i(O){return ih(O,t)}cr!==null&&ih(cr,t),ur!==null&&ih(ur,t),hr!==null&&ih(hr,t),$l.forEach(i),Yl.forEach(i);for(var a=0;a<dr.length;a++){var l=dr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<dr.length&&(a=dr[0],a.blockedOn===null);)D_(a),a.blockedOn===null&&dr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],f=a[l+1],_=d[tn]||null;if(typeof f=="function")_||O_(a);else if(_){var b=null;if(f&&f.hasAttribute("formAction")){if(d=f,_=f[tn]||null)b=_.formAction;else if(um(d)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),O_(a)}}}function M_(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function dm(t){this._internalRoot=t}rh.prototype.render=dm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Hn();w_(a,l,t,i,null,null)},rh.prototype.unmount=dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;w_(t.current,2,null,t,null,null),Uu(),i[Oi]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Uc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<dr.length&&i!==0&&i<dr[a].priority;a++);dr.splice(a,0,t),a===0&&D_(t)}};var k_=e.version;if(k_!=="19.2.4")throw Error(r(527,k_,"19.2.4"));he.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=v(i),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var iA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{kn=ah.inject(iA),Gt=ah}catch{}}return Xl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",d=By,f=qy,_=Hy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=S_(t,1,!1,null,null,a,l,null,d,f,_,M_),t[Oi]=i.current,Yf(t),new dm(i)},Xl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,d="",f=By,_=qy,b=Hy,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),i=S_(t,1,!0,i,a??null,l,d,O,f,_,b,M_),i.context=b_(null),a=i.current,l=Hn(),l=hi(l),d=Ws(l),d.callback=null,Js(a,d,l),a=l,i.current.lanes=a,xi(i,a),Ki(i),t[Oi]=i.current,Yf(t),new rh(i)},Xl.version="19.2.4",Xl}var F_;function fA(){if(F_)return pm.exports;F_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),pm.exports=dA(),pm.exports}var mA=fA();var G_="popstate";function pA(s={}){function e(r,o){let{pathname:c,search:h,hash:p}=r.location;return km("",{pathname:c,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:hc(o)}return yA(e,n,null,s)}function wt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ai(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gA(){return Math.random().toString(36).substring(2,10)}function $_(s,e){return{usr:s.state,key:s.key,idx:e}}function km(s,e,n=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?zo(e):e,state:n,key:e&&e.key||r||gA()}}function hc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function zo(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function yA(s,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,h=o.history,p="POP",g=null,v=T();v==null&&(v=0,h.replaceState({...h.state,idx:v},""));function T(){return(h.state||{idx:null}).idx}function S(){p="POP";let z=T(),ee=z==null?null:z-v;v=z,g&&g({action:p,location:j.location,delta:ee})}function w(z,ee){p="PUSH";let G=km(j.location,z,ee);v=T()+1;let le=$_(G,v),pe=j.createHref(G);try{h.pushState(le,"",pe)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;o.location.assign(pe)}c&&g&&g({action:p,location:j.location,delta:1})}function P(z,ee){p="REPLACE";let G=km(j.location,z,ee);v=T();let le=$_(G,v),pe=j.createHref(G);h.replaceState(le,"",pe),c&&g&&g({action:p,location:j.location,delta:0})}function L(z){return vA(z)}let j={get action(){return p},get location(){return s(o,h)},listen(z){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(G_,S),g=z,()=>{o.removeEventListener(G_,S),g=null}},createHref(z){return e(o,z)},createURL:L,encodeLocation(z){let ee=L(z);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:w,replace:P,go(z){return h.go(z)}};return j}function vA(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),wt(n,"No window.location.(origin|href) available to create URL");let r=typeof s=="string"?s:hc(s);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function OT(s,e,n="/"){return _A(s,e,n,!1)}function _A(s,e,n,r){let o=typeof e=="string"?zo(e):e,c=Ns(o.pathname||"/",n);if(c==null)return null;let h=MT(s);EA(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let v=xA(c);p=IA(h[g],v,r)}return p}function MT(s,e=[],n=[],r="",o=!1){let c=(h,p,g=o,v)=>{let T={relativePath:v===void 0?h.path||"":v,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(T.relativePath.startsWith("/")){if(!T.relativePath.startsWith(r)&&g)return;wt(T.relativePath.startsWith(r),`Absolute route path "${T.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),T.relativePath=T.relativePath.slice(r.length)}let S=Rs([r,T.relativePath]),w=n.concat(T);h.children&&h.children.length>0&&(wt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),MT(h.children,e,w,S,g)),!(h.path==null&&!h.index)&&e.push({path:S,score:CA(S,h.index),routesMeta:w})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))c(h,p);else for(let g of kT(h.path))c(h,p,!0,g)}),e}function kT(s){let e=s.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let h=kT(r.join("/")),p=[];return p.push(...h.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function EA(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:NA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var TA=/^:[\w-]+$/,SA=3,bA=2,wA=1,AA=10,RA=-2,Y_=s=>s==="*";function CA(s,e){let n=s.split("/"),r=n.length;return n.some(Y_)&&(r+=RA),e&&(r+=bA),n.filter(o=>!Y_(o)).reduce((o,c)=>o+(TA.test(c)?SA:c===""?wA:AA),r)}function NA(s,e){return s.length===e.length&&s.slice(0,-1).every((r,o)=>r===e[o])?s[s.length-1]-e[e.length-1]:0}function IA(s,e,n=!1){let{routesMeta:r}=s,o={},c="/",h=[];for(let p=0;p<r.length;++p){let g=r[p],v=p===r.length-1,T=c==="/"?e:e.slice(c.length)||"/",S=Nh({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},T),w=g.route;if(!S&&v&&n&&!r[r.length-1].route.index&&(S=Nh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},T)),!S)return null;Object.assign(o,S.params),h.push({params:o,pathname:Rs([c,S.pathname]),pathnameBase:jA(Rs([c,S.pathnameBase])),route:w}),S.pathnameBase!=="/"&&(c=Rs([c,S.pathnameBase]))}return h}function Nh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,r]=DA(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((v,{paramName:T,isOptional:S},w)=>{if(T==="*"){let L=p[w]||"";h=c.slice(0,c.length-L.length).replace(/(.)\/+$/,"$1")}const P=p[w];return S&&!P?v[T]=void 0:v[T]=(P||"").replace(/%2F/g,"/"),v},{}),pathname:c,pathnameBase:h,pattern:s}}function DA(s,e=!1,n=!0){Ai(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(r.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function xA(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ai(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ns(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=s.charAt(n);return r&&r!=="/"?null:s.slice(n)||"/"}var OA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function MA(s,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof s=="string"?zo(s):s,c;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?c=K_(n.substring(1),"/"):c=K_(n,e)):c=e,{pathname:c,search:VA(r),hash:LA(o)}}function K_(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function _m(s,e,n,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kA(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pp(s){let e=kA(s);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function gp(s,e,n,r=!1){let o;typeof s=="string"?o=zo(s):(o={...s},wt(!o.pathname||!o.pathname.includes("?"),_m("?","pathname","search",o)),wt(!o.pathname||!o.pathname.includes("#"),_m("#","pathname","hash",o)),wt(!o.search||!o.search.includes("#"),_m("#","search","hash",o)));let c=s===""||o.pathname==="",h=c?"/":o.pathname,p;if(h==null)p=n;else{let S=e.length-1;if(!r&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),S-=1;o.pathname=w.join("/")}p=S>=0?e[S]:"/"}let g=MA(o,p),v=h&&h!=="/"&&h.endsWith("/"),T=(c||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(v||T)&&(g.pathname+="/"),g}var Rs=s=>s.join("/").replace(/\/\/+/g,"/"),jA=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),VA=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,LA=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,PA=class{constructor(s,e,n,r=!1){this.status=s,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function UA(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function zA(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var jT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function VT(s,e){let n=s;if(typeof n!="string"||!OA.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,o=!1;if(jT)try{let c=new URL(window.location.href),h=n.startsWith("//")?new URL(c.protocol+n):new URL(n),p=Ns(h.pathname,e);h.origin===c.origin&&p!=null?n=p+h.search+h.hash:o=!0}catch{Ai(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var LT=["POST","PUT","PATCH","DELETE"];new Set(LT);var BA=["GET",...LT];new Set(BA);var Bo=M.createContext(null);Bo.displayName="DataRouter";var Wh=M.createContext(null);Wh.displayName="DataRouterState";var qA=M.createContext(!1),PT=M.createContext({isTransitioning:!1});PT.displayName="ViewTransition";var HA=M.createContext(new Map);HA.displayName="Fetchers";var FA=M.createContext(null);FA.displayName="Await";var $n=M.createContext(null);$n.displayName="Navigation";var wc=M.createContext(null);wc.displayName="Location";var ns=M.createContext({outlet:null,matches:[],isDataRoute:!1});ns.displayName="Route";var yp=M.createContext(null);yp.displayName="RouteError";var UT="REACT_ROUTER_ERROR",GA="REDIRECT",$A="ROUTE_ERROR_RESPONSE";function YA(s){if(s.startsWith(`${UT}:${GA}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function KA(s){if(s.startsWith(`${UT}:${$A}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new PA(e.status,e.statusText,e.data)}catch{}}function QA(s,{relative:e}={}){wt(qo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=M.useContext($n),{hash:o,pathname:c,search:h}=Ac(s,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:Rs([n,c])),r.createHref({pathname:p,search:h,hash:o})}function qo(){return M.useContext(wc)!=null}function Ms(){return wt(qo(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(wc).location}var zT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BT(s){M.useContext($n).static||M.useLayoutEffect(s)}function ks(){let{isDataRoute:s}=M.useContext(ns);return s?l1():XA()}function XA(){wt(qo(),"useNavigate() may be used only in the context of a <Router> component.");let s=M.useContext(Bo),{basename:e,navigator:n}=M.useContext($n),{matches:r}=M.useContext(ns),{pathname:o}=Ms(),c=JSON.stringify(pp(r)),h=M.useRef(!1);return BT(()=>{h.current=!0}),M.useCallback((g,v={})=>{if(Ai(h.current,zT),!h.current)return;if(typeof g=="number"){n.go(g);return}let T=gp(g,JSON.parse(c),o,v.relative==="path");s==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:Rs([e,T.pathname])),(v.replace?n.replace:n.push)(T,v.state,v)},[e,n,c,o,s])}M.createContext(null);function Ac(s,{relative:e}={}){let{matches:n}=M.useContext(ns),{pathname:r}=Ms(),o=JSON.stringify(pp(n));return M.useMemo(()=>gp(s,JSON.parse(o),r,e==="path"),[s,o,r,e])}function WA(s,e){return qT(s,e)}function qT(s,e,n,r,o){wt(qo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=M.useContext($n),{matches:h}=M.useContext(ns),p=h[h.length-1],g=p?p.params:{},v=p?p.pathname:"/",T=p?p.pathnameBase:"/",S=p&&p.route;{let G=S&&S.path||"";FT(v,!S||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let w=Ms(),P;if(e){let G=typeof e=="string"?zo(e):e;wt(T==="/"||G.pathname?.startsWith(T),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${T}" but pathname "${G.pathname}" was given in the \`location\` prop.`),P=G}else P=w;let L=P.pathname||"/",j=L;if(T!=="/"){let G=T.replace(/^\//,"").split("/");j="/"+L.replace(/^\//,"").split("/").slice(G.length).join("/")}let z=OT(s,{pathname:j});Ai(S||z!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),Ai(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ee=n1(z&&z.map(G=>Object.assign({},G,{params:Object.assign({},g,G.params),pathname:Rs([T,c.encodeLocation?c.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?T:Rs([T,c.encodeLocation?c.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),h,n,r,o);return e&&ee?M.createElement(wc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},ee):ee}function JA(){let s=o1(),e=UA(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:c},"ErrorBoundary")," or"," ",M.createElement("code",{style:c},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:o},n):null,h)}var ZA=M.createElement(JA,null),HT=class extends M.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=KA(s.digest);n&&(s=n)}let e=s!==void 0?M.createElement(ns.Provider,{value:this.props.routeContext},M.createElement(yp.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?M.createElement(e1,{error:s},e):e}};HT.contextType=qA;var Em=new WeakMap;function e1({children:s,error:e}){let{basename:n}=M.useContext($n);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=YA(e.digest);if(r){let o=Em.get(e);if(o)throw o;let c=VT(r.location,n);if(jT&&!Em.get(e))if(c.isExternal||r.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:r.replace}));throw Em.set(e,h),h}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return s}function t1({routeContext:s,match:e,children:n}){let r=M.useContext(Bo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(ns.Provider,{value:s},n)}function n1(s,e=[],n=null,r=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let c=s,h=n?.errors;if(h!=null){let T=c.findIndex(S=>S.route.id&&h?.[S.route.id]!==void 0);wt(T>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,T+1))}let p=!1,g=-1;if(n)for(let T=0;T<c.length;T++){let S=c[T];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(g=T),S.route.id){let{loaderData:w,errors:P}=n,L=S.route.loader&&!w.hasOwnProperty(S.route.id)&&(!P||P[S.route.id]===void 0);if(S.route.lazy||L){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let v=n&&r?(T,S)=>{r(T,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:zA(n.matches),errorInfo:S})}:void 0;return c.reduceRight((T,S,w)=>{let P,L=!1,j=null,z=null;n&&(P=h&&S.route.id?h[S.route.id]:void 0,j=S.route.errorElement||ZA,p&&(g<0&&w===0?(FT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,z=null):g===w&&(L=!0,z=S.route.hydrateFallbackElement||null)));let ee=e.concat(c.slice(0,w+1)),G=()=>{let le;return P?le=j:L?le=z:S.route.Component?le=M.createElement(S.route.Component,null):S.route.element?le=S.route.element:le=T,M.createElement(t1,{match:S,routeContext:{outlet:T,matches:ee,isDataRoute:n!=null},children:le})};return n&&(S.route.ErrorBoundary||S.route.errorElement||w===0)?M.createElement(HT,{location:n.location,revalidation:n.revalidation,component:j,error:P,children:G(),routeContext:{outlet:null,matches:ee,isDataRoute:!0},onError:v}):G()},null)}function vp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i1(s){let e=M.useContext(Bo);return wt(e,vp(s)),e}function s1(s){let e=M.useContext(Wh);return wt(e,vp(s)),e}function r1(s){let e=M.useContext(ns);return wt(e,vp(s)),e}function _p(s){let e=r1(s),n=e.matches[e.matches.length-1];return wt(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function a1(){return _p("useRouteId")}function o1(){let s=M.useContext(yp),e=s1("useRouteError"),n=_p("useRouteError");return s!==void 0?s:e.errors?.[n]}function l1(){let{router:s}=i1("useNavigate"),e=_p("useNavigate"),n=M.useRef(!1);return BT(()=>{n.current=!0}),M.useCallback(async(o,c={})=>{Ai(n.current,zT),n.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...c}))},[s,e])}var Q_={};function FT(s,e,n){!e&&!Q_[s]&&(Q_[s]=!0,Ai(!1,n))}M.memo(c1);function c1({routes:s,future:e,state:n,onError:r}){return qT(s,void 0,n,r,e)}function u1({to:s,replace:e,state:n,relative:r}){wt(qo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=M.useContext($n);Ai(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=M.useContext(ns),{pathname:h}=Ms(),p=ks(),g=gp(s,pp(c),h,r==="path"),v=JSON.stringify(g);return M.useEffect(()=>{p(JSON.parse(v),{replace:e,state:n,relative:r})},[p,v,r,e,n]),null}function pr(s){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function h1({basename:s="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1,unstable_useTransitions:h}){wt(!qo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=M.useMemo(()=>({basename:p,navigator:o,static:c,unstable_useTransitions:h,future:{}}),[p,o,c,h]);typeof n=="string"&&(n=zo(n));let{pathname:v="/",search:T="",hash:S="",state:w=null,key:P="default"}=n,L=M.useMemo(()=>{let j=Ns(v,p);return j==null?null:{location:{pathname:j,search:T,hash:S,state:w,key:P},navigationType:r}},[p,v,T,S,w,P,r]);return Ai(L!=null,`<Router basename="${p}"> is not able to match the URL "${v}${T}${S}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:M.createElement($n.Provider,{value:g},M.createElement(wc.Provider,{children:e,value:L}))}function d1({children:s,location:e}){return WA(jm(s),e)}function jm(s,e=[]){let n=[];return M.Children.forEach(s,(r,o)=>{if(!M.isValidElement(r))return;let c=[...e,o];if(r.type===M.Fragment){n.push.apply(n,jm(r.props.children,c));return}wt(r.type===pr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=jm(r.props.children,c)),n.push(h)}),n}var gh="get",yh="application/x-www-form-urlencoded";function Jh(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function f1(s){return Jh(s)&&s.tagName.toLowerCase()==="button"}function m1(s){return Jh(s)&&s.tagName.toLowerCase()==="form"}function p1(s){return Jh(s)&&s.tagName.toLowerCase()==="input"}function g1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function y1(s,e){return s.button===0&&(!e||e==="_self")&&!g1(s)}var oh=null;function v1(){if(oh===null)try{new FormData(document.createElement("form"),0),oh=!1}catch{oh=!0}return oh}var _1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tm(s){return s!=null&&!_1.has(s)?(Ai(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yh}"`),null):s}function E1(s,e){let n,r,o,c,h;if(m1(s)){let p=s.getAttribute("action");r=p?Ns(p,e):null,n=s.getAttribute("method")||gh,o=Tm(s.getAttribute("enctype"))||yh,c=new FormData(s)}else if(f1(s)||p1(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(r=g?Ns(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||gh,o=Tm(s.getAttribute("formenctype"))||Tm(p.getAttribute("enctype"))||yh,c=new FormData(p,s),!v1()){let{name:v,type:T,value:S}=s;if(T==="image"){let w=v?`${v}.`:"";c.append(`${w}x`,"0"),c.append(`${w}y`,"0")}else v&&c.append(v,S)}}else{if(Jh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=gh,r=null,o=yh,h=s}return c&&o==="text/plain"&&(h=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ep(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function T1(s,e,n,r){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${r}`:o.pathname=`${o.pathname}.${r}`:o.pathname==="/"?o.pathname=`_root.${r}`:e&&Ns(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function S1(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function b1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function w1(s,e,n){let r=await Promise.all(s.map(async o=>{let c=e.routes[o.route.id];if(c){let h=await S1(c,n);return h.links?h.links():[]}return[]}));return N1(r.flat(1).filter(b1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function X_(s,e,n,r,o,c){let h=(g,v)=>n[v]?g.route.id!==n[v].route.id:!0,p=(g,v)=>n[v].pathname!==g.pathname||n[v].route.path?.endsWith("*")&&n[v].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,v)=>h(g,v)||p(g,v)):c==="data"?e.filter((g,v)=>{let T=r.routes[g.route.id];if(!T||!T.hasLoader)return!1;if(h(g,v)||p(g,v))return!0;if(g.route.shouldRevalidate){let S=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function A1(s,e,{includeHydrateFallback:n}={}){return R1(s.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function R1(s){return[...new Set(s)]}function C1(s){let e={},n=Object.keys(s).sort();for(let r of n)e[r]=s[r];return e}function N1(s,e){let n=new Set;return new Set(e),s.reduce((r,o)=>{let c=JSON.stringify(C1(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}function GT(){let s=M.useContext(Bo);return Ep(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function I1(){let s=M.useContext(Wh);return Ep(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Tp=M.createContext(void 0);Tp.displayName="FrameworkContext";function $T(){let s=M.useContext(Tp);return Ep(s,"You must render this element inside a <HydratedRouter> element"),s}function D1(s,e){let n=M.useContext(Tp),[r,o]=M.useState(!1),[c,h]=M.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:v,onMouseLeave:T,onTouchStart:S}=e,w=M.useRef(null);M.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let j=ee=>{ee.forEach(G=>{h(G.isIntersecting)})},z=new IntersectionObserver(j,{threshold:.5});return w.current&&z.observe(w.current),()=>{z.disconnect()}}},[s]),M.useEffect(()=>{if(r){let j=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(j)}}},[r]);let P=()=>{o(!0)},L=()=>{o(!1),h(!1)};return n?s!=="intent"?[c,w,{}]:[c,w,{onFocus:Wl(p,P),onBlur:Wl(g,L),onMouseEnter:Wl(v,P),onMouseLeave:Wl(T,L),onTouchStart:Wl(S,P)}]:[!1,w,{}]}function Wl(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function x1({page:s,...e}){let{router:n}=GT(),r=M.useMemo(()=>OT(n.routes,s,n.basename),[n.routes,s,n.basename]);return r?M.createElement(M1,{page:s,matches:r,...e}):null}function O1(s){let{manifest:e,routeModules:n}=$T(),[r,o]=M.useState([]);return M.useEffect(()=>{let c=!1;return w1(s,e,n).then(h=>{c||o(h)}),()=>{c=!0}},[s,e,n]),r}function M1({page:s,matches:e,...n}){let r=Ms(),{future:o,manifest:c,routeModules:h}=$T(),{basename:p}=GT(),{loaderData:g,matches:v}=I1(),T=M.useMemo(()=>X_(s,e,v,c,r,"data"),[s,e,v,c,r]),S=M.useMemo(()=>X_(s,e,v,c,r,"assets"),[s,e,v,c,r]),w=M.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let j=new Set,z=!1;if(e.forEach(G=>{let le=c.routes[G.route.id];!le||!le.hasLoader||(!T.some(pe=>pe.route.id===G.route.id)&&G.route.id in g&&h[G.route.id]?.shouldRevalidate||le.hasClientLoader?z=!0:j.add(G.route.id))}),j.size===0)return[];let ee=T1(s,p,o.unstable_trailingSlashAwareDataRequests,"data");return z&&j.size>0&&ee.searchParams.set("_routes",e.filter(G=>j.has(G.route.id)).map(G=>G.route.id).join(",")),[ee.pathname+ee.search]},[p,o.unstable_trailingSlashAwareDataRequests,g,r,c,T,e,s,h]),P=M.useMemo(()=>A1(S,c),[S,c]),L=O1(S);return M.createElement(M.Fragment,null,w.map(j=>M.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...n})),P.map(j=>M.createElement("link",{key:j,rel:"modulepreload",href:j,...n})),L.map(({key:j,link:z})=>M.createElement("link",{key:j,nonce:n.nonce,...z,crossOrigin:z.crossOrigin??n.crossOrigin})))}function k1(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var j1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{j1&&(window.__reactRouterVersion="7.13.0")}catch{}function V1({basename:s,children:e,unstable_useTransitions:n,window:r}){let o=M.useRef();o.current==null&&(o.current=pA({window:r,v5Compat:!0}));let c=o.current,[h,p]=M.useState({action:c.action,location:c.location}),g=M.useCallback(v=>{n===!1?p(v):M.startTransition(()=>p(v))},[n]);return M.useLayoutEffect(()=>c.listen(g),[c,g]),M.createElement(h1,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:c,unstable_useTransitions:n})}var YT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KT=M.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:h,state:p,target:g,to:v,preventScrollReset:T,viewTransition:S,unstable_defaultShouldRevalidate:w,...P},L){let{basename:j,unstable_useTransitions:z}=M.useContext($n),ee=typeof v=="string"&&YT.test(v),G=VT(v,j);v=G.to;let le=QA(v,{relative:o}),[pe,$,te]=D1(r,P),N=z1(v,{replace:h,state:p,target:g,preventScrollReset:T,relative:o,viewTransition:S,unstable_defaultShouldRevalidate:w,unstable_useTransitions:z});function C(D){e&&e(D),D.defaultPrevented||N(D)}let R=M.createElement("a",{...P,...te,href:G.absoluteURL||le,onClick:G.isExternal||c?e:C,ref:k1(L,$),target:g,"data-discover":!ee&&n==="render"?"true":void 0});return pe&&!ee?M.createElement(M.Fragment,null,R,M.createElement(x1,{page:le})):R});KT.displayName="Link";var L1=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:h,viewTransition:p,children:g,...v},T){let S=Ac(h,{relative:v.relative}),w=Ms(),P=M.useContext(Wh),{navigator:L,basename:j}=M.useContext($n),z=P!=null&&G1(S)&&p===!0,ee=L.encodeLocation?L.encodeLocation(S).pathname:S.pathname,G=w.pathname,le=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(G=G.toLowerCase(),le=le?le.toLowerCase():null,ee=ee.toLowerCase()),le&&j&&(le=Ns(le,j)||le);const pe=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let $=G===ee||!o&&G.startsWith(ee)&&G.charAt(pe)==="/",te=le!=null&&(le===ee||!o&&le.startsWith(ee)&&le.charAt(ee.length)==="/"),N={isActive:$,isPending:te,isTransitioning:z},C=$?e:void 0,R;typeof r=="function"?R=r(N):R=[r,$?"active":null,te?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let D=typeof c=="function"?c(N):c;return M.createElement(KT,{...v,"aria-current":C,className:R,ref:T,style:D,to:h,viewTransition:p},typeof g=="function"?g(N):g)});L1.displayName="NavLink";var P1=M.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:h=gh,action:p,onSubmit:g,relative:v,preventScrollReset:T,viewTransition:S,unstable_defaultShouldRevalidate:w,...P},L)=>{let{unstable_useTransitions:j}=M.useContext($n),z=H1(),ee=F1(p,{relative:v}),G=h.toLowerCase()==="get"?"get":"post",le=typeof p=="string"&&YT.test(p),pe=$=>{if(g&&g($),$.defaultPrevented)return;$.preventDefault();let te=$.nativeEvent.submitter,N=te?.getAttribute("formmethod")||h,C=()=>z(te||$.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:o,state:c,relative:v,preventScrollReset:T,viewTransition:S,unstable_defaultShouldRevalidate:w});j&&n!==!1?M.startTransition(()=>C()):C()};return M.createElement("form",{ref:L,method:G,action:ee,onSubmit:r?g:pe,...P,"data-discover":!le&&s==="render"?"true":void 0})});P1.displayName="Form";function U1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QT(s){let e=M.useContext(Bo);return wt(e,U1(s)),e}function z1(s,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let v=ks(),T=Ms(),S=Ac(s,{relative:c});return M.useCallback(w=>{if(y1(w,e)){w.preventDefault();let P=n!==void 0?n:hc(T)===hc(S),L=()=>v(s,{replace:P,state:r,preventScrollReset:o,relative:c,viewTransition:h,unstable_defaultShouldRevalidate:p});g?M.startTransition(()=>L()):L()}},[T,v,S,n,r,e,s,o,c,h,p,g])}var B1=0,q1=()=>`__${String(++B1)}__`;function H1(){let{router:s}=QT("useSubmit"),{basename:e}=M.useContext($n),n=a1(),r=s.fetch,o=s.navigate;return M.useCallback(async(c,h={})=>{let{action:p,method:g,encType:v,formData:T,body:S}=E1(c,e);if(h.navigate===!1){let w=h.fetcherKey||q1();await r(w,n,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:T,body:S,formMethod:h.method||g,formEncType:h.encType||v,flushSync:h.flushSync})}else await o(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:T,body:S,formMethod:h.method||g,formEncType:h.encType||v,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[r,o,e,n])}function F1(s,{relative:e}={}){let{basename:n}=M.useContext($n),r=M.useContext(ns);wt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...Ac(s||".",{relative:e})},h=Ms();if(s==null){c.search=h.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(T=>T==="")){p.delete("index"),g.filter(S=>S).forEach(S=>p.append("index",S));let T=p.toString();c.search=T?`?${T}`:""}}return(!s||s===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Rs([n,c.pathname])),hc(c)}function G1(s,{relative:e}={}){let n=M.useContext(PT);wt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=QT("useViewTransitionState"),o=Ac(s,{relative:e});if(!n.isTransitioning)return!1;let c=Ns(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=Ns(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Nh(o.pathname,h)!=null||Nh(o.pathname,c)!=null}const $1=()=>{};var W_={};const XT=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Y1=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[n++],h=s[n++],p=s[n++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=s[n++],h=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},WT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const c=s[o],h=o+1<s.length,p=h?s[o+1]:0,g=o+2<s.length,v=g?s[o+2]:0,T=c>>2,S=(c&3)<<4|p>>4;let w=(p&15)<<2|v>>6,P=v&63;g||(P=64,h||(w=64)),r.push(n[T],n[S],n[w],n[P])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(XT(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Y1(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const c=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const v=o<s.length?n[s.charAt(o)]:64;++o;const S=o<s.length?n[s.charAt(o)]:64;if(++o,c==null||p==null||v==null||S==null)throw new K1;const w=c<<2|p>>4;if(r.push(w),v!==64){const P=p<<4&240|v>>2;if(r.push(P),S!==64){const L=v<<6&192|S;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class K1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Q1=function(s){const e=XT(s);return WT.encodeByteArray(e,!0)},Ih=function(s){return Q1(s).replace(/\./g,"")},JT=function(s){try{return WT.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function X1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const W1=()=>X1().__FIREBASE_DEFAULTS__,J1=()=>{if(typeof process>"u"||typeof W_>"u")return;const s=W_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Z1=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&JT(s[1]);return e&&JSON.parse(e)},Zh=()=>{try{return $1()||W1()||J1()||Z1()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},ZT=s=>Zh()?.emulatorHosts?.[s],eR=s=>{const e=ZT(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},e0=()=>Zh()?.config,t0=s=>Zh()?.[`_${s}`];class tR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Ho(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function n0(s){return(await fetch(s,{credentials:"include"})).ok}function nR(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Ih(JSON.stringify(n)),Ih(JSON.stringify(h)),""].join(".")}const rc={};function iR(){const s={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?s.emulator.push(e):s.prod.push(e);return s}function sR(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let J_=!1;function i0(s,e){if(typeof window>"u"||typeof document>"u"||!Ho(window.location.host)||rc[s]===e||rc[s]||J_)return;rc[s]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",c=iR().prod.length>0;function h(){const w=document.getElementById(r);w&&w.remove()}function p(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,P){w.setAttribute("width","24"),w.setAttribute("id",P),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function v(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{J_=!0,h()},w}function T(w,P){w.setAttribute("id",P),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function S(){const w=sR(r),P=n("text"),L=document.getElementById(P)||document.createElement("span"),j=n("learnmore"),z=document.getElementById(j)||document.createElement("a"),ee=n("preprendIcon"),G=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const le=w.element;p(le),T(z,j);const pe=v();g(G,ee),le.append(G,L,z,pe),document.body.appendChild(le)}c?(L.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function aR(){const s=Zh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lR(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function cR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uR(){const s=En();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function hR(){return!aR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dR(){try{return typeof indexedDB=="object"}catch{return!1}}function fR(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const mR="FirebaseError";class js extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mR,Object.setPrototypeOf(this,js.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rc.prototype.create)}}class Rc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?pR(c,r):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new js(o,p,r)}}function pR(s,e){return s.replace(gR,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const gR=/\{\$([^}]+)}/g;function yR(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function pa(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=s[o],h=e[o];if(Z_(c)&&Z_(h)){if(!pa(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Z_(s){return s!==null&&typeof s=="object"}function Cc(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ec(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function tc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function vR(s,e){const n=new _R(s,e);return n.subscribe.bind(n)}class _R{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ER(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Sm),o.error===void 0&&(o.error=Sm),o.complete===void 0&&(o.complete=Sm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ER(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Sm(){}function Xt(s){return s&&s._delegate?s._delegate:s}class ga{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const fa="[DEFAULT]";class TR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bR(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fa){return this.instances.has(e)}getOptions(e=fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&h.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fa){return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SR(s){return s===fa?void 0:s}function bR(s){return s.instantiationMode==="EAGER"}class wR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ye;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ye||(Ye={}));const AR={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},RR=Ye.INFO,CR={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},NR=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=CR[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sp{constructor(e){this.name=e,this._logLevel=RR,this._logHandler=NR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const IR=(s,e)=>e.some(n=>s instanceof n);let eE,tE;function DR(){return eE||(eE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xR(){return tE||(tE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const s0=new WeakMap,Vm=new WeakMap,r0=new WeakMap,bm=new WeakMap,bp=new WeakMap;function OR(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",h)},c=()=>{n(Sr(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&s0.set(n,s)}).catch(()=>{}),bp.set(e,s),e}function MR(s){if(Vm.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",h),s.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",h),s.addEventListener("abort",h)});Vm.set(s,e)}let Lm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Vm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||r0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function kR(s){Lm=s(Lm)}function jR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(wm(this),e,...n);return r0.set(r,e.sort?e.sort():[e]),Sr(r)}:xR().includes(s)?function(...e){return s.apply(wm(this),e),Sr(s0.get(this))}:function(...e){return Sr(s.apply(wm(this),e))}}function VR(s){return typeof s=="function"?jR(s):(s instanceof IDBTransaction&&MR(s),IR(s,DR())?new Proxy(s,Lm):s)}function Sr(s){if(s instanceof IDBRequest)return OR(s);if(bm.has(s))return bm.get(s);const e=VR(s);return e!==s&&(bm.set(s,e),bp.set(e,s)),e}const wm=s=>bp.get(s);function LR(s,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(s,e),p=Sr(h);return r&&h.addEventListener("upgradeneeded",g=>{r(Sr(h.result),g.oldVersion,g.newVersion,Sr(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const PR=["get","getKey","getAll","getAllKeys","count"],UR=["put","add","delete","clear"],Am=new Map;function nE(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=UR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||PR.includes(n)))return;const c=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return r&&(v=v.index(p.shift())),(await Promise.all([v[n](...p),o&&g.done]))[0]};return Am.set(e,c),c}kR(s=>({...s,get:(e,n,r)=>nE(e,n)||s.get(e,n,r),has:(e,n)=>!!nE(e,n)||s.has(e,n)}));class zR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(BR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function BR(s){return s.getComponent()?.type==="VERSION"}const Pm="@firebase/app",iE="0.14.7";const Is=new Sp("@firebase/app"),qR="@firebase/app-compat",HR="@firebase/analytics-compat",FR="@firebase/analytics",GR="@firebase/app-check-compat",$R="@firebase/app-check",YR="@firebase/auth",KR="@firebase/auth-compat",QR="@firebase/database",XR="@firebase/data-connect",WR="@firebase/database-compat",JR="@firebase/functions",ZR="@firebase/functions-compat",eC="@firebase/installations",tC="@firebase/installations-compat",nC="@firebase/messaging",iC="@firebase/messaging-compat",sC="@firebase/performance",rC="@firebase/performance-compat",aC="@firebase/remote-config",oC="@firebase/remote-config-compat",lC="@firebase/storage",cC="@firebase/storage-compat",uC="@firebase/firestore",hC="@firebase/ai",dC="@firebase/firestore-compat",fC="firebase",mC="12.8.0";const Um="[DEFAULT]",pC={[Pm]:"fire-core",[qR]:"fire-core-compat",[FR]:"fire-analytics",[HR]:"fire-analytics-compat",[$R]:"fire-app-check",[GR]:"fire-app-check-compat",[YR]:"fire-auth",[KR]:"fire-auth-compat",[QR]:"fire-rtdb",[XR]:"fire-data-connect",[WR]:"fire-rtdb-compat",[JR]:"fire-fn",[ZR]:"fire-fn-compat",[eC]:"fire-iid",[tC]:"fire-iid-compat",[nC]:"fire-fcm",[iC]:"fire-fcm-compat",[sC]:"fire-perf",[rC]:"fire-perf-compat",[aC]:"fire-rc",[oC]:"fire-rc-compat",[lC]:"fire-gcs",[cC]:"fire-gcs-compat",[uC]:"fire-fst",[dC]:"fire-fst-compat",[hC]:"fire-vertex","fire-js":"fire-js",[fC]:"fire-js-all"};const Dh=new Map,gC=new Map,zm=new Map;function sE(s,e){try{s.container.addComponent(e)}catch(n){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Mo(s){const e=s.name;if(zm.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,s);for(const n of Dh.values())sE(n,s);for(const n of gC.values())sE(n,s);return!0}function wp(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function ri(s){return s==null?!1:s.settings!==void 0}const yC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},br=new Rc("app","Firebase",yC);class vC{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ga("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw br.create("app-deleted",{appName:this._name})}}const Fo=mC;function Ap(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:Um,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw br.create("bad-app-name",{appName:String(o)});if(n||(n=e0()),!n)throw br.create("no-options");const c=Dh.get(o);if(c){if(pa(n,c.options)&&pa(r,c.config))return c;throw br.create("duplicate-app",{appName:o})}const h=new wR(o);for(const g of zm.values())h.addComponent(g);const p=new vC(n,r,h);return Dh.set(o,p),p}function a0(s=Um){const e=Dh.get(s);if(!e&&s===Um&&e0())return Ap();if(!e)throw br.create("no-app",{appName:s});return e}function wr(s,e,n){let r=pC[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(h.join(" "));return}Mo(new ga(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const _C="firebase-heartbeat-database",EC=1,dc="firebase-heartbeat-store";let Rm=null;function o0(){return Rm||(Rm=LR(_C,EC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(dc)}catch(n){console.warn(n)}}}}).catch(s=>{throw br.create("idb-open",{originalErrorMessage:s.message})})),Rm}async function TC(s){try{const n=(await o0()).transaction(dc),r=await n.objectStore(dc).get(l0(s));return await n.done,r}catch(e){if(e instanceof js)Is.warn(e.message);else{const n=br.create("idb-get",{originalErrorMessage:e?.message});Is.warn(n.message)}}}async function rE(s,e){try{const r=(await o0()).transaction(dc,"readwrite");await r.objectStore(dc).put(e,l0(s)),await r.done}catch(n){if(n instanceof js)Is.warn(n.message);else{const r=br.create("idb-set",{originalErrorMessage:n?.message});Is.warn(r.message)}}}function l0(s){return`${s.name}!${s.options.appId}`}const SC=1024,bC=30;class wC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=aE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>bC){const o=CC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Is.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=aE(),{heartbeatsToSend:n,unsentEntries:r}=AC(this._heartbeatsCache.heartbeats),o=Ih(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Is.warn(e),""}}}function aE(){return new Date().toISOString().substring(0,10)}function AC(s,e=SC){const n=[];let r=s.slice();for(const o of s){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),oE(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),oE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class RC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dR()?fR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function oE(s){return Ih(JSON.stringify({version:2,heartbeats:s})).length}function CC(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}function NC(s){Mo(new ga("platform-logger",e=>new zR(e),"PRIVATE")),Mo(new ga("heartbeat",e=>new wC(e),"PRIVATE")),wr(Pm,iE,s),wr(Pm,iE,"esm2020"),wr("fire-js","")}NC("");function c0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IC=c0,u0=new Rc("auth","Firebase",c0());const xh=new Sp("@firebase/auth");function DC(s,...e){xh.logLevel<=Ye.WARN&&xh.warn(`Auth (${Fo}): ${s}`,...e)}function vh(s,...e){xh.logLevel<=Ye.ERROR&&xh.error(`Auth (${Fo}): ${s}`,...e)}function Ri(s,...e){throw Rp(s,...e)}function Xi(s,...e){return Rp(s,...e)}function h0(s,e,n){const r={...IC(),[e]:n};return new Rc("auth","Firebase",r).create(e,{appName:s.name})}function Cs(s){return h0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Rp(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return u0.create(s,...e)}function Ce(s,e,...n){if(!s)throw Rp(e,...n)}function ws(s){const e="INTERNAL ASSERTION FAILED: "+s;throw vh(e),new Error(e)}function Ds(s,e){s||ws(e)}function Bm(){return typeof self<"u"&&self.location?.href||""}function xC(){return lE()==="http:"||lE()==="https:"}function lE(){return typeof self<"u"&&self.location?.protocol||null}function OC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xC()||lR()||"connection"in navigator)?navigator.onLine:!0}function MC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Nc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ds(n>e,"Short delay should be less than long delay!"),this.isMobile=rR()||cR()}get(){return OC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cp(s,e){Ds(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class d0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const jC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VC=new Nc(3e4,6e4);function Vr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Lr(s,e,n,r,o={}){return f0(s,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const p=Cc({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const v={method:e,headers:g,...c};return oR()||(v.referrerPolicy="no-referrer"),s.emulatorConfig&&Ho(s.emulatorConfig.host)&&(v.credentials="include"),d0.fetch()(await m0(s,s.config.apiHost,n,p),v)})}async function f0(s,e,n){s._canInitEmulator=!1;const r={...kC,...e};try{const o=new PC(s),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw lh(s,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const p=c.ok?h.errorMessage:h.error.message,[g,v]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw lh(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw lh(s,"user-disabled",h);const T=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw h0(s,T,v);Ri(s,T)}}catch(o){if(o instanceof js)throw o;Ri(s,"network-request-failed",{message:String(o)})}}async function Ic(s,e,n,r,o={}){const c=await Lr(s,e,n,r,o);return"mfaPendingCredential"in c&&Ri(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function m0(s,e,n,r){const o=`${e}${n}?${r}`,c=s,h=c.config.emulator?Cp(s.config,o):`${s.config.apiScheme}://${o}`;return jC.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function LC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xi(this.auth,"network-request-failed")),VC.get())})}}function lh(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Xi(s,e,r);return o.customData._tokenResponse=n,o}function cE(s){return s!==void 0&&s.enterprise!==void 0}class UC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zC(s,e){return Lr(s,"GET","/v2/recaptchaConfig",Vr(s,e))}async function BC(s,e){return Lr(s,"POST","/v1/accounts:delete",e)}async function Oh(s,e){return Lr(s,"POST","/v1/accounts:lookup",e)}function ac(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qC(s,e=!1){const n=Xt(s),r=await n.getIdToken(e),o=Np(r);Ce(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:r,authTime:ac(Cm(o.auth_time)),issuedAtTime:ac(Cm(o.iat)),expirationTime:ac(Cm(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Cm(s){return Number(s)*1e3}function Np(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const o=JT(n);return o?JSON.parse(o):(vh("Failed to decode base64 JWT payload"),null)}catch(o){return vh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function uE(s){const e=Np(s);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fc(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof js&&HC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function HC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class FC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ac(this.lastLoginAt),this.creationTime=ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Mh(s){const e=s.auth,n=await s.getIdToken(),r=await fc(s,Oh(e,{idToken:n}));Ce(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const c=o.providerUserInfo?.length?p0(o.providerUserInfo):[],h=$C(s.providerData,c),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!h?.length,v=p?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(s,T)}async function GC(s){const e=Xt(s);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $C(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function p0(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function YC(s,e){const n=await f0(s,{},async()=>{const r=Cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,h=await m0(s,o,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return s.emulatorConfig&&Ho(s.emulatorConfig.host)&&(g.credentials="include"),d0.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KC(s,e){return Lr(s,"POST","/v2/accounts:revokeToken",Vr(s,e))}class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const n=uE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await YC(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,h=new Ro;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Ce(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(Ce(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return ws("not implemented")}}function mr(s,e){Ce(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Si{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new FC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await fc(this,this.stsTokenManager.getToken(this.auth,e));return Ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qC(this,e)}reload(){return GC(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ri(this.auth.app))return Promise.reject(Cs(this.auth));const e=await this.getIdToken();return await fc(this,BC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,v=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:S,emailVerified:w,isAnonymous:P,providerData:L,stsTokenManager:j}=n;Ce(S&&j,e,"internal-error");const z=Ro.fromJSON(this.name,j);Ce(typeof S=="string",e,"internal-error"),mr(r,e.name),mr(o,e.name),Ce(typeof w=="boolean",e,"internal-error"),Ce(typeof P=="boolean",e,"internal-error"),mr(c,e.name),mr(h,e.name),mr(p,e.name),mr(g,e.name),mr(v,e.name),mr(T,e.name);const ee=new Si({uid:S,auth:e,email:o,emailVerified:w,displayName:r,isAnonymous:P,photoURL:h,phoneNumber:c,tenantId:p,stsTokenManager:z,createdAt:v,lastLoginAt:T});return L&&Array.isArray(L)&&(ee.providerData=L.map(G=>({...G}))),g&&(ee._redirectEventId=g),ee}static async _fromIdTokenResponse(e,n,r=!1){const o=new Ro;o.updateFromServerResponse(n);const c=new Si({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Mh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ce(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?p0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,p=new Ro;p.updateFromIdToken(r);const g=new Si({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new qm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,v),g}}const hE=new Map;function As(s){Ds(s instanceof Function,"Expected a class definition");let e=hE.get(s);return e?(Ds(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,hE.set(s,e),e)}class g0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}g0.type="NONE";const dE=g0;function _h(s,e,n){return`firebase:${s}:${e}:${n}`}class Co{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=_h(this.userKey,o.apiKey,c),this.fullPersistenceKey=_h("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Oh(this.auth,{idToken:e}).catch(()=>{});return n?Si._fromGetAccountInfoResponse(this.auth,n,e):null}return Si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Co(As(dE),e,r);const o=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=o[0]||As(dE);const h=_h(r,e.config.apiKey,e.name);let p=null;for(const v of n)try{const T=await v._get(h);if(T){let S;if(typeof T=="string"){const w=await Oh(e,{idToken:T}).catch(()=>{});if(!w)break;S=await Si._fromGetAccountInfoResponse(e,w,T)}else S=Si._fromJSON(e,T);v!==c&&(p=S),c=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Co(c,e,r):(c=g[0],p&&await c._set(h,p.toJSON()),await Promise.all(n.map(async v=>{if(v!==c)try{await v._remove(h)}catch{}})),new Co(c,e,r))}}function fE(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(E0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(y0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S0(e))return"Blackberry";if(b0(e))return"Webos";if(v0(e))return"Safari";if((e.includes("chrome/")||_0(e))&&!e.includes("edge/"))return"Chrome";if(T0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function y0(s=En()){return/firefox\//i.test(s)}function v0(s=En()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _0(s=En()){return/crios\//i.test(s)}function E0(s=En()){return/iemobile/i.test(s)}function T0(s=En()){return/android/i.test(s)}function S0(s=En()){return/blackberry/i.test(s)}function b0(s=En()){return/webos/i.test(s)}function Ip(s=En()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function QC(s=En()){return Ip(s)&&!!window.navigator?.standalone}function XC(){return uR()&&document.documentMode===10}function w0(s=En()){return Ip(s)||T0(s)||b0(s)||S0(s)||/windows phone/i.test(s)||E0(s)}function A0(s,e=[]){let n;switch(s){case"Browser":n=fE(En());break;case"Worker":n=`${fE(En())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fo}/${r}`}class WC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((h,p)=>{try{const g=e(c);h(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function JC(s,e={}){return Lr(s,"GET","/v2/passwordPolicy",Vr(s,e))}const ZC=6;class eN{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ZC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class tN{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mE(this),this.idTokenSubscription=new mE(this),this.beforeStateQueue=new WC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=As(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Oh(this,{idToken:e}),r=await Si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ri(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ri(this.app))return Promise.reject(Cs(this));const n=e?Xt(e):null;return n&&Ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ri(this.app)?Promise.reject(Cs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ri(this.app)?Promise.reject(Cs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JC(this),n=new eN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Rc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await KC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&As(e)||this._popupRedirectResolver;Ce(n,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[As(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(p,this,"internal-error"),p.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&DC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ba(s){return Xt(s)}class mE{constructor(e){this.auth=e,this.observer=null,this.addObserver=vR(n=>this.observer=n)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ed={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nN(s){ed=s}function R0(s){return ed.loadJS(s)}function iN(){return ed.recaptchaEnterpriseScript}function sN(){return ed.gapiScript}function rN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class aN{constructor(){this.enterprise=new oN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class oN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const lN="recaptcha-enterprise",C0="NO_RECAPTCHA";class cN{constructor(e){this.type=lN,this.auth=ba(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,p)=>{zC(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new UC(g);return c.tenantId==null?c._agentRecaptchaConfig=v:c._tenantRecaptchaConfigs[c.tenantId]=v,h(v.siteKey)}}).catch(g=>{p(g)})})}function o(c,h,p){const g=window.grecaptcha;cE(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(v=>{h(v)}).catch(()=>{h(C0)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aN().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{r(this.auth).then(p=>{if(!n&&cE(window.grecaptcha))o(p,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=iN();g.length!==0&&(g+=p),R0(g).then(()=>{o(p,c,h)}).catch(v=>{h(v)})}}).catch(p=>{h(p)})})}}async function pE(s,e,n,r=!1,o=!1){const c=new cN(s);let h;if(o)h=C0;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Hm(s,e,n,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await pE(s,e,n,n==="getOobCode");return r(s,c)}else return r(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await pE(s,e,n,n==="getOobCode");return r(s,h)}else return Promise.reject(c)})}function uN(s,e){const n=wp(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(pa(c,e??{}))return o;Ri(o,"already-initialized")}return n.initialize({options:e})}function hN(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(As);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function dN(s,e,n){const r=ba(s);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=N0(e),{host:h,port:p}=fN(e),g=p===null?"":`:${p}`,v={url:`${c}//${h}${g}/`},T=Object.freeze({host:h,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(pa(v,r.config.emulator)&&pa(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Ho(h)?(n0(`${c}//${h}${g}`),i0("Auth",!0)):mN()}function N0(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function fN(s){const e=N0(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:gE(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:gE(h)}}}function gE(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function mN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Dp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,n){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function pN(s,e){return Lr(s,"POST","/v1/accounts:signUp",e)}async function gN(s,e){return Ic(s,"POST","/v1/accounts:signInWithPassword",Vr(s,e))}async function yN(s,e){return Ic(s,"POST","/v1/accounts:signInWithEmailLink",Vr(s,e))}async function vN(s,e){return Ic(s,"POST","/v1/accounts:signInWithEmailLink",Vr(s,e))}class mc extends Dp{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new mc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new mc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,n,"signInWithPassword",gN);case"emailLink":return yN(e,{email:this._email,oobCode:this._password});default:Ri(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hm(e,r,"signUpPassword",pN);case"emailLink":return vN(e,{idToken:n,email:this._email,oobCode:this._password});default:Ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function No(s,e){return Ic(s,"POST","/v1/accounts:signInWithIdp",Vr(s,e))}const _N="http://localhost";class ya extends Dp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ri("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const h=new ya(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return No(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,No(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,No(e,n)}buildRequest(){const e={requestUri:_N,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cc(n)}return e}}function EN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TN(s){const e=ec(tc(s)).link,n=e?ec(tc(e)).deep_link_id:null,r=ec(tc(s)).deep_link_id;return(r?ec(tc(r)).link:null)||r||n||e||s}class xp{constructor(e){const n=ec(tc(e)),r=n.apiKey??null,o=n.oobCode??null,c=EN(n.mode??null);Ce(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=TN(e);try{return new xp(n)}catch{return null}}}class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,n){return mc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=xp.parseLink(n);return Ce(r,"argument-error"),mc._fromEmailAndCode(e,r.code,r.tenantId)}}Go.PROVIDER_ID="password";Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class I0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Dc extends I0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yr extends Dc{constructor(){super("facebook.com")}static credential(e){return ya._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";class vr extends Dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ya._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.GOOGLE_SIGN_IN_METHOD="google.com";vr.PROVIDER_ID="google.com";class _r extends Dc{constructor(){super("github.com")}static credential(e){return ya._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";class Er extends Dc{constructor(){super("twitter.com")}static credential(e,n){return ya._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Er.credential(n,r)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";async function SN(s,e){return Ic(s,"POST","/v1/accounts:signUp",Vr(s,e))}class va{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await Si._fromIdTokenResponse(e,r,o),h=yE(r);return new va({user:c,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=yE(r);return new va({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function yE(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class kh extends js{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,kh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new kh(e,n,r,o)}}function D0(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?kh._fromErrorAndOperation(s,c,e,r):c})}async function bN(s,e,n=!1){const r=await fc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return va._forOperation(s,"link",r)}async function wN(s,e,n=!1){const{auth:r}=s;if(ri(r.app))return Promise.reject(Cs(r));const o="reauthenticate";try{const c=await fc(s,D0(r,o,e,s),n);Ce(c.idToken,r,"internal-error");const h=Np(c.idToken);Ce(h,r,"internal-error");const{sub:p}=h;return Ce(s.uid===p,r,"user-mismatch"),va._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ri(r,"user-mismatch"),c}}async function x0(s,e,n=!1){if(ri(s.app))return Promise.reject(Cs(s));const r="signIn",o=await D0(s,r,e),c=await va._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(c.user),c}async function AN(s,e){return x0(ba(s),e)}async function O0(s){const e=ba(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RN(s,e,n){if(ri(s.app))return Promise.reject(Cs(s));const r=ba(s),h=await Hm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SN).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&O0(s),g}),p=await va._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(p.user),p}function CN(s,e,n){return ri(s.app)?Promise.reject(Cs(s)):AN(Xt(s),Go.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&O0(s),r})}function NN(s,e){return Xt(s).setPersistence(e)}function IN(s,e,n,r){return Xt(s).onIdTokenChanged(e,n,r)}function DN(s,e,n){return Xt(s).beforeAuthStateChanged(e,n)}function xN(s,e,n,r){return Xt(s).onAuthStateChanged(e,n,r)}function M0(s){return Xt(s).signOut()}const jh="__sak";class k0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jh,"1"),this.storage.removeItem(jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ON=1e3,MN=10;class j0 extends k0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);XC()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,MN):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ON)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}j0.type="LOCAL";const V0=j0;class L0 extends k0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}L0.type="SESSION";const Op=L0;function kN(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class td{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new td(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(h).map(async v=>v(n.origin,c)),g=await kN(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}td.receivers=[];function Mp(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}class jN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((p,g)=>{const v=Mp("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(S){const w=S;if(w.data.eventId===v)switch(w.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(w.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Wi(){return window}function VN(s){Wi().location.href=s}function P0(){return typeof Wi().WorkerGlobalScope<"u"&&typeof Wi().importScripts=="function"}async function LN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PN(){return navigator?.serviceWorker?.controller||null}function UN(){return P0()?self:null}const U0="firebaseLocalStorageDb",zN=1,Vh="firebaseLocalStorage",z0="fbase_key";class xc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nd(s,e){return s.transaction([Vh],e?"readwrite":"readonly").objectStore(Vh)}function BN(){const s=indexedDB.deleteDatabase(U0);return new xc(s).toPromise()}function Fm(){const s=indexedDB.open(U0,zN);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Vh,{keyPath:z0})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Vh)?e(r):(r.close(),await BN(),e(await Fm()))})})}async function vE(s,e,n){const r=nd(s,!0).put({[z0]:e,value:n});return new xc(r).toPromise()}async function qN(s,e){const n=nd(s,!1).get(e),r=await new xc(n).toPromise();return r===void 0?null:r.value}function _E(s,e){const n=nd(s,!0).delete(e);return new xc(n).toPromise()}const HN=800,FN=3;class B0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>FN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=td._getInstance(UN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await LN(),!this.activeServiceWorker)return;this.sender=new jN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fm();return await vE(e,jh,"1"),await _E(e,jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_E(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=nd(o,!1).getAll();return new xc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}B0.type="LOCAL";const GN=B0;new Nc(3e4,6e4);function $N(s,e){return e?As(e):(Ce(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class kp extends Dp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,n){return No(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YN(s){return x0(s.auth,new kp(s),s.bypassAuthState)}function KN(s){const{auth:e,user:n}=s;return Ce(n,e,"internal-error"),wN(n,new kp(s),s.bypassAuthState)}async function QN(s){const{auth:e,user:n}=s;return Ce(n,e,"internal-error"),bN(n,new kp(s),s.bypassAuthState)}class q0{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YN;case"linkViaPopup":case"linkViaRedirect":return QN;case"reauthViaPopup":case"reauthViaRedirect":return KN;default:Ri(this.auth,"internal-error")}}resolve(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const XN=new Nc(2e3,1e4);class wo extends q0{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,wo.currentPopupAction&&wo.currentPopupAction.cancel(),wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const e=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XN.get())};e()}}wo.currentPopupAction=null;const WN="pendingRedirect",Eh=new Map;class JN extends q0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Eh.get(this.auth._key());if(!e){try{const r=await ZN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Eh.set(this.auth._key(),e)}return this.bypassAuthState||Eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZN(s,e){const n=nI(e),r=tI(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function eI(s,e){Eh.set(s._key(),e)}function tI(s){return As(s._redirectPersistence)}function nI(s){return _h(WN,s.config.apiKey,s.name)}async function iI(s,e,n=!1){if(ri(s.app))return Promise.reject(Cs(s));const r=ba(s),o=$N(r,e),h=await new JN(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}const sI=600*1e3;class rI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!H0(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Xi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sI&&this.cachedEventUids.clear(),this.cachedEventUids.has(EE(e))}saveEventToCache(e){this.cachedEventUids.add(EE(e)),this.lastProcessedEventTime=Date.now()}}function EE(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function H0({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function aI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H0(s);default:return!1}}async function oI(s,e={}){return Lr(s,"GET","/v1/projects",e)}const lI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cI=/^https?/;async function uI(s){if(s.config.emulator)return;const{authorizedDomains:e}=await oI(s);for(const n of e)try{if(hI(n))return}catch{}Ri(s,"unauthorized-domain")}function hI(s){const e=Bm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!cI.test(n))return!1;if(lI.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const dI=new Nc(3e4,6e4);function TE(){const s=Wi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function fI(s){return new Promise((e,n)=>{function r(){TE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TE(),n(Xi(s,"network-request-failed"))},timeout:dI.get()})}if(Wi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Wi().gapi?.load)r();else{const o=rN("iframefcb");return Wi()[o]=()=>{gapi.load?r():n(Xi(s,"network-request-failed"))},R0(`${sN()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Th=null,e})}let Th=null;function mI(s){return Th=Th||fI(s),Th}const pI=new Nc(5e3,15e3),gI="__/auth/iframe",yI="emulator/auth/iframe",vI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_I=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EI(s){const e=s.config;Ce(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Cp(e,yI):`https://${s.config.authDomain}/${gI}`,r={apiKey:e.apiKey,appName:s.name,v:Fo},o=_I.get(s.config.apiHost);o&&(r.eid=o);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Cc(r).slice(1)}`}async function TI(s){const e=await mI(s),n=Wi().gapi;return Ce(n,s,"internal-error"),e.open({where:document.body,url:EI(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vI,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=Xi(s,"network-request-failed"),p=Wi().setTimeout(()=>{c(h)},pI.get());function g(){Wi().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(h)})}))}const SI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bI=500,wI=600,AI="_blank",RI="http://localhost";class SE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CI(s,e,n,r=bI,o=wI){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...SI,width:r.toString(),height:o.toString(),top:c,left:h},v=En().toLowerCase();n&&(p=_0(v)?AI:n),y0(v)&&(e=e||RI,g.scrollbars="yes");const T=Object.entries(g).reduce((w,[P,L])=>`${w}${P}=${L},`,"");if(QC(v)&&p!=="_self")return NI(e||"",p),new SE(null);const S=window.open(e||"",p,T);Ce(S,s,"popup-blocked");try{S.focus()}catch{}return new SE(S)}function NI(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const II="__/auth/handler",DI="emulator/auth/handler",xI=encodeURIComponent("fac");async function bE(s,e,n,r,o,c){Ce(s.config.authDomain,s,"auth-domain-config-required"),Ce(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:Fo,eventId:o};if(e instanceof I0){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",yR(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,S]of Object.entries({}))h[T]=S}if(e instanceof Dc){const T=e.getScopes().filter(S=>S!=="");T.length>0&&(h.scopes=T.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await s._getAppCheckToken(),v=g?`#${xI}=${encodeURIComponent(g)}`:"";return`${OI(s)}?${Cc(p).slice(1)}${v}`}function OI({config:s}){return s.emulator?Cp(s,DI):`https://${s.authDomain}/${II}`}const Nm="webStorageSupport";class MI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Op,this._completeRedirectFn=iI,this._overrideRedirectResult=eI}async _openPopup(e,n,r,o){Ds(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await bE(e,n,r,Bm(),o);return CI(e,c,Mp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await bE(e,n,r,Bm(),o);return VN(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Ds(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await TI(e),r=new rI(e);return n.register("authEvent",o=>(Ce(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nm,{type:Nm},o=>{const c=o?.[0]?.[Nm];c!==void 0&&n(!!c),Ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return w0()||v0()||Ip()}}const kI=MI;var wE="@firebase/auth",AE="1.12.0";class jI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function VI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LI(s){Mo(new ga("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=r.options;Ce(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A0(s)},v=new tN(r,o,c,g);return hN(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mo(new ga("auth-internal",e=>{const n=ba(e.getProvider("auth").getImmediate());return(r=>new jI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wr(wE,AE,VI(s)),wr(wE,AE,"esm2020")}const PI=300,UI=t0("authIdTokenMaxAge")||PI;let RE=null;const zI=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UI)return;const o=n?.token;RE!==o&&(RE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function F0(s=a0()){const e=wp(s,"auth");if(e.isInitialized())return e.getImmediate();const n=uN(s,{popupRedirectResolver:kI,persistence:[GN,V0,Op]}),r=t0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=zI(c.toString());DN(n,h,()=>h(n.currentUser)),IN(n,p=>h(p))}}const o=ZT("auth");return o&&dN(n,`http://${o}`),n}function BI(){return document.getElementsByTagName("head")?.[0]??document}nN({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const c=Xi("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",BI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LI("Browser");var CE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ar,G0;(function(){var s;function e(N,C){function R(){}R.prototype=C.prototype,N.F=C.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(D,x,k){for(var I=Array(arguments.length-2),we=2;we<arguments.length;we++)I[we-2]=arguments[we];return C.prototype[x].apply(D,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,C,R){R||(R=0);const D=Array(16);if(typeof C=="string")for(var x=0;x<16;++x)D[x]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(x=0;x<16;++x)D[x]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=N.g[0],R=N.g[1],x=N.g[2];let k=N.g[3],I;I=C+(k^R&(x^k))+D[0]+3614090360&4294967295,C=R+(I<<7&4294967295|I>>>25),I=k+(x^C&(R^x))+D[1]+3905402710&4294967295,k=C+(I<<12&4294967295|I>>>20),I=x+(R^k&(C^R))+D[2]+606105819&4294967295,x=k+(I<<17&4294967295|I>>>15),I=R+(C^x&(k^C))+D[3]+3250441966&4294967295,R=x+(I<<22&4294967295|I>>>10),I=C+(k^R&(x^k))+D[4]+4118548399&4294967295,C=R+(I<<7&4294967295|I>>>25),I=k+(x^C&(R^x))+D[5]+1200080426&4294967295,k=C+(I<<12&4294967295|I>>>20),I=x+(R^k&(C^R))+D[6]+2821735955&4294967295,x=k+(I<<17&4294967295|I>>>15),I=R+(C^x&(k^C))+D[7]+4249261313&4294967295,R=x+(I<<22&4294967295|I>>>10),I=C+(k^R&(x^k))+D[8]+1770035416&4294967295,C=R+(I<<7&4294967295|I>>>25),I=k+(x^C&(R^x))+D[9]+2336552879&4294967295,k=C+(I<<12&4294967295|I>>>20),I=x+(R^k&(C^R))+D[10]+4294925233&4294967295,x=k+(I<<17&4294967295|I>>>15),I=R+(C^x&(k^C))+D[11]+2304563134&4294967295,R=x+(I<<22&4294967295|I>>>10),I=C+(k^R&(x^k))+D[12]+1804603682&4294967295,C=R+(I<<7&4294967295|I>>>25),I=k+(x^C&(R^x))+D[13]+4254626195&4294967295,k=C+(I<<12&4294967295|I>>>20),I=x+(R^k&(C^R))+D[14]+2792965006&4294967295,x=k+(I<<17&4294967295|I>>>15),I=R+(C^x&(k^C))+D[15]+1236535329&4294967295,R=x+(I<<22&4294967295|I>>>10),I=C+(x^k&(R^x))+D[1]+4129170786&4294967295,C=R+(I<<5&4294967295|I>>>27),I=k+(R^x&(C^R))+D[6]+3225465664&4294967295,k=C+(I<<9&4294967295|I>>>23),I=x+(C^R&(k^C))+D[11]+643717713&4294967295,x=k+(I<<14&4294967295|I>>>18),I=R+(k^C&(x^k))+D[0]+3921069994&4294967295,R=x+(I<<20&4294967295|I>>>12),I=C+(x^k&(R^x))+D[5]+3593408605&4294967295,C=R+(I<<5&4294967295|I>>>27),I=k+(R^x&(C^R))+D[10]+38016083&4294967295,k=C+(I<<9&4294967295|I>>>23),I=x+(C^R&(k^C))+D[15]+3634488961&4294967295,x=k+(I<<14&4294967295|I>>>18),I=R+(k^C&(x^k))+D[4]+3889429448&4294967295,R=x+(I<<20&4294967295|I>>>12),I=C+(x^k&(R^x))+D[9]+568446438&4294967295,C=R+(I<<5&4294967295|I>>>27),I=k+(R^x&(C^R))+D[14]+3275163606&4294967295,k=C+(I<<9&4294967295|I>>>23),I=x+(C^R&(k^C))+D[3]+4107603335&4294967295,x=k+(I<<14&4294967295|I>>>18),I=R+(k^C&(x^k))+D[8]+1163531501&4294967295,R=x+(I<<20&4294967295|I>>>12),I=C+(x^k&(R^x))+D[13]+2850285829&4294967295,C=R+(I<<5&4294967295|I>>>27),I=k+(R^x&(C^R))+D[2]+4243563512&4294967295,k=C+(I<<9&4294967295|I>>>23),I=x+(C^R&(k^C))+D[7]+1735328473&4294967295,x=k+(I<<14&4294967295|I>>>18),I=R+(k^C&(x^k))+D[12]+2368359562&4294967295,R=x+(I<<20&4294967295|I>>>12),I=C+(R^x^k)+D[5]+4294588738&4294967295,C=R+(I<<4&4294967295|I>>>28),I=k+(C^R^x)+D[8]+2272392833&4294967295,k=C+(I<<11&4294967295|I>>>21),I=x+(k^C^R)+D[11]+1839030562&4294967295,x=k+(I<<16&4294967295|I>>>16),I=R+(x^k^C)+D[14]+4259657740&4294967295,R=x+(I<<23&4294967295|I>>>9),I=C+(R^x^k)+D[1]+2763975236&4294967295,C=R+(I<<4&4294967295|I>>>28),I=k+(C^R^x)+D[4]+1272893353&4294967295,k=C+(I<<11&4294967295|I>>>21),I=x+(k^C^R)+D[7]+4139469664&4294967295,x=k+(I<<16&4294967295|I>>>16),I=R+(x^k^C)+D[10]+3200236656&4294967295,R=x+(I<<23&4294967295|I>>>9),I=C+(R^x^k)+D[13]+681279174&4294967295,C=R+(I<<4&4294967295|I>>>28),I=k+(C^R^x)+D[0]+3936430074&4294967295,k=C+(I<<11&4294967295|I>>>21),I=x+(k^C^R)+D[3]+3572445317&4294967295,x=k+(I<<16&4294967295|I>>>16),I=R+(x^k^C)+D[6]+76029189&4294967295,R=x+(I<<23&4294967295|I>>>9),I=C+(R^x^k)+D[9]+3654602809&4294967295,C=R+(I<<4&4294967295|I>>>28),I=k+(C^R^x)+D[12]+3873151461&4294967295,k=C+(I<<11&4294967295|I>>>21),I=x+(k^C^R)+D[15]+530742520&4294967295,x=k+(I<<16&4294967295|I>>>16),I=R+(x^k^C)+D[2]+3299628645&4294967295,R=x+(I<<23&4294967295|I>>>9),I=C+(x^(R|~k))+D[0]+4096336452&4294967295,C=R+(I<<6&4294967295|I>>>26),I=k+(R^(C|~x))+D[7]+1126891415&4294967295,k=C+(I<<10&4294967295|I>>>22),I=x+(C^(k|~R))+D[14]+2878612391&4294967295,x=k+(I<<15&4294967295|I>>>17),I=R+(k^(x|~C))+D[5]+4237533241&4294967295,R=x+(I<<21&4294967295|I>>>11),I=C+(x^(R|~k))+D[12]+1700485571&4294967295,C=R+(I<<6&4294967295|I>>>26),I=k+(R^(C|~x))+D[3]+2399980690&4294967295,k=C+(I<<10&4294967295|I>>>22),I=x+(C^(k|~R))+D[10]+4293915773&4294967295,x=k+(I<<15&4294967295|I>>>17),I=R+(k^(x|~C))+D[1]+2240044497&4294967295,R=x+(I<<21&4294967295|I>>>11),I=C+(x^(R|~k))+D[8]+1873313359&4294967295,C=R+(I<<6&4294967295|I>>>26),I=k+(R^(C|~x))+D[15]+4264355552&4294967295,k=C+(I<<10&4294967295|I>>>22),I=x+(C^(k|~R))+D[6]+2734768916&4294967295,x=k+(I<<15&4294967295|I>>>17),I=R+(k^(x|~C))+D[13]+1309151649&4294967295,R=x+(I<<21&4294967295|I>>>11),I=C+(x^(R|~k))+D[4]+4149444226&4294967295,C=R+(I<<6&4294967295|I>>>26),I=k+(R^(C|~x))+D[11]+3174756917&4294967295,k=C+(I<<10&4294967295|I>>>22),I=x+(C^(k|~R))+D[2]+718787259&4294967295,x=k+(I<<15&4294967295|I>>>17),I=R+(k^(x|~C))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(x+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+x&4294967295,N.g[3]=N.g[3]+k&4294967295}r.prototype.v=function(N,C){C===void 0&&(C=N.length);const R=C-this.blockSize,D=this.C;let x=this.h,k=0;for(;k<C;){if(x==0)for(;k<=R;)o(this,N,k),k+=this.blockSize;if(typeof N=="string"){for(;k<C;)if(D[x++]=N.charCodeAt(k++),x==this.blockSize){o(this,D),x=0;break}}else for(;k<C;)if(D[x++]=N[k++],x==this.blockSize){o(this,D),x=0;break}}this.h=x,this.o+=C},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;C=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=C&255,C/=256;for(this.v(N),N=Array(16),C=0,R=0;R<4;++R)for(let D=0;D<32;D+=8)N[C++]=this.g[R]>>>D&255;return N};function c(N,C){var R=p;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=C(N)}function h(N,C){this.h=C;const R=[];let D=!0;for(let x=N.length-1;x>=0;x--){const k=N[x]|0;D&&k==C||(R[x]=k,D=!1)}this.g=R}var p={};function g(N){return-128<=N&&N<128?c(N,function(C){return new h([C|0],C<0?-1:0)}):new h([N|0],N<0?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return S;if(N<0)return z(v(-N));const C=[];let R=1;for(let D=0;N>=R;D++)C[D]=N/R|0,R*=4294967296;return new h(C,0)}function T(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return z(T(N.substring(1),C));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=v(Math.pow(C,8));let D=S;for(let k=0;k<N.length;k+=8){var x=Math.min(8,N.length-k);const I=parseInt(N.substring(k,k+x),C);x<8?(x=v(Math.pow(C,x)),D=D.j(x).add(v(I))):(D=D.j(R),D=D.add(v(I)))}return D}var S=g(0),w=g(1),P=g(16777216);s=h.prototype,s.m=function(){if(j(this))return-z(this).m();let N=0,C=1;for(let R=0;R<this.g.length;R++){const D=this.i(R);N+=(D>=0?D:4294967296+D)*C,C*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(L(this))return"0";if(j(this))return"-"+z(this).toString(N);const C=v(Math.pow(N,6));var R=this;let D="";for(;;){const x=pe(R,C).g;R=ee(R,x.j(C));let k=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=x,L(R))return k+D;for(;k.length<6;)k="0"+k;D=k+D}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function L(N){if(N.h!=0)return!1;for(let C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function j(N){return N.h==-1}s.l=function(N){return N=ee(this,N),j(N)?-1:L(N)?0:1};function z(N){const C=N.g.length,R=[];for(let D=0;D<C;D++)R[D]=~N.g[D];return new h(R,~N.h).add(w)}s.abs=function(){return j(this)?z(this):this},s.add=function(N){const C=Math.max(this.g.length,N.g.length),R=[];let D=0;for(let x=0;x<=C;x++){let k=D+(this.i(x)&65535)+(N.i(x)&65535),I=(k>>>16)+(this.i(x)>>>16)+(N.i(x)>>>16);D=I>>>16,k&=65535,I&=65535,R[x]=I<<16|k}return new h(R,R[R.length-1]&-2147483648?-1:0)};function ee(N,C){return N.add(z(C))}s.j=function(N){if(L(this)||L(N))return S;if(j(this))return j(N)?z(this).j(z(N)):z(z(this).j(N));if(j(N))return z(this.j(z(N)));if(this.l(P)<0&&N.l(P)<0)return v(this.m()*N.m());const C=this.g.length+N.g.length,R=[];for(var D=0;D<2*C;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(let x=0;x<N.g.length;x++){const k=this.i(D)>>>16,I=this.i(D)&65535,we=N.i(x)>>>16,Ve=N.i(x)&65535;R[2*D+2*x]+=I*Ve,G(R,2*D+2*x),R[2*D+2*x+1]+=k*Ve,G(R,2*D+2*x+1),R[2*D+2*x+1]+=I*we,G(R,2*D+2*x+1),R[2*D+2*x+2]+=k*we,G(R,2*D+2*x+2)}for(N=0;N<C;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=C;N<2*C;N++)R[N]=0;return new h(R,0)};function G(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function le(N,C){this.g=N,this.h=C}function pe(N,C){if(L(C))throw Error("division by zero");if(L(N))return new le(S,S);if(j(N))return C=pe(z(N),C),new le(z(C.g),z(C.h));if(j(C))return C=pe(N,z(C)),new le(z(C.g),C.h);if(N.g.length>30){if(j(N)||j(C))throw Error("slowDivide_ only works with positive integers.");for(var R=w,D=C;D.l(N)<=0;)R=$(R),D=$(D);var x=te(R,1),k=te(D,1);for(D=te(D,2),R=te(R,2);!L(D);){var I=k.add(D);I.l(N)<=0&&(x=x.add(R),k=I),D=te(D,1),R=te(R,1)}return C=ee(N,x.j(C)),new le(x,C)}for(x=S;N.l(C)>=0;){for(R=Math.max(1,Math.floor(N.m()/C.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),k=v(R),I=k.j(C);j(I)||I.l(N)>0;)R-=D,k=v(R),I=k.j(C);L(k)&&(k=w),x=x.add(k),N=ee(N,I)}return new le(x,N)}s.B=function(N){return pe(this,N).h},s.and=function(N){const C=Math.max(this.g.length,N.g.length),R=[];for(let D=0;D<C;D++)R[D]=this.i(D)&N.i(D);return new h(R,this.h&N.h)},s.or=function(N){const C=Math.max(this.g.length,N.g.length),R=[];for(let D=0;D<C;D++)R[D]=this.i(D)|N.i(D);return new h(R,this.h|N.h)},s.xor=function(N){const C=Math.max(this.g.length,N.g.length),R=[];for(let D=0;D<C;D++)R[D]=this.i(D)^N.i(D);return new h(R,this.h^N.h)};function $(N){const C=N.g.length+1,R=[];for(let D=0;D<C;D++)R[D]=N.i(D)<<1|N.i(D-1)>>>31;return new h(R,N.h)}function te(N,C){const R=C>>5;C%=32;const D=N.g.length-R,x=[];for(let k=0;k<D;k++)x[k]=C>0?N.i(k+R)>>>C|N.i(k+R+1)<<32-C:N.i(k+R);return new h(x,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,G0=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=T,Ar=h}).apply(typeof CE<"u"?CE:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $0,nc,Y0,Sh,Gm,K0,Q0,X0;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var y=0;y<u.length;++y){var E=u[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function o(u,y){if(y)e:{var E=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var q=u[A];if(!(q in E))break e;E=E[q]}u=u[u.length-1],A=E[u],y=y(A),y!=A&&y!=null&&e(E,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var E=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&E.push([A,y[A]]);return E}});var c=c||{},h=this||self;function p(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function g(u,y,E){return u.call.apply(u.bind,arguments)}function v(u,y,E){return v=g,v.apply(null,arguments)}function T(u,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function S(u,y){function E(){}E.prototype=y.prototype,u.Z=y.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(A,q,X){for(var de=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)de[ke-2]=arguments[ke];return y.prototype[q].apply(A,de)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const y=u.length;if(y>0){const E=Array(y);for(let A=0;A<y;A++)E[A]=u[A];return E}return[]}function L(u,y){for(let A=1;A<arguments.length;A++){const q=arguments[A];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=u.length||0;const X=q.length||0;u.length=E+X;for(let de=0;de<X;de++)u[E+de]=q[de]}else u.push(q)}}class j{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function z(u){h.setTimeout(()=>{throw u},0)}function ee(){var u=N;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class G{constructor(){this.h=this.g=null}add(y,E){const A=le.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var le=new j(()=>new pe,u=>u.reset());class pe{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let $,te=!1,N=new G,C=()=>{const u=Promise.resolve(void 0);$=()=>{u.then(R)}};function R(){for(var u;u=ee();){try{u.h.call(u.g)}catch(E){z(E)}var y=le;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}te=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};h.addEventListener("test",E,y),h.removeEventListener("test",E,y)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function we(u,y){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}S(we,x),we.prototype.init=function(u,y){const E=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(E=="mouseover"?y=u.fromElement:E=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ve="closure_listenable_"+(Math.random()*1e6|0),J=0;function he(u,y,E,A,q){this.listener=u,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=q,this.key=++J,this.da=this.fa=!1}function _e(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ue(u,y,E){for(const A in u)y.call(E,u[A],A,u)}function Be(u,y){for(const E in u)y.call(void 0,u[E],E,u)}function V(u){const y={};for(const E in u)y[E]=u[E];return y}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(u,y){let E,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(E in A)u[E]=A[E];for(let X=0;X<ie.length;X++)E=ie[X],Object.prototype.hasOwnProperty.call(A,E)&&(u[E]=A[E])}}function Z(u){this.src=u,this.g={},this.h=0}Z.prototype.add=function(u,y,E,A,q){const X=u.toString();u=this.g[X],u||(u=this.g[X]=[],this.h++);const de=fe(u,y,A,q);return de>-1?(y=u[de],E||(y.fa=!1)):(y=new he(y,this.src,X,!!A,q),y.fa=E,u.push(y)),y};function ue(u,y){const E=y.type;if(E in u.g){var A=u.g[E],q=Array.prototype.indexOf.call(A,y,void 0),X;(X=q>=0)&&Array.prototype.splice.call(A,q,1),X&&(_e(y),u.g[E].length==0&&(delete u.g[E],u.h--))}}function fe(u,y,E,A){for(let q=0;q<u.length;++q){const X=u[q];if(!X.da&&X.listener==y&&X.capture==!!E&&X.ha==A)return q}return-1}var ce="closure_lm_"+(Math.random()*1e6|0),Re={};function Me(u,y,E,A,q){if(Array.isArray(y)){for(let X=0;X<y.length;X++)Me(u,y[X],E,A,q);return null}return E=Mn(E),u&&u[Ve]?u.J(y,E,p(A)?!!A.capture:!1,q):at(u,y,E,!1,A,q)}function at(u,y,E,A,q,X){if(!y)throw Error("Invalid event type");const de=p(q)?!!q.capture:!!q;let ke=vt(u);if(ke||(u[ce]=ke=new Z(u)),E=ke.add(y,E,A,de,X),E.proxy)return E;if(A=Te(),E.proxy=A,A.src=u,A.listener=E,u.addEventListener)k||(q=de),q===void 0&&(q=!1),u.addEventListener(y.toString(),A,q);else if(u.attachEvent)u.attachEvent(Ft(y.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Te(){function u(E){return y.call(u.src,u.listener,E)}const y=oi;return u}function pt(u,y,E,A,q){if(Array.isArray(y))for(var X=0;X<y.length;X++)pt(u,y[X],E,A,q);else A=p(A)?!!A.capture:!!A,E=Mn(E),u&&u[Ve]?(u=u.i,X=String(y).toString(),X in u.g&&(y=u.g[X],E=fe(y,E,A,q),E>-1&&(_e(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete u.g[X],u.h--)))):u&&(u=vt(u))&&(y=u.g[y.toString()],u=-1,y&&(u=fe(y,E,A,q)),(E=u>-1?y[u]:null)&&Mt(E))}function Mt(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[Ve])ue(y.i,u);else{var E=u.type,A=u.proxy;y.removeEventListener?y.removeEventListener(E,A,u.capture):y.detachEvent?y.detachEvent(Ft(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=vt(y))?(ue(E,u),E.h==0&&(E.src=null,y[ce]=null)):_e(u)}}}function Ft(u){return u in Re?Re[u]:Re[u]="on"+u}function oi(u,y){if(u.da)u=!0;else{y=new we(y,this);const E=u.listener,A=u.ha||u.src;u.fa&&Mt(u),u=E.call(A,y)}return u}function vt(u){return u=u[ce],u instanceof Z?u:null}var Wt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Mn(u){return typeof u=="function"?u:(u[Wt]||(u[Wt]=function(y){return u.handleEvent(y)}),u[Wt])}function Xe(){D.call(this),this.i=new Z(this),this.M=this,this.G=null}S(Xe,D),Xe.prototype[Ve]=!0,Xe.prototype.removeEventListener=function(u,y,E,A){pt(this,u,y,E,A)};function We(u,y){var E,A=u.G;if(A)for(E=[];A;A=A.G)E.push(A);if(u=u.M,A=y.type||y,typeof y=="string")y=new x(y,u);else if(y instanceof x)y.target=y.target||u;else{var q=y;y=new x(A,u),Y(y,q)}q=!0;let X,de;if(E)for(de=E.length-1;de>=0;de--)X=y.g=E[de],q=li(X,A,!0,y)&&q;if(X=y.g=u,q=li(X,A,!0,y)&&q,q=li(X,A,!1,y)&&q,E)for(de=0;de<E.length;de++)X=y.g=E[de],q=li(X,A,!1,y)&&q}Xe.prototype.N=function(){if(Xe.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const E=u.g[y];for(let A=0;A<E.length;A++)_e(E[A]);delete u.g[y],u.h--}}this.G=null},Xe.prototype.J=function(u,y,E,A){return this.i.add(String(u),y,!1,E,A)},Xe.prototype.K=function(u,y,E,A){return this.i.add(String(u),y,!0,E,A)};function li(u,y,E,A){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let X=0;X<y.length;++X){const de=y[X];if(de&&!de.da&&de.capture==E){const ke=de.listener,It=de.ha||de.src;de.fa&&ue(u.i,de),q=ke.call(It,A)!==!1&&q}}return q&&!A.defaultPrevented}function zr(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(u,y||0)}function Ca(u){u.g=zr(()=>{u.g=null,u.i&&(u.i=!1,Ca(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Jt extends D{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ca(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ni(u){D.call(this),this.h=u,this.g={}}S(Ni,D);var Br=[];function is(u){Ue(u.g,function(y,E){this.g.hasOwnProperty(E)&&Mt(y)},u),u.g={}}Ni.prototype.N=function(){Ni.Z.N.call(this),is(this)},Ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ci=h.JSON.stringify,Vs=h.JSON.parse,Na=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Ia(){}function Da(){}var kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){x.call(this,"d")}S(Gt,x);function bn(){x.call(this,"c")}S(bn,x);var ot={},xa=null;function Ii(){return xa=xa||new Xe}ot.Ia="serverreachability";function qr(u){x.call(this,ot.Ia,u)}S(qr,x);function Zt(u){const y=Ii();We(y,new qr(y))}ot.STAT_EVENT="statevent";function Di(u,y){x.call(this,ot.STAT_EVENT,u),this.stat=y}S(Di,x);function Q(u){const y=Ii();We(y,new Di(y,u))}ot.Ja="timingevent";function ye(u,y){x.call(this,ot.Ja,u),this.size=y}S(ye,x);function qe(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},y)}function Oe(){this.g=!0}Oe.prototype.ua=function(){this.g=!1};function $t(u,y,E,A,q,X){u.info(function(){if(u.g)if(X){var de="",ke=X.split("&");for(let it=0;it<ke.length;it++){var It=ke[it].split("=");if(It.length>1){const Tt=It[0];It=It[1];const Xn=Tt.split("_");de=Xn.length>=2&&Xn[1]=="type"?de+(Tt+"="+It+"&"):de+(Tt+"=redacted&")}}}else de=null;else de=X;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+y+`
`+E+`
`+de})}function en(u,y,E,A,q,X,de){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+y+`
`+E+`
`+X+" "+de})}function Nt(u,y,E,A){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Oa(u,E)+(A?" "+A:"")})}function xi(u,y){u.info(function(){return"TIMEOUT: "+y})}Oe.prototype.info=function(){};function Oa(u,y){if(!u.g)return y;if(!y)return null;try{const X=JSON.parse(y);if(X){for(u=0;u<X.length;u++)if(Array.isArray(X[u])){var E=X[u];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let de=1;de<A.length;de++)A[de]=""}}}}return ci(X)}catch{return y}}var ss={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},et={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ui;function hi(){}S(hi,Ia),hi.prototype.g=function(){return new XMLHttpRequest},ui=new hi;function rs(u){return encodeURIComponent(String(u))}function Uc(u){var y=1;u=u.split(":");const E=[];for(;y>0&&u.length;)E.push(u.shift()),y--;return u.length&&E.push(u.join(":")),E}function di(u,y,E,A){this.j=u,this.i=y,this.l=E,this.S=A||1,this.V=new Ni(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fi}function fi(){this.i=null,this.g="",this.h=!1}var kt={},tn={};function Oi(u,y,E){u.M=1,u.A=Hr(Vt(y)),u.u=E,u.R=!0,Ma(u,null)}function Ma(u,y){u.F=Date.now(),Mi(u),u.B=Vt(u.A);var E=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),La(E.i,"t",A),u.C=0,E=u.j.L,u.h=new fi,u.g=eu(u.j,E?y:null,!u.u),u.P>0&&(u.O=new Jt(v(u.Y,u,u.g),u.P)),y=u.V,E=u.g,A=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(Br[0]=q.toString()),q=Br);for(let X=0;X<q.length;X++){const de=Me(E,q[X],A||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=u.J?V(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),Zt(),$t(u.i,u.v,u.B,u.l,u.S,u.u)}di.prototype.ba=function(u){u=u.target;const y=this.O;y&&gi(u)==3?y.j():this.Y(u)},di.prototype.Y=function(u){try{if(u==this.g)e:{const ke=gi(this.g),It=this.g.ya(),it=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||on(this.g)))){this.K||ke!=4||It==7||(It==8||it<=0?Zt(3):Zt(2)),ki(this);var y=this.g.ca();this.X=y;var E=vd(this);if(this.o=y==200,en(this.i,this.v,this.B,this.l,this.S,ke,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var X=A;break t}}X=null}if(u=X)Nt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ji(this,u);else{this.o=!1,this.m=3,Q(12),jn(this),Yn(this);break e}}if(this.R){u=!0;let Tt;for(;!this.K&&this.C<E.length;)if(Tt=Bc(this,E),Tt==tn){ke==4&&(this.m=4,Q(14),u=!1),Nt(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==kt){this.m=4,Q(15),Nt(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else Nt(this.i,this.l,Tt,null),ji(this,Tt);if(zc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||E.length!=0||this.h.h||(this.m=1,Q(16),u=!1),this.o=this.o&&u,!u)Nt(this.i,this.l,E,"[Invalid Chunked Response]"),jn(this),Yn(this);else if(E.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),dl(de),de.P=!0,Q(11))}}else Nt(this.i,this.l,E,null),ji(this,E);ke==4&&jn(this),this.o&&!this.K&&(ke==4?Xc(this.j,this):(this.o=!1,Mi(this)))}else os(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Q(12)):(this.m=0,Q(13)),jn(this),Yn(this)}}}catch{}};function vd(u){if(!zc(u))return u.g.la();const y=on(u.g);if(y==="")return"";let E="";const A=y.length,q=gi(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return jn(u),Yn(u),"";u.h.i=new h.TextDecoder}for(let X=0;X<A;X++)u.h.h=!0,E+=u.h.i.decode(y[X],{stream:!(q&&X==A-1)});return y.length=0,u.h.g+=E,u.C=0,u.h.g}function zc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Bc(u,y){var E=u.C,A=y.indexOf(`
`,E);return A==-1?tn:(E=Number(y.substring(E,A)),isNaN(E)?kt:(A+=1,A+E>y.length?tn:(y=y.slice(A,A+E),u.C=A+E,y)))}di.prototype.cancel=function(){this.K=!0,jn(this)};function Mi(u){u.T=Date.now()+u.H,ka(u,u.H)}function ka(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=qe(v(u.aa,u),y)}function ki(u){u.D&&(h.clearTimeout(u.D),u.D=null)}di.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(xi(this.i,this.B),this.M!=2&&(Zt(),Q(17)),jn(this),this.m=2,Yn(this)):ka(this,this.T-u)};function Yn(u){u.j.I==0||u.K||Xc(u.j,u)}function jn(u){ki(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,is(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function ji(u,y){try{var E=u.j;if(E.I!=0&&(E.g==u||Li(E.h,u))){if(!u.L&&Li(E.h,u)&&E.I==3){try{var A=E.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)qa(E),Fs(E);else break e;Xr(E),Q(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=qe(v(E.Va,E),6e3));Vi(E.h)<=1&&E.ta&&(E.ta=void 0)}else Hi(E,11)}else if((u.L||E.g==u)&&qa(E),!I(y))for(q=E.Ba.g.parse(y),y=0;y<q.length;y++){let it=q[y];const Tt=it[0];if(!(Tt<=E.K))if(E.K=Tt,it=it[1],E.I==2)if(it[0]=="c"){E.M=it[1],E.ba=it[2];const Xn=it[3];Xn!=null&&(E.ka=Xn,E.j.info("VER="+E.ka));const Fi=it[4];Fi!=null&&(E.za=Fi,E.j.info("SVER="+E.za));const yi=it[5];yi!=null&&typeof yi=="number"&&yi>0&&(A=1.5*yi,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const vi=u.g;if(vi){const Wr=vi.g?vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wr){var X=A.h;X.g||Wr.indexOf("spdy")==-1&&Wr.indexOf("quic")==-1&&Wr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(el(X,X.h),X.h=null))}if(A.G){const Ha=vi.g?vi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ha&&(A.wa=Ha,lt(A.J,A.G,Ha))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var de=u;if(A.na=Zc(A,A.L?A.ba:null,A.W),de.L){tl(A.h,de);var ke=de,It=A.O;It&&(ke.H=It),ke.D&&(ki(ke),Mi(ke)),A.g=de}else Kc(A);E.i.length>0&&qi(E)}else it[0]!="stop"&&it[0]!="close"||Hi(E,7);else E.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Hi(E,7):ul(E):it[0]!="noop"&&E.l&&E.l.qa(it),E.A=0)}}Zt(4)}catch{}}var jt=class{constructor(u,y){this.g=u,this.map=y}};function Jo(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Vi(u){return u.h?1:u.g?u.g.size:0}function Li(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function el(u,y){u.g?u.g.add(y):u.h=y}function tl(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Jo.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const E of u.g.values())y=y.concat(E.G);return y}return P(u.i)}var qc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ja(u,y){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const A=u[E].indexOf("=");let q,X=null;A>=0?(q=u[E].substring(0,A),X=u[E].substring(A+1)):q=u[E],y(q,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Vn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof Vn?(this.l=u.l,nn(this,u.j),this.o=u.o,this.g=u.g,Ls(this,u.u),this.h=u.h,il(this,$c(u.i)),this.m=u.m):u&&(y=String(u).match(qc))?(this.l=!1,nn(this,y[1]||"",!0),this.o=Pi(y[2]||""),this.g=Pi(y[3]||"",!0),Ls(this,y[4]),this.h=Pi(y[5]||"",!0),il(this,y[6]||"",!0),this.m=Pi(y[7]||"")):(this.l=!1,this.i=new Us(null,this.l))}Vn.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(Fr(y,Va,!0),":");var E=this.g;return(E||y=="file")&&(u.push("//"),(y=this.o)&&u.push(Fr(y,Va,!0),"@"),u.push(rs(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(Fr(E,E.charAt(0)=="/"?sl:Hc,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",Fr(E,Fc)),u.join("")},Vn.prototype.resolve=function(u){const y=Vt(this);let E=!!u.j;E?nn(y,u.j):E=!!u.o,E?y.o=u.o:E=!!u.g,E?y.g=u.g:E=u.u!=null;var A=u.h;if(E)Ls(y,u.u);else if(E=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=y.h.lastIndexOf("/");q!=-1&&(A=y.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const X=[];for(let de=0;de<q.length;){const ke=q[de++];ke=="."?A&&de==q.length&&X.push(""):ke==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),A&&de==q.length&&X.push("")):(X.push(ke),A=!0)}A=X.join("/")}else A=q}return E?y.h=A:E=u.i.toString()!=="",E?il(y,$c(u.i)):E=!!u.m,E&&(y.m=u.m),y};function Vt(u){return new Vn(u)}function nn(u,y,E){u.j=E?Pi(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Ls(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function il(u,y,E){y instanceof Us?(u.i=y,Pa(u.i,u.l)):(E||(y=Fr(y,Ps)),u.i=new Us(y,u.l))}function lt(u,y,E){u.i.set(y,E)}function Hr(u){return lt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Pi(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Fr(u,y,E){return typeof u=="string"?(u=encodeURI(u).replace(y,wn),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Va=/[#\/\?@]/g,Hc=/[#\?:]/g,sl=/[#\?]/g,Ps=/[#\?@]/g,Fc=/#/g;function Us(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function An(u){u.g||(u.g=new Map,u.h=0,u.i&&ja(u.i,function(y,E){u.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}s=Us.prototype,s.add=function(u,y){An(this),this.i=null,u=zs(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(y),this.h+=1,this};function Gc(u,y){An(u),y=zs(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function rl(u,y){return An(u),y=zs(u,y),u.g.has(y)}s.forEach=function(u,y){An(this),this.g.forEach(function(E,A){E.forEach(function(q){u.call(y,q,A,this)},this)},this)};function al(u,y){An(u);let E=[];if(typeof y=="string")rl(u,y)&&(E=E.concat(u.g.get(zs(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)E=E.concat(u[y]);return E}s.set=function(u,y){return An(this),this.i=null,u=zs(this,u),rl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},s.get=function(u,y){return u?(u=al(this,u),u.length>0?String(u[0]):y):y};function La(u,y,E){Gc(u,y),E.length>0&&(u.i=null,u.g.set(zs(u,y),P(E)),u.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var E=y[A];const q=rs(E);E=al(this,E);for(let X=0;X<E.length;X++){let de=q;E[X]!==""&&(de+="="+rs(E[X])),u.push(de)}}return this.i=u.join("&")};function $c(u){const y=new Us;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function zs(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Pa(u,y){y&&!u.j&&(An(u),u.i=null,u.g.forEach(function(E,A){const q=A.toLowerCase();A!=q&&(Gc(this,A),La(this,q,E))},u)),u.j=y}function mi(u,y){const E=new Oe;if(h.Image){const A=new Image;A.onload=T(Kn,E,"TestLoadImage: loaded",!0,y,A),A.onerror=T(Kn,E,"TestLoadImage: error",!1,y,A),A.onabort=T(Kn,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=T(Kn,E,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else y(!1)}function ol(u,y){const E=new Oe,A=new AbortController,q=setTimeout(()=>{A.abort(),Kn(E,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:A.signal}).then(X=>{clearTimeout(q),X.ok?Kn(E,"TestPingServer: ok",!0,y):Kn(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Kn(E,"TestPingServer: error",!1,y)})}function Kn(u,y,E,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(E)}catch{}}function Bs(){this.g=new Na}function Ui(u){this.i=u.Sb||null,this.h=u.ab||!1}S(Ui,Ia),Ui.prototype.g=function(){return new Gr(this.i,this.h)};function Gr(u,y){Xe.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Gr,Xe),s=Gr.prototype,s.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,pi(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qs(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ua(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ua(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?qs(this):pi(this),this.readyState==3&&Ua(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,qs(this))},s.Na=function(u){this.g&&(this.response=u,qs(this))},s.ga=function(){this.g&&qs(this)};function qs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,pi(u)}s.setRequestHeader=function(u,y){this.A.append(u,y)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=y.next();return u.join(`\r
`)};function pi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Gr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Qn(u){let y="";return Ue(u,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function $r(u,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=Qn(E),typeof u=="string"?E!=null&&rs(E):lt(u,y,E))}function ht(u){Xe.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(ht,Xe);var zi=/^https?$/i,ll=["POST","PUT"];s=ht.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ui.g(),this.g.onreadystatechange=w(v(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(X){Yr(this,X);return}if(u=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)E.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const X of A.keys())E.set(X,A.get(X));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),q=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(ll,y,void 0)>=0)||A||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of E)this.g.setRequestHeader(X,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(X){Yr(this,X)}};function Yr(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,cl(u),as(u)}function cl(u){u.A||(u.A=!0,We(u,"complete"),We(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,We(this,"complete"),We(this,"abort"),as(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),as(this,!0)),ht.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},s.Xa=function(){Kr(this)};function Kr(u){if(u.h&&typeof c<"u"){if(u.v&&gi(u)==4)setTimeout(u.Ca.bind(u),0);else if(We(u,"readystatechange"),gi(u)==4){u.h=!1;try{const X=u.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=X===0){let de=String(u.D).match(qc)[1]||null;!de&&h.self&&h.self.location&&(de=h.self.location.protocol.slice(0,-1)),A=!zi.test(de?de.toLowerCase():"")}E=A}if(E)We(u,"complete"),We(u,"success");else{u.o=6;try{var q=gi(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",cl(u)}}finally{as(u)}}}}function as(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,y||We(u,"ready");try{E.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function gi(u){return u.g?u.g.readyState:0}s.ca=function(){try{return gi(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),Vs(y)}};function on(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function os(u){const y={};u=(u.g&&gi(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(I(u[A]))continue;var E=Uc(u[A]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=y[q]||[];y[q]=X,X.push(E)}Be(y,function(A){return A.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bi(u,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||y}function Hs(u){this.za=0,this.i=[],this.j=new Oe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bi("baseRetryDelayMs",5e3,u),this.Za=Bi("retryDelaySeedMs",1e4,u),this.Ta=Bi("forwardChannelMaxRetries",2,u),this.va=Bi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Jo(u&&u.concurrentRequestLimit),this.Ba=new Bs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Hs.prototype,s.ka=8,s.I=1,s.connect=function(u,y,E,A){Q(0),this.W=u,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Zc(this,null,this.W),qi(this)};function ul(u){if(za(u),u.I==3){var y=u.V++,E=Vt(u.J);if(lt(E,"SID",u.M),lt(E,"RID",y),lt(E,"TYPE","terminate"),Qr(u,E),y=new di(u,u.j,y),y.M=2,y.A=Hr(Vt(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&h.Image&&(new Image().src=y.A,E=!0),E||(y.g=eu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Mi(y)}Jc(u)}function Fs(u){u.g&&(dl(u),u.g.cancel(),u.g=null)}function za(u){Fs(u),u.v&&(h.clearTimeout(u.v),u.v=null),qa(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function qi(u){if(!Zo(u.h)&&!u.m){u.m=!0;var y=u.Ea;$||C(),te||($(),te=!0),N.add(y,u),u.D=0}}function Ba(u,y){return Vi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=qe(v(u.Ea,u,y),Wc(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new di(this,this.j,u);let X=this.o;if(this.U&&(X?(X=V(X),Y(X,this.U)):X=this.U),this.u!==null||this.R||(q.J=X,X=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Yc(this,q,y),E=Vt(this.J),lt(E,"RID",u),lt(E,"CVER",22),this.G&&lt(E,"X-HTTP-Session-Id",this.G),Qr(this,E),X&&(this.R?y="headers="+rs(Qn(X))+"&"+y:this.u&&$r(E,this.u,X)),el(this.h,q),this.Ra&&lt(E,"TYPE","init"),this.S?(lt(E,"$req",y),lt(E,"SID","null"),q.U=!0,Oi(q,E,null)):Oi(q,E,y),this.I=2}}else this.I==3&&(u?hl(this,u):this.i.length==0||Zo(this.h)||hl(this))};function hl(u,y){var E;y?E=y.l:E=u.V++;const A=Vt(u.J);lt(A,"SID",u.M),lt(A,"RID",E),lt(A,"AID",u.K),Qr(u,A),u.u&&u.o&&$r(A,u.u,u.o),E=new di(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),y&&(u.i=y.G.concat(u.i)),y=Yc(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),el(u.h,E),Oi(E,A,y)}function Qr(u,y){u.H&&Ue(u.H,function(E,A){lt(y,A,E)}),u.l&&Ue({},function(E,A){lt(y,A,E)})}function Yc(u,y,E){E=Math.min(u.i.length,E);const A=u.l?v(u.l.Ka,u.l,u):null;e:{var q=u.i;let ke=-1;for(;;){const It=["count="+E];ke==-1?E>0?(ke=q[0].g,It.push("ofs="+ke)):ke=0:It.push("ofs="+ke);let it=!0;for(let Tt=0;Tt<E;Tt++){var X=q[Tt].g;const Xn=q[Tt].map;if(X-=ke,X<0)ke=Math.max(0,q[Tt].g-100),it=!1;else try{X="req"+X+"_"||"";try{var de=Xn instanceof Map?Xn:Object.entries(Xn);for(const[Fi,yi]of de){let vi=yi;p(yi)&&(vi=ci(yi)),It.push(X+Fi+"="+encodeURIComponent(vi))}}catch(Fi){throw It.push(X+"type="+encodeURIComponent("_badmap")),Fi}}catch{A&&A(Xn)}}if(it){de=It.join("&");break e}}de=void 0}return u=u.i.splice(0,E),y.G=u,de}function Kc(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;$||C(),te||($(),te=!0),N.add(y,u),u.A=0}}function Xr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=qe(v(u.Da,u),Wc(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Qc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=qe(v(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Q(10),Fs(this),Qc(this))};function dl(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Qc(u){u.g=new di(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=Vt(u.na);lt(y,"RID","rpc"),lt(y,"SID",u.M),lt(y,"AID",u.K),lt(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&lt(y,"TO",u.ia),lt(y,"TYPE","xmlhttp"),Qr(u,y),u.u&&u.o&&$r(y,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=Hr(Vt(y)),E.u=null,E.R=!0,Ma(E,u)}s.Va=function(){this.C!=null&&(this.C=null,Fs(this),Xr(this),Q(19))};function qa(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Xc(u,y){var E=null;if(u.g==y){qa(u),dl(u),u.g=null;var A=2}else if(Li(u.h,y))E=y.G,tl(u.h,y),A=1;else return;if(u.I!=0){if(y.o)if(A==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var q=u.D;A=Ii(),We(A,new ye(A,E)),qi(u)}else Kc(u);else if(q=y.m,q==3||q==0&&y.X>0||!(A==1&&Ba(u,y)||A==2&&Xr(u)))switch(E&&E.length>0&&(y=u.h,y.i=y.i.concat(E)),q){case 1:Hi(u,5);break;case 4:Hi(u,10);break;case 3:Hi(u,6);break;default:Hi(u,2)}}}function Wc(u,y){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*y}function Hi(u,y){if(u.j.info("Error code "+y),y==2){var E=v(u.bb,u),A=u.Ua;const q=!A;A=new Vn(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||nn(A,"https"),Hr(A),q?mi(A.toString(),E):ol(A.toString(),E)}else Q(2);u.I=0,u.l&&u.l.pa(y),Jc(u),za(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Q(2)):(this.j.info("Failed to ping google.com"),Q(1))};function Jc(u){if(u.I=0,u.ja=[],u.l){const y=nl(u.h);(y.length!=0||u.i.length!=0)&&(L(u.ja,y),L(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function Zc(u,y,E){var A=E instanceof Vn?Vt(E):new Vn(E);if(A.g!="")y&&(A.g=y+"."+A.g),Ls(A,A.u);else{var q=h.location;A=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const X=new Vn(null);A&&nn(X,A),y&&(X.g=y),q&&Ls(X,q),E&&(X.h=E),A=X}return E=u.G,y=u.wa,E&&y&&lt(A,E,y),lt(A,"VER",u.ka),Qr(u,A),A}function eu(u,y,E){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new ht(new Ui({ab:E})):new ht(u.ma),y.Fa(u.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function tu(){}s=tu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Gs(){}Gs.prototype.g=function(u,y){return new Tn(u,y)};function Tn(u,y){Xe.call(this),this.g=new Hs(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!I(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new ls(this)}S(Tn,Xe),Tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){ul(this.g)},Tn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=ci(u),u=E);y.i.push(new jt(y.Ya++,u)),y.I==3&&qi(y)},Tn.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,Tn.Z.N.call(this)};function nu(u){Gt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const E in y){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}S(nu,Gt);function iu(){bn.call(this),this.status=1}S(iu,bn);function ls(u){this.g=u}S(ls,tu),ls.prototype.ra=function(){We(this.g,"a")},ls.prototype.qa=function(u){We(this.g,new nu(u))},ls.prototype.pa=function(u){We(this.g,new iu)},ls.prototype.oa=function(){We(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,X0=function(){return new Gs},Q0=function(){return Ii()},K0=ot,Gm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ss.NO_ERROR=0,ss.TIMEOUT=8,ss.HTTP_ERROR=6,Sh=ss,et.COMPLETE="complete",Y0=et,Da.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",Xe.prototype.listen=Xe.prototype.J,nc=Da,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,$0=ht}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");let $o="12.8.0";function qI(s){$o=s}const _a=new Sp("@firebase/firestore");function Eo(){return _a.logLevel}function ge(s,...e){if(_a.logLevel<=Ye.DEBUG){const n=e.map(jp);_a.debug(`Firestore (${$o}): ${s}`,...n)}}function xs(s,...e){if(_a.logLevel<=Ye.ERROR){const n=e.map(jp);_a.error(`Firestore (${$o}): ${s}`,...n)}}function ko(s,...e){if(_a.logLevel<=Ye.WARN){const n=e.map(jp);_a.warn(`Firestore (${$o}): ${s}`,...n)}}function jp(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Ne(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,W0(s,r,n)}function W0(s,e,n){let r=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xs(r),new Error(r)}function rt(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||W0(e,o,r)}function xe(s,e){return s}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends js{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class J0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(vn.UNAUTHENTICATED)))}shutdown(){}}class FI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class GI{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Rr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Rr)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new J0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class $I{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class YI{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $I(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class NE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ri(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rt(this.o===void 0,3512);const r=c=>{c.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,ge("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new NE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new NE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function QI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}class Vp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=QI(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Ke(s,e){return s<e?-1:s>e?1:0}function $m(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),c=e.charAt(r);if(o!==c)return Im(o)===Im(c)?Ke(o,c):Im(o)?1:-1}return Ke(s.length,e.length)}const XI=55296,WI=57343;function Im(s){const e=s.charCodeAt(0);return e>=XI&&e<=WI}function jo(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}const IE="__name__";class Qi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qi?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=Qi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ke(e.length,n.length)}static compareSegments(e,n){const r=Qi.isNumericId(e),o=Qi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Qi.extractNumericId(e).compare(Qi.extractNumericId(n)):$m(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class yt extends Qi{construct(e,n,r){return new yt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new yt(n)}static emptyPath(){return new yt([])}}const JI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Qi{construct(e,n,r){return new fn(e,n,r)}static isValidIdentifier(e){return JI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IE}static keyField(){return new fn([IE])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new me(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new me(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new me(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(r+=p,o++):(c(),o++)}if(c(),h)throw new me(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}class be{constructor(e){this.path=e}static fromPath(e){return new be(yt.fromString(e))}static fromName(e){return new be(yt.fromString(e).popFirst(5))}static empty(){return new be(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new yt(e.slice()))}}function Z0(s,e,n){if(!n)throw new me(ae.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function ZI(s,e,n,r){if(e===!0&&r===!0)throw new me(ae.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function DE(s){if(!be.isDocumentKey(s))throw new me(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function xE(s){if(be.isDocumentKey(s))throw new me(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function eS(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function id(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ne(12329,{type:typeof s})}function Ea(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new me(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=id(s);throw new me(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function Ht(s,e){const n={typeString:s};return e&&(n.value=e),n}function Oc(s,e){if(!eS(s))throw new me(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const h=s[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new me(ae.INVALID_ARGUMENT,n);return!0}const OE=-62135596800,ME=1e6;class Pe{static now(){return Pe.fromMillis(Date.now())}static fromDate(e){return Pe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ME);return new Pe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<OE)throw new me(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ME}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,Pe._jsonSchema))return new Pe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-OE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:Ht("string",Pe._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Pe(0,0))}static max(){return new Ie(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const pc=-1;function eD(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(r===1e9?new Pe(n+1,0):new Pe(n,r));return new Dr(o,be.empty(),e)}function tD(s){return new Dr(s.readTime,s.key,pc)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(Ie.min(),be.empty(),pc)}static max(){return new Dr(Ie.max(),be.empty(),pc)}}function nD(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(s.documentKey,e.documentKey),n!==0?n:Ke(s.largestBatchId,e.largestBatchId))}const iD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Yo(s){if(s.code!==ae.FAILED_PRECONDITION||s.message!==iD)throw s;ge("LocalStore","Unexpectedly lost primary lease")}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,r)=>{n(e)}))}static reject(e){return new oe(((n,r)=>{r(e)}))}static waitFor(e){return new oe(((n,r)=>{let o=0,c=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++c,h&&c===o&&n()}),(g=>r(g)))})),h=!0,c===o&&n()}))}static or(e){let n=oe.resolve(!1);for(const r of e)n=n.next((o=>o?oe.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new oe(((r,o)=>{const c=e.length,h=new Array(c);let p=0;for(let g=0;g<c;g++){const v=g;n(e[v]).next((T=>{h[v]=T,++p,p===c&&r(h)}),(T=>o(T)))}}))}static doWhile(e,n){return new oe(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function rD(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ko(s){return s.name==="IndexedDbTransactionError"}class sd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sd.ce=-1;const Lp=-1;function rd(s){return s==null}function Lh(s){return s===0&&1/s==-1/0}function aD(s){return typeof s=="number"&&Number.isInteger(s)&&!Lh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const tS="";function oD(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=kE(e)),e=lD(s.get(n),e);return kE(e)}function lD(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const c=s.charAt(o);switch(c){case"\0":n+="";break;case tS:n+="";break;default:n+=c}}return n}function kE(s){return s+tS+""}function jE(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Pr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function nS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class At{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??dn.RED,this.left=o??dn.EMPTY,this.right=c??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new dn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return dn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new VE(this.data.getIterator())}getIteratorFrom(e){return new VE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class VE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Gn{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new Qt(fn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class iS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new iS("Invalid base64 string: "+c):c}})(e);return new pn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const cD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(s){if(rt(!!s,39018),typeof s=="string"){let e=0;const n=cD.exec(s);if(rt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ot(s.seconds),nanos:Ot(s.nanos)}}function Ot(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Or(s){return typeof s=="string"?pn.fromBase64String(s):pn.fromUint8Array(s)}const sS="server_timestamp",rS="__type__",aS="__previous_value__",oS="__local_write_time__";function Pp(s){return(s?.mapValue?.fields||{})[rS]?.stringValue===sS}function ad(s){const e=s.mapValue.fields[aS];return Pp(e)?ad(e):e}function gc(s){const e=xr(s.mapValue.fields[oS].timestampValue);return new Pe(e.seconds,e.nanos)}class uD{constructor(e,n,r,o,c,h,p,g,v,T,S){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=T,this.apiKey=S}}const Ph="(default)";class yc{constructor(e,n){this.projectId=e,this.database=n||Ph}static empty(){return new yc("","")}get isDefaultDatabase(){return this.database===Ph}isEqual(e){return e instanceof yc&&e.projectId===this.projectId&&e.database===this.database}}function hD(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new me(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yc(s.options.projectId,e)}const lS="__type__",dD="__max__",hh={mapValue:{}},cS="__vector__",Uh="value";function Mr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Pp(s)?4:mD(s)?9007199254740991:fD(s)?10:11:Ne(28295,{value:s})}function ts(s,e){if(s===e)return!0;const n=Mr(s);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return gc(s).isEqual(gc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=xr(o.timestampValue),p=xr(c.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,c){return Or(o.bytesValue).isEqual(Or(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,c){return Ot(o.geoPointValue.latitude)===Ot(c.geoPointValue.latitude)&&Ot(o.geoPointValue.longitude)===Ot(c.geoPointValue.longitude)})(s,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Ot(o.integerValue)===Ot(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=Ot(o.doubleValue),p=Ot(c.doubleValue);return h===p?Lh(h)===Lh(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return jo(s.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},p=c.mapValue.fields||{};if(jE(h)!==jE(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!ts(h[g],p[g])))return!1;return!0})(s,e);default:return Ne(52216,{left:s})}}function vc(s,e){return(s.values||[]).find((n=>ts(n,e)))!==void 0}function Vo(s,e){if(s===e)return 0;const n=Mr(s),r=Mr(e);if(n!==r)return Ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(s.booleanValue,e.booleanValue);case 2:return(function(c,h){const p=Ot(c.integerValue||c.doubleValue),g=Ot(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return LE(s.timestampValue,e.timestampValue);case 4:return LE(gc(s),gc(e));case 5:return $m(s.stringValue,e.stringValue);case 6:return(function(c,h){const p=Or(c),g=Or(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(c,h){const p=c.split("/"),g=h.split("/");for(let v=0;v<p.length&&v<g.length;v++){const T=Ke(p[v],g[v]);if(T!==0)return T}return Ke(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,h){const p=Ke(Ot(c.latitude),Ot(h.latitude));return p!==0?p:Ke(Ot(c.longitude),Ot(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return PE(s.arrayValue,e.arrayValue);case 10:return(function(c,h){const p=c.fields||{},g=h.fields||{},v=p[Uh]?.arrayValue,T=g[Uh]?.arrayValue,S=Ke(v?.values?.length||0,T?.values?.length||0);return S!==0?S:PE(v,T)})(s.mapValue,e.mapValue);case 11:return(function(c,h){if(c===hh.mapValue&&h===hh.mapValue)return 0;if(c===hh.mapValue)return 1;if(h===hh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),v=h.fields||{},T=Object.keys(v);g.sort(),T.sort();for(let S=0;S<g.length&&S<T.length;++S){const w=$m(g[S],T[S]);if(w!==0)return w;const P=Vo(p[g[S]],v[T[S]]);if(P!==0)return P}return Ke(g.length,T.length)})(s.mapValue,e.mapValue);default:throw Ne(23264,{he:n})}}function LE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ke(s,e);const n=xr(s),r=xr(e),o=Ke(n.seconds,r.seconds);return o!==0?o:Ke(n.nanos,r.nanos)}function PE(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=Vo(n[o],r[o]);if(c)return c}return Ke(n.length,r.length)}function Lo(s){return Ym(s)}function Ym(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=xr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Or(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return be.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Ym(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${Ym(n.fields[h])}`;return o+"}"})(s.mapValue):Ne(61005,{value:s})}function bh(s){switch(Mr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ad(s);return e?16+bh(e):16;case 5:return 2*s.stringValue.length;case 6:return Or(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+bh(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Pr(r.fields,((c,h)=>{o+=c.length+bh(h)})),o})(s.mapValue);default:throw Ne(13486,{value:s})}}function UE(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Km(s){return!!s&&"integerValue"in s}function Up(s){return!!s&&"arrayValue"in s}function zE(s){return!!s&&"nullValue"in s}function BE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function wh(s){return!!s&&"mapValue"in s}function fD(s){return(s?.mapValue?.fields||{})[lS]?.stringValue===cS}function oc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Pr(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=oc(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oc(s.arrayValue.values[n]);return e}return{...s}}function mD(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===dD}class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(n)}setAll(e){let n=fn.emptyPath(),r={},o=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}h?r[p.lastSegment()]=oc(h):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());wh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];wh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Pr(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new On(oc(this.value))}}function uS(s){const e=[];return Pr(s.fields,((n,r)=>{const o=new fn([n]);if(wh(r)){const c=uS(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new Gn(e)}class _n{constructor(e,n,r,o,c,h,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=p}static newInvalidDocument(e){return new _n(e,0,Ie.min(),Ie.min(),Ie.min(),On.empty(),0)}static newFoundDocument(e,n,r,o){return new _n(e,1,n,Ie.min(),r,o,0)}static newNoDocument(e,n){return new _n(e,2,n,Ie.min(),Ie.min(),On.empty(),0)}static newUnknownDocument(e,n){return new _n(e,3,n,Ie.min(),Ie.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zh{constructor(e,n){this.position=e,this.inclusive=n}}function qE(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const c=e[o],h=s.position[o];if(c.field.isKeyField()?r=be.comparator(be.fromName(h.referenceValue),n.key):r=Vo(h,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function HE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ts(s.position[n],e.position[n]))return!1;return!0}class _c{constructor(e,n="asc"){this.field=e,this.dir=n}}function pD(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class hS{}class qt extends hS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yD(e,n,r):n==="array-contains"?new ED(e,r):n==="in"?new TD(e,r):n==="not-in"?new SD(e,r):n==="array-contains-any"?new bD(e,r):new qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vD(e,r):new _D(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vo(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(Vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ci extends hS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ci(e,n)}matches(e){return dS(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dS(s){return s.op==="and"}function fS(s){return gD(s)&&dS(s)}function gD(s){for(const e of s.filters)if(e instanceof Ci)return!1;return!0}function Qm(s){if(s instanceof qt)return s.field.canonicalString()+s.op.toString()+Lo(s.value);if(fS(s))return s.filters.map((e=>Qm(e))).join(",");{const e=s.filters.map((n=>Qm(n))).join(",");return`${s.op}(${e})`}}function mS(s,e){return s instanceof qt?(function(r,o){return o instanceof qt&&r.op===o.op&&r.field.isEqual(o.field)&&ts(r.value,o.value)})(s,e):s instanceof Ci?(function(r,o){return o instanceof Ci&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,h,p)=>c&&mS(h,o.filters[p])),!0):!1})(s,e):void Ne(19439)}function pS(s){return s instanceof qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Lo(n.value)}`})(s):s instanceof Ci?(function(n){return n.op.toString()+" {"+n.getFilters().map(pS).join(" ,")+"}"})(s):"Filter"}class yD extends qt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class vD extends qt{constructor(e,n){super(e,"in",n),this.keys=gS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class _D extends qt{constructor(e,n){super(e,"not-in",n),this.keys=gS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function gS(s,e){return(e.arrayValue?.values||[]).map((n=>be.fromName(n.referenceValue)))}class ED extends qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Up(n)&&vc(n.arrayValue,this.value)}}class TD extends qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vc(this.value.arrayValue,n)}}class SD extends qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vc(this.value.arrayValue,n)}}class bD extends qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Up(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>vc(this.value.arrayValue,r)))}}class wD{constructor(e,n=null,r=[],o=[],c=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=p,this.Te=null}}function FE(s,e=null,n=[],r=[],o=null,c=null,h=null){return new wD(s,e,n,r,o,c,h)}function zp(s){const e=xe(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Qm(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),rd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Lo(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Lo(r))).join(",")),e.Te=n}return e.Te}function Bp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!pD(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!mS(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!HE(s.startAt,e.startAt)&&HE(s.endAt,e.endAt)}function Xm(s){return be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Qo{constructor(e,n=null,r=[],o=[],c=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function AD(s,e,n,r,o,c,h,p){return new Qo(s,e,n,r,o,c,h,p)}function yS(s){return new Qo(s)}function GE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function RD(s){return be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function vS(s){return s.collectionGroup!==null}function lc(s){const e=xe(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Qt(fn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new _c(c,r))})),n.has(fn.keyField().canonicalString())||e.Ie.push(new _c(fn.keyField(),r))}return e.Ie}function Ji(s){const e=xe(s);return e.Ee||(e.Ee=CD(e,lc(s))),e.Ee}function CD(s,e){if(s.limitType==="F")return FE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new _c(o.field,c)}));const n=s.endAt?new zh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new zh(s.startAt.position,s.startAt.inclusive):null;return FE(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Wm(s,e){const n=s.filters.concat([e]);return new Qo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function ND(s,e){const n=s.explicitOrderBy.concat([e]);return new Qo(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Jm(s,e,n){return new Qo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function od(s,e){return Bp(Ji(s),Ji(e))&&s.limitType===e.limitType}function _S(s){return`${zp(Ji(s))}|lt:${s.limitType}`}function To(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>pS(o))).join(", ")}]`),rd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Lo(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Lo(o))).join(",")),`Target(${r})`})(Ji(s))}; limitType=${s.limitType})`}function ld(s,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):be.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,o){for(const c of lc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(h,p,g){const v=qE(h,p,g);return h.inclusive?v<=0:v<0})(r.startAt,lc(r),o)||r.endAt&&!(function(h,p,g){const v=qE(h,p,g);return h.inclusive?v>=0:v>0})(r.endAt,lc(r),o))})(s,e)}function ID(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ES(s){return(e,n)=>{let r=!1;for(const o of lc(s)){const c=DD(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function DD(s,e,n){const r=s.field.isKeyField()?be.comparator(e.key,n.key):(function(c,h,p){const g=h.data.field(c),v=p.data.field(c);return g!==null&&v!==null?Vo(g,v):Ne(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ne(19790,{direction:s.dir})}}class wa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Pr(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return nS(this.inner)}size(){return this.innerSize}}const xD=new At(be.comparator);function Os(){return xD}const TS=new At(be.comparator);function ic(...s){let e=TS;for(const n of s)e=e.insert(n.key,n);return e}function SS(s){let e=TS;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function ma(){return cc()}function bS(){return cc()}function cc(){return new wa((s=>s.toString()),((s,e)=>s.isEqual(e)))}const OD=new At(be.comparator),MD=new Qt(be.comparator);function Qe(...s){let e=MD;for(const n of s)e=e.add(n);return e}const kD=new Qt(Ke);function jD(){return kD}function qp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function wS(s){return{integerValue:""+s}}function VD(s,e){return aD(e)?wS(e):qp(s,e)}class cd{constructor(){this._=void 0}}function LD(s,e,n){return s instanceof Bh?(function(o,c){const h={fields:{[rS]:{stringValue:sS},[oS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Pp(c)&&(c=ad(c)),c&&(h.fields[aS]=c),{mapValue:h}})(n,e):s instanceof Ec?RS(s,e):s instanceof Tc?CS(s,e):(function(o,c){const h=AS(o,c),p=$E(h)+$E(o.Ae);return Km(h)&&Km(o.Ae)?wS(p):qp(o.serializer,p)})(s,e)}function PD(s,e,n){return s instanceof Ec?RS(s,e):s instanceof Tc?CS(s,e):n}function AS(s,e){return s instanceof qh?(function(r){return Km(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Bh extends cd{}class Ec extends cd{constructor(e){super(),this.elements=e}}function RS(s,e){const n=NS(e);for(const r of s.elements)n.some((o=>ts(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Tc extends cd{constructor(e){super(),this.elements=e}}function CS(s,e){let n=NS(e);for(const r of s.elements)n=n.filter((o=>!ts(o,r)));return{arrayValue:{values:n}}}class qh extends cd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $E(s){return Ot(s.integerValue||s.doubleValue)}function NS(s){return Up(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function UD(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof Ec&&o instanceof Ec||r instanceof Tc&&o instanceof Tc?jo(r.elements,o.elements,ts):r instanceof qh&&o instanceof qh?ts(r.Ae,o.Ae):r instanceof Bh&&o instanceof Bh})(s.transform,e.transform)}class zD{constructor(e,n){this.version=e,this.transformResults=n}}class bi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bi}static exists(e){return new bi(void 0,e)}static updateTime(e){return new bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ah(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ud{}function IS(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Hp(s.key,bi.none()):new Mc(s.key,s.data,bi.none());{const n=s.data,r=On.empty();let o=new Qt(fn.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new Ur(s.key,r,new Gn(o.toArray()),bi.none())}}function BD(s,e,n){s instanceof Mc?(function(o,c,h){const p=o.value.clone(),g=KE(o.fieldTransforms,c,h.transformResults);p.setAll(g),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Ur?(function(o,c,h){if(!Ah(o.precondition,c))return void c.convertToUnknownDocument(h.version);const p=KE(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(DS(o)),g.setAll(p),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function uc(s,e,n,r){return s instanceof Mc?(function(c,h,p,g){if(!Ah(c.precondition,h))return p;const v=c.value.clone(),T=QE(c.fieldTransforms,g,h);return v.setAll(T),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(s,e,n,r):s instanceof Ur?(function(c,h,p,g){if(!Ah(c.precondition,h))return p;const v=QE(c.fieldTransforms,g,h),T=h.data;return T.setAll(DS(c)),T.setAll(v),h.convertToFoundDocument(h.version,T).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((S=>S.field)))})(s,e,n,r):(function(c,h,p){return Ah(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,n)}function qD(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),c=AS(r.transform,o||null);c!=null&&(n===null&&(n=On.empty()),n.set(r.field,c))}return n||null}function YE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&jo(r,o,((c,h)=>UD(c,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Mc extends ud{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ur extends ud{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function DS(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function KE(s,e,n){const r=new Map;rt(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const c=s[o],h=c.transform,p=e.data.field(c.field);r.set(c.field,PD(h,p,n[o]))}return r}function QE(s,e,n){const r=new Map;for(const o of s){const c=o.transform,h=n.data.field(o.field);r.set(o.field,LD(c,h,e))}return r}class Hp extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HD extends ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class FD{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&BD(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=uc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=uc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=bS();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let p=this.applyToLocalView(h,c.mutatedFields);p=n.has(o.key)?null:p;const g=IS(h,p);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,((n,r)=>YE(n,r)))&&jo(this.baseMutations,e.baseMutations,((n,r)=>YE(n,r)))}}class Fp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return OD})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new Fp(e,n,r,o)}}class GD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class $D{constructor(e,n){this.count=e,this.unchangedNames=n}}var Bt,Ze;function YD(s){switch(s){case ae.OK:return Ne(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ne(15467,{code:s})}}function xS(s){if(s===void 0)return xs("GRPC error has no .code"),ae.UNKNOWN;switch(s){case Bt.OK:return ae.OK;case Bt.CANCELLED:return ae.CANCELLED;case Bt.UNKNOWN:return ae.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return ae.INTERNAL;case Bt.UNAVAILABLE:return ae.UNAVAILABLE;case Bt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Bt.NOT_FOUND:return ae.NOT_FOUND;case Bt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Bt.ABORTED:return ae.ABORTED;case Bt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Bt.DATA_LOSS:return ae.DATA_LOSS;default:return Ne(39323,{code:s})}}(Ze=Bt||(Bt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";function KD(){return new TextEncoder}const QD=new Ar([4294967295,4294967295],0);function XE(s){const e=KD().encode(s),n=new G0;return n.update(e),new Uint8Array(n.digest())}function WE(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ar([n,r],0),new Ar([o,c],0)]}class Gp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sc(`Invalid padding: ${n}`);if(r<0)throw new sc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new sc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ar.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Ar.fromNumber(r)));return o.compare(QD)===1&&(o=new Ar([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=XE(e),[r,o]=WE(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);if(!this.we(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Gp(c,o,n);return r.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=XE(e),[r,o]=WE(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);this.be(h)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hd{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hd(Ie.min(),o,new At(Ke),Os(),Qe())}}class kc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new kc(r,n,Qe(),Qe(),Qe())}}class Rh{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=o}}class OS{constructor(e,n){this.targetId=e,this.Ce=n}}class MS{constructor(e,n,r=pn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class JE{constructor(){this.ve=0,this.Fe=ZE(),this.Me=pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),n=Qe(),r=Qe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ne(38017,{changeType:c})}})),new kc(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=ZE()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class XD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Os(),this.He=dh(),this.Je=dh(),this.Ze=new At(Ke)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Xm(c))if(r===0){const h=new be(c.path);this.et(n,h,_n.newNoDocument(h,Ie.min()))}else rt(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let h,p;try{h=Or(r).toUint8Array()}catch(g){if(g instanceof iS)return ko("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Gp(h,o,c)}catch(g){return ko(g instanceof sc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,h)=>{const p=this.ot(h);if(p){if(c.current&&Xm(p.target)){const g=new be(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,_n.newNoDocument(g,e))}c.Be&&(n.set(h,c.ke()),c.Ke())}}));let r=Qe();this.Je.forEach(((c,h)=>{let p=!0;h.forEachWhile((g=>{const v=this.ot(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new hd(e,n,this.Ze,this.je,r);return this.je=Os(),this.He=dh(),this.Je=dh(),this.Ze=new At(Ke),o}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new JE,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Qt(Ke),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Qt(Ke),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new JE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function dh(){return new At(be.comparator)}function ZE(){return new At(be.comparator)}const WD={asc:"ASCENDING",desc:"DESCENDING"},JD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZD={and:"AND",or:"OR"};class ex{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zm(s,e){return s.useProto3Json||rd(e)?e:{value:e}}function Hh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kS(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function tx(s,e){return Hh(s,e.toTimestamp())}function Zi(s){return rt(!!s,49232),Ie.fromTimestamp((function(n){const r=xr(n);return new Pe(r.seconds,r.nanos)})(s))}function $p(s,e){return ep(s,e).canonicalString()}function ep(s,e){const n=(function(o){return new yt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function jS(s){const e=yt.fromString(s);return rt(zS(e),10190,{key:e.toString()}),e}function tp(s,e){return $p(s.databaseId,e.path)}function Dm(s,e){const n=jS(e);if(n.get(1)!==s.databaseId.projectId)throw new me(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new me(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new be(LS(n))}function VS(s,e){return $p(s.databaseId,e)}function nx(s){const e=jS(s);return e.length===4?yt.emptyPath():LS(e)}function np(s){return new yt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function LS(s){return rt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function eT(s,e,n){return{name:tp(s,e),fields:n.value.mapValue.fields}}function ix(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ne(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(v,T){return v.useProto3Json?(rt(T===void 0||typeof T=="string",58123),pn.fromBase64String(T||"")):(rt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),pn.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(v){const T=v.code===void 0?ae.UNKNOWN:xS(v.code);return new me(T,v.message||"")})(h);n=new MS(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Dm(s,r.document.name),c=Zi(r.document.updateTime),h=r.document.createTime?Zi(r.document.createTime):Ie.min(),p=new On({mapValue:{fields:r.document.fields}}),g=_n.newFoundDocument(o,c,h,p),v=r.targetIds||[],T=r.removedTargetIds||[];n=new Rh(v,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Dm(s,r.document),c=r.readTime?Zi(r.readTime):Ie.min(),h=_n.newNoDocument(o,c),p=r.removedTargetIds||[];n=new Rh([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Dm(s,r.document),c=r.removedTargetIds||[];n=new Rh([],c,o,null)}else{if(!("filter"in e))return Ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new $D(o,c),p=r.targetId;n=new OS(p,h)}}return n}function sx(s,e){let n;if(e instanceof Mc)n={update:eT(s,e.key,e.value)};else if(e instanceof Hp)n={delete:tp(s,e.key)};else if(e instanceof Ur)n={update:eT(s,e.key,e.data),updateMask:fx(e.fieldMask)};else{if(!(e instanceof HD))return Ne(16599,{dt:e.type});n={verify:tp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,h){const p=h.transform;if(p instanceof Bh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ec)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Tc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof qh)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Ne(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:tx(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ne(27497)})(s,e.precondition)),n}function rx(s,e){return s&&s.length>0?(rt(e!==void 0,14353),s.map((n=>(function(o,c){let h=o.updateTime?Zi(o.updateTime):Zi(c);return h.isEqual(Ie.min())&&(h=Zi(c)),new zD(h,o.transformResults||[])})(n,e)))):[]}function ax(s,e){return{documents:[VS(s,e.path)]}}function ox(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=VS(s,o);const c=(function(v){if(v.length!==0)return US(Ci.create(v,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const h=(function(v){if(v.length!==0)return v.map((T=>(function(w){return{field:So(w.field),direction:ux(w.dir)}})(T)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=Zm(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:n,parent:o}}function lx(s){let e=nx(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){rt(r===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];n.where&&(c=(function(S){const w=PS(S);return w instanceof Ci&&fS(w)?w.getFilters():[w]})(n.where));let h=[];n.orderBy&&(h=(function(S){return S.map((w=>(function(L){return new _c(bo(L.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(w)))})(n.orderBy));let p=null;n.limit&&(p=(function(S){let w;return w=typeof S=="object"?S.value:S,rd(w)?null:w})(n.limit));let g=null;n.startAt&&(g=(function(S){const w=!!S.before,P=S.values||[];return new zh(P,w)})(n.startAt));let v=null;return n.endAt&&(v=(function(S){const w=!S.before,P=S.values||[];return new zh(P,w)})(n.endAt)),AD(e,o,h,c,p,"F",g,v)}function cx(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function PS(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bo(n.unaryFilter.field);return qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(n.unaryFilter.field);return qt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=bo(n.unaryFilter.field);return qt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=bo(n.unaryFilter.field);return qt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(s):s.fieldFilter!==void 0?(function(n){return qt.create(bo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ci.create(n.compositeFilter.filters.map((r=>PS(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(n.compositeFilter.op))})(s):Ne(30097,{filter:s})}function ux(s){return WD[s]}function hx(s){return JD[s]}function dx(s){return ZD[s]}function So(s){return{fieldPath:s.canonicalString()}}function bo(s){return fn.fromServerFormat(s.fieldPath)}function US(s){return s instanceof qt?(function(n){if(n.op==="=="){if(BE(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NAN"}};if(zE(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BE(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NAN"}};if(zE(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(n.field),op:hx(n.op),value:n.value}}})(s):s instanceof Ci?(function(n){const r=n.getFilters().map((o=>US(o)));return r.length===1?r[0]:{compositeFilter:{op:dx(n.op),filters:r}}})(s):Ne(54877,{filter:s})}function fx(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function zS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function BS(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Tr{constructor(e,n,r,o,c=Ie.min(),h=Ie.min(),p=pn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mx{constructor(e){this.yt=e}}function px(s){const e=lx({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Jm(e,e.limit,"L"):e}class gx{constructor(){this.Sn=new yx}addToCollectionParentIndex(e,n){return this.Sn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(Dr.min())}updateCollectionGroup(e,n,r){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class yx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Qt(yt.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Qt(yt.comparator)).toArray()}}const tT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qS=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(qS,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class Po{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Po(0)}static ar(){return new Po(-1)}}const nT="LruGarbageCollector",vx=1048576;function iT([s,e],[n,r]){const o=Ke(s,n);return o===0?Ke(e,r):o}class _x{constructor(e){this.Pr=e,this.buffer=new Qt(iT),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();iT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ex{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ge(nT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ko(n)?ge(nT,"Ignoring IndexedDB error during garbage collection: ",n):await Yo(n)}await this.Ar(3e5)}))}}class Tx{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(sd.ce);const r=new _x(n);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(tT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tT):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,o,c,h,p,g,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,h=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(r=S,p=Date.now(),this.removeTargets(e,r,n)))).next((S=>(c=S,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((S=>(v=Date.now(),Eo()<=Ye.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-T}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${S} documents in `+(v-g)+`ms
Total Duration: ${v-T}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:S}))))}}function Sx(s,e){return new Tx(s,e)}class bx{constructor(){this.changes=new wa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?oe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Ax{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&uc(r.mutation,o,Gn.empty(),Pe.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Qe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Qe()){const o=ma();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let h=ic();return c.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const r=ma();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Qe())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,r,o){let c=Os();const h=cc(),p=(function(){return cc()})();return n.forEach(((g,v)=>{const T=r.get(v.key);o.has(v.key)&&(T===void 0||T.mutation instanceof Ur)?c=c.insert(v.key,v):T!==void 0?(h.set(v.key,T.mutation.getFieldMask()),uc(T.mutation,v,T.mutation.getFieldMask(),Pe.now())):h.set(v.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((v,T)=>h.set(v,T))),n.forEach(((v,T)=>p.set(v,new wx(T,h.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=cc();let o=new At(((h,p)=>h-p)),c=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const v=n.get(g);if(v===null)return;let T=r.get(g)||Gn.empty();T=p.applyToLocalView(v,T),r.set(g,T);const S=(o.get(p.batchId)||Qe()).add(g);o=o.insert(p.batchId,S)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),v=g.key,T=g.value,S=bS();T.forEach((w=>{if(!c.has(w)){const P=IS(n.get(w),r.get(w));P!==null&&S.set(w,P),c=c.add(w)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,S))}return oe.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return RD(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):oe.resolve(ma());let p=pc,g=c;return h.next((v=>oe.forEach(v,((T,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),c.get(T)?oe.resolve():this.remoteDocumentCache.getEntry(e,T).next((w=>{g=g.insert(T,w)}))))).next((()=>this.populateOverlays(e,v,c))).next((()=>this.computeViews(e,g,v,Qe()))).next((T=>({batchId:p,changes:SS(T)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next((r=>{let o=ic();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let h=ic();return this.indexManager.getCollectionParents(e,c).next((p=>oe.forEach(p,(g=>{const v=(function(S,w){return new Qo(w,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next((T=>{T.forEach(((S,w)=>{h=h.insert(S,w)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((h=>{c.forEach(((g,v)=>{const T=v.getKey();h.get(T)===null&&(h=h.insert(T,_n.newInvalidDocument(T)))}));let p=ic();return h.forEach(((g,v)=>{const T=c.get(g);T!==void 0&&uc(T.mutation,v,Gn.empty(),Pe.now()),ld(n,v)&&(p=p.insert(g,v))})),p}))}}class Rx{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return oe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Zi(o.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:px(o.bundledQuery),readTime:Zi(o.readTime)}})(n)),oe.resolve()}}class Cx{constructor(){this.overlays=new At(be.comparator),this.Lr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ma();return oe.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.bt(e,n,c)})),oe.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(r)),oe.resolve()}getOverlaysForCollection(e,n,r){const o=ma(),c=n.length+1,h=new be(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,v=g.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new At(((v,T)=>v-T));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>r){let T=c.get(v.largestBatchId);T===null&&(T=ma(),c=c.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const p=ma(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((v,T)=>p.set(v,T))),!(p.size()>=o)););return oe.resolve(p)}bt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new GD(n,r));let c=this.Lr.get(n);c===void 0&&(c=Qe(),this.Lr.set(n,c)),this.Lr.set(n,c.add(r.key))}}class Nx{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}class Yp{constructor(){this.kr=new Qt(rn.Kr),this.qr=new Qt(rn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new rn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new rn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new be(new yt([])),r=new rn(n,e),o=new rn(n,e+1),c=[];return this.qr.forEachInRange([r,o],(h=>{this.Wr(h),c.push(h.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new be(new yt([])),r=new rn(n,e),o=new rn(n,e+1);let c=Qe();return this.qr.forEachInRange([r,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const n=new rn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return be.comparator(e.key,n.key)||Ke(e.Hr,n.Hr)}static Ur(e,n){return Ke(e.Hr,n.Hr)||be.comparator(e.key,n.key)}}class Ix{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Qt(rn.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new FD(c,n,r,o);this.mutationQueue.push(h);for(const p of o)this.Jr=this.Jr.add(new rn(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return oe.resolve(h)}lookupMutationBatch(e,n){return oe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),c=o<0?0:o;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Lp:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rn(n,0),o=new rn(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([r,o],(h=>{const p=this.Zr(h.Hr);c.push(p)})),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qt(Ke);return n.forEach((o=>{const c=new rn(o,0),h=new rn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,h],(p=>{r=r.add(p.Hr)}))})),oe.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;be.isDocumentKey(c)||(c=c.child(""));const h=new rn(new be(c),0);let p=new Qt(Ke);return this.Jr.forEachWhile((g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(p=p.add(g.Hr)),!0)}),h),oe.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){rt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return oe.forEach(n.mutations,(o=>{const c=new rn(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new rn(n,0),o=this.Jr.firstAfterOrEqual(r);return oe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Dx{constructor(e){this.ti=e,this.docs=(function(){return new At(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,h=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return oe.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(n))}getEntries(e,n){let r=Os();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():_n.newInvalidDocument(o))})),oe.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=Os();const h=n.path,p=new be(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:v,value:{document:T}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||nD(tD(T),r)<=0||(o.has(T.key)||ld(n,T))&&(c=c.insert(T.key,T.mutableCopy()))}return oe.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Ne(9500)}ni(e,n){return oe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new xx(this)}getSize(e){return oe.resolve(this.size)}}class xx extends bx{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),oe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class Ox{constructor(e){this.persistence=e,this.ri=new wa((n=>zp(n)),Bp),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.ii=0,this.si=new Yp,this.targetCount=0,this.oi=Po._r()}forEachTarget(e,n){return this.ri.forEach(((r,o)=>n(o))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),oe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Po(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.lr(n),oe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.ri.delete(h),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),oe.waitFor(c).next((()=>o))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return oe.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),oe.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),oe.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return oe.resolve(r)}containsKey(e,n){return oe.resolve(this.si.containsKey(n))}}class HS{constructor(e,n){this._i={},this.overlays={},this.ai=new sd(0),this.ui=!1,this.ui=!0,this.ci=new Nx,this.referenceDelegate=e(this),this.li=new Ox(this),this.indexManager=new gx,this.remoteDocumentCache=(function(o){return new Dx(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new mx(n),this.Pi=new Rx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Cx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Ix(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){ge("MemoryPersistence","Starting transaction:",e);const o=new Mx(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,n){return oe.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class Mx extends sD{constructor(e){super(),this.currentSequenceNumber=e}}class Kp{constructor(e){this.persistence=e,this.Ri=new Yp,this.Ai=null}static Vi(e){return new Kp(e)}get di(){if(this.Ai)return this.Ai;throw Ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),oe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(r=>{const o=be.fromPath(r);return this.mi(e,o).next((c=>{c||n.removeEntry(o,Ie.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Fh{constructor(e,n){this.persistence=e,this.fi=new wa((r=>oD(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=Sx(this,n)}static Vi(e,n){return new Fh(e,n)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return oe.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((c=>c?oe.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,n).next((p=>{p||(r++,c.removeEntry(h,Ie.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),oe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bh(e.data.value)),n}wr(e,n,r){return oe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return oe.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Qp{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=o}static Es(e,n){let r=Qe(),o=Qe();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Qp(e,n.fromCache,r,o)}}class kx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jx{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return hR()?8:rD(En())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.gs(e,n).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ps(e,n,o,r).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new kx;return this.ys(e,n,h).next((p=>{if(c.result=p,this.As)return this.ws(e,n,h,p.size)}))})).next((()=>c.result))}ws(e,n,r,o){return r.documentReadCount<this.Vs?(Eo()<=Ye.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(Eo()<=Ye.DEBUG&&ge("QueryEngine","Query:",To(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(Eo()<=Ye.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(n))):oe.resolve())}gs(e,n){if(GE(n))return oe.resolve(null);let r=Ji(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Jm(n,null,"F"),r=Ji(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const h=Qe(...c);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const v=this.bs(n,p);return this.Ss(n,v,h,g.readTime)?this.gs(e,Jm(n,null,"F")):this.Ds(e,v,n,g)}))))})))))}ps(e,n,r,o){return GE(n)||o.isEqual(Ie.min())?oe.resolve(null):this.fs.getDocuments(e,r).next((c=>{const h=this.bs(n,c);return this.Ss(n,h,r,o)?oe.resolve(null):(Eo()<=Ye.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),To(n)),this.Ds(e,h,n,eD(o,pc)).next((p=>p)))}))}bs(e,n){let r=new Qt(ES(e));return n.forEach(((o,c)=>{ld(e,c)&&(r=r.add(c))})),r}Ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,n,r){return Eo()<=Ye.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",To(n)),this.fs.getDocumentsMatchingQuery(e,n,Dr.min(),r)}Ds(e,n,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((h=>{c=c.insert(h.key,h)})),c)))}}const Xp="LocalStore",Vx=3e8;class Lx{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new At(Ke),this.Fs=new wa((c=>zp(c)),Bp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ax(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function Px(s,e,n,r){return new Lx(s,e,n,r)}async function FS(s,e){const n=xe(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const h=[],p=[];let g=Qe();for(const v of o){h.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}for(const v of c){p.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(r,g).next((v=>({Ns:v,removedBatchIds:h,addedBatchIds:p})))}))}))}function Ux(s,e){const n=xe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,v,T){const S=v.batch,w=S.keys();let P=oe.resolve();return w.forEach((L=>{P=P.next((()=>T.getEntry(g,L))).next((j=>{const z=v.docVersions.get(L);rt(z!==null,48541),j.version.compareTo(z)<0&&(S.applyToRemoteDocument(j,v),j.isValidDocument()&&(j.setReadTime(v.commitVersion),T.addEntry(j)))}))})),P.next((()=>p.mutationQueue.removeMutationBatch(g,S)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=Qe();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(g=g.add(p.batch.mutations[v].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function GS(s){const e=xe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function zx(s,e){const n=xe(s),r=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((T,S)=>{const w=o.get(S);if(!w)return;p.push(n.li.removeMatchingKeys(c,T.removedDocuments,S).next((()=>n.li.addMatchingKeys(c,T.addedDocuments,S))));let P=w.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(S)!==null?P=P.withResumeToken(pn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):T.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(T.resumeToken,r)),o=o.insert(S,P),(function(j,z,ee){return j.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=Vx?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(w,P,T)&&p.push(n.li.updateTargetData(c,P))}));let g=Os(),v=Qe();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,T))})),p.push(Bx(c,h,e.documentUpdates).next((T=>{g=T.Bs,v=T.Ls}))),!r.isEqual(Ie.min())){const T=n.li.getLastRemoteSnapshotVersion(c).next((S=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(T)}return oe.waitFor(p).next((()=>h.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,v))).next((()=>g))})).then((c=>(n.vs=o,c)))}function Bx(s,e,n){let r=Qe(),o=Qe();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let h=Os();return n.forEach(((p,g)=>{const v=c.get(p);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):ge(Xp,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",g.version)})),{Bs:h,Ls:o}}))}function qx(s,e){const n=xe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Lp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Hx(s,e){const n=xe(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.li.getTargetData(r,e).next((c=>c?(o=c,oe.resolve(o)):n.li.allocateTargetId(r).next((h=>(o=new Tr(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function ip(s,e,n){const r=xe(s),o=r.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Ko(h))throw h;ge(Xp,`Failed to update sequence numbers for target ${e}: ${h}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function sT(s,e,n){const r=xe(s);let o=Ie.min(),c=Qe();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,v,T){const S=xe(g),w=S.Fs.get(T);return w!==void 0?oe.resolve(S.vs.get(w)):S.li.getTargetData(v,T)})(r,h,Ji(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{c=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(h,e,n?o:Ie.min(),n?c:Qe()))).next((p=>(Fx(r,ID(e),p),{documents:p,ks:c})))))}function Fx(s,e,n){let r=s.Ms.get(e)||Ie.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Ms.set(e,r)}class rT{constructor(){this.activeTargetIds=jD()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gx{constructor(){this.vo=new rT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new rT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $x{Mo(e){}shutdown(){}}const aT="ConnectivityMonitor";class oT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ge(aT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ge(aT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let fh=null;function sp(){return fh===null?fh=(function(){return 268435456+Math.round(2147483648*Math.random())})():fh++,"0x"+fh.toString(16)}const xm="RestConnection",Yx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Kx{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===Ph?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,c){const h=sp(),p=this.Qo(e,n.toUriEncodedString());ge(xm,`Sending RPC '${e}' ${h}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,c);const{host:v}=new URL(p),T=Ho(v);return this.zo(e,p,g,r,T).then((S=>(ge(xm,`Received RPC '${e}' ${h}: `,S),S)),(S=>{throw ko(xm,`RPC '${e}' ${h} failed with error: `,S,"url: ",p,"request:",r),S}))}jo(e,n,r,o,c,h){return this.Wo(e,n,r,o,c)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$o})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}Qo(e,n){const r=Yx[e];let o=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class Qx{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const yn="WebChannelConnection",Jl=(s,e,n)=>{s.listen(e,(r=>{try{n(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Io extends Kx{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Io.c_){const e=Q0();Jl(e,K0.STAT_EVENT,(n=>{n.stat===Gm.PROXY?ge(yn,"STAT_EVENT: detected buffering proxy"):n.stat===Gm.NOPROXY&&ge(yn,"STAT_EVENT: detected no buffering proxy")})),Io.c_=!0}}zo(e,n,r,o,c){const h=sp();return new Promise(((p,g)=>{const v=new $0;v.setWithCredentials(!0),v.listenOnce(Y0.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Sh.NO_ERROR:const S=v.getResponseJson();ge(yn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(S)),p(S);break;case Sh.TIMEOUT:ge(yn,`RPC '${e}' ${h} timed out`),g(new me(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Sh.HTTP_ERROR:const w=v.getStatus();if(ge(yn,`RPC '${e}' ${h} failed with status:`,w,"response text:",v.getResponseText()),w>0){let P=v.getResponseJson();Array.isArray(P)&&(P=P[0]);const L=P?.error;if(L&&L.status&&L.message){const j=(function(ee){const G=ee.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(G)>=0?G:ae.UNKNOWN})(L.status);g(new me(j,L.message))}else g(new me(ae.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new me(ae.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ge(yn,`RPC '${e}' ${h} completed.`)}}));const T=JSON.stringify(o);ge(yn,`RPC '${e}' ${h} sending request:`,o),v.send(n,"POST",T,r,15)}))}T_(e,n,r){const o=sp(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const v=c.join("");ge(yn,`Creating RPC '${e}' stream ${o}: ${v}`,p);const T=h.createWebChannel(v,p);this.I_(T);let S=!1,w=!1;const P=new Qx({Ho:L=>{w?ge(yn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(S||(ge(yn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),ge(yn,`RPC '${e}' stream ${o} sending:`,L),T.send(L))},Jo:()=>T.close()});return Jl(T,nc.EventType.OPEN,(()=>{w||(ge(yn,`RPC '${e}' stream ${o} transport opened.`),P.i_())})),Jl(T,nc.EventType.CLOSE,(()=>{w||(w=!0,ge(yn,`RPC '${e}' stream ${o} transport closed`),P.o_(),this.E_(T))})),Jl(T,nc.EventType.ERROR,(L=>{w||(w=!0,ko(yn,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),P.o_(new me(ae.UNAVAILABLE,"The operation could not be completed")))})),Jl(T,nc.EventType.MESSAGE,(L=>{if(!w){const j=L.data[0];rt(!!j,16349);const z=j,ee=z?.error||z[0]?.error;if(ee){ge(yn,`RPC '${e}' stream ${o} received error:`,ee);const G=ee.status;let le=(function(te){const N=Bt[te];if(N!==void 0)return xS(N)})(G),pe=ee.message;le===void 0&&(le=ae.INTERNAL,pe="Unknown error status: "+G+" with message "+ee.message),w=!0,P.o_(new me(le,pe)),T.close()}else ge(yn,`RPC '${e}' stream ${o} received:`,j),P.__(j)}})),Io.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return X0()}}function Xx(s){return new Io(s)}function Om(){return typeof document<"u"?document:null}function dd(s){return new ex(s,!0)}Io.c_=!1;class $S{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const lT="PersistentStream";class YS{constructor(e,n,r,o,c,h,p,g){this.Ci=e,this.b_=r,this.S_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $S(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(xs(n.toString()),xs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new me(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(lT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ge(lT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wx extends YS{constructor(e,n,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ix(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ie.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Ie.min():h.readTime?Zi(h.readTime):Ie.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=np(this.serializer),n.addTarget=(function(c,h){let p;const g=h.target;if(p=Xm(g)?{documents:ax(c,g)}:{query:ox(c,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=kS(c,h.resumeToken);const v=Zm(c,h.expectedCount);v!==null&&(p.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ie.min())>0){p.readTime=Hh(c,h.snapshotVersion.toTimestamp());const v=Zm(c,h.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const r=cx(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=np(this.serializer),n.removeTarget=e,this.K_(n)}}class Jx extends YS{constructor(e,n,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rx(e.writeResults,e.commitTime),r=Zi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=np(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>sx(this.serializer,r)))};this.K_(n)}}class Zx{}class e2 extends Zx{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new me(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Wo(e,ep(n,r),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new me(ae.UNKNOWN,c.toString())}))}jo(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,ep(n,r),o,h,p,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new me(ae.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function t2(s,e,n,r){return new e2(s,e,n,r)}class n2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xs(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ta="RemoteStore";class i2{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((h=>{r.enqueueAndForget((async()=>{Aa(this)&&(ge(Ta,"Restarting streams for network reachability change."),await(async function(g){const v=xe(g);v.Ea.add(4),await jc(v),v.Va.set("Unknown"),v.Ea.delete(4),await fd(v)})(this))}))})),this.Va=new n2(r,o)}}async function fd(s){if(Aa(s))for(const e of s.Ra)await e(!0)}async function jc(s){for(const e of s.Ra)await e(!1)}function KS(s,e){const n=xe(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),eg(n)?Zp(n):Xo(n).O_()&&Jp(n,e))}function Wp(s,e){const n=xe(s),r=Xo(n);n.Ia.delete(e),r.O_()&&QS(n,e),n.Ia.size===0&&(r.O_()?r.L_():Aa(n)&&n.Va.set("Unknown"))}function Jp(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xo(s).Z_(e)}function QS(s,e){s.da.$e(e),Xo(s).X_(e)}function Zp(s){s.da=new XD({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Xo(s).start(),s.Va.ua()}function eg(s){return Aa(s)&&!Xo(s).x_()&&s.Ia.size>0}function Aa(s){return xe(s).Ea.size===0}function XS(s){s.da=void 0}async function s2(s){s.Va.set("Online")}async function r2(s){s.Ia.forEach(((e,n)=>{Jp(s,e)}))}async function a2(s,e){XS(s),eg(s)?(s.Va.ha(e),Zp(s)):s.Va.set("Unknown")}async function o2(s,e,n){if(s.Va.set("Online"),e instanceof MS&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.da.removeTarget(p))})(s,e)}catch(r){ge(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gh(s,r)}else if(e instanceof Rh?s.da.Xe(e):e instanceof OS?s.da.st(e):s.da.tt(e),!n.isEqual(Ie.min()))try{const r=await GS(s.localStore);n.compareTo(r)>=0&&await(function(c,h){const p=c.da.Tt(h);return p.targetChanges.forEach(((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ia.get(v);T&&c.Ia.set(v,T.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,v)=>{const T=c.Ia.get(g);if(!T)return;c.Ia.set(g,T.withResumeToken(pn.EMPTY_BYTE_STRING,T.snapshotVersion)),QS(c,g);const S=new Tr(T.target,g,v,T.sequenceNumber);Jp(c,S)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){ge(Ta,"Failed to raise snapshot:",r),await Gh(s,r)}}async function Gh(s,e,n){if(!Ko(e))throw e;s.Ea.add(1),await jc(s),s.Va.set("Offline"),n||(n=()=>GS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ge(Ta,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await fd(s)}))}function WS(s,e){return e().catch((n=>Gh(s,n,e)))}async function md(s){const e=xe(s),n=kr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Lp;for(;l2(e);)try{const o=await qx(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,c2(e,o)}catch(o){await Gh(e,o)}JS(e)&&ZS(e)}function l2(s){return Aa(s)&&s.Ta.length<10}function c2(s,e){s.Ta.push(e);const n=kr(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function JS(s){return Aa(s)&&!kr(s).x_()&&s.Ta.length>0}function ZS(s){kr(s).start()}async function u2(s){kr(s).ra()}async function h2(s){const e=kr(s);for(const n of s.Ta)e.ea(n.mutations)}async function d2(s,e,n){const r=s.Ta.shift(),o=Fp.from(r,e,n);await WS(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await md(s)}async function f2(s,e){e&&kr(s).Y_&&await(async function(r,o){if((function(h){return YD(h)&&h!==ae.ABORTED})(o.code)){const c=r.Ta.shift();kr(r).B_(),await WS(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await md(r)}})(s,e),JS(s)&&ZS(s)}async function cT(s,e){const n=xe(s);n.asyncQueue.verifyOperationInProgress(),ge(Ta,"RemoteStore received new credentials");const r=Aa(n);n.Ea.add(3),await jc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await fd(n)}async function m2(s,e){const n=xe(s);e?(n.Ea.delete(2),await fd(n)):e||(n.Ea.add(2),await jc(n),n.Va.set("Unknown"))}function Xo(s){return s.ma||(s.ma=(function(n,r,o){const c=xe(n);return c.sa(),new Wx(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Zo:s2.bind(null,s),Yo:r2.bind(null,s),t_:a2.bind(null,s),J_:o2.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),eg(s)?Zp(s):s.Va.set("Unknown")):(await s.ma.stop(),XS(s))}))),s.ma}function kr(s){return s.fa||(s.fa=(function(n,r,o){const c=xe(n);return c.sa(),new Jx(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:u2.bind(null,s),t_:f2.bind(null,s),ta:h2.bind(null,s),na:d2.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await md(s)):(await s.fa.stop(),s.Ta.length>0&&(ge(Ta,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class tg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const h=Date.now()+r,p=new tg(e,n,h,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ng(s,e){if(xs("AsyncQueue",`${e}: ${s}`),Ko(s))return new me(ae.UNAVAILABLE,`${e}: ${s}`);throw s}class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=ic(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Do;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class uT{constructor(){this.ga=new At(be.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Uo{constructor(e,n,r,o,c,h,p,g,v){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,n,r,o,c){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new Uo(e,n,Do.emptySet(n),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}class p2{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class g2{constructor(){this.queries=hT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=xe(n),c=o.queries;o.queries=hT(),c.forEach(((h,p)=>{for(const g of p.ba)g.onError(r)}))})(this,new me(ae.ABORTED,"Firestore shutting down"))}}function hT(){return new wa((s=>_S(s)),od)}async function y2(s,e){const n=xe(s);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.Da()&&(r=2):(c=new p2,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=ng(h,`Initialization of query '${To(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&ig(n)}async function v2(s,e){const n=xe(s),r=e.query;let o=3;const c=n.queries.get(r);if(c){const h=c.ba.indexOf(e);h>=0&&(c.ba.splice(h,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _2(s,e){const n=xe(s);let r=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const p of h.ba)p.Fa(o)&&(r=!0);h.wa=o}}r&&ig(n)}function E2(s,e,n){const r=xe(s),o=r.queries.get(e);if(o)for(const c of o.ba)c.onError(n);r.queries.delete(e)}function ig(s){s.Ca.forEach((e=>{e.next()}))}var rp,dT;(dT=rp||(rp={})).Ma="default",dT.Cache="cache";class T2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rp.Cache}}class eb{constructor(e){this.key=e}}class tb{constructor(e){this.key=e}}class S2{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qe(),this.mutatedKeys=Qe(),this.eu=ES(e),this.tu=new Do(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new uT,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,S)=>{const w=o.get(T),P=ld(this.query,S)?S:null,L=!!w&&this.mutatedKeys.has(w.key),j=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let z=!1;w&&P?w.data.isEqual(P.data)?L!==j&&(r.track({type:3,doc:P}),z=!0):this.su(w,P)||(r.track({type:2,doc:P}),z=!0,(g&&this.eu(P,g)>0||v&&this.eu(P,v)<0)&&(p=!0)):!w&&P?(r.track({type:0,doc:P}),z=!0):w&&!P&&(r.track({type:1,doc:w}),z=!0,(g||v)&&(p=!0)),z&&(P?(h=h.add(P),c=j?c.add(T):c.delete(T)):(h=h.delete(T),c=c.delete(T)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const T=this.query.limitType==="F"?h.last():h.first();h=h.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{tu:h,iu:r,Ss:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((T,S)=>(function(P,L){const j=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Vt:z})}};return j(P)-j(L)})(T.type,S.type)||this.eu(T.doc,S.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,v=g!==this.Xa;return this.Xa=g,h.length!==0||v?{snapshot:new Uo(this.query,e.tu,c,h,e.mutatedKeys,g===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new tb(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new eb(r))})),n}cu(e){this.Za=e.ks,this.Ya=Qe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const sg="SyncEngine";class b2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class w2{constructor(e){this.key=e,this.hu=!1}}class A2{constructor(e,n,r,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new wa((p=>_S(p)),od),this.Iu=new Map,this.Eu=new Set,this.Ru=new At(be.comparator),this.Au=new Map,this.Vu=new Yp,this.du={},this.mu=new Map,this.fu=Po.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function R2(s,e,n=!0){const r=ob(s);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await nb(r,e,n,!0),o}async function C2(s,e){const n=ob(s);await nb(n,e,!0,!1)}async function nb(s,e,n,r){const o=await Hx(s.localStore,Ji(e)),c=o.targetId,h=s.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await N2(s,e,c,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&KS(s.remoteStore,o),p}async function N2(s,e,n,r,o){s.pu=(S,w,P)=>(async function(j,z,ee,G){let le=z.view.ru(ee);le.Ss&&(le=await sT(j.localStore,z.query,!1).then((({documents:N})=>z.view.ru(N,le))));const pe=G&&G.targetChanges.get(z.targetId),$=G&&G.targetMismatches.get(z.targetId)!=null,te=z.view.applyChanges(le,j.isPrimaryClient,pe,$);return mT(j,z.targetId,te.au),te.snapshot})(s,S,w,P);const c=await sT(s.localStore,e,!0),h=new S2(e,c.ks),p=h.ru(c.documents),g=kc.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),v=h.applyChanges(p,s.isPrimaryClient,g);mT(s,n,v.au);const T=new b2(e,n,h);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),v.snapshot}async function I2(s,e,n){const r=xe(s),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((h=>!od(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await ip(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Wp(r.remoteStore,o.targetId),ap(r,o.targetId)})).catch(Yo)):(ap(r,o.targetId),await ip(r.localStore,o.targetId,!0))}async function D2(s,e){const n=xe(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wp(n.remoteStore,r.targetId))}async function x2(s,e,n){const r=P2(s);try{const o=await(function(h,p){const g=xe(h),v=Pe.now(),T=p.reduce(((P,L)=>P.add(L.key)),Qe());let S,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let L=Os(),j=Qe();return g.xs.getEntries(P,T).next((z=>{L=z,L.forEach(((ee,G)=>{G.isValidDocument()||(j=j.add(ee))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,L))).next((z=>{S=z;const ee=[];for(const G of p){const le=qD(G,S.get(G.key).overlayedDocument);le!=null&&ee.push(new Ur(G.key,le,uS(le.value.mapValue),bi.exists(!0)))}return g.mutationQueue.addMutationBatch(P,v,ee,p)})).next((z=>{w=z;const ee=z.applyToLocalDocumentSet(S,j);return g.documentOverlayCache.saveOverlays(P,z.batchId,ee)}))})).then((()=>({batchId:w.batchId,changes:SS(S)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(h,p,g){let v=h.du[h.currentUser.toKey()];v||(v=new At(Ke)),v=v.insert(p,g),h.du[h.currentUser.toKey()]=v})(r,o.batchId,n),await Vc(r,o.changes),await md(r.remoteStore)}catch(o){const c=ng(o,"Failed to persist write");n.reject(c)}}async function ib(s,e){const n=xe(s);try{const r=await zx(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=n.Au.get(c);h&&(rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?rt(h.hu,14607):o.removedDocuments.size>0&&(rt(h.hu,42227),h.hu=!1))})),await Vc(n,r,e)}catch(r){await Yo(r)}}function fT(s,e,n){const r=xe(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const g=xe(h);g.onlineState=p;let v=!1;g.queries.forEach(((T,S)=>{for(const w of S.ba)w.va(p)&&(v=!0)})),v&&ig(g)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O2(s,e,n){const r=xe(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let h=new At(be.comparator);h=h.insert(c,_n.newNoDocument(c,Ie.min()));const p=Qe().add(c),g=new hd(Ie.min(),new Map,new At(Ke),h,p);await ib(r,g),r.Ru=r.Ru.remove(c),r.Au.delete(e),rg(r)}else await ip(r.localStore,e,!1).then((()=>ap(r,e,n))).catch(Yo)}async function M2(s,e){const n=xe(s),r=e.batch.batchId;try{const o=await Ux(n.localStore,e);rb(n,r,null),sb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vc(n,o)}catch(o){await Yo(o)}}async function k2(s,e,n){const r=xe(s);try{const o=await(function(h,p){const g=xe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let T;return g.mutationQueue.lookupMutationBatch(v,p).next((S=>(rt(S!==null,37113),T=S.keys(),g.mutationQueue.removeMutationBatch(v,S)))).next((()=>g.mutationQueue.performConsistencyCheck(v))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(v,T,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T))).next((()=>g.localDocuments.getDocuments(v,T)))}))})(r.localStore,e);rb(r,e,n),sb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vc(r,o)}catch(o){await Yo(o)}}function sb(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function rb(s,e,n){const r=xe(s);let o=r.du[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function ap(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||ab(s,r)}))}function ab(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Wp(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),rg(s))}function mT(s,e,n){for(const r of n)r instanceof eb?(s.Vu.addReference(r.key,e),j2(s,r)):r instanceof tb?(ge(sg,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||ab(s,r.key)):Ne(19791,{wu:r})}function j2(s,e){const n=e.key,r=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(r)||(ge(sg,"New document in limbo: "+n),s.Eu.add(r),rg(s))}function rg(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new be(yt.fromString(e)),r=s.fu.next();s.Au.set(r,new w2(n)),s.Ru=s.Ru.insert(n,r),KS(s.remoteStore,new Tr(Ji(yS(n.path)),r,"TargetPurposeLimboResolution",sd.ce))}}async function Vc(s,e,n){const r=xe(s),o=[],c=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{h.push(r.pu(g,e,n).then((v=>{if((v||n)&&r.isPrimaryClient){const T=v?!v.fromCache:n?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(v){o.push(v);const T=Qp.Es(g.targetId,v);c.push(T)}})))})),await Promise.all(h),r.Pu.J_(o),await(async function(g,v){const T=xe(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>oe.forEach(v,(w=>oe.forEach(w.Ts,(P=>T.persistence.referenceDelegate.addReference(S,w.targetId,P))).next((()=>oe.forEach(w.Is,(P=>T.persistence.referenceDelegate.removeReference(S,w.targetId,P)))))))))}catch(S){if(!Ko(S))throw S;ge(Xp,"Failed to update sequence numbers: "+S)}for(const S of v){const w=S.targetId;if(!S.fromCache){const P=T.vs.get(w),L=P.snapshotVersion,j=P.withLastLimboFreeSnapshotVersion(L);T.vs=T.vs.insert(w,j)}}})(r.localStore,c))}async function V2(s,e){const n=xe(s);if(!n.currentUser.isEqual(e)){ge(sg,"User change. New user:",e.toKey());const r=await FS(n.localStore,e);n.currentUser=e,(function(c,h){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new me(ae.CANCELLED,h))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vc(n,r.Ns)}}function L2(s,e){const n=xe(s),r=n.Au.get(e);if(r&&r.hu)return Qe().add(r.key);{let o=Qe();const c=n.Iu.get(e);if(!c)return o;for(const h of c){const p=n.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function ob(s){const e=xe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=ib.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O2.bind(null,e),e.Pu.J_=_2.bind(null,e.eventManager),e.Pu.yu=E2.bind(null,e.eventManager),e}function P2(s){const e=xe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k2.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Px(this.persistence,new jx,e.initialUser,this.serializer)}Cu(e){return new HS(Kp.Vi,this.serializer)}Du(e){return new Gx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class U2 extends $h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rt(this.persistence.referenceDelegate instanceof Fh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Ex(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new HS((r=>Fh.Vi(r,n)),this.serializer)}}class op{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V2.bind(null,this.syncEngine),await m2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new g2})()}createDatastore(e){const n=dd(e.databaseInfo.databaseId),r=Xx(e.databaseInfo);return t2(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,h,p){return new i2(r,o,c,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>fT(this.syncEngine,n,0)),(function(){return oT.v()?new oT:new $x})())}createSyncEngine(e,n){return(function(o,c,h,p,g,v,T){const S=new A2(o,c,h,p,g,v);return T&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=xe(n);ge(Ta,"RemoteStore shutting down."),r.Ea.add(5),await jc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}op.provider={build:()=>new op};class z2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const jr="FirestoreClient";class B2{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=o,this.user=vn.UNAUTHENTICATED,this.clientId=Vp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async h=>{ge(jr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(ge(jr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ng(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Mm(s,e){s.asyncQueue.verifyOperationInProgress(),ge(jr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await FS(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function pT(s,e){s.asyncQueue.verifyOperationInProgress();const n=await q2(s);ge(jr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>cT(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>cT(e.remoteStore,o))),s._onlineComponents=e}async function q2(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ge(jr,"Using user provided OfflineComponentProvider");try{await Mm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ko("Error using user provided cache. Falling back to memory cache: "+n),await Mm(s,new $h)}}else ge(jr,"Using default OfflineComponentProvider"),await Mm(s,new U2(void 0));return s._offlineComponents}async function lb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ge(jr,"Using user provided OnlineComponentProvider"),await pT(s,s._uninitializedComponentsProvider._online)):(ge(jr,"Using default OnlineComponentProvider"),await pT(s,new op))),s._onlineComponents}function H2(s){return lb(s).then((e=>e.syncEngine))}async function F2(s){const e=await lb(s),n=e.eventManager;return n.onListen=R2.bind(null,e.syncEngine),n.onUnlisten=I2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=C2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D2.bind(null,e.syncEngine),n}function G2(s,e,n={}){const r=new Rr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,g,v){const T=new z2({next:w=>{T.Nu(),h.enqueueAndForget((()=>v2(c,S))),w.fromCache&&g.source==="server"?v.reject(new me(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(w)},error:w=>v.reject(w)}),S=new T2(p,T,{includeMetadataChanges:!0,Ka:!0});return y2(c,S)})(await F2(s),s.asyncQueue,e,n,r))),r.promise}function $2(s,e){const n=new Rr;return s.asyncQueue.enqueueAndForget((async()=>x2(await H2(s),e,n))),n.promise}function cb(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const Y2="ComponentProvider",gT=new Map;function K2(s,e,n,r,o){return new uD(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,cb(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}const ub="firestore.googleapis.com",yT=!0;class vT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ub,this.ssl=yT}else this.host=e.host,this.ssl=e.ssl??yT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vx)throw new me(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cb(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new me(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new me(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new me(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pd{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new HI;switch(r.type){case"firstParty":return new YI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=gT.get(n);r&&(ge(Y2,"Removing Datastore"),gT.delete(n),r.terminate())})(this),Promise.resolve()}}function Q2(s,e,n,r={}){s=Ea(s,pd);const o=Ho(e),c=s._getSettings(),h={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(n0(`https://${p}`),i0("Firestore",!0)),c.host!==ub&&c.host!==p&&ko("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:r};if(!pa(g,h)&&(s._setSettings(g),r.mockUserToken)){let v,T;if(typeof r.mockUserToken=="string")v=r.mockUserToken,T=vn.MOCK_USER;else{v=nR(r.mockUserToken,s._app?.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new me(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new vn(S)}s._authCredentials=new FI(new J0(v,T))}}class Ra{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ra(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Oc(n,Kt._jsonSchema))return new Kt(e,r||null,new be(yt.fromString(n.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:Ht("string",Kt._jsonSchemaVersion),referencePath:Ht("string")};class Cr extends Ra{constructor(e,n,r){super(e,n,yS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new be(e))}withConverter(e){return new Cr(this.firestore,e,this._path)}}function bt(s,e,...n){if(s=Xt(s),Z0("collection","path",e),s instanceof pd){const r=yt.fromString(e,...n);return xE(r),new Cr(s,null,r)}{if(!(s instanceof Kt||s instanceof Cr))throw new me(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(yt.fromString(e,...n));return xE(r),new Cr(s.firestore,null,r)}}function mn(s,e,...n){if(s=Xt(s),arguments.length===1&&(e=Vp.newId()),Z0("doc","path",e),s instanceof pd){const r=yt.fromString(e,...n);return DE(r),new Kt(s,null,new be(r))}{if(!(s instanceof Kt||s instanceof Cr))throw new me(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(yt.fromString(e,...n));return DE(r),new Kt(s.firestore,s instanceof Cr?s.converter:null,new be(r))}}const _T="AsyncQueue";class ET{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $S(this,"async_queue_retry"),this._c=()=>{const r=Om();r&&ge(_T,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Rr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ko(e))throw e;ge(_T,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,xs("INTERNAL UNHANDLED ERROR: ",TT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=tg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ne(47125,{Pc:TT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function TT(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Lc extends pd{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new ET,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ET(e),this._firestoreClient=void 0,await e}}}function X2(s,e){const n=typeof s=="object"?s:a0(),r=typeof s=="string"?s:Ph,o=wp(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=eR("firestore");c&&Q2(o,...c)}return o}function hb(s){if(s._terminated)throw new me(ae.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||W2(s),s._firestoreClient}function W2(s){const e=s._freezeSettings(),n=K2(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new B2(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(s._componentsProvider))}class ai{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ai(pn.fromBase64String(e))}catch(n){throw new me(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ai(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ai._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,ai._jsonSchema))return ai.fromBase64String(e.bytes)}}ai._jsonSchemaVersion="firestore/bytes/1.0",ai._jsonSchema={type:Ht("string",ai._jsonSchemaVersion),bytes:Ht("string")};class ag{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class og{constructor(e){this._methodName=e}}class es{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:es._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,es._jsonSchema))return new es(e.latitude,e.longitude)}}es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:Ht("string",es._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};class wi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,wi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new wi(e.vectorValues);throw new me(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wi._jsonSchemaVersion="firestore/vectorValue/1.0",wi._jsonSchema={type:Ht("string",wi._jsonSchemaVersion),vectorValues:Ht("object")};const J2=/^__.*__$/;class Z2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mc(e,this.data,n,this.fieldTransforms)}}class db{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{dataSource:s})}}class lg{constructor(e,n,r,o,c,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new lg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Yh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(fb(this.dataSource)&&J2.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class eO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dd(e)}createContext(e,n,r,o=!1){return new lg({dataSource:e,methodName:n,targetDoc:r,path:fn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cg(s){const e=s._freezeSettings(),n=dd(s._databaseId);return new eO(s._databaseId,!!e.ignoreUndefinedProperties,n)}function tO(s,e,n,r,o,c={}){const h=s.createContext(c.merge||c.mergeFields?2:0,e,n,o);ug("Data must be an object, but it was:",h,r);const p=mb(r,h);let g,v;if(c.merge)g=new Gn(h.fieldMask),v=h.fieldTransforms;else if(c.mergeFields){const T=[];for(const S of c.mergeFields){const w=Sa(e,S,n);if(!h.contains(w))throw new me(ae.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);yb(T,w)||T.push(w)}g=new Gn(T),v=h.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,v=h.fieldTransforms;return new Z2(new On(p),g,v)}class gd extends og{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gd}}function nO(s,e,n,r){const o=s.createContext(1,e,n);ug("Data must be an object, but it was:",o,r);const c=[],h=On.empty();Pr(r,((g,v)=>{const T=gb(e,g,n);v=Xt(v);const S=o.childContextForFieldPath(T);if(v instanceof gd)c.push(T);else{const w=Pc(v,S);w!=null&&(c.push(T),h.set(T,w))}}));const p=new Gn(c);return new db(h,p,o.fieldTransforms)}function iO(s,e,n,r,o,c){const h=s.createContext(1,e,n),p=[Sa(e,r,n)],g=[o];if(c.length%2!=0)throw new me(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<c.length;w+=2)p.push(Sa(e,c[w])),g.push(c[w+1]);const v=[],T=On.empty();for(let w=p.length-1;w>=0;--w)if(!yb(v,p[w])){const P=p[w];let L=g[w];L=Xt(L);const j=h.childContextForFieldPath(P);if(L instanceof gd)v.push(P);else{const z=Pc(L,j);z!=null&&(v.push(P),T.set(P,z))}}const S=new Gn(v);return new db(T,S,h.fieldTransforms)}function sO(s,e,n,r=!1){return Pc(n,s.createContext(r?4:3,e))}function Pc(s,e){if(pb(s=Xt(s)))return ug("Unsupported field value:",e,s),mb(s,e);if(s instanceof og)return(function(r,o){if(!fb(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const c=[];let h=0;for(const p of r){let g=Pc(p,o.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}})(s,e)}return(function(r,o){if((r=Xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VD(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Pe.fromDate(r);return{timestampValue:Hh(o.serializer,c)}}if(r instanceof Pe){const c=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hh(o.serializer,c)}}if(r instanceof es)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ai)return{bytesValue:kS(o.serializer,r._byteString)};if(r instanceof Kt){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:$p(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof wi)return(function(h,p){const g=h instanceof wi?h.toArray():h;return{mapValue:{fields:{[lS]:{stringValue:cS},[Uh]:{arrayValue:{values:g.map((T=>{if(typeof T!="number")throw p.createError("VectorValues must only contain numeric values.");return qp(p.serializer,T)}))}}}}}})(r,o);if(BS(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${id(r)}`)})(s,e)}function mb(s,e){const n={};return nS(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pr(s,((r,o)=>{const c=Pc(o,e.childContextForField(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function pb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Pe||s instanceof es||s instanceof ai||s instanceof Kt||s instanceof og||s instanceof wi||BS(s))}function ug(s,e,n){if(!pb(n)||!eS(n)){const r=id(n);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function Sa(s,e,n){if((e=Xt(e))instanceof ag)return e._internalPath;if(typeof e=="string")return gb(s,e);throw Yh("Field path arguments must be of type string or ",s,!1,void 0,n)}const rO=new RegExp("[~\\*/\\[\\]]");function gb(s,e,n){if(e.search(rO)>=0)throw Yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new ag(...e.split("."))._internalPath}catch{throw Yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Yh(s,e,n,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new me(ae.INVALID_ARGUMENT,p+s+g)}function yb(s,e){return s.some((n=>n.isEqual(e)))}class aO{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Pr(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[Uh].arrayValue?.values?.map((r=>Ot(r.doubleValue)));return new wi(n)}convertGeoPoint(e){return new es(Ot(e.latitude),Ot(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ad(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){const n=xr(e);return new Pe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=yt.fromString(e);rt(zS(r),9688,{name:e});const o=new yc(r.get(1),r.get(3)),c=new be(r.popFirst(5));return o.isEqual(n)||xs(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}class oO extends aO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ai(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}const ST="@firebase/firestore",bT="4.10.0";class vb{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Sa("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lO extends vb{data(){return super.data()}}function cO(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new me(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hg{}class _b extends hg{}function Sc(s,e,...n){let r=[];e instanceof hg&&r.push(e),r=r.concat(n),(function(c){const h=c.filter((g=>g instanceof dg)).length,p=c.filter((g=>g instanceof yd)).length;if(h>1||h>0&&p>0)throw new me(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class yd extends _b{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yd(e,n,r)}_apply(e){const n=this._parse(e);return Eb(e._query,n),new Ra(e.firestore,e.converter,Wm(e._query,n))}_parse(e){const n=cg(e.firestore);return(function(c,h,p,g,v,T,S){let w;if(v.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new me(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){AT(S,T);const L=[];for(const j of S)L.push(wT(g,c,j));w={arrayValue:{values:L}}}else w=wT(g,c,S)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||AT(S,T),w=sO(p,h,S,T==="in"||T==="not-in");return qt.create(v,T,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Kh(s,e,n){const r=e,o=Sa("where",s);return yd._create(o,r,n)}class dg extends hg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ci.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let h=o;const p=c.getFlattenedFilters();for(const g of p)Eb(h,g),h=Wm(h,g)})(e._query,n),new Ra(e.firestore,e.converter,Wm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fg extends _b{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fg(e,n)}_apply(e){const n=(function(o,c,h){if(o.startAt!==null)throw new me(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new me(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _c(c,h)})(e._query,this._field,this._direction);return new Ra(e.firestore,e.converter,ND(e._query,n))}}function uO(s,e="asc"){const n=e,r=Sa("orderBy",s);return fg._create(r,n)}function wT(s,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new me(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vS(e)&&n.indexOf("/")!==-1)throw new me(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(yt.fromString(n));if(!be.isDocumentKey(r))throw new me(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return UE(s,new be(r))}if(n instanceof Kt)return UE(s,n._key);throw new me(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${id(n)}.`)}function AT(s,e){if(!Array.isArray(s)||s.length===0)throw new me(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Eb(s,e){const n=(function(o,c){for(const h of o)for(const p of h.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new me(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function hO(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class mh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends vb{constructor(e,n,r,o,c,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Sa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=xo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:Ht("string",xo._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class Ch extends xo{data(e={}){return super.data(e)}}class Oo{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new mh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Ch(this._firestore,this._userDataWriter,r.key,r,new mh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const g=new Ch(o._firestore,o._userDataWriter,p.doc.key,p.doc,new mh(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Ch(o._firestore,o._userDataWriter,p.doc.key,p.doc,new mh(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,T=-1;return p.type!==0&&(v=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),T=h.indexOf(p.doc.key)),{type:dO(p.type),doc:g,oldIndex:v,newIndex:T}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:s})}}Oo._jsonSchemaVersion="firestore/querySnapshot/1.0",Oo._jsonSchema={type:Ht("string",Oo._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};function an(s){s=Ea(s,Ra);const e=Ea(s.firestore,Lc),n=hb(e),r=new oO(e);return cO(s._query),G2(n,s._query).then((o=>new Oo(e,r,s,o)))}function Nr(s,e,n,...r){s=Ea(s,Kt);const o=Ea(s.firestore,Lc),c=cg(o);let h;return h=typeof(e=Xt(e))=="string"||e instanceof ag?iO(c,"updateDoc",s._key,e,n,r):nO(c,"updateDoc",s._key,e),mg(o,[h.toMutation(s._key,bi.exists(!0))])}function Ir(s){return mg(Ea(s.firestore,Lc),[new Hp(s._key,bi.none())])}function Ao(s,e){const n=Ea(s.firestore,Lc),r=mn(s),o=hO(s.converter,e),c=cg(s.firestore);return mg(n,[tO(c,"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,bi.exists(!1))]).then((()=>r))}function mg(s,e){const n=hb(s);return $2(n,e)}(function(e,n=!0){qI(Fo),Mo(new ga("firestore",((r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),p=new Lc(new GI(r.getProvider("auth-internal")),new KI(h,r.getProvider("app-check-internal")),hD(h,o),h);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),wr(ST,bT,e),wr(ST,bT,"esm2020")})();var fO="firebase",mO="12.8.0";wr(fO,mO,"app");const Tb={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},Sb=Ap(Tb),ph=F0(Sb),ze=X2(Sb),pO=Ap(Tb,"secondary"),RT=F0(pO),gO="EYdciKDOi3UYBLk1u8hHams5tmO2",bb=M.createContext();function Wo(){return M.useContext(bb)}function yO({children:s}){const[e,n]=M.useState(null),[r,o]=M.useState(!1),[c,h]=M.useState(!1),[p,g]=M.useState(null),[v,T]=M.useState(!0);M.useEffect(()=>xN(ph,async j=>{if(n(j),j)if(j.uid===gO)o(!0),h(!1),g(null);else{o(!1);try{const z=Sc(bt(ze,"clients"),Kh("uid","==",j.uid)),ee=await an(z);if(ee.empty)h(!1),g(null);else{const G=ee.docs[0];h(!0),g({id:G.id,...G.data()})}}catch(z){console.error("Error fetching client data:",z),h(!1),g(null)}}else o(!1),h(!1),g(null);T(!1)}),[]);const P={currentUser:e,isAdmin:r,isClient:c,clientData:p,login:async(L,j,z=!0)=>(await NN(ph,z?V0:Op),await CN(ph,L,j)),logout:()=>M0(ph),loading:v};return m.jsx(bb.Provider,{value:P,children:s})}function vO(){const[s,e]=M.useState(""),[n,r]=M.useState(""),[o,c]=M.useState(!0),[h,p]=M.useState(""),[g,v]=M.useState(!1),{login:T,currentUser:S,isAdmin:w,isClient:P,loading:L}=Wo(),j=ks();if(M.useEffect(()=>{!L&&S&&(w?j("/dashboard"):P&&j("/client"))},[L,S,w,P,j]),L)return m.jsx("div",{className:"login-container",children:m.jsx("div",{className:"login-loading",children:m.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"loading-logo"})})});const z=async ee=>{ee.preventDefault(),p(""),v(!0);try{await T(s,n,o)}catch(G){p(G.message||"Failed to log in"),v(!1)}};return m.jsx("div",{className:"login-container",children:m.jsxs("div",{className:"login-card",children:[m.jsxs("div",{className:"login-header",children:[m.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"login-logo"}),m.jsx("p",{children:"Client Portal"})]}),h&&m.jsx("div",{className:"error-message",children:h}),m.jsxs("form",{onSubmit:z,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Email"}),m.jsx("input",{type:"email",id:"email",value:s,onChange:ee=>e(ee.target.value),required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"password",children:"Password"}),m.jsx("input",{type:"password",id:"password",value:n,onChange:ee=>r(ee.target.value),required:!0})]}),m.jsx("div",{className:"remember-me",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",checked:o,onChange:ee=>c(ee.target.checked)}),m.jsx("span",{children:"Remember me"})]})}),m.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),m.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function _O(){const[s,e]=M.useState([]),[n,r]=M.useState([]),[o,c]=M.useState(!0),[h,p]=M.useState(null),[g,v]=M.useState({});M.useEffect(()=>{T()},[]);const T=async()=>{try{const[$,te]=await Promise.all([an(Sc(bt(ze,"clients"),uO("createdAt","desc"))),an(bt(ze,"sessions"))]),N=$.docs.map(R=>({id:R.id,...R.data()})),C=te.docs.map(R=>({id:R.id,...R.data()}));e(N),r(C)}catch($){console.error("Error fetching data:",$)}c(!1)},S=$=>{const te=new Date,N=te.getFullYear(),C=(te.getMonth()+1).toString().padStart(2,"0"),R=te.getDate().toString().padStart(2,"0"),D=`${N}-${C}-${R}`,x=`${te.getHours().toString().padStart(2,"0")}:${te.getMinutes().toString().padStart(2,"0")}`;return n.filter(k=>k.clientId!==$?!1:k.date<D||k.date===D&&k.time<x).length},w=$=>{const te=S($.id);return($.totalSessions||0)-te},P=$=>{const te=new Date,N=te.getFullYear(),C=(te.getMonth()+1).toString().padStart(2,"0"),R=te.getDate().toString().padStart(2,"0"),D=`${N}-${C}-${R}`,x=`${te.getHours().toString().padStart(2,"0")}:${te.getMinutes().toString().padStart(2,"0")}`;return n.filter(k=>k.clientId!==$?!1:k.date>D||k.date===D&&k.time>=x).length},L=$=>$?($.toDate?$.toDate():new Date($)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",j=async($,te)=>{if(window.confirm(`Are you sure you want to delete ${te}? This will also delete all their booked sessions.`))try{const C=n.filter(R=>R.clientId===$).map(R=>Ir(mn(ze,"sessions",R.id)));await Promise.all(C),await Ir(mn(ze,"clients",$)),e(s.filter(R=>R.id!==$)),r(n.filter(R=>R.clientId!==$))}catch(N){console.error("Error deleting client:",N),alert("Failed to delete client")}},z=$=>{if(!$)return"";const te=$.toDate?$.toDate():new Date($),N=te.getFullYear(),C=(te.getMonth()+1).toString().padStart(2,"0"),R=te.getDate().toString().padStart(2,"0");return`${N}-${C}-${R}`},ee=$=>{p($.id),v({name:$.name,email:$.email,password:"",weeksInBlock:$.weeksInBlock,totalSessions:$.totalSessions,sessionsRemaining:$.sessionsRemaining,sessionDuration:$.sessionDuration||45,startDate:z($.startDate),endDate:z($.endDate),status:$.status,hasPortalAccess:!!$.uid})},G=$=>{const{name:te,value:N}=$.target;if(v(C=>({...C,[te]:N})),te==="startDate"||te==="weeksInBlock"){const C=te==="startDate"?N:g.startDate,R=parseInt(te==="weeksInBlock"?N:g.weeksInBlock);if(C&&R>0){const D=new Date(C),x=new Date(D);x.setDate(x.getDate()+R*7);const k=x.getFullYear(),I=(x.getMonth()+1).toString().padStart(2,"0"),we=x.getDate().toString().padStart(2,"0");v(Ve=>({...Ve,[te]:N,endDate:`${k}-${I}-${we}`}))}}},le=async $=>{try{const te=s.find(R=>R.id===$);let N=te?.uid;if(g.password&&g.password.length>=6&&!te?.uid)try{const R=await RN(RT,g.email.trim().toLowerCase(),g.password);await M0(RT),N=R.user.uid}catch(R){if(console.error("Error creating auth account:",R),R.code==="auth/email-already-in-use")alert("This email already has a portal account. Password not changed.");else if(R.code==="auth/weak-password"){alert("Password must be at least 6 characters.");return}else{alert("Failed to create portal account: "+R.message);return}}const C={name:g.name.trim(),email:g.email.trim().toLowerCase(),weeksInBlock:parseInt(g.weeksInBlock),totalSessions:parseInt(g.totalSessions),sessionDuration:parseInt(g.sessionDuration),startDate:Pe.fromDate(new Date(g.startDate)),endDate:Pe.fromDate(new Date(g.endDate)),status:g.status};N&&!te?.uid&&(C.uid=N),await Nr(mn(ze,"clients",$),C),e(s.map(R=>R.id===$?{...R,...g,uid:N||R.uid,weeksInBlock:parseInt(g.weeksInBlock),totalSessions:parseInt(g.totalSessions),sessionDuration:parseInt(g.sessionDuration),startDate:Pe.fromDate(new Date(g.startDate)),endDate:Pe.fromDate(new Date(g.endDate))}:R)),p(null),N&&!te?.uid&&alert("Portal access created! Client can now log in.")}catch(te){console.error("Error updating client:",te),alert("Failed to update client")}},pe=async $=>{try{const te=s.find(N=>N.id===$)?.status==="archived"?"active":"archived";await Nr(mn(ze,"clients",$),{status:te}),e(s.map(N=>N.id===$?{...N,status:te}:N))}catch(te){console.error("Error archiving client:",te),alert("Failed to update client status")}};return o?m.jsx("div",{className:"client-list-loading",children:"Loading clients..."}):s.length===0?m.jsxs("div",{className:"client-list-empty",children:[m.jsx("p",{children:"No clients yet"}),m.jsx("span",{children:"Add your first client to get started"})]}):m.jsx("div",{className:"client-list",children:s.map($=>m.jsx("div",{className:`client-card ${$.status==="archived"?"archived":""}`,children:h===$.id?m.jsxs("div",{className:"edit-form",children:[m.jsxs("div",{className:"edit-row",children:[m.jsx("input",{type:"text",name:"name",value:g.name,onChange:G,placeholder:"Name"}),m.jsx("input",{type:"email",name:"email",value:g.email,onChange:G,placeholder:"Email"})]}),m.jsxs("div",{className:"edit-row",children:[m.jsx("input",{type:"number",name:"weeksInBlock",value:g.weeksInBlock,onChange:G,placeholder:"Weeks",min:"1"}),m.jsx("input",{type:"number",name:"totalSessions",value:g.totalSessions,onChange:G,placeholder:"Total Sessions",min:"1"}),m.jsxs("select",{name:"sessionDuration",value:g.sessionDuration,onChange:G,children:[m.jsx("option",{value:"30",children:"30 min"}),m.jsx("option",{value:"45",children:"45 min"})]})]}),m.jsxs("div",{className:"edit-row",children:[m.jsx("input",{type:"date",name:"startDate",value:g.startDate,onChange:G}),m.jsx("input",{type:"date",name:"endDate",value:g.endDate,onChange:G})]}),m.jsx("div",{className:"edit-row password-row",children:g.hasPortalAccess?m.jsx("div",{className:"portal-status has-access",children:" Has portal access"}):m.jsxs(m.Fragment,{children:[m.jsx("input",{type:"text",name:"password",value:g.password,onChange:G,placeholder:"Set portal password (min 6 chars)"}),m.jsx("span",{className:"password-hint",children:"Set password to enable client portal"})]})}),m.jsxs("div",{className:"edit-actions",children:[m.jsx("button",{className:"save-edit-btn",onClick:()=>le($.id),children:"Save"}),m.jsx("button",{className:"cancel-edit-btn",onClick:()=>p(null),children:"Cancel"})]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"client-header",children:[m.jsxs("div",{className:"client-info",children:[m.jsx("h3",{children:$.name}),m.jsx("span",{className:"client-email",children:$.email})]}),m.jsx("div",{className:"client-status",children:m.jsx("span",{className:`status-badge ${$.status}`,children:$.status})})]}),m.jsxs("div",{className:"client-details",children:[m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:"Block"}),m.jsxs("span",{className:"detail-value",children:[$.weeksInBlock," weeks"]})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:"Sessions"}),m.jsxs("span",{className:"detail-value",children:[w($)," / ",$.totalSessions," remaining"]})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:"Booked"}),m.jsxs("span",{className:"detail-value",children:[P($.id)," sessions"]})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:"Duration"}),m.jsxs("span",{className:"detail-value",children:[$.sessionDuration||45," min"]})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:"Start"}),m.jsx("span",{className:"detail-value",children:L($.startDate)})]}),m.jsxs("div",{className:"detail-item",children:[m.jsx("span",{className:"detail-label",children:"End"}),m.jsx("span",{className:"detail-value",children:L($.endDate)})]})]}),m.jsxs("div",{className:"client-actions",children:[m.jsx("button",{className:"action-btn edit",onClick:()=>ee($),children:"Edit"}),m.jsx("button",{className:"action-btn archive",onClick:()=>pe($.id),children:$.status==="archived"?"Reactivate":"Archive"}),m.jsx("button",{className:"action-btn delete",onClick:()=>j($.id,$.name),children:"Delete"})]})]})},$.id))})}const wb={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},lp=["monday","tuesday","wednesday","thursday","friday"],EO=["Monday","Tuesday","Wednesday","Thursday","Friday"],TO=["Mon","Tue","Wed","Thu","Fri"],CT=s=>{const[e,n]=s.split(":"),r=parseInt(e),o=r>=12?"pm":"am";return`${r>12?r-12:r===0?12:r}:${n}${o}`},SO=s=>{const e=new Date(s),n=e.getDay(),r=e.getDate()-n+(n===0?-6:1);return e.setDate(r),lp.map((o,c)=>{const h=new Date(e);return h.setDate(e.getDate()+c),h})},Fn=s=>{const e=s.getFullYear(),n=(s.getMonth()+1).toString().padStart(2,"0"),r=s.getDate().toString().padStart(2,"0");return`${e}-${n}-${r}`},cp=s=>{const[e,n]=s.split(":").map(Number);return e*60+n},Qh=(s,e)=>{const n=cp(s)+e,r=Math.floor(n/60),o=n%60;return`${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},bO=s=>{const e=wb[s];if(!e)return[];const n=[];if(e.morning){let r=e.morning.start;for(;r<e.morning.end;)n.push({time:r,period:"morning"}),r=Qh(r,15)}if(e.afternoon){let r=e.afternoon.start;for(;r<e.afternoon.end;)n.push({time:r,period:"afternoon"}),r=Qh(r,15)}return n};function wO(){const[s,e]=M.useState(new Date),[n,r]=M.useState([]),[o,c]=M.useState([]),[h,p]=M.useState([]),[g,v]=M.useState([]),[T,S]=M.useState([]),[w,P]=M.useState(null),[L,j]=M.useState(null),[z,ee]=M.useState(!1),[G,le]=M.useState(!0);M.useEffect(()=>{r(SO(s))},[s]),M.useEffect(()=>{C()},[]);const pe=Y=>{if(P(Y),ee(!1),Y.startDate){const Z=Y.startDate.toDate?Y.startDate.toDate():new Date(Y.startDate);e(Z)}j(null)},$=Y=>{const Z=new Date,ue=Fn(Z),fe=`${Z.getHours().toString().padStart(2,"0")}:${Z.getMinutes().toString().padStart(2,"0")}`;return h.filter(ce=>ce.clientId!==Y?!1:ce.date<ue||ce.date===ue&&ce.time<fe).length},te=Y=>{const Z=$(Y.id);return(Y.totalSessions||0)-Z},N=Y=>{const Z=new Date,ue=Z.getFullYear(),fe=(Z.getMonth()+1).toString().padStart(2,"0"),ce=Z.getDate().toString().padStart(2,"0"),Re=`${ue}-${fe}-${ce}`,Me=`${Z.getHours().toString().padStart(2,"0")}:${Z.getMinutes().toString().padStart(2,"0")}`;return h.filter(at=>at.clientId!==Y?!1:at.date>Re||at.date===Re&&at.time>=Me).length},C=async()=>{try{const Z=(await an(bt(ze,"clients"))).docs.map(Te=>({id:Te.id,...Te.data()})).filter(Te=>Te.status==="active");c(Z);const fe=(await an(bt(ze,"sessions"))).docs.map(Te=>({id:Te.id,...Te.data()}));p(fe);const Re=(await an(bt(ze,"holidays"))).docs.map(Te=>({id:Te.id,...Te.data()}));v(Re);const at=(await an(bt(ze,"blockedTimes"))).docs.map(Te=>({id:Te.id,...Te.data()}));S(at)}catch(Y){console.error("Error fetching data:",Y)}le(!1)},R=Y=>{const Z=new Date(s);Z.setDate(Z.getDate()+Y*7),e(Z),j(null)},D=()=>{e(new Date),j(null)},x=Y=>{const Z=Fn(Y);return g.some(ue=>ue.date===Z)},k=(Y,Z)=>{const ue=Fn(Y);return T.some(fe=>fe.date===ue&&fe.time===Z)},I=async(Y,Z)=>{const ue=Fn(Y),fe=T.find(ce=>ce.date===ue&&ce.time===Z);try{if(fe)await Ir(mn(ze,"blockedTimes",fe.id)),S(T.filter(ce=>ce.id!==fe.id));else{const ce=await Ao(bt(ze,"blockedTimes"),{date:ue,time:Z,createdAt:Pe.now()});S([...T,{id:ce.id,date:ue,time:Z}])}}catch(ce){console.error("Error toggling blocked time:",ce),alert("Failed to update time slot")}},we=Y=>{const Z=Fn(Y);return h.filter(ue=>ue.date===Z)},Ve=(Y,Z)=>{const ue=Fn(Y);return h.find(fe=>fe.date===ue&&fe.time===Z)},J=(Y,Z,ue)=>{const fe=lp[Y.getDay()-1];if(!fe||x(Y))return!1;const ce=Math.ceil(ue/15);for(let vt=0;vt<ce;vt++){const Wt=Qh(Z,vt*15);if(k(Y,Wt))return!1}const Re=Fn(Y);if(h.find(vt=>vt.date===Re&&vt.time===Z))return!1;const at=Qh(Z,ue),Te=wb[fe],pt=Te.morning&&at<=Te.morning.end,Mt=Te.afternoon&&at<=Te.afternoon.end,Ft=Te.morning&&Z>=Te.morning.start&&Z<Te.morning.end,oi=Te.afternoon&&Z>=Te.afternoon.start&&Z<Te.afternoon.end;if(Ft&&!pt||oi&&!Mt)return!1;for(const vt of h){if(vt.date!==Re)continue;const Wt=cp(vt.time),Mn=Wt+(vt.duration||45),Xe=cp(Z),We=Xe+ue;if(Xe<Mn&&We>Wt)return!1}return!0},he=async(Y,Z)=>{const ue=Ve(Y,Z);if(ue){if(window.confirm(`Cancel ${ue.clientName}'s session at ${CT(Z)}?`))try{await Ir(mn(ze,"sessions",ue.id)),p(h.filter(ce=>ce.id!==ue.id))}catch(ce){console.error("Error cancelling session:",ce),alert("Failed to cancel session")}return}if(!w){alert("Please select a client first");return}if(!J(Y,Z,w.sessionDuration||45)){alert("This slot is not available for this client's session duration");return}if(h.filter(ce=>ce.clientId===w.id).length>=w.totalSessions){alert(`${w.name} has already booked all ${w.totalSessions} sessions`);return}try{const ce=Fn(Y),Re={clientId:w.id,clientName:w.name,date:ce,time:Z,duration:w.sessionDuration||45,createdAt:Pe.now()},Me=await Ao(bt(ze,"sessions"),Re);p([...h,{id:Me.id,...Re}])}catch(ce){console.error("Error booking session:",ce),alert("Failed to book session")}},_e=async()=>{if(!w)return;const Y=w.startDate?.toDate?w.startDate.toDate():new Date(w.startDate),Z=w.endDate?.toDate?w.endDate.toDate():new Date(w.endDate),ue=h.filter(Te=>Te.clientId!==w.id?!1:n.some(pt=>Fn(pt)===Te.date));if(ue.length===0){alert("No sessions in current week to repeat. Book some sessions first, then use this button.");return}const fe=w.weeksInBlock||Math.ceil((Z-Y)/(10080*60*1e3)),ce=ue.map(Te=>({dayOfWeek:new Date(Te.date).getDay(),time:Te.time}));let Re=[];const Me=h.filter(Te=>Te.clientId===w.id).length;for(let Te=0;Te<fe;Te++){const pt=new Date(Y);pt.setDate(pt.getDate()+Te*7);const Mt=new Date(pt),Ft=Mt.getDay(),oi=Mt.getDate()-Ft+(Ft===0?-6:1);Mt.setDate(oi);for(const vt of ce){const Wt=new Date(Mt),Mn=vt.dayOfWeek===0?6:vt.dayOfWeek-1;Wt.setDate(Mt.getDate()+Mn);const Xe=Fn(Wt);h.some(We=>We.clientId===w.id&&We.date===Xe&&We.time===vt.time)||Wt<Y||Wt>Z||g.some(We=>We.date===Xe)||Re.push({dateKey:Xe,time:vt.time,sessionDate:Wt})}}const at=Me+Re.length;if(at>w.totalSessions){alert(`This would create ${Re.length} new sessions (${at} total), but client only has ${w.totalSessions} sessions in their package.

You can still book ${w.totalSessions-Me} more sessions.`);return}if(Re.length===0){alert("All weeks already have sessions booked for this pattern.");return}if(window.confirm(`This will create ${Re.length} new sessions across the block.

(${Me} existing + ${Re.length} new = ${at} total)

Continue?`))try{const Te=[];for(const pt of Re){const Mt={clientId:w.id,clientName:w.name,date:pt.dateKey,time:pt.time,duration:w.sessionDuration||45,createdAt:Pe.now()},Ft=await Ao(bt(ze,"sessions"),Mt);Te.push({id:Ft.id,...Mt})}p([...h,...Te]),alert(`Created ${Te.length} new sessions!`)}catch(Te){console.error("Error repeating weekly:",Te),alert("Failed to repeat sessions")}},Ue=async Y=>{const Z=Fn(Y),ue=g.find(fe=>fe.date===Z);try{if(ue)await Ir(mn(ze,"holidays",ue.id)),v(g.filter(fe=>fe.id!==ue.id));else{const fe=await Ao(bt(ze,"holidays"),{date:Z,createdAt:Pe.now()});v([...g,{id:fe.id,date:Z}])}}catch(fe){console.error("Error toggling day availability:",fe),alert("Failed to update day availability")}};if(G)return m.jsx("div",{className:"calendar-loading",children:"Loading calendar..."});const Be=n[0],V=n[4],ie=Be&&V?`${Be.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${V.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return m.jsxs("div",{className:"calendar",children:[m.jsxs("div",{className:"calendar-header",children:[m.jsxs("div",{className:"calendar-nav",children:[m.jsx("button",{onClick:()=>R(-1),children:""}),m.jsx("button",{onClick:D,children:"Today"}),m.jsx("button",{onClick:()=>R(1),children:""})]}),m.jsx("h3",{children:ie})]}),m.jsxs("div",{className:"client-selector",children:[m.jsx("span",{className:"selector-label",children:"Booking for:"}),w?m.jsxs("div",{className:"selected-client",children:[m.jsxs("div",{className:"selected-info",children:[m.jsx("strong",{children:w.name}),m.jsxs("span",{children:[w.sessionDuration||45,"min  ",te(w),"/",w.totalSessions," remaining"]}),m.jsxs("span",{className:"booked-info",children:[N(w.id)," booked"]})]}),m.jsx("button",{onClick:()=>P(null),children:"Change"})]}):m.jsx("button",{className:"select-client-btn",onClick:()=>ee(!0),children:"Select Client"})]}),w&&m.jsxs("div",{className:"repeat-weekly-section",children:[m.jsx("button",{className:"repeat-weekly-btn",onClick:_e,children:"Repeat This Week's Schedule For All Weeks"}),m.jsx("span",{className:"repeat-hint",children:"Copies current week's sessions to all weeks in block"})]}),m.jsx("div",{className:"day-cards",children:n.map((Y,Z)=>{const ue=we(Y),fe=Fn(Y)===Fn(new Date),ce=x(Y);return m.jsxs("div",{className:`day-card ${L===Z?"selected":""} ${fe?"today":""} ${ce?"holiday":""}`,onClick:()=>j(L===Z?null:Z),children:[m.jsxs("div",{className:"day-card-header",children:[m.jsx("span",{className:"day-name",children:TO[Z]}),m.jsx("span",{className:"day-date",children:Y.getDate()})]}),ce?m.jsx("div",{className:"day-card-status holiday",children:"Unavailable"}):m.jsxs("div",{className:"day-card-status",children:[ue.length," session",ue.length!==1?"s":""]})]},Z)})}),L!==null&&n[L]&&m.jsxs("div",{className:"time-panel",children:[m.jsxs("div",{className:"time-panel-header",children:[m.jsxs("h4",{children:[EO[L]," ",n[L].getDate()]}),m.jsx("button",{className:"close-panel",onClick:()=>j(null),children:""})]}),m.jsx("div",{className:"availability-toggle",children:m.jsx("button",{className:`toggle-availability-btn ${x(n[L])?"unavailable":"available"}`,onClick:()=>Ue(n[L]),children:x(n[L])?"Mark Day Available":"Mark Day Unavailable"})}),x(n[L])?m.jsxs("div",{className:"day-unavailable-message",children:[m.jsx("p",{children:"This day is marked as unavailable"}),m.jsx("span",{children:"Tap the button above to make it available again"})]}):m.jsx("div",{className:"time-slots",children:bO(lp[L]).map(({time:Y,period:Z},ue,fe)=>{const ce=Ve(n[L],Y),Re=k(n[L],Y),Me=w&&J(n[L],Y,w.sessionDuration||45),at=ue===0||fe[ue-1]?.period!==Z;return m.jsxs("div",{children:[at&&m.jsx("div",{className:"period-label",children:Z==="morning"?"Morning":"Afternoon"}),m.jsxs("div",{className:"time-slot-row",children:[m.jsxs("button",{className:`time-slot ${ce?"booked":""} ${Re?"blocked":""} ${Me?"available":""} ${!ce&&!Re&&!Me&&w?"unavailable":""}`,onClick:()=>!Re&&he(n[L],Y),disabled:Re,children:[m.jsx("span",{className:"slot-time",children:CT(Y)}),ce?m.jsxs("span",{className:"slot-client",children:[ce.clientName," (",ce.duration,"m)"]}):Re?m.jsx("span",{className:"slot-blocked",children:"Blocked"}):Me?m.jsx("span",{className:"slot-available",children:"Available"}):w?m.jsx("span",{className:"slot-unavailable",children:"Unavailable"}):m.jsx("span",{className:"slot-empty",children:"Select client to book"})]}),m.jsx("button",{className:`block-toggle-btn ${Re?"is-blocked":""}`,onClick:()=>I(n[L],Y),disabled:!!ce,title:Re?"Unblock this time":"Block this time",children:Re?"":""})]})]},Y)})})]}),z&&m.jsx("div",{className:"modal-overlay",onClick:()=>ee(!1),children:m.jsxs("div",{className:"modal-content",onClick:Y=>Y.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{children:"Select Client"}),m.jsx("button",{className:"close-btn",onClick:()=>ee(!1),children:""})]}),m.jsx("div",{className:"client-list-picker",children:o.length===0?m.jsx("p",{className:"no-items",children:"No active clients"}):o.map(Y=>{const Z=Y.startDate?.toDate?Y.startDate.toDate():new Date(Y.startDate),ue=Y.endDate?.toDate?Y.endDate.toDate():new Date(Y.endDate),fe=te(Y),ce=N(Y.id);return m.jsxs("button",{className:"client-option",onClick:()=>pe(Y),children:[m.jsx("strong",{children:Y.name}),m.jsxs("span",{children:[Y.sessionDuration||45,"min  ",fe,"/",Y.totalSessions," remaining  ",ce," booked"]}),m.jsxs("span",{className:"client-dates",children:[Z.toLocaleDateString("en-GB",{day:"numeric",month:"short"})," - ",ue.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]},Y.id)})})]})})]})}const NT=s=>{const[e,n]=s.split(":"),r=parseInt(e),o=r>=12?"pm":"am";return`${r>12?r-12:r===0?12:r}:${n}${o}`},bc=s=>{const e=s.getFullYear(),n=(s.getMonth()+1).toString().padStart(2,"0"),r=s.getDate().toString().padStart(2,"0");return`${e}-${n}-${r}`},Ab=s=>s===bc(new Date),AO=s=>{const e=new Date;return e.setDate(e.getDate()+1),s===bc(e)},IT=s=>Ab(s)?"Today":AO(s)?"Tomorrow":new Date(s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"}),DT=s=>{const e=new Date,n=bc(e),r=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;if(s.date<n)return!0;if(s.date===n){const o=xT(s.time)+(s.duration||45);return xT(r)>=o}return!1},xT=s=>{const[e,n]=s.split(":").map(Number);return e*60+n};function RO(){const[s,e]=M.useState([]),[n,r]=M.useState(!0),[o,c]=M.useState(new Date);M.useEffect(()=>{h();const L=setInterval(()=>{c(new Date)},6e4);return()=>clearInterval(L)},[]);const h=async()=>{try{const j=(await an(bt(ze,"sessions"))).docs.map(G=>({id:G.id,...G.data()})),z=bc(new Date),ee=j.filter(G=>G.date>=z).sort((G,le)=>G.date!==le.date?G.date.localeCompare(le.date):G.time.localeCompare(le.time));e(ee)}catch(L){console.error("Error fetching sessions:",L)}r(!1)},p=async L=>{if(window.confirm(`Cancel ${L.clientName}'s session at ${NT(L.time)} on ${IT(L.date)}?`))try{await Ir(mn(ze,"sessions",L.id)),e(s.filter(j=>j.id!==L.id))}catch(j){console.error("Error cancelling session:",j),alert("Failed to cancel session")}};if(n)return m.jsx("div",{className:"schedule-loading",children:"Loading schedule..."});const g=s.reduce((L,j)=>{const z=j.date;return L[z]||(L[z]=[]),L[z].push(j),L},{}),v=Object.keys(g).sort(),T=bc(new Date),S=g[T]||[],w=S.filter(L=>DT(L)).length,P=S.length-w;return m.jsxs("div",{className:"schedule",children:[m.jsxs("div",{className:"today-summary",children:[m.jsx("h3",{children:"Today's Sessions"}),m.jsx("div",{className:"today-count",children:S.length===0?m.jsx("span",{className:"no-sessions",children:"No sessions today"}):m.jsxs("div",{className:"today-stats",children:[m.jsxs("span",{className:"completed-count",children:[w," completed"]}),m.jsxs("span",{className:"remaining-count",children:[P," remaining"]})]})})]}),v.length===0?m.jsx("div",{className:"no-upcoming",children:m.jsx("p",{children:"No upcoming sessions booked"})}):m.jsx("div",{className:"sessions-list",children:v.map(L=>m.jsxs("div",{className:`date-group ${Ab(L)?"today":""}`,children:[m.jsxs("div",{className:"date-header",children:[m.jsx("span",{className:"date-label",children:IT(L)}),m.jsxs("span",{className:"date-count",children:[g[L].length," session",g[L].length!==1?"s":""]})]}),m.jsx("div",{className:"date-sessions",children:g[L].map(j=>{const z=DT(j);return m.jsxs("div",{className:`session-card ${z?"completed":""}`,children:[m.jsx("div",{className:"session-time",children:NT(j.time)}),m.jsxs("div",{className:"session-details",children:[m.jsx("strong",{children:j.clientName}),m.jsxs("span",{children:[j.duration,"min session"]})]}),z?m.jsx("div",{className:"completed-badge",children:""}):m.jsx("button",{className:"cancel-session-btn",onClick:()=>p(j),children:"Cancel"})]},j.id)})})]},L))})]})}const Rb={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},up=["monday","tuesday","wednesday","thursday","friday"],CO=["Monday","Tuesday","Wednesday","Thursday","Friday"],NO=s=>{const[e,n]=s.split(":"),r=parseInt(e),o=r>=12?"pm":"am";return`${r>12?r-12:r===0?12:r}:${n}${o}`},Zl=s=>{const e=s.getFullYear(),n=(s.getMonth()+1).toString().padStart(2,"0"),r=s.getDate().toString().padStart(2,"0");return`${e}-${n}-${r}`},IO=s=>{const e=new Date(s),n=e.getDay(),r=e.getDate()-n+(n===0?-6:1);return e.setDate(r),up.map((o,c)=>{const h=new Date(e);return h.setDate(e.getDate()+c),h})},hp=s=>{const[e,n]=s.split(":").map(Number);return e*60+n},dp=(s,e)=>{const n=hp(s)+e,r=Math.floor(n/60),o=n%60;return`${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},DO=s=>{const e=Rb[s];if(!e)return[];const n=[];if(e.morning){let r=e.morning.start;for(;r<e.morning.end;)n.push({time:r,period:"morning"}),r=dp(r,15)}if(e.afternoon){let r=e.afternoon.start;for(;r<e.afternoon.end;)n.push({time:r,period:"afternoon"}),r=dp(r,15)}return n};function xO(){const[s,e]=M.useState(new Date),[n,r]=M.useState([]),[o,c]=M.useState([]),[h,p]=M.useState([]),[g,v]=M.useState(!0),[T,S]=M.useState(45);M.useEffect(()=>{r(IO(s))},[s]),M.useEffect(()=>{w()},[]);const w=async()=>{try{const te=(await an(bt(ze,"sessions"))).docs.map(R=>({id:R.id,...R.data()}));c(te);const C=(await an(bt(ze,"holidays"))).docs.map(R=>({id:R.id,...R.data()}));p(C)}catch($){console.error("Error fetching data:",$)}v(!1)},P=$=>{const te=new Date(s);te.setDate(te.getDate()+$*7),e(te)},L=()=>{e(new Date)},j=$=>{const te=Zl($);return h.some(N=>N.date===te)},z=($,te)=>{const N=up[$.getDay()-1];if(!N||j($))return!1;const C=Zl($),R=new Date,D=Zl(R);if(C<D)return!1;if(C===D){const he=`${R.getHours().toString().padStart(2,"0")}:${R.getMinutes().toString().padStart(2,"0")}`;if(te<he)return!1}const x=dp(te,T),k=Rb[N],I=k.morning&&te>=k.morning.start&&te<k.morning.end,we=k.afternoon&&te>=k.afternoon.start&&te<k.afternoon.end,Ve=k.morning&&x<=k.morning.end,J=k.afternoon&&x<=k.afternoon.end;if(I&&!Ve||we&&!J)return!1;for(const he of o){if(he.date!==C)continue;const _e=hp(he.time),Ue=_e+(he.duration||45),Be=hp(te),V=Be+T;if(Be<Ue&&V>_e)return!1}return!0},ee=($,te)=>{const N=up[te];return DO(N).filter(R=>z($,R.time))};if(g)return m.jsx("div",{className:"availability-loading",children:"Loading availability..."});const G=n[0],le=n[4],pe=G&&le?`${G.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${le.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return m.jsxs("div",{className:"availability",children:[m.jsxs("div",{className:"availability-header",children:[m.jsxs("div",{className:"availability-nav",children:[m.jsx("button",{onClick:()=>P(-1),children:""}),m.jsx("button",{onClick:L,children:"Today"}),m.jsx("button",{onClick:()=>P(1),children:""})]}),m.jsx("h3",{children:pe}),m.jsxs("div",{className:"duration-selector",children:[m.jsx("label",{children:"Session:"}),m.jsxs("select",{value:T,onChange:$=>S(Number($.target.value)),children:[m.jsx("option",{value:30,children:"30 min"}),m.jsx("option",{value:45,children:"45 min"}),m.jsx("option",{value:60,children:"60 min"})]})]})]}),m.jsx("div",{className:"availability-grid",children:n.map(($,te)=>{const N=j($),C=N?[]:ee($,te),R=Zl($)===Zl(new Date),D=$<new Date&&!R;return m.jsxs("div",{className:`day-column ${R?"today":""} ${D?"past":""}`,children:[m.jsxs("div",{className:"day-header",children:[m.jsx("span",{className:"day-name",children:CO[te]}),m.jsxs("span",{className:"day-date",children:[$.getDate(),"/",$.getMonth()+1]}),N&&m.jsx("span",{className:"holiday-badge",children:"Holiday"})]}),m.jsx("div",{className:"slots-container",children:N?m.jsx("div",{className:"no-slots",children:"Unavailable"}):C.length===0?m.jsx("div",{className:"no-slots",children:"Fully booked"}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"slots-count",children:[C.length," slots"]}),m.jsx("div",{className:"slots-list",children:C.map(x=>m.jsx("div",{className:`slot ${x.period}`,children:NO(x.time)},x.time))})]})})]},te)})})]})}function OO(){const[s,e]=M.useState("schedule"),[n,r]=M.useState(0),[o,c]=M.useState(!1),[h,p]=M.useState([]),[g,v]=M.useState(null),{currentUser:T,logout:S,isAdmin:w,loading:P}=Wo(),L=ks(),j=M.useRef(0),z=M.useRef(!1);M.useRef(null),M.useEffect(()=>{!P&&(!T||!w)&&L("/")},[T,w,P,L]),M.useEffect(()=>{T&&w&&ee()},[T,w]);const ee=async()=>{try{const D=Sc(bt(ze,"rescheduleRequests"),Kh("status","==","pending")),k=(await an(D)).docs.map(I=>({id:I.id,...I.data()}));k.sort((I,we)=>{const Ve=I.createdAt?.toDate?I.createdAt.toDate():new Date(0);return(we.createdAt?.toDate?we.createdAt.toDate():new Date(0))-Ve}),p(k)}catch(D){console.error("Error fetching reschedule requests:",D)}};M.useEffect(()=>{(async()=>{if(!(!T||!w))try{const[x,k]=await Promise.all([an(bt(ze,"clients")),an(bt(ze,"sessions"))]),I=new Set(x.docs.map(Ve=>Ve.id)),we=k.docs.filter(Ve=>!I.has(Ve.data().clientId));if(we.length>0){console.log(`Cleaning up ${we.length} orphaned sessions...`);const Ve=we.map(J=>Ir(mn(ze,"sessions",J.id)));await Promise.all(Ve),console.log("Orphaned sessions cleaned up successfully")}}catch(x){console.error("Error cleaning up orphaned sessions:",x)}})()},[T,w]),M.useEffect(()=>{const D=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,x=we=>{D()<=0&&(j.current=we.touches[0].clientY,z.current=!0)},k=we=>{if(!z.current)return;const J=we.touches[0].clientY-j.current;J>0&&D()<=0&&r(Math.min(J*.5,80))},I=()=>{n>60?(c(!0),setTimeout(()=>{window.location.reload()},300)):r(0),z.current=!1};return document.addEventListener("touchstart",x,{passive:!0}),document.addEventListener("touchmove",k,{passive:!0}),document.addEventListener("touchend",I),()=>{document.removeEventListener("touchstart",x),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",I)}},[n]);const G=()=>{c(!0),setTimeout(()=>{window.location.reload()},300)},le=async()=>{try{await S(),L("/")}catch(D){console.error("Failed to log out:",D)}},pe=()=>{L("/add-client")},$=D=>new Date(D).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),te=D=>{const[x,k]=D.split(":"),I=parseInt(x),we=I>=12?"pm":"am";return`${I>12?I-12:I===0?12:I}:${k}${we}`},N=async D=>{if(window.confirm(`Approve reschedule for ${D.clientName}?

From: ${$(D.originalDate)} at ${te(D.originalTime)}
To: ${$(D.requestedDate)} at ${te(D.requestedTime)}`)){v(D.id);try{await Nr(mn(ze,"sessions",D.sessionId),{date:D.requestedDate,time:D.requestedTime}),await Nr(mn(ze,"rescheduleRequests",D.id),{status:"approved",respondedAt:Pe.now()}),p(h.filter(x=>x.id!==D.id))}catch(x){console.error("Error approving request:",x),alert("Failed to approve request. Please try again.")}v(null)}},C=async D=>{if(window.confirm(`Reject reschedule request from ${D.clientName}?`)){v(D.id);try{await Nr(mn(ze,"rescheduleRequests",D.id),{status:"rejected",respondedAt:Pe.now()}),p(h.filter(x=>x.id!==D.id))}catch(x){console.error("Error rejecting request:",x),alert("Failed to reject request. Please try again.")}v(null)}};if(P)return m.jsx("div",{className:"loading",children:"Loading..."});if(!T||!w)return null;const R=h.length;return m.jsxs("div",{className:"dashboard",children:[n>0&&m.jsxs("div",{className:"pull-indicator",style:{height:n},children:[m.jsx("div",{className:`pull-spinner ${o?"spinning":""}`,children:o?"":""}),m.jsx("span",{children:o?"Refreshing...":n>60?"Release to refresh":"Pull to refresh"})]}),m.jsxs("header",{className:"dashboard-header",children:[m.jsxs("div",{className:"header-left",children:[m.jsx("h1",{children:"Mind Core Fitness"}),m.jsx("span",{className:"admin-badge",children:"Admin"})]}),m.jsxs("nav",{className:"header-nav",children:[m.jsx("button",{className:`nav-btn ${s==="schedule"?"active":""}`,onClick:()=>e("schedule"),children:"Today"}),m.jsx("button",{className:`nav-btn ${s==="clients"?"active":""}`,onClick:()=>e("clients"),children:"Clients"}),m.jsx("button",{className:`nav-btn ${s==="calendar"?"active":""}`,onClick:()=>e("calendar"),children:"Calendar"}),m.jsxs("button",{className:`nav-btn ${s==="requests"?"active":""} ${R>0?"has-badge":""}`,onClick:()=>e("requests"),children:["Requests",R>0&&m.jsx("span",{className:"nav-badge",children:R})]}),m.jsx("button",{className:`nav-btn ${s==="availability"?"active":""}`,onClick:()=>e("availability"),children:"Slots"})]}),m.jsxs("div",{className:"header-actions",children:[m.jsx("button",{className:"refresh-btn",onClick:G,disabled:o,children:o?"":""}),m.jsx("button",{className:"logout-btn",onClick:le,children:"Log Out"})]})]}),m.jsxs("main",{className:"dashboard-main",children:[s==="schedule"&&m.jsxs("div",{className:"schedule-view",children:[m.jsx("div",{className:"view-header",children:m.jsx("h2",{children:"Schedule"})}),m.jsx(RO,{})]}),s==="clients"&&m.jsxs("div",{className:"clients-view",children:[m.jsxs("div",{className:"view-header",children:[m.jsx("h2",{children:"Clients"}),m.jsx("button",{className:"add-btn",onClick:pe,children:"+ Add Client"})]}),m.jsx(_O,{})]}),s==="calendar"&&m.jsxs("div",{className:"calendar-view",children:[m.jsx("div",{className:"view-header",children:m.jsx("h2",{children:"Calendar"})}),m.jsx(wO,{})]}),s==="requests"&&m.jsxs("div",{className:"requests-view",children:[m.jsx("div",{className:"view-header",children:m.jsx("h2",{children:"Reschedule Requests"})}),h.length===0?m.jsxs("div",{className:"no-requests",children:[m.jsx("p",{children:"No pending requests"}),m.jsx("span",{children:"When clients request to reschedule, they will appear here"})]}):m.jsx("div",{className:"requests-list",children:h.map(D=>m.jsxs("div",{className:"request-card",children:[m.jsxs("div",{className:"request-header",children:[m.jsx("span",{className:"client-name",children:D.clientName}),m.jsx("span",{className:"request-time",children:D.createdAt?.toDate?D.createdAt.toDate().toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""})]}),m.jsx("div",{className:"request-details",children:m.jsxs("div",{className:"request-change",children:[m.jsxs("div",{className:"from-session",children:[m.jsx("span",{className:"label",children:"From:"}),m.jsxs("span",{className:"value",children:[$(D.originalDate)," at ",te(D.originalTime)]})]}),m.jsx("div",{className:"arrow",children:""}),m.jsxs("div",{className:"to-session",children:[m.jsx("span",{className:"label",children:"To:"}),m.jsxs("span",{className:"value",children:[$(D.requestedDate)," at ",te(D.requestedTime)]})]})]})}),m.jsxs("div",{className:"request-actions",children:[m.jsx("button",{className:"approve-btn",onClick:()=>N(D),disabled:g===D.id,children:g===D.id?"Processing...":"Approve"}),m.jsx("button",{className:"reject-btn",onClick:()=>C(D),disabled:g===D.id,children:"Reject"})]})]},D.id))})]}),s==="availability"&&m.jsxs("div",{className:"availability-view",children:[m.jsx("div",{className:"view-header",children:m.jsx("h2",{children:"Available Slots"})}),m.jsx(xO,{})]})]})]})}function MO(){const[s,e]=M.useState({name:"",email:"",weeksInBlock:"",numberOfSessions:"",sessionDuration:"45",startDate:"",endDate:""}),[n,r]=M.useState(!1),[o,c]=M.useState(""),{currentUser:h,isAdmin:p,loading:g}=Wo(),v=ks();M.useEffect(()=>{!g&&(!h||!p)&&v("/")},[h,p,g,v]),M.useEffect(()=>{if(s.startDate&&s.weeksInBlock){const P=new Date(s.startDate),L=parseInt(s.weeksInBlock);if(!isNaN(L)&&L>0){const j=new Date(P);j.setDate(j.getDate()+L*7),e(z=>({...z,endDate:j.toISOString().split("T")[0]}))}}},[s.startDate,s.weeksInBlock]);const T=P=>{const{name:L,value:j}=P.target;e(z=>({...z,[L]:j}))},S=async P=>{P.preventDefault(),c(""),r(!0);try{const L={name:s.name.trim(),email:s.email.trim().toLowerCase(),weeksInBlock:parseInt(s.weeksInBlock),totalSessions:parseInt(s.numberOfSessions),sessionsRemaining:parseInt(s.numberOfSessions),sessionDuration:parseInt(s.sessionDuration),startDate:Pe.fromDate(new Date(s.startDate)),endDate:Pe.fromDate(new Date(s.endDate)),status:"active",createdAt:Pe.now()};await Ao(bt(ze,"clients"),L),v("/dashboard")}catch(L){console.error("Error adding client:",L),c("Failed to add client. Please try again."),r(!1)}},w=()=>{v("/dashboard")};return g?m.jsx("div",{className:"loading",children:"Loading..."}):!h||!p?null:m.jsxs("div",{className:"add-client-page",children:[m.jsxs("header",{className:"page-header",children:[m.jsx("button",{className:"back-btn",onClick:w,children:" Back"}),m.jsx("h1",{children:"Add New Client"})]}),m.jsxs("main",{className:"page-content",children:[o&&m.jsx("div",{className:"form-error",children:o}),m.jsxs("form",{onSubmit:S,children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"name",children:"Client Name"}),m.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:T,placeholder:"John Smith",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"email",children:"Client Email"}),m.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:T,placeholder:"john@example.com",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"weeksInBlock",children:"Weeks in Block"}),m.jsx("input",{type:"number",id:"weeksInBlock",name:"weeksInBlock",value:s.weeksInBlock,onChange:T,placeholder:"8",min:"1",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"numberOfSessions",children:"Number of Sessions"}),m.jsx("input",{type:"number",id:"numberOfSessions",name:"numberOfSessions",value:s.numberOfSessions,onChange:T,placeholder:"16",min:"1",required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"sessionDuration",children:"Session Duration"}),m.jsxs("select",{id:"sessionDuration",name:"sessionDuration",value:s.sessionDuration,onChange:T,required:!0,children:[m.jsx("option",{value:"30",children:"30 minutes"}),m.jsx("option",{value:"45",children:"45 minutes"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"startDate",children:"Start Date"}),m.jsx("input",{type:"date",id:"startDate",name:"startDate",value:s.startDate,onChange:T,required:!0})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{htmlFor:"endDate",children:"End Date (auto-calculated)"}),m.jsx("input",{type:"date",id:"endDate",name:"endDate",value:s.endDate,onChange:T,required:!0}),m.jsx("span",{className:"helper-text",children:"Calculated from start date + weeks"})]}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{type:"button",className:"cancel-btn",onClick:w,children:"Cancel"}),m.jsx("button",{type:"submit",className:"submit-btn",disabled:n,children:n?"Saving...":"Save Client"})]})]})]})]})}const Cb={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},kO=["monday","tuesday","wednesday","thursday","friday"],gr=s=>{const e=s.getFullYear(),n=(s.getMonth()+1).toString().padStart(2,"0"),r=s.getDate().toString().padStart(2,"0");return`${e}-${n}-${r}`},fp=s=>{const[e,n]=s.split(":").map(Number);return e*60+n},Xh=(s,e)=>{const n=fp(s)+e,r=Math.floor(n/60),o=n%60;return`${r.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},jO=s=>{const e=Cb[s];if(!e)return[];const n=[];if(e.morning){let r=e.morning.start;for(;r<e.morning.end;)n.push({time:r,period:"morning"}),r=Xh(r,15)}if(e.afternoon){let r=e.afternoon.start;for(;r<e.afternoon.end;)n.push({time:r,period:"afternoon"}),r=Xh(r,15)}return n},VO=s=>{const e=s.getDay();return e>=1&&e<=5},Nb=s=>{const e=s.getDay();return e===0||e===6?null:kO[e-1]},LO=(s,e,n,r,o,c=null,h=[])=>{const p=Nb(s);if(!p)return!1;const g=gr(s);if(o.some(G=>G.date===g))return!1;const v=Math.ceil(n/15);for(let G=0;G<v;G++){const le=Xh(e,G*15);if(h.some(pe=>pe.date===g&&pe.time===le))return!1}const T=new Date,S=gr(T);if(g<S)return!1;if(g===S){const G=`${T.getHours().toString().padStart(2,"0")}:${T.getMinutes().toString().padStart(2,"0")}`;if(e<G)return!1}const w=Xh(e,n),P=Cb[p],L=P.morning&&e>=P.morning.start&&e<P.morning.end,j=P.afternoon&&e>=P.afternoon.start&&e<P.afternoon.end,z=P.morning&&w<=P.morning.end,ee=P.afternoon&&w<=P.afternoon.end;if(L&&!z||j&&!ee||!L&&!j)return!1;for(const G of r){if(c&&G.id===c||G.date!==g)continue;const le=fp(G.time),pe=le+(G.duration||45),$=fp(e),te=$+n;if($<pe&&te>le)return!1}return!0},PO=(s,e,n,r,o=null,c=[])=>{const h=Nb(s);return h?jO(h).filter(g=>LO(s,g.time,e,n,r,o,c)):[]};function UO(){const[s,e]=M.useState([]),[n,r]=M.useState([]),[o,c]=M.useState([]),[h,p]=M.useState([]),[g,v]=M.useState([]),[T,S]=M.useState(!0),[w,P]=M.useState(null),[L,j]=M.useState(!1),[z,ee]=M.useState(null),[G,le]=M.useState(null),[pe,$]=M.useState(null),[te,N]=M.useState([]),[C,R]=M.useState(!1),[D,x]=M.useState([]),[k,I]=M.useState(null),[we,Ve]=M.useState(!1),[J,he]=M.useState(0),_e=M.useRef(null),Ue=M.useRef(0),Be=M.useRef(!1),[V,ie]=M.useState(null),[Y,Z]=M.useState(null),{currentUser:ue,isClient:fe,clientData:ce,logout:Re,loading:Me}=Wo(),at=ks(),Te=M.useCallback((Q,ye="info")=>{I({message:Q,type:ye}),setTimeout(()=>I(null),4e3)},[]),pt=Q=>{const ye=Q.currentTarget,qe=ye.querySelector(".ripple");qe&&qe.remove();const Oe=document.createElement("span"),$t=Math.max(ye.clientWidth,ye.clientHeight),en=$t/2,Nt=ye.getBoundingClientRect();Oe.style.width=Oe.style.height=`${$t}px`,Oe.style.left=`${Q.clientX-Nt.left-en}px`,Oe.style.top=`${Q.clientY-Nt.top-en}px`,Oe.classList.add("ripple"),ye.appendChild(Oe),setTimeout(()=>Oe.remove(),600)},Mt=Q=>{_e.current&&_e.current.scrollTop===0&&(Ue.current=Q.touches[0].clientY,Be.current=!0)},Ft=Q=>{if(!Be.current||!_e.current)return;const qe=Q.touches[0].clientY-Ue.current;qe>0&&_e.current.scrollTop===0&&(Q.preventDefault(),he(Math.min(qe*.5,80)))},oi=async()=>{J>60&&!we&&(Ve(!0),await Mn(),Te("Refreshed!","success"),Ve(!1)),he(0),Be.current=!1},vt=(Q,ye)=>{const qe=Q.touches[0];Q.currentTarget.dataset.startX=qe.clientX,Q.currentTarget.dataset.startY=qe.clientY},Wt=(Q,ye)=>{const qe=Q.touches[0],Oe=parseFloat(Q.currentTarget.dataset.startX),$t=parseFloat(Q.currentTarget.dataset.startY),en=qe.clientX-Oe,Nt=qe.clientY-$t;Math.abs(en)>Math.abs(Nt)&&Math.abs(en)>10&&(Q.preventDefault(),en<-50?ie(ye):en>50&&ie(null))};M.useEffect(()=>{!Me&&(!ue||!fe)&&at("/")},[ue,fe,Me,at]),M.useEffect(()=>{ce&&Mn()},[ce]);const Mn=async()=>{try{const Q=Sc(bt(ze,"sessions"),Kh("clientId","==",ce.id)),qe=(await an(Q)).docs.map(et=>({id:et.id,...et.data()}));qe.sort((et,ui)=>et.date!==ui.date?et.date.localeCompare(ui.date):et.time.localeCompare(ui.time)),e(qe);const Oe=await an(bt(ze,"sessions"));r(Oe.docs.map(et=>({id:et.id,...et.data()})));const $t=await an(bt(ze,"holidays"));c($t.docs.map(et=>({id:et.id,...et.data()})));const en=await an(bt(ze,"blockedTimes"));p(en.docs.map(et=>({id:et.id,...et.data()})));const Nt=Sc(bt(ze,"rescheduleRequests"),Kh("clientId","==",ce.id)),Oa=(await an(Nt)).docs.map(et=>({id:et.id,...et.data()}));x(Oa.filter(et=>et.status==="pending"));const ss=Oa.filter(et=>{if(et.status==="pending"||!et.respondedAt)return!1;const ui=et.respondedAt.toDate?et.respondedAt.toDate():new Date(et.respondedAt),hi=new Date;return hi.setDate(hi.getDate()-7),ui>hi&&!et.dismissed});v(ss)}catch(Q){console.error("Error fetching data:",Q)}S(!1)},Xe=Q=>new Date(Q).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),We=Q=>{const[ye,qe]=Q.split(":"),Oe=parseInt(ye),$t=Oe>=12?"pm":"am";return`${Oe>12?Oe-12:Oe===0?12:Oe}:${qe}${$t}`},li=Q=>Q?(Q.toDate?Q.toDate():new Date(Q)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",zr=Q=>{const ye=new Date,qe=gr(ye),Oe=`${ye.getHours().toString().padStart(2,"0")}:${ye.getMinutes().toString().padStart(2,"0")}`;return Q.date<qe||Q.date===qe&&Q.time<Oe},Ca=()=>s.filter(Q=>zr(Q)).length,Jt=()=>s.filter(Q=>!zr(Q)),Ni=Q=>{Z({title:"Cancel Session?",message:`Cancel your session on ${Xe(Q.date)} at ${We(Q.time)}? This cannot be undone.`,onConfirm:async()=>{Z(null),P(Q.id),ie(null);try{await Ir(mn(ze,"sessions",Q.id)),e(s.filter(ye=>ye.id!==Q.id)),Te("Session cancelled","success")}catch(ye){console.error("Error cancelling session:",ye),Te("Failed to cancel session. Please try again.","error")}P(null)},onCancel:()=>Z(null)})},Br=async()=>{try{await Re(),at("/")}catch(Q){console.error("Failed to log out:",Q)}},is=Q=>D.some(ye=>ye.sessionId===Q),ci=Q=>{ee(Q),le(null),$(null),N([]),j(!0)},Vs=()=>{j(!1),ee(null),le(null),$(null),N([])},Na=()=>ce.endDate?ce.endDate.toDate?ce.endDate.toDate():new Date(ce.endDate):new Date,Ia=()=>{const Q=[],ye=new Date,qe=Na(),Oe=new Date(ye);for(Oe.setDate(Oe.getDate()+1);Oe<=qe;){if(VO(Oe)){const $t=gr(Oe);o.some(Nt=>Nt.date===$t)||Q.push(new Date(Oe))}Oe.setDate(Oe.getDate()+1)}return Q},Da=Q=>{le(Q),$(null);const ye=z?.duration||ce.sessionDuration||45;let qe=PO(Q,ye,n,o,z?.id,h);z&&gr(Q)===z.date&&(qe=qe.filter(Oe=>Oe.time!==z.time)),N(qe)},kn=async()=>{if(!(!G||!pe||!z)){R(!0);try{await Ao(bt(ze,"rescheduleRequests"),{sessionId:z.id,clientId:ce.id,clientName:ce.name,originalDate:z.date,originalTime:z.time,requestedDate:gr(G),requestedTime:pe,duration:z.duration,status:"pending",createdAt:Pe.now(),respondedAt:null,dismissed:!1}),Vs(),Te("Reschedule request submitted! You'll be notified when your trainer responds.","success"),Mn()}catch(Q){console.error("Error submitting reschedule request:",Q),Te("Failed to submit request. Please try again.","error")}R(!1)}},Gt=async Q=>{try{await Nr(mn(ze,"rescheduleRequests",Q),{dismissed:!0}),v(g.filter(ye=>ye.id!==Q))}catch(ye){console.error("Error dismissing notification:",ye)}},bn=()=>{const Q=Jt();if(Q.length===0)return null;const ye=Q[0],qe=new Date,$t=new Date(ye.date+"T"+ye.time)-qe;if($t<=0)return null;const en=Math.floor($t/(1e3*60*60*24)),Nt=Math.floor($t%(1e3*60*60*24)/(1e3*60*60)),xi=Math.floor($t%(1e3*60*60)/(1e3*60));return{days:en,hours:Nt,minutes:xi,session:ye}};if(Me||T)return m.jsxs("div",{className:"client-dashboard",children:[m.jsx("header",{className:"client-header",children:m.jsx("div",{className:"header-content",children:m.jsx("div",{className:"skeleton skeleton-logo"})})}),m.jsxs("main",{className:"client-main",children:[m.jsxs("div",{className:"skeleton-welcome",children:[m.jsx("div",{className:"skeleton skeleton-title"}),m.jsx("div",{className:"skeleton skeleton-btn-small"})]}),m.jsxs("div",{className:"skeleton-actions",children:[m.jsx("div",{className:"skeleton skeleton-btn"}),m.jsx("div",{className:"skeleton skeleton-btn"})]}),m.jsx("div",{className:"skeleton skeleton-card-large"}),m.jsx("div",{className:"skeleton skeleton-card-medium"}),m.jsx("div",{className:"skeleton skeleton-card-medium"})]})]});if(!ue||!fe||!ce)return null;const ot=Ca(),xa=ce.totalSessions-ot,Ii=Jt(),qr=L?Ia():[],Zt=bn(),Di=ce.totalSessions>0?ot/ce.totalSessions*100:0;return m.jsxs("div",{className:"client-dashboard",children:[m.jsx("header",{className:"client-header",children:m.jsx("div",{className:"header-content",children:m.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),m.jsxs("div",{className:`pull-refresh-indicator ${J>0?"visible":""} ${we?"refreshing":""}`,style:{height:J},children:[m.jsx("div",{className:`refresh-spinner ${we?"spinning":""}`,children:m.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:m.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),m.jsx("span",{className:"refresh-text",children:we?"Refreshing...":"Pull to refresh"})]}),m.jsxs("main",{className:"client-main",ref:_e,onTouchStart:Mt,onTouchMove:Ft,onTouchEnd:oi,children:[m.jsxs("div",{className:"welcome-section",children:[m.jsxs("h2",{children:["Welcome, ",ce.name.split(" ")[0]]}),m.jsx("button",{className:"logout-btn",onClick:Br,children:"Log Out"})]}),g.length>0&&m.jsx("div",{className:"notifications-section",children:g.map(Q=>m.jsxs("div",{className:`notification ${Q.status}`,children:[m.jsxs("div",{className:"notification-content",children:[m.jsx("span",{className:"notification-icon",children:Q.status==="approved"?"":""}),m.jsxs("div",{className:"notification-text",children:[m.jsx("strong",{children:Q.status==="approved"?"Reschedule Approved!":"Reschedule Declined"}),m.jsx("p",{children:Q.status==="approved"?`Your session has been moved to ${Xe(Q.requestedDate)} at ${We(Q.requestedTime)}`:`Your request to reschedule from ${Xe(Q.originalDate)} was declined. Please contact your trainer.`})]})]}),m.jsx("button",{className:"dismiss-btn",onClick:()=>Gt(Q.id),children:""})]},Q.id))}),Zt&&m.jsxs("div",{className:"countdown-card",children:[m.jsxs("div",{className:"countdown-header",children:[m.jsx("span",{className:"countdown-label",children:"Next Session"}),m.jsx("span",{className:"countdown-date",children:Xe(Zt.session.date)})]}),m.jsxs("div",{className:"countdown-timer",children:[Zt.days>0&&m.jsxs("div",{className:"countdown-unit",children:[m.jsx("span",{className:"countdown-value",children:Zt.days}),m.jsx("span",{className:"countdown-text",children:"days"})]}),m.jsxs("div",{className:"countdown-unit",children:[m.jsx("span",{className:"countdown-value",children:Zt.hours}),m.jsx("span",{className:"countdown-text",children:"hrs"})]}),m.jsxs("div",{className:"countdown-unit",children:[m.jsx("span",{className:"countdown-value",children:Zt.minutes}),m.jsx("span",{className:"countdown-text",children:"min"})]})]}),m.jsxs("div",{className:"countdown-time",children:["at ",We(Zt.session.time)]})]}),m.jsxs("div",{className:"block-info-card",children:[m.jsx("div",{className:"block-header-row",children:m.jsx("h3",{children:"Your Training Block"})}),m.jsxs("div",{className:"progress-section",children:[m.jsxs("div",{className:"progress-ring-container",children:[m.jsxs("svg",{className:"progress-ring",viewBox:"0 0 100 100",children:[m.jsx("circle",{className:"progress-ring-bg",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8"}),m.jsx("circle",{className:"progress-ring-fill",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:`${2*Math.PI*42*(1-Di/100)}`,strokeLinecap:"round"})]}),m.jsxs("div",{className:"progress-ring-text",children:[m.jsxs("span",{className:"progress-percent",children:[Math.round(Di),"%"]}),m.jsx("span",{className:"progress-label",children:"complete"})]})]}),m.jsxs("div",{className:"progress-stats",children:[m.jsxs("div",{className:"progress-stat",children:[m.jsx("span",{className:"progress-stat-value",children:ot}),m.jsx("span",{className:"progress-stat-label",children:"Completed"})]}),m.jsxs("div",{className:"progress-stat",children:[m.jsx("span",{className:"progress-stat-value",children:xa}),m.jsx("span",{className:"progress-stat-label",children:"Remaining"})]}),m.jsxs("div",{className:"progress-stat",children:[m.jsx("span",{className:"progress-stat-value",children:ce.totalSessions}),m.jsx("span",{className:"progress-stat-label",children:"Total"})]})]})]}),m.jsxs("div",{className:"block-dates",children:[m.jsxs("div",{className:"date-item",children:[m.jsx("span",{className:"date-label",children:"Start Date"}),m.jsx("span",{className:"date-value",children:li(ce.startDate)})]}),m.jsxs("div",{className:"date-item",children:[m.jsx("span",{className:"date-label",children:"End Date"}),m.jsx("span",{className:"date-value",children:li(ce.endDate)})]}),m.jsxs("div",{className:"date-item",children:[m.jsx("span",{className:"date-label",children:"Session Duration"}),m.jsxs("span",{className:"date-value",children:[ce.sessionDuration," minutes"]})]})]})]}),m.jsxs("div",{className:"quick-actions",children:[m.jsx("button",{className:"forms-btn ripple-btn",onClick:Q=>{pt(Q),at("/client/forms")},children:"Forms & Questionnaires"}),m.jsx("button",{className:"tools-btn ripple-btn",onClick:Q=>{pt(Q),at("/client/tools")},children:"Tools & Calculators"})]}),m.jsxs("div",{className:"sessions-section",children:[m.jsxs("h3",{children:["Upcoming Sessions (",Ii.length,")"]}),Ii.length===0?m.jsxs("div",{className:"no-sessions",children:[m.jsx("p",{children:"No upcoming sessions scheduled"}),m.jsx("span",{children:"Contact your trainer to book sessions"})]}):m.jsx("div",{className:"sessions-list",children:Ii.map(Q=>m.jsxs("div",{className:`session-card-wrapper ${V===Q.id?"swiped":""}`,onTouchStart:ye=>vt(ye,Q.id),onTouchMove:ye=>Wt(ye,Q.id),children:[m.jsxs("div",{className:"session-card-swipe-actions",children:[m.jsx("button",{className:"swipe-action-btn reschedule ripple-btn",onClick:ye=>{pt(ye),ie(null),ci(Q)},disabled:is(Q.id),children:"Reschedule"}),m.jsx("button",{className:"swipe-action-btn cancel ripple-btn",onClick:ye=>{pt(ye),Ni(Q)},disabled:w===Q.id,children:"Cancel"})]}),m.jsxs("div",{className:"session-card",onClick:()=>V===Q.id&&ie(null),children:[m.jsxs("div",{className:"session-info",children:[m.jsx("div",{className:"session-date",children:Xe(Q.date)}),m.jsxs("div",{className:"session-time",children:[We(Q.time)," (",Q.duration," min)"]}),is(Q.id)&&m.jsx("div",{className:"pending-badge",children:"Reschedule pending"})]}),m.jsxs("div",{className:"session-actions",children:[m.jsx("button",{className:"reschedule-btn ripple-btn",onClick:ye=>{ye.stopPropagation(),pt(ye),ci(Q)},disabled:is(Q.id),children:"Reschedule"}),m.jsx("button",{className:"cancel-btn ripple-btn",onClick:ye=>{ye.stopPropagation(),pt(ye),Ni(Q)},disabled:w===Q.id,children:w===Q.id?"Cancelling...":"Cancel"})]})]})]},Q.id))})]}),m.jsxs("div",{className:"completed-section",children:[m.jsxs("h3",{children:["Completed Sessions (",ot,")"]}),ot===0?m.jsx("div",{className:"no-sessions",children:m.jsx("p",{children:"No completed sessions yet"})}):m.jsxs("div",{className:"sessions-list completed",children:[s.filter(Q=>zr(Q)).slice(-5).reverse().map(Q=>m.jsxs("div",{className:"session-card completed",children:[m.jsxs("div",{className:"session-info",children:[m.jsx("div",{className:"session-date",children:Xe(Q.date)}),m.jsx("div",{className:"session-time",children:We(Q.time)})]}),m.jsx("span",{className:"completed-badge",children:"Completed"})]},Q.id)),ot>5&&m.jsxs("div",{className:"more-sessions",children:["And ",ot-5," more completed sessions"]})]})]})]}),L&&z&&m.jsx("div",{className:"modal-overlay",onClick:Vs,children:m.jsxs("div",{className:"reschedule-modal",onClick:Q=>Q.stopPropagation(),children:[m.jsxs("div",{className:"modal-header",children:[m.jsx("h3",{children:"Reschedule Session"}),m.jsx("button",{className:"close-modal-btn",onClick:Vs,children:""})]}),m.jsxs("div",{className:"modal-body",children:[m.jsx("div",{className:"current-session-info",children:m.jsxs("p",{children:["Current: ",m.jsx("strong",{children:Xe(z.date)})," at ",m.jsx("strong",{children:We(z.time)})]})}),m.jsxs("div",{className:"date-selection",children:[m.jsx("h4",{children:"Select New Date"}),qr.length===0?m.jsx("p",{className:"no-dates",children:"No available dates within your training block"}):m.jsx("div",{className:"dates-grid",children:qr.map((Q,ye)=>m.jsxs("button",{className:`date-btn ${G&&gr(G)===gr(Q)?"selected":""}`,onClick:()=>Da(Q),children:[m.jsx("span",{className:"date-day",children:Q.toLocaleDateString("en-GB",{weekday:"short"})}),m.jsx("span",{className:"date-num",children:Q.getDate()}),m.jsx("span",{className:"date-month",children:Q.toLocaleDateString("en-GB",{month:"short"})})]},ye))})]}),G&&m.jsxs("div",{className:"time-selection",children:[m.jsx("h4",{children:"Select Time"}),te.length===0?m.jsx("p",{className:"no-slots",children:"No available slots on this date"}):m.jsx("div",{className:"times-grid",children:te.map((Q,ye)=>m.jsx("button",{className:`time-btn ${pe===Q.time?"selected":""} ${Q.period}`,onClick:()=>$(Q.time),children:We(Q.time)},ye))})]})]}),m.jsxs("div",{className:"modal-footer",children:[m.jsx("button",{className:"cancel-modal-btn",onClick:Vs,children:"Cancel"}),m.jsx("button",{className:"submit-reschedule-btn",onClick:kn,disabled:!G||!pe||C,children:C?"Submitting...":"Request Reschedule"})]})]})}),k&&m.jsxs("div",{className:`toast-notification ${k.type}`,children:[m.jsx("span",{className:"toast-icon",children:k.type==="success"?"":k.type==="error"?"":""}),m.jsx("span",{className:"toast-message",children:k.message}),m.jsx("button",{className:"toast-close",onClick:()=>I(null),children:""})]}),Y&&m.jsx("div",{className:"confirm-modal-overlay",onClick:Y.onCancel,children:m.jsxs("div",{className:"confirm-modal",onClick:Q=>Q.stopPropagation(),children:[m.jsx("h3",{children:Y.title}),m.jsx("p",{children:Y.message}),m.jsxs("div",{className:"confirm-modal-actions",children:[m.jsx("button",{className:"confirm-cancel-btn ripple-btn",onClick:Q=>{pt(Q),Y.onCancel()},children:"Keep Session"}),m.jsx("button",{className:"confirm-btn ripple-btn",onClick:Q=>{pt(Q),Y.onConfirm()},children:"Yes, Cancel"})]})]})})]})}function zO(){const[s,e]=M.useState(null),[n,r]=M.useState(!1),{currentUser:o,isClient:c,clientData:h,logout:p,loading:g}=Wo(),v=ks(),[T,S]=M.useState({fitnessGoals:"",currentActivityLevel:"",exerciseHistory:"",injuries:"",medicalConditions:"",sleepHours:"",stressLevel:"",dietaryInfo:"",availability:"",additionalInfo:""}),[w,P]=M.useState({q1HeartCondition:!1,q2ChestPain:!1,q3ChestPainLastMonth:!1,q4Balance:!1,q5BoneJoint:!1,q6BloodPressure:!1,q7OtherReason:!1,additionalDetails:"",declaration:!1});M.useEffect(()=>{!g&&(!o||!c)&&v("/")},[o,c,g,v]),M.useEffect(()=>{h?.welcomeForm&&S(h.welcomeForm),h?.parqForm&&P(h.parqForm)},[h]);const L=pe=>{const{name:$,value:te}=pe.target;S(N=>({...N,[$]:te}))},j=pe=>{const{name:$,type:te,checked:N,value:C}=pe.target;P(R=>({...R,[$]:te==="checkbox"?N:C}))},z=async()=>{r(!0);try{await Nr(mn(ze,"clients",h.id),{welcomeForm:{...T,completedAt:Pe.now()}}),alert("Welcome form saved successfully!"),e(null)}catch(pe){console.error("Error saving welcome form:",pe),alert("Failed to save form. Please try again.")}r(!1)},ee=async()=>{if(!w.declaration){alert("Please confirm the declaration to submit the form.");return}r(!0);try{await Nr(mn(ze,"clients",h.id),{parqForm:{...w,completedAt:Pe.now()}}),alert("PAR-Q form saved successfully!"),e(null)}catch(pe){console.error("Error saving PAR-Q form:",pe),alert("Failed to save form. Please try again.")}r(!1)};if(g)return m.jsx("div",{className:"client-loading",children:"Loading..."});if(!o||!c||!h)return null;const G=!!h?.welcomeForm?.completedAt,le=!!h?.parqForm?.completedAt;return m.jsxs("div",{className:"client-forms-page",children:[m.jsx("header",{className:"client-header",children:m.jsx("div",{className:"header-content",children:m.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),m.jsxs("main",{className:"forms-main",children:[m.jsx("button",{className:"back-btn",onClick:()=>v("/client"),children:" Back"}),s?s==="welcome"?m.jsxs("div",{className:"form-container",children:[m.jsxs("div",{className:"form-header",children:[m.jsx("h2",{children:"Welcome Questionnaire"}),m.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),m.jsxs("div",{className:"form-body",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"What are your main fitness goals?"}),m.jsx("textarea",{name:"fitnessGoals",value:T.fitnessGoals,onChange:L,placeholder:"e.g., Lose weight, build muscle, improve endurance, increase flexibility...",rows:"3"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"How would you describe your current activity level?"}),m.jsxs("select",{name:"currentActivityLevel",value:T.currentActivityLevel,onChange:L,children:[m.jsx("option",{value:"",children:"Select..."}),m.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),m.jsx("option",{value:"light",children:"Lightly Active (1-2 days/week)"}),m.jsx("option",{value:"moderate",children:"Moderately Active (3-4 days/week)"}),m.jsx("option",{value:"active",children:"Very Active (5+ days/week)"}),m.jsx("option",{value:"athlete",children:"Athlete/Highly Active"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"What is your exercise history?"}),m.jsx("textarea",{name:"exerciseHistory",value:T.exerciseHistory,onChange:L,placeholder:"Describe your previous experience with exercise, sports, or training...",rows:"3"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Do you have any current or past injuries?"}),m.jsx("textarea",{name:"injuries",value:T.injuries,onChange:L,placeholder:"List any injuries that may affect your training...",rows:"2"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Do you have any medical conditions we should know about?"}),m.jsx("textarea",{name:"medicalConditions",value:T.medicalConditions,onChange:L,placeholder:"e.g., Diabetes, asthma, heart conditions...",rows:"2"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"How many hours of sleep do you typically get?"}),m.jsxs("select",{name:"sleepHours",value:T.sleepHours,onChange:L,children:[m.jsx("option",{value:"",children:"Select..."}),m.jsx("option",{value:"less-5",children:"Less than 5 hours"}),m.jsx("option",{value:"5-6",children:"5-6 hours"}),m.jsx("option",{value:"7-8",children:"7-8 hours"}),m.jsx("option",{value:"more-8",children:"More than 8 hours"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"How would you rate your current stress level?"}),m.jsxs("select",{name:"stressLevel",value:T.stressLevel,onChange:L,children:[m.jsx("option",{value:"",children:"Select..."}),m.jsx("option",{value:"low",children:"Low"}),m.jsx("option",{value:"moderate",children:"Moderate"}),m.jsx("option",{value:"high",children:"High"}),m.jsx("option",{value:"very-high",children:"Very High"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Tell us about your diet/nutrition"}),m.jsx("textarea",{name:"dietaryInfo",value:T.dietaryInfo,onChange:L,placeholder:"Any dietary restrictions, typical eating habits, nutrition goals...",rows:"3"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"What is your preferred training schedule/availability?"}),m.jsx("textarea",{name:"availability",value:T.availability,onChange:L,placeholder:"Days and times that work best for you...",rows:"2"})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Anything else you'd like us to know?"}),m.jsx("textarea",{name:"additionalInfo",value:T.additionalInfo,onChange:L,placeholder:"Any other information that might be helpful...",rows:"3"})]}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),m.jsx("button",{className:"save-btn",onClick:z,disabled:n,children:n?"Saving...":"Save"})]})]})]}):m.jsxs("div",{className:"form-container",children:[m.jsxs("div",{className:"form-header",children:[m.jsx("h2",{children:"PAR-Q Health Screening"}),m.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),m.jsxs("div",{className:"form-body",children:[m.jsx("div",{className:"parq-intro",children:m.jsx("p",{children:"The Physical Activity Readiness Questionnaire (PAR-Q) is designed to identify those who should check with a doctor before starting an exercise program."})}),m.jsxs("div",{className:"parq-questions",children:[m.jsx("div",{className:"parq-question",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",name:"q1HeartCondition",checked:w.q1HeartCondition,onChange:j}),m.jsx("span",{children:"Has your doctor ever said that you have a heart condition and that you should only do physical activity recommended by a doctor?"})]})}),m.jsx("div",{className:"parq-question",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",name:"q2ChestPain",checked:w.q2ChestPain,onChange:j}),m.jsx("span",{children:"Do you feel pain in your chest when you do physical activity?"})]})}),m.jsx("div",{className:"parq-question",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",name:"q3ChestPainLastMonth",checked:w.q3ChestPainLastMonth,onChange:j}),m.jsx("span",{children:"In the past month, have you had chest pain when you were not doing physical activity?"})]})}),m.jsx("div",{className:"parq-question",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",name:"q4Balance",checked:w.q4Balance,onChange:j}),m.jsx("span",{children:"Do you lose your balance because of dizziness or do you ever lose consciousness?"})]})}),m.jsx("div",{className:"parq-question",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",name:"q5BoneJoint",checked:w.q5BoneJoint,onChange:j}),m.jsx("span",{children:"Do you have a bone or joint problem that could be made worse by a change in your physical activity?"})]})}),m.jsx("div",{className:"parq-question",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",name:"q6BloodPressure",checked:w.q6BloodPressure,onChange:j}),m.jsx("span",{children:"Is your doctor currently prescribing drugs for your blood pressure or heart condition?"})]})}),m.jsx("div",{className:"parq-question",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",name:"q7OtherReason",checked:w.q7OtherReason,onChange:j}),m.jsx("span",{children:"Do you know of any other reason why you should not do physical activity?"})]})})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"If you answered YES to any questions, please provide details:"}),m.jsx("textarea",{name:"additionalDetails",value:w.additionalDetails,onChange:j,placeholder:"Please explain any conditions or concerns...",rows:"4"})]}),m.jsx("div",{className:"parq-declaration",children:m.jsxs("label",{children:[m.jsx("input",{type:"checkbox",name:"declaration",checked:w.declaration,onChange:j}),m.jsx("span",{children:"I have read, understood and completed this questionnaire. Any questions I had were answered to my full satisfaction. I confirm that the information provided is accurate to the best of my knowledge."})]})}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),m.jsx("button",{className:"save-btn",onClick:ee,disabled:n,children:n?"Saving...":"Submit"})]})]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"forms-intro",children:[m.jsx("h2",{children:"Forms"}),m.jsx("p",{children:"Please complete these forms to help us better understand your fitness journey and ensure your safety."})]}),m.jsxs("div",{className:"forms-list",children:[m.jsxs("div",{className:`form-card ${G?"completed":""}`,children:[m.jsxs("div",{className:"form-card-info",children:[m.jsx("h3",{children:"Welcome Questionnaire"}),m.jsx("p",{children:"Tell us about your fitness goals, experience, and lifestyle."}),G&&m.jsx("span",{className:"completed-badge",children:"Completed"})]}),m.jsx("button",{onClick:()=>e("welcome"),children:G?"View / Edit":"Start"})]}),m.jsxs("div",{className:`form-card ${le?"completed":""}`,children:[m.jsxs("div",{className:"form-card-info",children:[m.jsx("h3",{children:"PAR-Q Health Screening"}),m.jsx("p",{children:"Physical Activity Readiness Questionnaire for your safety."}),le&&m.jsx("span",{className:"completed-badge",children:"Completed"})]}),m.jsx("button",{onClick:()=>e("parq"),children:le?"View / Edit":"Start"})]})]})]})]})]})}function BO(){const{currentUser:s,isClient:e,clientData:n,loading:r}=Wo(),o=ks(),[c,h]=M.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",activityLevel:"moderate",goal:"maintain",deficitLevel:"moderate"}),[p,g]=M.useState(null),[v,T]=M.useState(!1);M.useEffect(()=>{!r&&(!s||!e)&&o("/")},[s,e,r,o]);const S=j=>{const{name:z,value:ee}=j.target;h(G=>({...G,[z]:ee})),T(!1)},w=()=>{let j=parseFloat(c.weight);c.weightUnit==="lbs"&&(j=j*.453592);let z;if(c.heightUnit==="cm")z=parseFloat(c.height);else{const we=parseFloat(c.heightFeet)||0,Ve=parseFloat(c.heightInches)||0;z=we*30.48+Ve*2.54}const ee=parseInt(c.age);let G;c.gender==="male"?G=10*j+6.25*z-5*ee+5:G=10*j+6.25*z-5*ee-161;const pe=G*{sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[c.activityLevel];let $=pe,te;switch(c.goal){case"lose":$=pe-{light:250,moderate:500,harsh:750}[c.deficitLevel],te=2;break;case"build":$=pe+300,te=2;break;default:te=1.8;break}const N=c.gender==="male"?1500:1200;$=Math.max($,N);const C=Math.round(j*te),R=C*4,D=$*.25,x=Math.round(D/9),k=$-R-D,I=Math.round(k/4);g({bmr:Math.round(G),tdee:Math.round(pe),targetCalories:Math.round($),protein:C,carbs:I,fats:x,proteinCalories:Math.round(R),carbCalories:Math.round(k),fatCalories:Math.round(D)}),T(!0)},P=()=>{const j=c.weight&&parseFloat(c.weight)>0,z=c.age&&parseInt(c.age)>0;let ee;return c.heightUnit==="cm"?ee=c.height&&parseFloat(c.height)>0:ee=c.heightFeet&&parseFloat(c.heightFeet)>0||c.heightInches&&parseFloat(c.heightInches)>0,j&&z&&ee},L=()=>{switch(c.goal){case"lose":return"Weight Loss";case"build":return"Muscle Building";default:return"Maintenance"}};return r?m.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!n?null:m.jsxs("div",{className:"client-tools-page",children:[m.jsx("header",{className:"client-header",children:m.jsx("div",{className:"header-content",children:m.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),m.jsxs("main",{className:"tools-main",children:[m.jsx("button",{className:"back-btn",onClick:()=>o("/client"),children:" Back"}),m.jsxs("div",{className:"tools-intro",children:[m.jsx("h2",{children:"Tools"}),m.jsx("p",{children:"Use these tools to help plan your nutrition and track your progress."})]}),m.jsxs("div",{className:"tool-card",children:[m.jsxs("div",{className:"tool-header",children:[m.jsx("h3",{children:"Macro Calculator"}),m.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),m.jsxs("div",{className:"calculator-form",children:[m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Gender"}),m.jsxs("div",{className:"toggle-group",children:[m.jsx("button",{type:"button",className:c.gender==="male"?"active":"",onClick:()=>{h(j=>({...j,gender:"male"})),T(!1)},children:"Male"}),m.jsx("button",{type:"button",className:c.gender==="female"?"active":"",onClick:()=>{h(j=>({...j,gender:"female"})),T(!1)},children:"Female"})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Age"}),m.jsx("input",{type:"number",name:"age",value:c.age,onChange:S,placeholder:"Years",min:"15",max:"100"})]})]}),m.jsxs("div",{className:"form-row",children:[m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Weight"}),m.jsxs("div",{className:"input-with-unit",children:[m.jsx("input",{type:"number",name:"weight",value:c.weight,onChange:S,placeholder:c.weightUnit==="kg"?"kg":"lbs",min:"30",max:"300"}),m.jsxs("div",{className:"unit-toggle",children:[m.jsx("button",{type:"button",className:c.weightUnit==="kg"?"active":"",onClick:()=>{h(j=>({...j,weightUnit:"kg"})),T(!1)},children:"kg"}),m.jsx("button",{type:"button",className:c.weightUnit==="lbs"?"active":"",onClick:()=>{h(j=>({...j,weightUnit:"lbs"})),T(!1)},children:"lbs"})]})]})]}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Height"}),m.jsxs("div",{className:"input-with-unit",children:[c.heightUnit==="cm"?m.jsx("input",{type:"number",name:"height",value:c.height,onChange:S,placeholder:"cm",min:"100",max:"250"}):m.jsxs("div",{className:"height-imperial",children:[m.jsx("input",{type:"number",name:"heightFeet",value:c.heightFeet,onChange:S,placeholder:"ft",min:"4",max:"7"}),m.jsx("input",{type:"number",name:"heightInches",value:c.heightInches,onChange:S,placeholder:"in",min:"0",max:"11"})]}),m.jsxs("div",{className:"unit-toggle",children:[m.jsx("button",{type:"button",className:c.heightUnit==="cm"?"active":"",onClick:()=>{h(j=>({...j,heightUnit:"cm"})),T(!1)},children:"cm"}),m.jsx("button",{type:"button",className:c.heightUnit==="ft"?"active":"",onClick:()=>{h(j=>({...j,heightUnit:"ft"})),T(!1)},children:"ft/in"})]})]})]})]}),m.jsxs("div",{className:"form-group full-width",children:[m.jsx("label",{children:"Activity Level"}),m.jsxs("select",{name:"activityLevel",value:c.activityLevel,onChange:S,children:[m.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),m.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),m.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),m.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"}),m.jsx("option",{value:"veryActive",children:"Extra Active (athlete/physical job)"})]})]}),m.jsxs("div",{className:"form-group full-width",children:[m.jsx("label",{children:"Fitness Goal"}),m.jsxs("div",{className:"goal-options",children:[m.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="lose"?"active":""}`,onClick:()=>{h(j=>({...j,goal:"lose"})),T(!1)},children:[m.jsx("span",{className:"goal-icon",children:"-"}),m.jsx("span",{children:"Lose Weight"})]}),m.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="maintain"?"active":""}`,onClick:()=>{h(j=>({...j,goal:"maintain"})),T(!1)},children:[m.jsx("span",{className:"goal-icon",children:"="}),m.jsx("span",{children:"Maintain"})]}),m.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="build"?"active":""}`,onClick:()=>{h(j=>({...j,goal:"build"})),T(!1)},children:[m.jsx("span",{className:"goal-icon",children:"+"}),m.jsx("span",{children:"Build Muscle"})]})]})]}),c.goal==="lose"&&m.jsxs("div",{className:"form-group full-width deficit-section",children:[m.jsx("label",{children:"Calorie Deficit Level"}),m.jsxs("div",{className:"deficit-options",children:[m.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="light"?"active":""}`,onClick:()=>{h(j=>({...j,deficitLevel:"light"})),T(!1)},children:[m.jsx("span",{className:"deficit-name",children:"Light"}),m.jsx("span",{className:"deficit-desc",children:"-250 cal/day"}),m.jsx("span",{className:"deficit-rate",children:"~0.5 lb/week"})]}),m.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="moderate"?"active":""}`,onClick:()=>{h(j=>({...j,deficitLevel:"moderate"})),T(!1)},children:[m.jsx("span",{className:"deficit-name",children:"Moderate"}),m.jsx("span",{className:"deficit-desc",children:"-500 cal/day"}),m.jsx("span",{className:"deficit-rate",children:"~1 lb/week"})]}),m.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="harsh"?"active":""}`,onClick:()=>{h(j=>({...j,deficitLevel:"harsh"})),T(!1)},children:[m.jsx("span",{className:"deficit-name",children:"Aggressive"}),m.jsx("span",{className:"deficit-desc",children:"-750 cal/day"}),m.jsx("span",{className:"deficit-rate",children:"~1.5 lb/week"})]})]})]}),m.jsx("button",{className:"calculate-btn",onClick:w,disabled:!P(),children:"Calculate Macros"})]}),v&&p&&m.jsxs("div",{className:"results-section",children:[m.jsxs("div",{className:"results-header",children:[m.jsx("h4",{children:"Your Daily Targets"}),m.jsx("span",{className:"goal-badge",children:L()})]}),m.jsxs("div",{className:"calories-display",children:[m.jsx("span",{className:"calories-value",children:p.targetCalories}),m.jsx("span",{className:"calories-label",children:"calories/day"})]}),m.jsxs("div",{className:"macros-grid",children:[m.jsxs("div",{className:"macro-card protein",children:[m.jsxs("div",{className:"macro-value",children:[p.protein,"g"]}),m.jsx("div",{className:"macro-label",children:"Protein"}),m.jsxs("div",{className:"macro-calories",children:[p.proteinCalories," cal"]})]}),m.jsxs("div",{className:"macro-card carbs",children:[m.jsxs("div",{className:"macro-value",children:[p.carbs,"g"]}),m.jsx("div",{className:"macro-label",children:"Carbs"}),m.jsxs("div",{className:"macro-calories",children:[p.carbCalories," cal"]})]}),m.jsxs("div",{className:"macro-card fats",children:[m.jsxs("div",{className:"macro-value",children:[p.fats,"g"]}),m.jsx("div",{className:"macro-label",children:"Fats"}),m.jsxs("div",{className:"macro-calories",children:[p.fatCalories," cal"]})]})]}),m.jsxs("div",{className:"results-info",children:[m.jsxs("div",{className:"info-row",children:[m.jsx("span",{children:"Basal Metabolic Rate (BMR)"}),m.jsxs("span",{children:[p.bmr," cal"]})]}),m.jsxs("div",{className:"info-row",children:[m.jsx("span",{children:"Total Daily Energy Expenditure (TDEE)"}),m.jsxs("span",{children:[p.tdee," cal"]})]})]}),m.jsx("div",{className:"results-note",children:m.jsx("p",{children:"These are estimated values. Individual results may vary based on metabolism, body composition, and other factors. Consult with your trainer for personalized guidance."})})]})]})]})]})}function qO(){const{pathname:s}=Ms();return M.useEffect(()=>{window.scrollTo(0,0)},[s]),null}function HO(){const s=ks();return M.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function FO(){return m.jsx(yO,{children:m.jsxs(V1,{basename:"/login",children:[m.jsx(qO,{}),m.jsx(HO,{}),m.jsxs(d1,{children:[m.jsx(pr,{path:"/",element:m.jsx(vO,{})}),m.jsx(pr,{path:"/dashboard",element:m.jsx(OO,{})}),m.jsx(pr,{path:"/add-client",element:m.jsx(MO,{})}),m.jsx(pr,{path:"/client",element:m.jsx(UO,{})}),m.jsx(pr,{path:"/client/forms",element:m.jsx(zO,{})}),m.jsx(pr,{path:"/client/tools",element:m.jsx(BO,{})}),m.jsx(pr,{path:"*",element:m.jsx(u1,{to:"/",replace:!0})})]})]})})}mA.createRoot(document.getElementById("root")).render(m.jsx(M.StrictMode,{children:m.jsx(FO,{})}));
