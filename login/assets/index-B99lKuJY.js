const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-BpcPGfBg.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-CoWmTtoP.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-K61mix_j.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-Dpyv83eX.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-DmKSJB03.js","assets/ProteinSnacks-DOpnQyAZ.js","assets/DailyMotivation-D_WPt9VN.js","assets/CircuitDashboard-Cca8eyVl.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-BzL5aOSP.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-C8Gy5lLV.js","assets/Leaderboard-Dq-r5svP.css","assets/UpgradePage-Zs051AEr.js","assets/stripe-7qEIN5w7.js","assets/UpgradePage-Bat7E5_6.css","assets/Onboarding-DcjpGNvB.js","assets/Onboarding-BB3CHso6.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=t(l);fetch(l.href,u)}})();var mp={exports:{}},Fc={};var g1;function cj(){if(g1)return Fc;g1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:h,ref:l!==void 0?l:null,props:u}}return Fc.Fragment=e,Fc.jsx=t,Fc.jsxs=t,Fc}var y1;function uj(){return y1||(y1=1,mp.exports=cj()),mp.exports}var a=uj(),pp={exports:{}},Gt={};var b1;function hj(){if(b1)return Gt;b1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),T=Symbol.iterator;function L(P){return P===null||typeof P!="object"?null:(P=T&&P[T]||P["@@iterator"],typeof P=="function"?P:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,O={};function se(P,G,xe){this.props=P,this.context=G,this.refs=O,this.updater=xe||$}se.prototype.isReactComponent={},se.prototype.setState=function(P,G){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,G,"setState")},se.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Q(){}Q.prototype=se.prototype;function oe(P,G,xe){this.props=P,this.context=G,this.refs=O,this.updater=xe||$}var ve=oe.prototype=new Q;ve.constructor=oe,U(ve,se.prototype),ve.isPureReactComponent=!0;var Me=Array.isArray;function Ne(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function I(P,G,xe){var Ee=xe.ref;return{$$typeof:s,type:P,key:G,ref:Ee!==void 0?Ee:null,props:xe}}function V(P,G){return I(P.type,G,P.props)}function D(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function F(P){var G={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(xe){return G[xe]})}var M=/\/+/g;function He(P,G){return typeof P=="object"&&P!==null&&P.key!=null?F(""+P.key):G.toString(36)}function bt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Ne,Ne):(P.status="pending",P.then(function(G){P.status==="pending"&&(P.status="fulfilled",P.value=G)},function(G){P.status==="pending"&&(P.status="rejected",P.reason=G)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function q(P,G,xe,Ee,$e){var Ae=typeof P;(Ae==="undefined"||Ae==="boolean")&&(P=null);var at=!1;if(P===null)at=!0;else switch(Ae){case"bigint":case"string":case"number":at=!0;break;case"object":switch(P.$$typeof){case s:case e:at=!0;break;case w:return at=P._init,q(at(P._payload),G,xe,Ee,$e)}}if(at)return $e=$e(P),at=Ee===""?"."+He(P,0):Ee,Me($e)?(xe="",at!=null&&(xe=at.replace(M,"$&/")+"/"),q($e,G,xe,"",function(Ot){return Ot})):$e!=null&&(D($e)&&($e=V($e,xe+($e.key==null||P&&P.key===$e.key?"":(""+$e.key).replace(M,"$&/")+"/")+at)),G.push($e)),1;at=0;var ht=Ee===""?".":Ee+":";if(Me(P))for(var Je=0;Je<P.length;Je++)Ee=P[Je],Ae=ht+He(Ee,Je),at+=q(Ee,G,xe,Ae,$e);else if(Je=L(P),typeof Je=="function")for(P=Je.call(P),Je=0;!(Ee=P.next()).done;)Ee=Ee.value,Ae=ht+He(Ee,Je++),at+=q(Ee,G,xe,Ae,$e);else if(Ae==="object"){if(typeof P.then=="function")return q(bt(P),G,xe,Ee,$e);throw G=String(P),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return at}function me(P,G,xe){if(P==null)return P;var Ee=[],$e=0;return q(P,Ee,"","",function(Ae){return G.call(xe,Ae,$e++)}),Ee}function Pe(P){if(P._status===-1){var G=P._result;G=G(),G.then(function(xe){(P._status===0||P._status===-1)&&(P._status=1,P._result=xe)},function(xe){(P._status===0||P._status===-1)&&(P._status=2,P._result=xe)}),P._status===-1&&(P._status=0,P._result=G)}if(P._status===1)return P._result.default;throw P._result}var We=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Z={map:me,forEach:function(P,G,xe){me(P,function(){G.apply(this,arguments)},xe)},count:function(P){var G=0;return me(P,function(){G++}),G},toArray:function(P){return me(P,function(G){return G})||[]},only:function(P){if(!D(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Gt.Activity=k,Gt.Children=Z,Gt.Component=se,Gt.Fragment=t,Gt.Profiler=l,Gt.PureComponent=oe,Gt.StrictMode=i,Gt.Suspense=g,Gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Gt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return R.H.useMemoCache(P)}},Gt.cache=function(P){return function(){return P.apply(null,arguments)}},Gt.cacheSignal=function(){return null},Gt.cloneElement=function(P,G,xe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var Ee=U({},P.props),$e=P.key;if(G!=null)for(Ae in G.key!==void 0&&($e=""+G.key),G)!S.call(G,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&G.ref===void 0||(Ee[Ae]=G[Ae]);var Ae=arguments.length-2;if(Ae===1)Ee.children=xe;else if(1<Ae){for(var at=Array(Ae),ht=0;ht<Ae;ht++)at[ht]=arguments[ht+2];Ee.children=at}return I(P.type,$e,Ee)},Gt.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Gt.createElement=function(P,G,xe){var Ee,$e={},Ae=null;if(G!=null)for(Ee in G.key!==void 0&&(Ae=""+G.key),G)S.call(G,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&($e[Ee]=G[Ee]);var at=arguments.length-2;if(at===1)$e.children=xe;else if(1<at){for(var ht=Array(at),Je=0;Je<at;Je++)ht[Je]=arguments[Je+2];$e.children=ht}if(P&&P.defaultProps)for(Ee in at=P.defaultProps,at)$e[Ee]===void 0&&($e[Ee]=at[Ee]);return I(P,Ae,$e)},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(P){return{$$typeof:p,render:P}},Gt.isValidElement=D,Gt.lazy=function(P){return{$$typeof:w,_payload:{_status:-1,_result:P},_init:Pe}},Gt.memo=function(P,G){return{$$typeof:y,type:P,compare:G===void 0?null:G}},Gt.startTransition=function(P){var G=R.T,xe={};R.T=xe;try{var Ee=P(),$e=R.S;$e!==null&&$e(xe,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(Ne,We)}catch(Ae){We(Ae)}finally{G!==null&&xe.types!==null&&(G.types=xe.types),R.T=G}},Gt.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Gt.use=function(P){return R.H.use(P)},Gt.useActionState=function(P,G,xe){return R.H.useActionState(P,G,xe)},Gt.useCallback=function(P,G){return R.H.useCallback(P,G)},Gt.useContext=function(P){return R.H.useContext(P)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(P,G){return R.H.useDeferredValue(P,G)},Gt.useEffect=function(P,G){return R.H.useEffect(P,G)},Gt.useEffectEvent=function(P){return R.H.useEffectEvent(P)},Gt.useId=function(){return R.H.useId()},Gt.useImperativeHandle=function(P,G,xe){return R.H.useImperativeHandle(P,G,xe)},Gt.useInsertionEffect=function(P,G){return R.H.useInsertionEffect(P,G)},Gt.useLayoutEffect=function(P,G){return R.H.useLayoutEffect(P,G)},Gt.useMemo=function(P,G){return R.H.useMemo(P,G)},Gt.useOptimistic=function(P,G){return R.H.useOptimistic(P,G)},Gt.useReducer=function(P,G,xe){return R.H.useReducer(P,G,xe)},Gt.useRef=function(P){return R.H.useRef(P)},Gt.useState=function(P){return R.H.useState(P)},Gt.useSyncExternalStore=function(P,G,xe){return R.H.useSyncExternalStore(P,G,xe)},Gt.useTransition=function(){return R.H.useTransition()},Gt.version="19.2.4",Gt}var v1;function Rg(){return v1||(v1=1,pp.exports=hj()),pp.exports}var v=Rg(),gp={exports:{}},qc={},yp={exports:{}},bp={};var x1;function dj(){return x1||(x1=1,(function(s){function e(q,me){var Pe=q.length;q.push(me);e:for(;0<Pe;){var We=Pe-1>>>1,Z=q[We];if(0<l(Z,me))q[We]=me,q[Pe]=Z,Pe=We;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var me=q[0],Pe=q.pop();if(Pe!==me){q[0]=Pe;e:for(var We=0,Z=q.length,P=Z>>>1;We<P;){var G=2*(We+1)-1,xe=q[G],Ee=G+1,$e=q[Ee];if(0>l(xe,Pe))Ee<Z&&0>l($e,xe)?(q[We]=$e,q[Ee]=Pe,We=Ee):(q[We]=xe,q[G]=Pe,We=G);else if(Ee<Z&&0>l($e,Pe))q[We]=$e,q[Ee]=Pe,We=Ee;else break e}}return me}function l(q,me){var Pe=q.sortIndex-me.sortIndex;return Pe!==0?Pe:q.id-me.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],y=[],w=1,k=null,T=3,L=!1,$=!1,U=!1,O=!1,se=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function ve(q){for(var me=t(y);me!==null;){if(me.callback===null)i(y);else if(me.startTime<=q)i(y),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(y)}}function Me(q){if(U=!1,ve(q),!$)if(t(g)!==null)$=!0,Ne||(Ne=!0,F());else{var me=t(y);me!==null&&bt(Me,me.startTime-q)}}var Ne=!1,R=-1,S=5,I=-1;function V(){return O?!0:!(s.unstable_now()-I<S)}function D(){if(O=!1,Ne){var q=s.unstable_now();I=q;var me=!0;try{e:{$=!1,U&&(U=!1,Q(R),R=-1),L=!0;var Pe=T;try{t:{for(ve(q),k=t(g);k!==null&&!(k.expirationTime>q&&V());){var We=k.callback;if(typeof We=="function"){k.callback=null,T=k.priorityLevel;var Z=We(k.expirationTime<=q);if(q=s.unstable_now(),typeof Z=="function"){k.callback=Z,ve(q),me=!0;break t}k===t(g)&&i(g),ve(q)}else i(g);k=t(g)}if(k!==null)me=!0;else{var P=t(y);P!==null&&bt(Me,P.startTime-q),me=!1}}break e}finally{k=null,T=Pe,L=!1}me=void 0}}finally{me?F():Ne=!1}}}var F;if(typeof oe=="function")F=function(){oe(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,He=M.port2;M.port1.onmessage=D,F=function(){He.postMessage(null)}}else F=function(){se(D,0)};function bt(q,me){R=se(function(){q(s.unstable_now())},me)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(q){q.callback=null},s.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(q){switch(T){case 1:case 2:case 3:var me=3;break;default:me=T}var Pe=T;T=me;try{return q()}finally{T=Pe}},s.unstable_requestPaint=function(){O=!0},s.unstable_runWithPriority=function(q,me){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Pe=T;T=q;try{return me()}finally{T=Pe}},s.unstable_scheduleCallback=function(q,me,Pe){var We=s.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?We+Pe:We):Pe=We,q){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=Pe+Z,q={id:w++,callback:me,priorityLevel:q,startTime:Pe,expirationTime:Z,sortIndex:-1},Pe>We?(q.sortIndex=Pe,e(y,q),t(g)===null&&q===t(y)&&(U?(Q(R),R=-1):U=!0,bt(Me,Pe-We))):(q.sortIndex=Z,e(g,q),$||L||($=!0,Ne||(Ne=!0,F()))),q},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(q){var me=T;return function(){var Pe=T;T=me;try{return q.apply(this,arguments)}finally{T=Pe}}}})(bp)),bp}var w1;function fj(){return w1||(w1=1,yp.exports=dj()),yp.exports}var vp={exports:{}},rr={};var _1;function mj(){if(_1)return rr;_1=1;var s=Rg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)y+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:k==null?null:""+k,children:g,containerInfo:y,implementation:w}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return rr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,rr.createPortal=function(g,y){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,w)},rr.flushSync=function(g){var y=h.T,w=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=w,i.d.f()}},rr.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},rr.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},rr.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var w=y.as,k=p(w,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;w==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:k,integrity:T,fetchPriority:L}):w==="script"&&i.d.X(g,{crossOrigin:k,integrity:T,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},rr.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var w=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},rr.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var w=y.as,k=p(w,y.crossOrigin);i.d.L(g,w,{crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},rr.preloadModule=function(g,y){if(typeof g=="string")if(y){var w=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},rr.requestFormReset=function(g){i.d.r(g)},rr.unstable_batchedUpdates=function(g,y){return g(y)},rr.useFormState=function(g,y,w){return h.H.useFormState(g,y,w)},rr.useFormStatus=function(){return h.H.useHostTransitionStatus()},rr.version="19.2.4",rr}var k1;function pj(){if(k1)return vp.exports;k1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),vp.exports=mj(),vp.exports}var T1;function gj(){if(T1)return qc;T1=1;var s=fj(),e=Rg(),t=pj();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(i(188))}function y(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),n;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var x=!1,E=f.child;E;){if(E===o){x=!0,o=f,c=m;break}if(E===c){x=!0,c=f,o=m;break}E=E.sibling}if(!x){for(E=m.child;E;){if(E===o){x=!0,o=m,c=f;break}if(E===c){x=!0,c=m,o=f;break}E=E.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function w(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=w(n),r!==null)return r;n=n.sibling}return null}var k=Object.assign,T=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function F(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var M=Symbol.for("react.client.reference");function He(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===M?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case U:return"Fragment";case se:return"Profiler";case O:return"StrictMode";case Me:return"Suspense";case Ne:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case $:return"Portal";case oe:return n.displayName||"Context";case Q:return(n._context.displayName||"Context")+".Consumer";case ve:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return r=n.displayName||null,r!==null?r:He(n.type)||"Memo";case S:r=n._payload,n=n._init;try{return He(n(r))}catch{}}return null}var bt=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe={pending:!1,data:null,method:null,action:null},We=[],Z=-1;function P(n){return{current:n}}function G(n){0>Z||(n.current=We[Z],We[Z]=null,Z--)}function xe(n,r){Z++,We[Z]=n.current,n.current=r}var Ee=P(null),$e=P(null),Ae=P(null),at=P(null);function ht(n,r){switch(xe(Ae,r),xe($e,n),xe(Ee,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?B0(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=B0(r),n=U0(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}G(Ee),xe(Ee,n)}function Je(){G(Ee),G($e),G(Ae)}function Ot(n){n.memoizedState!==null&&xe(at,n);var r=Ee.current,o=U0(r,n.type);r!==o&&(xe($e,n),xe(Ee,o))}function Cn(n){$e.current===n&&(G(Ee),G($e)),at.current===n&&(G(at),Vc._currentValue=Pe)}var It,vt;function he(n){if(It===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);It=r&&r[1]||"",vt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+It+n+vt}var en=!1;function tn(n,r){if(!n||en)return"";en=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(fe){var le=fe}Reflect.construct(n,[],Ce)}else{try{Ce.call()}catch(fe){le=fe}n.call(Ce.prototype)}}else{try{throw Error()}catch(fe){le=fe}(Ce=n())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(fe){if(fe&&le&&typeof fe.stack=="string")return[fe.stack,le.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],E=m[1];if(x&&E){var B=x.split(`
`),ie=E.split(`
`);for(f=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ie.length&&!ie[f].includes("DetermineComponentFrameRoot");)f++;if(c===B.length||f===ie.length)for(c=B.length-1,f=ie.length-1;1<=c&&0<=f&&B[c]!==ie[f];)f--;for(;1<=c&&0<=f;c--,f--)if(B[c]!==ie[f]){if(c!==1||f!==1)do if(c--,f--,0>f||B[c]!==ie[f]){var Te=`
`+B[c].replace(" at new "," at ");return n.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",n.displayName)),Te}while(1<=c&&0<=f);break}}}finally{en=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?he(o):""}function dt(n,r){switch(n.tag){case 26:case 27:case 5:return he(n.type);case 16:return he("Lazy");case 13:return n.child!==r&&r!==null?he("Suspense Fallback"):he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return tn(n.type,!1);case 11:return tn(n.type.render,!1);case 1:return tn(n.type,!0);case 31:return he("Activity");default:return""}}function jt(n){try{var r="",o=null;do r+=dt(n,o),o=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ct=Object.prototype.hasOwnProperty,nt=s.unstable_scheduleCallback,nn=s.unstable_cancelCallback,ds=s.unstable_shouldYield,Et=s.unstable_requestPaint,rn=s.unstable_now,Yn=s.unstable_getCurrentPriorityLevel,Wt=s.unstable_ImmediatePriority,Ft=s.unstable_UserBlockingPriority,an=s.unstable_NormalPriority,mn=s.unstable_LowPriority,pe=s.unstable_IdlePriority,Re=s.log,Oe=s.unstable_setDisableYieldValue,Qe=null,Ve=null;function De(n){if(typeof Re=="function"&&Oe(n),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode(Qe,n)}catch{}}var Ue=Math.clz32?Math.clz32:Mt,wt=Math.log,ft=Math.LN2;function Mt(n){return n>>>=0,n===0?32:31-(wt(n)/ft|0)|0}var Ut=256,J=262144,ge=4194304;function rt(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function St(n,r,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?f=rt(c):(x&=E,x!==0?f=rt(x):o||(o=E&~n,o!==0&&(f=rt(o))))):(E=c&~m,E!==0?f=rt(E):x!==0?f=rt(x):o||(o=c&~n,o!==0&&(f=rt(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function Nt(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Yt(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qt(){var n=ge;return ge<<=1,(ge&62914560)===0&&(ge=4194304),n}function Vt(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Ln(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function es(n,r,o,c,f,m){var x=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var E=n.entanglements,B=n.expirationTimes,ie=n.hiddenUpdates;for(o=x&~o;0<o;){var Te=31-Ue(o),Ce=1<<Te;E[Te]=0,B[Te]=-1;var le=ie[Te];if(le!==null)for(ie[Te]=null,Te=0;Te<le.length;Te++){var fe=le[Te];fe!==null&&(fe.lane&=-536870913)}o&=~Ce}c!==0&&hn(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(x&~r))}function hn(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-Ue(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Sn(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-Ue(o),f=1<<c;f&r|n[c]&r&&(n[c]|=r),o&=~f}}function Mn(n,r){var o=r&-r;return o=(o&42)!==0?1:z(o),(o&(n.suspendedLanes|r))!==0?0:o}function z(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ye(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function _e(){var n=me.p;return n!==0?n:(n=window.event,n===void 0?32:c1(n.type))}function ke(n,r){var o=me.p;try{return me.p=n,r()}finally{me.p=o}}var de=Math.random().toString(36).slice(2),tt="__reactFiber$"+de,Ct="__reactProps$"+de,it="__reactContainer$"+de,_t="__reactEvents$"+de,xt="__reactListeners$"+de,on="__reactHandles$"+de,sr="__reactResources$"+de,Ls="__reactMarker$"+de;function zs(n){delete n[tt],delete n[Ct],delete n[_t],delete n[xt],delete n[on]}function $n(n){var r=n[tt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[it]||o[tt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=G0(n);n!==null;){if(o=n[tt])return o;n=G0(n)}return r}n=o,o=n.parentNode}return null}function H(n){if(n=n[tt]||n[it]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function ce(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function j(n){var r=n[sr];return r||(r=n[sr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function N(n){n[Ls]=!0}var K=new Set,re={};function Ke(n,r){qe(n,r),qe(n+"Capture",r)}function qe(n,r){for(re[n]=r,n=0;n<r.length;n++)K.add(r[n])}var ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lt={},At={};function Un(n){return ct.call(At,n)?!0:ct.call(Lt,n)?!1:ze.test(n)?At[n]=!0:(Lt[n]=!0,!1)}function Fs(n,r,o){if(Un(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function js(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function On(n,r,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+c)}}function Vn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Y(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function we(n,r,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(x){o=""+x,m.call(this,x)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function te(n){if(!n._valueTracker){var r=Y(n)?"checked":"value";n._valueTracker=we(n,r,""+n[r])}}function Be(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=Y(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function Fe(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ot=/[\n"\\]/g;function mt(n){return n.replace(ot,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function qt(n,r,o,c,f,m,x,E){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),r!=null?x==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Vn(r)):n.value!==""+Vn(r)&&(n.value=""+Vn(r)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),r!=null?xs(n,x,Vn(r)):o!=null?xs(n,x,Vn(o)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+Vn(E):n.removeAttribute("name")}function _n(n,r,o,c,f,m,x,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){te(n);return}o=o!=null?""+Vn(o):"",r=r!=null?""+Vn(r):o,E||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=E?n.checked:!!c,n.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x),te(n)}function xs(n,r,o){r==="number"&&Fe(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ln(n,r,o,c){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Vn(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function qs(n,r,o){if(r!=null&&(r=""+Vn(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+Vn(o):""}function Es(n,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(bt(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Vn(r),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),te(n)}function fs(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Ba=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sa(n,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,o):typeof o!="number"||o===0||Ba.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function pn(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&sa(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&sa(n,m,r[m])}function us(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Os=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xr(n){return Os.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ts(){}var Ws=null;function Ss(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Rr=null,wr=null;function Ar(n){var r=H(n);if(r&&(n=r.stateNode)){var o=n[Ct]||null;e:switch(n=r.stateNode,r.type){case"input":if(qt(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+mt(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var f=c[Ct]||null;if(!f)throw Error(i(90));qt(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===n.form&&Be(c)}break e;case"textarea":qs(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&ln(n,!!o.multiple,r,!1)}}}var A=!1;function ee(n,r,o){if(A)return n(r,o);A=!0;try{var c=n(r);return c}finally{if(A=!1,(Rr!==null||wr!==null)&&(Nh(),Rr&&(r=Rr,n=wr,wr=Rr=null,Ar(r),n)))for(r=0;r<n.length;r++)Ar(n[r])}}function Le(n,r){var o=n.stateNode;if(o===null)return null;var c=o[Ct]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Xe=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gt=!1;if(Xe)try{var st={};Object.defineProperty(st,"passive",{get:function(){gt=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{gt=!1}var Ze=null,Ht=null,zt=null;function gn(){if(zt)return zt;var n,r=Ht,o=r.length,c,f="value"in Ze?Ze.value:Ze.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var x=o-n;for(c=1;c<=x&&r[o-c]===f[m-c];c++);return zt=f.slice(n,1<c?1-c:void 0)}function kn(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Xt(){return!0}function is(){return!1}function cn(n){function r(o,c,f,m,x){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(o=n[E],this[E]=o?o(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Xt:is,this.isPropagationStopped=is,this}return k(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xt)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xt)},persist:function(){},isPersistent:Xt}),r}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qn=cn(zn),Xn=k({},zn,{view:0,detail:0}),Vs=cn(Xn),Gs,ur,ms,qr=k({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ms&&(ms&&n.type==="mousemove"?(Gs=n.screenX-ms.screenX,ur=n.screenY-ms.screenY):ur=Gs=0,ms=n),Gs)},movementY:function(n){return"movementY"in n?n.movementY:ur}}),va=cn(qr),Ns=k({},qr,{dataTransfer:0}),hr=cn(Ns),Hr=k({},Xn,{relatedTarget:0}),_r=cn(Hr),bi=k({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),el=cn(bi),vi=k({},zn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ua=cn(vi),ra=k({},zn,{data:0}),Ks=cn(ra),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=qu[n])?!!r[n]:!1}function xi(){return Hu}var dr=k({},Xn,{key:function(n){if(n.key){var r=zu[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=kn(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Fu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xi,charCode:function(n){return n.type==="keypress"?kn(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?kn(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$u=cn(dr),Wu=k({},qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),za=cn(Wu),d=k({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xi}),b=cn(d),_=k({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=cn(_),ne=k({},qr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ue=cn(ne),Ye=k({},zn,{newState:0,oldState:0}),Jt=cn(Ye),ws=[9,13,27,32],Dn=Xe&&"CompositionEvent"in window,os=null;Xe&&"documentMode"in document&&(os=document.documentMode);var $r=Xe&&"TextEvent"in window&&!os,xa=Xe&&(!Dn||os&&8<os&&11>=os),aa=" ",ia=!1;function go(n,r){switch(n){case"keyup":return ws.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var nl=!1;function Mk(n,r){switch(n){case"compositionend":return tl(r);case"keypress":return r.which!==32?null:(ia=!0,aa);case"textInput":return n=r.data,n===aa&&ia?null:n;default:return null}}function Dk(n,r){if(nl)return n==="compositionend"||!Dn&&go(n,r)?(n=gn(),zt=Ht=Ze=null,nl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return xa&&r.locale!=="ko"?null:r.data;default:return null}}var Pk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qy(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Pk[n.type]:r==="textarea"}function Xy(n,r,o,c){Rr?wr?wr.push(c):wr=[c]:Rr=c,r=Ph(r,"onChange"),0<r.length&&(o=new Qn("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var ic=null,oc=null;function Lk(n){M0(n,0)}function Gu(n){var r=ce(n);if(Be(r))return n}function Jy(n,r){if(n==="change")return r}var Zy=!1;if(Xe){var wf;if(Xe){var _f="oninput"in document;if(!_f){var eb=document.createElement("div");eb.setAttribute("oninput","return;"),_f=typeof eb.oninput=="function"}wf=_f}else wf=!1;Zy=wf&&(!document.documentMode||9<document.documentMode)}function tb(){ic&&(ic.detachEvent("onpropertychange",nb),oc=ic=null)}function nb(n){if(n.propertyName==="value"&&Gu(oc)){var r=[];Xy(r,oc,n,Ss(n)),ee(Lk,r)}}function Ok(n,r,o){n==="focusin"?(tb(),ic=r,oc=o,ic.attachEvent("onpropertychange",nb)):n==="focusout"&&tb()}function Vk(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Gu(oc)}function Bk(n,r){if(n==="click")return Gu(r)}function Uk(n,r){if(n==="input"||n==="change")return Gu(r)}function zk(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Ir=typeof Object.is=="function"?Object.is:zk;function lc(n,r){if(Ir(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!ct.call(r,f)||!Ir(n[f],r[f]))return!1}return!0}function sb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function rb(n,r){var o=sb(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=sb(o)}}function ab(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?ab(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function ib(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Fe(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=Fe(n.document)}return r}function kf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var Fk=Xe&&"documentMode"in document&&11>=document.documentMode,sl=null,Tf=null,cc=null,jf=!1;function ob(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;jf||sl==null||sl!==Fe(c)||(c=sl,"selectionStart"in c&&kf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),cc&&lc(cc,c)||(cc=c,c=Ph(Tf,"onSelect"),0<c.length&&(r=new Qn("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=sl)))}function yo(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var rl={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionrun:yo("Transition","TransitionRun"),transitionstart:yo("Transition","TransitionStart"),transitioncancel:yo("Transition","TransitionCancel"),transitionend:yo("Transition","TransitionEnd")},Ef={},lb={};Xe&&(lb=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function bo(n){if(Ef[n])return Ef[n];if(!rl[n])return n;var r=rl[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in lb)return Ef[n]=r[o];return n}var cb=bo("animationend"),ub=bo("animationiteration"),hb=bo("animationstart"),qk=bo("transitionrun"),Hk=bo("transitionstart"),$k=bo("transitioncancel"),db=bo("transitionend"),fb=new Map,Sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sf.push("scrollEnd");function oa(n,r){fb.set(n,r),Ke(r,[n])}var Ku=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Wr=[],al=0,Nf=0;function Yu(){for(var n=al,r=Nf=al=0;r<n;){var o=Wr[r];Wr[r++]=null;var c=Wr[r];Wr[r++]=null;var f=Wr[r];Wr[r++]=null;var m=Wr[r];if(Wr[r++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}m!==0&&mb(o,f,m)}}function Qu(n,r,o,c){Wr[al++]=n,Wr[al++]=r,Wr[al++]=o,Wr[al++]=c,Nf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Cf(n,r,o,c){return Qu(n,r,o,c),Xu(n)}function vo(n,r){return Qu(n,null,null,r),Xu(n)}function mb(n,r,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-Ue(o),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function Xu(n){if(50<Ac)throw Ac=0,Vm=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var il={};function Wk(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(n,r,o,c){return new Wk(n,r,o,c)}function Rf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Fa(n,r){var o=n.alternate;return o===null?(o=Mr(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function pb(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Ju(n,r,o,c,f,m){var x=0;if(c=n,typeof n=="function")Rf(n)&&(x=1);else if(typeof n=="string")x=XT(n,o,Ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=Mr(31,o,r,f),n.elementType=I,n.lanes=m,n;case U:return xo(o.children,f,m,r);case O:x=8,f|=24;break;case se:return n=Mr(12,o,r,f|2),n.elementType=se,n.lanes=m,n;case Me:return n=Mr(13,o,r,f),n.elementType=Me,n.lanes=m,n;case Ne:return n=Mr(19,o,r,f),n.elementType=Ne,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case oe:x=10;break e;case Q:x=9;break e;case ve:x=11;break e;case R:x=14;break e;case S:x=16,c=null;break e}x=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=Mr(x,o,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function xo(n,r,o,c){return n=Mr(7,n,c,r),n.lanes=o,n}function Af(n,r,o){return n=Mr(6,n,null,r),n.lanes=o,n}function gb(n){var r=Mr(18,null,null,0);return r.stateNode=n,r}function If(n,r,o){return r=Mr(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var yb=new WeakMap;function Gr(n,r){if(typeof n=="object"&&n!==null){var o=yb.get(n);return o!==void 0?o:(r={value:n,source:r,stack:jt(r)},yb.set(n,r),r)}return{value:n,source:r,stack:jt(r)}}var ol=[],ll=0,Zu=null,uc=0,Kr=[],Yr=0,wi=null,wa=1,_a="";function qa(n,r){ol[ll++]=uc,ol[ll++]=Zu,Zu=n,uc=r}function bb(n,r,o){Kr[Yr++]=wa,Kr[Yr++]=_a,Kr[Yr++]=wi,wi=n;var c=wa;n=_a;var f=32-Ue(c)-1;c&=~(1<<f),o+=1;var m=32-Ue(r)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,wa=1<<32-Ue(r)+f|o<<f|c,_a=m+n}else wa=1<<m|o<<f|c,_a=n}function Mf(n){n.return!==null&&(qa(n,1),bb(n,1,0))}function Df(n){for(;n===Zu;)Zu=ol[--ll],ol[ll]=null,uc=ol[--ll],ol[ll]=null;for(;n===wi;)wi=Kr[--Yr],Kr[Yr]=null,_a=Kr[--Yr],Kr[Yr]=null,wa=Kr[--Yr],Kr[Yr]=null}function vb(n,r){Kr[Yr++]=wa,Kr[Yr++]=_a,Kr[Yr++]=wi,wa=r.id,_a=r.overflow,wi=n}var Ys=null,rs=null,Tn=!1,_i=null,Qr=!1,Pf=Error(i(519));function ki(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hc(Gr(r,n)),Pf}function xb(n){var r=n.stateNode,o=n.type,c=n.memoizedProps;switch(r[tt]=n,r[Ct]=c,o){case"dialog":fn("cancel",r),fn("close",r);break;case"iframe":case"object":case"embed":fn("load",r);break;case"video":case"audio":for(o=0;o<Mc.length;o++)fn(Mc[o],r);break;case"source":fn("error",r);break;case"img":case"image":case"link":fn("error",r),fn("load",r);break;case"details":fn("toggle",r);break;case"input":fn("invalid",r),_n(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":fn("invalid",r);break;case"textarea":fn("invalid",r),Es(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||O0(r.textContent,o)?(c.popover!=null&&(fn("beforetoggle",r),fn("toggle",r)),c.onScroll!=null&&fn("scroll",r),c.onScrollEnd!=null&&fn("scrollend",r),c.onClick!=null&&(r.onclick=ts),r=!0):r=!1,r||ki(n,!0)}function wb(n){for(Ys=n.return;Ys;)switch(Ys.tag){case 5:case 31:case 13:Qr=!1;return;case 27:case 3:Qr=!0;return;default:Ys=Ys.return}}function cl(n){if(n!==Ys)return!1;if(!Tn)return wb(n),Tn=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Zm(n.type,n.memoizedProps)),o=!o),o&&rs&&ki(n),wb(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));rs=W0(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));rs=W0(n)}else r===27?(r=rs,Oi(n.type)?(n=rp,rp=null,rs=n):rs=r):rs=Ys?Jr(n.stateNode.nextSibling):null;return!0}function wo(){rs=Ys=null,Tn=!1}function Lf(){var n=_i;return n!==null&&(Er===null?Er=n:Er.push.apply(Er,n),_i=null),n}function hc(n){_i===null?_i=[n]:_i.push(n)}var Of=P(null),_o=null,Ha=null;function Ti(n,r,o){xe(Of,r._currentValue),r._currentValue=o}function $a(n){n._currentValue=Of.current,G(Of)}function Vf(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function Bf(n,r,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var B=0;B<r.length;B++)if(E.context===r[B]){m.lanes|=o,E=m.alternate,E!==null&&(E.lanes|=o),Vf(m.return,o,n),c||(x=null);break e}m=E.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),Vf(x,o,n),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===n){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function ul(n,r,o,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var E=f.type;Ir(f.pendingProps.value,x.value)||(n!==null?n.push(E):n=[E])}}else if(f===at.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Vc):n=[Vc])}f=f.return}n!==null&&Bf(r,n,o,c),r.flags|=262144}function eh(n){for(n=n.firstContext;n!==null;){if(!Ir(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ko(n){_o=n,Ha=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Qs(n){return _b(_o,n)}function th(n,r){return _o===null&&ko(n),_b(n,r)}function _b(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Ha===null){if(n===null)throw Error(i(308));Ha=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Ha=Ha.next=r;return o}var Gk=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},Kk=s.unstable_scheduleCallback,Yk=s.unstable_NormalPriority,Cs={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uf(){return{controller:new Gk,data:new Map,refCount:0}}function dc(n){n.refCount--,n.refCount===0&&Kk(Yk,function(){n.controller.abort()})}var fc=null,zf=0,hl=0,dl=null;function Qk(n,r){if(fc===null){var o=fc=[];zf=0,hl=Hm(),dl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return zf++,r.then(kb,kb),r}function kb(){if(--zf===0&&fc!==null){dl!==null&&(dl.status="fulfilled");var n=fc;fc=null,hl=0,dl=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function Xk(n,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Tb=q.S;q.S=function(n,r){o0=rn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Qk(n,r),Tb!==null&&Tb(n,r)};var To=P(null);function Ff(){var n=To.current;return n!==null?n:Jn.pooledCache}function nh(n,r){r===null?xe(To,To.current):xe(To,r.pool)}function jb(){var n=Ff();return n===null?null:{parent:Cs._currentValue,pool:n}}var fl=Error(i(460)),qf=Error(i(474)),sh=Error(i(542)),rh={then:function(){}};function Eb(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Sb(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(ts,ts),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Cb(n),n;default:if(typeof r.status=="string")r.then(ts,ts);else{if(n=Jn,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Cb(n),n}throw Eo=r,fl}}function jo(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Eo=o,fl):o}}var Eo=null;function Nb(){if(Eo===null)throw Error(i(459));var n=Eo;return Eo=null,n}function Cb(n){if(n===fl||n===sh)throw Error(i(483))}var ml=null,mc=0;function ah(n){var r=mc;return mc+=1,ml===null&&(ml=[]),Sb(ml,n,r)}function pc(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function ih(n,r){throw r.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Rb(n){function r(X,W){if(n){var ae=X.deletions;ae===null?(X.deletions=[W],X.flags|=16):ae.push(W)}}function o(X,W){if(!n)return null;for(;W!==null;)r(X,W),W=W.sibling;return null}function c(X){for(var W=new Map;X!==null;)X.key!==null?W.set(X.key,X):W.set(X.index,X),X=X.sibling;return W}function f(X,W){return X=Fa(X,W),X.index=0,X.sibling=null,X}function m(X,W,ae){return X.index=ae,n?(ae=X.alternate,ae!==null?(ae=ae.index,ae<W?(X.flags|=67108866,W):ae):(X.flags|=67108866,W)):(X.flags|=1048576,W)}function x(X){return n&&X.alternate===null&&(X.flags|=67108866),X}function E(X,W,ae,Se){return W===null||W.tag!==6?(W=Af(ae,X.mode,Se),W.return=X,W):(W=f(W,ae),W.return=X,W)}function B(X,W,ae,Se){var kt=ae.type;return kt===U?Te(X,W,ae.props.children,Se,ae.key):W!==null&&(W.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===S&&jo(kt)===W.type)?(W=f(W,ae.props),pc(W,ae),W.return=X,W):(W=Ju(ae.type,ae.key,ae.props,null,X.mode,Se),pc(W,ae),W.return=X,W)}function ie(X,W,ae,Se){return W===null||W.tag!==4||W.stateNode.containerInfo!==ae.containerInfo||W.stateNode.implementation!==ae.implementation?(W=If(ae,X.mode,Se),W.return=X,W):(W=f(W,ae.children||[]),W.return=X,W)}function Te(X,W,ae,Se,kt){return W===null||W.tag!==7?(W=xo(ae,X.mode,Se,kt),W.return=X,W):(W=f(W,ae),W.return=X,W)}function Ce(X,W,ae){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Af(""+W,X.mode,ae),W.return=X,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case L:return ae=Ju(W.type,W.key,W.props,null,X.mode,ae),pc(ae,W),ae.return=X,ae;case $:return W=If(W,X.mode,ae),W.return=X,W;case S:return W=jo(W),Ce(X,W,ae)}if(bt(W)||F(W))return W=xo(W,X.mode,ae,null),W.return=X,W;if(typeof W.then=="function")return Ce(X,ah(W),ae);if(W.$$typeof===oe)return Ce(X,th(X,W),ae);ih(X,W)}return null}function le(X,W,ae,Se){var kt=W!==null?W.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return kt!==null?null:E(X,W,""+ae,Se);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case L:return ae.key===kt?B(X,W,ae,Se):null;case $:return ae.key===kt?ie(X,W,ae,Se):null;case S:return ae=jo(ae),le(X,W,ae,Se)}if(bt(ae)||F(ae))return kt!==null?null:Te(X,W,ae,Se,null);if(typeof ae.then=="function")return le(X,W,ah(ae),Se);if(ae.$$typeof===oe)return le(X,W,th(X,ae),Se);ih(X,ae)}return null}function fe(X,W,ae,Se,kt){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return X=X.get(ae)||null,E(W,X,""+Se,kt);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case L:return X=X.get(Se.key===null?ae:Se.key)||null,B(W,X,Se,kt);case $:return X=X.get(Se.key===null?ae:Se.key)||null,ie(W,X,Se,kt);case S:return Se=jo(Se),fe(X,W,ae,Se,kt)}if(bt(Se)||F(Se))return X=X.get(ae)||null,Te(W,X,Se,kt,null);if(typeof Se.then=="function")return fe(X,W,ae,ah(Se),kt);if(Se.$$typeof===oe)return fe(X,W,ae,th(W,Se),kt);ih(W,Se)}return null}function ut(X,W,ae,Se){for(var kt=null,Rn=null,pt=W,sn=W=0,bn=null;pt!==null&&sn<ae.length;sn++){pt.index>sn?(bn=pt,pt=null):bn=pt.sibling;var An=le(X,pt,ae[sn],Se);if(An===null){pt===null&&(pt=bn);break}n&&pt&&An.alternate===null&&r(X,pt),W=m(An,W,sn),Rn===null?kt=An:Rn.sibling=An,Rn=An,pt=bn}if(sn===ae.length)return o(X,pt),Tn&&qa(X,sn),kt;if(pt===null){for(;sn<ae.length;sn++)pt=Ce(X,ae[sn],Se),pt!==null&&(W=m(pt,W,sn),Rn===null?kt=pt:Rn.sibling=pt,Rn=pt);return Tn&&qa(X,sn),kt}for(pt=c(pt);sn<ae.length;sn++)bn=fe(pt,X,sn,ae[sn],Se),bn!==null&&(n&&bn.alternate!==null&&pt.delete(bn.key===null?sn:bn.key),W=m(bn,W,sn),Rn===null?kt=bn:Rn.sibling=bn,Rn=bn);return n&&pt.forEach(function(Fi){return r(X,Fi)}),Tn&&qa(X,sn),kt}function Rt(X,W,ae,Se){if(ae==null)throw Error(i(151));for(var kt=null,Rn=null,pt=W,sn=W=0,bn=null,An=ae.next();pt!==null&&!An.done;sn++,An=ae.next()){pt.index>sn?(bn=pt,pt=null):bn=pt.sibling;var Fi=le(X,pt,An.value,Se);if(Fi===null){pt===null&&(pt=bn);break}n&&pt&&Fi.alternate===null&&r(X,pt),W=m(Fi,W,sn),Rn===null?kt=Fi:Rn.sibling=Fi,Rn=Fi,pt=bn}if(An.done)return o(X,pt),Tn&&qa(X,sn),kt;if(pt===null){for(;!An.done;sn++,An=ae.next())An=Ce(X,An.value,Se),An!==null&&(W=m(An,W,sn),Rn===null?kt=An:Rn.sibling=An,Rn=An);return Tn&&qa(X,sn),kt}for(pt=c(pt);!An.done;sn++,An=ae.next())An=fe(pt,X,sn,An.value,Se),An!==null&&(n&&An.alternate!==null&&pt.delete(An.key===null?sn:An.key),W=m(An,W,sn),Rn===null?kt=An:Rn.sibling=An,Rn=An);return n&&pt.forEach(function(lj){return r(X,lj)}),Tn&&qa(X,sn),kt}function Kn(X,W,ae,Se){if(typeof ae=="object"&&ae!==null&&ae.type===U&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case L:e:{for(var kt=ae.key;W!==null;){if(W.key===kt){if(kt=ae.type,kt===U){if(W.tag===7){o(X,W.sibling),Se=f(W,ae.props.children),Se.return=X,X=Se;break e}}else if(W.elementType===kt||typeof kt=="object"&&kt!==null&&kt.$$typeof===S&&jo(kt)===W.type){o(X,W.sibling),Se=f(W,ae.props),pc(Se,ae),Se.return=X,X=Se;break e}o(X,W);break}else r(X,W);W=W.sibling}ae.type===U?(Se=xo(ae.props.children,X.mode,Se,ae.key),Se.return=X,X=Se):(Se=Ju(ae.type,ae.key,ae.props,null,X.mode,Se),pc(Se,ae),Se.return=X,X=Se)}return x(X);case $:e:{for(kt=ae.key;W!==null;){if(W.key===kt)if(W.tag===4&&W.stateNode.containerInfo===ae.containerInfo&&W.stateNode.implementation===ae.implementation){o(X,W.sibling),Se=f(W,ae.children||[]),Se.return=X,X=Se;break e}else{o(X,W);break}else r(X,W);W=W.sibling}Se=If(ae,X.mode,Se),Se.return=X,X=Se}return x(X);case S:return ae=jo(ae),Kn(X,W,ae,Se)}if(bt(ae))return ut(X,W,ae,Se);if(F(ae)){if(kt=F(ae),typeof kt!="function")throw Error(i(150));return ae=kt.call(ae),Rt(X,W,ae,Se)}if(typeof ae.then=="function")return Kn(X,W,ah(ae),Se);if(ae.$$typeof===oe)return Kn(X,W,th(X,ae),Se);ih(X,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,W!==null&&W.tag===6?(o(X,W.sibling),Se=f(W,ae),Se.return=X,X=Se):(o(X,W),Se=Af(ae,X.mode,Se),Se.return=X,X=Se),x(X)):o(X,W)}return function(X,W,ae,Se){try{mc=0;var kt=Kn(X,W,ae,Se);return ml=null,kt}catch(pt){if(pt===fl||pt===sh)throw pt;var Rn=Mr(29,pt,null,X.mode);return Rn.lanes=Se,Rn.return=X,Rn}}}var So=Rb(!0),Ab=Rb(!1),ji=!1;function Hf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ei(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Si(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Pn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Xu(n),mb(n,null,o),r}return Qu(n,c,r,o),Xu(n)}function gc(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,Sn(n,o)}}function Wf(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var Gf=!1;function yc(){if(Gf){var n=dl;if(n!==null)throw n}}function bc(n,r,o,c){Gf=!1;var f=n.updateQueue;ji=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var B=E,ie=B.next;B.next=null,x===null?m=ie:x.next=ie,x=B;var Te=n.alternate;Te!==null&&(Te=Te.updateQueue,E=Te.lastBaseUpdate,E!==x&&(E===null?Te.firstBaseUpdate=ie:E.next=ie,Te.lastBaseUpdate=B))}if(m!==null){var Ce=f.baseState;x=0,Te=ie=B=null,E=m;do{var le=E.lane&-536870913,fe=le!==E.lane;if(fe?(yn&le)===le:(c&le)===le){le!==0&&le===hl&&(Gf=!0),Te!==null&&(Te=Te.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ut=n,Rt=E;le=r;var Kn=o;switch(Rt.tag){case 1:if(ut=Rt.payload,typeof ut=="function"){Ce=ut.call(Kn,Ce,le);break e}Ce=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=Rt.payload,le=typeof ut=="function"?ut.call(Kn,Ce,le):ut,le==null)break e;Ce=k({},Ce,le);break e;case 2:ji=!0}}le=E.callback,le!==null&&(n.flags|=64,fe&&(n.flags|=8192),fe=f.callbacks,fe===null?f.callbacks=[le]:fe.push(le))}else fe={lane:le,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Te===null?(ie=Te=fe,B=Ce):Te=Te.next=fe,x|=le;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;fe=E,E=fe.next,fe.next=null,f.lastBaseUpdate=fe,f.shared.pending=null}}while(!0);Te===null&&(B=Ce),f.baseState=B,f.firstBaseUpdate=ie,f.lastBaseUpdate=Te,m===null&&(f.shared.lanes=0),Ii|=x,n.lanes=x,n.memoizedState=Ce}}function Ib(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function Mb(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Ib(o[n],r)}var pl=P(null),oh=P(0);function Db(n,r){n=ei,xe(oh,n),xe(pl,r),ei=n|r.baseLanes}function Kf(){xe(oh,ei),xe(pl,pl.current)}function Yf(){ei=oh.current,G(pl),G(oh)}var Dr=P(null),Xr=null;function Ni(n){var r=n.alternate;xe(_s,_s.current&1),xe(Dr,n),Xr===null&&(r===null||pl.current!==null||r.memoizedState!==null)&&(Xr=n)}function Qf(n){xe(_s,_s.current),xe(Dr,n),Xr===null&&(Xr=n)}function Pb(n){n.tag===22?(xe(_s,_s.current),xe(Dr,n),Xr===null&&(Xr=n)):Ci()}function Ci(){xe(_s,_s.current),xe(Dr,Dr.current)}function Pr(n){G(Dr),Xr===n&&(Xr=null),G(_s)}var _s=P(0);function lh(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||np(o)||sp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Wa=0,Zt=null,Wn=null,Rs=null,ch=!1,gl=!1,No=!1,uh=0,vc=0,yl=null,Jk=0;function ps(){throw Error(i(321))}function Xf(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Ir(n[o],r[o]))return!1;return!0}function Jf(n,r,o,c,f,m){return Wa=m,Zt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,q.H=n===null||n.memoizedState===null?bv:fm,No=!1,m=o(c,f),No=!1,gl&&(m=Ob(r,o,c,f)),Lb(n),m}function Lb(n){q.H=_c;var r=Wn!==null&&Wn.next!==null;if(Wa=0,Rs=Wn=Zt=null,ch=!1,vc=0,yl=null,r)throw Error(i(300));n===null||As||(n=n.dependencies,n!==null&&eh(n)&&(As=!0))}function Ob(n,r,o,c){Zt=n;var f=0;do{if(gl&&(yl=null),vc=0,gl=!1,25<=f)throw Error(i(301));if(f+=1,Rs=Wn=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}q.H=vv,m=r(o,c)}while(gl);return m}function Zk(){var n=q.H,r=n.useState()[0];return r=typeof r.then=="function"?xc(r):r,n=n.useState()[0],(Wn!==null?Wn.memoizedState:null)!==n&&(Zt.flags|=1024),r}function Zf(){var n=uh!==0;return uh=0,n}function em(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function tm(n){if(ch){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ch=!1}Wa=0,Rs=Wn=Zt=null,gl=!1,vc=uh=0,yl=null}function fr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rs===null?Zt.memoizedState=Rs=n:Rs=Rs.next=n,Rs}function ks(){if(Wn===null){var n=Zt.alternate;n=n!==null?n.memoizedState:null}else n=Wn.next;var r=Rs===null?Zt.memoizedState:Rs.next;if(r!==null)Rs=r,Wn=n;else{if(n===null)throw Zt.alternate===null?Error(i(467)):Error(i(310));Wn=n,n={memoizedState:Wn.memoizedState,baseState:Wn.baseState,baseQueue:Wn.baseQueue,queue:Wn.queue,next:null},Rs===null?Zt.memoizedState=Rs=n:Rs=Rs.next=n}return Rs}function hh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xc(n){var r=vc;return vc+=1,yl===null&&(yl=[]),n=Sb(yl,n,r),r=Zt,(Rs===null?r.memoizedState:Rs.next)===null&&(r=r.alternate,q.H=r===null||r.memoizedState===null?bv:fm),n}function dh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return xc(n);if(n.$$typeof===oe)return Qs(n)}throw Error(i(438,String(n)))}function nm(n){var r=null,o=Zt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Zt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=hh(),Zt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),c=0;c<n;c++)o[c]=V;return r.index++,o}function Ga(n,r){return typeof r=="function"?r(n):r}function fh(n){var r=ks();return sm(r,Wn,n)}function sm(n,r,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var E=x=null,B=null,ie=r,Te=!1;do{var Ce=ie.lane&-536870913;if(Ce!==ie.lane?(yn&Ce)===Ce:(Wa&Ce)===Ce){var le=ie.revertLane;if(le===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),Ce===hl&&(Te=!0);else if((Wa&le)===le){ie=ie.next,le===hl&&(Te=!0);continue}else Ce={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},B===null?(E=B=Ce,x=m):B=B.next=Ce,Zt.lanes|=le,Ii|=le;Ce=ie.action,No&&o(m,Ce),m=ie.hasEagerState?ie.eagerState:o(m,Ce)}else le={lane:Ce,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},B===null?(E=B=le,x=m):B=B.next=le,Zt.lanes|=Ce,Ii|=Ce;ie=ie.next}while(ie!==null&&ie!==r);if(B===null?x=m:B.next=E,!Ir(m,n.memoizedState)&&(As=!0,Te&&(o=dl,o!==null)))throw o;n.memoizedState=m,n.baseState=x,n.baseQueue=B,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function rm(n){var r=ks(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var x=f=f.next;do m=n(m,x.action),x=x.next;while(x!==f);Ir(m,r.memoizedState)||(As=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function Vb(n,r,o){var c=Zt,f=ks(),m=Tn;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var x=!Ir((Wn||f).memoizedState,o);if(x&&(f.memoizedState=o,As=!0),f=f.queue,om(zb.bind(null,c,f,n),[n]),f.getSnapshot!==r||x||Rs!==null&&Rs.memoizedState.tag&1){if(c.flags|=2048,bl(9,{destroy:void 0},Ub.bind(null,c,f,o,r),null),Jn===null)throw Error(i(349));m||(Wa&127)!==0||Bb(c,r,o)}return o}function Bb(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=Zt.updateQueue,r===null?(r=hh(),Zt.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Ub(n,r,o,c){r.value=o,r.getSnapshot=c,Fb(r)&&qb(n)}function zb(n,r,o){return o(function(){Fb(r)&&qb(n)})}function Fb(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Ir(n,o)}catch{return!0}}function qb(n){var r=vo(n,2);r!==null&&Sr(r,n,2)}function am(n){var r=fr();if(typeof n=="function"){var o=n;if(n=o(),No){De(!0);try{o()}finally{De(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:n},r}function Hb(n,r,o,c){return n.baseState=o,sm(n,Wn,typeof c=="function"?c:Ga)}function eT(n,r,o,c,f){if(gh(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};q.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,$b(r,m)):(m.next=o.next,r.pending=o.next=m)}}function $b(n,r){var o=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=q.T,x={};q.T=x;try{var E=o(f,c),B=q.S;B!==null&&B(x,E),Wb(n,r,E)}catch(ie){im(n,r,ie)}finally{m!==null&&x.types!==null&&(m.types=x.types),q.T=m}}else try{m=o(f,c),Wb(n,r,m)}catch(ie){im(n,r,ie)}}function Wb(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Gb(n,r,c)},function(c){return im(n,r,c)}):Gb(n,r,o)}function Gb(n,r,o){r.status="fulfilled",r.value=o,Kb(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,$b(n,o)))}function im(n,r,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Kb(r),r=r.next;while(r!==c)}n.action=null}function Kb(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Yb(n,r){return r}function Qb(n,r){if(Tn){var o=Jn.formState;if(o!==null){e:{var c=Zt;if(Tn){if(rs){t:{for(var f=rs,m=Qr;f.nodeType!==8;){if(!m){f=null;break t}if(f=Jr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){rs=Jr(f.nextSibling),c=f.data==="F!";break e}}ki(c)}c=!1}c&&(r=o[0])}}return o=fr(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yb,lastRenderedState:r},o.queue=c,o=pv.bind(null,Zt,c),c.dispatch=o,c=am(!1),m=dm.bind(null,Zt,!1,c.queue),c=fr(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,o=eT.bind(null,Zt,f,m,o),f.dispatch=o,c.memoizedState=n,[r,o,!1]}function Xb(n){var r=ks();return Jb(r,Wn,n)}function Jb(n,r,o){if(r=sm(n,r,Yb)[0],n=fh(Ga)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=xc(r)}catch(x){throw x===fl?sh:x}else c=r;r=ks();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Zt.flags|=2048,bl(9,{destroy:void 0},tT.bind(null,f,o),null)),[c,m,n]}function tT(n,r){n.action=r}function Zb(n){var r=ks(),o=Wn;if(o!==null)return Jb(r,o,n);ks(),r=r.memoizedState,o=ks();var c=o.queue.dispatch;return o.memoizedState=n,[r,c,!1]}function bl(n,r,o,c){return n={tag:n,create:o,deps:c,inst:r,next:null},r=Zt.updateQueue,r===null&&(r=hh(),Zt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n),n}function ev(){return ks().memoizedState}function mh(n,r,o,c){var f=fr();Zt.flags|=n,f.memoizedState=bl(1|r,{destroy:void 0},o,c===void 0?null:c)}function ph(n,r,o,c){var f=ks();c=c===void 0?null:c;var m=f.memoizedState.inst;Wn!==null&&c!==null&&Xf(c,Wn.memoizedState.deps)?f.memoizedState=bl(r,m,o,c):(Zt.flags|=n,f.memoizedState=bl(1|r,m,o,c))}function tv(n,r){mh(8390656,8,n,r)}function om(n,r){ph(2048,8,n,r)}function nT(n){Zt.flags|=4;var r=Zt.updateQueue;if(r===null)r=hh(),Zt.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function nv(n){var r=ks().memoizedState;return nT({ref:r,nextImpl:n}),function(){if((Pn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function sv(n,r){return ph(4,2,n,r)}function rv(n,r){return ph(4,4,n,r)}function av(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function iv(n,r,o){o=o!=null?o.concat([n]):null,ph(4,4,av.bind(null,r,n),o)}function lm(){}function ov(n,r){var o=ks();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Xf(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function lv(n,r){var o=ks();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Xf(r,c[1]))return c[0];if(c=n(),No){De(!0);try{n()}finally{De(!1)}}return o.memoizedState=[c,r],c}function cm(n,r,o){return o===void 0||(Wa&1073741824)!==0&&(yn&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=c0(),Zt.lanes|=n,Ii|=n,o)}function cv(n,r,o,c){return Ir(o,r)?o:pl.current!==null?(n=cm(n,o,c),Ir(n,r)||(As=!0),n):(Wa&42)===0||(Wa&1073741824)!==0&&(yn&261930)===0?(As=!0,n.memoizedState=o):(n=c0(),Zt.lanes|=n,Ii|=n,r)}function uv(n,r,o,c,f){var m=me.p;me.p=m!==0&&8>m?m:8;var x=q.T,E={};q.T=E,dm(n,!1,r,o);try{var B=f(),ie=q.S;if(ie!==null&&ie(E,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var Te=Xk(B,c);wc(n,r,Te,Vr(n))}else wc(n,r,c,Vr(n))}catch(Ce){wc(n,r,{then:function(){},status:"rejected",reason:Ce},Vr())}finally{me.p=m,x!==null&&E.types!==null&&(x.types=E.types),q.T=x}}function sT(){}function um(n,r,o,c){if(n.tag!==5)throw Error(i(476));var f=hv(n).queue;uv(n,f,r,Pe,o===null?sT:function(){return dv(n),o(c)})}function hv(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Pe,baseState:Pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:Pe},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ga,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function dv(n){var r=hv(n);r.next===null&&(r=n.alternate.memoizedState),wc(n,r.next.queue,{},Vr())}function hm(){return Qs(Vc)}function fv(){return ks().memoizedState}function mv(){return ks().memoizedState}function rT(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Vr();n=Ei(o);var c=Si(r,n,o);c!==null&&(Sr(c,r,o),gc(c,r,o)),r={cache:Uf()},n.payload=r;return}r=r.return}}function aT(n,r,o){var c=Vr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},gh(n)?gv(r,o):(o=Cf(n,r,o,c),o!==null&&(Sr(o,n,c),yv(o,r,c)))}function pv(n,r,o){var c=Vr();wc(n,r,o,c)}function wc(n,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(gh(n))gv(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,E=m(x,o);if(f.hasEagerState=!0,f.eagerState=E,Ir(E,x))return Qu(n,r,f,0),Jn===null&&Yu(),!1}catch{}if(o=Cf(n,r,f,c),o!==null)return Sr(o,n,c),yv(o,r,c),!0}return!1}function dm(n,r,o,c){if(c={lane:2,revertLane:Hm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},gh(n)){if(r)throw Error(i(479))}else r=Cf(n,o,c,2),r!==null&&Sr(r,n,2)}function gh(n){var r=n.alternate;return n===Zt||r!==null&&r===Zt}function gv(n,r){gl=ch=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function yv(n,r,o){if((o&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,Sn(n,o)}}var _c={readContext:Qs,use:dh,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useLayoutEffect:ps,useInsertionEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useSyncExternalStore:ps,useId:ps,useHostTransitionStatus:ps,useFormState:ps,useActionState:ps,useOptimistic:ps,useMemoCache:ps,useCacheRefresh:ps};_c.useEffectEvent=ps;var bv={readContext:Qs,use:dh,useCallback:function(n,r){return fr().memoizedState=[n,r===void 0?null:r],n},useContext:Qs,useEffect:tv,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,mh(4194308,4,av.bind(null,r,n),o)},useLayoutEffect:function(n,r){return mh(4194308,4,n,r)},useInsertionEffect:function(n,r){mh(4,2,n,r)},useMemo:function(n,r){var o=fr();r=r===void 0?null:r;var c=n();if(No){De(!0);try{n()}finally{De(!1)}}return o.memoizedState=[c,r],c},useReducer:function(n,r,o){var c=fr();if(o!==void 0){var f=o(r);if(No){De(!0);try{o(r)}finally{De(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=aT.bind(null,Zt,n),[c.memoizedState,n]},useRef:function(n){var r=fr();return n={current:n},r.memoizedState=n},useState:function(n){n=am(n);var r=n.queue,o=pv.bind(null,Zt,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:lm,useDeferredValue:function(n,r){var o=fr();return cm(o,n,r)},useTransition:function(){var n=am(!1);return n=uv.bind(null,Zt,n.queue,!0,!1),fr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var c=Zt,f=fr();if(Tn){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Jn===null)throw Error(i(349));(yn&127)!==0||Bb(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,tv(zb.bind(null,c,m,n),[n]),c.flags|=2048,bl(9,{destroy:void 0},Ub.bind(null,c,m,o,r),null),o},useId:function(){var n=fr(),r=Jn.identifierPrefix;if(Tn){var o=_a,c=wa;o=(c&~(1<<32-Ue(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=uh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Jk++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:hm,useFormState:Qb,useActionState:Qb,useOptimistic:function(n){var r=fr();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=dm.bind(null,Zt,!0,o),o.dispatch=r,[n,r]},useMemoCache:nm,useCacheRefresh:function(){return fr().memoizedState=rT.bind(null,Zt)},useEffectEvent:function(n){var r=fr(),o={impl:n};return r.memoizedState=o,function(){if((Pn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},fm={readContext:Qs,use:dh,useCallback:ov,useContext:Qs,useEffect:om,useImperativeHandle:iv,useInsertionEffect:sv,useLayoutEffect:rv,useMemo:lv,useReducer:fh,useRef:ev,useState:function(){return fh(Ga)},useDebugValue:lm,useDeferredValue:function(n,r){var o=ks();return cv(o,Wn.memoizedState,n,r)},useTransition:function(){var n=fh(Ga)[0],r=ks().memoizedState;return[typeof n=="boolean"?n:xc(n),r]},useSyncExternalStore:Vb,useId:fv,useHostTransitionStatus:hm,useFormState:Xb,useActionState:Xb,useOptimistic:function(n,r){var o=ks();return Hb(o,Wn,n,r)},useMemoCache:nm,useCacheRefresh:mv};fm.useEffectEvent=nv;var vv={readContext:Qs,use:dh,useCallback:ov,useContext:Qs,useEffect:om,useImperativeHandle:iv,useInsertionEffect:sv,useLayoutEffect:rv,useMemo:lv,useReducer:rm,useRef:ev,useState:function(){return rm(Ga)},useDebugValue:lm,useDeferredValue:function(n,r){var o=ks();return Wn===null?cm(o,n,r):cv(o,Wn.memoizedState,n,r)},useTransition:function(){var n=rm(Ga)[0],r=ks().memoizedState;return[typeof n=="boolean"?n:xc(n),r]},useSyncExternalStore:Vb,useId:fv,useHostTransitionStatus:hm,useFormState:Zb,useActionState:Zb,useOptimistic:function(n,r){var o=ks();return Wn!==null?Hb(o,Wn,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:nm,useCacheRefresh:mv};vv.useEffectEvent=nv;function mm(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:k({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var pm={enqueueSetState:function(n,r,o){n=n._reactInternals;var c=Vr(),f=Ei(c);f.payload=r,o!=null&&(f.callback=o),r=Si(n,f,c),r!==null&&(Sr(r,n,c),gc(r,n,c))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=Vr(),f=Ei(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=Si(n,f,c),r!==null&&(Sr(r,n,c),gc(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Vr(),c=Ei(o);c.tag=2,r!=null&&(c.callback=r),r=Si(n,c,o),r!==null&&(Sr(r,n,o),gc(r,n,o))}};function xv(n,r,o,c,f,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,x):r.prototype&&r.prototype.isPureReactComponent?!lc(o,c)||!lc(f,m):!0}function wv(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&pm.enqueueReplaceState(r,r.state,null)}function Co(n,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(n=n.defaultProps){o===r&&(o=k({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function _v(n){Ku(n)}function kv(n){console.error(n)}function Tv(n){Ku(n)}function yh(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function jv(n,r,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function gm(n,r,o){return o=Ei(o),o.tag=3,o.payload={element:null},o.callback=function(){yh(n,r)},o}function Ev(n){return n=Ei(n),n.tag=3,n}function Sv(n,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){jv(r,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){jv(r,o,c),typeof f!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function iT(n,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&ul(r,o,f,!0),o=Dr.current,o!==null){switch(o.tag){case 31:case 13:return Xr===null?Ch():o.alternate===null&&gs===0&&(gs=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===rh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),zm(n,c,f)),!1;case 22:return o.flags|=65536,c===rh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),zm(n,c,f)),!1}throw Error(i(435,o.tag))}return zm(n,c,f),Ch(),!1}if(Tn)return r=Dr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Pf&&(n=Error(i(422),{cause:c}),hc(Gr(n,o)))):(c!==Pf&&(r=Error(i(423),{cause:c}),hc(Gr(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Gr(c,o),f=gm(n.stateNode,c,f),Wf(n,f),gs!==4&&(gs=2)),!1;var m=Error(i(520),{cause:c});if(m=Gr(m,o),Rc===null?Rc=[m]:Rc.push(m),gs!==4&&(gs=2),r===null)return!0;c=Gr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=gm(o.stateNode,c,n),Wf(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Mi===null||!Mi.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Ev(f),Sv(f,n,o,c),Wf(o,f),!1}o=o.return}while(o!==null);return!1}var ym=Error(i(461)),As=!1;function Xs(n,r,o,c){r.child=n===null?Ab(r,null,o,c):So(r,n.child,o,c)}function Nv(n,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var x={};for(var E in c)E!=="ref"&&(x[E]=c[E])}else x=c;return ko(r),c=Jf(n,r,o,x,m,f),E=Zf(),n!==null&&!As?(em(n,r,f),Ka(n,r,f)):(Tn&&E&&Mf(r),r.flags|=1,Xs(n,r,c,f),r.child)}function Cv(n,r,o,c,f){if(n===null){var m=o.type;return typeof m=="function"&&!Rf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,Rv(n,r,m,c,f)):(n=Ju(o.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!jm(n,f)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:lc,o(x,c)&&n.ref===r.ref)return Ka(n,r,f)}return r.flags|=1,n=Fa(m,c),n.ref=r.ref,n.return=r,r.child=n}function Rv(n,r,o,c,f){if(n!==null){var m=n.memoizedProps;if(lc(m,c)&&n.ref===r.ref)if(As=!1,r.pendingProps=c=m,jm(n,f))(n.flags&131072)!==0&&(As=!0);else return r.lanes=n.lanes,Ka(n,r,f)}return bm(n,r,o,c,f)}function Av(n,r,o,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return Iv(n,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&nh(r,m!==null?m.cachePool:null),m!==null?Db(r,m):Kf(),Pb(r);else return c=r.lanes=536870912,Iv(n,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(nh(r,m.cachePool),Db(r,m),Ci(),r.memoizedState=null):(n!==null&&nh(r,null),Kf(),Ci());return Xs(n,r,f,o),r.child}function kc(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Iv(n,r,o,c,f){var m=Ff();return m=m===null?null:{parent:Cs._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},n!==null&&nh(r,null),Kf(),Pb(r),n!==null&&ul(n,r,c,!0),r.childLanes=f,null}function bh(n,r){return r=xh({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function Mv(n,r,o){return So(r,n.child,null,o),n=bh(r,r.pendingProps),n.flags|=2,Pr(r),r.memoizedState=null,n}function oT(n,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Tn){if(c.mode==="hidden")return n=bh(r,c),r.lanes=536870912,kc(null,n);if(Qf(r),(n=rs)?(n=$0(n,Qr),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:wi!==null?{id:wa,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},o=gb(n),o.return=r,r.child=o,Ys=r,rs=null)):n=null,n===null)throw ki(r);return r.lanes=536870912,null}return bh(r,c)}var m=n.memoizedState;if(m!==null){var x=m.dehydrated;if(Qf(r),f)if(r.flags&256)r.flags&=-257,r=Mv(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(As||ul(n,r,o,!1),f=(o&n.childLanes)!==0,As||f){if(c=Jn,c!==null&&(x=Mn(c,o),x!==0&&x!==m.retryLane))throw m.retryLane=x,vo(n,x),Sr(c,n,x),ym;Ch(),r=Mv(n,r,o)}else n=m.treeContext,rs=Jr(x.nextSibling),Ys=r,Tn=!0,_i=null,Qr=!1,n!==null&&vb(r,n),r=bh(r,c),r.flags|=4096;return r}return n=Fa(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function vh(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function bm(n,r,o,c,f){return ko(r),o=Jf(n,r,o,c,void 0,f),c=Zf(),n!==null&&!As?(em(n,r,f),Ka(n,r,f)):(Tn&&c&&Mf(r),r.flags|=1,Xs(n,r,o,f),r.child)}function Dv(n,r,o,c,f,m){return ko(r),r.updateQueue=null,o=Ob(r,c,o,f),Lb(n),c=Zf(),n!==null&&!As?(em(n,r,m),Ka(n,r,m)):(Tn&&c&&Mf(r),r.flags|=1,Xs(n,r,o,m),r.child)}function Pv(n,r,o,c,f){if(ko(r),r.stateNode===null){var m=il,x=o.contextType;typeof x=="object"&&x!==null&&(m=Qs(x)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=pm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Hf(r),x=o.contextType,m.context=typeof x=="object"&&x!==null?Qs(x):il,m.state=r.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(mm(r,o,x,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&pm.enqueueReplaceState(m,m.state,null),bc(r,c,m,f),yc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var E=r.memoizedProps,B=Co(o,E);m.props=B;var ie=m.context,Te=o.contextType;x=il,typeof Te=="object"&&Te!==null&&(x=Qs(Te));var Ce=o.getDerivedStateFromProps;Te=typeof Ce=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,Te||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||ie!==x)&&wv(r,m,c,x),ji=!1;var le=r.memoizedState;m.state=le,bc(r,c,m,f),yc(),ie=r.memoizedState,E||le!==ie||ji?(typeof Ce=="function"&&(mm(r,o,Ce,c),ie=r.memoizedState),(B=ji||xv(r,o,B,c,le,ie,x))?(Te||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ie),m.props=c,m.state=ie,m.context=x,c=B):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,$f(n,r),x=r.memoizedProps,Te=Co(o,x),m.props=Te,Ce=r.pendingProps,le=m.context,ie=o.contextType,B=il,typeof ie=="object"&&ie!==null&&(B=Qs(ie)),E=o.getDerivedStateFromProps,(ie=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==Ce||le!==B)&&wv(r,m,c,B),ji=!1,le=r.memoizedState,m.state=le,bc(r,c,m,f),yc();var fe=r.memoizedState;x!==Ce||le!==fe||ji||n!==null&&n.dependencies!==null&&eh(n.dependencies)?(typeof E=="function"&&(mm(r,o,E,c),fe=r.memoizedState),(Te=ji||xv(r,o,Te,c,le,fe,B)||n!==null&&n.dependencies!==null&&eh(n.dependencies))?(ie||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,fe,B),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,fe,B)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&le===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&le===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=fe),m.props=c,m.state=fe,m.context=B,c=Te):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&le===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&le===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,vh(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=So(r,n.child,null,f),r.child=So(r,null,o,f)):Xs(n,r,o,f),r.memoizedState=m.state,n=r.child):n=Ka(n,r,f),n}function Lv(n,r,o,c){return wo(),r.flags|=256,Xs(n,r,o,c),r.child}var vm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xm(n){return{baseLanes:n,cachePool:jb()}}function wm(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Or),n}function Ov(n,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,x;if((x=m)||(x=n!==null&&n.memoizedState===null?!1:(_s.current&2)!==0),x&&(f=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,n===null){if(Tn){if(f?Ni(r):Ci(),(n=rs)?(n=$0(n,Qr),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:wi!==null?{id:wa,overflow:_a}:null,retryLane:536870912,hydrationErrors:null},o=gb(n),o.return=r,r.child=o,Ys=r,rs=null)):n=null,n===null)throw ki(r);return sp(n)?r.lanes=32:r.lanes=536870912,null}var E=c.children;return c=c.fallback,f?(Ci(),f=r.mode,E=xh({mode:"hidden",children:E},f),c=xo(c,f,o,null),E.return=r,c.return=r,E.sibling=c,r.child=E,c=r.child,c.memoizedState=xm(o),c.childLanes=wm(n,x,o),r.memoizedState=vm,kc(null,c)):(Ni(r),_m(r,E))}var B=n.memoizedState;if(B!==null&&(E=B.dehydrated,E!==null)){if(m)r.flags&256?(Ni(r),r.flags&=-257,r=km(n,r,o)):r.memoizedState!==null?(Ci(),r.child=n.child,r.flags|=128,r=null):(Ci(),E=c.fallback,f=r.mode,c=xh({mode:"visible",children:c.children},f),E=xo(E,f,o,null),E.flags|=2,c.return=r,E.return=r,c.sibling=E,r.child=c,So(r,n.child,null,o),c=r.child,c.memoizedState=xm(o),c.childLanes=wm(n,x,o),r.memoizedState=vm,r=kc(null,c));else if(Ni(r),sp(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var ie=x.dgst;x=ie,c=Error(i(419)),c.stack="",c.digest=x,hc({value:c,source:null,stack:null}),r=km(n,r,o)}else if(As||ul(n,r,o,!1),x=(o&n.childLanes)!==0,As||x){if(x=Jn,x!==null&&(c=Mn(x,o),c!==0&&c!==B.retryLane))throw B.retryLane=c,vo(n,c),Sr(x,n,c),ym;np(E)||Ch(),r=km(n,r,o)}else np(E)?(r.flags|=192,r.child=n.child,r=null):(n=B.treeContext,rs=Jr(E.nextSibling),Ys=r,Tn=!0,_i=null,Qr=!1,n!==null&&vb(r,n),r=_m(r,c.children),r.flags|=4096);return r}return f?(Ci(),E=c.fallback,f=r.mode,B=n.child,ie=B.sibling,c=Fa(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,ie!==null?E=Fa(ie,E):(E=xo(E,f,o,null),E.flags|=2),E.return=r,c.return=r,c.sibling=E,r.child=c,kc(null,c),c=r.child,E=n.child.memoizedState,E===null?E=xm(o):(f=E.cachePool,f!==null?(B=Cs._currentValue,f=f.parent!==B?{parent:B,pool:B}:f):f=jb(),E={baseLanes:E.baseLanes|o,cachePool:f}),c.memoizedState=E,c.childLanes=wm(n,x,o),r.memoizedState=vm,kc(n.child,c)):(Ni(r),o=n.child,n=o.sibling,o=Fa(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,n!==null&&(x=r.deletions,x===null?(r.deletions=[n],r.flags|=16):x.push(n)),r.child=o,r.memoizedState=null,o)}function _m(n,r){return r=xh({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function xh(n,r){return n=Mr(22,n,null,r),n.lanes=0,n}function km(n,r,o){return So(r,n.child,null,o),n=_m(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Vv(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Vf(n.return,r,o)}function Tm(n,r,o,c,f,m){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=f,x.treeForkCount=m)}function Bv(n,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var x=_s.current,E=(x&2)!==0;if(E?(x=x&1|2,r.flags|=128):x&=1,xe(_s,x),Xs(n,r,c,o),c=Tn?uc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Vv(n,o,r);else if(n.tag===19)Vv(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&lh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Tm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&lh(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Tm(r,!0,o,null,m,c);break;case"together":Tm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Ka(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Ii|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(ul(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Fa(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Fa(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function jm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&eh(n)))}function lT(n,r,o){switch(r.tag){case 3:ht(r,r.stateNode.containerInfo),Ti(r,Cs,n.memoizedState.cache),wo();break;case 27:case 5:Ot(r);break;case 4:ht(r,r.stateNode.containerInfo);break;case 10:Ti(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Qf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ni(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Ov(n,r,o):(Ni(r),n=Ka(n,r,o),n!==null?n.sibling:null);Ni(r);break;case 19:var f=(n.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(ul(n,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return Bv(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),xe(_s,_s.current),c)break;return null;case 22:return r.lanes=0,Av(n,r,o,r.pendingProps);case 24:Ti(r,Cs,n.memoizedState.cache)}return Ka(n,r,o)}function Uv(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)As=!0;else{if(!jm(n,o)&&(r.flags&128)===0)return As=!1,lT(n,r,o);As=(n.flags&131072)!==0}else As=!1,Tn&&(r.flags&1048576)!==0&&bb(r,uc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=jo(r.elementType),r.type=n,typeof n=="function")Rf(n)?(c=Co(n,c),r.tag=1,r=Pv(null,r,n,c,o)):(r.tag=0,r=bm(null,r,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===ve){r.tag=11,r=Nv(null,r,n,c,o);break e}else if(f===R){r.tag=14,r=Cv(null,r,n,c,o);break e}}throw r=He(n)||n,Error(i(306,r,""))}}return r;case 0:return bm(n,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=Co(c,r.pendingProps),Pv(n,r,c,f,o);case 3:e:{if(ht(r,r.stateNode.containerInfo),n===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,$f(n,r),bc(r,c,null,o);var x=r.memoizedState;if(c=x.cache,Ti(r,Cs,c),c!==m.cache&&Bf(r,[Cs],o,!0),yc(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Lv(n,r,c,o);break e}else if(c!==f){f=Gr(Error(i(424)),r),hc(f),r=Lv(n,r,c,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,rs=Jr(n.firstChild),Ys=r,Tn=!0,_i=null,Qr=!0,o=Ab(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(wo(),c===f){r=Ka(n,r,o);break e}Xs(n,r,c,o)}r=r.child}return r;case 26:return vh(n,r),n===null?(o=X0(r.type,null,r.pendingProps,null))?r.memoizedState=o:Tn||(o=r.type,n=r.pendingProps,c=Lh(Ae.current).createElement(o),c[tt]=r,c[Ct]=n,Js(c,o,n),N(c),r.stateNode=c):r.memoizedState=X0(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Ot(r),n===null&&Tn&&(c=r.stateNode=K0(r.type,r.pendingProps,Ae.current),Ys=r,Qr=!0,f=rs,Oi(r.type)?(rp=f,rs=Jr(c.firstChild)):rs=f),Xs(n,r,r.pendingProps.children,o),vh(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Tn&&((f=c=rs)&&(c=VT(c,r.type,r.pendingProps,Qr),c!==null?(r.stateNode=c,Ys=r,rs=Jr(c.firstChild),Qr=!1,f=!0):f=!1),f||ki(r)),Ot(r),f=r.type,m=r.pendingProps,x=n!==null?n.memoizedProps:null,c=m.children,Zm(f,m)?c=null:x!==null&&Zm(f,x)&&(r.flags|=32),r.memoizedState!==null&&(f=Jf(n,r,Zk,null,null,o),Vc._currentValue=f),vh(n,r),Xs(n,r,c,o),r.child;case 6:return n===null&&Tn&&((n=o=rs)&&(o=BT(o,r.pendingProps,Qr),o!==null?(r.stateNode=o,Ys=r,rs=null,n=!0):n=!1),n||ki(r)),null;case 13:return Ov(n,r,o);case 4:return ht(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=So(r,null,c,o):Xs(n,r,c,o),r.child;case 11:return Nv(n,r,r.type,r.pendingProps,o);case 7:return Xs(n,r,r.pendingProps,o),r.child;case 8:return Xs(n,r,r.pendingProps.children,o),r.child;case 12:return Xs(n,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Ti(r,r.type,c.value),Xs(n,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,ko(r),f=Qs(f),c=c(f),r.flags|=1,Xs(n,r,c,o),r.child;case 14:return Cv(n,r,r.type,r.pendingProps,o);case 15:return Rv(n,r,r.type,r.pendingProps,o);case 19:return Bv(n,r,o);case 31:return oT(n,r,o);case 22:return Av(n,r,o,r.pendingProps);case 24:return ko(r),c=Qs(Cs),n===null?(f=Ff(),f===null&&(f=Jn,m=Uf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},Hf(r),Ti(r,Cs,f)):((n.lanes&o)!==0&&($f(n,r),bc(r,null,null,o),yc()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ti(r,Cs,c)):(c=m.cache,Ti(r,Cs,c),c!==f.cache&&Bf(r,[Cs],o,!0))),Xs(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Ya(n){n.flags|=4}function Em(n,r,o,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(f0())n.flags|=8192;else throw Eo=rh,qf}else n.flags&=-16777217}function zv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!n1(r))if(f0())n.flags|=8192;else throw Eo=rh,qf}function wh(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Qt():536870912,n.lanes|=r,_l|=r)}function Tc(n,r){if(!Tn)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function as(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function cT(n,r,o){var c=r.pendingProps;switch(Df(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(r),null;case 1:return as(r),null;case 3:return o=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),$a(Cs),Je(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(cl(r)?Ya(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Lf())),as(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?(Ya(r),m!==null?(as(r),zv(r,m)):(as(r),Em(r,f,null,c,o))):m?m!==n.memoizedState?(Ya(r),as(r),zv(r,m)):(as(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&Ya(r),as(r),Em(r,f,n,c,o)),null;case 27:if(Cn(r),o=Ae.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Ya(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return as(r),null}n=Ee.current,cl(r)?xb(r):(n=K0(f,c,o),r.stateNode=n,Ya(r))}return as(r),null;case 5:if(Cn(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&Ya(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return as(r),null}if(m=Ee.current,cl(r))xb(r);else{var x=Lh(Ae.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}m[tt]=r,m[Ct]=c;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=m;e:switch(Js(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ya(r)}}return as(r),Em(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&Ya(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=Ae.current,cl(r)){if(n=r.stateNode,o=r.memoizedProps,c=null,f=Ys,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[tt]=r,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||O0(n.nodeValue,o)),n||ki(r,!0)}else n=Lh(n).createTextNode(c),n[tt]=r,r.stateNode=n}return as(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(c=cl(r),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[tt]=r}else wo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;as(r),n=!1}else o=Lf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(Pr(r),r):(Pr(r),null);if((r.flags&128)!==0)throw Error(i(558))}return as(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=cl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[tt]=r}else wo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;as(r),f=!1}else f=Lf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Pr(r),r):(Pr(r),null)}return Pr(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),wh(r,r.updateQueue),as(r),null);case 4:return Je(),n===null&&Km(r.stateNode.containerInfo),as(r),null;case 10:return $a(r.type),as(r),null;case 19:if(G(_s),c=r.memoizedState,c===null)return as(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)Tc(c,!1);else{if(gs!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=lh(n),m!==null){for(r.flags|=128,Tc(c,!1),n=m.updateQueue,r.updateQueue=n,wh(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)pb(o,n),o=o.sibling;return xe(_s,_s.current&1|2),Tn&&qa(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&rn()>Eh&&(r.flags|=128,f=!0,Tc(c,!1),r.lanes=4194304)}else{if(!f)if(n=lh(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,wh(r,n),Tc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Tn)return as(r),null}else 2*rn()-c.renderingStartTime>Eh&&o!==536870912&&(r.flags|=128,f=!0,Tc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(n=c.last,n!==null?n.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=rn(),n.sibling=null,o=_s.current,xe(_s,f?o&1|2:o&1),Tn&&qa(r,c.treeForkCount),n):(as(r),null);case 22:case 23:return Pr(r),Yf(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(as(r),r.subtreeFlags&6&&(r.flags|=8192)):as(r),o=r.updateQueue,o!==null&&wh(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),n!==null&&G(To),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),$a(Cs),as(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function uT(n,r){switch(Df(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return $a(Cs),Je(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Cn(r),null;case 31:if(r.memoizedState!==null){if(Pr(r),r.alternate===null)throw Error(i(340));wo()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Pr(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));wo()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return G(_s),null;case 4:return Je(),null;case 10:return $a(r.type),null;case 22:case 23:return Pr(r),Yf(),n!==null&&G(To),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return $a(Cs),null;case 25:return null;default:return null}}function Fv(n,r){switch(Df(r),r.tag){case 3:$a(Cs),Je();break;case 26:case 27:case 5:Cn(r);break;case 4:Je();break;case 31:r.memoizedState!==null&&Pr(r);break;case 13:Pr(r);break;case 19:G(_s);break;case 10:$a(r.type);break;case 22:case 23:Pr(r),Yf(),n!==null&&G(To);break;case 24:$a(Cs)}}function jc(n,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var m=o.create,x=o.inst;c=m(),x.destroy=c}o=o.next}while(o!==f)}}catch(E){qn(r,r.return,E)}}function Ri(n,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var x=c.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,f=r;var B=o,ie=E;try{ie()}catch(Te){qn(f,B,Te)}}}c=c.next}while(c!==m)}}catch(Te){qn(r,r.return,Te)}}function qv(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{Mb(r,o)}catch(c){qn(n,n.return,c)}}}function Hv(n,r,o){o.props=Co(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){qn(n,r,c)}}function Ec(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){qn(n,r,f)}}function ka(n,r){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){qn(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){qn(n,r,f)}else o.current=null}function $v(n){var r=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){qn(n,n.return,f)}}function Sm(n,r,o){try{var c=n.stateNode;IT(c,n.type,o,r),c[Ct]=r}catch(f){qn(n,n.return,f)}}function Wv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Oi(n.type)||n.tag===4}function Nm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Wv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Oi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Cm(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ts));else if(c!==4&&(c===27&&Oi(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Cm(n,r,o),n=n.sibling;n!==null;)Cm(n,r,o),n=n.sibling}function _h(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&(c===27&&Oi(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(_h(n,r,o),n=n.sibling;n!==null;)_h(n,r,o),n=n.sibling}function Gv(n){var r=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Js(r,c,o),r[tt]=n,r[Ct]=o}catch(m){qn(n,n.return,m)}}var Qa=!1,Is=!1,Rm=!1,Kv=typeof WeakSet=="function"?WeakSet:Set,Hs=null;function hT(n,r){if(n=n.containerInfo,Xm=qh,n=ib(n),kf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,E=-1,B=-1,ie=0,Te=0,Ce=n,le=null;t:for(;;){for(var fe;Ce!==o||f!==0&&Ce.nodeType!==3||(E=x+f),Ce!==m||c!==0&&Ce.nodeType!==3||(B=x+c),Ce.nodeType===3&&(x+=Ce.nodeValue.length),(fe=Ce.firstChild)!==null;)le=Ce,Ce=fe;for(;;){if(Ce===n)break t;if(le===o&&++ie===f&&(E=x),le===m&&++Te===c&&(B=x),(fe=Ce.nextSibling)!==null)break;Ce=le,le=Ce.parentNode}Ce=fe}o=E===-1||B===-1?null:{start:E,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(Jm={focusedElem:n,selectionRange:o},qh=!1,Hs=r;Hs!==null;)if(r=Hs,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,Hs=n;else for(;Hs!==null;){switch(r=Hs,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var ut=Co(o.type,f);n=c.getSnapshotBeforeUpdate(ut,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(Rt){qn(o,o.return,Rt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)tp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":tp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,Hs=n;break}Hs=r.return}}function Yv(n,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ja(n,o),c&4&&jc(5,o);break;case 1:if(Ja(n,o),c&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(x){qn(o,o.return,x)}else{var f=Co(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(x){qn(o,o.return,x)}}c&64&&qv(o),c&512&&Ec(o,o.return);break;case 3:if(Ja(n,o),c&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Mb(n,r)}catch(x){qn(o,o.return,x)}}break;case 27:r===null&&c&4&&Gv(o);case 26:case 5:Ja(n,o),r===null&&c&4&&$v(o),c&512&&Ec(o,o.return);break;case 12:Ja(n,o);break;case 31:Ja(n,o),c&4&&Jv(n,o);break;case 13:Ja(n,o),c&4&&Zv(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=xT.bind(null,o),UT(n,o))));break;case 22:if(c=o.memoizedState!==null||Qa,!c){r=r!==null&&r.memoizedState!==null||Is,f=Qa;var m=Is;Qa=c,(Is=r)&&!m?Za(n,o,(o.subtreeFlags&8772)!==0):Ja(n,o),Qa=f,Is=m}break;case 30:break;default:Ja(n,o)}}function Qv(n){var r=n.alternate;r!==null&&(n.alternate=null,Qv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&zs(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ls=null,kr=!1;function Xa(n,r,o){for(o=o.child;o!==null;)Xv(n,r,o),o=o.sibling}function Xv(n,r,o){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(Qe,o)}catch{}switch(o.tag){case 26:Is||ka(o,r),Xa(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Is||ka(o,r);var c=ls,f=kr;Oi(o.type)&&(ls=o.stateNode,kr=!1),Xa(n,r,o),Pc(o.stateNode),ls=c,kr=f;break;case 5:Is||ka(o,r);case 6:if(c=ls,f=kr,ls=null,Xa(n,r,o),ls=c,kr=f,ls!==null)if(kr)try{(ls.nodeType===9?ls.body:ls.nodeName==="HTML"?ls.ownerDocument.body:ls).removeChild(o.stateNode)}catch(m){qn(o,r,m)}else try{ls.removeChild(o.stateNode)}catch(m){qn(o,r,m)}break;case 18:ls!==null&&(kr?(n=ls,q0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Rl(n)):q0(ls,o.stateNode));break;case 4:c=ls,f=kr,ls=o.stateNode.containerInfo,kr=!0,Xa(n,r,o),ls=c,kr=f;break;case 0:case 11:case 14:case 15:Ri(2,o,r),Is||Ri(4,o,r),Xa(n,r,o);break;case 1:Is||(ka(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Hv(o,r,c)),Xa(n,r,o);break;case 21:Xa(n,r,o);break;case 22:Is=(c=Is)||o.memoizedState!==null,Xa(n,r,o),Is=c;break;default:Xa(n,r,o)}}function Jv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Rl(n)}catch(o){qn(r,r.return,o)}}}function Zv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Rl(n)}catch(o){qn(r,r.return,o)}}function dT(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Kv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Kv),r;default:throw Error(i(435,n.tag))}}function kh(n,r){var o=dT(n);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=wT.bind(null,n,c);c.then(f,f)}})}function Tr(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=n,x=r,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(Oi(E.type)){ls=E.stateNode,kr=!1;break e}break;case 5:ls=E.stateNode,kr=!1;break e;case 3:case 4:ls=E.stateNode.containerInfo,kr=!0;break e}E=E.return}if(ls===null)throw Error(i(160));Xv(m,x,f),ls=null,kr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)e0(r,n),r=r.sibling}var la=null;function e0(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Tr(r,n),jr(n),c&4&&(Ri(3,n,n.return),jc(3,n),Ri(5,n,n.return));break;case 1:Tr(r,n),jr(n),c&512&&(Is||o===null||ka(o,o.return)),c&64&&Qa&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=la;if(Tr(r,n),jr(n),c&512&&(Is||o===null||ka(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ls]||m[tt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Js(m,c,o),m[tt]=n,N(m),c=m;break e;case"link":var x=e1("link","href",f).get(c+(o.href||""));if(x){for(var E=0;E<x.length;E++)if(m=x[E],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(E,1);break t}}m=f.createElement(c),Js(m,c,o),f.head.appendChild(m);break;case"meta":if(x=e1("meta","content",f).get(c+(o.content||""))){for(E=0;E<x.length;E++)if(m=x[E],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(E,1);break t}}m=f.createElement(c),Js(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[tt]=n,N(m),c=m}n.stateNode=c}else t1(f,n.type,n.stateNode);else n.stateNode=Z0(f,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?t1(f,n.type,n.stateNode):Z0(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Sm(n,n.memoizedProps,o.memoizedProps)}break;case 27:Tr(r,n),jr(n),c&512&&(Is||o===null||ka(o,o.return)),o!==null&&c&4&&Sm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Tr(r,n),jr(n),c&512&&(Is||o===null||ka(o,o.return)),n.flags&32){f=n.stateNode;try{fs(f,"")}catch(ut){qn(n,n.return,ut)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Sm(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Rm=!0);break;case 6:if(Tr(r,n),jr(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(ut){qn(n,n.return,ut)}}break;case 3:if(Bh=null,f=la,la=Oh(r.containerInfo),Tr(r,n),la=f,jr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Rl(r.containerInfo)}catch(ut){qn(n,n.return,ut)}Rm&&(Rm=!1,t0(n));break;case 4:c=la,la=Oh(n.stateNode.containerInfo),Tr(r,n),jr(n),la=c;break;case 12:Tr(r,n),jr(n);break;case 31:Tr(r,n),jr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,kh(n,c)));break;case 13:Tr(r,n),jr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jh=rn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,kh(n,c)));break;case 22:f=n.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,ie=Qa,Te=Is;if(Qa=ie||f,Is=Te||B,Tr(r,n),Is=Te,Qa=ie,jr(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||B||Qa||Is||Ro(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){B=o=r;try{if(m=B.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=B.stateNode;var Ce=B.memoizedProps.style,le=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;E.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ut){qn(B,B.return,ut)}}}else if(r.tag===6){if(o===null){B=r;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(ut){qn(B,B.return,ut)}}}else if(r.tag===18){if(o===null){B=r;try{var fe=B.stateNode;f?H0(fe,!0):H0(B.stateNode,!1)}catch(ut){qn(B,B.return,ut)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,kh(n,o))));break;case 19:Tr(r,n),jr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,kh(n,c)));break;case 30:break;case 21:break;default:Tr(r,n),jr(n)}}function jr(n){var r=n.flags;if(r&2){try{for(var o,c=n.return;c!==null;){if(Wv(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Nm(n);_h(n,m,f);break;case 5:var x=o.stateNode;o.flags&32&&(fs(x,""),o.flags&=-33);var E=Nm(n);_h(n,E,x);break;case 3:case 4:var B=o.stateNode.containerInfo,ie=Nm(n);Cm(n,ie,B);break;default:throw Error(i(161))}}catch(Te){qn(n,n.return,Te)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function t0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;t0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Ja(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Yv(n,r.alternate,r),r=r.sibling}function Ro(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Ri(4,r,r.return),Ro(r);break;case 1:ka(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Hv(r,r.return,o),Ro(r);break;case 27:Pc(r.stateNode);case 26:case 5:ka(r,r.return),Ro(r);break;case 22:r.memoizedState===null&&Ro(r);break;case 30:Ro(r);break;default:Ro(r)}n=n.sibling}}function Za(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,x=m.flags;switch(m.tag){case 0:case 11:case 15:Za(f,m,o),jc(4,m);break;case 1:if(Za(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ie){qn(c,c.return,ie)}if(c=m,f=c.updateQueue,f!==null){var E=c.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)Ib(B[f],E)}catch(ie){qn(c,c.return,ie)}}o&&x&64&&qv(m),Ec(m,m.return);break;case 27:Gv(m);case 26:case 5:Za(f,m,o),o&&c===null&&x&4&&$v(m),Ec(m,m.return);break;case 12:Za(f,m,o);break;case 31:Za(f,m,o),o&&x&4&&Jv(f,m);break;case 13:Za(f,m,o),o&&x&4&&Zv(f,m);break;case 22:m.memoizedState===null&&Za(f,m,o),Ec(m,m.return);break;case 30:break;default:Za(f,m,o)}r=r.sibling}}function Am(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&dc(o))}function Im(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&dc(n))}function ca(n,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)n0(n,r,o,c),r=r.sibling}function n0(n,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ca(n,r,o,c),f&2048&&jc(9,r);break;case 1:ca(n,r,o,c);break;case 3:ca(n,r,o,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&dc(n)));break;case 12:if(f&2048){ca(n,r,o,c),n=r.stateNode;try{var m=r.memoizedProps,x=m.id,E=m.onPostCommit;typeof E=="function"&&E(x,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(B){qn(r,r.return,B)}}else ca(n,r,o,c);break;case 31:ca(n,r,o,c);break;case 13:ca(n,r,o,c);break;case 23:break;case 22:m=r.stateNode,x=r.alternate,r.memoizedState!==null?m._visibility&2?ca(n,r,o,c):Sc(n,r):m._visibility&2?ca(n,r,o,c):(m._visibility|=2,vl(n,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Am(x,r);break;case 24:ca(n,r,o,c),f&2048&&Im(r.alternate,r);break;default:ca(n,r,o,c)}}function vl(n,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,x=r,E=o,B=c,ie=x.flags;switch(x.tag){case 0:case 11:case 15:vl(m,x,E,B,f),jc(8,x);break;case 23:break;case 22:var Te=x.stateNode;x.memoizedState!==null?Te._visibility&2?vl(m,x,E,B,f):Sc(m,x):(Te._visibility|=2,vl(m,x,E,B,f)),f&&ie&2048&&Am(x.alternate,x);break;case 24:vl(m,x,E,B,f),f&&ie&2048&&Im(x.alternate,x);break;default:vl(m,x,E,B,f)}r=r.sibling}}function Sc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,c=r,f=c.flags;switch(c.tag){case 22:Sc(o,c),f&2048&&Am(c.alternate,c);break;case 24:Sc(o,c),f&2048&&Im(c.alternate,c);break;default:Sc(o,c)}r=r.sibling}}var Nc=8192;function xl(n,r,o){if(n.subtreeFlags&Nc)for(n=n.child;n!==null;)s0(n,r,o),n=n.sibling}function s0(n,r,o){switch(n.tag){case 26:xl(n,r,o),n.flags&Nc&&n.memoizedState!==null&&JT(o,la,n.memoizedState,n.memoizedProps);break;case 5:xl(n,r,o);break;case 3:case 4:var c=la;la=Oh(n.stateNode.containerInfo),xl(n,r,o),la=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Nc,Nc=16777216,xl(n,r,o),Nc=c):xl(n,r,o));break;default:xl(n,r,o)}}function r0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Cc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Hs=c,i0(c,n)}r0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)a0(n),n=n.sibling}function a0(n){switch(n.tag){case 0:case 11:case 15:Cc(n),n.flags&2048&&Ri(9,n,n.return);break;case 3:Cc(n);break;case 12:Cc(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Th(n)):Cc(n);break;default:Cc(n)}}function Th(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Hs=c,i0(c,n)}r0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Ri(8,r,r.return),Th(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Th(r));break;default:Th(r)}n=n.sibling}}function i0(n,r){for(;Hs!==null;){var o=Hs;switch(o.tag){case 0:case 11:case 15:Ri(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:dc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Hs=c;else e:for(o=n;Hs!==null;){c=Hs;var f=c.sibling,m=c.return;if(Qv(c),c===o){Hs=null;break e}if(f!==null){f.return=m,Hs=f;break e}Hs=m}}}var fT={getCacheForType:function(n){var r=Qs(Cs),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return Qs(Cs).controller.signal}},mT=typeof WeakMap=="function"?WeakMap:Map,Pn=0,Jn=null,dn=null,yn=0,Fn=0,Lr=null,Ai=!1,wl=!1,Mm=!1,ei=0,gs=0,Ii=0,Ao=0,Dm=0,Or=0,_l=0,Rc=null,Er=null,Pm=!1,jh=0,o0=0,Eh=1/0,Sh=null,Mi=null,Bs=0,Di=null,kl=null,ti=0,Lm=0,Om=null,l0=null,Ac=0,Vm=null;function Vr(){return(Pn&2)!==0&&yn!==0?yn&-yn:q.T!==null?Hm():_e()}function c0(){if(Or===0)if((yn&536870912)===0||Tn){var n=J;J<<=1,(J&3932160)===0&&(J=262144),Or=n}else Or=536870912;return n=Dr.current,n!==null&&(n.flags|=32),Or}function Sr(n,r,o){(n===Jn&&(Fn===2||Fn===9)||n.cancelPendingCommit!==null)&&(Tl(n,0),Pi(n,yn,Or,!1)),Ln(n,o),((Pn&2)===0||n!==Jn)&&(n===Jn&&((Pn&2)===0&&(Ao|=o),gs===4&&Pi(n,yn,Or,!1)),Ta(n))}function u0(n,r,o){if((Pn&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&n.expiredLanes)===0||Nt(n,r),f=c?yT(n,r):Um(n,r,!0),m=c;do{if(f===0){wl&&!c&&Pi(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!pT(o)){f=Um(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var E=n;f=Rc;var B=E.current.memoizedState.isDehydrated;if(B&&(Tl(E,x).flags|=256),x=Um(E,x,!1),x!==2){if(Mm&&!B){E.errorRecoveryDisabledLanes|=m,Ao|=m,f=4;break e}m=Er,Er=f,m!==null&&(Er===null?Er=m:Er.push.apply(Er,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){Tl(n,0),Pi(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Pi(c,r,Or,!Ai);break e;case 2:Er=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=jh+300-rn(),10<f)){if(Pi(c,r,Or,!Ai),St(c,0,!0)!==0)break e;ti=r,c.timeoutHandle=z0(h0.bind(null,c,o,Er,Sh,Pm,r,Or,Ao,_l,Ai,m,"Throttled",-0,0),f);break e}h0(c,o,Er,Sh,Pm,r,Or,Ao,_l,Ai,m,null,-0,0)}}break}while(!0);Ta(n)}function h0(n,r,o,c,f,m,x,E,B,ie,Te,Ce,le,fe){if(n.timeoutHandle=-1,Ce=r.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ts},s0(r,m,Ce);var ut=(m&62914560)===m?jh-rn():(m&4194048)===m?o0-rn():0;if(ut=ZT(Ce,ut),ut!==null){ti=m,n.cancelPendingCommit=ut(v0.bind(null,n,r,m,o,c,f,x,E,B,Te,Ce,null,le,fe)),Pi(n,m,x,!ie);return}}v0(n,r,m,o,c,f,x,E,B)}function pT(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!Ir(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Pi(n,r,o,c){r&=~Dm,r&=~Ao,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-Ue(f),x=1<<m;c[m]=-1,f&=~x}o!==0&&hn(n,o,r)}function Nh(){return(Pn&6)===0?(Ic(0),!1):!0}function Bm(){if(dn!==null){if(Fn===0)var n=dn.return;else n=dn,Ha=_o=null,tm(n),ml=null,mc=0,n=dn;for(;n!==null;)Fv(n.alternate,n),n=n.return;dn=null}}function Tl(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,PT(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ti=0,Bm(),Jn=n,dn=o=Fa(n.current,null),yn=r,Fn=0,Lr=null,Ai=!1,wl=Nt(n,r),Mm=!1,_l=Or=Dm=Ao=Ii=gs=0,Er=Rc=null,Pm=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-Ue(c),m=1<<f;r|=n[f],c&=~m}return ei=r,Yu(),o}function d0(n,r){Zt=null,q.H=_c,r===fl||r===sh?(r=Nb(),Fn=3):r===qf?(r=Nb(),Fn=4):Fn=r===ym?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Lr=r,dn===null&&(gs=1,yh(n,Gr(r,n.current)))}function f0(){var n=Dr.current;return n===null?!0:(yn&4194048)===yn?Xr===null:(yn&62914560)===yn||(yn&536870912)!==0?n===Xr:!1}function m0(){var n=q.H;return q.H=_c,n===null?_c:n}function p0(){var n=q.A;return q.A=fT,n}function Ch(){gs=4,Ai||(yn&4194048)!==yn&&Dr.current!==null||(wl=!0),(Ii&134217727)===0&&(Ao&134217727)===0||Jn===null||Pi(Jn,yn,Or,!1)}function Um(n,r,o){var c=Pn;Pn|=2;var f=m0(),m=p0();(Jn!==n||yn!==r)&&(Sh=null,Tl(n,r)),r=!1;var x=gs;e:do try{if(Fn!==0&&dn!==null){var E=dn,B=Lr;switch(Fn){case 8:Bm(),x=6;break e;case 3:case 2:case 9:case 6:Dr.current===null&&(r=!0);var ie=Fn;if(Fn=0,Lr=null,jl(n,E,B,ie),o&&wl){x=0;break e}break;default:ie=Fn,Fn=0,Lr=null,jl(n,E,B,ie)}}gT(),x=gs;break}catch(Te){d0(n,Te)}while(!0);return r&&n.shellSuspendCounter++,Ha=_o=null,Pn=c,q.H=f,q.A=m,dn===null&&(Jn=null,yn=0,Yu()),x}function gT(){for(;dn!==null;)g0(dn)}function yT(n,r){var o=Pn;Pn|=2;var c=m0(),f=p0();Jn!==n||yn!==r?(Sh=null,Eh=rn()+500,Tl(n,r)):wl=Nt(n,r);e:do try{if(Fn!==0&&dn!==null){r=dn;var m=Lr;t:switch(Fn){case 1:Fn=0,Lr=null,jl(n,r,m,1);break;case 2:case 9:if(Eb(m)){Fn=0,Lr=null,y0(r);break}r=function(){Fn!==2&&Fn!==9||Jn!==n||(Fn=7),Ta(n)},m.then(r,r);break e;case 3:Fn=7;break e;case 4:Fn=5;break e;case 7:Eb(m)?(Fn=0,Lr=null,y0(r)):(Fn=0,Lr=null,jl(n,r,m,7));break;case 5:var x=null;switch(dn.tag){case 26:x=dn.memoizedState;case 5:case 27:var E=dn;if(x?n1(x):E.stateNode.complete){Fn=0,Lr=null;var B=E.sibling;if(B!==null)dn=B;else{var ie=E.return;ie!==null?(dn=ie,Rh(ie)):dn=null}break t}}Fn=0,Lr=null,jl(n,r,m,5);break;case 6:Fn=0,Lr=null,jl(n,r,m,6);break;case 8:Bm(),gs=6;break e;default:throw Error(i(462))}}bT();break}catch(Te){d0(n,Te)}while(!0);return Ha=_o=null,q.H=c,q.A=f,Pn=o,dn!==null?0:(Jn=null,yn=0,Yu(),gs)}function bT(){for(;dn!==null&&!ds();)g0(dn)}function g0(n){var r=Uv(n.alternate,n,ei);n.memoizedProps=n.pendingProps,r===null?Rh(n):dn=r}function y0(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=Dv(o,r,r.pendingProps,r.type,void 0,yn);break;case 11:r=Dv(o,r,r.pendingProps,r.type.render,r.ref,yn);break;case 5:tm(r);default:Fv(o,r),r=dn=pb(r,ei),r=Uv(o,r,ei)}n.memoizedProps=n.pendingProps,r===null?Rh(n):dn=r}function jl(n,r,o,c){Ha=_o=null,tm(r),ml=null,mc=0;var f=r.return;try{if(iT(n,f,r,o,yn)){gs=1,yh(n,Gr(o,n.current)),dn=null;return}}catch(m){if(f!==null)throw dn=f,m;gs=1,yh(n,Gr(o,n.current)),dn=null;return}r.flags&32768?(Tn||c===1?n=!0:wl||(yn&536870912)!==0?n=!1:(Ai=n=!0,(c===2||c===9||c===3||c===6)&&(c=Dr.current,c!==null&&c.tag===13&&(c.flags|=16384))),b0(r,n)):Rh(r)}function Rh(n){var r=n;do{if((r.flags&32768)!==0){b0(r,Ai);return}n=r.return;var o=cT(r.alternate,r,ei);if(o!==null){dn=o;return}if(r=r.sibling,r!==null){dn=r;return}dn=r=n}while(r!==null);gs===0&&(gs=5)}function b0(n,r){do{var o=uT(n.alternate,n);if(o!==null){o.flags&=32767,dn=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){dn=n;return}dn=n=o}while(n!==null);gs=6,dn=null}function v0(n,r,o,c,f,m,x,E,B){n.cancelPendingCommit=null;do Ah();while(Bs!==0);if((Pn&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Nf,es(n,o,m,x,E,B),n===Jn&&(dn=Jn=null,yn=0),kl=r,Di=n,ti=o,Lm=m,Om=f,l0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,_T(an,function(){return T0(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=q.T,q.T=null,f=me.p,me.p=2,x=Pn,Pn|=4;try{hT(n,r,o)}finally{Pn=x,me.p=f,q.T=c}}Bs=1,x0(),w0(),_0()}}function x0(){if(Bs===1){Bs=0;var n=Di,r=kl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=q.T,q.T=null;var c=me.p;me.p=2;var f=Pn;Pn|=4;try{e0(r,n);var m=Jm,x=ib(n.containerInfo),E=m.focusedElem,B=m.selectionRange;if(x!==E&&E&&E.ownerDocument&&ab(E.ownerDocument.documentElement,E)){if(B!==null&&kf(E)){var ie=B.start,Te=B.end;if(Te===void 0&&(Te=ie),"selectionStart"in E)E.selectionStart=ie,E.selectionEnd=Math.min(Te,E.value.length);else{var Ce=E.ownerDocument||document,le=Ce&&Ce.defaultView||window;if(le.getSelection){var fe=le.getSelection(),ut=E.textContent.length,Rt=Math.min(B.start,ut),Kn=B.end===void 0?Rt:Math.min(B.end,ut);!fe.extend&&Rt>Kn&&(x=Kn,Kn=Rt,Rt=x);var X=rb(E,Rt),W=rb(E,Kn);if(X&&W&&(fe.rangeCount!==1||fe.anchorNode!==X.node||fe.anchorOffset!==X.offset||fe.focusNode!==W.node||fe.focusOffset!==W.offset)){var ae=Ce.createRange();ae.setStart(X.node,X.offset),fe.removeAllRanges(),Rt>Kn?(fe.addRange(ae),fe.extend(W.node,W.offset)):(ae.setEnd(W.node,W.offset),fe.addRange(ae))}}}}for(Ce=[],fe=E;fe=fe.parentNode;)fe.nodeType===1&&Ce.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Ce.length;E++){var Se=Ce[E];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}qh=!!Xm,Jm=Xm=null}finally{Pn=f,me.p=c,q.T=o}}n.current=r,Bs=2}}function w0(){if(Bs===2){Bs=0;var n=Di,r=kl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=q.T,q.T=null;var c=me.p;me.p=2;var f=Pn;Pn|=4;try{Yv(n,r.alternate,r)}finally{Pn=f,me.p=c,q.T=o}}Bs=3}}function _0(){if(Bs===4||Bs===3){Bs=0,Et();var n=Di,r=kl,o=ti,c=l0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bs=5:(Bs=0,kl=Di=null,k0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Mi=null),ye(o),r=r.stateNode,Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(Qe,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=q.T,f=me.p,me.p=2,q.T=null;try{for(var m=n.onRecoverableError,x=0;x<c.length;x++){var E=c[x];m(E.value,{componentStack:E.stack})}}finally{q.T=r,me.p=f}}(ti&3)!==0&&Ah(),Ta(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Vm?Ac++:(Ac=0,Vm=n):Ac=0,Ic(0)}}function k0(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,dc(r)))}function Ah(){return x0(),w0(),_0(),T0()}function T0(){if(Bs!==5)return!1;var n=Di,r=Lm;Lm=0;var o=ye(ti),c=q.T,f=me.p;try{me.p=32>o?32:o,q.T=null,o=Om,Om=null;var m=Di,x=ti;if(Bs=0,kl=Di=null,ti=0,(Pn&6)!==0)throw Error(i(331));var E=Pn;if(Pn|=4,a0(m.current),n0(m,m.current,x,o),Pn=E,Ic(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(Qe,m)}catch{}return!0}finally{me.p=f,q.T=c,k0(n,r)}}function j0(n,r,o){r=Gr(o,r),r=gm(n.stateNode,r,2),n=Si(n,r,2),n!==null&&(Ln(n,2),Ta(n))}function qn(n,r,o){if(n.tag===3)j0(n,n,o);else for(;r!==null;){if(r.tag===3){j0(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Mi===null||!Mi.has(c))){n=Gr(o,n),o=Ev(2),c=Si(r,o,2),c!==null&&(Sv(o,c,r,n),Ln(c,2),Ta(c));break}}r=r.return}}function zm(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new mT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(Mm=!0,f.add(o),n=vT.bind(null,n,r,o),r.then(n,n))}function vT(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Jn===n&&(yn&o)===o&&(gs===4||gs===3&&(yn&62914560)===yn&&300>rn()-jh?(Pn&2)===0&&Tl(n,0):Dm|=o,_l===yn&&(_l=0)),Ta(n)}function E0(n,r){r===0&&(r=Qt()),n=vo(n,r),n!==null&&(Ln(n,r),Ta(n))}function xT(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),E0(n,o)}function wT(n,r){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),E0(n,o)}function _T(n,r){return nt(n,r)}var Ih=null,El=null,Fm=!1,Mh=!1,qm=!1,Li=0;function Ta(n){n!==El&&n.next===null&&(El===null?Ih=El=n:El=El.next=n),Mh=!0,Fm||(Fm=!0,TT())}function Ic(n,r){if(!qm&&Mh){qm=!0;do for(var o=!1,c=Ih;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var x=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-Ue(42|n)+1)-1,m&=f&~(x&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,R0(c,m))}else m=yn,m=St(c,c===Jn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Nt(c,m)||(o=!0,R0(c,m));c=c.next}while(o);qm=!1}}function kT(){S0()}function S0(){Mh=Fm=!1;var n=0;Li!==0&&DT()&&(n=Li);for(var r=rn(),o=null,c=Ih;c!==null;){var f=c.next,m=N0(c,r);m===0?(c.next=null,o===null?Ih=f:o.next=f,f===null&&(El=o)):(o=c,(n!==0||(m&3)!==0)&&(Mh=!0)),c=f}Bs!==0&&Bs!==5||Ic(n),Li!==0&&(Li=0)}function N0(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var x=31-Ue(m),E=1<<x,B=f[x];B===-1?((E&o)===0||(E&c)!==0)&&(f[x]=Yt(E,r)):B<=r&&(n.expiredLanes|=E),m&=~E}if(r=Jn,o=yn,o=St(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===r&&(Fn===2||Fn===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&nn(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Nt(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(c!==null&&nn(c),ye(o)){case 2:case 8:o=Ft;break;case 32:o=an;break;case 268435456:o=pe;break;default:o=an}return c=C0.bind(null,n),o=nt(o,c),n.callbackPriority=r,n.callbackNode=o,r}return c!==null&&c!==null&&nn(c),n.callbackPriority=2,n.callbackNode=null,2}function C0(n,r){if(Bs!==0&&Bs!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ah()&&n.callbackNode!==o)return null;var c=yn;return c=St(n,n===Jn?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(u0(n,c,r),N0(n,rn()),n.callbackNode!=null&&n.callbackNode===o?C0.bind(null,n):null)}function R0(n,r){if(Ah())return null;u0(n,r,!0)}function TT(){LT(function(){(Pn&6)!==0?nt(Wt,kT):S0()})}function Hm(){if(Li===0){var n=hl;n===0&&(n=Ut,Ut<<=1,(Ut&261888)===0&&(Ut=256)),Li=n}return Li}function A0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:xr(""+n)}function I0(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function jT(n,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=A0((f[Ct]||null).action),x=c.submitter;x&&(r=(r=x[Ct]||null)?A0(r.formAction):x.getAttribute("formAction"),r!==null&&(m=r,x=null));var E=new Qn("action","action",null,c,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Li!==0){var B=x?I0(f,x):new FormData(f);um(o,{pending:!0,data:B,method:f.method,action:m},null,B)}}else typeof m=="function"&&(E.preventDefault(),B=x?I0(f,x):new FormData(f),um(o,{pending:!0,data:B,method:f.method,action:m},m,B))},currentTarget:f}]})}}for(var $m=0;$m<Sf.length;$m++){var Wm=Sf[$m],ET=Wm.toLowerCase(),ST=Wm[0].toUpperCase()+Wm.slice(1);oa(ET,"on"+ST)}oa(cb,"onAnimationEnd"),oa(ub,"onAnimationIteration"),oa(hb,"onAnimationStart"),oa("dblclick","onDoubleClick"),oa("focusin","onFocus"),oa("focusout","onBlur"),oa(qk,"onTransitionRun"),oa(Hk,"onTransitionStart"),oa($k,"onTransitionCancel"),oa(db,"onTransitionEnd"),qe("onMouseEnter",["mouseout","mouseover"]),qe("onMouseLeave",["mouseout","mouseover"]),qe("onPointerEnter",["pointerout","pointerover"]),qe("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mc));function M0(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var x=c.length-1;0<=x;x--){var E=c[x],B=E.instance,ie=E.currentTarget;if(E=E.listener,B!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=ie;try{m(f)}catch(Te){Ku(Te)}f.currentTarget=null,m=B}else for(x=0;x<c.length;x++){if(E=c[x],B=E.instance,ie=E.currentTarget,E=E.listener,B!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=ie;try{m(f)}catch(Te){Ku(Te)}f.currentTarget=null,m=B}}}}function fn(n,r){var o=r[_t];o===void 0&&(o=r[_t]=new Set);var c=n+"__bubble";o.has(c)||(D0(r,n,2,!1),o.add(c))}function Gm(n,r,o){var c=0;r&&(c|=4),D0(o,n,c,r)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function Km(n){if(!n[Dh]){n[Dh]=!0,K.forEach(function(o){o!=="selectionchange"&&(NT.has(o)||Gm(o,!1,n),Gm(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Dh]||(r[Dh]=!0,Gm("selectionchange",!1,r))}}function D0(n,r,o,c){switch(c1(r)){case 2:var f=nj;break;case 8:f=sj;break;default:f=cp}o=f.bind(null,r,o,n),f=void 0,!gt||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function Ym(n,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var E=c.stateNode.containerInfo;if(E===f)break;if(x===4)for(x=c.return;x!==null;){var B=x.tag;if((B===3||B===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;E!==null;){if(x=$n(E),x===null)return;if(B=x.tag,B===5||B===6||B===26||B===27){c=m=x;continue e}E=E.parentNode}}c=c.return}ee(function(){var ie=m,Te=Ss(o),Ce=[];e:{var le=fb.get(n);if(le!==void 0){var fe=Qn,ut=n;switch(n){case"keypress":if(kn(o)===0)break e;case"keydown":case"keyup":fe=$u;break;case"focusin":ut="focus",fe=_r;break;case"focusout":ut="blur",fe=_r;break;case"beforeblur":case"afterblur":fe=_r;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=va;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=hr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=b;break;case cb:case ub:case hb:fe=el;break;case db:fe=C;break;case"scroll":case"scrollend":fe=Vs;break;case"wheel":fe=ue;break;case"copy":case"cut":case"paste":fe=Ua;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=za;break;case"toggle":case"beforetoggle":fe=Jt}var Rt=(r&4)!==0,Kn=!Rt&&(n==="scroll"||n==="scrollend"),X=Rt?le!==null?le+"Capture":null:le;Rt=[];for(var W=ie,ae;W!==null;){var Se=W;if(ae=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ae===null||X===null||(Se=Le(W,X),Se!=null&&Rt.push(Dc(W,Se,ae))),Kn)break;W=W.return}0<Rt.length&&(le=new fe(le,ut,null,o,Te),Ce.push({event:le,listeners:Rt}))}}if((r&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",fe=n==="mouseout"||n==="pointerout",le&&o!==Ws&&(ut=o.relatedTarget||o.fromElement)&&($n(ut)||ut[it]))break e;if((fe||le)&&(le=Te.window===Te?Te:(le=Te.ownerDocument)?le.defaultView||le.parentWindow:window,fe?(ut=o.relatedTarget||o.toElement,fe=ie,ut=ut?$n(ut):null,ut!==null&&(Kn=u(ut),Rt=ut.tag,ut!==Kn||Rt!==5&&Rt!==27&&Rt!==6)&&(ut=null)):(fe=null,ut=ie),fe!==ut)){if(Rt=va,Se="onMouseLeave",X="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(Rt=za,Se="onPointerLeave",X="onPointerEnter",W="pointer"),Kn=fe==null?le:ce(fe),ae=ut==null?le:ce(ut),le=new Rt(Se,W+"leave",fe,o,Te),le.target=Kn,le.relatedTarget=ae,Se=null,$n(Te)===ie&&(Rt=new Rt(X,W+"enter",ut,o,Te),Rt.target=ae,Rt.relatedTarget=Kn,Se=Rt),Kn=Se,fe&&ut)t:{for(Rt=CT,X=fe,W=ut,ae=0,Se=X;Se;Se=Rt(Se))ae++;Se=0;for(var kt=W;kt;kt=Rt(kt))Se++;for(;0<ae-Se;)X=Rt(X),ae--;for(;0<Se-ae;)W=Rt(W),Se--;for(;ae--;){if(X===W||W!==null&&X===W.alternate){Rt=X;break t}X=Rt(X),W=Rt(W)}Rt=null}else Rt=null;fe!==null&&P0(Ce,le,fe,Rt,!1),ut!==null&&Kn!==null&&P0(Ce,Kn,ut,Rt,!0)}}e:{if(le=ie?ce(ie):window,fe=le.nodeName&&le.nodeName.toLowerCase(),fe==="select"||fe==="input"&&le.type==="file")var Rn=Jy;else if(Qy(le))if(Zy)Rn=Uk;else{Rn=Vk;var pt=Ok}else fe=le.nodeName,!fe||fe.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?ie&&us(ie.elementType)&&(Rn=Jy):Rn=Bk;if(Rn&&(Rn=Rn(n,ie))){Xy(Ce,Rn,o,Te);break e}pt&&pt(n,le,ie),n==="focusout"&&ie&&le.type==="number"&&ie.memoizedProps.value!=null&&xs(le,"number",le.value)}switch(pt=ie?ce(ie):window,n){case"focusin":(Qy(pt)||pt.contentEditable==="true")&&(sl=pt,Tf=ie,cc=null);break;case"focusout":cc=Tf=sl=null;break;case"mousedown":jf=!0;break;case"contextmenu":case"mouseup":case"dragend":jf=!1,ob(Ce,o,Te);break;case"selectionchange":if(Fk)break;case"keydown":case"keyup":ob(Ce,o,Te)}var sn;if(Dn)e:{switch(n){case"compositionstart":var bn="onCompositionStart";break e;case"compositionend":bn="onCompositionEnd";break e;case"compositionupdate":bn="onCompositionUpdate";break e}bn=void 0}else nl?go(n,o)&&(bn="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(bn="onCompositionStart");bn&&(xa&&o.locale!=="ko"&&(nl||bn!=="onCompositionStart"?bn==="onCompositionEnd"&&nl&&(sn=gn()):(Ze=Te,Ht="value"in Ze?Ze.value:Ze.textContent,nl=!0)),pt=Ph(ie,bn),0<pt.length&&(bn=new Ks(bn,n,null,o,Te),Ce.push({event:bn,listeners:pt}),sn?bn.data=sn:(sn=tl(o),sn!==null&&(bn.data=sn)))),(sn=$r?Mk(n,o):Dk(n,o))&&(bn=Ph(ie,"onBeforeInput"),0<bn.length&&(pt=new Ks("onBeforeInput","beforeinput",null,o,Te),Ce.push({event:pt,listeners:bn}),pt.data=sn)),jT(Ce,n,ie,o,Te)}M0(Ce,r)})}function Dc(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Ph(n,r){for(var o=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Le(n,o),f!=null&&c.unshift(Dc(n,f,m)),f=Le(n,r),f!=null&&c.push(Dc(n,f,m))),n.tag===3)return c;n=n.return}return[]}function CT(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function P0(n,r,o,c,f){for(var m=r._reactName,x=[];o!==null&&o!==c;){var E=o,B=E.alternate,ie=E.stateNode;if(E=E.tag,B!==null&&B===c)break;E!==5&&E!==26&&E!==27||ie===null||(B=ie,f?(ie=Le(o,m),ie!=null&&x.unshift(Dc(o,ie,B))):f||(ie=Le(o,m),ie!=null&&x.push(Dc(o,ie,B)))),o=o.return}x.length!==0&&n.push({event:r,listeners:x})}var RT=/\r\n?/g,AT=/\u0000|\uFFFD/g;function L0(n){return(typeof n=="string"?n:""+n).replace(RT,`
`).replace(AT,"")}function O0(n,r){return r=L0(r),L0(n)===r}function Gn(n,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||fs(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&fs(n,""+c);break;case"className":js(n,"class",c);break;case"tabIndex":js(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":js(n,o,c);break;case"style":pn(n,c,m);break;case"data":if(r!=="object"){js(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=xr(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&Gn(n,r,"name",f.name,f,null),Gn(n,r,"formEncType",f.formEncType,f,null),Gn(n,r,"formMethod",f.formMethod,f,null),Gn(n,r,"formTarget",f.formTarget,f,null)):(Gn(n,r,"encType",f.encType,f,null),Gn(n,r,"method",f.method,f,null),Gn(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=xr(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=ts);break;case"onScroll":c!=null&&fn("scroll",n);break;case"onScrollEnd":c!=null&&fn("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=xr(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":fn("beforetoggle",n),fn("toggle",n),Fs(n,"popover",c);break;case"xlinkActuate":On(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":On(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":On(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":On(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":On(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":On(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":On(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":On(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":On(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Fs(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=cr.get(o)||o,Fs(n,o,c))}}function Qm(n,r,o,c,f,m){switch(o){case"style":pn(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?fs(n,c):(typeof c=="number"||typeof c=="bigint")&&fs(n,""+c);break;case"onScroll":c!=null&&fn("scroll",n);break;case"onScrollEnd":c!=null&&fn("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ts);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!re.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[Ct]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):Fs(n,o,c)}}}function Js(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fn("error",n),fn("load",n);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Gn(n,r,m,x,o,null)}}f&&Gn(n,r,"srcSet",o.srcSet,o,null),c&&Gn(n,r,"src",o.src,o,null);return;case"input":fn("invalid",n);var E=m=x=f=null,B=null,ie=null;for(c in o)if(o.hasOwnProperty(c)){var Te=o[c];if(Te!=null)switch(c){case"name":f=Te;break;case"type":x=Te;break;case"checked":B=Te;break;case"defaultChecked":ie=Te;break;case"value":m=Te;break;case"defaultValue":E=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(i(137,r));break;default:Gn(n,r,c,Te,o,null)}}_n(n,m,E,B,ie,x,f,!1);return;case"select":fn("invalid",n),c=x=m=null;for(f in o)if(o.hasOwnProperty(f)&&(E=o[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":x=E;break;case"multiple":c=E;default:Gn(n,r,f,E,o,null)}r=m,o=x,n.multiple=!!c,r!=null?ln(n,!!c,r,!1):o!=null&&ln(n,!!c,o,!0);return;case"textarea":fn("invalid",n),m=f=c=null;for(x in o)if(o.hasOwnProperty(x)&&(E=o[x],E!=null))switch(x){case"value":c=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Gn(n,r,x,E,o,null)}Es(n,c,f,m);return;case"option":for(B in o)o.hasOwnProperty(B)&&(c=o[B],c!=null)&&(B==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Gn(n,r,B,c,o,null));return;case"dialog":fn("beforetoggle",n),fn("toggle",n),fn("cancel",n),fn("close",n);break;case"iframe":case"object":fn("load",n);break;case"video":case"audio":for(c=0;c<Mc.length;c++)fn(Mc[c],n);break;case"image":fn("error",n),fn("load",n);break;case"details":fn("toggle",n);break;case"embed":case"source":case"link":fn("error",n),fn("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in o)if(o.hasOwnProperty(ie)&&(c=o[ie],c!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Gn(n,r,ie,c,o,null)}return;default:if(us(r)){for(Te in o)o.hasOwnProperty(Te)&&(c=o[Te],c!==void 0&&Qm(n,r,Te,c,o,void 0));return}}for(E in o)o.hasOwnProperty(E)&&(c=o[E],c!=null&&Gn(n,r,E,c,o,null))}function IT(n,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,E=null,B=null,ie=null,Te=null;for(fe in o){var Ce=o[fe];if(o.hasOwnProperty(fe)&&Ce!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":B=Ce;default:c.hasOwnProperty(fe)||Gn(n,r,fe,null,c,Ce)}}for(var le in c){var fe=c[le];if(Ce=o[le],c.hasOwnProperty(le)&&(fe!=null||Ce!=null))switch(le){case"type":m=fe;break;case"name":f=fe;break;case"checked":ie=fe;break;case"defaultChecked":Te=fe;break;case"value":x=fe;break;case"defaultValue":E=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,r));break;default:fe!==Ce&&Gn(n,r,le,fe,c,Ce)}}qt(n,x,E,B,ie,Te,m,f);return;case"select":fe=x=E=le=null;for(m in o)if(B=o[m],o.hasOwnProperty(m)&&B!=null)switch(m){case"value":break;case"multiple":fe=B;default:c.hasOwnProperty(m)||Gn(n,r,m,null,c,B)}for(f in c)if(m=c[f],B=o[f],c.hasOwnProperty(f)&&(m!=null||B!=null))switch(f){case"value":le=m;break;case"defaultValue":E=m;break;case"multiple":x=m;default:m!==B&&Gn(n,r,f,m,c,B)}r=E,o=x,c=fe,le!=null?ln(n,!!o,le,!1):!!c!=!!o&&(r!=null?ln(n,!!o,r,!0):ln(n,!!o,o?[]:"",!1));return;case"textarea":fe=le=null;for(E in o)if(f=o[E],o.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Gn(n,r,E,null,c,f)}for(x in c)if(f=c[x],m=o[x],c.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":le=f;break;case"defaultValue":fe=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Gn(n,r,x,f,c,m)}qs(n,le,fe);return;case"option":for(var ut in o)le=o[ut],o.hasOwnProperty(ut)&&le!=null&&!c.hasOwnProperty(ut)&&(ut==="selected"?n.selected=!1:Gn(n,r,ut,null,c,le));for(B in c)le=c[B],fe=o[B],c.hasOwnProperty(B)&&le!==fe&&(le!=null||fe!=null)&&(B==="selected"?n.selected=le&&typeof le!="function"&&typeof le!="symbol":Gn(n,r,B,le,c,fe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in o)le=o[Rt],o.hasOwnProperty(Rt)&&le!=null&&!c.hasOwnProperty(Rt)&&Gn(n,r,Rt,null,c,le);for(ie in c)if(le=c[ie],fe=o[ie],c.hasOwnProperty(ie)&&le!==fe&&(le!=null||fe!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,r));break;default:Gn(n,r,ie,le,c,fe)}return;default:if(us(r)){for(var Kn in o)le=o[Kn],o.hasOwnProperty(Kn)&&le!==void 0&&!c.hasOwnProperty(Kn)&&Qm(n,r,Kn,void 0,c,le);for(Te in c)le=c[Te],fe=o[Te],!c.hasOwnProperty(Te)||le===fe||le===void 0&&fe===void 0||Qm(n,r,Te,le,c,fe);return}}for(var X in o)le=o[X],o.hasOwnProperty(X)&&le!=null&&!c.hasOwnProperty(X)&&Gn(n,r,X,null,c,le);for(Ce in c)le=c[Ce],fe=o[Ce],!c.hasOwnProperty(Ce)||le===fe||le==null&&fe==null||Gn(n,r,Ce,le,c,fe)}function V0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function MT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,x=f.initiatorType,E=f.duration;if(m&&E&&V0(x)){for(x=0,E=f.responseEnd,c+=1;c<o.length;c++){var B=o[c],ie=B.startTime;if(ie>E)break;var Te=B.transferSize,Ce=B.initiatorType;Te&&V0(Ce)&&(B=B.responseEnd,x+=Te*(B<E?1:(E-ie)/(B-ie)))}if(--c,r+=8*(m+x)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Xm=null,Jm=null;function Lh(n){return n.nodeType===9?n:n.ownerDocument}function B0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U0(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Zm(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ep=null;function DT(){var n=window.event;return n&&n.type==="popstate"?n===ep?!1:(ep=n,!0):(ep=null,!1)}var z0=typeof setTimeout=="function"?setTimeout:void 0,PT=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,LT=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(n){return F0.resolve(null).then(n).catch(OT)}:z0;function OT(n){setTimeout(function(){throw n})}function Oi(n){return n==="head"}function q0(n,r){var o=r,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),Rl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Pc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Pc(o);for(var m=o.firstChild;m;){var x=m.nextSibling,E=m.nodeName;m[Ls]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=x}}else o==="body"&&Pc(n.ownerDocument.body);o=f}while(o);Rl(r)}function H0(n,r){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function tp(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":tp(o),zs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function VT(n,r,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Ls])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Jr(n.nextSibling),n===null)break}return null}function BT(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Jr(n.nextSibling),n===null))return null;return n}function $0(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Jr(n.nextSibling),n===null))return null;return n}function np(n){return n.data==="$?"||n.data==="$~"}function sp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function UT(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Jr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var rp=null;function W0(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return Jr(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function G0(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function K0(n,r,o){switch(r=Lh(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Pc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);zs(n)}var Zr=new Map,Y0=new Set;function Oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ni=me.d;me.d={f:zT,r:FT,D:qT,C:HT,L:$T,m:WT,X:KT,S:GT,M:YT};function zT(){var n=ni.f(),r=Nh();return n||r}function FT(n){var r=H(n);r!==null&&r.tag===5&&r.type==="form"?dv(r):ni.r(n)}var Sl=typeof document>"u"?null:document;function Q0(n,r,o){var c=Sl;if(c&&typeof r=="string"&&r){var f=mt(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Y0.has(f)||(Y0.add(f),n={rel:n,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Js(r,"link",n),N(r),c.head.appendChild(r)))}}function qT(n){ni.D(n),Q0("dns-prefetch",n,null)}function HT(n,r){ni.C(n,r),Q0("preconnect",n,r)}function $T(n,r,o){ni.L(n,r,o);var c=Sl;if(c&&n&&r){var f='link[rel="preload"][as="'+mt(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+mt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+mt(o.imageSizes)+'"]')):f+='[href="'+mt(n)+'"]';var m=f;switch(r){case"style":m=Nl(n);break;case"script":m=Cl(n)}Zr.has(m)||(n=k({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),Zr.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Lc(m))||r==="script"&&c.querySelector(Oc(m))||(r=c.createElement("link"),Js(r,"link",n),N(r),c.head.appendChild(r)))}}function WT(n,r){ni.m(n,r);var o=Sl;if(o&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+mt(c)+'"][href="'+mt(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Cl(n)}if(!Zr.has(m)&&(n=k({rel:"modulepreload",href:n},r),Zr.set(m,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Oc(m)))return}c=o.createElement("link"),Js(c,"link",n),N(c),o.head.appendChild(c)}}}function GT(n,r,o){ni.S(n,r,o);var c=Sl;if(c&&n){var f=j(c).hoistableStyles,m=Nl(n);r=r||"default";var x=f.get(m);if(!x){var E={loading:0,preload:null};if(x=c.querySelector(Lc(m)))E.loading=5;else{n=k({rel:"stylesheet",href:n,"data-precedence":r},o),(o=Zr.get(m))&&ap(n,o);var B=x=c.createElement("link");N(B),Js(B,"link",n),B._p=new Promise(function(ie,Te){B.onload=ie,B.onerror=Te}),B.addEventListener("load",function(){E.loading|=1}),B.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Vh(x,r,c)}x={type:"stylesheet",instance:x,count:1,state:E},f.set(m,x)}}}function KT(n,r){ni.X(n,r);var o=Sl;if(o&&n){var c=j(o).hoistableScripts,f=Cl(n),m=c.get(f);m||(m=o.querySelector(Oc(f)),m||(n=k({src:n,async:!0},r),(r=Zr.get(f))&&ip(n,r),m=o.createElement("script"),N(m),Js(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function YT(n,r){ni.M(n,r);var o=Sl;if(o&&n){var c=j(o).hoistableScripts,f=Cl(n),m=c.get(f);m||(m=o.querySelector(Oc(f)),m||(n=k({src:n,async:!0,type:"module"},r),(r=Zr.get(f))&&ip(n,r),m=o.createElement("script"),N(m),Js(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function X0(n,r,o,c){var f=(f=Ae.current)?Oh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Nl(o.href),o=j(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Nl(o.href);var m=j(f).hoistableStyles,x=m.get(n);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,x),(m=f.querySelector(Lc(n)))&&!m._p&&(x.instance=m,x.state.loading=5),Zr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Zr.set(n,o),m||QT(f,n,o,x.state))),r&&c===null)throw Error(i(528,""));return x}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Cl(o),o=j(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Nl(n){return'href="'+mt(n)+'"'}function Lc(n){return'link[rel="stylesheet"]['+n+"]"}function J0(n){return k({},n,{"data-precedence":n.precedence,precedence:null})}function QT(n,r,o,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Js(r,"link",o),N(r),n.head.appendChild(r))}function Cl(n){return'[src="'+mt(n)+'"]'}function Oc(n){return"script[async]"+n}function Z0(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+mt(o.href)+'"]');if(c)return r.instance=c,N(c),c;var f=k({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),N(c),Js(c,"style",f),Vh(c,o.precedence,n),r.instance=c;case"stylesheet":f=Nl(o.href);var m=n.querySelector(Lc(f));if(m)return r.state.loading|=4,r.instance=m,N(m),m;c=J0(o),(f=Zr.get(f))&&ap(c,f),m=(n.ownerDocument||n).createElement("link"),N(m);var x=m;return x._p=new Promise(function(E,B){x.onload=E,x.onerror=B}),Js(m,"link",c),r.state.loading|=4,Vh(m,o.precedence,n),r.instance=m;case"script":return m=Cl(o.src),(f=n.querySelector(Oc(m)))?(r.instance=f,N(f),f):(c=o,(f=Zr.get(m))&&(c=k({},o),ip(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),N(f),Js(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Vh(c,o.precedence,n));return r.instance}function Vh(n,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,x=0;x<c.length;x++){var E=c[x];if(E.dataset.precedence===r)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function ap(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function ip(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Bh=null;function e1(n,r,o){if(Bh===null){var c=new Map,f=Bh=new Map;f.set(o,c)}else f=Bh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Ls]||m[tt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(r)||"";x=n+x;var E=c.get(x);E?E.push(m):c.set(x,[m])}}return c}function t1(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function XT(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function n1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function JT(n,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Nl(c.href),m=r.querySelector(Lc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Uh.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=m,N(m);return}m=r.ownerDocument||r,c=J0(c),(f=Zr.get(f))&&ap(c,f),m=m.createElement("link"),N(m);var x=m;x._p=new Promise(function(E,B){x.onload=E,x.onerror=B}),Js(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Uh.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var op=0;function ZT(n,r){return n.stylesheets&&n.count===0&&Fh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Fh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&op===0&&(op=62500*MT());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Fh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>op?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Uh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var zh=null;function Fh(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,zh=new Map,r.forEach(ej,n),zh=null,Uh.call(n))}function ej(n,r){if(!(r.state.loading&4)){var o=zh.get(n);if(o)var c=o.get(null);else{o=new Map,zh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}f=r.instance,x=f.getAttribute("data-precedence"),m=o.get(x)||c,m===c&&o.set(null,f),o.set(x,f),this.count++,c=Uh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Vc={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Pe,_currentValue2:Pe,_threadCount:0};function tj(n,r,o,c,f,m,x,E,B){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.hiddenUpdates=Vt(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function s1(n,r,o,c,f,m,x,E,B,ie,Te,Ce){return n=new tj(n,r,o,x,B,ie,Te,Ce,E),r=1,m===!0&&(r|=24),m=Mr(3,null,null,r),n.current=m,m.stateNode=n,r=Uf(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Hf(m),n}function r1(n){return n?(n=il,n):il}function a1(n,r,o,c,f,m){f=r1(f),c.context===null?c.context=f:c.pendingContext=f,c=Ei(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=Si(n,c,r),o!==null&&(Sr(o,n,r),gc(o,n,r))}function i1(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function lp(n,r){i1(n,r),(n=n.alternate)&&i1(n,r)}function o1(n){if(n.tag===13||n.tag===31){var r=vo(n,67108864);r!==null&&Sr(r,n,67108864),lp(n,67108864)}}function l1(n){if(n.tag===13||n.tag===31){var r=Vr();r=z(r);var o=vo(n,r);o!==null&&Sr(o,n,r),lp(n,r)}}var qh=!0;function nj(n,r,o,c){var f=q.T;q.T=null;var m=me.p;try{me.p=2,cp(n,r,o,c)}finally{me.p=m,q.T=f}}function sj(n,r,o,c){var f=q.T;q.T=null;var m=me.p;try{me.p=8,cp(n,r,o,c)}finally{me.p=m,q.T=f}}function cp(n,r,o,c){if(qh){var f=up(c);if(f===null)Ym(n,r,c,Hh,o),u1(n,c);else if(aj(f,n,r,o,c))c.stopPropagation();else if(u1(n,c),r&4&&-1<rj.indexOf(n)){for(;f!==null;){var m=H(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=rt(m.pendingLanes);if(x!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var B=1<<31-Ue(x);E.entanglements[1]|=B,x&=~B}Ta(m),(Pn&6)===0&&(Eh=rn()+500,Ic(0))}}break;case 31:case 13:E=vo(m,2),E!==null&&Sr(E,m,2),Nh(),lp(m,2)}if(m=up(c),m===null&&Ym(n,r,c,Hh,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Ym(n,r,c,null,o)}}function up(n){return n=Ss(n),hp(n)}var Hh=null;function hp(n){if(Hh=null,n=$n(n),n!==null){var r=u(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=h(r),n!==null)return n;n=null}else if(o===31){if(n=p(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Hh=n,null}function c1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yn()){case Wt:return 2;case Ft:return 8;case an:case mn:return 32;case pe:return 268435456;default:return 32}default:return 32}}var dp=!1,Vi=null,Bi=null,Ui=null,Bc=new Map,Uc=new Map,zi=[],rj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function u1(n,r){switch(n){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Bc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uc.delete(r.pointerId)}}function zc(n,r,o,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=H(r),r!==null&&o1(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function aj(n,r,o,c,f){switch(r){case"focusin":return Vi=zc(Vi,n,r,o,c,f),!0;case"dragenter":return Bi=zc(Bi,n,r,o,c,f),!0;case"mouseover":return Ui=zc(Ui,n,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Bc.set(m,zc(Bc.get(m)||null,n,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Uc.set(m,zc(Uc.get(m)||null,n,r,o,c,f)),!0}return!1}function h1(n){var r=$n(n.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=h(o),r!==null){n.blockedOn=r,ke(n.priority,function(){l1(o)});return}}else if(r===31){if(r=p(o),r!==null){n.blockedOn=r,ke(n.priority,function(){l1(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function $h(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=up(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);Ws=c,o.target.dispatchEvent(c),Ws=null}else return r=H(o),r!==null&&o1(r),n.blockedOn=o,!1;r.shift()}return!0}function d1(n,r,o){$h(n)&&o.delete(r)}function ij(){dp=!1,Vi!==null&&$h(Vi)&&(Vi=null),Bi!==null&&$h(Bi)&&(Bi=null),Ui!==null&&$h(Ui)&&(Ui=null),Bc.forEach(d1),Uc.forEach(d1)}function Wh(n,r){n.blockedOn===r&&(n.blockedOn=null,dp||(dp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,ij)))}var Gh=null;function f1(n){Gh!==n&&(Gh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Gh===n&&(Gh=null);for(var r=0;r<n.length;r+=3){var o=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(hp(c||o)===null)continue;break}var m=H(o);m!==null&&(n.splice(r,3),r-=3,um(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Rl(n){function r(B){return Wh(B,n)}Vi!==null&&Wh(Vi,n),Bi!==null&&Wh(Bi,n),Ui!==null&&Wh(Ui,n),Bc.forEach(r),Uc.forEach(r);for(var o=0;o<zi.length;o++){var c=zi[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<zi.length&&(o=zi[0],o.blockedOn===null);)h1(o),o.blockedOn===null&&zi.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],x=f[Ct]||null;if(typeof m=="function")x||f1(o);else if(x){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[Ct]||null)E=x.formAction;else if(hp(f)!==null)continue}else E=x.action;typeof E=="function"?o[c+1]=E:(o.splice(c,3),c-=3),f1(o)}}}function m1(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function fp(n){this._internalRoot=n}Kh.prototype.render=fp.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=Vr();a1(o,c,n,r,null,null)},Kh.prototype.unmount=fp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;a1(n.current,2,null,n,null,null),Nh(),r[it]=null}};function Kh(n){this._internalRoot=n}Kh.prototype.unstable_scheduleHydration=function(n){if(n){var r=_e();n={blockedOn:null,target:n,priority:r};for(var o=0;o<zi.length&&r!==0&&r<zi[o].priority;o++);zi.splice(o,0,n),o===0&&h1(n)}};var p1=e.version;if(p1!=="19.2.4")throw Error(i(527,p1,"19.2.4"));me.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(r),n=n!==null?w(n):null,n=n===null?null:n.stateNode,n};var oj={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{Qe=Yh.inject(oj),Ve=Yh}catch{}}return qc.createRoot=function(n,r){if(!l(n))throw Error(i(299));var o=!1,c="",f=_v,m=kv,x=Tv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=s1(n,1,!1,null,null,o,c,null,f,m,x,m1),n[it]=r.current,Km(n),new fp(r)},qc.hydrateRoot=function(n,r,o){if(!l(n))throw Error(i(299));var c=!1,f="",m=_v,x=kv,E=Tv,B=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),r=s1(n,1,!0,r,o??null,c,f,B,m,x,E,m1),r.context=r1(null),o=r.current,c=Vr(),c=z(c),f=Ei(c),f.callback=null,Si(o,f,c),o=c,r.current.lanes=o,Ln(r,o),Ta(r),n[it]=r.current,Km(n),new Kh(r)},qc.version="19.2.4",qc}var j1;function yj(){if(j1)return gp.exports;j1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),gp.exports=gj(),gp.exports}var bj=yj();const vj="modulepreload",xj=function(s){return"/login/"+s},E1={},vr=function(e,t,i){let l=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(w=>Promise.resolve(w).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=g(t.map(y=>{if(y=xj(y),y in E1)return;E1[y]=!0;const w=y.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${k}`))return;const T=document.createElement("link");if(T.rel=w?"stylesheet":vj,w||(T.as="script"),T.crossOrigin="",T.href=y,p&&T.setAttribute("nonce",p),document.head.appendChild(T),w)return new Promise((L,$)=>{T.addEventListener("load",L),T.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var S1="popstate";function wj(s={}){function e(i,l){let{pathname:u,search:h,hash:p}=i.location;return eg("",{pathname:u,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(i,l){return typeof l=="string"?l:cu(l)}return kj(e,t,null,s)}function cs(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function na(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _j(){return Math.random().toString(36).substring(2,10)}function N1(s,e){return{usr:s.state,key:s.key,idx:e}}function eg(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Xl(e):e,state:t,key:e&&e.key||i||_j()}}function cu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Xl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function kj(s,e,t,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,h=l.history,p="POP",g=null,y=w();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function w(){return(h.state||{idx:null}).idx}function k(){p="POP";let O=w(),se=O==null?null:O-y;y=O,g&&g({action:p,location:U.location,delta:se})}function T(O,se){p="PUSH";let Q=eg(U.location,O,se);y=w()+1;let oe=N1(Q,y),ve=U.createHref(Q);try{h.pushState(oe,"",ve)}catch(Me){if(Me instanceof DOMException&&Me.name==="DataCloneError")throw Me;l.location.assign(ve)}u&&g&&g({action:p,location:U.location,delta:1})}function L(O,se){p="REPLACE";let Q=eg(U.location,O,se);y=w();let oe=N1(Q,y),ve=U.createHref(Q);h.replaceState(oe,"",ve),u&&g&&g({action:p,location:U.location,delta:0})}function $(O){return Tj(O)}let U={get action(){return p},get location(){return s(l,h)},listen(O){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(S1,k),g=O,()=>{l.removeEventListener(S1,k),g=null}},createHref(O){return e(l,O)},createURL:$,encodeLocation(O){let se=$(O);return{pathname:se.pathname,search:se.search,hash:se.hash}},push:T,replace:L,go(O){return h.go(O)}};return U}function Tj(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),cs(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:cu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function E2(s,e,t="/"){return jj(s,e,t,!1)}function jj(s,e,t,i){let l=typeof e=="string"?Xl(e):e,u=ui(l.pathname||"/",t);if(u==null)return null;let h=S2(s);Ej(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=Oj(u);p=Pj(h[g],y,i)}return p}function S2(s,e=[],t=[],i="",l=!1){let u=(h,p,g=l,y)=>{let w={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(i)&&g)return;cs(w.relativePath.startsWith(i),`Absolute route path "${w.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(i.length)}let k=ii([i,w.relativePath]),T=t.concat(w);h.children&&h.children.length>0&&(cs(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),S2(h.children,e,T,k,g)),!(h.path==null&&!h.index)&&e.push({path:k,score:Mj(k,h.index),routesMeta:T})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of N2(h.path))u(h,p,!0,g)}),e}function N2(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,l=t.endsWith("?"),u=t.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let h=N2(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function Ej(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Dj(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Sj=/^:[\w-]+$/,Nj=3,Cj=2,Rj=1,Aj=10,Ij=-2,C1=s=>s==="*";function Mj(s,e){let t=s.split("/"),i=t.length;return t.some(C1)&&(i+=Ij),e&&(i+=Cj),t.filter(l=>!C1(l)).reduce((l,u)=>l+(Sj.test(u)?Nj:u===""?Rj:Aj),i)}function Dj(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function Pj(s,e,t=!1){let{routesMeta:i}=s,l={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,w=u==="/"?e:e.slice(u.length)||"/",k=kd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},w),T=g.route;if(!k&&y&&t&&!i[i.length-1].route.index&&(k=kd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},w)),!k)return null;Object.assign(l,k.params),h.push({params:l,pathname:ii([u,k.pathname]),pathnameBase:zj(ii([u,k.pathnameBase])),route:T}),k.pathnameBase!=="/"&&(u=ii([u,k.pathnameBase]))}return h}function kd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=Lj(s.path,s.caseSensitive,s.end),l=e.match(t);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:w,isOptional:k},T)=>{if(w==="*"){let $=p[T]||"";h=u.slice(0,u.length-$.length).replace(/(.)\/+$/,"$1")}const L=p[T];return k&&!L?y[w]=void 0:y[w]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:s}}function Lj(s,e=!1,t=!0){na(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function Oj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return na(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ui(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var Vj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Bj(s,e="/"){let{pathname:t,search:i="",hash:l=""}=typeof s=="string"?Xl(s):s,u;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?u=R1(t.substring(1),"/"):u=R1(t,e)):u=e,{pathname:u,search:Fj(i),hash:qj(l)}}function R1(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function xp(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Uj(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ag(s){let e=Uj(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Ig(s,e,t,i=!1){let l;typeof s=="string"?l=Xl(s):(l={...s},cs(!l.pathname||!l.pathname.includes("?"),xp("?","pathname","search",l)),cs(!l.pathname||!l.pathname.includes("#"),xp("#","pathname","hash",l)),cs(!l.search||!l.search.includes("#"),xp("#","search","hash",l)));let u=s===""||l.pathname==="",h=u?"/":l.pathname,p;if(h==null)p=t;else{let k=e.length-1;if(!i&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),k-=1;l.pathname=T.join("/")}p=k>=0?e[k]:"/"}let g=Bj(l,p),y=h&&h!=="/"&&h.endsWith("/"),w=(u||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||w)&&(g.pathname+="/"),g}var ii=s=>s.join("/").replace(/\/\/+/g,"/"),zj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Fj=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,qj=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Hj=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function $j(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Wj(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var C2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function R2(s,e){let t=s;if(typeof t!="string"||!Vj.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,l=!1;if(C2)try{let u=new URL(window.location.href),h=t.startsWith("//")?new URL(u.protocol+t):new URL(t),p=ui(h.pathname,e);h.origin===u.origin&&p!=null?t=p+h.search+h.hash:l=!0}catch{na(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var A2=["POST","PUT","PATCH","DELETE"];new Set(A2);var Gj=["GET",...A2];new Set(Gj);var Jl=v.createContext(null);Jl.displayName="DataRouter";var Gd=v.createContext(null);Gd.displayName="DataRouterState";var Kj=v.createContext(!1),I2=v.createContext({isTransitioning:!1});I2.displayName="ViewTransition";var Yj=v.createContext(new Map);Yj.displayName="Fetchers";var Qj=v.createContext(null);Qj.displayName="Await";var zr=v.createContext(null);zr.displayName="Navigation";var _u=v.createContext(null);_u.displayName="Location";var ya=v.createContext({outlet:null,matches:[],isDataRoute:!1});ya.displayName="Route";var Mg=v.createContext(null);Mg.displayName="RouteError";var M2="REACT_ROUTER_ERROR",Xj="REDIRECT",Jj="ROUTE_ERROR_RESPONSE";function Zj(s){if(s.startsWith(`${M2}:${Xj}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function eE(s){if(s.startsWith(`${M2}:${Jj}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Hj(e.status,e.statusText,e.data)}catch{}}function tE(s,{relative:e}={}){cs(Zl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=v.useContext(zr),{hash:l,pathname:u,search:h}=ku(s,{relative:e}),p=u;return t!=="/"&&(p=u==="/"?t:ii([t,u])),i.createHref({pathname:p,search:h,hash:l})}function Zl(){return v.useContext(_u)!=null}function ba(){return cs(Zl(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(_u).location}var D2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function P2(s){v.useContext(zr).static||v.useLayoutEffect(s)}function nr(){let{isDataRoute:s}=v.useContext(ya);return s?pE():nE()}function nE(){cs(Zl(),"useNavigate() may be used only in the context of a <Router> component.");let s=v.useContext(Jl),{basename:e,navigator:t}=v.useContext(zr),{matches:i}=v.useContext(ya),{pathname:l}=ba(),u=JSON.stringify(Ag(i)),h=v.useRef(!1);return P2(()=>{h.current=!0}),v.useCallback((g,y={})=>{if(na(h.current,D2),!h.current)return;if(typeof g=="number"){t.go(g);return}let w=Ig(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:ii([e,w.pathname])),(y.replace?t.replace:t.push)(w,y.state,y)},[e,t,u,l,s])}v.createContext(null);function sE(){let{matches:s}=v.useContext(ya),e=s[s.length-1];return e?e.params:{}}function ku(s,{relative:e}={}){let{matches:t}=v.useContext(ya),{pathname:i}=ba(),l=JSON.stringify(Ag(t));return v.useMemo(()=>Ig(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function rE(s,e){return L2(s,e)}function L2(s,e,t,i,l){cs(Zl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=v.useContext(zr),{matches:h}=v.useContext(ya),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",w=p?p.pathnameBase:"/",k=p&&p.route;{let Q=k&&k.path||"";V2(y,!k||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let T=ba(),L;if(e){let Q=typeof e=="string"?Xl(e):e;cs(w==="/"||Q.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),L=Q}else L=T;let $=L.pathname||"/",U=$;if(w!=="/"){let Q=w.replace(/^\//,"").split("/");U="/"+$.replace(/^\//,"").split("/").slice(Q.length).join("/")}let O=E2(s,{pathname:U});na(k||O!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),na(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let se=cE(O&&O.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:ii([w,u.encodeLocation?u.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?w:ii([w,u.encodeLocation?u.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),h,t,i,l);return e&&se?v.createElement(_u.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},se):se}function aE(){let s=mE(),e=$j(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:u},"ErrorBoundary")," or"," ",v.createElement("code",{style:u},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),t?v.createElement("pre",{style:l},t):null,h)}var iE=v.createElement(aE,null),O2=class extends v.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=eE(s.digest);t&&(s=t)}let e=s!==void 0?v.createElement(ya.Provider,{value:this.props.routeContext},v.createElement(Mg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?v.createElement(oE,{error:s},e):e}};O2.contextType=Kj;var wp=new WeakMap;function oE({children:s,error:e}){let{basename:t}=v.useContext(zr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=Zj(e.digest);if(i){let l=wp.get(e);if(l)throw l;let u=R2(i.location,t);if(C2&&!wp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw wp.set(e,h),h}return v.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function lE({routeContext:s,match:e,children:t}){let i=v.useContext(Jl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(ya.Provider,{value:s},t)}function cE(s,e=[],t=null,i=null,l=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,h=t?.errors;if(h!=null){let w=u.findIndex(k=>k.route.id&&h?.[k.route.id]!==void 0);cs(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,w+1))}let p=!1,g=-1;if(t)for(let w=0;w<u.length;w++){let k=u[w];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(g=w),k.route.id){let{loaderData:T,errors:L}=t,$=k.route.loader&&!T.hasOwnProperty(k.route.id)&&(!L||L[k.route.id]===void 0);if(k.route.lazy||$){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=t&&i?(w,k)=>{i(w,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:Wj(t.matches),errorInfo:k})}:void 0;return u.reduceRight((w,k,T)=>{let L,$=!1,U=null,O=null;t&&(L=h&&k.route.id?h[k.route.id]:void 0,U=k.route.errorElement||iE,p&&(g<0&&T===0?(V2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),$=!0,O=null):g===T&&($=!0,O=k.route.hydrateFallbackElement||null)));let se=e.concat(u.slice(0,T+1)),Q=()=>{let oe;return L?oe=U:$?oe=O:k.route.Component?oe=v.createElement(k.route.Component,null):k.route.element?oe=k.route.element:oe=w,v.createElement(lE,{match:k,routeContext:{outlet:w,matches:se,isDataRoute:t!=null},children:oe})};return t&&(k.route.ErrorBoundary||k.route.errorElement||T===0)?v.createElement(O2,{location:t.location,revalidation:t.revalidation,component:U,error:L,children:Q(),routeContext:{outlet:null,matches:se,isDataRoute:!0},onError:y}):Q()},null)}function Dg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uE(s){let e=v.useContext(Jl);return cs(e,Dg(s)),e}function hE(s){let e=v.useContext(Gd);return cs(e,Dg(s)),e}function dE(s){let e=v.useContext(ya);return cs(e,Dg(s)),e}function Pg(s){let e=dE(s),t=e.matches[e.matches.length-1];return cs(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function fE(){return Pg("useRouteId")}function mE(){let s=v.useContext(Mg),e=hE("useRouteError"),t=Pg("useRouteError");return s!==void 0?s:e.errors?.[t]}function pE(){let{router:s}=uE("useNavigate"),e=Pg("useNavigate"),t=v.useRef(!1);return P2(()=>{t.current=!0}),v.useCallback(async(l,u={})=>{na(t.current,D2),t.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var A1={};function V2(s,e,t){!e&&!A1[s]&&(A1[s]=!0,na(!1,t))}v.memo(gE);function gE({routes:s,future:e,state:t,onError:i}){return L2(s,void 0,t,i,e)}function yE({to:s,replace:e,state:t,relative:i}){cs(Zl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=v.useContext(zr);na(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=v.useContext(ya),{pathname:h}=ba(),p=nr(),g=Ig(s,Ag(u),h,i==="path"),y=JSON.stringify(g);return v.useEffect(()=>{p(JSON.parse(y),{replace:e,state:t,relative:i})},[p,y,i,e,t]),null}function ns(s){cs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function bE({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){cs(!Zl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=v.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[p,l,u,h]);typeof t=="string"&&(t=Xl(t));let{pathname:y="/",search:w="",hash:k="",state:T=null,key:L="default"}=t,$=v.useMemo(()=>{let U=ui(y,p);return U==null?null:{location:{pathname:U,search:w,hash:k,state:T,key:L},navigationType:i}},[p,y,w,k,T,L,i]);return na($!=null,`<Router basename="${p}"> is not able to match the URL "${y}${w}${k}" because it does not start with the basename, so the <Router> won't render anything.`),$==null?null:v.createElement(zr.Provider,{value:g},v.createElement(_u.Provider,{children:e,value:$}))}function vE({children:s,location:e}){return rE(tg(s),e)}function tg(s,e=[]){let t=[];return v.Children.forEach(s,(i,l)=>{if(!v.isValidElement(i))return;let u=[...e,l];if(i.type===v.Fragment){t.push.apply(t,tg(i.props.children,u));return}cs(i.type===ns,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),cs(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=tg(i.props.children,u)),t.push(h)}),t}var hd="get",dd="application/x-www-form-urlencoded";function Kd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function xE(s){return Kd(s)&&s.tagName.toLowerCase()==="button"}function wE(s){return Kd(s)&&s.tagName.toLowerCase()==="form"}function _E(s){return Kd(s)&&s.tagName.toLowerCase()==="input"}function kE(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function TE(s,e){return s.button===0&&(!e||e==="_self")&&!kE(s)}function ng(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let i=s[t];return e.concat(Array.isArray(i)?i.map(l=>[t,l]):[[t,i]])},[]))}function jE(s,e){let t=ng(s);return e&&e.forEach((i,l)=>{t.has(l)||e.getAll(l).forEach(u=>{t.append(l,u)})}),t}var Qh=null;function EE(){if(Qh===null)try{new FormData(document.createElement("form"),0),Qh=!1}catch{Qh=!0}return Qh}var SE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _p(s){return s!=null&&!SE.has(s)?(na(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dd}"`),null):s}function NE(s,e){let t,i,l,u,h;if(wE(s)){let p=s.getAttribute("action");i=p?ui(p,e):null,t=s.getAttribute("method")||hd,l=_p(s.getAttribute("enctype"))||dd,u=new FormData(s)}else if(xE(s)||_E(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?ui(g,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||hd,l=_p(s.getAttribute("formenctype"))||_p(p.getAttribute("enctype"))||dd,u=new FormData(p,s),!EE()){let{name:y,type:w,value:k}=s;if(w==="image"){let T=y?`${y}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else y&&u.append(y,k)}}else{if(Kd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hd,i=null,l=dd,h=s}return u&&l==="text/plain"&&(h=u,u=void 0),{action:i,method:t.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function CE(s,e,t,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&ui(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function RE(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AE(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function IE(s,e,t){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await RE(u,t);return h.links?h.links():[]}return[]}));return LE(i.flat(1).filter(AE).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function I1(s,e,t,i,l,u){let h=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,p=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let w=i.routes[g.route.id];if(!w||!w.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let k=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function ME(s,e,{includeHydrateFallback:t}={}){return DE(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function DE(s){return[...new Set(s)]}function PE(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function LE(s,e){let t=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(PE(l));return t.has(u)||(t.add(u),i.push({key:u,link:l})),i},[])}function B2(){let s=v.useContext(Jl);return Lg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function OE(){let s=v.useContext(Gd);return Lg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Og=v.createContext(void 0);Og.displayName="FrameworkContext";function U2(){let s=v.useContext(Og);return Lg(s,"You must render this element inside a <HydratedRouter> element"),s}function VE(s,e){let t=v.useContext(Og),[i,l]=v.useState(!1),[u,h]=v.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:w,onTouchStart:k}=e,T=v.useRef(null);v.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let U=se=>{se.forEach(Q=>{h(Q.isIntersecting)})},O=new IntersectionObserver(U,{threshold:.5});return T.current&&O.observe(T.current),()=>{O.disconnect()}}},[s]),v.useEffect(()=>{if(i){let U=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(U)}}},[i]);let L=()=>{l(!0)},$=()=>{l(!1),h(!1)};return t?s!=="intent"?[u,T,{}]:[u,T,{onFocus:Hc(p,L),onBlur:Hc(g,$),onMouseEnter:Hc(y,L),onMouseLeave:Hc(w,$),onTouchStart:Hc(k,L)}]:[!1,T,{}]}function Hc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function BE({page:s,...e}){let{router:t}=B2(),i=v.useMemo(()=>E2(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?v.createElement(zE,{page:s,matches:i,...e}):null}function UE(s){let{manifest:e,routeModules:t}=U2(),[i,l]=v.useState([]);return v.useEffect(()=>{let u=!1;return IE(s,e,t).then(h=>{u||l(h)}),()=>{u=!0}},[s,e,t]),i}function zE({page:s,matches:e,...t}){let i=ba(),{future:l,manifest:u,routeModules:h}=U2(),{basename:p}=B2(),{loaderData:g,matches:y}=OE(),w=v.useMemo(()=>I1(s,e,y,u,i,"data"),[s,e,y,u,i]),k=v.useMemo(()=>I1(s,e,y,u,i,"assets"),[s,e,y,u,i]),T=v.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let U=new Set,O=!1;if(e.forEach(Q=>{let oe=u.routes[Q.route.id];!oe||!oe.hasLoader||(!w.some(ve=>ve.route.id===Q.route.id)&&Q.route.id in g&&h[Q.route.id]?.shouldRevalidate||oe.hasClientLoader?O=!0:U.add(Q.route.id))}),U.size===0)return[];let se=CE(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return O&&U.size>0&&se.searchParams.set("_routes",e.filter(Q=>U.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[se.pathname+se.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,w,e,s,h]),L=v.useMemo(()=>ME(k,u),[k,u]),$=UE(k);return v.createElement(v.Fragment,null,T.map(U=>v.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...t})),L.map(U=>v.createElement("link",{key:U,rel:"modulepreload",href:U,...t})),$.map(({key:U,link:O})=>v.createElement("link",{key:U,nonce:t.nonce,...O,crossOrigin:O.crossOrigin??t.crossOrigin})))}function FE(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var qE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{qE&&(window.__reactRouterVersion="7.13.0")}catch{}function HE({basename:s,children:e,unstable_useTransitions:t,window:i}){let l=v.useRef();l.current==null&&(l.current=wj({window:i,v5Compat:!0}));let u=l.current,[h,p]=v.useState({action:u.action,location:u.location}),g=v.useCallback(y=>{t===!1?p(y):v.startTransition(()=>p(y))},[t]);return v.useLayoutEffect(()=>u.listen(g),[u,g]),v.createElement(bE,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:t})}var z2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,F2=v.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:l,reloadDocument:u,replace:h,state:p,target:g,to:y,preventScrollReset:w,viewTransition:k,unstable_defaultShouldRevalidate:T,...L},$){let{basename:U,unstable_useTransitions:O}=v.useContext(zr),se=typeof y=="string"&&z2.test(y),Q=R2(y,U);y=Q.to;let oe=tE(y,{relative:l}),[ve,Me,Ne]=VE(i,L),R=KE(y,{replace:h,state:p,target:g,preventScrollReset:w,relative:l,viewTransition:k,unstable_defaultShouldRevalidate:T,unstable_useTransitions:O});function S(V){e&&e(V),V.defaultPrevented||R(V)}let I=v.createElement("a",{...L,...Ne,href:Q.absoluteURL||oe,onClick:Q.isExternal||u?e:S,ref:FE($,Me),target:g,"data-discover":!se&&t==="render"?"true":void 0});return ve&&!se?v.createElement(v.Fragment,null,I,v.createElement(BE,{page:oe})):I});F2.displayName="Link";var $E=v.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:l=!1,style:u,to:h,viewTransition:p,children:g,...y},w){let k=ku(h,{relative:y.relative}),T=ba(),L=v.useContext(Gd),{navigator:$,basename:U}=v.useContext(zr),O=L!=null&&eS(k)&&p===!0,se=$.encodeLocation?$.encodeLocation(k).pathname:k.pathname,Q=T.pathname,oe=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),oe=oe?oe.toLowerCase():null,se=se.toLowerCase()),oe&&U&&(oe=ui(oe,U)||oe);const ve=se!=="/"&&se.endsWith("/")?se.length-1:se.length;let Me=Q===se||!l&&Q.startsWith(se)&&Q.charAt(ve)==="/",Ne=oe!=null&&(oe===se||!l&&oe.startsWith(se)&&oe.charAt(se.length)==="/"),R={isActive:Me,isPending:Ne,isTransitioning:O},S=Me?e:void 0,I;typeof i=="function"?I=i(R):I=[i,Me?"active":null,Ne?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(R):u;return v.createElement(F2,{...y,"aria-current":S,className:I,ref:w,style:V,to:h,viewTransition:p},typeof g=="function"?g(R):g)});$E.displayName="NavLink";var WE=v.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:l,state:u,method:h=hd,action:p,onSubmit:g,relative:y,preventScrollReset:w,viewTransition:k,unstable_defaultShouldRevalidate:T,...L},$)=>{let{unstable_useTransitions:U}=v.useContext(zr),O=JE(),se=ZE(p,{relative:y}),Q=h.toLowerCase()==="get"?"get":"post",oe=typeof p=="string"&&z2.test(p),ve=Me=>{if(g&&g(Me),Me.defaultPrevented)return;Me.preventDefault();let Ne=Me.nativeEvent.submitter,R=Ne?.getAttribute("formmethod")||h,S=()=>O(Ne||Me.currentTarget,{fetcherKey:e,method:R,navigate:t,replace:l,state:u,relative:y,preventScrollReset:w,viewTransition:k,unstable_defaultShouldRevalidate:T});U&&t!==!1?v.startTransition(()=>S()):S()};return v.createElement("form",{ref:$,method:Q,action:se,onSubmit:i?g:ve,...L,"data-discover":!oe&&s==="render"?"true":void 0})});WE.displayName="Form";function GE(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q2(s){let e=v.useContext(Jl);return cs(e,GE(s)),e}function KE(s,{target:e,replace:t,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=nr(),w=ba(),k=ku(s,{relative:u});return v.useCallback(T=>{if(TE(T,e)){T.preventDefault();let L=t!==void 0?t:cu(w)===cu(k),$=()=>y(s,{replace:L,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?v.startTransition(()=>$()):$()}},[w,y,k,t,i,e,s,l,u,h,p,g])}function YE(s){na(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=v.useRef(ng(s)),t=v.useRef(!1),i=ba(),l=v.useMemo(()=>jE(i.search,t.current?null:e.current),[i.search]),u=nr(),h=v.useCallback((p,g)=>{const y=ng(typeof p=="function"?p(new URLSearchParams(l)):p);t.current=!0,u("?"+y,g)},[u,l]);return[l,h]}var QE=0,XE=()=>`__${String(++QE)}__`;function JE(){let{router:s}=q2("useSubmit"),{basename:e}=v.useContext(zr),t=fE(),i=s.fetch,l=s.navigate;return v.useCallback(async(u,h={})=>{let{action:p,method:g,encType:y,formData:w,body:k}=NE(u,e);if(h.navigate===!1){let T=h.fetcherKey||XE();await i(T,t,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:w,body:k,formMethod:h.method||g,formEncType:h.encType||y,flushSync:h.flushSync})}else await l(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:w,body:k,formMethod:h.method||g,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:t,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,l,e,t])}function ZE(s,{relative:e}={}){let{basename:t}=v.useContext(zr),i=v.useContext(ya);cs(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...ku(s||".",{relative:e})},h=ba();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(w=>w==="")){p.delete("index"),g.filter(k=>k).forEach(k=>p.append("index",k));let w=p.toString();u.search=w?`?${w}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:ii([t,u.pathname])),cu(u)}function eS(s,{relative:e}={}){let t=v.useContext(I2);cs(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=q2("useViewTransitionState"),l=ku(s,{relative:e});if(!t.isTransitioning)return!1;let u=ui(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=ui(t.nextLocation.pathname,i)||t.nextLocation.pathname;return kd(l.pathname,h)!=null||kd(l.pathname,u)!=null}const tS=()=>{};var M1={};const H2=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},nS=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const l=s[t++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[t++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[t++],h=s[t++],p=s[t++],g=((l&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],h=s[t++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},$2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,p=h?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,w=u>>2,k=(u&3)<<4|p>>4;let T=(p&15)<<2|y>>6,L=y&63;g||(L=64,h||(T=64)),i.push(t[w],t[k],t[T],t[L])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(H2(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):nS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=t[s.charAt(l++)],p=l<s.length?t[s.charAt(l)]:0;++l;const y=l<s.length?t[s.charAt(l)]:64;++l;const k=l<s.length?t[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||k==null)throw new sS;const T=u<<2|p>>4;if(i.push(T),y!==64){const L=p<<4&240|y>>2;if(i.push(L),k!==64){const $=y<<6&192|k;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class sS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rS=function(s){const e=H2(s);return $2.encodeByteArray(e,!0)},Td=function(s){return rS(s).replace(/\./g,"")},W2=function(s){try{return $2.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function aS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iS=()=>aS().__FIREBASE_DEFAULTS__,oS=()=>{if(typeof process>"u"||typeof M1>"u")return;const s=M1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},lS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&W2(s[1]);return e&&JSON.parse(e)},Yd=()=>{try{return tS()||iS()||oS()||lS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},G2=s=>Yd()?.emulatorHosts?.[s],K2=s=>{const e=G2(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Y2=()=>Yd()?.config,Q2=s=>Yd()?.[`_${s}`];class cS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function ho(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vg(s){return(await fetch(s,{credentials:"include"})).ok}function X2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Td(JSON.stringify(t)),Td(JSON.stringify(h)),""].join(".")}const tu={};function uS(){const s={prod:[],emulator:[]};for(const e of Object.keys(tu))tu[e]?s.emulator.push(e):s.prod.push(e);return s}function hS(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let D1=!1;function Bg(s,e){if(typeof window>"u"||typeof document>"u"||!ho(window.location.host)||tu[s]===e||tu[s]||D1)return;tu[s]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",u=uS().prod.length>0;function h(){const T=document.getElementById(i);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,L){T.setAttribute("width","24"),T.setAttribute("id",L),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{D1=!0,h()},T}function w(T,L){T.setAttribute("id",L),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function k(){const T=hS(i),L=t("text"),$=document.getElementById(L)||document.createElement("span"),U=t("learnmore"),O=document.getElementById(U)||document.createElement("a"),se=t("preprendIcon"),Q=document.getElementById(se)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const oe=T.element;p(oe),w(O,U);const ve=y();g(Q,se),oe.append(Q,$,O,ve),document.body.appendChild(oe)}u?($.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}function lr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lr())}function fS(){const s=Yd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function gS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yS(){const s=lr();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function bS(){return!fS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vS(){try{return typeof indexedDB=="object"}catch{return!1}}function xS(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(t){e(t)}})}const wS="FirebaseError";class Oa extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=wS,Object.setPrototypeOf(this,Oa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tu.prototype.create)}}class Tu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?_S(u,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new Oa(l,p,i)}}function _S(s,e){return s.replace(kS,(t,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const kS=/\{\$([^}]+)}/g;function TS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function qo(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const l of t){if(!i.includes(l))return!1;const u=s[l],h=e[l];if(P1(u)&&P1(h)){if(!qo(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!t.includes(l))return!1;return!0}function P1(s){return s!==null&&typeof s=="object"}function ju(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Yc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Qc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function jS(s,e){const t=new ES(s,e);return t.subscribe.bind(t)}class ES{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let l;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");SS(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:i},l.next===void 0&&(l.next=kp),l.error===void 0&&(l.error=kp),l.complete===void 0&&(l.complete=kp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SS(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function kp(){}function Zn(s){return s&&s._delegate?s._delegate:s}class ro{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Lo="[DEFAULT]";class NS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new cS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RS(e))try{this.getOrInitializeService({instanceIdentifier:Lo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=Lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lo){return this.instances.has(e)}getOptions(e=Lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(l)}return l}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const l of i)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:CS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Lo){return this.component?this.component.multipleInstances?e:Lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CS(s){return s===Lo?void 0:s}function RS(s){return s.instantiationMode==="EAGER"}class AS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new NS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var vn;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(vn||(vn={}));const IS={debug:vn.DEBUG,verbose:vn.VERBOSE,info:vn.INFO,warn:vn.WARN,error:vn.ERROR,silent:vn.SILENT},MS=vn.INFO,DS={[vn.DEBUG]:"log",[vn.VERBOSE]:"log",[vn.INFO]:"info",[vn.WARN]:"warn",[vn.ERROR]:"error"},PS=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=DS[e];if(l)console[l](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ug{constructor(e){this.name=e,this._logLevel=MS,this._logHandler=PS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vn.DEBUG,...e),this._logHandler(this,vn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vn.VERBOSE,...e),this._logHandler(this,vn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vn.INFO,...e),this._logHandler(this,vn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vn.WARN,...e),this._logHandler(this,vn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vn.ERROR,...e),this._logHandler(this,vn.ERROR,...e)}}const LS=(s,e)=>e.some(t=>s instanceof t);let L1,O1;function OS(){return L1||(L1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VS(){return O1||(O1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J2=new WeakMap,sg=new WeakMap,Z2=new WeakMap,Tp=new WeakMap,zg=new WeakMap;function BS(s){const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(eo(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&J2.set(t,s)}).catch(()=>{}),zg.set(e,s),e}function US(s){if(sg.has(s))return;const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});sg.set(s,e)}let rg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return sg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Z2.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return eo(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function zS(s){rg=s(rg)}function FS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(jp(this),e,...t);return Z2.set(i,e.sort?e.sort():[e]),eo(i)}:VS().includes(s)?function(...e){return s.apply(jp(this),e),eo(J2.get(this))}:function(...e){return eo(s.apply(jp(this),e))}}function qS(s){return typeof s=="function"?FS(s):(s instanceof IDBTransaction&&US(s),LS(s,OS())?new Proxy(s,rg):s)}function eo(s){if(s instanceof IDBRequest)return BS(s);if(Tp.has(s))return Tp.get(s);const e=qS(s);return e!==s&&(Tp.set(s,e),zg.set(e,s)),e}const jp=s=>zg.get(s);function HS(s,e,{blocked:t,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(s,e),p=eo(h);return i&&h.addEventListener("upgradeneeded",g=>{i(eo(h.result),g.oldVersion,g.newVersion,eo(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const $S=["get","getKey","getAll","getAllKeys","count"],WS=["put","add","delete","clear"],Ep=new Map;function V1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Ep.get(e))return Ep.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,l=WS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(l||$S.includes(t)))return;const u=async function(h,...p){const g=this.transaction(h,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),l&&g.done]))[0]};return Ep.set(e,u),u}zS(s=>({...s,get:(e,t,i)=>V1(e,t)||s.get(e,t,i),has:(e,t)=>!!V1(e,t)||s.has(e,t)}));class GS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(KS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function KS(s){return s.getComponent()?.type==="VERSION"}const ag="@firebase/app",B1="0.14.7";const hi=new Ug("@firebase/app"),YS="@firebase/app-compat",QS="@firebase/analytics-compat",XS="@firebase/analytics",JS="@firebase/app-check-compat",ZS="@firebase/app-check",eN="@firebase/auth",tN="@firebase/auth-compat",nN="@firebase/database",sN="@firebase/data-connect",rN="@firebase/database-compat",aN="@firebase/functions",iN="@firebase/functions-compat",oN="@firebase/installations",lN="@firebase/installations-compat",cN="@firebase/messaging",uN="@firebase/messaging-compat",hN="@firebase/performance",dN="@firebase/performance-compat",fN="@firebase/remote-config",mN="@firebase/remote-config-compat",pN="@firebase/storage",gN="@firebase/storage-compat",yN="@firebase/firestore",bN="@firebase/ai",vN="@firebase/firestore-compat",xN="firebase",wN="12.8.0";const ig="[DEFAULT]",_N={[ag]:"fire-core",[YS]:"fire-core-compat",[XS]:"fire-analytics",[QS]:"fire-analytics-compat",[ZS]:"fire-app-check",[JS]:"fire-app-check-compat",[eN]:"fire-auth",[tN]:"fire-auth-compat",[nN]:"fire-rtdb",[sN]:"fire-data-connect",[rN]:"fire-rtdb-compat",[aN]:"fire-fn",[iN]:"fire-fn-compat",[oN]:"fire-iid",[lN]:"fire-iid-compat",[cN]:"fire-fcm",[uN]:"fire-fcm-compat",[hN]:"fire-perf",[dN]:"fire-perf-compat",[fN]:"fire-rc",[mN]:"fire-rc-compat",[pN]:"fire-gcs",[gN]:"fire-gcs-compat",[yN]:"fire-fst",[vN]:"fire-fst-compat",[bN]:"fire-vertex","fire-js":"fire-js",[xN]:"fire-js-all"};const jd=new Map,kN=new Map,og=new Map;function U1(s,e){try{s.container.addComponent(e)}catch(t){hi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Ho(s){const e=s.name;if(og.has(e))return hi.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,s);for(const t of jd.values())U1(t,s);for(const t of kN.values())U1(t,s);return!0}function Qd(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Br(s){return s==null?!1:s.settings!==void 0}const TN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},to=new Tu("app","Firebase",TN);class jN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw to.create("app-deleted",{appName:this._name})}}const Xo=wN;function Fg(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:ig,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw to.create("bad-app-name",{appName:String(l)});if(t||(t=Y2()),!t)throw to.create("no-options");const u=jd.get(l);if(u){if(qo(t,u.options)&&qo(i,u.config))return u;throw to.create("duplicate-app",{appName:l})}const h=new AS(l);for(const g of og.values())h.addComponent(g);const p=new jN(t,i,h);return jd.set(l,p),p}function qg(s=ig){const e=jd.get(s);if(!e&&s===ig&&Y2())return Fg();if(!e)throw to.create("no-app",{appName:s});return e}function Na(s,e,t){let i=_N[s]??s;t&&(i+=`-${t}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hi.warn(h.join(" "));return}Ho(new ro(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const EN="firebase-heartbeat-database",SN=1,uu="firebase-heartbeat-store";let Sp=null;function ew(){return Sp||(Sp=HS(EN,SN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(uu)}catch(t){console.warn(t)}}}}).catch(s=>{throw to.create("idb-open",{originalErrorMessage:s.message})})),Sp}async function NN(s){try{const t=(await ew()).transaction(uu),i=await t.objectStore(uu).get(tw(s));return await t.done,i}catch(e){if(e instanceof Oa)hi.warn(e.message);else{const t=to.create("idb-get",{originalErrorMessage:e?.message});hi.warn(t.message)}}}async function z1(s,e){try{const i=(await ew()).transaction(uu,"readwrite");await i.objectStore(uu).put(e,tw(s)),await i.done}catch(t){if(t instanceof Oa)hi.warn(t.message);else{const i=to.create("idb-set",{originalErrorMessage:t?.message});hi.warn(i.message)}}}function tw(s){return`${s.name}!${s.options.appId}`}const CN=1024,RN=30;class AN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new MN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=F1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>RN){const l=DN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){hi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=F1(),{heartbeatsToSend:t,unsentEntries:i}=IN(this._heartbeatsCache.heartbeats),l=Td(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return hi.warn(e),""}}}function F1(){return new Date().toISOString().substring(0,10)}function IN(s,e=CN){const t=[];let i=s.slice();for(const l of s){const u=t.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),q1(t)>e){u.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),q1(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class MN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vS()?xS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await NN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return z1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return z1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function q1(s){return Td(JSON.stringify({version:2,heartbeats:s})).length}function DN(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function PN(s){Ho(new ro("platform-logger",e=>new GS(e),"PRIVATE")),Ho(new ro("heartbeat",e=>new AN(e),"PRIVATE")),Na(ag,B1,s),Na(ag,B1,"esm2020"),Na("fire-js","")}PN("");function nw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LN=nw,sw=new Tu("auth","Firebase",nw());const Ed=new Ug("@firebase/auth");function ON(s,...e){Ed.logLevel<=vn.WARN&&Ed.warn(`Auth (${Xo}): ${s}`,...e)}function fd(s,...e){Ed.logLevel<=vn.ERROR&&Ed.error(`Auth (${Xo}): ${s}`,...e)}function pa(s,...e){throw Hg(s,...e)}function Ca(s,...e){return Hg(s,...e)}function rw(s,e,t){const i={...LN(),[e]:t};return new Tu("auth","Firebase",i).create(e,{appName:s.name})}function oi(s){return rw(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hg(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return sw.create(s,...e)}function Dt(s,e,...t){if(!s)throw Hg(e,...t)}function ri(s){const e="INTERNAL ASSERTION FAILED: "+s;throw fd(e),new Error(e)}function di(s,e){s||ri(e)}function lg(){return typeof self<"u"&&self.location?.href||""}function VN(){return H1()==="http:"||H1()==="https:"}function H1(){return typeof self<"u"&&self.location?.protocol||null}function BN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VN()||pS()||"connection"in navigator)?navigator.onLine:!0}function UN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Eu{constructor(e,t){this.shortDelay=e,this.longDelay=t,di(t>e,"Short delay should be less than long delay!"),this.isMobile=dS()||gS()}get(){return BN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $g(s,e){di(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class aw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const zN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const FN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qN=new Eu(3e4,6e4);function pi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function gi(s,e,t,i,l={}){return iw(s,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=ju({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return mS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&ho(s.emulatorConfig.host)&&(y.credentials="include"),aw.fetch()(await ow(s,s.config.apiHost,t,p),y)})}async function iw(s,e,t){s._canInitEmulator=!1;const i={...zN,...e};try{const l=new $N(s),u=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Xh(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Xh(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Xh(s,"user-disabled",h);const w=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw rw(s,w,y);pa(s,w)}}catch(l){if(l instanceof Oa)throw l;pa(s,"network-request-failed",{message:String(l)})}}async function Su(s,e,t,i,l={}){const u=await gi(s,e,t,i,l);return"mfaPendingCredential"in u&&pa(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function ow(s,e,t,i){const l=`${e}${t}?${i}`,u=s,h=u.config.emulator?$g(s.config,l):`${s.config.apiScheme}://${l}`;return FN.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function HN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $N{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ca(this.auth,"network-request-failed")),qN.get())})}}function Xh(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const l=Ca(s,e,i);return l.customData._tokenResponse=t,l}function $1(s){return s!==void 0&&s.enterprise!==void 0}class WN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return HN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GN(s,e){return gi(s,"GET","/v2/recaptchaConfig",pi(s,e))}async function KN(s,e){return gi(s,"POST","/v1/accounts:delete",e)}async function Sd(s,e){return gi(s,"POST","/v1/accounts:lookup",e)}function nu(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YN(s,e=!1){const t=Zn(s),i=await t.getIdToken(e),l=Wg(i);Dt(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:nu(Np(l.auth_time)),issuedAtTime:nu(Np(l.iat)),expirationTime:nu(Np(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Np(s){return Number(s)*1e3}function Wg(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return fd("JWT malformed, contained fewer than 3 sections"),null;try{const l=W2(t);return l?JSON.parse(l):(fd("Failed to decode base64 JWT payload"),null)}catch(l){return fd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function W1(s){const e=Wg(s);return Dt(e,"internal-error"),Dt(typeof e.exp<"u","internal-error"),Dt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function hu(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Oa&&QN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function QN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class XN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class cg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nd(s){const e=s.auth,t=await s.getIdToken(),i=await hu(s,Sd(e,{idToken:t}));Dt(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?lw(l.providerUserInfo):[],h=ZN(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!h?.length,y=p?g:!1,w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new cg(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,w)}async function JN(s){const e=Zn(s);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZN(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function lw(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function eC(s,e){const t=await iw(s,{},async()=>{const i=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,h=await ow(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&ho(s.emulatorConfig.host)&&(g.credentials="include"),aw.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tC(s,e){return gi(s,"POST","/v2/accounts:revokeToken",pi(s,e))}class Ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Dt(e.idToken,"internal-error"),Dt(typeof e.idToken<"u","internal-error"),Dt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):W1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Dt(e.length!==0,"internal-error");const t=W1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Dt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:l,expiresIn:u}=await eC(e,t);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:l,expirationTime:u}=t,h=new Ul;return i&&(Dt(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(Dt(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(Dt(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ul,this.toJSON())}_performRefresh(){return ri("not implemented")}}function qi(s,e){Dt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fa{constructor({uid:e,auth:t,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new XN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new cg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await hu(this,this.stsTokenManager.getToken(this.auth,e));return Dt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YN(this,e)}reload(){return JN(this)}_assign(e){this!==e&&(Dt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Dt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Nd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Br(this.auth.app))return Promise.reject(oi(this.auth));const e=await this.getIdToken();return await hu(this,KN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,l=t.email??void 0,u=t.phoneNumber??void 0,h=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:k,emailVerified:T,isAnonymous:L,providerData:$,stsTokenManager:U}=t;Dt(k&&U,e,"internal-error");const O=Ul.fromJSON(this.name,U);Dt(typeof k=="string",e,"internal-error"),qi(i,e.name),qi(l,e.name),Dt(typeof T=="boolean",e,"internal-error"),Dt(typeof L=="boolean",e,"internal-error"),qi(u,e.name),qi(h,e.name),qi(p,e.name),qi(g,e.name),qi(y,e.name),qi(w,e.name);const se=new fa({uid:k,auth:e,email:l,emailVerified:T,displayName:i,isAnonymous:L,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:O,createdAt:y,lastLoginAt:w});return $&&Array.isArray($)&&(se.providerData=$.map(Q=>({...Q}))),g&&(se._redirectEventId=g),se}static async _fromIdTokenResponse(e,t,i=!1){const l=new Ul;l.updateFromServerResponse(t);const u=new fa({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Nd(u),u}static async _fromGetAccountInfoResponse(e,t,i){const l=t.users[0];Dt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?lw(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,p=new Ul;p.updateFromIdToken(i);const g=new fa({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new cg(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const G1=new Map;function ai(s){di(s instanceof Function,"Expected a class definition");let e=G1.get(s);return e?(di(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,G1.set(s,e),e)}class cw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}cw.type="NONE";const K1=cw;function md(s,e,t){return`firebase:${s}:${e}:${t}`}class zl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=md(this.userKey,l.apiKey,u),this.fullPersistenceKey=md("persistence",l.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Sd(this.auth,{idToken:e}).catch(()=>{});return t?fa._fromGetAccountInfoResponse(this.auth,t,e):null}return fa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new zl(ai(K1),e,i);const l=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||ai(K1);const h=md(i,e.config.apiKey,e.name);let p=null;for(const y of t)try{const w=await y._get(h);if(w){let k;if(typeof w=="string"){const T=await Sd(e,{idToken:w}).catch(()=>{});if(!T)break;k=await fa._fromGetAccountInfoResponse(e,T,w)}else k=fa._fromJSON(e,w);y!==u&&(p=k),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new zl(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new zl(u,e,i))}}function Y1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pw(e))return"Blackberry";if(gw(e))return"Webos";if(hw(e))return"Safari";if((e.includes("chrome/")||dw(e))&&!e.includes("edge/"))return"Chrome";if(mw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function uw(s=lr()){return/firefox\//i.test(s)}function hw(s=lr()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dw(s=lr()){return/crios\//i.test(s)}function fw(s=lr()){return/iemobile/i.test(s)}function mw(s=lr()){return/android/i.test(s)}function pw(s=lr()){return/blackberry/i.test(s)}function gw(s=lr()){return/webos/i.test(s)}function Gg(s=lr()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function nC(s=lr()){return Gg(s)&&!!window.navigator?.standalone}function sC(){return yS()&&document.documentMode===10}function yw(s=lr()){return Gg(s)||mw(s)||gw(s)||pw(s)||/windows phone/i.test(s)||fw(s)}function bw(s,e=[]){let t;switch(s){case"Browser":t=Y1(lr());break;case"Worker":t=`${Y1(lr())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xo}/${i}`}class rC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function aC(s,e={}){return gi(s,"GET","/v2/passwordPolicy",pi(s,e))}const iC=6;class oC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??iC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class lC{constructor(e,t,i,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Q1(this),this.idTokenSubscription=new Q1(this),this.beforeStateQueue=new rC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ai(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Sd(this,{idToken:e}),i=await fa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Br(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Dt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Br(this.app))return Promise.reject(oi(this));const t=e?Zn(e):null;return t&&Dt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Dt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Br(this.app)?Promise.reject(oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Br(this.app)?Promise.reject(oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aC(this),t=new oC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await tC(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ai(e)||this._popupRedirectResolver;Dt(t,this,"argument-error"),this.redirectPersistenceManager=await zl.create(this,[ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,l){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Dt(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,l);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Dt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ON(`Error while retrieving App Check token: ${e.error}`),e?.token}}function fo(s){return Zn(s)}class Q1{constructor(e){this.auth=e,this.observer=null,this.addObserver=jS(t=>this.observer=t)}get next(){return Dt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cC(s){Xd=s}function vw(s){return Xd.loadJS(s)}function uC(){return Xd.recaptchaEnterpriseScript}function hC(){return Xd.gapiScript}function dC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class fC{constructor(){this.enterprise=new mC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pC="recaptcha-enterprise",xw="NO_RECAPTCHA";class gC{constructor(e){this.type=pC,this.auth=fo(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{GN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new WN(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,h,p){const g=window.grecaptcha;$1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(xw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fC().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!t&&$1(window.grecaptcha))l(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=uC();g.length!==0&&(g+=p),vw(g).then(()=>{l(p,u,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function X1(s,e,t,i=!1,l=!1){const u=new gC(s);let h;if(l)h=xw;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Cd(s,e,t,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await X1(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await X1(s,e,t,t==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function yC(s,e){const t=Qd(s,"auth");if(t.isInitialized()){const l=t.getImmediate(),u=t.getOptions();if(qo(u,e??{}))return l;pa(l,"already-initialized")}return t.initialize({options:e})}function bC(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ai);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function vC(s,e,t){const i=fo(s);Dt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=ww(e),{host:h,port:p}=xC(e),g=p===null?"":`:${p}`,y={url:`${u}//${h}${g}/`},w=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Dt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Dt(qo(y,i.config.emulator)&&qo(w,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=w,i.settings.appVerificationDisabledForTesting=!0,ho(h)?(Vg(`${u}//${h}${g}`),Bg("Auth",!0)):wC()}function ww(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function xC(s){const e=ww(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:J1(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:J1(h)}}}function J1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function wC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Kg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,t){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}}async function _C(s,e){return gi(s,"POST","/v1/accounts:signUp",e)}async function kC(s,e){return Su(s,"POST","/v1/accounts:signInWithPassword",pi(s,e))}async function TC(s,e){return gi(s,"POST","/v1/accounts:sendOobCode",pi(s,e))}async function jC(s,e){return TC(s,e)}async function EC(s,e){return Su(s,"POST","/v1/accounts:signInWithEmailLink",pi(s,e))}async function SC(s,e){return Su(s,"POST","/v1/accounts:signInWithEmailLink",pi(s,e))}class du extends Kg{constructor(e,t,i,l=null){super("password",i),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new du(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new du(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,t,"signInWithPassword",kC);case"emailLink":return EC(e,{email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,i,"signUpPassword",_C);case"emailLink":return SC(e,{idToken:t,email:this._email,oobCode:this._password});default:pa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Fl(s,e){return Su(s,"POST","/v1/accounts:signInWithIdp",pi(s,e))}const NC="http://localhost";class $o extends Kg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=t;if(!i||!l)return null;const h=new $o(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Fl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Fl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fl(e,t)}buildRequest(){const e={requestUri:NC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ju(t)}return e}}function CC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RC(s){const e=Yc(Qc(s)).link,t=e?Yc(Qc(e)).deep_link_id:null,i=Yc(Qc(s)).deep_link_id;return(i?Yc(Qc(i)).link:null)||i||t||e||s}class Yg{constructor(e){const t=Yc(Qc(e)),i=t.apiKey??null,l=t.oobCode??null,u=CC(t.mode??null);Dt(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=RC(e);try{return new Yg(t)}catch{return null}}}class ec{constructor(){this.providerId=ec.PROVIDER_ID}static credential(e,t){return du._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Yg.parseLink(t);return Dt(i,"argument-error"),du._fromEmailAndCode(e,i.code,i.tenantId)}}ec.PROVIDER_ID="password";ec.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ec.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _w{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nu extends _w{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wi extends Nu{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";class Gi extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $o._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Gi.credential(t,i)}catch{return null}}}Gi.GOOGLE_SIGN_IN_METHOD="google.com";Gi.PROVIDER_ID="google.com";class Ki extends Nu{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ki.credential(e.oauthAccessToken)}catch{return null}}}Ki.GITHUB_SIGN_IN_METHOD="github.com";Ki.PROVIDER_ID="github.com";class Yi extends Nu{constructor(){super("twitter.com")}static credential(e,t){return $o._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Yi.credential(t,i)}catch{return null}}}Yi.TWITTER_SIGN_IN_METHOD="twitter.com";Yi.PROVIDER_ID="twitter.com";async function AC(s,e){return Su(s,"POST","/v1/accounts:signUp",pi(s,e))}class Wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,l=!1){const u=await fa._fromIdTokenResponse(e,i,l),h=Z1(i);return new Wo({user:u,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const l=Z1(i);return new Wo({user:e,providerId:l,_tokenResponse:i,operationType:t})}}function Z1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Rd extends Oa{constructor(e,t,i,l){super(t.code,t.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,l){return new Rd(e,t,i,l)}}function kw(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(s,u,e,i):u})}async function IC(s,e,t=!1){const i=await hu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Wo._forOperation(s,"link",i)}async function MC(s,e,t=!1){const{auth:i}=s;if(Br(i.app))return Promise.reject(oi(i));const l="reauthenticate";try{const u=await hu(s,kw(i,l,e,s),t);Dt(u.idToken,i,"internal-error");const h=Wg(u.idToken);Dt(h,i,"internal-error");const{sub:p}=h;return Dt(s.uid===p,i,"user-mismatch"),Wo._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&pa(i,"user-mismatch"),u}}async function Tw(s,e,t=!1){if(Br(s.app))return Promise.reject(oi(s));const i="signIn",l=await kw(s,i,e),u=await Wo._fromIdTokenResponse(s,i,l);return t||await s._updateCurrentUser(u.user),u}async function DC(s,e){return Tw(fo(s),e)}async function jw(s){const e=fo(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PC(s,e,t){const i=fo(s);await Cd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",jC)}async function LC(s,e,t){if(Br(s.app))return Promise.reject(oi(s));const i=fo(s),h=await Cd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&jw(s),g}),p=await Wo._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function OC(s,e,t){return Br(s.app)?Promise.reject(oi(s)):DC(Zn(s),ec.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&jw(s),i})}function ex(s,e){return Zn(s).setPersistence(e)}function VC(s,e,t,i){return Zn(s).onIdTokenChanged(e,t,i)}function BC(s,e,t){return Zn(s).beforeAuthStateChanged(e,t)}function UC(s,e,t,i){return Zn(s).onAuthStateChanged(e,t,i)}function zC(s){return Zn(s).signOut()}const Ad="__sak";class Ew{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ad,"1"),this.storage.removeItem(Ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const FC=1e3,qC=10;class Sw extends Ew{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),l=this.localCache[t];i!==l&&e(t,l,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);sC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,qC):l()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},FC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sw.type="LOCAL";const ug=Sw;class Nw extends Ew{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Nw.type="SESSION";const Qg=Nw;function HC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const i=new Jd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:l,data:u}=t.data,h=this.handlersMap[l];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async y=>y(t.origin,u)),g=await HC(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jd.receivers=[];function Xg(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class $C{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const y=Xg("",20);l.port1.start();const w=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(k){const T=k;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(w),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(T.data.response);break;default:clearTimeout(w),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Ra(){return window}function WC(s){Ra().location.href=s}function Cw(){return typeof Ra().WorkerGlobalScope<"u"&&typeof Ra().importScripts=="function"}async function GC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KC(){return navigator?.serviceWorker?.controller||null}function YC(){return Cw()?self:null}const Rw="firebaseLocalStorageDb",QC=1,Id="firebaseLocalStorage",Aw="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zd(s,e){return s.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function XC(){const s=indexedDB.deleteDatabase(Rw);return new Cu(s).toPromise()}function hg(){const s=indexedDB.open(Rw,QC);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Id,{keyPath:Aw})}catch(l){t(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Id)?e(i):(i.close(),await XC(),e(await hg()))})})}async function tx(s,e,t){const i=Zd(s,!0).put({[Aw]:e,value:t});return new Cu(i).toPromise()}async function JC(s,e){const t=Zd(s,!1).get(e),i=await new Cu(t).toPromise();return i===void 0?null:i.value}function nx(s,e){const t=Zd(s,!0).delete(e);return new Cu(t).toPromise()}const ZC=800,e4=3;class Iw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>e4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jd._getInstance(YC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await GC(),!this.activeServiceWorker)return;this.sender=new $C(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hg();return await tx(e,Ad,"1"),await nx(e,Ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>tx(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>JC(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Zd(l,!1).getAll();return new Cu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Iw.type="LOCAL";const t4=Iw;new Eu(3e4,6e4);function n4(s,e){return e?ai(e):(Dt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Jg extends Kg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function s4(s){return Tw(s.auth,new Jg(s),s.bypassAuthState)}function r4(s){const{auth:e,user:t}=s;return Dt(t,e,"internal-error"),MC(t,new Jg(s),s.bypassAuthState)}async function a4(s){const{auth:e,user:t}=s;return Dt(t,e,"internal-error"),IC(t,new Jg(s),s.bypassAuthState)}class Mw{constructor(e,t,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:l,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return s4;case"linkViaPopup":case"linkViaRedirect":return a4;case"reauthViaPopup":case"reauthViaRedirect":return r4;default:pa(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const i4=new Eu(2e3,1e4);class Bl extends Mw{constructor(e,t,i,l,u){super(e,t,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Bl.currentPopupAction&&Bl.currentPopupAction.cancel(),Bl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Dt(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=Xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ca(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ca(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ca(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,i4.get())};e()}}Bl.currentPopupAction=null;const o4="pendingRedirect",pd=new Map;class l4 extends Mw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=pd.get(this.auth._key());if(!e){try{const i=await c4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function c4(s,e){const t=d4(e),i=h4(s);if(!await i._isAvailable())return!1;const l=await i._get(t)==="true";return await i._remove(t),l}function u4(s,e){pd.set(s._key(),e)}function h4(s){return ai(s._redirectPersistence)}function d4(s){return md(o4,s.config.apiKey,s.name)}async function f4(s,e,t=!1){if(Br(s.app))return Promise.reject(oi(s));const i=fo(s),l=n4(i,e),h=await new l4(i,l,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const m4=600*1e3;class p4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Dw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ca(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=m4&&this.cachedEventUids.clear(),this.cachedEventUids.has(sx(e))}saveEventToCache(e){this.cachedEventUids.add(sx(e)),this.lastProcessedEventTime=Date.now()}}function sx(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Dw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function g4(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dw(s);default:return!1}}async function y4(s,e={}){return gi(s,"GET","/v1/projects",e)}const b4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v4=/^https?/;async function x4(s){if(s.config.emulator)return;const{authorizedDomains:e}=await y4(s);for(const t of e)try{if(w4(t))return}catch{}pa(s,"unauthorized-domain")}function w4(s){const e=lg(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!v4.test(t))return!1;if(b4.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const _4=new Eu(3e4,6e4);function rx(){const s=Ra().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function k4(s){return new Promise((e,t)=>{function i(){rx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rx(),t(Ca(s,"network-request-failed"))},timeout:_4.get()})}if(Ra().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ra().gapi?.load)i();else{const l=dC("iframefcb");return Ra()[l]=()=>{gapi.load?i():t(Ca(s,"network-request-failed"))},vw(`${hC()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw gd=null,e})}let gd=null;function T4(s){return gd=gd||k4(s),gd}const j4=new Eu(5e3,15e3),E4="__/auth/iframe",S4="emulator/auth/iframe",N4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R4(s){const e=s.config;Dt(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?$g(e,S4):`https://${s.config.authDomain}/${E4}`,i={apiKey:e.apiKey,appName:s.name,v:Xo},l=C4.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${ju(i).slice(1)}`}async function A4(s){const e=await T4(s),t=Ra().gapi;return Dt(t,s,"internal-error"),e.open({where:document.body,url:R4(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N4,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=Ca(s,"network-request-failed"),p=Ra().setTimeout(()=>{u(h)},j4.get());function g(){Ra().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(h)})}))}const I4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M4=500,D4=600,P4="_blank",L4="http://localhost";class ax{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O4(s,e,t,i=M4,l=D4){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...I4,width:i.toString(),height:l.toString(),top:u,left:h},y=lr().toLowerCase();t&&(p=dw(y)?P4:t),uw(y)&&(e=e||L4,g.scrollbars="yes");const w=Object.entries(g).reduce((T,[L,$])=>`${T}${L}=${$},`,"");if(nC(y)&&p!=="_self")return V4(e||"",p),new ax(null);const k=window.open(e||"",p,w);Dt(k,s,"popup-blocked");try{k.focus()}catch{}return new ax(k)}function V4(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const B4="__/auth/handler",U4="emulator/auth/handler",z4=encodeURIComponent("fac");async function ix(s,e,t,i,l,u){Dt(s.config.authDomain,s,"auth-domain-config-required"),Dt(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Xo,eventId:l};if(e instanceof _w){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",TS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,k]of Object.entries({}))h[w]=k}if(e instanceof Nu){const w=e.getScopes().filter(k=>k!=="");w.length>0&&(h.scopes=w.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const w of Object.keys(p))p[w]===void 0&&delete p[w];const g=await s._getAppCheckToken(),y=g?`#${z4}=${encodeURIComponent(g)}`:"";return`${F4(s)}?${ju(p).slice(1)}${y}`}function F4({config:s}){return s.emulator?$g(s,U4):`https://${s.authDomain}/${B4}`}const Cp="webStorageSupport";class q4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qg,this._completeRedirectFn=f4,this._overrideRedirectResult=u4}async _openPopup(e,t,i,l){di(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await ix(e,t,i,lg(),l);return O4(e,u,Xg())}async _openRedirect(e,t,i,l){await this._originValidation(e);const u=await ix(e,t,i,lg(),l);return WC(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:u}=this.eventManagers[t];return l?Promise.resolve(l):(di(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await A4(e),i=new p4(e);return t.register("authEvent",l=>(Dt(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cp,{type:Cp},l=>{const u=l?.[0]?.[Cp];u!==void 0&&t(!!u),pa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=x4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yw()||hw()||Gg()}}const H4=q4;var ox="@firebase/auth",lx="1.12.0";class $4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Dt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function W4(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G4(s){Ho(new ro("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Dt(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bw(s)},y=new lC(i,l,u,g);return bC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ho(new ro("auth-internal",e=>{const t=fo(e.getProvider("auth").getImmediate());return(i=>new $4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Na(ox,lx,W4(s)),Na(ox,lx,"esm2020")}const K4=300,Y4=Q2("authIdTokenMaxAge")||K4;let cx=null;const Q4=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Y4)return;const l=t?.token;cx!==l&&(cx=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Pw(s=qg()){const e=Qd(s,"auth");if(e.isInitialized())return e.getImmediate();const t=yC(s,{popupRedirectResolver:H4,persistence:[t4,ug,Qg]}),i=Q2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=Q4(u.toString());BC(t,h,()=>h(t.currentUser)),VC(t,p=>h(p))}}const l=G2("auth");return l&&vC(t,`http://${l}`),t}function X4(){return document.getElementsByTagName("head")?.[0]??document}cC({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=Ca("internal-error");u.customData=l,t(u)},i.type="text/javascript",i.charset="UTF-8",X4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G4("Browser");var ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var no,Lw;(function(){var s;function e(R,S){function I(){}I.prototype=S.prototype,R.F=S.prototype,R.prototype=new I,R.prototype.constructor=R,R.D=function(V,D,F){for(var M=Array(arguments.length-2),He=2;He<arguments.length;He++)M[He-2]=arguments[He];return S.prototype[D].apply(V,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(R,S,I){I||(I=0);const V=Array(16);if(typeof S=="string")for(var D=0;D<16;++D)V[D]=S.charCodeAt(I++)|S.charCodeAt(I++)<<8|S.charCodeAt(I++)<<16|S.charCodeAt(I++)<<24;else for(D=0;D<16;++D)V[D]=S[I++]|S[I++]<<8|S[I++]<<16|S[I++]<<24;S=R.g[0],I=R.g[1],D=R.g[2];let F=R.g[3],M;M=S+(F^I&(D^F))+V[0]+3614090360&4294967295,S=I+(M<<7&4294967295|M>>>25),M=F+(D^S&(I^D))+V[1]+3905402710&4294967295,F=S+(M<<12&4294967295|M>>>20),M=D+(I^F&(S^I))+V[2]+606105819&4294967295,D=F+(M<<17&4294967295|M>>>15),M=I+(S^D&(F^S))+V[3]+3250441966&4294967295,I=D+(M<<22&4294967295|M>>>10),M=S+(F^I&(D^F))+V[4]+4118548399&4294967295,S=I+(M<<7&4294967295|M>>>25),M=F+(D^S&(I^D))+V[5]+1200080426&4294967295,F=S+(M<<12&4294967295|M>>>20),M=D+(I^F&(S^I))+V[6]+2821735955&4294967295,D=F+(M<<17&4294967295|M>>>15),M=I+(S^D&(F^S))+V[7]+4249261313&4294967295,I=D+(M<<22&4294967295|M>>>10),M=S+(F^I&(D^F))+V[8]+1770035416&4294967295,S=I+(M<<7&4294967295|M>>>25),M=F+(D^S&(I^D))+V[9]+2336552879&4294967295,F=S+(M<<12&4294967295|M>>>20),M=D+(I^F&(S^I))+V[10]+4294925233&4294967295,D=F+(M<<17&4294967295|M>>>15),M=I+(S^D&(F^S))+V[11]+2304563134&4294967295,I=D+(M<<22&4294967295|M>>>10),M=S+(F^I&(D^F))+V[12]+1804603682&4294967295,S=I+(M<<7&4294967295|M>>>25),M=F+(D^S&(I^D))+V[13]+4254626195&4294967295,F=S+(M<<12&4294967295|M>>>20),M=D+(I^F&(S^I))+V[14]+2792965006&4294967295,D=F+(M<<17&4294967295|M>>>15),M=I+(S^D&(F^S))+V[15]+1236535329&4294967295,I=D+(M<<22&4294967295|M>>>10),M=S+(D^F&(I^D))+V[1]+4129170786&4294967295,S=I+(M<<5&4294967295|M>>>27),M=F+(I^D&(S^I))+V[6]+3225465664&4294967295,F=S+(M<<9&4294967295|M>>>23),M=D+(S^I&(F^S))+V[11]+643717713&4294967295,D=F+(M<<14&4294967295|M>>>18),M=I+(F^S&(D^F))+V[0]+3921069994&4294967295,I=D+(M<<20&4294967295|M>>>12),M=S+(D^F&(I^D))+V[5]+3593408605&4294967295,S=I+(M<<5&4294967295|M>>>27),M=F+(I^D&(S^I))+V[10]+38016083&4294967295,F=S+(M<<9&4294967295|M>>>23),M=D+(S^I&(F^S))+V[15]+3634488961&4294967295,D=F+(M<<14&4294967295|M>>>18),M=I+(F^S&(D^F))+V[4]+3889429448&4294967295,I=D+(M<<20&4294967295|M>>>12),M=S+(D^F&(I^D))+V[9]+568446438&4294967295,S=I+(M<<5&4294967295|M>>>27),M=F+(I^D&(S^I))+V[14]+3275163606&4294967295,F=S+(M<<9&4294967295|M>>>23),M=D+(S^I&(F^S))+V[3]+4107603335&4294967295,D=F+(M<<14&4294967295|M>>>18),M=I+(F^S&(D^F))+V[8]+1163531501&4294967295,I=D+(M<<20&4294967295|M>>>12),M=S+(D^F&(I^D))+V[13]+2850285829&4294967295,S=I+(M<<5&4294967295|M>>>27),M=F+(I^D&(S^I))+V[2]+4243563512&4294967295,F=S+(M<<9&4294967295|M>>>23),M=D+(S^I&(F^S))+V[7]+1735328473&4294967295,D=F+(M<<14&4294967295|M>>>18),M=I+(F^S&(D^F))+V[12]+2368359562&4294967295,I=D+(M<<20&4294967295|M>>>12),M=S+(I^D^F)+V[5]+4294588738&4294967295,S=I+(M<<4&4294967295|M>>>28),M=F+(S^I^D)+V[8]+2272392833&4294967295,F=S+(M<<11&4294967295|M>>>21),M=D+(F^S^I)+V[11]+1839030562&4294967295,D=F+(M<<16&4294967295|M>>>16),M=I+(D^F^S)+V[14]+4259657740&4294967295,I=D+(M<<23&4294967295|M>>>9),M=S+(I^D^F)+V[1]+2763975236&4294967295,S=I+(M<<4&4294967295|M>>>28),M=F+(S^I^D)+V[4]+1272893353&4294967295,F=S+(M<<11&4294967295|M>>>21),M=D+(F^S^I)+V[7]+4139469664&4294967295,D=F+(M<<16&4294967295|M>>>16),M=I+(D^F^S)+V[10]+3200236656&4294967295,I=D+(M<<23&4294967295|M>>>9),M=S+(I^D^F)+V[13]+681279174&4294967295,S=I+(M<<4&4294967295|M>>>28),M=F+(S^I^D)+V[0]+3936430074&4294967295,F=S+(M<<11&4294967295|M>>>21),M=D+(F^S^I)+V[3]+3572445317&4294967295,D=F+(M<<16&4294967295|M>>>16),M=I+(D^F^S)+V[6]+76029189&4294967295,I=D+(M<<23&4294967295|M>>>9),M=S+(I^D^F)+V[9]+3654602809&4294967295,S=I+(M<<4&4294967295|M>>>28),M=F+(S^I^D)+V[12]+3873151461&4294967295,F=S+(M<<11&4294967295|M>>>21),M=D+(F^S^I)+V[15]+530742520&4294967295,D=F+(M<<16&4294967295|M>>>16),M=I+(D^F^S)+V[2]+3299628645&4294967295,I=D+(M<<23&4294967295|M>>>9),M=S+(D^(I|~F))+V[0]+4096336452&4294967295,S=I+(M<<6&4294967295|M>>>26),M=F+(I^(S|~D))+V[7]+1126891415&4294967295,F=S+(M<<10&4294967295|M>>>22),M=D+(S^(F|~I))+V[14]+2878612391&4294967295,D=F+(M<<15&4294967295|M>>>17),M=I+(F^(D|~S))+V[5]+4237533241&4294967295,I=D+(M<<21&4294967295|M>>>11),M=S+(D^(I|~F))+V[12]+1700485571&4294967295,S=I+(M<<6&4294967295|M>>>26),M=F+(I^(S|~D))+V[3]+2399980690&4294967295,F=S+(M<<10&4294967295|M>>>22),M=D+(S^(F|~I))+V[10]+4293915773&4294967295,D=F+(M<<15&4294967295|M>>>17),M=I+(F^(D|~S))+V[1]+2240044497&4294967295,I=D+(M<<21&4294967295|M>>>11),M=S+(D^(I|~F))+V[8]+1873313359&4294967295,S=I+(M<<6&4294967295|M>>>26),M=F+(I^(S|~D))+V[15]+4264355552&4294967295,F=S+(M<<10&4294967295|M>>>22),M=D+(S^(F|~I))+V[6]+2734768916&4294967295,D=F+(M<<15&4294967295|M>>>17),M=I+(F^(D|~S))+V[13]+1309151649&4294967295,I=D+(M<<21&4294967295|M>>>11),M=S+(D^(I|~F))+V[4]+4149444226&4294967295,S=I+(M<<6&4294967295|M>>>26),M=F+(I^(S|~D))+V[11]+3174756917&4294967295,F=S+(M<<10&4294967295|M>>>22),M=D+(S^(F|~I))+V[2]+718787259&4294967295,D=F+(M<<15&4294967295|M>>>17),M=I+(F^(D|~S))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+F&4294967295}i.prototype.v=function(R,S){S===void 0&&(S=R.length);const I=S-this.blockSize,V=this.C;let D=this.h,F=0;for(;F<S;){if(D==0)for(;F<=I;)l(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<S;)if(V[D++]=R.charCodeAt(F++),D==this.blockSize){l(this,V),D=0;break}}else for(;F<S;)if(V[D++]=R[F++],D==this.blockSize){l(this,V),D=0;break}}this.h=D,this.o+=S},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;S=this.o*8;for(var I=R.length-8;I<R.length;++I)R[I]=S&255,S/=256;for(this.v(R),R=Array(16),S=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)R[S++]=this.g[I]>>>V&255;return R};function u(R,S){var I=p;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=S(R)}function h(R,S){this.h=S;const I=[];let V=!0;for(let D=R.length-1;D>=0;D--){const F=R[D]|0;V&&F==S||(I[D]=F,V=!1)}this.g=I}var p={};function g(R){return-128<=R&&R<128?u(R,function(S){return new h([S|0],S<0?-1:0)}):new h([R|0],R<0?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return k;if(R<0)return O(y(-R));const S=[];let I=1;for(let V=0;R>=I;V++)S[V]=R/I|0,I*=4294967296;return new h(S,0)}function w(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return O(w(R.substring(1),S));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(S,8));let V=k;for(let F=0;F<R.length;F+=8){var D=Math.min(8,R.length-F);const M=parseInt(R.substring(F,F+D),S);D<8?(D=y(Math.pow(S,D)),V=V.j(D).add(y(M))):(V=V.j(I),V=V.add(y(M)))}return V}var k=g(0),T=g(1),L=g(16777216);s=h.prototype,s.m=function(){if(U(this))return-O(this).m();let R=0,S=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);R+=(V>=0?V:4294967296+V)*S,S*=4294967296}return R},s.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if($(this))return"0";if(U(this))return"-"+O(this).toString(R);const S=y(Math.pow(R,6));var I=this;let V="";for(;;){const D=ve(I,S).g;I=se(I,D.j(S));let F=((I.g.length>0?I.g[0]:I.h)>>>0).toString(R);if(I=D,$(I))return F+V;for(;F.length<6;)F="0"+F;V=F+V}},s.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function $(R){if(R.h!=0)return!1;for(let S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function U(R){return R.h==-1}s.l=function(R){return R=se(this,R),U(R)?-1:$(R)?0:1};function O(R){const S=R.g.length,I=[];for(let V=0;V<S;V++)I[V]=~R.g[V];return new h(I,~R.h).add(T)}s.abs=function(){return U(this)?O(this):this},s.add=function(R){const S=Math.max(this.g.length,R.g.length),I=[];let V=0;for(let D=0;D<=S;D++){let F=V+(this.i(D)&65535)+(R.i(D)&65535),M=(F>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);V=M>>>16,F&=65535,M&=65535,I[D]=M<<16|F}return new h(I,I[I.length-1]&-2147483648?-1:0)};function se(R,S){return R.add(O(S))}s.j=function(R){if($(this)||$(R))return k;if(U(this))return U(R)?O(this).j(O(R)):O(O(this).j(R));if(U(R))return O(this.j(O(R)));if(this.l(L)<0&&R.l(L)<0)return y(this.m()*R.m());const S=this.g.length+R.g.length,I=[];for(var V=0;V<2*S;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let D=0;D<R.g.length;D++){const F=this.i(V)>>>16,M=this.i(V)&65535,He=R.i(D)>>>16,bt=R.i(D)&65535;I[2*V+2*D]+=M*bt,Q(I,2*V+2*D),I[2*V+2*D+1]+=F*bt,Q(I,2*V+2*D+1),I[2*V+2*D+1]+=M*He,Q(I,2*V+2*D+1),I[2*V+2*D+2]+=F*He,Q(I,2*V+2*D+2)}for(R=0;R<S;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=S;R<2*S;R++)I[R]=0;return new h(I,0)};function Q(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function oe(R,S){this.g=R,this.h=S}function ve(R,S){if($(S))throw Error("division by zero");if($(R))return new oe(k,k);if(U(R))return S=ve(O(R),S),new oe(O(S.g),O(S.h));if(U(S))return S=ve(R,O(S)),new oe(O(S.g),S.h);if(R.g.length>30){if(U(R)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var I=T,V=S;V.l(R)<=0;)I=Me(I),V=Me(V);var D=Ne(I,1),F=Ne(V,1);for(V=Ne(V,2),I=Ne(I,2);!$(V);){var M=F.add(V);M.l(R)<=0&&(D=D.add(I),F=M),V=Ne(V,1),I=Ne(I,1)}return S=se(R,D.j(S)),new oe(D,S)}for(D=k;R.l(S)>=0;){for(I=Math.max(1,Math.floor(R.m()/S.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),F=y(I),M=F.j(S);U(M)||M.l(R)>0;)I-=V,F=y(I),M=F.j(S);$(F)&&(F=T),D=D.add(F),R=se(R,M)}return new oe(D,R)}s.B=function(R){return ve(this,R).h},s.and=function(R){const S=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<S;V++)I[V]=this.i(V)&R.i(V);return new h(I,this.h&R.h)},s.or=function(R){const S=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<S;V++)I[V]=this.i(V)|R.i(V);return new h(I,this.h|R.h)},s.xor=function(R){const S=Math.max(this.g.length,R.g.length),I=[];for(let V=0;V<S;V++)I[V]=this.i(V)^R.i(V);return new h(I,this.h^R.h)};function Me(R){const S=R.g.length+1,I=[];for(let V=0;V<S;V++)I[V]=R.i(V)<<1|R.i(V-1)>>>31;return new h(I,R.h)}function Ne(R,S){const I=S>>5;S%=32;const V=R.g.length-I,D=[];for(let F=0;F<V;F++)D[F]=S>0?R.i(F+I)>>>S|R.i(F+I+1)<<32-S:R.i(F+I);return new h(D,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Lw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,no=h}).apply(typeof ux<"u"?ux:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ow,Xc,Vw,yd,dg,Bw,Uw,zw;(function(){var s,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var b=0;b<d.length;++b){var _=d[b];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function l(d,b){if(b)e:{var _=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var ne=d[C];if(!(ne in _))break e;_=_[ne]}d=d[d.length-1],C=_[d],b=b(C),b!=C&&b!=null&&e(_,d,{configurable:!0,writable:!0,value:b})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(b){var _=[],C;for(C in b)Object.prototype.hasOwnProperty.call(b,C)&&_.push([C,b[C]]);return _}});var u=u||{},h=this||self;function p(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function g(d,b,_){return d.call.apply(d.bind,arguments)}function y(d,b,_){return y=g,y.apply(null,arguments)}function w(d,b){var _=Array.prototype.slice.call(arguments,1);return function(){var C=_.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function k(d,b){function _(){}_.prototype=b.prototype,d.Z=b.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(C,ne,ue){for(var Ye=Array(arguments.length-2),Jt=2;Jt<arguments.length;Jt++)Ye[Jt-2]=arguments[Jt];return b.prototype[ne].apply(C,Ye)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function L(d){const b=d.length;if(b>0){const _=Array(b);for(let C=0;C<b;C++)_[C]=d[C];return _}return[]}function $(d,b){for(let C=1;C<arguments.length;C++){const ne=arguments[C];var _=typeof ne;if(_=_!="object"?_:ne?Array.isArray(ne)?"array":_:"null",_=="array"||_=="object"&&typeof ne.length=="number"){_=d.length||0;const ue=ne.length||0;d.length=_+ue;for(let Ye=0;Ye<ue;Ye++)d[_+Ye]=ne[Ye]}else d.push(ne)}}class U{constructor(b,_){this.i=b,this.j=_,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function O(d){h.setTimeout(()=>{throw d},0)}function se(){var d=R;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class Q{constructor(){this.h=this.g=null}add(b,_){const C=oe.get();C.set(b,_),this.h?this.h.next=C:this.g=C,this.h=C}}var oe=new U(()=>new ve,d=>d.reset());class ve{constructor(){this.next=this.g=this.h=null}set(b,_){this.h=b,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Me,Ne=!1,R=new Q,S=()=>{const d=Promise.resolve(void 0);Me=()=>{d.then(I)}};function I(){for(var d;d=se();){try{d.h.call(d.g)}catch(_){O(_)}var b=oe;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}Ne=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};h.addEventListener("test",_,b),h.removeEventListener("test",_,b)}catch{}return d})();function M(d){return/^[\s\xa0]*$/.test(d)}function He(d,b){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}k(He,D),He.prototype.init=function(d,b){const _=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(_=="mouseover"?b=d.fromElement:_=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var bt="closure_listenable_"+(Math.random()*1e6|0),q=0;function me(d,b,_,C,ne){this.listener=d,this.proxy=null,this.src=b,this.type=_,this.capture=!!C,this.ha=ne,this.key=++q,this.da=this.fa=!1}function Pe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function We(d,b,_){for(const C in d)b.call(_,d[C],C,d)}function Z(d,b){for(const _ in d)b.call(void 0,d[_],_,d)}function P(d){const b={};for(const _ in d)b[_]=d[_];return b}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xe(d,b){let _,C;for(let ne=1;ne<arguments.length;ne++){C=arguments[ne];for(_ in C)d[_]=C[_];for(let ue=0;ue<G.length;ue++)_=G[ue],Object.prototype.hasOwnProperty.call(C,_)&&(d[_]=C[_])}}function Ee(d){this.src=d,this.g={},this.h=0}Ee.prototype.add=function(d,b,_,C,ne){const ue=d.toString();d=this.g[ue],d||(d=this.g[ue]=[],this.h++);const Ye=Ae(d,b,C,ne);return Ye>-1?(b=d[Ye],_||(b.fa=!1)):(b=new me(b,this.src,ue,!!C,ne),b.fa=_,d.push(b)),b};function $e(d,b){const _=b.type;if(_ in d.g){var C=d.g[_],ne=Array.prototype.indexOf.call(C,b,void 0),ue;(ue=ne>=0)&&Array.prototype.splice.call(C,ne,1),ue&&(Pe(b),d.g[_].length==0&&(delete d.g[_],d.h--))}}function Ae(d,b,_,C){for(let ne=0;ne<d.length;++ne){const ue=d[ne];if(!ue.da&&ue.listener==b&&ue.capture==!!_&&ue.ha==C)return ne}return-1}var at="closure_lm_"+(Math.random()*1e6|0),ht={};function Je(d,b,_,C,ne){if(Array.isArray(b)){for(let ue=0;ue<b.length;ue++)Je(d,b[ue],_,C,ne);return null}return _=jt(_),d&&d[bt]?d.J(b,_,p(C)?!!C.capture:!1,ne):Ot(d,b,_,!1,C,ne)}function Ot(d,b,_,C,ne,ue){if(!b)throw Error("Invalid event type");const Ye=p(ne)?!!ne.capture:!!ne;let Jt=tn(d);if(Jt||(d[at]=Jt=new Ee(d)),_=Jt.add(b,_,C,Ye,ue),_.proxy)return _;if(C=Cn(),_.proxy=C,C.src=d,C.listener=_,d.addEventListener)F||(ne=Ye),ne===void 0&&(ne=!1),d.addEventListener(b.toString(),C,ne);else if(d.attachEvent)d.attachEvent(he(b.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Cn(){function d(_){return b.call(d.src,d.listener,_)}const b=en;return d}function It(d,b,_,C,ne){if(Array.isArray(b))for(var ue=0;ue<b.length;ue++)It(d,b[ue],_,C,ne);else C=p(C)?!!C.capture:!!C,_=jt(_),d&&d[bt]?(d=d.i,ue=String(b).toString(),ue in d.g&&(b=d.g[ue],_=Ae(b,_,C,ne),_>-1&&(Pe(b[_]),Array.prototype.splice.call(b,_,1),b.length==0&&(delete d.g[ue],d.h--)))):d&&(d=tn(d))&&(b=d.g[b.toString()],d=-1,b&&(d=Ae(b,_,C,ne)),(_=d>-1?b[d]:null)&&vt(_))}function vt(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[bt])$e(b.i,d);else{var _=d.type,C=d.proxy;b.removeEventListener?b.removeEventListener(_,C,d.capture):b.detachEvent?b.detachEvent(he(_),C):b.addListener&&b.removeListener&&b.removeListener(C),(_=tn(b))?($e(_,d),_.h==0&&(_.src=null,b[at]=null)):Pe(d)}}}function he(d){return d in ht?ht[d]:ht[d]="on"+d}function en(d,b){if(d.da)d=!0;else{b=new He(b,this);const _=d.listener,C=d.ha||d.src;d.fa&&vt(d),d=_.call(C,b)}return d}function tn(d){return d=d[at],d instanceof Ee?d:null}var dt="__closure_events_fn_"+(Math.random()*1e9>>>0);function jt(d){return typeof d=="function"?d:(d[dt]||(d[dt]=function(b){return d.handleEvent(b)}),d[dt])}function ct(){V.call(this),this.i=new Ee(this),this.M=this,this.G=null}k(ct,V),ct.prototype[bt]=!0,ct.prototype.removeEventListener=function(d,b,_,C){It(this,d,b,_,C)};function nt(d,b){var _,C=d.G;if(C)for(_=[];C;C=C.G)_.push(C);if(d=d.M,C=b.type||b,typeof b=="string")b=new D(b,d);else if(b instanceof D)b.target=b.target||d;else{var ne=b;b=new D(C,d),xe(b,ne)}ne=!0;let ue,Ye;if(_)for(Ye=_.length-1;Ye>=0;Ye--)ue=b.g=_[Ye],ne=nn(ue,C,!0,b)&&ne;if(ue=b.g=d,ne=nn(ue,C,!0,b)&&ne,ne=nn(ue,C,!1,b)&&ne,_)for(Ye=0;Ye<_.length;Ye++)ue=b.g=_[Ye],ne=nn(ue,C,!1,b)&&ne}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const _=d.g[b];for(let C=0;C<_.length;C++)Pe(_[C]);delete d.g[b],d.h--}}this.G=null},ct.prototype.J=function(d,b,_,C){return this.i.add(String(d),b,!1,_,C)},ct.prototype.K=function(d,b,_,C){return this.i.add(String(d),b,!0,_,C)};function nn(d,b,_,C){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let ne=!0;for(let ue=0;ue<b.length;++ue){const Ye=b[ue];if(Ye&&!Ye.da&&Ye.capture==_){const Jt=Ye.listener,ws=Ye.ha||Ye.src;Ye.fa&&$e(d.i,Ye),ne=Jt.call(ws,C)!==!1&&ne}}return ne&&!C.defaultPrevented}function ds(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:h.setTimeout(d,b||0)}function Et(d){d.g=ds(()=>{d.g=null,d.i&&(d.i=!1,Et(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class rn extends V{constructor(b,_){super(),this.m=b,this.l=_,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(d){V.call(this),this.h=d,this.g={}}k(Yn,V);var Wt=[];function Ft(d){We(d.g,function(b,_){this.g.hasOwnProperty(_)&&vt(b)},d),d.g={}}Yn.prototype.N=function(){Yn.Z.N.call(this),Ft(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=h.JSON.stringify,mn=h.JSON.parse,pe=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function Re(){}function Oe(){}var Qe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ve(){D.call(this,"d")}k(Ve,D);function De(){D.call(this,"c")}k(De,D);var Ue={},wt=null;function ft(){return wt=wt||new ct}Ue.Ia="serverreachability";function Mt(d){D.call(this,Ue.Ia,d)}k(Mt,D);function Ut(d){const b=ft();nt(b,new Mt(b))}Ue.STAT_EVENT="statevent";function J(d,b){D.call(this,Ue.STAT_EVENT,d),this.stat=b}k(J,D);function ge(d){const b=ft();nt(b,new J(b,d))}Ue.Ja="timingevent";function rt(d,b){D.call(this,Ue.Ja,d),this.size=b}k(rt,D);function St(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},b)}function Nt(){this.g=!0}Nt.prototype.ua=function(){this.g=!1};function Yt(d,b,_,C,ne,ue){d.info(function(){if(d.g)if(ue){var Ye="",Jt=ue.split("&");for(let Dn=0;Dn<Jt.length;Dn++){var ws=Jt[Dn].split("=");if(ws.length>1){const os=ws[0];ws=ws[1];const $r=os.split("_");Ye=$r.length>=2&&$r[1]=="type"?Ye+(os+"="+ws+"&"):Ye+(os+"=redacted&")}}}else Ye=null;else Ye=ue;return"XMLHTTP REQ ("+C+") [attempt "+ne+"]: "+b+`
`+_+`
`+Ye})}function Qt(d,b,_,C,ne,ue,Ye){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+ne+"]: "+b+`
`+_+`
`+ue+" "+Ye})}function Vt(d,b,_,C){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+es(d,_)+(C?" "+C:"")})}function Ln(d,b){d.info(function(){return"TIMEOUT: "+b})}Nt.prototype.info=function(){};function es(d,b){if(!d.g)return b;if(!b)return null;try{const ue=JSON.parse(b);if(ue){for(d=0;d<ue.length;d++)if(Array.isArray(ue[d])){var _=ue[d];if(!(_.length<2)){var C=_[1];if(Array.isArray(C)&&!(C.length<1)){var ne=C[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(let Ye=1;Ye<C.length;Ye++)C[Ye]=""}}}}return an(ue)}catch{return b}}var hn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Sn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mn;function z(){}k(z,Re),z.prototype.g=function(){return new XMLHttpRequest},Mn=new z;function ye(d){return encodeURIComponent(String(d))}function _e(d){var b=1;d=d.split(":");const _=[];for(;b>0&&d.length;)_.push(d.shift()),b--;return d.length&&_.push(d.join(":")),_}function ke(d,b,_,C){this.j=d,this.i=b,this.l=_,this.S=C||1,this.V=new Yn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}var tt={},Ct={};function it(d,b,_){d.M=1,d.A=Be(On(b)),d.u=_,d.R=!0,_t(d,null)}function _t(d,b){d.F=Date.now(),Ls(d),d.B=On(d.A);var _=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),us(_.i,"t",C),d.C=0,_=d.j.L,d.h=new de,d.g=qu(d.j,_?b:null,!d.u),d.P>0&&(d.O=new rn(y(d.Y,d,d.g),d.P)),b=d.V,_=d.g,C=d.ba;var ne="readystatechange";Array.isArray(ne)||(ne&&(Wt[0]=ne.toString()),ne=Wt);for(let ue=0;ue<ne.length;ue++){const Ye=Je(_,ne[ue],C||b.handleEvent,!1,b.h||b);if(!Ye)break;b.g[Ye.key]=Ye}b=d.J?P(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),Ut(),Yt(d.i,d.v,d.B,d.l,d.S,d.u)}ke.prototype.ba=function(d){d=d.target;const b=this.O;b&&is(d)==3?b.j():this.Y(d)},ke.prototype.Y=function(d){try{if(d==this.g)e:{const Jt=is(this.g),ws=this.g.ya(),Dn=this.g.ca();if(!(Jt<3)&&(Jt!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||Jt!=4||ws==7||(ws==8||Dn<=0?Ut(3):Ut(2)),$n(this);var b=this.g.ca();this.X=b;var _=xt(this);if(this.o=b==200,Qt(this.i,this.v,this.B,this.l,this.S,Jt,b),this.o){if(this.U&&!this.L){t:{if(this.g){var C,ne=this.g;if((C=ne.g?ne.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(C)){var ue=C;break t}}ue=null}if(d=ue)Vt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,j(this,d);else{this.o=!1,this.m=3,ge(12),ce(this),H(this);break e}}if(this.R){d=!0;let os;for(;!this.K&&this.C<_.length;)if(os=sr(this,_),os==Ct){Jt==4&&(this.m=4,ge(14),d=!1),Vt(this.i,this.l,null,"[Incomplete Response]");break}else if(os==tt){this.m=4,ge(15),Vt(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Vt(this.i,this.l,os,null),j(this,os);if(on(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||_.length!=0||this.h.h||(this.m=1,ge(16),d=!1),this.o=this.o&&d,!d)Vt(this.i,this.l,_,"[Invalid Chunked Response]"),ce(this),H(this);else if(_.length>0&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.aa&&!Ye.P&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),bi(Ye),Ye.P=!0,ge(11))}}else Vt(this.i,this.l,_,null),j(this,_);Jt==4&&ce(this),this.o&&!this.K&&(Jt==4?Ua(this.j,this):(this.o=!1,Ls(this)))}else zn(this.g),b==400&&_.indexOf("Unknown SID")>0?(this.m=3,ge(12)):(this.m=0,ge(13)),ce(this),H(this)}}}catch{}};function xt(d){if(!on(d))return d.g.la();const b=cn(d.g);if(b==="")return"";let _="";const C=b.length,ne=is(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ce(d),H(d),"";d.h.i=new h.TextDecoder}for(let ue=0;ue<C;ue++)d.h.h=!0,_+=d.h.i.decode(b[ue],{stream:!(ne&&ue==C-1)});return b.length=0,d.h.g+=_,d.C=0,d.h.g}function on(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function sr(d,b){var _=d.C,C=b.indexOf(`
`,_);return C==-1?Ct:(_=Number(b.substring(_,C)),isNaN(_)?tt:(C+=1,C+_>b.length?Ct:(b=b.slice(C,C+_),d.C=C+_,b)))}ke.prototype.cancel=function(){this.K=!0,ce(this)};function Ls(d){d.T=Date.now()+d.H,zs(d,d.H)}function zs(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=St(y(d.aa,d),b)}function $n(d){d.D&&(h.clearTimeout(d.D),d.D=null)}ke.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ln(this.i,this.B),this.M!=2&&(Ut(),ge(17)),ce(this),this.m=2,H(this)):zs(this,this.T-d)};function H(d){d.j.I==0||d.K||Ua(d.j,d)}function ce(d){$n(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,Ft(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function j(d,b){try{var _=d.j;if(_.I!=0&&(_.g==d||qe(_.h,d))){if(!d.L&&qe(_.h,d)&&_.I==3){try{var C=_.Ba.g.parse(b)}catch{C=null}if(Array.isArray(C)&&C.length==3){var ne=C;if(ne[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)vi(_),Gs(_);else break e;_r(_),ge(18)}}else _.xa=ne[1],0<_.xa-_.K&&ne[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=St(y(_.Va,_),6e3));Ke(_.h)<=1&&_.ta&&(_.ta=void 0)}else Ks(_,11)}else if((d.L||_.g==d)&&vi(_),!M(b))for(ne=_.Ba.g.parse(b),b=0;b<ne.length;b++){let Dn=ne[b];const os=Dn[0];if(!(os<=_.K))if(_.K=os,Dn=Dn[1],_.I==2)if(Dn[0]=="c"){_.M=Dn[1],_.ba=Dn[2];const $r=Dn[3];$r!=null&&(_.ka=$r,_.j.info("VER="+_.ka));const xa=Dn[4];xa!=null&&(_.za=xa,_.j.info("SVER="+_.za));const aa=Dn[5];aa!=null&&typeof aa=="number"&&aa>0&&(C=1.5*aa,_.O=C,_.j.info("backChannelRequestTimeoutMs_="+C)),C=_;const ia=d.g;if(ia){const go=ia.g?ia.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(go){var ue=C.h;ue.g||go.indexOf("spdy")==-1&&go.indexOf("quic")==-1&&go.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(ze(ue,ue.h),ue.h=null))}if(C.G){const tl=ia.g?ia.g.getResponseHeader("X-HTTP-Session-Id"):null;tl&&(C.wa=tl,te(C.J,C.G,tl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),C=_;var Ye=d;if(C.na=Fu(C,C.L?C.ba:null,C.W),Ye.L){Lt(C.h,Ye);var Jt=Ye,ws=C.O;ws&&(Jt.H=ws),Jt.D&&($n(Jt),Ls(Jt)),C.g=Ye}else Hr(C);_.i.length>0&&ms(_)}else Dn[0]!="stop"&&Dn[0]!="close"||Ks(_,7);else _.I==3&&(Dn[0]=="stop"||Dn[0]=="close"?Dn[0]=="stop"?Ks(_,7):Vs(_):Dn[0]!="noop"&&_.l&&_.l.qa(Dn),_.A=0)}}Ut(4)}catch{}}var N=class{constructor(d,b){this.g=d,this.map=b}};function K(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function re(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ke(d){return d.h?1:d.g?d.g.size:0}function qe(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function ze(d,b){d.g?d.g.add(b):d.h=b}function Lt(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}K.prototype.cancel=function(){if(this.i=At(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function At(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const _ of d.g.values())b=b.concat(_.G);return b}return L(d.i)}var Un=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fs(d,b){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const C=d[_].indexOf("=");let ne,ue=null;C>=0?(ne=d[_].substring(0,C),ue=d[_].substring(C+1)):ne=d[_],b(ne,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function js(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof js?(this.l=d.l,Vn(this,d.j),this.o=d.o,this.g=d.g,Y(this,d.u),this.h=d.h,we(this,cr(d.i)),this.m=d.m):d&&(b=String(d).match(Un))?(this.l=!1,Vn(this,b[1]||"",!0),this.o=Fe(b[2]||""),this.g=Fe(b[3]||"",!0),Y(this,b[4]),this.h=Fe(b[5]||"",!0),we(this,b[6]||"",!0),this.m=Fe(b[7]||"")):(this.l=!1,this.i=new Es(null,this.l))}js.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(ot(b,qt,!0),":");var _=this.g;return(_||b=="file")&&(d.push("//"),(b=this.o)&&d.push(ot(b,qt,!0),"@"),d.push(ye(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(ot(_,_.charAt(0)=="/"?xs:_n,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",ot(_,qs)),d.join("")},js.prototype.resolve=function(d){const b=On(this);let _=!!d.j;_?Vn(b,d.j):_=!!d.o,_?b.o=d.o:_=!!d.g,_?b.g=d.g:_=d.u!=null;var C=d.h;if(_)Y(b,d.u);else if(_=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var ne=b.h.lastIndexOf("/");ne!=-1&&(C=b.h.slice(0,ne+1)+C)}if(ne=C,ne==".."||ne==".")C="";else if(ne.indexOf("./")!=-1||ne.indexOf("/.")!=-1){C=ne.lastIndexOf("/",0)==0,ne=ne.split("/");const ue=[];for(let Ye=0;Ye<ne.length;){const Jt=ne[Ye++];Jt=="."?C&&Ye==ne.length&&ue.push(""):Jt==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),C&&Ye==ne.length&&ue.push("")):(ue.push(Jt),C=!0)}C=ue.join("/")}else C=ne}return _?b.h=C:_=d.i.toString()!=="",_?we(b,cr(d.i)):_=!!d.m,_&&(b.m=d.m),b};function On(d){return new js(d)}function Vn(d,b,_){d.j=_?Fe(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function Y(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function we(d,b,_){b instanceof Es?(d.i=b,xr(d.i,d.l)):(_||(b=ot(b,ln)),d.i=new Es(b,d.l))}function te(d,b,_){d.i.set(b,_)}function Be(d){return te(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Fe(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ot(d,b,_){return typeof d=="string"?(d=encodeURI(d).replace(b,mt),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function mt(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var qt=/[#\/\?@]/g,_n=/[#\?:]/g,xs=/[#\?]/g,ln=/[#\?@]/g,qs=/#/g;function Es(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function fs(d){d.g||(d.g=new Map,d.h=0,d.i&&Fs(d.i,function(b,_){d.add(decodeURIComponent(b.replace(/\+/g," ")),_)}))}s=Es.prototype,s.add=function(d,b){fs(this),this.i=null,d=Os(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(b),this.h+=1,this};function Ba(d,b){fs(d),b=Os(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function sa(d,b){return fs(d),b=Os(d,b),d.g.has(b)}s.forEach=function(d,b){fs(this),this.g.forEach(function(_,C){_.forEach(function(ne){d.call(b,ne,C,this)},this)},this)};function pn(d,b){fs(d);let _=[];if(typeof b=="string")sa(d,b)&&(_=_.concat(d.g.get(Os(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)_=_.concat(d[b]);return _}s.set=function(d,b){return fs(this),this.i=null,d=Os(this,d),sa(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},s.get=function(d,b){return d?(d=pn(this,d),d.length>0?String(d[0]):b):b};function us(d,b,_){Ba(d,b),_.length>0&&(d.i=null,d.g.set(Os(d,b),L(_)),d.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let C=0;C<b.length;C++){var _=b[C];const ne=ye(_);_=pn(this,_);for(let ue=0;ue<_.length;ue++){let Ye=ne;_[ue]!==""&&(Ye+="="+ye(_[ue])),d.push(Ye)}}return this.i=d.join("&")};function cr(d){const b=new Es;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function Os(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function xr(d,b){b&&!d.j&&(fs(d),d.i=null,d.g.forEach(function(_,C){const ne=C.toLowerCase();C!=ne&&(Ba(this,C),us(this,ne,_))},d)),d.j=b}function ts(d,b){const _=new Nt;if(h.Image){const C=new Image;C.onload=w(Ss,_,"TestLoadImage: loaded",!0,b,C),C.onerror=w(Ss,_,"TestLoadImage: error",!1,b,C),C.onabort=w(Ss,_,"TestLoadImage: abort",!1,b,C),C.ontimeout=w(Ss,_,"TestLoadImage: timeout",!1,b,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else b(!1)}function Ws(d,b){const _=new Nt,C=new AbortController,ne=setTimeout(()=>{C.abort(),Ss(_,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:C.signal}).then(ue=>{clearTimeout(ne),ue.ok?Ss(_,"TestPingServer: ok",!0,b):Ss(_,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(ne),Ss(_,"TestPingServer: error",!1,b)})}function Ss(d,b,_,C,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),C(_)}catch{}}function Rr(){this.g=new pe}function wr(d){this.i=d.Sb||null,this.h=d.ab||!1}k(wr,Re),wr.prototype.g=function(){return new Ar(this.i,this.h)};function Ar(d,b){ct.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(Ar,ct),s=Ar.prototype,s.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,Le(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||h).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ee(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Le(this)),this.g&&(this.readyState=3,Le(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;A(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function A(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?ee(this):Le(this),this.readyState==3&&A(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,ee(this))},s.Na=function(d){this.g&&(this.response=d,ee(this))},s.ga=function(){this.g&&ee(this)};function ee(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Le(d)}s.setRequestHeader=function(d,b){this.A.append(d,b)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var _=b.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=b.next();return d.join(`\r
`)};function Le(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Xe(d){let b="";return We(d,function(_,C){b+=C,b+=":",b+=_,b+=`\r
`}),b}function gt(d,b,_){e:{for(C in _){var C=!1;break e}C=!0}C||(_=Xe(_),typeof d=="string"?_!=null&&ye(_):te(d,b,_))}function st(d){ct.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(st,ct);var Ze=/^https?$/i,Ht=["POST","PUT"];s=st.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,b,_,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mn.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(ue){zt(this,ue);return}if(d=_||"",_=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var ne in C)_.set(ne,C[ne]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ue of C.keys())_.set(ue,C.get(ue));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(_.keys()).find(ue=>ue.toLowerCase()=="content-type"),ne=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Ht,b,void 0)>=0)||C||ne||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Ye]of _)this.g.setRequestHeader(ue,Ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ue){zt(this,ue)}};function zt(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,gn(d),Xt(d)}function gn(d){d.A||(d.A=!0,nt(d,"complete"),nt(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,nt(this,"complete"),nt(this,"abort"),Xt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xt(this,!0)),st.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?kn(this):this.Xa())},s.Xa=function(){kn(this)};function kn(d){if(d.h&&typeof u<"u"){if(d.v&&is(d)==4)setTimeout(d.Ca.bind(d),0);else if(nt(d,"readystatechange"),is(d)==4){d.h=!1;try{const ue=d.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var _;if(!(_=b)){var C;if(C=ue===0){let Ye=String(d.D).match(Un)[1]||null;!Ye&&h.self&&h.self.location&&(Ye=h.self.location.protocol.slice(0,-1)),C=!Ze.test(Ye?Ye.toLowerCase():"")}_=C}if(_)nt(d,"complete"),nt(d,"success");else{d.o=6;try{var ne=is(d)>2?d.g.statusText:""}catch{ne=""}d.l=ne+" ["+d.ca()+"]",gn(d)}}finally{Xt(d)}}}}function Xt(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,b||nt(d,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function is(d){return d.g?d.g.readyState:0}s.ca=function(){try{return is(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),mn(b)}};function cn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function zn(d){const b={};d=(d.g&&is(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(M(d[C]))continue;var _=_e(d[C]);const ne=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ue=b[ne]||[];b[ne]=ue,ue.push(_)}Z(b,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qn(d,b,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||b}function Xn(d){this.za=0,this.i=[],this.j=new Nt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qn("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qn("baseRetryDelayMs",5e3,d),this.Za=Qn("retryDelaySeedMs",1e4,d),this.Ta=Qn("forwardChannelMaxRetries",2,d),this.va=Qn("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new K(d&&d.concurrentRequestLimit),this.Ba=new Rr,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Xn.prototype,s.ka=8,s.I=1,s.connect=function(d,b,_,C){ge(0),this.W=d,this.H=b||{},_&&C!==void 0&&(this.H.OSID=_,this.H.OAID=C),this.F=this.X,this.J=Fu(this,null,this.W),ms(this)};function Vs(d){if(ur(d),d.I==3){var b=d.V++,_=On(d.J);if(te(_,"SID",d.M),te(_,"RID",b),te(_,"TYPE","terminate"),Ns(d,_),b=new ke(d,d.j,b),b.M=2,b.A=Be(On(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(b.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=b.A,_=!0),_||(b.g=qu(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ls(b)}zu(d)}function Gs(d){d.g&&(bi(d),d.g.cancel(),d.g=null)}function ur(d){Gs(d),d.v&&(h.clearTimeout(d.v),d.v=null),vi(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function ms(d){if(!re(d.h)&&!d.m){d.m=!0;var b=d.Ea;Me||S(),Ne||(Me(),Ne=!0),R.add(b,d),d.D=0}}function qr(d,b){return Ke(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=St(y(d.Ea,d,b),ra(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const ne=new ke(this,this.j,d);let ue=this.o;if(this.U&&(ue?(ue=P(ue),xe(ue,this.U)):ue=this.U),this.u!==null||this.R||(ne.J=ue,ue=null),this.S)e:{for(var b=0,_=0;_<this.i.length;_++){t:{var C=this.i[_];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(b+=C,b>4096){b=_;break e}if(b===4096||_===this.i.length-1){b=_+1;break e}}b=1e3}else b=1e3;b=hr(this,ne,b),_=On(this.J),te(_,"RID",d),te(_,"CVER",22),this.G&&te(_,"X-HTTP-Session-Id",this.G),Ns(this,_),ue&&(this.R?b="headers="+ye(Xe(ue))+"&"+b:this.u&&gt(_,this.u,ue)),ze(this.h,ne),this.Ra&&te(_,"TYPE","init"),this.S?(te(_,"$req",b),te(_,"SID","null"),ne.U=!0,it(ne,_,null)):it(ne,_,b),this.I=2}}else this.I==3&&(d?va(this,d):this.i.length==0||re(this.h)||va(this))};function va(d,b){var _;b?_=b.l:_=d.V++;const C=On(d.J);te(C,"SID",d.M),te(C,"RID",_),te(C,"AID",d.K),Ns(d,C),d.u&&d.o&&gt(C,d.u,d.o),_=new ke(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),b&&(d.i=b.G.concat(d.i)),b=hr(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),ze(d.h,_),it(_,C,b)}function Ns(d,b){d.H&&We(d.H,function(_,C){te(b,C,_)}),d.l&&We({},function(_,C){te(b,C,_)})}function hr(d,b,_){_=Math.min(d.i.length,_);const C=d.l?y(d.l.Ka,d.l,d):null;e:{var ne=d.i;let Jt=-1;for(;;){const ws=["count="+_];Jt==-1?_>0?(Jt=ne[0].g,ws.push("ofs="+Jt)):Jt=0:ws.push("ofs="+Jt);let Dn=!0;for(let os=0;os<_;os++){var ue=ne[os].g;const $r=ne[os].map;if(ue-=Jt,ue<0)Jt=Math.max(0,ne[os].g-100),Dn=!1;else try{ue="req"+ue+"_"||"";try{var Ye=$r instanceof Map?$r:Object.entries($r);for(const[xa,aa]of Ye){let ia=aa;p(aa)&&(ia=an(aa)),ws.push(ue+xa+"="+encodeURIComponent(ia))}}catch(xa){throw ws.push(ue+"type="+encodeURIComponent("_badmap")),xa}}catch{C&&C($r)}}if(Dn){Ye=ws.join("&");break e}}Ye=void 0}return d=d.i.splice(0,_),b.G=d,Ye}function Hr(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;Me||S(),Ne||(Me(),Ne=!0),R.add(b,d),d.A=0}}function _r(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=St(y(d.Da,d),ra(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,el(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=St(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ge(10),Gs(this),el(this))};function bi(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function el(d){d.g=new ke(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=On(d.na);te(b,"RID","rpc"),te(b,"SID",d.M),te(b,"AID",d.K),te(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&te(b,"TO",d.ia),te(b,"TYPE","xmlhttp"),Ns(d,b),d.u&&d.o&&gt(b,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=Be(On(b)),_.u=null,_.R=!0,_t(_,d)}s.Va=function(){this.C!=null&&(this.C=null,Gs(this),_r(this),ge(19))};function vi(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Ua(d,b){var _=null;if(d.g==b){vi(d),bi(d),d.g=null;var C=2}else if(qe(d.h,b))_=b.G,Lt(d.h,b),C=1;else return;if(d.I!=0){if(b.o)if(C==1){_=b.u?b.u.length:0,b=Date.now()-b.F;var ne=d.D;C=ft(),nt(C,new rt(C,_)),ms(d)}else Hr(d);else if(ne=b.m,ne==3||ne==0&&b.X>0||!(C==1&&qr(d,b)||C==2&&_r(d)))switch(_&&_.length>0&&(b=d.h,b.i=b.i.concat(_)),ne){case 1:Ks(d,5);break;case 4:Ks(d,10);break;case 3:Ks(d,6);break;default:Ks(d,2)}}}function ra(d,b){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*b}function Ks(d,b){if(d.j.info("Error code "+b),b==2){var _=y(d.bb,d),C=d.Ua;const ne=!C;C=new js(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Vn(C,"https"),Be(C),ne?ts(C.toString(),_):Ws(C.toString(),_)}else ge(2);d.I=0,d.l&&d.l.pa(b),zu(d),ur(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function zu(d){if(d.I=0,d.ja=[],d.l){const b=At(d.h);(b.length!=0||d.i.length!=0)&&($(d.ja,b),$(d.ja,d.i),d.h.i.length=0,L(d.i),d.i.length=0),d.l.oa()}}function Fu(d,b,_){var C=_ instanceof js?On(_):new js(_);if(C.g!="")b&&(C.g=b+"."+C.g),Y(C,C.u);else{var ne=h.location;C=ne.protocol,b=b?b+"."+ne.hostname:ne.hostname,ne=+ne.port;const ue=new js(null);C&&Vn(ue,C),b&&(ue.g=b),ne&&Y(ue,ne),_&&(ue.h=_),C=ue}return _=d.G,b=d.wa,_&&b&&te(C,_,b),te(C,"VER",d.ka),Ns(d,C),C}function qu(d,b,_){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new st(new wr({ab:_})):new st(d.ma),b.Fa(d.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}s=Hu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function xi(){}xi.prototype.g=function(d,b){return new dr(d,b)};function dr(d,b){ct.call(this),this.g=new Xn(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!M(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!M(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new za(this)}k(dr,ct),dr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dr.prototype.close=function(){Vs(this.g)},dr.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=an(d),d=_);b.i.push(new N(b.Ya++,d)),b.I==3&&ms(b)},dr.prototype.N=function(){this.g.l=null,delete this.j,Vs(this.g),delete this.g,dr.Z.N.call(this)};function $u(d){Ve.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const _ in b){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}k($u,Ve);function Wu(){De.call(this),this.status=1}k(Wu,De);function za(d){this.g=d}k(za,Hu),za.prototype.ra=function(){nt(this.g,"a")},za.prototype.qa=function(d){nt(this.g,new $u(d))},za.prototype.pa=function(d){nt(this.g,new Wu)},za.prototype.oa=function(){nt(this.g,"b")},xi.prototype.createWebChannel=xi.prototype.g,dr.prototype.send=dr.prototype.o,dr.prototype.open=dr.prototype.m,dr.prototype.close=dr.prototype.close,zw=function(){return new xi},Uw=function(){return ft()},Bw=Ue,dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hn.NO_ERROR=0,hn.TIMEOUT=8,hn.HTTP_ERROR=6,yd=hn,Sn.COMPLETE="complete",Vw=Sn,Oe.EventType=Qe,Qe.OPEN="a",Qe.CLOSE="b",Qe.ERROR="c",Qe.MESSAGE="d",ct.prototype.listen=ct.prototype.J,Xc=Oe,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,Ow=st}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});class ir{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ir.UNAUTHENTICATED=new ir(null),ir.GOOGLE_CREDENTIALS=new ir("google-credentials-uid"),ir.FIRST_PARTY=new ir("first-party-uid"),ir.MOCK_USER=new ir("mock-user");let tc="12.8.0";function J4(s){tc=s}const Go=new Ug("@firebase/firestore");function Pl(){return Go.logLevel}function lt(s,...e){if(Go.logLevel<=vn.DEBUG){const t=e.map(Zg);Go.debug(`Firestore (${tc}): ${s}`,...t)}}function fi(s,...e){if(Go.logLevel<=vn.ERROR){const t=e.map(Zg);Go.error(`Firestore (${tc}): ${s}`,...t)}}function $l(s,...e){if(Go.logLevel<=vn.WARN){const t=e.map(Zg);Go.warn(`Firestore (${tc}): ${s}`,...t)}}function Zg(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Pt(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Fw(s,i,t)}function Fw(s,e,t){let i=`FIRESTORE (${tc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw fi(i),new Error(i)}function Bn(s,e,t,i){let l="Unexpected state";typeof t=="string"?l=t:i=t,s||Fw(e,l,i)}function Kt(s,e){return s}const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends Oa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class li{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class qw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ir.UNAUTHENTICATED)))}shutdown(){}}class eR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class tR{constructor(e){this.t=e,this.currentUser=ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Bn(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new li;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new li,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new li)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Bn(typeof i.accessToken=="string",31837,{l:i}),new qw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bn(e===null||typeof e=="string",2055,{h:e}),new ir(e)}}class nR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=ir.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class sR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new nR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ir.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class hx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Br(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Bn(this.o===void 0,3512);const i=u=>{u.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,lt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new hx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Bn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new hx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function aR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class ey{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=aR(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<t&&(i+=e.charAt(l[u]%62))}return i}}function xn(s,e){return s<e?-1:s>e?1:0}function fg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return Rp(l)===Rp(u)?xn(l,u):Rp(l)?1:-1}return xn(s.length,e.length)}const iR=55296,oR=57343;function Rp(s){const e=s.charCodeAt(0);return e>=iR&&e<=oR}function Wl(s,e,t){return s.length===e.length&&s.every(((i,l)=>t(i,e[l])))}const dx="__name__";class Ea{constructor(e,t,i){t===void 0?t=0:t>e.length&&Pt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Pt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ea.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ea?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let l=0;l<i;l++){const u=Ea.compareSegments(e.get(l),t.get(l));if(u!==0)return u}return xn(e.length,t.length)}static compareSegments(e,t){const i=Ea.isNumericId(e),l=Ea.isNumericId(t);return i&&!l?-1:!i&&l?1:i&&l?Ea.extractNumericId(e).compare(Ea.extractNumericId(t)):fg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return no.fromString(e.substring(4,e.length-2))}}class ss extends Ea{construct(e,t,i){return new ss(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new et(je.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((l=>l.length>0)))}return new ss(t)}static emptyPath(){return new ss([])}}const lR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Ea{construct(e,t,i){return new er(e,t,i)}static isValidIdentifier(e){return lR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dx}static keyField(){return new er([dx])}static fromServerFormat(e){const t=[];let i="",l=0;const u=()=>{if(i.length===0)throw new et(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new et(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new et(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(h=!h,l++):p!=="."||h?(i+=p,l++):(u(),l++)}if(u(),h)throw new et(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class Tt{constructor(e){this.path=e}static fromPath(e){return new Tt(ss.fromString(e))}static fromName(e){return new Tt(ss.fromString(e).popFirst(5))}static empty(){return new Tt(ss.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ss.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ss.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Tt(new ss(e.slice()))}}function Hw(s,e,t){if(!t)throw new et(je.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function cR(s,e,t,i){if(e===!0&&i===!0)throw new et(je.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function fx(s){if(!Tt.isDocumentKey(s))throw new et(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function mx(s){if(Tt.isDocumentKey(s))throw new et(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function $w(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function ef(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Pt(12329,{type:typeof s})}function yr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new et(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ef(s);throw new et(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function uR(s,e){if(e<=0)throw new et(je.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function Ps(s,e){const t={typeString:s};return e&&(t.value=e),t}function Ru(s,e){if(!$w(s))throw new et(je.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const h=s[i];if(l&&typeof h!==l){t=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new et(je.INVALID_ARGUMENT,t);return!0}const px=-62135596800,gx=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*gx);return new yt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new et(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new et(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<px)throw new et(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gx}_compareTo(e){return this.seconds===e.seconds?xn(this.nanoseconds,e.nanoseconds):xn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ru(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-px;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:Ps("string",yt._jsonSchemaVersion),seconds:Ps("number"),nanoseconds:Ps("number")};class $t{static fromTimestamp(e){return new $t(e)}static min(){return new $t(new yt(0,0))}static max(){return new $t(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const fu=-1;function hR(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=$t.fromTimestamp(i===1e9?new yt(t+1,0):new yt(t,i));return new ao(l,Tt.empty(),e)}function dR(s){return new ao(s.readTime,s.key,fu)}class ao{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ao($t.min(),Tt.empty(),fu)}static max(){return new ao($t.max(),Tt.empty(),fu)}}function fR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Tt.comparator(s.documentKey,e.documentKey),t!==0?t:xn(s.largestBatchId,e.largestBatchId))}const mR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function nc(s){if(s.code!==je.FAILED_PRECONDITION||s.message!==mR)throw s;lt("LocalStore","Unexpectedly lost primary lease")}class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ie(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ie?t:Ie.resolve(t)}catch(t){return Ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ie.reject(t)}static resolve(e){return new Ie(((t,i)=>{t(e)}))}static reject(e){return new Ie(((t,i)=>{i(e)}))}static waitFor(e){return new Ie(((t,i)=>{let l=0,u=0,h=!1;e.forEach((p=>{++l,p.next((()=>{++u,h&&u===l&&t()}),(g=>i(g)))})),h=!0,u===l&&t()}))}static or(e){let t=Ie.resolve(!1);for(const i of e)t=t.next((l=>l?Ie.resolve(l):i()));return t}static forEach(e,t){const i=[];return e.forEach(((l,u)=>{i.push(t.call(this,l,u))})),this.waitFor(i)}static mapArray(e,t){return new Ie(((i,l)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next((w=>{h[y]=w,++p,p===u&&i(h)}),(w=>l(w)))}}))}static doWhile(e,t){return new Ie(((i,l)=>{const u=()=>{e()===!0?t().next((()=>{u()}),l):i()};u()}))}}function gR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function sc(s){return s.name==="IndexedDbTransactionError"}class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tf.ce=-1;const ty=-1;function nf(s){return s==null}function Md(s){return s===0&&1/s==-1/0}function yR(s){return typeof s=="number"&&Number.isInteger(s)&&!Md(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Ww="";function bR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=yx(e)),e=vR(s.get(t),e);return yx(e)}function vR(s,e){let t=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":t+="";break;case Ww:t+="";break;default:t+=u}}return t}function yx(s){return s+Ww+""}function bx(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function mo(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Gw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class hs{constructor(e,t){this.comparator=e,this.root=t||Zs.EMPTY}insert(e,t){return new hs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zs.BLACK,null,null))}remove(e){return new hs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return t+i.left.size;l<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,t,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zs{constructor(e,t,i,l,u){this.key=e,this.value=t,this.color=i??Zs.RED,this.left=l??Zs.EMPTY,this.right=u??Zs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,l,u){return new Zs(e??this.key,t??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,t,i),null):u===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Zs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Zs.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pt(27949);return e+(this.isRed()?0:1)}}Zs.EMPTY=null,Zs.RED=!0,Zs.BLACK=!1;Zs.EMPTY=new class{constructor(){this.size=0}get key(){throw Pt(57766)}get value(){throw Pt(16141)}get color(){throw Pt(16727)}get left(){throw Pt(29726)}get right(){throw Pt(36894)}copy(e,t,i,l,u){return this}insert(e,t,i){return new Zs(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Us{constructor(e){this.comparator=e,this.data=new hs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vx(this.data.getIterator())}getIteratorFrom(e){return new vx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Us)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Us(this.comparator);return t.data=e,t}}class vx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ur{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Ur([])}unionWith(e){let t=new Us(er.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ur(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Kw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Kw("Invalid base64 string: "+u):u}})(e);return new tr(t)}static fromUint8Array(e){const t=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new tr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const xR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(s){if(Bn(!!s,39018),typeof s=="string"){let e=0;const t=xR.exec(s);if(Bn(!!t,46558,{timestamp:s}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ts(s.seconds),nanos:Ts(s.nanos)}}function Ts(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function oo(s){return typeof s=="string"?tr.fromBase64String(s):tr.fromUint8Array(s)}const Yw="server_timestamp",Qw="__type__",Xw="__previous_value__",Jw="__local_write_time__";function ny(s){return(s?.mapValue?.fields||{})[Qw]?.stringValue===Yw}function sf(s){const e=s.mapValue.fields[Xw];return ny(e)?sf(e):e}function mu(s){const e=io(s.mapValue.fields[Jw].timestampValue);return new yt(e.seconds,e.nanos)}class wR{constructor(e,t,i,l,u,h,p,g,y,w,k){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=w,this.apiKey=k}}const Dd="(default)";class pu{constructor(e,t){this.projectId=e,this.database=t||Dd}static empty(){return new pu("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof pu&&e.projectId===this.projectId&&e.database===this.database}}function _R(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new et(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pu(s.options.projectId,e)}const Zw="__type__",kR="__max__",ed={mapValue:{}},e_="__vector__",Pd="value";function lo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ny(s)?4:jR(s)?9007199254740991:TR(s)?10:11:Pt(28295,{value:s})}function Da(s,e){if(s===e)return!0;const t=lo(s);if(t!==lo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return mu(s).isEqual(mu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=io(l.timestampValue),p=io(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return oo(l.bytesValue).isEqual(oo(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return Ts(l.geoPointValue.latitude)===Ts(u.geoPointValue.latitude)&&Ts(l.geoPointValue.longitude)===Ts(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return Ts(l.integerValue)===Ts(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=Ts(l.doubleValue),p=Ts(u.doubleValue);return h===p?Md(h)===Md(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return Wl(s.arrayValue.values||[],e.arrayValue.values||[],Da);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},p=u.mapValue.fields||{};if(bx(h)!==bx(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Da(h[g],p[g])))return!1;return!0})(s,e);default:return Pt(52216,{left:s})}}function gu(s,e){return(s.values||[]).find((t=>Da(t,e)))!==void 0}function Gl(s,e){if(s===e)return 0;const t=lo(s),i=lo(e);if(t!==i)return xn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return xn(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=Ts(u.integerValue||u.doubleValue),g=Ts(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return xx(s.timestampValue,e.timestampValue);case 4:return xx(mu(s),mu(e));case 5:return fg(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=oo(u),g=oo(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const w=xn(p[y],g[y]);if(w!==0)return w}return xn(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=xn(Ts(u.latitude),Ts(h.latitude));return p!==0?p:xn(Ts(u.longitude),Ts(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return wx(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},y=p[Pd]?.arrayValue,w=g[Pd]?.arrayValue,k=xn(y?.values?.length||0,w?.values?.length||0);return k!==0?k:wx(y,w)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===ed.mapValue&&h===ed.mapValue)return 0;if(u===ed.mapValue)return 1;if(h===ed.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=h.fields||{},w=Object.keys(y);g.sort(),w.sort();for(let k=0;k<g.length&&k<w.length;++k){const T=fg(g[k],w[k]);if(T!==0)return T;const L=Gl(p[g[k]],y[w[k]]);if(L!==0)return L}return xn(g.length,w.length)})(s.mapValue,e.mapValue);default:throw Pt(23264,{he:t})}}function xx(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return xn(s,e);const t=io(s),i=io(e),l=xn(t.seconds,i.seconds);return l!==0?l:xn(t.nanos,i.nanos)}function wx(s,e){const t=s.values||[],i=e.values||[];for(let l=0;l<t.length&&l<i.length;++l){const u=Gl(t[l],i[l]);if(u)return u}return xn(t.length,i.length)}function Kl(s){return mg(s)}function mg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=io(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return oo(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Tt.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",l=!0;for(const u of t.values||[])l?l=!1:i+=",",i+=mg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let l="{",u=!0;for(const h of i)u?u=!1:l+=",",l+=`${h}:${mg(t.fields[h])}`;return l+"}"})(s.mapValue):Pt(61005,{value:s})}function bd(s){switch(lo(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sf(s);return e?16+bd(e):16;case 5:return 2*s.stringValue.length;case 6:return oo(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+bd(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return mo(i.fields,((u,h)=>{l+=u.length+bd(h)})),l})(s.mapValue);default:throw Pt(13486,{value:s})}}function _x(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function pg(s){return!!s&&"integerValue"in s}function sy(s){return!!s&&"arrayValue"in s}function kx(s){return!!s&&"nullValue"in s}function Tx(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vd(s){return!!s&&"mapValue"in s}function TR(s){return(s?.mapValue?.fields||{})[Zw]?.stringValue===e_}function su(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return mo(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=su(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=su(s.arrayValue.values[t]);return e}return{...s}}function jR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===kR}class Cr{constructor(e){this.value=e}static empty(){return new Cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!vd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=su(t)}setAll(e){let t=er.emptyPath(),i={},l=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,l),i={},l=[],t=p.popLast()}h?i[p.lastSegment()]=su(h):l.push(p.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,l)}delete(e){const t=this.field(e.popLast());vd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Da(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=t.mapValue.fields[e.get(i)];vd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,i){mo(t,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new Cr(su(this.value))}}function t_(s){const e=[];return mo(s.fields,((t,i)=>{const l=new er([t]);if(vd(i)){const u=t_(i.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new Ur(e)}class or{constructor(e,t,i,l,u,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=l,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new or(e,0,$t.min(),$t.min(),$t.min(),Cr.empty(),0)}static newFoundDocument(e,t,i,l){return new or(e,1,t,$t.min(),i,l,0)}static newNoDocument(e,t){return new or(e,2,t,$t.min(),$t.min(),Cr.empty(),0)}static newUnknownDocument(e,t){return new or(e,3,t,$t.min(),$t.min(),Cr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ld{constructor(e,t){this.position=e,this.inclusive=t}}function jx(s,e,t){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],h=s.position[l];if(u.field.isKeyField()?i=Tt.comparator(Tt.fromName(h.referenceValue),t.key):i=Gl(h,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ex(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Da(s.position[t],e.position[t]))return!1;return!0}class yu{constructor(e,t="asc"){this.field=e,this.dir=t}}function ER(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class n_{}class Ds extends n_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new NR(e,t,i):t==="array-contains"?new AR(e,i):t==="in"?new IR(e,i):t==="not-in"?new MR(e,i):t==="array-contains-any"?new DR(e,i):new Ds(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new CR(e,i):new RR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gl(t,this.value)):t!==null&&lo(this.value)===lo(t)&&this.matchesComparison(Gl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ga extends n_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ga(e,t)}matches(e){return s_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function s_(s){return s.op==="and"}function r_(s){return SR(s)&&s_(s)}function SR(s){for(const e of s.filters)if(e instanceof ga)return!1;return!0}function gg(s){if(s instanceof Ds)return s.field.canonicalString()+s.op.toString()+Kl(s.value);if(r_(s))return s.filters.map((e=>gg(e))).join(",");{const e=s.filters.map((t=>gg(t))).join(",");return`${s.op}(${e})`}}function a_(s,e){return s instanceof Ds?(function(i,l){return l instanceof Ds&&i.op===l.op&&i.field.isEqual(l.field)&&Da(i.value,l.value)})(s,e):s instanceof ga?(function(i,l){return l instanceof ga&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,h,p)=>u&&a_(h,l.filters[p])),!0):!1})(s,e):void Pt(19439)}function i_(s){return s instanceof Ds?(function(t){return`${t.field.canonicalString()} ${t.op} ${Kl(t.value)}`})(s):s instanceof ga?(function(t){return t.op.toString()+" {"+t.getFilters().map(i_).join(" ,")+"}"})(s):"Filter"}class NR extends Ds{constructor(e,t,i){super(e,t,i),this.key=Tt.fromName(i.referenceValue)}matches(e){const t=Tt.comparator(e.key,this.key);return this.matchesComparison(t)}}class CR extends Ds{constructor(e,t){super(e,"in",t),this.keys=o_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class RR extends Ds{constructor(e,t){super(e,"not-in",t),this.keys=o_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function o_(s,e){return(e.arrayValue?.values||[]).map((t=>Tt.fromName(t.referenceValue)))}class AR extends Ds{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sy(t)&&gu(t.arrayValue,this.value)}}class IR extends Ds{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gu(this.value.arrayValue,t)}}class MR extends Ds{constructor(e,t){super(e,"not-in",t)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gu(this.value.arrayValue,t)}}class DR extends Ds{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>gu(this.value.arrayValue,i)))}}class PR{constructor(e,t=null,i=[],l=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function Sx(s,e=null,t=[],i=[],l=null,u=null,h=null){return new PR(s,e,t,i,l,u,h)}function ry(s){const e=Kt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>gg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Kl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Kl(i))).join(",")),e.Te=t}return e.Te}function ay(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!ER(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!a_(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Ex(s.startAt,e.startAt)&&Ex(s.endAt,e.endAt)}function yg(s){return Tt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class rc{constructor(e,t=null,i=[],l=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function LR(s,e,t,i,l,u,h,p){return new rc(s,e,t,i,l,u,h,p)}function rf(s){return new rc(s)}function Nx(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function OR(s){return Tt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function l_(s){return s.collectionGroup!==null}function ru(s){const e=Kt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Us(er.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new yu(u,i))})),t.has(er.keyField().canonicalString())||e.Ie.push(new yu(er.keyField(),i))}return e.Ie}function Aa(s){const e=Kt(s);return e.Ee||(e.Ee=VR(e,ru(s))),e.Ee}function VR(s,e){if(s.limitType==="F")return Sx(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new yu(l.field,u)}));const t=s.endAt?new Ld(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Ld(s.startAt.position,s.startAt.inclusive):null;return Sx(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function bg(s,e){const t=s.filters.concat([e]);return new rc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function BR(s,e){const t=s.explicitOrderBy.concat([e]);return new rc(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Od(s,e,t){return new rc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function af(s,e){return ay(Aa(s),Aa(e))&&s.limitType===e.limitType}function c_(s){return`${ry(Aa(s))}|lt:${s.limitType}`}function Ll(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((l=>i_(l))).join(", ")}]`),nf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((l=>Kl(l))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((l=>Kl(l))).join(",")),`Target(${i})`})(Aa(s))}; limitType=${s.limitType})`}function of(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Tt.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of ru(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(h,p,g){const y=jx(h,p,g);return h.inclusive?y<=0:y<0})(i.startAt,ru(i),l)||i.endAt&&!(function(h,p,g){const y=jx(h,p,g);return h.inclusive?y>=0:y>0})(i.endAt,ru(i),l))})(s,e)}function UR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function u_(s){return(e,t)=>{let i=!1;for(const l of ru(s)){const u=zR(l,e,t);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function zR(s,e,t){const i=s.field.isKeyField()?Tt.comparator(e.key,t.key):(function(u,h,p){const g=h.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Gl(g,y):Pt(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Pt(19790,{direction:s.dir})}}class Jo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[t]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){mo(this.inner,((t,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return Gw(this.inner)}size(){return this.innerSize}}const FR=new hs(Tt.comparator);function mi(){return FR}const h_=new hs(Tt.comparator);function Jc(...s){let e=h_;for(const t of s)e=e.insert(t.key,t);return e}function d_(s){let e=h_;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Oo(){return au()}function f_(){return au()}function au(){return new Jo((s=>s.toString()),((s,e)=>s.isEqual(e)))}const qR=new hs(Tt.comparator),HR=new Us(Tt.comparator);function wn(...s){let e=HR;for(const t of s)e=e.add(t);return e}const $R=new Us(xn);function WR(){return $R}function iy(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function m_(s){return{integerValue:""+s}}function p_(s,e){return yR(e)?m_(e):iy(s,e)}class lf{constructor(){this._=void 0}}function GR(s,e,t){return s instanceof bu?(function(l,u){const h={fields:{[Qw]:{stringValue:Yw},[Jw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&ny(u)&&(u=sf(u)),u&&(h.fields[Xw]=u),{mapValue:h}})(t,e):s instanceof vu?y_(s,e):s instanceof xu?b_(s,e):(function(l,u){const h=g_(l,u),p=Cx(h)+Cx(l.Ae);return pg(h)&&pg(l.Ae)?m_(p):iy(l.serializer,p)})(s,e)}function KR(s,e,t){return s instanceof vu?y_(s,e):s instanceof xu?b_(s,e):t}function g_(s,e){return s instanceof wu?(function(i){return pg(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class bu extends lf{}class vu extends lf{constructor(e){super(),this.elements=e}}function y_(s,e){const t=v_(e);for(const i of s.elements)t.some((l=>Da(l,i)))||t.push(i);return{arrayValue:{values:t}}}class xu extends lf{constructor(e){super(),this.elements=e}}function b_(s,e){let t=v_(e);for(const i of s.elements)t=t.filter((l=>!Da(l,i)));return{arrayValue:{values:t}}}class wu extends lf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Cx(s){return Ts(s.integerValue||s.doubleValue)}function v_(s){return sy(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class x_{constructor(e,t){this.field=e,this.transform=t}}function YR(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof vu&&l instanceof vu||i instanceof xu&&l instanceof xu?Wl(i.elements,l.elements,Da):i instanceof wu&&l instanceof wu?Da(i.Ae,l.Ae):i instanceof bu&&l instanceof bu})(s.transform,e.transform)}class QR{constructor(e,t){this.version=e,this.transformResults=t}}class br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class cf{}function w_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new uf(s.key,br.none()):new Au(s.key,s.data,br.none());{const t=s.data,i=Cr.empty();let l=new Us(er.comparator);for(let u of e.fields)if(!l.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?i.delete(u):i.set(u,h),l=l.add(u)}return new po(s.key,i,new Ur(l.toArray()),br.none())}}function XR(s,e,t){s instanceof Au?(function(l,u,h){const p=l.value.clone(),g=Ax(l.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,t):s instanceof po?(function(l,u,h){if(!xd(l.precondition,u))return void u.convertToUnknownDocument(h.version);const p=Ax(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(__(l)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function iu(s,e,t,i){return s instanceof Au?(function(u,h,p,g){if(!xd(u.precondition,h))return p;const y=u.value.clone(),w=Ix(u.fieldTransforms,g,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,t,i):s instanceof po?(function(u,h,p,g){if(!xd(u.precondition,h))return p;const y=Ix(u.fieldTransforms,g,h),w=h.data;return w.setAll(__(u)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((k=>k.field)))})(s,e,t,i):(function(u,h,p){return xd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,t)}function JR(s,e){let t=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=g_(i.transform,l||null);u!=null&&(t===null&&(t=Cr.empty()),t.set(i.field,u))}return t||null}function Rx(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Wl(i,l,((u,h)=>YR(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Au extends cf{constructor(e,t,i,l=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class po extends cf{constructor(e,t,i,l,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function __(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function Ax(s,e,t){const i=new Map;Bn(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let l=0;l<t.length;l++){const u=s[l],h=u.transform,p=e.data.field(u.field);i.set(u.field,KR(h,p,t[l]))}return i}function Ix(s,e,t){const i=new Map;for(const l of s){const u=l.transform,h=t.data.field(l.field);i.set(l.field,GR(u,h,e))}return i}class uf extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZR extends cf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class eA{constructor(e,t,i,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&XR(u,e,i[l])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=iu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=iu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=f_();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=t.has(l.key)?null:p;const g=w_(h,p);g!==null&&i.set(l.key,g),h.isValidDocument()||h.convertToNoDocument($t.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),wn())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,((t,i)=>Rx(t,i)))&&Wl(this.baseMutations,e.baseMutations,((t,i)=>Rx(t,i)))}}class oy{constructor(e,t,i,l){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=l}static from(e,t,i){Bn(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return qR})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,i[h].version);return new oy(e,t,i,l)}}class tA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class nA{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ms,En;function sA(s){switch(s){case je.OK:return Pt(64938);case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0;default:return Pt(15467,{code:s})}}function k_(s){if(s===void 0)return fi("GRPC error has no .code"),je.UNKNOWN;switch(s){case Ms.OK:return je.OK;case Ms.CANCELLED:return je.CANCELLED;case Ms.UNKNOWN:return je.UNKNOWN;case Ms.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case Ms.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case Ms.INTERNAL:return je.INTERNAL;case Ms.UNAVAILABLE:return je.UNAVAILABLE;case Ms.UNAUTHENTICATED:return je.UNAUTHENTICATED;case Ms.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case Ms.NOT_FOUND:return je.NOT_FOUND;case Ms.ALREADY_EXISTS:return je.ALREADY_EXISTS;case Ms.PERMISSION_DENIED:return je.PERMISSION_DENIED;case Ms.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case Ms.ABORTED:return je.ABORTED;case Ms.OUT_OF_RANGE:return je.OUT_OF_RANGE;case Ms.UNIMPLEMENTED:return je.UNIMPLEMENTED;case Ms.DATA_LOSS:return je.DATA_LOSS;default:return Pt(39323,{code:s})}}(En=Ms||(Ms={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";function rA(){return new TextEncoder}const aA=new no([4294967295,4294967295],0);function Mx(s){const e=rA().encode(s),t=new Lw;return t.update(e),new Uint8Array(t.digest())}function Dx(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new no([t,i],0),new no([l,u],0)]}class ly{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Zc(`Invalid padding: ${t}`);if(i<0)throw new Zc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Zc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Zc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=no.fromNumber(this.ge)}ye(e,t,i){let l=e.add(t.multiply(no.fromNumber(i)));return l.compare(aA)===1&&(l=new no([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Mx(e),[i,l]=Dx(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);if(!this.we(h))return!1}return!0}static create(e,t,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new ly(u,l,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const t=Mx(e),[i,l]=Dx(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);this.be(h)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hf{constructor(e,t,i,l,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const l=new Map;return l.set(e,Iu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new hf($t.min(),l,new hs(xn),mi(),wn())}}class Iu{constructor(e,t,i,l,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Iu(i,t,wn(),wn(),wn())}}class wd{constructor(e,t,i,l){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=l}}class T_{constructor(e,t){this.targetId=e,this.Ce=t}}class j_{constructor(e,t,i=tr.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=l}}class Px{constructor(){this.ve=0,this.Fe=Lx(),this.Me=tr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=wn(),t=wn(),i=wn();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:i=i.add(l);break;default:Pt(38017,{changeType:u})}})),new Iu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Lx()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Bn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class iA{constructor(e){this.Ge=e,this.ze=new Map,this.je=mi(),this.He=td(),this.Je=td(),this.Ze=new hs(xn)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Pt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,i=e.Ce.count,l=this.ot(t);if(l){const u=l.target;if(yg(u))if(i===0){const h=new Tt(u.path);this.et(t,h,or.newNoDocument(h,$t.min()))}else Bn(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=t;let h,p;try{h=oo(i).toUint8Array()}catch(g){if(g instanceof Kw)return $l("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new ly(h,l,u)}catch(g){return $l(g instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let l=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(t,u,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&yg(p.target)){const g=new Tt(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,or.newNoDocument(g,e))}u.Be&&(t.set(h,u.ke()),u.Ke())}}));let i=wn();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new hf(e,t,this.Ze,this.je,i);return this.je=mi(),this.He=td(),this.Je=td(),this.Ze=new hs(xn),l}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.qe(t,1):l.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Px,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Us(xn),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Us(xn),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||lt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Px),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function td(){return new hs(Tt.comparator)}function Lx(){return new hs(Tt.comparator)}const oA={asc:"ASCENDING",desc:"DESCENDING"},lA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cA={and:"AND",or:"OR"};class uA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vg(s,e){return s.useProto3Json||nf(e)?e:{value:e}}function Vd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E_(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function hA(s,e){return Vd(s,e.toTimestamp())}function Ia(s){return Bn(!!s,49232),$t.fromTimestamp((function(t){const i=io(t);return new yt(i.seconds,i.nanos)})(s))}function cy(s,e){return xg(s,e).canonicalString()}function xg(s,e){const t=(function(l){return new ss(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?t:t.child(e)}function S_(s){const e=ss.fromString(s);return Bn(I_(e),10190,{key:e.toString()}),e}function wg(s,e){return cy(s.databaseId,e.path)}function Ap(s,e){const t=S_(e);if(t.get(1)!==s.databaseId.projectId)throw new et(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new et(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Tt(C_(t))}function N_(s,e){return cy(s.databaseId,e)}function dA(s){const e=S_(s);return e.length===4?ss.emptyPath():C_(e)}function _g(s){return new ss(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function C_(s){return Bn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Ox(s,e,t){return{name:wg(s,e),fields:t.value.mapValue.fields}}function fA(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Pt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,w){return y.useProto3Json?(Bn(w===void 0||typeof w=="string",58123),tr.fromBase64String(w||"")):(Bn(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),tr.fromUint8Array(w||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const w=y.code===void 0?je.UNKNOWN:k_(y.code);return new et(w,y.message||"")})(h);t=new j_(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=Ap(s,i.document.name),u=Ia(i.document.updateTime),h=i.document.createTime?Ia(i.document.createTime):$t.min(),p=new Cr({mapValue:{fields:i.document.fields}}),g=or.newFoundDocument(l,u,h,p),y=i.targetIds||[],w=i.removedTargetIds||[];t=new wd(y,w,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=Ap(s,i.document),u=i.readTime?Ia(i.readTime):$t.min(),h=or.newNoDocument(l,u),p=i.removedTargetIds||[];t=new wd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=Ap(s,i.document),u=i.removedTargetIds||[];t=new wd([],u,l,null)}else{if(!("filter"in e))return Pt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,h=new nA(l,u),p=i.targetId;t=new T_(p,h)}}return t}function mA(s,e){let t;if(e instanceof Au)t={update:Ox(s,e.key,e.value)};else if(e instanceof uf)t={delete:wg(s,e.key)};else if(e instanceof po)t={update:Ox(s,e.key,e.data),updateMask:kA(e.fieldMask)};else{if(!(e instanceof ZR))return Pt(16599,{dt:e.type});t={verify:wg(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof bu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof vu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof xu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof wu)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Pt(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:hA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Pt(27497)})(s,e.precondition)),t}function pA(s,e){return s&&s.length>0?(Bn(e!==void 0,14353),s.map((t=>(function(l,u){let h=l.updateTime?Ia(l.updateTime):Ia(u);return h.isEqual($t.min())&&(h=Ia(u)),new QR(h,l.transformResults||[])})(t,e)))):[]}function gA(s,e){return{documents:[N_(s,e.path)]}}function yA(s,e){const t={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=N_(s,l);const u=(function(y){if(y.length!==0)return A_(ga.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((w=>(function(T){return{field:Ol(T.field),direction:xA(T.dir)}})(w)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=vg(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:l}}function bA(s){let e=dA(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let l=null;if(i>0){Bn(i===1,65062);const w=t.from[0];w.allDescendants?l=w.collectionId:e=e.child(w.collectionId)}let u=[];t.where&&(u=(function(k){const T=R_(k);return T instanceof ga&&r_(T)?T.getFilters():[T]})(t.where));let h=[];t.orderBy&&(h=(function(k){return k.map((T=>(function($){return new yu(Vl($.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(T)))})(t.orderBy));let p=null;t.limit&&(p=(function(k){let T;return T=typeof k=="object"?k.value:k,nf(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(k){const T=!!k.before,L=k.values||[];return new Ld(L,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(k){const T=!k.before,L=k.values||[];return new Ld(L,T)})(t.endAt)),LR(e,l,h,u,p,"F",g,y)}function vA(s,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pt(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function R_(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Vl(t.unaryFilter.field);return Ds.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Vl(t.unaryFilter.field);return Ds.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Vl(t.unaryFilter.field);return Ds.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Vl(t.unaryFilter.field);return Ds.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pt(61313);default:return Pt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Ds.create(Vl(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pt(58110);default:return Pt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ga.create(t.compositeFilter.filters.map((i=>R_(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Pt(1026)}})(t.compositeFilter.op))})(s):Pt(30097,{filter:s})}function xA(s){return oA[s]}function wA(s){return lA[s]}function _A(s){return cA[s]}function Ol(s){return{fieldPath:s.canonicalString()}}function Vl(s){return er.fromServerFormat(s.fieldPath)}function A_(s){return s instanceof Ds?(function(t){if(t.op==="=="){if(Tx(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NAN"}};if(kx(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Tx(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NOT_NAN"}};if(kx(t.value))return{unaryFilter:{field:Ol(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ol(t.field),op:wA(t.op),value:t.value}}})(s):s instanceof ga?(function(t){const i=t.getFilters().map((l=>A_(l)));return i.length===1?i[0]:{compositeFilter:{op:_A(t.op),filters:i}}})(s):Pt(54877,{filter:s})}function kA(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function I_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function M_(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Xi{constructor(e,t,i,l,u=$t.min(),h=$t.min(),p=tr.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class TA{constructor(e){this.yt=e}}function jA(s){const e=bA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Od(e,e.limit,"L"):e}class EA{constructor(){this.Sn=new SA}addToCollectionParentIndex(e,t){return this.Sn.add(t),Ie.resolve()}getCollectionParents(e,t){return Ie.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Ie.resolve()}deleteFieldIndex(e,t){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,t){return Ie.resolve()}getDocumentsMatchingTarget(e,t){return Ie.resolve(null)}getIndexType(e,t){return Ie.resolve(0)}getFieldIndexes(e,t){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,t){return Ie.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,t){return Ie.resolve(ao.min())}updateCollectionGroup(e,t,i){return Ie.resolve()}updateIndexEntries(e,t){return Ie.resolve()}}class SA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t]||new Us(ss.comparator),u=!l.has(i);return this.index[t]=l.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t];return l&&l.has(i)}getEntries(e){return(this.index[e]||new Us(ss.comparator)).toArray()}}const Vx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},D_=41943040;class Nr{static withCacheSize(e){return new Nr(e,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}Nr.DEFAULT_COLLECTION_PERCENTILE=10,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nr.DEFAULT=new Nr(D_,Nr.DEFAULT_COLLECTION_PERCENTILE,Nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nr.DISABLED=new Nr(-1,0,0);class Yl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Yl(0)}static ar(){return new Yl(-1)}}const Bx="LruGarbageCollector",NA=1048576;function Ux([s,e],[t,i]){const l=xn(s,t);return l===0?xn(e,i):l}class CA{constructor(e){this.Pr=e,this.buffer=new Us(Ux),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Ux(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){lt(Bx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){sc(t)?lt(Bx,"Ignoring IndexedDB error during garbage collection: ",t):await nc(t)}await this.Ar(3e5)}))}}class AA{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Ie.resolve(tf.ce);const i=new CA(t);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(Vx)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vx):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,l,u,h,p,g,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),l=this.params.maximumSequenceNumbersToCollect):l=k,h=Date.now(),this.nthSequenceNumber(e,l)))).next((k=>(i=k,p=Date.now(),this.removeTargets(e,i,t)))).next((k=>(u=k,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((k=>(y=Date.now(),Pl()<=vn.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${l} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${k} documents in `+(y-g)+`ms
Total Duration: ${y-w}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:k}))))}}function IA(s,e){return new AA(s,e)}class MA{constructor(){this.changes=new Jo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Ie.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class PA{constructor(e,t,i,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(i!==null&&iu(i.mutation,l,Ur.empty(),yt.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,wn()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=wn()){const l=Oo();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,i).next((u=>{let h=Jc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=Oo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,wn())))}populateOverlays(e,t,i){const l=[];return i.forEach((u=>{t.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,l){let u=mi();const h=au(),p=(function(){return au()})();return t.forEach(((g,y)=>{const w=i.get(y.key);l.has(y.key)&&(w===void 0||w.mutation instanceof po)?u=u.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),iu(w.mutation,y,w.mutation.getFieldMask(),yt.now())):h.set(y.key,Ur.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,w)=>h.set(y,w))),t.forEach(((y,w)=>p.set(y,new DA(w,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=au();let l=new hs(((h,p)=>h-p)),u=wn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let w=i.get(g)||Ur.empty();w=p.applyToLocalView(y,w),i.set(g,w);const k=(l.get(p.batchId)||wn()).add(g);l=l.insert(p.batchId,k)}))})).next((()=>{const h=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,w=g.value,k=f_();w.forEach((T=>{if(!u.has(T)){const L=w_(t.get(T),i.get(T));L!==null&&k.set(T,L),u=u.add(T)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,k))}return Ie.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,l){return OR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):l_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,l):this.getDocumentsMatchingCollectionQuery(e,t,i,l)}getNextDocuments(e,t,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,l-u.size):Ie.resolve(Oo());let p=fu,g=u;return h.next((y=>Ie.forEach(y,((w,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),u.get(w)?Ie.resolve():this.remoteDocumentCache.getEntry(e,w).next((T=>{g=g.insert(w,T)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,wn()))).next((w=>({batchId:p,changes:d_(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Tt(t)).next((i=>{let l=Jc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,l){const u=t.collectionGroup;let h=Jc();return this.indexManager.getCollectionParents(e,u).next((p=>Ie.forEach(p,(g=>{const y=(function(k,T){return new rc(T,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((w=>{w.forEach(((k,T)=>{h=h.insert(k,T)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,l)))).next((h=>{u.forEach(((g,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,or.newInvalidDocument(w)))}));let p=Jc();return h.forEach(((g,y)=>{const w=u.get(g);w!==void 0&&iu(w.mutation,y,Ur.empty(),yt.now()),of(t,y)&&(p=p.insert(g,y))})),p}))}}class LA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Ie.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Ia(l.createTime)}})(t)),Ie.resolve()}getNamedQuery(e,t){return Ie.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(l){return{name:l.name,query:jA(l.bundledQuery),readTime:Ia(l.readTime)}})(t)),Ie.resolve()}}class OA{constructor(){this.overlays=new hs(Tt.comparator),this.Lr=new Map}getOverlay(e,t){return Ie.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Oo();return Ie.forEach(t,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((l,u)=>{this.bt(e,t,u)})),Ie.resolve()}removeOverlaysForBatchId(e,t,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),Ie.resolve()}getOverlaysForCollection(e,t,i){const l=Oo(),u=t.length+1,h=new Tt(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return Ie.resolve(l)}getOverlaysForCollectionGroup(e,t,i,l){let u=new hs(((y,w)=>y-w));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let w=u.get(y.largestBatchId);w===null&&(w=Oo(),u=u.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const p=Oo(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,w)=>p.set(y,w))),!(p.size()>=l)););return Ie.resolve(p)}bt(e,t,i){const l=this.overlays.get(i.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new tA(t,i));let u=this.Lr.get(t);u===void 0&&(u=wn(),this.Lr.set(t,u)),this.Lr.set(t,u.add(i.key))}}class VA{constructor(){this.sessionToken=tr.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ie.resolve()}}class uy{constructor(){this.kr=new Us($s.Kr),this.qr=new Us($s.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new $s(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new $s(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Tt(new ss([])),i=new $s(t,e),l=new $s(t,e+1),u=[];return this.qr.forEachInRange([i,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Tt(new ss([])),i=new $s(t,e),l=new $s(t,e+1);let u=wn();return this.qr.forEachInRange([i,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new $s(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $s{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Tt.comparator(e.key,t.key)||xn(e.Hr,t.Hr)}static Ur(e,t){return xn(e.Hr,t.Hr)||Tt.comparator(e.key,t.key)}}class BA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Us($s.Kr)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new eA(u,t,i,l);this.mutationQueue.push(h);for(const p of l)this.Jr=this.Jr.add(new $s(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Ie.resolve(h)}lookupMutationBatch(e,t){return Ie.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,l=this.Xr(i),u=l<0?0:l;return Ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?ty:this.Yn-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $s(t,0),l=new $s(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(h=>{const p=this.Zr(h.Hr);u.push(p)})),Ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Us(xn);return t.forEach((l=>{const u=new $s(l,0),h=new $s(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),Ie.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,l=i.length+1;let u=i;Tt.isDocumentKey(u)||(u=u.child(""));const h=new $s(new Tt(u),0);let p=new Us(xn);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),h),Ie.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){Bn(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Ie.forEach(t.mutations,(l=>{const u=new $s(l.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new $s(t,0),l=this.Jr.firstAfterOrEqual(i);return Ie.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class UA{constructor(e){this.ti=e,this.docs=(function(){return new hs(Tt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,l=this.docs.get(i),u=l?l.size:0,h=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Ie.resolve(i?i.document.mutableCopy():or.newInvalidDocument(t))}getEntries(e,t){let i=mi();return t.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():or.newInvalidDocument(l))})),Ie.resolve(i)}getDocumentsMatchingQuery(e,t,i,l){let u=mi();const h=t.path,p=new Tt(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:w}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||fR(dR(w),i)<=0||(l.has(w.key)||of(t,w))&&(u=u.insert(w.key,w.mutableCopy()))}return Ie.resolve(u)}getAllFromCollectionGroup(e,t,i,l){Pt(9500)}ni(e,t){return Ie.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new zA(this)}getSize(e){return Ie.resolve(this.size)}}class zA extends MA{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?t.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),Ie.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class FA{constructor(e){this.persistence=e,this.ri=new Jo((t=>ry(t)),ay),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.ii=0,this.si=new uy,this.targetCount=0,this.oi=Yl._r()}forEachTarget(e,t){return this.ri.forEach(((i,l)=>t(l))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),Ie.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Yl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Ie.resolve()}updateTargetData(e,t){return this.lr(t),Ie.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,t,i){let l=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Ie.waitFor(u).next((()=>l))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return Ie.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),Ie.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const l=this.persistence.referenceDelegate,u=[];return l&&t.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),Ie.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Ie.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return Ie.resolve(i)}containsKey(e,t){return Ie.resolve(this.si.containsKey(t))}}class P_{constructor(e,t){this._i={},this.overlays={},this.ai=new tf(0),this.ui=!1,this.ui=!0,this.ci=new VA,this.referenceDelegate=e(this),this.li=new FA(this),this.indexManager=new EA,this.remoteDocumentCache=(function(l){return new UA(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new TA(t),this.Pi=new LA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new BA(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){lt("MemoryPersistence","Starting transaction:",e);const l=new qA(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,t){return Ie.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class qA extends pR{constructor(e){super(),this.currentSequenceNumber=e}}class hy{constructor(e){this.persistence=e,this.Ri=new uy,this.Ai=null}static Vi(e){return new hy(e)}get di(){if(this.Ai)return this.Ai;throw Pt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),Ie.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),Ie.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Ie.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.di,(i=>{const l=Tt.fromPath(i);return this.mi(e,l).next((u=>{u||t.removeEntry(l,$t.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Bd{constructor(e,t){this.persistence=e,this.fi=new Jo((i=>bR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=IA(this,t)}static Vi(e,t){return new Bd(e,t)}Ti(){}Ii(e){return Ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((l=>i+l))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return Ie.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?Ie.resolve():t(l)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(h=>this.wr(e,h,t).next((p=>{p||(i++,u.removeEntry(h,$t.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Ie.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Ie.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bd(e.data.value)),t}wr(e,t,i){return Ie.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.fi.get(t);return Ie.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class dy{constructor(e,t,i,l){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=l}static Es(e,t){let i=wn(),l=wn();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new dy(e,t.fromCache,i,l)}}class HA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class $A{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return bS()?8:gR(lr())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,l){const u={result:null};return this.gs(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,t,l,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new HA;return this.ys(e,t,h).next((p=>{if(u.result=p,this.As)return this.ws(e,t,h,p.size)}))})).next((()=>u.result))}ws(e,t,i,l){return i.documentReadCount<this.Vs?(Pl()<=vn.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",Ll(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ie.resolve()):(Pl()<=vn.DEBUG&&lt("QueryEngine","Query:",Ll(t),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Pl()<=vn.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",Ll(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Aa(t))):Ie.resolve())}gs(e,t){if(Nx(t))return Ie.resolve(null);let i=Aa(t);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Od(t,null,"F"),i=Aa(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=wn(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(t,p);return this.Ss(t,y,h,g.readTime)?this.gs(e,Od(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,i,l){return Nx(t)||l.isEqual($t.min())?Ie.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(t,u);return this.Ss(t,h,i,l)?Ie.resolve(null):(Pl()<=vn.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ll(t)),this.Ds(e,h,t,hR(l,fu)).next((p=>p)))}))}bs(e,t){let i=new Us(u_(e));return t.forEach(((l,u)=>{of(e,u)&&(i=i.add(u))})),i}Ss(e,t,i,l){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,t,i){return Pl()<=vn.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",Ll(t)),this.fs.getDocumentsMatchingQuery(e,t,ao.min(),i)}Ds(e,t,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const fy="LocalStore",WA=3e8;class GA{constructor(e,t,i,l){this.persistence=e,this.Cs=t,this.serializer=l,this.vs=new hs(xn),this.Fs=new Jo((u=>ry(u)),ay),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function KA(s,e,t,i){return new GA(s,e,t,i)}async function L_(s,e){const t=Kt(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return t.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=wn();for(const y of l){h.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}for(const y of u){p.push(y.batchId);for(const w of y.mutations)g=g.add(w.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function YA(s,e){const t=Kt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,w){const k=y.batch,T=k.keys();let L=Ie.resolve();return T.forEach(($=>{L=L.next((()=>w.getEntry(g,$))).next((U=>{const O=y.docVersions.get($);Bn(O!==null,48541),U.version.compareTo(O)<0&&(k.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),w.addEntry(U)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(g,k)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=wn();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,l)))}))}function O_(s){const e=Kt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function QA(s,e){const t=Kt(s),i=e.snapshotVersion;let l=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});l=t.vs;const p=[];e.targetChanges.forEach(((w,k)=>{const T=l.get(k);if(!T)return;p.push(t.li.removeMatchingKeys(u,w.removedDocuments,k).next((()=>t.li.addMatchingKeys(u,w.addedDocuments,k))));let L=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(k)!==null?L=L.withResumeToken(tr.EMPTY_BYTE_STRING,$t.min()).withLastLimboFreeSnapshotVersion($t.min()):w.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(w.resumeToken,i)),l=l.insert(k,L),(function(U,O,se){return U.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=WA?!0:se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0})(T,L,w)&&p.push(t.li.updateTargetData(u,L))}));let g=mi(),y=wn();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,w))})),p.push(XA(u,h,e.documentUpdates).next((w=>{g=w.Bs,y=w.Ls}))),!i.isEqual($t.min())){const w=t.li.getLastRemoteSnapshotVersion(u).next((k=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(w)}return Ie.waitFor(p).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(t.vs=l,u)))}function XA(s,e,t){let i=wn(),l=wn();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=mi();return t.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual($t.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):lt(fy,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function JA(s,e){const t=Kt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ty),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function ZA(s,e){const t=Kt(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return t.li.getTargetData(i,e).next((u=>u?(l=u,Ie.resolve(l)):t.li.allocateTargetId(i).next((h=>(l=new Xi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=t.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function kg(s,e,t){const i=Kt(s),l=i.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!sc(h))throw h;lt(fy,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function zx(s,e,t){const i=Kt(s);let l=$t.min(),u=wn();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,w){const k=Kt(g),T=k.Fs.get(w);return T!==void 0?Ie.resolve(k.vs.get(T)):k.li.getTargetData(y,w)})(i,h,Aa(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?l:$t.min(),t?u:wn()))).next((p=>(eI(i,UR(e),p),{documents:p,ks:u})))))}function eI(s,e,t){let i=s.Ms.get(e)||$t.min();t.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class Fx{constructor(){this.activeTargetIds=WR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tI{constructor(){this.vo=new Fx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Fx,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class nI{Mo(e){}shutdown(){}}const qx="ConnectivityMonitor";class Hx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){lt(qx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){lt(qx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let nd=null;function Tg(){return nd===null?nd=(function(){return 268435456+Math.round(2147483648*Math.random())})():nd++,"0x"+nd.toString(16)}const Ip="RestConnection",sI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class rI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Dd?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,t,i,l,u){const h=Tg(),p=this.Qo(e,t.toUriEncodedString());lt(Ip,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),w=ho(y);return this.zo(e,p,g,i,w).then((k=>(lt(Ip,`Received RPC '${e}' ${h}: `,k),k)),(k=>{throw $l(Ip,`RPC '${e}' ${h} failed with error: `,k,"url: ",p,"request:",i),k}))}jo(e,t,i,l,u,h){return this.Wo(e,t,i,l,u)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,t){const i=sI[e];let l=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class aI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const ar="WebChannelConnection",$c=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class ql extends rI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ql.c_){const e=Uw();$c(e,Bw.STAT_EVENT,(t=>{t.stat===dg.PROXY?lt(ar,"STAT_EVENT: detected buffering proxy"):t.stat===dg.NOPROXY&&lt(ar,"STAT_EVENT: detected no buffering proxy")})),ql.c_=!0}}zo(e,t,i,l,u){const h=Tg();return new Promise(((p,g)=>{const y=new Ow;y.setWithCredentials(!0),y.listenOnce(Vw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case yd.NO_ERROR:const k=y.getResponseJson();lt(ar,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(k)),p(k);break;case yd.TIMEOUT:lt(ar,`RPC '${e}' ${h} timed out`),g(new et(je.DEADLINE_EXCEEDED,"Request time out"));break;case yd.HTTP_ERROR:const T=y.getStatus();if(lt(ar,`RPC '${e}' ${h} failed with status:`,T,"response text:",y.getResponseText()),T>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const $=L?.error;if($&&$.status&&$.message){const U=(function(se){const Q=se.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(Q)>=0?Q:je.UNKNOWN})($.status);g(new et(U,$.message))}else g(new et(je.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new et(je.UNAVAILABLE,"Connection failed."));break;default:Pt(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{lt(ar,`RPC '${e}' ${h} completed.`)}}));const w=JSON.stringify(l);lt(ar,`RPC '${e}' ${h} sending request:`,l),y.send(t,"POST",w,i,15)}))}T_(e,t,i){const l=Tg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=u.join("");lt(ar,`Creating RPC '${e}' stream ${l}: ${y}`,p);const w=h.createWebChannel(y,p);this.I_(w);let k=!1,T=!1;const L=new aI({Ho:$=>{T?lt(ar,`Not sending because RPC '${e}' stream ${l} is closed:`,$):(k||(lt(ar,`Opening RPC '${e}' stream ${l} transport.`),w.open(),k=!0),lt(ar,`RPC '${e}' stream ${l} sending:`,$),w.send($))},Jo:()=>w.close()});return $c(w,Xc.EventType.OPEN,(()=>{T||(lt(ar,`RPC '${e}' stream ${l} transport opened.`),L.i_())})),$c(w,Xc.EventType.CLOSE,(()=>{T||(T=!0,lt(ar,`RPC '${e}' stream ${l} transport closed`),L.o_(),this.E_(w))})),$c(w,Xc.EventType.ERROR,($=>{T||(T=!0,$l(ar,`RPC '${e}' stream ${l} transport errored. Name:`,$.name,"Message:",$.message),L.o_(new et(je.UNAVAILABLE,"The operation could not be completed")))})),$c(w,Xc.EventType.MESSAGE,($=>{if(!T){const U=$.data[0];Bn(!!U,16349);const O=U,se=O?.error||O[0]?.error;if(se){lt(ar,`RPC '${e}' stream ${l} received error:`,se);const Q=se.status;let oe=(function(Ne){const R=Ms[Ne];if(R!==void 0)return k_(R)})(Q),ve=se.message;oe===void 0&&(oe=je.INTERNAL,ve="Unknown error status: "+Q+" with message "+se.message),T=!0,L.o_(new et(oe,ve)),w.close()}else lt(ar,`RPC '${e}' stream ${l} received:`,U),L.__(U)}})),ql.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return zw()}}function iI(s){return new ql(s)}function Mp(){return typeof document<"u"?document:null}function df(s){return new uA(s,!0)}ql.c_=!1;class V_{constructor(e,t,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-i);l>0&&lt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const $x="PersistentStream";class B_{constructor(e,t,i,l,u,h,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new V_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===je.RESOURCE_EXHAUSTED?(fi(t.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===t&&this.G_(i,l)}),(i=>{e((()=>{const l=new et(je.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return lt($x,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(lt($x,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oI extends B_{constructor(e,t,i,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,l,h),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=fA(this.serializer,e),i=(function(u){if(!("targetChange"in u))return $t.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?$t.min():h.readTime?Ia(h.readTime):$t.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=_g(this.serializer),t.addTarget=(function(u,h){let p;const g=h.target;if(p=yg(g)?{documents:gA(u,g)}:{query:yA(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=E_(u,h.resumeToken);const y=vg(u,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo($t.min())>0){p.readTime=Vd(u,h.snapshotVersion.toTimestamp());const y=vg(u,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=vA(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=_g(this.serializer),t.removeTarget=e,this.K_(t)}}class lI extends B_{constructor(e,t,i,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Bn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Bn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Bn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=pA(e.writeResults,e.commitTime),i=Ia(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=_g(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>mA(this.serializer,i)))};this.K_(t)}}class cI{}class uI extends cI{constructor(e,t,i,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new et(je.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,xg(t,i),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new et(je.UNKNOWN,u.toString())}))}jo(e,t,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,xg(t,i),l,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new et(je.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function hI(s,e,t,i){return new uI(s,e,t,i)}class dI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fi(t),this.aa=!1):lt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ko="RemoteStore";class fI{constructor(e,t,i,l,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{Zo(this)&&(lt(Ko,"Restarting streams for network reachability change."),await(async function(g){const y=Kt(g);y.Ea.add(4),await Mu(y),y.Va.set("Unknown"),y.Ea.delete(4),await ff(y)})(this))}))})),this.Va=new dI(i,l)}}async function ff(s){if(Zo(s))for(const e of s.Ra)await e(!0)}async function Mu(s){for(const e of s.Ra)await e(!1)}function U_(s,e){const t=Kt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),yy(t)?gy(t):ac(t).O_()&&py(t,e))}function my(s,e){const t=Kt(s),i=ac(t);t.Ia.delete(e),i.O_()&&z_(t,e),t.Ia.size===0&&(i.O_()?i.L_():Zo(t)&&t.Va.set("Unknown"))}function py(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($t.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ac(s).Z_(e)}function z_(s,e){s.da.$e(e),ac(s).X_(e)}function gy(s){s.da=new iA({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),ac(s).start(),s.Va.ua()}function yy(s){return Zo(s)&&!ac(s).x_()&&s.Ia.size>0}function Zo(s){return Kt(s).Ea.size===0}function F_(s){s.da=void 0}async function mI(s){s.Va.set("Online")}async function pI(s){s.Ia.forEach(((e,t)=>{py(s,e)}))}async function gI(s,e){F_(s),yy(s)?(s.Va.ha(e),gy(s)):s.Va.set("Unknown")}async function yI(s,e,t){if(s.Va.set("Online"),e instanceof j_&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,h),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){lt(Ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ud(s,i)}else if(e instanceof wd?s.da.Xe(e):e instanceof T_?s.da.st(e):s.da.tt(e),!t.isEqual($t.min()))try{const i=await O_(s.localStore);t.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const w=u.Ia.get(y);w&&u.Ia.set(y,w.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const w=u.Ia.get(g);if(!w)return;u.Ia.set(g,w.withResumeToken(tr.EMPTY_BYTE_STRING,w.snapshotVersion)),z_(u,g);const k=new Xi(w.target,g,y,w.sequenceNumber);py(u,k)})),u.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(i){lt(Ko,"Failed to raise snapshot:",i),await Ud(s,i)}}async function Ud(s,e,t){if(!sc(e))throw e;s.Ea.add(1),await Mu(s),s.Va.set("Offline"),t||(t=()=>O_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{lt(Ko,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await ff(s)}))}function q_(s,e){return e().catch((t=>Ud(s,t,e)))}async function mf(s){const e=Kt(s),t=co(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ty;for(;bI(e);)try{const l=await JA(e.localStore,i);if(l===null){e.Ta.length===0&&t.L_();break}i=l.batchId,vI(e,l)}catch(l){await Ud(e,l)}H_(e)&&$_(e)}function bI(s){return Zo(s)&&s.Ta.length<10}function vI(s,e){s.Ta.push(e);const t=co(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function H_(s){return Zo(s)&&!co(s).x_()&&s.Ta.length>0}function $_(s){co(s).start()}async function xI(s){co(s).ra()}async function wI(s){const e=co(s);for(const t of s.Ta)e.ea(t.mutations)}async function _I(s,e,t){const i=s.Ta.shift(),l=oy.from(i,e,t);await q_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await mf(s)}async function kI(s,e){e&&co(s).Y_&&await(async function(i,l){if((function(h){return sA(h)&&h!==je.ABORTED})(l.code)){const u=i.Ta.shift();co(i).B_(),await q_(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await mf(i)}})(s,e),H_(s)&&$_(s)}async function Wx(s,e){const t=Kt(s);t.asyncQueue.verifyOperationInProgress(),lt(Ko,"RemoteStore received new credentials");const i=Zo(t);t.Ea.add(3),await Mu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ff(t)}async function TI(s,e){const t=Kt(s);e?(t.Ea.delete(2),await ff(t)):e||(t.Ea.add(2),await Mu(t),t.Va.set("Unknown"))}function ac(s){return s.ma||(s.ma=(function(t,i,l){const u=Kt(t);return u.sa(),new oI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:mI.bind(null,s),Yo:pI.bind(null,s),t_:gI.bind(null,s),J_:yI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),yy(s)?gy(s):s.Va.set("Unknown")):(await s.ma.stop(),F_(s))}))),s.ma}function co(s){return s.fa||(s.fa=(function(t,i,l){const u=Kt(t);return u.sa(),new lI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:xI.bind(null,s),t_:kI.bind(null,s),ta:wI.bind(null,s),na:_I.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await mf(s)):(await s.fa.stop(),s.Ta.length>0&&(lt(Ko,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class by{constructor(e,t,i,l,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,l,u){const h=Date.now()+i,p=new by(e,t,h,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vy(s,e){if(fi("AsyncQueue",`${e}: ${s}`),sc(s))return new et(je.UNAVAILABLE,`${e}: ${s}`);throw s}class Hl{static emptySet(e){return new Hl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Tt.comparator(t.key,i.key):(t,i)=>Tt.comparator(t.key,i.key),this.keyedMap=Jc(),this.sortedSet=new hs(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Hl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Gx{constructor(){this.ga=new hs(Tt.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Pt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ql{constructor(e,t,i,l,u,h,p,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,l,u){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new Ql(e,t,Hl.emptySet(t),h,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&af(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==i[l].type||!t[l].doc.isEqual(i[l].doc))return!1;return!0}}class jI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class EI{constructor(){this.queries=Kx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const l=Kt(t),u=l.queries;l.queries=Kx(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new et(je.ABORTED,"Firestore shutting down"))}}function Kx(){return new Jo((s=>c_(s)),af)}async function xy(s,e){const t=Kt(s);let i=3;const l=e.query;let u=t.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new jI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(l,!0);break;case 1:u.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(h){const p=vy(h,`Initialization of query '${Ll(e.query)}' failed`);return void e.onError(p)}t.queries.set(l,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&_y(t)}async function wy(s,e){const t=Kt(s),i=e.query;let l=3;const u=t.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function SI(s,e){const t=Kt(s);let i=!1;for(const l of e){const u=l.query,h=t.queries.get(u);if(h){for(const p of h.ba)p.Fa(l)&&(i=!0);h.wa=l}}i&&_y(t)}function NI(s,e,t){const i=Kt(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(t);i.queries.delete(e)}function _y(s){s.Ca.forEach((e=>{e.next()}))}var jg,Yx;(Yx=jg||(jg={})).Ma="default",Yx.Cache="cache";class ky{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Ql(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jg.Cache}}class W_{constructor(e){this.key=e}}class G_{constructor(e){this.key=e}}class CI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=wn(),this.mutatedKeys=wn(),this.eu=u_(e),this.tu=new Hl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new Gx,l=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,h=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((w,k)=>{const T=l.get(w),L=of(this.query,k)?k:null,$=!!T&&this.mutatedKeys.has(T.key),U=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let O=!1;T&&L?T.data.isEqual(L.data)?$!==U&&(i.track({type:3,doc:L}),O=!0):this.su(T,L)||(i.track({type:2,doc:L}),O=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(p=!0)):!T&&L?(i.track({type:0,doc:L}),O=!0):T&&!L&&(i.track({type:1,doc:T}),O=!0,(g||y)&&(p=!0)),O&&(L?(h=h.add(L),u=U?u.add(w):u.delete(w)):(h=h.delete(w),u=u.delete(w)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),u=u.delete(w.key),i.track({type:1,doc:w})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((w,k)=>(function(L,$){const U=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pt(20277,{Vt:O})}};return U(L)-U($)})(w.type,k.type)||this.eu(w.doc,k.doc))),this.ou(i),l=l??!1;const p=t&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,h.length!==0||y?{snapshot:new Ql(this.query,e.tu,u,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Gx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=wn(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new G_(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new W_(i))})),t}cu(e){this.Za=e.ks,this.Ya=wn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ql.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ty="SyncEngine";class RI{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class AI{constructor(e){this.key=e,this.hu=!1}}class II{constructor(e,t,i,l,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Jo((p=>c_(p)),af),this.Iu=new Map,this.Eu=new Set,this.Ru=new hs(Tt.comparator),this.Au=new Map,this.Vu=new uy,this.du={},this.mu=new Map,this.fu=Yl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MI(s,e,t=!0){const i=Z_(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await K_(i,e,t,!0),l}async function DI(s,e){const t=Z_(s);await K_(t,e,!0,!1)}async function K_(s,e,t,i){const l=await ZA(s.localStore,Aa(e)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let p;return i&&(p=await PI(s,e,u,h==="current",l.resumeToken)),s.isPrimaryClient&&t&&U_(s.remoteStore,l),p}async function PI(s,e,t,i,l){s.pu=(k,T,L)=>(async function(U,O,se,Q){let oe=O.view.ru(se);oe.Ss&&(oe=await zx(U.localStore,O.query,!1).then((({documents:R})=>O.view.ru(R,oe))));const ve=Q&&Q.targetChanges.get(O.targetId),Me=Q&&Q.targetMismatches.get(O.targetId)!=null,Ne=O.view.applyChanges(oe,U.isPrimaryClient,ve,Me);return Xx(U,O.targetId,Ne.au),Ne.snapshot})(s,k,T,L);const u=await zx(s.localStore,e,!0),h=new CI(e,u.ks),p=h.ru(u.documents),g=Iu.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",l),y=h.applyChanges(p,s.isPrimaryClient,g);Xx(s,t,y.au);const w=new RI(e,t,h);return s.Tu.set(e,w),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function LI(s,e,t){const i=Kt(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((h=>!af(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await kg(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),t&&my(i.remoteStore,l.targetId),Eg(i,l.targetId)})).catch(nc)):(Eg(i,l.targetId),await kg(i.localStore,l.targetId,!0))}async function OI(s,e){const t=Kt(s),i=t.Tu.get(e),l=t.Iu.get(i.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),my(t.remoteStore,i.targetId))}async function VI(s,e,t){const i=$I(s);try{const l=await(function(h,p){const g=Kt(h),y=yt.now(),w=p.reduce(((L,$)=>L.add($.key)),wn());let k,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let $=mi(),U=wn();return g.xs.getEntries(L,w).next((O=>{$=O,$.forEach(((se,Q)=>{Q.isValidDocument()||(U=U.add(se))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,$))).next((O=>{k=O;const se=[];for(const Q of p){const oe=JR(Q,k.get(Q.key).overlayedDocument);oe!=null&&se.push(new po(Q.key,oe,t_(oe.value.mapValue),br.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,se,p)})).next((O=>{T=O;const se=O.applyToLocalDocumentSet(k,U);return g.documentOverlayCache.saveOverlays(L,O.batchId,se)}))})).then((()=>({batchId:T.batchId,changes:d_(k)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(h,p,g){let y=h.du[h.currentUser.toKey()];y||(y=new hs(xn)),y=y.insert(p,g),h.du[h.currentUser.toKey()]=y})(i,l.batchId,t),await Du(i,l.changes),await mf(i.remoteStore)}catch(l){const u=vy(l,"Failed to persist write");t.reject(u)}}async function Y_(s,e){const t=Kt(s);try{const i=await QA(t.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=t.Au.get(u);h&&(Bn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?Bn(h.hu,14607):l.removedDocuments.size>0&&(Bn(h.hu,42227),h.hu=!1))})),await Du(t,i,e)}catch(i){await nc(i)}}function Qx(s,e,t){const i=Kt(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const l=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(h,p){const g=Kt(h);g.onlineState=p;let y=!1;g.queries.forEach(((w,k)=>{for(const T of k.ba)T.va(p)&&(y=!0)})),y&&_y(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function BI(s,e,t){const i=Kt(s);i.sharedClientState.updateQueryState(e,"rejected",t);const l=i.Au.get(e),u=l&&l.key;if(u){let h=new hs(Tt.comparator);h=h.insert(u,or.newNoDocument(u,$t.min()));const p=wn().add(u),g=new hf($t.min(),new Map,new hs(xn),h,p);await Y_(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),jy(i)}else await kg(i.localStore,e,!1).then((()=>Eg(i,e,t))).catch(nc)}async function UI(s,e){const t=Kt(s),i=e.batch.batchId;try{const l=await YA(t.localStore,e);X_(t,i,null),Q_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Du(t,l)}catch(l){await nc(l)}}async function zI(s,e,t){const i=Kt(s);try{const l=await(function(h,p){const g=Kt(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return g.mutationQueue.lookupMutationBatch(y,p).next((k=>(Bn(k!==null,37113),w=k.keys(),g.mutationQueue.removeMutationBatch(y,k)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,w,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>g.localDocuments.getDocuments(y,w)))}))})(i.localStore,e);X_(i,e,t),Q_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Du(i,l)}catch(l){await nc(l)}}function Q_(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function X_(s,e,t){const i=Kt(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(t?u.reject(t):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function Eg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||J_(s,i)}))}function J_(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(my(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),jy(s))}function Xx(s,e,t){for(const i of t)i instanceof W_?(s.Vu.addReference(i.key,e),FI(s,i)):i instanceof G_?(lt(Ty,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||J_(s,i.key)):Pt(19791,{wu:i})}function FI(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||(lt(Ty,"New document in limbo: "+t),s.Eu.add(i),jy(s))}function jy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Tt(ss.fromString(e)),i=s.fu.next();s.Au.set(i,new AI(t)),s.Ru=s.Ru.insert(t,i),U_(s.remoteStore,new Xi(Aa(rf(t.path)),i,"TargetPurposeLimboResolution",tf.ce))}}async function Du(s,e,t){const i=Kt(s),l=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const w=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){l.push(y);const w=dy.Es(g.targetId,y);u.push(w)}})))})),await Promise.all(h),i.Pu.J_(l),await(async function(g,y){const w=Kt(g);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>Ie.forEach(y,(T=>Ie.forEach(T.Ts,(L=>w.persistence.referenceDelegate.addReference(k,T.targetId,L))).next((()=>Ie.forEach(T.Is,(L=>w.persistence.referenceDelegate.removeReference(k,T.targetId,L)))))))))}catch(k){if(!sc(k))throw k;lt(fy,"Failed to update sequence numbers: "+k)}for(const k of y){const T=k.targetId;if(!k.fromCache){const L=w.vs.get(T),$=L.snapshotVersion,U=L.withLastLimboFreeSnapshotVersion($);w.vs=w.vs.insert(T,U)}}})(i.localStore,u))}async function qI(s,e){const t=Kt(s);if(!t.currentUser.isEqual(e)){lt(Ty,"User change. New user:",e.toKey());const i=await L_(t.localStore,e);t.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new et(je.CANCELLED,h))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Du(t,i.Ns)}}function HI(s,e){const t=Kt(s),i=t.Au.get(e);if(i&&i.hu)return wn().add(i.key);{let l=wn();const u=t.Iu.get(e);if(!u)return l;for(const h of u){const p=t.Tu.get(h);l=l.unionWith(p.view.nu)}return l}}function Z_(s){const e=Kt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BI.bind(null,e),e.Pu.J_=SI.bind(null,e.eventManager),e.Pu.yu=NI.bind(null,e.eventManager),e}function $I(s){const e=Kt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zI.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=df(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return KA(this.persistence,new $A,e.initialUser,this.serializer)}Cu(e){return new P_(hy.Vi,this.serializer)}Du(e){return new tI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class WI extends zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Bn(this.persistence.referenceDelegate instanceof Bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new RA(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nr.withCacheSize(this.cacheSizeBytes):Nr.DEFAULT;return new P_((i=>Bd.Vi(i,t)),this.serializer)}}class Sg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Qx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=qI.bind(null,this.syncEngine),await TI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new EI})()}createDatastore(e){const t=df(e.databaseInfo.databaseId),i=iI(e.databaseInfo);return hI(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,l,u,h,p){return new fI(i,l,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>Qx(this.syncEngine,t,0)),(function(){return Hx.v()?new Hx:new nI})())}createSyncEngine(e,t){return(function(l,u,h,p,g,y,w){const k=new II(l,u,h,p,g,y);return w&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Kt(t);lt(Ko,"RemoteStore shutting down."),i.Ea.add(5),await Mu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sg.provider={build:()=>new Sg};class Ey{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const uo="FirestoreClient";class GI{constructor(e,t,i,l,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=l,this.user=ir.UNAUTHENTICATED,this.clientId=ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{lt(uo,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(lt(uo,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=vy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Dp(s,e){s.asyncQueue.verifyOperationInProgress(),lt(uo,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await L_(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function Jx(s,e){s.asyncQueue.verifyOperationInProgress();const t=await KI(s);lt(uo,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>Wx(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>Wx(e.remoteStore,l))),s._onlineComponents=e}async function KI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){lt(uo,"Using user provided OfflineComponentProvider");try{await Dp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===je.FAILED_PRECONDITION||l.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;$l("Error using user provided cache. Falling back to memory cache: "+t),await Dp(s,new zd)}}else lt(uo,"Using default OfflineComponentProvider"),await Dp(s,new WI(void 0));return s._offlineComponents}async function ek(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(lt(uo,"Using user provided OnlineComponentProvider"),await Jx(s,s._uninitializedComponentsProvider._online)):(lt(uo,"Using default OnlineComponentProvider"),await Jx(s,new Sg))),s._onlineComponents}function YI(s){return ek(s).then((e=>e.syncEngine))}async function Fd(s){const e=await ek(s),t=e.eventManager;return t.onListen=MI.bind(null,e.syncEngine),t.onUnlisten=LI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=DI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=OI.bind(null,e.syncEngine),t}function QI(s,e,t,i){const l=new Ey(i),u=new ky(e,l,t);return s.asyncQueue.enqueueAndForget((async()=>xy(await Fd(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>wy(await Fd(s),u)))}}function XI(s,e,t={}){const i=new li;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const w=new Ey({next:T=>{w.Nu(),h.enqueueAndForget((()=>wy(u,k)));const L=T.docs.has(p);!L&&T.fromCache?y.reject(new et(je.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&T.fromCache&&g&&g.source==="server"?y.reject(new et(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),k=new ky(rf(p.path),w,{includeMetadataChanges:!0,Ka:!0});return xy(u,k)})(await Fd(s),s.asyncQueue,e,t,i))),i.promise}function JI(s,e,t={}){const i=new li;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const w=new Ey({next:T=>{w.Nu(),h.enqueueAndForget((()=>wy(u,k))),T.fromCache&&g.source==="server"?y.reject(new et(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),k=new ky(p,w,{includeMetadataChanges:!0,Ka:!0});return xy(u,k)})(await Fd(s),s.asyncQueue,e,t,i))),i.promise}function ZI(s,e){const t=new li;return s.asyncQueue.enqueueAndForget((async()=>VI(await YI(s),e,t))),t.promise}function tk(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const eM="ComponentProvider",Zx=new Map;function tM(s,e,t,i,l){return new wR(s,e,t,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,tk(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const nk="firestore.googleapis.com",e2=!0;class t2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new et(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nk,this.ssl=e2}else this.host=e.host,this.ssl=e.ssl??e2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=D_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NA)throw new et(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tk(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new et(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new et(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new et(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,t,i,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Z4;switch(i.type){case"firstParty":return new sR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new et(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Zx.get(t);i&&(lt(eM,"Removing Datastore"),Zx.delete(t),i.terminate())})(this),Promise.resolve()}}function nM(s,e,t,i={}){s=yr(s,pf);const l=ho(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;l&&(Vg(`https://${p}`),Bg("Firestore",!0)),u.host!==nk&&u.host!==p&&$l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!qo(g,h)&&(s._setSettings(g),i.mockUserToken)){let y,w;if(typeof i.mockUserToken=="string")y=i.mockUserToken,w=ir.MOCK_USER;else{y=X2(i.mockUserToken,s._app?.options.projectId);const k=i.mockUserToken.sub||i.mockUserToken.user_id;if(!k)throw new et(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new ir(k)}s._authCredentials=new eR(new qw(y,w))}}class yi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class ys{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ys(this.firestore,e,this._key)}toJSON(){return{type:ys._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ru(t,ys._jsonSchema))return new ys(e,i||null,new Tt(ss.fromString(t.referencePath)))}}ys._jsonSchemaVersion="firestore/documentReference/1.0",ys._jsonSchema={type:Ps("string",ys._jsonSchemaVersion),referencePath:Ps("string")};class so extends yi{constructor(e,t,i){super(e,t,rf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ys(this.firestore,null,new Tt(e))}withConverter(e){return new so(this.firestore,e,this._path)}}function Bt(s,e,...t){if(s=Zn(s),Hw("collection","path",e),s instanceof pf){const i=ss.fromString(e,...t);return mx(i),new so(s,null,i)}{if(!(s instanceof ys||s instanceof so))throw new et(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ss.fromString(e,...t));return mx(i),new so(s.firestore,null,i)}}function Ge(s,e,...t){if(s=Zn(s),arguments.length===1&&(e=ey.newId()),Hw("doc","path",e),s instanceof pf){const i=ss.fromString(e,...t);return fx(i),new ys(s,null,new Tt(i))}{if(!(s instanceof ys||s instanceof so))throw new et(je.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ss.fromString(e,...t));return fx(i),new ys(s.firestore,s instanceof so?s.converter:null,new Tt(i))}}const n2="AsyncQueue";class s2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new V_(this,"async_queue_retry"),this._c=()=>{const i=Mp();i&&lt(n2,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Mp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Mp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new li;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!sc(e))throw e;lt(n2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,fi("INTERNAL UNHANDLED ERROR: ",r2(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=by.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Pt(47125,{Pc:r2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function r2(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Pa extends pf{constructor(e,t,i,l){super(e,t,i,l),this.type="firestore",this._queue=new s2,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s2(e),this._firestoreClient=void 0,await e}}}function sM(s,e){const t=typeof s=="object"?s:qg(),i=typeof s=="string"?s:Dd,l=Qd(t,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=K2("firestore");u&&nM(l,...u)}return l}function Pu(s){if(s._terminated)throw new et(je.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||rM(s),s._firestoreClient}function rM(s){const e=s._freezeSettings(),t=tM(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new GI(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ea(tr.fromBase64String(e))}catch(t){throw new et(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ea(tr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ea._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ru(e,ea._jsonSchema))return ea.fromBase64String(e.bytes)}}ea._jsonSchemaVersion="firestore/bytes/1.0",ea._jsonSchema={type:Ps("string",ea._jsonSchemaVersion),bytes:Ps("string")};class gf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new et(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._methodName=e}}class Ma{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new et(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new et(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xn(this._lat,e._lat)||xn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ma._jsonSchemaVersion}}static fromJSON(e){if(Ru(e,Ma._jsonSchema))return new Ma(e.latitude,e.longitude)}}Ma._jsonSchemaVersion="firestore/geoPoint/1.0",Ma._jsonSchema={type:Ps("string",Ma._jsonSchemaVersion),latitude:Ps("number"),longitude:Ps("number")};class ma{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ma._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ru(e,ma._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ma(e.vectorValues);throw new et(je.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ma._jsonSchemaVersion="firestore/vectorValue/1.0",ma._jsonSchema={type:Ps("string",ma._jsonSchemaVersion),vectorValues:Ps("object")};const aM=/^__.*__$/;class iM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new po(e,this.data,this.fieldMask,t,this.fieldTransforms):new Au(e,this.data,t,this.fieldTransforms)}}class sk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new po(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rk(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pt(40011,{dataSource:s})}}class Sy{constructor(e,t,i,l,u,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Sy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return qd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(rk(this.dataSource)&&aM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class oM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||df(e)}createContext(e,t,i,l=!1){return new Sy({dataSource:e,methodName:t,targetDoc:i,path:er.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ou(s){const e=s._freezeSettings(),t=df(s._databaseId);return new oM(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Ny(s,e,t,i,l,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,t,l);Ay("Data must be an object, but it was:",h,i);const p=ok(i,h);let g,y;if(u.merge)g=new Ur(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const w=[];for(const k of u.mergeFields){const T=Yo(e,k,t);if(!h.contains(T))throw new et(je.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);uk(w,T)||w.push(T)}g=new Ur(w),y=h.fieldTransforms.filter((k=>g.covers(k.field)))}else g=null,y=h.fieldTransforms;return new iM(new Cr(p),g,y)}class yf extends Lu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yf}}class Cy extends Lu{_toFieldTransform(e){return new x_(e.path,new bu)}isEqual(e){return e instanceof Cy}}class Ry extends Lu{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new wu(e.serializer,p_(e.serializer,this.Vc));return new x_(e.path,t)}isEqual(e){return e instanceof Ry&&this.Vc===e.Vc}}function ak(s,e,t,i){const l=s.createContext(1,e,t);Ay("Data must be an object, but it was:",l,i);const u=[],h=Cr.empty();mo(i,((g,y)=>{const w=ck(e,g,t);y=Zn(y);const k=l.childContextForFieldPath(w);if(y instanceof yf)u.push(w);else{const T=Vu(y,k);T!=null&&(u.push(w),h.set(w,T))}}));const p=new Ur(u);return new sk(h,p,l.fieldTransforms)}function ik(s,e,t,i,l,u){const h=s.createContext(1,e,t),p=[Yo(e,i,t)],g=[l];if(u.length%2!=0)throw new et(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)p.push(Yo(e,u[T])),g.push(u[T+1]);const y=[],w=Cr.empty();for(let T=p.length-1;T>=0;--T)if(!uk(y,p[T])){const L=p[T];let $=g[T];$=Zn($);const U=h.childContextForFieldPath(L);if($ instanceof yf)y.push(L);else{const O=Vu($,U);O!=null&&(y.push(L),w.set(L,O))}}const k=new Ur(y);return new sk(w,k,h.fieldTransforms)}function lM(s,e,t,i=!1){return Vu(t,s.createContext(i?4:3,e))}function Vu(s,e){if(lk(s=Zn(s)))return Ay("Unsupported field value:",e,s),ok(s,e);if(s instanceof Lu)return(function(i,l){if(!rk(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let h=0;for(const p of i){let g=Vu(p,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=Zn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return p_(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=yt.fromDate(i);return{timestampValue:Vd(l.serializer,u)}}if(i instanceof yt){const u=new yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vd(l.serializer,u)}}if(i instanceof Ma)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ea)return{bytesValue:E_(l.serializer,i._byteString)};if(i instanceof ys){const u=l.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:cy(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof ma)return(function(h,p){const g=h instanceof ma?h.toArray():h;return{mapValue:{fields:{[Zw]:{stringValue:e_},[Pd]:{arrayValue:{values:g.map((w=>{if(typeof w!="number")throw p.createError("VectorValues must only contain numeric values.");return iy(p.serializer,w)}))}}}}}})(i,l);if(M_(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${ef(i)}`)})(s,e)}function ok(s,e){const t={};return Gw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mo(s,((i,l)=>{const u=Vu(l,e.childContextForField(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function lk(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof yt||s instanceof Ma||s instanceof ea||s instanceof ys||s instanceof Lu||s instanceof ma||M_(s))}function Ay(s,e,t){if(!lk(t)||!$w(t)){const i=ef(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Yo(s,e,t){if((e=Zn(e))instanceof gf)return e._internalPath;if(typeof e=="string")return ck(s,e);throw qd("Field path arguments must be of type string or ",s,!1,void 0,t)}const cM=new RegExp("[~\\*/\\[\\]]");function ck(s,e,t){if(e.search(cM)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new gf(...e.split("."))._internalPath}catch{throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function qd(s,e,t,i,l){const u=i&&!i.isEmpty(),h=l!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${l}`),g+=")"),new et(je.INVALID_ARGUMENT,p+s+g)}function uk(s,e){return s.some((t=>t.isEqual(e)))}class uM{convertValue(e,t="none"){switch(lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ts(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return mo(e,((l,u)=>{i[l]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[Pd].arrayValue?.values?.map((i=>Ts(i.doubleValue)));return new ma(t)}convertGeoPoint(e){return new Ma(Ts(e.latitude),Ts(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=sf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(mu(e));default:return null}}convertTimestamp(e){const t=io(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ss.fromString(e);Bn(I_(i),9688,{name:e});const l=new pu(i.get(1),i.get(3)),u=new Tt(i.popFirst(5));return l.isEqual(t)||fi(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class Iy extends uM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ea(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ys(this.firestore,null,t)}}function ta(){return new Cy("serverTimestamp")}function Vo(s){return new Ry("increment",s)}const a2="@firebase/firestore",i2="4.10.0";function o2(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const l=t;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class hk{constructor(e,t,i,l,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ys(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Yo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class hM extends hk{data(){return super.data()}}function dk(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new et(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class My{}class Dy extends My{}function Nn(s,e,...t){let i=[];e instanceof My&&i.push(e),i=i.concat(t),(function(u){const h=u.filter((g=>g instanceof Py)).length,p=u.filter((g=>g instanceof bf)).length;if(h>1||h>0&&p>0)throw new et(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class bf extends Dy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new bf(e,t,i)}_apply(e){const t=this._parse(e);return fk(e._query,t),new yi(e.firestore,e.converter,bg(e._query,t))}_parse(e){const t=Ou(e.firestore);return(function(u,h,p,g,y,w,k){let T;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new et(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){c2(k,w);const $=[];for(const U of k)$.push(l2(g,u,U));T={arrayValue:{values:$}}}else T=l2(g,u,k)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||c2(k,w),T=lM(p,h,k,w==="in"||w==="not-in");return Ds.create(y,w,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function un(s,e,t){const i=e,l=Yo("where",s);return bf._create(l,i,t)}class Py extends My{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Py(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ga.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,u){let h=l;const p=u.getFlattenedFilters();for(const g of p)fk(h,g),h=bg(h,g)})(e._query,t),new yi(e.firestore,e.converter,bg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ly extends Dy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ly(e,t)}_apply(e){const t=(function(l,u,h){if(l.startAt!==null)throw new et(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new et(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yu(u,h)})(e._query,this._field,this._direction);return new yi(e.firestore,e.converter,BR(e._query,t))}}function Hd(s,e="asc"){const t=e,i=Yo("orderBy",s);return Ly._create(i,t)}class Oy extends Dy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Oy(e,t,i)}_apply(e){return new yi(e.firestore,e.converter,Od(e._query,this._limit,this._limitType))}}function $d(s){return uR("limit",s),Oy._create("limit",s,"F")}function l2(s,e,t){if(typeof(t=Zn(t))=="string"){if(t==="")throw new et(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!l_(e)&&t.indexOf("/")!==-1)throw new et(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ss.fromString(t));if(!Tt.isDocumentKey(i))throw new et(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return _x(s,new Tt(i))}if(t instanceof ys)return _x(s,t._key);throw new et(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ef(t)}.`)}function c2(s,e){if(!Array.isArray(s)||s.length===0)throw new et(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fk(s,e){const t=(function(l,u){for(const h of l)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new et(je.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(je.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Vy(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bo extends hk{constructor(e,t,i,l,u,h){super(e,t,i,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Yo("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new et(je.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Bo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bo._jsonSchema={type:Ps("string",Bo._jsonSchemaVersion),bundleSource:Ps("string","DocumentSnapshot"),bundleName:Ps("string"),bundle:Ps("string")};class _d extends Bo{data(e={}){return super.data(e)}}class Uo{constructor(e,t,i,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new eu(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new _d(this._firestore,this._userDataWriter,i.key,i,new eu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new et(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((p=>{const g=new _d(l._firestore,l._userDataWriter,p.doc.key,p.doc,new eu(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new _d(l._firestore,l._userDataWriter,p.doc.key,p.doc,new eu(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,w=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),w=h.indexOf(p.doc.key)),{type:dM(p.type),doc:g,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new et(je.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ey.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dM(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pt(61501,{type:s})}}Uo._jsonSchemaVersion="firestore/querySnapshot/1.0",Uo._jsonSchema={type:Ps("string",Uo._jsonSchemaVersion),bundleSource:Ps("string","QuerySnapshot"),bundleName:Ps("string"),bundle:Ps("string")};class fM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ou(e)}set(e,t,i){this._verifyNotCommitted();const l=Pp(e,this._firestore),u=Vy(l.converter,t,i),h=Ny(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,i);return this._mutations.push(h.toMutation(l._key,br.none())),this}update(e,t,i,...l){this._verifyNotCommitted();const u=Pp(e,this._firestore);let h;return h=typeof(t=Zn(t))=="string"||t instanceof gf?ik(this._dataReader,"WriteBatch.update",u._key,t,i,l):ak(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,br.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Pp(e,this._firestore);return this._mutations=this._mutations.concat(new uf(t._key,br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new et(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Pp(s,e){if((s=Zn(s)).firestore!==e)throw new et(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function In(s){s=yr(s,ys);const e=yr(s.firestore,Pa),t=Pu(e);return XI(t,s._key).then((i=>pk(e,s,i)))}function jn(s){s=yr(s,yi);const e=yr(s.firestore,Pa),t=Pu(e),i=new Iy(e);return dk(s._query),JI(t,s._query).then((l=>new Uo(e,i,s,l)))}function Hn(s,e,t){s=yr(s,ys);const i=yr(s.firestore,Pa),l=Vy(s.converter,e,t),u=Ou(i);return Bu(i,[Ny(u,"setDoc",s._key,l,s.converter!==null,t).toMutation(s._key,br.none())])}function si(s,e,t,...i){s=yr(s,ys);const l=yr(s.firestore,Pa),u=Ou(l);let h;return h=typeof(e=Zn(e))=="string"||e instanceof gf?ik(u,"updateDoc",s._key,e,t,i):ak(u,"updateDoc",s._key,e),Bu(l,[h.toMutation(s._key,br.exists(!0))])}function pr(s){return Bu(yr(s.firestore,Pa),[new uf(s._key,br.none())])}function ci(s,e){const t=yr(s.firestore,Pa),i=Ge(s),l=Vy(s.converter,e),u=Ou(s.firestore);return Bu(t,[Ny(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,br.exists(!1))]).then((()=>i))}function mk(s,...e){s=Zn(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||o2(e[i])||(t=e[i++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(o2(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,h,p;if(s instanceof ys)h=yr(s.firestore,Pa),p=rf(s._key.path),u={next:y=>{e[i]&&e[i](pk(h,s,y))},error:e[i+1],complete:e[i+2]};else{const y=yr(s,yi);h=yr(y.firestore,Pa),p=y._query;const w=new Iy(h);u={next:k=>{e[i]&&e[i](new Uo(h,w,y,k))},error:e[i+1],complete:e[i+2]},dk(s._query)}const g=Pu(h);return QI(g,p,l,u)}function Bu(s,e){const t=Pu(s);return ZI(t,e)}function pk(s,e,t){const i=t.docs.get(e._key),l=new Iy(s);return new Bo(s,l,e._key,i,new eu(t.hasPendingWrites,t.fromCache),e.converter)}function u2(s){return s=yr(s,Pa),Pu(s),new fM(s,(e=>Bu(s,e)))}(function(e,t=!0){J4(Xo),Ho(new ro("firestore",((i,{instanceIdentifier:l,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new Pa(new tR(i.getProvider("auth-internal")),new rR(h,i.getProvider("app-check-internal")),_R(h,l),h);return u={useFetchStreams:t,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Na(a2,i2,e),Na(a2,i2,"esm2020")})();var mM="firebase",pM="12.8.0";Na(mM,pM,"app");const gk="firebasestorage.googleapis.com",yk="storageBucket",gM=120*1e3,yM=600*1e3;class vs extends Oa{constructor(e,t,i=0){super(Lp(e),`Firebase Storage: ${t} (${Lp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Lp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var bs;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bs||(bs={}));function Lp(s){return"storage/"+s}function By(){const s="An unknown error occurred, please check the error payload for server response.";return new vs(bs.UNKNOWN,s)}function bM(s){return new vs(bs.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function vM(s){return new vs(bs.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function xM(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new vs(bs.UNAUTHENTICATED,s)}function wM(){return new vs(bs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _M(s){return new vs(bs.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function kM(){return new vs(bs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TM(){return new vs(bs.CANCELED,"User canceled the upload/download.")}function jM(s){return new vs(bs.INVALID_URL,"Invalid URL '"+s+"'.")}function EM(s){return new vs(bs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function SM(){return new vs(bs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yk+"' property when initializing the app?")}function NM(){return new vs(bs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CM(){return new vs(bs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function RM(s){return new vs(bs.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ng(s){return new vs(bs.INVALID_ARGUMENT,s)}function bk(){return new vs(bs.APP_DELETED,"The Firebase app was deleted.")}function AM(s){return new vs(bs.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ou(s,e){return new vs(bs.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Wc(s){throw new vs(bs.INTERNAL_ERROR,"Internal error: "+s)}class gr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=gr.makeFromUrl(e,t)}catch{return new gr(e,"")}if(i.path==="")return i;throw EM(e)}static makeFromUrl(e,t){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(ve){ve.path.charAt(ve.path.length-1)==="/"&&(ve.path_=ve.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+l+h,"i"),g={bucket:1,path:3};function y(ve){ve.path_=decodeURIComponent(ve.path)}const w="v[A-Za-z0-9_]+",k=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",L=new RegExp(`^https?://${k}/${w}/b/${l}/o${T}`,"i"),$={bucket:1,path:3},U=t===gk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",se=new RegExp(`^https?://${U}/${l}/${O}`,"i"),oe=[{regex:p,indices:g,postModify:u},{regex:L,indices:$,postModify:y},{regex:se,indices:{bucket:1,path:2},postModify:y}];for(let ve=0;ve<oe.length;ve++){const Me=oe[ve],Ne=Me.regex.exec(e);if(Ne){const R=Ne[Me.indices.bucket];let S=Ne[Me.indices.path];S||(S=""),i=new gr(R,S),Me.postModify(i);break}}if(i==null)throw jM(e);return i}}class IM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function MM(s,e,t){let i=1,l=null,u=null,h=!1,p=0;function g(){return p===2}let y=!1;function w(...O){y||(y=!0,e.apply(null,O))}function k(O){l=setTimeout(()=>{l=null,s(L,g())},O)}function T(){u&&clearTimeout(u)}function L(O,...se){if(y){T();return}if(O){T(),w.call(null,O,...se);return}if(g()||h){T(),w.call(null,O,...se);return}i<64&&(i*=2);let oe;p===1?(p=2,oe=0):oe=(i+Math.random())*1e3,k(oe)}let $=!1;function U(O){$||($=!0,T(),!y&&(l!==null?(O||(p=2),clearTimeout(l),k(0)):O||(p=1)))}return k(0),u=setTimeout(()=>{h=!0,U(!0)},t),U}function DM(s){s(!1)}function PM(s){return s!==void 0}function LM(s){return typeof s=="object"&&!Array.isArray(s)}function Uy(s){return typeof s=="string"||s instanceof String}function h2(s){return zy()&&s instanceof Blob}function zy(){return typeof Blob<"u"}function Cg(s,e,t,i){if(i<e)throw Ng(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>t)throw Ng(`Invalid value for '${s}'. Expected ${t} or less.`)}function vf(s,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${s}`}function vk(s){const e=encodeURIComponent;let t="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);t=t+l+"&"}return t=t.slice(0,-1),t}var zo;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(zo||(zo={}));function OM(s,e){const t=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||l||u}class VM{constructor(e,t,i,l,u,h,p,g,y,w,k,T=!0,L=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=k,this.retry=T,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(($,U)=>{this.resolve_=$,this.reject_=U,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new sd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===zo.NO_ERROR,g=u.getStatus();if(!p||OM(g,this.additionalRetryCodes_)&&this.retry){const w=u.getErrorCode()===zo.ABORT;i(!1,new sd(!1,null,w));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new sd(y,u))})},t=(i,l)=>{const u=this.resolve_,h=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());PM(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=By();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(l.canceled){const g=this.appDelete_?bk():TM();h(g)}else{const g=kM();h(g)}};this.canceled_?t(!1,new sd(!1,null,!0)):this.backoffId_=MM(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sd{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function BM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function UM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function FM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function qM(s,e,t,i,l,u,h=!0,p=!1){const g=vk(s.urlParams),y=s.url+g,w=Object.assign({},s.headers);return zM(w,e),BM(w,t),UM(w,u),FM(w,i),new VM(y,s.method,w,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,h,p)}function HM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $M(...s){const e=HM();if(e!==void 0){const t=new e;for(let i=0;i<s.length;i++)t.append(s[i]);return t.getBlob()}else{if(zy())return new Blob(s);throw new vs(bs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WM(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function GM(s){if(typeof atob>"u")throw RM("base-64");return atob(s)}const Sa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Op{constructor(e,t){this.data=e,this.contentType=t||null}}function KM(s,e){switch(s){case Sa.RAW:return new Op(xk(e));case Sa.BASE64:case Sa.BASE64URL:return new Op(wk(s,e));case Sa.DATA_URL:return new Op(QM(e),XM(e))}throw By()}function xk(s){const e=[];for(let t=0;t<s.length;t++){let i=s.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++t);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function YM(s){let e;try{e=decodeURIComponent(s)}catch{throw ou(Sa.DATA_URL,"Malformed data URL.")}return xk(e)}function wk(s,e){switch(s){case Sa.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw ou(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case Sa.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw ou(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=GM(e)}catch(l){throw l.message.includes("polyfill")?l:ou(s,"Invalid character found")}const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i}class _k{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ou(Sa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=JM(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function QM(s){const e=new _k(s);return e.base64?wk(Sa.BASE64,e.rest):YM(e.rest)}function XM(s){return new _k(s).contentType}function JM(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Qi{constructor(e,t){let i=0,l="";h2(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(h2(this.data_)){const i=this.data_,l=WM(i,e,t);return l===null?null:new Qi(l)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Qi(i,!0)}}static getBlob(...e){if(zy()){const t=e.map(i=>i instanceof Qi?i.data_:i);return new Qi($M.apply(null,t))}else{const t=e.map(h=>Uy(h)?KM(Sa.RAW,h).data:h.data_);let i=0;t.forEach(h=>{i+=h.byteLength});const l=new Uint8Array(i);let u=0;return t.forEach(h=>{for(let p=0;p<h.length;p++)l[u++]=h[p]}),new Qi(l,!0)}}uploadData(){return this.data_}}function Fy(s){let e;try{e=JSON.parse(s)}catch{return null}return LM(e)?e:null}function ZM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function e3(s,e){const t=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?t:s+"/"+t}function kk(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function t3(s,e){return e}class mr{constructor(e,t,i,l){this.server=e,this.local=t||e,this.writable=!!i,this.xform=l||t3}}let rd=null;function n3(s){return!Uy(s)||s.length<2?s:kk(s)}function Tk(){if(rd)return rd;const s=[];s.push(new mr("bucket")),s.push(new mr("generation")),s.push(new mr("metageneration")),s.push(new mr("name","fullPath",!0));function e(u,h){return n3(h)}const t=new mr("name");t.xform=e,s.push(t);function i(u,h){return h!==void 0?Number(h):h}const l=new mr("size");return l.xform=i,s.push(l),s.push(new mr("timeCreated")),s.push(new mr("updated")),s.push(new mr("md5Hash",null,!0)),s.push(new mr("cacheControl",null,!0)),s.push(new mr("contentDisposition",null,!0)),s.push(new mr("contentEncoding",null,!0)),s.push(new mr("contentLanguage",null,!0)),s.push(new mr("contentType",null,!0)),s.push(new mr("metadata","customMetadata",!0)),rd=s,rd}function s3(s,e){function t(){const i=s.bucket,l=s.fullPath,u=new gr(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function r3(s,e,t){const i={};i.type="file";const l=t.length;for(let u=0;u<l;u++){const h=t[u];i[h.local]=h.xform(i,e[h.server])}return s3(i,s),i}function jk(s,e,t){const i=Fy(e);return i===null?null:r3(s,i,t)}function a3(s,e,t,i){const l=Fy(e);if(l===null||!Uy(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(y=>{const w=s.bucket,k=s.fullPath,T="/b/"+h(w)+"/o/"+h(k),L=vf(T,t,i),$=vk({alt:"media",token:y});return L+$})[0]}function i3(s,e){const t={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}const d2="prefixes",f2="items";function o3(s,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[d2])for(const l of t[d2]){const u=l.replace(/\/$/,""),h=s._makeStorageReference(new gr(e,u));i.prefixes.push(h)}if(t[f2])for(const l of t[f2]){const u=s._makeStorageReference(new gr(e,l.name));i.items.push(u)}return i}function l3(s,e,t){const i=Fy(t);return i===null?null:o3(s,e,i)}class qy{constructor(e,t,i,l){this.url=e,this.method=t,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Hy(s){if(!s)throw By()}function c3(s,e){function t(i,l){const u=jk(s,l,e);return Hy(u!==null),u}return t}function u3(s,e){function t(i,l){const u=l3(s,e,l);return Hy(u!==null),u}return t}function h3(s,e){function t(i,l){const u=jk(s,l,e);return Hy(u!==null),a3(u,l,s.host,s._protocol)}return t}function $y(s){function e(t,i){let l;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?l=wM():l=xM():t.getStatus()===402?l=vM(s.bucket):t.getStatus()===403?l=_M(s.path):l=i,l.status=t.getStatus(),l.serverResponse=i.serverResponse,l}return e}function d3(s){const e=$y(s);function t(i,l){let u=e(i,l);return i.getStatus()===404&&(u=bM(s.path)),u.serverResponse=l.serverResponse,u}return t}function f3(s,e,t,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",t.length>0&&(u.delimiter=t),i&&(u.pageToken=i),l&&(u.maxResults=l);const h=e.bucketOnlyServerUrl(),p=vf(h,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,w=new qy(p,g,u3(s,e.bucket),y);return w.urlParams=u,w.errorHandler=$y(e),w}function m3(s,e,t){const i=e.fullServerUrl(),l=vf(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new qy(l,u,h3(s,t),h);return p.errorHandler=d3(e),p}function p3(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function g3(s,e,t){const i=Object.assign({},t);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=p3(null,e)),i}function y3(s,e,t,i,l){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let oe="";for(let ve=0;ve<2;ve++)oe=oe+Math.random().toString().slice(2);return oe}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const y=g3(e,i,l),w=i3(y,t),k="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+w+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",L=Qi.getBlob(k,i,T);if(L===null)throw NM();const $={name:y.fullPath},U=vf(u,s.host,s._protocol),O="POST",se=s.maxUploadRetryTime,Q=new qy(U,O,c3(s,t),se);return Q.urlParams=$,Q.headers=h,Q.body=L.uploadData(),Q.errorHandler=$y(e),Q}class b3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,l,u){if(this.sent_)throw Wc("cannot .send() more than once");if(ho(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Wc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class v3 extends b3{initXhr(){this.xhr_.responseType="text"}}function Wy(){return new v3}class Qo{constructor(e,t){this._service=e,t instanceof gr?this._location=t:this._location=gr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Qo(e,t)}get root(){const e=new gr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kk(this._location.path)}get storage(){return this._service}get parent(){const e=ZM(this._location.path);if(e===null)return null;const t=new gr(this._location.bucket,e);return new Qo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw AM(e)}}function x3(s,e,t){s._throwIfRoot("uploadBytes");const i=y3(s.storage,s._location,Tk(),new Qi(e,!0),t);return s.storage.makeRequestWithTokens(i,Wy).then(l=>({metadata:l,ref:s}))}function w3(s){const e={prefixes:[],items:[]};return Ek(s,e).then(()=>e)}async function Ek(s,e,t){const l=await _3(s,{pageToken:t});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await Ek(s,e,l.nextPageToken)}function _3(s,e){e!=null&&typeof e.maxResults=="number"&&Cg("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=f3(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(i,Wy)}function k3(s){s._throwIfRoot("getDownloadURL");const e=m3(s.storage,s._location,Tk());return s.storage.makeRequestWithTokens(e,Wy).then(t=>{if(t===null)throw CM();return t})}function T3(s,e){const t=e3(s._location.path,e),i=new gr(s._location.bucket,t);return new Qo(s.storage,i)}function j3(s){return/^[A-Za-z]+:\/\//.test(s)}function E3(s,e){return new Qo(s,e)}function Sk(s,e){if(s instanceof Gy){const t=s;if(t._bucket==null)throw SM();const i=new Qo(t,t._bucket);return e!=null?Sk(i,e):i}else return e!==void 0?T3(s,e):s}function S3(s,e){if(e&&j3(e)){if(s instanceof Gy)return E3(s,e);throw Ng("To use ref(service, url), the first argument must be a Storage instance.")}else return Sk(s,e)}function m2(s,e){const t=e?.[yk];return t==null?null:gr.makeFromBucketSpec(t,s)}function N3(s,e,t,i={}){s.host=`${e}:${t}`;const l=ho(e);l&&(Vg(`https://${s.host}/b`),Bg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:X2(u,s.app.options.projectId))}class Gy{constructor(e,t,i,l,u,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=gk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gM,this._maxUploadRetryTime=yM,this._requests=new Set,l!=null?this._bucket=gr.makeFromBucketSpec(l,this._host):this._bucket=m2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gr.makeFromBucketSpec(this._url,e):this._bucket=m2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Cg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Cg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qo(this,e)}_makeRequest(e,t,i,l,u=!0){if(this._deleted)return new IM(bk());{const h=qM(e,this._appId,i,l,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,l).getPromise()}}const p2="@firebase/storage",g2="0.14.0";const Nk="storage";function Vp(s,e,t){return s=Zn(s),x3(s,e,t)}function y2(s){return s=Zn(s),w3(s)}function Fo(s){return s=Zn(s),k3(s)}function Ji(s,e){return s=Zn(s),S3(s,e)}function C3(s=qg(),e){s=Zn(s);const i=Qd(s,Nk).getImmediate({identifier:e}),l=K2("storage");return l&&R3(i,...l),i}function R3(s,e,t,i={}){N3(s,e,t,i)}function A3(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new Gy(t,i,l,e,Xo)}function I3(){Ho(new ro(Nk,A3,"PUBLIC").setMultipleInstances(!0)),Na(p2,g2,""),Na(p2,g2,"esm2020")}I3();const Ck={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},Ky=Fg(Ck),Io=Pw(Ky),be=sM(Ky),Zi=C3(Ky),M3=Fg(Ck,"secondary"),yP=Pw(M3),D3="EYdciKDOi3UYBLk1u8hHams5tmO2",Rk=v.createContext();function Fr(){return v.useContext(Rk)}function P3({children:s}){const[e,t]=v.useState(null),[i,l]=v.useState(!1),[u,h]=v.useState(!1),[p,g]=v.useState(null),[y,w]=v.useState(!0);v.useEffect(()=>{let Q=null;const oe=UC(Io,ve=>{if(t(ve),Q&&(Q(),Q=null),ve)if(ve.uid===D3)l(!0),h(!1),g(null),w(!1);else{l(!1);const Me=Nn(Bt(be,"clients"),un("uid","==",ve.uid)),Ne=async()=>{const R=localStorage.getItem("mcf_clientId");if(R)try{const S=await In(Ge(be,"clients",R));S.exists()&&(h(!0),g({id:S.id,...S.data()}))}catch(S){console.error("Direct client read failed:",S)}};Q=mk(Me,async R=>{if(R.empty)await Ne();else{const S=R.docs[0];h(!0),g({id:S.id,...S.data()});try{localStorage.setItem("mcf_clientId",S.id)}catch{}}w(!1)},async R=>{console.error("Error listening to client data:",R),await Ne(),w(!1)})}else l(!1),h(!1),g(null),w(!1)});return()=>{oe(),Q&&Q()}},[]);const se={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:Q=>{g(oe=>oe?{...oe,...Q}:Q)},resolveClient:async()=>{if(p)return p;const Q=localStorage.getItem("mcf_clientId");if(Q)try{const oe=await In(Ge(be,"clients",Q));if(oe.exists()){const ve={id:oe.id,...oe.data()};return h(!0),g(ve),ve}}catch(oe){console.error("resolveClient direct read failed:",oe)}if(e){const oe=Nn(Bt(be,"clients"),un("uid","==",e.uid)),ve=await jn(oe);if(!ve.empty){const Me={id:ve.docs[0].id,...ve.docs[0].data()};return h(!0),g(Me),Me}}return null},login:async(Q,oe,ve=!0)=>(await ex(Io,ve?ug:Qg),await OC(Io,Q,oe)),signup:async(Q,oe,ve)=>{await ex(Io,ug);const Me=await LC(Io,oe.trim().toLowerCase(),ve),Ne=Me.user,R=Ge(Bt(be,"clients")),S={uid:Ne.uid,name:Q.trim(),email:oe.trim().toLowerCase(),clientType:"core_buddy",coreBuddyAccess:!0,status:"active",tier:"free",subscriptionStatus:null,signupSource:"self_signup",createdAt:yt.now()};await Hn(R,S),h(!0),g({id:R.id,...S});try{localStorage.setItem("mcf_clientId",R.id)}catch{}return Me},logout:()=>{try{localStorage.removeItem("mcf_clientId")}catch{}return zC(Io)},resetPassword:Q=>PC(Io,Q),loading:y};return a.jsx(Rk.Provider,{value:se,children:s})}const Ak=v.createContext();function Va(){return v.useContext(Ak)}function L3({children:s}){const[e,t]=v.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=v.useState(()=>localStorage.getItem("accent")||"red");v.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),v.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),t(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(Ak.Provider,{value:p,children:s})}const Ik=v.createContext();function xf(){return v.useContext(Ik)}const O3=["nutrition","consistency","personalBests","achievements","buddies","programmes","leaderboard"],V3=[5,10],B3=1;function U3({children:s}){const{clientData:e}=Fr(),t=v.useMemo(()=>{const i=e?.tier||"free",l=e?.subscriptionStatus||null,u=e&&e.signupSource!=="self_signup",h=i==="premium"||!!u;function p(g){return h?!0:!O3.includes(g)}return{tier:i,subscriptionStatus:l,isPremium:h,canAccess:p,FREE_RANDOMISER_DURATIONS:V3,FREE_RANDOMISER_WEEKLY_LIMIT:B3}},[e?.tier,e?.subscriptionStatus,e?.signupSource]);return a.jsx(Ik.Provider,{value:t,children:s})}function z3(s){if(s?.signupSource==="self_signup"&&!s?.onboardingComplete)return"/onboarding";const e=s?.clientType;return e==="core_buddy"?"/client/core-buddy":e==="circuit_vip"||e==="circuit_dropin"?"/client/circuit":"/client"}function F3(){const[s,e]=v.useState(""),[t,i]=v.useState(""),[l,u]=v.useState(!0),[h,p]=v.useState(""),[g,y]=v.useState(!1),[w,k]=v.useState(!1),[T,L]=v.useState(!1),{login:$,resetPassword:U,currentUser:O,isAdmin:se,isClient:Q,clientData:oe,loading:ve}=Fr(),Me=nr();if(v.useEffect(()=>{!ve&&O&&(se?Me("/dashboard"):Q?Me(z3(oe)):(y(!1),p("No account found. Please sign up or contact your trainer.")))},[ve,O,se,Q,oe,Me]),ve)return null;const Ne=async S=>{S.preventDefault(),p(""),y(!0);try{await $(s,t,l)}catch(I){p(I.message||"Failed to log in"),y(!1)}},R=async S=>{if(S.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await U(s.trim()),L(!0)}catch(I){I.code==="auth/user-not-found"?p("No account found with this email"):p(I.message||"Failed to send reset email")}y(!1)};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:a.jsx("strong",{children:w?"Reset Password":"Sign in as 1-2-1 or a Core Buddy"})})]}),h&&a.jsx("div",{className:"error-message",children:h}),T?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{k(!1),L(!1),p("")},children:"Back to Log In"})]}):w?a.jsxs("form",{onSubmit:R,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:Ne,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:t,onChange:S=>i(S.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:S=>u(S.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!0),p("")},children:"Forgot password?"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>Me("/signup"),children:"Don't have an account? Sign up free"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Mo({feature:s,children:e}){const{canAccess:t}=xf(),i=nr();return t(s)?e:a.jsxs("div",{className:"locked-feature-wrap",children:[a.jsx("div",{className:"locked-feature-bg","aria-hidden":"true",children:e}),a.jsx("div",{className:"locked-feature-overlay",children:a.jsxs("div",{className:"locked-feature-card",children:[a.jsx("div",{className:"locked-icon",children:a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("h2",{children:"Premium Feature"}),a.jsx("p",{children:"Upgrade to Core Buddy Premium to unlock this feature and get full access to everything."}),a.jsx("button",{className:"locked-upgrade-btn",onClick:()=>i("/upgrade"),children:"Upgrade Now"})]})})]})}function La({active:s}){const e=nr(),{clientData:t}=Fr(),{isPremium:i}=xf(),l=t?.clientType==="block"&&t?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{children:"Profile"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:a.jsx("path",{d:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"})}),a.jsx("span",{children:"Workouts"})]}),a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e(i?"/client/core-buddy/nutrition":"/upgrade"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e(i?"/client/core-buddy/buddies":"/upgrade"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),l&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Uu(s,e,t,i,l){const u=[];for(let h=0;h<s;h++){const p=(h*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:t+i*Math.sin(p),x2:e+l*Math.cos(p),y2:t+l*Math.sin(p),thick:h%5===0})}return u}const Yy=Uu(60,100,100,85,96),lu=Uu(60,100,100,78,94),q3=Uu(60,100,100,82,94);Uu(60,50,50,38,46);const H3=Uu(60,40,40,30,37),$3="/login/assets/first_workout-B8SFkzJX.PNG",W3="/login/assets/workouts_10-Z5R3u0xH.PNG",G3="/login/assets/workouts_25-CzxSlcAj.PNG",K3="/login/assets/workouts_50-BpzWup3V.PNG",Y3="/login/assets/workouts_100-D7_r6tn1.PNG",Q3="/login/assets/streak_2-CsRr-XA9.PNG",X3="/login/assets/streak_4-BHO09tbw.PNG",J3="/login/assets/streak_8-DX2UWMko.PNG",Z3="/login/assets/first_pb-aVf_CNWy.PNG",eD="/login/assets/pbs_5-Cippawgg.PNG",tD="/login/assets/pbs_10-CZgGh9Kv.PNG",nD="/login/assets/pbs_100-C67b1wfS.PNG",sD="/login/assets/nutrition_7-CHVV11fj.PNG",rD="/login/assets/leaderboard_join-BLoId4Hz.PNG",aD="/login/assets/habits_7-Dvki70KO.PNG",Wd=[{id:"first_workout",img:$3,name:"First Rep",desc:"Complete your first workout",category:"workouts",threshold:1},{id:"workouts_10",img:W3,name:"On Fire",desc:"Complete 10 workouts",category:"workouts",threshold:10},{id:"workouts_25",img:G3,name:"Dedicated",desc:"Complete 25 workouts",category:"workouts",threshold:25},{id:"workouts_50",img:K3,name:"Unstoppable",desc:"Complete 50 workouts",category:"workouts",threshold:50},{id:"workouts_100",img:Y3,name:"Century",desc:"Complete 100 workouts",category:"workouts",threshold:100},{id:"streak_2",img:Q3,name:"2 Week Streak",desc:"Work out for 2 weeks in a row",category:"streaks",threshold:2},{id:"streak_4",img:X3,name:"Month Strong",desc:"Work out for 4 weeks in a row",category:"streaks",threshold:4},{id:"streak_8",img:J3,name:"Iron Will",desc:"Work out for 8 weeks in a row",category:"streaks",threshold:8},{id:"first_pb",img:Z3,name:"First PB",desc:"Set your first personal best",category:"pbs",threshold:1},{id:"pbs_5",img:eD,name:"PB Hunter",desc:"Set 5 personal bests",category:"pbs",threshold:5},{id:"pbs_10",img:tD,name:"PB Machine",desc:"Set 10 personal bests",category:"pbs",threshold:10},{id:"pbs_100",img:nD,name:"PB Legend",desc:"Set 100 personal bests",category:"pbs",threshold:100},{id:"nutrition_7",img:sD,name:"Macro Master",desc:"Hit your macro targets 7 days in a row",category:"nutrition",threshold:7},{id:"leaderboard_join",img:rD,name:"Competitor",desc:"Join the leaderboard",category:"leaderboard",threshold:1},{id:"habits_7",img:aD,name:"Habit Streak",desc:"Complete your daily habits 7 days in a row",category:"habits",threshold:7}];function iD({steps:s,onFinish:e,active:t}){const[i,l]=v.useState(0),[u,h]=v.useState(null),[p,g]=v.useState("below"),[y,w]=v.useState(!1),k=v.useRef(null),T=v.useRef(t);T.current=t,v.useEffect(()=>{t||l(0)},[t]),v.useEffect(()=>{if(!t)return;const Me=Ne=>Ne.preventDefault();return document.addEventListener("touchmove",Me,{passive:!1}),document.addEventListener("wheel",Me,{passive:!1}),document.body.style.overflow="hidden",()=>{document.removeEventListener("touchmove",Me),document.removeEventListener("wheel",Me),document.body.style.overflow=""}},[t]);const L=v.useMemo(()=>t?s.filter(Me=>document.querySelector(Me.selector)):[],[t]),$=L[i],U=i===L.length-1,O=$?.selector,se=v.useCallback(()=>{if(!O)return;const Me=document.querySelector(O);if(!Me){h(null);return}const Ne=Me.getBoundingClientRect(),R=8;h({top:Ne.top-R,left:Ne.left-R,width:Ne.width+R*2,height:Ne.height+R*2});const S=window.innerHeight-Ne.bottom;g(S<260?"above":"below")},[O]);if(v.useEffect(()=>{if(!t||!O)return;w(!0);const Me=document.querySelector(O);if(Me){document.body.style.overflow="",Me.scrollIntoView({behavior:"smooth",block:"center"});const Ne=setTimeout(()=>{T.current&&(document.body.style.overflow="hidden"),se(),w(!1)},400);return()=>{clearTimeout(Ne),T.current&&(document.body.style.overflow="hidden")}}},[t,i,O,se]),v.useEffect(()=>{if(!t)return;const Me=()=>{k.current&&cancelAnimationFrame(k.current),k.current=requestAnimationFrame(se)};return window.addEventListener("scroll",Me,!0),window.addEventListener("resize",Me),()=>{window.removeEventListener("scroll",Me,!0),window.removeEventListener("resize",Me),k.current&&cancelAnimationFrame(k.current)}},[t,se]),!t||!$||L.length===0)return null;const Q=()=>{U?e():l(i+1)},oe=()=>{i>0&&l(i-1)},ve=()=>e();return a.jsxs("div",{className:"st-overlay",onClick:Me=>{Me.stopPropagation()},children:[a.jsx("div",{className:"st-backdrop",onClick:Q}),u&&a.jsx("div",{className:`st-spotlight${y?" st-transitioning":""}`,style:{top:u.top,left:u.left,width:u.width,height:u.height}}),u&&a.jsxs("div",{className:`st-tooltip st-tooltip-${p}${y?" st-transitioning":""}`,style:{top:p==="below"?u.top+u.height+16:void 0,bottom:p==="above"?window.innerHeight-u.top+16:void 0,left:Math.max(16,Math.min(u.left,window.innerWidth-320))},children:[a.jsx("div",{className:"st-dots",children:L.map((Me,Ne)=>a.jsx("span",{className:`st-dot${Ne===i?" active":""}${Ne<i?" done":""}`},Ne))}),a.jsx("h3",{className:"st-title",children:$.title}),a.jsx("p",{className:"st-body",children:$.body}),a.jsxs("div",{className:"st-actions",children:[i>0&&a.jsx("button",{className:"st-btn st-btn-back",onClick:oe,children:"Back"}),a.jsx("button",{className:"st-btn st-btn-next",onClick:Q,children:$.cta||(U?"Let's Go!":"Next")})]}),a.jsx("button",{className:"st-skip",onClick:ve,children:"Skip tour"})]})]})}const Bp=[10,25,50,100,200,500,1e3],Hi=5;function Al(s){return s.toISOString().split("T")[0]}function oD(s){let e=0;for(const t of Bp){if(s<t)return{prev:e,next:t};e=t}return{prev:Bp[Bp.length-1],next:s+100}}const lD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},cD={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},Up=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}];function zp(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Gc(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function uD(s,e=800){return new Promise(t=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,h=i.height;u>h?u>e&&(h=Math.round(h*e/u),u=e):h>e&&(u=Math.round(u*e/h),h=e),l.width=u,l.height=h,l.getContext("2d").drawImage(i,0,0,u,h),l.toBlob(p=>t(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}function hD(){const{currentUser:s,isClient:e,clientData:t,logout:i,updateClientData:l,loading:u}=Fr(),{isDark:h,toggleTheme:p}=Va(),{isPremium:g}=xf(),y=nr(),[w,k]=v.useState({hours:0,minutes:0,seconds:0}),[T,L]=v.useState(0),[$,U]=v.useState(0),[O,se]=v.useState(""),[Q,oe]=v.useState(0),[ve,Me]=v.useState(0),[Ne,R]=v.useState(!1),[S,I]=v.useState({protein:0,carbs:0,fats:0,calories:0}),[V,D]=v.useState(null),[F,M]=v.useState(0),[He,bt]=v.useState(null),[q,me]=v.useState(!1),[Pe,We]=v.useState(!1),[Z,P]=v.useState(0),[G,xe]=v.useState(0),[Ee,$e]=v.useState([]),[Ae,at]=v.useState([]),[ht,Je]=v.useState(null),[Ot,Cn]=v.useState(!1),It=v.useRef(null),[vt,he]=v.useState([]),[en,tn]=v.useState(null),[dt,jt]=v.useState(0),[ct,nt]=v.useState(0),[nn,ds]=v.useState(0),[Et,rn]=v.useState(0),[Yn,Wt]=v.useState(null),Ft=v.useCallback((A,ee="info")=>{Wt({message:A,type:ee}),setTimeout(()=>Wt(null),4e3)},[]),[an,mn]=v.useState([]),[pe,Re]=v.useState(!1),[Oe,Qe]=v.useState(""),[Ve,De]=v.useState(null),[Ue,wt]=v.useState(null),[ft,Mt]=v.useState(!1),[Ut,J]=v.useState(new Set),[ge,rt]=v.useState(new Set),[St,Nt]=v.useState({}),[Yt,Qt]=v.useState({}),[Vt,Ln]=v.useState({}),[es,hn]=v.useState({}),[Sn,Mn]=v.useState({}),[z,ye]=v.useState({}),_e=v.useRef(null),ke=v.useRef(null),de=v.useRef({}),[tt,Ct]=v.useState([]),[it,_t]=v.useState(!1),xt=v.useRef(null),[on,sr]=v.useState([]),[Ls,zs]=v.useState(""),[$n,H]=v.useState(!1),[ce,j]=v.useState(null),[N,K]=v.useState([]),[re,Ke]=v.useState(null),[qe,ze]=v.useState(!1),Lt=v.useRef(!1),At=(()=>{const A=[{selector:".cb-ring-container",title:"Your 24-Hour Countdown",body:"Every day resets. This ring tracks the time you have left  tap your photo to personalise your profile.",cta:"Next"},{selector:".cb-stats-row",title:"Progress at a Glance",body:"Programme completion, workouts this week, and daily habits  all in one row. These fill up as you go."},{selector:".cb-nudge-card",title:"Smart Suggestions",body:"We'll highlight what needs your attention  your next session, unfinished habits, or a meal to log."},{selector:".cb-card-workouts-hero",title:"Workouts",body:"Quick randomiser sessions or structured programmes  pick your focus, level and time.",cta:"Next"}];return g&&A.push({selector:".cb-card-nutrition",title:"Nutrition Tracking",body:"Set your macro targets, scan barcodes, and log meals to hit your daily goals."},{selector:".cb-card-consistency",title:"Daily Habits",body:"5 simple habits each day  train, hit protein, 10k steps, sleep, and hydrate. Build your streak."},{selector:".cb-card-buddies",title:"Buddies & Social",body:"Connect with other members, share your journey, and keep each other accountable."},{selector:".cb-journey-section",title:"Share Your Journey",body:"Post photos, updates, and milestones  your fitness journey in one place. Like and comment on each other's posts."},{selector:".cb-achievements-section",title:"Achievements",body:"Every rep counts towards badges  volume milestones, workout streaks, and more to unlock."}),A.push({selector:".block-bottom-nav",title:"You're All Set!",body:"Use the nav bar to jump between your profile, workouts, nutrition, and buddies. Time to get after it.",cta:"Let's Go!"}),A})();v.useEffect(()=>{!u&&!s&&y("/")},[u,s,y]),v.useEffect(()=>{!u&&t&&t.signupSource==="self_signup"&&!t.onboardingComplete&&y("/onboarding")},[u,t,y]),v.useEffect(()=>{let A=t?.tourComplete||Lt.current;if(!A&&t?.id)try{A=!!localStorage.getItem(`tourDone_${t.id}`)}catch{}if(Ne&&t&&!A){const ee=setTimeout(()=>ze(!0),600);return()=>clearTimeout(ee)}},[Ne,t]),v.useEffect(()=>{if(t)try{const A=sessionStorage.getItem(`cbDash_${t.id}`);if(A){const ee=JSON.parse(A);U(ee.programmePct??0),se(ee.programmeName??""),oe(ee.totalWorkouts??0),Me(ee.habitWeekPct??0),I(ee.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),D(ee.nutritionTargetData??null),M(ee.todayHabitsCount??0),bt(ee.nextSession??null),me(ee.hasProgramme??!1),We(ee.programmeComplete??!1),P(ee.weeklyWorkouts??0),xe(ee.pbCount??0),$e(ee.topPBs??[]),at(ee.leaderboardTop3??[]),he(ee.unlockedBadges??[]),jt(ee.streakWeeks??0),R(!0)}}catch{}},[t]),v.useEffect(()=>{t?.photoURL&&Je(t.photoURL)},[t]),v.useEffect(()=>{if(!t)return;const A=Nn(Bt(be,"notifications"),un("toId","==",t.id)),ee=mk(A,Le=>{const Xe=Le.docs.map(gt=>({id:gt.id,...gt.data()}));Xe.sort((gt,st)=>{const Ze=gt.createdAt?.toMillis?.()||0;return(st.createdAt?.toMillis?.()||0)-Ze}),Ct(Xe.slice(0,50))},Le=>{console.error("Notification listener error:",Le),Le.code==="permission-denied"&&console.warn("Firestore rules may be missing for the notifications collection. Please update your Firestore rules in the Firebase Console.")});return()=>ee()},[t]),v.useEffect(()=>{const A=ee=>{xt.current&&!xt.current.contains(ee.target)&&_t(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]),v.useEffect(()=>{if(!t)return;const A=t.id;(async()=>{try{const[ee,Le,Xe]=await Promise.all([jn(Nn(Bt(be,"buddies"),un("user1","==",A))),jn(Nn(Bt(be,"buddies"),un("user2","==",A))),jn(Bt(be,"clients"))]),gt=new Set;[...ee.docs,...Le.docs].forEach(Ze=>{const Ht=Ze.data();gt.add(Ht.user1===A?Ht.user2:Ht.user1)});const st={};Xe.docs.forEach(Ze=>{st[Ze.id]=Ze.data()}),sr(Array.from(gt).filter(Ze=>st[Ze]).map(Ze=>({id:Ze,name:st[Ze].name,photoURL:st[Ze].photoURL||null})))}catch(ee){console.error("Error loading buddies for mentions:",ee)}})()},[t]);const Un=tt.filter(A=>!A.read).length,Fs=async()=>{const A=tt.filter(Le=>!Le.read);if(!A.length)return;const ee=u2(be);A.forEach(Le=>ee.update(Ge(be,"notifications",Le.id),{read:!0})),await ee.commit()},js=async()=>{if(!tt.length)return;const A=u2(be);tt.forEach(ee=>A.delete(Ge(be,"notifications",ee.id))),await A.commit()},On=async(A,ee,Le={})=>{if(!(!t||A===t.id))try{await ci(Bt(be,"notifications"),{toId:A,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:ee,read:!1,createdAt:ta(),...Le})}catch(Xe){console.error("Notification create error:",Xe),Xe.code==="permission-denied"&&Ft("Notifications blocked  check Firestore rules","error")}},Vn=(A,ee)=>{const Le=ee==="compose"?_e.current?.selectionStart:null,gt=(Le!=null?A.slice(0,Le):A).match(/@(\w*)$/);if(gt){H(!0),j(ee),zs(gt[1].toLowerCase());const st=on.filter(Ze=>Ze.name&&Ze.name.toLowerCase().includes(gt[1].toLowerCase())).slice(0,5);K(st)}else H(!1),K([])},Y=(A,ee)=>{if(ee==="compose"){const Le=_e.current,Xe=Oe,gt=Le?.selectionStart??Xe.length,st=Xe.slice(0,gt),Ze=Xe.slice(gt),Ht=st.replace(/@\w*$/,`@${A.name} `);Qe(Ht+Ze),setTimeout(()=>{Le?.focus(),Le.selectionStart=Le.selectionEnd=Ht.length},0)}else{const Xe=(Yt[ee]||"").replace(/@\w*$/,`@${A.name} `);Qt(gt=>({...gt,[ee]:Xe}))}H(!1),K([])},we=A=>A&&A.split(/(@\w[\w\s]*?\s)/g).map((Le,Xe)=>Le.startsWith("@")&&on.some(gt=>Le.trim()===`@${gt.name}`)?a.jsx("span",{className:"mention-highlight",children:Le.trim()},Xe):Le),te=async A=>{const ee=A.target.files?.[0];if(!(!ee||!t)){if(!ee.type.startsWith("image/")){Ft("Please select an image file","error");return}if(ee.size>5*1024*1024){Ft("Image must be under 5MB","error");return}Cn(!0);try{const Le=await new Promise(st=>{const Ze=new Image;Ze.onload=()=>{const Ht=document.createElement("canvas"),zt=400;let gn=Ze.width,kn=Ze.height;gn>kn?(kn=kn/gn*zt,gn=zt):(gn=gn/kn*zt,kn=zt),Ht.width=gn,Ht.height=kn,Ht.getContext("2d").drawImage(Ze,0,0,gn,kn),Ht.toBlob(Xt=>st(Xt),"image/jpeg",.75)},Ze.src=URL.createObjectURL(ee)}),Xe=Ji(Zi,`profilePhotos/${t.id}`);await Vp(Xe,Le);const gt=await Fo(Xe);await si(Ge(be,"clients",t.id),{photoURL:gt}),Je(gt),l({photoURL:gt}),Ft("Profile photo updated!","success")}catch(Le){console.error("Photo upload error:",Le),Ft("Failed to upload photo","error")}Cn(!1),It.current&&(It.current.value="")}};v.useEffect(()=>{const A=()=>{const Le=new Date,Xe=new Date(Le);Xe.setHours(23,59,59,999);const gt=Xe-Le,st=Math.floor(gt/(1e3*60*60)),Ze=Math.floor(gt%(1e3*60*60)/(1e3*60)),Ht=Math.floor(gt%(1e3*60)/1e3);k({hours:st,minutes:Ze,seconds:Ht}),L(60-Ht)};A();const ee=setInterval(A,1e3);return()=>clearInterval(ee)},[]),v.useEffect(()=>{const A=setInterval(()=>{rn(ee=>(ee+1)%Up.length)},8e3);return()=>clearInterval(A)},[]),v.useEffect(()=>{if(!s||!t)return;(async()=>{let ee=null,Le=0,Xe=[],gt=!1,st=null;try{const Ze=Al(new Date),Ht=await In(Ge(be,"clientProgrammes",t.id));if(Ht.exists()){const Ns=Ht.data(),hr=lD[Ns.templateId];if(me(!0),hr){const Hr=Ns.completedSessions||{},_r=Object.keys(Hr).length,bi=hr.duration*hr.daysPerWeek;U(bi>0?Math.round(_r/bi*100):0);const el=Ns.templateId.replace(/_/g," ").replace(/\b\w/g,ra=>ra.toUpperCase());se(el);const vi=cD[Ns.templateId];let Ua=!1;for(let ra=1;ra<=hr.duration&&!Ua;ra++)for(let Ks=0;Ks<hr.daysPerWeek&&!Ua;Ks++)Hr[`w${ra}d${Ks}`]||(bt({week:ra,dayIdx:Ks,label:vi?.[Ks]||`Day ${Ks+1}`}),Ua=!0);Ua||(We(!0),gt=!0)}}const zt=Bt(be,"workoutLogs"),gn=Nn(zt,un("clientId","==",t.id));ee=await jn(gn);const kn=ee.docs.filter(Ns=>Ns.data().type!=="programme").length;oe(kn);const Xt=new Date,is=Xt.getDay(),cn=is===0?6:is-1,zn=new Date(Xt);zn.setDate(Xt.getDate()-cn),zn.setHours(0,0,0,0);const Qn=Al(zn),Xn=ee.docs.filter(Ns=>(Ns.data().date||"")>=Qn).length;P(Xn);const Vs=Bt(be,"habitLogs"),Gs=Nn(Vs,un("clientId","==",t.id),un("date","==",Ze)),ur=await jn(Gs);let ms=0;if(!ur.empty){const Ns=ur.docs[0].data().habits||{};ms=Object.values(Ns).filter(Boolean).length}Me(Math.round(ms/Hi*100)),M(ms);const qr=await In(Ge(be,"nutritionTargets",t.id));qr.exists()&&(D(qr.data()),st=qr.data());const va=await In(Ge(be,"nutritionLogs",`${t.id}_${Ze}`));if(va.exists()){const hr=(va.data().entries||[]).reduce((Hr,_r)=>({protein:Hr.protein+(_r.protein||0),carbs:Hr.carbs+(_r.carbs||0),fats:Hr.fats+(_r.fats||0),calories:Hr.calories+(_r.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});I(hr)}}catch(Ze){console.error("Error loading dashboard stats:",Ze)}try{let Ze=[];const Ht=await In(Ge(be,"coreBuddyPBs",t.id));if(Ht.exists()){const zt=Ht.data().exercises||{};xe(Object.keys(zt).length),Le=Object.keys(zt).length,Ze=Object.entries(zt).sort(([,gn],[,kn])=>(kn.weight||0)-(gn.weight||0)).slice(0,3).map(([gn,kn])=>({name:gn,weight:kn.weight,reps:kn.reps}))}if(Ze.length===0){const zt={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},gn=Nn(Bt(be,"personalBests"),un("clientId","==",t.id)),kn=await jn(gn);if(!kn.empty){const Xt={};kn.docs.forEach(cn=>{const zn=cn.data().benchmarks||{};Object.entries(zn).forEach(([Qn,Xn])=>{if(!Xn.weight||!zt[Qn])return;const Vs=(Xn.weight||0)*(Xn.reps||1);(!Xt[Qn]||Vs>(Xt[Qn].weight||0)*(Xt[Qn].reps||1))&&(Xt[Qn]={name:zt[Qn],weight:Xn.weight,reps:Xn.reps})})});const is=Object.values(Xt);xe(is.length),Le=is.length,Ze=is.sort((cn,zn)=>(zn.weight||0)-(cn.weight||0)).slice(0,3)}}Xe=Ze,$e(Ze)}catch(Ze){console.error("PB fetch error:",Ze)}try{const Ze=Bt(be,"clients"),Ht=Nn(Ze,un("leaderboardOptIn","==",!0)),gn=(await jn(Ht)).docs.map(kn=>({id:kn.id,name:kn.data().name,photoURL:kn.data().photoURL||null}));at(gn.slice(0,3))}catch(Ze){console.error("Leaderboard preview error:",Ze)}try{let Ze=0;if(ee){const cn=ee.docs.map(zn=>zn.data().date).filter(Boolean).sort().reverse();if(cn.length>0){const zn=new Date;let Qn=new Date(zn);e:for(let Xn=0;Xn<52;Xn++){const Vs=new Date(Qn),Gs=Vs.getDay(),ur=Gs===0?6:Gs-1;Vs.setDate(Vs.getDate()-ur),Vs.setHours(0,0,0,0);const ms=new Date(Vs);ms.setDate(ms.getDate()+7);const qr=Al(Vs),va=Al(ms);if(cn.some(hr=>hr>=qr&&hr<va))Ze++;else{if(Xn>0)break e;break}Qn.setDate(Qn.getDate()-7)}}}jt(Ze);let Ht=0;for(let cn=0;cn<30;cn++){const zn=new Date;zn.setDate(zn.getDate()-cn);const Qn=Al(zn);try{const Xn=await jn(Nn(Bt(be,"habitLogs"),un("clientId","==",t.id),un("date","==",Qn)));if(Xn.empty)break;{const Vs=Xn.docs[0].data().habits||{};if(Object.values(Vs).filter(Boolean).length>=Hi)Ht++;else break}}catch{break}}nt(Ht);let zt=0;for(let cn=0;cn<30;cn++){const zn=new Date;zn.setDate(zn.getDate()-cn);const Qn=Al(zn);try{const Xn=await In(Ge(be,"nutritionLogs",`${t.id}_${Qn}`));if(Xn.exists()&&(Xn.data().entries||[]).length>0)if(st){const Gs=(Xn.data().entries||[]).reduce((ur,ms)=>({protein:ur.protein+(ms.protein||0),carbs:ur.carbs+(ms.carbs||0),fats:ur.fats+(ms.fats||0)}),{protein:0,carbs:0,fats:0});if(Gs.protein>=(st.protein||0)&&Gs.carbs>=(st.carbs||0)&&Gs.fats>=(st.fats||0))zt++;else break}else zt++;else break}catch{break}}ds(zt);const gn=ee?ee.docs.length:0,kn=[],Xt=cn=>kn.push(cn);gn>=1&&Xt("first_workout"),gn>=10&&Xt("workouts_10"),gn>=25&&Xt("workouts_25"),gn>=50&&Xt("workouts_50"),gn>=100&&Xt("workouts_100"),Ze>=2&&Xt("streak_2"),Ze>=4&&Xt("streak_4"),Ze>=8&&Xt("streak_8"),Le>=1&&Xt("first_pb"),Le>=5&&Xt("pbs_5"),Le>=10&&Xt("pbs_10"),Le>=100&&Xt("pbs_100"),zt>=7&&Xt("nutrition_7"),t.leaderboardOptIn&&Xt("leaderboard_join"),Ht>=7&&Xt("habits_7"),he(kn);const is={};kn.forEach(cn=>{is[cn]={unlockedAt:new Date().toISOString()}}),Hn(Ge(be,"achievements",t.id),{badges:is,progress:{streakWeeks:Ze,pbCount:Le,nutritionStreak:zt,habitStreak:Ht},updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(Ze){console.error("Achievement computation error:",Ze)}R(!0)})()},[s,t]),v.useEffect(()=>{if(!(!Ne||!t))try{sessionStorage.setItem(`cbDash_${t.id}`,JSON.stringify({programmePct:$,programmeName:O,totalWorkouts:Q,habitWeekPct:ve,nutritionTotals:S,nutritionTargetData:V,todayHabitsCount:F,nextSession:He,hasProgramme:q,programmeComplete:Pe,weeklyWorkouts:Z,pbCount:G,topPBs:Ee,leaderboardTop3:Ae,unlockedBadges:vt,streakWeeks:dt}))}catch{}},[Ne,$,O,Q,ve,S,V,F,He,q,Pe,Z,G,Ee,Ae,vt,dt,t]);const Be=v.useCallback(async()=>{if(Lt.current=!0,ze(!1),l({tourComplete:!0}),t?.id){try{localStorage.setItem(`tourDone_${t.id}`,"1")}catch{}try{await si(Ge(be,"clients",t.id),{tourComplete:!0})}catch(A){console.error("Failed to save tour completion:",A)}}},[t,l]),Fe=A=>{const ee=A.currentTarget,Le=ee.querySelector(".ripple");Le&&Le.remove();const Xe=ee.getBoundingClientRect(),gt=Math.max(Xe.width,Xe.height),st=A.clientX-Xe.left-gt/2,Ze=A.clientY-Xe.top-gt/2,Ht=document.createElement("span");Ht.className="ripple",Ht.style.cssText=`width:${gt}px;height:${gt}px;left:${st}px;top:${Ze}px;`,ee.appendChild(Ht),setTimeout(()=>Ht.remove(),600)},ot=t?.name?.split(" ")[0]||"there",{prev:mt,next:qt}=oD(Q),_n=qt>mt?Math.round((Q-mt)/(qt-mt)*100):100,xs=[{label:"Programme",value:`${$}%`,pct:$,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${Q}`,pct:_n,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${ve}%`,pct:ve,color:"#38B6FF",size:"normal"}],ln=A=>!V||!V[A]?0:Math.min(Math.round(S[A]/V[A]*100),100),qs=(()=>{const A=new Date().getHours();return Ne&&F>=Hi&&S.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:A>=5&&A<12?{main:"Rise and grind,",sub:"let's get after it!"}:A>=12&&A<17?{main:"Oye",sub:"crack on and make it count!"}:A>=17&&A<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),Es=Ne?q&&He&&!Pe?{label:"NEXT SESSION",message:`Week ${He.week}, Day ${He.dayIdx+1}  ${He.label}`,cta:"Continue",action:()=>y("/client/core-buddy/programmes"),pct:$,ringLabel:`${$}%`}:F<Hi?{label:"DAILY HABITS",message:`${F}/${Hi} completed`,cta:"Open Habits",action:()=>y("/client/core-buddy/consistency"),pct:ve,ringLabel:`${F}/${Hi}`}:S.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>y("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:q?Pe?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>y("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>y("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null,fs=v.useCallback(async()=>{if(t){Re(!0);try{const A=await jn(Nn(Bt(be,"posts"),un("authorId","==",t.id),Hd("createdAt","desc"),$d(30)));mn(A.docs.map(Le=>({id:Le.id,...Le.data()})));const ee=await jn(Nn(Bt(be,"postLikes"),un("userId","==",t.id)));J(new Set(ee.docs.map(Le=>Le.data().postId)))}catch(A){console.error("Error loading journey:",A)}finally{Re(!1)}}},[t]);v.useEffect(()=>{Ne&&t&&fs()},[Ne,t,fs]);const Ba=A=>{const ee=A.target.files?.[0];if(ee){if(!ee.type.startsWith("image/")){Ft("Please select an image file","error");return}if(ee.size>10*1024*1024){Ft("Image must be under 10MB","error");return}De(ee),wt(URL.createObjectURL(ee))}},sa=()=>{De(null),Ue&&URL.revokeObjectURL(Ue),wt(null),ke.current&&(ke.current.value="")},pn=async()=>{if(!(!Oe.trim()&&!Ve||ft||!t)){Mt(!0);try{let A=null;if(Ve){const Xe=await uD(Ve),gt=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,st=Ji(Zi,`postImages/${t.id}/${gt}`);await Vp(st,Xe),A=await Fo(st)}await ci(Bt(be,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:Oe.trim(),type:A?"image":"text",imageURL:A||null,createdAt:ta(),likeCount:0,commentCount:0});const Le=Oe.trim().match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Le){const Xe=new Set;Le.forEach(gt=>{const st=gt.slice(1).trim(),Ze=on.find(Ht=>Ht.name&&Ht.name.toLowerCase()===st.toLowerCase());Ze&&!Xe.has(Ze.id)&&(Xe.add(Ze.id),On(Ze.id,"mention",{}))})}Qe(""),sa(),_e.current&&(_e.current.style.height="auto"),await fs(),Ft("Posted!","success")}catch(A){console.error("Error posting:",A),Ft(A?.message||"Failed to post","error")}finally{Mt(!1)}}},us=async A=>{if(window.confirm("Delete this post?"))try{await pr(Ge(be,"posts",A)),mn(ee=>ee.filter(Le=>Le.id!==A)),Ft("Post deleted","info")}catch(ee){console.error("Delete error:",ee),Ft("Failed to delete","error")}},cr=async A=>{if(!t)return;const ee=t.id,Le=`${A}_${ee}`,Xe=Ut.has(A),gt=new Set(Ut);Xe?gt.delete(A):gt.add(A),J(gt),mn(st=>st.map(Ze=>Ze.id===A?{...Ze,likeCount:Math.max(0,(Ze.likeCount||0)+(Xe?-1:1))}:Ze));try{if(Xe)await pr(Ge(be,"postLikes",Le)),await si(Ge(be,"posts",A),{likeCount:Vo(-1)});else{await Hn(Ge(be,"postLikes",Le),{postId:A,userId:ee,createdAt:ta()}),await si(Ge(be,"posts",A),{likeCount:Vo(1)});const st=an.find(Ze=>Ze.id===A);st&&On(st.authorId,"like",{postId:A})}}catch(st){console.error("Like error:",st),fs()}},Os=async A=>{try{const ee=await jn(Nn(Bt(be,"postComments"),un("postId","==",A),Hd("createdAt","asc"),$d(50)));Nt(Le=>({...Le,[A]:ee.docs.map(Xe=>({id:Xe.id,...Xe.data()}))}))}catch(ee){console.error("Error loading comments:",ee)}},xr=A=>{const ee=new Set(ge);ee.has(A)?ee.delete(A):(ee.add(A),St[A]||Os(A)),rt(ee)},ts=async A=>{const ee=(Yt[A]||"").trim(),Le=Sn[A];if(!(!ee&&!Le||!t)){Ln(Xe=>({...Xe,[A]:!0}));try{let Xe=null;if(Le){const zt=Ji(Zi,`comment-images/${Date.now()}_${Le.name}`);await Vp(zt,Le),Xe=await Fo(zt)}const gt={postId:A,authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:ee||"",createdAt:ta()};Xe&&(gt.imageURL=Xe);const st=es[A];st&&(gt.replyToId=st.id,gt.replyToName=st.authorName),await ci(Bt(be,"postComments"),gt),await si(Ge(be,"posts",A),{commentCount:Vo(1)});const Ze=an.find(zt=>zt.id===A);Ze&&On(Ze.authorId,"comment",{postId:A});const Ht=ee.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Ht){const zt=new Set;Ht.forEach(gn=>{const kn=gn.slice(1).trim(),Xt=on.find(is=>is.name&&is.name.toLowerCase()===kn.toLowerCase());Xt&&!zt.has(Xt.id)&&(zt.add(Xt.id),On(Xt.id,"mention",{postId:A}))})}Qt(zt=>({...zt,[A]:""})),Mn(zt=>({...zt,[A]:null})),ye(zt=>({...zt,[A]:null})),hn(zt=>({...zt,[A]:null})),de.current[A]&&(de.current[A].value=""),mn(zt=>zt.map(gn=>gn.id===A?{...gn,commentCount:(gn.commentCount||0)+1}:gn)),await Os(A)}catch(Xe){console.error("Comment error:",Xe),Ft("Failed to comment","error")}finally{Ln(Xe=>({...Xe,[A]:!1}))}}},Ws=async(A,ee)=>{try{await pr(Ge(be,"postComments",ee)),await si(Ge(be,"posts",A),{commentCount:Vo(-1)}),Nt(Le=>({...Le,[A]:(Le[A]||[]).filter(Xe=>Xe.id!==ee)})),mn(Le=>Le.map(Xe=>Xe.id===A?{...Xe,commentCount:Math.max((Xe.commentCount||1)-1,0)}:Xe))}catch(Le){console.error("Delete comment error:",Le),Ft("Failed to delete comment","error")}},Ss=(A,ee)=>{const Le=ee.target.files?.[0];if(!Le)return;if(Le.size>5*1024*1024){Ft("Image must be under 5MB","error");return}Mn(gt=>({...gt,[A]:Le}));const Xe=new FileReader;Xe.onload=gt=>ye(st=>({...st,[A]:gt.target.result})),Xe.readAsDataURL(Le)},Rr=A=>{Mn(ee=>({...ee,[A]:null})),ye(ee=>({...ee,[A]:null})),de.current[A]&&(de.current[A].value="")},wr=A=>{Qe(A.target.value),A.target.style.height="auto",A.target.style.height=Math.min(A.target.scrollHeight,120)+"px",Vn(A.target.value,"compose")},Ar=(A,ee)=>{Qt(Le=>({...Le,[A]:ee})),Vn(ee,A)};return a.jsxs("div",{className:"cb-dashboard","data-theme":h?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-notif-wrap",ref:xt,children:[a.jsxs("button",{className:"header-notif-btn",onClick:()=>{_t(!it),it||Fs()},"aria-label":"Notifications",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),Un>0&&a.jsx("span",{className:"header-notif-badge",children:Un>9?"9+":Un})]}),it&&a.jsxs("div",{className:"notif-panel",children:[a.jsxs("div",{className:"notif-panel-header",children:[a.jsx("span",{className:"notif-panel-title",children:"Notifications"}),tt.length>0&&a.jsx("button",{className:"notif-clear-btn",onClick:js,children:"Clear all"})]}),a.jsx("div",{className:"notif-panel-list",children:tt.length===0?a.jsx("div",{className:"notif-empty",children:"No notifications yet"}):tt.map(A=>a.jsxs("div",{className:`notif-item${A.read?"":" unread"}`,onClick:()=>{if(_t(!1),A.type==="buddy_request"||A.type==="buddy_accept")y("/client/core-buddy/buddies");else if((A.type==="like"||A.type==="comment")&&A.postId){if(!ge.has(A.postId)){const ee=new Set(ge);ee.add(A.postId),rt(ee),St[A.postId]||Os(A.postId)}setTimeout(()=>{const ee=document.getElementById(`post-${A.postId}`);ee&&ee.scrollIntoView({behavior:"smooth",block:"center"})},150)}else A.type==="like"||A.type==="comment"?document.querySelector(".cb-journey-section")?.scrollIntoView({behavior:"smooth"}):A.type==="mention"&&y(`/client/core-buddy/profile/${A.fromId}`)},children:[a.jsx("div",{className:"notif-item-avatar",children:A.fromPhotoURL?a.jsx("img",{src:A.fromPhotoURL,alt:""}):a.jsx("span",{children:(A.fromName||"?")[0]})}),a.jsxs("div",{className:"notif-item-body",children:[a.jsxs("p",{className:"notif-item-text",children:[a.jsx("strong",{children:A.fromName})," ",A.type==="buddy_request"&&"sent you a buddy request",A.type==="buddy_accept"&&"accepted your buddy request",A.type==="like"&&"liked your post",A.type==="comment"&&"commented on your post",A.type==="mention"&&"mentioned you"]}),a.jsx("span",{className:"notif-item-time",children:zp(A.createdAt)})]})]},A.id))})]})]}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:h?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:Yy.map((A,ee)=>{const Le=ee<T;return a.jsx("line",{x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,className:`ring-tick ${Le?"elapsed":"remaining"}`,strokeWidth:A.thick?"3":"2"},ee)})}),a.jsxs("div",{className:"cb-ring-center",children:[a.jsxs("div",{className:"cb-ring-logo",onClick:()=>It.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:ht||"/Logo.webp",alt:ht?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${Ot?" uploading":""}`,children:Ot?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:It,type:"file",accept:"image/*",onChange:te,style:{display:"none"}})]}),!ht&&!Ot&&a.jsx("div",{className:"cb-photo-badge",onClick:()=>It.current?.click(),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(w.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(w.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(w.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Up[Et].text," ",a.jsx("strong",{children:Up[Et].bold})]},Et)]}),a.jsx("div",{className:"cb-stats-row",children:xs.map(A=>{const ee=(A.size==="large",38),Le=2*Math.PI*ee,Xe=Le-A.pct/100*Le;return a.jsxs("div",{className:`cb-stat-item${A.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:"cb-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:ee}),a.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:ee,style:{stroke:A.color},strokeDasharray:Le,strokeDashoffset:Xe})]}),a.jsx("span",{className:"cb-stat-value",style:{color:A.color},children:A.value})]}),a.jsx("span",{className:"cb-stat-label",children:A.label})]},A.label)})}),a.jsxs("p",{className:"cb-coach-msg",children:[qs.main," ",a.jsx("strong",{children:ot}),"  ",qs.sub]}),Es&&a.jsxs("button",{className:"cb-nudge-card",onClick:Es.action||void 0,style:Es.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-Es.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:Es.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:Es.label}),a.jsx("span",{className:"cb-nudge-title",children:Es.message}),Es.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[Es.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[a.jsxs("button",{className:`cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn${g?"":" cb-card-locked"}`,onClick:A=>{Fe(A),y(g?"/client/core-buddy/nutrition":"/upgrade")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsxs("h3",{children:["Today's Nutrition ",!g&&a.jsx("span",{className:"cb-premium-badge",children:"PREMIUM"})]})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:ln("protein"),color:"#14b8a6"},{label:"C",pct:ln("carbs"),color:"var(--color-primary)"},{label:"F",pct:ln("fats"),color:"#eab308"},{label:"Cal",pct:ln("calories"),color:"#38B6FF"}].map(A=>{const Le=2*Math.PI*38,Xe=Le-A.pct/100*Le;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:A.color},strokeDasharray:Le,strokeDashoffset:Xe})]}),a.jsx("span",{style:{color:A.color},children:A.label})]},A.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:A=>{Fe(A),y("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[Z," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[Q," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-grid-row",children:[a.jsxs("button",{className:`cb-feature-card cb-grid-card cb-card-consistency ripple-btn${g?"":" cb-card-locked"}`,onClick:A=>{Fe(A),y(g?"/client/core-buddy/consistency":"/upgrade")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsxs("h3",{children:["Habits ",!g&&a.jsx("span",{className:"cb-premium-badge",children:"PREMIUM"})]}),a.jsx("div",{className:"cb-habit-dots",children:Array.from({length:Hi},(A,ee)=>a.jsx("span",{className:`cb-habit-dot${ee<F?" done":""}`},ee))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[F,"/",Hi," today"]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:`cb-feature-card cb-grid-card cb-card-progress ripple-btn${g?"":" cb-card-locked"}`,onClick:A=>{Fe(A),y(g?"/client/personal-bests?mode=corebuddy":"/upgrade")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsxs("h3",{children:["PBs ",!g&&a.jsx("span",{className:"cb-premium-badge",children:"PREMIUM"})]}),Ee.length>0?a.jsx("div",{className:"cb-pb-preview",children:Ee.slice(0,2).map(A=>a.jsxs("div",{className:"cb-pb-entry",children:[a.jsx("span",{className:"cb-pb-name",children:A.name}),a.jsxs("span",{className:"cb-pb-value",children:[A.weight,"kg"]})]},A.name))}):a.jsxs("div",{className:"cb-progress-preview",children:[a.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{children:"Start lifting!"})]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),a.jsxs("button",{className:`cb-feature-card cb-card-leaderboard ripple-btn${g?"":" cb-card-locked"}`,onClick:A=>{Fe(A),y(g?"/client/leaderboard":"/upgrade")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsxs("h3",{children:["Leaderboard ",!g&&a.jsx("span",{className:"cb-premium-badge",children:"PREMIUM"})]}),Ae.length>0?a.jsx("div",{className:"cb-lb-preview",children:Ae.map((A,ee)=>{const Le=["#FFD700","#A8B4C0","#CD7F32"][ee],Xe=A.name?A.name.split(" ").map(st=>st[0]).join("").slice(0,2).toUpperCase():"?",gt=A.id===t?.id;return a.jsxs("div",{className:`cb-lb-entry${gt?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:Le},children:A.photoURL?a.jsx("img",{src:A.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:Xe})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:Le},children:["#",ee+1]})]},A.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:`cb-feature-card cb-card-buddies ripple-btn${g?"":" cb-card-locked"}`,onClick:A=>{Fe(A),y(g?"/client/core-buddy/buddies":"/upgrade")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsxs("h3",{children:["Buddies ",!g&&a.jsx("span",{className:"cb-premium-badge",children:"PREMIUM"})]}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:`cb-achievements-section${g?"":" cb-card-locked"}`,children:[a.jsxs("h3",{className:"cb-achievements-title",children:["Achievements ",!g&&a.jsx("span",{className:"cb-premium-badge",children:"PREMIUM"})]}),g?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"cb-badges-scroll",children:Wd.map(A=>{const ee=vt.includes(A.id);return a.jsx("button",{className:`cb-badge${ee?" unlocked":" locked"}`,onClick:()=>tn(A),children:a.jsx("img",{src:A.img,alt:A.name,className:"cb-badge-img"})},A.id)})}),a.jsxs("p",{className:"cb-badges-count",children:[vt.length,"/",Wd.length," unlocked"]})]}):a.jsxs("button",{className:"cb-upgrade-teaser",onClick:()=>y("/upgrade"),children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{children:"Upgrade to unlock achievements"})]})]}),en&&a.jsx("div",{className:"cb-badge-overlay",onClick:()=>tn(null),children:a.jsxs("div",{className:"cb-badge-overlay-content",onClick:A=>A.stopPropagation(),children:[a.jsx("img",{src:en.img,alt:en.name,className:`cb-badge-overlay-img${vt.includes(en.id)?"":" cb-badge-overlay-img-locked"}`}),a.jsx("p",{className:"cb-badge-overlay-desc",children:en.desc}),vt.includes(en.id)?a.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):a.jsx("span",{className:"cb-badge-status locked",children:"Locked"}),a.jsx("button",{className:"cb-badge-overlay-close",onClick:()=>tn(null),children:"Tap to close"})]})}),a.jsxs("div",{className:"cb-journey-section",children:[a.jsxs("h3",{className:"cb-journey-title",children:["My Journey ",!g&&a.jsx("span",{className:"cb-premium-badge",children:"PREMIUM"})]}),g?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:ht?a.jsx("img",{src:ht,alt:""}):a.jsx("span",{children:Gc(t?.name)})}),a.jsxs("div",{className:"journey-compose-body",style:{position:"relative"},children:[a.jsx("textarea",{ref:_e,placeholder:"Share your progress... (use @ to mention)",value:Oe,onChange:wr,rows:1,maxLength:500}),$n&&ce==="compose"&&N.length>0&&a.jsx("div",{className:"mention-dropdown",children:N.map(A=>a.jsxs("button",{className:"mention-option",onClick:()=>Y(A,"compose"),children:[a.jsx("div",{className:"mention-option-avatar",children:A.photoURL?a.jsx("img",{src:A.photoURL,alt:""}):a.jsx("span",{children:Gc(A.name)})}),a.jsx("span",{children:A.name})]},A.id))}),Ue&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:Ue,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:sa,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>ke.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:ke,type:"file",accept:"image/*",onChange:Ba,hidden:!0}),(Oe.trim()||Ve)&&a.jsx("button",{className:"journey-post-btn",onClick:pn,disabled:ft,children:ft?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),pe?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"cb-spinner"})}):an.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"Start sharing your fitness journey!"})]}):a.jsx("div",{className:"journey-list",children:an.map(A=>a.jsxs("div",{id:`post-${A.id}`,className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:A.authorPhotoURL?a.jsx("img",{src:A.authorPhotoURL,alt:""}):a.jsx("span",{children:Gc(A.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:A.authorName}),a.jsx("span",{className:"journey-post-time",children:zp(A.createdAt)})]}),a.jsx("button",{className:"journey-delete-btn",onClick:()=>us(A.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),A.content&&a.jsx("p",{className:"journey-post-content",children:we(A.content)}),A.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:A.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${Ut.has(A.id)?" liked":""}`,onClick:()=>cr(A.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:Ut.has(A.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:A.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${ge.has(A.id)?" active":""}`,onClick:()=>xr(A.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:A.commentCount||0})]})]}),ge.has(A.id)&&a.jsxs("div",{className:"journey-comments",children:[St[A.id]?.length>0?St[A.id].map(ee=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",children:ee.authorPhotoURL?a.jsx("img",{src:ee.authorPhotoURL,alt:""}):a.jsx("span",{children:Gc(ee.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:ee.authorName}),ee.replyToName&&a.jsxs("span",{className:"journey-comment-reply-tag",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"9 14 4 9 9 4"}),a.jsx("path",{d:"M20 20v-7a4 4 0 0 0-4-4H4"})]}),ee.replyToName]}),ee.content&&a.jsx("span",{className:"journey-comment-text",children:we(ee.content)}),ee.imageURL&&a.jsx("img",{className:"journey-comment-image",src:ee.imageURL,alt:"Comment",loading:"lazy"})]}),a.jsxs("div",{className:"journey-comment-actions-row",children:[a.jsx("span",{className:"journey-comment-time",children:zp(ee.createdAt)}),a.jsx("button",{className:"journey-comment-reply-btn",onClick:()=>hn(Le=>({...Le,[A.id]:{id:ee.id,authorName:ee.authorName}})),children:"Reply"}),a.jsx("button",{className:"journey-comment-delete-btn",onClick:()=>Ws(A.id,ee.id),"aria-label":"Delete comment",children:a.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})]},ee.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),es[A.id]&&a.jsxs("div",{className:"journey-comment-replying",children:[a.jsxs("span",{children:["Replying to ",a.jsx("strong",{children:es[A.id].authorName})]}),a.jsx("button",{onClick:()=>hn(ee=>({...ee,[A.id]:null})),"aria-label":"Cancel reply",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),z[A.id]&&a.jsxs("div",{className:"journey-comment-img-preview",children:[a.jsx("img",{src:z[A.id],alt:"Preview"}),a.jsx("button",{onClick:()=>Rr(A.id),"aria-label":"Remove image",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("button",{className:"journey-comment-img-btn",onClick:()=>de.current[A.id]?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:ee=>{de.current[A.id]=ee},type:"file",accept:"image/*",onChange:ee=>Ss(A.id,ee),hidden:!0}),a.jsx("input",{type:"text",placeholder:"Comment",value:Yt[A.id]||"",onChange:ee=>Ar(A.id,ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&ts(A.id)},maxLength:300}),$n&&ce===A.id&&N.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:N.map(ee=>a.jsxs("button",{className:"mention-option",onClick:()=>Y(ee,A.id),children:[a.jsx("div",{className:"mention-option-avatar",children:ee.photoURL?a.jsx("img",{src:ee.photoURL,alt:""}):a.jsx("span",{children:Gc(ee.name)})}),a.jsx("span",{children:ee.name})]},ee.id))}),a.jsx("button",{onClick:()=>ts(A.id),disabled:!(Yt[A.id]||"").trim()&&!Sn[A.id]||Vt[A.id],children:Vt[A.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},A.id))})]}):a.jsxs("button",{className:"cb-upgrade-teaser",onClick:()=>y("/upgrade"),children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{children:"Upgrade to share your journey"})]})]})]})]}),a.jsx(La,{active:"home"}),Yn&&a.jsxs("div",{className:`toast-notification ${Yn.type}`,children:[Yn.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Yn.message]}),a.jsx(iD,{steps:At,active:qe,onFinish:Be})]})}const Fp=new Map;function $i(){return new Date().toISOString().split("T")[0]}const b2=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],dD={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function fD(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function mD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Fr(),{isDark:l,toggleTheme:u,accent:h}=Va(),p=nr(),[g,y]=v.useState("loading"),[w,k]=v.useState(null),[T,L]=v.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[$,U]=v.useState(null),[O,se]=v.useState($i()),[Q,oe]=v.useState({entries:[],water:0}),[ve,Me]=v.useState({protein:0,carbs:0,fats:0,calories:0}),[Ne,R]=v.useState(!1),[S,I]=v.useState(!1),[V,D]=v.useState(()=>{const j=new Date;return{year:j.getFullYear(),month:j.getMonth()}}),[F,M]=v.useState(fD),[He,bt]=v.useState(null),[q,me]=v.useState(null),[Pe,We]=v.useState(!1),[Z,P]=v.useState(null),[G,xe]=v.useState(""),[Ee,$e]=v.useState(!1),[Ae,at]=v.useState(""),[ht,Je]=v.useState([]),[Ot,Cn]=v.useState(!1),[It,vt]=v.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[he,en]=v.useState(null),[tn,dt]=v.useState("100"),[jt,ct]=v.useState(0),[nt,nn]=v.useState("weight"),[ds,Et]=v.useState(0),[rn,Yn]=v.useState(null);v.useRef(null);const Wt=v.useRef(!1),Ft=v.useRef(null),an=v.useRef(null),mn=v.useRef(null),pe=v.useCallback((j,N="info")=>{Yn({message:j,type:N}),setTimeout(()=>Yn(null),3e3)},[]);v.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),v.useEffect(()=>{if(!t?.id)return;(async()=>{try{const N=await In(Ge(be,"nutritionTargets",t.id));N.exists()?(k(N.data()),y("dashboard")):y("setup")}catch(N){console.error("Error loading nutrition data:",N),y("setup")}})()},[t?.id]),v.useEffect(()=>{if(!t?.id)return;(async()=>{try{const N=await In(Ge(be,"nutritionLogs",`${t.id}_${O}`));if(N.exists()){const K=N.data();oe({entries:K.entries||[],water:K.water||0})}else oe({entries:[],water:0})}catch(N){console.error("Error loading log:",N),oe({entries:[],water:0})}})()},[t?.id,O]),v.useEffect(()=>{const j=Q.entries.reduce((N,K)=>({protein:N.protein+(K.protein||0),carbs:N.carbs+(K.carbs||0),fats:N.fats+(K.fats||0),calories:N.calories+(K.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Me(j)},[Q.entries]);const Re=async j=>{try{await Hn(Ge(be,"nutritionLogs",`${t.id}_${O}`),{clientId:t.id,date:O,entries:j.entries,water:j.water,updatedAt:yt.now()})}catch(N){console.error("Error saving nutrition log:",N)}},Oe=O===$i(),Qe=(j,N)=>new Date(j,N+1,0).getDate(),Ve=(j,N)=>new Date(j,N,1).getDay(),De=["January","February","March","April","May","June","July","August","September","October","November","December"],Ue=["Su","Mo","Tu","We","Th","Fr","Sa"],wt=()=>{let j=parseFloat(T.weight);T.weightUnit==="lbs"&&(j*=.453592);let N;T.heightUnit==="cm"?N=parseFloat(T.height):N=(parseFloat(T.heightFeet)||0)*30.48+(parseFloat(T.heightInches)||0)*2.54;const K=parseInt(T.age);let re=T.gender==="male"?10*j+6.25*N-5*K+5:10*j+6.25*N-5*K-161;const qe=re*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[T.dailyActivity],ze={low:100,moderate:200,high:300,daily:400},Lt=Math.round(qe+ze[T.trainingFrequency]);let At=Lt,Un,Fs;switch(T.goal){case"lose":At=Lt*(1-{light:.15,moderate:.2,harsh:.25}[T.deficitLevel]),Un=2.2,Fs=.3;break;case"build":At=Lt*1.1,Un=2,Fs=.22;break;default:Un=1.8,Fs=.25}At=Math.max(At,T.gender==="male"?1400:1100);const js=Math.round(j*Un),On=Math.round(At*Fs/9),Vn=Math.max(0,Math.round((At-js*4-On*9)/4));U({calories:Math.round(At),protein:js,carbs:Vn,fats:On,bmr:Math.round(re),neat:Math.round(qe),exerciseAdd:ze[T.trainingFrequency],tdee:Math.round(Lt)})},ft=async()=>{if($)try{const j={clientId:t.id,calories:$.calories,protein:$.protein,carbs:$.carbs,fats:$.fats,waterGoal:8,goal:T.goal,updatedAt:yt.now()};await Hn(Ge(be,"nutritionTargets",t.id),j),k(j),y("dashboard"),pe("Macro targets saved!","success")}catch(j){console.error("Error saving targets:",j),pe("Failed to save targets. Please try again.","error")}},Mt=()=>{const j=T.weight&&parseFloat(T.weight)>0,N=T.age&&parseInt(T.age)>0,K=T.heightUnit==="cm"?T.height&&parseFloat(T.height)>0:T.heightFeet&&parseFloat(T.heightFeet)>0||T.heightInches&&parseFloat(T.heightInches)>0;return j&&N&&K},Ut="nut_favourite_foods",J=()=>{try{return JSON.parse(localStorage.getItem(Ut)||"[]")}catch{return[]}},ge=j=>J().some(N=>N.name.toLowerCase()===(j||"").toLowerCase()),rt=j=>{const N=J(),K=N.findIndex(re=>re.name.toLowerCase()===j.name.toLowerCase());K>=0?N.splice(K,1):N.unshift({name:j.name,protein:j.protein,carbs:j.carbs,fats:j.fats,calories:j.calories,serving:j.serving,per100g:j.per100g||null,servingUnit:j.servingUnit||"g",portion:j.portion||null}),localStorage.setItem(Ut,JSON.stringify(N)),Et(re=>re+1)},St=j=>{const N=[...Q.entries,{...j,meal:F,id:Date.now(),addedAt:new Date().toISOString()}],K={...Q,entries:N};oe(K),Re(K),me(null),en(null),dt("100"),ct(0),nn("weight"),vt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),pe("Food added!","success")},Nt=j=>{const N=Q.entries.filter(re=>re.id!==j),K={...Q,entries:N};oe(K),Re(K)},Yt=v.useRef(null),Qt=async()=>{We(!0);const j=document.querySelector("#barcode-reader");if(!j){We(!1),pe("Scanner container not found.","error");return}if(!Yt.current)try{const K=await vr(()=>import("./quagga.min-BbicSfvA.js").then(re=>re.q),[]);Yt.current=K.default}catch(K){console.error("Failed to load barcode scanner:",K),We(!1),pe("Could not load scanner.","error");return}const N=Yt.current;N.init({inputStream:{type:"LiveStream",target:j,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},K=>{if(K){console.error("Quagga init error:",K),We(!1),pe("Could not access camera. Check permissions.","error");return}N.start(),Wt.current=!0}),N.onDetected(K=>{const re=K.codeResult.decodedCodes?.filter(qe=>qe.error!==void 0)?.map(qe=>qe.error)||[];if((re.length>0?re.reduce((qe,ze)=>qe+ze,0)/re.length:1)<.15){const qe=K.codeResult.code;N.offDetected(),P(qe)}})},Vt=()=>{const j=Yt.current;Wt.current&&j&&(j.stop(),j.offDetected(),Wt.current=!1),We(!1)},Ln=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,es=j=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((j||"").replace(/\s/g,"")),hn=j=>{if(!j)return{value:100,unit:"g"};const N=j.toLowerCase().replace(/\s/g,""),K=N.match(/([\d.]+)/),re=K?parseFloat(K[1]):100;return es(j)?/cl/.test(N)?{value:re*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(N)&&!/ml/.test(N)?{value:re*1e3,unit:"ml"}:{value:re,unit:"ml"}:{value:re,unit:"g"}},Sn=j=>{if(es(j.serving_size)||es(j.quantity))return"ml";const N=j.product_name||j.product_name_en||"";return Ln.test(N)?"ml":"g"},Mn=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],z=(j,N)=>{const K=j||"",re=K.match(/\((\d+\.?\d*)\s*g\)/i),Ke=K.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(re&&Ke){const Lt=parseFloat(re[1]);let At=Ke[1].replace(/^\d+\s*/,"").trim();if(At&&Lt>0)return{label:At,weight:Lt}}const qe=K.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(qe){const Lt=parseFloat(qe[1]);let At=qe[2].replace(/^\d+\s*/,"").trim();if(At&&Lt>0)return{label:At,weight:Lt}}const ze=N||"";for(const{pattern:Lt,label:At,weight:Un}of Mn)if(Lt.test(ze))return{label:At,weight:Un};return null},ye=j=>{const N=j.nutriments||{},K=Sn(j),re=hn(j.serving_size),Ke=K==="ml"?re.unit==="ml"?re.value:100:re.value,qe=j.product_name||j.product_name_en||"Unknown Product",ze=z(j.serving_size,qe);return{name:qe,brand:j.brands||"",image:j.image_small_url||j.image_url||null,servingSize:j.serving_size||"100g",servingValue:Ke,servingUnit:K,portion:ze,protein:Math.round(N.proteins_100g||N.proteins||0),carbs:Math.round(N.carbohydrates_100g||N.carbohydrates||0),fats:Math.round(N.fat_100g||N.fat||0),calories:Math.round(N["energy-kcal_100g"]||N["energy-kcal"]||(N.energy_100g?N.energy_100g/4.184:0)),per100g:!0}},_e=async j=>{$e(!0);try{const N=`https://world.openfoodfacts.org/api/v2/product/${j}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,K=await fetch(N);if(!K.ok)throw new Error(`HTTP ${K.status}`);const re=await K.json();if(re.status==="success"||re.status===1||re.product){const Ke=ye(re.product);Ke.calories===0&&Ke.protein===0&&Ke.carbs===0?pe("Product found but no nutrition data available.","error"):(en(Ke),Ke.portion?(ct(1),dt(String(Ke.portion.weight)),nn("portion")):(ct(0),dt(String(Ke.servingValue||100)),nn("weight")),xe(""))}else pe("Product not found. Try search or manual entry.","error")}catch(N){console.error("Barcode lookup error:",N),pe("Failed to look up product. Check your connection.","error")}$e(!1)},ke=(j,N,K)=>{const re=j.toLowerCase().trim(),Ke=N.toLowerCase().trim(),qe=K.toLowerCase().trim();let ze=0;return(re===qe||re===qe+"s"||re+"s"===qe)&&(ze+=100),(re.endsWith(" "+qe)||re.endsWith(" "+qe+"s"))&&(ze+=40),(re.startsWith(qe+" ")||re.startsWith(qe+"s "))&&(ze+=15),qe.split(/\s+/).some(At=>Ke===At||Ke.startsWith(At))&&(ze+=30),ze+=Math.max(0,30-re.length),ze},de=async()=>{if(!Ae.trim())return;Ft.current&&Ft.current.abort();const j=new AbortController;Ft.current=j;const N=Ae.trim().toLowerCase(),K=N.split(/\s+/).filter(Boolean);if(Fp.has(N)){Je(Fp.get(N));return}Cn(!0);try{const Ke=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Ae.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,qe=await fetch(Ke,{signal:j.signal});if(!qe.ok)throw new Error(`HTTP ${qe.status}`);const Lt=((await qe.json()).products||[]).map(At=>ye(At)).filter(At=>At.name!=="Unknown Product"&&(At.calories>0||At.protein>0)).filter(At=>{const Un=(At.name+" "+At.brand).toLowerCase();return K.every(Fs=>Un.includes(Fs))}).sort((At,Un)=>ke(Un.name,Un.brand,N)-ke(At.name,At.brand,N)).slice(0,10);Fp.set(N,Lt),Je(Lt),Lt.length===0&&pe("No results found. Try a different search.","info")}catch(re){if(re.name==="AbortError")return;console.error("Search error:",re),pe("Search failed. Check your connection.","error")}Cn(!1)};v.useEffect(()=>{if(an.current&&clearTimeout(an.current),!(!Ae.trim()||q!=="search"||he))return an.current=setTimeout(()=>{de()},700),()=>clearTimeout(an.current)},[Ae]);const tt=()=>{const j={...Q,water:Q.water+1};oe(j),Re(j)},Ct=()=>{if(Q.water<=0)return;const j={...Q,water:Q.water-1};oe(j),Re(j)},it={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},_t=80,xt=2*Math.PI*_t,on=(j,N,K,re,Ke)=>{const qe=re>0?Math.min(100,Math.round(K/re*100)):0,ze=xt-qe/100*xt,Lt=it[Ke]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:_t}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:_t,style:{stroke:Lt},strokeDasharray:xt,strokeDashoffset:ze})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:Lt},children:Math.round(K)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",re,j==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:Lt},children:N})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:Lt},children:[qe,"%"]})]})};if(v.useEffect(()=>{if(!Z)return;const j=setTimeout(()=>{const N=Z;Vt(),P(null),_e(N)},1500);return()=>clearTimeout(j)},[Z]),v.useEffect(()=>()=>{const j=Yt.current;if(Wt.current&&j){try{j.stop(),j.offDetected()}catch{}Wt.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:T.gender==="male"?"active":"",onClick:()=>{L(j=>({...j,gender:"male"})),U(null)},children:"Male"}),a.jsx("button",{className:T.gender==="female"?"active":"",onClick:()=>{L(j=>({...j,gender:"female"})),U(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:T.age,onChange:j=>{L(N=>({...N,age:j.target.value})),U(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:T.weight,onChange:j=>{L(N=>({...N,weight:j.target.value})),U(null)},placeholder:T.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:T.weightUnit==="kg"?"active":"",onClick:()=>{L(j=>({...j,weightUnit:"kg"})),U(null)},children:"kg"}),a.jsx("button",{className:T.weightUnit==="lbs"?"active":"",onClick:()=>{L(j=>({...j,weightUnit:"lbs"})),U(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[T.heightUnit==="cm"?a.jsx("input",{type:"number",value:T.height,onChange:j=>{L(N=>({...N,height:j.target.value})),U(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:T.heightFeet,onChange:j=>{L(N=>({...N,heightFeet:j.target.value})),U(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:T.heightInches,onChange:j=>{L(N=>({...N,heightInches:j.target.value})),U(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:T.heightUnit==="cm"?"active":"",onClick:()=>{L(j=>({...j,heightUnit:"cm"})),U(null)},children:"cm"}),a.jsx("button",{className:T.heightUnit==="ft"?"active":"",onClick:()=>{L(j=>({...j,heightUnit:"ft"})),U(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:T.dailyActivity,onChange:j=>{L(N=>({...N,dailyActivity:j.target.value})),U(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:T.trainingFrequency,onChange:j=>{L(N=>({...N,trainingFrequency:j.target.value})),U(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:T.goal==="lose"?"active":"",onClick:()=>{L(j=>({...j,goal:"lose"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:T.goal==="maintain"?"active":"",onClick:()=>{L(j=>({...j,goal:"maintain"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:T.goal==="build"?"active":"",onClick:()=>{L(j=>({...j,goal:"build"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),T.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:T.deficitLevel==="light"?"active":"",onClick:()=>{L(j=>({...j,deficitLevel:"light"})),U(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:T.deficitLevel==="moderate"?"active":"",onClick:()=>{L(j=>({...j,deficitLevel:"moderate"})),U(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:T.deficitLevel==="harsh"?"active":"",onClick:()=>{L(j=>({...j,deficitLevel:"harsh"})),U(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:wt,disabled:!Mt(),children:"Calculate Macros"})]}),$&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[on("Protein","Protein",$.protein,$.protein,"ring-protein"),on("Carbs","Carbs",$.carbs,$.carbs,"ring-carbs"),on("Fats","Fats",$.fats,$.fats,"ring-fats"),on("Calories","Calories",$.calories,$.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[$.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[$.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",$.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[$.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:ft,children:"Set as My Daily Targets"})]})]}),rn&&a.jsx("div",{className:`toast-notification ${rn.type}`,children:rn.message})]});const sr=j=>{const N=new Date(j+"T12:00:00"),K=N.getDay(),re=new Date(N);re.setDate(N.getDate()-(K+6)%7);const Ke=[];for(let qe=0;qe<7;qe++){const ze=new Date(re);ze.setDate(re.getDate()+qe),Ke.push(ze.toISOString().split("T")[0])}return Ke},Ls=["M","T","W","T","F","S","S"],zs=(j,N="search")=>{M(j),N==="scan"?(me("scan"),en(null)):N==="manual"?(me("manual"),vt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):N==="favourites"?me("favourites"):(me("search"),Je([]),at(""))},$n=sr(O),H=new Date(O+"T12:00:00"),ce=`${De[H.getMonth()]} ${H.getFullYear()}`;return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),U(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const j=new Date(O+"T12:00:00");j.setDate(j.getDate()-7);const N=j.toISOString().split("T")[0];se(N)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{R(!Ne),D({year:H.getFullYear(),month:H.getMonth()})},children:ce}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const j=new Date(O+"T12:00:00");j.setDate(j.getDate()+7);const N=j.toISOString().split("T")[0];N<=$i()&&se(N)},"aria-label":"Next week",disabled:$n[6]>=$i(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:$n.map((j,N)=>{const K=new Date(j+"T12:00:00").getDate(),re=j===O,Ke=j>$i(),qe=j===$i();return a.jsxs("button",{className:`nut-week-day${re?" selected":""}${qe?" today":""}${Ke?" future":""}`,disabled:Ke,onClick:()=>se(j),children:[a.jsx("span",{className:"nut-week-day-letter",children:Ls[N]}),a.jsx("span",{className:"nut-week-day-num",children:K})]},j)})})]}),Ne&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>D(j=>{let N=j.month-1,K=j.year;return N<0&&(N=11,K--),{year:K,month:N}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[De[V.month]," ",V.year]}),a.jsx("button",{onClick:()=>D(j=>{let N=j.month+1,K=j.year;return N>11&&(N=0,K++),{year:K,month:N}}),disabled:V.year===new Date().getFullYear()&&V.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Ue.map(j=>a.jsx("span",{children:j},j))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Ve(V.year,V.month))].map((j,N)=>a.jsx("span",{},`e${N}`)),[...Array(Qe(V.year,V.month))].map((j,N)=>{const K=N+1,re=`${V.year}-${String(V.month+1).padStart(2,"0")}-${String(K).padStart(2,"0")}`,Ke=re>$i(),qe=re===O,ze=re===$i();return a.jsx("button",{className:`nut-cal-day${qe?" selected":""}${ze?" today":""}${Ke?" future":""}`,disabled:Ke,onClick:()=>{se(re),R(!1)},children:K},K)})]})]}),a.jsxs("div",{className:"nut-rings-row",children:[on("Protein","Protein",ve.protein,w.protein,"ring-protein"),on("Carbs","Carbs",ve.carbs,w.carbs,"ring-carbs"),on("Fats","Fats",ve.fats,w.fats,"ring-fats"),on("Calories","kCal",ve.calories,w.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone",children:a.jsxs("div",{className:"nut-light-content",children:[Oe&&a.jsxs("button",{className:"nut-water-quick",onClick:()=>I(!0),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsxs("span",{className:"nut-water-quick-count",children:[Q.water," / ",w?.waterGoal||8]}),a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:b2.map(j=>{const N=Q.entries.filter(re=>(re.meal||"snacks")===j.key),K=N.reduce((re,Ke)=>({protein:re.protein+(Ke.protein||0),carbs:re.carbs+(Ke.carbs||0),fats:re.fats+(Ke.fats||0),calories:re.calories+(Ke.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${j.key}`,children:dD[j.key]}),a.jsx("span",{className:"nut-meal-card-title",children:j.label}),N.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[K.calories," cal"]}),Oe&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>bt(He===j.key?null:j.key),"aria-label":`Add to ${j.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),N.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,w.protein>0?K.protein/w.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[K.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,w.carbs>0?K.carbs/w.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[K.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,w.fats>0?K.fats/w.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[K.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,w.calories>0?K.calories/w.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:K.calories})]})]}),N.length>0&&a.jsx("div",{className:"nut-log-list",children:N.map(re=>a.jsxs("div",{className:"nut-log-item",children:[a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:re.name}),re.serving&&a.jsx("span",{className:"nut-log-item-serving",children:re.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[re.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[re.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[re.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:re.calories})]}),Oe&&a.jsx("button",{className:"nut-log-delete",onClick:()=>Nt(re.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},re.id))}),N.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:Oe?"Tap + to add food":"No entries"})})]},j.key)})})})]})}),He&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>bt(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",b2.find(j=>j.key===He)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const j=He;bt(null),zs(j,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const j=He;bt(null),zs(j,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const j=He;bt(null),zs(j,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const j=He;bt(null),zs(j,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),S&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>I(!1),children:a.jsxs("div",{className:"nut-water-popup",onClick:j=>j.stopPropagation(),children:[a.jsxs("div",{className:"nut-water-popup-header",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsx("span",{children:"Water Intake"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>I(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsxs("div",{className:"nut-water-popup-body",children:[a.jsx("div",{className:"nut-water-glasses",children:[...Array(w?.waterGoal||8)].map((j,N)=>a.jsx("div",{className:`nut-water-glass ${N<Q.water?"filled":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:N<Q.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},N))}),a.jsxs("div",{className:"nut-water-popup-count",children:[Q.water," / ",w?.waterGoal||8," glasses"]}),a.jsxs("div",{className:"nut-water-btns",children:[a.jsx("button",{onClick:Ct,disabled:Q.water<=0,children:"-"}),a.jsx("button",{onClick:tt,children:"+"})]})]})]})}),q&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{Vt(),P(null),me(null),en(null)},children:a.jsxs("div",{className:"nut-modal",onClick:j=>j.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:q==="scan"?"Scan Barcode":q==="search"?"Search Food":q==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{Vt(),P(null),me(null),en(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),q==="scan"&&!he&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),Pe&&!Z&&a.jsx("div",{className:"nut-scan-line"}),Z&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:Z})]})]}),!Pe&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:Qt,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),Pe&&!Z&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:G,onChange:j=>xe(j.target.value),onKeyDown:j=>j.key==="Enter"&&G.trim()&&_e(G.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>G.trim()&&_e(G.trim()),disabled:!G.trim()||Ee,children:Ee?"...":"Look Up"})]})]}),q==="scan"&&he&&(()=>{const j=he.servingUnit||"g",N=he.portion,K=nt==="portion"&&N?jt*N.weight:parseFloat(tn)||0,re=K/100,Ke=j==="ml"?[100,200,250,500]:[50,100,150,200],qe=nt==="portion"&&N?`${jt} ${N.label}${jt!==1?"s":""} (${Math.round(K)}${j})`:`${Math.round(K)}${j}`;return a.jsxs("div",{className:"nut-product-result",children:[he.image&&a.jsx("img",{src:he.image,alt:he.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:he.name}),a.jsx("button",{className:`nut-fav-star confirm${ge(he.name)?" active":""}`,onClick:()=>rt({name:he.name,protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories,serving:he.servingSize,per100g:{protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories},servingUnit:he.servingUnit||"g",portion:he.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:ge(he.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),he.brand&&a.jsx("p",{className:"nut-product-brand",children:he.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",j,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[he.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[he.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[he.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[he.calories," cal"]})]}),N&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:nt==="portion"?"active":"",onClick:()=>{nn("portion"),jt<1&&ct(1)},children:"Portions"}),a.jsxs("button",{className:nt==="weight"?"active":"",onClick:()=>{nn("weight"),dt(String(Math.round(K)||100))},children:["Custom (",j,")"]})]}),nt==="portion"&&N?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,jt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:jt}),a.jsxs("span",{className:"nut-stepper-label",children:[N.label,jt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(K),j]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(jt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",j,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:tn,onChange:ze=>dt(ze.target.value),onFocus:ze=>ze.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ke.map(ze=>a.jsxs("button",{className:`nut-quick-btn${tn===String(ze)?" active":""}`,onClick:()=>dt(String(ze)),children:[ze,j]},ze))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(he.protein*re),"p / ",Math.round(he.carbs*re),"c / ",Math.round(he.fats*re),"f / ",Math.round(he.calories*re)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{en(null),me("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>St({name:he.name,protein:Math.round(he.protein*re),carbs:Math.round(he.carbs*re),fats:Math.round(he.fats*re),calories:Math.round(he.calories*re),serving:qe}),children:"Add"})]})]})})(),q==="search"&&!he&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:mn,value:Ae,onChange:j=>at(j.target.value),onKeyDown:j=>{j.key==="Enter"&&(clearTimeout(an.current),de())},onFocus:()=>setTimeout(()=>mn.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:de,disabled:Ot,children:Ot?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[ht.map((j,N)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{en(j),j.portion?(ct(1),dt(String(j.portion.weight)),nn("portion")):(ct(0),dt(String(j.servingValue||100)),nn("weight"))},children:[j.image&&a.jsx("img",{src:j.image,alt:j.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:j.name}),j.brand&&a.jsx("span",{className:"nut-search-item-brand",children:j.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[j.calories," cal  ",j.protein,"p  ",j.carbs,"c  ",j.fats,"f per 100",j.servingUnit||"g"]})]})]},N)),ht.length===0&&Ae&&!Ot&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),q==="search"&&he&&(()=>{const j=he.servingUnit||"g",N=he.portion,K=nt==="portion"&&N?jt*N.weight:parseFloat(tn)||0,re=K/100,Ke=j==="ml"?[100,200,250,500]:[50,100,150,200],qe=nt==="portion"&&N?`${jt} ${N.label}${jt!==1?"s":""} (${Math.round(K)}${j})`:`${Math.round(K)}${j}`;return a.jsxs("div",{className:"nut-product-result",children:[he.image&&a.jsx("img",{src:he.image,alt:he.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:he.name}),a.jsx("button",{className:`nut-fav-star confirm${ge(he.name)?" active":""}`,onClick:()=>rt({name:he.name,protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories,serving:he.servingSize,per100g:{protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories},servingUnit:he.servingUnit||"g",portion:he.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:ge(he.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),he.brand&&a.jsx("p",{className:"nut-product-brand",children:he.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",j,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[he.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[he.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[he.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[he.calories," cal"]})]}),N&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:nt==="portion"?"active":"",onClick:()=>{nn("portion"),jt<1&&ct(1)},children:"Portions"}),a.jsxs("button",{className:nt==="weight"?"active":"",onClick:()=>{nn("weight"),dt(String(Math.round(K)||100))},children:["Custom (",j,")"]})]}),nt==="portion"&&N?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,jt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:jt}),a.jsxs("span",{className:"nut-stepper-label",children:[N.label,jt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(K),j]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(jt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",j,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:tn,onChange:ze=>dt(ze.target.value),onFocus:ze=>ze.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ke.map(ze=>a.jsxs("button",{className:`nut-quick-btn${tn===String(ze)?" active":""}`,onClick:()=>dt(String(ze)),children:[ze,j]},ze))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(he.protein*re),"p / ",Math.round(he.carbs*re),"c / ",Math.round(he.fats*re),"f / ",Math.round(he.calories*re)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>en(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>St({name:he.name,protein:Math.round(he.protein*re),carbs:Math.round(he.carbs*re),fats:Math.round(he.fats*re),calories:Math.round(he.calories*re),serving:qe}),children:"Add"})]})]})})(),q==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:It.name,onChange:j=>vt(N=>({...N,name:j.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:It.serving,onChange:j=>vt(N=>({...N,serving:j.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:It.protein,onChange:j=>vt(N=>({...N,protein:j.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:It.carbs,onChange:j=>vt(N=>({...N,carbs:j.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:It.fats,onChange:j=>vt(N=>({...N,fats:j.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:It.calories,onChange:j=>vt(N=>({...N,calories:j.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!It.name.trim(),onClick:()=>St({name:It.name,protein:parseFloat(It.protein)||0,carbs:parseFloat(It.carbs)||0,fats:parseFloat(It.fats)||0,calories:parseFloat(It.calories)||0,serving:It.serving||""}),children:"Add Food"})]}),q==="favourites"&&!he&&(()=>{const j=J(),N=K=>{if(K.per100g){const re=K.per100g;en({name:K.name,brand:"",image:null,servingSize:K.serving||"100g",servingValue:100,servingUnit:K.servingUnit||"g",portion:K.portion||null,protein:re.protein,carbs:re.carbs,fats:re.fats,calories:re.calories,per100g:!0}),K.portion?(ct(1),dt(String(K.portion.weight)),nn("portion")):(ct(0),dt("100"),nn("weight"))}else St({name:K.name,protein:K.protein,carbs:K.carbs,fats:K.fats,calories:K.calories,serving:K.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:j.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:j.map((K,re)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:Ke=>{Ke.stopPropagation(),rt(K)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>N(K),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:K.name}),a.jsx("span",{className:"nut-recent-item-serving",children:K.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[K.calories," cal"]})]})]},re))})})})(),q==="favourites"&&he&&(()=>{const j=he.servingUnit||"g",N=he.portion,K=nt==="portion"&&N?jt*N.weight:parseFloat(tn)||0,re=K/100,Ke=j==="ml"?[100,200,250,500]:[50,100,150,200],qe=nt==="portion"&&N?`${jt} ${N.label}${jt!==1?"s":""} (${Math.round(K)}${j})`:`${Math.round(K)}${j}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:he.name}),a.jsx("button",{className:`nut-fav-star confirm${ge(he.name)?" active":""}`,onClick:()=>rt({name:he.name,protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories,serving:he.servingSize,per100g:{protein:he.protein,carbs:he.carbs,fats:he.fats,calories:he.calories},servingUnit:he.servingUnit||"g",portion:he.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:ge(he.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",j,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[he.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[he.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[he.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[he.calories," cal"]})]}),N&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:nt==="portion"?"active":"",onClick:()=>{nn("portion"),jt<1&&ct(1)},children:"Portions"}),a.jsxs("button",{className:nt==="weight"?"active":"",onClick:()=>{nn("weight"),dt(String(Math.round(K)||100))},children:["Custom (",j,")"]})]}),nt==="portion"&&N?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,jt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:jt}),a.jsxs("span",{className:"nut-stepper-label",children:[N.label,jt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(K),j]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(jt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",j,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:tn,onChange:ze=>dt(ze.target.value),onFocus:ze=>ze.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ke.map(ze=>a.jsxs("button",{className:`nut-quick-btn${tn===String(ze)?" active":""}`,onClick:()=>dt(String(ze)),children:[ze,j]},ze))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(he.protein*re),"p / ",Math.round(he.carbs*re),"c / ",Math.round(he.fats*re),"f / ",Math.round(he.calories*re)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>en(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>St({name:he.name,protein:Math.round(he.protein*re),carbs:Math.round(he.carbs*re),fats:Math.round(he.fats*re),calories:Math.round(he.calories*re),serving:qe}),children:"Add"})]})]})})()]})}),a.jsx(La,{active:"nutrition"}),rn&&a.jsx("div",{className:`toast-notification ${rn.type}`,children:rn.message})]})}const v2="/login/assets/randomiser-glq9YJkL.jpg",pD="/login/assets/programme-card-workout-CnNzTYkz.webp",gD="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",yD="/login/assets/mg-arms-BeOQU3wx.jpg",bD=60,qp=5,vD=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],xD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},wD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},_D={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},Hp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},$p=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:gD},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Kc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:yD},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],x2={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},w2=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Wp=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],Il=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],Gp=[5,10,15,20,30];function kD(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function TD(s){const e=[...s];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function jD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Fr(),{isDark:l,toggleTheme:u,accent:h}=Va(),{isPremium:p,FREE_RANDOMISER_DURATIONS:g,FREE_RANDOMISER_WEEKLY_LIMIT:y}=xf(),w=nr(),[k,T]=v.useState("menu"),[L,$]=v.useState(["bodyweight"]),[U,O]=v.useState("core"),[se,Q]=v.useState("intermediate"),[oe,ve]=v.useState(p?15:5),[Me,Ne]=v.useState([]),[R,S]=v.useState(!1),I=v.useRef(!1),V=v.useRef([]),[D,F]=v.useState([]),[M,He]=v.useState(2),[bt,q]=v.useState(Il[1]),[me,Pe]=v.useState(1),[We,Z]=v.useState(0),[P,G]=v.useState("work"),[xe,Ee]=v.useState(0),[$e,Ae]=v.useState(!1),[at,ht]=v.useState(0),[Je,Ot]=v.useState(null),Cn=v.useRef(null);v.useRef(null),v.useRef(null);const[It,vt]=v.useState(null),he=v.useCallback((Y,we="info")=>{vt({message:Y,type:we}),setTimeout(()=>vt(null),3e3)},[]),[en,tn]=v.useState(null),[dt,jt]=v.useState(null),[ct,nt]=v.useState(0),[nn,ds]=v.useState(0),[Et,rn]=v.useState([]),[Yn,Wt]=v.useState(""),[Ft,an]=v.useState(""),[mn,pe]=v.useState(!1),[Re,Oe]=v.useState(0),[Qe,Ve]=v.useState(!1),[De,Ue]=v.useState({}),wt=v.useRef(null),ft=v.useRef(null),[Mt,Ut]=v.useState([]),[J,ge]=v.useState(null),[rt,St]=v.useState(0),[Nt,Yt]=v.useState(0),[Qt,Vt]=v.useState(0),[Ln,es]=v.useState(0),[hn,Sn]=v.useState(0),[Mn,z]=v.useState(0),[ye,_e]=v.useState({beginner:0,intermediate:0,advanced:0}),ke=p?Gp:Gp.filter(Y=>g.includes(Y)),de=!p&&rt>=y,[tt,Ct]=v.useState(null),[it,_t]=v.useState(""),[xt,on]=v.useState(!1);v.useEffect(()=>{!i&&(!s||!e)&&w("/")},[s,e,i,w]),v.useEffect(()=>{if(!s||!t)return;(async()=>{try{const we=Bt(be,"workoutLogs"),te=Nn(we,un("clientId","==",t.id)),Fe=(await jn(te)).docs.map(pn=>pn.data()),ot=Fe.filter(pn=>pn.type!=="programme");es(ot.length);const mt=ot.reduce((pn,us)=>pn+(us.duration||0),0);Sn(mt);const qt={beginner:0,intermediate:0,advanced:0};ot.forEach(pn=>{pn.level&&qt[pn.level]!==void 0&&qt[pn.level]++}),_e(qt);const _n=new Date,xs=_n.getDay(),ln=xs===0?-6:1-xs,qs=new Date(_n);qs.setDate(_n.getDate()+ln),qs.setHours(0,0,0,0);const Es=qs.getTime(),fs=Fe.filter(pn=>{const us=pn.completedAt;return us?(us.toDate?us.toDate().getTime():new Date(us).getTime())>=Es:!1});St(fs.filter(pn=>pn.type!=="programme").length);let Ba=0;if(t)try{const pn=await In(Ge(be,"clientProgrammes",t.id));if(pn.exists()){const us=pn.data(),cr=us.templateId;Ba=fs.filter(ts=>ts.type==="programme"&&ts.programmeId===cr).length,Ct(cr);const Os=$p.find(ts=>ts.id===cr);Os&&_t(Os.name);const xr=wD[cr];if(xr){const ts=Object.keys(us.completedSessions||{}).length,Ws=xr.duration*xr.daysPerWeek;Vt(Ws>0?Math.round(ts/Ws*100):0)}}else Ct(null),_t(""),Vt(0)}catch{}Yt(Ba);const sa=ot.map(pn=>pn.completedAt).filter(Boolean).map(pn=>pn.toDate?pn.toDate().getTime():new Date(pn).getTime()).sort((pn,us)=>us-pn);if(sa.length===0)z(0);else{const pn=new Set;sa.forEach(Ws=>{const Ss=new Date(Ws),Rr=Ss.getDay(),wr=Rr===0?-6:1-Rr,Ar=new Date(Ss);Ar.setDate(Ss.getDate()+wr),Ar.setHours(0,0,0,0),pn.add(Ar.getTime())});const us=[...pn].sort((Ws,Ss)=>Ss-Ws);let cr=0;const Os=new Date(_n),xr=_n.getDay()===0?-6:1-_n.getDay();Os.setDate(_n.getDate()+xr),Os.setHours(0,0,0,0);let ts=Os.getTime();us.includes(ts)||(ts-=10080*60*1e3);for(let Ws=0;Ws<200&&us.includes(ts);Ws++)cr++,ts-=10080*60*1e3;z(cr)}}catch(we){console.error("Error loading workout stats:",we)}finally{on(!0)}})()},[s,t,k]);const sr=()=>{const Y=[];let we;U==="mix"?we=["core","upper","lower"]:U==="fullbody"?we=["upper","lower"]:we=[U];for(const te of L)for(const Be of we)Y.push(`exercises/${te}/${Be}`);return Y},Ls=async()=>{if(I.current){for(;I.current;)await new Promise(Y=>setTimeout(Y,200));return V.current}I.current=!0,S(!0);try{const Y=sr(),we=[];for(const ot of Y)try{const mt=Ji(Zi,ot),qt=await y2(mt);we.push(...qt.items)}catch{console.warn(`Folder ${ot} not found, skipping.`)}if(we.length===0&&L.includes("bodyweight")&&U==="core")try{const ot=Ji(Zi,"core"),mt=await y2(ot);we.push(...mt.items)}catch{console.warn("Legacy core/ folder not found either.")}if(we.length===0){const ot=L.map(qt=>w2.find(_n=>_n.key===qt)?.label).join(" + "),mt=Wp.find(qt=>qt.key===U)?.label;return he(`No exercises found for ${ot} / ${mt}. Upload videos to Firebase Storage.`,"error"),I.current=!1,S(!1),[]}const te=new Set,Be=we.filter(ot=>{const mt=ot.name.replace(/\.(mp4|gif)$/i,"");return te.has(mt)?!1:(te.add(mt),!0)}),Fe=await Promise.all(Be.map(async ot=>{const mt=await Fo(ot),qt=kD(ot.name.replace(/\.(mp4|gif)$/i,"")),_n=/\.gif$/i.test(ot.name);return{name:qt,videoUrl:mt,isGif:_n}}));return V.current=Fe,Ne(Fe),I.current=!1,S(!1),Fe}catch(Y){console.error("Error loading exercises:",Y);const we=Y.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${Y.message||Y.code||"Unknown error"}`;return he(we,"error"),I.current=!1,S(!1),[]}},zs=async()=>{if(de)return;T("spinning"),V.current=[];const Y=await Ls();if(Y.length===0){T("setup");return}const we=Il.find(xs=>xs.key===se);q(we);const te=we.work+we.rest,Be=oe*60,Fe=Math.floor(Be/te);let ot,mt;Fe<=6?(ot=Math.max(3,Math.floor(Fe/2)),mt=Math.floor(Fe/ot)):Fe<=12?(ot=Math.min(6,Math.floor(Fe/2)),mt=Math.floor(Fe/ot)):(ot=Math.min(10,Math.floor(Fe/2)),mt=Math.floor(Fe/ot)),mt=Math.max(2,mt);const qt=TD(Y),_n=qt.slice(0,Math.min(ot,qt.length));F(_n),He(mt),setTimeout(()=>T("preview"),2e3)},$n=()=>{T("countdown"),ht(3)};v.useEffect(()=>{if(k!=="countdown")return;if(at<=0){T("workout"),Pe(1),Z(0),G("work"),Ee(bt.work),Ae(!1),Fs();return}Un();const Y=setTimeout(()=>ht(we=>we-1),1e3);return()=>clearTimeout(Y)},[at,k]),v.useEffect(()=>{if(k!=="workout"||$e)return;if(xe<=0){H();return}xe<=3&&Un();const Y=setTimeout(()=>Ee(we=>we-1),1e3);return()=>clearTimeout(Y)},[xe,k,$e]);const H=()=>{if(P==="work")G("rest"),Ee(bt.rest);else{const Y=We+1;if(Y>=D.length){const we=me+1;if(we>M){T("complete"),ce();return}Pe(we),Z(0)}else Z(Y);G("work"),Ee(bt.work),Fs()}},ce=async()=>{if(s)try{await ci(Bt(be,"workoutLogs"),{clientId:t.id,level:se,duration:oe,equipment:L,focus:U,exerciseCount:D.length,rounds:M,exercises:D.map(Y=>Y.name),completedAt:yt.now()}),St(Y=>Y+1),es(Y=>Y+1),Sn(Y=>Y+oe),_e(Y=>({...Y,[se]:(Y[se]||0)+1}))}catch(Y){console.error("Error saving workout log:",Y)}},j=async(Y,we,te)=>{if(!(!t||!we))try{const Be=t.id,Fe=await In(Ge(be,"coreBuddyPBs",Be)),mt=(Fe.exists()?Fe.data():null)?.exercises||{},qt=mt[Y];let _n=!1;if(qt?(we>(qt.weight||0)||we===(qt.weight||0)&&te>(qt.reps||0))&&(_n=!0):_n=!0,_n){const xs={...mt,[Y]:{weight:we,reps:te,achievedAt:yt.now()}};await Hn(Ge(be,"coreBuddyPBs",Be),{clientId:t.id,exercises:xs,updatedAt:yt.now()}),he(`New PB! ${we}kg  ${te} reps`,"success"),Un(),await N(Y,we)}}catch(Be){console.error("Error checking PB:",Be)}},N=async(Y,we)=>{if(t)try{const te=await In(Ge(be,"coreBuddyTargets",t.id));if(!te.exists())return;const Fe=(te.data().targets||{})[Y];if(!Fe||we<Fe.targetWeight)return;const ot=await In(Ge(be,"coreBuddyAchievements",t.id)),mt=ot.exists()?ot.data():{clientId:t.id,badges:[],totalVolume:0};if(mt.badges.some(ln=>ln.type==="pb_target"&&ln.exercise===Y&&ln.targetWeight===Fe.targetWeight))return;const _n={type:"pb_target",exercise:Y,group:xD[Y]||"push",targetWeight:Fe.targetWeight,achievedAt:yt.now()},xs=[...mt.badges,_n];await Hn(Ge(be,"coreBuddyAchievements",t.id),{...mt,badges:xs,updatedAt:yt.now()}),Ut(ln=>[...ln,_n])}catch(te){console.error("Error checking target badge:",te)}},K=async Y=>{if(!(!t||Y<=0))try{const we=await In(Ge(be,"coreBuddyAchievements",t.id)),te=we.exists()?we.data():{clientId:t.id,badges:[],totalVolume:0},Be=te.totalVolume||0,Fe=Be+Y,ot=[];vD.forEach(qt=>{Fe>=qt.threshold&&Be<qt.threshold&&(te.badges.some(xs=>xs.type==="volume_milestone"&&xs.milestone===qt.threshold)||ot.push({type:"volume_milestone",milestone:qt.threshold,label:qt.label,achievedAt:yt.now()}))});const mt=[...te.badges,...ot];await Hn(Ge(be,"coreBuddyAchievements",t.id),{clientId:t.id,badges:mt,totalVolume:Math.round(Fe),updatedAt:yt.now()}),ot.length>0&&Ut(qt=>[...qt,...ot])}catch(we){console.error("Error updating volume:",we)}},re=async Y=>{if(jt(Y),Y.interval){const Be=[];for(const Fe of Y.exercises){let ot=null,mt=!1;if(Fe.storagePath)try{const qt=Ji(Zi,Fe.storagePath);ot=await Fo(qt),mt=/\.gif$/i.test(Fe.storagePath)}catch{}Be.push({name:Fe.name,videoUrl:ot,isGif:mt})}F(Be),He(Y.rounds),q({work:Y.work,rest:Y.rest}),T("preview");return}const we={};for(const Be of Y.exercises)if(Be.storagePath)try{const Fe=Ji(Zi,Be.storagePath);we[Be.name]={url:await Fo(Fe),isGif:/\.gif$/i.test(Be.storagePath)}}catch{}Ue(we);const te=Y.exercises.map(Be=>({name:Be.name,type:Be.type,targetSets:Be.sets,targetReps:Be.reps||0,targetTime:Be.time||0,sets:[]}));rn(te),nt(0),ds(0),Wt(""),an(""),Ve(!1),pe(!1),Oe(0),Ut([]),ge(null),T("muscle_workout")},Ke=()=>{const Y=wt.current;Y&&(Y.paused?(Y.play(),Ve(!0)):(Y.pause(),Ve(!1)))};v.useEffect(()=>{if(k!=="muscle_workout"||!mn||Re<=0){k==="muscle_workout"&&mn&&Re<=0&&(pe(!1),Un());return}return ft.current=setTimeout(()=>Oe(Y=>Y-1),1e3),()=>clearTimeout(ft.current)},[k,mn,Re]);const qe=async()=>{const Y=Et[ct];let we={};if(Y.type==="weighted"){const Fe=parseFloat(Yn)||0,ot=parseInt(Ft)||0;if(ot===0){he("Enter your reps","error");return}we={weight:Fe,reps:ot}}else if(Y.type==="reps"){const Fe=parseInt(Ft)||0;if(Fe===0){he("Enter your reps","error");return}we={reps:Fe}}else if(Y.type==="timed"){const Fe=Y.targetTime-Re;we={time:Math.max(Fe,1)}}const te=[...Et];te[ct]={...Y,sets:[...Y.sets,we]},rn(te),Y.type==="weighted"&&we.weight>0&&await j(Y.name,we.weight,we.reps);const Be=Y.sets.length+1;if(Be<Y.targetSets)ds(Be),an(""),pe(!1),Oe(0);else if(ct+1<Et.length){const Fe=ct+1;nt(Fe),ds(0),Wt(""),an(""),Ve(!1),pe(!1),Oe(0)}else await ze(te),T("muscle_complete")},ze=async Y=>{if(!(!s||!t))try{const we=Y.reduce((Be,Fe)=>Be+Fe.sets.reduce((ot,mt)=>ot+(mt.weight||0)*(mt.reps||0),0),0),te=Y.reduce((Be,Fe)=>Be+Fe.sets.length,0);await ci(Bt(be,"workoutLogs"),{clientId:t.id,type:"muscle_group",muscleGroup:en,sessionId:dt?.id,sessionName:dt?.name,exerciseCount:Y.length,totalSets:te,duration:Math.round(te*1.5),volume:Math.round(we),exercises:Y.map(Be=>({name:Be.name,type:Be.type,sets:Be.sets})),completedAt:yt.now()}),we>0&&await K(we),Mt.length>0&&ge({badges:[...Mt]})}catch(we){console.error("Error saving muscle group workout log:",we)}},Lt=v.useRef(null),At=()=>(Lt.current||(Lt.current=new(window.AudioContext||window.webkitAudioContext)),Lt.current),Un=()=>{try{const Y=At(),we=Y.createOscillator(),te=Y.createGain();we.connect(te),te.connect(Y.destination),we.frequency.value=880,te.gain.value=.3,we.start(Y.currentTime),we.stop(Y.currentTime+.15)}catch{}},Fs=()=>{try{const Y=At(),we=Y.createOscillator(),te=Y.createGain();we.connect(te),te.connect(Y.destination),we.frequency.value=1200,te.gain.value=.4,we.start(Y.currentTime),we.stop(Y.currentTime+.3)}catch{}};v.useEffect(()=>{if(k!=="workout"||P!=="work"||!D[We]?.isGif)return;const we=setInterval(()=>{const te=Cn.current;if(!te)return;const Be=te.getAttribute("src");te.removeAttribute("src"),setTimeout(()=>{Cn.current&&Cn.current.setAttribute("src",Be)},0)},4e3);return()=>clearInterval(we)},[k,P,We,me,D]);const js=(Y,we,te)=>{const Be=Math.round(Y/we*bD);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:q3.map((Fe,ot)=>a.jsx("line",{x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,className:ot<Be?`wk-tick-filled ${te}`:"wk-tick-empty",strokeWidth:Fe.thick?"3":"2"},ot))})},On=()=>{const Y=D.length*M;return((me-1)*D.length+We+(P==="rest"?.5:0))/Y},Vn=It&&a.jsx("div",{className:`toast-notification ${It.type}`,children:It.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>w("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(k==="menu")return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>w("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>T("setup"),children:a.jsx("img",{src:v2,alt:"Randomise Workout",className:"wk-hero-bg"})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsxs("h2",{children:["Programmes ",!p&&a.jsx("span",{className:"cb-premium-badge",children:"PREMIUM"})]}),a.jsxs("span",{className:"wk-section-count",children:[$p.length," available"]})]}),p?a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:$p.map((Y,we)=>Y.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>w("/client/core-buddy/programmes",{state:{templateId:Y.id}}),style:{animationDelay:`${we*.06}s`},children:[a.jsx("img",{src:Y.image,alt:Y.name,className:"wk-prog-img"}),we===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},Y.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>w("/client/core-buddy/programmes",{state:{templateId:Y.id}}),style:{animationDelay:`${we*.06}s`},children:[a.jsx("img",{src:pD,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:_D[Y.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[Y.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:Y.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:Y.name.toUpperCase()}),a.jsxs("p",{children:[Y.daysPerWeek,"x per week  ",Y.focus==="fullbody"?"Full Body":Y.focus.charAt(0).toUpperCase()+Y.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),we===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},Y.id))})}):a.jsxs("button",{className:"cb-upgrade-teaser",onClick:()=>w("/upgrade"),children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{children:"Upgrade to unlock programmes"})]}),a.jsxs("div",{className:"wk-section-header",children:[a.jsxs("h2",{children:["Muscle Groups ",!p&&a.jsx("span",{className:"cb-premium-badge",children:"PREMIUM"})]}),a.jsxs("span",{className:"wk-section-count",children:[Kc.length," groups"]})]}),p?a.jsx("div",{className:"wk-muscle-grid",children:Kc.map((Y,we)=>a.jsx("button",{className:`wk-muscle-hero-card${Y.image?" wk-muscle-thumb":""}`,onClick:()=>{tn(Y.key),T("muscle_sessions")},style:{animationDelay:`${we*.05}s`},children:Y.image?a.jsx("img",{src:Y.image,alt:Y.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:v2,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:Hp[Y.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:Y.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:Y.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[x2[Y.key]?.length||0," sessions"]})]})]})]})},Y.key))}):a.jsxs("button",{className:"cb-upgrade-teaser",onClick:()=>w("/upgrade"),children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{children:"Upgrade to unlock muscle group workouts"})]})]}),a.jsx(La,{active:"workouts"}),Vn]});if(k==="setup"){const Y=Wp.find(te=>te.key===U)?.label||U,we=Il.find(te=>te.key===se)?.label||se;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsx("div",{className:"wk-stats-row",children:[{label:"Total",value:`${Ln}`,pct:Ln>0?Math.min(Math.round(Ln/100*100),100):0,color:"#14b8a6",size:"normal"},{label:"This Week",value:`${rt}/${qp}`,pct:Math.round(Math.min(rt,qp)/qp*100),color:"var(--color-primary)",size:"large"},{label:"Wk Streak",value:`${Mn}`,pct:Mn>0?Math.min(Math.round(Mn/12*100),100):0,color:"#38B6FF",size:"normal"}].map(te=>{const Fe=2*Math.PI*38,ot=Fe-te.pct/100*Fe;return a.jsxs("div",{className:`wk-stat-item${te.size==="large"?" wk-stat-large":""}`,children:[a.jsxs("div",{className:"wk-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wk-stat-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"wk-stat-fill",cx:"50",cy:"50",r:38,style:{stroke:te.color},strokeDasharray:Fe,strokeDashoffset:ot})]}),a.jsx("span",{className:"wk-stat-value",style:{color:te.color},children:te.value})]}),a.jsx("span",{className:"wk-stat-label",children:te.label})]},te.label)})}),a.jsxs("div",{className:"wk-setup-flow",children:[a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:Wp.map(te=>a.jsxs("button",{className:`wk-equip-btn${U===te.key?" active":""}${te.key==="mix"?" wk-mix-btn":""}`,onClick:()=>O(te.key),children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:te.icon})}),a.jsx("span",{children:te.label})]},te.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:Il.map(te=>a.jsxs("button",{className:`wk-level-card wk-level-${te.key}${se===te.key?" active":""}`,onClick:()=>Q(te.key),children:[a.jsx("span",{className:"wk-level-name",children:te.label}),a.jsx("span",{className:"wk-level-desc",children:te.desc})]},te.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:Gp.map(te=>{const Be=!ke.includes(te);return a.jsxs("button",{className:`wk-time-btn${oe===te?" active":""}${Be?" locked":""}`,onClick:()=>!Be&&ve(te),disabled:Be,children:[a.jsx("span",{className:"wk-time-num",children:te}),a.jsx("span",{className:"wk-time-unit",children:Be?a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}):"min"})]},te)})})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:w2.map(te=>{const Be=L.includes(te.key);return a.jsxs("button",{className:`wk-equip-btn${Be?" active":""}`,onClick:()=>{$(Fe=>Be&&Fe.length===1?Fe:Be?Fe.filter(ot=>ot!==te.key):[...Fe,te.key])},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:te.icon})}),a.jsx("span",{children:te.label})]},te.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[Y,"  ",we,"  ",oe," min"]})})]})]}),a.jsxs("div",{className:"wk-go-sticky",children:[de&&a.jsx("p",{className:"wk-free-limit-msg",children:"You've used your free workout this week. Upgrade for unlimited access."}),a.jsx("button",{className:"wk-randomise-btn",onClick:zs,disabled:R||de,children:R?"Loading exercises...":de?"Limit Reached":"Randomise Workout"})]}),Vn]})}if(k==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:lu.map((Y,we)=>a.jsx("line",{x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,className:"wk-spin-tick",strokeWidth:Y.thick?"3.5":"2",style:{animationDelay:`${we*.03}s`}},we))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),Vn]});if(k==="preview"){const Y=dt?.interval?{work:dt.work,rest:dt.rest}:Il.find(te=>te.key===se),we=D.length*M*(Y.work+Y.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T(dt?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[dt?.interval&&a.jsx("h2",{className:"mg-preview-title",children:dt.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:D.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:M}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(we/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[Y.work,"/",Y.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:D.map((te,Be)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${Be*.06}s`},onClick:()=>Ot(te),children:[a.jsx("span",{className:"wk-preview-num",children:Be+1}),a.jsx("div",{className:"wk-preview-thumb",children:te.isGif?a.jsx("img",{src:te.videoUrl,alt:te.name,loading:"lazy"}):a.jsx("video",{src:`${te.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:te.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},Be))}),Je&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>Ot(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:te=>te.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>Ot(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Je.isGif?a.jsx("img",{src:Je.videoUrl,alt:Je.name}):a.jsx("video",{src:Je.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Je.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!dt?.interval&&a.jsxs("button",{className:"wk-btn-secondary",onClick:()=>zs(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),a.jsx("button",{className:"wk-btn-primary",onClick:$n,children:"Start Workout"})]})]})]})}if(k==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:at}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(k==="workout"){const Y=D[We],we=P==="work"?bt.work:bt.rest,te=P==="rest"?We+1<D.length?D[We+1]:me<M?D[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"wk-video-container",children:P==="work"?Y.isGif?a.jsx("img",{ref:Cn,className:"wk-video",src:Y.videoUrl,alt:Y.name},Y.videoUrl):a.jsx("video",{className:"wk-video",src:Y.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},Y.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),te&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",te.name]})]})}),a.jsx("div",{className:"wk-back-row",children:a.jsxs("button",{className:"wk-back-btn",onClick:()=>{confirm("Leave workout?")&&T("menu")},children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[We+1," / ",D.length]}),a.jsx("h2",{className:"wk-exercise-name",children:Y.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",me," of ",M]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[js(xe,we,P==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:xe}),a.jsx("span",{className:`wk-timer-phase ${P}`,children:P==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&T("menu")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>Ae(!$e),children:$e?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{Ee(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${On()*100}%`}})})]})}if(k==="complete"){const Y=Il.find(te=>te.key===se),we=D.length*M*(Y.work+Y.rest);return a.jsx("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:lu.map((te,Be)=>a.jsx("line",{x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,className:"wk-tick-complete",strokeWidth:te.thick?"3.5":"2",style:{animationDelay:`${Be*.02}s`}},Be))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(we/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:D.length*M}),a.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:M}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{jt(null),tn(null),T("menu")},children:"Done"})})]})})}if(k==="muscle_sessions"){const Y=Kc.find(te=>te.key===en),we=x2[en]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:Hp[en]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:Y?.icon})})}),a.jsxs("h2",{children:[Y?.label," Workouts"]}),a.jsxs("p",{children:[we.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:we.map((te,Be)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{jt(te),T("muscle_overview")},style:{animationDelay:`${Be*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:te.name}),a.jsx("p",{children:te.desc}),a.jsx("div",{className:"mg-session-meta",children:te.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[te.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[te.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[te.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const Fe=te.exercises.map(qt=>qt.sets||0),ot=Math.min(...Fe),mt=Math.max(...Fe);return ot===mt?`${ot} sets each`:`${ot}-${mt} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},te.id))})]}),Vn]})}if(k==="muscle_overview"){const Y=dt;if(!Y)return null;const we=Kc.find(te=>te.key===en);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:{background:Hp[en]},children:a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:we?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:Y.name}),Y.level&&a.jsx("span",{className:"mg-overview-level",children:Y.level})]}),a.jsx("p",{className:"mg-overview-desc",children:Y.desc})]}),Y.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:Y.overview})]}),Y.tips&&Y.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:Y.tips.map((te,Be)=>a.jsx("li",{children:te},Be))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",Y.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:Y.exercises.map((te,Be)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:Be+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:te.name}),Y.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[Y.work,"s work / ",Y.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[te.sets," sets  ",te.reps?`${te.reps} reps`:`${te.time}s`,te.type==="weighted"&&"  weighted"]})]})]},Be))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>re(Y),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),Vn]})}if(k==="muscle_workout"){const Y=dt;if(!Y)return null;const we=Y.exercises[ct],te=Et[ct];if(!we||!te)return null;const Be=te.sets.length,Fe=Y.exercises.length,ot=Y.exercises.reduce((ln,qs)=>ln+(qs.sets||0),0),qt=Et.reduce((ln,qs)=>ln+qs.sets.length,0)/ot*100,_n=De[we.name];we.type==="timed"&&Re===0&&!mn&&Be===nn&&setTimeout(()=>Oe(we.time),0);const xs=Be+1<we.sets?"Log Set":ct+1<Fe?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${qt}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&T("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",ct+1,"/",Fe]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[_n?a.jsxs("div",{className:"mg-video-container",onClick:Ke,children:[_n.isGif?a.jsx("img",{className:"mg-video",src:_n.url,alt:we.name}):a.jsx("video",{ref:wt,className:"mg-video",src:_n.url,loop:!0,muted:!0,playsInline:!0},we.name),!Qe&&!_n.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:we.name}),a.jsx("span",{className:`mg-ex-type-badge ${we.type}`,children:we.type==="weighted"?"Weight + Reps":we.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",Be+1," of ",we.sets]}),we.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",we.reps," reps"]}),we.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",we.time,"s"]})]}),we.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:Yn,onChange:ln=>Wt(ln.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Ft,onChange:ln=>an(ln.target.value),placeholder:"0"})]})]}),we.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Ft,onChange:ln=>an(ln.target.value),placeholder:"0"})]})}),we.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[Re,"s"]})}),mn?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>pe(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{Re===0&&Oe(we.time),pe(!0)},children:Re<we.time&&Re>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:qe,children:xs}),te.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:te.sets.map((ln,qs)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",qs+1,": ",ln.weight!=null?`${ln.weight}kg  ${ln.reps}`:ln.reps!=null?`${ln.reps} reps`:`${ln.time}s`]})]},qs))})]})]}),Vn]})}if(k==="muscle_complete"){const Y=Et.reduce((Be,Fe)=>Be+Fe.sets.length,0),we=Et.reduce((Be,Fe)=>Be+Fe.sets.reduce((ot,mt)=>ot+(mt.weight||0)*(mt.reps||0),0),0),te=Kc.find(Be=>Be.key===en)?.label||"";return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:lu.map((Be,Fe)=>a.jsx("line",{x1:Be.x1,y1:Be.y1,x2:Be.x2,y2:Be.y2,className:"wk-tick-complete",strokeWidth:Be.thick?"3.5":"2",style:{animationDelay:`${Fe*.02}s`}},Fe))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsxs("h2",{className:"wk-complete-title",children:[te," Complete!"]}),a.jsx("p",{className:"mg-complete-session-name",children:dt?.name}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Et.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Y}),a.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),we>0&&a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.round(we).toLocaleString()}),a.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{jt(null),tn(null),ge(null),T("menu")},children:"Done"})})]}),J&&a.jsx("div",{className:"mg-badge-celebration",onClick:()=>ge(null),children:a.jsxs("div",{className:"mg-badge-celebration-card",children:[a.jsx("div",{className:"mg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:a.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),a.jsx("h3",{className:"mg-badge-celebration-title",children:J.badges.length===1?"Badge Earned!":`${J.badges.length} Badges Earned!`}),a.jsx("div",{className:"mg-badge-celebration-list",children:J.badges.map((Be,Fe)=>a.jsx("div",{className:"mg-badge-celebration-item",children:Be.type==="pb_target"?`${Be.exercise}  ${Be.targetWeight}kg`:Be.label},Fe))}),a.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const ED=60,SD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},ND=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],_2=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function ad(s,e,t){const i=s.baseReps?s.baseReps+(e-1)*(t.repProg||0):void 0,l=s.baseTime?s.baseTime+(e-1)*(t.timeProg||0):void 0;return{sets:s.sets,reps:i,time:l}}const CD={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function RD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Fr(),{isDark:l,toggleTheme:u,accent:h}=Va(),p=nr(),g=ba(),[y,w]=v.useState("loading"),[k,T]=v.useState(null),L=v.useRef(!1),[$,U]=v.useState(null),[O,se]=v.useState(1),[Q,oe]=v.useState(0),[ve,Me]=v.useState(0),[Ne,R]=v.useState(0),[S,I]=v.useState([]),[V,D]=v.useState(""),[F,M]=v.useState(""),[He,bt]=v.useState(!1),[q,me]=v.useState(0),Pe=v.useRef(null),[We,Z]=v.useState({}),[P,G]=v.useState(!1),xe=v.useRef(null),[Ee,$e]=v.useState(null),[Ae,at]=v.useState([]);v.useEffect(()=>{window.scrollTo(0,0)},[y]);const[ht,Je]=v.useState(null),Ot=v.useCallback((pe,Re="info")=>{Je({message:pe,type:Re}),setTimeout(()=>Je(null),4e3)},[]),Cn=v.useRef(null),It=()=>(Cn.current||(Cn.current=new(window.AudioContext||window.webkitAudioContext)),Cn.current),vt=()=>{try{const pe=It(),Re=pe.createOscillator(),Oe=pe.createGain();Re.connect(Oe),Oe.connect(pe.destination),Re.frequency.value=1200,Oe.gain.value=.4,Re.start(pe.currentTime),Re.stop(pe.currentTime+.3)}catch{}};v.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),v.useEffect(()=>{if(!t)return;(async()=>{try{const Re=Ge(be,"clientProgrammes",t.id),Oe=await In(Re);Oe.exists()&&U(Oe.data());const Qe=g.state?.templateId;if(Qe&&!L.current){const Ve=_2.find(De=>De.id===Qe);if(Ve){L.current=!0,T(Ve),w("overview");return}}Oe.exists()?w("dashboard"):p("/client/core-buddy/workouts",{replace:!0})}catch(Re){console.error("Error loading programme:",Re),p("/client/core-buddy/workouts",{replace:!0})}})()},[t]),v.useEffect(()=>{if(!He||q<=0){He&&q<=0&&(bt(!1),vt());return}return Pe.current=setTimeout(()=>me(pe=>pe-1),1e3),()=>clearTimeout(Pe.current)},[He,q]);const he=async pe=>{if(t)try{await Hn(Ge(be,"clientProgrammes",t.id),pe),U(pe)}catch(Re){console.error("Error saving programme:",Re),Ot("Failed to save. Check Firestore rules for clientProgrammes.","error")}},en=async pe=>{const Re={templateId:pe.id,startDate:yt.now(),completedSessions:{}};await he(Re),w("dashboard")},tn=async()=>{if(t)try{await pr(Ge(be,"clientProgrammes",t.id)),U(null),w("browse")}catch(pe){console.error("Error quitting programme:",pe)}},dt=()=>$?_2.find(pe=>pe.id===$.templateId):null,jt=()=>{if(!$?.startDate)return 1;const pe=$.startDate.toDate?$.startDate.toDate():new Date($.startDate),Oe=new Date-pe,Qe=Math.floor(Oe/(1e3*60*60*24));return Math.floor(Qe/7)+1},ct=()=>{if(!$)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const pe=$.completedSessions||{},Re=Object.keys(pe).length,Oe=dt();if(!Oe)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const Qe=Oe.duration*Oe.daysPerWeek,Ve=jt(),De=Math.min(Ve,Oe.duration);let Ue=0;for(let ft=0;ft<Oe.daysPerWeek;ft++)pe[`w${De}d${ft}`]&&Ue++;if(Re>=Qe)return{currentWeek:Oe.duration,completedThisWeek:Oe.daysPerWeek,nextDay:-1,totalCompleted:Re,totalSessions:Qe,complete:!0};if(Ve>Oe.duration)return{currentWeek:Oe.duration,completedThisWeek:Ue,nextDay:-1,totalCompleted:Re,totalSessions:Qe,complete:!0};let wt=-1;for(let ft=0;ft<Oe.daysPerWeek;ft++)if(!pe[`w${De}d${ft}`]){wt=ft;break}return{currentWeek:De,completedThisWeek:Ue,nextDay:wt,nextWeek:De,totalCompleted:Re,totalSessions:Qe}},nt=pe=>{const Re=jt();return pe<Re},nn=(pe,Re,Oe)=>{if(!$||pe<=1)return null;const Qe=`w${pe-1}d${Re}`,Ve=$.completedSessions?.[Qe];if(!Ve)return null;const De=Ve.exercises?.find(Ue=>Ue.name===Oe);return De?.sets?.length?De.sets[De.sets.length-1]:null},ds=(pe,Re)=>{const Oe=dt();if(!Oe)return;se(pe),oe(Re),Me(0),R(0),I([]),M(""),bt(!1),me(0),G(!1),Z({});const Qe=Oe.days[Re],Ve=Qe.exercises.map(ft=>{const Mt=ad(ft,pe,Oe);return{name:ft.name,type:ft.type,pbKey:ft.pbKey,targetSets:Mt.sets,targetReps:Mt.reps,targetTime:Mt.time,sets:[]}});I(Ve);const De=Qe.exercises[0],Ue=nn(pe,Re,De.name);Ue?.weight&&De.type==="weighted"?D(String(Ue.weight)):D(""),(async()=>{const ft={};for(const Mt of Qe.exercises)if(Mt.storagePath)try{const Ut=Ji(Zi,Mt.storagePath),J=await Fo(Ut);ft[Mt.name]={url:J,isGif:/\.gif$/i.test(Mt.storagePath)}}catch(Ut){console.warn(`Video not found for ${Mt.name}:`,Ut)}Z(ft)})(),w("session")},Et=async()=>{dt();const pe=S[ve];if(!pe)return;let Re={};if(pe.type==="weighted"){const Ve=parseFloat(V)||0,De=parseInt(F)||0;if(De===0){Ot("Enter your reps","error");return}Re={weight:Ve,reps:De}}else if(pe.type==="reps"){const Ve=parseInt(F)||0;if(Ve===0){Ot("Enter your reps","error");return}Re={reps:Ve}}else if(pe.type==="timed"){const Ve=pe.targetTime-q;Re={time:Math.max(Ve,1)}}const Oe=[...S];Oe[ve]={...pe,sets:[...pe.sets,Re]},I(Oe),pe.type==="weighted"&&Re.weight>0&&await Wt(pe.name,Re.weight,Re.reps);const Qe=pe.sets.length+1;if(Qe<pe.targetSets)R(Qe),D(Re.weight?String(Re.weight):""),M(""),bt(!1),me(0);else if(ve+1<S.length){const Ve=ve+1;Me(Ve),R(0),G(!1);const Ue=dt()?.days[Q]?.exercises[Ve],wt=nn(O,Q,Ue?.name);wt?.weight&&Ue?.type==="weighted"?D(String(wt.weight)):D(""),M(""),bt(!1),me(0)}else await rn(Oe)},rn=async pe=>{if(!$||!t)return;const Re=`w${O}d${Q}`,Oe={...$.completedSessions,[Re]:{completedAt:new Date().toISOString(),exercises:pe.map(De=>({name:De.name,type:De.type,sets:De.sets}))}},Qe={...$,completedSessions:Oe};await he(Qe);const Ve=pe.reduce((De,Ue)=>De+Ue.sets.reduce((wt,ft)=>wt+(ft.weight||0)*(ft.reps||0),0),0);Ve>0&&await Yn(Ve);try{const De=dt();await ci(Bt(be,"workoutLogs"),{clientId:t.id,type:"programme",programmeId:De?.id,programmeName:De?.name,week:O,day:Q+1,exerciseCount:pe.length,duration:Math.round(pe.reduce((Ue,wt)=>Ue+wt.sets.length*1.5,0)),volume:Math.round(Ve),completedAt:yt.now()})}catch(De){console.error("Error saving workout log:",De)}Ae.length>0&&($e({badges:[...Ae]}),at([])),w("sessionComplete")},Yn=async pe=>{if(t)try{const Re=await In(Ge(be,"coreBuddyAchievements",t.id)),Oe=Re.exists()?Re.data():{clientId:t.id,badges:[],totalVolume:0},Qe=Oe.totalVolume||0,Ve=Qe+pe,De=[];ND.forEach(wt=>{Ve>=wt.threshold&&Qe<wt.threshold&&(Oe.badges.some(Mt=>Mt.type==="volume_milestone"&&Mt.milestone===wt.threshold)||De.push({type:"volume_milestone",milestone:wt.threshold,label:wt.label,achievedAt:yt.now()}))});const Ue=[...Oe.badges,...De];await Hn(Ge(be,"coreBuddyAchievements",t.id),{clientId:t.id,badges:Ue,totalVolume:Math.round(Ve),updatedAt:yt.now()}),De.length>0&&at(wt=>[...wt,...De])}catch(Re){console.error("Error updating volume:",Re)}},Wt=async(pe,Re,Oe)=>{if(t)try{const Qe=t.id,Ve=await In(Ge(be,"coreBuddyPBs",Qe)),Ue=(Ve.exists()?Ve.data():null)?.exercises||{},wt=Ue[pe];let ft=!1;if(wt?(Re>(wt.weight||0)||Re===(wt.weight||0)&&Oe>(wt.reps||0))&&(ft=!0):ft=!0,ft){const Mt={...Ue,[pe]:{weight:Re,reps:Oe,achievedAt:yt.now()}};await Hn(Ge(be,"coreBuddyPBs",Qe),{clientId:t.id,exercises:Mt,updatedAt:yt.now()}),Ot(`New PB! ${Re}kg  ${Oe} reps`,"success"),vt(),await Ft(pe,Re)}}catch(Qe){console.error("Error checking PB:",Qe)}},Ft=async(pe,Re)=>{if(t)try{const Oe=await In(Ge(be,"coreBuddyTargets",t.id));if(!Oe.exists())return;const Ve=(Oe.data().targets||{})[pe];if(!Ve||Re<Ve.targetWeight)return;const De=await In(Ge(be,"coreBuddyAchievements",t.id)),Ue=De.exists()?De.data():{clientId:t.id,badges:[],totalVolume:0};if(Ue.badges.some(Ut=>Ut.type==="pb_target"&&Ut.exercise===pe&&Ut.targetWeight===Ve.targetWeight))return;const ft={type:"pb_target",exercise:pe,group:SD[pe]||"push",targetWeight:Ve.targetWeight,achievedAt:yt.now()},Mt=[...Ue.badges,ft];await Hn(Ge(be,"coreBuddyAchievements",t.id),{...Ue,badges:Mt,updatedAt:yt.now()}),at(Ut=>[...Ut,ft])}catch(Oe){console.error("Error checking target badge:",Oe)}},an=ht&&a.jsxs("div",{className:`toast-notification ${ht.type}`,children:[ht.type==="success"&&a.jsx("span",{children:" "}),ht.message]}),mn=(pe,Re)=>a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:Re,"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(i||y==="loading")return a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&k){const pe=k;return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[mn(pe.name,()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-overview-hero",children:[a.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:CD[pe.focus]})}),a.jsx("h2",{className:"pg-overview-name",children:pe.name}),a.jsx("p",{className:"pg-overview-desc",children:pe.description}),a.jsxs("div",{className:"pg-overview-stats",children:[a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:pe.duration}),a.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:pe.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:pe.duration*pe.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),a.jsx("div",{className:"pg-overview-days",children:pe.days.map((Re,Oe)=>a.jsxs("div",{className:"pg-day-card",children:[a.jsxs("div",{className:"pg-day-header",children:[a.jsx("span",{className:"pg-day-name",children:Re.name}),a.jsx("span",{className:"pg-day-label",children:Re.label})]}),a.jsx("div",{className:"pg-day-exercises",children:Re.exercises.map((Qe,Ve)=>{const De=ad(Qe,1,pe);return a.jsxs("div",{className:"pg-day-ex",children:[a.jsx("span",{className:"pg-day-ex-name",children:Qe.name}),a.jsx("span",{className:"pg-day-ex-target",children:Qe.type==="timed"?`${De.sets}${De.time}s`:`${De.sets}${De.reps}`}),a.jsx("span",{className:`pg-day-ex-badge pg-badge-${Qe.type}`,children:Qe.type==="weighted"?"WT":Qe.type==="timed"?"TMR":"BW"})]},Ve)})})]},Oe))}),a.jsxs("div",{className:"pg-overview-note",children:[a.jsx("strong",{children:"Progressive Overload:"})," +",pe.repProg," reps/week",pe.timeProg?`, +${pe.timeProg}s/week for timed`:""]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>en(pe),children:"Start Programme"})]}),an]})}if(y==="dashboard"){const pe=dt();if(!pe)return w("browse"),null;const Re=ct(),Oe=$?.completedSessions||{},Qe=Re.totalSessions?Math.round(Re.totalCompleted/Re.totalSessions*100):0;return Math.round(Re.totalCompleted/(Re.totalSessions||1)*ED),a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[mn("Programme",()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-dash-hero",children:[a.jsxs("div",{className:"pg-dash-ring-wrap",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"pg-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"pg-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-Qe/100*2*Math.PI*80})]}),a.jsxs("div",{className:"pg-ring-center",children:[a.jsxs("span",{className:"pg-ring-pct",children:[Qe,"%"]}),a.jsx("span",{className:"pg-ring-label",children:"complete"})]})]}),a.jsx("h2",{className:"pg-dash-name",children:pe.name}),a.jsxs("div",{className:"pg-dash-progress-text",children:[a.jsxs("span",{className:"pg-dash-pct",children:[Qe,"%"]}),a.jsxs("span",{className:"pg-dash-week",children:["Week ",Re.currentWeek," of ",pe.duration]})]})]}),a.jsx("div",{className:"pg-weeks",children:Array.from({length:pe.duration},(Ve,De)=>{const Ue=De+1,wt=nt(Ue);return a.jsxs("div",{className:`pg-week-row${Ue===Re.currentWeek?" pg-week-current":""}`,children:[a.jsxs("span",{className:"pg-week-label",children:["W",Ue]}),a.jsx("div",{className:"pg-week-days",children:pe.days.map((ft,Mt)=>{const Ut=`w${Ue}d${Mt}`,J=!!Oe[Ut],ge=!J&&wt,rt=!J&&!ge&&Ue===Re.currentWeek&&!Re.complete;return a.jsx("button",{className:`pg-day-dot${J?" done":""}${ge?" missed":""}${rt?" next":""}`,disabled:!rt,onClick:()=>{rt&&ds(Ue,Mt)},children:J?a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}):ge?a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsx("span",{children:ft.name.replace("Day ","")})},Mt)})})]},De)})}),!Re.complete&&(()=>{const Ve=pe.days.map((De,Ue)=>({day:De,d:Ue})).filter(({d:De})=>!Oe[`w${Re.currentWeek}d${De}`]);return Ve.length===0?null:a.jsxs("div",{className:"pg-next-session",children:[a.jsx("h3",{children:Ve.length===pe.daysPerWeek?"Choose a Session":"Remaining Sessions"}),a.jsxs("p",{className:"pg-next-info",children:["Week ",Re.currentWeek,"  ",Ve.length," session",Ve.length!==1?"s":""," left this week"]}),Ve.map(({day:De,d:Ue})=>a.jsxs("div",{className:"pg-available-session",children:[a.jsxs("div",{className:"pg-next-exercises",children:[a.jsxs("span",{className:"pg-avail-day-label",children:[De.name,": ",De.label]}),De.exercises.map((wt,ft)=>{const Mt=ad(wt,Re.currentWeek,pe);return a.jsxs("div",{className:"pg-next-ex",children:[a.jsx("span",{className:"pg-next-ex-name",children:wt.name}),a.jsx("span",{className:"pg-next-ex-target",children:wt.type==="timed"?`${Mt.sets}${Mt.time}s`:`${Mt.sets}${Mt.reps}`})]},ft)})]}),a.jsxs("button",{className:"pg-start-btn",onClick:()=>ds(Re.currentWeek,Ue),children:["Start ",De.name]})]},Ue))]})})(),Re.complete&&a.jsxs("div",{className:"pg-complete-msg",children:[a.jsx("h3",{children:"Programme Complete! "}),a.jsxs("p",{children:["You finished all ",Re.totalSessions," sessions."]}),a.jsx("button",{className:"pg-start-btn",onClick:tn,children:"Choose New Programme"})]}),a.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&tn()},children:"Quit Programme"})]}),a.jsx(La,{active:"workouts"}),an]})}if(y==="session"){const pe=dt();if(!pe)return null;const Re=pe.days[Q],Oe=Re.exercises[ve],Qe=ad(Oe,O,pe),Ve=S[ve],De=Ve?.sets?.length||0,Ue=Re.exercises.length,wt=(ve+De/Qe.sets)/Ue,ft=We[Oe.name],Mt=nn(O,Q,Oe.name);Oe.type==="timed"&&q===0&&!He&&De===Ne&&setTimeout(()=>me(Qe.time),0);const Ut=()=>{ft?.isGif?G(!P):xe.current&&(P?xe.current.pause():xe.current.play(),G(!P))};return a.jsxs("div",{className:"pg-page pg-page-session","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"pg-session-progress",children:a.jsx("div",{className:"pg-session-progress-fill",style:{width:`${wt*100}%`}})}),a.jsxs("div",{className:"pg-session-header",children:[a.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&w("dashboard")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),a.jsxs("div",{className:"pg-session-title",children:[a.jsxs("span",{className:"pg-session-counter",children:[ve+1," / ",Ue]}),a.jsxs("span",{className:"pg-session-week",children:["Week ",O,"  ",Re.name]})]})]}),ft&&a.jsxs("div",{className:"pg-video-container",onClick:Ut,children:[ft.isGif?a.jsx("img",{className:"pg-video",src:ft.url,alt:Oe.name}):a.jsx("video",{ref:xe,className:"pg-video",src:ft.url,loop:!0,muted:!0,playsInline:!0},Oe.name),!P&&a.jsxs("div",{className:"pg-video-overlay",children:[a.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),a.jsx("div",{className:"pg-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"pg-exercise-card",children:[a.jsx("h2",{className:"pg-ex-name",children:Oe.name}),a.jsx("span",{className:`pg-ex-type-badge pg-badge-${Oe.type}`,children:Oe.type==="weighted"?"Weight + Reps":Oe.type==="timed"?"Timed":"Reps Only"}),Oe.type==="weighted"&&Mt&&a.jsxs("div",{className:"pg-last-week",children:[a.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),a.jsxs("span",{className:"pg-last-week-value",children:[Mt.weight,"kg x ",Mt.reps," reps"]})]}),a.jsxs("div",{className:"pg-ex-set-info",children:[a.jsxs("span",{className:"pg-ex-set-num",children:["Set ",De+1," of ",Qe.sets]}),a.jsxs("span",{className:"pg-ex-target",children:["Target: ",Oe.type==="timed"?`${Qe.time}s hold`:`${Qe.reps} reps`]})]}),Oe.type==="weighted"&&a.jsxs("div",{className:"pg-input-area",children:[a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",value:V,onChange:J=>D(J.target.value),placeholder:"0",className:"pg-input"})]}),a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:F,onChange:J=>M(J.target.value),placeholder:String(Qe.reps),className:"pg-input"})]})]}),Oe.type==="reps"&&a.jsx("div",{className:"pg-input-area",children:a.jsxs("div",{className:"pg-input-group pg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:F,onChange:J=>M(J.target.value),placeholder:String(Qe.reps),className:"pg-input"})]})}),Oe.type==="timed"&&a.jsxs("div",{className:"pg-timer-area",children:[a.jsx("div",{className:"pg-timer-display",children:a.jsxs("span",{className:"pg-timer-value",children:[q,"s"]})}),He?a.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>bt(!1),children:"Stop"}):a.jsx("button",{className:"pg-timer-btn",onClick:()=>{q===0&&me(Qe.time),bt(!0)},children:q<Qe.time&&q>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"pg-log-set-btn",onClick:Et,disabled:Oe.type==="timed"&&He,children:De+1<Qe.sets?"Log Set":ve+1<Ue?"Log Set  Next Exercise":"Log Set  Complete"}),Ve?.sets?.length>0&&a.jsx("div",{className:"pg-completed-sets",children:Ve.sets.map((J,ge)=>a.jsxs("div",{className:"pg-completed-set",children:[a.jsx("span",{className:"pg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",ge+1,": ",J.weight!==void 0?`${J.weight}kg  ${J.reps}`:J.time!==void 0?`${J.time}s`:`${J.reps} reps`]})]},ge))})]}),an]})}if(y==="sessionComplete"){const Re=dt()?.days[Q],Oe=S.reduce((Ve,De)=>Ve+De.sets.length,0),Qe=S.reduce((Ve,De)=>Ve+De.sets.reduce((Ue,wt)=>Ue+(wt.weight||0)*(wt.reps||0),0),0);return a.jsxs("div",{className:"pg-page pg-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"pg-session-done",children:[a.jsxs("div",{className:"pg-done-ring",children:[a.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:lu.map((Ve,De)=>a.jsx("line",{x1:Ve.x1,y1:Ve.y1,x2:Ve.x2,y2:Ve.y2,className:"pg-tick-complete",strokeWidth:Ve.thick?"3.5":"2",style:{animationDelay:`${De*.02}s`}},De))}),a.jsx("div",{className:"pg-done-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),a.jsxs("p",{className:"pg-done-subtitle",children:["Week ",O,"  ",Re?.name,": ",Re?.label]}),a.jsxs("div",{className:"pg-done-stats",children:[a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:S.length}),a.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Oe}),a.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),Qe>0&&a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Math.round(Qe).toLocaleString()}),a.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>w("dashboard"),children:"Back to Programme"})]}),Ee&&a.jsx("div",{className:"pg-badge-celebration",onClick:()=>$e(null),children:a.jsxs("div",{className:"pg-badge-celebration-card",onClick:Ve=>Ve.stopPropagation(),children:[a.jsx("div",{className:"pg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pg-badge-celebration-title",children:Ee.badges.length===1?"Badge Earned!":`${Ee.badges.length} Badges Earned!`}),a.jsx("div",{className:"pg-badge-celebration-list",children:Ee.badges.map((Ve,De)=>a.jsx("div",{className:"pg-badge-celebration-item",children:Ve.type==="pb_target"?`${Ve.exercise}  ${Ve.targetWeight}kg`:Ve.label},De))}),a.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>$e(null),children:"Tap to dismiss"})]})}),an]})}return null}const AD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},ID={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},Kp=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function MD(s){return AD[s]||"push"}function DD(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function PD(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function LD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Fr(),{isDark:l,toggleTheme:u,accent:h}=Va(),p=nr(),[g,y]=v.useState(!0),[w,k]=v.useState(null),[T,L]=v.useState({}),[$,U]=v.useState([]),[O,se]=v.useState(null),[Q,oe]=v.useState(0),[ve,Me]=v.useState({});v.useRef(null),v.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),v.useEffect(()=>{if(!t)return;(async()=>{try{const[me,Pe,We,Z]=await Promise.all([In(Ge(be,"coreBuddyAchievements",t.id)),In(Ge(be,"coreBuddyPBs",t.id)),In(Ge(be,"achievements",t.id)),jn(Nn(Bt(be,"workoutLogs"),un("clientId","==",t.id)))]);me.exists()&&k(me.data()),Pe.exists()&&L(Pe.data().exercises||{}),We.exists()&&(U(Object.keys(We.data().badges||{})),Me(We.data().progress||{})),oe(Z.docs.length)}catch(me){console.error("Error loading achievements:",me)}y(!1)})()},[t]);const Ne=w?.badges||[],R=w?.totalVolume||0,S=Ne.filter(q=>q.type==="pb_target"),I=Ne.filter(q=>q.type==="volume_milestone"),V={push:[],pull:[],lower:[],core:[]};S.forEach(q=>{const me=q.group||MD(q.exercise);V[me]&&V[me].push(q)});const D=Kp.find(q=>R<q.threshold),F=Kp.filter(q=>R>=q.threshold).pop()?.threshold||0,M=D?(R-F)/(D.threshold-F):1;if(i||g)return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsx("div",{className:"ach-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});const He=Ne.length+$.length,bt=He>0||R>0||Q>0;return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ach-main",children:[a.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/personal-bests?mode=corebuddy"),children:" Back"}),a.jsxs("div",{className:"ach-stats-banner",children:[a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:He}),a.jsx("span",{className:"ach-stat-label",children:He===1?"Badge":"Badges"})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:DD(R)}),a.jsxs("span",{className:"ach-stat-label",children:[PD(R)," lifted"]})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Object.keys(T).length}),a.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!bt&&a.jsxs("div",{className:"ach-empty",children:[a.jsx("div",{className:"ach-empty-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),a.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),a.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),a.jsx("h4",{children:"No achievements yet"}),a.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),[{key:"workouts",title:"Workout Badges",iconPath:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"},{key:"streaks",title:"Streak Badges",iconPath:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67z"},{key:"pbs",title:"Personal Best Badges",iconPath:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"},{key:"nutrition",title:"Nutrition Badges",iconPath:"M18.06 23h1.66c.84 0 1.53-.65 1.63-1.47L23 5.05h-5V1h-2v4.05h-5l.3 2.34c1.71.47 3.31 1.32 4.27 2.26 1.44 1.42 2.43 2.89 2.43 5.29V23zM1 22v-1h15.03v1c0 .55-.45 1-1.01 1H2.01c-.56 0-1.01-.45-1.01-1zm15.03-7c0-4.87-4.66-5.84-8.03-5.97l.72 5.52L1 15.05v5.95h15.03V15z"},{key:"habits",title:"Habit Badges",iconPath:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"},{key:"leaderboard",title:"Leaderboard Badges",iconPath:"M7.5 21H2V9h5.5v12zm7.25-18h-5.5v18h5.5V3zM22 11h-5.5v10H22V11z"}].map(q=>{const me=Wd.filter(Z=>Z.category===q.key);if(me.length===0)return null;const Pe=(()=>{switch(q.key){case"workouts":return Q;case"streaks":return ve.streakWeeks||0;case"pbs":return Object.keys(T).length;case"nutrition":return ve.nutritionStreak||0;case"leaderboard":return t?.leaderboardOptIn?1:0;case"habits":return ve.habitStreak||0;default:return 0}})(),We=me.filter(Z=>$.includes(Z.id)).length;return a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:q.iconPath})}),q.title]}),a.jsx("div",{className:"ach-workout-carousel",children:me.map(Z=>{const P=$.includes(Z.id);return a.jsxs("button",{className:`ach-workout-badge${P?" unlocked":" locked"}`,onClick:()=>se(Z),children:[a.jsx("img",{src:Z.img,alt:Z.name,className:"ach-workout-badge-img"}),!P&&Z.threshold&&a.jsx("div",{className:"ach-workout-badge-progress",children:a.jsx("div",{className:"ach-workout-badge-progress-fill",style:{width:`${Math.min(Pe/Z.threshold*100,100)}%`}})})]},Z.id)})}),a.jsxs("p",{className:"ach-workout-badges-count",children:[We,"/",me.length," unlocked"]})]},q.key)}),O&&a.jsx("div",{className:"ach-badge-overlay",onClick:()=>se(null),children:a.jsxs("div",{className:"ach-badge-overlay-content",onClick:q=>q.stopPropagation(),children:[a.jsx("img",{src:O.img,alt:O.name,className:`ach-badge-overlay-img${$.includes(O.id)?"":" ach-badge-overlay-img-locked"}`}),a.jsx("p",{className:"ach-badge-overlay-desc",children:O.desc}),$.includes(O.id)?a.jsx("span",{className:"ach-badge-overlay-status unlocked",children:"Unlocked"}):a.jsx("span",{className:"ach-badge-overlay-status locked",children:"Locked"}),a.jsx("button",{className:"ach-badge-overlay-close",onClick:()=>se(null),children:"Tap to close"})]})}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),a.jsxs("div",{className:"ach-volume-hero",children:[a.jsxs("div",{className:"ach-volume-ring",children:[a.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:lu.map((q,me)=>{const Pe=me<Math.round(M*60);return a.jsx("line",{x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,className:Pe?"ach-tick-filled":"ach-tick-empty",strokeWidth:q.thick?"3":"2"},me)})}),a.jsxs("div",{className:"ach-volume-center",children:[a.jsx("span",{className:"ach-volume-number",children:Math.round(R).toLocaleString()}),a.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),D&&a.jsxs("div",{className:"ach-volume-next",children:["Next: ",a.jsx("strong",{children:D.label})," (",(D.threshold-R).toLocaleString(),"kg to go)"]})]}),a.jsx("div",{className:"ach-milestone-shelf",children:Kp.map((q,me)=>{const Pe=R>=q.threshold,We=I.find(Z=>Z.milestone===q.threshold);return a.jsxs("div",{className:`ach-milestone ${Pe?"unlocked":"locked"}`,children:[a.jsx("div",{className:"ach-milestone-hex",children:a.jsx("span",{className:"ach-milestone-icon",children:q.icon})}),a.jsx("span",{className:"ach-milestone-label",children:q.label}),We?.achievedAt&&a.jsx("span",{className:"ach-milestone-date",children:(We.achievedAt.toDate?We.achievedAt.toDate():new Date(We.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},me)})})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),S.length===0?a.jsx("div",{className:"ach-pb-empty",children:a.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",a.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(V).map(([q,me])=>{if(me.length===0)return null;const Pe=ID[q];return a.jsxs("div",{className:"ach-group",children:[a.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:Pe.color},children:[a.jsx("span",{className:"ach-group-label",style:{color:Pe.color},children:Pe.label}),a.jsx("span",{className:"ach-group-count",children:me.length})]}),a.jsx("div",{className:"ach-badge-grid",children:me.map((We,Z)=>a.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${Z*.06}s`,"--group-color":Pe.color},children:[a.jsx("div",{className:"ach-badge-hex",style:{borderColor:Pe.color,boxShadow:`0 0 12px ${Pe.color}33`},children:a.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:Pe.color,strokeWidth:"2",strokeLinecap:"round",children:a.jsx("path",{d:Pe.icon})})}),a.jsxs("div",{className:"ach-badge-info",children:[a.jsx("span",{className:"ach-badge-exercise",children:We.exercise}),a.jsxs("span",{className:"ach-badge-value",style:{color:Pe.color},children:[We.targetWeight,"kg"]}),We.achievedAt&&a.jsx("span",{className:"ach-badge-date",children:(We.achievedAt.toDate?We.achievedAt.toDate():new Date(We.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},Z))})]},q)})]})]}),a.jsx(La,{active:"home"})]})}const id=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function OD(s){const e=new Date(s),t=e.getDay(),i=t===0?-6:1-t;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Yp(s){return s.toISOString().split("T")[0]}function VD(s){return Array.from({length:7},(e,t)=>{const i=new Date(s);return i.setDate(s.getDate()+t),i})}function BD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Fr(),{isDark:l,toggleTheme:u,accent:h}=Va(),p=nr(),[g,y]=v.useState({}),[w,k]=v.useState(!0),[T,L]=v.useState(!1),[$,U]=v.useState(0),[O,se]=v.useState(null),[Q,oe]=v.useState(null),[ve,Me]=v.useState(!1),Ne=v.useRef([]),R=v.useRef([]),S=v.useCallback((G,xe="info")=>{se({message:G,type:xe}),setTimeout(()=>se(null),3e3)},[]),I=new Date,V=Yp(I),D=OD(I),F=VD(D),M=["M","T","W","T","F","S","S"];v.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),v.useEffect(()=>{if(!s||!t)return;(async()=>{try{const xe=Bt(be,"habitLogs"),Ee=Nn(xe,un("clientId","==",t.id)),$e=await jn(Ee),Ae={};$e.docs.forEach(Je=>{const Ot=Je.data();Ae[Ot.date]={...Ot,_id:Je.id}}),y(Ae);let at=0;const ht=new Date(I);for(;;){const Je=Yp(ht),Ot=Ae[Je];if(Ot)if(Object.values(Ot.habits||{}).filter(Boolean).length>=3)at++,ht.setDate(ht.getDate()-1);else break;else if(Je===V)ht.setDate(ht.getDate()-1);else break}U(at)}catch(xe){console.error("Error loading habit logs:",xe)}finally{k(!1)}})()},[s,t]);const He=g[V]||{habits:{}},bt=async G=>{if(!s||T)return;const xe=He.habits?.[G]||!1;xe||(Ne.current=[...Array(10)].map((Ee,$e)=>{const Ae=$e/10*2*Math.PI,at=18+Math.random()*20;return{tx:Math.cos(Ae)*at,ty:Math.sin(Ae)*at,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),oe(G),setTimeout(()=>oe(null),700)),L(!0);try{const Ee=He.habits||{},$e={...Ee,[G]:!Ee[G]},Ae=He._id||`${t.id}_${V}`;await Hn(Ge(be,"habitLogs",Ae),{clientId:t.id,date:V,habits:$e}),y(ht=>({...ht,[V]:{clientId:t.id,date:V,habits:$e,_id:Ae}})),Object.values($e).filter(Boolean).length===id.length&&!xe&&(R.current=[...Array(50)].map((ht,Je)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][Je%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{Me(!0),setTimeout(()=>Me(!1),3500)},500))}catch(Ee){console.error("Error saving habit:",Ee),S("Failed to save. Try again.","error")}finally{L(!1)}},q=F.map(G=>{const xe=Yp(G),Ee=g[xe],$e=Ee?Object.values(Ee.habits||{}).filter(Boolean).length:0;return{date:G,dateStr:xe,completed:$e,total:id.length}}),me=q.reduce((G,xe)=>G+xe.completed,0),Pe=q.reduce((G,xe)=>G+xe.total,0),We=Pe>0?Math.round(me/Pe*100):0,Z=Object.values(He.habits||{}).filter(Boolean).length,P=Math.round(Z/id.length*100);return a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||w?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-ring-section",children:[a.jsxs("div",{className:"cbc-progress-ring",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-P/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-pct",children:[P,"%"]}),a.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),a.jsxs("div",{className:"cbc-streak",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{className:"cbc-streak-count",children:$}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsx("div",{className:"cbc-habits",children:id.map(G=>{const xe=He.habits?.[G.key]||!1,Ee=Q===G.key;return a.jsxs("button",{className:`cbc-habit-btn cbc-habit-${G.key} ${xe?"cbc-habit-done":""} ${Ee?"cbc-habit-just-checked":""}`,onClick:()=>bt(G.key),disabled:T,children:[a.jsx("div",{className:"cbc-habit-check",children:xe?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${Ee?"cbc-check-animate":""}`})}):a.jsx("div",{className:"cbc-habit-circle"})}),Ee&&a.jsx("div",{className:"cbc-particles",children:Ne.current.map(($e,Ae)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${$e.tx}px`,"--ty":`${$e.ty}px`,"--size":`${$e.size}px`,animationDuration:`${$e.duration}s`}},Ae))}),a.jsx("div",{className:`cbc-habit-icon cbc-icon-${G.key}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:G.icon})})}),a.jsx("span",{className:"cbc-habit-label",children:G.label})]},G.key)})})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsx("div",{className:"cbc-week-grid",children:q.map((G,xe)=>{const Ee=G.dateStr===V,$e=G.total>0?G.completed/G.total:0,Ae=38,at=2*Math.PI*Ae,ht=at-$e*at;return a.jsxs("div",{className:`cbc-day-ring ${Ee?"cbc-day-today":""} ${G.completed>0?"cbc-day-active":""}`,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:Ae}),a.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:Ae,strokeDasharray:at,strokeDashoffset:ht})]}),a.jsx("span",{className:"cbc-day-label",children:M[xe]}),a.jsxs("span",{className:"cbc-day-count",children:[G.completed,"/",G.total]})]},xe)})}),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${We}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[me," / ",Pe," habits this week (",We,"%)"]})]})]})]}),a.jsx(La,{active:"home"}),ve&&a.jsxs("div",{className:"cbc-celebration",onClick:()=>Me(!1),children:[a.jsx("div",{className:"cbc-confetti-container",children:R.current.map((G,xe)=>a.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${G.x}%`,"--delay":`${G.delay}s`,"--color":G.color,"--drift":`${G.drift}px`,"--spin":`${G.spin}deg`,"--duration":`${G.duration}s`,width:`${G.width}px`,height:`${G.height}px`}},xe))}),a.jsxs("div",{className:"cbc-celebration-card",children:[a.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),a.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),a.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),O&&a.jsx("div",{className:`toast-notification ${O.type}`,children:O.message})]})}function od(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function k2(s,e){return[s,e].sort().join("_")}function UD(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Fr(),{isDark:l,toggleTheme:u}=Va(),h=nr(),[p,g]=v.useState("buddies"),[y,w]=v.useState([]),[k,T]=v.useState([]),[L,$]=v.useState([]),[U,O]=v.useState(""),[se,Q]=v.useState([]),[oe,ve]=v.useState([]),[Me,Ne]=v.useState(!0),[R,S]=v.useState(null),[I,V]=v.useState(null),D=v.useCallback((Z,P="info")=>{V({message:Z,type:P}),setTimeout(()=>V(null),3500)},[]);v.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const F=v.useCallback(async()=>{if(t){Ne(!0);try{const Z=t.id,G=(await jn(Bt(be,"clients"))).docs.map(Je=>({id:Je.id,...Je.data()}));ve(G);const xe=Object.fromEntries(G.map(Je=>[Je.id,Je])),Ee=await jn(Nn(Bt(be,"buddies"),un("user1","==",Z))),$e=await jn(Nn(Bt(be,"buddies"),un("user2","==",Z))),Ae=new Set;[...Ee.docs,...$e.docs].forEach(Je=>{const Ot=Je.data(),Cn=Ot.user1===Z?Ot.user2:Ot.user1;Ae.add(Cn)}),w(Array.from(Ae).map(Je=>xe[Je]).filter(Boolean));const at=await jn(Nn(Bt(be,"buddyRequests"),un("toId","==",Z),un("status","==","pending")));T(at.docs.map(Je=>({reqId:Je.id,...Je.data(),fromClient:xe[Je.data().fromId]})).filter(Je=>Je.fromClient));const ht=await jn(Nn(Bt(be,"buddyRequests"),un("fromId","==",Z),un("status","==","pending")));$(ht.docs.map(Je=>({reqId:Je.id,...Je.data(),toClient:xe[Je.data().toId]})).filter(Je=>Je.toClient))}catch(Z){console.error("Error fetching buddy data:",Z),D("Failed to load buddies","error")}finally{Ne(!1)}}},[t,D]);v.useEffect(()=>{F()},[F]),v.useEffect(()=>{if(!U.trim()||!t){Q([]);return}const Z=U.toLowerCase(),P=t.id,G=new Set(y.map(Ae=>Ae.id)),xe=new Set(L.map(Ae=>Ae.toId)),Ee=new Set(k.map(Ae=>Ae.fromId)),$e=oe.filter(Ae=>Ae.id===P||!Ae.name||!Ae.coreBuddyAccess&&Ae.clientType!=="core_buddy"?!1:Ae.name.toLowerCase().includes(Z)).map(Ae=>({...Ae,isBuddy:G.has(Ae.id),isPendingOut:xe.has(Ae.id),isPendingIn:Ee.has(Ae.id)})).slice(0,20);Q($e)},[U,oe,y,L,k,t]);const M=async(Z,P)=>{if(!(!t||Z===t.id))try{await ci(Bt(be,"notifications"),{toId:Z,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:P,read:!1,createdAt:ta()})}catch(G){console.error("Notification error:",G),G.code==="permission-denied"&&D("Notifications blocked  check Firestore rules","error")}},He=async Z=>{S(Z);try{const P=`${t.id}_${Z}`;await Hn(Ge(be,"buddyRequests",P),{fromId:t.id,toId:Z,status:"pending",createdAt:ta()}),await M(Z,"buddy_request"),D("Buddy request sent!","success"),await F()}catch(P){console.error("Error sending request:",P),D("Failed to send request","error")}finally{S(null)}},bt=async Z=>{S(Z.reqId);try{const P=k2(Z.fromId,t.id);await Hn(Ge(be,"buddies",P),{user1:[Z.fromId,t.id].sort()[0],user2:[Z.fromId,t.id].sort()[1],connectedAt:ta()}),await pr(Ge(be,"buddyRequests",Z.reqId)),await M(Z.fromId,"buddy_accept"),D("Buddy added!","success"),await F()}catch(P){console.error("Error accepting request:",P),D("Failed to accept","error")}finally{S(null)}},q=async Z=>{S(Z.reqId);try{await pr(Ge(be,"buddyRequests",Z.reqId)),D("Request declined","info"),await F()}catch(P){console.error("Error declining:",P),D("Failed to decline","error")}finally{S(null)}},me=async Z=>{S(Z.reqId);try{await pr(Ge(be,"buddyRequests",Z.reqId)),D("Request cancelled","info"),await F()}catch(P){console.error("Error cancelling:",P),D("Failed to cancel","error")}finally{S(null)}},Pe=async Z=>{S(Z);try{const P=k2(t.id,Z);await pr(Ge(be,"buddies",P)),D("Buddy removed","info"),await F()}catch(P){console.error("Error removing buddy:",P),D("Failed to remove buddy","error")}finally{S(null)}},We=k.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!t?null:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("button",{className:"bdy-leaderboard-link",onClick:()=>h("/client/leaderboard"),children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("rect",{x:"6",y:"9",width:"12",height:"13",rx:"2"}),a.jsx("path",{d:"M12 9v13"}),a.jsx("path",{d:"M2 22h20"})]}),a.jsx("span",{children:"Leaderboard"}),a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),We>0&&a.jsx("span",{className:"bdy-tab-badge",children:We})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Me?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(Z=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${Z.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:Z.photoURL?a.jsx("img",{src:Z.photoURL,alt:Z.name}):a.jsx("span",{children:od(Z.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:Z.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:P=>{P.stopPropagation(),Pe(Z.id)},disabled:R===Z.id,"aria-label":"Remove buddy",children:R===Z.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},Z.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[k.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:k.map(Z=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:Z.fromClient.photoURL?a.jsx("img",{src:Z.fromClient.photoURL,alt:Z.fromClient.name}):a.jsx("span",{children:od(Z.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:Z.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>bt(Z),disabled:R===Z.reqId,children:R===Z.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>q(Z),disabled:R===Z.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},Z.reqId))})]}),L.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:L.map(Z=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:Z.toClient?.photoURL?a.jsx("img",{src:Z.toClient.photoURL,alt:Z.toClient.name}):a.jsx("span",{children:od(Z.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:Z.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>me(Z),disabled:R===Z.reqId,children:R===Z.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},Z.reqId))})]}),k.length===0&&L.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:U,onChange:Z=>O(Z.target.value),autoFocus:!0}),U&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>O(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),U.trim()&&se.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',U,'"']})}),se.length>0&&a.jsx("div",{className:"bdy-list",children:se.map(Z=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${Z.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:Z.photoURL?a.jsx("img",{src:Z.photoURL,alt:Z.name}):a.jsx("span",{children:od(Z.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:Z.name}),Z.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),Z.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):Z.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):Z.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:P=>{P.stopPropagation();const G=k.find(xe=>xe.fromId===Z.id);G&&bt(G)},disabled:!!R,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:P=>{P.stopPropagation(),He(Z.id)},disabled:R===Z.id,children:R===Z.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},Z.id))})]})]})]}),a.jsx(La,{}),I&&a.jsxs("div",{className:`toast-notification ${I.type}`,children:[a.jsx("span",{className:"toast-icon",children:I.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):I.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:I.message})]})]})}function ld(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Qp(s,e){return[s,e].sort().join("_")}const zD=5;function Xp(s){return s.toISOString().split("T")[0]}function FD(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}const qD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}};function T2(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function HD(){const{userId:s}=sE(),{currentUser:e,isClient:t,clientData:i,loading:l}=Fr(),{isDark:u,toggleTheme:h}=Va(),p=nr(),[g,y]=v.useState(null),[w,k]=v.useState("none"),[T,L]=v.useState(null),[$,U]=v.useState(!0),[O,se]=v.useState(!1),[Q,oe]=v.useState(null),[ve,Me]=v.useState([]),[Ne,R]=v.useState(!1),[S,I]=v.useState(new Set),[V,D]=v.useState(new Set),[F,M]=v.useState({}),[He,bt]=v.useState({}),[q,me]=v.useState({}),[Pe,We]=v.useState(!0),[Z,P]=v.useState(0),[G,xe]=v.useState(0),[Ee,$e]=v.useState(0),[Ae,at]=v.useState(0),[ht,Je]=v.useState([]),[Ot,Cn]=v.useState([]),[It,vt]=v.useState(null),[he,en]=v.useState(null),[tn,dt]=v.useState(0),[jt,ct]=v.useState([]),[nt,nn]=v.useState(!1),[ds,Et]=v.useState(null),[rn,Yn]=v.useState([]),Wt=v.useCallback((J,ge="info")=>{oe({message:J,type:ge}),setTimeout(()=>oe(null),3500)},[]);v.useEffect(()=>{!l&&(!e||!t)&&p("/")},[e,t,l,p]),v.useEffect(()=>{i&&s&&i.id===s&&p("/client/core-buddy",{replace:!0})},[i,s,p]),v.useEffect(()=>{if(!i||!s||i.id===s)return;let J=!1;return(async()=>{U(!0);try{const St=(await jn(Bt(be,"clients"))).docs.map(Vt=>({id:Vt.id,...Vt.data()})).find(Vt=>Vt.id===s);if(!St){J||U(!1);return}J||y(St);const Nt=i.id,Yt=Qp(Nt,s);if((await In(Ge(be,"buddies",Yt))).exists())J||k("buddy");else{const Vt=`${Nt}_${s}`,Ln=await In(Ge(be,"buddyRequests",Vt));if(Ln.exists()&&Ln.data().status==="pending")J||(k("pending_out"),L(Vt));else{const es=`${s}_${Nt}`,hn=await In(Ge(be,"buddyRequests",es));hn.exists()&&hn.data().status==="pending"?J||(k("pending_in"),L(es)):J||k("none")}}}catch(ge){console.error("Error loading profile:",ge)}finally{J||U(!1)}})(),()=>{J=!0}},[i,s]),v.useEffect(()=>{if(!s||!g)return;let J=!1;return(async()=>{We(!0);try{const[ge,rt,St,Nt]=await Promise.all([jn(Nn(Bt(be,"workoutLogs"),un("clientId","==",s))),In(Ge(be,"coreBuddyAchievements",s)),In(Ge(be,"coreBuddyPBs",s)),In(Ge(be,"clientProgrammes",s))]);if(J)return;const Yt=ge.docs.length;P(Yt),rt.exists()&&xe(rt.data().totalVolume||0);let Qt=0;const Vt=ge.docs.map(hn=>hn.data().date).filter(Boolean).sort().reverse();if(Vt.length>0){const hn=new Date;let Sn=new Date(hn);for(let Mn=0;Mn<52;Mn++){const z=new Date(Sn),ye=z.getDay(),_e=ye===0?6:ye-1;z.setDate(z.getDate()-_e),z.setHours(0,0,0,0);const ke=new Date(z);ke.setDate(ke.getDate()+7);const de=Xp(z),tt=Xp(ke);if(Vt.some(it=>it>=de&&it<tt))Qt++;else{if(Mn>0)break;break}Sn.setDate(Sn.getDate()-7)}}if(J||$e(Qt),St.exists()){const hn=St.data().exercises||{},Sn=Object.entries(hn).sort(([,Mn],[,z])=>(z.weight||0)-(Mn.weight||0)).slice(0,3).map(([Mn,z])=>({name:Mn,weight:z.weight,reps:z.reps}));J||Je(Sn)}if(Nt.exists()){const hn=Nt.data(),Sn=qD[hn.templateId];if(Sn){const Mn=Object.keys(hn.completedSessions||{}).length,z=Sn.duration*Sn.daysPerWeek;J||(en(hn.templateId.replace(/_/g," ").replace(/\b\w/g,ye=>ye.toUpperCase())),dt(z>0?Math.round(Mn/z*100):0))}}const Ln=await In(Ge(be,"achievements",s));if(!J&&Ln.exists()){const hn=Ln.data().badges||{};Cn(Object.keys(hn))}let es=0;for(let hn=0;hn<30;hn++){const Sn=new Date;Sn.setDate(Sn.getDate()-hn);const Mn=Xp(Sn);try{const z=await jn(Nn(Bt(be,"habitLogs"),un("clientId","==",s),un("date","==",Mn)));if(z.empty)break;{const ye=z.docs[0].data().habits||{};if(Object.values(ye).filter(Boolean).length>=zD)es++;else break}}catch{break}}J||at(es)}catch(ge){console.error("Error loading buddy stats:",ge)}finally{J||We(!1)}})(),()=>{J=!0}},[s,g]),v.useEffect(()=>{if(!i)return;const J=i.id;(async()=>{try{const[ge,rt,St]=await Promise.all([jn(Nn(Bt(be,"buddies"),un("user1","==",J))),jn(Nn(Bt(be,"buddies"),un("user2","==",J))),jn(Bt(be,"clients"))]),Nt=new Set;[...ge.docs,...rt.docs].forEach(Qt=>{const Vt=Qt.data();Nt.add(Vt.user1===J?Vt.user2:Vt.user1)});const Yt={};St.docs.forEach(Qt=>{Yt[Qt.id]=Qt.data()}),ct(Array.from(Nt).filter(Qt=>Yt[Qt]).map(Qt=>({id:Qt,name:Yt[Qt].name,photoURL:Yt[Qt].photoURL||null})))}catch(ge){console.error("Error loading buddies for mentions:",ge)}})()},[i]);const Ft=async(J,ge,rt={})=>{if(!(!i||J===i.id))try{await ci(Bt(be,"notifications"),{toId:J,fromId:i.id,fromName:i.name||"Someone",fromPhotoURL:i.photoURL||null,type:ge,read:!1,createdAt:ta(),...rt})}catch(St){console.error("Notification error:",St),St.code==="permission-denied"&&Wt("Notifications blocked  check Firestore rules","error")}},an=async()=>{se(!0);try{const J=`${i.id}_${s}`;await Hn(Ge(be,"buddyRequests",J),{fromId:i.id,toId:s,status:"pending",createdAt:ta()}),await Ft(s,"buddy_request"),k("pending_out"),L(J),Wt("Buddy request sent!","success")}catch(J){console.error(J),Wt("Failed to send request","error")}finally{se(!1)}},mn=async()=>{if(T){se(!0);try{const J=Qp(i.id,s);await Hn(Ge(be,"buddies",J),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:ta()}),await pr(Ge(be,"buddyRequests",T)),await Ft(s,"buddy_accept"),k("buddy"),Wt("Buddy added!","success")}catch(J){console.error(J),Wt("Failed to accept","error")}finally{se(!1)}}},pe=async()=>{if(T){se(!0);try{await pr(Ge(be,"buddyRequests",T)),k("none"),Wt(w==="pending_out"?"Request cancelled":"Request declined","info")}catch(J){console.error(J),Wt("Failed","error")}finally{se(!1)}}},Re=async()=>{se(!0);try{const J=Qp(i.id,s);await pr(Ge(be,"buddies",J)),k("none"),Wt("Buddy removed","info")}catch(J){console.error(J),Wt("Failed to remove","error")}finally{se(!1)}},Oe=v.useCallback(async()=>{if(s){R(!0);try{const J=await jn(Nn(Bt(be,"posts"),un("authorId","==",s),Hd("createdAt","desc"),$d(30)));if(Me(J.docs.map(ge=>({id:ge.id,...ge.data()}))),i){const ge=await jn(Nn(Bt(be,"postLikes"),un("userId","==",i.id)));I(new Set(ge.docs.map(rt=>rt.data().postId)))}}catch(J){console.error("Error loading journey:",J)}finally{R(!1)}}},[s,i]);v.useEffect(()=>{!$&&g&&Oe()},[$,g,Oe]);const Qe=async J=>{if(window.confirm("Delete this post?"))try{await pr(Ge(be,"posts",J)),Me(ge=>ge.filter(rt=>rt.id!==J)),Wt("Post deleted","info")}catch(ge){console.error("Delete error:",ge),Wt("Failed to delete","error")}},Ve=async J=>{if(!i)return;const ge=i.id,rt=`${J}_${ge}`,St=S.has(J),Nt=new Set(S);St?Nt.delete(J):Nt.add(J),I(Nt),Me(Yt=>Yt.map(Qt=>Qt.id===J?{...Qt,likeCount:Math.max(0,(Qt.likeCount||0)+(St?-1:1))}:Qt));try{if(St)await pr(Ge(be,"postLikes",rt)),await si(Ge(be,"posts",J),{likeCount:Vo(-1)});else{await Hn(Ge(be,"postLikes",rt),{postId:J,userId:ge,createdAt:ta()}),await si(Ge(be,"posts",J),{likeCount:Vo(1)});const Yt=ve.find(Qt=>Qt.id===J);Yt&&Ft(Yt.authorId,"like",{postId:J})}}catch(Yt){console.error("Like error:",Yt),Oe()}},De=async J=>{try{const ge=await jn(Nn(Bt(be,"postComments"),un("postId","==",J),Hd("createdAt","asc"),$d(50)));M(rt=>({...rt,[J]:ge.docs.map(St=>({id:St.id,...St.data()}))}))}catch(ge){console.error("Error loading comments:",ge)}},Ue=J=>{const ge=new Set(V);ge.has(J)?ge.delete(J):(ge.add(J),F[J]||De(J)),D(ge)},wt=(J,ge)=>{const rt=J.match(/@(\w*)$/);if(rt){nn(!0),Et(ge);const St=jt.filter(Nt=>Nt.name&&Nt.name.toLowerCase().includes(rt[1].toLowerCase())).slice(0,5);Yn(St)}else nn(!1),Yn([])},ft=(J,ge)=>{const St=(He[ge]||"").replace(/@\w*$/,`@${J.name} `);bt(Nt=>({...Nt,[ge]:St})),nn(!1),Yn([])},Mt=(J,ge)=>{bt(rt=>({...rt,[J]:ge})),wt(ge,J)},Ut=async J=>{const ge=(He[J]||"").trim();if(!(!ge||!i)){me(rt=>({...rt,[J]:!0}));try{await ci(Bt(be,"postComments"),{postId:J,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:ge,createdAt:ta()}),await si(Ge(be,"posts",J),{commentCount:Vo(1)});const rt=ve.find(Nt=>Nt.id===J);rt&&Ft(rt.authorId,"comment",{postId:J});const St=ge.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(St){const Nt=new Set;St.forEach(Yt=>{const Qt=Yt.slice(1).trim(),Vt=jt.find(Ln=>Ln.name&&Ln.name.toLowerCase()===Qt.toLowerCase());Vt&&!Nt.has(Vt.id)&&(Nt.add(Vt.id),Ft(Vt.id,"mention",{postId:J}))})}bt(Nt=>({...Nt,[J]:""})),Me(Nt=>Nt.map(Yt=>Yt.id===J?{...Yt,commentCount:(Yt.commentCount||0)+1}:Yt)),await De(J)}catch(rt){console.error("Comment error:",rt),Wt("Failed to comment","error")}finally{me(rt=>({...rt,[J]:!1}))}}};return l||$||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!t?null:g?a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:h,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:ld(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),a.jsxs("div",{className:"prf-buddy-action",children:[w==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:an,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),w==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:pe,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),w==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:mn,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:pe,disabled:O,children:"Decline"})]}),w==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:Re,disabled:O,children:O?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),Pe?a.jsx("div",{className:"prf-stats-loading",children:a.jsx("div",{className:"prf-spinner"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"prf-stats",children:[a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:Z}),a.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[FD(G),a.jsx("span",{className:"prf-stat-unit",children:G>=1e3?"":"kg"})]}),a.jsxs("span",{className:"prf-stat-label",children:[G>=1e6?"Million kg":G>=1e3?"Tonnes":"Volume"," Lifted"]})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[Ee,a.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),a.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),(he||Ae>0)&&a.jsxs("div",{className:"prf-info-row",children:[he&&a.jsxs("div",{className:"prf-info-card info-programme",children:[a.jsx("div",{className:"prf-info-icon",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),a.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]})}),a.jsxs("div",{className:"prf-info-text",children:[a.jsx("span",{className:"prf-info-label",children:he}),a.jsx("div",{className:"prf-info-progress-bar",children:a.jsx("div",{className:"prf-info-progress-fill",style:{width:`${Math.min(tn,100)}%`}})}),a.jsxs("span",{className:"prf-info-sub",children:[tn,"% complete"]})]})]}),Ae>0&&a.jsxs("div",{className:"prf-info-card info-habit",children:[a.jsx("div",{className:"prf-info-icon",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})}),a.jsxs("div",{className:"prf-info-text",children:[a.jsxs("span",{className:"prf-info-value",children:[Ae," day",Ae!==1?"s":""]}),a.jsx("span",{className:"prf-info-sub",children:"Habit Streak"})]})]})]}),ht.length>0&&a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:"Top Lifts"}),a.jsx("div",{className:"prf-pb-list",children:ht.map((J,ge)=>a.jsxs("div",{className:"prf-pb-item",children:[a.jsx("div",{className:"prf-pb-rank",children:ge===0?a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:a.jsx("path",{d:"M12 2l2.4 7.4H22l-6 4.4 2.3 7.2L12 16.6 5.7 21l2.3-7.2-6-4.4h7.6z"})}):`#${ge+1}`}),a.jsx("span",{className:"prf-pb-name",children:J.name}),a.jsxs("span",{className:"prf-pb-weight",children:[J.weight,a.jsx("span",{className:"prf-pb-unit",children:"kg"})," x",J.reps]})]},ge))})]}),Ot.length>0&&a.jsxs("div",{className:"prf-section",children:[a.jsxs("h2",{className:"prf-section-title",children:["Badges Earned (",Ot.length,")"]}),a.jsx("div",{className:"prf-badge-row",children:Ot.map(J=>{const ge=Wd.find(rt=>rt.id===J);return ge?a.jsx("button",{className:"prf-badge-chip",onClick:()=>vt(ge),children:a.jsx("img",{src:ge.img,alt:ge.name,className:"prf-badge-chip-img"})},J):null})})]}),It&&a.jsx("div",{className:"prf-badge-overlay",onClick:()=>vt(null),children:a.jsxs("div",{className:"prf-badge-overlay-content",onClick:J=>J.stopPropagation(),children:[a.jsx("img",{src:It.img,alt:It.name,className:"prf-badge-overlay-img"}),a.jsx("p",{className:"prf-badge-overlay-desc",children:It.desc}),a.jsx("button",{className:"prf-badge-overlay-close",onClick:()=>vt(null),children:"Tap to close"})]})})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:`${g.name?.split(" ")[0]}'s Journey`}),Ne?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):ve.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:ve.map(J=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:J.authorPhotoURL?a.jsx("img",{src:J.authorPhotoURL,alt:""}):a.jsx("span",{children:ld(J.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:J.authorName}),a.jsx("span",{className:"journey-post-time",children:T2(J.createdAt)})]}),J.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>Qe(J.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),J.content&&a.jsx("p",{className:"journey-post-content",children:J.content}),J.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:J.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${S.has(J.id)?" liked":""}`,onClick:()=>Ve(J.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:S.has(J.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:J.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${V.has(J.id)?" active":""}`,onClick:()=>Ue(J.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:J.commentCount||0})]})]}),V.has(J.id)&&a.jsxs("div",{className:"journey-comments",children:[F[J.id]?.length>0?F[J.id].map(ge=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${ge.authorId}`),children:ge.authorPhotoURL?a.jsx("img",{src:ge.authorPhotoURL,alt:""}):a.jsx("span",{children:ld(ge.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:ge.authorName}),a.jsx("span",{className:"journey-comment-text",children:ge.content})]}),a.jsx("span",{className:"journey-comment-time",children:T2(ge.createdAt)})]})]},ge.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("input",{type:"text",placeholder:"Comment... (@ to mention)",value:He[J.id]||"",onChange:ge=>Mt(J.id,ge.target.value),onKeyDown:ge=>{ge.key==="Enter"&&Ut(J.id)},maxLength:300}),nt&&ds===J.id&&rn.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:rn.map(ge=>a.jsxs("button",{className:"mention-option",onClick:()=>ft(ge,J.id),children:[a.jsx("div",{className:"mention-option-avatar",children:ge.photoURL?a.jsx("img",{src:ge.photoURL,alt:""}):a.jsx("span",{children:ld(ge.name)})}),a.jsx("span",{children:ge.name})]},ge.id))}),a.jsx("button",{onClick:()=>Ut(J.id),disabled:!(He[J.id]||"").trim()||q[J.id],children:q[J.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},J.id))})]})]}),a.jsx(La,{}),Q&&a.jsxs("div",{className:`toast-notification ${Q.type}`,children:[a.jsx("span",{className:"toast-icon",children:Q.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):Q.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:Q.message})]})]}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(La,{})]})}const ua=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],Do=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function $D(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function ha(s){const[e,t]=s.split("-");return new Date(parseInt(e),parseInt(t)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function WD(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),t=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(t).toFixed(0)}s`:`${parseFloat(t).toFixed(2)}s`}function GD(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function cd(s,e){if(!e)return"-";switch(s.unit){case"weight":return GD(e.weight,e.reps);case"time":return WD(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function Ml(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function Jp(s,e){return!e||e===0?null:(s-e)/e*100}function KD({data:s,exerciseKey:e,unit:t}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(U=>{const O=U.benchmarks?.[e];if(!O)return 0;switch(t){case"weight":return(O.weight||0)*(O.reps||0);case"time":return O.time||0;case"reps":return O.reps||0;case"distance":return O.distance||0;default:return 0}}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,w=p-y*2,k=g-y*2,T=i.map((U,O)=>{const se=y+O/(i.length-1)*w,Q=y+k-(U-u)/h*k;return{x:se,y:Q,value:U}}),L=T.map((U,O)=>`${O===0?"M":"L"} ${U.x} ${U.y}`).join(" "),$=L+` L ${T[T.length-1].x} ${y+k} L ${T[0].x} ${y+k} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:$,fill:"url(#trendGradientJr)"}),a.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),T.map((U,O)=>a.jsx("circle",{cx:U.x,cy:U.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},O))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((U,O)=>a.jsxs("span",{className:"pb-trend-label",children:[U.month.split("-")[1],"/",U.month.split("-")[0].slice(2)]},O))})]})}function YD(){const[s,e]=v.useState("bests"),[t,i]=v.useState([]),[l,u]=v.useState(!0),[h,p]=v.useState(!1),[g,y]=v.useState(0),[w,k]=v.useState(!1),[T,L]=v.useState(!1),[$,U]=v.useState(!1),[O,se]=v.useState({}),[Q,oe]=v.useState({}),[ve,Me]=v.useState({}),[Ne,R]=v.useState({}),[S,I]=v.useState({}),[V,D]=v.useState(!1),[F,M]=v.useState({}),[He,bt]=v.useState([]),[q,me]=v.useState(null),[Pe,We]=v.useState(null),[Z,P]=v.useState(!1),[G,xe]=v.useState(""),[Ee,$e]=v.useState(""),Ae=v.useRef(null),at=v.useRef(0),ht=v.useRef(0),Je=v.useRef("right"),Ot=v.useCallback(z=>{y(ye=>{const _e=Math.max(0,Math.min(ua.length-1,z));return _e===ye?ye:(Je.current=_e>ye?"right":"left",_e)})},[]),{currentUser:Cn,isClient:It,clientData:vt,loading:he}=Fr(),{isDark:en}=Va(),tn=nr(),dt=v.useCallback((z,ye="info")=>{We({message:z,type:ye}),setTimeout(()=>We(null),4e3)},[]);v.useEffect(()=>{!he&&(!Cn||!It)&&tn("/")},[Cn,It,he,tn]),v.useEffect(()=>{vt&&jt()},[vt]);const jt=async()=>{try{const z=Nn(Bt(be,"juniorPBs"),un("clientId","==",vt.id)),_e=(await jn(z)).docs.map(it=>({id:it.id,...it.data()}));_e.sort((it,_t)=>it.month.localeCompare(_t.month)),i(_e);const ke=Nn(Bt(be,"juniorPBTargets"),un("clientId","==",vt.id)),de=await jn(ke);if(!de.empty){const it=de.docs[0].data();Me(it.targets||{}),R(it.metricTargets||{}),I(it.targets||{}),M(it.metricTargets||{})}const tt=Nn(Bt(be,"juniorAchievements"),un("clientId","==",vt.id)),Ct=await jn(tt);Ct.empty||bt(Ct.docs[0].data().badges||[])}catch(z){console.error("Error fetching junior personal bests:",z)}u(!1)},ct=$D(),nt=t.find(z=>z.month===ct),nn=t.filter(z=>z.month<ct),ds=nn.length>0?nn[nn.length-1]:null;v.useEffect(()=>{nt?(se(nt.benchmarks||{}),oe(nt.bodyMetrics||{})):(se({}),oe({}))},[nt?.id]);const Et=async(z,ye)=>{const _e=[];if(z==="strength"?ua.forEach(ke=>{const de=ve[ke.key];if(!de)return;const tt=ye[ke.key];if(!tt)return;let Ct;if(de.targetType==="time"){if(!de.targetValue)return;const it=de.startValue||0,_t=tt.time||0,xt=de.targetValue-it;Ct=xt===0?_t>=de.targetValue?1:0:Math.max(0,(_t-it)/xt)}else if(de.targetType==="reps"){if(!de.targetReps)return;const it=de.startReps||0,_t=tt.reps||0,xt=de.targetReps-it;Ct=xt===0?_t>=de.targetReps?1:0:Math.max(0,(_t-it)/xt)}else if(de.targetType==="distance"){if(!de.targetDistance)return;const it=de.startDistance||0,_t=tt.distance||0,xt=de.targetDistance-it;Ct=xt===0?_t>=de.targetDistance?1:0:Math.max(0,(_t-it)/xt)}else{if(!de.targetWeight&&!de.targetReps)return;const it=(de.startWeight||0)*(de.startReps||0),_t=(de.targetWeight||0)*(de.targetReps||0),xt=(tt.weight||0)*(tt.reps||0),on=_t-it;Ct=on===0?xt>=_t?1:0:Math.max(0,(xt-it)/on)}if(Ct>=1){let it,_t;de.targetType==="time"?(it=He.some(xt=>xt.type==="strength"&&xt.key===ke.key&&xt.targetValue===de.targetValue),_t=`${ke.name} ${de.targetValue}s`):de.targetType==="reps"?(it=He.some(xt=>xt.type==="strength"&&xt.key===ke.key&&xt.targetReps===de.targetReps),_t=`${ke.name} ${de.targetReps} reps`):de.targetType==="distance"?(it=He.some(xt=>xt.type==="strength"&&xt.key===ke.key&&xt.targetDistance===de.targetDistance),_t=`${ke.name} ${de.targetDistance}cm`):(it=He.some(xt=>xt.type==="strength"&&xt.key===ke.key&&xt.targetWeight===de.targetWeight&&xt.targetReps===de.targetReps),_t=`${ke.name} ${de.targetWeight}kg  ${de.targetReps}`),it||_e.push({type:"strength",key:ke.key,...de.targetType==="time"?{targetType:"time",targetValue:de.targetValue}:de.targetType==="reps"?{targetType:"reps",targetReps:de.targetReps}:de.targetType==="distance"?{targetType:"distance",targetDistance:de.targetDistance}:{targetWeight:de.targetWeight,targetReps:de.targetReps},achievedMonth:ct,label:_t})}}):Do.forEach(ke=>{const de=Ne[ke.key];if(!de||!de.targetValue)return;const tt=ye[ke.key];if(tt==null)return;const Ct=de.startValue||0,it=de.targetValue,_t=it-Ct;(_t===0?tt===it?1:0:Math.max(0,(tt-Ct)/_t))>=1&&(He.some(sr=>sr.type==="metric"&&sr.key===ke.key&&sr.targetValue===it)||_e.push({type:"metric",key:ke.key,targetValue:it,achievedMonth:ct,label:`${ke.name} ${it}${ke.suffix}`}))}),_e.length>0){const ke=[...He,..._e];await Hn(Ge(be,"juniorAchievements",vt.id),{clientId:vt.id,badges:ke,updatedAt:yt.now()}),bt(ke),me(_e),setTimeout(()=>me(null),5e3)}},rn=(z,ye)=>{if(z==="strength"){const _e=ve[ye];if(!_e)return!1;switch(ua.find(de=>de.key===ye)?.unit){case"time":return He.some(de=>de.type==="strength"&&de.key===ye&&de.targetValue===_e.targetValue);case"reps":return He.some(de=>de.type==="strength"&&de.key===ye&&de.targetReps===_e.targetReps);case"distance":return He.some(de=>de.type==="strength"&&de.key===ye&&de.targetDistance===_e.targetDistance);default:return!_e.targetWeight&&!_e.targetReps?!1:He.some(de=>de.type==="strength"&&de.key===ye&&de.targetWeight===_e.targetWeight&&de.targetReps===_e.targetReps)}}else{const _e=Ne[ye];return!_e||!_e.targetValue?!1:He.some(ke=>ke.type==="metric"&&ke.key===ye&&ke.targetValue===_e.targetValue)}},Yn=async()=>{p(!0);try{const z=`${vt.id}_${ct}`,ye=nt||{};await Hn(Ge(be,"juniorPBs",z),{clientId:vt.id,month:ct,benchmarks:O,bodyMetrics:ye.bodyMetrics||Q||{},createdAt:ye.createdAt||yt.now(),updatedAt:yt.now()}),await Et("strength",O),dt("Benchmarks saved!","success"),k(!1),await jt()}catch(z){console.error("Error saving benchmarks:",z),dt("Failed to save. Please try again.","error")}p(!1)},Wt=async()=>{p(!0);try{const z=`${vt.id}_${ct}`,ye=nt||{};await Hn(Ge(be,"juniorPBs",z),{clientId:vt.id,month:ct,benchmarks:ye.benchmarks||O||{},bodyMetrics:Q,createdAt:ye.createdAt||yt.now(),updatedAt:yt.now()}),await Et("metric",Q),dt("Body metrics saved!","success"),L(!1),await jt()}catch(z){console.error("Error saving metrics:",z),dt("Failed to save. Please try again.","error")}p(!1)},Ft=(z,ye,_e)=>{se(ke=>({...ke,[z]:{...ke[z],[ye]:_e===""?"":parseFloat(_e)}}))},an=(z,ye)=>{oe(_e=>({..._e,[z]:ye===""?"":parseFloat(ye)}))},mn=(z,ye,_e)=>{I(ke=>({...ke,[z]:{...ke[z],[ye]:_e===""?"":parseFloat(_e)}}))},pe=async()=>{p(!0);try{const z=`targets_${vt.id}`,ye=nt?.benchmarks||{},_e={};ua.forEach(ke=>{const de=ye[ke.key];switch(ke.unit){case"time":S[ke.key]?.targetValue&&(_e[ke.key]={targetType:"time",targetValue:S[ke.key].targetValue,startValue:de?.time||0});break;case"reps":S[ke.key]?.targetReps&&(_e[ke.key]={targetType:"reps",targetReps:S[ke.key].targetReps,startReps:de?.reps||0});break;case"distance":S[ke.key]?.targetDistance&&(_e[ke.key]={targetType:"distance",targetDistance:S[ke.key].targetDistance,startDistance:de?.distance||0});break;default:(S[ke.key]?.targetWeight||S[ke.key]?.targetReps)&&(_e[ke.key]={targetWeight:S[ke.key].targetWeight||0,targetReps:S[ke.key].targetReps||0,startWeight:de?.weight||0,startReps:de?.reps||0})}}),await Hn(Ge(be,"juniorPBTargets",z),{clientId:vt.id,targets:_e,metricTargets:Ne,updatedAt:yt.now()}),Me(_e),I(_e),dt("Targets saved!","success"),U(!1)}catch(z){console.error("Error saving targets:",z),dt("Failed to save targets.","error")}p(!1)},Re=(z,ye)=>{M(_e=>({..._e,[z]:{..._e[z],targetValue:ye===""?"":parseFloat(ye)}}))},Oe=async()=>{p(!0);try{const z=`targets_${vt.id}`,ye={};Do.forEach(_e=>{if(F[_e.key]?.targetValue){const ke=nt?.bodyMetrics?.[_e.key]||0;ye[_e.key]={targetValue:F[_e.key].targetValue,startValue:ke}}}),await Hn(Ge(be,"juniorPBTargets",z),{clientId:vt.id,targets:ve,metricTargets:ye,updatedAt:yt.now()}),R(ye),M(ye),dt("Metric targets saved!","success"),D(!1)}catch(z){console.error("Error saving metric targets:",z),dt("Failed to save targets.","error")}p(!1)},Qe=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const z=Ge(be,"juniorPBTargets",`targets_${vt.id}`);await pr(z),Me({}),R({}),I({}),M({}),dt("All goals have been reset","success")}catch(z){console.error("Error resetting targets:",z),dt("Failed to reset goals","error")}p(!1)}},Ve=(z,ye)=>{const _e=ve[z];if(!_e||!ye)return null;if(_e.targetType==="time"){if(!_e.targetValue)return null;const it=_e.startValue||0,_t=_e.targetValue,xt=ye.time||0,on=_t-it;return on<=0?xt>=_t?1:0:Math.max(0,Math.min((xt-it)/on,1))}if(_e.targetType==="reps"){if(!_e.targetReps)return null;const it=_e.startReps||0,_t=_e.targetReps,xt=ye.reps||0,on=_t-it;return on<=0?xt>=_t?1:0:Math.max(0,Math.min((xt-it)/on,1))}if(_e.targetType==="distance"){if(!_e.targetDistance)return null;const it=_e.startDistance||0,_t=_e.targetDistance,xt=ye.distance||0,on=_t-it;return on<=0?xt>=_t?1:0:Math.max(0,Math.min((xt-it)/on,1))}if(!_e.targetWeight&&!_e.targetReps)return null;const ke=(_e.startWeight||0)*(_e.startReps||0),de=(_e.targetWeight||0)*(_e.targetReps||0),tt=(ye.weight||0)*(ye.reps||0),Ct=de-ke;return Ct<=0?tt>=de?1:0:Math.max(0,Math.min((tt-ke)/Ct,1))},De=z=>{const ye=Ne[z];if(!ye||!ye.targetValue)return null;const _e=nt?.bodyMetrics?.[z];if(_e==null)return null;const ke=ye.startValue||0,de=ye.targetValue,tt=de-ke;return tt===0?_e===de?1:0:Math.max(0,Math.min((_e-ke)/tt,1))},Ue=z=>{at.current=z.touches[0].clientX,ht.current=0},wt=z=>{ht.current=z.touches[0].clientX-at.current},ft=()=>{ht.current<-50?Ot(g+1):ht.current>50&&Ot(g-1),ht.current=0},Mt=z=>{const ye=nt?.bodyMetrics?.[z],_e=ds?.bodyMetrics?.[z];return ye==null||_e==null?null:parseFloat((ye-_e).toFixed(2))},Ut=t.find(z=>z.month===G),J=t.find(z=>z.month===Ee);if(he||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Cn||!It||!vt)return null;const ge=ua[g],rt=nt?.benchmarks?.[ge.key],St=ds?.benchmarks?.[ge.key],Nt=Ml(ge,rt),Yt=Ml(ge,St),Qt=Jp(Nt,Yt),Vt=Ve(ge.key,rt),Ln=Vt!==null,es=Vt!==null&&Vt>=1,hn=Ln?Math.round(Vt*60):Nt>0?15:0,Sn=ve[ge.key],Mn=z=>z?z.targetType==="time"?`${z.startValue||0}s  ${z.targetValue}s`:z.targetType==="reps"?`${z.startReps||0}  ${z.targetReps} reps`:z.targetType==="distance"?`${z.startDistance||0}  ${z.targetDistance}cm`:`${z.startWeight||0}kg${z.startReps||0}  ${z.targetWeight}kg${z.targetReps}`:null;return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>tn("/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Junior Strength Tests"}),a.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:Ae,onTouchStart:Ue,onTouchMove:wt,onTouchEnd:ft,children:[a.jsx("div",{className:`pb-ring-container slide-from-${Je.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Yy.map((z,ye)=>{const _e=ye<Math.round(hn);return a.jsx("line",{x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,className:`pb-ring-tick ${_e?es?"hit":"filled":"empty"}`,strokeWidth:z.thick?"3":"2"},ye)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:ge.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[ge.name,rn("strength",ge.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:rt?cd(ge,rt):"-"}),Qt!==null&&a.jsxs("div",{className:`pb-ring-change ${Qt>=0?"positive":"negative"}`,children:[Qt>=0?"+":"",Qt.toFixed(1),"%"]}),Qt===null&&rt&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),Sn&&a.jsx("div",{className:`pb-ring-target ${es?"hit":""}`,children:es?"Target hit!":Mn(Sn)}),!Sn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:ua.map((z,ye)=>a.jsx("button",{className:`pb-dot ${ye===g?"active":""}`,onClick:()=>Ot(ye)},ye))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Ot(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Ot(g+1),disabled:g===ua.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(KD,{data:t,exerciseKey:ge.key,unit:ge.unit})]})]}),!w&&!$&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:nt?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>U(!0),children:Object.keys(ve).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ve).length>0||Object.keys(Ne).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Qe,disabled:h,children:"Reset All Goals"})]}),w&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",ha(ct)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),se(nt?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:ua.map(z=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),z.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:O[z.key]?.weight??"",onChange:ye=>Ft(z.key,"weight",ye.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:O[z.key]?.reps??"",onChange:ye=>Ft(z.key,"reps",ye.target.value),placeholder:"0"})]})]}):z.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Reps (max in 1 min)"}),a.jsx("input",{type:"number",value:O[z.key]?.reps??"",onChange:ye=>Ft(z.key,"reps",ye.target.value),placeholder:"0"})]})}):z.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:O[z.key]?.distance??"",onChange:ye=>Ft(z.key,"distance",ye.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:O[z.key]?.time??"",onChange:ye=>Ft(z.key,"time",ye.target.value),placeholder:"0"})]})})]},z.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),se(nt?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Yn,disabled:h,children:h?"Saving...":"Save"})]})]}),$&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{U(!1),I(ve)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),ua.map(z=>{const ye=nt?.benchmarks?.[z.key];let _e="-";if(ye)switch(z.unit){case"weight":(ye.weight||ye.reps)&&(_e=`${ye.weight||0}kg  ${ye.reps||0}`);break;case"time":ye.time&&(_e=`${ye.time}s`);break;case"reps":ye.reps&&(_e=`${ye.reps} reps`);break;case"distance":ye.distance&&(_e=`${ye.distance} cm`);break}return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",_e]})]}),z.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:S[z.key]?.targetWeight??"",onChange:ke=>mn(z.key,"targetWeight",ke.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:S[z.key]?.targetReps??"",onChange:ke=>mn(z.key,"targetReps",ke.target.value),placeholder:"0"})]})]}):z.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Reps (in 1 min)"}),a.jsx("input",{type:"number",value:S[z.key]?.targetReps??"",onChange:ke=>mn(z.key,"targetReps",ke.target.value),placeholder:"0"})]})}):z.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:S[z.key]?.targetDistance??"",onChange:ke=>mn(z.key,"targetDistance",ke.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:S[z.key]?.targetValue??"",onChange:ke=>mn(z.key,"targetValue",ke.target.value),placeholder:"0"})]})})]},z.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{U(!1),I(ve)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:pe,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!T&&!V&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:ha(ct)}),a.jsx("div",{className:"pb-metrics-list",children:Do.map(z=>{const ye=nt?.bodyMetrics?.[z.key],_e=Mt(z.key),ke=Ne[z.key],de=De(z.key),tt=de!==null&&de>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[z.name,rn("metric",z.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),ke&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",ke.targetValue," ",z.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ye!=null?`${ye} ${z.suffix}`:"-"}),_e!==null&&a.jsxs("span",{className:`pb-metric-change ${_e>0?"up":_e<0?"down":"same"}`,children:[_e>0?"+":"",_e," ",z.suffix]})]})]}),de!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${tt?"hit":""}`,style:{width:`${Math.round(de*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${tt?"hit":""}`,children:tt?"Hit!":`${Math.round(de*100)}%`})]})]},z.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:nt?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(Ne).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ve).length>0||Object.keys(Ne).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Qe,disabled:h,children:"Reset All Goals"})]})]}),T&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",ha(ct)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),oe(nt?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:Do.map(z=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[z.name," (",z.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:Q[z.key]??"",onChange:ye=>an(z.key,ye.target.value),placeholder:"0"})]})},z.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),oe(nt?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Wt,disabled:h,children:h?"Saving...":"Save"})]})]}),V&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),M(Ne)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),Do.map(z=>{const ye=nt?.bodyMetrics?.[z.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ye!=null?`${ye} ${z.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",z.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:F[z.key]?.targetValue??"",onChange:_e=>Re(z.key,_e.target.value),placeholder:"0"})]})})]},z.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),M(Ne)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Oe,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:t.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[He.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...He].reverse().map((z,ye)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ye*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:z.label}),a.jsx("span",{className:"pb-achievement-date",children:ha(z.achievedMonth)})]})]},ye))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${Z?"active":""}`,onClick:()=>{P(!Z),!Z&&t.length>=2&&(xe(t[0].month),$e(t[t.length-1].month))},children:Z?"Back to Timeline":"Compare Months"})}),Z?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:G,onChange:z=>xe(z.target.value),children:t.map(z=>a.jsx("option",{value:z.month,children:ha(z.month)},z.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:Ee,onChange:z=>$e(z.target.value),children:t.map(z=>a.jsx("option",{value:z.month,children:ha(z.month)},z.month))})]})]}),Ut&&J&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Tests"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:ha(G).split(" ")[0]}),a.jsx("span",{children:ha(Ee).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),ua.map(z=>{const ye=Ut.benchmarks?.[z.key],_e=J.benchmarks?.[z.key],ke=Ml(z,ye),de=Ml(z,_e),tt=Jp(de,ke);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:z.name}),a.jsx("span",{className:"pb-compare-val",children:ye?cd(z,ye):"-"}),a.jsx("span",{className:"pb-compare-val",children:_e?cd(z,_e):"-"}),a.jsx("span",{className:`pb-compare-change ${tt!==null?tt>=0?"positive":"negative":""}`,children:tt!==null?`${tt>=0?"+":""}${tt.toFixed(1)}%`:"-"})]},z.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:ha(G).split(" ")[0]}),a.jsx("span",{children:ha(Ee).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),Do.map(z=>{const ye=Ut.bodyMetrics?.[z.key],_e=J.bodyMetrics?.[z.key],ke=ye!=null&&_e!=null?parseFloat((_e-ye).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:z.name}),a.jsx("span",{className:"pb-compare-val",children:ye!=null?`${ye}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:_e!=null?`${_e}`:"-"}),a.jsx("span",{className:`pb-compare-change ${ke!==null?ke>0?"positive":ke<0?"negative":"neutral":""}`,children:ke!==null?`${ke>0?"+":""}${ke} ${z.suffix}`:"-"})]},z.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...t].reverse().map((z,ye)=>{const _e=t.filter(ke=>ke.month<z.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ye*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:ha(z.month)}),z.benchmarks&&Object.keys(z.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Tests"}),ua.map(ke=>{const de=z.benchmarks[ke.key];if(!de)return null;const tt=_e?.benchmarks?.[ke.key],Ct=Ml(ke,de),it=Ml(ke,tt),_t=Jp(Ct,it);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:ke.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:cd(ke,de)}),_t!==null&&a.jsxs("span",{className:`pb-timeline-change ${_t>=0?"positive":"negative"}`,children:[_t>=0?"+":"",_t.toFixed(1),"%"]})]})]},ke.key)})]}),z.bodyMetrics&&Object.keys(z.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),Do.map(ke=>{const de=z.bodyMetrics[ke.key];if(de==null)return null;const tt=_e?.bodyMetrics?.[ke.key],Ct=tt!=null?parseFloat((de-tt).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:ke.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[de," ",ke.suffix]}),Ct!==null&&a.jsxs("span",{className:`pb-timeline-change ${Ct>0?"positive":Ct<0?"negative":"neutral"}`,children:[Ct>0?"+":"",Ct," ",ke.suffix]})]})]},ke.key)})]})]})]},z.id)})})]})})]}),q&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>me(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:q.length===1?"Target Achieved!":`${q.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:q.map((z,ye)=>a.jsx("div",{className:"pb-celebration-badge",children:z.label},ye))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Pe&&a.jsxs("div",{className:`toast-notification ${Pe.type}`,children:[a.jsx("span",{className:"toast-icon",children:Pe.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Pe.message}),a.jsx("button",{className:"toast-close",onClick:()=>We(null),children:""})]}),a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>tn("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>tn("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>tn("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),vt?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>tn("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]})]})}const ja=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],Po=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function QD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function da(s){const[e,t]=s.split("-");return new Date(parseInt(e),parseInt(t)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function ud(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),t=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(t).toFixed(0)}s`:`${parseFloat(t).toFixed(2)}s`}function j2(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function Dl(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Zp(s,e){return!e||e===0?null:(s-e)/e*100}function XD({data:s,exerciseKey:e,unit:t}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(U=>{const O=U.benchmarks?.[e];return O?t==="time"?O.time||0:(O.weight||0)*(O.reps||0):0}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,w=p-y*2,k=g-y*2,T=i.map((U,O)=>{const se=y+O/(i.length-1)*w,Q=y+k-(U-u)/h*k;return{x:se,y:Q,value:U}}),L=T.map((U,O)=>`${O===0?"M":"L"} ${U.x} ${U.y}`).join(" "),$=L+` L ${T[T.length-1].x} ${y+k} L ${T[0].x} ${y+k} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:$,fill:"url(#trendGradient)"}),a.jsx("path",{d:L,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),T.map((U,O)=>a.jsx("circle",{cx:U.x,cy:U.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},O))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((U,O)=>a.jsxs("span",{className:"pb-trend-label",children:[U.month.split("-")[1],"/",U.month.split("-")[0].slice(2)]},O))})]})}function JD(){const[s,e]=v.useState("bests"),[t,i]=v.useState([]),[l,u]=v.useState(!0),[h,p]=v.useState(!1),[g,y]=v.useState(0),[w,k]=v.useState(!1),[T,L]=v.useState(!1),[$,U]=v.useState(!1),[O,se]=v.useState({}),[Q,oe]=v.useState({}),[ve,Me]=v.useState({}),[Ne,R]=v.useState({}),[S,I]=v.useState({}),[V,D]=v.useState(!1),[F,M]=v.useState({}),[He,bt]=v.useState([]),[q,me]=v.useState(null),[Pe,We]=v.useState(null),[Z,P]=v.useState(!1),[G,xe]=v.useState(""),[Ee,$e]=v.useState(""),[Ae,at]=v.useState({}),[ht,Je]=v.useState({}),[Ot,Cn]=v.useState(null),[It,vt]=v.useState(null),[he,en]=v.useState(""),tn=v.useRef(null),dt=v.useRef(0),jt=v.useRef(0),ct=v.useRef("right"),nt=v.useCallback(H=>{y(ce=>{const j=Math.max(0,Math.min(ja.length-1,H));return j===ce?ce:(ct.current=j>ce?"right":"left",j)})},[]),{currentUser:nn,isClient:ds,clientData:Et,loading:rn}=Fr(),{isDark:Yn}=Va(),Wt=nr(),[Ft]=YE(),an=Ft.get("mode")==="corebuddy",mn=!an&&(!Et?.clientType||Et.clientType==="block"),pe=v.useCallback((H,ce="info")=>{We({message:H,type:ce}),setTimeout(()=>We(null),4e3)},[]);v.useEffect(()=>{!rn&&(!nn||!ds)&&Wt("/")},[nn,ds,rn,Wt]),v.useEffect(()=>{Et&&(mn?Re():(async()=>{try{const[ce,j,N]=await Promise.all([In(Ge(be,"coreBuddyPBs",Et.id)),In(Ge(be,"coreBuddyTargets",Et.id)),In(Ge(be,"coreBuddyAchievements",Et.id))]);ce.exists()&&at(ce.data().exercises||{}),j.exists()&&Je(j.data().targets||{}),N.exists()&&Cn(N.data())}catch(ce){console.error("Error loading Core Buddy PBs:",ce)}u(!1)})())},[Et]);const Re=async()=>{try{const H=Nn(Bt(be,"personalBests"),un("clientId","==",Et.id)),j=(await jn(H)).docs.map(qe=>({id:qe.id,...qe.data()}));j.sort((qe,ze)=>qe.month.localeCompare(ze.month)),i(j);const N=Nn(Bt(be,"personalBestTargets"),un("clientId","==",Et.id)),K=await jn(N);if(!K.empty){const qe=K.docs[0].data();Me(qe.targets||{}),R(qe.metricTargets||{}),I(qe.targets||{}),M(qe.metricTargets||{})}const re=Nn(Bt(be,"achievements"),un("clientId","==",Et.id)),Ke=await jn(re);Ke.empty||bt(Ke.docs[0].data().badges||[])}catch(H){console.error("Error fetching personal bests:",H)}u(!1)},Oe=async()=>{if(!It||!he||!Et)return;const H=parseFloat(he),ce=Ae[It];if(!ce||H<=ce.weight){pe("Target must be higher than current PB","error");return}p(!0);try{const j={...ht,[It]:{targetWeight:H,setAt:yt.now(),currentPBWhenSet:ce.weight}};await Hn(Ge(be,"coreBuddyTargets",Et.id),{clientId:Et.id,targets:j,updatedAt:yt.now()}),Je(j),vt(null),en(""),pe("Target set!","success")}catch(j){console.error("Error saving target:",j),pe("Failed to save target","error")}p(!1)},Qe=H=>{if(!Ot?.badges)return!1;const ce=ht[H];return ce?Ot.badges.some(j=>j.type==="pb_target"&&j.exercise===H&&j.targetWeight===ce.targetWeight):!1},Ve=H=>{const ce=ht[H];if(!ce)return null;const j=Ae[H];if(!j)return 0;const N=ce.currentPBWhenSet||0,K=ce.targetWeight,re=K-N;return re<=0?j.weight>=K?1:0:Math.max(0,Math.min((j.weight-N)/re,1))},De=QD(),Ue=t.find(H=>H.month===De),wt=t.filter(H=>H.month<De),ft=wt.length>0?wt[wt.length-1]:null;v.useEffect(()=>{Ue?(se(Ue.benchmarks||{}),oe(Ue.bodyMetrics||{})):(se({}),oe({}))},[Ue?.id]);const Mt=async(H,ce)=>{const j=[];if(H==="strength"?ja.forEach(N=>{const K=ve[N.key];if(!K)return;const re=ce[N.key];if(!re)return;let Ke;if(K.targetType==="time"){if(!K.targetValue)return;const qe=K.startValue||0,ze=re.time||0,Lt=K.targetValue-qe;Ke=Lt===0?ze>=K.targetValue?1:0:Math.max(0,(ze-qe)/Lt)}else{if(!K.targetWeight&&!K.targetReps)return;const qe=(K.startWeight||0)*(K.startReps||0),ze=(K.targetWeight||0)*(K.targetReps||0),Lt=(re.weight||0)*(re.reps||0),At=ze-qe;Ke=At===0?Lt>=ze?1:0:Math.max(0,(Lt-qe)/At)}if(Ke>=1&&!(K.targetType==="time"?He.some(ze=>ze.type==="strength"&&ze.key===N.key&&ze.targetValue===K.targetValue):He.some(ze=>ze.type==="strength"&&ze.key===N.key&&ze.targetWeight===K.targetWeight&&ze.targetReps===K.targetReps))){const ze=K.targetType==="time"?`${N.name} ${K.targetValue}s`:`${N.name} ${K.targetWeight}kg  ${K.targetReps}`;j.push({type:"strength",key:N.key,...K.targetType==="time"?{targetType:"time",targetValue:K.targetValue}:{targetWeight:K.targetWeight,targetReps:K.targetReps},achievedMonth:De,label:ze})}}):Po.forEach(N=>{const K=Ne[N.key];if(!K||!K.targetValue)return;const re=ce[N.key];if(re==null)return;const Ke=K.startValue||0,qe=K.targetValue,ze=qe-Ke;(ze===0?re===qe?1:0:Math.max(0,(re-Ke)/ze))>=1&&(He.some(Un=>Un.type==="metric"&&Un.key===N.key&&Un.targetValue===qe)||j.push({type:"metric",key:N.key,targetValue:qe,achievedMonth:De,label:`${N.name} ${qe}${N.suffix}`}))}),j.length>0){const N=[...He,...j];await Hn(Ge(be,"achievements",Et.id),{clientId:Et.id,badges:N,updatedAt:yt.now()}),bt(N),me(j),setTimeout(()=>me(null),5e3)}},Ut=(H,ce)=>{if(H==="strength"){const j=ve[ce];return j?j.targetType==="time"?He.some(N=>N.type==="strength"&&N.key===ce&&N.targetValue===j.targetValue):!j.targetWeight&&!j.targetReps?!1:He.some(N=>N.type==="strength"&&N.key===ce&&N.targetWeight===j.targetWeight&&N.targetReps===j.targetReps):!1}else{const j=Ne[ce];return!j||!j.targetValue?!1:He.some(N=>N.type==="metric"&&N.key===ce&&N.targetValue===j.targetValue)}},J=async()=>{p(!0);try{const H=`${Et.id}_${De}`,ce=Ue||{};await Hn(Ge(be,"personalBests",H),{clientId:Et.id,month:De,benchmarks:O,bodyMetrics:ce.bodyMetrics||Q||{},createdAt:ce.createdAt||yt.now(),updatedAt:yt.now()}),await Mt("strength",O),pe("Benchmarks saved!","success"),k(!1),await Re()}catch(H){console.error("Error saving benchmarks:",H),pe("Failed to save. Please try again.","error")}p(!1)},ge=async()=>{p(!0);try{const H=`${Et.id}_${De}`,ce=Ue||{};await Hn(Ge(be,"personalBests",H),{clientId:Et.id,month:De,benchmarks:ce.benchmarks||O||{},bodyMetrics:Q,createdAt:ce.createdAt||yt.now(),updatedAt:yt.now()}),await Mt("metric",Q),pe("Body metrics saved!","success"),L(!1),await Re()}catch(H){console.error("Error saving metrics:",H),pe("Failed to save. Please try again.","error")}p(!1)},rt=(H,ce,j)=>{se(N=>({...N,[H]:{...N[H],[ce]:j===""?"":parseFloat(j)}}))},St=(H,ce)=>{oe(j=>({...j,[H]:ce===""?"":parseFloat(ce)}))},Nt=(H,ce,j)=>{I(N=>({...N,[H]:{...N[H],[ce]:j===""?"":parseFloat(j)}}))},Yt=async()=>{p(!0);try{const H=`targets_${Et.id}`,ce=Ue?.benchmarks||{},j={};ja.forEach(N=>{const K=ce[N.key];N.unit==="time"?S[N.key]?.targetValue&&(j[N.key]={targetType:"time",targetValue:S[N.key].targetValue,startValue:K?.time||0}):(S[N.key]?.targetWeight||S[N.key]?.targetReps)&&(j[N.key]={targetWeight:S[N.key].targetWeight||0,targetReps:S[N.key].targetReps||0,startWeight:K?.weight||0,startReps:K?.reps||0})}),await Hn(Ge(be,"personalBestTargets",H),{clientId:Et.id,targets:j,metricTargets:Ne,updatedAt:yt.now()}),Me(j),I(j),pe("Targets saved!","success"),U(!1)}catch(H){console.error("Error saving targets:",H),pe("Failed to save targets.","error")}p(!1)},Qt=(H,ce)=>{M(j=>({...j,[H]:{...j[H],targetValue:ce===""?"":parseFloat(ce)}}))},Vt=async()=>{p(!0);try{const H=`targets_${Et.id}`,ce={};Po.forEach(j=>{if(F[j.key]?.targetValue){const N=Ue?.bodyMetrics?.[j.key]||0;ce[j.key]={targetValue:F[j.key].targetValue,startValue:N}}}),await Hn(Ge(be,"personalBestTargets",H),{clientId:Et.id,targets:ve,metricTargets:ce,updatedAt:yt.now()}),R(ce),M(ce),pe("Metric targets saved!","success"),D(!1)}catch(H){console.error("Error saving metric targets:",H),pe("Failed to save targets.","error")}p(!1)},Ln=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const H=Ge(be,"personalBestTargets",`targets_${Et.id}`);await pr(H),Me({}),R({}),I({}),M({}),pe("All goals have been reset","success")}catch(H){console.error("Error resetting targets:",H),pe("Failed to reset goals","error")}p(!1)}},es=(H,ce)=>{const j=ve[H];if(!j||!ce)return null;if(j.targetType==="time"){if(!j.targetValue)return null;const qe=j.startValue||0,ze=j.targetValue,Lt=ce.time||0,At=ze-qe;return At<=0?Lt>=ze?1:0:Math.max(0,Math.min((Lt-qe)/At,1))}if(!j.targetWeight&&!j.targetReps)return null;const N=(j.startWeight||0)*(j.startReps||0),K=(j.targetWeight||0)*(j.targetReps||0),re=(ce.weight||0)*(ce.reps||0),Ke=K-N;return Ke<=0?re>=K?1:0:Math.max(0,Math.min((re-N)/Ke,1))},hn=H=>{const ce=Ne[H];if(!ce||!ce.targetValue)return null;const j=Ue?.bodyMetrics?.[H];if(j==null)return null;const N=ce.startValue||0,K=ce.targetValue,re=K-N;return re===0?j===K?1:0:Math.max(0,Math.min((j-N)/re,1))},Sn=H=>{dt.current=H.touches[0].clientX,jt.current=0},Mn=H=>{jt.current=H.touches[0].clientX-dt.current},z=()=>{jt.current<-50?nt(g+1):jt.current>50&&nt(g-1),jt.current=0},ye=H=>{const ce=Ue?.bodyMetrics?.[H],j=ft?.bodyMetrics?.[H];return ce==null||j==null?null:parseFloat((ce-j).toFixed(2))},_e=t.find(H=>H.month===G),ke=t.find(H=>H.month===Ee);if(rn||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!nn||!ds||!Et)return null;if(mn&&Et?.isJunior)return a.jsx(YD,{});const de=ja[g],tt=Ue?.benchmarks?.[de.key],Ct=ft?.benchmarks?.[de.key],it=Dl(de,tt),_t=Dl(de,Ct),xt=Zp(it,_t),on=es(de.key,tt),sr=on!==null,Ls=on!==null&&on>=1,zs=sr?Math.round(on*60):it>0?15:0,$n=ve[de.key];return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>Wt(an?"/client/core-buddy":"/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Personal Bests"}),a.jsx("p",{children:mn?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!mn&&a.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Ae).length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("div",{className:"pb-cb-empty-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),a.jsx("h4",{children:"No personal bests yet"}),a.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):a.jsx("div",{className:"pb-cb-grid",children:Object.entries(Ae).sort(([H],[ce])=>H.localeCompare(ce)).map(([H,ce],j)=>{const N=ht[H],K=Ve(H),re=K!==null&&K>=1,Ke=Qe(H),qe=K!==null?Math.round(K*60):60;return a.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${j*.05}s`},children:[a.jsxs("div",{className:"pb-cb-card-ring",children:[a.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:H3.map((ze,Lt)=>{const At=Lt<qe;return a.jsx("line",{x1:ze.x1,y1:ze.y1,x2:ze.x2,y2:ze.y2,className:`pb-ring-tick ${At?re?"hit":"filled":"empty"}`,strokeWidth:ze.thick?"2":"1.5"},Lt)})}),a.jsx("div",{className:"pb-cb-ring-icon",children:Ke?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),a.jsxs("div",{className:"pb-cb-card-info",children:[a.jsx("h4",{className:"pb-cb-card-name",children:H}),a.jsxs("div",{className:"pb-cb-card-value",children:[ce.weight,"kg  ",ce.reps]}),ce.achievedAt&&a.jsx("div",{className:"pb-cb-card-date",children:(ce.achievedAt.toDate?ce.achievedAt.toDate():new Date(ce.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),N&&!re&&a.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",N.targetWeight,"kg (",Math.round((K||0)*100),"%)"]}),N&&re&&!Ke&&a.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),Ke&&a.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),a.jsx("div",{className:"pb-cb-card-action",children:N?re&&Ke?a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{vt(H),en("")},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{vt(H),en("")},children:a.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},H)})}),Object.keys(Ae).length>0&&a.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>Wt("/client/core-buddy/achievements"),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),It&&a.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>vt(null),children:a.jsxs("div",{className:"pb-cb-target-modal",onClick:H=>H.stopPropagation(),children:[a.jsx("h3",{children:"Set Target"}),a.jsx("p",{className:"pb-cb-target-exercise-name",children:It}),a.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",a.jsxs("strong",{children:[Ae[It]?.weight,"kg"]})]}),a.jsxs("div",{className:"pb-cb-target-input-wrap",children:[a.jsx("label",{children:"Your target (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:he,onChange:H=>en(H.target.value),placeholder:String((Ae[It]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),a.jsxs("div",{className:"pb-cb-target-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>vt(null),children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Oe,disabled:h,children:h?"Saving...":"Set Target"})]})]})})]}),mn&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!w&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:tn,onTouchStart:Sn,onTouchMove:Mn,onTouchEnd:z,children:[a.jsx("div",{className:`pb-ring-container slide-from-${ct.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Yy.map((H,ce)=>{const j=ce<Math.round(zs);return a.jsx("line",{x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,className:`pb-ring-tick ${j?Ls?"hit":"filled":"empty"}`,strokeWidth:H.thick?"3":"2"},ce)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:de.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[de.name,Ut("strength",de.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:tt?de.unit==="time"?ud(tt.time):j2(tt.weight,tt.reps):"-"}),xt!==null&&a.jsxs("div",{className:`pb-ring-change ${xt>=0?"positive":"negative"}`,children:[xt>=0?"+":"",xt.toFixed(1),"%"]}),xt===null&&tt&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),$n&&a.jsx("div",{className:`pb-ring-target ${Ls?"hit":""}`,children:Ls?"Target hit!":$n.targetType==="time"?`${$n.startValue||0}s  ${$n.targetValue}s`:`${$n.startWeight||0}kg${$n.startReps||0}  ${$n.targetWeight}kg${$n.targetReps}`}),!$n&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:ja.map((H,ce)=>a.jsx("button",{className:`pb-dot ${ce===g?"active":""}`,onClick:()=>nt(ce)},ce))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>nt(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>nt(g+1),disabled:g===ja.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(XD,{data:t,exerciseKey:de.key,unit:de.unit})]})]}),!w&&!$&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:Ue?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>U(!0),children:Object.keys(ve).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ve).length>0||Object.keys(Ne).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ln,disabled:h,children:"Reset All Goals"})]}),w&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",da(De)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),se(Ue?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:ja.map(H=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),H.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:O[H.key]?.weight??"",onChange:ce=>rt(H.key,"weight",ce.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:O[H.key]?.reps??"",onChange:ce=>rt(H.key,"reps",ce.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:O[H.key]?.time??"",onChange:ce=>rt(H.key,"time",ce.target.value),placeholder:"0"})]})})]},H.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),se(Ue?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:J,disabled:h,children:h?"Saving...":"Save"})]})]}),$&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{U(!1),I(ve)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),ja.map(H=>{const ce=Ue?.benchmarks?.[H.key];let j="-";return ce&&(H.unit==="time"&&ce.time?j=`${ce.time}s`:(ce.weight||ce.reps)&&(j=`${ce.weight||0}kg  ${ce.reps||0}`)),a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",j]})]}),H.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:S[H.key]?.targetWeight??"",onChange:N=>Nt(H.key,"targetWeight",N.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:S[H.key]?.targetReps??"",onChange:N=>Nt(H.key,"targetReps",N.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:S[H.key]?.targetValue??"",onChange:N=>Nt(H.key,"targetValue",N.target.value),placeholder:"0"})]})})]},H.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{U(!1),I(ve)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Yt,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!T&&!V&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:da(De)}),a.jsx("div",{className:"pb-metrics-list",children:Po.map(H=>{const ce=Ue?.bodyMetrics?.[H.key],j=ye(H.key),N=Ne[H.key],K=hn(H.key),re=K!==null&&K>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[H.name,Ut("metric",H.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),N&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",N.targetValue," ",H.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ce!=null?`${ce} ${H.suffix}`:"-"}),j!==null&&a.jsxs("span",{className:`pb-metric-change ${j>0?"up":j<0?"down":"same"}`,children:[j>0?"+":"",j," ",H.suffix]})]})]}),K!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${re?"hit":""}`,style:{width:`${Math.round(K*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${re?"hit":""}`,children:re?"Hit!":`${Math.round(K*100)}%`})]})]},H.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>L(!0),children:Ue?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(Ne).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ve).length>0||Object.keys(Ne).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Ln,disabled:h,children:"Reset All Goals"})]})]}),T&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",da(De)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{L(!1),oe(Ue?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:Po.map(H=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[H.name," (",H.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:Q[H.key]??"",onChange:ce=>St(H.key,ce.target.value),placeholder:"0"})]})},H.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{L(!1),oe(Ue?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:ge,disabled:h,children:h?"Saving...":"Save"})]})]}),V&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),M(Ne)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),Po.map(H=>{const ce=Ue?.bodyMetrics?.[H.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:H.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ce!=null?`${ce} ${H.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",H.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:F[H.key]?.targetValue??"",onChange:j=>Qt(H.key,j.target.value),placeholder:"0"})]})})]},H.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),M(Ne)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Vt,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:t.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[He.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...He].reverse().map((H,ce)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ce*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:H.label}),a.jsx("span",{className:"pb-achievement-date",children:da(H.achievedMonth)})]})]},ce))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${Z?"active":""}`,onClick:()=>{P(!Z),!Z&&t.length>=2&&(xe(t[0].month),$e(t[t.length-1].month))},children:Z?"Back to Timeline":"Compare Months"})}),Z?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:G,onChange:H=>xe(H.target.value),children:t.map(H=>a.jsx("option",{value:H.month,children:da(H.month)},H.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:Ee,onChange:H=>$e(H.target.value),children:t.map(H=>a.jsx("option",{value:H.month,children:da(H.month)},H.month))})]})]}),_e&&ke&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Benchmarks"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:da(G).split(" ")[0]}),a.jsx("span",{children:da(Ee).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),ja.map(H=>{const ce=_e.benchmarks?.[H.key],j=ke.benchmarks?.[H.key],N=Dl(H,ce),K=Dl(H,j),re=Zp(K,N);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:H.name}),a.jsx("span",{className:"pb-compare-val",children:ce?H.unit==="time"?ud(ce.time):`${ce.weight}x${ce.reps}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:j?H.unit==="time"?ud(j.time):`${j.weight}x${j.reps}`:"-"}),a.jsx("span",{className:`pb-compare-change ${re!==null?re>=0?"positive":"negative":""}`,children:re!==null?`${re>=0?"+":""}${re.toFixed(1)}%`:"-"})]},H.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:da(G).split(" ")[0]}),a.jsx("span",{children:da(Ee).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),Po.map(H=>{const ce=_e.bodyMetrics?.[H.key],j=ke.bodyMetrics?.[H.key],N=ce!=null&&j!=null?parseFloat((j-ce).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:H.name}),a.jsx("span",{className:"pb-compare-val",children:ce!=null?`${ce}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:j!=null?`${j}`:"-"}),a.jsx("span",{className:`pb-compare-change ${N!==null?N>0?"positive":N<0?"negative":"neutral":""}`,children:N!==null?`${N>0?"+":""}${N} ${H.suffix}`:"-"})]},H.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...t].reverse().map((H,ce)=>{const j=t.find(N=>N.month<H.month&&t.indexOf(N)===t.indexOf(H)-1)||t.filter(N=>N.month<H.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ce*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:da(H.month)}),H.benchmarks&&Object.keys(H.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Benchmarks"}),ja.map(N=>{const K=H.benchmarks[N.key];if(!K)return null;const re=j?.benchmarks?.[N.key],Ke=Dl(N,K),qe=Dl(N,re),ze=Zp(Ke,qe);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:N.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:N.unit==="time"?ud(K.time):j2(K.weight,K.reps)}),ze!==null&&a.jsxs("span",{className:`pb-timeline-change ${ze>=0?"positive":"negative"}`,children:[ze>=0?"+":"",ze.toFixed(1),"%"]})]})]},N.key)})]}),H.bodyMetrics&&Object.keys(H.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),Po.map(N=>{const K=H.bodyMetrics[N.key];if(K==null)return null;const re=j?.bodyMetrics?.[N.key],Ke=re!=null?parseFloat((K-re).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:N.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[K," ",N.suffix]}),Ke!==null&&a.jsxs("span",{className:`pb-timeline-change ${Ke>0?"positive":Ke<0?"negative":"neutral"}`,children:[Ke>0?"+":"",Ke," ",N.suffix]})]})]},N.key)})]})]})]},H.id)})})]})})]})]}),q&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>me(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:q.length===1?"Target Achieved!":`${q.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:q.map((H,ce)=>a.jsx("div",{className:"pb-celebration-badge",children:H.label},ce))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Pe&&a.jsxs("div",{className:`toast-notification ${Pe.type}`,children:[a.jsx("span",{className:"toast-icon",children:Pe.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Pe.message}),a.jsx("button",{className:"toast-close",onClick:()=>We(null),children:""})]}),mn&&a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>Wt("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Wt("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>Wt("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),Et?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>Wt("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]}),an&&a.jsx(La,{active:"progress"})]})}const ZD=v.lazy(()=>vr(()=>import("./Dashboard-BpcPGfBg.js"),__vite__mapDeps([0,1]))),eP=v.lazy(()=>vr(()=>import("./AddClient-CoWmTtoP.js"),__vite__mapDeps([2,3]))),tP=v.lazy(()=>vr(()=>import("./ClientDashboard-CI_-LotV.js"),[])),nP=v.lazy(()=>vr(()=>import("./ClientForms-K61mix_j.js"),__vite__mapDeps([4,5]))),sP=v.lazy(()=>vr(()=>import("./ClientTools-Dpyv83eX.js"),__vite__mapDeps([6,7]))),rP=v.lazy(()=>vr(()=>import("./MacroCalculator-DmKSJB03.js"),__vite__mapDeps([8,7]))),aP=v.lazy(()=>vr(()=>import("./ProteinSnacks-DOpnQyAZ.js"),__vite__mapDeps([9,7]))),iP=v.lazy(()=>vr(()=>import("./DailyMotivation-D_WPt9VN.js"),__vite__mapDeps([10,7]))),oP=v.lazy(()=>vr(()=>import("./CircuitDashboard-Cca8eyVl.js"),__vite__mapDeps([11,12]))),lP=v.lazy(()=>vr(()=>import("./CircuitBooking-BzL5aOSP.js"),__vite__mapDeps([13,14,12]))),cP=v.lazy(()=>vr(()=>import("./Leaderboard-C8Gy5lLV.js"),__vite__mapDeps([15,16]))),uP=v.lazy(()=>vr(()=>import("./UpgradePage-Zs051AEr.js"),__vite__mapDeps([17,18,19]))),hP=v.lazy(()=>vr(()=>import("./SignUp-BtsF4jSD.js"),[])),dP=v.lazy(()=>vr(()=>import("./Onboarding-DcjpGNvB.js"),__vite__mapDeps([20,18,21])));function fP({children:s}){const{pathname:e}=ba();return v.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),v.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function mP(){const s=nr();return v.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function pP(){return a.jsx(L3,{children:a.jsx(P3,{children:a.jsx(U3,{children:a.jsxs(HE,{basename:"/login",children:[a.jsx(mP,{}),a.jsx(fP,{children:a.jsx(v.Suspense,{fallback:null,children:a.jsxs(vE,{children:[a.jsx(ns,{path:"/",element:a.jsx(F3,{})}),a.jsx(ns,{path:"/dashboard",element:a.jsx(ZD,{})}),a.jsx(ns,{path:"/add-client",element:a.jsx(eP,{})}),a.jsx(ns,{path:"/client",element:a.jsx(tP,{})}),a.jsx(ns,{path:"/client/forms",element:a.jsx(nP,{})}),a.jsx(ns,{path:"/client/tools",element:a.jsx(sP,{})}),a.jsx(ns,{path:"/client/tools/macros",element:a.jsx(rP,{})}),a.jsx(ns,{path:"/client/tools/snacks",element:a.jsx(aP,{})}),a.jsx(ns,{path:"/client/tools/motivation",element:a.jsx(iP,{})}),a.jsx(ns,{path:"/client/personal-bests",element:a.jsx(Mo,{feature:"personalBests",children:a.jsx(JD,{})})}),a.jsx(ns,{path:"/client/circuit",element:a.jsx(oP,{})}),a.jsx(ns,{path:"/client/circuit/booking",element:a.jsx(lP,{})}),a.jsx(ns,{path:"/client/core-buddy",element:a.jsx(hD,{})}),a.jsx(ns,{path:"/client/core-buddy/nutrition",element:a.jsx(Mo,{feature:"nutrition",children:a.jsx(mD,{})})}),a.jsx(ns,{path:"/client/core-buddy/workouts",element:a.jsx(jD,{})}),a.jsx(ns,{path:"/client/core-buddy/programmes",element:a.jsx(Mo,{feature:"programmes",children:a.jsx(RD,{})})}),a.jsx(ns,{path:"/client/core-buddy/achievements",element:a.jsx(Mo,{feature:"achievements",children:a.jsx(LD,{})})}),a.jsx(ns,{path:"/client/core-buddy/consistency",element:a.jsx(Mo,{feature:"consistency",children:a.jsx(BD,{})})}),a.jsx(ns,{path:"/client/core-buddy/buddies",element:a.jsx(Mo,{feature:"buddies",children:a.jsx(UD,{})})}),a.jsx(ns,{path:"/client/core-buddy/profile/:userId",element:a.jsx(HD,{})}),a.jsx(ns,{path:"/client/leaderboard",element:a.jsx(Mo,{feature:"leaderboard",children:a.jsx(cP,{})})}),a.jsx(ns,{path:"/signup",element:a.jsx(hP,{})}),a.jsx(ns,{path:"/onboarding",element:a.jsx(dP,{})}),a.jsx(ns,{path:"/upgrade",element:a.jsx(uP,{})}),a.jsx(ns,{path:"*",element:a.jsx(yE,{to:"/",replace:!0})})]})})})]})})})})}bj.createRoot(document.getElementById("root")).render(a.jsx(v.StrictMode,{children:a.jsx(pP,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{La as C,yt as T,ci as a,pr as b,Bt as c,be as d,Ge as e,LC as f,jn as g,zC as h,Hn as i,a as j,In as k,Fr as l,Va as m,nr as n,Hd as o,Yy as p,Nn as q,v as r,yP as s,xf as t,si as u,z3 as v,un as w,YE as x,ta as y};
