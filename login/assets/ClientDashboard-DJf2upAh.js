import{r as i,l as rs,m as ds,n as hs,g,q as V,c as j,d as m,w as F,k as ms,e as de,j as e,p as us,b as xs,a as ps,T as js,u as vs}from"./index-CbZ8fTij.js";import{f as b,e as gs,d as Ns}from"./scheduleUtils-a2tn0x12.js";function bs(){const[L,he]=i.useState([]),[We,qe]=i.useState([]),[me,ze]=i.useState([]),[$e,Ee]=i.useState([]),[Ae,Ie]=i.useState([]),[Q,ue]=i.useState([]),[z,Pe]=i.useState(!0),[X,xe]=i.useState(null),[pe,je]=i.useState(!1),[h,ve]=i.useState(null),[k,O]=i.useState(null),[$,E]=i.useState(null),[ge,G]=i.useState([]),[Ne,fe]=i.useState(!1),[Ye,He]=i.useState([]),[M,K]=i.useState(null),[T,U]=i.useState(0),[_,Ve]=i.useState(!1),ye=i.useRef(0),B=i.useRef(!1),[we,R]=i.useState(null),[S,Z]=i.useState(null),[W,Fe]=i.useState([]),[be,Qe]=i.useState(!1),[p,J]=i.useState(null),[ee,se]=i.useState(null),[C,Xe]=i.useState([]),[v,te]=i.useState(null),Oe=i.useRef(null),{currentUser:ne,isClient:ae,clientData:c,logout:Ge,loading:ie}=rs(),{isDark:ke,toggleTheme:Ke}=ds(),u=hs(),A=i.useCallback((s,t="info")=>{K({message:s,type:t}),setTimeout(()=>K(null),4e3)},[]),D=s=>{const t=s.currentTarget,l=t.querySelector(".ripple");l&&l.remove();const a=document.createElement("span"),o=Math.max(t.clientWidth,t.clientHeight),d=o/2,r=t.getBoundingClientRect();a.style.width=a.style.height=`${o}px`,a.style.left=`${s.clientX-r.left-d}px`,a.style.top=`${s.clientY-r.top-d}px`,a.classList.add("ripple"),t.appendChild(a),setTimeout(()=>a.remove(),600)};i.useEffect(()=>{const s=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,t=o=>{s()<=0&&(ye.current=o.touches[0].clientY,B.current=!1)},l=o=>{const d=s(),x=o.touches[0].clientY-ye.current;if(d>5||x<=0){B.current=!1,U(0);return}x>20&&d<=0&&(B.current=!0,U(Math.min((x-20)*.4,80)))},a=()=>{B.current&&T>60?(Ve(!0),setTimeout(()=>{window.location.reload()},300)):U(0),B.current=!1};return document.addEventListener("touchstart",t,{passive:!0}),document.addEventListener("touchmove",l,{passive:!0}),document.addEventListener("touchend",a),()=>{document.removeEventListener("touchstart",t),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",a)}},[T]);const Ue=(s,t)=>{const l=s.touches[0];s.currentTarget.dataset.startX=l.clientX,s.currentTarget.dataset.startY=l.clientY},_e=(s,t)=>{const l=s.touches[0],a=parseFloat(s.currentTarget.dataset.startX),o=parseFloat(s.currentTarget.dataset.startY),d=l.clientX-a,r=l.clientY-o;Math.abs(d)>Math.abs(r)&&Math.abs(d)>10&&(s.preventDefault(),d<-50?R(t):d>50&&R(null))};i.useEffect(()=>{!ie&&(!ne||!ae)&&u("/")},[ne,ae,ie,u]),i.useEffect(()=>{if(c){if(c.dailyQuote){const s=new Date().toISOString().split("T")[0];c.dailyQuote.date===s&&se(c.dailyQuote)}Se()}},[c]),i.useEffect(()=>{if(!z&&c){const s=setTimeout(()=>Qe(!0),300);return()=>clearTimeout(s)}},[z,c]),i.useEffect(()=>{const s=()=>{const l=le();if(l.length===0){J(null);return}const a=l[0],o=new Date,r=new Date(a.date+"T"+a.time)-o;if(r<=0){J(null);return}const x=Math.floor(r/(1e3*60*60*24)),re=Math.floor(r%(1e3*60*60*24)/(1e3*60*60)),Y=Math.floor(r%(1e3*60*60)/(1e3*60)),H=Math.floor(r%(1e3*60)/1e3);J({days:x,hours:re,minutes:Y,seconds:H,session:a})};s();const t=setInterval(s,1e3);return()=>clearInterval(t)},[L,z]);const Se=async()=>{try{const[s,t,l,a,o,d,r,x,re]=await Promise.all([g(V(j(m,"sessions"),F("clientId","==",c.id))),g(j(m,"sessions")),g(j(m,"holidays")),g(j(m,"blockedTimes")),g(j(m,"openedSlots")),g(V(j(m,"rescheduleRequests"),F("clientId","==",c.id))),g(V(j(m,"achievements"),F("clientId","==",c.id))),ms(de(m,"clients",c.id)),g(V(j(m,"sessionNotes"),F("clientId","==",c.id)))]),Y=s.docs.map(n=>({id:n.id,...n.data()}));Y.sort((n,w)=>n.date!==w.date?n.date.localeCompare(w.date):n.time.localeCompare(w.time)),he(Y),qe(t.docs.map(n=>({id:n.id,...n.data()}))),ze(l.docs.map(n=>({id:n.id,...n.data()}))),Ee(a.docs.map(n=>({id:n.id,...n.data()}))),Ie(o.docs.map(n=>({id:n.id,...n.data()})));const H=d.docs.map(n=>({id:n.id,...n.data()}));He(H.filter(n=>n.status==="pending"));const cs=H.filter(n=>{if(n.status==="pending"||!n.respondedAt)return!1;const w=n.respondedAt.toDate?n.respondedAt.toDate():new Date(n.respondedAt),q=new Date;return q.setDate(q.getDate()-7),w>q&&!n.dismissed});if(ue(cs),!r.empty){const n=r.docs[0].data().badges||[];Fe(n)}const os=new Date().toISOString().split("T")[0];if(x.exists()){const n=x.data();n.dailyQuote&&n.dailyQuote.date===os?se(n.dailyQuote):se(null)}const Re=re.docs.map(n=>({id:n.id,...n.data()}));Re.sort((n,w)=>{const q=n.createdAt?.toMillis?.()||0;return(w.createdAt?.toMillis?.()||0)-q}),Xe(Re)}catch(s){console.error("Error fetching data:",s)}Pe(!1)},N=s=>new Date(s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),f=s=>{const[t,l]=s.split(":"),a=parseInt(t),o=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${l}${o}`},Ce=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",I=s=>{const t=new Date,l=b(t),a=`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`;return s.date<l||s.date===l&&s.time<a},De=s=>{const l=b(new Date);return s.date===l&&!I(s)},Ze=()=>L.filter(s=>I(s)).length,le=()=>L.filter(s=>!I(s)),Le=s=>{Z({title:"Cancel Session?",message:`Cancel your session on ${N(s.date)} at ${f(s.time)}? This cannot be undone.`,onConfirm:async()=>{Z(null),xe(s.id),R(null);try{await xs(de(m,"sessions",s.id)),he(L.filter(t=>t.id!==s.id)),A("Session cancelled","success")}catch(t){console.error("Error cancelling session:",t),A("Failed to cancel session. Please try again.","error")}xe(null)},onCancel:()=>Z(null)})},Je=async()=>{try{await Ge(),u("/")}catch(s){console.error("Failed to log out:",s)}},ce=s=>Ye.some(t=>t.sessionId===s),Me=s=>{ve(s),O(null),E(null),G([]),je(!0)},P=()=>{je(!1),ve(null),O(null),E(null),G([])},es=()=>c.endDate?c.endDate.toDate?c.endDate.toDate():new Date(c.endDate):new Date,ss=()=>{const s=[],t=new Date,l=es(),a=new Date(t);for(a.setDate(a.getDate()+1);a<=l;){if(gs(a)){const o=b(a);me.some(r=>r.date===o)||s.push(new Date(a))}a.setDate(a.getDate()+1)}return s},ts=s=>{O(s),E(null);const t=h?.duration||c.sessionDuration||45;let l=Ns(s,t,We,me,h?.id,$e,Ae);h&&b(s)===h.date&&(l=l.filter(a=>a.time!==h.time)),G(l)},ns=async()=>{if(!(!k||!$||!h)){fe(!0);try{await ps(j(m,"rescheduleRequests"),{sessionId:h.id,clientId:c.id,clientName:c.name,originalDate:h.date,originalTime:h.time,requestedDate:b(k),requestedTime:$,duration:h.duration,status:"pending",createdAt:js.now(),respondedAt:null,dismissed:!1}),P(),A("Reschedule request submitted! You'll be notified when your trainer responds.","success"),Se()}catch(s){console.error("Error submitting reschedule request:",s),A("Failed to submit request. Please try again.","error")}fe(!1)}},as=async s=>{try{await vs(de(m,"rescheduleRequests",s),{dismissed:!0}),ue(Q.filter(t=>t.id!==s))}catch(t){console.error("Error dismissing notification:",t)}},is=()=>{const s=le();if(s.length===0)return null;const t=s[0],l=new Date,o=new Date(t.date+"T"+t.time)-l;if(o<=0)return null;const d=Math.floor(o/(1e3*60*60*24)),r=Math.floor(o%(1e3*60*60*24)/(1e3*60*60)),x=Math.floor(o%(1e3*60*60)/(1e3*60));return{days:d,hours:r,minutes:x,session:t}};if(ie||z)return e.jsxs("div",{className:"client-dashboard",children:[e.jsx("header",{className:"client-header",children:e.jsx("div",{className:"header-content",children:e.jsx("div",{className:"skeleton skeleton-logo"})})}),e.jsxs("main",{className:"client-main",children:[e.jsxs("div",{className:"skeleton-welcome",children:[e.jsx("div",{className:"skeleton skeleton-title"}),e.jsx("div",{className:"skeleton skeleton-btn-small"})]}),e.jsxs("div",{className:"skeleton-actions",children:[e.jsx("div",{className:"skeleton skeleton-btn"}),e.jsx("div",{className:"skeleton skeleton-btn"})]}),e.jsx("div",{className:"skeleton skeleton-card-large"}),e.jsx("div",{className:"skeleton skeleton-card-medium"}),e.jsx("div",{className:"skeleton skeleton-card-medium"})]})]});if(!ne||!ae||!c)return null;const y=Ze(),ls=c.totalSessions-y,oe=le(),Te=pe?ss():[];is();const Be=c.totalSessions>0?y/c.totalSessions*100:0;return e.jsxs("div",{className:"client-dashboard",children:[T>0&&e.jsxs("div",{className:"pull-indicator",style:{height:T},children:[e.jsx("div",{className:`pull-spinner ${_?"spinning":""}`,children:_?"↻":"↓"}),e.jsx("span",{children:_?"Refreshing...":T>60?"Release to refresh":"Pull to refresh"})]}),e.jsx("header",{className:"client-header",children:e.jsxs("div",{className:"header-content",children:[e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),e.jsx("div",{className:"header-actions"})]})}),e.jsxs("main",{className:"client-main page-transition-enter",children:[e.jsxs("div",{className:"welcome-section",children:[e.jsxs("h2",{children:["Welcome, ",c.name.split(" ")[0]]}),e.jsxs("div",{className:"welcome-actions",children:[e.jsx("button",{className:"theme-toggle",onClick:Ke,"aria-label":ke?"Switch to light mode":"Switch to dark mode",children:ke?e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),e.jsx("button",{className:"logout-btn",onClick:Je,children:"Log Out"})]})]}),Q.length>0&&e.jsx("div",{className:"notifications-section",children:Q.map(s=>e.jsxs("div",{className:`notification ${s.status}`,children:[e.jsxs("div",{className:"notification-content",children:[e.jsx("span",{className:"notification-icon",children:s.status==="approved"?"✓":"✗"}),e.jsxs("div",{className:"notification-text",children:[e.jsx("strong",{children:s.status==="approved"?"Reschedule Approved!":"Reschedule Declined"}),e.jsx("p",{children:s.status==="approved"?`Your session has been moved to ${N(s.requestedDate)} at ${f(s.requestedTime)}`:`Your request to reschedule from ${N(s.originalDate)} was declined. Please contact your trainer.`})]})]}),e.jsx("button",{className:"dismiss-btn",onClick:()=>as(s.id),children:"✕"})]},s.id))}),p&&e.jsxs("div",{className:"ring-timer-container",children:[e.jsxs("div",{className:"ring-timer",children:[e.jsx("svg",{className:"ring-timer-svg",viewBox:"0 0 200 200",children:us.map((s,t)=>{const a=60-p.seconds,o=t<a;return e.jsx("line",{x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,className:`ring-tick ${o?"elapsed":"remaining"}`,strokeWidth:s.thick?"3":"2"},t)})}),e.jsxs("div",{className:"ring-timer-center",children:[e.jsx("div",{className:"ring-timer-logo",children:e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness"})}),e.jsxs("div",{className:"ring-timer-countdown",children:[p.days>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"timer-digit",children:String(p.days).padStart(2,"0")}),e.jsx("span",{className:"timer-colon",children:":"})]}),e.jsx("span",{className:"timer-digit",children:String(p.hours).padStart(2,"0")}),e.jsx("span",{className:"timer-colon",children:":"}),e.jsx("span",{className:"timer-digit",children:String(p.minutes).padStart(2,"0")}),e.jsx("span",{className:"timer-colon",children:":"}),e.jsx("span",{className:"timer-digit timer-seconds",children:String(p.seconds).padStart(2,"0")})]}),e.jsx("div",{className:"ring-timer-label",children:"until next session"})]})]}),e.jsxs("div",{className:"ring-timer-session-info",children:[N(p.session.date)," at ",f(p.session.time)]})]}),e.jsxs("div",{className:"block-info-card",children:[e.jsx("div",{className:"block-header-row",children:e.jsx("h3",{children:"Your Training Block"})}),e.jsxs("div",{className:"progress-section",children:[e.jsxs("div",{className:"progress-ring-container",children:[e.jsxs("svg",{className:"progress-ring",viewBox:"0 0 100 100",children:[e.jsx("circle",{className:"progress-ring-bg",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8"}),e.jsx("circle",{className:`progress-ring-fill ${be?"animate":""}`,cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:be?`${2*Math.PI*42*(1-Be/100)}`:`${2*Math.PI*42}`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"progress-ring-text",children:[e.jsxs("span",{className:"progress-percent",children:[Math.round(Be),"%"]}),e.jsx("span",{className:"progress-label",children:"complete"})]})]}),e.jsxs("div",{className:"progress-stats",children:[e.jsxs("div",{className:"progress-stat",children:[e.jsx("span",{className:"progress-stat-value",children:y}),e.jsx("span",{className:"progress-stat-label",children:"Completed"})]}),e.jsxs("div",{className:"progress-stat",children:[e.jsx("span",{className:"progress-stat-value",children:ls}),e.jsx("span",{className:"progress-stat-label",children:"Remaining"})]}),e.jsxs("div",{className:"progress-stat",children:[e.jsx("span",{className:"progress-stat-value",children:c.totalSessions}),e.jsx("span",{className:"progress-stat-label",children:"Total"})]})]})]}),e.jsxs("div",{className:"block-dates",children:[e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"date-label",children:"Start Date"}),e.jsx("span",{className:"date-value",children:Ce(c.startDate)})]}),e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"date-label",children:"End Date"}),e.jsx("span",{className:"date-value",children:Ce(c.endDate)})]}),e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"date-label",children:"Session Duration"}),e.jsxs("span",{className:"date-value",children:[c.sessionDuration," minutes"]})]})]})]}),c?.coreBuddyAccess&&e.jsxs("div",{className:"core-buddy-cta",onClick:()=>u("/client/core-buddy"),children:[e.jsx("div",{className:"core-buddy-cta-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"})})}),e.jsxs("div",{className:"core-buddy-cta-text",children:[e.jsx("span",{className:"core-buddy-cta-title",children:"Core Buddy"}),e.jsx("span",{className:"core-buddy-cta-sub",children:"Workouts, nutrition & habits"})]}),e.jsx("svg",{className:"core-buddy-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),C.length>0&&e.jsxs("div",{className:"session-notes-card",ref:Oe,children:[e.jsxs("div",{className:"session-notes-header",children:[e.jsxs("div",{className:"session-notes-title",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),e.jsx("span",{children:"Session Notes"})]}),e.jsx("span",{className:"session-notes-count",children:C.length})]}),e.jsx("div",{className:"session-notes-list",children:C.slice(0,v==="show-all"?void 0:3).map((s,t)=>e.jsxs("div",{className:`session-note-item ${v===s.id?"expanded":""}`,onClick:()=>te(v===s.id?null:s.id),children:[e.jsxs("div",{className:"session-note-top",children:[e.jsx("span",{className:"session-note-date",children:s.date}),e.jsx("svg",{className:`session-note-chevron ${v===s.id?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),s.sessionNotes&&e.jsx("p",{className:"session-note-preview",children:v===s.id?s.sessionNotes:s.sessionNotes.length>80?s.sessionNotes.slice(0,80)+"...":s.sessionNotes}),v===s.id&&e.jsxs("div",{className:"session-note-details",children:[s.whatWentWell&&e.jsxs("div",{className:"session-note-section went-well",children:[e.jsx("span",{className:"session-note-label",children:"What Went Well"}),e.jsx("p",{children:s.whatWentWell})]}),s.whatWentWrong&&e.jsxs("div",{className:"session-note-section went-wrong",children:[e.jsx("span",{className:"session-note-label",children:"What Went Wrong"}),e.jsx("p",{children:s.whatWentWrong})]}),s.whatsNext&&e.jsxs("div",{className:"session-note-section whats-next",children:[e.jsx("span",{className:"session-note-label",children:"What's Next"}),e.jsx("p",{children:s.whatsNext})]})]})]},s.id))}),C.length>3&&v===null&&e.jsxs("button",{className:"session-notes-viewall",onClick:()=>te("show-all"),children:["View all ",C.length," notes",e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),v==="show-all"&&C.length>3&&e.jsxs("button",{className:"session-notes-viewall",onClick:()=>te(null),children:["Show less",e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",style:{transform:"rotate(180deg)"},children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),W.length>0&&e.jsxs("div",{className:"achievements-card",children:[e.jsxs("div",{className:"achievements-card-header",children:[e.jsxs("div",{className:"achievements-card-title",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),e.jsx("span",{children:"Targets Achieved"})]}),e.jsx("span",{className:"achievements-card-count",children:W.length})]}),e.jsx("div",{className:"achievements-card-list",children:[...W].reverse().slice(0,3).map((s,t)=>e.jsxs("div",{className:"achievements-card-item",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),e.jsx("span",{className:"achievements-card-label",children:s.label}),e.jsx("span",{className:"achievements-card-date",children:s.achievedMonth})]},t))}),W.length>3&&e.jsxs("button",{className:"achievements-card-viewall",onClick:()=>u("/client/personal-bests"),children:["View all ",W.length," achievements",e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),ee?e.jsxs("div",{className:"daily-quote-card",children:[e.jsx("div",{className:"daily-quote-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),e.jsxs("div",{className:"daily-quote-content",children:[e.jsx("div",{className:"daily-quote-label",children:"Daily Motivation"}),e.jsx("div",{className:"daily-quote-text",children:ee.text}),e.jsxs("div",{className:"daily-quote-author",children:["— ",ee.author]}),e.jsxs("div",{className:"daily-quote-lock",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"12",height:"12",children:e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"})}),"New quote at midnight"]})]})]}):e.jsxs("div",{className:"daily-quote-cta",onClick:()=>u("/client/tools/motivation"),children:[e.jsx("div",{className:"daily-quote-cta-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),e.jsxs("div",{className:"daily-quote-cta-text",children:[e.jsx("span",{className:"daily-quote-cta-title",children:"Daily Motivation"}),e.jsx("span",{className:"daily-quote-cta-sub",children:"Tap to get today's inspiration"})]}),e.jsx("svg",{className:"daily-quote-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),e.jsxs("div",{className:"sessions-section",children:[e.jsxs("h3",{children:["Upcoming Sessions (",oe.length,")"]}),oe.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),e.jsx("line",{x1:"20",y1:"35",x2:"80",y2:"35"}),e.jsx("line",{x1:"35",y1:"15",x2:"35",y2:"35"}),e.jsx("line",{x1:"65",y1:"15",x2:"65",y2:"35"}),e.jsx("circle",{cx:"40",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),e.jsx("circle",{cx:"60",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),e.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"}),e.jsx("circle",{cx:"60",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"})]})}),e.jsx("h4",{children:"No upcoming sessions"}),e.jsx("p",{children:"Contact your trainer to book sessions"})]}):e.jsx("div",{className:"sessions-list",children:oe.map(s=>e.jsxs("div",{className:`session-card-wrapper ${we===s.id?"swiped":""}`,onTouchStart:t=>Ue(t,s.id),onTouchMove:t=>_e(t,s.id),children:[e.jsxs("div",{className:"session-card-swipe-actions",children:[e.jsx("button",{className:"swipe-action-btn reschedule ripple-btn",onClick:t=>{D(t),R(null),Me(s)},disabled:ce(s.id),children:"Reschedule"}),e.jsx("button",{className:"swipe-action-btn cancel ripple-btn",onClick:t=>{D(t),Le(s)},disabled:X===s.id,children:"Cancel"})]}),e.jsxs("div",{className:`session-card ${De(s)?"today-session":""}`,onClick:()=>we===s.id&&R(null),children:[e.jsxs("div",{className:"session-info",children:[e.jsxs("div",{className:"session-date",children:[De(s)&&e.jsx("span",{className:"today-label",children:"Today - "}),N(s.date)]}),e.jsxs("div",{className:"session-time",children:[f(s.time)," (",s.duration," min)"]}),ce(s.id)&&e.jsx("div",{className:"pending-badge",children:"Reschedule pending"})]}),e.jsxs("div",{className:"session-actions",children:[e.jsx("button",{className:"reschedule-btn ripple-btn",onClick:t=>{t.stopPropagation(),D(t),Me(s)},disabled:ce(s.id),children:"Reschedule"}),e.jsx("button",{className:"cancel-btn ripple-btn",onClick:t=>{t.stopPropagation(),D(t),Le(s)},disabled:X===s.id,children:X===s.id?"Cancelling...":"Cancel"})]}),e.jsxs("div",{className:"swipe-hint",children:[e.jsx("span",{className:"swipe-hint-text",children:"Swipe"}),e.jsxs("span",{className:"swipe-hint-chevrons",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})]})]})]})]},s.id))})]}),e.jsxs("div",{className:"completed-section",children:[e.jsxs("h3",{children:["Completed Sessions (",y,")"]}),y===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"50",cy:"50",r:"35"}),e.jsx("path",{d:"M35 50 L45 60 L65 40",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),e.jsx("path",{d:"M50 25 L50 50 L65 55",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h4",{children:"No completed sessions yet"}),e.jsx("p",{children:"Your completed sessions will appear here"})]}):e.jsxs("div",{className:"sessions-list completed",children:[L.filter(s=>I(s)).slice(-5).reverse().map(s=>e.jsxs("div",{className:"session-card completed",children:[e.jsxs("div",{className:"session-info",children:[e.jsx("div",{className:"session-date",children:N(s.date)}),e.jsx("div",{className:"session-time",children:f(s.time)})]}),e.jsx("span",{className:"completed-badge",children:"Completed"})]},s.id)),y>5&&e.jsxs("div",{className:"more-sessions",children:["And ",y-5," more completed sessions"]})]})]})]}),pe&&h&&e.jsx("div",{className:"modal-overlay",onClick:P,children:e.jsxs("div",{className:"reschedule-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Reschedule Session"}),e.jsx("button",{className:"close-modal-btn",onClick:P,children:"✕"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"current-session-info",children:e.jsxs("p",{children:["Current: ",e.jsx("strong",{children:N(h.date)})," at ",e.jsx("strong",{children:f(h.time)})]})}),e.jsxs("div",{className:"date-selection",children:[e.jsx("h4",{children:"Select New Date"}),Te.length===0?e.jsx("p",{className:"no-dates",children:"No available dates within your training block"}):e.jsx("div",{className:"dates-grid",children:Te.map((s,t)=>e.jsxs("button",{className:`date-btn ${k&&b(k)===b(s)?"selected":""}`,onClick:()=>ts(s),children:[e.jsx("span",{className:"date-day",children:s.toLocaleDateString("en-GB",{weekday:"short"})}),e.jsx("span",{className:"date-num",children:s.getDate()}),e.jsx("span",{className:"date-month",children:s.toLocaleDateString("en-GB",{month:"short"})})]},t))})]}),k&&e.jsxs("div",{className:"time-selection",children:[e.jsx("h4",{children:"Select Time"}),ge.length===0?e.jsx("p",{className:"no-slots",children:"No available slots on this date"}):e.jsx("div",{className:"times-grid",children:ge.map((s,t)=>e.jsx("button",{className:`time-btn ${$===s.time?"selected":""} ${s.period}`,onClick:()=>E(s.time),children:f(s.time)},t))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-modal-btn",onClick:P,children:"Cancel"}),e.jsx("button",{className:"submit-reschedule-btn",onClick:ns,disabled:!k||!$||Ne,children:Ne?"Submitting...":"Request Reschedule"})]})]})}),M&&e.jsxs("div",{className:`toast-notification ${M.type}`,children:[e.jsx("span",{className:"toast-icon",children:M.type==="success"?e.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):M.type==="error"?e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),e.jsx("span",{className:"toast-message",children:M.message}),e.jsx("button",{className:"toast-close",onClick:()=>K(null),children:"✕"})]}),S&&e.jsx("div",{className:"confirm-modal-overlay",onClick:S.onCancel,children:e.jsxs("div",{className:"confirm-modal",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{children:S.title}),e.jsx("p",{children:S.message}),e.jsxs("div",{className:"confirm-modal-actions",children:[e.jsx("button",{className:"confirm-cancel-btn ripple-btn",onClick:s=>{D(s),S.onCancel()},children:"Keep Session"}),e.jsx("button",{className:"confirm-btn ripple-btn",onClick:s=>{D(s),S.onConfirm()},children:"Yes, Cancel"})]})]})}),e.jsxs("nav",{className:"block-bottom-nav",children:[e.jsxs("button",{className:"block-nav-tab active",children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),e.jsx("span",{children:"Home"})]}),e.jsxs("button",{className:"block-nav-tab",onClick:()=>u("/client/forms"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),e.jsx("span",{children:"Forms"})]}),e.jsxs("button",{className:"block-nav-tab",onClick:()=>u("/client/tools"),children:[e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),e.jsx("span",{children:"Tools"})]}),e.jsxs("button",{className:"block-nav-tab",onClick:()=>u("/client/personal-bests"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 20V10"}),e.jsx("path",{d:"M18 20V4"}),e.jsx("path",{d:"M6 20v-4"})]}),e.jsx("span",{children:"PBs"})]}),c?.circuitAccess&&e.jsxs("button",{className:"block-nav-tab",onClick:()=>u("/client/circuit"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 6v6l4 2"})]}),e.jsx("span",{children:"Circuit"})]})]})]})}export{bs as default};
