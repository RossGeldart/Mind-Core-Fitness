const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-QS1zuJ3H.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-DLDwvdfj.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-CNcS8oay.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-DGHfi9a8.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-BUrtn36m.js","assets/ProteinSnacks-DDMon3Om.js","assets/DailyMotivation-CE3hhY4d.js","assets/CircuitDashboard-DOb7mlK0.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-yOVOtMQl.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-DGcUQ6vX.js","assets/Leaderboard-lyZEtGxw.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var dp={exports:{}},Lc={};var u1;function sE(){if(u1)return Lc;u1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:h,ref:l!==void 0?l:null,props:u}}return Lc.Fragment=e,Lc.jsx=n,Lc.jsxs=n,Lc}var h1;function rE(){return h1||(h1=1,dp.exports=sE()),dp.exports}var a=rE(),fp={exports:{}},Ht={};var d1;function aE(){if(d1)return Ht;d1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.iterator;function O(P){return P===null||typeof P!="object"?null:(P=j&&P[j]||P["@@iterator"],typeof P=="function"?P:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,V={};function te(P,W,pe){this.props=P,this.context=W,this.refs=V,this.updater=pe||K}te.prototype.isReactComponent={},te.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},te.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function X(){}X.prototype=te.prototype;function fe(P,W,pe){this.props=P,this.context=W,this.refs=V,this.updater=pe||K}var je=fe.prototype=new X;je.constructor=fe,U(je,te.prototype),je.isPureReactComponent=!0;var Ue=Array.isArray;function Oe(){}var A={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function R(P,W,pe){var Ne=pe.ref;return{$$typeof:s,type:P,key:W,ref:Ne!==void 0?Ne:null,props:pe}}function L(P,W){return R(P.type,W,P.props)}function D(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function z(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(pe){return W[pe]})}var I=/\/+/g;function Fe(P,W){return typeof P=="object"&&P!==null&&P.key!=null?z(""+P.key):W.toString(36)}function xt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Oe,Oe):(P.status="pending",P.then(function(W){P.status==="pending"&&(P.status="fulfilled",P.value=W)},function(W){P.status==="pending"&&(P.status="rejected",P.reason=W)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Y(P,W,pe,Ne,Be){var _e=typeof P;(_e==="undefined"||_e==="boolean")&&(P=null);var et=!1;if(P===null)et=!0;else switch(_e){case"bigint":case"string":case"number":et=!0;break;case"object":switch(P.$$typeof){case s:case e:et=!0;break;case x:return et=P._init,Y(et(P._payload),W,pe,Ne,Be)}}if(et)return Be=Be(P),et=Ne===""?"."+Fe(P,0):Ne,Ue(Be)?(pe="",et!=null&&(pe=et.replace(I,"$&/")+"/"),Y(Be,W,pe,"",function(Ft){return Ft})):Be!=null&&(D(Be)&&(Be=L(Be,pe+(Be.key==null||P&&P.key===Be.key?"":(""+Be.key).replace(I,"$&/")+"/")+et)),W.push(Be)),1;et=0;var yt=Ne===""?".":Ne+":";if(Ue(P))for(var Je=0;Je<P.length;Je++)Ne=P[Je],_e=yt+Fe(Ne,Je),et+=Y(Ne,W,pe,_e,Be);else if(Je=O(P),typeof Je=="function")for(P=Je.call(P),Je=0;!(Ne=P.next()).done;)Ne=Ne.value,_e=yt+Fe(Ne,Je++),et+=Y(Ne,W,pe,_e,Be);else if(_e==="object"){if(typeof P.then=="function")return Y(xt(P),W,pe,Ne,Be);throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return et}function Se(P,W,pe){if(P==null)return P;var Ne=[],Be=0;return Y(P,Ne,"","",function(_e){return W.call(pe,_e,Be++)}),Ne}function Ve(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(pe){(P._status===0||P._status===-1)&&(P._status=1,P._result=pe)},function(pe){(P._status===0||P._status===-1)&&(P._status=2,P._result=pe)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var ht=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ae={map:Se,forEach:function(P,W,pe){Se(P,function(){W.apply(this,arguments)},pe)},count:function(P){var W=0;return Se(P,function(){W++}),W},toArray:function(P){return Se(P,function(W){return W})||[]},only:function(P){if(!D(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Ht.Activity=k,Ht.Children=ae,Ht.Component=te,Ht.Fragment=n,Ht.Profiler=l,Ht.PureComponent=fe,Ht.StrictMode=i,Ht.Suspense=g,Ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ht.__COMPILER_RUNTIME={__proto__:null,c:function(P){return A.H.useMemoCache(P)}},Ht.cache=function(P){return function(){return P.apply(null,arguments)}},Ht.cacheSignal=function(){return null},Ht.cloneElement=function(P,W,pe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var Ne=U({},P.props),Be=P.key;if(W!=null)for(_e in W.key!==void 0&&(Be=""+W.key),W)!E.call(W,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&W.ref===void 0||(Ne[_e]=W[_e]);var _e=arguments.length-2;if(_e===1)Ne.children=pe;else if(1<_e){for(var et=Array(_e),yt=0;yt<_e;yt++)et[yt]=arguments[yt+2];Ne.children=et}return R(P.type,Be,Ne)},Ht.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Ht.createElement=function(P,W,pe){var Ne,Be={},_e=null;if(W!=null)for(Ne in W.key!==void 0&&(_e=""+W.key),W)E.call(W,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(Be[Ne]=W[Ne]);var et=arguments.length-2;if(et===1)Be.children=pe;else if(1<et){for(var yt=Array(et),Je=0;Je<et;Je++)yt[Je]=arguments[Je+2];Be.children=yt}if(P&&P.defaultProps)for(Ne in et=P.defaultProps,et)Be[Ne]===void 0&&(Be[Ne]=et[Ne]);return R(P,_e,Be)},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(P){return{$$typeof:p,render:P}},Ht.isValidElement=D,Ht.lazy=function(P){return{$$typeof:x,_payload:{_status:-1,_result:P},_init:Ve}},Ht.memo=function(P,W){return{$$typeof:y,type:P,compare:W===void 0?null:W}},Ht.startTransition=function(P){var W=A.T,pe={};A.T=pe;try{var Ne=P(),Be=A.S;Be!==null&&Be(pe,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(Oe,ht)}catch(_e){ht(_e)}finally{W!==null&&pe.types!==null&&(W.types=pe.types),A.T=W}},Ht.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ht.use=function(P){return A.H.use(P)},Ht.useActionState=function(P,W,pe){return A.H.useActionState(P,W,pe)},Ht.useCallback=function(P,W){return A.H.useCallback(P,W)},Ht.useContext=function(P){return A.H.useContext(P)},Ht.useDebugValue=function(){},Ht.useDeferredValue=function(P,W){return A.H.useDeferredValue(P,W)},Ht.useEffect=function(P,W){return A.H.useEffect(P,W)},Ht.useEffectEvent=function(P){return A.H.useEffectEvent(P)},Ht.useId=function(){return A.H.useId()},Ht.useImperativeHandle=function(P,W,pe){return A.H.useImperativeHandle(P,W,pe)},Ht.useInsertionEffect=function(P,W){return A.H.useInsertionEffect(P,W)},Ht.useLayoutEffect=function(P,W){return A.H.useLayoutEffect(P,W)},Ht.useMemo=function(P,W){return A.H.useMemo(P,W)},Ht.useOptimistic=function(P,W){return A.H.useOptimistic(P,W)},Ht.useReducer=function(P,W,pe){return A.H.useReducer(P,W,pe)},Ht.useRef=function(P){return A.H.useRef(P)},Ht.useState=function(P){return A.H.useState(P)},Ht.useSyncExternalStore=function(P,W,pe){return A.H.useSyncExternalStore(P,W,pe)},Ht.useTransition=function(){return A.H.useTransition()},Ht.version="19.2.4",Ht}var f1;function Tg(){return f1||(f1=1,fp.exports=aE()),fp.exports}var w=Tg(),mp={exports:{}},Oc={},pp={exports:{}},gp={};var m1;function iE(){return m1||(m1=1,(function(s){function e(Y,Se){var Ve=Y.length;Y.push(Se);e:for(;0<Ve;){var ht=Ve-1>>>1,ae=Y[ht];if(0<l(ae,Se))Y[ht]=Se,Y[Ve]=ae,Ve=ht;else break e}}function n(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var Se=Y[0],Ve=Y.pop();if(Ve!==Se){Y[0]=Ve;e:for(var ht=0,ae=Y.length,P=ae>>>1;ht<P;){var W=2*(ht+1)-1,pe=Y[W],Ne=W+1,Be=Y[Ne];if(0>l(pe,Ve))Ne<ae&&0>l(Be,pe)?(Y[ht]=Be,Y[Ne]=Ve,ht=Ne):(Y[ht]=pe,Y[W]=Ve,ht=W);else if(Ne<ae&&0>l(Be,Ve))Y[ht]=Be,Y[Ne]=Ve,ht=Ne;else break e}}return Se}function l(Y,Se){var Ve=Y.sortIndex-Se.sortIndex;return Ve!==0?Ve:Y.id-Se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],y=[],x=1,k=null,j=3,O=!1,K=!1,U=!1,V=!1,te=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function je(Y){for(var Se=n(y);Se!==null;){if(Se.callback===null)i(y);else if(Se.startTime<=Y)i(y),Se.sortIndex=Se.expirationTime,e(g,Se);else break;Se=n(y)}}function Ue(Y){if(U=!1,je(Y),!K)if(n(g)!==null)K=!0,Oe||(Oe=!0,z());else{var Se=n(y);Se!==null&&xt(Ue,Se.startTime-Y)}}var Oe=!1,A=-1,E=5,R=-1;function L(){return V?!0:!(s.unstable_now()-R<E)}function D(){if(V=!1,Oe){var Y=s.unstable_now();R=Y;var Se=!0;try{e:{K=!1,U&&(U=!1,X(A),A=-1),O=!0;var Ve=j;try{t:{for(je(Y),k=n(g);k!==null&&!(k.expirationTime>Y&&L());){var ht=k.callback;if(typeof ht=="function"){k.callback=null,j=k.priorityLevel;var ae=ht(k.expirationTime<=Y);if(Y=s.unstable_now(),typeof ae=="function"){k.callback=ae,je(Y),Se=!0;break t}k===n(g)&&i(g),je(Y)}else i(g);k=n(g)}if(k!==null)Se=!0;else{var P=n(y);P!==null&&xt(Ue,P.startTime-Y),Se=!1}}break e}finally{k=null,j=Ve,O=!1}Se=void 0}}finally{Se?z():Oe=!1}}}var z;if(typeof fe=="function")z=function(){fe(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Fe=I.port2;I.port1.onmessage=D,z=function(){Fe.postMessage(null)}}else z=function(){te(D,0)};function xt(Y,Se){A=te(function(){Y(s.unstable_now())},Se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return j},s.unstable_next=function(Y){switch(j){case 1:case 2:case 3:var Se=3;break;default:Se=j}var Ve=j;j=Se;try{return Y()}finally{j=Ve}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(Y,Se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Ve=j;j=Y;try{return Se()}finally{j=Ve}},s.unstable_scheduleCallback=function(Y,Se,Ve){var ht=s.unstable_now();switch(typeof Ve=="object"&&Ve!==null?(Ve=Ve.delay,Ve=typeof Ve=="number"&&0<Ve?ht+Ve:ht):Ve=ht,Y){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Ve+ae,Y={id:x++,callback:Se,priorityLevel:Y,startTime:Ve,expirationTime:ae,sortIndex:-1},Ve>ht?(Y.sortIndex=Ve,e(y,Y),n(g)===null&&Y===n(y)&&(U?(X(A),A=-1):U=!0,xt(Ue,Ve-ht))):(Y.sortIndex=ae,e(g,Y),K||O||(K=!0,Oe||(Oe=!0,z()))),Y},s.unstable_shouldYield=L,s.unstable_wrapCallback=function(Y){var Se=j;return function(){var Ve=j;j=Se;try{return Y.apply(this,arguments)}finally{j=Ve}}}})(gp)),gp}var p1;function oE(){return p1||(p1=1,pp.exports=iE()),pp.exports}var yp={exports:{}},Gs={};var g1;function lE(){if(g1)return Gs;g1=1;var s=Tg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,x){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:k==null?null:""+k,children:g,containerInfo:y,implementation:x}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Gs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Gs.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,x)},Gs.flushSync=function(g){var y=h.T,x=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=x,i.d.f()}},Gs.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Gs.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Gs.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,k=p(x,y.crossOrigin),j=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:k,integrity:j,fetchPriority:O}):x==="script"&&i.d.X(g,{crossOrigin:k,integrity:j,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Gs.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Gs.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,k=p(x,y.crossOrigin);i.d.L(g,x,{crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Gs.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Gs.requestFormReset=function(g){i.d.r(g)},Gs.unstable_batchedUpdates=function(g,y){return g(y)},Gs.useFormState=function(g,y,x){return h.H.useFormState(g,y,x)},Gs.useFormStatus=function(){return h.H.useHostTransitionStatus()},Gs.version="19.2.4",Gs}var y1;function cE(){if(y1)return yp.exports;y1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),yp.exports=lE(),yp.exports}var v1;function uE(){if(v1)return Oc;v1=1;var s=oE(),e=Tg(),n=cE();function i(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(i(188));return r!==t?null:t}for(var o=t,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var b=!1,S=f.child;S;){if(S===o){b=!0,o=f,c=m;break}if(S===c){b=!0,c=f,o=m;break}S=S.sibling}if(!b){for(S=m.child;S;){if(S===o){b=!0,o=m,c=f;break}if(S===c){b=!0,c=m,o=f;break}S=S.sibling}if(!b)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?t:r}function x(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=x(t),r!==null)return r;t=t.sibling}return null}var k=Object.assign,j=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Fe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case te:return"Profiler";case V:return"StrictMode";case Ue:return"Suspense";case Oe:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case K:return"Portal";case fe:return t.displayName||"Context";case X:return(t._context.displayName||"Context")+".Consumer";case je:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A:return r=t.displayName||null,r!==null?r:Fe(t.type)||"Memo";case E:r=t._payload,t=t._init;try{return Fe(t(r))}catch{}}return null}var xt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ve={pending:!1,data:null,method:null,action:null},ht=[],ae=-1;function P(t){return{current:t}}function W(t){0>ae||(t.current=ht[ae],ht[ae]=null,ae--)}function pe(t,r){ae++,ht[ae]=t.current,t.current=r}var Ne=P(null),Be=P(null),_e=P(null),et=P(null);function yt(t,r){switch(pe(_e,r),pe(Be,t),pe(Ne,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?M0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=M0(r),t=D0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(Ne),pe(Ne,t)}function Je(){W(Ne),W(Be),W(_e)}function Ft(t){t.memoizedState!==null&&pe(et,t);var r=Ne.current,o=D0(r,t.type);r!==o&&(pe(Be,t),pe(Ne,o))}function cn(t){Be.current===t&&(W(Ne),W(Be)),et.current===t&&(W(et),Ic._currentValue=Ve)}var Ct,Rt;function oe(t){if(Ct===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Ct=r&&r[1]||"",Rt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+t+Rt}var dn=!1;function qt(t,r){if(!t||dn)return"";dn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(de){var ie=de}Reflect.construct(t,[],Ce)}else{try{Ce.call()}catch(de){ie=de}t.call(Ce.prototype)}}else{try{throw Error()}catch(de){ie=de}(Ce=t())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(de){if(de&&ie&&typeof de.stack=="string")return[de.stack,ie.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],S=m[1];if(b&&S){var B=b.split(`
`),se=S.split(`
`);for(f=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;f<se.length&&!se[f].includes("DetermineComponentFrameRoot");)f++;if(c===B.length||f===se.length)for(c=B.length-1,f=se.length-1;1<=c&&0<=f&&B[c]!==se[f];)f--;for(;1<=c&&0<=f;c--,f--)if(B[c]!==se[f]){if(c!==1||f!==1)do if(c--,f--,0>f||B[c]!==se[f]){var ve=`
`+B[c].replace(" at new "," at ");return t.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",t.displayName)),ve}while(1<=c&&0<=f);break}}}finally{dn=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?oe(o):""}function jt(t,r){switch(t.tag){case 26:case 27:case 5:return oe(t.type);case 16:return oe("Lazy");case 13:return t.child!==r&&r!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return qt(t.type,!1);case 11:return qt(t.type.render,!1);case 1:return qt(t.type,!0);case 31:return oe("Activity");default:return""}}function Vt(t){try{var r="",o=null;do r+=jt(t,o),o=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var mt=Object.prototype.hasOwnProperty,Ye=s.unstable_scheduleCallback,le=s.unstable_cancelCallback,He=s.unstable_shouldYield,tt=s.unstable_requestPaint,pt=s.unstable_now,Dt=s.unstable_getCurrentPriorityLevel,ct=s.unstable_ImmediatePriority,St=s.unstable_UserBlockingPriority,ce=s.unstable_NormalPriority,be=s.unstable_LowPriority,Ie=s.unstable_IdlePriority,Qe=s.log,Ke=s.unstable_setDisableYieldValue,We=null,nt=null;function rt(t){if(typeof Qe=="function"&&Ke(t),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(We,t)}catch{}}var qe=Math.clz32?Math.clz32:Xt,Wt=Math.log,en=Math.LN2;function Xt(t){return t>>>=0,t===0?32:31-(Wt(t)/en|0)|0}var jn=256,zn=262144,Ut=4194304;function bn(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Zn(t,r,o){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=bn(c):(b&=S,b!==0?f=bn(b):o||(o=S&~t,o!==0&&(f=bn(o))))):(S=c&~m,S!==0?f=bn(S):b!==0?f=bn(b):o||(o=c&~t,o!==0&&(f=bn(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function In(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function hs(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gs(){var t=Ut;return Ut<<=1,(Ut&62914560)===0&&(Ut=4194304),t}function Hn(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function es(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function rs(t,r,o,c,f,m){var b=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var S=t.entanglements,B=t.expirationTimes,se=t.hiddenUpdates;for(o=b&~o;0<o;){var ve=31-qe(o),Ce=1<<ve;S[ve]=0,B[ve]=-1;var ie=se[ve];if(ie!==null)for(se[ve]=null,ve=0;ve<ie.length;ve++){var de=ie[ve];de!==null&&(de.lane&=-536870913)}o&=~Ce}c!==0&&Yn(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~r))}function Yn(t,r,o){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-qe(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|o&261930}function Fs(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-qe(o),f=1<<c;f&r|t[c]&r&&(t[c]|=r),o&=~f}}function Cs(t,r){var o=r&-r;return o=(o&42)!==0?1:q(o),(o&(t.suspendedLanes|r))!==0?0:o}function q(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ge(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function xe(){var t=Se.p;return t!==0?t:(t=window.event,t===void 0?32:s1(t.type))}function we(t,r){var o=Se.p;try{return Se.p=t,r()}finally{Se.p=o}}var ye=Math.random().toString(36).slice(2),it="__reactFiber$"+ye,It="__reactProps$"+ye,ut="__reactContainer$"+ye,_t="__reactEvents$"+ye,wt="__reactListeners$"+ye,Jt="__reactHandles$"+ye,Rs="__reactResources$"+ye,Es="__reactMarker$"+ye;function qs(t){delete t[it],delete t[It],delete t[_t],delete t[wt],delete t[Jt]}function Sn(t){var r=t[it];if(r)return r;for(var o=t.parentNode;o;){if(r=o[ut]||o[it]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=z0(t);t!==null;){if(o=t[it])return o;t=z0(t)}return r}t=o,o=t.parentNode}return null}function F(t){if(t=t[it]||t[ut]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function ue(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(i(33))}function T(t){var r=t[Rs];return r||(r=t[Rs]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function C(t){t[Es]=!0}var G=new Set,Z={};function ze(t,r){Pe(t,r),Pe(t+"Capture",r)}function Pe(t,r){for(Z[t]=r,t=0;t<r.length;t++)G.add(r[t])}var Le=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bt={},kt={};function $(t){return mt.call(kt,t)?!0:mt.call(Bt,t)?!1:Le.test(t)?kt[t]=!0:(Bt[t]=!0,!1)}function me(t,r,o){if($(r))if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+o)}}function re(t,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+o)}}function Re(t,r,o,c){if(c===null)t.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(r,o,""+c)}}function Me(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function st(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Mt(t,r,o){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){o=""+b,m.call(this,b)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function ot(t){if(!t._valueTracker){var r=st(t)?"checked":"value";t._valueTracker=Mt(t,r,""+t[r])}}function Zt(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=st(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function Fn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var fn=/[\n"\\]/g;function Nn(t){return t.replace(fn,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function aa(t,r,o,c,f,m,b,S){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Me(r)):t.value!==""+Me(r)&&(t.value=""+Me(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?oa(t,b,Me(r)):o!=null?oa(t,b,Me(o)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Me(S):t.removeAttribute("name")}function ia(t,r,o,c,f,m,b,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){ot(t);return}o=o!=null?""+Me(o):"",r=r!=null?""+Me(r):o,S||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=S?t.checked:!!c,t.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),ot(t)}function oa(t,r,o){r==="number"&&Fn(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function pr(t,r,o,c){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+Me(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function M(t,r,o){if(r!=null&&(r=""+Me(r),r!==t.value&&(t.value=r),o==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=o!=null?""+Me(o):""}function ee(t,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(xt(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Me(r),t.defaultValue=o,c=t.textContent,c===o&&c!==""&&c!==null&&(t.value=c),ot(t)}function De(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var gt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dt(t,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,o):typeof o!="number"||o===0||gt.has(r)?r==="float"?t.cssFloat=o:t[r]=(""+o).trim():t[r]=o+"px"}function Ge(t,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(t=t.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&dt(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&dt(t,m,r[m])}function at(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),un=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mn(t){return un.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ot(){}var Ms=null;function gn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mn=null,Vn=null;function $n(t){var r=F(t);if(r&&(t=r.stateNode)){var o=t[It]||null;e:switch(t=r.stateNode,r.type){case"input":if(aa(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Nn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var f=c[It]||null;if(!f)throw Error(i(90));aa(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===t.form&&Zt(c)}break e;case"textarea":M(t,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&pr(t,!!o.multiple,r,!1)}}}var js=!1;function gr(t,r,o){if(js)return t(r,o);js=!0;try{var c=t(r);return c}finally{if(js=!1,(Mn!==null||Vn!==null)&&(Nh(),Mn&&(r=Mn,t=Vn,Vn=Mn=null,$n(r),t)))for(r=0;r<t.length;r++)$n(t[r])}}function Hs(t,r){var o=t.stateNode;if(o===null)return null;var c=o[It]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nr=!1;if(ys)try{var yn={};Object.defineProperty(yn,"passive",{get:function(){Nr=!0}}),window.addEventListener("test",yn,yn),window.removeEventListener("test",yn,yn)}catch{Nr=!1}var ts=null,$s=null,Zs=null;function Cr(){if(Zs)return Zs;var t,r=$s,o=r.length,c,f="value"in ts?ts.value:ts.textContent,m=f.length;for(t=0;t<o&&r[t]===f[t];t++);var b=o-t;for(c=1;c<=b&&r[o-c]===f[m-c];c++);return Zs=f.slice(t,1<c?1-c:void 0)}function la(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Hr(){return!0}function yr(){return!1}function as(t){function r(o,c,f,m,b){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(o=t[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Hr:yr,this.isPropagationStopped=yr,this}return k(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),r}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=as(Ws),ii=k({},Ws,{view:0,detail:0}),Xl=as(ii),oi,zo,ca,Fo=k({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:li,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ca&&(ca&&t.type==="mousemove"?(oi=t.screenX-ca.screenX,zo=t.screenY-ca.screenY):zo=oi=0,ca=t),oi)},movementY:function(t){return"movementY"in t?t.movementY:zo}}),Jl=as(Fo),to=k({},Fo,{dataTransfer:0}),Lu=as(to),Ou=k({},ii,{relatedTarget:0}),no=as(Ou),Zl=k({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Vu=as(Zl),qo=k({},Ws,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bu=as(qo),Uu=k({},Ws,{data:0}),ua=as(Uu),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hu(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=qu[t])?!!r[t]:!1}function li(){return Hu}var er=k({},ii,{key:function(t){if(t.key){var r=zu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=la(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:li,charCode:function(t){return t.type==="keypress"?la(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?la(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$u=as(er),Wu=k({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ra=as(Wu),d=k({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:li}),v=as(d),_=k({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=as(_),J=k({},Fo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),he=as(J),$e=k({},Ws,{newState:0,oldState:0}),Gt=as($e),ds=[9,13,27,32],kn=ys&&"CompositionEvent"in window,Qn=null;ys&&"documentMode"in document&&(Qn=document.documentMode);var Rr=ys&&"TextEvent"in window&&!Qn,ha=ys&&(!kn||Qn&&8<Qn&&11>=Qn),$r=" ",Wr=!1;function so(t,r){switch(t){case"keyup":return ds.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ho(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $o=!1;function Sk(t,r){switch(t){case"compositionend":return Ho(r);case"keypress":return r.which!==32?null:(Wr=!0,$r);case"textInput":return t=r.data,t===$r&&Wr?null:t;default:return null}}function Nk(t,r){if($o)return t==="compositionend"||!kn&&so(t,r)?(t=Cr(),Zs=$s=ts=null,$o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ha&&r.locale!=="ko"?null:r.data;default:return null}}var Ck={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hy(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ck[t.type]:r==="textarea"}function $y(t,r,o,c){Mn?Vn?Vn.push(c):Vn=[c]:Mn=c,r=Ph(r,"onChange"),0<r.length&&(o=new Ds("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var ec=null,tc=null;function Rk(t){S0(t,0)}function Gu(t){var r=ue(t);if(Zt(r))return t}function Wy(t,r){if(t==="change")return r}var Gy=!1;if(ys){var bf;if(ys){var xf="oninput"in document;if(!xf){var Ky=document.createElement("div");Ky.setAttribute("oninput","return;"),xf=typeof Ky.oninput=="function"}bf=xf}else bf=!1;Gy=bf&&(!document.documentMode||9<document.documentMode)}function Yy(){ec&&(ec.detachEvent("onpropertychange",Qy),tc=ec=null)}function Qy(t){if(t.propertyName==="value"&&Gu(tc)){var r=[];$y(r,tc,t,gn(t)),gr(Rk,r)}}function Ak(t,r,o){t==="focusin"?(Yy(),ec=r,tc=o,ec.attachEvent("onpropertychange",Qy)):t==="focusout"&&Yy()}function Ik(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gu(tc)}function Mk(t,r){if(t==="click")return Gu(r)}function Dk(t,r){if(t==="input"||t==="change")return Gu(r)}function Pk(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var vr=typeof Object.is=="function"?Object.is:Pk;function nc(t,r){if(vr(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!mt.call(r,f)||!vr(t[f],r[f]))return!1}return!0}function Xy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jy(t,r){var o=Xy(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Xy(o)}}function Zy(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Zy(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function ev(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Fn(t.document);r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Fn(t.document)}return r}function wf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var Lk=ys&&"documentMode"in document&&11>=document.documentMode,Wo=null,_f=null,sc=null,kf=!1;function tv(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;kf||Wo==null||Wo!==Fn(c)||(c=Wo,"selectionStart"in c&&wf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),sc&&nc(sc,c)||(sc=c,c=Ph(_f,"onSelect"),0<c.length&&(r=new Ds("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=Wo)))}function ro(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Go={animationend:ro("Animation","AnimationEnd"),animationiteration:ro("Animation","AnimationIteration"),animationstart:ro("Animation","AnimationStart"),transitionrun:ro("Transition","TransitionRun"),transitionstart:ro("Transition","TransitionStart"),transitioncancel:ro("Transition","TransitionCancel"),transitionend:ro("Transition","TransitionEnd")},Tf={},nv={};ys&&(nv=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function ao(t){if(Tf[t])return Tf[t];if(!Go[t])return t;var r=Go[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in nv)return Tf[t]=r[o];return t}var sv=ao("animationend"),rv=ao("animationiteration"),av=ao("animationstart"),Ok=ao("transitionrun"),Vk=ao("transitionstart"),Bk=ao("transitioncancel"),iv=ao("transitionend"),ov=new Map,Ef="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ef.push("scrollEnd");function Gr(t,r){ov.set(t,r),ze(r,[t])}var Ku=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ar=[],Ko=0,jf=0;function Yu(){for(var t=Ko,r=jf=Ko=0;r<t;){var o=Ar[r];Ar[r++]=null;var c=Ar[r];Ar[r++]=null;var f=Ar[r];Ar[r++]=null;var m=Ar[r];if(Ar[r++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}m!==0&&lv(o,f,m)}}function Qu(t,r,o,c){Ar[Ko++]=t,Ar[Ko++]=r,Ar[Ko++]=o,Ar[Ko++]=c,jf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function Sf(t,r,o,c){return Qu(t,r,o,c),Xu(t)}function io(t,r){return Qu(t,null,null,r),Xu(t)}function lv(t,r,o){t.lanes|=o;var c=t.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=t.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-qe(o),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function Xu(t){if(50<Ec)throw Ec=0,Lm=null,Error(i(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Yo={};function Uk(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(t,r,o,c){return new Uk(t,r,o,c)}function Nf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Aa(t,r){var o=t.alternate;return o===null?(o=br(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function cv(t,r){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,r=o.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Ju(t,r,o,c,f,m){var b=0;if(c=t,typeof t=="function")Nf(t)&&(b=1);else if(typeof t=="string")b=$T(t,o,Ne.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=br(31,o,r,f),t.elementType=R,t.lanes=m,t;case U:return oo(o.children,f,m,r);case V:b=8,f|=24;break;case te:return t=br(12,o,r,f|2),t.elementType=te,t.lanes=m,t;case Ue:return t=br(13,o,r,f),t.elementType=Ue,t.lanes=m,t;case Oe:return t=br(19,o,r,f),t.elementType=Oe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fe:b=10;break e;case X:b=9;break e;case je:b=11;break e;case A:b=14;break e;case E:b=16,c=null;break e}b=29,o=Error(i(130,t===null?"null":typeof t,"")),c=null}return r=br(b,o,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function oo(t,r,o,c){return t=br(7,t,c,r),t.lanes=o,t}function Cf(t,r,o){return t=br(6,t,null,r),t.lanes=o,t}function uv(t){var r=br(18,null,null,0);return r.stateNode=t,r}function Rf(t,r,o){return r=br(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var hv=new WeakMap;function Ir(t,r){if(typeof t=="object"&&t!==null){var o=hv.get(t);return o!==void 0?o:(r={value:t,source:r,stack:Vt(r)},hv.set(t,r),r)}return{value:t,source:r,stack:Vt(r)}}var Qo=[],Xo=0,Zu=null,rc=0,Mr=[],Dr=0,ci=null,da=1,fa="";function Ia(t,r){Qo[Xo++]=rc,Qo[Xo++]=Zu,Zu=t,rc=r}function dv(t,r,o){Mr[Dr++]=da,Mr[Dr++]=fa,Mr[Dr++]=ci,ci=t;var c=da;t=fa;var f=32-qe(c)-1;c&=~(1<<f),o+=1;var m=32-qe(r)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,da=1<<32-qe(r)+f|o<<f|c,fa=m+t}else da=1<<m|o<<f|c,fa=t}function Af(t){t.return!==null&&(Ia(t,1),dv(t,1,0))}function If(t){for(;t===Zu;)Zu=Qo[--Xo],Qo[Xo]=null,rc=Qo[--Xo],Qo[Xo]=null;for(;t===ci;)ci=Mr[--Dr],Mr[Dr]=null,fa=Mr[--Dr],Mr[Dr]=null,da=Mr[--Dr],Mr[Dr]=null}function fv(t,r){Mr[Dr++]=da,Mr[Dr++]=fa,Mr[Dr++]=ci,da=r.id,fa=r.overflow,ci=t}var Ps=null,Wn=null,hn=!1,ui=null,Pr=!1,Mf=Error(i(519));function hi(t){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ac(Ir(r,t)),Mf}function mv(t){var r=t.stateNode,o=t.type,c=t.memoizedProps;switch(r[it]=t,r[It]=c,o){case"dialog":nn("cancel",r),nn("close",r);break;case"iframe":case"object":case"embed":nn("load",r);break;case"video":case"audio":for(o=0;o<Sc.length;o++)nn(Sc[o],r);break;case"source":nn("error",r);break;case"img":case"image":case"link":nn("error",r),nn("load",r);break;case"details":nn("toggle",r);break;case"input":nn("invalid",r),ia(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":nn("invalid",r);break;case"textarea":nn("invalid",r),ee(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||A0(r.textContent,o)?(c.popover!=null&&(nn("beforetoggle",r),nn("toggle",r)),c.onScroll!=null&&nn("scroll",r),c.onScrollEnd!=null&&nn("scrollend",r),c.onClick!=null&&(r.onclick=Ot),r=!0):r=!1,r||hi(t,!0)}function pv(t){for(Ps=t.return;Ps;)switch(Ps.tag){case 5:case 31:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:Ps=Ps.return}}function Jo(t){if(t!==Ps)return!1;if(!hn)return pv(t),hn=!0,!1;var r=t.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||Xm(t.type,t.memoizedProps)),o=!o),o&&Wn&&hi(t),pv(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Wn=U0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Wn=U0(t)}else r===27?(r=Wn,Ei(t.type)?(t=np,np=null,Wn=t):Wn=r):Wn=Ps?Or(t.stateNode.nextSibling):null;return!0}function lo(){Wn=Ps=null,hn=!1}function Df(){var t=ui;return t!==null&&(cr===null?cr=t:cr.push.apply(cr,t),ui=null),t}function ac(t){ui===null?ui=[t]:ui.push(t)}var Pf=P(null),co=null,Ma=null;function di(t,r,o){pe(Pf,r._currentValue),r._currentValue=o}function Da(t){t._currentValue=Pf.current,W(Pf)}function Lf(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Of(t,r,o,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var B=0;B<r.length;B++)if(S.context===r[B]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),Lf(m.return,o,t),c||(b=null);break e}m=S.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(i(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),Lf(b,o,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Zo(t,r,o,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var S=f.type;vr(f.pendingProps.value,b.value)||(t!==null?t.push(S):t=[S])}}else if(f===et.current){if(b=f.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Ic):t=[Ic])}f=f.return}t!==null&&Of(r,t,o,c),r.flags|=262144}function eh(t){for(t=t.firstContext;t!==null;){if(!vr(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function uo(t){co=t,Ma=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ls(t){return gv(co,t)}function th(t,r){return co===null&&uo(t),gv(t,r)}function gv(t,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Ma===null){if(t===null)throw Error(i(308));Ma=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Ma=Ma.next=r;return o}var zk=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(o,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(o){return o()})}},Fk=s.unstable_scheduleCallback,qk=s.unstable_NormalPriority,vs={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vf(){return{controller:new zk,data:new Map,refCount:0}}function ic(t){t.refCount--,t.refCount===0&&Fk(qk,function(){t.controller.abort()})}var oc=null,Bf=0,el=0,tl=null;function Hk(t,r){if(oc===null){var o=oc=[];Bf=0,el=Fm(),tl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Bf++,r.then(yv,yv),r}function yv(){if(--Bf===0&&oc!==null){tl!==null&&(tl.status="fulfilled");var t=oc;oc=null,el=0,tl=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function $k(t,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var vv=Y.S;Y.S=function(t,r){t0=pt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Hk(t,r),vv!==null&&vv(t,r)};var ho=P(null);function Uf(){var t=ho.current;return t!==null?t:Bn.pooledCache}function nh(t,r){r===null?pe(ho,ho.current):pe(ho,r.pool)}function bv(){var t=Uf();return t===null?null:{parent:vs._currentValue,pool:t}}var nl=Error(i(460)),zf=Error(i(474)),sh=Error(i(542)),rh={then:function(){}};function xv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function wv(t,r,o){switch(o=t[o],o===void 0?t.push(r):o!==r&&(r.then(Ot,Ot),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,kv(t),t;default:if(typeof r.status=="string")r.then(Ot,Ot);else{if(t=Bn,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,kv(t),t}throw mo=r,nl}}function fo(t){try{var r=t._init;return r(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(mo=o,nl):o}}var mo=null;function _v(){if(mo===null)throw Error(i(459));var t=mo;return mo=null,t}function kv(t){if(t===nl||t===sh)throw Error(i(483))}var sl=null,lc=0;function ah(t){var r=lc;return lc+=1,sl===null&&(sl=[]),wv(sl,t,r)}function cc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function ih(t,r){throw r.$$typeof===j?Error(i(525)):(t=Object.prototype.toString.call(r),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Tv(t){function r(Q,H){if(t){var ne=Q.deletions;ne===null?(Q.deletions=[H],Q.flags|=16):ne.push(H)}}function o(Q,H){if(!t)return null;for(;H!==null;)r(Q,H),H=H.sibling;return null}function c(Q){for(var H=new Map;Q!==null;)Q.key!==null?H.set(Q.key,Q):H.set(Q.index,Q),Q=Q.sibling;return H}function f(Q,H){return Q=Aa(Q,H),Q.index=0,Q.sibling=null,Q}function m(Q,H,ne){return Q.index=ne,t?(ne=Q.alternate,ne!==null?(ne=ne.index,ne<H?(Q.flags|=67108866,H):ne):(Q.flags|=67108866,H)):(Q.flags|=1048576,H)}function b(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function S(Q,H,ne,Ee){return H===null||H.tag!==6?(H=Cf(ne,Q.mode,Ee),H.return=Q,H):(H=f(H,ne),H.return=Q,H)}function B(Q,H,ne,Ee){var Tt=ne.type;return Tt===U?ve(Q,H,ne.props.children,Ee,ne.key):H!==null&&(H.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===E&&fo(Tt)===H.type)?(H=f(H,ne.props),cc(H,ne),H.return=Q,H):(H=Ju(ne.type,ne.key,ne.props,null,Q.mode,Ee),cc(H,ne),H.return=Q,H)}function se(Q,H,ne,Ee){return H===null||H.tag!==4||H.stateNode.containerInfo!==ne.containerInfo||H.stateNode.implementation!==ne.implementation?(H=Rf(ne,Q.mode,Ee),H.return=Q,H):(H=f(H,ne.children||[]),H.return=Q,H)}function ve(Q,H,ne,Ee,Tt){return H===null||H.tag!==7?(H=oo(ne,Q.mode,Ee,Tt),H.return=Q,H):(H=f(H,ne),H.return=Q,H)}function Ce(Q,H,ne){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Cf(""+H,Q.mode,ne),H.return=Q,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case O:return ne=Ju(H.type,H.key,H.props,null,Q.mode,ne),cc(ne,H),ne.return=Q,ne;case K:return H=Rf(H,Q.mode,ne),H.return=Q,H;case E:return H=fo(H),Ce(Q,H,ne)}if(xt(H)||z(H))return H=oo(H,Q.mode,ne,null),H.return=Q,H;if(typeof H.then=="function")return Ce(Q,ah(H),ne);if(H.$$typeof===fe)return Ce(Q,th(Q,H),ne);ih(Q,H)}return null}function ie(Q,H,ne,Ee){var Tt=H!==null?H.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Tt!==null?null:S(Q,H,""+ne,Ee);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case O:return ne.key===Tt?B(Q,H,ne,Ee):null;case K:return ne.key===Tt?se(Q,H,ne,Ee):null;case E:return ne=fo(ne),ie(Q,H,ne,Ee)}if(xt(ne)||z(ne))return Tt!==null?null:ve(Q,H,ne,Ee,null);if(typeof ne.then=="function")return ie(Q,H,ah(ne),Ee);if(ne.$$typeof===fe)return ie(Q,H,th(Q,ne),Ee);ih(Q,ne)}return null}function de(Q,H,ne,Ee,Tt){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Q=Q.get(ne)||null,S(H,Q,""+Ee,Tt);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case O:return Q=Q.get(Ee.key===null?ne:Ee.key)||null,B(H,Q,Ee,Tt);case K:return Q=Q.get(Ee.key===null?ne:Ee.key)||null,se(H,Q,Ee,Tt);case E:return Ee=fo(Ee),de(Q,H,ne,Ee,Tt)}if(xt(Ee)||z(Ee))return Q=Q.get(ne)||null,ve(H,Q,Ee,Tt,null);if(typeof Ee.then=="function")return de(Q,H,ne,ah(Ee),Tt);if(Ee.$$typeof===fe)return de(Q,H,ne,th(H,Ee),Tt);ih(H,Ee)}return null}function ft(Q,H,ne,Ee){for(var Tt=null,xn=null,vt=H,Qt=H=0,rn=null;vt!==null&&Qt<ne.length;Qt++){vt.index>Qt?(rn=vt,vt=null):rn=vt.sibling;var wn=ie(Q,vt,ne[Qt],Ee);if(wn===null){vt===null&&(vt=rn);break}t&&vt&&wn.alternate===null&&r(Q,vt),H=m(wn,H,Qt),xn===null?Tt=wn:xn.sibling=wn,xn=wn,vt=rn}if(Qt===ne.length)return o(Q,vt),hn&&Ia(Q,Qt),Tt;if(vt===null){for(;Qt<ne.length;Qt++)vt=Ce(Q,ne[Qt],Ee),vt!==null&&(H=m(vt,H,Qt),xn===null?Tt=vt:xn.sibling=vt,xn=vt);return hn&&Ia(Q,Qt),Tt}for(vt=c(vt);Qt<ne.length;Qt++)rn=de(vt,Q,Qt,ne[Qt],Ee),rn!==null&&(t&&rn.alternate!==null&&vt.delete(rn.key===null?Qt:rn.key),H=m(rn,H,Qt),xn===null?Tt=rn:xn.sibling=rn,xn=rn);return t&&vt.forEach(function(Ri){return r(Q,Ri)}),hn&&Ia(Q,Qt),Tt}function At(Q,H,ne,Ee){if(ne==null)throw Error(i(151));for(var Tt=null,xn=null,vt=H,Qt=H=0,rn=null,wn=ne.next();vt!==null&&!wn.done;Qt++,wn=ne.next()){vt.index>Qt?(rn=vt,vt=null):rn=vt.sibling;var Ri=ie(Q,vt,wn.value,Ee);if(Ri===null){vt===null&&(vt=rn);break}t&&vt&&Ri.alternate===null&&r(Q,vt),H=m(Ri,H,Qt),xn===null?Tt=Ri:xn.sibling=Ri,xn=Ri,vt=rn}if(wn.done)return o(Q,vt),hn&&Ia(Q,Qt),Tt;if(vt===null){for(;!wn.done;Qt++,wn=ne.next())wn=Ce(Q,wn.value,Ee),wn!==null&&(H=m(wn,H,Qt),xn===null?Tt=wn:xn.sibling=wn,xn=wn);return hn&&Ia(Q,Qt),Tt}for(vt=c(vt);!wn.done;Qt++,wn=ne.next())wn=de(vt,Q,Qt,wn.value,Ee),wn!==null&&(t&&wn.alternate!==null&&vt.delete(wn.key===null?Qt:wn.key),H=m(wn,H,Qt),xn===null?Tt=wn:xn.sibling=wn,xn=wn);return t&&vt.forEach(function(nE){return r(Q,nE)}),hn&&Ia(Q,Qt),Tt}function Ln(Q,H,ne,Ee){if(typeof ne=="object"&&ne!==null&&ne.type===U&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case O:e:{for(var Tt=ne.key;H!==null;){if(H.key===Tt){if(Tt=ne.type,Tt===U){if(H.tag===7){o(Q,H.sibling),Ee=f(H,ne.props.children),Ee.return=Q,Q=Ee;break e}}else if(H.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===E&&fo(Tt)===H.type){o(Q,H.sibling),Ee=f(H,ne.props),cc(Ee,ne),Ee.return=Q,Q=Ee;break e}o(Q,H);break}else r(Q,H);H=H.sibling}ne.type===U?(Ee=oo(ne.props.children,Q.mode,Ee,ne.key),Ee.return=Q,Q=Ee):(Ee=Ju(ne.type,ne.key,ne.props,null,Q.mode,Ee),cc(Ee,ne),Ee.return=Q,Q=Ee)}return b(Q);case K:e:{for(Tt=ne.key;H!==null;){if(H.key===Tt)if(H.tag===4&&H.stateNode.containerInfo===ne.containerInfo&&H.stateNode.implementation===ne.implementation){o(Q,H.sibling),Ee=f(H,ne.children||[]),Ee.return=Q,Q=Ee;break e}else{o(Q,H);break}else r(Q,H);H=H.sibling}Ee=Rf(ne,Q.mode,Ee),Ee.return=Q,Q=Ee}return b(Q);case E:return ne=fo(ne),Ln(Q,H,ne,Ee)}if(xt(ne))return ft(Q,H,ne,Ee);if(z(ne)){if(Tt=z(ne),typeof Tt!="function")throw Error(i(150));return ne=Tt.call(ne),At(Q,H,ne,Ee)}if(typeof ne.then=="function")return Ln(Q,H,ah(ne),Ee);if(ne.$$typeof===fe)return Ln(Q,H,th(Q,ne),Ee);ih(Q,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,H!==null&&H.tag===6?(o(Q,H.sibling),Ee=f(H,ne),Ee.return=Q,Q=Ee):(o(Q,H),Ee=Cf(ne,Q.mode,Ee),Ee.return=Q,Q=Ee),b(Q)):o(Q,H)}return function(Q,H,ne,Ee){try{lc=0;var Tt=Ln(Q,H,ne,Ee);return sl=null,Tt}catch(vt){if(vt===nl||vt===sh)throw vt;var xn=br(29,vt,null,Q.mode);return xn.lanes=Ee,xn.return=Q,xn}}}var po=Tv(!0),Ev=Tv(!1),fi=!1;function Ff(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function mi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pi(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Tn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Xu(t),lv(t,null,o),r}return Qu(t,c,r,o),Xu(t)}function uc(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Fs(t,o)}}function Hf(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}var $f=!1;function hc(){if($f){var t=tl;if(t!==null)throw t}}function dc(t,r,o,c){$f=!1;var f=t.updateQueue;fi=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var B=S,se=B.next;B.next=null,b===null?m=se:b.next=se,b=B;var ve=t.alternate;ve!==null&&(ve=ve.updateQueue,S=ve.lastBaseUpdate,S!==b&&(S===null?ve.firstBaseUpdate=se:S.next=se,ve.lastBaseUpdate=B))}if(m!==null){var Ce=f.baseState;b=0,ve=se=B=null,S=m;do{var ie=S.lane&-536870913,de=ie!==S.lane;if(de?(sn&ie)===ie:(c&ie)===ie){ie!==0&&ie===el&&($f=!0),ve!==null&&(ve=ve.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ft=t,At=S;ie=r;var Ln=o;switch(At.tag){case 1:if(ft=At.payload,typeof ft=="function"){Ce=ft.call(Ln,Ce,ie);break e}Ce=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=At.payload,ie=typeof ft=="function"?ft.call(Ln,Ce,ie):ft,ie==null)break e;Ce=k({},Ce,ie);break e;case 2:fi=!0}}ie=S.callback,ie!==null&&(t.flags|=64,de&&(t.flags|=8192),de=f.callbacks,de===null?f.callbacks=[ie]:de.push(ie))}else de={lane:ie,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ve===null?(se=ve=de,B=Ce):ve=ve.next=de,b|=ie;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;de=S,S=de.next,de.next=null,f.lastBaseUpdate=de,f.shared.pending=null}}while(!0);ve===null&&(B=Ce),f.baseState=B,f.firstBaseUpdate=se,f.lastBaseUpdate=ve,m===null&&(f.shared.lanes=0),xi|=b,t.lanes=b,t.memoizedState=Ce}}function jv(t,r){if(typeof t!="function")throw Error(i(191,t));t.call(r)}function Sv(t,r){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)jv(o[t],r)}var rl=P(null),oh=P(0);function Nv(t,r){t=qa,pe(oh,t),pe(rl,r),qa=t|r.baseLanes}function Wf(){pe(oh,qa),pe(rl,rl.current)}function Gf(){qa=oh.current,W(rl),W(oh)}var xr=P(null),Lr=null;function gi(t){var r=t.alternate;pe(fs,fs.current&1),pe(xr,t),Lr===null&&(r===null||rl.current!==null||r.memoizedState!==null)&&(Lr=t)}function Kf(t){pe(fs,fs.current),pe(xr,t),Lr===null&&(Lr=t)}function Cv(t){t.tag===22?(pe(fs,fs.current),pe(xr,t),Lr===null&&(Lr=t)):yi()}function yi(){pe(fs,fs.current),pe(xr,xr.current)}function wr(t){W(xr),Lr===t&&(Lr=null),W(fs)}var fs=P(0);function lh(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||ep(o)||tp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Pa=0,Kt=null,Dn=null,bs=null,ch=!1,al=!1,go=!1,uh=0,fc=0,il=null,Wk=0;function is(){throw Error(i(321))}function Yf(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!vr(t[o],r[o]))return!1;return!0}function Qf(t,r,o,c,f,m){return Pa=m,Kt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?db:hm,go=!1,m=o(c,f),go=!1,al&&(m=Av(r,o,c,f)),Rv(t),m}function Rv(t){Y.H=gc;var r=Dn!==null&&Dn.next!==null;if(Pa=0,bs=Dn=Kt=null,ch=!1,fc=0,il=null,r)throw Error(i(300));t===null||xs||(t=t.dependencies,t!==null&&eh(t)&&(xs=!0))}function Av(t,r,o,c){Kt=t;var f=0;do{if(al&&(il=null),fc=0,al=!1,25<=f)throw Error(i(301));if(f+=1,bs=Dn=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=fb,m=r(o,c)}while(al);return m}function Gk(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?mc(r):r,t=t.useState()[0],(Dn!==null?Dn.memoizedState:null)!==t&&(Kt.flags|=1024),r}function Xf(){var t=uh!==0;return uh=0,t}function Jf(t,r,o){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o}function Zf(t){if(ch){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}ch=!1}Pa=0,bs=Dn=Kt=null,al=!1,fc=uh=0,il=null}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bs===null?Kt.memoizedState=bs=t:bs=bs.next=t,bs}function ms(){if(Dn===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=Dn.next;var r=bs===null?Kt.memoizedState:bs.next;if(r!==null)bs=r,Dn=t;else{if(t===null)throw Kt.alternate===null?Error(i(467)):Error(i(310));Dn=t,t={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},bs===null?Kt.memoizedState=bs=t:bs=bs.next=t}return bs}function hh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mc(t){var r=fc;return fc+=1,il===null&&(il=[]),t=wv(il,t,r),r=Kt,(bs===null?r.memoizedState:bs.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?db:hm),t}function dh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return mc(t);if(t.$$typeof===fe)return Ls(t)}throw Error(i(438,String(t)))}function em(t){var r=null,o=Kt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Kt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=hh(),Kt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(t),c=0;c<t;c++)o[c]=L;return r.index++,o}function La(t,r){return typeof r=="function"?r(t):r}function fh(t){var r=ms();return tm(r,Dn,t)}function tm(t,r,o){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var S=b=null,B=null,se=r,ve=!1;do{var Ce=se.lane&-536870913;if(Ce!==se.lane?(sn&Ce)===Ce:(Pa&Ce)===Ce){var ie=se.revertLane;if(ie===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),Ce===el&&(ve=!0);else if((Pa&ie)===ie){se=se.next,ie===el&&(ve=!0);continue}else Ce={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},B===null?(S=B=Ce,b=m):B=B.next=Ce,Kt.lanes|=ie,xi|=ie;Ce=se.action,go&&o(m,Ce),m=se.hasEagerState?se.eagerState:o(m,Ce)}else ie={lane:Ce,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},B===null?(S=B=ie,b=m):B=B.next=ie,Kt.lanes|=Ce,xi|=Ce;se=se.next}while(se!==null&&se!==r);if(B===null?b=m:B.next=S,!vr(m,t.memoizedState)&&(xs=!0,ve&&(o=tl,o!==null)))throw o;t.memoizedState=m,t.baseState=b,t.baseQueue=B,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function nm(t){var r=ms(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);vr(m,r.memoizedState)||(xs=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function Iv(t,r,o){var c=Kt,f=ms(),m=hn;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var b=!vr((Dn||f).memoizedState,o);if(b&&(f.memoizedState=o,xs=!0),f=f.queue,am(Pv.bind(null,c,f,t),[t]),f.getSnapshot!==r||b||bs!==null&&bs.memoizedState.tag&1){if(c.flags|=2048,ol(9,{destroy:void 0},Dv.bind(null,c,f,o,r),null),Bn===null)throw Error(i(349));m||(Pa&127)!==0||Mv(c,r,o)}return o}function Mv(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Kt.updateQueue,r===null?(r=hh(),Kt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function Dv(t,r,o,c){r.value=o,r.getSnapshot=c,Lv(r)&&Ov(t)}function Pv(t,r,o){return o(function(){Lv(r)&&Ov(t)})}function Lv(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!vr(t,o)}catch{return!0}}function Ov(t){var r=io(t,2);r!==null&&ur(r,t,2)}function sm(t){var r=tr();if(typeof t=="function"){var o=t;if(t=o(),go){rt(!0);try{o()}finally{rt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},r}function Vv(t,r,o,c){return t.baseState=o,tm(t,Dn,typeof c=="function"?c:La)}function Kk(t,r,o,c,f){if(gh(t))throw Error(i(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};Y.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,Bv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function Bv(t,r){var o=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=Y.T,b={};Y.T=b;try{var S=o(f,c),B=Y.S;B!==null&&B(b,S),Uv(t,r,S)}catch(se){rm(t,r,se)}finally{m!==null&&b.types!==null&&(m.types=b.types),Y.T=m}}else try{m=o(f,c),Uv(t,r,m)}catch(se){rm(t,r,se)}}function Uv(t,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){zv(t,r,c)},function(c){return rm(t,r,c)}):zv(t,r,o)}function zv(t,r,o){r.status="fulfilled",r.value=o,Fv(r),t.state=o,r=t.pending,r!==null&&(o=r.next,o===r?t.pending=null:(o=o.next,r.next=o,Bv(t,o)))}function rm(t,r,o){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,Fv(r),r=r.next;while(r!==c)}t.action=null}function Fv(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function qv(t,r){return r}function Hv(t,r){if(hn){var o=Bn.formState;if(o!==null){e:{var c=Kt;if(hn){if(Wn){t:{for(var f=Wn,m=Pr;f.nodeType!==8;){if(!m){f=null;break t}if(f=Or(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Wn=Or(f.nextSibling),c=f.data==="F!";break e}}hi(c)}c=!1}c&&(r=o[0])}}return o=tr(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qv,lastRenderedState:r},o.queue=c,o=cb.bind(null,Kt,c),c.dispatch=o,c=sm(!1),m=um.bind(null,Kt,!1,c.queue),c=tr(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,o=Kk.bind(null,Kt,f,m,o),f.dispatch=o,c.memoizedState=t,[r,o,!1]}function $v(t){var r=ms();return Wv(r,Dn,t)}function Wv(t,r,o){if(r=tm(t,r,qv)[0],t=fh(La)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=mc(r)}catch(b){throw b===nl?sh:b}else c=r;r=ms();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Kt.flags|=2048,ol(9,{destroy:void 0},Yk.bind(null,f,o),null)),[c,m,t]}function Yk(t,r){t.action=r}function Gv(t){var r=ms(),o=Dn;if(o!==null)return Wv(r,o,t);ms(),r=r.memoizedState,o=ms();var c=o.queue.dispatch;return o.memoizedState=t,[r,c,!1]}function ol(t,r,o,c){return t={tag:t,create:o,deps:c,inst:r,next:null},r=Kt.updateQueue,r===null&&(r=hh(),Kt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t),t}function Kv(){return ms().memoizedState}function mh(t,r,o,c){var f=tr();Kt.flags|=t,f.memoizedState=ol(1|r,{destroy:void 0},o,c===void 0?null:c)}function ph(t,r,o,c){var f=ms();c=c===void 0?null:c;var m=f.memoizedState.inst;Dn!==null&&c!==null&&Yf(c,Dn.memoizedState.deps)?f.memoizedState=ol(r,m,o,c):(Kt.flags|=t,f.memoizedState=ol(1|r,m,o,c))}function Yv(t,r){mh(8390656,8,t,r)}function am(t,r){ph(2048,8,t,r)}function Qk(t){Kt.flags|=4;var r=Kt.updateQueue;if(r===null)r=hh(),Kt.updateQueue=r,r.events=[t];else{var o=r.events;o===null?r.events=[t]:o.push(t)}}function Qv(t){var r=ms().memoizedState;return Qk({ref:r,nextImpl:t}),function(){if((Tn&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Xv(t,r){return ph(4,2,t,r)}function Jv(t,r){return ph(4,4,t,r)}function Zv(t,r){if(typeof r=="function"){t=t();var o=r(t);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function eb(t,r,o){o=o!=null?o.concat([t]):null,ph(4,4,Zv.bind(null,r,t),o)}function im(){}function tb(t,r){var o=ms();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Yf(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function nb(t,r){var o=ms();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Yf(r,c[1]))return c[0];if(c=t(),go){rt(!0);try{t()}finally{rt(!1)}}return o.memoizedState=[c,r],c}function om(t,r,o){return o===void 0||(Pa&1073741824)!==0&&(sn&261930)===0?t.memoizedState=r:(t.memoizedState=o,t=s0(),Kt.lanes|=t,xi|=t,o)}function sb(t,r,o,c){return vr(o,r)?o:rl.current!==null?(t=om(t,o,c),vr(t,r)||(xs=!0),t):(Pa&42)===0||(Pa&1073741824)!==0&&(sn&261930)===0?(xs=!0,t.memoizedState=o):(t=s0(),Kt.lanes|=t,xi|=t,r)}function rb(t,r,o,c,f){var m=Se.p;Se.p=m!==0&&8>m?m:8;var b=Y.T,S={};Y.T=S,um(t,!1,r,o);try{var B=f(),se=Y.S;if(se!==null&&se(S,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ve=$k(B,c);pc(t,r,ve,Tr(t))}else pc(t,r,c,Tr(t))}catch(Ce){pc(t,r,{then:function(){},status:"rejected",reason:Ce},Tr())}finally{Se.p=m,b!==null&&S.types!==null&&(b.types=S.types),Y.T=b}}function Xk(){}function lm(t,r,o,c){if(t.tag!==5)throw Error(i(476));var f=ab(t).queue;rb(t,f,r,Ve,o===null?Xk:function(){return ib(t),o(c)})}function ab(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Ve,baseState:Ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:Ve},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:o},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function ib(t){var r=ab(t);r.next===null&&(r=t.alternate.memoizedState),pc(t,r.next.queue,{},Tr())}function cm(){return Ls(Ic)}function ob(){return ms().memoizedState}function lb(){return ms().memoizedState}function Jk(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var o=Tr();t=mi(o);var c=pi(r,t,o);c!==null&&(ur(c,r,o),uc(c,r,o)),r={cache:Vf()},t.payload=r;return}r=r.return}}function Zk(t,r,o){var c=Tr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},gh(t)?ub(r,o):(o=Sf(t,r,o,c),o!==null&&(ur(o,t,c),hb(o,r,c)))}function cb(t,r,o){var c=Tr();pc(t,r,o,c)}function pc(t,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(gh(t))ub(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,S=m(b,o);if(f.hasEagerState=!0,f.eagerState=S,vr(S,b))return Qu(t,r,f,0),Bn===null&&Yu(),!1}catch{}if(o=Sf(t,r,f,c),o!==null)return ur(o,t,c),hb(o,r,c),!0}return!1}function um(t,r,o,c){if(c={lane:2,revertLane:Fm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},gh(t)){if(r)throw Error(i(479))}else r=Sf(t,o,c,2),r!==null&&ur(r,t,2)}function gh(t){var r=t.alternate;return t===Kt||r!==null&&r===Kt}function ub(t,r){al=ch=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function hb(t,r,o){if((o&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,Fs(t,o)}}var gc={readContext:Ls,use:dh,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useLayoutEffect:is,useInsertionEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useSyncExternalStore:is,useId:is,useHostTransitionStatus:is,useFormState:is,useActionState:is,useOptimistic:is,useMemoCache:is,useCacheRefresh:is};gc.useEffectEvent=is;var db={readContext:Ls,use:dh,useCallback:function(t,r){return tr().memoizedState=[t,r===void 0?null:r],t},useContext:Ls,useEffect:Yv,useImperativeHandle:function(t,r,o){o=o!=null?o.concat([t]):null,mh(4194308,4,Zv.bind(null,r,t),o)},useLayoutEffect:function(t,r){return mh(4194308,4,t,r)},useInsertionEffect:function(t,r){mh(4,2,t,r)},useMemo:function(t,r){var o=tr();r=r===void 0?null:r;var c=t();if(go){rt(!0);try{t()}finally{rt(!1)}}return o.memoizedState=[c,r],c},useReducer:function(t,r,o){var c=tr();if(o!==void 0){var f=o(r);if(go){rt(!0);try{o(r)}finally{rt(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=Zk.bind(null,Kt,t),[c.memoizedState,t]},useRef:function(t){var r=tr();return t={current:t},r.memoizedState=t},useState:function(t){t=sm(t);var r=t.queue,o=cb.bind(null,Kt,r);return r.dispatch=o,[t.memoizedState,o]},useDebugValue:im,useDeferredValue:function(t,r){var o=tr();return om(o,t,r)},useTransition:function(){var t=sm(!1);return t=rb.bind(null,Kt,t.queue,!0,!1),tr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,o){var c=Kt,f=tr();if(hn){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Bn===null)throw Error(i(349));(sn&127)!==0||Mv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Yv(Pv.bind(null,c,m,t),[t]),c.flags|=2048,ol(9,{destroy:void 0},Dv.bind(null,c,m,o,r),null),o},useId:function(){var t=tr(),r=Bn.identifierPrefix;if(hn){var o=fa,c=da;o=(c&~(1<<32-qe(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=uh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Wk++,r="_"+r+"r_"+o.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:cm,useFormState:Hv,useActionState:Hv,useOptimistic:function(t){var r=tr();r.memoizedState=r.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=um.bind(null,Kt,!0,o),o.dispatch=r,[t,r]},useMemoCache:em,useCacheRefresh:function(){return tr().memoizedState=Jk.bind(null,Kt)},useEffectEvent:function(t){var r=tr(),o={impl:t};return r.memoizedState=o,function(){if((Tn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},hm={readContext:Ls,use:dh,useCallback:tb,useContext:Ls,useEffect:am,useImperativeHandle:eb,useInsertionEffect:Xv,useLayoutEffect:Jv,useMemo:nb,useReducer:fh,useRef:Kv,useState:function(){return fh(La)},useDebugValue:im,useDeferredValue:function(t,r){var o=ms();return sb(o,Dn.memoizedState,t,r)},useTransition:function(){var t=fh(La)[0],r=ms().memoizedState;return[typeof t=="boolean"?t:mc(t),r]},useSyncExternalStore:Iv,useId:ob,useHostTransitionStatus:cm,useFormState:$v,useActionState:$v,useOptimistic:function(t,r){var o=ms();return Vv(o,Dn,t,r)},useMemoCache:em,useCacheRefresh:lb};hm.useEffectEvent=Qv;var fb={readContext:Ls,use:dh,useCallback:tb,useContext:Ls,useEffect:am,useImperativeHandle:eb,useInsertionEffect:Xv,useLayoutEffect:Jv,useMemo:nb,useReducer:nm,useRef:Kv,useState:function(){return nm(La)},useDebugValue:im,useDeferredValue:function(t,r){var o=ms();return Dn===null?om(o,t,r):sb(o,Dn.memoizedState,t,r)},useTransition:function(){var t=nm(La)[0],r=ms().memoizedState;return[typeof t=="boolean"?t:mc(t),r]},useSyncExternalStore:Iv,useId:ob,useHostTransitionStatus:cm,useFormState:Gv,useActionState:Gv,useOptimistic:function(t,r){var o=ms();return Dn!==null?Vv(o,Dn,t,r):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:em,useCacheRefresh:lb};fb.useEffectEvent=Qv;function dm(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:k({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var fm={enqueueSetState:function(t,r,o){t=t._reactInternals;var c=Tr(),f=mi(c);f.payload=r,o!=null&&(f.callback=o),r=pi(t,f,c),r!==null&&(ur(r,t,c),uc(r,t,c))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=Tr(),f=mi(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=pi(t,f,c),r!==null&&(ur(r,t,c),uc(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Tr(),c=mi(o);c.tag=2,r!=null&&(c.callback=r),r=pi(t,c,o),r!==null&&(ur(r,t,o),uc(r,t,o))}};function mb(t,r,o,c,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!nc(o,c)||!nc(f,m):!0}function pb(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&fm.enqueueReplaceState(r,r.state,null)}function yo(t,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(t=t.defaultProps){o===r&&(o=k({},o));for(var f in t)o[f]===void 0&&(o[f]=t[f])}return o}function gb(t){Ku(t)}function yb(t){console.error(t)}function vb(t){Ku(t)}function yh(t,r){try{var o=t.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function bb(t,r,o){try{var c=t.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function mm(t,r,o){return o=mi(o),o.tag=3,o.payload={element:null},o.callback=function(){yh(t,r)},o}function xb(t){return t=mi(t),t.tag=3,t}function wb(t,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){bb(r,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){bb(r,o,c),typeof f!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function eT(t,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&Zo(r,o,f,!0),o=xr.current,o!==null){switch(o.tag){case 31:case 13:return Lr===null?Ch():o.alternate===null&&os===0&&(os=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===rh?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Bm(t,c,f)),!1;case 22:return o.flags|=65536,c===rh?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Bm(t,c,f)),!1}throw Error(i(435,o.tag))}return Bm(t,c,f),Ch(),!1}if(hn)return r=xr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Mf&&(t=Error(i(422),{cause:c}),ac(Ir(t,o)))):(c!==Mf&&(r=Error(i(423),{cause:c}),ac(Ir(r,o))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=Ir(c,o),f=mm(t.stateNode,c,f),Hf(t,f),os!==4&&(os=2)),!1;var m=Error(i(520),{cause:c});if(m=Ir(m,o),Tc===null?Tc=[m]:Tc.push(m),os!==4&&(os=2),r===null)return!0;c=Ir(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,t=f&-f,o.lanes|=t,t=mm(o.stateNode,c,t),Hf(o,t),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(wi===null||!wi.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=xb(f),wb(f,t,o,c),Hf(o,f),!1}o=o.return}while(o!==null);return!1}var pm=Error(i(461)),xs=!1;function Os(t,r,o,c){r.child=t===null?Ev(r,null,o,c):po(r,t.child,o,c)}function _b(t,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var b={};for(var S in c)S!=="ref"&&(b[S]=c[S])}else b=c;return uo(r),c=Qf(t,r,o,b,m,f),S=Xf(),t!==null&&!xs?(Jf(t,r,f),Oa(t,r,f)):(hn&&S&&Af(r),r.flags|=1,Os(t,r,c,f),r.child)}function kb(t,r,o,c,f){if(t===null){var m=o.type;return typeof m=="function"&&!Nf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,Tb(t,r,m,c,f)):(t=Ju(o.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!km(t,f)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:nc,o(b,c)&&t.ref===r.ref)return Oa(t,r,f)}return r.flags|=1,t=Aa(m,c),t.ref=r.ref,t.return=r,r.child=t}function Tb(t,r,o,c,f){if(t!==null){var m=t.memoizedProps;if(nc(m,c)&&t.ref===r.ref)if(xs=!1,r.pendingProps=c=m,km(t,f))(t.flags&131072)!==0&&(xs=!0);else return r.lanes=t.lanes,Oa(t,r,f)}return gm(t,r,o,c,f)}function Eb(t,r,o,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return jb(t,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&nh(r,m!==null?m.cachePool:null),m!==null?Nv(r,m):Wf(),Cv(r);else return c=r.lanes=536870912,jb(t,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(nh(r,m.cachePool),Nv(r,m),yi(),r.memoizedState=null):(t!==null&&nh(r,null),Wf(),yi());return Os(t,r,f,o),r.child}function yc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function jb(t,r,o,c,f){var m=Uf();return m=m===null?null:{parent:vs._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},t!==null&&nh(r,null),Wf(),Cv(r),t!==null&&Zo(t,r,c,!0),r.childLanes=f,null}function vh(t,r){return r=xh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Sb(t,r,o){return po(r,t.child,null,o),t=vh(r,r.pendingProps),t.flags|=2,wr(r),r.memoizedState=null,t}function tT(t,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(hn){if(c.mode==="hidden")return t=vh(r,c),r.lanes=536870912,yc(null,t);if(Kf(r),(t=Wn)?(t=B0(t,Pr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ci!==null?{id:da,overflow:fa}:null,retryLane:536870912,hydrationErrors:null},o=uv(t),o.return=r,r.child=o,Ps=r,Wn=null)):t=null,t===null)throw hi(r);return r.lanes=536870912,null}return vh(r,c)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(Kf(r),f)if(r.flags&256)r.flags&=-257,r=Sb(t,r,o);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(i(558));else if(xs||Zo(t,r,o,!1),f=(o&t.childLanes)!==0,xs||f){if(c=Bn,c!==null&&(b=Cs(c,o),b!==0&&b!==m.retryLane))throw m.retryLane=b,io(t,b),ur(c,t,b),pm;Ch(),r=Sb(t,r,o)}else t=m.treeContext,Wn=Or(b.nextSibling),Ps=r,hn=!0,ui=null,Pr=!1,t!==null&&fv(r,t),r=vh(r,c),r.flags|=4096;return r}return t=Aa(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function bh(t,r){var o=r.ref;if(o===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(t===null||t.ref!==o)&&(r.flags|=4194816)}}function gm(t,r,o,c,f){return uo(r),o=Qf(t,r,o,c,void 0,f),c=Xf(),t!==null&&!xs?(Jf(t,r,f),Oa(t,r,f)):(hn&&c&&Af(r),r.flags|=1,Os(t,r,o,f),r.child)}function Nb(t,r,o,c,f,m){return uo(r),r.updateQueue=null,o=Av(r,c,o,f),Rv(t),c=Xf(),t!==null&&!xs?(Jf(t,r,m),Oa(t,r,m)):(hn&&c&&Af(r),r.flags|=1,Os(t,r,o,m),r.child)}function Cb(t,r,o,c,f){if(uo(r),r.stateNode===null){var m=Yo,b=o.contextType;typeof b=="object"&&b!==null&&(m=Ls(b)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=fm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Ff(r),b=o.contextType,m.context=typeof b=="object"&&b!==null?Ls(b):Yo,m.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(dm(r,o,b,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&fm.enqueueReplaceState(m,m.state,null),dc(r,c,m,f),hc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var S=r.memoizedProps,B=yo(o,S);m.props=B;var se=m.context,ve=o.contextType;b=Yo,typeof ve=="object"&&ve!==null&&(b=Ls(ve));var Ce=o.getDerivedStateFromProps;ve=typeof Ce=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,ve||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||se!==b)&&pb(r,m,c,b),fi=!1;var ie=r.memoizedState;m.state=ie,dc(r,c,m,f),hc(),se=r.memoizedState,S||ie!==se||fi?(typeof Ce=="function"&&(dm(r,o,Ce,c),se=r.memoizedState),(B=fi||mb(r,o,B,c,ie,se,b))?(ve||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=se),m.props=c,m.state=se,m.context=b,c=B):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,qf(t,r),b=r.memoizedProps,ve=yo(o,b),m.props=ve,Ce=r.pendingProps,ie=m.context,se=o.contextType,B=Yo,typeof se=="object"&&se!==null&&(B=Ls(se)),S=o.getDerivedStateFromProps,(se=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==Ce||ie!==B)&&pb(r,m,c,B),fi=!1,ie=r.memoizedState,m.state=ie,dc(r,c,m,f),hc();var de=r.memoizedState;b!==Ce||ie!==de||fi||t!==null&&t.dependencies!==null&&eh(t.dependencies)?(typeof S=="function"&&(dm(r,o,S,c),de=r.memoizedState),(ve=fi||mb(r,o,ve,c,ie,de,B)||t!==null&&t.dependencies!==null&&eh(t.dependencies))?(se||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,de,B),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,de,B)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&ie===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&ie===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=de),m.props=c,m.state=de,m.context=B,c=ve):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&ie===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&ie===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,bh(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=po(r,t.child,null,f),r.child=po(r,null,o,f)):Os(t,r,o,f),r.memoizedState=m.state,t=r.child):t=Oa(t,r,f),t}function Rb(t,r,o,c){return lo(),r.flags|=256,Os(t,r,o,c),r.child}var ym={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vm(t){return{baseLanes:t,cachePool:bv()}}function bm(t,r,o){return t=t!==null?t.childLanes&~o:0,r&&(t|=kr),t}function Ab(t,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(fs.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(hn){if(f?gi(r):yi(),(t=Wn)?(t=B0(t,Pr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ci!==null?{id:da,overflow:fa}:null,retryLane:536870912,hydrationErrors:null},o=uv(t),o.return=r,r.child=o,Ps=r,Wn=null)):t=null,t===null)throw hi(r);return tp(t)?r.lanes=32:r.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(yi(),f=r.mode,S=xh({mode:"hidden",children:S},f),c=oo(c,f,o,null),S.return=r,c.return=r,S.sibling=c,r.child=S,c=r.child,c.memoizedState=vm(o),c.childLanes=bm(t,b,o),r.memoizedState=ym,yc(null,c)):(gi(r),xm(r,S))}var B=t.memoizedState;if(B!==null&&(S=B.dehydrated,S!==null)){if(m)r.flags&256?(gi(r),r.flags&=-257,r=wm(t,r,o)):r.memoizedState!==null?(yi(),r.child=t.child,r.flags|=128,r=null):(yi(),S=c.fallback,f=r.mode,c=xh({mode:"visible",children:c.children},f),S=oo(S,f,o,null),S.flags|=2,c.return=r,S.return=r,c.sibling=S,r.child=c,po(r,t.child,null,o),c=r.child,c.memoizedState=vm(o),c.childLanes=bm(t,b,o),r.memoizedState=ym,r=yc(null,c));else if(gi(r),tp(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var se=b.dgst;b=se,c=Error(i(419)),c.stack="",c.digest=b,ac({value:c,source:null,stack:null}),r=wm(t,r,o)}else if(xs||Zo(t,r,o,!1),b=(o&t.childLanes)!==0,xs||b){if(b=Bn,b!==null&&(c=Cs(b,o),c!==0&&c!==B.retryLane))throw B.retryLane=c,io(t,c),ur(b,t,c),pm;ep(S)||Ch(),r=wm(t,r,o)}else ep(S)?(r.flags|=192,r.child=t.child,r=null):(t=B.treeContext,Wn=Or(S.nextSibling),Ps=r,hn=!0,ui=null,Pr=!1,t!==null&&fv(r,t),r=xm(r,c.children),r.flags|=4096);return r}return f?(yi(),S=c.fallback,f=r.mode,B=t.child,se=B.sibling,c=Aa(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,se!==null?S=Aa(se,S):(S=oo(S,f,o,null),S.flags|=2),S.return=r,c.return=r,c.sibling=S,r.child=c,yc(null,c),c=r.child,S=t.child.memoizedState,S===null?S=vm(o):(f=S.cachePool,f!==null?(B=vs._currentValue,f=f.parent!==B?{parent:B,pool:B}:f):f=bv(),S={baseLanes:S.baseLanes|o,cachePool:f}),c.memoizedState=S,c.childLanes=bm(t,b,o),r.memoizedState=ym,yc(t.child,c)):(gi(r),o=t.child,t=o.sibling,o=Aa(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=o,r.memoizedState=null,o)}function xm(t,r){return r=xh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function xh(t,r){return t=br(22,t,null,r),t.lanes=0,t}function wm(t,r,o){return po(r,t.child,null,o),t=xm(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Ib(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Lf(t.return,r,o)}function _m(t,r,o,c,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=f,b.treeForkCount=m)}function Mb(t,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var b=fs.current,S=(b&2)!==0;if(S?(b=b&1|2,r.flags|=128):b&=1,pe(fs,b),Os(t,r,c,o),c=hn?rc:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ib(t,o,r);else if(t.tag===19)Ib(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&lh(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),_m(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&lh(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}_m(r,!0,o,null,m,c);break;case"together":_m(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Oa(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),xi|=r.lanes,(o&r.childLanes)===0)if(t!==null){if(Zo(t,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(i(153));if(r.child!==null){for(t=r.child,o=Aa(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Aa(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function km(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&eh(t)))}function nT(t,r,o){switch(r.tag){case 3:yt(r,r.stateNode.containerInfo),di(r,vs,t.memoizedState.cache),lo();break;case 27:case 5:Ft(r);break;case 4:yt(r,r.stateNode.containerInfo);break;case 10:di(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Kf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(gi(r),r.flags|=128,null):(o&r.child.childLanes)!==0?Ab(t,r,o):(gi(r),t=Oa(t,r,o),t!==null?t.sibling:null);gi(r);break;case 19:var f=(t.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(Zo(t,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return Mb(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),pe(fs,fs.current),c)break;return null;case 22:return r.lanes=0,Eb(t,r,o,r.pendingProps);case 24:di(r,vs,t.memoizedState.cache)}return Oa(t,r,o)}function Db(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps)xs=!0;else{if(!km(t,o)&&(r.flags&128)===0)return xs=!1,nT(t,r,o);xs=(t.flags&131072)!==0}else xs=!1,hn&&(r.flags&1048576)!==0&&dv(r,rc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=fo(r.elementType),r.type=t,typeof t=="function")Nf(t)?(c=yo(t,c),r.tag=1,r=Cb(null,r,t,c,o)):(r.tag=0,r=gm(null,r,t,c,o));else{if(t!=null){var f=t.$$typeof;if(f===je){r.tag=11,r=_b(null,r,t,c,o);break e}else if(f===A){r.tag=14,r=kb(null,r,t,c,o);break e}}throw r=Fe(t)||t,Error(i(306,r,""))}}return r;case 0:return gm(t,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=yo(c,r.pendingProps),Cb(t,r,c,f,o);case 3:e:{if(yt(r,r.stateNode.containerInfo),t===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,qf(t,r),dc(r,c,null,o);var b=r.memoizedState;if(c=b.cache,di(r,vs,c),c!==m.cache&&Of(r,[vs],o,!0),hc(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Rb(t,r,c,o);break e}else if(c!==f){f=Ir(Error(i(424)),r),ac(f),r=Rb(t,r,c,o);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Wn=Or(t.firstChild),Ps=r,hn=!0,ui=null,Pr=!0,o=Ev(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(lo(),c===f){r=Oa(t,r,o);break e}Os(t,r,c,o)}r=r.child}return r;case 26:return bh(t,r),t===null?(o=$0(r.type,null,r.pendingProps,null))?r.memoizedState=o:hn||(o=r.type,t=r.pendingProps,c=Lh(_e.current).createElement(o),c[it]=r,c[It]=t,Vs(c,o,t),C(c),r.stateNode=c):r.memoizedState=$0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Ft(r),t===null&&hn&&(c=r.stateNode=F0(r.type,r.pendingProps,_e.current),Ps=r,Pr=!0,f=Wn,Ei(r.type)?(np=f,Wn=Or(c.firstChild)):Wn=f),Os(t,r,r.pendingProps.children,o),bh(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&hn&&((f=c=Wn)&&(c=IT(c,r.type,r.pendingProps,Pr),c!==null?(r.stateNode=c,Ps=r,Wn=Or(c.firstChild),Pr=!1,f=!0):f=!1),f||hi(r)),Ft(r),f=r.type,m=r.pendingProps,b=t!==null?t.memoizedProps:null,c=m.children,Xm(f,m)?c=null:b!==null&&Xm(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Qf(t,r,Gk,null,null,o),Ic._currentValue=f),bh(t,r),Os(t,r,c,o),r.child;case 6:return t===null&&hn&&((t=o=Wn)&&(o=MT(o,r.pendingProps,Pr),o!==null?(r.stateNode=o,Ps=r,Wn=null,t=!0):t=!1),t||hi(r)),null;case 13:return Ab(t,r,o);case 4:return yt(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=po(r,null,c,o):Os(t,r,c,o),r.child;case 11:return _b(t,r,r.type,r.pendingProps,o);case 7:return Os(t,r,r.pendingProps,o),r.child;case 8:return Os(t,r,r.pendingProps.children,o),r.child;case 12:return Os(t,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,di(r,r.type,c.value),Os(t,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,uo(r),f=Ls(f),c=c(f),r.flags|=1,Os(t,r,c,o),r.child;case 14:return kb(t,r,r.type,r.pendingProps,o);case 15:return Tb(t,r,r.type,r.pendingProps,o);case 19:return Mb(t,r,o);case 31:return tT(t,r,o);case 22:return Eb(t,r,o,r.pendingProps);case 24:return uo(r),c=Ls(vs),t===null?(f=Uf(),f===null&&(f=Bn,m=Vf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},Ff(r),di(r,vs,f)):((t.lanes&o)!==0&&(qf(t,r),dc(r,null,null,o),hc()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),di(r,vs,c)):(c=m.cache,di(r,vs,c),c!==f.cache&&Of(r,[vs],o,!0))),Os(t,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Va(t){t.flags|=4}function Tm(t,r,o,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(o0())t.flags|=8192;else throw mo=rh,zf}else t.flags&=-16777217}function Pb(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Q0(r))if(o0())t.flags|=8192;else throw mo=rh,zf}function wh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?gs():536870912,t.lanes|=r,hl|=r)}function vc(t,r){if(!hn)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Gn(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function sT(t,r,o){var c=r.pendingProps;switch(If(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(r),null;case 1:return Gn(r),null;case 3:return o=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Da(vs),Je(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Jo(r)?Va(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Df())),Gn(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(Va(r),m!==null?(Gn(r),Pb(r,m)):(Gn(r),Tm(r,f,null,c,o))):m?m!==t.memoizedState?(Va(r),Gn(r),Pb(r,m)):(Gn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&Va(r),Gn(r),Tm(r,f,t,c,o)),null;case 27:if(cn(r),o=_e.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&Va(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Gn(r),null}t=Ne.current,Jo(r)?mv(r):(t=F0(f,c,o),r.stateNode=t,Va(r))}return Gn(r),null;case 5:if(cn(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&Va(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Gn(r),null}if(m=Ne.current,Jo(r))mv(r);else{var b=Lh(_e.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(f,{is:c.is}):b.createElement(f)}}m[it]=r,m[It]=c;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(Vs(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Va(r)}}return Gn(r),Tm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,o),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&Va(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(t=_e.current,Jo(r)){if(t=r.stateNode,o=r.memoizedProps,c=null,f=Ps,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[it]=r,t=!!(t.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||A0(t.nodeValue,o)),t||hi(r,!0)}else t=Lh(t).createTextNode(c),t[it]=r,r.stateNode=t}return Gn(r),null;case 31:if(o=r.memoizedState,t===null||t.memoizedState!==null){if(c=Jo(r),o!==null){if(t===null){if(!c)throw Error(i(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[it]=r}else lo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Gn(r),t=!1}else o=Df(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return r.flags&256?(wr(r),r):(wr(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Gn(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Jo(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[it]=r}else lo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Gn(r),f=!1}else f=Df(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(wr(r),r):(wr(r),null)}return wr(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,t=t!==null&&t.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==t&&o&&(r.child.flags|=8192),wh(r,r.updateQueue),Gn(r),null);case 4:return Je(),t===null&&Wm(r.stateNode.containerInfo),Gn(r),null;case 10:return Da(r.type),Gn(r),null;case 19:if(W(fs),c=r.memoizedState,c===null)return Gn(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)vc(c,!1);else{if(os!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=lh(t),m!==null){for(r.flags|=128,vc(c,!1),t=m.updateQueue,r.updateQueue=t,wh(r,t),r.subtreeFlags=0,t=o,o=r.child;o!==null;)cv(o,t),o=o.sibling;return pe(fs,fs.current&1|2),hn&&Ia(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&pt()>jh&&(r.flags|=128,f=!0,vc(c,!1),r.lanes=4194304)}else{if(!f)if(t=lh(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,wh(r,t),vc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!hn)return Gn(r),null}else 2*pt()-c.renderingStartTime>jh&&o!==536870912&&(r.flags|=128,f=!0,vc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=pt(),t.sibling=null,o=fs.current,pe(fs,f?o&1|2:o&1),hn&&Ia(r,c.treeForkCount),t):(Gn(r),null);case 22:case 23:return wr(r),Gf(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Gn(r),r.subtreeFlags&6&&(r.flags|=8192)):Gn(r),o=r.updateQueue,o!==null&&wh(r,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),t!==null&&W(ho),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Da(vs),Gn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function rT(t,r){switch(If(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Da(vs),Je(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return cn(r),null;case 31:if(r.memoizedState!==null){if(wr(r),r.alternate===null)throw Error(i(340));lo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(wr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(i(340));lo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return W(fs),null;case 4:return Je(),null;case 10:return Da(r.type),null;case 22:case 23:return wr(r),Gf(),t!==null&&W(ho),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Da(vs),null;case 25:return null;default:return null}}function Lb(t,r){switch(If(r),r.tag){case 3:Da(vs),Je();break;case 26:case 27:case 5:cn(r);break;case 4:Je();break;case 31:r.memoizedState!==null&&wr(r);break;case 13:wr(r);break;case 19:W(fs);break;case 10:Da(r.type);break;case 22:case 23:wr(r),Gf(),t!==null&&W(ho);break;case 24:Da(vs)}}function bc(t,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&t)===t){c=void 0;var m=o.create,b=o.inst;c=m(),b.destroy=c}o=o.next}while(o!==f)}}catch(S){Rn(r,r.return,S)}}function vi(t,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var b=c.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,f=r;var B=o,se=S;try{se()}catch(ve){Rn(f,B,ve)}}}c=c.next}while(c!==m)}}catch(ve){Rn(r,r.return,ve)}}function Ob(t){var r=t.updateQueue;if(r!==null){var o=t.stateNode;try{Sv(r,o)}catch(c){Rn(t,t.return,c)}}}function Vb(t,r,o){o.props=yo(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(c){Rn(t,r,c)}}function xc(t,r){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof o=="function"?t.refCleanup=o(c):o.current=c}}catch(f){Rn(t,r,f)}}function ma(t,r){var o=t.ref,c=t.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){Rn(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Rn(t,r,f)}else o.current=null}function Bb(t){var r=t.type,o=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){Rn(t,t.return,f)}}function Em(t,r,o){try{var c=t.stateNode;jT(c,t.type,o,r),c[It]=r}catch(f){Rn(t,t.return,f)}}function Ub(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ei(t.type)||t.tag===4}function jm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ub(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ei(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sm(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(t),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ot));else if(c!==4&&(c===27&&Ei(t.type)&&(o=t.stateNode,r=null),t=t.child,t!==null))for(Sm(t,r,o),t=t.sibling;t!==null;)Sm(t,r,o),t=t.sibling}function _h(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(c===27&&Ei(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(_h(t,r,o),t=t.sibling;t!==null;)_h(t,r,o),t=t.sibling}function zb(t){var r=t.stateNode,o=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Vs(r,c,o),r[it]=t,r[It]=o}catch(m){Rn(t,t.return,m)}}var Ba=!1,ws=!1,Nm=!1,Fb=typeof WeakSet=="function"?WeakSet:Set,As=null;function aT(t,r){if(t=t.containerInfo,Ym=qh,t=ev(t),wf(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var b=0,S=-1,B=-1,se=0,ve=0,Ce=t,ie=null;t:for(;;){for(var de;Ce!==o||f!==0&&Ce.nodeType!==3||(S=b+f),Ce!==m||c!==0&&Ce.nodeType!==3||(B=b+c),Ce.nodeType===3&&(b+=Ce.nodeValue.length),(de=Ce.firstChild)!==null;)ie=Ce,Ce=de;for(;;){if(Ce===t)break t;if(ie===o&&++se===f&&(S=b),ie===m&&++ve===c&&(B=b),(de=Ce.nextSibling)!==null)break;Ce=ie,ie=Ce.parentNode}Ce=de}o=S===-1||B===-1?null:{start:S,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(Qm={focusedElem:t,selectionRange:o},qh=!1,As=r;As!==null;)if(r=As,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,As=t;else for(;As!==null;){switch(r=As,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)f=t[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var ft=yo(o.type,f);t=c.getSnapshotBeforeUpdate(ft,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(At){Rn(o,o.return,At)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,o=t.nodeType,o===9)Zm(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=r.sibling,t!==null){t.return=r.return,As=t;break}As=r.return}}function qb(t,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:za(t,o),c&4&&bc(5,o);break;case 1:if(za(t,o),c&4)if(t=o.stateNode,r===null)try{t.componentDidMount()}catch(b){Rn(o,o.return,b)}else{var f=yo(o.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Rn(o,o.return,b)}}c&64&&Ob(o),c&512&&xc(o,o.return);break;case 3:if(za(t,o),c&64&&(t=o.updateQueue,t!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{Sv(t,r)}catch(b){Rn(o,o.return,b)}}break;case 27:r===null&&c&4&&zb(o);case 26:case 5:za(t,o),r===null&&c&4&&Bb(o),c&512&&xc(o,o.return);break;case 12:za(t,o);break;case 31:za(t,o),c&4&&Wb(t,o);break;case 13:za(t,o),c&4&&Gb(t,o),c&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=mT.bind(null,o),DT(t,o))));break;case 22:if(c=o.memoizedState!==null||Ba,!c){r=r!==null&&r.memoizedState!==null||ws,f=Ba;var m=ws;Ba=c,(ws=r)&&!m?Fa(t,o,(o.subtreeFlags&8772)!==0):za(t,o),Ba=f,ws=m}break;case 30:break;default:za(t,o)}}function Hb(t){var r=t.alternate;r!==null&&(t.alternate=null,Hb(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&qs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Xn=null,ir=!1;function Ua(t,r,o){for(o=o.child;o!==null;)$b(t,r,o),o=o.sibling}function $b(t,r,o){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(We,o)}catch{}switch(o.tag){case 26:ws||ma(o,r),Ua(t,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ws||ma(o,r);var c=Xn,f=ir;Ei(o.type)&&(Xn=o.stateNode,ir=!1),Ua(t,r,o),Cc(o.stateNode),Xn=c,ir=f;break;case 5:ws||ma(o,r);case 6:if(c=Xn,f=ir,Xn=null,Ua(t,r,o),Xn=c,ir=f,Xn!==null)if(ir)try{(Xn.nodeType===9?Xn.body:Xn.nodeName==="HTML"?Xn.ownerDocument.body:Xn).removeChild(o.stateNode)}catch(m){Rn(o,r,m)}else try{Xn.removeChild(o.stateNode)}catch(m){Rn(o,r,m)}break;case 18:Xn!==null&&(ir?(t=Xn,O0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),bl(t)):O0(Xn,o.stateNode));break;case 4:c=Xn,f=ir,Xn=o.stateNode.containerInfo,ir=!0,Ua(t,r,o),Xn=c,ir=f;break;case 0:case 11:case 14:case 15:vi(2,o,r),ws||vi(4,o,r),Ua(t,r,o);break;case 1:ws||(ma(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&Vb(o,r,c)),Ua(t,r,o);break;case 21:Ua(t,r,o);break;case 22:ws=(c=ws)||o.memoizedState!==null,Ua(t,r,o),ws=c;break;default:Ua(t,r,o)}}function Wb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{bl(t)}catch(o){Rn(r,r.return,o)}}}function Gb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{bl(t)}catch(o){Rn(r,r.return,o)}}function iT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Fb),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Fb),r;default:throw Error(i(435,t.tag))}}function kh(t,r){var o=iT(t);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=pT.bind(null,t,c);c.then(f,f)}})}function or(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=t,b=r,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(Ei(S.type)){Xn=S.stateNode,ir=!1;break e}break;case 5:Xn=S.stateNode,ir=!1;break e;case 3:case 4:Xn=S.stateNode.containerInfo,ir=!0;break e}S=S.return}if(Xn===null)throw Error(i(160));$b(m,b,f),Xn=null,ir=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Kb(r,t),r=r.sibling}var Kr=null;function Kb(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:or(r,t),lr(t),c&4&&(vi(3,t,t.return),bc(3,t),vi(5,t,t.return));break;case 1:or(r,t),lr(t),c&512&&(ws||o===null||ma(o,o.return)),c&64&&Ba&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Kr;if(or(r,t),lr(t),c&512&&(ws||o===null||ma(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=t.memoizedState,o===null)if(c===null)if(t.stateNode===null){e:{c=t.type,o=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Es]||m[it]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Vs(m,c,o),m[it]=t,C(m),c=m;break e;case"link":var b=K0("link","href",f).get(c+(o.href||""));if(b){for(var S=0;S<b.length;S++)if(m=b[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(S,1);break t}}m=f.createElement(c),Vs(m,c,o),f.head.appendChild(m);break;case"meta":if(b=K0("meta","content",f).get(c+(o.content||""))){for(S=0;S<b.length;S++)if(m=b[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(S,1);break t}}m=f.createElement(c),Vs(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[it]=t,C(m),c=m}t.stateNode=c}else Y0(f,t.type,t.stateNode);else t.stateNode=G0(f,c,t.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?Y0(f,t.type,t.stateNode):G0(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Em(t,t.memoizedProps,o.memoizedProps)}break;case 27:or(r,t),lr(t),c&512&&(ws||o===null||ma(o,o.return)),o!==null&&c&4&&Em(t,t.memoizedProps,o.memoizedProps);break;case 5:if(or(r,t),lr(t),c&512&&(ws||o===null||ma(o,o.return)),t.flags&32){f=t.stateNode;try{De(f,"")}catch(ft){Rn(t,t.return,ft)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,Em(t,f,o!==null?o.memoizedProps:f)),c&1024&&(Nm=!0);break;case 6:if(or(r,t),lr(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,o=t.stateNode;try{o.nodeValue=c}catch(ft){Rn(t,t.return,ft)}}break;case 3:if(Bh=null,f=Kr,Kr=Oh(r.containerInfo),or(r,t),Kr=f,lr(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{bl(r.containerInfo)}catch(ft){Rn(t,t.return,ft)}Nm&&(Nm=!1,Yb(t));break;case 4:c=Kr,Kr=Oh(t.stateNode.containerInfo),or(r,t),lr(t),Kr=c;break;case 12:or(r,t),lr(t);break;case 31:or(r,t),lr(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,kh(t,c)));break;case 13:or(r,t),lr(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Eh=pt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,kh(t,c)));break;case 22:f=t.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,se=Ba,ve=ws;if(Ba=se||f,ws=ve||B,or(r,t),ws=ve,Ba=se,lr(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||B||Ba||ws||vo(t)),o=null,r=t;;){if(r.tag===5||r.tag===26){if(o===null){B=o=r;try{if(m=B.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=B.stateNode;var Ce=B.memoizedProps.style,ie=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;S.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(ft){Rn(B,B.return,ft)}}}else if(r.tag===6){if(o===null){B=r;try{B.stateNode.nodeValue=f?"":B.memoizedProps}catch(ft){Rn(B,B.return,ft)}}}else if(r.tag===18){if(o===null){B=r;try{var de=B.stateNode;f?V0(de,!0):V0(B.stateNode,!1)}catch(ft){Rn(B,B.return,ft)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,kh(t,o))));break;case 19:or(r,t),lr(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,kh(t,c)));break;case 30:break;case 21:break;default:or(r,t),lr(t)}}function lr(t){var r=t.flags;if(r&2){try{for(var o,c=t.return;c!==null;){if(Ub(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=jm(t);_h(t,m,f);break;case 5:var b=o.stateNode;o.flags&32&&(De(b,""),o.flags&=-33);var S=jm(t);_h(t,S,b);break;case 3:case 4:var B=o.stateNode.containerInfo,se=jm(t);Sm(t,se,B);break;default:throw Error(i(161))}}catch(ve){Rn(t,t.return,ve)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Yb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Yb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function za(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)qb(t,r.alternate,r),r=r.sibling}function vo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:vi(4,r,r.return),vo(r);break;case 1:ma(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Vb(r,r.return,o),vo(r);break;case 27:Cc(r.stateNode);case 26:case 5:ma(r,r.return),vo(r);break;case 22:r.memoizedState===null&&vo(r);break;case 30:vo(r);break;default:vo(r)}t=t.sibling}}function Fa(t,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:Fa(f,m,o),bc(4,m);break;case 1:if(Fa(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(se){Rn(c,c.return,se)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var B=f.shared.hiddenCallbacks;if(B!==null)for(f.shared.hiddenCallbacks=null,f=0;f<B.length;f++)jv(B[f],S)}catch(se){Rn(c,c.return,se)}}o&&b&64&&Ob(m),xc(m,m.return);break;case 27:zb(m);case 26:case 5:Fa(f,m,o),o&&c===null&&b&4&&Bb(m),xc(m,m.return);break;case 12:Fa(f,m,o);break;case 31:Fa(f,m,o),o&&b&4&&Wb(f,m);break;case 13:Fa(f,m,o),o&&b&4&&Gb(f,m);break;case 22:m.memoizedState===null&&Fa(f,m,o),xc(m,m.return);break;case 30:break;default:Fa(f,m,o)}r=r.sibling}}function Cm(t,r){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&ic(o))}function Rm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ic(t))}function Yr(t,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Qb(t,r,o,c),r=r.sibling}function Qb(t,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Yr(t,r,o,c),f&2048&&bc(9,r);break;case 1:Yr(t,r,o,c);break;case 3:Yr(t,r,o,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ic(t)));break;case 12:if(f&2048){Yr(t,r,o,c),t=r.stateNode;try{var m=r.memoizedProps,b=m.id,S=m.onPostCommit;typeof S=="function"&&S(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(B){Rn(r,r.return,B)}}else Yr(t,r,o,c);break;case 31:Yr(t,r,o,c);break;case 13:Yr(t,r,o,c);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?Yr(t,r,o,c):wc(t,r):m._visibility&2?Yr(t,r,o,c):(m._visibility|=2,ll(t,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Cm(b,r);break;case 24:Yr(t,r,o,c),f&2048&&Rm(r.alternate,r);break;default:Yr(t,r,o,c)}}function ll(t,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,b=r,S=o,B=c,se=b.flags;switch(b.tag){case 0:case 11:case 15:ll(m,b,S,B,f),bc(8,b);break;case 23:break;case 22:var ve=b.stateNode;b.memoizedState!==null?ve._visibility&2?ll(m,b,S,B,f):wc(m,b):(ve._visibility|=2,ll(m,b,S,B,f)),f&&se&2048&&Cm(b.alternate,b);break;case 24:ll(m,b,S,B,f),f&&se&2048&&Rm(b.alternate,b);break;default:ll(m,b,S,B,f)}r=r.sibling}}function wc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=t,c=r,f=c.flags;switch(c.tag){case 22:wc(o,c),f&2048&&Cm(c.alternate,c);break;case 24:wc(o,c),f&2048&&Rm(c.alternate,c);break;default:wc(o,c)}r=r.sibling}}var _c=8192;function cl(t,r,o){if(t.subtreeFlags&_c)for(t=t.child;t!==null;)Xb(t,r,o),t=t.sibling}function Xb(t,r,o){switch(t.tag){case 26:cl(t,r,o),t.flags&_c&&t.memoizedState!==null&&WT(o,Kr,t.memoizedState,t.memoizedProps);break;case 5:cl(t,r,o);break;case 3:case 4:var c=Kr;Kr=Oh(t.stateNode.containerInfo),cl(t,r,o),Kr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=_c,_c=16777216,cl(t,r,o),_c=c):cl(t,r,o));break;default:cl(t,r,o)}}function Jb(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function kc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];As=c,e0(c,t)}Jb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Zb(t),t=t.sibling}function Zb(t){switch(t.tag){case 0:case 11:case 15:kc(t),t.flags&2048&&vi(9,t,t.return);break;case 3:kc(t);break;case 12:kc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Th(t)):kc(t);break;default:kc(t)}}function Th(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];As=c,e0(c,t)}Jb(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:vi(8,r,r.return),Th(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Th(r));break;default:Th(r)}t=t.sibling}}function e0(t,r){for(;As!==null;){var o=As;switch(o.tag){case 0:case 11:case 15:vi(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ic(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,As=c;else e:for(o=t;As!==null;){c=As;var f=c.sibling,m=c.return;if(Hb(c),c===o){As=null;break e}if(f!==null){f.return=m,As=f;break e}As=m}}}var oT={getCacheForType:function(t){var r=Ls(vs),o=r.data.get(t);return o===void 0&&(o=t(),r.data.set(t,o)),o},cacheSignal:function(){return Ls(vs).controller.signal}},lT=typeof WeakMap=="function"?WeakMap:Map,Tn=0,Bn=null,tn=null,sn=0,Cn=0,_r=null,bi=!1,ul=!1,Am=!1,qa=0,os=0,xi=0,bo=0,Im=0,kr=0,hl=0,Tc=null,cr=null,Mm=!1,Eh=0,t0=0,jh=1/0,Sh=null,wi=null,Ss=0,_i=null,dl=null,Ha=0,Dm=0,Pm=null,n0=null,Ec=0,Lm=null;function Tr(){return(Tn&2)!==0&&sn!==0?sn&-sn:Y.T!==null?Fm():xe()}function s0(){if(kr===0)if((sn&536870912)===0||hn){var t=zn;zn<<=1,(zn&3932160)===0&&(zn=262144),kr=t}else kr=536870912;return t=xr.current,t!==null&&(t.flags|=32),kr}function ur(t,r,o){(t===Bn&&(Cn===2||Cn===9)||t.cancelPendingCommit!==null)&&(fl(t,0),ki(t,sn,kr,!1)),es(t,o),((Tn&2)===0||t!==Bn)&&(t===Bn&&((Tn&2)===0&&(bo|=o),os===4&&ki(t,sn,kr,!1)),pa(t))}function r0(t,r,o){if((Tn&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&t.expiredLanes)===0||In(t,r),f=c?hT(t,r):Vm(t,r,!0),m=c;do{if(f===0){ul&&!c&&ki(t,r,0,!1);break}else{if(o=t.current.alternate,m&&!cT(o)){f=Vm(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var S=t;f=Tc;var B=S.current.memoizedState.isDehydrated;if(B&&(fl(S,b).flags|=256),b=Vm(S,b,!1),b!==2){if(Am&&!B){S.errorRecoveryDisabledLanes|=m,bo|=m,f=4;break e}m=cr,cr=f,m!==null&&(cr===null?cr=m:cr.push.apply(cr,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){fl(t,0),ki(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:ki(c,r,kr,!bi);break e;case 2:cr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Eh+300-pt(),10<f)){if(ki(c,r,kr,!bi),Zn(c,0,!0)!==0)break e;Ha=r,c.timeoutHandle=P0(a0.bind(null,c,o,cr,Sh,Mm,r,kr,bo,hl,bi,m,"Throttled",-0,0),f);break e}a0(c,o,cr,Sh,Mm,r,kr,bo,hl,bi,m,null,-0,0)}}break}while(!0);pa(t)}function a0(t,r,o,c,f,m,b,S,B,se,ve,Ce,ie,de){if(t.timeoutHandle=-1,Ce=r.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ot},Xb(r,m,Ce);var ft=(m&62914560)===m?Eh-pt():(m&4194048)===m?t0-pt():0;if(ft=GT(Ce,ft),ft!==null){Ha=m,t.cancelPendingCommit=ft(f0.bind(null,t,r,m,o,c,f,b,S,B,ve,Ce,null,ie,de)),ki(t,m,b,!se);return}}f0(t,r,m,o,c,f,b,S,B)}function cT(t){for(var r=t;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!vr(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ki(t,r,o,c){r&=~Im,r&=~bo,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-qe(f),b=1<<m;c[m]=-1,f&=~b}o!==0&&Yn(t,o,r)}function Nh(){return(Tn&6)===0?(jc(0),!1):!0}function Om(){if(tn!==null){if(Cn===0)var t=tn.return;else t=tn,Ma=co=null,Zf(t),sl=null,lc=0,t=tn;for(;t!==null;)Lb(t.alternate,t),t=t.return;tn=null}}function fl(t,r){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,CT(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),Ha=0,Om(),Bn=t,tn=o=Aa(t.current,null),sn=r,Cn=0,_r=null,bi=!1,ul=In(t,r),Am=!1,hl=kr=Im=bo=xi=os=0,cr=Tc=null,Mm=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-qe(c),m=1<<f;r|=t[f],c&=~m}return qa=r,Yu(),o}function i0(t,r){Kt=null,Y.H=gc,r===nl||r===sh?(r=_v(),Cn=3):r===zf?(r=_v(),Cn=4):Cn=r===pm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,_r=r,tn===null&&(os=1,yh(t,Ir(r,t.current)))}function o0(){var t=xr.current;return t===null?!0:(sn&4194048)===sn?Lr===null:(sn&62914560)===sn||(sn&536870912)!==0?t===Lr:!1}function l0(){var t=Y.H;return Y.H=gc,t===null?gc:t}function c0(){var t=Y.A;return Y.A=oT,t}function Ch(){os=4,bi||(sn&4194048)!==sn&&xr.current!==null||(ul=!0),(xi&134217727)===0&&(bo&134217727)===0||Bn===null||ki(Bn,sn,kr,!1)}function Vm(t,r,o){var c=Tn;Tn|=2;var f=l0(),m=c0();(Bn!==t||sn!==r)&&(Sh=null,fl(t,r)),r=!1;var b=os;e:do try{if(Cn!==0&&tn!==null){var S=tn,B=_r;switch(Cn){case 8:Om(),b=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(r=!0);var se=Cn;if(Cn=0,_r=null,ml(t,S,B,se),o&&ul){b=0;break e}break;default:se=Cn,Cn=0,_r=null,ml(t,S,B,se)}}uT(),b=os;break}catch(ve){i0(t,ve)}while(!0);return r&&t.shellSuspendCounter++,Ma=co=null,Tn=c,Y.H=f,Y.A=m,tn===null&&(Bn=null,sn=0,Yu()),b}function uT(){for(;tn!==null;)u0(tn)}function hT(t,r){var o=Tn;Tn|=2;var c=l0(),f=c0();Bn!==t||sn!==r?(Sh=null,jh=pt()+500,fl(t,r)):ul=In(t,r);e:do try{if(Cn!==0&&tn!==null){r=tn;var m=_r;t:switch(Cn){case 1:Cn=0,_r=null,ml(t,r,m,1);break;case 2:case 9:if(xv(m)){Cn=0,_r=null,h0(r);break}r=function(){Cn!==2&&Cn!==9||Bn!==t||(Cn=7),pa(t)},m.then(r,r);break e;case 3:Cn=7;break e;case 4:Cn=5;break e;case 7:xv(m)?(Cn=0,_r=null,h0(r)):(Cn=0,_r=null,ml(t,r,m,7));break;case 5:var b=null;switch(tn.tag){case 26:b=tn.memoizedState;case 5:case 27:var S=tn;if(b?Q0(b):S.stateNode.complete){Cn=0,_r=null;var B=S.sibling;if(B!==null)tn=B;else{var se=S.return;se!==null?(tn=se,Rh(se)):tn=null}break t}}Cn=0,_r=null,ml(t,r,m,5);break;case 6:Cn=0,_r=null,ml(t,r,m,6);break;case 8:Om(),os=6;break e;default:throw Error(i(462))}}dT();break}catch(ve){i0(t,ve)}while(!0);return Ma=co=null,Y.H=c,Y.A=f,Tn=o,tn!==null?0:(Bn=null,sn=0,Yu(),os)}function dT(){for(;tn!==null&&!He();)u0(tn)}function u0(t){var r=Db(t.alternate,t,qa);t.memoizedProps=t.pendingProps,r===null?Rh(t):tn=r}function h0(t){var r=t,o=r.alternate;switch(r.tag){case 15:case 0:r=Nb(o,r,r.pendingProps,r.type,void 0,sn);break;case 11:r=Nb(o,r,r.pendingProps,r.type.render,r.ref,sn);break;case 5:Zf(r);default:Lb(o,r),r=tn=cv(r,qa),r=Db(o,r,qa)}t.memoizedProps=t.pendingProps,r===null?Rh(t):tn=r}function ml(t,r,o,c){Ma=co=null,Zf(r),sl=null,lc=0;var f=r.return;try{if(eT(t,f,r,o,sn)){os=1,yh(t,Ir(o,t.current)),tn=null;return}}catch(m){if(f!==null)throw tn=f,m;os=1,yh(t,Ir(o,t.current)),tn=null;return}r.flags&32768?(hn||c===1?t=!0:ul||(sn&536870912)!==0?t=!1:(bi=t=!0,(c===2||c===9||c===3||c===6)&&(c=xr.current,c!==null&&c.tag===13&&(c.flags|=16384))),d0(r,t)):Rh(r)}function Rh(t){var r=t;do{if((r.flags&32768)!==0){d0(r,bi);return}t=r.return;var o=sT(r.alternate,r,qa);if(o!==null){tn=o;return}if(r=r.sibling,r!==null){tn=r;return}tn=r=t}while(r!==null);os===0&&(os=5)}function d0(t,r){do{var o=rT(t.alternate,t);if(o!==null){o.flags&=32767,tn=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(t=t.sibling,t!==null)){tn=t;return}tn=t=o}while(t!==null);os=6,tn=null}function f0(t,r,o,c,f,m,b,S,B){t.cancelPendingCommit=null;do Ah();while(Ss!==0);if((Tn&6)!==0)throw Error(i(327));if(r!==null){if(r===t.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=jf,rs(t,o,m,b,S,B),t===Bn&&(tn=Bn=null,sn=0),dl=r,_i=t,Ha=o,Dm=m,Pm=f,n0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,gT(ce,function(){return v0(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=Se.p,Se.p=2,b=Tn,Tn|=4;try{aT(t,r,o)}finally{Tn=b,Se.p=f,Y.T=c}}Ss=1,m0(),p0(),g0()}}function m0(){if(Ss===1){Ss=0;var t=_i,r=dl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var c=Se.p;Se.p=2;var f=Tn;Tn|=4;try{Kb(r,t);var m=Qm,b=ev(t.containerInfo),S=m.focusedElem,B=m.selectionRange;if(b!==S&&S&&S.ownerDocument&&Zy(S.ownerDocument.documentElement,S)){if(B!==null&&wf(S)){var se=B.start,ve=B.end;if(ve===void 0&&(ve=se),"selectionStart"in S)S.selectionStart=se,S.selectionEnd=Math.min(ve,S.value.length);else{var Ce=S.ownerDocument||document,ie=Ce&&Ce.defaultView||window;if(ie.getSelection){var de=ie.getSelection(),ft=S.textContent.length,At=Math.min(B.start,ft),Ln=B.end===void 0?At:Math.min(B.end,ft);!de.extend&&At>Ln&&(b=Ln,Ln=At,At=b);var Q=Jy(S,At),H=Jy(S,Ln);if(Q&&H&&(de.rangeCount!==1||de.anchorNode!==Q.node||de.anchorOffset!==Q.offset||de.focusNode!==H.node||de.focusOffset!==H.offset)){var ne=Ce.createRange();ne.setStart(Q.node,Q.offset),de.removeAllRanges(),At>Ln?(de.addRange(ne),de.extend(H.node,H.offset)):(ne.setEnd(H.node,H.offset),de.addRange(ne))}}}}for(Ce=[],de=S;de=de.parentNode;)de.nodeType===1&&Ce.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Ce.length;S++){var Ee=Ce[S];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}qh=!!Ym,Qm=Ym=null}finally{Tn=f,Se.p=c,Y.T=o}}t.current=r,Ss=2}}function p0(){if(Ss===2){Ss=0;var t=_i,r=dl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var c=Se.p;Se.p=2;var f=Tn;Tn|=4;try{qb(t,r.alternate,r)}finally{Tn=f,Se.p=c,Y.T=o}}Ss=3}}function g0(){if(Ss===4||Ss===3){Ss=0,tt();var t=_i,r=dl,o=Ha,c=n0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ss=5:(Ss=0,dl=_i=null,y0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(wi=null),ge(o),r=r.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(We,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,f=Se.p,Se.p=2,Y.T=null;try{for(var m=t.onRecoverableError,b=0;b<c.length;b++){var S=c[b];m(S.value,{componentStack:S.stack})}}finally{Y.T=r,Se.p=f}}(Ha&3)!==0&&Ah(),pa(t),f=t.pendingLanes,(o&261930)!==0&&(f&42)!==0?t===Lm?Ec++:(Ec=0,Lm=t):Ec=0,jc(0)}}function y0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ic(r)))}function Ah(){return m0(),p0(),g0(),v0()}function v0(){if(Ss!==5)return!1;var t=_i,r=Dm;Dm=0;var o=ge(Ha),c=Y.T,f=Se.p;try{Se.p=32>o?32:o,Y.T=null,o=Pm,Pm=null;var m=_i,b=Ha;if(Ss=0,dl=_i=null,Ha=0,(Tn&6)!==0)throw Error(i(331));var S=Tn;if(Tn|=4,Zb(m.current),Qb(m,m.current,b,o),Tn=S,jc(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(We,m)}catch{}return!0}finally{Se.p=f,Y.T=c,y0(t,r)}}function b0(t,r,o){r=Ir(o,r),r=mm(t.stateNode,r,2),t=pi(t,r,2),t!==null&&(es(t,2),pa(t))}function Rn(t,r,o){if(t.tag===3)b0(t,t,o);else for(;r!==null;){if(r.tag===3){b0(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(wi===null||!wi.has(c))){t=Ir(o,t),o=xb(2),c=pi(r,o,2),c!==null&&(wb(o,c,r,t),es(c,2),pa(c));break}}r=r.return}}function Bm(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new lT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(Am=!0,f.add(o),t=fT.bind(null,t,r,o),r.then(t,t))}function fT(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,Bn===t&&(sn&o)===o&&(os===4||os===3&&(sn&62914560)===sn&&300>pt()-Eh?(Tn&2)===0&&fl(t,0):Im|=o,hl===sn&&(hl=0)),pa(t)}function x0(t,r){r===0&&(r=gs()),t=io(t,r),t!==null&&(es(t,r),pa(t))}function mT(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),x0(t,o)}function pT(t,r){var o=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),x0(t,o)}function gT(t,r){return Ye(t,r)}var Ih=null,pl=null,Um=!1,Mh=!1,zm=!1,Ti=0;function pa(t){t!==pl&&t.next===null&&(pl===null?Ih=pl=t:pl=pl.next=t),Mh=!0,Um||(Um=!0,vT())}function jc(t,r){if(!zm&&Mh){zm=!0;do for(var o=!1,c=Ih;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var b=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-qe(42|t)+1)-1,m&=f&~(b&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,T0(c,m))}else m=sn,m=Zn(c,c===Bn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||In(c,m)||(o=!0,T0(c,m));c=c.next}while(o);zm=!1}}function yT(){w0()}function w0(){Mh=Um=!1;var t=0;Ti!==0&&NT()&&(t=Ti);for(var r=pt(),o=null,c=Ih;c!==null;){var f=c.next,m=_0(c,r);m===0?(c.next=null,o===null?Ih=f:o.next=f,f===null&&(pl=o)):(o=c,(t!==0||(m&3)!==0)&&(Mh=!0)),c=f}Ss!==0&&Ss!==5||jc(t),Ti!==0&&(Ti=0)}function _0(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-qe(m),S=1<<b,B=f[b];B===-1?((S&o)===0||(S&c)!==0)&&(f[b]=hs(S,r)):B<=r&&(t.expiredLanes|=S),m&=~S}if(r=Bn,o=sn,o=Zn(t,t===r?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,o===0||t===r&&(Cn===2||Cn===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&le(c),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||In(t,o)){if(r=o&-o,r===t.callbackPriority)return r;switch(c!==null&&le(c),ge(o)){case 2:case 8:o=St;break;case 32:o=ce;break;case 268435456:o=Ie;break;default:o=ce}return c=k0.bind(null,t),o=Ye(o,c),t.callbackPriority=r,t.callbackNode=o,r}return c!==null&&c!==null&&le(c),t.callbackPriority=2,t.callbackNode=null,2}function k0(t,r){if(Ss!==0&&Ss!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(Ah()&&t.callbackNode!==o)return null;var c=sn;return c=Zn(t,t===Bn?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(r0(t,c,r),_0(t,pt()),t.callbackNode!=null&&t.callbackNode===o?k0.bind(null,t):null)}function T0(t,r){if(Ah())return null;r0(t,r,!0)}function vT(){RT(function(){(Tn&6)!==0?Ye(ct,yT):w0()})}function Fm(){if(Ti===0){var t=el;t===0&&(t=jn,jn<<=1,(jn&261888)===0&&(jn=256)),Ti=t}return Ti}function E0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:mn(""+t)}function j0(t,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,t.id&&o.setAttribute("form",t.id),r.parentNode.insertBefore(o,r),t=new FormData(t),o.parentNode.removeChild(o),t}function bT(t,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=E0((f[It]||null).action),b=c.submitter;b&&(r=(r=b[It]||null)?E0(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var S=new Ds("action","action",null,c,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ti!==0){var B=b?j0(f,b):new FormData(f);lm(o,{pending:!0,data:B,method:f.method,action:m},null,B)}}else typeof m=="function"&&(S.preventDefault(),B=b?j0(f,b):new FormData(f),lm(o,{pending:!0,data:B,method:f.method,action:m},m,B))},currentTarget:f}]})}}for(var qm=0;qm<Ef.length;qm++){var Hm=Ef[qm],xT=Hm.toLowerCase(),wT=Hm[0].toUpperCase()+Hm.slice(1);Gr(xT,"on"+wT)}Gr(sv,"onAnimationEnd"),Gr(rv,"onAnimationIteration"),Gr(av,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(Ok,"onTransitionRun"),Gr(Vk,"onTransitionStart"),Gr(Bk,"onTransitionCancel"),Gr(iv,"onTransitionEnd"),Pe("onMouseEnter",["mouseout","mouseover"]),Pe("onMouseLeave",["mouseout","mouseover"]),Pe("onPointerEnter",["pointerout","pointerover"]),Pe("onPointerLeave",["pointerout","pointerover"]),ze("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ze("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ze("onBeforeInput",["compositionend","keypress","textInput","paste"]),ze("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ze("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_T=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sc));function S0(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var S=c[b],B=S.instance,se=S.currentTarget;if(S=S.listener,B!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=se;try{m(f)}catch(ve){Ku(ve)}f.currentTarget=null,m=B}else for(b=0;b<c.length;b++){if(S=c[b],B=S.instance,se=S.currentTarget,S=S.listener,B!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=se;try{m(f)}catch(ve){Ku(ve)}f.currentTarget=null,m=B}}}}function nn(t,r){var o=r[_t];o===void 0&&(o=r[_t]=new Set);var c=t+"__bubble";o.has(c)||(N0(r,t,2,!1),o.add(c))}function $m(t,r,o){var c=0;r&&(c|=4),N0(o,t,c,r)}var Dh="_reactListening"+Math.random().toString(36).slice(2);function Wm(t){if(!t[Dh]){t[Dh]=!0,G.forEach(function(o){o!=="selectionchange"&&(_T.has(o)||$m(o,!1,t),$m(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Dh]||(r[Dh]=!0,$m("selectionchange",!1,r))}}function N0(t,r,o,c){switch(s1(r)){case 2:var f=QT;break;case 8:f=XT;break;default:f=op}o=f.bind(null,r,o,t),f=void 0,!Nr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function Gm(t,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var S=c.stateNode.containerInfo;if(S===f)break;if(b===4)for(b=c.return;b!==null;){var B=b.tag;if((B===3||B===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;S!==null;){if(b=Sn(S),b===null)return;if(B=b.tag,B===5||B===6||B===26||B===27){c=m=b;continue e}S=S.parentNode}}c=c.return}gr(function(){var se=m,ve=gn(o),Ce=[];e:{var ie=ov.get(t);if(ie!==void 0){var de=Ds,ft=t;switch(t){case"keypress":if(la(o)===0)break e;case"keydown":case"keyup":de=$u;break;case"focusin":ft="focus",de=no;break;case"focusout":ft="blur",de=no;break;case"beforeblur":case"afterblur":de=no;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Jl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=v;break;case sv:case rv:case av:de=Vu;break;case iv:de=N;break;case"scroll":case"scrollend":de=Xl;break;case"wheel":de=he;break;case"copy":case"cut":case"paste":de=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=Ra;break;case"toggle":case"beforetoggle":de=Gt}var At=(r&4)!==0,Ln=!At&&(t==="scroll"||t==="scrollend"),Q=At?ie!==null?ie+"Capture":null:ie;At=[];for(var H=se,ne;H!==null;){var Ee=H;if(ne=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||ne===null||Q===null||(Ee=Hs(H,Q),Ee!=null&&At.push(Nc(H,Ee,ne))),Ln)break;H=H.return}0<At.length&&(ie=new de(ie,ft,null,o,ve),Ce.push({event:ie,listeners:At}))}}if((r&7)===0){e:{if(ie=t==="mouseover"||t==="pointerover",de=t==="mouseout"||t==="pointerout",ie&&o!==Ms&&(ft=o.relatedTarget||o.fromElement)&&(Sn(ft)||ft[ut]))break e;if((de||ie)&&(ie=ve.window===ve?ve:(ie=ve.ownerDocument)?ie.defaultView||ie.parentWindow:window,de?(ft=o.relatedTarget||o.toElement,de=se,ft=ft?Sn(ft):null,ft!==null&&(Ln=u(ft),At=ft.tag,ft!==Ln||At!==5&&At!==27&&At!==6)&&(ft=null)):(de=null,ft=se),de!==ft)){if(At=Jl,Ee="onMouseLeave",Q="onMouseEnter",H="mouse",(t==="pointerout"||t==="pointerover")&&(At=Ra,Ee="onPointerLeave",Q="onPointerEnter",H="pointer"),Ln=de==null?ie:ue(de),ne=ft==null?ie:ue(ft),ie=new At(Ee,H+"leave",de,o,ve),ie.target=Ln,ie.relatedTarget=ne,Ee=null,Sn(ve)===se&&(At=new At(Q,H+"enter",ft,o,ve),At.target=ne,At.relatedTarget=Ln,Ee=At),Ln=Ee,de&&ft)t:{for(At=kT,Q=de,H=ft,ne=0,Ee=Q;Ee;Ee=At(Ee))ne++;Ee=0;for(var Tt=H;Tt;Tt=At(Tt))Ee++;for(;0<ne-Ee;)Q=At(Q),ne--;for(;0<Ee-ne;)H=At(H),Ee--;for(;ne--;){if(Q===H||H!==null&&Q===H.alternate){At=Q;break t}Q=At(Q),H=At(H)}At=null}else At=null;de!==null&&C0(Ce,ie,de,At,!1),ft!==null&&Ln!==null&&C0(Ce,Ln,ft,At,!0)}}e:{if(ie=se?ue(se):window,de=ie.nodeName&&ie.nodeName.toLowerCase(),de==="select"||de==="input"&&ie.type==="file")var xn=Wy;else if(Hy(ie))if(Gy)xn=Dk;else{xn=Ik;var vt=Ak}else de=ie.nodeName,!de||de.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?se&&at(se.elementType)&&(xn=Wy):xn=Mk;if(xn&&(xn=xn(t,se))){$y(Ce,xn,o,ve);break e}vt&&vt(t,ie,se),t==="focusout"&&se&&ie.type==="number"&&se.memoizedProps.value!=null&&oa(ie,"number",ie.value)}switch(vt=se?ue(se):window,t){case"focusin":(Hy(vt)||vt.contentEditable==="true")&&(Wo=vt,_f=se,sc=null);break;case"focusout":sc=_f=Wo=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,tv(Ce,o,ve);break;case"selectionchange":if(Lk)break;case"keydown":case"keyup":tv(Ce,o,ve)}var Qt;if(kn)e:{switch(t){case"compositionstart":var rn="onCompositionStart";break e;case"compositionend":rn="onCompositionEnd";break e;case"compositionupdate":rn="onCompositionUpdate";break e}rn=void 0}else $o?so(t,o)&&(rn="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(rn="onCompositionStart");rn&&(ha&&o.locale!=="ko"&&($o||rn!=="onCompositionStart"?rn==="onCompositionEnd"&&$o&&(Qt=Cr()):(ts=ve,$s="value"in ts?ts.value:ts.textContent,$o=!0)),vt=Ph(se,rn),0<vt.length&&(rn=new ua(rn,t,null,o,ve),Ce.push({event:rn,listeners:vt}),Qt?rn.data=Qt:(Qt=Ho(o),Qt!==null&&(rn.data=Qt)))),(Qt=Rr?Sk(t,o):Nk(t,o))&&(rn=Ph(se,"onBeforeInput"),0<rn.length&&(vt=new ua("onBeforeInput","beforeinput",null,o,ve),Ce.push({event:vt,listeners:rn}),vt.data=Qt)),bT(Ce,t,se,o,ve)}S0(Ce,r)})}function Nc(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ph(t,r){for(var o=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Hs(t,o),f!=null&&c.unshift(Nc(t,f,m)),f=Hs(t,r),f!=null&&c.push(Nc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function kT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function C0(t,r,o,c,f){for(var m=r._reactName,b=[];o!==null&&o!==c;){var S=o,B=S.alternate,se=S.stateNode;if(S=S.tag,B!==null&&B===c)break;S!==5&&S!==26&&S!==27||se===null||(B=se,f?(se=Hs(o,m),se!=null&&b.unshift(Nc(o,se,B))):f||(se=Hs(o,m),se!=null&&b.push(Nc(o,se,B)))),o=o.return}b.length!==0&&t.push({event:r,listeners:b})}var TT=/\r\n?/g,ET=/\u0000|\uFFFD/g;function R0(t){return(typeof t=="string"?t:""+t).replace(TT,`
`).replace(ET,"")}function A0(t,r){return r=R0(r),R0(t)===r}function Pn(t,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||De(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&De(t,""+c);break;case"className":re(t,"class",c);break;case"tabIndex":re(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":re(t,o,c);break;case"style":Ge(t,c,m);break;case"data":if(r!=="object"){re(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){t.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=mn(""+c),t.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&Pn(t,r,"name",f.name,f,null),Pn(t,r,"formEncType",f.formEncType,f,null),Pn(t,r,"formMethod",f.formMethod,f,null),Pn(t,r,"formTarget",f.formTarget,f,null)):(Pn(t,r,"encType",f.encType,f,null),Pn(t,r,"method",f.method,f,null),Pn(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=mn(""+c),t.setAttribute(o,c);break;case"onClick":c!=null&&(t.onclick=Ot);break;case"onScroll":c!=null&&nn("scroll",t);break;case"onScrollEnd":c!=null&&nn("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}o=mn(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""+c):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":c===!0?t.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,c):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(o,c):t.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(o):t.setAttribute(o,c);break;case"popover":nn("beforetoggle",t),nn("toggle",t),me(t,"popover",c);break;case"xlinkActuate":Re(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Re(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Re(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Re(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Re(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Re(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Re(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Re(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Re(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":me(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Nt.get(o)||o,me(t,o,c))}}function Km(t,r,o,c,f,m){switch(o){case"style":Ge(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=o}}break;case"children":typeof c=="string"?De(t,c):(typeof c=="number"||typeof c=="bigint")&&De(t,""+c);break;case"onScroll":c!=null&&nn("scroll",t);break;case"onScrollEnd":c!=null&&nn("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Ot);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Z.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=t[It]||null,m=m!=null?m[o]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(r,c,f);break e}o in t?t[o]=c:c===!0?t.setAttribute(o,""):me(t,o,c)}}}function Vs(t,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nn("error",t),nn("load",t);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Pn(t,r,m,b,o,null)}}f&&Pn(t,r,"srcSet",o.srcSet,o,null),c&&Pn(t,r,"src",o.src,o,null);return;case"input":nn("invalid",t);var S=m=b=f=null,B=null,se=null;for(c in o)if(o.hasOwnProperty(c)){var ve=o[c];if(ve!=null)switch(c){case"name":f=ve;break;case"type":b=ve;break;case"checked":B=ve;break;case"defaultChecked":se=ve;break;case"value":m=ve;break;case"defaultValue":S=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,r));break;default:Pn(t,r,c,ve,o,null)}}ia(t,m,S,B,se,b,f,!1);return;case"select":nn("invalid",t),c=b=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":b=S;break;case"multiple":c=S;default:Pn(t,r,f,S,o,null)}r=m,o=b,t.multiple=!!c,r!=null?pr(t,!!c,r,!1):o!=null&&pr(t,!!c,o,!0);return;case"textarea":nn("invalid",t),m=f=c=null;for(b in o)if(o.hasOwnProperty(b)&&(S=o[b],S!=null))switch(b){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:Pn(t,r,b,S,o,null)}ee(t,c,f,m);return;case"option":for(B in o)o.hasOwnProperty(B)&&(c=o[B],c!=null)&&(B==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":Pn(t,r,B,c,o,null));return;case"dialog":nn("beforetoggle",t),nn("toggle",t),nn("cancel",t),nn("close",t);break;case"iframe":case"object":nn("load",t);break;case"video":case"audio":for(c=0;c<Sc.length;c++)nn(Sc[c],t);break;case"image":nn("error",t),nn("load",t);break;case"details":nn("toggle",t);break;case"embed":case"source":case"link":nn("error",t),nn("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in o)if(o.hasOwnProperty(se)&&(c=o[se],c!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:Pn(t,r,se,c,o,null)}return;default:if(at(r)){for(ve in o)o.hasOwnProperty(ve)&&(c=o[ve],c!==void 0&&Km(t,r,ve,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&Pn(t,r,S,c,o,null))}function jT(t,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,S=null,B=null,se=null,ve=null;for(de in o){var Ce=o[de];if(o.hasOwnProperty(de)&&Ce!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":B=Ce;default:c.hasOwnProperty(de)||Pn(t,r,de,null,c,Ce)}}for(var ie in c){var de=c[ie];if(Ce=o[ie],c.hasOwnProperty(ie)&&(de!=null||Ce!=null))switch(ie){case"type":m=de;break;case"name":f=de;break;case"checked":se=de;break;case"defaultChecked":ve=de;break;case"value":b=de;break;case"defaultValue":S=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,r));break;default:de!==Ce&&Pn(t,r,ie,de,c,Ce)}}aa(t,b,S,B,se,ve,m,f);return;case"select":de=b=S=ie=null;for(m in o)if(B=o[m],o.hasOwnProperty(m)&&B!=null)switch(m){case"value":break;case"multiple":de=B;default:c.hasOwnProperty(m)||Pn(t,r,m,null,c,B)}for(f in c)if(m=c[f],B=o[f],c.hasOwnProperty(f)&&(m!=null||B!=null))switch(f){case"value":ie=m;break;case"defaultValue":S=m;break;case"multiple":b=m;default:m!==B&&Pn(t,r,f,m,c,B)}r=S,o=b,c=de,ie!=null?pr(t,!!o,ie,!1):!!c!=!!o&&(r!=null?pr(t,!!o,r,!0):pr(t,!!o,o?[]:"",!1));return;case"textarea":de=ie=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Pn(t,r,S,null,c,f)}for(b in c)if(f=c[b],m=o[b],c.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":ie=f;break;case"defaultValue":de=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Pn(t,r,b,f,c,m)}M(t,ie,de);return;case"option":for(var ft in o)ie=o[ft],o.hasOwnProperty(ft)&&ie!=null&&!c.hasOwnProperty(ft)&&(ft==="selected"?t.selected=!1:Pn(t,r,ft,null,c,ie));for(B in c)ie=c[B],de=o[B],c.hasOwnProperty(B)&&ie!==de&&(ie!=null||de!=null)&&(B==="selected"?t.selected=ie&&typeof ie!="function"&&typeof ie!="symbol":Pn(t,r,B,ie,c,de));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in o)ie=o[At],o.hasOwnProperty(At)&&ie!=null&&!c.hasOwnProperty(At)&&Pn(t,r,At,null,c,ie);for(se in c)if(ie=c[se],de=o[se],c.hasOwnProperty(se)&&ie!==de&&(ie!=null||de!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,r));break;default:Pn(t,r,se,ie,c,de)}return;default:if(at(r)){for(var Ln in o)ie=o[Ln],o.hasOwnProperty(Ln)&&ie!==void 0&&!c.hasOwnProperty(Ln)&&Km(t,r,Ln,void 0,c,ie);for(ve in c)ie=c[ve],de=o[ve],!c.hasOwnProperty(ve)||ie===de||ie===void 0&&de===void 0||Km(t,r,ve,ie,c,de);return}}for(var Q in o)ie=o[Q],o.hasOwnProperty(Q)&&ie!=null&&!c.hasOwnProperty(Q)&&Pn(t,r,Q,null,c,ie);for(Ce in c)ie=c[Ce],de=o[Ce],!c.hasOwnProperty(Ce)||ie===de||ie==null&&de==null||Pn(t,r,Ce,ie,c,de)}function I0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ST(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,b=f.initiatorType,S=f.duration;if(m&&S&&I0(b)){for(b=0,S=f.responseEnd,c+=1;c<o.length;c++){var B=o[c],se=B.startTime;if(se>S)break;var ve=B.transferSize,Ce=B.initiatorType;ve&&I0(Ce)&&(B=B.responseEnd,b+=ve*(B<S?1:(S-se)/(B-se)))}if(--c,r+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ym=null,Qm=null;function Lh(t){return t.nodeType===9?t:t.ownerDocument}function M0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Xm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jm=null;function NT(){var t=window.event;return t&&t.type==="popstate"?t===Jm?!1:(Jm=t,!0):(Jm=null,!1)}var P0=typeof setTimeout=="function"?setTimeout:void 0,CT=typeof clearTimeout=="function"?clearTimeout:void 0,L0=typeof Promise=="function"?Promise:void 0,RT=typeof queueMicrotask=="function"?queueMicrotask:typeof L0<"u"?function(t){return L0.resolve(null).then(t).catch(AT)}:P0;function AT(t){setTimeout(function(){throw t})}function Ei(t){return t==="head"}function O0(t,r){var o=r,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){t.removeChild(f),bl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Cc(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Cc(o);for(var m=o.firstChild;m;){var b=m.nextSibling,S=m.nodeName;m[Es]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=b}}else o==="body"&&Cc(t.ownerDocument.body);o=f}while(o);bl(r)}function V0(t,r){var o=t;t=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=c}while(o)}function Zm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Zm(o),qs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function IT(t,r,o,c){for(;t.nodeType===1;){var f=o;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Es])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Or(t.nextSibling),t===null)break}return null}function MT(t,r,o){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=Or(t.nextSibling),t===null))return null;return t}function B0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Or(t.nextSibling),t===null))return null;return t}function ep(t){return t.data==="$?"||t.data==="$~"}function tp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function DT(t,r){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Or(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var np=null;function U0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(r===0)return Or(t.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}t=t.nextSibling}return null}function z0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return t;r--}else o!=="/$"&&o!=="/&"||r++}t=t.previousSibling}return null}function F0(t,r,o){switch(r=Lh(o),t){case"html":if(t=r.documentElement,!t)throw Error(i(452));return t;case"head":if(t=r.head,!t)throw Error(i(453));return t;case"body":if(t=r.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Cc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);qs(t)}var Vr=new Map,q0=new Set;function Oh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var $a=Se.d;Se.d={f:PT,r:LT,D:OT,C:VT,L:BT,m:UT,X:FT,S:zT,M:qT};function PT(){var t=$a.f(),r=Nh();return t||r}function LT(t){var r=F(t);r!==null&&r.tag===5&&r.type==="form"?ib(r):$a.r(t)}var gl=typeof document>"u"?null:document;function H0(t,r,o){var c=gl;if(c&&typeof r=="string"&&r){var f=Nn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),q0.has(f)||(q0.add(f),t={rel:t,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Vs(r,"link",t),C(r),c.head.appendChild(r)))}}function OT(t){$a.D(t),H0("dns-prefetch",t,null)}function VT(t,r){$a.C(t,r),H0("preconnect",t,r)}function BT(t,r,o){$a.L(t,r,o);var c=gl;if(c&&t&&r){var f='link[rel="preload"][as="'+Nn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Nn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Nn(o.imageSizes)+'"]')):f+='[href="'+Nn(t)+'"]';var m=f;switch(r){case"style":m=yl(t);break;case"script":m=vl(t)}Vr.has(m)||(t=k({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:t,as:r},o),Vr.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(Rc(m))||r==="script"&&c.querySelector(Ac(m))||(r=c.createElement("link"),Vs(r,"link",t),C(r),c.head.appendChild(r)))}}function UT(t,r){$a.m(t,r);var o=gl;if(o&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Nn(c)+'"][href="'+Nn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=vl(t)}if(!Vr.has(m)&&(t=k({rel:"modulepreload",href:t},r),Vr.set(m,t),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ac(m)))return}c=o.createElement("link"),Vs(c,"link",t),C(c),o.head.appendChild(c)}}}function zT(t,r,o){$a.S(t,r,o);var c=gl;if(c&&t){var f=T(c).hoistableStyles,m=yl(t);r=r||"default";var b=f.get(m);if(!b){var S={loading:0,preload:null};if(b=c.querySelector(Rc(m)))S.loading=5;else{t=k({rel:"stylesheet",href:t,"data-precedence":r},o),(o=Vr.get(m))&&sp(t,o);var B=b=c.createElement("link");C(B),Vs(B,"link",t),B._p=new Promise(function(se,ve){B.onload=se,B.onerror=ve}),B.addEventListener("load",function(){S.loading|=1}),B.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Vh(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:S},f.set(m,b)}}}function FT(t,r){$a.X(t,r);var o=gl;if(o&&t){var c=T(o).hoistableScripts,f=vl(t),m=c.get(f);m||(m=o.querySelector(Ac(f)),m||(t=k({src:t,async:!0},r),(r=Vr.get(f))&&rp(t,r),m=o.createElement("script"),C(m),Vs(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function qT(t,r){$a.M(t,r);var o=gl;if(o&&t){var c=T(o).hoistableScripts,f=vl(t),m=c.get(f);m||(m=o.querySelector(Ac(f)),m||(t=k({src:t,async:!0,type:"module"},r),(r=Vr.get(f))&&rp(t,r),m=o.createElement("script"),C(m),Vs(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function $0(t,r,o,c){var f=(f=_e.current)?Oh(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=yl(o.href),o=T(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=yl(o.href);var m=T(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(Rc(t)))&&!m._p&&(b.instance=m,b.state.loading=5),Vr.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Vr.set(t,o),m||HT(f,t,o,b.state))),r&&c===null)throw Error(i(528,""));return b}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=vl(o),o=T(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function yl(t){return'href="'+Nn(t)+'"'}function Rc(t){return'link[rel="stylesheet"]['+t+"]"}function W0(t){return k({},t,{"data-precedence":t.precedence,precedence:null})}function HT(t,r,o,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Vs(r,"link",o),C(r),t.head.appendChild(r))}function vl(t){return'[src="'+Nn(t)+'"]'}function Ac(t){return"script[async]"+t}function G0(t,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+Nn(o.href)+'"]');if(c)return r.instance=c,C(c),c;var f=k({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),C(c),Vs(c,"style",f),Vh(c,o.precedence,t),r.instance=c;case"stylesheet":f=yl(o.href);var m=t.querySelector(Rc(f));if(m)return r.state.loading|=4,r.instance=m,C(m),m;c=W0(o),(f=Vr.get(f))&&sp(c,f),m=(t.ownerDocument||t).createElement("link"),C(m);var b=m;return b._p=new Promise(function(S,B){b.onload=S,b.onerror=B}),Vs(m,"link",c),r.state.loading|=4,Vh(m,o.precedence,t),r.instance=m;case"script":return m=vl(o.src),(f=t.querySelector(Ac(m)))?(r.instance=f,C(f),f):(c=o,(f=Vr.get(m))&&(c=k({},o),rp(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),C(f),Vs(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Vh(c,o.precedence,t));return r.instance}function Vh(t,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,b=0;b<c.length;b++){var S=c[b];if(S.dataset.precedence===r)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(t,r.firstChild))}function sp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function rp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Bh=null;function K0(t,r,o){if(Bh===null){var c=new Map,f=Bh=new Map;f.set(o,c)}else f=Bh,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(t))return c;for(c.set(t,null),o=o.getElementsByTagName(t),f=0;f<o.length;f++){var m=o[f];if(!(m[Es]||m[it]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=t+b;var S=c.get(b);S?S.push(m):c.set(b,[m])}}return c}function Y0(t,r,o){t=t.ownerDocument||t,t.head.insertBefore(o,r==="title"?t.querySelector("head > title"):null)}function $T(t,r,o){if(o===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Q0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function WT(t,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=yl(c.href),m=r.querySelector(Rc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Uh.bind(t),r.then(t,t)),o.state.loading|=4,o.instance=m,C(m);return}m=r.ownerDocument||r,c=W0(c),(f=Vr.get(f))&&sp(c,f),m=m.createElement("link"),C(m);var b=m;b._p=new Promise(function(S,B){b.onload=S,b.onerror=B}),Vs(m,"link",c),o.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Uh.bind(t),r.addEventListener("load",o),r.addEventListener("error",o))}}var ap=0;function GT(t,r){return t.stylesheets&&t.count===0&&Fh(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var c=setTimeout(function(){if(t.stylesheets&&Fh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&ap===0&&(ap=62500*ST());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Fh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>ap?50:800)+r);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Uh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var zh=null;function Fh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,zh=new Map,r.forEach(KT,t),zh=null,Uh.call(t))}function KT(t,r){if(!(r.state.loading&4)){var o=zh.get(t);if(o)var c=o.get(null);else{o=new Map,zh.set(t,o);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}f=r.instance,b=f.getAttribute("data-precedence"),m=o.get(b)||c,m===c&&o.set(null,f),o.set(b,f),this.count++,c=Uh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Ic={$$typeof:fe,Provider:null,Consumer:null,_currentValue:Ve,_currentValue2:Ve,_threadCount:0};function YT(t,r,o,c,f,m,b,S,B){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.hiddenUpdates=Hn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function X0(t,r,o,c,f,m,b,S,B,se,ve,Ce){return t=new YT(t,r,o,b,B,se,ve,Ce,S),r=1,m===!0&&(r|=24),m=br(3,null,null,r),t.current=m,m.stateNode=t,r=Vf(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Ff(m),t}function J0(t){return t?(t=Yo,t):Yo}function Z0(t,r,o,c,f,m){f=J0(f),c.context===null?c.context=f:c.pendingContext=f,c=mi(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=pi(t,c,r),o!==null&&(ur(o,t,r),uc(o,t,r))}function e1(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function ip(t,r){e1(t,r),(t=t.alternate)&&e1(t,r)}function t1(t){if(t.tag===13||t.tag===31){var r=io(t,67108864);r!==null&&ur(r,t,67108864),ip(t,67108864)}}function n1(t){if(t.tag===13||t.tag===31){var r=Tr();r=q(r);var o=io(t,r);o!==null&&ur(o,t,r),ip(t,r)}}var qh=!0;function QT(t,r,o,c){var f=Y.T;Y.T=null;var m=Se.p;try{Se.p=2,op(t,r,o,c)}finally{Se.p=m,Y.T=f}}function XT(t,r,o,c){var f=Y.T;Y.T=null;var m=Se.p;try{Se.p=8,op(t,r,o,c)}finally{Se.p=m,Y.T=f}}function op(t,r,o,c){if(qh){var f=lp(c);if(f===null)Gm(t,r,c,Hh,o),r1(t,c);else if(ZT(f,t,r,o,c))c.stopPropagation();else if(r1(t,c),r&4&&-1<JT.indexOf(t)){for(;f!==null;){var m=F(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=bn(m.pendingLanes);if(b!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var B=1<<31-qe(b);S.entanglements[1]|=B,b&=~B}pa(m),(Tn&6)===0&&(jh=pt()+500,jc(0))}}break;case 31:case 13:S=io(m,2),S!==null&&ur(S,m,2),Nh(),ip(m,2)}if(m=lp(c),m===null&&Gm(t,r,c,Hh,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Gm(t,r,c,null,o)}}function lp(t){return t=gn(t),cp(t)}var Hh=null;function cp(t){if(Hh=null,t=Sn(t),t!==null){var r=u(t);if(r===null)t=null;else{var o=r.tag;if(o===13){if(t=h(r),t!==null)return t;t=null}else if(o===31){if(t=p(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Hh=t,null}function s1(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dt()){case ct:return 2;case St:return 8;case ce:case be:return 32;case Ie:return 268435456;default:return 32}default:return 32}}var up=!1,ji=null,Si=null,Ni=null,Mc=new Map,Dc=new Map,Ci=[],JT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r1(t,r){switch(t){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":Mc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(r.pointerId)}}function Pc(t,r,o,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=F(r),r!==null&&t1(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function ZT(t,r,o,c,f){switch(r){case"focusin":return ji=Pc(ji,t,r,o,c,f),!0;case"dragenter":return Si=Pc(Si,t,r,o,c,f),!0;case"mouseover":return Ni=Pc(Ni,t,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Mc.set(m,Pc(Mc.get(m)||null,t,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Dc.set(m,Pc(Dc.get(m)||null,t,r,o,c,f)),!0}return!1}function a1(t){var r=Sn(t.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=h(o),r!==null){t.blockedOn=r,we(t.priority,function(){n1(o)});return}}else if(r===31){if(r=p(o),r!==null){t.blockedOn=r,we(t.priority,function(){n1(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $h(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=lp(t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);Ms=c,o.target.dispatchEvent(c),Ms=null}else return r=F(o),r!==null&&t1(r),t.blockedOn=o,!1;r.shift()}return!0}function i1(t,r,o){$h(t)&&o.delete(r)}function eE(){up=!1,ji!==null&&$h(ji)&&(ji=null),Si!==null&&$h(Si)&&(Si=null),Ni!==null&&$h(Ni)&&(Ni=null),Mc.forEach(i1),Dc.forEach(i1)}function Wh(t,r){t.blockedOn===r&&(t.blockedOn=null,up||(up=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,eE)))}var Gh=null;function o1(t){Gh!==t&&(Gh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Gh===t&&(Gh=null);for(var r=0;r<t.length;r+=3){var o=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(cp(c||o)===null)continue;break}var m=F(o);m!==null&&(t.splice(r,3),r-=3,lm(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function bl(t){function r(B){return Wh(B,t)}ji!==null&&Wh(ji,t),Si!==null&&Wh(Si,t),Ni!==null&&Wh(Ni,t),Mc.forEach(r),Dc.forEach(r);for(var o=0;o<Ci.length;o++){var c=Ci[o];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Ci.length&&(o=Ci[0],o.blockedOn===null);)a1(o),o.blockedOn===null&&Ci.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],b=f[It]||null;if(typeof m=="function")b||o1(o);else if(b){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[It]||null)S=b.formAction;else if(cp(f)!==null)continue}else S=b.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),o1(o)}}}function l1(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function hp(t){this._internalRoot=t}Kh.prototype.render=hp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=Tr();Z0(o,c,t,r,null,null)},Kh.prototype.unmount=hp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Z0(t.current,2,null,t,null,null),Nh(),r[ut]=null}};function Kh(t){this._internalRoot=t}Kh.prototype.unstable_scheduleHydration=function(t){if(t){var r=xe();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Ci.length&&r!==0&&r<Ci[o].priority;o++);Ci.splice(o,0,t),o===0&&a1(t)}};var c1=e.version;if(c1!=="19.2.4")throw Error(i(527,c1,"19.2.4"));Se.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(r),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var tE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{We=Yh.inject(tE),nt=Yh}catch{}}return Oc.createRoot=function(t,r){if(!l(t))throw Error(i(299));var o=!1,c="",f=gb,m=yb,b=vb;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=X0(t,1,!1,null,null,o,c,null,f,m,b,l1),t[ut]=r.current,Wm(t),new hp(r)},Oc.hydrateRoot=function(t,r,o){if(!l(t))throw Error(i(299));var c=!1,f="",m=gb,b=yb,S=vb,B=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),r=X0(t,1,!0,r,o??null,c,f,B,m,b,S,l1),r.context=J0(null),o=r.current,c=Tr(),c=q(c),f=mi(c),f.callback=null,pi(o,f,c),o=c,r.current.lanes=o,es(r,o),pa(r),t[ut]=r.current,Wm(t),new Kh(r)},Oc.version="19.2.4",Oc}var b1;function hE(){if(b1)return mp.exports;b1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),mp.exports=uE(),mp.exports}var dE=hE();const fE="modulepreload",mE=function(s){return"/login/"+s},x1={},Fr=function(e,n,i){let l=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),p=h?.nonce||h?.getAttribute("nonce");l=g(n.map(y=>{if(y=mE(y),y in x1)return;x1[y]=!0;const x=y.endsWith(".css"),k=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${k}`))return;const j=document.createElement("link");if(j.rel=x?"stylesheet":fE,x||(j.as="script"),j.crossOrigin="",j.href=y,p&&j.setAttribute("nonce",p),document.head.appendChild(j),x)return new Promise((O,K)=>{j.addEventListener("load",O),j.addEventListener("error",()=>K(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(h){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=h,window.dispatchEvent(p),!p.defaultPrevented)throw h}return l.then(h=>{for(const p of h||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var w1="popstate";function pE(s={}){function e(i,l){let{pathname:u,search:h,hash:p}=i.location;return Yp("",{pathname:u,search:h,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(i,l){return typeof l=="string"?l:ru(l)}return yE(e,n,null,s)}function Jn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function zr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gE(){return Math.random().toString(36).substring(2,10)}function _1(s,e){return{usr:s.state,key:s.key,idx:e}}function Yp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Fl(e):e,state:n,key:e&&e.key||i||gE()}}function ru({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Fl(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function yE(s,e,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,h=l.history,p="POP",g=null,y=x();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function x(){return(h.state||{idx:null}).idx}function k(){p="POP";let V=x(),te=V==null?null:V-y;y=V,g&&g({action:p,location:U.location,delta:te})}function j(V,te){p="PUSH";let X=Yp(U.location,V,te);y=x()+1;let fe=_1(X,y),je=U.createHref(X);try{h.pushState(fe,"",je)}catch(Ue){if(Ue instanceof DOMException&&Ue.name==="DataCloneError")throw Ue;l.location.assign(je)}u&&g&&g({action:p,location:U.location,delta:1})}function O(V,te){p="REPLACE";let X=Yp(U.location,V,te);y=x();let fe=_1(X,y),je=U.createHref(X);h.replaceState(fe,"",je),u&&g&&g({action:p,location:U.location,delta:0})}function K(V){return vE(V)}let U={get action(){return p},get location(){return s(l,h)},listen(V){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(w1,k),g=V,()=>{l.removeEventListener(w1,k),g=null}},createHref(V){return e(l,V)},createURL:K,encodeLocation(V){let te=K(V);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:j,replace:O,go(V){return h.go(V)}};return U}function vE(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Jn(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:ru(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function w2(s,e,n="/"){return bE(s,e,n,!1)}function bE(s,e,n,i){let l=typeof e=="string"?Fl(e):e,u=Ja(l.pathname||"/",n);if(u==null)return null;let h=_2(s);xE(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=AE(u);p=CE(h[g],y,i)}return p}function _2(s,e=[],n=[],i="",l=!1){let u=(h,p,g=l,y)=>{let x={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(i)&&g)return;Jn(x.relativePath.startsWith(i),`Absolute route path "${x.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(i.length)}let k=Ka([i,x.relativePath]),j=n.concat(x);h.children&&h.children.length>0&&(Jn(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),_2(h.children,e,j,k,g)),!(h.path==null&&!h.index)&&e.push({path:k,score:SE(k,h.index),routesMeta:j})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of k2(h.path))u(h,p,!0,g)}),e}function k2(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let h=k2(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function xE(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:NE(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var wE=/^:[\w-]+$/,_E=3,kE=2,TE=1,EE=10,jE=-2,k1=s=>s==="*";function SE(s,e){let n=s.split("/"),i=n.length;return n.some(k1)&&(i+=jE),e&&(i+=kE),n.filter(l=>!k1(l)).reduce((l,u)=>l+(wE.test(u)?_E:u===""?TE:EE),i)}function NE(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function CE(s,e,n=!1){let{routesMeta:i}=s,l={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,x=u==="/"?e:e.slice(u.length)||"/",k=kd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),j=g.route;if(!k&&y&&n&&!i[i.length-1].route.index&&(k=kd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!k)return null;Object.assign(l,k.params),h.push({params:l,pathname:Ka([u,k.pathname]),pathnameBase:PE(Ka([u,k.pathnameBase])),route:j}),k.pathnameBase!=="/"&&(u=Ka([u,k.pathnameBase]))}return h}function kd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=RE(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:x,isOptional:k},j)=>{if(x==="*"){let K=p[j]||"";h=u.slice(0,u.length-K.length).replace(/(.)\/+$/,"$1")}const O=p[j];return k&&!O?y[x]=void 0:y[x]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:s}}function RE(s,e=!1,n=!0){zr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function AE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ja(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var IE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ME(s,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof s=="string"?Fl(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=T1(n.substring(1),"/"):u=T1(n,e)):u=e,{pathname:u,search:LE(i),hash:OE(l)}}function T1(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function vp(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DE(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Eg(s){let e=DE(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function jg(s,e,n,i=!1){let l;typeof s=="string"?l=Fl(s):(l={...s},Jn(!l.pathname||!l.pathname.includes("?"),vp("?","pathname","search",l)),Jn(!l.pathname||!l.pathname.includes("#"),vp("#","pathname","hash",l)),Jn(!l.search||!l.search.includes("#"),vp("#","search","hash",l)));let u=s===""||l.pathname==="",h=u?"/":l.pathname,p;if(h==null)p=n;else{let k=e.length-1;if(!i&&h.startsWith("..")){let j=h.split("/");for(;j[0]==="..";)j.shift(),k-=1;l.pathname=j.join("/")}p=k>=0?e[k]:"/"}let g=ME(l,p),y=h&&h!=="/"&&h.endsWith("/"),x=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var Ka=s=>s.join("/").replace(/\/\/+/g,"/"),PE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),LE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,OE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,VE=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function BE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function UE(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var T2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function E2(s,e){let n=s;if(typeof n!="string"||!IE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(T2)try{let u=new URL(window.location.href),h=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=Ja(h.pathname,e);h.origin===u.origin&&p!=null?n=p+h.search+h.hash:l=!0}catch{zr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var j2=["POST","PUT","PATCH","DELETE"];new Set(j2);var zE=["GET",...j2];new Set(zE);var ql=w.createContext(null);ql.displayName="DataRouter";var Wd=w.createContext(null);Wd.displayName="DataRouterState";var FE=w.createContext(!1),S2=w.createContext({isTransitioning:!1});S2.displayName="ViewTransition";var qE=w.createContext(new Map);qE.displayName="Fetchers";var HE=w.createContext(null);HE.displayName="Await";var Sr=w.createContext(null);Sr.displayName="Navigation";var yu=w.createContext(null);yu.displayName="Location";var sa=w.createContext({outlet:null,matches:[],isDataRoute:!1});sa.displayName="Route";var Sg=w.createContext(null);Sg.displayName="RouteError";var N2="REACT_ROUTER_ERROR",$E="REDIRECT",WE="ROUTE_ERROR_RESPONSE";function GE(s){if(s.startsWith(`${N2}:${$E}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function KE(s){if(s.startsWith(`${N2}:${WE}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new VE(e.status,e.statusText,e.data)}catch{}}function YE(s,{relative:e}={}){Jn(Hl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=w.useContext(Sr),{hash:l,pathname:u,search:h}=vu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Ka([n,u])),i.createHref({pathname:p,search:h,hash:l})}function Hl(){return w.useContext(yu)!=null}function ra(){return Jn(Hl(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(yu).location}var C2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function R2(s){w.useContext(Sr).static||w.useLayoutEffect(s)}function Js(){let{isDataRoute:s}=w.useContext(sa);return s?cj():QE()}function QE(){Jn(Hl(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(ql),{basename:e,navigator:n}=w.useContext(Sr),{matches:i}=w.useContext(sa),{pathname:l}=ra(),u=JSON.stringify(Eg(i)),h=w.useRef(!1);return R2(()=>{h.current=!0}),w.useCallback((g,y={})=>{if(zr(h.current,C2),!h.current)return;if(typeof g=="number"){n.go(g);return}let x=jg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Ka([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,u,l,s])}w.createContext(null);function XE(){let{matches:s}=w.useContext(sa),e=s[s.length-1];return e?e.params:{}}function vu(s,{relative:e}={}){let{matches:n}=w.useContext(sa),{pathname:i}=ra(),l=JSON.stringify(Eg(n));return w.useMemo(()=>jg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function JE(s,e){return A2(s,e)}function A2(s,e,n,i,l){Jn(Hl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(Sr),{matches:h}=w.useContext(sa),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",x=p?p.pathnameBase:"/",k=p&&p.route;{let X=k&&k.path||"";M2(y,!k||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let j=ra(),O;if(e){let X=typeof e=="string"?Fl(e):e;Jn(x==="/"||X.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${X.pathname}" was given in the \`location\` prop.`),O=X}else O=j;let K=O.pathname||"/",U=K;if(x!=="/"){let X=x.replace(/^\//,"").split("/");U="/"+K.replace(/^\//,"").split("/").slice(X.length).join("/")}let V=w2(s,{pathname:U});zr(k||V!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),zr(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=sj(V&&V.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:Ka([x,u.encodeLocation?u.encodeLocation(X.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?x:Ka([x,u.encodeLocation?u.encodeLocation(X.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:X.pathnameBase])})),h,n,i,l);return e&&te?w.createElement(yu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},te):te}function ZE(){let s=lj(),e=BE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:l},n):null,h)}var ej=w.createElement(ZE,null),I2=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=KE(s.digest);n&&(s=n)}let e=s!==void 0?w.createElement(sa.Provider,{value:this.props.routeContext},w.createElement(Sg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?w.createElement(tj,{error:s},e):e}};I2.contextType=FE;var bp=new WeakMap;function tj({children:s,error:e}){let{basename:n}=w.useContext(Sr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=GE(e.digest);if(i){let l=bp.get(e);if(l)throw l;let u=E2(i.location,n);if(T2&&!bp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw bp.set(e,h),h}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function nj({routeContext:s,match:e,children:n}){let i=w.useContext(ql);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(sa.Provider,{value:s},n)}function sj(s,e=[],n=null,i=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,h=n?.errors;if(h!=null){let x=u.findIndex(k=>k.route.id&&h?.[k.route.id]!==void 0);Jn(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,x+1))}let p=!1,g=-1;if(n)for(let x=0;x<u.length;x++){let k=u[x];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(g=x),k.route.id){let{loaderData:j,errors:O}=n,K=k.route.loader&&!j.hasOwnProperty(k.route.id)&&(!O||O[k.route.id]===void 0);if(k.route.lazy||K){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&i?(x,k)=>{i(x,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:UE(n.matches),errorInfo:k})}:void 0;return u.reduceRight((x,k,j)=>{let O,K=!1,U=null,V=null;n&&(O=h&&k.route.id?h[k.route.id]:void 0,U=k.route.errorElement||ej,p&&(g<0&&j===0?(M2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),K=!0,V=null):g===j&&(K=!0,V=k.route.hydrateFallbackElement||null)));let te=e.concat(u.slice(0,j+1)),X=()=>{let fe;return O?fe=U:K?fe=V:k.route.Component?fe=w.createElement(k.route.Component,null):k.route.element?fe=k.route.element:fe=x,w.createElement(nj,{match:k,routeContext:{outlet:x,matches:te,isDataRoute:n!=null},children:fe})};return n&&(k.route.ErrorBoundary||k.route.errorElement||j===0)?w.createElement(I2,{location:n.location,revalidation:n.revalidation,component:U,error:O,children:X(),routeContext:{outlet:null,matches:te,isDataRoute:!0},onError:y}):X()},null)}function Ng(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rj(s){let e=w.useContext(ql);return Jn(e,Ng(s)),e}function aj(s){let e=w.useContext(Wd);return Jn(e,Ng(s)),e}function ij(s){let e=w.useContext(sa);return Jn(e,Ng(s)),e}function Cg(s){let e=ij(s),n=e.matches[e.matches.length-1];return Jn(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function oj(){return Cg("useRouteId")}function lj(){let s=w.useContext(Sg),e=aj("useRouteError"),n=Cg("useRouteError");return s!==void 0?s:e.errors?.[n]}function cj(){let{router:s}=rj("useNavigate"),e=Cg("useNavigate"),n=w.useRef(!1);return R2(()=>{n.current=!0}),w.useCallback(async(l,u={})=>{zr(n.current,C2),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var E1={};function M2(s,e,n){!e&&!E1[s]&&(E1[s]=!0,zr(!1,n))}w.memo(uj);function uj({routes:s,future:e,state:n,onError:i}){return A2(s,void 0,n,i,e)}function hj({to:s,replace:e,state:n,relative:i}){Jn(Hl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=w.useContext(Sr);zr(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=w.useContext(sa),{pathname:h}=ra(),p=Js(),g=jg(s,Eg(u),h,i==="path"),y=JSON.stringify(g);return w.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function ns(s){Jn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dj({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){Jn(!Hl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[p,l,u,h]);typeof n=="string"&&(n=Fl(n));let{pathname:y="/",search:x="",hash:k="",state:j=null,key:O="default"}=n,K=w.useMemo(()=>{let U=Ja(y,p);return U==null?null:{location:{pathname:U,search:x,hash:k,state:j,key:O},navigationType:i}},[p,y,x,k,j,O,i]);return zr(K!=null,`<Router basename="${p}"> is not able to match the URL "${y}${x}${k}" because it does not start with the basename, so the <Router> won't render anything.`),K==null?null:w.createElement(Sr.Provider,{value:g},w.createElement(yu.Provider,{children:e,value:K}))}function fj({children:s,location:e}){return JE(Qp(s),e)}function Qp(s,e=[]){let n=[];return w.Children.forEach(s,(i,l)=>{if(!w.isValidElement(i))return;let u=[...e,l];if(i.type===w.Fragment){n.push.apply(n,Qp(i.props.children,u));return}Jn(i.type===ns,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Qp(i.props.children,u)),n.push(h)}),n}var hd="get",dd="application/x-www-form-urlencoded";function Gd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function mj(s){return Gd(s)&&s.tagName.toLowerCase()==="button"}function pj(s){return Gd(s)&&s.tagName.toLowerCase()==="form"}function gj(s){return Gd(s)&&s.tagName.toLowerCase()==="input"}function yj(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function vj(s,e){return s.button===0&&(!e||e==="_self")&&!yj(s)}function Xp(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let i=s[n];return e.concat(Array.isArray(i)?i.map(l=>[n,l]):[[n,i]])},[]))}function bj(s,e){let n=Xp(s);return e&&e.forEach((i,l)=>{n.has(l)||e.getAll(l).forEach(u=>{n.append(l,u)})}),n}var Qh=null;function xj(){if(Qh===null)try{new FormData(document.createElement("form"),0),Qh=!1}catch{Qh=!0}return Qh}var wj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xp(s){return s!=null&&!wj.has(s)?(zr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dd}"`),null):s}function _j(s,e){let n,i,l,u,h;if(pj(s)){let p=s.getAttribute("action");i=p?Ja(p,e):null,n=s.getAttribute("method")||hd,l=xp(s.getAttribute("enctype"))||dd,u=new FormData(s)}else if(mj(s)||gj(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?Ja(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||hd,l=xp(s.getAttribute("formenctype"))||xp(p.getAttribute("enctype"))||dd,u=new FormData(p,s),!xj()){let{name:y,type:x,value:k}=s;if(x==="image"){let j=y?`${y}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else y&&u.append(y,k)}}else{if(Gd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=hd,i=null,l=dd,h=s}return u&&l==="text/plain"&&(h=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function kj(s,e,n,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&Ja(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function Tj(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ej(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function jj(s,e,n){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await Tj(u,n);return h.links?h.links():[]}return[]}));return Rj(i.flat(1).filter(Ej).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function j1(s,e,n,i,l,u){let h=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let x=i.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let k=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function Sj(s,e,{includeHydrateFallback:n}={}){return Nj(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function Nj(s){return[...new Set(s)]}function Cj(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function Rj(s,e){let n=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(Cj(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function D2(){let s=w.useContext(ql);return Rg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Aj(){let s=w.useContext(Wd);return Rg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Ag=w.createContext(void 0);Ag.displayName="FrameworkContext";function P2(){let s=w.useContext(Ag);return Rg(s,"You must render this element inside a <HydratedRouter> element"),s}function Ij(s,e){let n=w.useContext(Ag),[i,l]=w.useState(!1),[u,h]=w.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:k}=e,j=w.useRef(null);w.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let U=te=>{te.forEach(X=>{h(X.isIntersecting)})},V=new IntersectionObserver(U,{threshold:.5});return j.current&&V.observe(j.current),()=>{V.disconnect()}}},[s]),w.useEffect(()=>{if(i){let U=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(U)}}},[i]);let O=()=>{l(!0)},K=()=>{l(!1),h(!1)};return n?s!=="intent"?[u,j,{}]:[u,j,{onFocus:Vc(p,O),onBlur:Vc(g,K),onMouseEnter:Vc(y,O),onMouseLeave:Vc(x,K),onTouchStart:Vc(k,O)}]:[!1,j,{}]}function Vc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function Mj({page:s,...e}){let{router:n}=D2(),i=w.useMemo(()=>w2(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?w.createElement(Pj,{page:s,matches:i,...e}):null}function Dj(s){let{manifest:e,routeModules:n}=P2(),[i,l]=w.useState([]);return w.useEffect(()=>{let u=!1;return jj(s,e,n).then(h=>{u||l(h)}),()=>{u=!0}},[s,e,n]),i}function Pj({page:s,matches:e,...n}){let i=ra(),{future:l,manifest:u,routeModules:h}=P2(),{basename:p}=D2(),{loaderData:g,matches:y}=Aj(),x=w.useMemo(()=>j1(s,e,y,u,i,"data"),[s,e,y,u,i]),k=w.useMemo(()=>j1(s,e,y,u,i,"assets"),[s,e,y,u,i]),j=w.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let U=new Set,V=!1;if(e.forEach(X=>{let fe=u.routes[X.route.id];!fe||!fe.hasLoader||(!x.some(je=>je.route.id===X.route.id)&&X.route.id in g&&h[X.route.id]?.shouldRevalidate||fe.hasClientLoader?V=!0:U.add(X.route.id))}),U.size===0)return[];let te=kj(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return V&&U.size>0&&te.searchParams.set("_routes",e.filter(X=>U.has(X.route.id)).map(X=>X.route.id).join(",")),[te.pathname+te.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,x,e,s,h]),O=w.useMemo(()=>Sj(k,u),[k,u]),K=Dj(k);return w.createElement(w.Fragment,null,j.map(U=>w.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),O.map(U=>w.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),K.map(({key:U,link:V})=>w.createElement("link",{key:U,nonce:n.nonce,...V,crossOrigin:V.crossOrigin??n.crossOrigin})))}function Lj(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Oj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Oj&&(window.__reactRouterVersion="7.13.0")}catch{}function Vj({basename:s,children:e,unstable_useTransitions:n,window:i}){let l=w.useRef();l.current==null&&(l.current=pE({window:i,v5Compat:!0}));let u=l.current,[h,p]=w.useState({action:u.action,location:u.location}),g=w.useCallback(y=>{n===!1?p(y):w.startTransition(()=>p(y))},[n]);return w.useLayoutEffect(()=>u.listen(g),[u,g]),w.createElement(dj,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:n})}var L2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,O2=w.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:h,state:p,target:g,to:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j,...O},K){let{basename:U,unstable_useTransitions:V}=w.useContext(Sr),te=typeof y=="string"&&L2.test(y),X=E2(y,U);y=X.to;let fe=YE(y,{relative:l}),[je,Ue,Oe]=Ij(i,O),A=Fj(y,{replace:h,state:p,target:g,preventScrollReset:x,relative:l,viewTransition:k,unstable_defaultShouldRevalidate:j,unstable_useTransitions:V});function E(L){e&&e(L),L.defaultPrevented||A(L)}let R=w.createElement("a",{...O,...Oe,href:X.absoluteURL||fe,onClick:X.isExternal||u?e:E,ref:Lj(K,Ue),target:g,"data-discover":!te&&n==="render"?"true":void 0});return je&&!te?w.createElement(w.Fragment,null,R,w.createElement(Mj,{page:fe})):R});O2.displayName="Link";var Bj=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:h,viewTransition:p,children:g,...y},x){let k=vu(h,{relative:y.relative}),j=ra(),O=w.useContext(Wd),{navigator:K,basename:U}=w.useContext(Sr),V=O!=null&&Kj(k)&&p===!0,te=K.encodeLocation?K.encodeLocation(k).pathname:k.pathname,X=j.pathname,fe=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(X=X.toLowerCase(),fe=fe?fe.toLowerCase():null,te=te.toLowerCase()),fe&&U&&(fe=Ja(fe,U)||fe);const je=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let Ue=X===te||!l&&X.startsWith(te)&&X.charAt(je)==="/",Oe=fe!=null&&(fe===te||!l&&fe.startsWith(te)&&fe.charAt(te.length)==="/"),A={isActive:Ue,isPending:Oe,isTransitioning:V},E=Ue?e:void 0,R;typeof i=="function"?R=i(A):R=[i,Ue?"active":null,Oe?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let L=typeof u=="function"?u(A):u;return w.createElement(O2,{...y,"aria-current":E,className:R,ref:x,style:L,to:h,viewTransition:p},typeof g=="function"?g(A):g)});Bj.displayName="NavLink";var Uj=w.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:u,method:h=hd,action:p,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j,...O},K)=>{let{unstable_useTransitions:U}=w.useContext(Sr),V=Wj(),te=Gj(p,{relative:y}),X=h.toLowerCase()==="get"?"get":"post",fe=typeof p=="string"&&L2.test(p),je=Ue=>{if(g&&g(Ue),Ue.defaultPrevented)return;Ue.preventDefault();let Oe=Ue.nativeEvent.submitter,A=Oe?.getAttribute("formmethod")||h,E=()=>V(Oe||Ue.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:l,state:u,relative:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j});U&&n!==!1?w.startTransition(()=>E()):E()};return w.createElement("form",{ref:K,method:X,action:te,onSubmit:i?g:je,...O,"data-discover":!fe&&s==="render"?"true":void 0})});Uj.displayName="Form";function zj(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V2(s){let e=w.useContext(ql);return Jn(e,zj(s)),e}function Fj(s,{target:e,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Js(),x=ra(),k=vu(s,{relative:u});return w.useCallback(j=>{if(vj(j,e)){j.preventDefault();let O=n!==void 0?n:ru(x)===ru(k),K=()=>y(s,{replace:O,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?w.startTransition(()=>K()):K()}},[x,y,k,n,i,e,s,l,u,h,p,g])}function qj(s){zr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef(Xp(s)),n=w.useRef(!1),i=ra(),l=w.useMemo(()=>bj(i.search,n.current?null:e.current),[i.search]),u=Js(),h=w.useCallback((p,g)=>{const y=Xp(typeof p=="function"?p(new URLSearchParams(l)):p);n.current=!0,u("?"+y,g)},[u,l]);return[l,h]}var Hj=0,$j=()=>`__${String(++Hj)}__`;function Wj(){let{router:s}=V2("useSubmit"),{basename:e}=w.useContext(Sr),n=oj(),i=s.fetch,l=s.navigate;return w.useCallback(async(u,h={})=>{let{action:p,method:g,encType:y,formData:x,body:k}=_j(u,e);if(h.navigate===!1){let j=h.fetcherKey||$j();await i(j,n,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:x,body:k,formMethod:h.method||g,formEncType:h.encType||y,flushSync:h.flushSync})}else await l(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:x,body:k,formMethod:h.method||g,formEncType:h.encType||y,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,l,e,n])}function Gj(s,{relative:e}={}){let{basename:n}=w.useContext(Sr),i=w.useContext(sa);Jn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...vu(s||".",{relative:e})},h=ra();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(k=>k).forEach(k=>p.append("index",k));let x=p.toString();u.search=x?`?${x}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Ka([n,u.pathname])),ru(u)}function Kj(s,{relative:e}={}){let n=w.useContext(S2);Jn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=V2("useViewTransitionState"),l=vu(s,{relative:e});if(!n.isTransitioning)return!1;let u=Ja(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=Ja(n.nextLocation.pathname,i)||n.nextLocation.pathname;return kd(l.pathname,h)!=null||kd(l.pathname,u)!=null}const Yj=()=>{};var S1={};const B2=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Qj=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],h=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],h=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},U2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,p=h?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,x=u>>2,k=(u&3)<<4|p>>4;let j=(p&15)<<2|y>>6,O=y&63;g||(O=64,h||(j=64)),i.push(n[x],n[k],n[j],n[O])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(B2(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Qj(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const k=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||k==null)throw new Xj;const j=u<<2|p>>4;if(i.push(j),y!==64){const O=p<<4&240|y>>2;if(i.push(O),k!==64){const K=y<<6&192|k;i.push(K)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Xj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jj=function(s){const e=B2(s);return U2.encodeByteArray(e,!0)},Td=function(s){return Jj(s).replace(/\./g,"")},z2=function(s){try{return U2.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Zj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const eS=()=>Zj().__FIREBASE_DEFAULTS__,tS=()=>{if(typeof process>"u"||typeof S1>"u")return;const s=S1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},nS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&z2(s[1]);return e&&JSON.parse(e)},Kd=()=>{try{return Yj()||eS()||tS()||nS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},F2=s=>Kd()?.emulatorHosts?.[s],q2=s=>{const e=F2(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},H2=()=>Kd()?.config,$2=s=>Kd()?.[`_${s}`];class sS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Xi(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ig(s){return(await fetch(s,{credentials:"include"})).ok}function W2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Td(JSON.stringify(n)),Td(JSON.stringify(h)),""].join(".")}const Qc={};function rS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Qc))Qc[e]?s.emulator.push(e):s.prod.push(e);return s}function aS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let N1=!1;function Mg(s,e){if(typeof window>"u"||typeof document>"u"||!Xi(window.location.host)||Qc[s]===e||Qc[s]||N1)return;Qc[s]=e;function n(j){return`__firebase__banner__${j}`}const i="__firebase__banner",u=rS().prod.length>0;function h(){const j=document.getElementById(i);j&&j.remove()}function p(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function g(j,O){j.setAttribute("width","24"),j.setAttribute("id",O),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function y(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{N1=!0,h()},j}function x(j,O){j.setAttribute("id",O),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function k(){const j=aS(i),O=n("text"),K=document.getElementById(O)||document.createElement("span"),U=n("learnmore"),V=document.getElementById(U)||document.createElement("a"),te=n("preprendIcon"),X=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const fe=j.element;p(fe),x(V,U);const je=y();g(X,te),fe.append(X,K,V,je),document.body.appendChild(fe)}u?(K.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}function Xs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xs())}function oS(){const s=Kd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function uS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hS(){const s=Xs();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function dS(){return!oS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fS(){try{return typeof indexedDB=="object"}catch{return!1}}function mS(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const pS="FirebaseError";class Na extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=pS,Object.setPrototypeOf(this,Na.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bu.prototype.create)}}class bu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?gS(u,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new Na(l,p,i)}}function gS(s,e){return s.replace(yS,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const yS=/\{\$([^}]+)}/g;function vS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ro(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=s[l],h=e[l];if(C1(u)&&C1(h)){if(!Ro(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function C1(s){return s!==null&&typeof s=="object"}function xu(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Hc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function $c(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function bS(s,e){const n=new xS(s,e);return n.subscribe.bind(n)}class xS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");wS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=wp),l.error===void 0&&(l.error=wp),l.complete===void 0&&(l.complete=wp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function wp(){}function Un(s){return s&&s._delegate?s._delegate:s}class Hi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const _o="[DEFAULT]";class _S{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new sS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TS(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kS(s){return s===_o?void 0:s}function TS(s){return s.instantiationMode==="EAGER"}class ES{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _S(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var an;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(an||(an={}));const jS={debug:an.DEBUG,verbose:an.VERBOSE,info:an.INFO,warn:an.WARN,error:an.ERROR,silent:an.SILENT},SS=an.INFO,NS={[an.DEBUG]:"log",[an.VERBOSE]:"log",[an.INFO]:"info",[an.WARN]:"warn",[an.ERROR]:"error"},CS=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=NS[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dg{constructor(e){this.name=e,this._logLevel=SS,this._logHandler=CS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in an))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,an.DEBUG,...e),this._logHandler(this,an.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,an.VERBOSE,...e),this._logHandler(this,an.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,an.INFO,...e),this._logHandler(this,an.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,an.WARN,...e),this._logHandler(this,an.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,an.ERROR,...e),this._logHandler(this,an.ERROR,...e)}}const RS=(s,e)=>e.some(n=>s instanceof n);let R1,A1;function AS(){return R1||(R1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IS(){return A1||(A1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G2=new WeakMap,Jp=new WeakMap,K2=new WeakMap,_p=new WeakMap,Pg=new WeakMap;function MS(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Ui(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&G2.set(n,s)}).catch(()=>{}),Pg.set(e,s),e}function DS(s){if(Jp.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Jp.set(s,e)}let Zp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Jp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||K2.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ui(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function PS(s){Zp=s(Zp)}function LS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(kp(this),e,...n);return K2.set(i,e.sort?e.sort():[e]),Ui(i)}:IS().includes(s)?function(...e){return s.apply(kp(this),e),Ui(G2.get(this))}:function(...e){return Ui(s.apply(kp(this),e))}}function OS(s){return typeof s=="function"?LS(s):(s instanceof IDBTransaction&&DS(s),RS(s,AS())?new Proxy(s,Zp):s)}function Ui(s){if(s instanceof IDBRequest)return MS(s);if(_p.has(s))return _p.get(s);const e=OS(s);return e!==s&&(_p.set(s,e),Pg.set(e,s)),e}const kp=s=>Pg.get(s);function VS(s,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(s,e),p=Ui(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Ui(h.result),g.oldVersion,g.newVersion,Ui(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const BS=["get","getKey","getAll","getAllKeys","count"],US=["put","add","delete","clear"],Tp=new Map;function I1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Tp.get(e))return Tp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=US.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||BS.includes(n)))return;const u=async function(h,...p){const g=this.transaction(h,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return Tp.set(e,u),u}PS(s=>({...s,get:(e,n,i)=>I1(e,n)||s.get(e,n,i),has:(e,n)=>!!I1(e,n)||s.has(e,n)}));class zS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FS(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function FS(s){return s.getComponent()?.type==="VERSION"}const eg="@firebase/app",M1="0.14.7";const Za=new Dg("@firebase/app"),qS="@firebase/app-compat",HS="@firebase/analytics-compat",$S="@firebase/analytics",WS="@firebase/app-check-compat",GS="@firebase/app-check",KS="@firebase/auth",YS="@firebase/auth-compat",QS="@firebase/database",XS="@firebase/data-connect",JS="@firebase/database-compat",ZS="@firebase/functions",eN="@firebase/functions-compat",tN="@firebase/installations",nN="@firebase/installations-compat",sN="@firebase/messaging",rN="@firebase/messaging-compat",aN="@firebase/performance",iN="@firebase/performance-compat",oN="@firebase/remote-config",lN="@firebase/remote-config-compat",cN="@firebase/storage",uN="@firebase/storage-compat",hN="@firebase/firestore",dN="@firebase/ai",fN="@firebase/firestore-compat",mN="firebase",pN="12.8.0";const tg="[DEFAULT]",gN={[eg]:"fire-core",[qS]:"fire-core-compat",[$S]:"fire-analytics",[HS]:"fire-analytics-compat",[GS]:"fire-app-check",[WS]:"fire-app-check-compat",[KS]:"fire-auth",[YS]:"fire-auth-compat",[QS]:"fire-rtdb",[XS]:"fire-data-connect",[JS]:"fire-rtdb-compat",[ZS]:"fire-fn",[eN]:"fire-fn-compat",[tN]:"fire-iid",[nN]:"fire-iid-compat",[sN]:"fire-fcm",[rN]:"fire-fcm-compat",[aN]:"fire-perf",[iN]:"fire-perf-compat",[oN]:"fire-rc",[lN]:"fire-rc-compat",[cN]:"fire-gcs",[uN]:"fire-gcs-compat",[hN]:"fire-fst",[fN]:"fire-fst-compat",[dN]:"fire-vertex","fire-js":"fire-js",[mN]:"fire-js-all"};const Ed=new Map,yN=new Map,ng=new Map;function D1(s,e){try{s.container.addComponent(e)}catch(n){Za.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Ao(s){const e=s.name;if(ng.has(e))return Za.debug(`There were multiple attempts to register component ${e}.`),!1;ng.set(e,s);for(const n of Ed.values())D1(n,s);for(const n of yN.values())D1(n,s);return!0}function Yd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Er(s){return s==null?!1:s.settings!==void 0}const vN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zi=new bu("app","Firebase",vN);class bN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}const Vo=pN;function Lg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:tg,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw zi.create("bad-app-name",{appName:String(l)});if(n||(n=H2()),!n)throw zi.create("no-options");const u=Ed.get(l);if(u){if(Ro(n,u.options)&&Ro(i,u.config))return u;throw zi.create("duplicate-app",{appName:l})}const h=new ES(l);for(const g of ng.values())h.addComponent(g);const p=new bN(n,i,h);return Ed.set(l,p),p}function Og(s=tg){const e=Ed.get(s);if(!e&&s===tg&&H2())return Lg();if(!e)throw zi.create("no-app",{appName:s});return e}function ba(s,e,n){let i=gN[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Za.warn(h.join(" "));return}Ao(new Hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const xN="firebase-heartbeat-database",wN=1,au="firebase-heartbeat-store";let Ep=null;function Y2(){return Ep||(Ep=VS(xN,wN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(au)}catch(n){console.warn(n)}}}}).catch(s=>{throw zi.create("idb-open",{originalErrorMessage:s.message})})),Ep}async function _N(s){try{const n=(await Y2()).transaction(au),i=await n.objectStore(au).get(Q2(s));return await n.done,i}catch(e){if(e instanceof Na)Za.warn(e.message);else{const n=zi.create("idb-get",{originalErrorMessage:e?.message});Za.warn(n.message)}}}async function P1(s,e){try{const i=(await Y2()).transaction(au,"readwrite");await i.objectStore(au).put(e,Q2(s)),await i.done}catch(n){if(n instanceof Na)Za.warn(n.message);else{const i=zi.create("idb-set",{originalErrorMessage:n?.message});Za.warn(i.message)}}}function Q2(s){return`${s.name}!${s.options.appId}`}const kN=1024,TN=30;class EN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=L1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>TN){const l=NN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Za.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=L1(),{heartbeatsToSend:n,unsentEntries:i}=jN(this._heartbeatsCache.heartbeats),l=Td(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Za.warn(e),""}}}function L1(){return new Date().toISOString().substring(0,10)}function jN(s,e=kN){const n=[];let i=s.slice();for(const l of s){const u=n.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),O1(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),O1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class SN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fS()?mS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _N(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return P1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return P1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function O1(s){return Td(JSON.stringify({version:2,heartbeats:s})).length}function NN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function CN(s){Ao(new Hi("platform-logger",e=>new zS(e),"PRIVATE")),Ao(new Hi("heartbeat",e=>new EN(e),"PRIVATE")),ba(eg,M1,s),ba(eg,M1,"esm2020"),ba("fire-js","")}CN("");function X2(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RN=X2,J2=new bu("auth","Firebase",X2());const jd=new Dg("@firebase/auth");function AN(s,...e){jd.logLevel<=an.WARN&&jd.warn(`Auth (${Vo}): ${s}`,...e)}function fd(s,...e){jd.logLevel<=an.ERROR&&jd.error(`Auth (${Vo}): ${s}`,...e)}function ta(s,...e){throw Vg(s,...e)}function xa(s,...e){return Vg(s,...e)}function Z2(s,e,n){const i={...RN(),[e]:n};return new bu("auth","Firebase",i).create(e,{appName:s.name})}function Ya(s){return Z2(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vg(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return J2.create(s,...e)}function Pt(s,e,...n){if(!s)throw Vg(e,...n)}function Wa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw fd(e),new Error(e)}function ei(s,e){s||Wa(e)}function sg(){return typeof self<"u"&&self.location?.href||""}function IN(){return V1()==="http:"||V1()==="https:"}function V1(){return typeof self<"u"&&self.location?.protocol||null}function MN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IN()||cS()||"connection"in navigator)?navigator.onLine:!0}function DN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class wu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ei(n>e,"Short delay should be less than long delay!"),this.isMobile=iS()||uS()}get(){return MN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bg(s,e){ei(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class ew{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const PN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const LN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ON=new wu(3e4,6e4);function si(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ri(s,e,n,i,l={}){return tw(s,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=xu({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return lS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Xi(s.emulatorConfig.host)&&(y.credentials="include"),ew.fetch()(await nw(s,s.config.apiHost,n,p),y)})}async function tw(s,e,n){s._canInitEmulator=!1;const i={...PN,...e};try{const l=new BN(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Xh(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Xh(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Xh(s,"user-disabled",h);const x=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Z2(s,x,y);ta(s,x)}}catch(l){if(l instanceof Na)throw l;ta(s,"network-request-failed",{message:String(l)})}}async function _u(s,e,n,i,l={}){const u=await ri(s,e,n,i,l);return"mfaPendingCredential"in u&&ta(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function nw(s,e,n,i){const l=`${e}${n}?${i}`,u=s,h=u.config.emulator?Bg(s.config,l):`${s.config.apiScheme}://${l}`;return LN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function VN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(xa(this.auth,"network-request-failed")),ON.get())})}}function Xh(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=xa(s,e,i);return l.customData._tokenResponse=n,l}function B1(s){return s!==void 0&&s.enterprise!==void 0}class UN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return VN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zN(s,e){return ri(s,"GET","/v2/recaptchaConfig",si(s,e))}async function FN(s,e){return ri(s,"POST","/v1/accounts:delete",e)}async function Sd(s,e){return ri(s,"POST","/v1/accounts:lookup",e)}function Xc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qN(s,e=!1){const n=Un(s),i=await n.getIdToken(e),l=Ug(i);Pt(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:Xc(jp(l.auth_time)),issuedAtTime:Xc(jp(l.iat)),expirationTime:Xc(jp(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function jp(s){return Number(s)*1e3}function Ug(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return fd("JWT malformed, contained fewer than 3 sections"),null;try{const l=z2(n);return l?JSON.parse(l):(fd("Failed to decode base64 JWT payload"),null)}catch(l){return fd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function U1(s){const e=Ug(s);return Pt(e,"internal-error"),Pt(typeof e.exp<"u","internal-error"),Pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function iu(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Na&&HN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function HN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class $N{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class rg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nd(s){const e=s.auth,n=await s.getIdToken(),i=await iu(s,Sd(e,{idToken:n}));Pt(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?sw(l.providerUserInfo):[],h=GN(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!h?.length,y=p?g:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new rg(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function WN(s){const e=Un(s);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GN(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function sw(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function KN(s,e){const n=await tw(s,{},async()=>{const i=xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,h=await nw(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&Xi(s.emulatorConfig.host)&&(g.credentials="include"),ew.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YN(s,e){return ri(s,"POST","/v2/accounts:revokeToken",si(s,e))}class Cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pt(e.idToken,"internal-error"),Pt(typeof e.idToken<"u","internal-error"),Pt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):U1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pt(e.length!==0,"internal-error");const n=U1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await KN(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,h=new Cl;return i&&(Pt(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(Pt(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(Pt(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cl,this.toJSON())}_performRefresh(){return Wa("not implemented")}}function Ai(s,e){Pt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Zr{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new $N(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new rg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await iu(this,this.stsTokenManager.getToken(this.auth,e));return Pt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qN(this,e)}reload(){return WN(this)}_assign(e){this!==e&&(Pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Nd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(Ya(this.auth));const e=await this.getIdToken();return await iu(this,FN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:k,emailVerified:j,isAnonymous:O,providerData:K,stsTokenManager:U}=n;Pt(k&&U,e,"internal-error");const V=Cl.fromJSON(this.name,U);Pt(typeof k=="string",e,"internal-error"),Ai(i,e.name),Ai(l,e.name),Pt(typeof j=="boolean",e,"internal-error"),Pt(typeof O=="boolean",e,"internal-error"),Ai(u,e.name),Ai(h,e.name),Ai(p,e.name),Ai(g,e.name),Ai(y,e.name),Ai(x,e.name);const te=new Zr({uid:k,auth:e,email:l,emailVerified:j,displayName:i,isAnonymous:O,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:V,createdAt:y,lastLoginAt:x});return K&&Array.isArray(K)&&(te.providerData=K.map(X=>({...X}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,n,i=!1){const l=new Cl;l.updateFromServerResponse(n);const u=new Zr({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Nd(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];Pt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?sw(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,p=new Cl;p.updateFromIdToken(i);const g=new Zr({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new rg(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const z1=new Map;function Ga(s){ei(s instanceof Function,"Expected a class definition");let e=z1.get(s);return e?(ei(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,z1.set(s,e),e)}class rw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rw.type="NONE";const F1=rw;function md(s,e,n){return`firebase:${s}:${e}:${n}`}class Rl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=md(this.userKey,l.apiKey,u),this.fullPersistenceKey=md("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sd(this.auth,{idToken:e}).catch(()=>{});return n?Zr._fromGetAccountInfoResponse(this.auth,n,e):null}return Zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Rl(Ga(F1),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Ga(F1);const h=md(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(h);if(x){let k;if(typeof x=="string"){const j=await Sd(e,{idToken:x}).catch(()=>{});if(!j)break;k=await Zr._fromGetAccountInfoResponse(e,j,x)}else k=Zr._fromJSON(e,x);y!==u&&(p=k),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Rl(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new Rl(u,e,i))}}function q1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uw(e))return"Blackberry";if(hw(e))return"Webos";if(iw(e))return"Safari";if((e.includes("chrome/")||ow(e))&&!e.includes("edge/"))return"Chrome";if(cw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function aw(s=Xs()){return/firefox\//i.test(s)}function iw(s=Xs()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ow(s=Xs()){return/crios\//i.test(s)}function lw(s=Xs()){return/iemobile/i.test(s)}function cw(s=Xs()){return/android/i.test(s)}function uw(s=Xs()){return/blackberry/i.test(s)}function hw(s=Xs()){return/webos/i.test(s)}function zg(s=Xs()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function QN(s=Xs()){return zg(s)&&!!window.navigator?.standalone}function XN(){return hS()&&document.documentMode===10}function dw(s=Xs()){return zg(s)||cw(s)||hw(s)||uw(s)||/windows phone/i.test(s)||lw(s)}function fw(s,e=[]){let n;switch(s){case"Browser":n=q1(Xs());break;case"Worker":n=`${q1(Xs())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vo}/${i}`}class JN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function ZN(s,e={}){return ri(s,"GET","/v2/passwordPolicy",si(s,e))}const eC=6;class tC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??eC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class nC{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H1(this),this.idTokenSubscription=new H1(this),this.beforeStateQueue=new JN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ga(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Rl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sd(this,{idToken:e}),i=await Zr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Er(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Er(this.app))return Promise.reject(Ya(this));const n=e?Un(e):null;return n&&Pt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(Ya(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Er(this.app)?Promise.reject(Ya(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ga(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZN(this),n=new tC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new bu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await YN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ga(e)||this._popupRedirectResolver;Pt(n,this,"argument-error"),this.redirectPersistenceManager=await Rl.create(this,[Ga(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pt(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,l);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&AN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ji(s){return Un(s)}class H1{constructor(e){this.auth=e,this.observer=null,this.addObserver=bS(n=>this.observer=n)}get next(){return Pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sC(s){Qd=s}function mw(s){return Qd.loadJS(s)}function rC(){return Qd.recaptchaEnterpriseScript}function aC(){return Qd.gapiScript}function iC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class oC{constructor(){this.enterprise=new lC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class lC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const cC="recaptcha-enterprise",pw="NO_RECAPTCHA";class uC{constructor(e){this.type=cC,this.auth=Ji(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{zN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new UN(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,h,p){const g=window.grecaptcha;B1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(pw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oC().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!n&&B1(window.grecaptcha))l(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=rC();g.length!==0&&(g+=p),mw(g).then(()=>{l(p,u,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function $1(s,e,n,i=!1,l=!1){const u=new uC(s);let h;if(l)h=pw;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Cd(s,e,n,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await $1(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await $1(s,e,n,n==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function hC(s,e){const n=Yd(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Ro(u,e??{}))return l;ta(l,"already-initialized")}return n.initialize({options:e})}function dC(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Ga);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function fC(s,e,n){const i=Ji(s);Pt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=gw(e),{host:h,port:p}=mC(e),g=p===null?"":`:${p}`,y={url:`${u}//${h}${g}/`},x=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Pt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Pt(Ro(y,i.config.emulator)&&Ro(x,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=x,i.settings.appVerificationDisabledForTesting=!0,Xi(h)?(Ig(`${u}//${h}${g}`),Mg("Auth",!0)):pC()}function gw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function mC(s){const e=gw(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:W1(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:W1(h)}}}function W1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function pC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Fg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wa("not implemented")}_getIdTokenResponse(e){return Wa("not implemented")}_linkToIdToken(e,n){return Wa("not implemented")}_getReauthenticationResolver(e){return Wa("not implemented")}}async function gC(s,e){return ri(s,"POST","/v1/accounts:signUp",e)}async function yC(s,e){return _u(s,"POST","/v1/accounts:signInWithPassword",si(s,e))}async function vC(s,e){return ri(s,"POST","/v1/accounts:sendOobCode",si(s,e))}async function bC(s,e){return vC(s,e)}async function xC(s,e){return _u(s,"POST","/v1/accounts:signInWithEmailLink",si(s,e))}async function wC(s,e){return _u(s,"POST","/v1/accounts:signInWithEmailLink",si(s,e))}class ou extends Fg{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new ou(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new ou(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,n,"signInWithPassword",yC);case"emailLink":return xC(e,{email:this._email,oobCode:this._password});default:ta(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cd(e,i,"signUpPassword",gC);case"emailLink":return wC(e,{idToken:n,email:this._email,oobCode:this._password});default:ta(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Al(s,e){return _u(s,"POST","/v1/accounts:signInWithIdp",si(s,e))}const _C="http://localhost";class Io extends Fg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ta("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const h=new Io(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return Al(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Al(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Al(e,n)}buildRequest(){const e={requestUri:_C,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xu(n)}return e}}function kC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TC(s){const e=Hc($c(s)).link,n=e?Hc($c(e)).deep_link_id:null,i=Hc($c(s)).deep_link_id;return(i?Hc($c(i)).link:null)||i||n||e||s}class qg{constructor(e){const n=Hc($c(e)),i=n.apiKey??null,l=n.oobCode??null,u=kC(n.mode??null);Pt(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=TC(e);try{return new qg(n)}catch{return null}}}class $l{constructor(){this.providerId=$l.PROVIDER_ID}static credential(e,n){return ou._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=qg.parseLink(n);return Pt(i,"argument-error"),ou._fromEmailAndCode(e,i.code,i.tenantId)}}$l.PROVIDER_ID="password";$l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ku extends yw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Di extends ku{constructor(){super("facebook.com")}static credential(e){return Io._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.FACEBOOK_SIGN_IN_METHOD="facebook.com";Di.PROVIDER_ID="facebook.com";class Pi extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Io._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Pi.credential(n,i)}catch{return null}}}Pi.GOOGLE_SIGN_IN_METHOD="google.com";Pi.PROVIDER_ID="google.com";class Li extends ku{constructor(){super("github.com")}static credential(e){return Io._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";class Oi extends ku{constructor(){super("twitter.com")}static credential(e,n){return Io._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Oi.credential(n,i)}catch{return null}}}Oi.TWITTER_SIGN_IN_METHOD="twitter.com";Oi.PROVIDER_ID="twitter.com";async function EC(s,e){return _u(s,"POST","/v1/accounts:signUp",si(s,e))}class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await Zr._fromIdTokenResponse(e,i,l),h=G1(i);return new Mo({user:u,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=G1(i);return new Mo({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function G1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Rd extends Na{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Rd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new Rd(e,n,i,l)}}function vw(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Rd._fromErrorAndOperation(s,u,e,i):u})}async function jC(s,e,n=!1){const i=await iu(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Mo._forOperation(s,"link",i)}async function SC(s,e,n=!1){const{auth:i}=s;if(Er(i.app))return Promise.reject(Ya(i));const l="reauthenticate";try{const u=await iu(s,vw(i,l,e,s),n);Pt(u.idToken,i,"internal-error");const h=Ug(u.idToken);Pt(h,i,"internal-error");const{sub:p}=h;return Pt(s.uid===p,i,"user-mismatch"),Mo._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&ta(i,"user-mismatch"),u}}async function bw(s,e,n=!1){if(Er(s.app))return Promise.reject(Ya(s));const i="signIn",l=await vw(s,i,e),u=await Mo._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(u.user),u}async function NC(s,e){return bw(Ji(s),e)}async function xw(s){const e=Ji(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function CC(s,e,n){const i=Ji(s);await Cd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",bC)}async function BD(s,e,n){if(Er(s.app))return Promise.reject(Ya(s));const i=Ji(s),h=await Cd(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&xw(s),g}),p=await Mo._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function RC(s,e,n){return Er(s.app)?Promise.reject(Ya(s)):NC(Un(s),$l.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&xw(s),i})}function AC(s,e){return Un(s).setPersistence(e)}function IC(s,e,n,i){return Un(s).onIdTokenChanged(e,n,i)}function MC(s,e,n){return Un(s).beforeAuthStateChanged(e,n)}function DC(s,e,n,i){return Un(s).onAuthStateChanged(e,n,i)}function PC(s){return Un(s).signOut()}const Ad="__sak";class ww{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ad,"1"),this.storage.removeItem(Ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const LC=1e3,OC=10;class _w extends ww{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);XN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,OC):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},LC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_w.type="LOCAL";const kw=_w;class Tw extends ww{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Tw.type="SESSION";const Hg=Tw;function VC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new Xd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,h=this.handlersMap[l];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async y=>y(n.origin,u)),g=await VC(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xd.receivers=[];function $g(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class BC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const y=$g("",20);l.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(k){const j=k;if(j.data.eventId===y)switch(j.data.status){case"ack":clearTimeout(x),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(j.data.response);break;default:clearTimeout(x),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function wa(){return window}function UC(s){wa().location.href=s}function Ew(){return typeof wa().WorkerGlobalScope<"u"&&typeof wa().importScripts=="function"}async function zC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FC(){return navigator?.serviceWorker?.controller||null}function qC(){return Ew()?self:null}const jw="firebaseLocalStorageDb",HC=1,Id="firebaseLocalStorage",Sw="fbase_key";class Tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jd(s,e){return s.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function $C(){const s=indexedDB.deleteDatabase(jw);return new Tu(s).toPromise()}function ag(){const s=indexedDB.open(jw,HC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Id,{keyPath:Sw})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Id)?e(i):(i.close(),await $C(),e(await ag()))})})}async function K1(s,e,n){const i=Jd(s,!0).put({[Sw]:e,value:n});return new Tu(i).toPromise()}async function WC(s,e){const n=Jd(s,!1).get(e),i=await new Tu(n).toPromise();return i===void 0?null:i.value}function Y1(s,e){const n=Jd(s,!0).delete(e);return new Tu(n).toPromise()}const GC=800,KC=3;class Nw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ag(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>KC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ew()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xd._getInstance(qC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await zC(),!this.activeServiceWorker)return;this.sender=new BC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ag();return await K1(e,Ad,"1"),await Y1(e,Ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>K1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>WC(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Y1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Jd(l,!1).getAll();return new Tu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Nw.type="LOCAL";const YC=Nw;new wu(3e4,6e4);function QC(s,e){return e?Ga(e):(Pt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Wg extends Fg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Al(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Al(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Al(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XC(s){return bw(s.auth,new Wg(s),s.bypassAuthState)}function JC(s){const{auth:e,user:n}=s;return Pt(n,e,"internal-error"),SC(n,new Wg(s),s.bypassAuthState)}async function ZC(s){const{auth:e,user:n}=s;return Pt(n,e,"internal-error"),jC(n,new Wg(s),s.bypassAuthState)}class Cw{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XC;case"linkViaPopup":case"linkViaRedirect":return ZC;case"reauthViaPopup":case"reauthViaRedirect":return JC;default:ta(this.auth,"internal-error")}}resolve(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const e4=new wu(2e3,1e4);class Nl extends Cw{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Nl.currentPopupAction&&Nl.currentPopupAction.cancel(),Nl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pt(e,this.auth,"internal-error"),e}async onExecution(){ei(this.filter.length===1,"Popup operations only handle one event");const e=$g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,e4.get())};e()}}Nl.currentPopupAction=null;const t4="pendingRedirect",pd=new Map;class n4 extends Cw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=pd.get(this.auth._key());if(!e){try{const i=await s4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function s4(s,e){const n=i4(e),i=a4(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function r4(s,e){pd.set(s._key(),e)}function a4(s){return Ga(s._redirectPersistence)}function i4(s){return md(t4,s.config.apiKey,s.name)}async function o4(s,e,n=!1){if(Er(s.app))return Promise.reject(Ya(s));const i=Ji(s),l=QC(i,e),h=await new n4(i,l,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const l4=600*1e3;class c4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!u4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Rw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(xa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=l4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q1(e))}saveEventToCache(e){this.cachedEventUids.add(Q1(e)),this.lastProcessedEventTime=Date.now()}}function Q1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Rw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function u4(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rw(s);default:return!1}}async function h4(s,e={}){return ri(s,"GET","/v1/projects",e)}const d4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f4=/^https?/;async function m4(s){if(s.config.emulator)return;const{authorizedDomains:e}=await h4(s);for(const n of e)try{if(p4(n))return}catch{}ta(s,"unauthorized-domain")}function p4(s){const e=sg(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!f4.test(n))return!1;if(d4.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const g4=new wu(3e4,6e4);function X1(){const s=wa().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function y4(s){return new Promise((e,n)=>{function i(){X1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X1(),n(xa(s,"network-request-failed"))},timeout:g4.get()})}if(wa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wa().gapi?.load)i();else{const l=iC("iframefcb");return wa()[l]=()=>{gapi.load?i():n(xa(s,"network-request-failed"))},mw(`${aC()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw gd=null,e})}let gd=null;function v4(s){return gd=gd||y4(s),gd}const b4=new wu(5e3,15e3),x4="__/auth/iframe",w4="emulator/auth/iframe",_4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T4(s){const e=s.config;Pt(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Bg(e,w4):`https://${s.config.authDomain}/${x4}`,i={apiKey:e.apiKey,appName:s.name,v:Vo},l=k4.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${xu(i).slice(1)}`}async function E4(s){const e=await v4(s),n=wa().gapi;return Pt(n,s,"internal-error"),e.open({where:document.body,url:T4(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_4,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=xa(s,"network-request-failed"),p=wa().setTimeout(()=>{u(h)},b4.get());function g(){wa().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(h)})}))}const j4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},S4=500,N4=600,C4="_blank",R4="http://localhost";class J1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A4(s,e,n,i=S4,l=N4){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...j4,width:i.toString(),height:l.toString(),top:u,left:h},y=Xs().toLowerCase();n&&(p=ow(y)?C4:n),aw(y)&&(e=e||R4,g.scrollbars="yes");const x=Object.entries(g).reduce((j,[O,K])=>`${j}${O}=${K},`,"");if(QN(y)&&p!=="_self")return I4(e||"",p),new J1(null);const k=window.open(e||"",p,x);Pt(k,s,"popup-blocked");try{k.focus()}catch{}return new J1(k)}function I4(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const M4="__/auth/handler",D4="emulator/auth/handler",P4=encodeURIComponent("fac");async function Z1(s,e,n,i,l,u){Pt(s.config.authDomain,s,"auth-domain-config-required"),Pt(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Vo,eventId:l};if(e instanceof yw){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",vS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,k]of Object.entries({}))h[x]=k}if(e instanceof ku){const x=e.getScopes().filter(k=>k!=="");x.length>0&&(h.scopes=x.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await s._getAppCheckToken(),y=g?`#${P4}=${encodeURIComponent(g)}`:"";return`${L4(s)}?${xu(p).slice(1)}${y}`}function L4({config:s}){return s.emulator?Bg(s,D4):`https://${s.authDomain}/${M4}`}const Sp="webStorageSupport";class O4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hg,this._completeRedirectFn=o4,this._overrideRedirectResult=r4}async _openPopup(e,n,i,l){ei(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Z1(e,n,i,sg(),l);return A4(e,u,$g())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await Z1(e,n,i,sg(),l);return UC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(ei(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await E4(e),i=new c4(e);return n.register("authEvent",l=>(Pt(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sp,{type:Sp},l=>{const u=l?.[0]?.[Sp];u!==void 0&&n(!!u),ta(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=m4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dw()||iw()||zg()}}const V4=O4;var ex="@firebase/auth",tx="1.12.0";class B4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function U4(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z4(s){Ao(new Hi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Pt(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fw(s)},y=new nC(i,l,u,g);return dC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ao(new Hi("auth-internal",e=>{const n=Ji(e.getProvider("auth").getImmediate());return(i=>new B4(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ba(ex,tx,U4(s)),ba(ex,tx,"esm2020")}const F4=300,q4=$2("authIdTokenMaxAge")||F4;let nx=null;const H4=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>q4)return;const l=n?.token;nx!==l&&(nx=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Aw(s=Og()){const e=Yd(s,"auth");if(e.isInitialized())return e.getImmediate();const n=hC(s,{popupRedirectResolver:V4,persistence:[YC,kw,Hg]}),i=$2("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=H4(u.toString());MC(n,h,()=>h(n.currentUser)),IC(n,p=>h(p))}}const l=F2("auth");return l&&fC(n,`http://${l}`),n}function $4(){return document.getElementsByTagName("head")?.[0]??document}sC({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=xa("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",$4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z4("Browser");var sx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Fi,Iw;(function(){var s;function e(A,E){function R(){}R.prototype=E.prototype,A.F=E.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(L,D,z){for(var I=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)I[Fe-2]=arguments[Fe];return E.prototype[D].apply(L,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(A,E,R){R||(R=0);const L=Array(16);if(typeof E=="string")for(var D=0;D<16;++D)L[D]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(D=0;D<16;++D)L[D]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=A.g[0],R=A.g[1],D=A.g[2];let z=A.g[3],I;I=E+(z^R&(D^z))+L[0]+3614090360&4294967295,E=R+(I<<7&4294967295|I>>>25),I=z+(D^E&(R^D))+L[1]+3905402710&4294967295,z=E+(I<<12&4294967295|I>>>20),I=D+(R^z&(E^R))+L[2]+606105819&4294967295,D=z+(I<<17&4294967295|I>>>15),I=R+(E^D&(z^E))+L[3]+3250441966&4294967295,R=D+(I<<22&4294967295|I>>>10),I=E+(z^R&(D^z))+L[4]+4118548399&4294967295,E=R+(I<<7&4294967295|I>>>25),I=z+(D^E&(R^D))+L[5]+1200080426&4294967295,z=E+(I<<12&4294967295|I>>>20),I=D+(R^z&(E^R))+L[6]+2821735955&4294967295,D=z+(I<<17&4294967295|I>>>15),I=R+(E^D&(z^E))+L[7]+4249261313&4294967295,R=D+(I<<22&4294967295|I>>>10),I=E+(z^R&(D^z))+L[8]+1770035416&4294967295,E=R+(I<<7&4294967295|I>>>25),I=z+(D^E&(R^D))+L[9]+2336552879&4294967295,z=E+(I<<12&4294967295|I>>>20),I=D+(R^z&(E^R))+L[10]+4294925233&4294967295,D=z+(I<<17&4294967295|I>>>15),I=R+(E^D&(z^E))+L[11]+2304563134&4294967295,R=D+(I<<22&4294967295|I>>>10),I=E+(z^R&(D^z))+L[12]+1804603682&4294967295,E=R+(I<<7&4294967295|I>>>25),I=z+(D^E&(R^D))+L[13]+4254626195&4294967295,z=E+(I<<12&4294967295|I>>>20),I=D+(R^z&(E^R))+L[14]+2792965006&4294967295,D=z+(I<<17&4294967295|I>>>15),I=R+(E^D&(z^E))+L[15]+1236535329&4294967295,R=D+(I<<22&4294967295|I>>>10),I=E+(D^z&(R^D))+L[1]+4129170786&4294967295,E=R+(I<<5&4294967295|I>>>27),I=z+(R^D&(E^R))+L[6]+3225465664&4294967295,z=E+(I<<9&4294967295|I>>>23),I=D+(E^R&(z^E))+L[11]+643717713&4294967295,D=z+(I<<14&4294967295|I>>>18),I=R+(z^E&(D^z))+L[0]+3921069994&4294967295,R=D+(I<<20&4294967295|I>>>12),I=E+(D^z&(R^D))+L[5]+3593408605&4294967295,E=R+(I<<5&4294967295|I>>>27),I=z+(R^D&(E^R))+L[10]+38016083&4294967295,z=E+(I<<9&4294967295|I>>>23),I=D+(E^R&(z^E))+L[15]+3634488961&4294967295,D=z+(I<<14&4294967295|I>>>18),I=R+(z^E&(D^z))+L[4]+3889429448&4294967295,R=D+(I<<20&4294967295|I>>>12),I=E+(D^z&(R^D))+L[9]+568446438&4294967295,E=R+(I<<5&4294967295|I>>>27),I=z+(R^D&(E^R))+L[14]+3275163606&4294967295,z=E+(I<<9&4294967295|I>>>23),I=D+(E^R&(z^E))+L[3]+4107603335&4294967295,D=z+(I<<14&4294967295|I>>>18),I=R+(z^E&(D^z))+L[8]+1163531501&4294967295,R=D+(I<<20&4294967295|I>>>12),I=E+(D^z&(R^D))+L[13]+2850285829&4294967295,E=R+(I<<5&4294967295|I>>>27),I=z+(R^D&(E^R))+L[2]+4243563512&4294967295,z=E+(I<<9&4294967295|I>>>23),I=D+(E^R&(z^E))+L[7]+1735328473&4294967295,D=z+(I<<14&4294967295|I>>>18),I=R+(z^E&(D^z))+L[12]+2368359562&4294967295,R=D+(I<<20&4294967295|I>>>12),I=E+(R^D^z)+L[5]+4294588738&4294967295,E=R+(I<<4&4294967295|I>>>28),I=z+(E^R^D)+L[8]+2272392833&4294967295,z=E+(I<<11&4294967295|I>>>21),I=D+(z^E^R)+L[11]+1839030562&4294967295,D=z+(I<<16&4294967295|I>>>16),I=R+(D^z^E)+L[14]+4259657740&4294967295,R=D+(I<<23&4294967295|I>>>9),I=E+(R^D^z)+L[1]+2763975236&4294967295,E=R+(I<<4&4294967295|I>>>28),I=z+(E^R^D)+L[4]+1272893353&4294967295,z=E+(I<<11&4294967295|I>>>21),I=D+(z^E^R)+L[7]+4139469664&4294967295,D=z+(I<<16&4294967295|I>>>16),I=R+(D^z^E)+L[10]+3200236656&4294967295,R=D+(I<<23&4294967295|I>>>9),I=E+(R^D^z)+L[13]+681279174&4294967295,E=R+(I<<4&4294967295|I>>>28),I=z+(E^R^D)+L[0]+3936430074&4294967295,z=E+(I<<11&4294967295|I>>>21),I=D+(z^E^R)+L[3]+3572445317&4294967295,D=z+(I<<16&4294967295|I>>>16),I=R+(D^z^E)+L[6]+76029189&4294967295,R=D+(I<<23&4294967295|I>>>9),I=E+(R^D^z)+L[9]+3654602809&4294967295,E=R+(I<<4&4294967295|I>>>28),I=z+(E^R^D)+L[12]+3873151461&4294967295,z=E+(I<<11&4294967295|I>>>21),I=D+(z^E^R)+L[15]+530742520&4294967295,D=z+(I<<16&4294967295|I>>>16),I=R+(D^z^E)+L[2]+3299628645&4294967295,R=D+(I<<23&4294967295|I>>>9),I=E+(D^(R|~z))+L[0]+4096336452&4294967295,E=R+(I<<6&4294967295|I>>>26),I=z+(R^(E|~D))+L[7]+1126891415&4294967295,z=E+(I<<10&4294967295|I>>>22),I=D+(E^(z|~R))+L[14]+2878612391&4294967295,D=z+(I<<15&4294967295|I>>>17),I=R+(z^(D|~E))+L[5]+4237533241&4294967295,R=D+(I<<21&4294967295|I>>>11),I=E+(D^(R|~z))+L[12]+1700485571&4294967295,E=R+(I<<6&4294967295|I>>>26),I=z+(R^(E|~D))+L[3]+2399980690&4294967295,z=E+(I<<10&4294967295|I>>>22),I=D+(E^(z|~R))+L[10]+4293915773&4294967295,D=z+(I<<15&4294967295|I>>>17),I=R+(z^(D|~E))+L[1]+2240044497&4294967295,R=D+(I<<21&4294967295|I>>>11),I=E+(D^(R|~z))+L[8]+1873313359&4294967295,E=R+(I<<6&4294967295|I>>>26),I=z+(R^(E|~D))+L[15]+4264355552&4294967295,z=E+(I<<10&4294967295|I>>>22),I=D+(E^(z|~R))+L[6]+2734768916&4294967295,D=z+(I<<15&4294967295|I>>>17),I=R+(z^(D|~E))+L[13]+1309151649&4294967295,R=D+(I<<21&4294967295|I>>>11),I=E+(D^(R|~z))+L[4]+4149444226&4294967295,E=R+(I<<6&4294967295|I>>>26),I=z+(R^(E|~D))+L[11]+3174756917&4294967295,z=E+(I<<10&4294967295|I>>>22),I=D+(E^(z|~R))+L[2]+718787259&4294967295,D=z+(I<<15&4294967295|I>>>17),I=R+(z^(D|~E))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+z&4294967295}i.prototype.v=function(A,E){E===void 0&&(E=A.length);const R=E-this.blockSize,L=this.C;let D=this.h,z=0;for(;z<E;){if(D==0)for(;z<=R;)l(this,A,z),z+=this.blockSize;if(typeof A=="string"){for(;z<E;)if(L[D++]=A.charCodeAt(z++),D==this.blockSize){l(this,L),D=0;break}}else for(;z<E;)if(L[D++]=A[z++],D==this.blockSize){l(this,L),D=0;break}}this.h=D,this.o+=E},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;E=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=E&255,E/=256;for(this.v(A),A=Array(16),E=0,R=0;R<4;++R)for(let L=0;L<32;L+=8)A[E++]=this.g[R]>>>L&255;return A};function u(A,E){var R=p;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=E(A)}function h(A,E){this.h=E;const R=[];let L=!0;for(let D=A.length-1;D>=0;D--){const z=A[D]|0;L&&z==E||(R[D]=z,L=!1)}this.g=R}var p={};function g(A){return-128<=A&&A<128?u(A,function(E){return new h([E|0],E<0?-1:0)}):new h([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return k;if(A<0)return V(y(-A));const E=[];let R=1;for(let L=0;A>=R;L++)E[L]=A/R|0,R*=4294967296;return new h(E,0)}function x(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return V(x(A.substring(1),E));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(E,8));let L=k;for(let z=0;z<A.length;z+=8){var D=Math.min(8,A.length-z);const I=parseInt(A.substring(z,z+D),E);D<8?(D=y(Math.pow(E,D)),L=L.j(D).add(y(I))):(L=L.j(R),L=L.add(y(I)))}return L}var k=g(0),j=g(1),O=g(16777216);s=h.prototype,s.m=function(){if(U(this))return-V(this).m();let A=0,E=1;for(let R=0;R<this.g.length;R++){const L=this.i(R);A+=(L>=0?L:4294967296+L)*E,E*=4294967296}return A},s.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(K(this))return"0";if(U(this))return"-"+V(this).toString(A);const E=y(Math.pow(A,6));var R=this;let L="";for(;;){const D=je(R,E).g;R=te(R,D.j(E));let z=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=D,K(R))return z+L;for(;z.length<6;)z="0"+z;L=z+L}},s.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function K(A){if(A.h!=0)return!1;for(let E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function U(A){return A.h==-1}s.l=function(A){return A=te(this,A),U(A)?-1:K(A)?0:1};function V(A){const E=A.g.length,R=[];for(let L=0;L<E;L++)R[L]=~A.g[L];return new h(R,~A.h).add(j)}s.abs=function(){return U(this)?V(this):this},s.add=function(A){const E=Math.max(this.g.length,A.g.length),R=[];let L=0;for(let D=0;D<=E;D++){let z=L+(this.i(D)&65535)+(A.i(D)&65535),I=(z>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);L=I>>>16,z&=65535,I&=65535,R[D]=I<<16|z}return new h(R,R[R.length-1]&-2147483648?-1:0)};function te(A,E){return A.add(V(E))}s.j=function(A){if(K(this)||K(A))return k;if(U(this))return U(A)?V(this).j(V(A)):V(V(this).j(A));if(U(A))return V(this.j(V(A)));if(this.l(O)<0&&A.l(O)<0)return y(this.m()*A.m());const E=this.g.length+A.g.length,R=[];for(var L=0;L<2*E;L++)R[L]=0;for(L=0;L<this.g.length;L++)for(let D=0;D<A.g.length;D++){const z=this.i(L)>>>16,I=this.i(L)&65535,Fe=A.i(D)>>>16,xt=A.i(D)&65535;R[2*L+2*D]+=I*xt,X(R,2*L+2*D),R[2*L+2*D+1]+=z*xt,X(R,2*L+2*D+1),R[2*L+2*D+1]+=I*Fe,X(R,2*L+2*D+1),R[2*L+2*D+2]+=z*Fe,X(R,2*L+2*D+2)}for(A=0;A<E;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=E;A<2*E;A++)R[A]=0;return new h(R,0)};function X(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function fe(A,E){this.g=A,this.h=E}function je(A,E){if(K(E))throw Error("division by zero");if(K(A))return new fe(k,k);if(U(A))return E=je(V(A),E),new fe(V(E.g),V(E.h));if(U(E))return E=je(A,V(E)),new fe(V(E.g),E.h);if(A.g.length>30){if(U(A)||U(E))throw Error("slowDivide_ only works with positive integers.");for(var R=j,L=E;L.l(A)<=0;)R=Ue(R),L=Ue(L);var D=Oe(R,1),z=Oe(L,1);for(L=Oe(L,2),R=Oe(R,2);!K(L);){var I=z.add(L);I.l(A)<=0&&(D=D.add(R),z=I),L=Oe(L,1),R=Oe(R,1)}return E=te(A,D.j(E)),new fe(D,E)}for(D=k;A.l(E)>=0;){for(R=Math.max(1,Math.floor(A.m()/E.m())),L=Math.ceil(Math.log(R)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),z=y(R),I=z.j(E);U(I)||I.l(A)>0;)R-=L,z=y(R),I=z.j(E);K(z)&&(z=j),D=D.add(z),A=te(A,I)}return new fe(D,A)}s.B=function(A){return je(this,A).h},s.and=function(A){const E=Math.max(this.g.length,A.g.length),R=[];for(let L=0;L<E;L++)R[L]=this.i(L)&A.i(L);return new h(R,this.h&A.h)},s.or=function(A){const E=Math.max(this.g.length,A.g.length),R=[];for(let L=0;L<E;L++)R[L]=this.i(L)|A.i(L);return new h(R,this.h|A.h)},s.xor=function(A){const E=Math.max(this.g.length,A.g.length),R=[];for(let L=0;L<E;L++)R[L]=this.i(L)^A.i(L);return new h(R,this.h^A.h)};function Ue(A){const E=A.g.length+1,R=[];for(let L=0;L<E;L++)R[L]=A.i(L)<<1|A.i(L-1)>>>31;return new h(R,A.h)}function Oe(A,E){const R=E>>5;E%=32;const L=A.g.length-R,D=[];for(let z=0;z<L;z++)D[z]=E>0?A.i(z+R)>>>E|A.i(z+R+1)<<32-E:A.i(z+R);return new h(D,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Iw=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=x,Fi=h}).apply(typeof sx<"u"?sx:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Mw,Wc,Dw,yd,ig,Pw,Lw,Ow;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var v=0;v<d.length;++v){var _=d[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function l(d,v){if(v)e:{var _=i;d=d.split(".");for(var N=0;N<d.length-1;N++){var J=d[N];if(!(J in _))break e;_=_[J]}d=d[d.length-1],N=_[d],v=v(N),v!=N&&v!=null&&e(_,d,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(v){var _=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&_.push([N,v[N]]);return _}});var u=u||{},h=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,_){return d.call.apply(d.bind,arguments)}function y(d,v,_){return y=g,y.apply(null,arguments)}function x(d,v){var _=Array.prototype.slice.call(arguments,1);return function(){var N=_.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function k(d,v){function _(){}_.prototype=v.prototype,d.Z=v.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(N,J,he){for(var $e=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)$e[Gt-2]=arguments[Gt];return v.prototype[J].apply(N,$e)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function O(d){const v=d.length;if(v>0){const _=Array(v);for(let N=0;N<v;N++)_[N]=d[N];return _}return[]}function K(d,v){for(let N=1;N<arguments.length;N++){const J=arguments[N];var _=typeof J;if(_=_!="object"?_:J?Array.isArray(J)?"array":_:"null",_=="array"||_=="object"&&typeof J.length=="number"){_=d.length||0;const he=J.length||0;d.length=_+he;for(let $e=0;$e<he;$e++)d[_+$e]=J[$e]}else d.push(J)}}class U{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function V(d){h.setTimeout(()=>{throw d},0)}function te(){var d=A;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class X{constructor(){this.h=this.g=null}add(v,_){const N=fe.get();N.set(v,_),this.h?this.h.next=N:this.g=N,this.h=N}}var fe=new U(()=>new je,d=>d.reset());class je{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Oe=!1,A=new X,E=()=>{const d=Promise.resolve(void 0);Ue=()=>{d.then(R)}};function R(){for(var d;d=te();){try{d.h.call(d.g)}catch(_){V(_)}var v=fe;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}Oe=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};h.addEventListener("test",_,v),h.removeEventListener("test",_,v)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function Fe(d,v){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}k(Fe,D),Fe.prototype.init=function(d,v){const _=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(_=="mouseover"?v=d.fromElement:_=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Fe.Z.h.call(this)},Fe.prototype.h=function(){Fe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var xt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function Se(d,v,_,N,J){this.listener=d,this.proxy=null,this.src=v,this.type=_,this.capture=!!N,this.ha=J,this.key=++Y,this.da=this.fa=!1}function Ve(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ht(d,v,_){for(const N in d)v.call(_,d[N],N,d)}function ae(d,v){for(const _ in d)v.call(void 0,d[_],_,d)}function P(d){const v={};for(const _ in d)v[_]=d[_];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(d,v){let _,N;for(let J=1;J<arguments.length;J++){N=arguments[J];for(_ in N)d[_]=N[_];for(let he=0;he<W.length;he++)_=W[he],Object.prototype.hasOwnProperty.call(N,_)&&(d[_]=N[_])}}function Ne(d){this.src=d,this.g={},this.h=0}Ne.prototype.add=function(d,v,_,N,J){const he=d.toString();d=this.g[he],d||(d=this.g[he]=[],this.h++);const $e=_e(d,v,N,J);return $e>-1?(v=d[$e],_||(v.fa=!1)):(v=new Se(v,this.src,he,!!N,J),v.fa=_,d.push(v)),v};function Be(d,v){const _=v.type;if(_ in d.g){var N=d.g[_],J=Array.prototype.indexOf.call(N,v,void 0),he;(he=J>=0)&&Array.prototype.splice.call(N,J,1),he&&(Ve(v),d.g[_].length==0&&(delete d.g[_],d.h--))}}function _e(d,v,_,N){for(let J=0;J<d.length;++J){const he=d[J];if(!he.da&&he.listener==v&&he.capture==!!_&&he.ha==N)return J}return-1}var et="closure_lm_"+(Math.random()*1e6|0),yt={};function Je(d,v,_,N,J){if(Array.isArray(v)){for(let he=0;he<v.length;he++)Je(d,v[he],_,N,J);return null}return _=Vt(_),d&&d[xt]?d.J(v,_,p(N)?!!N.capture:!1,J):Ft(d,v,_,!1,N,J)}function Ft(d,v,_,N,J,he){if(!v)throw Error("Invalid event type");const $e=p(J)?!!J.capture:!!J;let Gt=qt(d);if(Gt||(d[et]=Gt=new Ne(d)),_=Gt.add(v,_,N,$e,he),_.proxy)return _;if(N=cn(),_.proxy=N,N.src=d,N.listener=_,d.addEventListener)z||(J=$e),J===void 0&&(J=!1),d.addEventListener(v.toString(),N,J);else if(d.attachEvent)d.attachEvent(oe(v.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return _}function cn(){function d(_){return v.call(d.src,d.listener,_)}const v=dn;return d}function Ct(d,v,_,N,J){if(Array.isArray(v))for(var he=0;he<v.length;he++)Ct(d,v[he],_,N,J);else N=p(N)?!!N.capture:!!N,_=Vt(_),d&&d[xt]?(d=d.i,he=String(v).toString(),he in d.g&&(v=d.g[he],_=_e(v,_,N,J),_>-1&&(Ve(v[_]),Array.prototype.splice.call(v,_,1),v.length==0&&(delete d.g[he],d.h--)))):d&&(d=qt(d))&&(v=d.g[v.toString()],d=-1,v&&(d=_e(v,_,N,J)),(_=d>-1?v[d]:null)&&Rt(_))}function Rt(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[xt])Be(v.i,d);else{var _=d.type,N=d.proxy;v.removeEventListener?v.removeEventListener(_,N,d.capture):v.detachEvent?v.detachEvent(oe(_),N):v.addListener&&v.removeListener&&v.removeListener(N),(_=qt(v))?(Be(_,d),_.h==0&&(_.src=null,v[et]=null)):Ve(d)}}}function oe(d){return d in yt?yt[d]:yt[d]="on"+d}function dn(d,v){if(d.da)d=!0;else{v=new Fe(v,this);const _=d.listener,N=d.ha||d.src;d.fa&&Rt(d),d=_.call(N,v)}return d}function qt(d){return d=d[et],d instanceof Ne?d:null}var jt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vt(d){return typeof d=="function"?d:(d[jt]||(d[jt]=function(v){return d.handleEvent(v)}),d[jt])}function mt(){L.call(this),this.i=new Ne(this),this.M=this,this.G=null}k(mt,L),mt.prototype[xt]=!0,mt.prototype.removeEventListener=function(d,v,_,N){Ct(this,d,v,_,N)};function Ye(d,v){var _,N=d.G;if(N)for(_=[];N;N=N.G)_.push(N);if(d=d.M,N=v.type||v,typeof v=="string")v=new D(v,d);else if(v instanceof D)v.target=v.target||d;else{var J=v;v=new D(N,d),pe(v,J)}J=!0;let he,$e;if(_)for($e=_.length-1;$e>=0;$e--)he=v.g=_[$e],J=le(he,N,!0,v)&&J;if(he=v.g=d,J=le(he,N,!0,v)&&J,J=le(he,N,!1,v)&&J,_)for($e=0;$e<_.length;$e++)he=v.g=_[$e],J=le(he,N,!1,v)&&J}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const _=d.g[v];for(let N=0;N<_.length;N++)Ve(_[N]);delete d.g[v],d.h--}}this.G=null},mt.prototype.J=function(d,v,_,N){return this.i.add(String(d),v,!1,_,N)},mt.prototype.K=function(d,v,_,N){return this.i.add(String(d),v,!0,_,N)};function le(d,v,_,N){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let J=!0;for(let he=0;he<v.length;++he){const $e=v[he];if($e&&!$e.da&&$e.capture==_){const Gt=$e.listener,ds=$e.ha||$e.src;$e.fa&&Be(d.i,$e),J=Gt.call(ds,N)!==!1&&J}}return J&&!N.defaultPrevented}function He(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(d,v||0)}function tt(d){d.g=He(()=>{d.g=null,d.i&&(d.i=!1,tt(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class pt extends L{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:tt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(d){L.call(this),this.h=d,this.g={}}k(Dt,L);var ct=[];function St(d){ht(d.g,function(v,_){this.g.hasOwnProperty(_)&&Rt(v)},d),d.g={}}Dt.prototype.N=function(){Dt.Z.N.call(this),St(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=h.JSON.stringify,be=h.JSON.parse,Ie=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function Qe(){}function Ke(){}var We={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nt(){D.call(this,"d")}k(nt,D);function rt(){D.call(this,"c")}k(rt,D);var qe={},Wt=null;function en(){return Wt=Wt||new mt}qe.Ia="serverreachability";function Xt(d){D.call(this,qe.Ia,d)}k(Xt,D);function jn(d){const v=en();Ye(v,new Xt(v))}qe.STAT_EVENT="statevent";function zn(d,v){D.call(this,qe.STAT_EVENT,d),this.stat=v}k(zn,D);function Ut(d){const v=en();Ye(v,new zn(v,d))}qe.Ja="timingevent";function bn(d,v){D.call(this,qe.Ja,d),this.size=v}k(bn,D);function Zn(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function In(){this.g=!0}In.prototype.ua=function(){this.g=!1};function hs(d,v,_,N,J,he){d.info(function(){if(d.g)if(he){var $e="",Gt=he.split("&");for(let kn=0;kn<Gt.length;kn++){var ds=Gt[kn].split("=");if(ds.length>1){const Qn=ds[0];ds=ds[1];const Rr=Qn.split("_");$e=Rr.length>=2&&Rr[1]=="type"?$e+(Qn+"="+ds+"&"):$e+(Qn+"=redacted&")}}}else $e=null;else $e=he;return"XMLHTTP REQ ("+N+") [attempt "+J+"]: "+v+`
`+_+`
`+$e})}function gs(d,v,_,N,J,he,$e){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+J+"]: "+v+`
`+_+`
`+he+" "+$e})}function Hn(d,v,_,N){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+rs(d,_)+(N?" "+N:"")})}function es(d,v){d.info(function(){return"TIMEOUT: "+v})}In.prototype.info=function(){};function rs(d,v){if(!d.g)return v;if(!v)return null;try{const he=JSON.parse(v);if(he){for(d=0;d<he.length;d++)if(Array.isArray(he[d])){var _=he[d];if(!(_.length<2)){var N=_[1];if(Array.isArray(N)&&!(N.length<1)){var J=N[0];if(J!="noop"&&J!="stop"&&J!="close")for(let $e=1;$e<N.length;$e++)N[$e]=""}}}}return ce(he)}catch{return v}}var Yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Cs;function q(){}k(q,Qe),q.prototype.g=function(){return new XMLHttpRequest},Cs=new q;function ge(d){return encodeURIComponent(String(d))}function xe(d){var v=1;d=d.split(":");const _=[];for(;v>0&&d.length;)_.push(d.shift()),v--;return d.length&&_.push(d.join(":")),_}function we(d,v,_,N){this.j=d,this.i=v,this.l=_,this.S=N||1,this.V=new Dt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ye}function ye(){this.i=null,this.g="",this.h=!1}var it={},It={};function ut(d,v,_){d.M=1,d.A=Zt(Re(v)),d.u=_,d.R=!0,_t(d,null)}function _t(d,v){d.F=Date.now(),Es(d),d.B=Re(d.A);var _=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),at(_.i,"t",N),d.C=0,_=d.j.L,d.h=new ye,d.g=qu(d.j,_?v:null,!d.u),d.P>0&&(d.O=new pt(y(d.Y,d,d.g),d.P)),v=d.V,_=d.g,N=d.ba;var J="readystatechange";Array.isArray(J)||(J&&(ct[0]=J.toString()),J=ct);for(let he=0;he<J.length;he++){const $e=Je(_,J[he],N||v.handleEvent,!1,v.h||v);if(!$e)break;v.g[$e.key]=$e}v=d.J?P(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),jn(),hs(d.i,d.v,d.B,d.l,d.S,d.u)}we.prototype.ba=function(d){d=d.target;const v=this.O;v&&yr(d)==3?v.j():this.Y(d)},we.prototype.Y=function(d){try{if(d==this.g)e:{const Gt=yr(this.g),ds=this.g.ya(),kn=this.g.ca();if(!(Gt<3)&&(Gt!=3||this.g&&(this.h.h||this.g.la()||as(this.g)))){this.K||Gt!=4||ds==7||(ds==8||kn<=0?jn(3):jn(2)),Sn(this);var v=this.g.ca();this.X=v;var _=wt(this);if(this.o=v==200,gs(this.i,this.v,this.B,this.l,this.S,Gt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,J=this.g;if((N=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(N)){var he=N;break t}}he=null}if(d=he)Hn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,T(this,d);else{this.o=!1,this.m=3,Ut(12),ue(this),F(this);break e}}if(this.R){d=!0;let Qn;for(;!this.K&&this.C<_.length;)if(Qn=Rs(this,_),Qn==It){Gt==4&&(this.m=4,Ut(14),d=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Qn==it){this.m=4,Ut(15),Hn(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Hn(this.i,this.l,Qn,null),T(this,Qn);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||_.length!=0||this.h.h||(this.m=1,Ut(16),d=!1),this.o=this.o&&d,!d)Hn(this.i,this.l,_,"[Invalid Chunked Response]"),ue(this),F(this);else if(_.length>0&&!this.W){this.W=!0;var $e=this.j;$e.g==this&&$e.aa&&!$e.P&&($e.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Zl($e),$e.P=!0,Ut(11))}}else Hn(this.i,this.l,_,null),T(this,_);Gt==4&&ue(this),this.o&&!this.K&&(Gt==4?Bu(this.j,this):(this.o=!1,Es(this)))}else Ws(this.g),v==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),ue(this),F(this)}}}catch{}};function wt(d){if(!Jt(d))return d.g.la();const v=as(d.g);if(v==="")return"";let _="";const N=v.length,J=yr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ue(d),F(d),"";d.h.i=new h.TextDecoder}for(let he=0;he<N;he++)d.h.h=!0,_+=d.h.i.decode(v[he],{stream:!(J&&he==N-1)});return v.length=0,d.h.g+=_,d.C=0,d.h.g}function Jt(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Rs(d,v){var _=d.C,N=v.indexOf(`
`,_);return N==-1?It:(_=Number(v.substring(_,N)),isNaN(_)?it:(N+=1,N+_>v.length?It:(v=v.slice(N,N+_),d.C=N+_,v)))}we.prototype.cancel=function(){this.K=!0,ue(this)};function Es(d){d.T=Date.now()+d.H,qs(d,d.H)}function qs(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Zn(y(d.aa,d),v)}function Sn(d){d.D&&(h.clearTimeout(d.D),d.D=null)}we.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(es(this.i,this.B),this.M!=2&&(jn(),Ut(17)),ue(this),this.m=2,F(this)):qs(this,this.T-d)};function F(d){d.j.I==0||d.K||Bu(d.j,d)}function ue(d){Sn(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,St(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function T(d,v){try{var _=d.j;if(_.I!=0&&(_.g==d||Pe(_.h,d))){if(!d.L&&Pe(_.h,d)&&_.I==3){try{var N=_.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var J=N;if(J[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)qo(_),oi(_);else break e;no(_),Ut(18)}}else _.xa=J[1],0<_.xa-_.K&&J[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Zn(y(_.Va,_),6e3));ze(_.h)<=1&&_.ta&&(_.ta=void 0)}else ua(_,11)}else if((d.L||_.g==d)&&qo(_),!I(v))for(J=_.Ba.g.parse(v),v=0;v<J.length;v++){let kn=J[v];const Qn=kn[0];if(!(Qn<=_.K))if(_.K=Qn,kn=kn[1],_.I==2)if(kn[0]=="c"){_.M=kn[1],_.ba=kn[2];const Rr=kn[3];Rr!=null&&(_.ka=Rr,_.j.info("VER="+_.ka));const ha=kn[4];ha!=null&&(_.za=ha,_.j.info("SVER="+_.za));const $r=kn[5];$r!=null&&typeof $r=="number"&&$r>0&&(N=1.5*$r,_.O=N,_.j.info("backChannelRequestTimeoutMs_="+N)),N=_;const Wr=d.g;if(Wr){const so=Wr.g?Wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(so){var he=N.h;he.g||so.indexOf("spdy")==-1&&so.indexOf("quic")==-1&&so.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(Le(he,he.h),he.h=null))}if(N.G){const Ho=Wr.g?Wr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(N.wa=Ho,ot(N.J,N.G,Ho))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),N=_;var $e=d;if(N.na=Fu(N,N.L?N.ba:null,N.W),$e.L){Bt(N.h,$e);var Gt=$e,ds=N.O;ds&&(Gt.H=ds),Gt.D&&(Sn(Gt),Es(Gt)),N.g=$e}else Ou(N);_.i.length>0&&ca(_)}else kn[0]!="stop"&&kn[0]!="close"||ua(_,7);else _.I==3&&(kn[0]=="stop"||kn[0]=="close"?kn[0]=="stop"?ua(_,7):Xl(_):kn[0]!="noop"&&_.l&&_.l.qa(kn),_.A=0)}}jn(4)}catch{}}var C=class{constructor(d,v){this.g=d,this.map=v}};function G(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Z(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ze(d){return d.h?1:d.g?d.g.size:0}function Pe(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Le(d,v){d.g?d.g.add(v):d.h=v}function Bt(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}G.prototype.cancel=function(){if(this.i=kt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function kt(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const _ of d.g.values())v=v.concat(_.G);return v}return O(d.i)}var $=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function me(d,v){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const N=d[_].indexOf("=");let J,he=null;N>=0?(J=d[_].substring(0,N),he=d[_].substring(N+1)):J=d[_],v(J,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function re(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof re?(this.l=d.l,Me(this,d.j),this.o=d.o,this.g=d.g,st(this,d.u),this.h=d.h,Mt(this,Nt(d.i)),this.m=d.m):d&&(v=String(d).match($))?(this.l=!1,Me(this,v[1]||"",!0),this.o=Fn(v[2]||""),this.g=Fn(v[3]||"",!0),st(this,v[4]),this.h=Fn(v[5]||"",!0),Mt(this,v[6]||"",!0),this.m=Fn(v[7]||"")):(this.l=!1,this.i=new ee(null,this.l))}re.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(fn(v,aa,!0),":");var _=this.g;return(_||v=="file")&&(d.push("//"),(v=this.o)&&d.push(fn(v,aa,!0),"@"),d.push(ge(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(fn(_,_.charAt(0)=="/"?oa:ia,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",fn(_,M)),d.join("")},re.prototype.resolve=function(d){const v=Re(this);let _=!!d.j;_?Me(v,d.j):_=!!d.o,_?v.o=d.o:_=!!d.g,_?v.g=d.g:_=d.u!=null;var N=d.h;if(_)st(v,d.u);else if(_=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var J=v.h.lastIndexOf("/");J!=-1&&(N=v.h.slice(0,J+1)+N)}if(J=N,J==".."||J==".")N="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){N=J.lastIndexOf("/",0)==0,J=J.split("/");const he=[];for(let $e=0;$e<J.length;){const Gt=J[$e++];Gt=="."?N&&$e==J.length&&he.push(""):Gt==".."?((he.length>1||he.length==1&&he[0]!="")&&he.pop(),N&&$e==J.length&&he.push("")):(he.push(Gt),N=!0)}N=he.join("/")}else N=J}return _?v.h=N:_=d.i.toString()!=="",_?Mt(v,Nt(d.i)):_=!!d.m,_&&(v.m=d.m),v};function Re(d){return new re(d)}function Me(d,v,_){d.j=_?Fn(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function st(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function Mt(d,v,_){v instanceof ee?(d.i=v,mn(d.i,d.l)):(_||(v=fn(v,pr)),d.i=new ee(v,d.l))}function ot(d,v,_){d.i.set(v,_)}function Zt(d){return ot(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Fn(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function fn(d,v,_){return typeof d=="string"?(d=encodeURI(d).replace(v,Nn),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Nn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var aa=/[#\/\?@]/g,ia=/[#\?:]/g,oa=/[#\?]/g,pr=/[#\?@]/g,M=/#/g;function ee(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function De(d){d.g||(d.g=new Map,d.h=0,d.i&&me(d.i,function(v,_){d.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}s=ee.prototype,s.add=function(d,v){De(this),this.i=null,d=un(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(v),this.h+=1,this};function gt(d,v){De(d),v=un(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function dt(d,v){return De(d),v=un(d,v),d.g.has(v)}s.forEach=function(d,v){De(this),this.g.forEach(function(_,N){_.forEach(function(J){d.call(v,J,N,this)},this)},this)};function Ge(d,v){De(d);let _=[];if(typeof v=="string")dt(d,v)&&(_=_.concat(d.g.get(un(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)_=_.concat(d[v]);return _}s.set=function(d,v){return De(this),this.i=null,d=un(this,d),dt(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=Ge(this,d),d.length>0?String(d[0]):v):v};function at(d,v,_){gt(d,v),_.length>0&&(d.i=null,d.g.set(un(d,v),O(_)),d.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var _=v[N];const J=ge(_);_=Ge(this,_);for(let he=0;he<_.length;he++){let $e=J;_[he]!==""&&($e+="="+ge(_[he])),d.push($e)}}return this.i=d.join("&")};function Nt(d){const v=new ee;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function un(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function mn(d,v){v&&!d.j&&(De(d),d.i=null,d.g.forEach(function(_,N){const J=N.toLowerCase();N!=J&&(gt(this,N),at(this,J,_))},d)),d.j=v}function Ot(d,v){const _=new In;if(h.Image){const N=new Image;N.onload=x(gn,_,"TestLoadImage: loaded",!0,v,N),N.onerror=x(gn,_,"TestLoadImage: error",!1,v,N),N.onabort=x(gn,_,"TestLoadImage: abort",!1,v,N),N.ontimeout=x(gn,_,"TestLoadImage: timeout",!1,v,N),h.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else v(!1)}function Ms(d,v){const _=new In,N=new AbortController,J=setTimeout(()=>{N.abort(),gn(_,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:N.signal}).then(he=>{clearTimeout(J),he.ok?gn(_,"TestPingServer: ok",!0,v):gn(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(J),gn(_,"TestPingServer: error",!1,v)})}function gn(d,v,_,N,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),N(_)}catch{}}function Mn(){this.g=new Ie}function Vn(d){this.i=d.Sb||null,this.h=d.ab||!1}k(Vn,Qe),Vn.prototype.g=function(){return new $n(this.i,this.h)};function $n(d,v){mt.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k($n,mt),s=$n.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Hs(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;js(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function js(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?gr(this):Hs(this),this.readyState==3&&js(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,gr(this))},s.Na=function(d){this.g&&(this.response=d,gr(this))},s.ga=function(){this.g&&gr(this)};function gr(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Hs(d)}s.setRequestHeader=function(d,v){this.A.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=v.next();return d.join(`\r
`)};function Hs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty($n.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ys(d){let v="";return ht(d,function(_,N){v+=N,v+=":",v+=_,v+=`\r
`}),v}function Nr(d,v,_){e:{for(N in _){var N=!1;break e}N=!0}N||(_=ys(_),typeof d=="string"?_!=null&&ge(_):ot(d,v,_))}function yn(d){mt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(yn,mt);var ts=/^https?$/i,$s=["POST","PUT"];s=yn.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,v,_,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cs.g(),this.g.onreadystatechange=j(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(he){Zs(this,he);return}if(d=_||"",_=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var J in N)_.set(J,N[J]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const he of N.keys())_.set(he,N.get(he));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(_.keys()).find(he=>he.toLowerCase()=="content-type"),J=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call($s,v,void 0)>=0)||N||J||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,$e]of _)this.g.setRequestHeader(he,$e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(he){Zs(this,he)}};function Zs(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Cr(d),Hr(d)}function Cr(d){d.A||(d.A=!0,Ye(d,"complete"),Ye(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ye(this,"complete"),Ye(this,"abort"),Hr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hr(this,!0)),yn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?la(this):this.Xa())},s.Xa=function(){la(this)};function la(d){if(d.h&&typeof u<"u"){if(d.v&&yr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ye(d,"readystatechange"),yr(d)==4){d.h=!1;try{const he=d.ca();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var N;if(N=he===0){let $e=String(d.D).match($)[1]||null;!$e&&h.self&&h.self.location&&($e=h.self.location.protocol.slice(0,-1)),N=!ts.test($e?$e.toLowerCase():"")}_=N}if(_)Ye(d,"complete"),Ye(d,"success");else{d.o=6;try{var J=yr(d)>2?d.g.statusText:""}catch{J=""}d.l=J+" ["+d.ca()+"]",Cr(d)}}finally{Hr(d)}}}}function Hr(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,v||Ye(d,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function yr(d){return d.g?d.g.readyState:0}s.ca=function(){try{return yr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),be(v)}};function as(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ws(d){const v={};d=(d.g&&yr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(I(d[N]))continue;var _=xe(d[N]);const J=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const he=v[J]||[];v[J]=he,he.push(_)}ae(v,function(N){return N.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ds(d,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||v}function ii(d){this.za=0,this.i=[],this.j=new In,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ds("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ds("baseRetryDelayMs",5e3,d),this.Za=Ds("retryDelaySeedMs",1e4,d),this.Ta=Ds("forwardChannelMaxRetries",2,d),this.va=Ds("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new G(d&&d.concurrentRequestLimit),this.Ba=new Mn,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ii.prototype,s.ka=8,s.I=1,s.connect=function(d,v,_,N){Ut(0),this.W=d,this.H=v||{},_&&N!==void 0&&(this.H.OSID=_,this.H.OAID=N),this.F=this.X,this.J=Fu(this,null,this.W),ca(this)};function Xl(d){if(zo(d),d.I==3){var v=d.V++,_=Re(d.J);if(ot(_,"SID",d.M),ot(_,"RID",v),ot(_,"TYPE","terminate"),to(d,_),v=new we(d,d.j,v),v.M=2,v.A=Zt(Re(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=v.A,_=!0),_||(v.g=qu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Es(v)}zu(d)}function oi(d){d.g&&(Zl(d),d.g.cancel(),d.g=null)}function zo(d){oi(d),d.v&&(h.clearTimeout(d.v),d.v=null),qo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function ca(d){if(!Z(d.h)&&!d.m){d.m=!0;var v=d.Ea;Ue||E(),Oe||(Ue(),Oe=!0),A.add(v,d),d.D=0}}function Fo(d,v){return ze(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Zn(y(d.Ea,d,v),Uu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const J=new we(this,this.j,d);let he=this.o;if(this.U&&(he?(he=P(he),pe(he,this.U)):he=this.U),this.u!==null||this.R||(J.J=he,he=null),this.S)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var N=this.i[_];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=Lu(this,J,v),_=Re(this.J),ot(_,"RID",d),ot(_,"CVER",22),this.G&&ot(_,"X-HTTP-Session-Id",this.G),to(this,_),he&&(this.R?v="headers="+ge(ys(he))+"&"+v:this.u&&Nr(_,this.u,he)),Le(this.h,J),this.Ra&&ot(_,"TYPE","init"),this.S?(ot(_,"$req",v),ot(_,"SID","null"),J.U=!0,ut(J,_,null)):ut(J,_,v),this.I=2}}else this.I==3&&(d?Jl(this,d):this.i.length==0||Z(this.h)||Jl(this))};function Jl(d,v){var _;v?_=v.l:_=d.V++;const N=Re(d.J);ot(N,"SID",d.M),ot(N,"RID",_),ot(N,"AID",d.K),to(d,N),d.u&&d.o&&Nr(N,d.u,d.o),_=new we(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),v&&(d.i=v.G.concat(d.i)),v=Lu(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Le(d.h,_),ut(_,N,v)}function to(d,v){d.H&&ht(d.H,function(_,N){ot(v,N,_)}),d.l&&ht({},function(_,N){ot(v,N,_)})}function Lu(d,v,_){_=Math.min(d.i.length,_);const N=d.l?y(d.l.Ka,d.l,d):null;e:{var J=d.i;let Gt=-1;for(;;){const ds=["count="+_];Gt==-1?_>0?(Gt=J[0].g,ds.push("ofs="+Gt)):Gt=0:ds.push("ofs="+Gt);let kn=!0;for(let Qn=0;Qn<_;Qn++){var he=J[Qn].g;const Rr=J[Qn].map;if(he-=Gt,he<0)Gt=Math.max(0,J[Qn].g-100),kn=!1;else try{he="req"+he+"_"||"";try{var $e=Rr instanceof Map?Rr:Object.entries(Rr);for(const[ha,$r]of $e){let Wr=$r;p($r)&&(Wr=ce($r)),ds.push(he+ha+"="+encodeURIComponent(Wr))}}catch(ha){throw ds.push(he+"type="+encodeURIComponent("_badmap")),ha}}catch{N&&N(Rr)}}if(kn){$e=ds.join("&");break e}}$e=void 0}return d=d.i.splice(0,_),v.G=d,$e}function Ou(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;Ue||E(),Oe||(Ue(),Oe=!0),A.add(v,d),d.A=0}}function no(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Zn(y(d.Da,d),Uu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Vu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Zn(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),oi(this),Vu(this))};function Zl(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Vu(d){d.g=new we(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Re(d.na);ot(v,"RID","rpc"),ot(v,"SID",d.M),ot(v,"AID",d.K),ot(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&ot(v,"TO",d.ia),ot(v,"TYPE","xmlhttp"),to(d,v),d.u&&d.o&&Nr(v,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=Zt(Re(v)),_.u=null,_.R=!0,_t(_,d)}s.Va=function(){this.C!=null&&(this.C=null,oi(this),no(this),Ut(19))};function qo(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Bu(d,v){var _=null;if(d.g==v){qo(d),Zl(d),d.g=null;var N=2}else if(Pe(d.h,v))_=v.G,Bt(d.h,v),N=1;else return;if(d.I!=0){if(v.o)if(N==1){_=v.u?v.u.length:0,v=Date.now()-v.F;var J=d.D;N=en(),Ye(N,new bn(N,_)),ca(d)}else Ou(d);else if(J=v.m,J==3||J==0&&v.X>0||!(N==1&&Fo(d,v)||N==2&&no(d)))switch(_&&_.length>0&&(v=d.h,v.i=v.i.concat(_)),J){case 1:ua(d,5);break;case 4:ua(d,10);break;case 3:ua(d,6);break;default:ua(d,2)}}}function Uu(d,v){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*v}function ua(d,v){if(d.j.info("Error code "+v),v==2){var _=y(d.bb,d),N=d.Ua;const J=!N;N=new re(N||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Me(N,"https"),Zt(N),J?Ot(N.toString(),_):Ms(N.toString(),_)}else Ut(2);d.I=0,d.l&&d.l.pa(v),zu(d),zo(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function zu(d){if(d.I=0,d.ja=[],d.l){const v=kt(d.h);(v.length!=0||d.i.length!=0)&&(K(d.ja,v),K(d.ja,d.i),d.h.i.length=0,O(d.i),d.i.length=0),d.l.oa()}}function Fu(d,v,_){var N=_ instanceof re?Re(_):new re(_);if(N.g!="")v&&(N.g=v+"."+N.g),st(N,N.u);else{var J=h.location;N=J.protocol,v=v?v+"."+J.hostname:J.hostname,J=+J.port;const he=new re(null);N&&Me(he,N),v&&(he.g=v),J&&st(he,J),_&&(he.h=_),N=he}return _=d.G,v=d.wa,_&&v&&ot(N,_,v),ot(N,"VER",d.ka),to(d,N),N}function qu(d,v,_){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new yn(new Vn({ab:_})):new yn(d.ma),v.Fa(d.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hu(){}s=Hu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function li(){}li.prototype.g=function(d,v){return new er(d,v)};function er(d,v){mt.call(this),this.g=new ii(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!I(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Ra(this)}k(er,mt),er.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Xl(this.g)},er.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=ce(d),d=_);v.i.push(new C(v.Ya++,d)),v.I==3&&ca(v)},er.prototype.N=function(){this.g.l=null,delete this.j,Xl(this.g),delete this.g,er.Z.N.call(this)};function $u(d){nt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const _ in v){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}k($u,nt);function Wu(){rt.call(this),this.status=1}k(Wu,rt);function Ra(d){this.g=d}k(Ra,Hu),Ra.prototype.ra=function(){Ye(this.g,"a")},Ra.prototype.qa=function(d){Ye(this.g,new $u(d))},Ra.prototype.pa=function(d){Ye(this.g,new Wu)},Ra.prototype.oa=function(){Ye(this.g,"b")},li.prototype.createWebChannel=li.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,Ow=function(){return new li},Lw=function(){return en()},Pw=qe,ig={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,yd=Yn,Fs.COMPLETE="complete",Dw=Fs,Ke.EventType=We,We.OPEN="a",We.CLOSE="b",We.ERROR="c",We.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Wc=Ke,yn.prototype.listenOnce=yn.prototype.K,yn.prototype.getLastError=yn.prototype.Ha,yn.prototype.getLastErrorCode=yn.prototype.ya,yn.prototype.getStatus=yn.prototype.ca,yn.prototype.getResponseJson=yn.prototype.La,yn.prototype.getResponseText=yn.prototype.la,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Fa,Mw=yn}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});class Ys{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ys.UNAUTHENTICATED=new Ys(null),Ys.GOOGLE_CREDENTIALS=new Ys("google-credentials-uid"),Ys.FIRST_PARTY=new Ys("first-party-uid"),Ys.MOCK_USER=new Ys("mock-user");let Wl="12.8.0";function W4(s){Wl=s}const Do=new Dg("@firebase/firestore");function Tl(){return Do.logLevel}function lt(s,...e){if(Do.logLevel<=an.DEBUG){const n=e.map(Gg);Do.debug(`Firestore (${Wl}): ${s}`,...n)}}function ti(s,...e){if(Do.logLevel<=an.ERROR){const n=e.map(Gg);Do.error(`Firestore (${Wl}): ${s}`,...n)}}function Ll(s,...e){if(Do.logLevel<=an.WARN){const n=e.map(Gg);Do.warn(`Firestore (${Wl}): ${s}`,...n)}}function Gg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Lt(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Vw(s,i,n)}function Vw(s,e,n){let i=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ti(i),new Error(i)}function En(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||Vw(e,l,i)}function $t(s,e){return s}const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends Na{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qa{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Bw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class G4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ys.UNAUTHENTICATED)))}shutdown(){}}class K4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Y4{constructor(e){this.t=e,this.currentUser=Ys.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){En(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new Qa;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Qa,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Qa)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(En(typeof i.accessToken=="string",31837,{l:i}),new Bw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return En(e===null||typeof e=="string",2055,{h:e}),new Ys(e)}}class Q4{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ys.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class X4{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new Q4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ys.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class J4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Er(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){En(this.o===void 0,3512);const i=u=>{u.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,lt("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new rx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(En(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new rx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Z4(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class Kg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=Z4(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function on(s,e){return s<e?-1:s>e?1:0}function og(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return Np(l)===Np(u)?on(l,u):Np(l)?1:-1}return on(s.length,e.length)}const eR=55296,tR=57343;function Np(s){const e=s.charCodeAt(0);return e>=eR&&e<=tR}function Ol(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}const ax="__name__";class ya{constructor(e,n,i){n===void 0?n=0:n>e.length&&Lt(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Lt(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ya.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ya?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=ya.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return on(e.length,n.length)}static compareSegments(e,n){const i=ya.isNumericId(e),l=ya.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?ya.extractNumericId(e).compare(ya.extractNumericId(n)):og(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fi.fromString(e.substring(4,e.length-2))}}class qn extends ya{construct(e,n,i){return new qn(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ze(Te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new qn(n)}static emptyPath(){return new qn([])}}const nR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Us extends ya{construct(e,n,i){return new Us(e,n,i)}static isValidIdentifier(e){return nR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Us.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ax}static keyField(){return new Us([ax])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Ze(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Ze(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ze(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(h=!h,l++):p!=="."||h?(i+=p,l++):(u(),l++)}if(u(),h)throw new Ze(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Us(n)}static emptyPath(){return new Us([])}}class Et{constructor(e){this.path=e}static fromPath(e){return new Et(qn.fromString(e))}static fromName(e){return new Et(qn.fromString(e).popFirst(5))}static empty(){return new Et(qn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Et(new qn(e.slice()))}}function Uw(s,e,n){if(!n)throw new Ze(Te.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function sR(s,e,n,i){if(e===!0&&i===!0)throw new Ze(Te.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function ix(s){if(!Et.isDocumentKey(s))throw new Ze(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function ox(s){if(Et.isDocumentKey(s))throw new Ze(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function zw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Zd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Lt(12329,{type:typeof s})}function rr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ze(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zd(s);throw new Ze(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function rR(s,e){if(e<=0)throw new Ze(Te.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function Ts(s,e){const n={typeString:s};return e&&(n.value=e),n}function Eu(s,e){if(!zw(s))throw new Ze(Te.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const h=s[i];if(l&&typeof h!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Ze(Te.INVALID_ARGUMENT,n);return!0}const lx=-62135596800,cx=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*cx);return new bt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ze(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ze(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<lx)throw new Ze(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cx}_compareTo(e){return this.seconds===e.seconds?on(this.nanoseconds,e.nanoseconds):on(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:Ts("string",bt._jsonSchemaVersion),seconds:Ts("number"),nanoseconds:Ts("number")};class zt{static fromTimestamp(e){return new zt(e)}static min(){return new zt(new bt(0,0))}static max(){return new zt(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const lu=-1;function aR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=zt.fromTimestamp(i===1e9?new bt(n+1,0):new bt(n,i));return new $i(l,Et.empty(),e)}function iR(s){return new $i(s.readTime,s.key,lu)}class $i{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new $i(zt.min(),Et.empty(),lu)}static max(){return new $i(zt.max(),Et.empty(),lu)}}function oR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Et.comparator(s.documentKey,e.documentKey),n!==0?n:on(s.largestBatchId,e.largestBatchId))}const lR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Gl(s){if(s.code!==Te.FAILED_PRECONDITION||s.message!==lR)throw s;lt("LocalStore","Unexpectedly lost primary lease")}class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ae(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ae?n:Ae.resolve(n)}catch(n){return Ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ae.reject(n)}static resolve(e){return new Ae(((n,i)=>{n(e)}))}static reject(e){return new Ae(((n,i)=>{i(e)}))}static waitFor(e){return new Ae(((n,i)=>{let l=0,u=0,h=!1;e.forEach((p=>{++l,p.next((()=>{++u,h&&u===l&&n()}),(g=>i(g)))})),h=!0,u===l&&n()}))}static or(e){let n=Ae.resolve(!1);for(const i of e)n=n.next((l=>l?Ae.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new Ae(((i,l)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((x=>{h[y]=x,++p,p===u&&i(h)}),(x=>l(x)))}}))}static doWhile(e,n){return new Ae(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function uR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kl(s){return s.name==="IndexedDbTransactionError"}class ef{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ef.ce=-1;const Yg=-1;function tf(s){return s==null}function Md(s){return s===0&&1/s==-1/0}function hR(s){return typeof s=="number"&&Number.isInteger(s)&&!Md(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Fw="";function dR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=ux(e)),e=fR(s.get(n),e);return ux(e)}function fR(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case Fw:n+="";break;default:n+=u}}return n}function ux(s){return s+Fw+""}function hx(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Zi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function qw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class ss{constructor(e,n){this.comparator=e,this.root=n||Bs.EMPTY}insert(e,n){return new ss(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bs.BLACK,null,null))}remove(e){return new ss(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bs{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??Bs.RED,this.left=l??Bs.EMPTY,this.right=u??Bs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new Bs(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Bs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Bs.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Lt(27949);return e+(this.isRed()?0:1)}}Bs.EMPTY=null,Bs.RED=!0,Bs.BLACK=!1;Bs.EMPTY=new class{constructor(){this.size=0}get key(){throw Lt(57766)}get value(){throw Lt(16141)}get color(){throw Lt(16727)}get left(){throw Lt(29726)}get right(){throw Lt(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new Bs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ns{constructor(e){this.comparator=e,this.data=new ss(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dx(this.data.getIterator())}getIteratorFrom(e){return new dx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Ns)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ns(this.comparator);return n.data=e,n}}class dx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jr{constructor(e){this.fields=e,e.sort(Us.comparator)}static empty(){return new jr([])}unionWith(e){let n=new Ns(Us.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new jr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ol(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class Hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Hw("Invalid base64 string: "+u):u}})(e);return new zs(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new zs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return on(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zs.EMPTY_BYTE_STRING=new zs("");const mR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wi(s){if(En(!!s,39018),typeof s=="string"){let e=0;const n=mR.exec(s);if(En(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ps(s.seconds),nanos:ps(s.nanos)}}function ps(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Gi(s){return typeof s=="string"?zs.fromBase64String(s):zs.fromUint8Array(s)}const $w="server_timestamp",Ww="__type__",Gw="__previous_value__",Kw="__local_write_time__";function Qg(s){return(s?.mapValue?.fields||{})[Ww]?.stringValue===$w}function nf(s){const e=s.mapValue.fields[Gw];return Qg(e)?nf(e):e}function cu(s){const e=Wi(s.mapValue.fields[Kw].timestampValue);return new bt(e.seconds,e.nanos)}class pR{constructor(e,n,i,l,u,h,p,g,y,x,k){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x,this.apiKey=k}}const Dd="(default)";class uu{constructor(e,n){this.projectId=e,this.database=n||Dd}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database===Dd}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}function gR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ze(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(s.options.projectId,e)}const Yw="__type__",yR="__max__",ed={mapValue:{}},Qw="__vector__",Pd="value";function Ki(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Qg(s)?4:bR(s)?9007199254740991:vR(s)?10:11:Lt(28295,{value:s})}function Ea(s,e){if(s===e)return!0;const n=Ki(s);if(n!==Ki(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return cu(s).isEqual(cu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=Wi(l.timestampValue),p=Wi(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Gi(l.bytesValue).isEqual(Gi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return ps(l.geoPointValue.latitude)===ps(u.geoPointValue.latitude)&&ps(l.geoPointValue.longitude)===ps(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return ps(l.integerValue)===ps(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=ps(l.doubleValue),p=ps(u.doubleValue);return h===p?Md(h)===Md(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return Ol(s.arrayValue.values||[],e.arrayValue.values||[],Ea);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},p=u.mapValue.fields||{};if(hx(h)!==hx(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Ea(h[g],p[g])))return!1;return!0})(s,e);default:return Lt(52216,{left:s})}}function hu(s,e){return(s.values||[]).find((n=>Ea(n,e)))!==void 0}function Vl(s,e){if(s===e)return 0;const n=Ki(s),i=Ki(e);if(n!==i)return on(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return on(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=ps(u.integerValue||u.doubleValue),g=ps(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return fx(s.timestampValue,e.timestampValue);case 4:return fx(cu(s),cu(e));case 5:return og(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=Gi(u),g=Gi(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const x=on(p[y],g[y]);if(x!==0)return x}return on(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=on(ps(u.latitude),ps(h.latitude));return p!==0?p:on(ps(u.longitude),ps(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return mx(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},y=p[Pd]?.arrayValue,x=g[Pd]?.arrayValue,k=on(y?.values?.length||0,x?.values?.length||0);return k!==0?k:mx(y,x)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===ed.mapValue&&h===ed.mapValue)return 0;if(u===ed.mapValue)return 1;if(h===ed.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=h.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let k=0;k<g.length&&k<x.length;++k){const j=og(g[k],x[k]);if(j!==0)return j;const O=Vl(p[g[k]],y[x[k]]);if(O!==0)return O}return on(g.length,x.length)})(s.mapValue,e.mapValue);default:throw Lt(23264,{he:n})}}function fx(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return on(s,e);const n=Wi(s),i=Wi(e),l=on(n.seconds,i.seconds);return l!==0?l:on(n.nanos,i.nanos)}function mx(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=Vl(n[l],i[l]);if(u)return u}return on(n.length,i.length)}function Bl(s){return lg(s)}function lg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Wi(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Gi(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Et.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=lg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const h of i)u?u=!1:l+=",",l+=`${h}:${lg(n.fields[h])}`;return l+"}"})(s.mapValue):Lt(61005,{value:s})}function vd(s){switch(Ki(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nf(s);return e?16+vd(e):16;case 5:return 2*s.stringValue.length;case 6:return Gi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+vd(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return Zi(i.fields,((u,h)=>{l+=u.length+vd(h)})),l})(s.mapValue);default:throw Lt(13486,{value:s})}}function px(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function cg(s){return!!s&&"integerValue"in s}function Xg(s){return!!s&&"arrayValue"in s}function gx(s){return!!s&&"nullValue"in s}function yx(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function bd(s){return!!s&&"mapValue"in s}function vR(s){return(s?.mapValue?.fields||{})[Yw]?.stringValue===Qw}function Jc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Zi(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Jc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jc(s.arrayValue.values[n]);return e}return{...s}}function bR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===yR}class fr{constructor(e){this.value=e}static empty(){return new fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!bd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jc(n)}setAll(e){let n=Us.emptyPath(),i={},l=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,l),i={},l=[],n=p.popLast()}h?i[p.lastSegment()]=Jc(h):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());bd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ea(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];bd(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){Zi(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new fr(Jc(this.value))}}function Xw(s){const e=[];return Zi(s.fields,((n,i)=>{const l=new Us([n]);if(bd(i)){const u=Xw(i.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new jr(e)}class Qs{constructor(e,n,i,l,u,h,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Qs(e,0,zt.min(),zt.min(),zt.min(),fr.empty(),0)}static newFoundDocument(e,n,i,l){return new Qs(e,1,n,zt.min(),i,l,0)}static newNoDocument(e,n){return new Qs(e,2,n,zt.min(),zt.min(),fr.empty(),0)}static newUnknownDocument(e,n){return new Qs(e,3,n,zt.min(),zt.min(),fr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(zt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=zt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qs&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qs(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ld{constructor(e,n){this.position=e,this.inclusive=n}}function vx(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],h=s.position[l];if(u.field.isKeyField()?i=Et.comparator(Et.fromName(h.referenceValue),n.key):i=Vl(h,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function bx(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ea(s.position[n],e.position[n]))return!1;return!0}class du{constructor(e,n="asc"){this.field=e,this.dir=n}}function xR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Jw{}class ks extends Jw{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new _R(e,n,i):n==="array-contains"?new ER(e,i):n==="in"?new jR(e,i):n==="not-in"?new SR(e,i):n==="array-contains-any"?new NR(e,i):new ks(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new kR(e,i):new TR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vl(n,this.value)):n!==null&&Ki(this.value)===Ki(n)&&this.matchesComparison(Vl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class na extends Jw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new na(e,n)}matches(e){return Zw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zw(s){return s.op==="and"}function e_(s){return wR(s)&&Zw(s)}function wR(s){for(const e of s.filters)if(e instanceof na)return!1;return!0}function ug(s){if(s instanceof ks)return s.field.canonicalString()+s.op.toString()+Bl(s.value);if(e_(s))return s.filters.map((e=>ug(e))).join(",");{const e=s.filters.map((n=>ug(n))).join(",");return`${s.op}(${e})`}}function t_(s,e){return s instanceof ks?(function(i,l){return l instanceof ks&&i.op===l.op&&i.field.isEqual(l.field)&&Ea(i.value,l.value)})(s,e):s instanceof na?(function(i,l){return l instanceof na&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,h,p)=>u&&t_(h,l.filters[p])),!0):!1})(s,e):void Lt(19439)}function n_(s){return s instanceof ks?(function(n){return`${n.field.canonicalString()} ${n.op} ${Bl(n.value)}`})(s):s instanceof na?(function(n){return n.op.toString()+" {"+n.getFilters().map(n_).join(" ,")+"}"})(s):"Filter"}class _R extends ks{constructor(e,n,i){super(e,n,i),this.key=Et.fromName(i.referenceValue)}matches(e){const n=Et.comparator(e.key,this.key);return this.matchesComparison(n)}}class kR extends ks{constructor(e,n){super(e,"in",n),this.keys=s_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class TR extends ks{constructor(e,n){super(e,"not-in",n),this.keys=s_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function s_(s,e){return(e.arrayValue?.values||[]).map((n=>Et.fromName(n.referenceValue)))}class ER extends ks{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xg(n)&&hu(n.arrayValue,this.value)}}class jR extends ks{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hu(this.value.arrayValue,n)}}class SR extends ks{constructor(e,n){super(e,"not-in",n)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hu(this.value.arrayValue,n)}}class NR extends ks{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>hu(this.value.arrayValue,i)))}}class CR{constructor(e,n=null,i=[],l=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function xx(s,e=null,n=[],i=[],l=null,u=null,h=null){return new CR(s,e,n,i,l,u,h)}function Jg(s){const e=$t(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>ug(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),tf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Bl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Bl(i))).join(",")),e.Te=n}return e.Te}function Zg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!xR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!t_(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!bx(s.startAt,e.startAt)&&bx(s.endAt,e.endAt)}function hg(s){return Et.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Yl{constructor(e,n=null,i=[],l=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function RR(s,e,n,i,l,u,h,p){return new Yl(s,e,n,i,l,u,h,p)}function sf(s){return new Yl(s)}function wx(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function AR(s){return Et.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function r_(s){return s.collectionGroup!==null}function Zc(s){const e=$t(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Ns(Us.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new du(u,i))})),n.has(Us.keyField().canonicalString())||e.Ie.push(new du(Us.keyField(),i))}return e.Ie}function _a(s){const e=$t(s);return e.Ee||(e.Ee=IR(e,Zc(s))),e.Ee}function IR(s,e){if(s.limitType==="F")return xx(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new du(l.field,u)}));const n=s.endAt?new Ld(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Ld(s.startAt.position,s.startAt.inclusive):null;return xx(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function dg(s,e){const n=s.filters.concat([e]);return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function MR(s,e){const n=s.explicitOrderBy.concat([e]);return new Yl(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Od(s,e,n){return new Yl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function rf(s,e){return Zg(_a(s),_a(e))&&s.limitType===e.limitType}function a_(s){return`${Jg(_a(s))}|lt:${s.limitType}`}function El(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>n_(l))).join(", ")}]`),tf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Bl(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Bl(l))).join(",")),`Target(${i})`})(_a(s))}; limitType=${s.limitType})`}function af(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Et.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of Zc(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(h,p,g){const y=vx(h,p,g);return h.inclusive?y<=0:y<0})(i.startAt,Zc(i),l)||i.endAt&&!(function(h,p,g){const y=vx(h,p,g);return h.inclusive?y>=0:y>0})(i.endAt,Zc(i),l))})(s,e)}function DR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function i_(s){return(e,n)=>{let i=!1;for(const l of Zc(s)){const u=PR(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function PR(s,e,n){const i=s.field.isKeyField()?Et.comparator(e.key,n.key):(function(u,h,p){const g=h.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Vl(g,y):Lt(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Lt(19790,{direction:s.dir})}}class Bo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Zi(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return qw(this.inner)}size(){return this.innerSize}}const LR=new ss(Et.comparator);function ni(){return LR}const o_=new ss(Et.comparator);function Gc(...s){let e=o_;for(const n of s)e=e.insert(n.key,n);return e}function l_(s){let e=o_;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ko(){return eu()}function c_(){return eu()}function eu(){return new Bo((s=>s.toString()),((s,e)=>s.isEqual(e)))}const OR=new ss(Et.comparator),VR=new Ns(Et.comparator);function ln(...s){let e=VR;for(const n of s)e=e.add(n);return e}const BR=new Ns(on);function UR(){return BR}function ey(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Md(e)?"-0":e}}function u_(s){return{integerValue:""+s}}function h_(s,e){return hR(e)?u_(e):ey(s,e)}class of{constructor(){this._=void 0}}function zR(s,e,n){return s instanceof fu?(function(l,u){const h={fields:{[Ww]:{stringValue:$w},[Kw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Qg(u)&&(u=nf(u)),u&&(h.fields[Gw]=u),{mapValue:h}})(n,e):s instanceof mu?f_(s,e):s instanceof pu?m_(s,e):(function(l,u){const h=d_(l,u),p=_x(h)+_x(l.Ae);return cg(h)&&cg(l.Ae)?u_(p):ey(l.serializer,p)})(s,e)}function FR(s,e,n){return s instanceof mu?f_(s,e):s instanceof pu?m_(s,e):n}function d_(s,e){return s instanceof gu?(function(i){return cg(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class fu extends of{}class mu extends of{constructor(e){super(),this.elements=e}}function f_(s,e){const n=p_(e);for(const i of s.elements)n.some((l=>Ea(l,i)))||n.push(i);return{arrayValue:{values:n}}}class pu extends of{constructor(e){super(),this.elements=e}}function m_(s,e){let n=p_(e);for(const i of s.elements)n=n.filter((l=>!Ea(l,i)));return{arrayValue:{values:n}}}class gu extends of{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function _x(s){return ps(s.integerValue||s.doubleValue)}function p_(s){return Xg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class g_{constructor(e,n){this.field=e,this.transform=n}}function qR(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof mu&&l instanceof mu||i instanceof pu&&l instanceof pu?Ol(i.elements,l.elements,Ea):i instanceof gu&&l instanceof gu?Ea(i.Ae,l.Ae):i instanceof fu&&l instanceof fu})(s.transform,e.transform)}class HR{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class lf{}function y_(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new cf(s.key,ar.none()):new ju(s.key,s.data,ar.none());{const n=s.data,i=fr.empty();let l=new Ns(Us.comparator);for(let u of e.fields)if(!l.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?i.delete(u):i.set(u,h),l=l.add(u)}return new eo(s.key,i,new jr(l.toArray()),ar.none())}}function $R(s,e,n){s instanceof ju?(function(l,u,h){const p=l.value.clone(),g=Tx(l.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):s instanceof eo?(function(l,u,h){if(!xd(l.precondition,u))return void u.convertToUnknownDocument(h.version);const p=Tx(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(v_(l)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function tu(s,e,n,i){return s instanceof ju?(function(u,h,p,g){if(!xd(u.precondition,h))return p;const y=u.value.clone(),x=Ex(u.fieldTransforms,g,h);return y.setAll(x),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof eo?(function(u,h,p,g){if(!xd(u.precondition,h))return p;const y=Ex(u.fieldTransforms,g,h),x=h.data;return x.setAll(v_(u)),x.setAll(y),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((k=>k.field)))})(s,e,n,i):(function(u,h,p){return xd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,n)}function WR(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=d_(i.transform,l||null);u!=null&&(n===null&&(n=fr.empty()),n.set(i.field,u))}return n||null}function kx(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&Ol(i,l,((u,h)=>qR(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class ju extends lf{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class eo extends lf{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function v_(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function Tx(s,e,n){const i=new Map;En(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],h=u.transform,p=e.data.field(u.field);i.set(u.field,FR(h,p,n[l]))}return i}function Ex(s,e,n){const i=new Map;for(const l of s){const u=l.transform,h=n.data.field(l.field);i.set(l.field,zR(u,h,e))}return i}class cf extends lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GR extends lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class KR{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&$R(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=tu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=tu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=c_();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(l.key)?null:p;const g=y_(h,p);g!==null&&i.set(l.key,g),h.isValidDocument()||h.convertToNoDocument(zt.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ln())}isEqual(e){return this.batchId===e.batchId&&Ol(this.mutations,e.mutations,((n,i)=>kx(n,i)))&&Ol(this.baseMutations,e.baseMutations,((n,i)=>kx(n,i)))}}class ty{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){En(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return OR})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,i[h].version);return new ty(e,n,i,l)}}class YR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class QR{constructor(e,n){this.count=e,this.unchangedNames=n}}var _s,pn;function XR(s){switch(s){case Te.OK:return Lt(64938);case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0;default:return Lt(15467,{code:s})}}function b_(s){if(s===void 0)return ti("GRPC error has no .code"),Te.UNKNOWN;switch(s){case _s.OK:return Te.OK;case _s.CANCELLED:return Te.CANCELLED;case _s.UNKNOWN:return Te.UNKNOWN;case _s.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case _s.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case _s.INTERNAL:return Te.INTERNAL;case _s.UNAVAILABLE:return Te.UNAVAILABLE;case _s.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case _s.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case _s.NOT_FOUND:return Te.NOT_FOUND;case _s.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case _s.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case _s.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case _s.ABORTED:return Te.ABORTED;case _s.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case _s.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case _s.DATA_LOSS:return Te.DATA_LOSS;default:return Lt(39323,{code:s})}}(pn=_s||(_s={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";function JR(){return new TextEncoder}const ZR=new Fi([4294967295,4294967295],0);function jx(s){const e=JR().encode(s),n=new Iw;return n.update(e),new Uint8Array(n.digest())}function Sx(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Fi([n,i],0),new Fi([l,u],0)]}class ny{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Kc(`Invalid padding: ${n}`);if(i<0)throw new Kc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Kc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Kc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fi.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Fi.fromNumber(i)));return l.compare(ZR)===1&&(l=new Fi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=jx(e),[i,l]=Sx(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);if(!this.we(h))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new ny(u,l,n);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=jx(e),[i,l]=Sx(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);this.be(h)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class uf{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,Su.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new uf(zt.min(),l,new ss(on),ni(),ln())}}class Su{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Su(i,n,ln(),ln(),ln())}}class wd{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class x_{constructor(e,n){this.targetId=e,this.Ce=n}}class w_{constructor(e,n,i=zs.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class Nx{constructor(){this.ve=0,this.Fe=Cx(),this.Me=zs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ln(),n=ln(),i=ln();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:Lt(38017,{changeType:u})}})),new Su(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=Cx()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,En(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class eA{constructor(e){this.Ge=e,this.ze=new Map,this.je=ni(),this.He=td(),this.Je=td(),this.Ze=new ss(on)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Lt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(hg(u))if(i===0){const h=new Et(u.path);this.et(n,h,Qs.newNoDocument(h,zt.min()))}else En(i===1,20013,{expectedCount:i});else{const h=this._t(n);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let h,p;try{h=Gi(i).toUint8Array()}catch(g){if(g instanceof Hw)return Ll("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new ny(h,l,u)}catch(g){return Ll(g instanceof Kc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&hg(p.target)){const g=new Et(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Qs.newNoDocument(g,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let i=ln();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new uf(e,n,this.Ze,this.je,i);return this.je=ni(),this.He=td(),this.Je=td(),this.Ze=new ss(on),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Nx,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Ns(on),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Ns(on),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||lt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Nx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function td(){return new ss(Et.comparator)}function Cx(){return new ss(Et.comparator)}const tA={asc:"ASCENDING",desc:"DESCENDING"},nA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sA={and:"AND",or:"OR"};class rA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fg(s,e){return s.useProto3Json||tf(e)?e:{value:e}}function Vd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function aA(s,e){return Vd(s,e.toTimestamp())}function ka(s){return En(!!s,49232),zt.fromTimestamp((function(n){const i=Wi(n);return new bt(i.seconds,i.nanos)})(s))}function sy(s,e){return mg(s,e).canonicalString()}function mg(s,e){const n=(function(l){return new qn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function k_(s){const e=qn.fromString(s);return En(N_(e),10190,{key:e.toString()}),e}function pg(s,e){return sy(s.databaseId,e.path)}function Cp(s,e){const n=k_(e);if(n.get(1)!==s.databaseId.projectId)throw new Ze(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Ze(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Et(E_(n))}function T_(s,e){return sy(s.databaseId,e)}function iA(s){const e=k_(s);return e.length===4?qn.emptyPath():E_(e)}function gg(s){return new qn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function E_(s){return En(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Rx(s,e,n){return{name:pg(s,e),fields:n.value.mapValue.fields}}function oA(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Lt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,x){return y.useProto3Json?(En(x===void 0||typeof x=="string",58123),zs.fromBase64String(x||"")):(En(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),zs.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const x=y.code===void 0?Te.UNKNOWN:b_(y.code);return new Ze(x,y.message||"")})(h);n=new w_(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=Cp(s,i.document.name),u=ka(i.document.updateTime),h=i.document.createTime?ka(i.document.createTime):zt.min(),p=new fr({mapValue:{fields:i.document.fields}}),g=Qs.newFoundDocument(l,u,h,p),y=i.targetIds||[],x=i.removedTargetIds||[];n=new wd(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=Cp(s,i.document),u=i.readTime?ka(i.readTime):zt.min(),h=Qs.newNoDocument(l,u),p=i.removedTargetIds||[];n=new wd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=Cp(s,i.document),u=i.removedTargetIds||[];n=new wd([],u,l,null)}else{if(!("filter"in e))return Lt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,h=new QR(l,u),p=i.targetId;n=new x_(p,h)}}return n}function lA(s,e){let n;if(e instanceof ju)n={update:Rx(s,e.key,e.value)};else if(e instanceof cf)n={delete:pg(s,e.key)};else if(e instanceof eo)n={update:Rx(s,e.key,e.data),updateMask:yA(e.fieldMask)};else{if(!(e instanceof GR))return Lt(16599,{dt:e.type});n={verify:pg(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof fu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof mu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof pu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof gu)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Lt(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:aA(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Lt(27497)})(s,e.precondition)),n}function cA(s,e){return s&&s.length>0?(En(e!==void 0,14353),s.map((n=>(function(l,u){let h=l.updateTime?ka(l.updateTime):ka(u);return h.isEqual(zt.min())&&(h=ka(u)),new HR(h,l.transformResults||[])})(n,e)))):[]}function uA(s,e){return{documents:[T_(s,e.path)]}}function hA(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=T_(s,l);const u=(function(y){if(y.length!==0)return S_(na.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((x=>(function(j){return{field:jl(j.field),direction:mA(j.dir)}})(x)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=fg(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function dA(s){let e=iA(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){En(i===1,65062);const x=n.from[0];x.allDescendants?l=x.collectionId:e=e.child(x.collectionId)}let u=[];n.where&&(u=(function(k){const j=j_(k);return j instanceof na&&e_(j)?j.getFilters():[j]})(n.where));let h=[];n.orderBy&&(h=(function(k){return k.map((j=>(function(K){return new du(Sl(K.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(j)))})(n.orderBy));let p=null;n.limit&&(p=(function(k){let j;return j=typeof k=="object"?k.value:k,tf(j)?null:j})(n.limit));let g=null;n.startAt&&(g=(function(k){const j=!!k.before,O=k.values||[];return new Ld(O,j)})(n.startAt));let y=null;return n.endAt&&(y=(function(k){const j=!k.before,O=k.values||[];return new Ld(O,j)})(n.endAt)),RR(e,l,h,u,p,"F",g,y)}function fA(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Lt(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function j_(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Sl(n.unaryFilter.field);return ks.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Sl(n.unaryFilter.field);return ks.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Sl(n.unaryFilter.field);return ks.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Sl(n.unaryFilter.field);return ks.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Lt(61313);default:return Lt(60726)}})(s):s.fieldFilter!==void 0?(function(n){return ks.create(Sl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Lt(58110);default:return Lt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return na.create(n.compositeFilter.filters.map((i=>j_(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Lt(1026)}})(n.compositeFilter.op))})(s):Lt(30097,{filter:s})}function mA(s){return tA[s]}function pA(s){return nA[s]}function gA(s){return sA[s]}function jl(s){return{fieldPath:s.canonicalString()}}function Sl(s){return Us.fromServerFormat(s.fieldPath)}function S_(s){return s instanceof ks?(function(n){if(n.op==="=="){if(yx(n.value))return{unaryFilter:{field:jl(n.field),op:"IS_NAN"}};if(gx(n.value))return{unaryFilter:{field:jl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yx(n.value))return{unaryFilter:{field:jl(n.field),op:"IS_NOT_NAN"}};if(gx(n.value))return{unaryFilter:{field:jl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jl(n.field),op:pA(n.op),value:n.value}}})(s):s instanceof na?(function(n){const i=n.getFilters().map((l=>S_(l)));return i.length===1?i[0]:{compositeFilter:{op:gA(n.op),filters:i}}})(s):Lt(54877,{filter:s})}function yA(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function N_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function C_(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Bi{constructor(e,n,i,l,u=zt.min(),h=zt.min(),p=zs.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vA{constructor(e){this.yt=e}}function bA(s){const e=dA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Od(e,e.limit,"L"):e}class xA{constructor(){this.Sn=new wA}addToCollectionParentIndex(e,n){return this.Sn.add(n),Ae.resolve()}getCollectionParents(e,n){return Ae.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Ae.resolve()}deleteFieldIndex(e,n){return Ae.resolve()}deleteAllFieldIndexes(e){return Ae.resolve()}createTargetIndexes(e,n){return Ae.resolve()}getDocumentsMatchingTarget(e,n){return Ae.resolve(null)}getIndexType(e,n){return Ae.resolve(0)}getFieldIndexes(e,n){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,n){return Ae.resolve($i.min())}getMinOffsetFromCollectionGroup(e,n){return Ae.resolve($i.min())}updateCollectionGroup(e,n,i){return Ae.resolve()}updateIndexEntries(e,n){return Ae.resolve()}}class wA{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new Ns(qn.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new Ns(qn.comparator)).toArray()}}const Ax={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R_=41943040;class dr{static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(R_,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);class Ul{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ul(0)}static ar(){return new Ul(-1)}}const Ix="LruGarbageCollector",_A=1048576;function Mx([s,e],[n,i]){const l=on(s,n);return l===0?on(e,i):l}class kA{constructor(e){this.Pr=e,this.buffer=new Ns(Mx),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Mx(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TA{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){lt(Ix,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Kl(n)?lt(Ix,"Ignoring IndexedDB error during garbage collection: ",n):await Gl(n)}await this.Ar(3e5)}))}}class EA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return Ae.resolve(ef.ce);const i=new kA(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(Ax)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ax):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,u,h,p,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),l=this.params.maximumSequenceNumbersToCollect):l=k,h=Date.now(),this.nthSequenceNumber(e,l)))).next((k=>(i=k,p=Date.now(),this.removeTargets(e,i,n)))).next((k=>(u=k,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((k=>(y=Date.now(),Tl()<=an.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-x}ms
	Determined least recently used ${l} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${k} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:k}))))}}function jA(s,e){return new EA(s,e)}class SA{constructor(){this.changes=new Bo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qs.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Ae.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class NA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class CA{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&tu(i.mutation,l,jr.empty(),bt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,ln()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=ln()){const l=ko();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let h=Gc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const i=ko();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,ln())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,i,l){let u=ni();const h=eu(),p=(function(){return eu()})();return n.forEach(((g,y)=>{const x=i.get(y.key);l.has(y.key)&&(x===void 0||x.mutation instanceof eo)?u=u.insert(y.key,y):x!==void 0?(h.set(y.key,x.mutation.getFieldMask()),tu(x.mutation,y,x.mutation.getFieldMask(),bt.now())):h.set(y.key,jr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,x)=>h.set(y,x))),n.forEach(((y,x)=>p.set(y,new NA(x,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=eu();let l=new ss(((h,p)=>h-p)),u=ln();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let x=i.get(g)||jr.empty();x=p.applyToLocalView(y,x),i.set(g,x);const k=(l.get(p.batchId)||ln()).add(g);l=l.insert(p.batchId,k)}))})).next((()=>{const h=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,x=g.value,k=c_();x.forEach((j=>{if(!u.has(j)){const O=y_(n.get(j),i.get(j));O!==null&&k.set(j,O),u=u.add(j)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,k))}return Ae.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return AR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):r_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):Ae.resolve(ko());let p=lu,g=u;return h.next((y=>Ae.forEach(y,((x,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),u.get(x)?Ae.resolve():this.remoteDocumentCache.getEntry(e,x).next((j=>{g=g.insert(x,j)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,ln()))).next((x=>({batchId:p,changes:l_(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Et(n)).next((i=>{let l=Gc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let h=Gc();return this.indexManager.getCollectionParents(e,u).next((p=>Ae.forEach(p,(g=>{const y=(function(k,j){return new Yl(j,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((x=>{x.forEach(((k,j)=>{h=h.insert(k,j)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((h=>{u.forEach(((g,y)=>{const x=y.getKey();h.get(x)===null&&(h=h.insert(x,Qs.newInvalidDocument(x)))}));let p=Gc();return h.forEach(((g,y)=>{const x=u.get(g);x!==void 0&&tu(x.mutation,y,jr.empty(),bt.now()),af(n,y)&&(p=p.insert(g,y))})),p}))}}class RA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Ae.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ka(l.createTime)}})(n)),Ae.resolve()}getNamedQuery(e,n){return Ae.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:bA(l.bundledQuery),readTime:ka(l.readTime)}})(n)),Ae.resolve()}}class AA{constructor(){this.overlays=new ss(Et.comparator),this.Lr=new Map}getOverlay(e,n){return Ae.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ko();return Ae.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.bt(e,n,u)})),Ae.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),Ae.resolve()}getOverlaysForCollection(e,n,i){const l=ko(),u=n.length+1,h=new Et(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return Ae.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new ss(((y,x)=>y-x));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let x=u.get(y.largestBatchId);x===null&&(x=ko(),u=u.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=ko(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>p.set(y,x))),!(p.size()>=l)););return Ae.resolve(p)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new YR(n,i));let u=this.Lr.get(n);u===void 0&&(u=ln(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class IA{constructor(){this.sessionToken=zs.EMPTY_BYTE_STRING}getSessionToken(e){return Ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ae.resolve()}}class ry{constructor(){this.kr=new Ns(Is.Kr),this.qr=new Ns(Is.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new Is(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Is(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new Et(new qn([])),i=new Is(n,e),l=new Is(n,e+1),u=[];return this.qr.forEachInRange([i,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Et(new qn([])),i=new Is(n,e),l=new Is(n,e+1);let u=ln();return this.qr.forEachInRange([i,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Is(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Is{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Et.comparator(e.key,n.key)||on(e.Hr,n.Hr)}static Ur(e,n){return on(e.Hr,n.Hr)||Et.comparator(e.key,n.key)}}class MA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Ns(Is.Kr)}checkEmpty(e){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new KR(u,n,i,l);this.mutationQueue.push(h);for(const p of l)this.Jr=this.Jr.add(new Is(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Ae.resolve(h)}lookupMutationBatch(e,n){return Ae.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),u=l<0?0:l;return Ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?Yg:this.Yn-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Is(n,0),l=new Is(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(h=>{const p=this.Zr(h.Hr);u.push(p)})),Ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ns(on);return n.forEach((l=>{const u=new Is(l,0),h=new Is(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),Ae.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;Et.isDocumentKey(u)||(u=u.child(""));const h=new Is(new Et(u),0);let p=new Ns(on);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),h),Ae.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){En(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Ae.forEach(n.mutations,(l=>{const u=new Is(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new Is(n,0),l=this.Jr.firstAfterOrEqual(i);return Ae.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ae.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class DA{constructor(e){this.ti=e,this.docs=(function(){return new ss(Et.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,h=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Ae.resolve(i?i.document.mutableCopy():Qs.newInvalidDocument(n))}getEntries(e,n){let i=ni();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Qs.newInvalidDocument(l))})),Ae.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=ni();const h=n.path,p=new Et(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||oR(iR(x),i)<=0||(l.has(x.key)||af(n,x))&&(u=u.insert(x.key,x.mutableCopy()))}return Ae.resolve(u)}getAllFromCollectionGroup(e,n,i,l){Lt(9500)}ni(e,n){return Ae.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new PA(this)}getSize(e){return Ae.resolve(this.size)}}class PA extends SA{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),Ae.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class LA{constructor(e){this.persistence=e,this.ri=new Bo((n=>Jg(n)),Zg),this.lastRemoteSnapshotVersion=zt.min(),this.highestTargetId=0,this.ii=0,this.si=new ry,this.targetCount=0,this.oi=Ul._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),Ae.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ul(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Ae.resolve()}updateTargetData(e,n){return this.lr(n),Ae.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Ae.waitFor(u).next((()=>l))}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return Ae.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),Ae.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),Ae.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Ae.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return Ae.resolve(i)}containsKey(e,n){return Ae.resolve(this.si.containsKey(n))}}class A_{constructor(e,n){this._i={},this.overlays={},this.ai=new ef(0),this.ui=!1,this.ui=!0,this.ci=new IA,this.referenceDelegate=e(this),this.li=new LA(this),this.indexManager=new xA,this.remoteDocumentCache=(function(l){return new DA(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new vA(n),this.Pi=new RA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new AA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new MA(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){lt("MemoryPersistence","Starting transaction:",e);const l=new OA(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return Ae.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class OA extends cR{constructor(e){super(),this.currentSequenceNumber=e}}class ay{constructor(e){this.persistence=e,this.Ri=new ry,this.Ai=null}static Vi(e){return new ay(e)}get di(){if(this.Ai)return this.Ai;throw Lt(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),Ae.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),Ae.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Ae.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.di,(i=>{const l=Et.fromPath(i);return this.mi(e,l).next((u=>{u||n.removeEntry(l,zt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Ae.or([()=>Ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Bd{constructor(e,n){this.persistence=e,this.fi=new Bo((i=>dR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=jA(this,n)}static Vi(e,n){return new Bd(e,n)}Ti(){}Ii(e){return Ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return Ae.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?Ae.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(h=>this.wr(e,h,n).next((p=>{p||(i++,u.removeEntry(h,zt.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Ae.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Ae.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),Ae.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Ae.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=vd(e.data.value)),n}wr(e,n,i){return Ae.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return Ae.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class iy{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=ln(),l=ln();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new iy(e,n.fromCache,i,l)}}class VA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class BA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return dS()?8:uR(Xs())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,l,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new VA;return this.ys(e,n,h).next((p=>{if(u.result=p,this.As)return this.ws(e,n,h,p.size)}))})).next((()=>u.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(Tl()<=an.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",El(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ae.resolve()):(Tl()<=an.DEBUG&&lt("QueryEngine","Query:",El(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Tl()<=an.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",El(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_a(n))):Ae.resolve())}gs(e,n){if(wx(n))return Ae.resolve(null);let i=_a(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Od(n,null,"F"),i=_a(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=ln(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,h,g.readTime)?this.gs(e,Od(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,i,l){return wx(n)||l.isEqual(zt.min())?Ae.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,i,l)?Ae.resolve(null):(Tl()<=an.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),El(n)),this.Ds(e,h,n,aR(l,lu)).next((p=>p)))}))}bs(e,n){let i=new Ns(i_(e));return n.forEach(((l,u)=>{af(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,i){return Tl()<=an.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",El(n)),this.fs.getDocumentsMatchingQuery(e,n,$i.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const oy="LocalStore",UA=3e8;class zA{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new ss(on),this.Fs=new Bo((u=>Jg(u)),Zg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function FA(s,e,n,i){return new zA(s,e,n,i)}async function I_(s,e){const n=$t(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=ln();for(const y of l){h.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of u){p.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function qA(s,e){const n=$t(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,x){const k=y.batch,j=k.keys();let O=Ae.resolve();return j.forEach((K=>{O=O.next((()=>x.getEntry(g,K))).next((U=>{const V=y.docVersions.get(K);En(V!==null,48541),U.version.compareTo(V)<0&&(k.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),x.addEntry(U)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(g,k)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=ln();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function M_(s){const e=$t(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function HA(s,e){const n=$t(s),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((x,k)=>{const j=l.get(k);if(!j)return;p.push(n.li.removeMatchingKeys(u,x.removedDocuments,k).next((()=>n.li.addMatchingKeys(u,x.addedDocuments,k))));let O=j.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(k)!==null?O=O.withResumeToken(zs.EMPTY_BYTE_STRING,zt.min()).withLastLimboFreeSnapshotVersion(zt.min()):x.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(x.resumeToken,i)),l=l.insert(k,O),(function(U,V,te){return U.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=UA?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(j,O,x)&&p.push(n.li.updateTargetData(u,O))}));let g=ni(),y=ln();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,x))})),p.push($A(u,h,e.documentUpdates).next((x=>{g=x.Bs,y=x.Ls}))),!i.isEqual(zt.min())){const x=n.li.getLastRemoteSnapshotVersion(u).next((k=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(x)}return Ae.waitFor(p).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=l,u)))}function $A(s,e,n){let i=ln(),l=ln();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=ni();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(zt.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):lt(oy,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function WA(s,e){const n=$t(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Yg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function GA(s,e){const n=$t(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((u=>u?(l=u,Ae.resolve(l)):n.li.allocateTargetId(i).next((h=>(l=new Bi(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function yg(s,e,n){const i=$t(s),l=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!Kl(h))throw h;lt(oy,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function Dx(s,e,n){const i=$t(s);let l=zt.min(),u=ln();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,x){const k=$t(g),j=k.Fs.get(x);return j!==void 0?Ae.resolve(k.vs.get(j)):k.li.getTargetData(y,x)})(i,h,_a(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,n?l:zt.min(),n?u:ln()))).next((p=>(KA(i,DR(e),p),{documents:p,ks:u})))))}function KA(s,e,n){let i=s.Ms.get(e)||zt.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class Px{constructor(){this.activeTargetIds=UR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YA{constructor(){this.vo=new Px,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Px,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QA{Mo(e){}shutdown(){}}const Lx="ConnectivityMonitor";class Ox{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){lt(Lx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){lt(Lx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let nd=null;function vg(){return nd===null?nd=(function(){return 268435456+Math.round(2147483648*Math.random())})():nd++,"0x"+nd.toString(16)}const Rp="RestConnection",XA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class JA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Dd?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,u){const h=vg(),p=this.Qo(e,n.toUriEncodedString());lt(Rp,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),x=Xi(y);return this.zo(e,p,g,i,x).then((k=>(lt(Rp,`Received RPC '${e}' ${h}: `,k),k)),(k=>{throw Ll(Rp,`RPC '${e}' ${h} failed with error: `,k,"url: ",p,"request:",i),k}))}jo(e,n,i,l,u,h){return this.Wo(e,n,i,l,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const i=XA[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class ZA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Ks="WebChannelConnection",Bc=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Il extends JA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Il.c_){const e=Lw();Bc(e,Pw.STAT_EVENT,(n=>{n.stat===ig.PROXY?lt(Ks,"STAT_EVENT: detected buffering proxy"):n.stat===ig.NOPROXY&&lt(Ks,"STAT_EVENT: detected no buffering proxy")})),Il.c_=!0}}zo(e,n,i,l,u){const h=vg();return new Promise(((p,g)=>{const y=new Mw;y.setWithCredentials(!0),y.listenOnce(Dw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case yd.NO_ERROR:const k=y.getResponseJson();lt(Ks,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(k)),p(k);break;case yd.TIMEOUT:lt(Ks,`RPC '${e}' ${h} timed out`),g(new Ze(Te.DEADLINE_EXCEEDED,"Request time out"));break;case yd.HTTP_ERROR:const j=y.getStatus();if(lt(Ks,`RPC '${e}' ${h} failed with status:`,j,"response text:",y.getResponseText()),j>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const K=O?.error;if(K&&K.status&&K.message){const U=(function(te){const X=te.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(X)>=0?X:Te.UNKNOWN})(K.status);g(new Ze(U,K.message))}else g(new Ze(Te.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ze(Te.UNAVAILABLE,"Connection failed."));break;default:Lt(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{lt(Ks,`RPC '${e}' ${h} completed.`)}}));const x=JSON.stringify(l);lt(Ks,`RPC '${e}' ${h} sending request:`,l),y.send(n,"POST",x,i,15)}))}T_(e,n,i){const l=vg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const y=u.join("");lt(Ks,`Creating RPC '${e}' stream ${l}: ${y}`,p);const x=h.createWebChannel(y,p);this.I_(x);let k=!1,j=!1;const O=new ZA({Ho:K=>{j?lt(Ks,`Not sending because RPC '${e}' stream ${l} is closed:`,K):(k||(lt(Ks,`Opening RPC '${e}' stream ${l} transport.`),x.open(),k=!0),lt(Ks,`RPC '${e}' stream ${l} sending:`,K),x.send(K))},Jo:()=>x.close()});return Bc(x,Wc.EventType.OPEN,(()=>{j||(lt(Ks,`RPC '${e}' stream ${l} transport opened.`),O.i_())})),Bc(x,Wc.EventType.CLOSE,(()=>{j||(j=!0,lt(Ks,`RPC '${e}' stream ${l} transport closed`),O.o_(),this.E_(x))})),Bc(x,Wc.EventType.ERROR,(K=>{j||(j=!0,Ll(Ks,`RPC '${e}' stream ${l} transport errored. Name:`,K.name,"Message:",K.message),O.o_(new Ze(Te.UNAVAILABLE,"The operation could not be completed")))})),Bc(x,Wc.EventType.MESSAGE,(K=>{if(!j){const U=K.data[0];En(!!U,16349);const V=U,te=V?.error||V[0]?.error;if(te){lt(Ks,`RPC '${e}' stream ${l} received error:`,te);const X=te.status;let fe=(function(Oe){const A=_s[Oe];if(A!==void 0)return b_(A)})(X),je=te.message;fe===void 0&&(fe=Te.INTERNAL,je="Unknown error status: "+X+" with message "+te.message),j=!0,O.o_(new Ze(fe,je)),x.close()}else lt(Ks,`RPC '${e}' stream ${l} received:`,U),O.__(U)}})),Il.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Ow()}}function eI(s){return new Il(s)}function Ap(){return typeof document<"u"?document:null}function hf(s){return new rA(s,!0)}Il.c_=!1;class D_{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&lt("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Vx="PersistentStream";class P_{constructor(e,n,i,l,u,h,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new D_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Te.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new Ze(Te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return lt(Vx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(lt(Vx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tI extends P_{constructor(e,n,i,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=oA(this.serializer,e),i=(function(u){if(!("targetChange"in u))return zt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?zt.min():h.readTime?ka(h.readTime):zt.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=gg(this.serializer),n.addTarget=(function(u,h){let p;const g=h.target;if(p=hg(g)?{documents:uA(u,g)}:{query:hA(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=__(u,h.resumeToken);const y=fg(u,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(zt.min())>0){p.readTime=Vd(u,h.snapshotVersion.toTimestamp());const y=fg(u,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=fA(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=gg(this.serializer),n.removeTarget=e,this.K_(n)}}class nI extends P_{constructor(e,n,i,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return En(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,En(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){En(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=cA(e.writeResults,e.commitTime),i=ka(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=gg(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>lA(this.serializer,i)))};this.K_(n)}}class sI{}class rI extends sI{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ze(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,mg(n,i),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ze(Te.UNKNOWN,u.toString())}))}jo(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,mg(n,i),l,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ze(Te.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function aI(s,e,n,i){return new rI(s,e,n,i)}class iI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ti(n),this.aa=!1):lt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Po="RemoteStore";class oI{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{Uo(this)&&(lt(Po,"Restarting streams for network reachability change."),await(async function(g){const y=$t(g);y.Ea.add(4),await Nu(y),y.Va.set("Unknown"),y.Ea.delete(4),await df(y)})(this))}))})),this.Va=new iI(i,l)}}async function df(s){if(Uo(s))for(const e of s.Ra)await e(!0)}async function Nu(s){for(const e of s.Ra)await e(!1)}function L_(s,e){const n=$t(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),hy(n)?uy(n):Ql(n).O_()&&cy(n,e))}function ly(s,e){const n=$t(s),i=Ql(n);n.Ia.delete(e),i.O_()&&O_(n,e),n.Ia.size===0&&(i.O_()?i.L_():Uo(n)&&n.Va.set("Unknown"))}function cy(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(zt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ql(s).Z_(e)}function O_(s,e){s.da.$e(e),Ql(s).X_(e)}function uy(s){s.da=new eA({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ql(s).start(),s.Va.ua()}function hy(s){return Uo(s)&&!Ql(s).x_()&&s.Ia.size>0}function Uo(s){return $t(s).Ea.size===0}function V_(s){s.da=void 0}async function lI(s){s.Va.set("Online")}async function cI(s){s.Ia.forEach(((e,n)=>{cy(s,e)}))}async function uI(s,e){V_(s),hy(s)?(s.Va.ha(e),uy(s)):s.Va.set("Unknown")}async function hI(s,e,n){if(s.Va.set("Online"),e instanceof w_&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,h),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){lt(Po,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ud(s,i)}else if(e instanceof wd?s.da.Xe(e):e instanceof x_?s.da.st(e):s.da.tt(e),!n.isEqual(zt.min()))try{const i=await M_(s.localStore);n.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=u.Ia.get(y);x&&u.Ia.set(y,x.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const x=u.Ia.get(g);if(!x)return;u.Ia.set(g,x.withResumeToken(zs.EMPTY_BYTE_STRING,x.snapshotVersion)),O_(u,g);const k=new Bi(x.target,g,y,x.sequenceNumber);cy(u,k)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){lt(Po,"Failed to raise snapshot:",i),await Ud(s,i)}}async function Ud(s,e,n){if(!Kl(e))throw e;s.Ea.add(1),await Nu(s),s.Va.set("Offline"),n||(n=()=>M_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{lt(Po,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await df(s)}))}function B_(s,e){return e().catch((n=>Ud(s,n,e)))}async function ff(s){const e=$t(s),n=Yi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Yg;for(;dI(e);)try{const l=await WA(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,fI(e,l)}catch(l){await Ud(e,l)}U_(e)&&z_(e)}function dI(s){return Uo(s)&&s.Ta.length<10}function fI(s,e){s.Ta.push(e);const n=Yi(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function U_(s){return Uo(s)&&!Yi(s).x_()&&s.Ta.length>0}function z_(s){Yi(s).start()}async function mI(s){Yi(s).ra()}async function pI(s){const e=Yi(s);for(const n of s.Ta)e.ea(n.mutations)}async function gI(s,e,n){const i=s.Ta.shift(),l=ty.from(i,e,n);await B_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await ff(s)}async function yI(s,e){e&&Yi(s).Y_&&await(async function(i,l){if((function(h){return XR(h)&&h!==Te.ABORTED})(l.code)){const u=i.Ta.shift();Yi(i).B_(),await B_(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await ff(i)}})(s,e),U_(s)&&z_(s)}async function Bx(s,e){const n=$t(s);n.asyncQueue.verifyOperationInProgress(),lt(Po,"RemoteStore received new credentials");const i=Uo(n);n.Ea.add(3),await Nu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await df(n)}async function vI(s,e){const n=$t(s);e?(n.Ea.delete(2),await df(n)):e||(n.Ea.add(2),await Nu(n),n.Va.set("Unknown"))}function Ql(s){return s.ma||(s.ma=(function(n,i,l){const u=$t(n);return u.sa(),new tI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:lI.bind(null,s),Yo:cI.bind(null,s),t_:uI.bind(null,s),J_:hI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),hy(s)?uy(s):s.Va.set("Unknown")):(await s.ma.stop(),V_(s))}))),s.ma}function Yi(s){return s.fa||(s.fa=(function(n,i,l){const u=$t(n);return u.sa(),new nI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:mI.bind(null,s),t_:yI.bind(null,s),ta:pI.bind(null,s),na:gI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await ff(s)):(await s.fa.stop(),s.Ta.length>0&&(lt(Po,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class dy{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Qa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const h=Date.now()+i,p=new dy(e,n,h,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(s,e){if(ti("AsyncQueue",`${e}: ${s}`),Kl(s))return new Ze(Te.UNAVAILABLE,`${e}: ${s}`);throw s}class Ml{static emptySet(e){return new Ml(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Et.comparator(n.key,i.key):(n,i)=>Et.comparator(n.key,i.key),this.keyedMap=Gc(),this.sortedSet=new ss(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ml;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class Ux{constructor(){this.ga=new ss(Et.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Lt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class zl{constructor(e,n,i,l,u,h,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,l,u){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new zl(e,n,Ml.emptySet(n),h,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}class bI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class xI{constructor(){this.queries=zx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=$t(n),u=l.queries;l.queries=zx(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Ze(Te.ABORTED,"Firestore shutting down"))}}function zx(){return new Bo((s=>a_(s)),rf)}async function my(s,e){const n=$t(s);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new bI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(h){const p=fy(h,`Initialization of query '${El(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&gy(n)}async function py(s,e){const n=$t(s),i=e.query;let l=3;const u=n.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function wI(s,e){const n=$t(s);let i=!1;for(const l of e){const u=l.query,h=n.queries.get(u);if(h){for(const p of h.ba)p.Fa(l)&&(i=!0);h.wa=l}}i&&gy(n)}function _I(s,e,n){const i=$t(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(n);i.queries.delete(e)}function gy(s){s.Ca.forEach((e=>{e.next()}))}var bg,Fx;(Fx=bg||(bg={})).Ma="default",Fx.Cache="cache";class yy{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new zl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bg.Cache}}class F_{constructor(e){this.key=e}}class q_{constructor(e){this.key=e}}class kI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ln(),this.mutatedKeys=ln(),this.eu=i_(e),this.tu=new Ml(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new Ux,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((x,k)=>{const j=l.get(x),O=af(this.query,k)?k:null,K=!!j&&this.mutatedKeys.has(j.key),U=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let V=!1;j&&O?j.data.isEqual(O.data)?K!==U&&(i.track({type:3,doc:O}),V=!0):this.su(j,O)||(i.track({type:2,doc:O}),V=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(p=!0)):!j&&O?(i.track({type:0,doc:O}),V=!0):j&&!O&&(i.track({type:1,doc:j}),V=!0,(g||y)&&(p=!0)),V&&(O?(h=h.add(O),u=U?u.add(x):u.delete(x)):(h=h.delete(x),u=u.delete(x)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),u=u.delete(x.key),i.track({type:1,doc:x})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((x,k)=>(function(O,K){const U=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lt(20277,{Vt:V})}};return U(O)-U(K)})(x.type,k.type)||this.eu(x.doc,k.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,h.length!==0||y?{snapshot:new zl(this.query,e.tu,u,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ux,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ln(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new q_(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new F_(i))})),n}cu(e){this.Za=e.ks,this.Ya=ln();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const vy="SyncEngine";class TI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class EI{constructor(e){this.key=e,this.hu=!1}}class jI{constructor(e,n,i,l,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Bo((p=>a_(p)),rf),this.Iu=new Map,this.Eu=new Set,this.Ru=new ss(Et.comparator),this.Au=new Map,this.Vu=new ry,this.du={},this.mu=new Map,this.fu=Ul.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function SI(s,e,n=!0){const i=Y_(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await H_(i,e,n,!0),l}async function NI(s,e){const n=Y_(s);await H_(n,e,!0,!1)}async function H_(s,e,n,i){const l=await GA(s.localStore,_a(e)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await CI(s,e,u,h==="current",l.resumeToken)),s.isPrimaryClient&&n&&L_(s.remoteStore,l),p}async function CI(s,e,n,i,l){s.pu=(k,j,O)=>(async function(U,V,te,X){let fe=V.view.ru(te);fe.Ss&&(fe=await Dx(U.localStore,V.query,!1).then((({documents:A})=>V.view.ru(A,fe))));const je=X&&X.targetChanges.get(V.targetId),Ue=X&&X.targetMismatches.get(V.targetId)!=null,Oe=V.view.applyChanges(fe,U.isPrimaryClient,je,Ue);return Hx(U,V.targetId,Oe.au),Oe.snapshot})(s,k,j,O);const u=await Dx(s.localStore,e,!0),h=new kI(e,u.ks),p=h.ru(u.documents),g=Su.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),y=h.applyChanges(p,s.isPrimaryClient,g);Hx(s,n,y.au);const x=new TI(e,n,h);return s.Tu.set(e,x),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function RI(s,e,n){const i=$t(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((h=>!rf(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await yg(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&ly(i.remoteStore,l.targetId),xg(i,l.targetId)})).catch(Gl)):(xg(i,l.targetId),await yg(i.localStore,l.targetId,!0))}async function AI(s,e){const n=$t(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),ly(n.remoteStore,i.targetId))}async function II(s,e,n){const i=BI(s);try{const l=await(function(h,p){const g=$t(h),y=bt.now(),x=p.reduce(((O,K)=>O.add(K.key)),ln());let k,j;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let K=ni(),U=ln();return g.xs.getEntries(O,x).next((V=>{K=V,K.forEach(((te,X)=>{X.isValidDocument()||(U=U.add(te))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,K))).next((V=>{k=V;const te=[];for(const X of p){const fe=WR(X,k.get(X.key).overlayedDocument);fe!=null&&te.push(new eo(X.key,fe,Xw(fe.value.mapValue),ar.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,te,p)})).next((V=>{j=V;const te=V.applyToLocalDocumentSet(k,U);return g.documentOverlayCache.saveOverlays(O,V.batchId,te)}))})).then((()=>({batchId:j.batchId,changes:l_(k)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(h,p,g){let y=h.du[h.currentUser.toKey()];y||(y=new ss(on)),y=y.insert(p,g),h.du[h.currentUser.toKey()]=y})(i,l.batchId,n),await Cu(i,l.changes),await ff(i.remoteStore)}catch(l){const u=fy(l,"Failed to persist write");n.reject(u)}}async function $_(s,e){const n=$t(s);try{const i=await HA(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=n.Au.get(u);h&&(En(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?En(h.hu,14607):l.removedDocuments.size>0&&(En(h.hu,42227),h.hu=!1))})),await Cu(n,i,e)}catch(i){await Gl(i)}}function qx(s,e,n){const i=$t(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(h,p){const g=$t(h);g.onlineState=p;let y=!1;g.queries.forEach(((x,k)=>{for(const j of k.ba)j.va(p)&&(y=!0)})),y&&gy(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function MI(s,e,n){const i=$t(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let h=new ss(Et.comparator);h=h.insert(u,Qs.newNoDocument(u,zt.min()));const p=ln().add(u),g=new uf(zt.min(),new Map,new ss(on),h,p);await $_(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),by(i)}else await yg(i.localStore,e,!1).then((()=>xg(i,e,n))).catch(Gl)}async function DI(s,e){const n=$t(s),i=e.batch.batchId;try{const l=await qA(n.localStore,e);G_(n,i,null),W_(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Cu(n,l)}catch(l){await Gl(l)}}async function PI(s,e,n){const i=$t(s);try{const l=await(function(h,p){const g=$t(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,p).next((k=>(En(k!==null,37113),x=k.keys(),g.mutationQueue.removeMutationBatch(y,k)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(i.localStore,e);G_(i,e,n),W_(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Cu(i,l)}catch(l){await Gl(l)}}function W_(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function G_(s,e,n){const i=$t(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function xg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||K_(s,i)}))}function K_(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(ly(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),by(s))}function Hx(s,e,n){for(const i of n)i instanceof F_?(s.Vu.addReference(i.key,e),LI(s,i)):i instanceof q_?(lt(vy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||K_(s,i.key)):Lt(19791,{wu:i})}function LI(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(lt(vy,"New document in limbo: "+n),s.Eu.add(i),by(s))}function by(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Et(qn.fromString(e)),i=s.fu.next();s.Au.set(i,new EI(n)),s.Ru=s.Ru.insert(n,i),L_(s.remoteStore,new Bi(_a(sf(n.path)),i,"TargetPurposeLimboResolution",ef.ce))}}async function Cu(s,e,n){const i=$t(s),l=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const x=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){l.push(y);const x=iy.Es(g.targetId,y);u.push(x)}})))})),await Promise.all(h),i.Pu.J_(l),await(async function(g,y){const x=$t(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>Ae.forEach(y,(j=>Ae.forEach(j.Ts,(O=>x.persistence.referenceDelegate.addReference(k,j.targetId,O))).next((()=>Ae.forEach(j.Is,(O=>x.persistence.referenceDelegate.removeReference(k,j.targetId,O)))))))))}catch(k){if(!Kl(k))throw k;lt(oy,"Failed to update sequence numbers: "+k)}for(const k of y){const j=k.targetId;if(!k.fromCache){const O=x.vs.get(j),K=O.snapshotVersion,U=O.withLastLimboFreeSnapshotVersion(K);x.vs=x.vs.insert(j,U)}}})(i.localStore,u))}async function OI(s,e){const n=$t(s);if(!n.currentUser.isEqual(e)){lt(vy,"User change. New user:",e.toKey());const i=await I_(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ze(Te.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cu(n,i.Ns)}}function VI(s,e){const n=$t(s),i=n.Au.get(e);if(i&&i.hu)return ln().add(i.key);{let l=ln();const u=n.Iu.get(e);if(!u)return l;for(const h of u){const p=n.Tu.get(h);l=l.unionWith(p.view.nu)}return l}}function Y_(s){const e=$t(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=$_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MI.bind(null,e),e.Pu.J_=wI.bind(null,e.eventManager),e.Pu.yu=_I.bind(null,e.eventManager),e}function BI(s){const e=$t(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PI.bind(null,e),e}class zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return FA(this.persistence,new BA,e.initialUser,this.serializer)}Cu(e){return new A_(ay.Vi,this.serializer)}Du(e){return new YA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zd.provider={build:()=>new zd};class UI extends zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){En(this.persistence.referenceDelegate instanceof Bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new TA(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new A_((i=>Bd.Vi(i,n)),this.serializer)}}class wg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=OI.bind(null,this.syncEngine),await vI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xI})()}createDatastore(e){const n=hf(e.databaseInfo.databaseId),i=eI(e.databaseInfo);return aI(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,h,p){return new oI(i,l,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>qx(this.syncEngine,n,0)),(function(){return Ox.v()?new Ox:new QA})())}createSyncEngine(e,n){return(function(l,u,h,p,g,y,x){const k=new jI(l,u,h,p,g,y);return x&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=$t(n);lt(Po,"RemoteStore shutting down."),i.Ea.add(5),await Nu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}wg.provider={build:()=>new wg};class xy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Qi="FirestoreClient";class zI{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=Ys.UNAUTHENTICATED,this.clientId=Kg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{lt(Qi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(lt(Qi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=fy(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Ip(s,e){s.asyncQueue.verifyOperationInProgress(),lt(Qi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await I_(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function $x(s,e){s.asyncQueue.verifyOperationInProgress();const n=await FI(s);lt(Qi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>Bx(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>Bx(e.remoteStore,l))),s._onlineComponents=e}async function FI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){lt(Qi,"Using user provided OfflineComponentProvider");try{await Ip(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===Te.FAILED_PRECONDITION||l.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Ll("Error using user provided cache. Falling back to memory cache: "+n),await Ip(s,new zd)}}else lt(Qi,"Using default OfflineComponentProvider"),await Ip(s,new UI(void 0));return s._offlineComponents}async function Q_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(lt(Qi,"Using user provided OnlineComponentProvider"),await $x(s,s._uninitializedComponentsProvider._online)):(lt(Qi,"Using default OnlineComponentProvider"),await $x(s,new wg))),s._onlineComponents}function qI(s){return Q_(s).then((e=>e.syncEngine))}async function Fd(s){const e=await Q_(s),n=e.eventManager;return n.onListen=SI.bind(null,e.syncEngine),n.onUnlisten=RI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AI.bind(null,e.syncEngine),n}function HI(s,e,n,i){const l=new xy(i),u=new yy(e,l,n);return s.asyncQueue.enqueueAndForget((async()=>my(await Fd(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>py(await Fd(s),u)))}}function $I(s,e,n={}){const i=new Qa;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const x=new xy({next:j=>{x.Nu(),h.enqueueAndForget((()=>py(u,k)));const O=j.docs.has(p);!O&&j.fromCache?y.reject(new Ze(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&j.fromCache&&g&&g.source==="server"?y.reject(new Ze(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(j)},error:j=>y.reject(j)}),k=new yy(sf(p.path),x,{includeMetadataChanges:!0,Ka:!0});return my(u,k)})(await Fd(s),s.asyncQueue,e,n,i))),i.promise}function WI(s,e,n={}){const i=new Qa;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const x=new xy({next:j=>{x.Nu(),h.enqueueAndForget((()=>py(u,k))),j.fromCache&&g.source==="server"?y.reject(new Ze(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(j)},error:j=>y.reject(j)}),k=new yy(p,x,{includeMetadataChanges:!0,Ka:!0});return my(u,k)})(await Fd(s),s.asyncQueue,e,n,i))),i.promise}function GI(s,e){const n=new Qa;return s.asyncQueue.enqueueAndForget((async()=>II(await qI(s),e,n))),n.promise}function X_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const KI="ComponentProvider",Wx=new Map;function YI(s,e,n,i,l){return new pR(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,X_(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const J_="firestore.googleapis.com",Gx=!0;class Kx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J_,this.ssl=Gx}else this.host=e.host,this.ssl=e.ssl??Gx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_A)throw new Ze(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ze(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ze(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ze(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mf{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new G4;switch(i.type){case"firstParty":return new X4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ze(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Wx.get(n);i&&(lt(KI,"Removing Datastore"),Wx.delete(n),i.terminate())})(this),Promise.resolve()}}function QI(s,e,n,i={}){s=rr(s,mf);const l=Xi(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(Ig(`https://${p}`),Mg("Firestore",!0)),u.host!==J_&&u.host!==p&&Ll("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!Ro(g,h)&&(s._setSettings(g),i.mockUserToken)){let y,x;if(typeof i.mockUserToken=="string")y=i.mockUserToken,x=Ys.MOCK_USER;else{y=W2(i.mockUserToken,s._app?.options.projectId);const k=i.mockUserToken.sub||i.mockUserToken.user_id;if(!k)throw new Ze(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Ys(k)}s._authCredentials=new K4(new Bw(y,x))}}class ai{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ai(this.firestore,e,this._query)}}class ls{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ls(this.firestore,e,this._key)}toJSON(){return{type:ls._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Eu(n,ls._jsonSchema))return new ls(e,i||null,new Et(qn.fromString(n.referencePath)))}}ls._jsonSchemaVersion="firestore/documentReference/1.0",ls._jsonSchema={type:Ts("string",ls._jsonSchemaVersion),referencePath:Ts("string")};class qi extends ai{constructor(e,n,i){super(e,n,sf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ls(this.firestore,null,new Et(e))}withConverter(e){return new qi(this.firestore,e,this._path)}}function Yt(s,e,...n){if(s=Un(s),Uw("collection","path",e),s instanceof mf){const i=qn.fromString(e,...n);return ox(i),new qi(s,null,i)}{if(!(s instanceof ls||s instanceof qi))throw new Ze(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(qn.fromString(e,...n));return ox(i),new qi(s.firestore,null,i)}}function Xe(s,e,...n){if(s=Un(s),arguments.length===1&&(e=Kg.newId()),Uw("doc","path",e),s instanceof mf){const i=qn.fromString(e,...n);return ix(i),new ls(s,null,new Et(i))}{if(!(s instanceof ls||s instanceof qi))throw new Ze(Te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(qn.fromString(e,...n));return ix(i),new ls(s.firestore,s instanceof qi?s.converter:null,new Et(i))}}const Yx="AsyncQueue";class Qx{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new D_(this,"async_queue_retry"),this._c=()=>{const i=Ap();i&&lt(Yx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Ap();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ap();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Qa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Kl(e))throw e;lt(Yx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ti("INTERNAL UNHANDLED ERROR: ",Xx(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=dy.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Lt(47125,{Pc:Xx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Xx(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class ja extends mf{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new Qx,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qx(e),this._firestoreClient=void 0,await e}}}function XI(s,e){const n=typeof s=="object"?s:Og(),i=typeof s=="string"?s:Dd,l=Yd(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=q2("firestore");u&&QI(l,...u)}return l}function Ru(s){if(s._terminated)throw new Ze(Te.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||JI(s),s._firestoreClient}function JI(s){const e=s._freezeSettings(),n=YI(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new zI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class Br{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Br(zs.fromBase64String(e))}catch(n){throw new Ze(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Br(zs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Br._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,Br._jsonSchema))return Br.fromBase64String(e.bytes)}}Br._jsonSchemaVersion="firestore/bytes/1.0",Br._jsonSchema={type:Ts("string",Br._jsonSchemaVersion),bytes:Ts("string")};class pf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ze(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Us(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Au{constructor(e){this._methodName=e}}class Ta{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ze(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ze(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return on(this._lat,e._lat)||on(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ta._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Ta._jsonSchema))return new Ta(e.latitude,e.longitude)}}Ta._jsonSchemaVersion="firestore/geoPoint/1.0",Ta._jsonSchema={type:Ts("string",Ta._jsonSchemaVersion),latitude:Ts("number"),longitude:Ts("number")};class ea{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ea._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,ea._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ea(e.vectorValues);throw new Ze(Te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ea._jsonSchemaVersion="firestore/vectorValue/1.0",ea._jsonSchema={type:Ts("string",ea._jsonSchemaVersion),vectorValues:Ts("object")};const ZI=/^__.*__$/;class eM{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new eo(e,this.data,this.fieldMask,n,this.fieldTransforms):new ju(e,this.data,n,this.fieldTransforms)}}class Z_{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new eo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ek(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lt(40011,{dataSource:s})}}class wy{constructor(e,n,i,l,u,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new wy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return qd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(ek(this.dataSource)&&ZI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class tM{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||hf(e)}createContext(e,n,i,l=!1){return new wy({dataSource:e,methodName:n,targetDoc:i,path:Us.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iu(s){const e=s._freezeSettings(),n=hf(s._databaseId);return new tM(s._databaseId,!!e.ignoreUndefinedProperties,n)}function _y(s,e,n,i,l,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);Ey("Data must be an object, but it was:",h,i);const p=sk(i,h);let g,y;if(u.merge)g=new jr(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const x=[];for(const k of u.mergeFields){const j=Lo(e,k,n);if(!h.contains(j))throw new Ze(Te.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);ik(x,j)||x.push(j)}g=new jr(x),y=h.fieldTransforms.filter((k=>g.covers(k.field)))}else g=null,y=h.fieldTransforms;return new eM(new fr(p),g,y)}class gf extends Au{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}class ky extends Au{_toFieldTransform(e){return new g_(e.path,new fu)}isEqual(e){return e instanceof ky}}class Ty extends Au{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new gu(e.serializer,h_(e.serializer,this.Vc));return new g_(e.path,n)}isEqual(e){return e instanceof Ty&&this.Vc===e.Vc}}function tk(s,e,n,i){const l=s.createContext(1,e,n);Ey("Data must be an object, but it was:",l,i);const u=[],h=fr.empty();Zi(i,((g,y)=>{const x=ak(e,g,n);y=Un(y);const k=l.childContextForFieldPath(x);if(y instanceof gf)u.push(x);else{const j=Mu(y,k);j!=null&&(u.push(x),h.set(x,j))}}));const p=new jr(u);return new Z_(h,p,l.fieldTransforms)}function nk(s,e,n,i,l,u){const h=s.createContext(1,e,n),p=[Lo(e,i,n)],g=[l];if(u.length%2!=0)throw new Ze(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)p.push(Lo(e,u[j])),g.push(u[j+1]);const y=[],x=fr.empty();for(let j=p.length-1;j>=0;--j)if(!ik(y,p[j])){const O=p[j];let K=g[j];K=Un(K);const U=h.childContextForFieldPath(O);if(K instanceof gf)y.push(O);else{const V=Mu(K,U);V!=null&&(y.push(O),x.set(O,V))}}const k=new jr(y);return new Z_(x,k,h.fieldTransforms)}function nM(s,e,n,i=!1){return Mu(n,s.createContext(i?4:3,e))}function Mu(s,e){if(rk(s=Un(s)))return Ey("Unsupported field value:",e,s),sk(s,e);if(s instanceof Au)return(function(i,l){if(!ek(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let h=0;for(const p of i){let g=Mu(p,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=Un(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return h_(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=bt.fromDate(i);return{timestampValue:Vd(l.serializer,u)}}if(i instanceof bt){const u=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vd(l.serializer,u)}}if(i instanceof Ta)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Br)return{bytesValue:__(l.serializer,i._byteString)};if(i instanceof ls){const u=l.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:sy(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof ea)return(function(h,p){const g=h instanceof ea?h.toArray():h;return{mapValue:{fields:{[Yw]:{stringValue:Qw},[Pd]:{arrayValue:{values:g.map((x=>{if(typeof x!="number")throw p.createError("VectorValues must only contain numeric values.");return ey(p.serializer,x)}))}}}}}})(i,l);if(C_(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Zd(i)}`)})(s,e)}function sk(s,e){const n={};return qw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zi(s,((i,l)=>{const u=Mu(l,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function rk(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof bt||s instanceof Ta||s instanceof Br||s instanceof ls||s instanceof Au||s instanceof ea||C_(s))}function Ey(s,e,n){if(!rk(n)||!zw(n)){const i=Zd(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function Lo(s,e,n){if((e=Un(e))instanceof pf)return e._internalPath;if(typeof e=="string")return ak(s,e);throw qd("Field path arguments must be of type string or ",s,!1,void 0,n)}const sM=new RegExp("[~\\*/\\[\\]]");function ak(s,e,n){if(e.search(sM)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new pf(...e.split("."))._internalPath}catch{throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function qd(s,e,n,i,l){const u=i&&!i.isEmpty(),h=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${l}`),g+=")"),new Ze(Te.INVALID_ARGUMENT,p+s+g)}function ik(s,e){return s.some((n=>n.isEqual(e)))}class rM{convertValue(e,n="none"){switch(Ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ps(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Lt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Zi(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[Pd].arrayValue?.values?.map((i=>ps(i.doubleValue)));return new ea(n)}convertGeoPoint(e){return new Ta(ps(e.latitude),ps(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=nf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(cu(e));default:return null}}convertTimestamp(e){const n=Wi(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=qn.fromString(e);En(N_(i),9688,{name:e});const l=new uu(i.get(1),i.get(3)),u=new Et(i.popFirst(5));return l.isEqual(n)||ti(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class jy extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Br(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ls(this.firestore,null,n)}}function Ur(){return new ky("serverTimestamp")}function Dl(s){return new Ty("increment",s)}const Jx="@firebase/firestore",Zx="4.10.0";function e2(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class ok{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ls(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Lo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aM extends ok{data(){return super.data()}}function lk(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ze(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sy{}class Ny extends Sy{}function An(s,e,...n){let i=[];e instanceof Sy&&i.push(e),i=i.concat(n),(function(u){const h=u.filter((g=>g instanceof Cy)).length,p=u.filter((g=>g instanceof yf)).length;if(h>1||h>0&&p>0)throw new Ze(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class yf extends Ny{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new yf(e,n,i)}_apply(e){const n=this._parse(e);return ck(e._query,n),new ai(e.firestore,e.converter,dg(e._query,n))}_parse(e){const n=Iu(e.firestore);return(function(u,h,p,g,y,x,k){let j;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new Ze(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){n2(k,x);const K=[];for(const U of k)K.push(t2(g,u,U));j={arrayValue:{values:K}}}else j=t2(g,u,k)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||n2(k,x),j=nM(p,h,k,x==="in"||x==="not-in");return ks.create(y,x,j)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vn(s,e,n){const i=e,l=Lo("where",s);return yf._create(l,i,n)}class Cy extends Sy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cy(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:na.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let h=l;const p=u.getFlattenedFilters();for(const g of p)ck(h,g),h=dg(h,g)})(e._query,n),new ai(e.firestore,e.converter,dg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ry extends Ny{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ry(e,n)}_apply(e){const n=(function(l,u,h){if(l.startAt!==null)throw new Ze(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Ze(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new du(u,h)})(e._query,this._field,this._direction);return new ai(e.firestore,e.converter,MR(e._query,n))}}function Hd(s,e="asc"){const n=e,i=Lo("orderBy",s);return Ry._create(i,n)}class Ay extends Ny{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Ay(e,n,i)}_apply(e){return new ai(e.firestore,e.converter,Od(e._query,this._limit,this._limitType))}}function $d(s){return rR("limit",s),Ay._create("limit",s,"F")}function t2(s,e,n){if(typeof(n=Un(n))=="string"){if(n==="")throw new Ze(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!r_(e)&&n.indexOf("/")!==-1)throw new Ze(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(qn.fromString(n));if(!Et.isDocumentKey(i))throw new Ze(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return px(s,new Et(i))}if(n instanceof ls)return px(s,n._key);throw new Ze(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zd(n)}.`)}function n2(s,e){if(!Array.isArray(s)||s.length===0)throw new Ze(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ck(s,e){const n=(function(l,u){for(const h of l)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ze(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Iy(s,e,n){let i;return i=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,i}class Yc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends ok{constructor(e,n,i,l,u,h){super(e,n,i,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Lo("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=So._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}So._jsonSchemaVersion="firestore/documentSnapshot/1.0",So._jsonSchema={type:Ts("string",So._jsonSchemaVersion),bundleSource:Ts("string","DocumentSnapshot"),bundleName:Ts("string"),bundle:Ts("string")};class _d extends So{data(e={}){return super.data(e)}}class No{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Yc(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new _d(this._firestore,this._userDataWriter,i.key,i,new Yc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ze(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((p=>{const g=new _d(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Yc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new _d(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Yc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,x=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),x=h.indexOf(p.doc.key)),{type:iM(p.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ze(Te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=No._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Kg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iM(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lt(61501,{type:s})}}No._jsonSchemaVersion="firestore/querySnapshot/1.0",No._jsonSchema={type:Ts("string",No._jsonSchemaVersion),bundleSource:Ts("string","QuerySnapshot"),bundleName:Ts("string"),bundle:Ts("string")};class oM{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Iu(e)}set(e,n,i){this._verifyNotCommitted();const l=Mp(e,this._firestore),u=Iy(l.converter,n,i),h=_y(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,i);return this._mutations.push(h.toMutation(l._key,ar.none())),this}update(e,n,i,...l){this._verifyNotCommitted();const u=Mp(e,this._firestore);let h;return h=typeof(n=Un(n))=="string"||n instanceof pf?nk(this._dataReader,"WriteBatch.update",u._key,n,i,l):tk(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Mp(e,this._firestore);return this._mutations=this._mutations.concat(new cf(n._key,ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze(Te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mp(s,e){if((s=Un(s)).firestore!==e)throw new Ze(Te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Kn(s){s=rr(s,ls);const e=rr(s.firestore,ja),n=Ru(e);return $I(n,s._key).then((i=>uk(e,s,i)))}function _n(s){s=rr(s,ai);const e=rr(s.firestore,ja),n=Ru(e),i=new jy(e);return lk(s._query),WI(n,s._query).then((l=>new No(e,i,s,l)))}function On(s,e,n){s=rr(s,ls);const i=rr(s.firestore,ja),l=Iy(s.converter,e,n),u=Iu(i);return Du(i,[_y(u,"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,ar.none())])}function To(s,e,n,...i){s=rr(s,ls);const l=rr(s.firestore,ja),u=Iu(l);let h;return h=typeof(e=Un(e))=="string"||e instanceof pf?nk(u,"updateDoc",s._key,e,n,i):tk(u,"updateDoc",s._key,e),Du(l,[h.toMutation(s._key,ar.exists(!0))])}function mr(s){return Du(rr(s.firestore,ja),[new cf(s._key,ar.none())])}function Xa(s,e){const n=rr(s.firestore,ja),i=Xe(s),l=Iy(s.converter,e),u=Iu(s.firestore);return Du(n,[_y(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,ar.exists(!1))]).then((()=>i))}function lM(s,...e){s=Un(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||e2(e[i])||(n=e[i++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(e2(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,h,p;if(s instanceof ls)h=rr(s.firestore,ja),p=sf(s._key.path),u={next:y=>{e[i]&&e[i](uk(h,s,y))},error:e[i+1],complete:e[i+2]};else{const y=rr(s,ai);h=rr(y.firestore,ja),p=y._query;const x=new jy(h);u={next:k=>{e[i]&&e[i](new No(h,x,y,k))},error:e[i+1],complete:e[i+2]},lk(s._query)}const g=Ru(h);return HI(g,p,l,u)}function Du(s,e){const n=Ru(s);return GI(n,e)}function uk(s,e,n){const i=n.docs.get(e._key),l=new jy(s);return new So(s,l,e._key,i,new Yc(n.hasPendingWrites,n.fromCache),e.converter)}function s2(s){return s=rr(s,ja),Ru(s),new oM(s,(e=>Du(s,e)))}(function(e,n=!0){W4(Vo),Ao(new Hi("firestore",((i,{instanceIdentifier:l,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new ja(new Y4(i.getProvider("auth-internal")),new J4(h,i.getProvider("app-check-internal")),gR(h,l),h);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ba(Jx,Zx,e),ba(Jx,Zx,"esm2020")})();var cM="firebase",uM="12.8.0";ba(cM,uM,"app");const hk="firebasestorage.googleapis.com",dk="storageBucket",hM=120*1e3,dM=600*1e3;class us extends Na{constructor(e,n,i=0){super(Dp(e),`Firebase Storage: ${n} (${Dp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,us.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var cs;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(cs||(cs={}));function Dp(s){return"storage/"+s}function My(){const s="An unknown error occurred, please check the error payload for server response.";return new us(cs.UNKNOWN,s)}function fM(s){return new us(cs.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function mM(s){return new us(cs.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pM(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new us(cs.UNAUTHENTICATED,s)}function gM(){return new us(cs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yM(s){return new us(cs.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function vM(){return new us(cs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bM(){return new us(cs.CANCELED,"User canceled the upload/download.")}function xM(s){return new us(cs.INVALID_URL,"Invalid URL '"+s+"'.")}function wM(s){return new us(cs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function _M(){return new us(cs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dk+"' property when initializing the app?")}function kM(){return new us(cs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function TM(){return new us(cs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function EM(s){return new us(cs.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _g(s){return new us(cs.INVALID_ARGUMENT,s)}function fk(){return new us(cs.APP_DELETED,"The Firebase app was deleted.")}function jM(s){return new us(cs.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nu(s,e){return new us(cs.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Uc(s){throw new us(cs.INTERNAL_ERROR,"Internal error: "+s)}class sr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=sr.makeFromUrl(e,n)}catch{return new sr(e,"")}if(i.path==="")return i;throw wM(e)}static makeFromUrl(e,n){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(je){je.path.charAt(je.path.length-1)==="/"&&(je.path_=je.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+l+h,"i"),g={bucket:1,path:3};function y(je){je.path_=decodeURIComponent(je.path)}const x="v[A-Za-z0-9_]+",k=n.replace(/[.]/g,"\\."),j="(/([^?#]*).*)?$",O=new RegExp(`^https?://${k}/${x}/b/${l}/o${j}`,"i"),K={bucket:1,path:3},U=n===hk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",te=new RegExp(`^https?://${U}/${l}/${V}`,"i"),fe=[{regex:p,indices:g,postModify:u},{regex:O,indices:K,postModify:y},{regex:te,indices:{bucket:1,path:2},postModify:y}];for(let je=0;je<fe.length;je++){const Ue=fe[je],Oe=Ue.regex.exec(e);if(Oe){const A=Oe[Ue.indices.bucket];let E=Oe[Ue.indices.path];E||(E=""),i=new sr(A,E),Ue.postModify(i);break}}if(i==null)throw xM(e);return i}}class SM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function NM(s,e,n){let i=1,l=null,u=null,h=!1,p=0;function g(){return p===2}let y=!1;function x(...V){y||(y=!0,e.apply(null,V))}function k(V){l=setTimeout(()=>{l=null,s(O,g())},V)}function j(){u&&clearTimeout(u)}function O(V,...te){if(y){j();return}if(V){j(),x.call(null,V,...te);return}if(g()||h){j(),x.call(null,V,...te);return}i<64&&(i*=2);let fe;p===1?(p=2,fe=0):fe=(i+Math.random())*1e3,k(fe)}let K=!1;function U(V){K||(K=!0,j(),!y&&(l!==null?(V||(p=2),clearTimeout(l),k(0)):V||(p=1)))}return k(0),u=setTimeout(()=>{h=!0,U(!0)},n),U}function CM(s){s(!1)}function RM(s){return s!==void 0}function AM(s){return typeof s=="object"&&!Array.isArray(s)}function Dy(s){return typeof s=="string"||s instanceof String}function r2(s){return Py()&&s instanceof Blob}function Py(){return typeof Blob<"u"}function kg(s,e,n,i){if(i<e)throw _g(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw _g(`Invalid value for '${s}'. Expected ${n} or less.`)}function vf(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function mk(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);n=n+l+"&"}return n=n.slice(0,-1),n}var Co;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Co||(Co={}));function IM(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class MM{constructor(e,n,i,l,u,h,p,g,y,x,k,j=!0,O=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=k,this.retry=j,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,U)=>{this.resolve_=K,this.reject_=U,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new sd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===Co.NO_ERROR,g=u.getStatus();if(!p||IM(g,this.additionalRetryCodes_)&&this.retry){const x=u.getErrorCode()===Co.ABORT;i(!1,new sd(!1,null,x));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new sd(y,u))})},n=(i,l)=>{const u=this.resolve_,h=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());RM(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=My();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(l.canceled){const g=this.appDelete_?fk():bM();h(g)}else{const g=vM();h(g)}};this.canceled_?n(!1,new sd(!1,null,!0)):this.backoffId_=NM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&CM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class sd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function DM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function PM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function LM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function OM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function VM(s,e,n,i,l,u,h=!0,p=!1){const g=mk(s.urlParams),y=s.url+g,x=Object.assign({},s.headers);return LM(x,e),DM(x,n),PM(x,u),OM(x,i),new MM(y,s.method,x,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,h,p)}function BM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UM(...s){const e=BM();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(Py())return new Blob(s);throw new us(cs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function zM(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function FM(s){if(typeof atob>"u")throw EM("base-64");return atob(s)}const va={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pp{constructor(e,n){this.data=e,this.contentType=n||null}}function qM(s,e){switch(s){case va.RAW:return new Pp(pk(e));case va.BASE64:case va.BASE64URL:return new Pp(gk(s,e));case va.DATA_URL:return new Pp($M(e),WM(e))}throw My()}function pk(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++n);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function HM(s){let e;try{e=decodeURIComponent(s)}catch{throw nu(va.DATA_URL,"Malformed data URL.")}return pk(e)}function gk(s,e){switch(s){case va.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw nu(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case va.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw nu(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FM(e)}catch(l){throw l.message.includes("polyfill")?l:nu(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i}class yk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw nu(va.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=GM(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function $M(s){const e=new yk(s);return e.base64?gk(va.BASE64,e.rest):HM(e.rest)}function WM(s){return new yk(s).contentType}function GM(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Vi{constructor(e,n){let i=0,l="";r2(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(r2(this.data_)){const i=this.data_,l=zM(i,e,n);return l===null?null:new Vi(l)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Vi(i,!0)}}static getBlob(...e){if(Py()){const n=e.map(i=>i instanceof Vi?i.data_:i);return new Vi(UM.apply(null,n))}else{const n=e.map(h=>Dy(h)?qM(va.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const l=new Uint8Array(i);let u=0;return n.forEach(h=>{for(let p=0;p<h.length;p++)l[u++]=h[p]}),new Vi(l,!0)}}uploadData(){return this.data_}}function Ly(s){let e;try{e=JSON.parse(s)}catch{return null}return AM(e)?e:null}function KM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function YM(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function vk(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function QM(s,e){return e}class nr{constructor(e,n,i,l){this.server=e,this.local=n||e,this.writable=!!i,this.xform=l||QM}}let rd=null;function XM(s){return!Dy(s)||s.length<2?s:vk(s)}function bk(){if(rd)return rd;const s=[];s.push(new nr("bucket")),s.push(new nr("generation")),s.push(new nr("metageneration")),s.push(new nr("name","fullPath",!0));function e(u,h){return XM(h)}const n=new nr("name");n.xform=e,s.push(n);function i(u,h){return h!==void 0?Number(h):h}const l=new nr("size");return l.xform=i,s.push(l),s.push(new nr("timeCreated")),s.push(new nr("updated")),s.push(new nr("md5Hash",null,!0)),s.push(new nr("cacheControl",null,!0)),s.push(new nr("contentDisposition",null,!0)),s.push(new nr("contentEncoding",null,!0)),s.push(new nr("contentLanguage",null,!0)),s.push(new nr("contentType",null,!0)),s.push(new nr("metadata","customMetadata",!0)),rd=s,rd}function JM(s,e){function n(){const i=s.bucket,l=s.fullPath,u=new sr(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function ZM(s,e,n){const i={};i.type="file";const l=n.length;for(let u=0;u<l;u++){const h=n[u];i[h.local]=h.xform(i,e[h.server])}return JM(i,s),i}function xk(s,e,n){const i=Ly(e);return i===null?null:ZM(s,i,n)}function e3(s,e,n,i){const l=Ly(e);if(l===null||!Dy(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(y=>{const x=s.bucket,k=s.fullPath,j="/b/"+h(x)+"/o/"+h(k),O=vf(j,n,i),K=mk({alt:"media",token:y});return O+K})[0]}function t3(s,e){const n={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}const a2="prefixes",i2="items";function n3(s,e,n){const i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[a2])for(const l of n[a2]){const u=l.replace(/\/$/,""),h=s._makeStorageReference(new sr(e,u));i.prefixes.push(h)}if(n[i2])for(const l of n[i2]){const u=s._makeStorageReference(new sr(e,l.name));i.items.push(u)}return i}function s3(s,e,n){const i=Ly(n);return i===null?null:n3(s,e,i)}class Oy{constructor(e,n,i,l){this.url=e,this.method=n,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Vy(s){if(!s)throw My()}function r3(s,e){function n(i,l){const u=xk(s,l,e);return Vy(u!==null),u}return n}function a3(s,e){function n(i,l){const u=s3(s,e,l);return Vy(u!==null),u}return n}function i3(s,e){function n(i,l){const u=xk(s,l,e);return Vy(u!==null),e3(u,l,s.host,s._protocol)}return n}function By(s){function e(n,i){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=gM():l=pM():n.getStatus()===402?l=mM(s.bucket):n.getStatus()===403?l=yM(s.path):l=i,l.status=n.getStatus(),l.serverResponse=i.serverResponse,l}return e}function o3(s){const e=By(s);function n(i,l){let u=e(i,l);return i.getStatus()===404&&(u=fM(s.path)),u.serverResponse=l.serverResponse,u}return n}function l3(s,e,n,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),i&&(u.pageToken=i),l&&(u.maxResults=l);const h=e.bucketOnlyServerUrl(),p=vf(h,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,x=new Oy(p,g,a3(s,e.bucket),y);return x.urlParams=u,x.errorHandler=By(e),x}function c3(s,e,n){const i=e.fullServerUrl(),l=vf(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new Oy(l,u,i3(s,n),h);return p.errorHandler=o3(e),p}function u3(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function h3(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=u3(null,e)),i}function d3(s,e,n,i,l){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let fe="";for(let je=0;je<2;je++)fe=fe+Math.random().toString().slice(2);return fe}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const y=h3(e,i,l),x=t3(y,n),k="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,j=`\r
--`+g+"--",O=Vi.getBlob(k,i,j);if(O===null)throw kM();const K={name:y.fullPath},U=vf(u,s.host,s._protocol),V="POST",te=s.maxUploadRetryTime,X=new Oy(U,V,r3(s,n),te);return X.urlParams=K,X.headers=h,X.body=O.uploadData(),X.errorHandler=By(e),X}class f3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Co.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Co.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Co.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,l,u){if(this.sent_)throw Uc("cannot .send() more than once");if(Xi(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class m3 extends f3{initXhr(){this.xhr_.responseType="text"}}function Uy(){return new m3}class Oo{constructor(e,n){this._service=e,n instanceof sr?this._location=n:this._location=sr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Oo(e,n)}get root(){const e=new sr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vk(this._location.path)}get storage(){return this._service}get parent(){const e=KM(this._location.path);if(e===null)return null;const n=new sr(this._location.bucket,e);return new Oo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jM(e)}}function p3(s,e,n){s._throwIfRoot("uploadBytes");const i=d3(s.storage,s._location,bk(),new Vi(e,!0),n);return s.storage.makeRequestWithTokens(i,Uy).then(l=>({metadata:l,ref:s}))}function g3(s){const e={prefixes:[],items:[]};return wk(s,e).then(()=>e)}async function wk(s,e,n){const l=await y3(s,{pageToken:n});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await wk(s,e,l.nextPageToken)}function y3(s,e){e!=null&&typeof e.maxResults=="number"&&kg("options.maxResults",1,1e3,e.maxResults);const n=e||{},i=l3(s.storage,s._location,"/",n.pageToken,n.maxResults);return s.storage.makeRequestWithTokens(i,Uy)}function v3(s){s._throwIfRoot("getDownloadURL");const e=c3(s.storage,s._location,bk());return s.storage.makeRequestWithTokens(e,Uy).then(n=>{if(n===null)throw TM();return n})}function b3(s,e){const n=YM(s._location.path,e),i=new sr(s._location.bucket,n);return new Oo(s.storage,i)}function x3(s){return/^[A-Za-z]+:\/\//.test(s)}function w3(s,e){return new Oo(s,e)}function _k(s,e){if(s instanceof zy){const n=s;if(n._bucket==null)throw _M();const i=new Oo(n,n._bucket);return e!=null?_k(i,e):i}else return e!==void 0?b3(s,e):s}function _3(s,e){if(e&&x3(e)){if(s instanceof zy)return w3(s,e);throw _g("To use ref(service, url), the first argument must be a Storage instance.")}else return _k(s,e)}function o2(s,e){const n=e?.[dk];return n==null?null:sr.makeFromBucketSpec(n,s)}function k3(s,e,n,i={}){s.host=`${e}:${n}`;const l=Xi(e);l&&(Ig(`https://${s.host}/b`),Mg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:W2(u,s.app.options.projectId))}class zy{constructor(e,n,i,l,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=hk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hM,this._maxUploadRetryTime=dM,this._requests=new Set,l!=null?this._bucket=sr.makeFromBucketSpec(l,this._host):this._bucket=o2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sr.makeFromBucketSpec(this._url,e):this._bucket=o2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Oo(this,e)}_makeRequest(e,n,i,l,u=!0){if(this._deleted)return new SM(fk());{const h=VM(e,this._appId,i,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,l).getPromise()}}const l2="@firebase/storage",c2="0.14.0";const kk="storage";function u2(s,e,n){return s=Un(s),p3(s,e,n)}function h2(s){return s=Un(s),g3(s)}function Pl(s){return s=Un(s),v3(s)}function Eo(s,e){return s=Un(s),_3(s,e)}function T3(s=Og(),e){s=Un(s);const i=Yd(s,kk).getImmediate({identifier:e}),l=q2("storage");return l&&E3(i,...l),i}function E3(s,e,n,i={}){k3(s,e,n,i)}function j3(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new zy(n,i,l,e,Vo)}function S3(){Ao(new Hi(kk,j3,"PUBLIC").setMultipleInstances(!0)),ba(l2,c2,""),ba(l2,c2,"esm2020")}S3();const Tk={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},Fy=Lg(Tk),zc=Aw(Fy),ke=XI(Fy),jo=T3(Fy),N3=Lg(Tk,"secondary"),zD=Aw(N3),C3="EYdciKDOi3UYBLk1u8hHams5tmO2",Ek=w.createContext();function qr(){return w.useContext(Ek)}function R3({children:s}){const[e,n]=w.useState(null),[i,l]=w.useState(!1),[u,h]=w.useState(!1),[p,g]=w.useState(null),[y,x]=w.useState(!0);w.useEffect(()=>DC(zc,async te=>{if(n(te),te)if(te.uid===C3)l(!0),h(!1),g(null);else{l(!1);try{const X=An(Yt(ke,"clients"),vn("uid","==",te.uid)),fe=await _n(X);if(fe.empty)h(!1),g(null);else{const je=fe.docs[0];h(!0),g({id:je.id,...je.data()})}}catch(X){console.error("Error fetching client data:",X),h(!1),g(null)}}else l(!1),h(!1),g(null);x(!1)}),[]);const U={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:V=>{g(te=>te&&{...te,...V})},login:async(V,te,X=!0)=>(await AC(zc,X?kw:Hg),await RC(zc,V,te)),logout:()=>PC(zc),resetPassword:V=>CC(zc,V),loading:y};return a.jsx(Ek.Provider,{value:U,children:s})}const jk=w.createContext();function Ca(){return w.useContext(jk)}function A3({children:s}){const[e,n]=w.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=w.useState(()=>localStorage.getItem("accent")||"red");w.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),w.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(jk.Provider,{value:p,children:s})}function I3(){const[s,e]=w.useState(""),[n,i]=w.useState(""),[l,u]=w.useState(!0),[h,p]=w.useState(""),[g,y]=w.useState(!1),[x,k]=w.useState(!1),[j,O]=w.useState(!1),{login:K,resetPassword:U,currentUser:V,isAdmin:te,isClient:X,clientData:fe,loading:je}=qr(),Ue=Js();if(w.useEffect(()=>{if(!je&&V){if(te)Ue("/dashboard");else if(X){const E=fe?.clientType;Ue(E==="core_buddy"?"/client/core-buddy":E==="circuit_vip"||E==="circuit_dropin"?"/client/circuit":"/client")}}},[je,V,te,X,fe,Ue]),je)return null;const Oe=async E=>{E.preventDefault(),p(""),y(!0);try{await K(s,n,l)}catch(R){p(R.message||"Failed to log in"),y(!1)}},A=async E=>{if(E.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await U(s.trim()),O(!0)}catch(R){R.code==="auth/user-not-found"?p("No account found with this email"):p(R.message||"Failed to send reset email")}y(!1)};return a.jsx("div",{className:"login-container",children:a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:x?"Reset Password":"Client Portal"})]}),h&&a.jsx("div",{className:"error-message",children:h}),j?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{k(!1),O(!1),p("")},children:"Back to Log In"})]}):x?a.jsxs("form",{onSubmit:A,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:E=>e(E.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:Oe,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:E=>e(E.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:n,onChange:E=>i(E.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:E=>u(E.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!0),p("")},children:"Forgot password?"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Sa({active:s}){const e=Js(),{clientData:n}=qr(),i=n?.clientType==="block"&&n?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{children:"Profile"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:a.jsx("path",{d:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"})}),a.jsx("span",{children:"Workouts"})]}),a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),i&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Pu(s,e,n,i,l){const u=[];for(let h=0;h<s;h++){const p=(h*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:n+i*Math.sin(p),x2:e+l*Math.cos(p),y2:n+l*Math.sin(p),thick:h%5===0})}return u}const qy=Pu(60,100,100,85,96),su=Pu(60,100,100,78,94),M3=Pu(60,100,100,82,94);Pu(60,50,50,38,46);const D3=Pu(60,40,40,30,37),Lp=[10,25,50,100,200,500,1e3],Ii=5;function xl(s){return s.toISOString().split("T")[0]}function P3(s){let e=0;for(const n of Lp){if(s<n)return{prev:e,next:n};e=n}return{prev:Lp[Lp.length-1],next:s+100}}const L3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},O3={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},Op=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}];function Vp(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Fc(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function V3(s,e=800){return new Promise(n=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,h=i.height;u>h?u>e&&(h=Math.round(h*e/u),u=e):h>e&&(u=Math.round(u*e/h),h=e),l.width=u,l.height=h,l.getContext("2d").drawImage(i,0,0,u,h),l.toBlob(p=>n(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}const hr={first_workout:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 4v16"}),a.jsx("path",{d:"M18 4v16"}),a.jsx("path",{d:"M6 12h12"}),a.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),a.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]}),workouts_10:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),a.jsx("path",{d:"M12 14v4"}),a.jsx("path",{d:"M10 18h4"})]}),workouts_25:a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),workouts_50:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M4 12h4"}),a.jsx("path",{d:"M16 12h4"}),a.jsx("path",{d:"M12 4v4"}),a.jsx("path",{d:"M12 16v4"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]}),workouts_100:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),streak_2:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M9 16l2 2 4-4"})]}),streak_4:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),a.jsx("path",{d:"M16 2v4"}),a.jsx("path",{d:"M8 2v4"}),a.jsx("path",{d:"M3 10h18"}),a.jsx("path",{d:"M8 16h8"}),a.jsx("path",{d:"M12 14v4"})]}),streak_8:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),a.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]}),programme_done:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("path",{d:"M4 22h16"}),a.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),a.jsx("path",{d:"M9 12l2 2 4-4"})]}),habits_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),nutrition_7:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),a.jsx("path",{d:"M9 7h6"})]}),first_pb:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M12 14v8"}),a.jsx("path",{d:"M9 18l3 3 3-3"}),a.jsx("path",{d:"M10 6l2 2 2-2"})]}),pbs_5:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 20h18"}),a.jsx("path",{d:"M5 20V10l4-6"}),a.jsx("path",{d:"M9 20V4"}),a.jsx("path",{d:"M13 20V10l4-6"}),a.jsx("path",{d:"M17 20V4"}),a.jsx("path",{d:"M21 20V10"})]}),leaderboard_join:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},d2=[{id:"first_workout",icon:hr.first_workout,name:"First Rep",desc:"Complete your first workout",category:"workouts"},{id:"workouts_10",icon:hr.workouts_10,name:"On Fire",desc:"Complete 10 workouts",category:"workouts"},{id:"workouts_25",icon:hr.workouts_25,name:"Lightning",desc:"Complete 25 workouts",category:"workouts"},{id:"workouts_50",icon:hr.workouts_50,name:"Iron Will",desc:"Complete 50 workouts",category:"workouts"},{id:"workouts_100",icon:hr.workouts_100,name:"Century Club",desc:"Complete 100 workouts",category:"workouts"},{id:"streak_2",icon:hr.streak_2,name:"2 Week Warrior",desc:"2-week workout streak",category:"streak"},{id:"streak_4",icon:hr.streak_4,name:"Month Strong",desc:"4-week workout streak",category:"streak"},{id:"streak_8",icon:hr.streak_8,name:"Unbreakable",desc:"8-week workout streak",category:"streak"},{id:"programme_done",icon:hr.programme_done,name:"Finisher",desc:"Complete a programme",category:"programme"},{id:"habits_7",icon:hr.habits_7,name:"Habit Machine",desc:"7-day perfect habit streak",category:"habits"},{id:"nutrition_7",icon:hr.nutrition_7,name:"Fuel Master",desc:"Log nutrition 7 days in a row",category:"nutrition"},{id:"first_pb",icon:hr.first_pb,name:"Record Breaker",desc:"Set your first PB",category:"pbs"},{id:"pbs_5",icon:hr.pbs_5,name:"Climbing",desc:"Set 5 personal bests",category:"pbs"},{id:"leaderboard_join",icon:hr.leaderboard_join,name:"Competitor",desc:"Join the leaderboard",category:"social"}];function B3(){const{currentUser:s,isClient:e,clientData:n,logout:i,updateClientData:l,loading:u}=qr(),{isDark:h,toggleTheme:p}=Ca(),g=Js(),[y,x]=w.useState({hours:0,minutes:0,seconds:0}),[k,j]=w.useState(0),[O,K]=w.useState(0),[U,V]=w.useState(""),[te,X]=w.useState(0),[fe,je]=w.useState(0),[Ue,Oe]=w.useState(!1),[A,E]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[R,L]=w.useState(null),[D,z]=w.useState(0),[I,Fe]=w.useState(null),[xt,Y]=w.useState(!1),[Se,Ve]=w.useState(!1),[ht,ae]=w.useState(0),[P,W]=w.useState(0),[pe,Ne]=w.useState([]),[Be,_e]=w.useState([]),[et,yt]=w.useState(null),[Je,Ft]=w.useState(!1),cn=w.useRef(null),[Ct,Rt]=w.useState([]),[oe,dn]=w.useState(null),[qt,jt]=w.useState(0),[Vt,mt]=w.useState(0),[Ye,le]=w.useState(0),[He,tt]=w.useState(0),[pt,Dt]=w.useState(null),ct=w.useCallback((M,ee="info")=>{Dt({message:M,type:ee}),setTimeout(()=>Dt(null),4e3)},[]),[St,ce]=w.useState([]),[be,Ie]=w.useState(!1),[Qe,Ke]=w.useState(""),[We,nt]=w.useState(null),[rt,qe]=w.useState(null),[Wt,en]=w.useState(!1),[Xt,jn]=w.useState(new Set),[zn,Ut]=w.useState(new Set),[bn,Zn]=w.useState({}),[In,hs]=w.useState({}),[gs,Hn]=w.useState({}),es=w.useRef(null),rs=w.useRef(null),[Yn,Fs]=w.useState([]),[Cs,q]=w.useState(!1),ge=w.useRef(null),[xe,we]=w.useState([]),[ye,it]=w.useState(""),[It,ut]=w.useState(!1),[_t,wt]=w.useState(null),[Jt,Rs]=w.useState([]),[Es,qs]=w.useState(null);w.useEffect(()=>{!u&&!s&&g("/")},[u,s,g]),w.useEffect(()=>{if(n)try{const M=sessionStorage.getItem(`cbDash_${n.id}`);if(M){const ee=JSON.parse(M);K(ee.programmePct??0),V(ee.programmeName??""),X(ee.totalWorkouts??0),je(ee.habitWeekPct??0),E(ee.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),L(ee.nutritionTargetData??null),z(ee.todayHabitsCount??0),Fe(ee.nextSession??null),Y(ee.hasProgramme??!1),Ve(ee.programmeComplete??!1),ae(ee.weeklyWorkouts??0),W(ee.pbCount??0),Ne(ee.topPBs??[]),_e(ee.leaderboardTop3??[]),Rt(ee.unlockedBadges??[]),jt(ee.streakWeeks??0),Oe(!0)}}catch{}},[n]),w.useEffect(()=>{n?.photoURL&&yt(n.photoURL)},[n]),w.useEffect(()=>{if(!n)return;const M=An(Yt(ke,"notifications"),vn("toId","==",n.id)),ee=lM(M,De=>{const gt=De.docs.map(dt=>({id:dt.id,...dt.data()}));gt.sort((dt,Ge)=>{const at=dt.createdAt?.toMillis?.()||0;return(Ge.createdAt?.toMillis?.()||0)-at}),Fs(gt.slice(0,50))},De=>{console.error("Notification listener error:",De),De.code==="permission-denied"&&console.warn("Firestore rules may be missing for the notifications collection. Please update your Firestore rules in the Firebase Console.")});return()=>ee()},[n]),w.useEffect(()=>{const M=ee=>{ge.current&&!ge.current.contains(ee.target)&&q(!1)};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]),w.useEffect(()=>{if(!n)return;const M=n.id;(async()=>{try{const[ee,De,gt]=await Promise.all([_n(An(Yt(ke,"buddies"),vn("user1","==",M))),_n(An(Yt(ke,"buddies"),vn("user2","==",M))),_n(Yt(ke,"clients"))]),dt=new Set;[...ee.docs,...De.docs].forEach(at=>{const Nt=at.data();dt.add(Nt.user1===M?Nt.user2:Nt.user1)});const Ge={};gt.docs.forEach(at=>{Ge[at.id]=at.data()}),we(Array.from(dt).filter(at=>Ge[at]).map(at=>({id:at,name:Ge[at].name,photoURL:Ge[at].photoURL||null})))}catch(ee){console.error("Error loading buddies for mentions:",ee)}})()},[n]);const Sn=Yn.filter(M=>!M.read).length,F=async()=>{const M=Yn.filter(De=>!De.read);if(!M.length)return;const ee=s2(ke);M.forEach(De=>ee.update(Xe(ke,"notifications",De.id),{read:!0})),await ee.commit()},ue=async()=>{if(!Yn.length)return;const M=s2(ke);Yn.forEach(ee=>M.delete(Xe(ke,"notifications",ee.id))),await M.commit()},T=async(M,ee,De={})=>{if(!(!n||M===n.id))try{await Xa(Yt(ke,"notifications"),{toId:M,fromId:n.id,fromName:n.name||"Someone",fromPhotoURL:n.photoURL||null,type:ee,read:!1,createdAt:Ur(),...De})}catch(gt){console.error("Notification create error:",gt),gt.code==="permission-denied"&&ct("Notifications blocked  check Firestore rules","error")}},C=(M,ee)=>{const De=ee==="compose"?es.current?.selectionStart:null,dt=(De!=null?M.slice(0,De):M).match(/@(\w*)$/);if(dt){ut(!0),wt(ee),it(dt[1].toLowerCase());const Ge=xe.filter(at=>at.name&&at.name.toLowerCase().includes(dt[1].toLowerCase())).slice(0,5);Rs(Ge)}else ut(!1),Rs([])},G=(M,ee)=>{if(ee==="compose"){const De=es.current,gt=Qe,dt=De?.selectionStart??gt.length,Ge=gt.slice(0,dt),at=gt.slice(dt),Nt=Ge.replace(/@\w*$/,`@${M.name} `);Ke(Nt+at),setTimeout(()=>{De?.focus(),De.selectionStart=De.selectionEnd=Nt.length},0)}else{const gt=(In[ee]||"").replace(/@\w*$/,`@${M.name} `);hs(dt=>({...dt,[ee]:gt}))}ut(!1),Rs([])},Z=M=>M&&M.split(/(@\w[\w\s]*?\s)/g).map((De,gt)=>De.startsWith("@")&&xe.some(dt=>De.trim()===`@${dt.name}`)?a.jsx("span",{className:"mention-highlight",children:De.trim()},gt):De),ze=async M=>{const ee=M.target.files?.[0];if(!(!ee||!n)){if(!ee.type.startsWith("image/")){ct("Please select an image file","error");return}if(ee.size>5*1024*1024){ct("Image must be under 5MB","error");return}Ft(!0);try{const De=await new Promise(Ge=>{const at=new Image;at.onload=()=>{const Nt=document.createElement("canvas"),un=400;let mn=at.width,Ot=at.height;mn>Ot?(Ot=Ot/mn*un,mn=un):(mn=mn/Ot*un,Ot=un),Nt.width=mn,Nt.height=Ot,Nt.getContext("2d").drawImage(at,0,0,mn,Ot),Nt.toBlob(Ms=>Ge(Ms),"image/jpeg",.75)},at.src=URL.createObjectURL(ee)}),gt=Eo(jo,`profilePhotos/${n.id}`);await u2(gt,De);const dt=await Pl(gt);await To(Xe(ke,"clients",n.id),{photoURL:dt}),yt(dt),l({photoURL:dt}),ct("Profile photo updated!","success")}catch(De){console.error("Photo upload error:",De),ct("Failed to upload photo","error")}Ft(!1),cn.current&&(cn.current.value="")}};w.useEffect(()=>{const M=()=>{const De=new Date,gt=new Date(De);gt.setHours(23,59,59,999);const dt=gt-De,Ge=Math.floor(dt/(1e3*60*60)),at=Math.floor(dt%(1e3*60*60)/(1e3*60)),Nt=Math.floor(dt%(1e3*60)/1e3);x({hours:Ge,minutes:at,seconds:Nt}),j(60-Nt)};M();const ee=setInterval(M,1e3);return()=>clearInterval(ee)},[]),w.useEffect(()=>{const M=setInterval(()=>{tt(ee=>(ee+1)%Op.length)},8e3);return()=>clearInterval(M)},[]),w.useEffect(()=>{if(!s||!n)return;(async()=>{let ee=null,De=0,gt=[],dt=!1;try{const Ge=xl(new Date),at=await Kn(Xe(ke,"clientProgrammes",n.id));if(at.exists()){const ts=at.data(),$s=L3[ts.templateId];if(Y(!0),$s){const Zs=ts.completedSessions||{},Cr=Object.keys(Zs).length,la=$s.duration*$s.daysPerWeek;K(la>0?Math.round(Cr/la*100):0);const Hr=ts.templateId.replace(/_/g," ").replace(/\b\w/g,Ws=>Ws.toUpperCase());V(Hr);const yr=O3[ts.templateId];let as=!1;for(let Ws=1;Ws<=$s.duration&&!as;Ws++)for(let Ds=0;Ds<$s.daysPerWeek&&!as;Ds++)Zs[`w${Ws}d${Ds}`]||(Fe({week:Ws,dayIdx:Ds,label:yr?.[Ds]||`Day ${Ds+1}`}),as=!0);as||(Ve(!0),dt=!0)}}const Nt=Yt(ke,"workoutLogs"),un=An(Nt,vn("clientId","==",n.id));ee=await _n(un);const mn=ee.docs.filter(ts=>ts.data().type!=="programme").length;X(mn);const Ot=new Date,Ms=Ot.getDay(),gn=Ms===0?6:Ms-1,Mn=new Date(Ot);Mn.setDate(Ot.getDate()-gn),Mn.setHours(0,0,0,0);const Vn=xl(Mn),$n=ee.docs.filter(ts=>(ts.data().date||"")>=Vn).length;ae($n);const js=Yt(ke,"habitLogs"),gr=An(js,vn("clientId","==",n.id),vn("date","==",Ge)),Hs=await _n(gr);let ys=0;if(!Hs.empty){const ts=Hs.docs[0].data().habits||{};ys=Object.values(ts).filter(Boolean).length}je(Math.round(ys/Ii*100)),z(ys);const Nr=await Kn(Xe(ke,"nutritionTargets",n.id));Nr.exists()&&L(Nr.data());const yn=await Kn(Xe(ke,"nutritionLogs",`${n.id}_${Ge}`));if(yn.exists()){const $s=(yn.data().entries||[]).reduce((Zs,Cr)=>({protein:Zs.protein+(Cr.protein||0),carbs:Zs.carbs+(Cr.carbs||0),fats:Zs.fats+(Cr.fats||0),calories:Zs.calories+(Cr.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});E($s)}}catch(Ge){console.error("Error loading dashboard stats:",Ge)}try{let Ge=[];const at=await Kn(Xe(ke,"coreBuddyPBs",n.id));if(at.exists()){const Nt=at.data().exercises||{};W(Object.keys(Nt).length),De=Object.keys(Nt).length,Ge=Object.entries(Nt).sort(([,un],[,mn])=>(mn.weight||0)-(un.weight||0)).slice(0,3).map(([un,mn])=>({name:un,weight:mn.weight,reps:mn.reps}))}if(Ge.length===0){const Nt={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},un=An(Yt(ke,"personalBests"),vn("clientId","==",n.id)),mn=await _n(un);if(!mn.empty){const Ot={};mn.docs.forEach(gn=>{const Mn=gn.data().benchmarks||{};Object.entries(Mn).forEach(([Vn,$n])=>{if(!$n.weight||!Nt[Vn])return;const js=($n.weight||0)*($n.reps||1);(!Ot[Vn]||js>(Ot[Vn].weight||0)*(Ot[Vn].reps||1))&&(Ot[Vn]={name:Nt[Vn],weight:$n.weight,reps:$n.reps})})});const Ms=Object.values(Ot);W(Ms.length),De=Ms.length,Ge=Ms.sort((gn,Mn)=>(Mn.weight||0)-(gn.weight||0)).slice(0,3)}}gt=Ge,Ne(Ge)}catch(Ge){console.error("PB fetch error:",Ge)}try{const Ge=Yt(ke,"clients"),at=An(Ge,vn("leaderboardOptIn","==",!0)),un=(await _n(at)).docs.map(mn=>({id:mn.id,name:mn.data().name,photoURL:mn.data().photoURL||null}));_e(un.slice(0,3))}catch(Ge){console.error("Leaderboard preview error:",Ge)}try{let Ge=0;if(ee){const gn=ee.docs.map(Mn=>Mn.data().date).filter(Boolean).sort().reverse();if(gn.length>0){const Mn=new Date;let Vn=new Date(Mn);e:for(let $n=0;$n<52;$n++){const js=new Date(Vn),gr=js.getDay(),Hs=gr===0?6:gr-1;js.setDate(js.getDate()-Hs),js.setHours(0,0,0,0);const ys=new Date(js);ys.setDate(ys.getDate()+7);const Nr=xl(js),yn=xl(ys);if(gn.some($s=>$s>=Nr&&$s<yn))Ge++;else{if($n>0)break e;break}Vn.setDate(Vn.getDate()-7)}}}jt(Ge);let at=0;for(let gn=0;gn<30;gn++){const Mn=new Date;Mn.setDate(Mn.getDate()-gn);const Vn=xl(Mn);try{const $n=await _n(An(Yt(ke,"habitLogs"),vn("clientId","==",n.id),vn("date","==",Vn)));if($n.empty)break;{const js=$n.docs[0].data().habits||{};if(Object.values(js).filter(Boolean).length>=Ii)at++;else break}}catch{break}}mt(at);let Nt=0;for(let gn=0;gn<30;gn++){const Mn=new Date;Mn.setDate(Mn.getDate()-gn);const Vn=xl(Mn);try{const $n=await Kn(Xe(ke,"nutritionLogs",`${n.id}_${Vn}`));if($n.exists()&&($n.data().entries||[]).length>0)Nt++;else break}catch{break}}le(Nt);const un=ee?ee.docs.length:0,mn=[],Ot=gn=>mn.push(gn);un>=1&&Ot("first_workout"),un>=10&&Ot("workouts_10"),un>=25&&Ot("workouts_25"),un>=50&&Ot("workouts_50"),un>=100&&Ot("workouts_100"),Ge>=2&&Ot("streak_2"),Ge>=4&&Ot("streak_4"),Ge>=8&&Ot("streak_8"),dt&&Ot("programme_done"),at>=7&&Ot("habits_7"),Nt>=7&&Ot("nutrition_7"),(De>0||gt.length>0)&&Ot("first_pb"),De>=5&&Ot("pbs_5"),n.leaderboardOptIn&&Ot("leaderboard_join"),Rt(mn);const Ms={};mn.forEach(gn=>{Ms[gn]={unlockedAt:new Date().toISOString()}}),On(Xe(ke,"achievements",n.id),{badges:Ms,updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(Ge){console.error("Achievement computation error:",Ge)}Oe(!0)})()},[s,n]),w.useEffect(()=>{if(!(!Ue||!n))try{sessionStorage.setItem(`cbDash_${n.id}`,JSON.stringify({programmePct:O,programmeName:U,totalWorkouts:te,habitWeekPct:fe,nutritionTotals:A,nutritionTargetData:R,todayHabitsCount:D,nextSession:I,hasProgramme:xt,programmeComplete:Se,weeklyWorkouts:ht,pbCount:P,topPBs:pe,leaderboardTop3:Be,unlockedBadges:Ct,streakWeeks:qt}))}catch{}},[Ue,O,U,te,fe,A,R,D,I,xt,Se,ht,P,pe,Be,Ct,qt,n]);const Pe=M=>{const ee=M.currentTarget,De=ee.querySelector(".ripple");De&&De.remove();const gt=ee.getBoundingClientRect(),dt=Math.max(gt.width,gt.height),Ge=M.clientX-gt.left-dt/2,at=M.clientY-gt.top-dt/2,Nt=document.createElement("span");Nt.className="ripple",Nt.style.cssText=`width:${dt}px;height:${dt}px;left:${Ge}px;top:${at}px;`,ee.appendChild(Nt),setTimeout(()=>Nt.remove(),600)},Le=n?.name?.split(" ")[0]||"there",{prev:Bt,next:kt}=P3(te),$=kt>Bt?Math.round((te-Bt)/(kt-Bt)*100):100,me=[{label:"Programme",value:`${O}%`,pct:O,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${te}`,pct:$,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${fe}%`,pct:fe,color:"#38B6FF",size:"normal"}],re=M=>!R||!R[M]?0:Math.min(Math.round(A[M]/R[M]*100),100),Re=(()=>{const M=new Date().getHours();return Ue&&D>=Ii&&A.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:M>=5&&M<12?{main:"Rise and grind,",sub:"let's get after it!"}:M>=12&&M<17?{main:"Oye",sub:"crack on and make it count!"}:M>=17&&M<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),Me=Ue?xt&&I&&!Se?{label:"NEXT SESSION",message:`Week ${I.week}, Day ${I.dayIdx+1}  ${I.label}`,cta:"Continue",action:()=>g("/client/core-buddy/programmes"),pct:O,ringLabel:`${O}%`}:D<Ii?{label:"DAILY HABITS",message:`${D}/${Ii} completed`,cta:"Open Habits",action:()=>g("/client/core-buddy/consistency"),pct:fe,ringLabel:`${D}/${Ii}`}:A.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>g("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:xt?Se?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>g("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>g("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null,st=w.useCallback(async()=>{if(n){Ie(!0);try{const M=await _n(An(Yt(ke,"posts"),vn("authorId","==",n.id),Hd("createdAt","desc"),$d(30)));ce(M.docs.map(De=>({id:De.id,...De.data()})));const ee=await _n(An(Yt(ke,"postLikes"),vn("userId","==",n.id)));jn(new Set(ee.docs.map(De=>De.data().postId)))}catch(M){console.error("Error loading journey:",M)}finally{Ie(!1)}}},[n]);w.useEffect(()=>{Ue&&n&&st()},[Ue,n,st]);const Mt=M=>{const ee=M.target.files?.[0];if(ee){if(!ee.type.startsWith("image/")){ct("Please select an image file","error");return}if(ee.size>10*1024*1024){ct("Image must be under 10MB","error");return}nt(ee),qe(URL.createObjectURL(ee))}},ot=()=>{nt(null),rt&&URL.revokeObjectURL(rt),qe(null),rs.current&&(rs.current.value="")},Zt=async()=>{if(!(!Qe.trim()&&!We||Wt||!n)){en(!0);try{let M=null;if(We){const gt=await V3(We),dt=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,Ge=Eo(jo,`postImages/${n.id}/${dt}`);await u2(Ge,gt),M=await Pl(Ge)}await Xa(Yt(ke,"posts"),{authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:Qe.trim(),type:M?"image":"text",imageURL:M||null,createdAt:Ur(),likeCount:0,commentCount:0});const De=Qe.trim().match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(De){const gt=new Set;De.forEach(dt=>{const Ge=dt.slice(1).trim(),at=xe.find(Nt=>Nt.name&&Nt.name.toLowerCase()===Ge.toLowerCase());at&&!gt.has(at.id)&&(gt.add(at.id),T(at.id,"mention",{}))})}Ke(""),ot(),es.current&&(es.current.style.height="auto"),await st(),ct("Posted!","success")}catch(M){console.error("Error posting:",M),ct(M?.message||"Failed to post","error")}finally{en(!1)}}},Fn=async M=>{if(window.confirm("Delete this post?"))try{await mr(Xe(ke,"posts",M)),ce(ee=>ee.filter(De=>De.id!==M)),ct("Post deleted","info")}catch(ee){console.error("Delete error:",ee),ct("Failed to delete","error")}},fn=async M=>{if(!n)return;const ee=n.id,De=`${M}_${ee}`,gt=Xt.has(M),dt=new Set(Xt);gt?dt.delete(M):dt.add(M),jn(dt),ce(Ge=>Ge.map(at=>at.id===M?{...at,likeCount:Math.max(0,(at.likeCount||0)+(gt?-1:1))}:at));try{if(gt)await mr(Xe(ke,"postLikes",De)),await To(Xe(ke,"posts",M),{likeCount:Dl(-1)});else{await On(Xe(ke,"postLikes",De),{postId:M,userId:ee,createdAt:Ur()}),await To(Xe(ke,"posts",M),{likeCount:Dl(1)});const Ge=St.find(at=>at.id===M);Ge&&T(Ge.authorId,"like",{postId:M})}}catch(Ge){console.error("Like error:",Ge),st()}},Nn=async M=>{try{const ee=await _n(An(Yt(ke,"postComments"),vn("postId","==",M),Hd("createdAt","asc"),$d(50)));Zn(De=>({...De,[M]:ee.docs.map(gt=>({id:gt.id,...gt.data()}))}))}catch(ee){console.error("Error loading comments:",ee)}},aa=M=>{const ee=new Set(zn);ee.has(M)?ee.delete(M):(ee.add(M),bn[M]||Nn(M)),Ut(ee)},ia=async M=>{const ee=(In[M]||"").trim();if(!(!ee||!n)){Hn(De=>({...De,[M]:!0}));try{await Xa(Yt(ke,"postComments"),{postId:M,authorId:n.id,authorName:n.name||"Unknown",authorPhotoURL:n.photoURL||null,content:ee,createdAt:Ur()}),await To(Xe(ke,"posts",M),{commentCount:Dl(1)});const De=St.find(dt=>dt.id===M);De&&T(De.authorId,"comment",{postId:M});const gt=ee.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(gt){const dt=new Set;gt.forEach(Ge=>{const at=Ge.slice(1).trim(),Nt=xe.find(un=>un.name&&un.name.toLowerCase()===at.toLowerCase());Nt&&!dt.has(Nt.id)&&(dt.add(Nt.id),T(Nt.id,"mention",{postId:M}))})}hs(dt=>({...dt,[M]:""})),ce(dt=>dt.map(Ge=>Ge.id===M?{...Ge,commentCount:(Ge.commentCount||0)+1}:Ge)),await Nn(M)}catch(De){console.error("Comment error:",De),ct("Failed to comment","error")}finally{Hn(De=>({...De,[M]:!1}))}}},oa=M=>{Ke(M.target.value),M.target.style.height="auto",M.target.style.height=Math.min(M.target.scrollHeight,120)+"px",C(M.target.value,"compose")},pr=(M,ee)=>{hs(De=>({...De,[M]:ee})),C(ee,M)};return a.jsxs("div",{className:"cb-dashboard","data-theme":h?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-notif-wrap",ref:ge,children:[a.jsxs("button",{className:"header-notif-btn",onClick:()=>{q(!Cs),Cs||F()},"aria-label":"Notifications",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),Sn>0&&a.jsx("span",{className:"header-notif-badge",children:Sn>9?"9+":Sn})]}),Cs&&a.jsxs("div",{className:"notif-panel",children:[a.jsxs("div",{className:"notif-panel-header",children:[a.jsx("span",{className:"notif-panel-title",children:"Notifications"}),Yn.length>0&&a.jsx("button",{className:"notif-clear-btn",onClick:ue,children:"Clear all"})]}),a.jsx("div",{className:"notif-panel-list",children:Yn.length===0?a.jsx("div",{className:"notif-empty",children:"No notifications yet"}):Yn.map(M=>a.jsxs("div",{className:`notif-item${M.read?"":" unread"}`,onClick:()=>{if(q(!1),M.type==="buddy_request"||M.type==="buddy_accept")g("/client/core-buddy/buddies");else if((M.type==="like"||M.type==="comment")&&M.postId){if(!zn.has(M.postId)){const ee=new Set(zn);ee.add(M.postId),Ut(ee),bn[M.postId]||Nn(M.postId)}setTimeout(()=>{const ee=document.getElementById(`post-${M.postId}`);ee&&ee.scrollIntoView({behavior:"smooth",block:"center"})},150)}else M.type==="like"||M.type==="comment"?document.querySelector(".cb-journey-section")?.scrollIntoView({behavior:"smooth"}):M.type==="mention"&&g(`/client/core-buddy/profile/${M.fromId}`)},children:[a.jsx("div",{className:"notif-item-avatar",children:M.fromPhotoURL?a.jsx("img",{src:M.fromPhotoURL,alt:""}):a.jsx("span",{children:(M.fromName||"?")[0]})}),a.jsxs("div",{className:"notif-item-body",children:[a.jsxs("p",{className:"notif-item-text",children:[a.jsx("strong",{children:M.fromName})," ",M.type==="buddy_request"&&"sent you a buddy request",M.type==="buddy_accept"&&"accepted your buddy request",M.type==="like"&&"liked your post",M.type==="comment"&&"commented on your post",M.type==="mention"&&"mentioned you"]}),a.jsx("span",{className:"notif-item-time",children:Vp(M.createdAt)})]})]},M.id))})]})]}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:h?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:qy.map((M,ee)=>{const De=ee<k;return a.jsx("line",{x1:M.x1,y1:M.y1,x2:M.x2,y2:M.y2,className:`ring-tick ${De?"elapsed":"remaining"}`,strokeWidth:M.thick?"3":"2"},ee)})}),a.jsx("div",{className:"cb-ring-center",children:a.jsxs("div",{className:"cb-ring-logo",onClick:()=>cn.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:et||"/Logo.webp",alt:et?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${Je?" uploading":""}`,children:Je?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:cn,type:"file",accept:"image/*",onChange:ze,style:{display:"none"}})]})})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String(y.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String(y.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(y.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Op[He].text," ",a.jsx("strong",{children:Op[He].bold})]},He)]}),a.jsx("div",{className:"cb-stats-row",children:me.map(M=>{const ee=(M.size==="large",38),De=2*Math.PI*ee,gt=De-M.pct/100*De;return a.jsxs("div",{className:`cb-stat-item${M.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:"cb-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:ee}),a.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:ee,style:{stroke:M.color},strokeDasharray:De,strokeDashoffset:gt})]}),a.jsx("span",{className:"cb-stat-value",style:{color:M.color},children:M.value})]}),a.jsx("span",{className:"cb-stat-label",children:M.label})]},M.label)})}),a.jsxs("p",{className:"cb-coach-msg",children:[Re.main," ",a.jsx("strong",{children:Le}),"  ",Re.sub]}),Me&&a.jsxs("button",{className:"cb-nudge-card",onClick:Me.action||void 0,style:Me.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-Me.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:Me.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:Me.label}),a.jsx("span",{className:"cb-nudge-title",children:Me.message}),Me.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[Me.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[a.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:M=>{Pe(M),g("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:re("protein"),color:"#14b8a6"},{label:"C",pct:re("carbs"),color:"var(--color-primary)"},{label:"F",pct:re("fats"),color:"#eab308"},{label:"Cal",pct:re("calories"),color:"#38B6FF"}].map(M=>{const De=2*Math.PI*38,gt=De-M.pct/100*De;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:M.color},strokeDasharray:De,strokeDashoffset:gt})]}),a.jsx("span",{style:{color:M.color},children:M.label})]},M.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:M=>{Pe(M),g("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[ht," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[te," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-grid-row",children:[a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:M=>{Pe(M),g("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:"cb-habit-dots",children:Array.from({length:Ii},(M,ee)=>a.jsx("span",{className:`cb-habit-dot${ee<D?" done":""}`},ee))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[D,"/",Ii," today"]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:M=>{Pe(M),g("/client/personal-bests?mode=corebuddy")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"PBs"}),pe.length>0?a.jsx("div",{className:"cb-pb-preview",children:pe.slice(0,2).map(M=>a.jsxs("div",{className:"cb-pb-entry",children:[a.jsx("span",{className:"cb-pb-name",children:M.name}),a.jsxs("span",{className:"cb-pb-value",children:[M.weight,"kg"]})]},M.name))}):a.jsxs("div",{className:"cb-progress-preview",children:[a.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{children:"Start lifting!"})]})]}),a.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:M=>{Pe(M),g("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),Be.length>0?a.jsx("div",{className:"cb-lb-preview",children:Be.map((M,ee)=>{const De=["#FFD700","#A8B4C0","#CD7F32"][ee],gt=M.name?M.name.split(" ").map(Ge=>Ge[0]).join("").slice(0,2).toUpperCase():"?",dt=M.id===n?.id;return a.jsxs("div",{className:`cb-lb-entry${dt?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:De},children:M.photoURL?a.jsx("img",{src:M.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:gt})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:De},children:["#",ee+1]})]},M.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:M=>{Pe(M),g("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"cb-achievements-section",children:[a.jsx("h3",{className:"cb-achievements-title",children:"Achievements"}),a.jsx("div",{className:"cb-badges-scroll",children:d2.map(M=>{const ee=Ct.includes(M.id);return a.jsxs("button",{className:`cb-badge${ee?" unlocked":" locked"}`,onClick:()=>dn(oe?.id===M.id?null:M),children:[a.jsx("span",{className:"cb-badge-icon",children:M.icon}),a.jsx("span",{className:"cb-badge-name",children:M.name})]},M.id)})}),oe&&a.jsxs("div",{className:"cb-badge-detail",children:[a.jsx("span",{className:"cb-badge-detail-icon",children:oe.icon}),a.jsxs("div",{className:"cb-badge-detail-info",children:[a.jsx("strong",{children:oe.name}),a.jsx("span",{children:oe.desc}),Ct.includes(oe.id)?a.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):a.jsx("span",{className:"cb-badge-status locked",children:"Locked"})]})]}),a.jsxs("p",{className:"cb-badges-count",children:[Ct.length,"/",d2.length," unlocked"]})]}),a.jsxs("div",{className:"cb-journey-section",children:[a.jsx("h3",{className:"cb-journey-title",children:"My Journey"}),a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:et?a.jsx("img",{src:et,alt:""}):a.jsx("span",{children:Fc(n?.name)})}),a.jsxs("div",{className:"journey-compose-body",style:{position:"relative"},children:[a.jsx("textarea",{ref:es,placeholder:"Share your progress... (use @ to mention)",value:Qe,onChange:oa,rows:1,maxLength:500}),It&&_t==="compose"&&Jt.length>0&&a.jsx("div",{className:"mention-dropdown",children:Jt.map(M=>a.jsxs("button",{className:"mention-option",onClick:()=>G(M,"compose"),children:[a.jsx("div",{className:"mention-option-avatar",children:M.photoURL?a.jsx("img",{src:M.photoURL,alt:""}):a.jsx("span",{children:Fc(M.name)})}),a.jsx("span",{children:M.name})]},M.id))}),rt&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:rt,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:ot,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>rs.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:rs,type:"file",accept:"image/*",onChange:Mt,hidden:!0}),(Qe.trim()||We)&&a.jsx("button",{className:"journey-post-btn",onClick:Zt,disabled:Wt,children:Wt?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),be?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"cb-spinner"})}):St.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"Start sharing your fitness journey!"})]}):a.jsx("div",{className:"journey-list",children:St.map(M=>a.jsxs("div",{id:`post-${M.id}`,className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:M.authorPhotoURL?a.jsx("img",{src:M.authorPhotoURL,alt:""}):a.jsx("span",{children:Fc(M.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:M.authorName}),a.jsx("span",{className:"journey-post-time",children:Vp(M.createdAt)})]}),a.jsx("button",{className:"journey-delete-btn",onClick:()=>Fn(M.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),M.content&&a.jsx("p",{className:"journey-post-content",children:Z(M.content)}),M.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:M.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${Xt.has(M.id)?" liked":""}`,onClick:()=>fn(M.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:Xt.has(M.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:M.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${zn.has(M.id)?" active":""}`,onClick:()=>aa(M.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:M.commentCount||0})]})]}),zn.has(M.id)&&a.jsxs("div",{className:"journey-comments",children:[bn[M.id]?.length>0?bn[M.id].map(ee=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",children:ee.authorPhotoURL?a.jsx("img",{src:ee.authorPhotoURL,alt:""}):a.jsx("span",{children:Fc(ee.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:ee.authorName}),a.jsx("span",{className:"journey-comment-text",children:Z(ee.content)})]}),a.jsx("span",{className:"journey-comment-time",children:Vp(ee.createdAt)})]})]},ee.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("input",{type:"text",placeholder:"Comment... (@ to mention)",value:In[M.id]||"",onChange:ee=>pr(M.id,ee.target.value),onKeyDown:ee=>{ee.key==="Enter"&&ia(M.id)},maxLength:300}),It&&_t===M.id&&Jt.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:Jt.map(ee=>a.jsxs("button",{className:"mention-option",onClick:()=>G(ee,M.id),children:[a.jsx("div",{className:"mention-option-avatar",children:ee.photoURL?a.jsx("img",{src:ee.photoURL,alt:""}):a.jsx("span",{children:Fc(ee.name)})}),a.jsx("span",{children:ee.name})]},ee.id))}),a.jsx("button",{onClick:()=>ia(M.id),disabled:!(In[M.id]||"").trim()||gs[M.id],children:gs[M.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},M.id))})]})]})]}),a.jsx(Sa,{active:"home"}),pt&&a.jsxs("div",{className:`toast-notification ${pt.type}`,children:[pt.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),pt.message]})]})}const Bp=new Map;function Mi(){return new Date().toISOString().split("T")[0]}const f2=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],U3={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function z3(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function F3(){const{currentUser:s,isClient:e,clientData:n,loading:i}=qr(),{isDark:l,toggleTheme:u,accent:h}=Ca(),p=Js(),[g,y]=w.useState("loading"),[x,k]=w.useState(null),[j,O]=w.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[K,U]=w.useState(null),[V,te]=w.useState(Mi()),[X,fe]=w.useState({entries:[],water:0}),[je,Ue]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[Oe,A]=w.useState(!1),[E,R]=w.useState(!1),[L,D]=w.useState(()=>{const T=new Date;return{year:T.getFullYear(),month:T.getMonth()}}),[z,I]=w.useState(z3),[Fe,xt]=w.useState(null),[Y,Se]=w.useState(null),[Ve,ht]=w.useState(!1),[ae,P]=w.useState(null),[W,pe]=w.useState(""),[Ne,Be]=w.useState(!1),[_e,et]=w.useState(""),[yt,Je]=w.useState([]),[Ft,cn]=w.useState(!1),[Ct,Rt]=w.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[oe,dn]=w.useState(null),[qt,jt]=w.useState("100"),[Vt,mt]=w.useState(0),[Ye,le]=w.useState("weight"),[He,tt]=w.useState(0),[pt,Dt]=w.useState(null);w.useRef(null);const ct=w.useRef(!1),St=w.useRef(null),ce=w.useRef(null),be=w.useRef(null),Ie=w.useCallback((T,C="info")=>{Dt({message:T,type:C}),setTimeout(()=>Dt(null),3e3)},[]);w.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),w.useEffect(()=>{if(!n?.id)return;(async()=>{try{const C=await Kn(Xe(ke,"nutritionTargets",n.id));C.exists()?(k(C.data()),y("dashboard")):y("setup")}catch(C){console.error("Error loading nutrition data:",C),y("setup")}})()},[n?.id]),w.useEffect(()=>{if(!n?.id)return;(async()=>{try{const C=await Kn(Xe(ke,"nutritionLogs",`${n.id}_${V}`));if(C.exists()){const G=C.data();fe({entries:G.entries||[],water:G.water||0})}else fe({entries:[],water:0})}catch(C){console.error("Error loading log:",C),fe({entries:[],water:0})}})()},[n?.id,V]),w.useEffect(()=>{const T=X.entries.reduce((C,G)=>({protein:C.protein+(G.protein||0),carbs:C.carbs+(G.carbs||0),fats:C.fats+(G.fats||0),calories:C.calories+(G.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Ue(T)},[X.entries]);const Qe=async T=>{try{await On(Xe(ke,"nutritionLogs",`${n.id}_${V}`),{clientId:n.id,date:V,entries:T.entries,water:T.water,updatedAt:bt.now()})}catch(C){console.error("Error saving nutrition log:",C)}},Ke=V===Mi(),We=(T,C)=>new Date(T,C+1,0).getDate(),nt=(T,C)=>new Date(T,C,1).getDay(),rt=["January","February","March","April","May","June","July","August","September","October","November","December"],qe=["Su","Mo","Tu","We","Th","Fr","Sa"],Wt=()=>{let T=parseFloat(j.weight);j.weightUnit==="lbs"&&(T*=.453592);let C;j.heightUnit==="cm"?C=parseFloat(j.height):C=(parseFloat(j.heightFeet)||0)*30.48+(parseFloat(j.heightInches)||0)*2.54;const G=parseInt(j.age);let Z=j.gender==="male"?10*T+6.25*C-5*G+5:10*T+6.25*C-5*G-161;const Pe=Z*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[j.dailyActivity],Le={low:100,moderate:200,high:300,daily:400},Bt=Math.round(Pe+Le[j.trainingFrequency]);let kt=Bt,$,me;switch(j.goal){case"lose":kt=Bt*(1-{light:.15,moderate:.2,harsh:.25}[j.deficitLevel]),$=2.2,me=.3;break;case"build":kt=Bt*1.1,$=2,me=.22;break;default:$=1.8,me=.25}kt=Math.max(kt,j.gender==="male"?1400:1100);const re=Math.round(T*$),Re=Math.round(kt*me/9),Me=Math.max(0,Math.round((kt-re*4-Re*9)/4));U({calories:Math.round(kt),protein:re,carbs:Me,fats:Re,bmr:Math.round(Z),neat:Math.round(Pe),exerciseAdd:Le[j.trainingFrequency],tdee:Math.round(Bt)})},en=async()=>{if(K)try{const T={clientId:n.id,calories:K.calories,protein:K.protein,carbs:K.carbs,fats:K.fats,waterGoal:8,goal:j.goal,updatedAt:bt.now()};await On(Xe(ke,"nutritionTargets",n.id),T),k(T),y("dashboard"),Ie("Macro targets saved!","success")}catch(T){console.error("Error saving targets:",T),Ie("Failed to save targets. Please try again.","error")}},Xt=()=>{const T=j.weight&&parseFloat(j.weight)>0,C=j.age&&parseInt(j.age)>0,G=j.heightUnit==="cm"?j.height&&parseFloat(j.height)>0:j.heightFeet&&parseFloat(j.heightFeet)>0||j.heightInches&&parseFloat(j.heightInches)>0;return T&&C&&G},jn="nut_favourite_foods",zn=()=>{try{return JSON.parse(localStorage.getItem(jn)||"[]")}catch{return[]}},Ut=T=>zn().some(C=>C.name.toLowerCase()===(T||"").toLowerCase()),bn=T=>{const C=zn(),G=C.findIndex(Z=>Z.name.toLowerCase()===T.name.toLowerCase());G>=0?C.splice(G,1):C.unshift({name:T.name,protein:T.protein,carbs:T.carbs,fats:T.fats,calories:T.calories,serving:T.serving,per100g:T.per100g||null,servingUnit:T.servingUnit||"g",portion:T.portion||null}),localStorage.setItem(jn,JSON.stringify(C)),tt(Z=>Z+1)},Zn=T=>{const C=[...X.entries,{...T,meal:z,id:Date.now(),addedAt:new Date().toISOString()}],G={...X,entries:C};fe(G),Qe(G),Se(null),dn(null),jt("100"),mt(0),le("weight"),Rt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),Ie("Food added!","success")},In=T=>{const C=X.entries.filter(Z=>Z.id!==T),G={...X,entries:C};fe(G),Qe(G)},hs=w.useRef(null),gs=async()=>{ht(!0);const T=document.querySelector("#barcode-reader");if(!T){ht(!1),Ie("Scanner container not found.","error");return}if(!hs.current)try{const G=await Fr(()=>import("./quagga.min-BbicSfvA.js").then(Z=>Z.q),[]);hs.current=G.default}catch(G){console.error("Failed to load barcode scanner:",G),ht(!1),Ie("Could not load scanner.","error");return}const C=hs.current;C.init({inputStream:{type:"LiveStream",target:T,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},G=>{if(G){console.error("Quagga init error:",G),ht(!1),Ie("Could not access camera. Check permissions.","error");return}C.start(),ct.current=!0}),C.onDetected(G=>{const Z=G.codeResult.decodedCodes?.filter(Pe=>Pe.error!==void 0)?.map(Pe=>Pe.error)||[];if((Z.length>0?Z.reduce((Pe,Le)=>Pe+Le,0)/Z.length:1)<.15){const Pe=G.codeResult.code;C.offDetected(),P(Pe)}})},Hn=()=>{const T=hs.current;ct.current&&T&&(T.stop(),T.offDetected(),ct.current=!1),ht(!1)},es=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,rs=T=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((T||"").replace(/\s/g,"")),Yn=T=>{if(!T)return{value:100,unit:"g"};const C=T.toLowerCase().replace(/\s/g,""),G=C.match(/([\d.]+)/),Z=G?parseFloat(G[1]):100;return rs(T)?/cl/.test(C)?{value:Z*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(C)&&!/ml/.test(C)?{value:Z*1e3,unit:"ml"}:{value:Z,unit:"ml"}:{value:Z,unit:"g"}},Fs=T=>{if(rs(T.serving_size)||rs(T.quantity))return"ml";const C=T.product_name||T.product_name_en||"";return es.test(C)?"ml":"g"},Cs=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],q=(T,C)=>{const G=T||"",Z=G.match(/\((\d+\.?\d*)\s*g\)/i),ze=G.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(Z&&ze){const Bt=parseFloat(Z[1]);let kt=ze[1].replace(/^\d+\s*/,"").trim();if(kt&&Bt>0)return{label:kt,weight:Bt}}const Pe=G.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Pe){const Bt=parseFloat(Pe[1]);let kt=Pe[2].replace(/^\d+\s*/,"").trim();if(kt&&Bt>0)return{label:kt,weight:Bt}}const Le=C||"";for(const{pattern:Bt,label:kt,weight:$}of Cs)if(Bt.test(Le))return{label:kt,weight:$};return null},ge=T=>{const C=T.nutriments||{},G=Fs(T),Z=Yn(T.serving_size),ze=G==="ml"?Z.unit==="ml"?Z.value:100:Z.value,Pe=T.product_name||T.product_name_en||"Unknown Product",Le=q(T.serving_size,Pe);return{name:Pe,brand:T.brands||"",image:T.image_small_url||T.image_url||null,servingSize:T.serving_size||"100g",servingValue:ze,servingUnit:G,portion:Le,protein:Math.round(C.proteins_100g||C.proteins||0),carbs:Math.round(C.carbohydrates_100g||C.carbohydrates||0),fats:Math.round(C.fat_100g||C.fat||0),calories:Math.round(C["energy-kcal_100g"]||C["energy-kcal"]||(C.energy_100g?C.energy_100g/4.184:0)),per100g:!0}},xe=async T=>{Be(!0);try{const C=`https://world.openfoodfacts.org/api/v2/product/${T}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,G=await fetch(C);if(!G.ok)throw new Error(`HTTP ${G.status}`);const Z=await G.json();if(Z.status==="success"||Z.status===1||Z.product){const ze=ge(Z.product);ze.calories===0&&ze.protein===0&&ze.carbs===0?Ie("Product found but no nutrition data available.","error"):(dn(ze),ze.portion?(mt(1),jt(String(ze.portion.weight)),le("portion")):(mt(0),jt(String(ze.servingValue||100)),le("weight")),pe(""))}else Ie("Product not found. Try search or manual entry.","error")}catch(C){console.error("Barcode lookup error:",C),Ie("Failed to look up product. Check your connection.","error")}Be(!1)},we=(T,C,G)=>{const Z=T.toLowerCase().trim(),ze=C.toLowerCase().trim(),Pe=G.toLowerCase().trim();let Le=0;return(Z===Pe||Z===Pe+"s"||Z+"s"===Pe)&&(Le+=100),(Z.endsWith(" "+Pe)||Z.endsWith(" "+Pe+"s"))&&(Le+=40),(Z.startsWith(Pe+" ")||Z.startsWith(Pe+"s "))&&(Le+=15),Pe.split(/\s+/).some(kt=>ze===kt||ze.startsWith(kt))&&(Le+=30),Le+=Math.max(0,30-Z.length),Le},ye=async()=>{if(!_e.trim())return;St.current&&St.current.abort();const T=new AbortController;St.current=T;const C=_e.trim().toLowerCase(),G=C.split(/\s+/).filter(Boolean);if(Bp.has(C)){Je(Bp.get(C));return}cn(!0);try{const ze=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(_e.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Pe=await fetch(ze,{signal:T.signal});if(!Pe.ok)throw new Error(`HTTP ${Pe.status}`);const Bt=((await Pe.json()).products||[]).map(kt=>ge(kt)).filter(kt=>kt.name!=="Unknown Product"&&(kt.calories>0||kt.protein>0)).filter(kt=>{const $=(kt.name+" "+kt.brand).toLowerCase();return G.every(me=>$.includes(me))}).sort((kt,$)=>we($.name,$.brand,C)-we(kt.name,kt.brand,C)).slice(0,10);Bp.set(C,Bt),Je(Bt),Bt.length===0&&Ie("No results found. Try a different search.","info")}catch(Z){if(Z.name==="AbortError")return;console.error("Search error:",Z),Ie("Search failed. Check your connection.","error")}cn(!1)};w.useEffect(()=>{if(ce.current&&clearTimeout(ce.current),!(!_e.trim()||Y!=="search"||oe))return ce.current=setTimeout(()=>{ye()},700),()=>clearTimeout(ce.current)},[_e]);const it=()=>{const T={...X,water:X.water+1};fe(T),Qe(T)},It=()=>{if(X.water<=0)return;const T={...X,water:X.water-1};fe(T),Qe(T)},ut={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},_t=80,wt=2*Math.PI*_t,Jt=(T,C,G,Z,ze)=>{const Pe=Z>0?Math.min(100,Math.round(G/Z*100)):0,Le=wt-Pe/100*wt,Bt=ut[ze]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:_t}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:_t,style:{stroke:Bt},strokeDasharray:wt,strokeDashoffset:Le})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:Bt},children:Math.round(G)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",Z,T==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:Bt},children:C})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:Bt},children:[Pe,"%"]})]})};if(w.useEffect(()=>{if(!ae)return;const T=setTimeout(()=>{const C=ae;Hn(),P(null),xe(C)},1500);return()=>clearTimeout(T)},[ae]),w.useEffect(()=>()=>{const T=hs.current;if(ct.current&&T){try{T.stop(),T.offDetected()}catch{}ct.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:j.gender==="male"?"active":"",onClick:()=>{O(T=>({...T,gender:"male"})),U(null)},children:"Male"}),a.jsx("button",{className:j.gender==="female"?"active":"",onClick:()=>{O(T=>({...T,gender:"female"})),U(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:j.age,onChange:T=>{O(C=>({...C,age:T.target.value})),U(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:j.weight,onChange:T=>{O(C=>({...C,weight:T.target.value})),U(null)},placeholder:j.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:j.weightUnit==="kg"?"active":"",onClick:()=>{O(T=>({...T,weightUnit:"kg"})),U(null)},children:"kg"}),a.jsx("button",{className:j.weightUnit==="lbs"?"active":"",onClick:()=>{O(T=>({...T,weightUnit:"lbs"})),U(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[j.heightUnit==="cm"?a.jsx("input",{type:"number",value:j.height,onChange:T=>{O(C=>({...C,height:T.target.value})),U(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:j.heightFeet,onChange:T=>{O(C=>({...C,heightFeet:T.target.value})),U(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:j.heightInches,onChange:T=>{O(C=>({...C,heightInches:T.target.value})),U(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:j.heightUnit==="cm"?"active":"",onClick:()=>{O(T=>({...T,heightUnit:"cm"})),U(null)},children:"cm"}),a.jsx("button",{className:j.heightUnit==="ft"?"active":"",onClick:()=>{O(T=>({...T,heightUnit:"ft"})),U(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:j.dailyActivity,onChange:T=>{O(C=>({...C,dailyActivity:T.target.value})),U(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:j.trainingFrequency,onChange:T=>{O(C=>({...C,trainingFrequency:T.target.value})),U(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:j.goal==="lose"?"active":"",onClick:()=>{O(T=>({...T,goal:"lose"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:j.goal==="maintain"?"active":"",onClick:()=>{O(T=>({...T,goal:"maintain"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:j.goal==="build"?"active":"",onClick:()=>{O(T=>({...T,goal:"build"})),U(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),j.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:j.deficitLevel==="light"?"active":"",onClick:()=>{O(T=>({...T,deficitLevel:"light"})),U(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:j.deficitLevel==="moderate"?"active":"",onClick:()=>{O(T=>({...T,deficitLevel:"moderate"})),U(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:j.deficitLevel==="harsh"?"active":"",onClick:()=>{O(T=>({...T,deficitLevel:"harsh"})),U(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:Wt,disabled:!Xt(),children:"Calculate Macros"})]}),K&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[Jt("Protein","Protein",K.protein,K.protein,"ring-protein"),Jt("Carbs","Carbs",K.carbs,K.carbs,"ring-carbs"),Jt("Fats","Fats",K.fats,K.fats,"ring-fats"),Jt("Calories","Calories",K.calories,K.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[K.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[K.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",K.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[K.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:en,children:"Set as My Daily Targets"})]})]}),pt&&a.jsx("div",{className:`toast-notification ${pt.type}`,children:pt.message})]});const Rs=T=>{const C=new Date(T+"T12:00:00"),G=C.getDay(),Z=new Date(C);Z.setDate(C.getDate()-(G+6)%7);const ze=[];for(let Pe=0;Pe<7;Pe++){const Le=new Date(Z);Le.setDate(Z.getDate()+Pe),ze.push(Le.toISOString().split("T")[0])}return ze},Es=["M","T","W","T","F","S","S"],qs=(T,C="search")=>{I(T),C==="scan"?(Se("scan"),dn(null)):C==="manual"?(Se("manual"),Rt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):C==="favourites"?Se("favourites"):(Se("search"),Je([]),et(""))},Sn=Rs(V),F=new Date(V+"T12:00:00"),ue=`${rt[F.getMonth()]} ${F.getFullYear()}`;return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),U(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const T=new Date(V+"T12:00:00");T.setDate(T.getDate()-7);const C=T.toISOString().split("T")[0];te(C)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{A(!Oe),D({year:F.getFullYear(),month:F.getMonth()})},children:ue}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const T=new Date(V+"T12:00:00");T.setDate(T.getDate()+7);const C=T.toISOString().split("T")[0];C<=Mi()&&te(C)},"aria-label":"Next week",disabled:Sn[6]>=Mi(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:Sn.map((T,C)=>{const G=new Date(T+"T12:00:00").getDate(),Z=T===V,ze=T>Mi(),Pe=T===Mi();return a.jsxs("button",{className:`nut-week-day${Z?" selected":""}${Pe?" today":""}${ze?" future":""}`,disabled:ze,onClick:()=>te(T),children:[a.jsx("span",{className:"nut-week-day-letter",children:Es[C]}),a.jsx("span",{className:"nut-week-day-num",children:G})]},T)})})]}),Oe&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>D(T=>{let C=T.month-1,G=T.year;return C<0&&(C=11,G--),{year:G,month:C}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[rt[L.month]," ",L.year]}),a.jsx("button",{onClick:()=>D(T=>{let C=T.month+1,G=T.year;return C>11&&(C=0,G++),{year:G,month:C}}),disabled:L.year===new Date().getFullYear()&&L.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:qe.map(T=>a.jsx("span",{children:T},T))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(nt(L.year,L.month))].map((T,C)=>a.jsx("span",{},`e${C}`)),[...Array(We(L.year,L.month))].map((T,C)=>{const G=C+1,Z=`${L.year}-${String(L.month+1).padStart(2,"0")}-${String(G).padStart(2,"0")}`,ze=Z>Mi(),Pe=Z===V,Le=Z===Mi();return a.jsx("button",{className:`nut-cal-day${Pe?" selected":""}${Le?" today":""}${ze?" future":""}`,disabled:ze,onClick:()=>{te(Z),A(!1)},children:G},G)})]})]}),a.jsxs("div",{className:"nut-rings-row",children:[Jt("Protein","Protein",je.protein,x.protein,"ring-protein"),Jt("Carbs","Carbs",je.carbs,x.carbs,"ring-carbs"),Jt("Fats","Fats",je.fats,x.fats,"ring-fats"),Jt("Calories","kCal",je.calories,x.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone",children:a.jsxs("div",{className:"nut-light-content",children:[Ke&&a.jsxs("button",{className:"nut-water-quick",onClick:()=>R(!0),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsxs("span",{className:"nut-water-quick-count",children:[X.water," / ",x?.waterGoal||8]}),a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:f2.map(T=>{const C=X.entries.filter(Z=>(Z.meal||"snacks")===T.key),G=C.reduce((Z,ze)=>({protein:Z.protein+(ze.protein||0),carbs:Z.carbs+(ze.carbs||0),fats:Z.fats+(ze.fats||0),calories:Z.calories+(ze.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${T.key}`,children:U3[T.key]}),a.jsx("span",{className:"nut-meal-card-title",children:T.label}),C.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[G.calories," cal"]}),Ke&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>xt(Fe===T.key?null:T.key),"aria-label":`Add to ${T.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),C.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,x.protein>0?G.protein/x.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[G.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,x.carbs>0?G.carbs/x.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[G.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,x.fats>0?G.fats/x.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[G.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,x.calories>0?G.calories/x.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:G.calories})]})]}),C.length>0&&a.jsx("div",{className:"nut-log-list",children:C.map(Z=>a.jsxs("div",{className:"nut-log-item",children:[a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:Z.name}),Z.serving&&a.jsx("span",{className:"nut-log-item-serving",children:Z.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[Z.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[Z.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[Z.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:Z.calories})]}),Ke&&a.jsx("button",{className:"nut-log-delete",onClick:()=>In(Z.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},Z.id))}),C.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:Ke?"Tap + to add food":"No entries"})})]},T.key)})})})]})}),Fe&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>xt(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",f2.find(T=>T.key===Fe)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const T=Fe;xt(null),qs(T,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const T=Fe;xt(null),qs(T,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const T=Fe;xt(null),qs(T,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const T=Fe;xt(null),qs(T,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),E&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>R(!1),children:a.jsxs("div",{className:"nut-water-popup",onClick:T=>T.stopPropagation(),children:[a.jsxs("div",{className:"nut-water-popup-header",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),a.jsx("span",{children:"Water Intake"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>R(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsxs("div",{className:"nut-water-popup-body",children:[a.jsx("div",{className:"nut-water-glasses",children:[...Array(x?.waterGoal||8)].map((T,C)=>a.jsx("div",{className:`nut-water-glass ${C<X.water?"filled":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:C<X.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},C))}),a.jsxs("div",{className:"nut-water-popup-count",children:[X.water," / ",x?.waterGoal||8," glasses"]}),a.jsxs("div",{className:"nut-water-btns",children:[a.jsx("button",{onClick:It,disabled:X.water<=0,children:"-"}),a.jsx("button",{onClick:it,children:"+"})]})]})]})}),Y&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{Hn(),P(null),Se(null),dn(null)},children:a.jsxs("div",{className:"nut-modal",onClick:T=>T.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:Y==="scan"?"Scan Barcode":Y==="search"?"Search Food":Y==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{Hn(),P(null),Se(null),dn(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Y==="scan"&&!oe&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),Ve&&!ae&&a.jsx("div",{className:"nut-scan-line"}),ae&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:ae})]})]}),!Ve&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:gs,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),Ve&&!ae&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:W,onChange:T=>pe(T.target.value),onKeyDown:T=>T.key==="Enter"&&W.trim()&&xe(W.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>W.trim()&&xe(W.trim()),disabled:!W.trim()||Ne,children:Ne?"...":"Look Up"})]})]}),Y==="scan"&&oe&&(()=>{const T=oe.servingUnit||"g",C=oe.portion,G=Ye==="portion"&&C?Vt*C.weight:parseFloat(qt)||0,Z=G/100,ze=T==="ml"?[100,200,250,500]:[50,100,150,200],Pe=Ye==="portion"&&C?`${Vt} ${C.label}${Vt!==1?"s":""} (${Math.round(G)}${T})`:`${Math.round(G)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[oe.image&&a.jsx("img",{src:oe.image,alt:oe.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:oe.name}),a.jsx("button",{className:`nut-fav-star confirm${Ut(oe.name)?" active":""}`,onClick:()=>bn({name:oe.name,protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories,serving:oe.servingSize,per100g:{protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories},servingUnit:oe.servingUnit||"g",portion:oe.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Ut(oe.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),oe.brand&&a.jsx("p",{className:"nut-product-brand",children:oe.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[oe.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[oe.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[oe.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[oe.calories," cal"]})]}),C&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Ye==="portion"?"active":"",onClick:()=>{le("portion"),Vt<1&&mt(1)},children:"Portions"}),a.jsxs("button",{className:Ye==="weight"?"active":"",onClick:()=>{le("weight"),jt(String(Math.round(G)||100))},children:["Custom (",T,")"]})]}),Ye==="portion"&&C?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>mt(Math.max(1,Vt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Vt}),a.jsxs("span",{className:"nut-stepper-label",children:[C.label,Vt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(G),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>mt(Vt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:qt,onChange:Le=>jt(Le.target.value),onFocus:Le=>Le.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:ze.map(Le=>a.jsxs("button",{className:`nut-quick-btn${qt===String(Le)?" active":""}`,onClick:()=>jt(String(Le)),children:[Le,T]},Le))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(oe.protein*Z),"p / ",Math.round(oe.carbs*Z),"c / ",Math.round(oe.fats*Z),"f / ",Math.round(oe.calories*Z)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{dn(null),Se("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Zn({name:oe.name,protein:Math.round(oe.protein*Z),carbs:Math.round(oe.carbs*Z),fats:Math.round(oe.fats*Z),calories:Math.round(oe.calories*Z),serving:Pe}),children:"Add"})]})]})})(),Y==="search"&&!oe&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:be,value:_e,onChange:T=>et(T.target.value),onKeyDown:T=>{T.key==="Enter"&&(clearTimeout(ce.current),ye())},onFocus:()=>setTimeout(()=>be.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:ye,disabled:Ft,children:Ft?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[yt.map((T,C)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{dn(T),T.portion?(mt(1),jt(String(T.portion.weight)),le("portion")):(mt(0),jt(String(T.servingValue||100)),le("weight"))},children:[T.image&&a.jsx("img",{src:T.image,alt:T.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:T.name}),T.brand&&a.jsx("span",{className:"nut-search-item-brand",children:T.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[T.calories," cal  ",T.protein,"p  ",T.carbs,"c  ",T.fats,"f per 100",T.servingUnit||"g"]})]})]},C)),yt.length===0&&_e&&!Ft&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),Y==="search"&&oe&&(()=>{const T=oe.servingUnit||"g",C=oe.portion,G=Ye==="portion"&&C?Vt*C.weight:parseFloat(qt)||0,Z=G/100,ze=T==="ml"?[100,200,250,500]:[50,100,150,200],Pe=Ye==="portion"&&C?`${Vt} ${C.label}${Vt!==1?"s":""} (${Math.round(G)}${T})`:`${Math.round(G)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[oe.image&&a.jsx("img",{src:oe.image,alt:oe.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:oe.name}),a.jsx("button",{className:`nut-fav-star confirm${Ut(oe.name)?" active":""}`,onClick:()=>bn({name:oe.name,protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories,serving:oe.servingSize,per100g:{protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories},servingUnit:oe.servingUnit||"g",portion:oe.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Ut(oe.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),oe.brand&&a.jsx("p",{className:"nut-product-brand",children:oe.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[oe.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[oe.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[oe.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[oe.calories," cal"]})]}),C&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Ye==="portion"?"active":"",onClick:()=>{le("portion"),Vt<1&&mt(1)},children:"Portions"}),a.jsxs("button",{className:Ye==="weight"?"active":"",onClick:()=>{le("weight"),jt(String(Math.round(G)||100))},children:["Custom (",T,")"]})]}),Ye==="portion"&&C?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>mt(Math.max(1,Vt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Vt}),a.jsxs("span",{className:"nut-stepper-label",children:[C.label,Vt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(G),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>mt(Vt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:qt,onChange:Le=>jt(Le.target.value),onFocus:Le=>Le.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:ze.map(Le=>a.jsxs("button",{className:`nut-quick-btn${qt===String(Le)?" active":""}`,onClick:()=>jt(String(Le)),children:[Le,T]},Le))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(oe.protein*Z),"p / ",Math.round(oe.carbs*Z),"c / ",Math.round(oe.fats*Z),"f / ",Math.round(oe.calories*Z)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>dn(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Zn({name:oe.name,protein:Math.round(oe.protein*Z),carbs:Math.round(oe.carbs*Z),fats:Math.round(oe.fats*Z),calories:Math.round(oe.calories*Z),serving:Pe}),children:"Add"})]})]})})(),Y==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:Ct.name,onChange:T=>Rt(C=>({...C,name:T.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:Ct.serving,onChange:T=>Rt(C=>({...C,serving:T.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:Ct.protein,onChange:T=>Rt(C=>({...C,protein:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:Ct.carbs,onChange:T=>Rt(C=>({...C,carbs:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:Ct.fats,onChange:T=>Rt(C=>({...C,fats:T.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:Ct.calories,onChange:T=>Rt(C=>({...C,calories:T.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!Ct.name.trim(),onClick:()=>Zn({name:Ct.name,protein:parseFloat(Ct.protein)||0,carbs:parseFloat(Ct.carbs)||0,fats:parseFloat(Ct.fats)||0,calories:parseFloat(Ct.calories)||0,serving:Ct.serving||""}),children:"Add Food"})]}),Y==="favourites"&&!oe&&(()=>{const T=zn(),C=G=>{if(G.per100g){const Z=G.per100g;dn({name:G.name,brand:"",image:null,servingSize:G.serving||"100g",servingValue:100,servingUnit:G.servingUnit||"g",portion:G.portion||null,protein:Z.protein,carbs:Z.carbs,fats:Z.fats,calories:Z.calories,per100g:!0}),G.portion?(mt(1),jt(String(G.portion.weight)),le("portion")):(mt(0),jt("100"),le("weight"))}else Zn({name:G.name,protein:G.protein,carbs:G.carbs,fats:G.fats,calories:G.calories,serving:G.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:T.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:T.map((G,Z)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:ze=>{ze.stopPropagation(),bn(G)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>C(G),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:G.name}),a.jsx("span",{className:"nut-recent-item-serving",children:G.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[G.calories," cal"]})]})]},Z))})})})(),Y==="favourites"&&oe&&(()=>{const T=oe.servingUnit||"g",C=oe.portion,G=Ye==="portion"&&C?Vt*C.weight:parseFloat(qt)||0,Z=G/100,ze=T==="ml"?[100,200,250,500]:[50,100,150,200],Pe=Ye==="portion"&&C?`${Vt} ${C.label}${Vt!==1?"s":""} (${Math.round(G)}${T})`:`${Math.round(G)}${T}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:oe.name}),a.jsx("button",{className:`nut-fav-star confirm${Ut(oe.name)?" active":""}`,onClick:()=>bn({name:oe.name,protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories,serving:oe.servingSize,per100g:{protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories},servingUnit:oe.servingUnit||"g",portion:oe.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Ut(oe.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[oe.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[oe.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[oe.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[oe.calories," cal"]})]}),C&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:Ye==="portion"?"active":"",onClick:()=>{le("portion"),Vt<1&&mt(1)},children:"Portions"}),a.jsxs("button",{className:Ye==="weight"?"active":"",onClick:()=>{le("weight"),jt(String(Math.round(G)||100))},children:["Custom (",T,")"]})]}),Ye==="portion"&&C?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>mt(Math.max(1,Vt-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Vt}),a.jsxs("span",{className:"nut-stepper-label",children:[C.label,Vt!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(G),T]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>mt(Vt+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",T,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:qt,onChange:Le=>jt(Le.target.value),onFocus:Le=>Le.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:ze.map(Le=>a.jsxs("button",{className:`nut-quick-btn${qt===String(Le)?" active":""}`,onClick:()=>jt(String(Le)),children:[Le,T]},Le))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(oe.protein*Z),"p / ",Math.round(oe.carbs*Z),"c / ",Math.round(oe.fats*Z),"f / ",Math.round(oe.calories*Z)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>dn(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Zn({name:oe.name,protein:Math.round(oe.protein*Z),carbs:Math.round(oe.carbs*Z),fats:Math.round(oe.fats*Z),calories:Math.round(oe.calories*Z),serving:Pe}),children:"Add"})]})]})})()]})}),a.jsx(Sa,{active:"nutrition"}),pt&&a.jsx("div",{className:`toast-notification ${pt.type}`,children:pt.message})]})}const m2="/login/assets/randomiser-glq9YJkL.jpg",q3="/login/assets/programme-card-workout-CnNzTYkz.webp",H3="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",$3="/login/assets/mg-arms-BeOQU3wx.jpg",W3=60,Up=5,G3=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],K3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},Y3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},Q3={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},zp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Fp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:H3},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],qc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:$3},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],p2={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},g2=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],qp=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],wl=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],X3=[5,10,15,20,30];function J3(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function Z3(s){const e=[...s];for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[e[n],e[i]]=[e[i],e[n]]}return e}function eD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=qr(),{isDark:l,toggleTheme:u,accent:h}=Ca(),p=Js(),[g,y]=w.useState("menu"),[x,k]=w.useState(["bodyweight"]),[j,O]=w.useState("core"),[K,U]=w.useState("intermediate"),[V,te]=w.useState(15),[X,fe]=w.useState([]),[je,Ue]=w.useState(!1),Oe=w.useRef(!1),A=w.useRef([]),[E,R]=w.useState([]),[L,D]=w.useState(2),[z,I]=w.useState(wl[1]),[Fe,xt]=w.useState(1),[Y,Se]=w.useState(0),[Ve,ht]=w.useState("work"),[ae,P]=w.useState(0),[W,pe]=w.useState(!1),[Ne,Be]=w.useState(0),[_e,et]=w.useState(null),yt=w.useRef(null);w.useRef(null),w.useRef(null);const[Je,Ft]=w.useState(null),cn=w.useCallback(($,me="info")=>{Ft({message:$,type:me}),setTimeout(()=>Ft(null),3e3)},[]),[Ct,Rt]=w.useState(null),[oe,dn]=w.useState(null),[qt,jt]=w.useState(0),[Vt,mt]=w.useState(0),[Ye,le]=w.useState([]),[He,tt]=w.useState(""),[pt,Dt]=w.useState(""),[ct,St]=w.useState(!1),[ce,be]=w.useState(0),[Ie,Qe]=w.useState(!1),[Ke,We]=w.useState({}),nt=w.useRef(null),rt=w.useRef(null),[qe,Wt]=w.useState([]),[en,Xt]=w.useState(null),[jn,zn]=w.useState(0),[Ut,bn]=w.useState(0),[Zn,In]=w.useState(0),[hs,gs]=w.useState(0),[Hn,es]=w.useState(0),[rs,Yn]=w.useState(0),[Fs,Cs]=w.useState({beginner:0,intermediate:0,advanced:0}),[q,ge]=w.useState(null),[xe,we]=w.useState(""),[ye,it]=w.useState(!1);w.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),w.useEffect(()=>{if(!s||!n)return;(async()=>{try{const me=Yt(ke,"workoutLogs"),re=An(me,vn("clientId","==",n.id)),Me=(await _n(re)).docs.map(M=>M.data()),st=Me.filter(M=>M.type!=="programme");gs(st.length);const Mt=st.reduce((M,ee)=>M+(ee.duration||0),0);es(Mt);const ot={beginner:0,intermediate:0,advanced:0};st.forEach(M=>{M.level&&ot[M.level]!==void 0&&ot[M.level]++}),Cs(ot);const Zt=new Date,Fn=Zt.getDay(),fn=Fn===0?-6:1-Fn,Nn=new Date(Zt);Nn.setDate(Zt.getDate()+fn),Nn.setHours(0,0,0,0);const aa=Nn.getTime(),ia=Me.filter(M=>{const ee=M.completedAt;return ee?(ee.toDate?ee.toDate().getTime():new Date(ee).getTime())>=aa:!1});zn(ia.filter(M=>M.type!=="programme").length);let oa=0;if(n)try{const M=await Kn(Xe(ke,"clientProgrammes",n.id));if(M.exists()){const ee=M.data(),De=ee.templateId;oa=ia.filter(Ge=>Ge.type==="programme"&&Ge.programmeId===De).length,ge(De);const gt=Fp.find(Ge=>Ge.id===De);gt&&we(gt.name);const dt=Y3[De];if(dt){const Ge=Object.keys(ee.completedSessions||{}).length,at=dt.duration*dt.daysPerWeek;In(at>0?Math.round(Ge/at*100):0)}}else ge(null),we(""),In(0)}catch{}bn(oa);const pr=st.map(M=>M.completedAt).filter(Boolean).map(M=>M.toDate?M.toDate().getTime():new Date(M).getTime()).sort((M,ee)=>ee-M);if(pr.length===0)Yn(0);else{const M=new Set;pr.forEach(at=>{const Nt=new Date(at),un=Nt.getDay(),mn=un===0?-6:1-un,Ot=new Date(Nt);Ot.setDate(Nt.getDate()+mn),Ot.setHours(0,0,0,0),M.add(Ot.getTime())});const ee=[...M].sort((at,Nt)=>Nt-at);let De=0;const gt=new Date(Zt),dt=Zt.getDay()===0?-6:1-Zt.getDay();gt.setDate(Zt.getDate()+dt),gt.setHours(0,0,0,0);let Ge=gt.getTime();ee.includes(Ge)||(Ge-=10080*60*1e3);for(let at=0;at<200&&ee.includes(Ge);at++)De++,Ge-=10080*60*1e3;Yn(De)}}catch(me){console.error("Error loading workout stats:",me)}finally{it(!0)}})()},[s,n,g]);const It=()=>{const $=[];let me;j==="mix"?me=["core","upper","lower"]:j==="fullbody"?me=["upper","lower"]:me=[j];for(const re of x)for(const Re of me)$.push(`exercises/${re}/${Re}`);return $},ut=async()=>{if(Oe.current){for(;Oe.current;)await new Promise($=>setTimeout($,200));return A.current}Oe.current=!0,Ue(!0);try{const $=It(),me=[];for(const st of $)try{const Mt=Eo(jo,st),ot=await h2(Mt);me.push(...ot.items)}catch{console.warn(`Folder ${st} not found, skipping.`)}if(me.length===0&&x.includes("bodyweight")&&j==="core")try{const st=Eo(jo,"core"),Mt=await h2(st);me.push(...Mt.items)}catch{console.warn("Legacy core/ folder not found either.")}if(me.length===0){const st=x.map(ot=>g2.find(Zt=>Zt.key===ot)?.label).join(" + "),Mt=qp.find(ot=>ot.key===j)?.label;return cn(`No exercises found for ${st} / ${Mt}. Upload videos to Firebase Storage.`,"error"),Oe.current=!1,Ue(!1),[]}const re=new Set,Re=me.filter(st=>{const Mt=st.name.replace(/\.(mp4|gif)$/i,"");return re.has(Mt)?!1:(re.add(Mt),!0)}),Me=await Promise.all(Re.map(async st=>{const Mt=await Pl(st),ot=J3(st.name.replace(/\.(mp4|gif)$/i,"")),Zt=/\.gif$/i.test(st.name);return{name:ot,videoUrl:Mt,isGif:Zt}}));return A.current=Me,fe(Me),Oe.current=!1,Ue(!1),Me}catch($){console.error("Error loading exercises:",$);const me=$.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${$.message||$.code||"Unknown error"}`;return cn(me,"error"),Oe.current=!1,Ue(!1),[]}},_t=async()=>{y("spinning"),A.current=[];const $=await ut();if($.length===0){y("setup");return}const me=wl.find(Fn=>Fn.key===K);I(me);const re=me.work+me.rest,Re=V*60,Me=Math.floor(Re/re);let st,Mt;Me<=6?(st=Math.max(3,Math.floor(Me/2)),Mt=Math.floor(Me/st)):Me<=12?(st=Math.min(6,Math.floor(Me/2)),Mt=Math.floor(Me/st)):(st=Math.min(10,Math.floor(Me/2)),Mt=Math.floor(Me/st)),Mt=Math.max(2,Mt);const ot=Z3($),Zt=ot.slice(0,Math.min(st,ot.length));R(Zt),D(Mt),setTimeout(()=>y("preview"),2e3)},wt=()=>{y("countdown"),Be(3)};w.useEffect(()=>{if(g!=="countdown")return;if(Ne<=0){y("workout"),xt(1),Se(0),ht("work"),P(z.work),pe(!1),Pe();return}ze();const $=setTimeout(()=>Be(me=>me-1),1e3);return()=>clearTimeout($)},[Ne,g]),w.useEffect(()=>{if(g!=="workout"||W)return;if(ae<=0){Jt();return}ae<=3&&ze();const $=setTimeout(()=>P(me=>me-1),1e3);return()=>clearTimeout($)},[ae,g,W]);const Jt=()=>{if(Ve==="work")ht("rest"),P(z.rest);else{const $=Y+1;if($>=E.length){const me=Fe+1;if(me>L){y("complete"),Rs();return}xt(me),Se(0)}else Se($);ht("work"),P(z.work),Pe()}},Rs=async()=>{if(s)try{await Xa(Yt(ke,"workoutLogs"),{clientId:n.id,level:K,duration:V,equipment:x,focus:j,exerciseCount:E.length,rounds:L,exercises:E.map($=>$.name),completedAt:bt.now()}),zn($=>$+1),gs($=>$+1),es($=>$+V),Cs($=>({...$,[K]:($[K]||0)+1}))}catch($){console.error("Error saving workout log:",$)}},Es=async($,me,re)=>{if(!(!n||!me))try{const Re=n.id,Me=await Kn(Xe(ke,"coreBuddyPBs",Re)),Mt=(Me.exists()?Me.data():null)?.exercises||{},ot=Mt[$];let Zt=!1;if(ot?(me>(ot.weight||0)||me===(ot.weight||0)&&re>(ot.reps||0))&&(Zt=!0):Zt=!0,Zt){const Fn={...Mt,[$]:{weight:me,reps:re,achievedAt:bt.now()}};await On(Xe(ke,"coreBuddyPBs",Re),{clientId:n.id,exercises:Fn,updatedAt:bt.now()}),cn(`New PB! ${me}kg  ${re} reps`,"success"),ze(),await qs($,me)}}catch(Re){console.error("Error checking PB:",Re)}},qs=async($,me)=>{if(n)try{const re=await Kn(Xe(ke,"coreBuddyTargets",n.id));if(!re.exists())return;const Me=(re.data().targets||{})[$];if(!Me||me<Me.targetWeight)return;const st=await Kn(Xe(ke,"coreBuddyAchievements",n.id)),Mt=st.exists()?st.data():{clientId:n.id,badges:[],totalVolume:0};if(Mt.badges.some(fn=>fn.type==="pb_target"&&fn.exercise===$&&fn.targetWeight===Me.targetWeight))return;const Zt={type:"pb_target",exercise:$,group:K3[$]||"push",targetWeight:Me.targetWeight,achievedAt:bt.now()},Fn=[...Mt.badges,Zt];await On(Xe(ke,"coreBuddyAchievements",n.id),{...Mt,badges:Fn,updatedAt:bt.now()}),Wt(fn=>[...fn,Zt])}catch(re){console.error("Error checking target badge:",re)}},Sn=async $=>{if(!(!n||$<=0))try{const me=await Kn(Xe(ke,"coreBuddyAchievements",n.id)),re=me.exists()?me.data():{clientId:n.id,badges:[],totalVolume:0},Re=re.totalVolume||0,Me=Re+$,st=[];G3.forEach(ot=>{Me>=ot.threshold&&Re<ot.threshold&&(re.badges.some(Fn=>Fn.type==="volume_milestone"&&Fn.milestone===ot.threshold)||st.push({type:"volume_milestone",milestone:ot.threshold,label:ot.label,achievedAt:bt.now()}))});const Mt=[...re.badges,...st];await On(Xe(ke,"coreBuddyAchievements",n.id),{clientId:n.id,badges:Mt,totalVolume:Math.round(Me),updatedAt:bt.now()}),st.length>0&&Wt(ot=>[...ot,...st])}catch(me){console.error("Error updating volume:",me)}},F=async $=>{if(dn($),$.interval){const Re=[];for(const Me of $.exercises){let st=null,Mt=!1;if(Me.storagePath)try{const ot=Eo(jo,Me.storagePath);st=await Pl(ot),Mt=/\.gif$/i.test(Me.storagePath)}catch{}Re.push({name:Me.name,videoUrl:st,isGif:Mt})}R(Re),D($.rounds),I({work:$.work,rest:$.rest}),y("preview");return}const me={};for(const Re of $.exercises)if(Re.storagePath)try{const Me=Eo(jo,Re.storagePath);me[Re.name]={url:await Pl(Me),isGif:/\.gif$/i.test(Re.storagePath)}}catch{}We(me);const re=$.exercises.map(Re=>({name:Re.name,type:Re.type,targetSets:Re.sets,targetReps:Re.reps||0,targetTime:Re.time||0,sets:[]}));le(re),jt(0),mt(0),tt(""),Dt(""),Qe(!1),St(!1),be(0),Wt([]),Xt(null),y("muscle_workout")},ue=()=>{const $=nt.current;$&&($.paused?($.play(),Qe(!0)):($.pause(),Qe(!1)))};w.useEffect(()=>{if(g!=="muscle_workout"||!ct||ce<=0){g==="muscle_workout"&&ct&&ce<=0&&(St(!1),ze());return}return rt.current=setTimeout(()=>be($=>$-1),1e3),()=>clearTimeout(rt.current)},[g,ct,ce]);const T=async()=>{const $=Ye[qt];let me={};if($.type==="weighted"){const Me=parseFloat(He)||0,st=parseInt(pt)||0;if(st===0){cn("Enter your reps","error");return}me={weight:Me,reps:st}}else if($.type==="reps"){const Me=parseInt(pt)||0;if(Me===0){cn("Enter your reps","error");return}me={reps:Me}}else if($.type==="timed"){const Me=$.targetTime-ce;me={time:Math.max(Me,1)}}const re=[...Ye];re[qt]={...$,sets:[...$.sets,me]},le(re),$.type==="weighted"&&me.weight>0&&await Es($.name,me.weight,me.reps);const Re=$.sets.length+1;if(Re<$.targetSets)mt(Re),Dt(""),St(!1),be(0);else if(qt+1<Ye.length){const Me=qt+1;jt(Me),mt(0),tt(""),Dt(""),Qe(!1),St(!1),be(0)}else await C(re),y("muscle_complete")},C=async $=>{if(!(!s||!n))try{const me=$.reduce((Re,Me)=>Re+Me.sets.reduce((st,Mt)=>st+(Mt.weight||0)*(Mt.reps||0),0),0),re=$.reduce((Re,Me)=>Re+Me.sets.length,0);await Xa(Yt(ke,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:Ct,sessionId:oe?.id,sessionName:oe?.name,exerciseCount:$.length,totalSets:re,duration:Math.round(re*1.5),volume:Math.round(me),exercises:$.map(Re=>({name:Re.name,type:Re.type,sets:Re.sets})),completedAt:bt.now()}),me>0&&await Sn(me),qe.length>0&&Xt({badges:[...qe]})}catch(me){console.error("Error saving muscle group workout log:",me)}},G=w.useRef(null),Z=()=>(G.current||(G.current=new(window.AudioContext||window.webkitAudioContext)),G.current),ze=()=>{try{const $=Z(),me=$.createOscillator(),re=$.createGain();me.connect(re),re.connect($.destination),me.frequency.value=880,re.gain.value=.3,me.start($.currentTime),me.stop($.currentTime+.15)}catch{}},Pe=()=>{try{const $=Z(),me=$.createOscillator(),re=$.createGain();me.connect(re),re.connect($.destination),me.frequency.value=1200,re.gain.value=.4,me.start($.currentTime),me.stop($.currentTime+.3)}catch{}};w.useEffect(()=>{if(g!=="workout"||Ve!=="work"||!E[Y]?.isGif)return;const me=setInterval(()=>{const re=yt.current;if(!re)return;const Re=re.getAttribute("src");re.removeAttribute("src"),setTimeout(()=>{yt.current&&yt.current.setAttribute("src",Re)},0)},4e3);return()=>clearInterval(me)},[g,Ve,Y,Fe,E]);const Le=($,me,re)=>{const Re=Math.round($/me*W3);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:M3.map((Me,st)=>a.jsx("line",{x1:Me.x1,y1:Me.y1,x2:Me.x2,y2:Me.y2,className:st<Re?`wk-tick-filled ${re}`:"wk-tick-empty",strokeWidth:Me.thick?"3":"2"},st))})},Bt=()=>{const $=E.length*L;return((Fe-1)*E.length+Y+(Ve==="rest"?.5:0))/$},kt=Je&&a.jsx("div",{className:`toast-notification ${Je.type}`,children:Je.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:a.jsx("img",{src:m2,alt:"Randomise Workout",className:"wk-hero-bg"})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[Fp.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:Fp.map(($,me)=>$.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:$.id}}),style:{animationDelay:`${me*.06}s`},children:[a.jsx("img",{src:$.image,alt:$.name,className:"wk-prog-img"}),me===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},$.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:$.id}}),style:{animationDelay:`${me*.06}s`},children:[a.jsx("img",{src:q3,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:Q3[$.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[$.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:$.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:$.name.toUpperCase()}),a.jsxs("p",{children:[$.daysPerWeek,"x per week  ",$.focus==="fullbody"?"Full Body":$.focus.charAt(0).toUpperCase()+$.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),me===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},$.id))})}),a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[qc.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:qc.map(($,me)=>a.jsx("button",{className:`wk-muscle-hero-card${$.image?" wk-muscle-thumb":""}`,onClick:()=>{Rt($.key),y("muscle_sessions")},style:{animationDelay:`${me*.05}s`},children:$.image?a.jsx("img",{src:$.image,alt:$.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:m2,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:zp[$.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:$.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:$.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[p2[$.key]?.length||0," sessions"]})]})]})]})},$.key))})]}),a.jsx(Sa,{active:"workouts"}),kt]});if(g==="setup"){const $=qp.find(re=>re.key===j)?.label||j,me=wl.find(re=>re.key===K)?.label||K;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsx("div",{className:"wk-stats-row",children:[{label:"Total",value:`${hs}`,pct:hs>0?Math.min(Math.round(hs/100*100),100):0,color:"#14b8a6",size:"normal"},{label:"This Week",value:`${jn}/${Up}`,pct:Math.round(Math.min(jn,Up)/Up*100),color:"var(--color-primary)",size:"large"},{label:"Wk Streak",value:`${rs}`,pct:rs>0?Math.min(Math.round(rs/12*100),100):0,color:"#38B6FF",size:"normal"}].map(re=>{const Me=2*Math.PI*38,st=Me-re.pct/100*Me;return a.jsxs("div",{className:`wk-stat-item${re.size==="large"?" wk-stat-large":""}`,children:[a.jsxs("div",{className:"wk-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wk-stat-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"wk-stat-fill",cx:"50",cy:"50",r:38,style:{stroke:re.color},strokeDasharray:Me,strokeDashoffset:st})]}),a.jsx("span",{className:"wk-stat-value",style:{color:re.color},children:re.value})]}),a.jsx("span",{className:"wk-stat-label",children:re.label})]},re.label)})}),a.jsxs("div",{className:"wk-setup-flow",children:[a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:qp.map(re=>a.jsxs("button",{className:`wk-equip-btn${j===re.key?" active":""}${re.key==="mix"?" wk-mix-btn":""}`,onClick:()=>O(re.key),children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:re.icon})}),a.jsx("span",{children:re.label})]},re.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:wl.map(re=>a.jsxs("button",{className:`wk-level-card wk-level-${re.key}${K===re.key?" active":""}`,onClick:()=>U(re.key),children:[a.jsx("span",{className:"wk-level-name",children:re.label}),a.jsx("span",{className:"wk-level-desc",children:re.desc})]},re.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:X3.map(re=>a.jsxs("button",{className:`wk-time-btn${V===re?" active":""}`,onClick:()=>te(re),children:[a.jsx("span",{className:"wk-time-num",children:re}),a.jsx("span",{className:"wk-time-unit",children:"min"})]},re))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:g2.map(re=>{const Re=x.includes(re.key);return a.jsxs("button",{className:`wk-equip-btn${Re?" active":""}`,onClick:()=>{k(Me=>Re&&Me.length===1?Me:Re?Me.filter(st=>st!==re.key):[...Me,re.key])},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:re.icon})}),a.jsx("span",{children:re.label})]},re.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[$,"  ",me,"  ",V," min"]})})]})]}),a.jsx("div",{className:"wk-go-sticky",children:a.jsx("button",{className:"wk-randomise-btn",onClick:_t,disabled:je,children:je?"Loading exercises...":"Randomise Workout"})}),kt]})}if(g==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:su.map(($,me)=>a.jsx("line",{x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,className:"wk-spin-tick",strokeWidth:$.thick?"3.5":"2",style:{animationDelay:`${me*.03}s`}},me))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),kt]});if(g==="preview"){const $=oe?.interval?{work:oe.work,rest:oe.rest}:wl.find(re=>re.key===K),me=E.length*L*($.work+$.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y(oe?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[oe?.interval&&a.jsx("h2",{className:"mg-preview-title",children:oe.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:E.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:L}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(me/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[$.work,"/",$.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:E.map((re,Re)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${Re*.06}s`},onClick:()=>et(re),children:[a.jsx("span",{className:"wk-preview-num",children:Re+1}),a.jsx("div",{className:"wk-preview-thumb",children:re.isGif?a.jsx("img",{src:re.videoUrl,alt:re.name,loading:"lazy"}):a.jsx("video",{src:`${re.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:re.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},Re))}),_e&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>et(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:re=>re.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>et(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:_e.isGif?a.jsx("img",{src:_e.videoUrl,alt:_e.name}):a.jsx("video",{src:_e.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:_e.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!oe?.interval&&a.jsxs("button",{className:"wk-btn-secondary",onClick:()=>_t(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),a.jsx("button",{className:"wk-btn-primary",onClick:wt,children:"Start Workout"})]})]})]})}if(g==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:Ne}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const $=E[Y],me=Ve==="work"?z.work:z.rest,re=Ve==="rest"?Y+1<E.length?E[Y+1]:Fe<L?E[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"wk-video-container",children:Ve==="work"?$.isGif?a.jsx("img",{ref:yt,className:"wk-video",src:$.videoUrl,alt:$.name},$.videoUrl):a.jsx("video",{className:"wk-video",src:$.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},$.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),re&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",re.name]})]})}),a.jsx("div",{className:"wk-back-row",children:a.jsxs("button",{className:"wk-back-btn",onClick:()=>{confirm("Leave workout?")&&y("menu")},children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[Y+1," / ",E.length]}),a.jsx("h2",{className:"wk-exercise-name",children:$.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",Fe," of ",L]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[Le(ae,me,Ve==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:ae}),a.jsx("span",{className:`wk-timer-phase ${Ve}`,children:Ve==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>pe(!W),children:W?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{P(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${Bt()*100}%`}})})]})}if(g==="complete"){const $=wl.find(re=>re.key===K),me=E.length*L*($.work+$.rest);return a.jsx("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:su.map((re,Re)=>a.jsx("line",{x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,className:"wk-tick-complete",strokeWidth:re.thick?"3.5":"2",style:{animationDelay:`${Re*.02}s`}},Re))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(me/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:E.length*L}),a.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:L}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{dn(null),Rt(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const $=qc.find(re=>re.key===Ct),me=p2[Ct]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:zp[Ct]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:$?.icon})})}),a.jsxs("h2",{children:[$?.label," Workouts"]}),a.jsxs("p",{children:[me.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:me.map((re,Re)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{dn(re),y("muscle_overview")},style:{animationDelay:`${Re*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:re.name}),a.jsx("p",{children:re.desc}),a.jsx("div",{className:"mg-session-meta",children:re.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[re.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[re.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[re.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const Me=re.exercises.map(ot=>ot.sets||0),st=Math.min(...Me),Mt=Math.max(...Me);return st===Mt?`${st} sets each`:`${st}-${Mt} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},re.id))})]}),kt]})}if(g==="muscle_overview"){const $=oe;if(!$)return null;const me=qc.find(re=>re.key===Ct);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:{background:zp[Ct]},children:a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:me?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:$.name}),$.level&&a.jsx("span",{className:"mg-overview-level",children:$.level})]}),a.jsx("p",{className:"mg-overview-desc",children:$.desc})]}),$.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:$.overview})]}),$.tips&&$.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:$.tips.map((re,Re)=>a.jsx("li",{children:re},Re))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",$.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:$.exercises.map((re,Re)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:Re+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:re.name}),$.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[$.work,"s work / ",$.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[re.sets," sets  ",re.reps?`${re.reps} reps`:`${re.time}s`,re.type==="weighted"&&"  weighted"]})]})]},Re))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>F($),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),kt]})}if(g==="muscle_workout"){const $=oe;if(!$)return null;const me=$.exercises[qt],re=Ye[qt];if(!me||!re)return null;const Re=re.sets.length,Me=$.exercises.length,st=$.exercises.reduce((fn,Nn)=>fn+(Nn.sets||0),0),ot=Ye.reduce((fn,Nn)=>fn+Nn.sets.length,0)/st*100,Zt=Ke[me.name];me.type==="timed"&&ce===0&&!ct&&Re===Vt&&setTimeout(()=>be(me.time),0);const Fn=Re+1<me.sets?"Log Set":qt+1<Me?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${ot}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",qt+1,"/",Me]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[Zt?a.jsxs("div",{className:"mg-video-container",onClick:ue,children:[Zt.isGif?a.jsx("img",{className:"mg-video",src:Zt.url,alt:me.name}):a.jsx("video",{ref:nt,className:"mg-video",src:Zt.url,loop:!0,muted:!0,playsInline:!0},me.name),!Ie&&!Zt.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:me.name}),a.jsx("span",{className:`mg-ex-type-badge ${me.type}`,children:me.type==="weighted"?"Weight + Reps":me.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",Re+1," of ",me.sets]}),me.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",me.reps," reps"]}),me.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",me.time,"s"]})]}),me.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:He,onChange:fn=>tt(fn.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:pt,onChange:fn=>Dt(fn.target.value),placeholder:"0"})]})]}),me.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:pt,onChange:fn=>Dt(fn.target.value),placeholder:"0"})]})}),me.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[ce,"s"]})}),ct?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>St(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{ce===0&&be(me.time),St(!0)},children:ce<me.time&&ce>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:T,children:Fn}),re.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:re.sets.map((fn,Nn)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",Nn+1,": ",fn.weight!=null?`${fn.weight}kg  ${fn.reps}`:fn.reps!=null?`${fn.reps} reps`:`${fn.time}s`]})]},Nn))})]})]}),kt]})}if(g==="muscle_complete"){const $=Ye.reduce((Re,Me)=>Re+Me.sets.length,0),me=Ye.reduce((Re,Me)=>Re+Me.sets.reduce((st,Mt)=>st+(Mt.weight||0)*(Mt.reps||0),0),0),re=qc.find(Re=>Re.key===Ct)?.label||"";return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"wk-complete",children:[a.jsxs("div",{className:"wk-complete-ring",children:[a.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:su.map((Re,Me)=>a.jsx("line",{x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,className:"wk-tick-complete",strokeWidth:Re.thick?"3.5":"2",style:{animationDelay:`${Me*.02}s`}},Me))}),a.jsx("div",{className:"wk-complete-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsxs("h2",{className:"wk-complete-title",children:[re," Complete!"]}),a.jsx("p",{className:"mg-complete-session-name",children:oe?.name}),a.jsxs("div",{className:"wk-complete-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Ye.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:$}),a.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),me>0&&a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.round(me).toLocaleString()}),a.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),a.jsx("div",{className:"wk-complete-actions",children:a.jsx("button",{className:"wk-btn-primary",onClick:()=>{dn(null),Rt(null),Xt(null),y("menu")},children:"Done"})})]}),en&&a.jsx("div",{className:"mg-badge-celebration",onClick:()=>Xt(null),children:a.jsxs("div",{className:"mg-badge-celebration-card",children:[a.jsx("div",{className:"mg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:a.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),a.jsx("h3",{className:"mg-badge-celebration-title",children:en.badges.length===1?"Badge Earned!":`${en.badges.length} Badges Earned!`}),a.jsx("div",{className:"mg-badge-celebration-list",children:en.badges.map((Re,Me)=>a.jsx("div",{className:"mg-badge-celebration-item",children:Re.type==="pb_target"?`${Re.exercise}  ${Re.targetWeight}kg`:Re.label},Me))}),a.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const tD=60,nD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},sD=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],y2=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function ad(s,e,n){const i=s.baseReps?s.baseReps+(e-1)*(n.repProg||0):void 0,l=s.baseTime?s.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:s.sets,reps:i,time:l}}const rD={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function aD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=qr(),{isDark:l,toggleTheme:u,accent:h}=Ca(),p=Js(),g=ra(),[y,x]=w.useState("loading"),[k,j]=w.useState(null),O=w.useRef(!1),[K,U]=w.useState(null),[V,te]=w.useState(1),[X,fe]=w.useState(0),[je,Ue]=w.useState(0),[Oe,A]=w.useState(0),[E,R]=w.useState([]),[L,D]=w.useState(""),[z,I]=w.useState(""),[Fe,xt]=w.useState(!1),[Y,Se]=w.useState(0),Ve=w.useRef(null),[ht,ae]=w.useState({}),[P,W]=w.useState(!1),pe=w.useRef(null),[Ne,Be]=w.useState(null),[_e,et]=w.useState([]);w.useEffect(()=>{window.scrollTo(0,0)},[y]);const[yt,Je]=w.useState(null),Ft=w.useCallback((ce,be="info")=>{Je({message:ce,type:be}),setTimeout(()=>Je(null),4e3)},[]),cn=w.useRef(null),Ct=()=>(cn.current||(cn.current=new(window.AudioContext||window.webkitAudioContext)),cn.current),Rt=()=>{try{const ce=Ct(),be=ce.createOscillator(),Ie=ce.createGain();be.connect(Ie),Ie.connect(ce.destination),be.frequency.value=1200,Ie.gain.value=.4,be.start(ce.currentTime),be.stop(ce.currentTime+.3)}catch{}};w.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),w.useEffect(()=>{if(!n)return;(async()=>{try{const be=Xe(ke,"clientProgrammes",n.id),Ie=await Kn(be);Ie.exists()?(U(Ie.data()),x("dashboard")):g.state?.templateId?x("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(be){console.error("Error loading programme:",be),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),w.useEffect(()=>{if(O.current||y==="loading")return;const ce=g.state?.templateId;if(!ce)return;const be=y2.find(Ie=>Ie.id===ce);be&&(O.current=!0,j(be),x("overview"))},[y,g.state]),w.useEffect(()=>{if(!Fe||Y<=0){Fe&&Y<=0&&(xt(!1),Rt());return}return Ve.current=setTimeout(()=>Se(ce=>ce-1),1e3),()=>clearTimeout(Ve.current)},[Fe,Y]);const oe=async ce=>{if(n)try{await On(Xe(ke,"clientProgrammes",n.id),ce),U(ce)}catch(be){console.error("Error saving programme:",be),Ft("Failed to save. Check Firestore rules for clientProgrammes.","error")}},dn=async ce=>{const be={templateId:ce.id,startDate:bt.now(),completedSessions:{}};await oe(be),x("dashboard")},qt=async()=>{if(n)try{await mr(Xe(ke,"clientProgrammes",n.id)),U(null),x("browse")}catch(ce){console.error("Error quitting programme:",ce)}},jt=()=>K?y2.find(ce=>ce.id===K.templateId):null,Vt=()=>{if(!K)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const ce=K.completedSessions||{},be=Object.keys(ce).length,Ie=jt();if(!Ie)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const Qe=Ie.duration*Ie.daysPerWeek,Ke=Math.min(Math.floor(be/Ie.daysPerWeek)+1,Ie.duration),We=be-(Ke-1)*Ie.daysPerWeek;for(let nt=1;nt<=Ie.duration;nt++)for(let rt=0;rt<Ie.daysPerWeek;rt++){const qe=`w${nt}d${rt}`;if(!ce[qe])return{currentWeek:nt,completedThisWeek:We,nextDay:rt,nextWeek:nt,totalCompleted:be,totalSessions:Qe}}return{currentWeek:Ie.duration,completedThisWeek:Ie.daysPerWeek,nextDay:-1,totalCompleted:be,totalSessions:Qe,complete:!0}},mt=(ce,be,Ie)=>{if(!K||ce<=1)return null;const Qe=`w${ce-1}d${be}`,Ke=K.completedSessions?.[Qe];if(!Ke)return null;const We=Ke.exercises?.find(nt=>nt.name===Ie);return We?.sets?.length?We.sets[We.sets.length-1]:null},Ye=(ce,be)=>{const Ie=jt();if(!Ie)return;te(ce),fe(be),Ue(0),A(0),R([]),I(""),xt(!1),Se(0),W(!1),ae({});const Qe=Ie.days[be],Ke=Qe.exercises.map(qe=>{const Wt=ad(qe,ce,Ie);return{name:qe.name,type:qe.type,pbKey:qe.pbKey,targetSets:Wt.sets,targetReps:Wt.reps,targetTime:Wt.time,sets:[]}});R(Ke);const We=Qe.exercises[0],nt=mt(ce,be,We.name);nt?.weight&&We.type==="weighted"?D(String(nt.weight)):D(""),(async()=>{const qe={};for(const Wt of Qe.exercises)if(Wt.storagePath)try{const en=Eo(jo,Wt.storagePath),Xt=await Pl(en);qe[Wt.name]={url:Xt,isGif:/\.gif$/i.test(Wt.storagePath)}}catch(en){console.warn(`Video not found for ${Wt.name}:`,en)}ae(qe)})(),x("session")},le=async()=>{jt();const ce=E[je];if(!ce)return;let be={};if(ce.type==="weighted"){const Ke=parseFloat(L)||0,We=parseInt(z)||0;if(We===0){Ft("Enter your reps","error");return}be={weight:Ke,reps:We}}else if(ce.type==="reps"){const Ke=parseInt(z)||0;if(Ke===0){Ft("Enter your reps","error");return}be={reps:Ke}}else if(ce.type==="timed"){const Ke=ce.targetTime-Y;be={time:Math.max(Ke,1)}}const Ie=[...E];Ie[je]={...ce,sets:[...ce.sets,be]},R(Ie),ce.type==="weighted"&&be.weight>0&&await pt(ce.name,be.weight,be.reps);const Qe=ce.sets.length+1;if(Qe<ce.targetSets)A(Qe),D(be.weight?String(be.weight):""),I(""),xt(!1),Se(0);else if(je+1<E.length){const Ke=je+1;Ue(Ke),A(0),W(!1);const nt=jt()?.days[X]?.exercises[Ke],rt=mt(V,X,nt?.name);rt?.weight&&nt?.type==="weighted"?D(String(rt.weight)):D(""),I(""),xt(!1),Se(0)}else await He(Ie)},He=async ce=>{if(!K||!n)return;const be=`w${V}d${X}`,Ie={...K.completedSessions,[be]:{completedAt:new Date().toISOString(),exercises:ce.map(We=>({name:We.name,type:We.type,sets:We.sets}))}},Qe={...K,completedSessions:Ie};await oe(Qe);const Ke=ce.reduce((We,nt)=>We+nt.sets.reduce((rt,qe)=>rt+(qe.weight||0)*(qe.reps||0),0),0);Ke>0&&await tt(Ke);try{const We=jt();await Xa(Yt(ke,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:We?.id,programmeName:We?.name,week:V,day:X+1,exerciseCount:ce.length,duration:Math.round(ce.reduce((nt,rt)=>nt+rt.sets.length*1.5,0)),volume:Math.round(Ke),completedAt:bt.now()})}catch(We){console.error("Error saving workout log:",We)}_e.length>0&&(Be({badges:[..._e]}),et([])),x("sessionComplete")},tt=async ce=>{if(n)try{const be=await Kn(Xe(ke,"coreBuddyAchievements",n.id)),Ie=be.exists()?be.data():{clientId:n.id,badges:[],totalVolume:0},Qe=Ie.totalVolume||0,Ke=Qe+ce,We=[];sD.forEach(rt=>{Ke>=rt.threshold&&Qe<rt.threshold&&(Ie.badges.some(Wt=>Wt.type==="volume_milestone"&&Wt.milestone===rt.threshold)||We.push({type:"volume_milestone",milestone:rt.threshold,label:rt.label,achievedAt:bt.now()}))});const nt=[...Ie.badges,...We];await On(Xe(ke,"coreBuddyAchievements",n.id),{clientId:n.id,badges:nt,totalVolume:Math.round(Ke),updatedAt:bt.now()}),We.length>0&&et(rt=>[...rt,...We])}catch(be){console.error("Error updating volume:",be)}},pt=async(ce,be,Ie)=>{if(n)try{const Qe=n.id,Ke=await Kn(Xe(ke,"coreBuddyPBs",Qe)),nt=(Ke.exists()?Ke.data():null)?.exercises||{},rt=nt[ce];let qe=!1;if(rt?(be>(rt.weight||0)||be===(rt.weight||0)&&Ie>(rt.reps||0))&&(qe=!0):qe=!0,qe){const Wt={...nt,[ce]:{weight:be,reps:Ie,achievedAt:bt.now()}};await On(Xe(ke,"coreBuddyPBs",Qe),{clientId:n.id,exercises:Wt,updatedAt:bt.now()}),Ft(`New PB! ${be}kg  ${Ie} reps`,"success"),Rt(),await Dt(ce,be)}}catch(Qe){console.error("Error checking PB:",Qe)}},Dt=async(ce,be)=>{if(n)try{const Ie=await Kn(Xe(ke,"coreBuddyTargets",n.id));if(!Ie.exists())return;const Ke=(Ie.data().targets||{})[ce];if(!Ke||be<Ke.targetWeight)return;const We=await Kn(Xe(ke,"coreBuddyAchievements",n.id)),nt=We.exists()?We.data():{clientId:n.id,badges:[],totalVolume:0};if(nt.badges.some(en=>en.type==="pb_target"&&en.exercise===ce&&en.targetWeight===Ke.targetWeight))return;const qe={type:"pb_target",exercise:ce,group:nD[ce]||"push",targetWeight:Ke.targetWeight,achievedAt:bt.now()},Wt=[...nt.badges,qe];await On(Xe(ke,"coreBuddyAchievements",n.id),{...nt,badges:Wt,updatedAt:bt.now()}),et(en=>[...en,qe])}catch(Ie){console.error("Error checking target badge:",Ie)}},ct=yt&&a.jsxs("div",{className:`toast-notification ${yt.type}`,children:[yt.type==="success"&&a.jsx("span",{children:" "}),yt.message]}),St=(ce,be)=>a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:be,"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(i||y==="loading")return a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&k){const ce=k;return a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[St(ce.name,()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-overview-hero",children:[a.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:rD[ce.focus]})}),a.jsx("h2",{className:"pg-overview-name",children:ce.name}),a.jsx("p",{className:"pg-overview-desc",children:ce.description}),a.jsxs("div",{className:"pg-overview-stats",children:[a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:ce.duration}),a.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:ce.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),a.jsxs("div",{className:"pg-ov-stat",children:[a.jsx("span",{className:"pg-ov-stat-num",children:ce.duration*ce.daysPerWeek}),a.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),a.jsx("div",{className:"pg-overview-days",children:ce.days.map((be,Ie)=>a.jsxs("div",{className:"pg-day-card",children:[a.jsxs("div",{className:"pg-day-header",children:[a.jsx("span",{className:"pg-day-name",children:be.name}),a.jsx("span",{className:"pg-day-label",children:be.label})]}),a.jsx("div",{className:"pg-day-exercises",children:be.exercises.map((Qe,Ke)=>{const We=ad(Qe,1,ce);return a.jsxs("div",{className:"pg-day-ex",children:[a.jsx("span",{className:"pg-day-ex-name",children:Qe.name}),a.jsx("span",{className:"pg-day-ex-target",children:Qe.type==="timed"?`${We.sets}${We.time}s`:`${We.sets}${We.reps}`}),a.jsx("span",{className:`pg-day-ex-badge pg-badge-${Qe.type}`,children:Qe.type==="weighted"?"WT":Qe.type==="timed"?"TMR":"BW"})]},Ke)})})]},Ie))}),a.jsxs("div",{className:"pg-overview-note",children:[a.jsx("strong",{children:"Progressive Overload:"})," +",ce.repProg," reps/week",ce.timeProg?`, +${ce.timeProg}s/week for timed`:""]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>dn(ce),children:"Start Programme"})]}),ct]})}if(y==="dashboard"){const ce=jt();if(!ce)return x("browse"),null;const be=Vt(),Ie=K?.completedSessions||{},Qe=be.totalSessions?Math.round(be.totalCompleted/be.totalSessions*100):0;return Math.round(be.totalCompleted/(be.totalSessions||1)*tD),a.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":h,children:[St("Programme",()=>p("/client/core-buddy/workouts")),a.jsxs("main",{className:"pg-main",children:[a.jsxs("div",{className:"pg-dash-hero",children:[a.jsxs("div",{className:"pg-dash-ring-wrap",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"pg-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"pg-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-Qe/100*2*Math.PI*80})]}),a.jsxs("div",{className:"pg-ring-center",children:[a.jsxs("span",{className:"pg-ring-pct",children:[Qe,"%"]}),a.jsx("span",{className:"pg-ring-label",children:"complete"})]})]}),a.jsx("h2",{className:"pg-dash-name",children:ce.name}),a.jsxs("div",{className:"pg-dash-progress-text",children:[a.jsxs("span",{className:"pg-dash-pct",children:[Qe,"%"]}),a.jsxs("span",{className:"pg-dash-week",children:["Week ",be.currentWeek," of ",ce.duration]})]})]}),a.jsx("div",{className:"pg-weeks",children:Array.from({length:ce.duration},(Ke,We)=>{const nt=We+1;return a.jsxs("div",{className:`pg-week-row${nt===be.currentWeek?" pg-week-current":""}`,children:[a.jsxs("span",{className:"pg-week-label",children:["W",nt]}),a.jsx("div",{className:"pg-week-days",children:ce.days.map((rt,qe)=>{const Wt=`w${nt}d${qe}`,en=!!Ie[Wt],Xt=!be.complete&&nt===be.nextWeek&&qe===be.nextDay;return a.jsx("button",{className:`pg-day-dot${en?" done":""}${Xt?" next":""}`,disabled:en,onClick:()=>{Xt&&Ye(nt,qe)},children:en?a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}):a.jsx("span",{children:rt.name.replace("Day ","")})},qe)})})]},We)})}),!be.complete&&be.nextDay>=0&&a.jsxs("div",{className:"pg-next-session",children:[a.jsx("h3",{children:"Next Session"}),a.jsxs("p",{className:"pg-next-info",children:["Week ",be.nextWeek,"  ",ce.days[be.nextDay].name,": ",ce.days[be.nextDay].label]}),a.jsx("div",{className:"pg-next-exercises",children:ce.days[be.nextDay].exercises.map((Ke,We)=>{const nt=ad(Ke,be.nextWeek,ce);return a.jsxs("div",{className:"pg-next-ex",children:[a.jsx("span",{className:"pg-next-ex-name",children:Ke.name}),a.jsx("span",{className:"pg-next-ex-target",children:Ke.type==="timed"?`${nt.sets}${nt.time}s`:`${nt.sets}${nt.reps}`})]},We)})}),a.jsx("button",{className:"pg-start-btn",onClick:()=>Ye(be.nextWeek,be.nextDay),children:"Start Session"})]}),be.complete&&a.jsxs("div",{className:"pg-complete-msg",children:[a.jsx("h3",{children:"Programme Complete! "}),a.jsxs("p",{children:["You finished all ",be.totalSessions," sessions."]}),a.jsx("button",{className:"pg-start-btn",onClick:qt,children:"Choose New Programme"})]}),a.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&qt()},children:"Quit Programme"})]}),a.jsx(Sa,{active:"workouts"}),ct]})}if(y==="session"){const ce=jt();if(!ce)return null;const be=ce.days[X],Ie=be.exercises[je],Qe=ad(Ie,V,ce),Ke=E[je],We=Ke?.sets?.length||0,nt=be.exercises.length,rt=(je+We/Qe.sets)/nt,qe=ht[Ie.name],Wt=mt(V,X,Ie.name);Ie.type==="timed"&&Y===0&&!Fe&&We===Oe&&setTimeout(()=>Se(Qe.time),0);const en=()=>{qe?.isGif?W(!P):pe.current&&(P?pe.current.pause():pe.current.play(),W(!P))};return a.jsxs("div",{className:"pg-page pg-page-session","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("div",{className:"pg-session-progress",children:a.jsx("div",{className:"pg-session-progress-fill",style:{width:`${rt*100}%`}})}),a.jsxs("div",{className:"pg-session-header",children:[a.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&x("dashboard")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),a.jsxs("div",{className:"pg-session-title",children:[a.jsxs("span",{className:"pg-session-counter",children:[je+1," / ",nt]}),a.jsxs("span",{className:"pg-session-week",children:["Week ",V,"  ",be.name]})]})]}),qe&&a.jsxs("div",{className:"pg-video-container",onClick:en,children:[qe.isGif?a.jsx("img",{className:"pg-video",src:qe.url,alt:Ie.name}):a.jsx("video",{ref:pe,className:"pg-video",src:qe.url,loop:!0,muted:!0,playsInline:!0},Ie.name),!P&&a.jsxs("div",{className:"pg-video-overlay",children:[a.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),a.jsx("div",{className:"pg-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"pg-exercise-card",children:[a.jsx("h2",{className:"pg-ex-name",children:Ie.name}),a.jsx("span",{className:`pg-ex-type-badge pg-badge-${Ie.type}`,children:Ie.type==="weighted"?"Weight + Reps":Ie.type==="timed"?"Timed":"Reps Only"}),Ie.type==="weighted"&&Wt&&a.jsxs("div",{className:"pg-last-week",children:[a.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),a.jsxs("span",{className:"pg-last-week-value",children:[Wt.weight,"kg x ",Wt.reps," reps"]})]}),a.jsxs("div",{className:"pg-ex-set-info",children:[a.jsxs("span",{className:"pg-ex-set-num",children:["Set ",We+1," of ",Qe.sets]}),a.jsxs("span",{className:"pg-ex-target",children:["Target: ",Ie.type==="timed"?`${Qe.time}s hold`:`${Qe.reps} reps`]})]}),Ie.type==="weighted"&&a.jsxs("div",{className:"pg-input-area",children:[a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",value:L,onChange:Xt=>D(Xt.target.value),placeholder:"0",className:"pg-input"})]}),a.jsxs("div",{className:"pg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:z,onChange:Xt=>I(Xt.target.value),placeholder:String(Qe.reps),className:"pg-input"})]})]}),Ie.type==="reps"&&a.jsx("div",{className:"pg-input-area",children:a.jsxs("div",{className:"pg-input-group pg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",value:z,onChange:Xt=>I(Xt.target.value),placeholder:String(Qe.reps),className:"pg-input"})]})}),Ie.type==="timed"&&a.jsxs("div",{className:"pg-timer-area",children:[a.jsx("div",{className:"pg-timer-display",children:a.jsxs("span",{className:"pg-timer-value",children:[Y,"s"]})}),Fe?a.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>xt(!1),children:"Stop"}):a.jsx("button",{className:"pg-timer-btn",onClick:()=>{Y===0&&Se(Qe.time),xt(!0)},children:Y<Qe.time&&Y>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"pg-log-set-btn",onClick:le,disabled:Ie.type==="timed"&&Fe,children:We+1<Qe.sets?"Log Set":je+1<nt?"Log Set  Next Exercise":"Log Set  Complete"}),Ke?.sets?.length>0&&a.jsx("div",{className:"pg-completed-sets",children:Ke.sets.map((Xt,jn)=>a.jsxs("div",{className:"pg-completed-set",children:[a.jsx("span",{className:"pg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",jn+1,": ",Xt.weight!==void 0?`${Xt.weight}kg  ${Xt.reps}`:Xt.time!==void 0?`${Xt.time}s`:`${Xt.reps} reps`]})]},jn))})]}),ct]})}if(y==="sessionComplete"){const be=jt()?.days[X],Ie=E.reduce((Ke,We)=>Ke+We.sets.length,0),Qe=E.reduce((Ke,We)=>Ke+We.sets.reduce((nt,rt)=>nt+(rt.weight||0)*(rt.reps||0),0),0);return a.jsxs("div",{className:"pg-page pg-page-center","data-theme":l?"dark":"light","data-accent":h,children:[a.jsxs("div",{className:"pg-session-done",children:[a.jsxs("div",{className:"pg-done-ring",children:[a.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:su.map((Ke,We)=>a.jsx("line",{x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,className:"pg-tick-complete",strokeWidth:Ke.thick?"3.5":"2",style:{animationDelay:`${We*.02}s`}},We))}),a.jsx("div",{className:"pg-done-center",children:a.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),a.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),a.jsxs("p",{className:"pg-done-subtitle",children:["Week ",V,"  ",be?.name,": ",be?.label]}),a.jsxs("div",{className:"pg-done-stats",children:[a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:E.length}),a.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Ie}),a.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),Qe>0&&a.jsxs("div",{className:"pg-done-stat",children:[a.jsx("span",{className:"pg-done-stat-num",children:Math.round(Qe).toLocaleString()}),a.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),a.jsx("button",{className:"pg-start-btn",onClick:()=>x("dashboard"),children:"Back to Programme"})]}),Ne&&a.jsx("div",{className:"pg-badge-celebration",onClick:()=>Be(null),children:a.jsxs("div",{className:"pg-badge-celebration-card",onClick:Ke=>Ke.stopPropagation(),children:[a.jsx("div",{className:"pg-badge-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pg-badge-celebration-title",children:Ne.badges.length===1?"Badge Earned!":`${Ne.badges.length} Badges Earned!`}),a.jsx("div",{className:"pg-badge-celebration-list",children:Ne.badges.map((Ke,We)=>a.jsx("div",{className:"pg-badge-celebration-item",children:Ke.type==="pb_target"?`${Ke.exercise}  ${Ke.targetWeight}kg`:Ke.label},We))}),a.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Be(null),children:"Tap to dismiss"})]})}),ct]})}return null}const iD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},oD={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},Hp=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function lD(s){return iD[s]||"push"}function cD(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function uD(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function hD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=qr(),{isDark:l,toggleTheme:u,accent:h}=Ca(),p=Js(),[g,y]=w.useState(!0),[x,k]=w.useState(null),[j,O]=w.useState({});w.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),w.useEffect(()=>{if(!n)return;(async()=>{try{const[R,L]=await Promise.all([Kn(Xe(ke,"coreBuddyAchievements",n.id)),Kn(Xe(ke,"coreBuddyPBs",n.id))]);R.exists()&&k(R.data()),L.exists()&&O(L.data().exercises||{})}catch(R){console.error("Error loading achievements:",R)}y(!1)})()},[n]);const K=x?.badges||[],U=x?.totalVolume||0,V=K.filter(E=>E.type==="pb_target"),te=K.filter(E=>E.type==="volume_milestone"),X={push:[],pull:[],lower:[],core:[]};V.forEach(E=>{const R=E.group||lD(E.exercise);X[R]&&X[R].push(E)});const fe=Hp.find(E=>U<E.threshold),je=Hp.filter(E=>U>=E.threshold).pop()?.threshold||0,Ue=fe?(U-je)/(fe.threshold-je):1;if(i||g)return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsx("div",{className:"ach-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});const Oe=K.length,A=Oe>0||U>0;return a.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ach-main",children:[a.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/personal-bests?mode=corebuddy"),children:" Back"}),a.jsxs("div",{className:"ach-stats-banner",children:[a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Oe}),a.jsx("span",{className:"ach-stat-label",children:Oe===1?"Badge":"Badges"})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:cD(U)}),a.jsxs("span",{className:"ach-stat-label",children:[uD(U)," lifted"]})]}),a.jsx("div",{className:"ach-stat-divider"}),a.jsxs("div",{className:"ach-stat-item",children:[a.jsx("span",{className:"ach-stat-num",children:Object.keys(j).length}),a.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!A&&a.jsxs("div",{className:"ach-empty",children:[a.jsx("div",{className:"ach-empty-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),a.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),a.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),a.jsx("h4",{children:"No achievements yet"}),a.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),a.jsxs("div",{className:"ach-volume-hero",children:[a.jsxs("div",{className:"ach-volume-ring",children:[a.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:su.map((E,R)=>{const L=R<Math.round(Ue*60);return a.jsx("line",{x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,className:L?"ach-tick-filled":"ach-tick-empty",strokeWidth:E.thick?"3":"2"},R)})}),a.jsxs("div",{className:"ach-volume-center",children:[a.jsx("span",{className:"ach-volume-number",children:Math.round(U).toLocaleString()}),a.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),fe&&a.jsxs("div",{className:"ach-volume-next",children:["Next: ",a.jsx("strong",{children:fe.label})," (",(fe.threshold-U).toLocaleString(),"kg to go)"]})]}),a.jsx("div",{className:"ach-milestone-shelf",children:Hp.map((E,R)=>{const L=U>=E.threshold,D=te.find(z=>z.milestone===E.threshold);return a.jsxs("div",{className:`ach-milestone ${L?"unlocked":"locked"}`,children:[a.jsx("div",{className:"ach-milestone-hex",children:a.jsx("span",{className:"ach-milestone-icon",children:E.icon})}),a.jsx("span",{className:"ach-milestone-label",children:E.label}),D?.achievedAt&&a.jsx("span",{className:"ach-milestone-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},R)})})]}),a.jsxs("div",{className:"ach-section",children:[a.jsxs("h3",{className:"ach-section-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),V.length===0?a.jsx("div",{className:"ach-pb-empty",children:a.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",a.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(X).map(([E,R])=>{if(R.length===0)return null;const L=oD[E];return a.jsxs("div",{className:"ach-group",children:[a.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:L.color},children:[a.jsx("span",{className:"ach-group-label",style:{color:L.color},children:L.label}),a.jsx("span",{className:"ach-group-count",children:R.length})]}),a.jsx("div",{className:"ach-badge-grid",children:R.map((D,z)=>a.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${z*.06}s`,"--group-color":L.color},children:[a.jsx("div",{className:"ach-badge-hex",style:{borderColor:L.color,boxShadow:`0 0 12px ${L.color}33`},children:a.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:L.color,strokeWidth:"2",strokeLinecap:"round",children:a.jsx("path",{d:L.icon})})}),a.jsxs("div",{className:"ach-badge-info",children:[a.jsx("span",{className:"ach-badge-exercise",children:D.exercise}),a.jsxs("span",{className:"ach-badge-value",style:{color:L.color},children:[D.targetWeight,"kg"]}),D.achievedAt&&a.jsx("span",{className:"ach-badge-date",children:(D.achievedAt.toDate?D.achievedAt.toDate():new Date(D.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},z))})]},E)})]})]}),a.jsx(Sa,{active:"home"})]})}const id=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function dD(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function $p(s){return s.toISOString().split("T")[0]}function fD(s){return Array.from({length:7},(e,n)=>{const i=new Date(s);return i.setDate(s.getDate()+n),i})}function mD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=qr(),{isDark:l,toggleTheme:u,accent:h}=Ca(),p=Js(),[g,y]=w.useState({}),[x,k]=w.useState(!0),[j,O]=w.useState(!1),[K,U]=w.useState(0),[V,te]=w.useState(null),[X,fe]=w.useState(null),[je,Ue]=w.useState(!1),Oe=w.useRef([]),A=w.useRef([]),E=w.useCallback((W,pe="info")=>{te({message:W,type:pe}),setTimeout(()=>te(null),3e3)},[]),R=new Date,L=$p(R),D=dD(R),z=fD(D),I=["M","T","W","T","F","S","S"];w.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),w.useEffect(()=>{if(!s||!n)return;(async()=>{try{const pe=Yt(ke,"habitLogs"),Ne=An(pe,vn("clientId","==",n.id)),Be=await _n(Ne),_e={};Be.docs.forEach(Je=>{const Ft=Je.data();_e[Ft.date]={...Ft,_id:Je.id}}),y(_e);let et=0;const yt=new Date(R);for(;;){const Je=$p(yt),Ft=_e[Je];if(Ft)if(Object.values(Ft.habits||{}).filter(Boolean).length>=3)et++,yt.setDate(yt.getDate()-1);else break;else if(Je===L)yt.setDate(yt.getDate()-1);else break}U(et)}catch(pe){console.error("Error loading habit logs:",pe)}finally{k(!1)}})()},[s,n]);const Fe=g[L]||{habits:{}},xt=async W=>{if(!s||j)return;const pe=Fe.habits?.[W]||!1;pe||(Oe.current=[...Array(10)].map((Ne,Be)=>{const _e=Be/10*2*Math.PI,et=18+Math.random()*20;return{tx:Math.cos(_e)*et,ty:Math.sin(_e)*et,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),fe(W),setTimeout(()=>fe(null),700)),O(!0);try{const Ne=Fe.habits||{},Be={...Ne,[W]:!Ne[W]},_e=Fe._id||`${n.id}_${L}`;await On(Xe(ke,"habitLogs",_e),{clientId:n.id,date:L,habits:Be}),y(yt=>({...yt,[L]:{clientId:n.id,date:L,habits:Be,_id:_e}})),Object.values(Be).filter(Boolean).length===id.length&&!pe&&(A.current=[...Array(50)].map((yt,Je)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][Je%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{Ue(!0),setTimeout(()=>Ue(!1),3500)},500))}catch(Ne){console.error("Error saving habit:",Ne),E("Failed to save. Try again.","error")}finally{O(!1)}},Y=z.map(W=>{const pe=$p(W),Ne=g[pe],Be=Ne?Object.values(Ne.habits||{}).filter(Boolean).length:0;return{date:W,dateStr:pe,completed:Be,total:id.length}}),Se=Y.reduce((W,pe)=>W+pe.completed,0),Ve=Y.reduce((W,pe)=>W+pe.total,0),ht=Ve>0?Math.round(Se/Ve*100):0,ae=Object.values(Fe.habits||{}).filter(Boolean).length,P=Math.round(ae/id.length*100);return a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":h,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||x?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-ring-section",children:[a.jsxs("div",{className:"cbc-progress-ring",children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-P/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-pct",children:[P,"%"]}),a.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),a.jsxs("div",{className:"cbc-streak",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),a.jsx("span",{className:"cbc-streak-count",children:K}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsx("div",{className:"cbc-habits",children:id.map(W=>{const pe=Fe.habits?.[W.key]||!1,Ne=X===W.key;return a.jsxs("button",{className:`cbc-habit-btn cbc-habit-${W.key} ${pe?"cbc-habit-done":""} ${Ne?"cbc-habit-just-checked":""}`,onClick:()=>xt(W.key),disabled:j,children:[a.jsx("div",{className:"cbc-habit-check",children:pe?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${Ne?"cbc-check-animate":""}`})}):a.jsx("div",{className:"cbc-habit-circle"})}),Ne&&a.jsx("div",{className:"cbc-particles",children:Oe.current.map((Be,_e)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${Be.tx}px`,"--ty":`${Be.ty}px`,"--size":`${Be.size}px`,animationDuration:`${Be.duration}s`}},_e))}),a.jsx("div",{className:`cbc-habit-icon cbc-icon-${W.key}`,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:a.jsx("path",{d:W.icon})})}),a.jsx("span",{className:"cbc-habit-label",children:W.label})]},W.key)})})]}),a.jsxs("div",{className:"cbc-section",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsx("div",{className:"cbc-week-grid",children:Y.map((W,pe)=>{const Ne=W.dateStr===L,Be=W.total>0?W.completed/W.total:0,_e=38,et=2*Math.PI*_e,yt=et-Be*et;return a.jsxs("div",{className:`cbc-day-ring ${Ne?"cbc-day-today":""} ${W.completed>0?"cbc-day-active":""}`,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:_e}),a.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:_e,strokeDasharray:et,strokeDashoffset:yt})]}),a.jsx("span",{className:"cbc-day-label",children:I[pe]}),a.jsxs("span",{className:"cbc-day-count",children:[W.completed,"/",W.total]})]},pe)})}),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${ht}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[Se," / ",Ve," habits this week (",ht,"%)"]})]})]})]}),a.jsx(Sa,{active:"home"}),je&&a.jsxs("div",{className:"cbc-celebration",onClick:()=>Ue(!1),children:[a.jsx("div",{className:"cbc-confetti-container",children:A.current.map((W,pe)=>a.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${W.x}%`,"--delay":`${W.delay}s`,"--color":W.color,"--drift":`${W.drift}px`,"--spin":`${W.spin}deg`,"--duration":`${W.duration}s`,width:`${W.width}px`,height:`${W.height}px`}},pe))}),a.jsxs("div",{className:"cbc-celebration-card",children:[a.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),a.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),a.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),V&&a.jsx("div",{className:`toast-notification ${V.type}`,children:V.message})]})}function od(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function v2(s,e){return[s,e].sort().join("_")}function pD(){const{currentUser:s,isClient:e,clientData:n,loading:i}=qr(),{isDark:l,toggleTheme:u}=Ca(),h=Js(),[p,g]=w.useState("buddies"),[y,x]=w.useState([]),[k,j]=w.useState([]),[O,K]=w.useState([]),[U,V]=w.useState(""),[te,X]=w.useState([]),[fe,je]=w.useState([]),[Ue,Oe]=w.useState(!0),[A,E]=w.useState(null),[R,L]=w.useState(null),D=w.useCallback((ae,P="info")=>{L({message:ae,type:P}),setTimeout(()=>L(null),3500)},[]);w.useEffect(()=>{!i&&(!s||!e)&&h("/")},[s,e,i,h]);const z=w.useCallback(async()=>{if(n){Oe(!0);try{const ae=n.id,W=(await _n(Yt(ke,"clients"))).docs.map(Je=>({id:Je.id,...Je.data()}));je(W);const pe=Object.fromEntries(W.map(Je=>[Je.id,Je])),Ne=await _n(An(Yt(ke,"buddies"),vn("user1","==",ae))),Be=await _n(An(Yt(ke,"buddies"),vn("user2","==",ae))),_e=new Set;[...Ne.docs,...Be.docs].forEach(Je=>{const Ft=Je.data(),cn=Ft.user1===ae?Ft.user2:Ft.user1;_e.add(cn)}),x(Array.from(_e).map(Je=>pe[Je]).filter(Boolean));const et=await _n(An(Yt(ke,"buddyRequests"),vn("toId","==",ae),vn("status","==","pending")));j(et.docs.map(Je=>({reqId:Je.id,...Je.data(),fromClient:pe[Je.data().fromId]})).filter(Je=>Je.fromClient));const yt=await _n(An(Yt(ke,"buddyRequests"),vn("fromId","==",ae),vn("status","==","pending")));K(yt.docs.map(Je=>({reqId:Je.id,...Je.data(),toClient:pe[Je.data().toId]})).filter(Je=>Je.toClient))}catch(ae){console.error("Error fetching buddy data:",ae),D("Failed to load buddies","error")}finally{Oe(!1)}}},[n,D]);w.useEffect(()=>{z()},[z]),w.useEffect(()=>{if(!U.trim()||!n){X([]);return}const ae=U.toLowerCase(),P=n.id,W=new Set(y.map(_e=>_e.id)),pe=new Set(O.map(_e=>_e.toId)),Ne=new Set(k.map(_e=>_e.fromId)),Be=fe.filter(_e=>_e.id===P||!_e.name||!_e.coreBuddyAccess&&_e.clientType!=="core_buddy"?!1:_e.name.toLowerCase().includes(ae)).map(_e=>({..._e,isBuddy:W.has(_e.id),isPendingOut:pe.has(_e.id),isPendingIn:Ne.has(_e.id)})).slice(0,20);X(Be)},[U,fe,y,O,k,n]);const I=async(ae,P)=>{if(!(!n||ae===n.id))try{await Xa(Yt(ke,"notifications"),{toId:ae,fromId:n.id,fromName:n.name||"Someone",fromPhotoURL:n.photoURL||null,type:P,read:!1,createdAt:Ur()})}catch(W){console.error("Notification error:",W),W.code==="permission-denied"&&D("Notifications blocked  check Firestore rules","error")}},Fe=async ae=>{E(ae);try{const P=`${n.id}_${ae}`;await On(Xe(ke,"buddyRequests",P),{fromId:n.id,toId:ae,status:"pending",createdAt:Ur()}),await I(ae,"buddy_request"),D("Buddy request sent!","success"),await z()}catch(P){console.error("Error sending request:",P),D("Failed to send request","error")}finally{E(null)}},xt=async ae=>{E(ae.reqId);try{const P=v2(ae.fromId,n.id);await On(Xe(ke,"buddies",P),{user1:[ae.fromId,n.id].sort()[0],user2:[ae.fromId,n.id].sort()[1],connectedAt:Ur()}),await mr(Xe(ke,"buddyRequests",ae.reqId)),await I(ae.fromId,"buddy_accept"),D("Buddy added!","success"),await z()}catch(P){console.error("Error accepting request:",P),D("Failed to accept","error")}finally{E(null)}},Y=async ae=>{E(ae.reqId);try{await mr(Xe(ke,"buddyRequests",ae.reqId)),D("Request declined","info"),await z()}catch(P){console.error("Error declining:",P),D("Failed to decline","error")}finally{E(null)}},Se=async ae=>{E(ae.reqId);try{await mr(Xe(ke,"buddyRequests",ae.reqId)),D("Request cancelled","info"),await z()}catch(P){console.error("Error cancelling:",P),D("Failed to cancel","error")}finally{E(null)}},Ve=async ae=>{E(ae);try{const P=v2(n.id,ae);await mr(Xe(ke,"buddies",P)),D("Buddy removed","info"),await z()}catch(P){console.error("Error removing buddy:",P),D("Failed to remove buddy","error")}finally{E(null)}},ht=k.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!n?null:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>h("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),ht>0&&a.jsx("span",{className:"bdy-tab-badge",children:ht})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Ue?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(ae=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${ae.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:ae.photoURL?a.jsx("img",{src:ae.photoURL,alt:ae.name}):a.jsx("span",{children:od(ae.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:ae.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:P=>{P.stopPropagation(),Ve(ae.id)},disabled:A===ae.id,"aria-label":"Remove buddy",children:A===ae.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ae.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[k.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:k.map(ae=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:ae.fromClient.photoURL?a.jsx("img",{src:ae.fromClient.photoURL,alt:ae.fromClient.name}):a.jsx("span",{children:od(ae.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ae.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>xt(ae),disabled:A===ae.reqId,children:A===ae.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>Y(ae),disabled:A===ae.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},ae.reqId))})]}),O.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:O.map(ae=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:ae.toClient?.photoURL?a.jsx("img",{src:ae.toClient.photoURL,alt:ae.toClient.name}):a.jsx("span",{children:od(ae.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ae.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>Se(ae),disabled:A===ae.reqId,children:A===ae.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},ae.reqId))})]}),k.length===0&&O.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:U,onChange:ae=>V(ae.target.value),autoFocus:!0}),U&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>V(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),U.trim()&&te.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',U,'"']})}),te.length>0&&a.jsx("div",{className:"bdy-list",children:te.map(ae=>a.jsxs("div",{className:"bdy-card",onClick:()=>h(`/client/core-buddy/profile/${ae.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:ae.photoURL?a.jsx("img",{src:ae.photoURL,alt:ae.name}):a.jsx("span",{children:od(ae.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:ae.name}),ae.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),ae.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):ae.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):ae.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:P=>{P.stopPropagation();const W=k.find(pe=>pe.fromId===ae.id);W&&xt(W)},disabled:!!A,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:P=>{P.stopPropagation(),Fe(ae.id)},disabled:A===ae.id,children:A===ae.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},ae.id))})]})]})]}),a.jsx(Sa,{}),R&&a.jsxs("div",{className:`toast-notification ${R.type}`,children:[a.jsx("span",{className:"toast-icon",children:R.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):R.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:R.message})]})]})}function ld(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Wp(s,e){return[s,e].sort().join("_")}function b2(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),n=Math.floor((new Date-e)/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function gD(){const{userId:s}=XE(),{currentUser:e,isClient:n,clientData:i,loading:l}=qr(),{isDark:u,toggleTheme:h}=Ca(),p=Js(),[g,y]=w.useState(null),[x,k]=w.useState("none"),[j,O]=w.useState(null),[K,U]=w.useState(!0),[V,te]=w.useState(!1),[X,fe]=w.useState(null),[je,Ue]=w.useState([]),[Oe,A]=w.useState(!1),[E,R]=w.useState(new Set),[L,D]=w.useState(new Set),[z,I]=w.useState({}),[Fe,xt]=w.useState({}),[Y,Se]=w.useState({}),[Ve,ht]=w.useState([]),[ae,P]=w.useState(!1),[W,pe]=w.useState(null),[Ne,Be]=w.useState([]),_e=w.useCallback((le,He="info")=>{fe({message:le,type:He}),setTimeout(()=>fe(null),3500)},[]);w.useEffect(()=>{!l&&(!e||!n)&&p("/")},[e,n,l,p]),w.useEffect(()=>{i&&s&&i.id===s&&p("/client/core-buddy",{replace:!0})},[i,s,p]),w.useEffect(()=>{if(!i||!s||i.id===s)return;let le=!1;return(async()=>{U(!0);try{const pt=(await _n(Yt(ke,"clients"))).docs.map(ce=>({id:ce.id,...ce.data()})).find(ce=>ce.id===s);if(!pt){le||U(!1);return}le||y(pt);const Dt=i.id,ct=Wp(Dt,s);if((await Kn(Xe(ke,"buddies",ct))).exists())le||k("buddy");else{const ce=`${Dt}_${s}`,be=await Kn(Xe(ke,"buddyRequests",ce));if(be.exists()&&be.data().status==="pending")le||(k("pending_out"),O(ce));else{const Ie=`${s}_${Dt}`,Qe=await Kn(Xe(ke,"buddyRequests",Ie));Qe.exists()&&Qe.data().status==="pending"?le||(k("pending_in"),O(Ie)):le||k("none")}}}catch(He){console.error("Error loading profile:",He)}finally{le||U(!1)}})(),()=>{le=!0}},[i,s]),w.useEffect(()=>{if(!i)return;const le=i.id;(async()=>{try{const[He,tt,pt]=await Promise.all([_n(An(Yt(ke,"buddies"),vn("user1","==",le))),_n(An(Yt(ke,"buddies"),vn("user2","==",le))),_n(Yt(ke,"clients"))]),Dt=new Set;[...He.docs,...tt.docs].forEach(St=>{const ce=St.data();Dt.add(ce.user1===le?ce.user2:ce.user1)});const ct={};pt.docs.forEach(St=>{ct[St.id]=St.data()}),ht(Array.from(Dt).filter(St=>ct[St]).map(St=>({id:St,name:ct[St].name,photoURL:ct[St].photoURL||null})))}catch(He){console.error("Error loading buddies for mentions:",He)}})()},[i]);const et=async(le,He,tt={})=>{if(!(!i||le===i.id))try{await Xa(Yt(ke,"notifications"),{toId:le,fromId:i.id,fromName:i.name||"Someone",fromPhotoURL:i.photoURL||null,type:He,read:!1,createdAt:Ur(),...tt})}catch(pt){console.error("Notification error:",pt),pt.code==="permission-denied"&&_e("Notifications blocked  check Firestore rules","error")}},yt=async()=>{te(!0);try{const le=`${i.id}_${s}`;await On(Xe(ke,"buddyRequests",le),{fromId:i.id,toId:s,status:"pending",createdAt:Ur()}),await et(s,"buddy_request"),k("pending_out"),O(le),_e("Buddy request sent!","success")}catch(le){console.error(le),_e("Failed to send request","error")}finally{te(!1)}},Je=async()=>{if(j){te(!0);try{const le=Wp(i.id,s);await On(Xe(ke,"buddies",le),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:Ur()}),await mr(Xe(ke,"buddyRequests",j)),await et(s,"buddy_accept"),k("buddy"),_e("Buddy added!","success")}catch(le){console.error(le),_e("Failed to accept","error")}finally{te(!1)}}},Ft=async()=>{if(j){te(!0);try{await mr(Xe(ke,"buddyRequests",j)),k("none"),_e(x==="pending_out"?"Request cancelled":"Request declined","info")}catch(le){console.error(le),_e("Failed","error")}finally{te(!1)}}},cn=async()=>{te(!0);try{const le=Wp(i.id,s);await mr(Xe(ke,"buddies",le)),k("none"),_e("Buddy removed","info")}catch(le){console.error(le),_e("Failed to remove","error")}finally{te(!1)}},Ct=w.useCallback(async()=>{if(s){A(!0);try{const le=await _n(An(Yt(ke,"posts"),vn("authorId","==",s),Hd("createdAt","desc"),$d(30)));if(Ue(le.docs.map(He=>({id:He.id,...He.data()}))),i){const He=await _n(An(Yt(ke,"postLikes"),vn("userId","==",i.id)));R(new Set(He.docs.map(tt=>tt.data().postId)))}}catch(le){console.error("Error loading journey:",le)}finally{A(!1)}}},[s,i]);w.useEffect(()=>{!K&&g&&Ct()},[K,g,Ct]);const Rt=async le=>{if(window.confirm("Delete this post?"))try{await mr(Xe(ke,"posts",le)),Ue(He=>He.filter(tt=>tt.id!==le)),_e("Post deleted","info")}catch(He){console.error("Delete error:",He),_e("Failed to delete","error")}},oe=async le=>{if(!i)return;const He=i.id,tt=`${le}_${He}`,pt=E.has(le),Dt=new Set(E);pt?Dt.delete(le):Dt.add(le),R(Dt),Ue(ct=>ct.map(St=>St.id===le?{...St,likeCount:Math.max(0,(St.likeCount||0)+(pt?-1:1))}:St));try{if(pt)await mr(Xe(ke,"postLikes",tt)),await To(Xe(ke,"posts",le),{likeCount:Dl(-1)});else{await On(Xe(ke,"postLikes",tt),{postId:le,userId:He,createdAt:Ur()}),await To(Xe(ke,"posts",le),{likeCount:Dl(1)});const ct=je.find(St=>St.id===le);ct&&et(ct.authorId,"like",{postId:le})}}catch(ct){console.error("Like error:",ct),Ct()}},dn=async le=>{try{const He=await _n(An(Yt(ke,"postComments"),vn("postId","==",le),Hd("createdAt","asc"),$d(50)));I(tt=>({...tt,[le]:He.docs.map(pt=>({id:pt.id,...pt.data()}))}))}catch(He){console.error("Error loading comments:",He)}},qt=le=>{const He=new Set(L);He.has(le)?He.delete(le):(He.add(le),z[le]||dn(le)),D(He)},jt=(le,He)=>{const tt=le.match(/@(\w*)$/);if(tt){P(!0),pe(He);const pt=Ve.filter(Dt=>Dt.name&&Dt.name.toLowerCase().includes(tt[1].toLowerCase())).slice(0,5);Be(pt)}else P(!1),Be([])},Vt=(le,He)=>{const pt=(Fe[He]||"").replace(/@\w*$/,`@${le.name} `);xt(Dt=>({...Dt,[He]:pt})),P(!1),Be([])},mt=(le,He)=>{xt(tt=>({...tt,[le]:He})),jt(He,le)},Ye=async le=>{const He=(Fe[le]||"").trim();if(!(!He||!i)){Se(tt=>({...tt,[le]:!0}));try{await Xa(Yt(ke,"postComments"),{postId:le,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:He,createdAt:Ur()}),await To(Xe(ke,"posts",le),{commentCount:Dl(1)});const tt=je.find(Dt=>Dt.id===le);tt&&et(tt.authorId,"comment",{postId:le});const pt=He.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(pt){const Dt=new Set;pt.forEach(ct=>{const St=ct.slice(1).trim(),ce=Ve.find(be=>be.name&&be.name.toLowerCase()===St.toLowerCase());ce&&!Dt.has(ce.id)&&(Dt.add(ce.id),et(ce.id,"mention",{postId:le}))})}xt(Dt=>({...Dt,[le]:""})),Ue(Dt=>Dt.map(ct=>ct.id===le?{...ct,commentCount:(ct.commentCount||0)+1}:ct)),await dn(le)}catch(tt){console.error("Comment error:",tt),_e("Failed to comment","error")}finally{Se(tt=>({...tt,[le]:!1}))}}};return l||K||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!n?null:g?a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:h,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:ld(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),a.jsxs("div",{className:"prf-buddy-action",children:[x==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:yt,disabled:V,children:V?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),x==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:Ft,disabled:V,children:V?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),x==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:Je,disabled:V,children:V?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:Ft,disabled:V,children:"Decline"})]}),x==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:cn,disabled:V,children:V?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:`${g.name?.split(" ")[0]}'s Journey`}),Oe?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):je.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:je.map(le=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:le.authorPhotoURL?a.jsx("img",{src:le.authorPhotoURL,alt:""}):a.jsx("span",{children:ld(le.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:le.authorName}),a.jsx("span",{className:"journey-post-time",children:b2(le.createdAt)})]}),le.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>Rt(le.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),le.content&&a.jsx("p",{className:"journey-post-content",children:le.content}),le.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:le.imageURL,alt:"Post",loading:"lazy"})}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${E.has(le.id)?" liked":""}`,onClick:()=>oe(le.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:E.has(le.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:le.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${L.has(le.id)?" active":""}`,onClick:()=>qt(le.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:le.commentCount||0})]})]}),L.has(le.id)&&a.jsxs("div",{className:"journey-comments",children:[z[le.id]?.length>0?z[le.id].map(He=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${He.authorId}`),children:He.authorPhotoURL?a.jsx("img",{src:He.authorPhotoURL,alt:""}):a.jsx("span",{children:ld(He.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:He.authorName}),a.jsx("span",{className:"journey-comment-text",children:He.content})]}),a.jsx("span",{className:"journey-comment-time",children:b2(He.createdAt)})]})]},He.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("input",{type:"text",placeholder:"Comment... (@ to mention)",value:Fe[le.id]||"",onChange:He=>mt(le.id,He.target.value),onKeyDown:He=>{He.key==="Enter"&&Ye(le.id)},maxLength:300}),ae&&W===le.id&&Ne.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:Ne.map(He=>a.jsxs("button",{className:"mention-option",onClick:()=>Vt(He,le.id),children:[a.jsx("div",{className:"mention-option-avatar",children:He.photoURL?a.jsx("img",{src:He.photoURL,alt:""}):a.jsx("span",{children:ld(He.name)})}),a.jsx("span",{children:He.name})]},He.id))}),a.jsx("button",{onClick:()=>Ye(le.id),disabled:!(Fe[le.id]||"").trim()||Y[le.id],children:Y[le.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},le.id))})]})]}),a.jsx(Sa,{}),X&&a.jsxs("div",{className:`toast-notification ${X.type}`,children:[a.jsx("span",{className:"toast-icon",children:X.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):X.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:X.message})]})]}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(Sa,{})]})}const Qr=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],xo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function yD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Xr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function vD(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function bD(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function cd(s,e){if(!e)return"-";switch(s.unit){case"weight":return bD(e.weight,e.reps);case"time":return vD(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function _l(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function Gp(s,e){return!e||e===0?null:(s-e)/e*100}function xD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(U=>{const V=U.benchmarks?.[e];if(!V)return 0;switch(n){case"weight":return(V.weight||0)*(V.reps||0);case"time":return V.time||0;case"reps":return V.reps||0;case"distance":return V.distance||0;default:return 0}}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,x=p-y*2,k=g-y*2,j=i.map((U,V)=>{const te=y+V/(i.length-1)*x,X=y+k-(U-u)/h*k;return{x:te,y:X,value:U}}),O=j.map((U,V)=>`${V===0?"M":"L"} ${U.x} ${U.y}`).join(" "),K=O+` L ${j[j.length-1].x} ${y+k} L ${j[0].x} ${y+k} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:K,fill:"url(#trendGradientJr)"}),a.jsx("path",{d:O,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((U,V)=>a.jsx("circle",{cx:U.x,cy:U.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},V))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((U,V)=>a.jsxs("span",{className:"pb-trend-label",children:[U.month.split("-")[1],"/",U.month.split("-")[0].slice(2)]},V))})]})}function wD(){const[s,e]=w.useState("bests"),[n,i]=w.useState([]),[l,u]=w.useState(!0),[h,p]=w.useState(!1),[g,y]=w.useState(0),[x,k]=w.useState(!1),[j,O]=w.useState(!1),[K,U]=w.useState(!1),[V,te]=w.useState({}),[X,fe]=w.useState({}),[je,Ue]=w.useState({}),[Oe,A]=w.useState({}),[E,R]=w.useState({}),[L,D]=w.useState(!1),[z,I]=w.useState({}),[Fe,xt]=w.useState([]),[Y,Se]=w.useState(null),[Ve,ht]=w.useState(null),[ae,P]=w.useState(!1),[W,pe]=w.useState(""),[Ne,Be]=w.useState(""),_e=w.useRef(null),et=w.useRef(0),yt=w.useRef(0),Je=w.useRef("right"),Ft=w.useCallback(q=>{y(ge=>{const xe=Math.max(0,Math.min(Qr.length-1,q));return xe===ge?ge:(Je.current=xe>ge?"right":"left",xe)})},[]),{currentUser:cn,isClient:Ct,clientData:Rt,loading:oe}=qr(),{isDark:dn}=Ca(),qt=Js(),jt=w.useCallback((q,ge="info")=>{ht({message:q,type:ge}),setTimeout(()=>ht(null),4e3)},[]);w.useEffect(()=>{!oe&&(!cn||!Ct)&&qt("/")},[cn,Ct,oe,qt]),w.useEffect(()=>{Rt&&Vt()},[Rt]);const Vt=async()=>{try{const q=An(Yt(ke,"juniorPBs"),vn("clientId","==",Rt.id)),xe=(await _n(q)).docs.map(ut=>({id:ut.id,...ut.data()}));xe.sort((ut,_t)=>ut.month.localeCompare(_t.month)),i(xe);const we=An(Yt(ke,"juniorPBTargets"),vn("clientId","==",Rt.id)),ye=await _n(we);if(!ye.empty){const ut=ye.docs[0].data();Ue(ut.targets||{}),A(ut.metricTargets||{}),R(ut.targets||{}),I(ut.metricTargets||{})}const it=An(Yt(ke,"juniorAchievements"),vn("clientId","==",Rt.id)),It=await _n(it);It.empty||xt(It.docs[0].data().badges||[])}catch(q){console.error("Error fetching junior personal bests:",q)}u(!1)},mt=yD(),Ye=n.find(q=>q.month===mt),le=n.filter(q=>q.month<mt),He=le.length>0?le[le.length-1]:null;w.useEffect(()=>{Ye?(te(Ye.benchmarks||{}),fe(Ye.bodyMetrics||{})):(te({}),fe({}))},[Ye?.id]);const tt=async(q,ge)=>{const xe=[];if(q==="strength"?Qr.forEach(we=>{const ye=je[we.key];if(!ye)return;const it=ge[we.key];if(!it)return;let It;if(ye.targetType==="time"){if(!ye.targetValue)return;const ut=ye.startValue||0,_t=it.time||0,wt=ye.targetValue-ut;It=wt===0?_t>=ye.targetValue?1:0:Math.max(0,(_t-ut)/wt)}else if(ye.targetType==="reps"){if(!ye.targetReps)return;const ut=ye.startReps||0,_t=it.reps||0,wt=ye.targetReps-ut;It=wt===0?_t>=ye.targetReps?1:0:Math.max(0,(_t-ut)/wt)}else if(ye.targetType==="distance"){if(!ye.targetDistance)return;const ut=ye.startDistance||0,_t=it.distance||0,wt=ye.targetDistance-ut;It=wt===0?_t>=ye.targetDistance?1:0:Math.max(0,(_t-ut)/wt)}else{if(!ye.targetWeight&&!ye.targetReps)return;const ut=(ye.startWeight||0)*(ye.startReps||0),_t=(ye.targetWeight||0)*(ye.targetReps||0),wt=(it.weight||0)*(it.reps||0),Jt=_t-ut;It=Jt===0?wt>=_t?1:0:Math.max(0,(wt-ut)/Jt)}if(It>=1){let ut,_t;ye.targetType==="time"?(ut=Fe.some(wt=>wt.type==="strength"&&wt.key===we.key&&wt.targetValue===ye.targetValue),_t=`${we.name} ${ye.targetValue}s`):ye.targetType==="reps"?(ut=Fe.some(wt=>wt.type==="strength"&&wt.key===we.key&&wt.targetReps===ye.targetReps),_t=`${we.name} ${ye.targetReps} reps`):ye.targetType==="distance"?(ut=Fe.some(wt=>wt.type==="strength"&&wt.key===we.key&&wt.targetDistance===ye.targetDistance),_t=`${we.name} ${ye.targetDistance}cm`):(ut=Fe.some(wt=>wt.type==="strength"&&wt.key===we.key&&wt.targetWeight===ye.targetWeight&&wt.targetReps===ye.targetReps),_t=`${we.name} ${ye.targetWeight}kg  ${ye.targetReps}`),ut||xe.push({type:"strength",key:we.key,...ye.targetType==="time"?{targetType:"time",targetValue:ye.targetValue}:ye.targetType==="reps"?{targetType:"reps",targetReps:ye.targetReps}:ye.targetType==="distance"?{targetType:"distance",targetDistance:ye.targetDistance}:{targetWeight:ye.targetWeight,targetReps:ye.targetReps},achievedMonth:mt,label:_t})}}):xo.forEach(we=>{const ye=Oe[we.key];if(!ye||!ye.targetValue)return;const it=ge[we.key];if(it==null)return;const It=ye.startValue||0,ut=ye.targetValue,_t=ut-It;(_t===0?it===ut?1:0:Math.max(0,(it-It)/_t))>=1&&(Fe.some(Rs=>Rs.type==="metric"&&Rs.key===we.key&&Rs.targetValue===ut)||xe.push({type:"metric",key:we.key,targetValue:ut,achievedMonth:mt,label:`${we.name} ${ut}${we.suffix}`}))}),xe.length>0){const we=[...Fe,...xe];await On(Xe(ke,"juniorAchievements",Rt.id),{clientId:Rt.id,badges:we,updatedAt:bt.now()}),xt(we),Se(xe),setTimeout(()=>Se(null),5e3)}},pt=(q,ge)=>{if(q==="strength"){const xe=je[ge];if(!xe)return!1;switch(Qr.find(ye=>ye.key===ge)?.unit){case"time":return Fe.some(ye=>ye.type==="strength"&&ye.key===ge&&ye.targetValue===xe.targetValue);case"reps":return Fe.some(ye=>ye.type==="strength"&&ye.key===ge&&ye.targetReps===xe.targetReps);case"distance":return Fe.some(ye=>ye.type==="strength"&&ye.key===ge&&ye.targetDistance===xe.targetDistance);default:return!xe.targetWeight&&!xe.targetReps?!1:Fe.some(ye=>ye.type==="strength"&&ye.key===ge&&ye.targetWeight===xe.targetWeight&&ye.targetReps===xe.targetReps)}}else{const xe=Oe[ge];return!xe||!xe.targetValue?!1:Fe.some(we=>we.type==="metric"&&we.key===ge&&we.targetValue===xe.targetValue)}},Dt=async()=>{p(!0);try{const q=`${Rt.id}_${mt}`,ge=Ye||{};await On(Xe(ke,"juniorPBs",q),{clientId:Rt.id,month:mt,benchmarks:V,bodyMetrics:ge.bodyMetrics||X||{},createdAt:ge.createdAt||bt.now(),updatedAt:bt.now()}),await tt("strength",V),jt("Benchmarks saved!","success"),k(!1),await Vt()}catch(q){console.error("Error saving benchmarks:",q),jt("Failed to save. Please try again.","error")}p(!1)},ct=async()=>{p(!0);try{const q=`${Rt.id}_${mt}`,ge=Ye||{};await On(Xe(ke,"juniorPBs",q),{clientId:Rt.id,month:mt,benchmarks:ge.benchmarks||V||{},bodyMetrics:X,createdAt:ge.createdAt||bt.now(),updatedAt:bt.now()}),await tt("metric",X),jt("Body metrics saved!","success"),O(!1),await Vt()}catch(q){console.error("Error saving metrics:",q),jt("Failed to save. Please try again.","error")}p(!1)},St=(q,ge,xe)=>{te(we=>({...we,[q]:{...we[q],[ge]:xe===""?"":parseFloat(xe)}}))},ce=(q,ge)=>{fe(xe=>({...xe,[q]:ge===""?"":parseFloat(ge)}))},be=(q,ge,xe)=>{R(we=>({...we,[q]:{...we[q],[ge]:xe===""?"":parseFloat(xe)}}))},Ie=async()=>{p(!0);try{const q=`targets_${Rt.id}`,ge=Ye?.benchmarks||{},xe={};Qr.forEach(we=>{const ye=ge[we.key];switch(we.unit){case"time":E[we.key]?.targetValue&&(xe[we.key]={targetType:"time",targetValue:E[we.key].targetValue,startValue:ye?.time||0});break;case"reps":E[we.key]?.targetReps&&(xe[we.key]={targetType:"reps",targetReps:E[we.key].targetReps,startReps:ye?.reps||0});break;case"distance":E[we.key]?.targetDistance&&(xe[we.key]={targetType:"distance",targetDistance:E[we.key].targetDistance,startDistance:ye?.distance||0});break;default:(E[we.key]?.targetWeight||E[we.key]?.targetReps)&&(xe[we.key]={targetWeight:E[we.key].targetWeight||0,targetReps:E[we.key].targetReps||0,startWeight:ye?.weight||0,startReps:ye?.reps||0})}}),await On(Xe(ke,"juniorPBTargets",q),{clientId:Rt.id,targets:xe,metricTargets:Oe,updatedAt:bt.now()}),Ue(xe),R(xe),jt("Targets saved!","success"),U(!1)}catch(q){console.error("Error saving targets:",q),jt("Failed to save targets.","error")}p(!1)},Qe=(q,ge)=>{I(xe=>({...xe,[q]:{...xe[q],targetValue:ge===""?"":parseFloat(ge)}}))},Ke=async()=>{p(!0);try{const q=`targets_${Rt.id}`,ge={};xo.forEach(xe=>{if(z[xe.key]?.targetValue){const we=Ye?.bodyMetrics?.[xe.key]||0;ge[xe.key]={targetValue:z[xe.key].targetValue,startValue:we}}}),await On(Xe(ke,"juniorPBTargets",q),{clientId:Rt.id,targets:je,metricTargets:ge,updatedAt:bt.now()}),A(ge),I(ge),jt("Metric targets saved!","success"),D(!1)}catch(q){console.error("Error saving metric targets:",q),jt("Failed to save targets.","error")}p(!1)},We=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const q=Xe(ke,"juniorPBTargets",`targets_${Rt.id}`);await mr(q),Ue({}),A({}),R({}),I({}),jt("All goals have been reset","success")}catch(q){console.error("Error resetting targets:",q),jt("Failed to reset goals","error")}p(!1)}},nt=(q,ge)=>{const xe=je[q];if(!xe||!ge)return null;if(xe.targetType==="time"){if(!xe.targetValue)return null;const ut=xe.startValue||0,_t=xe.targetValue,wt=ge.time||0,Jt=_t-ut;return Jt<=0?wt>=_t?1:0:Math.max(0,Math.min((wt-ut)/Jt,1))}if(xe.targetType==="reps"){if(!xe.targetReps)return null;const ut=xe.startReps||0,_t=xe.targetReps,wt=ge.reps||0,Jt=_t-ut;return Jt<=0?wt>=_t?1:0:Math.max(0,Math.min((wt-ut)/Jt,1))}if(xe.targetType==="distance"){if(!xe.targetDistance)return null;const ut=xe.startDistance||0,_t=xe.targetDistance,wt=ge.distance||0,Jt=_t-ut;return Jt<=0?wt>=_t?1:0:Math.max(0,Math.min((wt-ut)/Jt,1))}if(!xe.targetWeight&&!xe.targetReps)return null;const we=(xe.startWeight||0)*(xe.startReps||0),ye=(xe.targetWeight||0)*(xe.targetReps||0),it=(ge.weight||0)*(ge.reps||0),It=ye-we;return It<=0?it>=ye?1:0:Math.max(0,Math.min((it-we)/It,1))},rt=q=>{const ge=Oe[q];if(!ge||!ge.targetValue)return null;const xe=Ye?.bodyMetrics?.[q];if(xe==null)return null;const we=ge.startValue||0,ye=ge.targetValue,it=ye-we;return it===0?xe===ye?1:0:Math.max(0,Math.min((xe-we)/it,1))},qe=q=>{et.current=q.touches[0].clientX,yt.current=0},Wt=q=>{yt.current=q.touches[0].clientX-et.current},en=()=>{yt.current<-50?Ft(g+1):yt.current>50&&Ft(g-1),yt.current=0},Xt=q=>{const ge=Ye?.bodyMetrics?.[q],xe=He?.bodyMetrics?.[q];return ge==null||xe==null?null:parseFloat((ge-xe).toFixed(2))},jn=n.find(q=>q.month===W),zn=n.find(q=>q.month===Ne);if(oe||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!cn||!Ct||!Rt)return null;const Ut=Qr[g],bn=Ye?.benchmarks?.[Ut.key],Zn=He?.benchmarks?.[Ut.key],In=_l(Ut,bn),hs=_l(Ut,Zn),gs=Gp(In,hs),Hn=nt(Ut.key,bn),es=Hn!==null,rs=Hn!==null&&Hn>=1,Yn=es?Math.round(Hn*60):In>0?15:0,Fs=je[Ut.key],Cs=q=>q?q.targetType==="time"?`${q.startValue||0}s  ${q.targetValue}s`:q.targetType==="reps"?`${q.startReps||0}  ${q.targetReps} reps`:q.targetType==="distance"?`${q.startDistance||0}  ${q.targetDistance}cm`:`${q.startWeight||0}kg${q.startReps||0}  ${q.targetWeight}kg${q.targetReps}`:null;return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>qt("/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Junior Strength Tests"}),a.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!x&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:_e,onTouchStart:qe,onTouchMove:Wt,onTouchEnd:en,children:[a.jsx("div",{className:`pb-ring-container slide-from-${Je.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:qy.map((q,ge)=>{const xe=ge<Math.round(Yn);return a.jsx("line",{x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,className:`pb-ring-tick ${xe?rs?"hit":"filled":"empty"}`,strokeWidth:q.thick?"3":"2"},ge)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:Ut.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[Ut.name,pt("strength",Ut.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:bn?cd(Ut,bn):"-"}),gs!==null&&a.jsxs("div",{className:`pb-ring-change ${gs>=0?"positive":"negative"}`,children:[gs>=0?"+":"",gs.toFixed(1),"%"]}),gs===null&&bn&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),Fs&&a.jsx("div",{className:`pb-ring-target ${rs?"hit":""}`,children:rs?"Target hit!":Cs(Fs)}),!Fs&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:Qr.map((q,ge)=>a.jsx("button",{className:`pb-dot ${ge===g?"active":""}`,onClick:()=>Ft(ge)},ge))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Ft(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Ft(g+1),disabled:g===Qr.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(xD,{data:n,exerciseKey:Ut.key,unit:Ut.unit})]})]}),!x&&!K&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:Ye?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>U(!0),children:Object.keys(je).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(Oe).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:We,disabled:h,children:"Reset All Goals"})]}),x&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Xr(mt)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),te(Ye?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:Qr.map(q=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),q.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:V[q.key]?.weight??"",onChange:ge=>St(q.key,"weight",ge.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:V[q.key]?.reps??"",onChange:ge=>St(q.key,"reps",ge.target.value),placeholder:"0"})]})]}):q.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Reps (max in 1 min)"}),a.jsx("input",{type:"number",value:V[q.key]?.reps??"",onChange:ge=>St(q.key,"reps",ge.target.value),placeholder:"0"})]})}):q.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:V[q.key]?.distance??"",onChange:ge=>St(q.key,"distance",ge.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:V[q.key]?.time??"",onChange:ge=>St(q.key,"time",ge.target.value),placeholder:"0"})]})})]},q.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),te(Ye?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Dt,disabled:h,children:h?"Saving...":"Save"})]})]}),K&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{U(!1),R(je)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Qr.map(q=>{const ge=Ye?.benchmarks?.[q.key];let xe="-";if(ge)switch(q.unit){case"weight":(ge.weight||ge.reps)&&(xe=`${ge.weight||0}kg  ${ge.reps||0}`);break;case"time":ge.time&&(xe=`${ge.time}s`);break;case"reps":ge.reps&&(xe=`${ge.reps} reps`);break;case"distance":ge.distance&&(xe=`${ge.distance} cm`);break}return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",xe]})]}),q.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:E[q.key]?.targetWeight??"",onChange:we=>be(q.key,"targetWeight",we.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:E[q.key]?.targetReps??"",onChange:we=>be(q.key,"targetReps",we.target.value),placeholder:"0"})]})]}):q.unit==="reps"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Reps (in 1 min)"}),a.jsx("input",{type:"number",value:E[q.key]?.targetReps??"",onChange:we=>be(q.key,"targetReps",we.target.value),placeholder:"0"})]})}):q.unit==="distance"?a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target Distance (cm)"}),a.jsx("input",{type:"number",step:"0.5",value:E[q.key]?.targetDistance??"",onChange:we=>be(q.key,"targetDistance",we.target.value),placeholder:"0"})]})}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:E[q.key]?.targetValue??"",onChange:we=>be(q.key,"targetValue",we.target.value),placeholder:"0"})]})})]},q.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{U(!1),R(je)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ie,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!j&&!L&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Xr(mt)}),a.jsx("div",{className:"pb-metrics-list",children:xo.map(q=>{const ge=Ye?.bodyMetrics?.[q.key],xe=Xt(q.key),we=Oe[q.key],ye=rt(q.key),it=ye!==null&&ye>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[q.name,pt("metric",q.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),we&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",we.targetValue," ",q.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ge!=null?`${ge} ${q.suffix}`:"-"}),xe!==null&&a.jsxs("span",{className:`pb-metric-change ${xe>0?"up":xe<0?"down":"same"}`,children:[xe>0?"+":"",xe," ",q.suffix]})]})]}),ye!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${it?"hit":""}`,style:{width:`${Math.round(ye*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${it?"hit":""}`,children:it?"Hit!":`${Math.round(ye*100)}%`})]})]},q.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>O(!0),children:Ye?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(Oe).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(Oe).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:We,disabled:h,children:"Reset All Goals"})]})]}),j&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Xr(mt)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{O(!1),fe(Ye?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:xo.map(q=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[q.name," (",q.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:X[q.key]??"",onChange:ge=>ce(q.key,ge.target.value),placeholder:"0"})]})},q.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{O(!1),fe(Ye?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:ct,disabled:h,children:h?"Saving...":"Save"})]})]}),L&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),I(Oe)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),xo.map(q=>{const ge=Ye?.bodyMetrics?.[q.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ge!=null?`${ge} ${q.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",q.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:z[q.key]?.targetValue??"",onChange:xe=>Qe(q.key,xe.target.value),placeholder:"0"})]})})]},q.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),I(Oe)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ke,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[Fe.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...Fe].reverse().map((q,ge)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ge*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:q.label}),a.jsx("span",{className:"pb-achievement-date",children:Xr(q.achievedMonth)})]})]},ge))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${ae?"active":""}`,onClick:()=>{P(!ae),!ae&&n.length>=2&&(pe(n[0].month),Be(n[n.length-1].month))},children:ae?"Back to Timeline":"Compare Months"})}),ae?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:W,onChange:q=>pe(q.target.value),children:n.map(q=>a.jsx("option",{value:q.month,children:Xr(q.month)},q.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:Ne,onChange:q=>Be(q.target.value),children:n.map(q=>a.jsx("option",{value:q.month,children:Xr(q.month)},q.month))})]})]}),jn&&zn&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Tests"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Xr(W).split(" ")[0]}),a.jsx("span",{children:Xr(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),Qr.map(q=>{const ge=jn.benchmarks?.[q.key],xe=zn.benchmarks?.[q.key],we=_l(q,ge),ye=_l(q,xe),it=Gp(ye,we);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:q.name}),a.jsx("span",{className:"pb-compare-val",children:ge?cd(q,ge):"-"}),a.jsx("span",{className:"pb-compare-val",children:xe?cd(q,xe):"-"}),a.jsx("span",{className:`pb-compare-change ${it!==null?it>=0?"positive":"negative":""}`,children:it!==null?`${it>=0?"+":""}${it.toFixed(1)}%`:"-"})]},q.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Xr(W).split(" ")[0]}),a.jsx("span",{children:Xr(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),xo.map(q=>{const ge=jn.bodyMetrics?.[q.key],xe=zn.bodyMetrics?.[q.key],we=ge!=null&&xe!=null?parseFloat((xe-ge).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:q.name}),a.jsx("span",{className:"pb-compare-val",children:ge!=null?`${ge}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:xe!=null?`${xe}`:"-"}),a.jsx("span",{className:`pb-compare-change ${we!==null?we>0?"positive":we<0?"negative":"neutral":""}`,children:we!==null?`${we>0?"+":""}${we} ${q.suffix}`:"-"})]},q.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((q,ge)=>{const xe=n.filter(we=>we.month<q.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ge*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Xr(q.month)}),q.benchmarks&&Object.keys(q.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Tests"}),Qr.map(we=>{const ye=q.benchmarks[we.key];if(!ye)return null;const it=xe?.benchmarks?.[we.key],It=_l(we,ye),ut=_l(we,it),_t=Gp(It,ut);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:we.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:cd(we,ye)}),_t!==null&&a.jsxs("span",{className:`pb-timeline-change ${_t>=0?"positive":"negative"}`,children:[_t>=0?"+":"",_t.toFixed(1),"%"]})]})]},we.key)})]}),q.bodyMetrics&&Object.keys(q.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),xo.map(we=>{const ye=q.bodyMetrics[we.key];if(ye==null)return null;const it=xe?.bodyMetrics?.[we.key],It=it!=null?parseFloat((ye-it).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:we.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[ye," ",we.suffix]}),It!==null&&a.jsxs("span",{className:`pb-timeline-change ${It>0?"positive":It<0?"negative":"neutral"}`,children:[It>0?"+":"",It," ",we.suffix]})]})]},we.key)})]})]})]},q.id)})})]})})]}),Y&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Se(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:Y.map((q,ge)=>a.jsx("div",{className:"pb-celebration-badge",children:q.label},ge))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Ve&&a.jsxs("div",{className:`toast-notification ${Ve.type}`,children:[a.jsx("span",{className:"toast-icon",children:Ve.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Ve.message}),a.jsx("button",{className:"toast-close",onClick:()=>ht(null),children:""})]}),a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>qt("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>qt("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>qt("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),Rt?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>qt("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]})]})}const ga=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],wo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function _D(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Jr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function ud(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function x2(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function kl(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Kp(s,e){return!e||e===0?null:(s-e)/e*100}function kD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return a.jsx("div",{className:"pb-trend-empty",children:a.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(U=>{const V=U.benchmarks?.[e];return V?n==="time"?V.time||0:(V.weight||0)*(V.reps||0):0}),l=Math.max(...i),u=Math.min(...i),h=l-u||1,p=300,g=100,y=20,x=p-y*2,k=g-y*2,j=i.map((U,V)=>{const te=y+V/(i.length-1)*x,X=y+k-(U-u)/h*k;return{x:te,y:X,value:U}}),O=j.map((U,V)=>`${V===0?"M":"L"} ${U.x} ${U.y}`).join(" "),K=O+` L ${j[j.length-1].x} ${y+k} L ${j[0].x} ${y+k} Z`;return a.jsxs("div",{className:"pb-trend-chart",children:[a.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),a.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),a.jsx("path",{d:K,fill:"url(#trendGradient)"}),a.jsx("path",{d:O,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((U,V)=>a.jsx("circle",{cx:U.x,cy:U.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},V))]}),a.jsx("div",{className:"pb-trend-labels",children:s.map((U,V)=>a.jsxs("span",{className:"pb-trend-label",children:[U.month.split("-")[1],"/",U.month.split("-")[0].slice(2)]},V))})]})}function TD(){const[s,e]=w.useState("bests"),[n,i]=w.useState([]),[l,u]=w.useState(!0),[h,p]=w.useState(!1),[g,y]=w.useState(0),[x,k]=w.useState(!1),[j,O]=w.useState(!1),[K,U]=w.useState(!1),[V,te]=w.useState({}),[X,fe]=w.useState({}),[je,Ue]=w.useState({}),[Oe,A]=w.useState({}),[E,R]=w.useState({}),[L,D]=w.useState(!1),[z,I]=w.useState({}),[Fe,xt]=w.useState([]),[Y,Se]=w.useState(null),[Ve,ht]=w.useState(null),[ae,P]=w.useState(!1),[W,pe]=w.useState(""),[Ne,Be]=w.useState(""),[_e,et]=w.useState({}),[yt,Je]=w.useState({}),[Ft,cn]=w.useState(null),[Ct,Rt]=w.useState(null),[oe,dn]=w.useState(""),qt=w.useRef(null),jt=w.useRef(0),Vt=w.useRef(0),mt=w.useRef("right"),Ye=w.useCallback(F=>{y(ue=>{const T=Math.max(0,Math.min(ga.length-1,F));return T===ue?ue:(mt.current=T>ue?"right":"left",T)})},[]),{currentUser:le,isClient:He,clientData:tt,loading:pt}=qr(),{isDark:Dt}=Ca(),ct=Js(),[St]=qj(),ce=St.get("mode")==="corebuddy",be=!ce&&(!tt?.clientType||tt.clientType==="block"),Ie=w.useCallback((F,ue="info")=>{ht({message:F,type:ue}),setTimeout(()=>ht(null),4e3)},[]);w.useEffect(()=>{!pt&&(!le||!He)&&ct("/")},[le,He,pt,ct]),w.useEffect(()=>{tt&&(be?Qe():(async()=>{try{const[ue,T,C]=await Promise.all([Kn(Xe(ke,"coreBuddyPBs",tt.id)),Kn(Xe(ke,"coreBuddyTargets",tt.id)),Kn(Xe(ke,"coreBuddyAchievements",tt.id))]);ue.exists()&&et(ue.data().exercises||{}),T.exists()&&Je(T.data().targets||{}),C.exists()&&cn(C.data())}catch(ue){console.error("Error loading Core Buddy PBs:",ue)}u(!1)})())},[tt]);const Qe=async()=>{try{const F=An(Yt(ke,"personalBests"),vn("clientId","==",tt.id)),T=(await _n(F)).docs.map(Pe=>({id:Pe.id,...Pe.data()}));T.sort((Pe,Le)=>Pe.month.localeCompare(Le.month)),i(T);const C=An(Yt(ke,"personalBestTargets"),vn("clientId","==",tt.id)),G=await _n(C);if(!G.empty){const Pe=G.docs[0].data();Ue(Pe.targets||{}),A(Pe.metricTargets||{}),R(Pe.targets||{}),I(Pe.metricTargets||{})}const Z=An(Yt(ke,"achievements"),vn("clientId","==",tt.id)),ze=await _n(Z);ze.empty||xt(ze.docs[0].data().badges||[])}catch(F){console.error("Error fetching personal bests:",F)}u(!1)},Ke=async()=>{if(!Ct||!oe||!tt)return;const F=parseFloat(oe),ue=_e[Ct];if(!ue||F<=ue.weight){Ie("Target must be higher than current PB","error");return}p(!0);try{const T={...yt,[Ct]:{targetWeight:F,setAt:bt.now(),currentPBWhenSet:ue.weight}};await On(Xe(ke,"coreBuddyTargets",tt.id),{clientId:tt.id,targets:T,updatedAt:bt.now()}),Je(T),Rt(null),dn(""),Ie("Target set!","success")}catch(T){console.error("Error saving target:",T),Ie("Failed to save target","error")}p(!1)},We=F=>{if(!Ft?.badges)return!1;const ue=yt[F];return ue?Ft.badges.some(T=>T.type==="pb_target"&&T.exercise===F&&T.targetWeight===ue.targetWeight):!1},nt=F=>{const ue=yt[F];if(!ue)return null;const T=_e[F];if(!T)return 0;const C=ue.currentPBWhenSet||0,G=ue.targetWeight,Z=G-C;return Z<=0?T.weight>=G?1:0:Math.max(0,Math.min((T.weight-C)/Z,1))},rt=_D(),qe=n.find(F=>F.month===rt),Wt=n.filter(F=>F.month<rt),en=Wt.length>0?Wt[Wt.length-1]:null;w.useEffect(()=>{qe?(te(qe.benchmarks||{}),fe(qe.bodyMetrics||{})):(te({}),fe({}))},[qe?.id]);const Xt=async(F,ue)=>{const T=[];if(F==="strength"?ga.forEach(C=>{const G=je[C.key];if(!G)return;const Z=ue[C.key];if(!Z)return;let ze;if(G.targetType==="time"){if(!G.targetValue)return;const Pe=G.startValue||0,Le=Z.time||0,Bt=G.targetValue-Pe;ze=Bt===0?Le>=G.targetValue?1:0:Math.max(0,(Le-Pe)/Bt)}else{if(!G.targetWeight&&!G.targetReps)return;const Pe=(G.startWeight||0)*(G.startReps||0),Le=(G.targetWeight||0)*(G.targetReps||0),Bt=(Z.weight||0)*(Z.reps||0),kt=Le-Pe;ze=kt===0?Bt>=Le?1:0:Math.max(0,(Bt-Pe)/kt)}if(ze>=1&&!(G.targetType==="time"?Fe.some(Le=>Le.type==="strength"&&Le.key===C.key&&Le.targetValue===G.targetValue):Fe.some(Le=>Le.type==="strength"&&Le.key===C.key&&Le.targetWeight===G.targetWeight&&Le.targetReps===G.targetReps))){const Le=G.targetType==="time"?`${C.name} ${G.targetValue}s`:`${C.name} ${G.targetWeight}kg  ${G.targetReps}`;T.push({type:"strength",key:C.key,...G.targetType==="time"?{targetType:"time",targetValue:G.targetValue}:{targetWeight:G.targetWeight,targetReps:G.targetReps},achievedMonth:rt,label:Le})}}):wo.forEach(C=>{const G=Oe[C.key];if(!G||!G.targetValue)return;const Z=ue[C.key];if(Z==null)return;const ze=G.startValue||0,Pe=G.targetValue,Le=Pe-ze;(Le===0?Z===Pe?1:0:Math.max(0,(Z-ze)/Le))>=1&&(Fe.some($=>$.type==="metric"&&$.key===C.key&&$.targetValue===Pe)||T.push({type:"metric",key:C.key,targetValue:Pe,achievedMonth:rt,label:`${C.name} ${Pe}${C.suffix}`}))}),T.length>0){const C=[...Fe,...T];await On(Xe(ke,"achievements",tt.id),{clientId:tt.id,badges:C,updatedAt:bt.now()}),xt(C),Se(T),setTimeout(()=>Se(null),5e3)}},jn=(F,ue)=>{if(F==="strength"){const T=je[ue];return T?T.targetType==="time"?Fe.some(C=>C.type==="strength"&&C.key===ue&&C.targetValue===T.targetValue):!T.targetWeight&&!T.targetReps?!1:Fe.some(C=>C.type==="strength"&&C.key===ue&&C.targetWeight===T.targetWeight&&C.targetReps===T.targetReps):!1}else{const T=Oe[ue];return!T||!T.targetValue?!1:Fe.some(C=>C.type==="metric"&&C.key===ue&&C.targetValue===T.targetValue)}},zn=async()=>{p(!0);try{const F=`${tt.id}_${rt}`,ue=qe||{};await On(Xe(ke,"personalBests",F),{clientId:tt.id,month:rt,benchmarks:V,bodyMetrics:ue.bodyMetrics||X||{},createdAt:ue.createdAt||bt.now(),updatedAt:bt.now()}),await Xt("strength",V),Ie("Benchmarks saved!","success"),k(!1),await Qe()}catch(F){console.error("Error saving benchmarks:",F),Ie("Failed to save. Please try again.","error")}p(!1)},Ut=async()=>{p(!0);try{const F=`${tt.id}_${rt}`,ue=qe||{};await On(Xe(ke,"personalBests",F),{clientId:tt.id,month:rt,benchmarks:ue.benchmarks||V||{},bodyMetrics:X,createdAt:ue.createdAt||bt.now(),updatedAt:bt.now()}),await Xt("metric",X),Ie("Body metrics saved!","success"),O(!1),await Qe()}catch(F){console.error("Error saving metrics:",F),Ie("Failed to save. Please try again.","error")}p(!1)},bn=(F,ue,T)=>{te(C=>({...C,[F]:{...C[F],[ue]:T===""?"":parseFloat(T)}}))},Zn=(F,ue)=>{fe(T=>({...T,[F]:ue===""?"":parseFloat(ue)}))},In=(F,ue,T)=>{R(C=>({...C,[F]:{...C[F],[ue]:T===""?"":parseFloat(T)}}))},hs=async()=>{p(!0);try{const F=`targets_${tt.id}`,ue=qe?.benchmarks||{},T={};ga.forEach(C=>{const G=ue[C.key];C.unit==="time"?E[C.key]?.targetValue&&(T[C.key]={targetType:"time",targetValue:E[C.key].targetValue,startValue:G?.time||0}):(E[C.key]?.targetWeight||E[C.key]?.targetReps)&&(T[C.key]={targetWeight:E[C.key].targetWeight||0,targetReps:E[C.key].targetReps||0,startWeight:G?.weight||0,startReps:G?.reps||0})}),await On(Xe(ke,"personalBestTargets",F),{clientId:tt.id,targets:T,metricTargets:Oe,updatedAt:bt.now()}),Ue(T),R(T),Ie("Targets saved!","success"),U(!1)}catch(F){console.error("Error saving targets:",F),Ie("Failed to save targets.","error")}p(!1)},gs=(F,ue)=>{I(T=>({...T,[F]:{...T[F],targetValue:ue===""?"":parseFloat(ue)}}))},Hn=async()=>{p(!0);try{const F=`targets_${tt.id}`,ue={};wo.forEach(T=>{if(z[T.key]?.targetValue){const C=qe?.bodyMetrics?.[T.key]||0;ue[T.key]={targetValue:z[T.key].targetValue,startValue:C}}}),await On(Xe(ke,"personalBestTargets",F),{clientId:tt.id,targets:je,metricTargets:ue,updatedAt:bt.now()}),A(ue),I(ue),Ie("Metric targets saved!","success"),D(!1)}catch(F){console.error("Error saving metric targets:",F),Ie("Failed to save targets.","error")}p(!1)},es=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const F=Xe(ke,"personalBestTargets",`targets_${tt.id}`);await mr(F),Ue({}),A({}),R({}),I({}),Ie("All goals have been reset","success")}catch(F){console.error("Error resetting targets:",F),Ie("Failed to reset goals","error")}p(!1)}},rs=(F,ue)=>{const T=je[F];if(!T||!ue)return null;if(T.targetType==="time"){if(!T.targetValue)return null;const Pe=T.startValue||0,Le=T.targetValue,Bt=ue.time||0,kt=Le-Pe;return kt<=0?Bt>=Le?1:0:Math.max(0,Math.min((Bt-Pe)/kt,1))}if(!T.targetWeight&&!T.targetReps)return null;const C=(T.startWeight||0)*(T.startReps||0),G=(T.targetWeight||0)*(T.targetReps||0),Z=(ue.weight||0)*(ue.reps||0),ze=G-C;return ze<=0?Z>=G?1:0:Math.max(0,Math.min((Z-C)/ze,1))},Yn=F=>{const ue=Oe[F];if(!ue||!ue.targetValue)return null;const T=qe?.bodyMetrics?.[F];if(T==null)return null;const C=ue.startValue||0,G=ue.targetValue,Z=G-C;return Z===0?T===G?1:0:Math.max(0,Math.min((T-C)/Z,1))},Fs=F=>{jt.current=F.touches[0].clientX,Vt.current=0},Cs=F=>{Vt.current=F.touches[0].clientX-jt.current},q=()=>{Vt.current<-50?Ye(g+1):Vt.current>50&&Ye(g-1),Vt.current=0},ge=F=>{const ue=qe?.bodyMetrics?.[F],T=en?.bodyMetrics?.[F];return ue==null||T==null?null:parseFloat((ue-T).toFixed(2))},xe=n.find(F=>F.month===W),we=n.find(F=>F.month===Ne);if(pt||l)return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsx("div",{className:"header-content",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),a.jsxs("main",{className:"pb-main",children:[a.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),a.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!le||!He||!tt)return null;if(be&&tt?.isJunior)return a.jsx(wD,{});const ye=ga[g],it=qe?.benchmarks?.[ye.key],It=en?.benchmarks?.[ye.key],ut=kl(ye,it),_t=kl(ye,It),wt=Kp(ut,_t),Jt=rs(ye.key,it),Rs=Jt!==null,Es=Jt!==null&&Jt>=1,qs=Rs?Math.round(Jt*60):ut>0?15:0,Sn=je[ye.key];return a.jsxs("div",{className:"pb-page",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>ct(ce?"/client/core-buddy":"/client"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsxs("main",{className:"pb-main page-transition-enter",children:[a.jsxs("div",{className:"pb-intro",children:[a.jsx("h2",{children:"Personal Bests"}),a.jsx("p",{children:be?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!be&&a.jsxs("div",{className:"pb-cb-section",children:[Object.keys(_e).length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("div",{className:"pb-cb-empty-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),a.jsx("h4",{children:"No personal bests yet"}),a.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):a.jsx("div",{className:"pb-cb-grid",children:Object.entries(_e).sort(([F],[ue])=>F.localeCompare(ue)).map(([F,ue],T)=>{const C=yt[F],G=nt(F),Z=G!==null&&G>=1,ze=We(F),Pe=G!==null?Math.round(G*60):60;return a.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${T*.05}s`},children:[a.jsxs("div",{className:"pb-cb-card-ring",children:[a.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:D3.map((Le,Bt)=>{const kt=Bt<Pe;return a.jsx("line",{x1:Le.x1,y1:Le.y1,x2:Le.x2,y2:Le.y2,className:`pb-ring-tick ${kt?Z?"hit":"filled":"empty"}`,strokeWidth:Le.thick?"2":"1.5"},Bt)})}),a.jsx("div",{className:"pb-cb-ring-icon",children:ze?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),a.jsxs("div",{className:"pb-cb-card-info",children:[a.jsx("h4",{className:"pb-cb-card-name",children:F}),a.jsxs("div",{className:"pb-cb-card-value",children:[ue.weight,"kg  ",ue.reps]}),ue.achievedAt&&a.jsx("div",{className:"pb-cb-card-date",children:(ue.achievedAt.toDate?ue.achievedAt.toDate():new Date(ue.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),C&&!Z&&a.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",C.targetWeight,"kg (",Math.round((G||0)*100),"%)"]}),C&&Z&&!ze&&a.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),ze&&a.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),a.jsx("div",{className:"pb-cb-card-action",children:C?Z&&ze?a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{Rt(F),dn("")},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:a.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{Rt(F),dn("")},children:a.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},F)})}),Object.keys(_e).length>0&&a.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>ct("/client/core-buddy/achievements"),children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),Ct&&a.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>Rt(null),children:a.jsxs("div",{className:"pb-cb-target-modal",onClick:F=>F.stopPropagation(),children:[a.jsx("h3",{children:"Set Target"}),a.jsx("p",{className:"pb-cb-target-exercise-name",children:Ct}),a.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",a.jsxs("strong",{children:[_e[Ct]?.weight,"kg"]})]}),a.jsxs("div",{className:"pb-cb-target-input-wrap",children:[a.jsx("label",{children:"Your target (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:oe,onChange:F=>dn(F.target.value),placeholder:String((_e[Ct]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),a.jsxs("div",{className:"pb-cb-target-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>Rt(null),children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ke,disabled:h,children:h?"Saving...":"Set Target"})]})]})})]}),be&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-tabs",children:[a.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),a.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),a.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&a.jsxs("div",{className:"pb-strength-section",children:[!x&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-carousel",ref:qt,onTouchStart:Fs,onTouchMove:Cs,onTouchEnd:q,children:[a.jsx("div",{className:`pb-ring-container slide-from-${mt.current}`,children:a.jsxs("div",{className:"pb-ring",children:[a.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:qy.map((F,ue)=>{const T=ue<Math.round(qs);return a.jsx("line",{x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,className:`pb-ring-tick ${T?Es?"hit":"filled":"empty"}`,strokeWidth:F.thick?"3":"2"},ue)})}),a.jsxs("div",{className:"pb-ring-center",children:[a.jsx("div",{className:"pb-ring-category",children:ye.category}),a.jsxs("div",{className:"pb-ring-exercise",children:[ye.name,jn("strength",ye.key)&&a.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),a.jsx("div",{className:"pb-ring-value",children:it?ye.unit==="time"?ud(it.time):x2(it.weight,it.reps):"-"}),wt!==null&&a.jsxs("div",{className:`pb-ring-change ${wt>=0?"positive":"negative"}`,children:[wt>=0?"+":"",wt.toFixed(1),"%"]}),wt===null&&it&&a.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),Sn&&a.jsx("div",{className:`pb-ring-target ${Es?"hit":""}`,children:Es?"Target hit!":Sn.targetType==="time"?`${Sn.startValue||0}s  ${Sn.targetValue}s`:`${Sn.startWeight||0}kg${Sn.startReps||0}  ${Sn.targetWeight}kg${Sn.targetReps}`}),!Sn&&a.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),a.jsx("div",{className:"pb-carousel-dots",children:ga.map((F,ue)=>a.jsx("button",{className:`pb-dot ${ue===g?"active":""}`,onClick:()=>Ye(ue)},ue))}),a.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Ye(g-1),disabled:g===0,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),a.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Ye(g+1),disabled:g===ga.length-1,children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),a.jsxs("div",{className:"pb-trend-section",children:[a.jsx("h4",{children:"Trend"}),a.jsx(kD,{data:n,exerciseKey:ye.key,unit:ye.unit})]})]}),!x&&!K&&a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:qe?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>U(!0),children:Object.keys(je).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(Oe).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:es,disabled:h,children:"Reset All Goals"})]}),x&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Benchmarks - ",Jr(rt)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),te(qe?.benchmarks||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:ga.map(F=>a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:F.name}),F.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:V[F.key]?.weight??"",onChange:ue=>bn(F.key,"weight",ue.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",value:V[F.key]?.reps??"",onChange:ue=>bn(F.key,"reps",ue.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Time (seconds)"}),a.jsx("input",{type:"number",step:"0.01",value:V[F.key]?.time??"",onChange:ue=>bn(F.key,"time",ue.target.value),placeholder:"0"})]})})]},F.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),te(qe?.benchmarks||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:zn,disabled:h,children:h?"Saving...":"Save"})]})]}),K&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Set Your Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{U(!1),R(je)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),ga.map(F=>{const ue=qe?.benchmarks?.[F.key];let T="-";return ue&&(F.unit==="time"&&ue.time?T=`${ue.time}s`:(ue.weight||ue.reps)&&(T=`${ue.weight||0}kg  ${ue.reps||0}`)),a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:F.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",T]})]}),F.unit==="weight"?a.jsxs("div",{className:"pb-edit-row",children:[a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Weight (kg)"}),a.jsx("input",{type:"number",step:"0.5",value:E[F.key]?.targetWeight??"",onChange:C=>In(F.key,"targetWeight",C.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"pb-edit-field",children:[a.jsx("label",{children:"Target Reps"}),a.jsx("input",{type:"number",value:E[F.key]?.targetReps??"",onChange:C=>In(F.key,"targetReps",C.target.value),placeholder:"0"})]})]}):a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsx("label",{children:"Target (seconds)"}),a.jsx("input",{type:"number",step:"1",value:E[F.key]?.targetValue??"",onChange:C=>In(F.key,"targetValue",C.target.value),placeholder:"0"})]})})]},F.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{U(!1),R(je)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:hs,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&a.jsxs("div",{className:"pb-metrics-section",children:[!j&&!L&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"pb-metrics-card",children:[a.jsx("h3",{children:"Body Measurements"}),a.jsx("p",{className:"pb-metrics-month",children:Jr(rt)}),a.jsx("div",{className:"pb-metrics-list",children:wo.map(F=>{const ue=qe?.bodyMetrics?.[F.key],T=ge(F.key),C=Oe[F.key],G=Yn(F.key),Z=G!==null&&G>=1;return a.jsxs("div",{className:"pb-metric-row",children:[a.jsxs("div",{className:"pb-metric-top",children:[a.jsxs("div",{className:"pb-metric-left",children:[a.jsxs("span",{className:"pb-metric-name",children:[F.name,jn("metric",F.key)&&a.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),C&&a.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",C.targetValue," ",F.suffix]})]}),a.jsxs("div",{className:"pb-metric-values",children:[a.jsx("span",{className:"pb-metric-current",children:ue!=null?`${ue} ${F.suffix}`:"-"}),T!==null&&a.jsxs("span",{className:`pb-metric-change ${T>0?"up":T<0?"down":"same"}`,children:[T>0?"+":"",T," ",F.suffix]})]})]}),G!==null&&a.jsxs("div",{className:"pb-metric-progress",children:[a.jsx("div",{className:"pb-metric-bar",children:a.jsx("div",{className:`pb-metric-bar-fill ${Z?"hit":""}`,style:{width:`${Math.round(G*100)}%`}})}),a.jsx("span",{className:`pb-metric-percent ${Z?"hit":""}`,children:Z?"Hit!":`${Math.round(G*100)}%`})]})]},F.key)})})]}),a.jsxs("div",{className:"pb-action-buttons",children:[a.jsx("button",{className:"pb-edit-btn",onClick:()=>O(!0),children:qe?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),a.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>D(!0),children:Object.keys(Oe).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(Oe).length>0)&&a.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:es,disabled:h,children:"Reset All Goals"})]})]}),j&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsxs("h3",{children:["Measurements - ",Jr(rt)]}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{O(!1),fe(qe?.bodyMetrics||{})},children:""})]}),a.jsx("div",{className:"pb-edit-body",children:wo.map(F=>a.jsx("div",{className:"pb-edit-metric",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:[F.name," (",F.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:X[F.key]??"",onChange:ue=>Zn(F.key,ue.target.value),placeholder:"0"})]})},F.key))}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{O(!1),fe(qe?.bodyMetrics||{})},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Ut,disabled:h,children:h?"Saving...":"Save"})]})]}),L&&a.jsxs("div",{className:"pb-edit-card",children:[a.jsxs("div",{className:"pb-edit-header",children:[a.jsx("h3",{children:"Body Metric Targets"}),a.jsx("button",{className:"pb-edit-close",onClick:()=>{D(!1),I(Oe)},children:""})]}),a.jsxs("div",{className:"pb-edit-body",children:[a.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),wo.map(F=>{const ue=qe?.bodyMetrics?.[F.key];return a.jsxs("div",{className:"pb-edit-exercise",children:[a.jsxs("div",{className:"pb-edit-exercise-header",children:[a.jsx("div",{className:"pb-edit-exercise-name",children:F.name}),a.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ue!=null?`${ue} ${F.suffix}`:"-"]})]}),a.jsx("div",{className:"pb-edit-row",children:a.jsxs("div",{className:"pb-edit-field full",children:[a.jsxs("label",{children:["Target (",F.suffix,")"]}),a.jsx("input",{type:"number",step:"0.1",value:z[F.key]?.targetValue??"",onChange:T=>gs(F.key,T.target.value),placeholder:"0"})]})})]},F.key)})]}),a.jsxs("div",{className:"pb-edit-actions",children:[a.jsx("button",{className:"pb-cancel-btn",onClick:()=>{D(!1),I(Oe)},children:"Cancel"}),a.jsx("button",{className:"pb-save-btn",onClick:Hn,disabled:h,children:h?"Saving...":"Save Targets"})]})]})]}),s==="history"&&a.jsx("div",{className:"pb-history-section",children:n.length===0?a.jsxs("div",{className:"pb-empty",children:[a.jsx("h4",{children:"No records yet"}),a.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):a.jsxs(a.Fragment,{children:[Fe.length>0&&a.jsxs("div",{className:"pb-achievements-wall",children:[a.jsxs("h4",{className:"pb-achievements-wall-title",children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),a.jsx("div",{className:"pb-achievements-list",children:[...Fe].reverse().map((F,ue)=>a.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ue*.05}s`},children:[a.jsx("div",{className:"pb-achievement-star",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"pb-achievement-info",children:[a.jsx("span",{className:"pb-achievement-label",children:F.label}),a.jsx("span",{className:"pb-achievement-date",children:Jr(F.achievedMonth)})]})]},ue))})]}),a.jsx("div",{className:"pb-history-controls",children:a.jsx("button",{className:`pb-compare-toggle ${ae?"active":""}`,onClick:()=>{P(!ae),!ae&&n.length>=2&&(pe(n[0].month),Be(n[n.length-1].month))},children:ae?"Back to Timeline":"Compare Months"})}),ae?a.jsxs("div",{className:"pb-compare",children:[a.jsxs("div",{className:"pb-compare-selectors",children:[a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"From"}),a.jsx("select",{value:W,onChange:F=>pe(F.target.value),children:n.map(F=>a.jsx("option",{value:F.month,children:Jr(F.month)},F.month))})]}),a.jsx("div",{className:"pb-compare-vs",children:"vs"}),a.jsxs("div",{className:"pb-compare-select",children:[a.jsx("label",{children:"To"}),a.jsx("select",{value:Ne,onChange:F=>Be(F.target.value),children:n.map(F=>a.jsx("option",{value:F.month,children:Jr(F.month)},F.month))})]})]}),xe&&we&&a.jsxs("div",{className:"pb-compare-results",children:[a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Strength Benchmarks"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Exercise"}),a.jsx("span",{children:Jr(W).split(" ")[0]}),a.jsx("span",{children:Jr(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),ga.map(F=>{const ue=xe.benchmarks?.[F.key],T=we.benchmarks?.[F.key],C=kl(F,ue),G=kl(F,T),Z=Kp(G,C);return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:F.name}),a.jsx("span",{className:"pb-compare-val",children:ue?F.unit==="time"?ud(ue.time):`${ue.weight}x${ue.reps}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:T?F.unit==="time"?ud(T.time):`${T.weight}x${T.reps}`:"-"}),a.jsx("span",{className:`pb-compare-change ${Z!==null?Z>=0?"positive":"negative":""}`,children:Z!==null?`${Z>=0?"+":""}${Z.toFixed(1)}%`:"-"})]},F.key)})]})]}),a.jsxs("div",{className:"pb-compare-group",children:[a.jsx("h4",{children:"Body Measurements"}),a.jsxs("div",{className:"pb-compare-table",children:[a.jsxs("div",{className:"pb-compare-header-row",children:[a.jsx("span",{children:"Measurement"}),a.jsx("span",{children:Jr(W).split(" ")[0]}),a.jsx("span",{children:Jr(Ne).split(" ")[0]}),a.jsx("span",{children:"Change"})]}),wo.map(F=>{const ue=xe.bodyMetrics?.[F.key],T=we.bodyMetrics?.[F.key],C=ue!=null&&T!=null?parseFloat((T-ue).toFixed(2)):null;return a.jsxs("div",{className:"pb-compare-row",children:[a.jsx("span",{className:"pb-compare-name",children:F.name}),a.jsx("span",{className:"pb-compare-val",children:ue!=null?`${ue}`:"-"}),a.jsx("span",{className:"pb-compare-val",children:T!=null?`${T}`:"-"}),a.jsx("span",{className:`pb-compare-change ${C!==null?C>0?"positive":C<0?"negative":"neutral":""}`,children:C!==null?`${C>0?"+":""}${C} ${F.suffix}`:"-"})]},F.key)})]})]})]})]}):a.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((F,ue)=>{const T=n.find(C=>C.month<F.month&&n.indexOf(C)===n.indexOf(F)-1)||n.filter(C=>C.month<F.month).pop();return a.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ue*.05}s`},children:[a.jsx("div",{className:"pb-timeline-dot"}),a.jsxs("div",{className:"pb-timeline-card",children:[a.jsx("h4",{children:Jr(F.month)}),F.benchmarks&&Object.keys(F.benchmarks).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Strength Benchmarks"}),ga.map(C=>{const G=F.benchmarks[C.key];if(!G)return null;const Z=T?.benchmarks?.[C.key],ze=kl(C,G),Pe=kl(C,Z),Le=Kp(ze,Pe);return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:C.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsx("span",{className:"pb-timeline-value",children:C.unit==="time"?ud(G.time):x2(G.weight,G.reps)}),Le!==null&&a.jsxs("span",{className:`pb-timeline-change ${Le>=0?"positive":"negative"}`,children:[Le>=0?"+":"",Le.toFixed(1),"%"]})]})]},C.key)})]}),F.bodyMetrics&&Object.keys(F.bodyMetrics).length>0&&a.jsxs("div",{className:"pb-timeline-group",children:[a.jsx("h5",{children:"Body Measurements"}),wo.map(C=>{const G=F.bodyMetrics[C.key];if(G==null)return null;const Z=T?.bodyMetrics?.[C.key],ze=Z!=null?parseFloat((G-Z).toFixed(2)):null;return a.jsxs("div",{className:"pb-timeline-row",children:[a.jsx("span",{className:"pb-timeline-label",children:C.name}),a.jsxs("div",{className:"pb-timeline-values",children:[a.jsxs("span",{className:"pb-timeline-value",children:[G," ",C.suffix]}),ze!==null&&a.jsxs("span",{className:`pb-timeline-change ${ze>0?"positive":ze<0?"negative":"neutral"}`,children:[ze>0?"+":"",ze," ",C.suffix]})]})]},C.key)})]})]})]},F.id)})})]})})]})]}),Y&&a.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Se(null),children:a.jsxs("div",{className:"pb-celebration-card",children:[a.jsx("div",{className:"pb-celebration-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),a.jsx("div",{className:"pb-celebration-badges",children:Y.map((F,ue)=>a.jsx("div",{className:"pb-celebration-badge",children:F.label},ue))}),a.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Ve&&a.jsxs("div",{className:`toast-notification ${Ve.type}`,children:[a.jsx("span",{className:"toast-icon",children:Ve.type==="success"?a.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),a.jsx("span",{className:"toast-message",children:Ve.message}),a.jsx("button",{className:"toast-close",onClick:()=>ht(null),children:""})]}),be&&a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:"block-nav-tab",onClick:()=>ct("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),a.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),a.jsx("span",{children:"Home"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>ct("/client/forms"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),a.jsx("span",{children:"Forms"})]}),a.jsxs("button",{className:"block-nav-tab",onClick:()=>ct("/client/tools"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),a.jsx("span",{children:"Tools"})]}),a.jsxs("button",{className:"block-nav-tab active",children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20V10"}),a.jsx("path",{d:"M18 20V4"}),a.jsx("path",{d:"M6 20v-4"})]}),a.jsx("span",{children:"PBs"})]}),tt?.circuitAccess&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>ct("/client/circuit"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]}),a.jsx("span",{children:"Circuit"})]})]}),ce&&a.jsx(Sa,{active:"progress"})]})}const ED=w.lazy(()=>Fr(()=>import("./Dashboard-QS1zuJ3H.js"),__vite__mapDeps([0,1]))),jD=w.lazy(()=>Fr(()=>import("./AddClient-DLDwvdfj.js"),__vite__mapDeps([2,3]))),SD=w.lazy(()=>Fr(()=>import("./ClientDashboard-Ch5U6oJa.js"),[])),ND=w.lazy(()=>Fr(()=>import("./ClientForms-CNcS8oay.js"),__vite__mapDeps([4,5]))),CD=w.lazy(()=>Fr(()=>import("./ClientTools-DGHfi9a8.js"),__vite__mapDeps([6,7]))),RD=w.lazy(()=>Fr(()=>import("./MacroCalculator-BUrtn36m.js"),__vite__mapDeps([8,7]))),AD=w.lazy(()=>Fr(()=>import("./ProteinSnacks-DDMon3Om.js"),__vite__mapDeps([9,7]))),ID=w.lazy(()=>Fr(()=>import("./DailyMotivation-CE3hhY4d.js"),__vite__mapDeps([10,7]))),MD=w.lazy(()=>Fr(()=>import("./CircuitDashboard-DOb7mlK0.js"),__vite__mapDeps([11,12]))),DD=w.lazy(()=>Fr(()=>import("./CircuitBooking-yOVOtMQl.js"),__vite__mapDeps([13,14,12]))),PD=w.lazy(()=>Fr(()=>import("./Leaderboard-DGcUQ6vX.js"),__vite__mapDeps([15,16])));function LD({children:s}){const{pathname:e}=ra();return w.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),w.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function OD(){const s=Js();return w.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function VD(){return a.jsx(A3,{children:a.jsx(R3,{children:a.jsxs(Vj,{basename:"/login",children:[a.jsx(OD,{}),a.jsx(LD,{children:a.jsx(w.Suspense,{fallback:null,children:a.jsxs(fj,{children:[a.jsx(ns,{path:"/",element:a.jsx(I3,{})}),a.jsx(ns,{path:"/dashboard",element:a.jsx(ED,{})}),a.jsx(ns,{path:"/add-client",element:a.jsx(jD,{})}),a.jsx(ns,{path:"/client",element:a.jsx(SD,{})}),a.jsx(ns,{path:"/client/forms",element:a.jsx(ND,{})}),a.jsx(ns,{path:"/client/tools",element:a.jsx(CD,{})}),a.jsx(ns,{path:"/client/tools/macros",element:a.jsx(RD,{})}),a.jsx(ns,{path:"/client/tools/snacks",element:a.jsx(AD,{})}),a.jsx(ns,{path:"/client/tools/motivation",element:a.jsx(ID,{})}),a.jsx(ns,{path:"/client/personal-bests",element:a.jsx(TD,{})}),a.jsx(ns,{path:"/client/circuit",element:a.jsx(MD,{})}),a.jsx(ns,{path:"/client/circuit/booking",element:a.jsx(DD,{})}),a.jsx(ns,{path:"/client/core-buddy",element:a.jsx(B3,{})}),a.jsx(ns,{path:"/client/core-buddy/nutrition",element:a.jsx(F3,{})}),a.jsx(ns,{path:"/client/core-buddy/workouts",element:a.jsx(eD,{})}),a.jsx(ns,{path:"/client/core-buddy/programmes",element:a.jsx(aD,{})}),a.jsx(ns,{path:"/client/core-buddy/achievements",element:a.jsx(hD,{})}),a.jsx(ns,{path:"/client/core-buddy/consistency",element:a.jsx(mD,{})}),a.jsx(ns,{path:"/client/core-buddy/buddies",element:a.jsx(pD,{})}),a.jsx(ns,{path:"/client/core-buddy/profile/:userId",element:a.jsx(gD,{})}),a.jsx(ns,{path:"/client/leaderboard",element:a.jsx(PD,{})}),a.jsx(ns,{path:"*",element:a.jsx(hj,{to:"/",replace:!0})})]})})})]})})})}dE.createRoot(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsx(VD,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{Sa as C,bt as T,Xa as a,mr as b,Yt as c,ke as d,Xe as e,BD as f,_n as g,PC as h,Kn as i,a as j,qr as k,Ca as l,Js as m,qy as n,Hd as o,On as p,An as q,w as r,zD as s,To as u,vn as w};
