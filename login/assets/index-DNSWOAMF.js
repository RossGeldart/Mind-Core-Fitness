const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-VoLIOyCl.js","assets/scheduleUtils-a2tn0x12.js","assets/Dashboard-BvdLF0uv.css","assets/AddClient-AfPLLu-M.js","assets/AddClient-DH1OFzHo.css","assets/ClientDashboard-Cmn8mQ4t.js","assets/ClientDashboard-BI8UXFpK.css","assets/ClientForms-DNhVRTzv.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-CSgcAn5S.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-WuldINl2.js","assets/ProteinSnacks-CyjUEn9F.js","assets/DailyMotivation-CTm9ZN-a.js","assets/CircuitDashboard-CLopeKLu.js","assets/CircuitDashboard-C8T0uect.css","assets/CircuitBooking-ClBoT8S-.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/PersonalBests-KDcOqDl4.js","assets/PersonalBests-BkG3fixu.css","assets/Leaderboard-C58vZygU.js","assets/Leaderboard-Dq-r5svP.css","assets/UpgradePage-CdSGCZ5R.js","assets/stripe-Da7IPrZW.js","assets/UpgradePage-Chom0F_j.css","assets/Onboarding-nfdr4ztD.js","assets/Onboarding-DvZF-mkH.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=t(l);fetch(l.href,u)}})();var Ep={exports:{}},Hc={};var zb;function Tj(){if(zb)return Hc;zb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:d,ref:l!==void 0?l:null,props:u}}return Hc.Fragment=e,Hc.jsx=t,Hc.jsxs=t,Hc}var Fb;function jj(){return Fb||(Fb=1,Ep.exports=Tj()),Ep.exports}var a=jj(),Tp={exports:{}},kt={};var qb;function Sj(){if(qb)return kt;qb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function L(P){return P===null||typeof P!="object"?null:(P=T&&P[T]||P["@@iterator"],typeof P=="function"?P:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,B={};function K(P,re,we){this.props=P,this.context=re,this.refs=B,this.updater=we||$}K.prototype.isReactComponent={},K.prototype.setState=function(P,re){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,re,"setState")},K.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function G(){}G.prototype=K.prototype;function Q(P,re,we){this.props=P,this.context=re,this.refs=B,this.updater=we||$}var he=Q.prototype=new G;he.constructor=Q,q(he,K.prototype),he.isPureReactComponent=!0;var Ee=Array.isArray;function ge(){}var C={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function R(P,re,we){var _e=we.ref;return{$$typeof:s,type:P,key:re,ref:_e!==void 0?_e:null,props:we}}function V(P,re){return R(P.type,re,P.props)}function O(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function D(P){var re={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(we){return re[we]})}var A=/\/+/g;function Le(P,re){return typeof P=="object"&&P!==null&&P.key!=null?D(""+P.key):re.toString(36)}function Xe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ge,ge):(P.status="pending",P.then(function(re){P.status==="pending"&&(P.status="fulfilled",P.value=re)},function(re){P.status==="pending"&&(P.status="rejected",P.reason=re)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function X(P,re,we,_e,xe){var Se=typeof P;(Se==="undefined"||Se==="boolean")&&(P=null);var Fe=!1;if(P===null)Fe=!0;else switch(Se){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(P.$$typeof){case s:case e:Fe=!0;break;case b:return Fe=P._init,X(Fe(P._payload),re,we,_e,xe)}}if(Fe)return xe=xe(P),Fe=_e===""?"."+Le(P,0):_e,Ee(xe)?(we="",Fe!=null&&(we=Fe.replace(A,"$&/")+"/"),X(xe,re,we,"",function(Mt){return Mt})):xe!=null&&(O(xe)&&(xe=V(xe,we+(xe.key==null||P&&P.key===xe.key?"":(""+xe.key).replace(A,"$&/")+"/")+Fe)),re.push(xe)),1;Fe=0;var Ze=_e===""?".":_e+":";if(Ee(P))for(var Oe=0;Oe<P.length;Oe++)_e=P[Oe],Se=Ze+Le(_e,Oe),Fe+=X(_e,re,we,Se,xe);else if(Oe=L(P),typeof Oe=="function")for(P=Oe.call(P),Oe=0;!(_e=P.next()).done;)_e=_e.value,Se=Ze+Le(_e,Oe++),Fe+=X(_e,re,we,Se,xe);else if(Se==="object"){if(typeof P.then=="function")return X(Xe(P),re,we,_e,xe);throw re=String(P),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function je(P,re,we){if(P==null)return P;var _e=[],xe=0;return X(P,_e,"","",function(Se){return re.call(we,Se,xe++)}),_e}function De(P){if(P._status===-1){var re=P._result;re=re(),re.then(function(we){(P._status===0||P._status===-1)&&(P._status=1,P._result=we)},function(we){(P._status===0||P._status===-1)&&(P._status=2,P._result=we)}),P._status===-1&&(P._status=0,P._result=re)}if(P._status===1)return P._result.default;throw P._result}var Ce=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},J={map:je,forEach:function(P,re,we){je(P,function(){re.apply(this,arguments)},we)},count:function(P){var re=0;return je(P,function(){re++}),re},toArray:function(P){return je(P,function(re){return re})||[]},only:function(P){if(!O(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return kt.Activity=E,kt.Children=J,kt.Component=K,kt.Fragment=t,kt.Profiler=l,kt.PureComponent=Q,kt.StrictMode=i,kt.Suspense=g,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,kt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return C.H.useMemoCache(P)}},kt.cache=function(P){return function(){return P.apply(null,arguments)}},kt.cacheSignal=function(){return null},kt.cloneElement=function(P,re,we){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var _e=q({},P.props),xe=P.key;if(re!=null)for(Se in re.key!==void 0&&(xe=""+re.key),re)!j.call(re,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&re.ref===void 0||(_e[Se]=re[Se]);var Se=arguments.length-2;if(Se===1)_e.children=we;else if(1<Se){for(var Fe=Array(Se),Ze=0;Ze<Se;Ze++)Fe[Ze]=arguments[Ze+2];_e.children=Fe}return R(P.type,xe,_e)},kt.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},kt.createElement=function(P,re,we){var _e,xe={},Se=null;if(re!=null)for(_e in re.key!==void 0&&(Se=""+re.key),re)j.call(re,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(xe[_e]=re[_e]);var Fe=arguments.length-2;if(Fe===1)xe.children=we;else if(1<Fe){for(var Ze=Array(Fe),Oe=0;Oe<Fe;Oe++)Ze[Oe]=arguments[Oe+2];xe.children=Ze}if(P&&P.defaultProps)for(_e in Fe=P.defaultProps,Fe)xe[_e]===void 0&&(xe[_e]=Fe[_e]);return R(P,Se,xe)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(P){return{$$typeof:p,render:P}},kt.isValidElement=O,kt.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:De}},kt.memo=function(P,re){return{$$typeof:y,type:P,compare:re===void 0?null:re}},kt.startTransition=function(P){var re=C.T,we={};C.T=we;try{var _e=P(),xe=C.S;xe!==null&&xe(we,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(ge,Ce)}catch(Se){Ce(Se)}finally{re!==null&&we.types!==null&&(re.types=we.types),C.T=re}},kt.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},kt.use=function(P){return C.H.use(P)},kt.useActionState=function(P,re,we){return C.H.useActionState(P,re,we)},kt.useCallback=function(P,re){return C.H.useCallback(P,re)},kt.useContext=function(P){return C.H.useContext(P)},kt.useDebugValue=function(){},kt.useDeferredValue=function(P,re){return C.H.useDeferredValue(P,re)},kt.useEffect=function(P,re){return C.H.useEffect(P,re)},kt.useEffectEvent=function(P){return C.H.useEffectEvent(P)},kt.useId=function(){return C.H.useId()},kt.useImperativeHandle=function(P,re,we){return C.H.useImperativeHandle(P,re,we)},kt.useInsertionEffect=function(P,re){return C.H.useInsertionEffect(P,re)},kt.useLayoutEffect=function(P,re){return C.H.useLayoutEffect(P,re)},kt.useMemo=function(P,re){return C.H.useMemo(P,re)},kt.useOptimistic=function(P,re){return C.H.useOptimistic(P,re)},kt.useReducer=function(P,re,we){return C.H.useReducer(P,re,we)},kt.useRef=function(P){return C.H.useRef(P)},kt.useState=function(P){return C.H.useState(P)},kt.useSyncExternalStore=function(P,re,we){return C.H.useSyncExternalStore(P,re,we)},kt.useTransition=function(){return C.H.useTransition()},kt.version="19.2.4",kt}var Hb;function Yg(){return Hb||(Hb=1,Tp.exports=Sj()),Tp.exports}var w=Yg(),jp={exports:{}},$c={},Sp={exports:{}},Cp={};var $b;function Cj(){return $b||($b=1,(function(s){function e(X,je){var De=X.length;X.push(je);e:for(;0<De;){var Ce=De-1>>>1,J=X[Ce];if(0<l(J,je))X[Ce]=je,X[De]=J,De=Ce;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var je=X[0],De=X.pop();if(De!==je){X[0]=De;e:for(var Ce=0,J=X.length,P=J>>>1;Ce<P;){var re=2*(Ce+1)-1,we=X[re],_e=re+1,xe=X[_e];if(0>l(we,De))_e<J&&0>l(xe,we)?(X[Ce]=xe,X[_e]=De,Ce=_e):(X[Ce]=we,X[re]=De,Ce=re);else if(_e<J&&0>l(xe,De))X[Ce]=xe,X[_e]=De,Ce=_e;else break e}}return je}function l(X,je){var De=X.sortIndex-je.sortIndex;return De!==0?De:X.id-je.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],b=1,E=null,T=3,L=!1,$=!1,q=!1,B=!1,K=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function he(X){for(var je=t(y);je!==null;){if(je.callback===null)i(y);else if(je.startTime<=X)i(y),je.sortIndex=je.expirationTime,e(g,je);else break;je=t(y)}}function Ee(X){if(q=!1,he(X),!$)if(t(g)!==null)$=!0,ge||(ge=!0,D());else{var je=t(y);je!==null&&Xe(Ee,je.startTime-X)}}var ge=!1,C=-1,j=5,R=-1;function V(){return B?!0:!(s.unstable_now()-R<j)}function O(){if(B=!1,ge){var X=s.unstable_now();R=X;var je=!0;try{e:{$=!1,q&&(q=!1,G(C),C=-1),L=!0;var De=T;try{t:{for(he(X),E=t(g);E!==null&&!(E.expirationTime>X&&V());){var Ce=E.callback;if(typeof Ce=="function"){E.callback=null,T=E.priorityLevel;var J=Ce(E.expirationTime<=X);if(X=s.unstable_now(),typeof J=="function"){E.callback=J,he(X),je=!0;break t}E===t(g)&&i(g),he(X)}else i(g);E=t(g)}if(E!==null)je=!0;else{var P=t(y);P!==null&&Xe(Ee,P.startTime-X),je=!1}}break e}finally{E=null,T=De,L=!1}je=void 0}}finally{je?D():ge=!1}}}var D;if(typeof Q=="function")D=function(){Q(O)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,Le=A.port2;A.port1.onmessage=O,D=function(){Le.postMessage(null)}}else D=function(){K(O,0)};function Xe(X,je){C=K(function(){X(s.unstable_now())},je)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(X){switch(T){case 1:case 2:case 3:var je=3;break;default:je=T}var De=T;T=je;try{return X()}finally{T=De}},s.unstable_requestPaint=function(){B=!0},s.unstable_runWithPriority=function(X,je){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var De=T;T=X;try{return je()}finally{T=De}},s.unstable_scheduleCallback=function(X,je,De){var Ce=s.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?Ce+De:Ce):De=Ce,X){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=De+J,X={id:b++,callback:je,priorityLevel:X,startTime:De,expirationTime:J,sortIndex:-1},De>Ce?(X.sortIndex=De,e(y,X),t(g)===null&&X===t(y)&&(q?(G(C),C=-1):q=!0,Xe(Ee,De-Ce))):(X.sortIndex=J,e(g,X),$||L||($=!0,ge||(ge=!0,D()))),X},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(X){var je=T;return function(){var De=T;T=je;try{return X.apply(this,arguments)}finally{T=De}}}})(Cp)),Cp}var Wb;function Nj(){return Wb||(Wb=1,Sp.exports=Cj()),Sp.exports}var Np={exports:{}},qs={};var Gb;function Aj(){if(Gb)return qs;Gb=1;var s=Yg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:g,containerInfo:y,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return qs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,qs.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,b)},qs.flushSync=function(g){var y=d.T,b=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=y,i.p=b,i.d.f()}},qs.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},qs.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},qs.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:L}):b==="script"&&i.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},qs.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},qs.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,E=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},qs.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},qs.requestFormReset=function(g){i.d.r(g)},qs.unstable_batchedUpdates=function(g,y){return g(y)},qs.useFormState=function(g,y,b){return d.H.useFormState(g,y,b)},qs.useFormStatus=function(){return d.H.useHostTransitionStatus()},qs.version="19.2.4",qs}var Kb;function Rj(){if(Kb)return Np.exports;Kb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Np.exports=Aj(),Np.exports}var Yb;function Ij(){if(Yb)return $c;Yb=1;var s=Nj(),e=Yg(),t=Rj();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function d(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(i(188))}function y(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),n;if(m===c)return g(f),r;m=m.sibling}throw Error(i(188))}if(o.return!==c.return)o=f,c=m;else{for(var x=!1,S=f.child;S;){if(S===o){x=!0,o=f,c=m;break}if(S===c){x=!0,c=f,o=m;break}S=S.sibling}if(!x){for(S=m.child;S;){if(S===o){x=!0,o=m,c=f;break}if(S===c){x=!0,c=m,o=f;break}S=S.sibling}if(!x)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function b(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=b(n),r!==null)return r;n=n.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function D(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var A=Symbol.for("react.client.reference");function Le(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===A?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case K:return"Profiler";case B:return"StrictMode";case Ee:return"Suspense";case ge:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case $:return"Portal";case Q:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case he:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return r=n.displayName||null,r!==null?r:Le(n.type)||"Memo";case j:r=n._payload,n=n._init;try{return Le(n(r))}catch{}}return null}var Xe=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,je=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},Ce=[],J=-1;function P(n){return{current:n}}function re(n){0>J||(n.current=Ce[J],Ce[J]=null,J--)}function we(n,r){J++,Ce[J]=n.current,n.current=r}var _e=P(null),xe=P(null),Se=P(null),Fe=P(null);function Ze(n,r){switch(we(Se,r),we(xe,n),we(_e,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?ub(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=ub(r),n=db(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}re(_e),we(_e,n)}function Oe(){re(_e),re(xe),re(Se)}function Mt(n){n.memoizedState!==null&&we(Fe,n);var r=_e.current,o=db(r,n.type);r!==o&&(we(xe,n),we(_e,o))}function on(n){xe.current===n&&(re(_e),re(xe)),Fe.current===n&&(re(Fe),Bc._currentValue=De)}var zn,Yt;function rt(n){if(zn===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);zn=r&&r[1]||"",Yt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zn+n+Yt}var st=!1;function ct(n,r){if(!n||st)return"";st=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(de){var ie=de}Reflect.construct(n,[],ke)}else{try{ke.call()}catch(de){ie=de}n.call(ke.prototype)}}else{try{throw Error()}catch(de){ie=de}(ke=n())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(de){if(de&&ie&&typeof de.stack=="string")return[de.stack,ie.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],S=m[1];if(x&&S){var U=x.split(`
`),ne=S.split(`
`);for(f=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;if(c===U.length||f===ne.length)for(c=U.length-1,f=ne.length-1;1<=c&&0<=f&&U[c]!==ne[f];)f--;for(;1<=c&&0<=f;c--,f--)if(U[c]!==ne[f]){if(c!==1||f!==1)do if(c--,f--,0>f||U[c]!==ne[f]){var pe=`
`+U[c].replace(" at new "," at ");return n.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",n.displayName)),pe}while(1<=c&&0<=f);break}}}finally{st=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?rt(o):""}function _n(n,r){switch(n.tag){case 26:case 27:case 5:return rt(n.type);case 16:return rt("Lazy");case 13:return n.child!==r&&r!==null?rt("Suspense Fallback"):rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return ct(n.type,!1);case 11:return ct(n.type.render,!1);case 1:return ct(n.type,!0);case 31:return rt("Activity");default:return""}}function fe(n){try{var r="",o=null;do r+=_n(n,o),o=n,n=n.return;while(n);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ct=Object.prototype.hasOwnProperty,ht=s.unstable_scheduleCallback,Rt=s.unstable_cancelCallback,Je=s.unstable_shouldYield,Tt=s.unstable_requestPaint,pt=s.unstable_now,Qt=s.unstable_getCurrentPriorityLevel,zs=s.unstable_ImmediatePriority,es=s.unstable_UserBlockingPriority,Wt=s.unstable_NormalPriority,se=s.unstable_LowPriority,Ae=s.unstable_IdlePriority,gt=s.log,yt=s.unstable_setDisableYieldValue,ut=null,qe=null;function nt(n){if(typeof gt=="function"&&yt(n),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(ut,n)}catch{}}var He=Math.clz32?Math.clz32:Nn,sn=Math.log,Xt=Math.LN2;function Nn(n){return n>>>=0,n===0?32:31-(sn(n)/Xt|0)|0}var Dn=256,Kn=262144,Jt=4194304;function Fn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function An(n,r,o){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=Fn(c):(x&=S,x!==0?f=Fn(x):o||(o=S&~n,o!==0&&(f=Fn(o))))):(S=c&~m,S!==0?f=Fn(S):x!==0?f=Fn(x):o||(o=c&~n,o!==0&&(f=Fn(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function pn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function ks(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ae(){var n=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),n}function Me(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function Ke(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function vt(n,r,o,c,f,m){var x=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,U=n.expirationTimes,ne=n.hiddenUpdates;for(o=x&~o;0<o;){var pe=31-He(o),ke=1<<pe;S[pe]=0,U[pe]=-1;var ie=ne[pe];if(ie!==null)for(ne[pe]=null,pe=0;pe<ie.length;pe++){var de=ie[pe];de!==null&&(de.lane&=-536870913)}o&=~ke}c!==0&&it(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(x&~r))}function it(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-He(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Gt(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var c=31-He(o),f=1<<c;f&r|n[c]&r&&(n[c]|=r),o&=~f}}function jn(n,r){var o=r&-r;return o=(o&42)!==0?1:gn(o),(o&(n.suspendedLanes|r))!==0?0:o}function gn(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Sn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ns(){var n=je.p;return n!==0?n:(n=window.event,n===void 0?32:Db(n.type))}function qn(n,r){var o=je.p;try{return je.p=n,r()}finally{je.p=o}}var Es=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Es,ln="__reactProps$"+Es,ls="__reactContainer$"+Es,Yr="__reactEvents$"+Es,fa="__reactListeners$"+Es,Qr="__reactHandles$"+Es,pr="__reactResources$"+Es,Hn="__reactMarker$"+Es;function Fs(n){delete n[Zt],delete n[ln],delete n[Yr],delete n[fa],delete n[Qr]}function vs(n){var r=n[Zt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[ls]||o[Zt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=vb(n);n!==null;){if(o=n[Zt])return o;n=vb(n)}return r}n=o,o=n.parentNode}return null}function Ln(n){if(n=n[Zt]||n[ls]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Rn(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function ts(n){var r=n[pr];return r||(r=n[pr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function zt(n){n[Hn]=!0}var gr=new Set,Rr={};function bs(n,r){kn(n,r),kn(n+"Capture",r)}function kn(n,r){for(Rr[n]=r,n=0;n<r.length;n++)gr.add(r[n])}var Qs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xr={},I={};function F(n){return Ct.call(I,n)?!0:Ct.call(Xr,n)?!1:Qs.test(n)?I[n]=!0:(Xr[n]=!0,!1)}function oe(n,r,o){if(F(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function ue(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Ue(n,r,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+c)}}function Be(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ft(n,r,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(x){o=""+x,m.call(this,x)}}),Object.defineProperty(n,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ye(n){if(!n._valueTracker){var r=$e(n)?"checked":"value";n._valueTracker=Ft(n,r,""+n[r])}}function $n(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return n&&(c=$e(n)?n.checked?"true":"false":n.value),n=c,n!==o?(r.setValue(n),!0):!1}function ns(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ar=/[\n"\\]/g;function On(n){return n.replace(ar,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xs(n,r,o,c,f,m,x,S){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),r!=null?x==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Be(r)):n.value!==""+Be(r)&&(n.value=""+Be(r)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),r!=null?As(n,x,Be(r)):o!=null?As(n,x,Be(o)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+Be(S):n.removeAttribute("name")}function Di(n,r,o,c,f,m,x,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Ye(n);return}o=o!=null?""+Be(o):"",r=r!=null?""+Be(r):o,S||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=S?n.checked:!!c,n.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x),Ye(n)}function As(n,r,o){r==="number"&&ns(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Js(n,r,o,c){if(n=n.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=r.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&c&&(n[o].defaultSelected=!0)}else{for(o=""+Be(o),r=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function ma(n,r,o){if(r!=null&&(r=""+Be(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+Be(o):""}function yr(n,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(Xe(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Be(r),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Ye(n)}function Ts(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var pa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jr(n,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,o):typeof o!="number"||o===0||pa.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function Ir(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&Jr(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Jr(n,m,r[m])}function Rs(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mi(n){return Mr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ss(){}var z=null;function le(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var k=null,M=null;function W(n){var r=Ln(n);if(r&&(n=r.stateNode)){var o=n[ln]||null;e:switch(n=r.stateNode,r.type){case"input":if(Xs(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+On(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==n&&c.form===n.form){var f=c[ln]||null;if(!f)throw Error(i(90));Xs(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===n.form&&$n(c)}break e;case"textarea":ma(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Js(n,!!o.multiple,r,!1)}}}var te=!1;function me(n,r,o){if(te)return n(r,o);te=!0;try{var c=n(r);return c}finally{if(te=!1,(k!==null||M!==null)&&(Od(),k&&(r=k,n=M,M=k=null,W(r),n)))for(r=0;r<n.length;r++)W(n[r])}}function Ie(n,r){var o=n.stateNode;if(o===null)return null;var c=o[ln]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Ne=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ve=!1;if(Ne)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch{Ve=!1}var at=null,yn=null,et=null;function en(){if(et)return et;var n,r=yn,o=r.length,c,f="value"in at?at.value:at.textContent,m=f.length;for(n=0;n<o&&r[n]===f[n];n++);var x=o-n;for(c=1;c<=x&&r[o-c]===f[m-c];c++);return et=f.slice(n,1<c?1-c:void 0)}function En(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function dt(){return!0}function It(){return!1}function cn(n){function r(o,c,f,m,x){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?dt:It,this.isPropagationStopped=It,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=dt)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=dt)},persist:function(){},isPersistent:dt}),r}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pn=cn(ws),hn=E({},ws,{view:0,detail:0}),Wn=cn(hn),cs,Zr,Dr,pi=E({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dr&&(Dr&&n.type==="mousemove"?(cs=n.screenX-Dr.screenX,Zr=n.screenY-Dr.screenY):Zr=cs=0,Dr=n),cs)},movementY:function(n){return"movementY"in n?n.movementY:Zr}}),ac=cn(pi),oo=E({},pi,{dataTransfer:0}),Hu=cn(oo),$u=E({},hn,{relatedTarget:0}),lo=cn($u),oc=E({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Wu=cn(oc),Zo=E({},ws,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gu=cn(Zo),Ku=E({},ws,{data:0}),gi=cn(Ku),Yu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Xu[n])?!!r[n]:!1}function ga(){return Ju}var Zs=E({},hn,{key:function(n){if(n.key){var r=Yu[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=En(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(n){return n.type==="keypress"?En(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?En(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Zu=cn(Zs),ed=E({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Li=cn(ed),h=E({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga}),v=cn(h),_=E({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=cn(_),Z=E({},pi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ce=cn(Z),Pe=E({},ws,{newState:0,oldState:0}),jt=cn(Pe),rs=[9,13,27,32],rn=Ne&&"CompositionEvent"in window,Vn=null;Ne&&"documentMode"in document&&(Vn=document.documentMode);var Lr=Ne&&"TextEvent"in window&&!Vn,yi=Ne&&(!rn||Vn&&8<Vn&&11>=Vn),ei=" ",ti=!1;function co(n,r){switch(n){case"keyup":return rs.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function el(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var tl=!1;function YE(n,r){switch(n){case"compositionend":return el(r);case"keypress":return r.which!==32?null:(ti=!0,ei);case"textInput":return n=r.data,n===ei&&ti?null:n;default:return null}}function QE(n,r){if(tl)return n==="compositionend"||!rn&&co(n,r)?(n=en(),et=yn=at=null,tl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return yi&&r.locale!=="ko"?null:r.data;default:return null}}var XE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x0(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!XE[n.type]:r==="textarea"}function _0(n,r,o,c){k?M?M.push(c):M=[c]:k=c,r=qd(r,"onChange"),0<r.length&&(o=new Pn("onChange","change",null,o,c),n.push({event:o,listeners:r}))}var lc=null,cc=null;function JE(n){rb(n,0)}function td(n){var r=Rn(n);if($n(r))return n}function k0(n,r){if(n==="change")return r}var E0=!1;if(Ne){var Rf;if(Ne){var If="oninput"in document;if(!If){var T0=document.createElement("div");T0.setAttribute("oninput","return;"),If=typeof T0.oninput=="function"}Rf=If}else Rf=!1;E0=Rf&&(!document.documentMode||9<document.documentMode)}function j0(){lc&&(lc.detachEvent("onpropertychange",S0),cc=lc=null)}function S0(n){if(n.propertyName==="value"&&td(cc)){var r=[];_0(r,cc,n,le(n)),me(JE,r)}}function ZE(n,r,o){n==="focusin"?(j0(),lc=r,cc=o,lc.attachEvent("onpropertychange",S0)):n==="focusout"&&j0()}function eT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return td(cc)}function tT(n,r){if(n==="click")return td(r)}function nT(n,r){if(n==="input"||n==="change")return td(r)}function sT(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var vr=typeof Object.is=="function"?Object.is:sT;function uc(n,r){if(vr(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!Ct.call(r,f)||!vr(n[f],r[f]))return!1}return!0}function C0(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function N0(n,r){var o=C0(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=r&&c>=r)return{node:o,offset:r-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=C0(o)}}function A0(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?A0(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function R0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=ns(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=ns(n.document)}return r}function Mf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var rT=Ne&&"documentMode"in document&&11>=document.documentMode,nl=null,Df=null,dc=null,Lf=!1;function I0(n,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Lf||nl==null||nl!==ns(c)||(c=nl,"selectionStart"in c&&Mf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),dc&&uc(dc,c)||(dc=c,c=qd(Df,"onSelect"),0<c.length&&(r=new Pn("onSelect","select",null,r,o),n.push({event:r,listeners:c}),r.target=nl)))}function uo(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var sl={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},Of={},M0={};Ne&&(M0=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function ho(n){if(Of[n])return Of[n];if(!sl[n])return n;var r=sl[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in M0)return Of[n]=r[o];return n}var D0=ho("animationend"),L0=ho("animationiteration"),O0=ho("animationstart"),iT=ho("transitionrun"),aT=ho("transitionstart"),oT=ho("transitioncancel"),P0=ho("transitionend"),V0=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function ni(n,r){V0.set(n,r),bs(r,[n])}var nd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Or=[],rl=0,Vf=0;function sd(){for(var n=rl,r=Vf=rl=0;r<n;){var o=Or[r];Or[r++]=null;var c=Or[r];Or[r++]=null;var f=Or[r];Or[r++]=null;var m=Or[r];if(Or[r++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}m!==0&&U0(o,f,m)}}function rd(n,r,o,c){Or[rl++]=n,Or[rl++]=r,Or[rl++]=o,Or[rl++]=c,Vf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Uf(n,r,o,c){return rd(n,r,o,c),id(n)}function fo(n,r){return rd(n,null,null,r),id(n)}function U0(n,r,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=n.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-He(o),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function id(n){if(50<Mc)throw Mc=0,Km=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var il={};function lT(n,r,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(n,r,o,c){return new lT(n,r,o,c)}function Bf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Oi(n,r){var o=n.alternate;return o===null?(o=br(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function B0(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function ad(n,r,o,c,f,m){var x=0;if(c=n,typeof n=="function")Bf(n)&&(x=1);else if(typeof n=="string")x=fj(n,o,_e.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=br(31,o,r,f),n.elementType=R,n.lanes=m,n;case q:return mo(o.children,f,m,r);case B:x=8,f|=24;break;case K:return n=br(12,o,r,f|2),n.elementType=K,n.lanes=m,n;case Ee:return n=br(13,o,r,f),n.elementType=Ee,n.lanes=m,n;case ge:return n=br(19,o,r,f),n.elementType=ge,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:x=10;break e;case G:x=9;break e;case he:x=11;break e;case C:x=14;break e;case j:x=16,c=null;break e}x=29,o=Error(i(130,n===null?"null":typeof n,"")),c=null}return r=br(x,o,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function mo(n,r,o,c){return n=br(7,n,c,r),n.lanes=o,n}function zf(n,r,o){return n=br(6,n,null,r),n.lanes=o,n}function z0(n){var r=br(18,null,null,0);return r.stateNode=n,r}function Ff(n,r,o){return r=br(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var F0=new WeakMap;function Pr(n,r){if(typeof n=="object"&&n!==null){var o=F0.get(n);return o!==void 0?o:(r={value:n,source:r,stack:fe(r)},F0.set(n,r),r)}return{value:n,source:r,stack:fe(r)}}var al=[],ol=0,od=null,hc=0,Vr=[],Ur=0,ya=null,vi=1,bi="";function Pi(n,r){al[ol++]=hc,al[ol++]=od,od=n,hc=r}function q0(n,r,o){Vr[Ur++]=vi,Vr[Ur++]=bi,Vr[Ur++]=ya,ya=n;var c=vi;n=bi;var f=32-He(c)-1;c&=~(1<<f),o+=1;var m=32-He(r)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,vi=1<<32-He(r)+f|o<<f|c,bi=m+n}else vi=1<<m|o<<f|c,bi=n}function qf(n){n.return!==null&&(Pi(n,1),q0(n,1,0))}function Hf(n){for(;n===od;)od=al[--ol],al[ol]=null,hc=al[--ol],al[ol]=null;for(;n===ya;)ya=Vr[--Ur],Vr[Ur]=null,bi=Vr[--Ur],Vr[Ur]=null,vi=Vr[--Ur],Vr[Ur]=null}function H0(n,r){Vr[Ur++]=vi,Vr[Ur++]=bi,Vr[Ur++]=ya,vi=r.id,bi=r.overflow,ya=n}var Is=null,In=null,qt=!1,va=null,Br=!1,$f=Error(i(519));function ba(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fc(Pr(r,n)),$f}function $0(n){var r=n.stateNode,o=n.type,c=n.memoizedProps;switch(r[Zt]=n,r[ln]=c,o){case"dialog":Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":case"embed":Lt("load",r);break;case"video":case"audio":for(o=0;o<Lc.length;o++)Lt(Lc[o],r);break;case"source":Lt("error",r);break;case"img":case"image":case"link":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"input":Lt("invalid",r),Di(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Lt("invalid",r);break;case"textarea":Lt("invalid",r),yr(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||lb(r.textContent,o)?(c.popover!=null&&(Lt("beforetoggle",r),Lt("toggle",r)),c.onScroll!=null&&Lt("scroll",r),c.onScrollEnd!=null&&Lt("scrollend",r),c.onClick!=null&&(r.onclick=ss),r=!0):r=!1,r||ba(n,!0)}function W0(n){for(Is=n.return;Is;)switch(Is.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:Is=Is.return}}function ll(n){if(n!==Is)return!1;if(!qt)return W0(n),qt=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||cp(n.type,n.memoizedProps)),o=!o),o&&In&&ba(n),W0(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));In=yb(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));In=yb(n)}else r===27?(r=In,Ma(n.type)?(n=mp,mp=null,In=n):In=r):In=Is?Fr(n.stateNode.nextSibling):null;return!0}function po(){In=Is=null,qt=!1}function Wf(){var n=va;return n!==null&&(ur===null?ur=n:ur.push.apply(ur,n),va=null),n}function fc(n){va===null?va=[n]:va.push(n)}var Gf=P(null),go=null,Vi=null;function wa(n,r,o){we(Gf,r._currentValue),r._currentValue=o}function Ui(n){n._currentValue=Gf.current,re(Gf)}function Kf(n,r,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===o)break;n=n.return}}function Yf(n,r,o,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var U=0;U<r.length;U++)if(S.context===r[U]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),Kf(m.return,o,n),c||(x=null);break e}m=S.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=o,m=x.alternate,m!==null&&(m.lanes|=o),Kf(x,o,n),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===n){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function cl(n,r,o,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var S=f.type;vr(f.pendingProps.value,x.value)||(n!==null?n.push(S):n=[S])}}else if(f===Fe.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Bc):n=[Bc])}f=f.return}n!==null&&Yf(r,n,o,c),r.flags|=262144}function ld(n){for(n=n.firstContext;n!==null;){if(!vr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function yo(n){go=n,Vi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ms(n){return G0(go,n)}function cd(n,r){return go===null&&yo(n),G0(n,r)}function G0(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},Vi===null){if(n===null)throw Error(i(308));Vi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Vi=Vi.next=r;return o}var cT=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},uT=s.unstable_scheduleCallback,dT=s.unstable_NormalPriority,us={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qf(){return{controller:new cT,data:new Map,refCount:0}}function mc(n){n.refCount--,n.refCount===0&&uT(dT,function(){n.controller.abort()})}var pc=null,Xf=0,ul=0,dl=null;function hT(n,r){if(pc===null){var o=pc=[];Xf=0,ul=ep(),dl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return Xf++,r.then(K0,K0),r}function K0(){if(--Xf===0&&pc!==null){dl!==null&&(dl.status="fulfilled");var n=pc;pc=null,ul=0,dl=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function fT(n,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Y0=X.S;X.S=function(n,r){I1=pt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&hT(n,r),Y0!==null&&Y0(n,r)};var vo=P(null);function Jf(){var n=vo.current;return n!==null?n:Tn.pooledCache}function ud(n,r){r===null?we(vo,vo.current):we(vo,r.pool)}function Q0(){var n=Jf();return n===null?null:{parent:us._currentValue,pool:n}}var hl=Error(i(460)),Zf=Error(i(474)),dd=Error(i(542)),hd={then:function(){}};function X0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function J0(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(ss,ss),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,ev(n),n;default:if(typeof r.status=="string")r.then(ss,ss);else{if(n=Tn,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,ev(n),n}throw wo=r,hl}}function bo(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(wo=o,hl):o}}var wo=null;function Z0(){if(wo===null)throw Error(i(459));var n=wo;return wo=null,n}function ev(n){if(n===hl||n===dd)throw Error(i(483))}var fl=null,gc=0;function fd(n){var r=gc;return gc+=1,fl===null&&(fl=[]),J0(fl,n,r)}function yc(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function md(n,r){throw r.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function tv(n){function r(Y,H){if(n){var ee=Y.deletions;ee===null?(Y.deletions=[H],Y.flags|=16):ee.push(H)}}function o(Y,H){if(!n)return null;for(;H!==null;)r(Y,H),H=H.sibling;return null}function c(Y){for(var H=new Map;Y!==null;)Y.key!==null?H.set(Y.key,Y):H.set(Y.index,Y),Y=Y.sibling;return H}function f(Y,H){return Y=Oi(Y,H),Y.index=0,Y.sibling=null,Y}function m(Y,H,ee){return Y.index=ee,n?(ee=Y.alternate,ee!==null?(ee=ee.index,ee<H?(Y.flags|=67108866,H):ee):(Y.flags|=67108866,H)):(Y.flags|=1048576,H)}function x(Y){return n&&Y.alternate===null&&(Y.flags|=67108866),Y}function S(Y,H,ee,be){return H===null||H.tag!==6?(H=zf(ee,Y.mode,be),H.return=Y,H):(H=f(H,ee),H.return=Y,H)}function U(Y,H,ee,be){var ot=ee.type;return ot===q?pe(Y,H,ee.props.children,be,ee.key):H!==null&&(H.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===j&&bo(ot)===H.type)?(H=f(H,ee.props),yc(H,ee),H.return=Y,H):(H=ad(ee.type,ee.key,ee.props,null,Y.mode,be),yc(H,ee),H.return=Y,H)}function ne(Y,H,ee,be){return H===null||H.tag!==4||H.stateNode.containerInfo!==ee.containerInfo||H.stateNode.implementation!==ee.implementation?(H=Ff(ee,Y.mode,be),H.return=Y,H):(H=f(H,ee.children||[]),H.return=Y,H)}function pe(Y,H,ee,be,ot){return H===null||H.tag!==7?(H=mo(ee,Y.mode,be,ot),H.return=Y,H):(H=f(H,ee),H.return=Y,H)}function ke(Y,H,ee){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=zf(""+H,Y.mode,ee),H.return=Y,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case L:return ee=ad(H.type,H.key,H.props,null,Y.mode,ee),yc(ee,H),ee.return=Y,ee;case $:return H=Ff(H,Y.mode,ee),H.return=Y,H;case j:return H=bo(H),ke(Y,H,ee)}if(Xe(H)||D(H))return H=mo(H,Y.mode,ee,null),H.return=Y,H;if(typeof H.then=="function")return ke(Y,fd(H),ee);if(H.$$typeof===Q)return ke(Y,cd(Y,H),ee);md(Y,H)}return null}function ie(Y,H,ee,be){var ot=H!==null?H.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ot!==null?null:S(Y,H,""+ee,be);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case L:return ee.key===ot?U(Y,H,ee,be):null;case $:return ee.key===ot?ne(Y,H,ee,be):null;case j:return ee=bo(ee),ie(Y,H,ee,be)}if(Xe(ee)||D(ee))return ot!==null?null:pe(Y,H,ee,be,null);if(typeof ee.then=="function")return ie(Y,H,fd(ee),be);if(ee.$$typeof===Q)return ie(Y,H,cd(Y,ee),be);md(Y,ee)}return null}function de(Y,H,ee,be,ot){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return Y=Y.get(ee)||null,S(H,Y,""+be,ot);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case L:return Y=Y.get(be.key===null?ee:be.key)||null,U(H,Y,be,ot);case $:return Y=Y.get(be.key===null?ee:be.key)||null,ne(H,Y,be,ot);case j:return be=bo(be),de(Y,H,ee,be,ot)}if(Xe(be)||D(be))return Y=Y.get(ee)||null,pe(H,Y,be,ot,null);if(typeof be.then=="function")return de(Y,H,ee,fd(be),ot);if(be.$$typeof===Q)return de(Y,H,ee,cd(H,be),ot);md(H,be)}return null}function Qe(Y,H,ee,be){for(var ot=null,tn=null,tt=H,Nt=H=0,Pt=null;tt!==null&&Nt<ee.length;Nt++){tt.index>Nt?(Pt=tt,tt=null):Pt=tt.sibling;var nn=ie(Y,tt,ee[Nt],be);if(nn===null){tt===null&&(tt=Pt);break}n&&tt&&nn.alternate===null&&r(Y,tt),H=m(nn,H,Nt),tn===null?ot=nn:tn.sibling=nn,tn=nn,tt=Pt}if(Nt===ee.length)return o(Y,tt),qt&&Pi(Y,Nt),ot;if(tt===null){for(;Nt<ee.length;Nt++)tt=ke(Y,ee[Nt],be),tt!==null&&(H=m(tt,H,Nt),tn===null?ot=tt:tn.sibling=tt,tn=tt);return qt&&Pi(Y,Nt),ot}for(tt=c(tt);Nt<ee.length;Nt++)Pt=de(tt,Y,Nt,ee[Nt],be),Pt!==null&&(n&&Pt.alternate!==null&&tt.delete(Pt.key===null?Nt:Pt.key),H=m(Pt,H,Nt),tn===null?ot=Pt:tn.sibling=Pt,tn=Pt);return n&&tt.forEach(function(Va){return r(Y,Va)}),qt&&Pi(Y,Nt),ot}function ft(Y,H,ee,be){if(ee==null)throw Error(i(151));for(var ot=null,tn=null,tt=H,Nt=H=0,Pt=null,nn=ee.next();tt!==null&&!nn.done;Nt++,nn=ee.next()){tt.index>Nt?(Pt=tt,tt=null):Pt=tt.sibling;var Va=ie(Y,tt,nn.value,be);if(Va===null){tt===null&&(tt=Pt);break}n&&tt&&Va.alternate===null&&r(Y,tt),H=m(Va,H,Nt),tn===null?ot=Va:tn.sibling=Va,tn=Va,tt=Pt}if(nn.done)return o(Y,tt),qt&&Pi(Y,Nt),ot;if(tt===null){for(;!nn.done;Nt++,nn=ee.next())nn=ke(Y,nn.value,be),nn!==null&&(H=m(nn,H,Nt),tn===null?ot=nn:tn.sibling=nn,tn=nn);return qt&&Pi(Y,Nt),ot}for(tt=c(tt);!nn.done;Nt++,nn=ee.next())nn=de(tt,Y,Nt,nn.value,be),nn!==null&&(n&&nn.alternate!==null&&tt.delete(nn.key===null?Nt:nn.key),H=m(nn,H,Nt),tn===null?ot=nn:tn.sibling=nn,tn=nn);return n&&tt.forEach(function(Ej){return r(Y,Ej)}),qt&&Pi(Y,Nt),ot}function wn(Y,H,ee,be){if(typeof ee=="object"&&ee!==null&&ee.type===q&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case L:e:{for(var ot=ee.key;H!==null;){if(H.key===ot){if(ot=ee.type,ot===q){if(H.tag===7){o(Y,H.sibling),be=f(H,ee.props.children),be.return=Y,Y=be;break e}}else if(H.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===j&&bo(ot)===H.type){o(Y,H.sibling),be=f(H,ee.props),yc(be,ee),be.return=Y,Y=be;break e}o(Y,H);break}else r(Y,H);H=H.sibling}ee.type===q?(be=mo(ee.props.children,Y.mode,be,ee.key),be.return=Y,Y=be):(be=ad(ee.type,ee.key,ee.props,null,Y.mode,be),yc(be,ee),be.return=Y,Y=be)}return x(Y);case $:e:{for(ot=ee.key;H!==null;){if(H.key===ot)if(H.tag===4&&H.stateNode.containerInfo===ee.containerInfo&&H.stateNode.implementation===ee.implementation){o(Y,H.sibling),be=f(H,ee.children||[]),be.return=Y,Y=be;break e}else{o(Y,H);break}else r(Y,H);H=H.sibling}be=Ff(ee,Y.mode,be),be.return=Y,Y=be}return x(Y);case j:return ee=bo(ee),wn(Y,H,ee,be)}if(Xe(ee))return Qe(Y,H,ee,be);if(D(ee)){if(ot=D(ee),typeof ot!="function")throw Error(i(150));return ee=ot.call(ee),ft(Y,H,ee,be)}if(typeof ee.then=="function")return wn(Y,H,fd(ee),be);if(ee.$$typeof===Q)return wn(Y,H,cd(Y,ee),be);md(Y,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,H!==null&&H.tag===6?(o(Y,H.sibling),be=f(H,ee),be.return=Y,Y=be):(o(Y,H),be=zf(ee,Y.mode,be),be.return=Y,Y=be),x(Y)):o(Y,H)}return function(Y,H,ee,be){try{gc=0;var ot=wn(Y,H,ee,be);return fl=null,ot}catch(tt){if(tt===hl||tt===dd)throw tt;var tn=br(29,tt,null,Y.mode);return tn.lanes=be,tn.return=Y,tn}}}var xo=tv(!0),nv=tv(!1),xa=!1;function em(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tm(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function _a(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ka(n,r,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(an&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=id(n),U0(n,null,o),r}return rd(n,c,r,o),id(n)}function vc(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,Gt(n,o)}}function nm(n,r){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var sm=!1;function bc(){if(sm){var n=dl;if(n!==null)throw n}}function wc(n,r,o,c){sm=!1;var f=n.updateQueue;xa=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var U=S,ne=U.next;U.next=null,x===null?m=ne:x.next=ne,x=U;var pe=n.alternate;pe!==null&&(pe=pe.updateQueue,S=pe.lastBaseUpdate,S!==x&&(S===null?pe.firstBaseUpdate=ne:S.next=ne,pe.lastBaseUpdate=U))}if(m!==null){var ke=f.baseState;x=0,pe=ne=U=null,S=m;do{var ie=S.lane&-536870913,de=ie!==S.lane;if(de?(Ot&ie)===ie:(c&ie)===ie){ie!==0&&ie===ul&&(sm=!0),pe!==null&&(pe=pe.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Qe=n,ft=S;ie=r;var wn=o;switch(ft.tag){case 1:if(Qe=ft.payload,typeof Qe=="function"){ke=Qe.call(wn,ke,ie);break e}ke=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=ft.payload,ie=typeof Qe=="function"?Qe.call(wn,ke,ie):Qe,ie==null)break e;ke=E({},ke,ie);break e;case 2:xa=!0}}ie=S.callback,ie!==null&&(n.flags|=64,de&&(n.flags|=8192),de=f.callbacks,de===null?f.callbacks=[ie]:de.push(ie))}else de={lane:ie,tag:S.tag,payload:S.payload,callback:S.callback,next:null},pe===null?(ne=pe=de,U=ke):pe=pe.next=de,x|=ie;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;de=S,S=de.next,de.next=null,f.lastBaseUpdate=de,f.shared.pending=null}}while(!0);pe===null&&(U=ke),f.baseState=U,f.firstBaseUpdate=ne,f.lastBaseUpdate=pe,m===null&&(f.shared.lanes=0),Ca|=x,n.lanes=x,n.memoizedState=ke}}function sv(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function rv(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)sv(o[n],r)}var ml=P(null),pd=P(0);function iv(n,r){n=Ki,we(pd,n),we(ml,r),Ki=n|r.baseLanes}function rm(){we(pd,Ki),we(ml,ml.current)}function im(){Ki=pd.current,re(ml),re(pd)}var wr=P(null),zr=null;function Ea(n){var r=n.alternate;we(is,is.current&1),we(wr,n),zr===null&&(r===null||ml.current!==null||r.memoizedState!==null)&&(zr=n)}function am(n){we(is,is.current),we(wr,n),zr===null&&(zr=n)}function av(n){n.tag===22?(we(is,is.current),we(wr,n),zr===null&&(zr=n)):Ta()}function Ta(){we(is,is.current),we(wr,wr.current)}function xr(n){re(wr),zr===n&&(zr=null),re(is)}var is=P(0);function gd(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||hp(o)||fp(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Bi=0,St=null,vn=null,ds=null,yd=!1,pl=!1,_o=!1,vd=0,xc=0,gl=null,mT=0;function Yn(){throw Error(i(321))}function om(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!vr(n[o],r[o]))return!1;return!0}function lm(n,r,o,c,f,m){return Bi=m,St=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=n===null||n.memoizedState===null?qv:km,_o=!1,m=o(c,f),_o=!1,pl&&(m=lv(r,o,c,f)),ov(n),m}function ov(n){X.H=Ec;var r=vn!==null&&vn.next!==null;if(Bi=0,ds=vn=St=null,yd=!1,xc=0,gl=null,r)throw Error(i(300));n===null||hs||(n=n.dependencies,n!==null&&ld(n)&&(hs=!0))}function lv(n,r,o,c){St=n;var f=0;do{if(pl&&(gl=null),xc=0,pl=!1,25<=f)throw Error(i(301));if(f+=1,ds=vn=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}X.H=Hv,m=r(o,c)}while(pl);return m}function pT(){var n=X.H,r=n.useState()[0];return r=typeof r.then=="function"?_c(r):r,n=n.useState()[0],(vn!==null?vn.memoizedState:null)!==n&&(St.flags|=1024),r}function cm(){var n=vd!==0;return vd=0,n}function um(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function dm(n){if(yd){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}yd=!1}Bi=0,ds=vn=St=null,pl=!1,xc=vd=0,gl=null}function er(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ds===null?St.memoizedState=ds=n:ds=ds.next=n,ds}function as(){if(vn===null){var n=St.alternate;n=n!==null?n.memoizedState:null}else n=vn.next;var r=ds===null?St.memoizedState:ds.next;if(r!==null)ds=r,vn=n;else{if(n===null)throw St.alternate===null?Error(i(467)):Error(i(310));vn=n,n={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},ds===null?St.memoizedState=ds=n:ds=ds.next=n}return ds}function bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _c(n){var r=xc;return xc+=1,gl===null&&(gl=[]),n=J0(gl,n,r),r=St,(ds===null?r.memoizedState:ds.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?qv:km),n}function wd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return _c(n);if(n.$$typeof===Q)return Ms(n)}throw Error(i(438,String(n)))}function hm(n){var r=null,o=St.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=St.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=bd(),St.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),c=0;c<n;c++)o[c]=V;return r.index++,o}function zi(n,r){return typeof r=="function"?r(n):r}function xd(n){var r=as();return fm(r,vn,n)}function fm(n,r,o){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var S=x=null,U=null,ne=r,pe=!1;do{var ke=ne.lane&-536870913;if(ke!==ne.lane?(Ot&ke)===ke:(Bi&ke)===ke){var ie=ne.revertLane;if(ie===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),ke===ul&&(pe=!0);else if((Bi&ie)===ie){ne=ne.next,ie===ul&&(pe=!0);continue}else ke={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},U===null?(S=U=ke,x=m):U=U.next=ke,St.lanes|=ie,Ca|=ie;ke=ne.action,_o&&o(m,ke),m=ne.hasEagerState?ne.eagerState:o(m,ke)}else ie={lane:ke,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},U===null?(S=U=ie,x=m):U=U.next=ie,St.lanes|=ke,Ca|=ke;ne=ne.next}while(ne!==null&&ne!==r);if(U===null?x=m:U.next=S,!vr(m,n.memoizedState)&&(hs=!0,pe&&(o=dl,o!==null)))throw o;n.memoizedState=m,n.baseState=x,n.baseQueue=U,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function mm(n){var r=as(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var x=f=f.next;do m=n(m,x.action),x=x.next;while(x!==f);vr(m,r.memoizedState)||(hs=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function cv(n,r,o){var c=St,f=as(),m=qt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=r();var x=!vr((vn||f).memoizedState,o);if(x&&(f.memoizedState=o,hs=!0),f=f.queue,ym(hv.bind(null,c,f,n),[n]),f.getSnapshot!==r||x||ds!==null&&ds.memoizedState.tag&1){if(c.flags|=2048,yl(9,{destroy:void 0},dv.bind(null,c,f,o,r),null),Tn===null)throw Error(i(349));m||(Bi&127)!==0||uv(c,r,o)}return o}function uv(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=St.updateQueue,r===null?(r=bd(),St.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function dv(n,r,o,c){r.value=o,r.getSnapshot=c,fv(r)&&mv(n)}function hv(n,r,o){return o(function(){fv(r)&&mv(n)})}function fv(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!vr(n,o)}catch{return!0}}function mv(n){var r=fo(n,2);r!==null&&dr(r,n,2)}function pm(n){var r=er();if(typeof n=="function"){var o=n;if(n=o(),_o){nt(!0);try{o()}finally{nt(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:n},r}function pv(n,r,o,c){return n.baseState=o,fm(n,vn,typeof c=="function"?c:zi)}function gT(n,r,o,c,f){if(Ed(n))throw Error(i(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};X.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,gv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function gv(n,r){var o=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=X.T,x={};X.T=x;try{var S=o(f,c),U=X.S;U!==null&&U(x,S),yv(n,r,S)}catch(ne){gm(n,r,ne)}finally{m!==null&&x.types!==null&&(m.types=x.types),X.T=m}}else try{m=o(f,c),yv(n,r,m)}catch(ne){gm(n,r,ne)}}function yv(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){vv(n,r,c)},function(c){return gm(n,r,c)}):vv(n,r,o)}function vv(n,r,o){r.status="fulfilled",r.value=o,bv(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,gv(n,o)))}function gm(n,r,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,bv(r),r=r.next;while(r!==c)}n.action=null}function bv(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function wv(n,r){return r}function xv(n,r){if(qt){var o=Tn.formState;if(o!==null){e:{var c=St;if(qt){if(In){t:{for(var f=In,m=Br;f.nodeType!==8;){if(!m){f=null;break t}if(f=Fr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){In=Fr(f.nextSibling),c=f.data==="F!";break e}}ba(c)}c=!1}c&&(r=o[0])}}return o=er(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wv,lastRenderedState:r},o.queue=c,o=Bv.bind(null,St,c),c.dispatch=o,c=pm(!1),m=_m.bind(null,St,!1,c.queue),c=er(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,o=gT.bind(null,St,f,m,o),f.dispatch=o,c.memoizedState=n,[r,o,!1]}function _v(n){var r=as();return kv(r,vn,n)}function kv(n,r,o){if(r=fm(n,r,wv)[0],n=xd(zi)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=_c(r)}catch(x){throw x===hl?dd:x}else c=r;r=as();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(St.flags|=2048,yl(9,{destroy:void 0},yT.bind(null,f,o),null)),[c,m,n]}function yT(n,r){n.action=r}function Ev(n){var r=as(),o=vn;if(o!==null)return kv(r,o,n);as(),r=r.memoizedState,o=as();var c=o.queue.dispatch;return o.memoizedState=n,[r,c,!1]}function yl(n,r,o,c){return n={tag:n,create:o,deps:c,inst:r,next:null},r=St.updateQueue,r===null&&(r=bd(),St.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,r.lastEffect=n),n}function Tv(){return as().memoizedState}function _d(n,r,o,c){var f=er();St.flags|=n,f.memoizedState=yl(1|r,{destroy:void 0},o,c===void 0?null:c)}function kd(n,r,o,c){var f=as();c=c===void 0?null:c;var m=f.memoizedState.inst;vn!==null&&c!==null&&om(c,vn.memoizedState.deps)?f.memoizedState=yl(r,m,o,c):(St.flags|=n,f.memoizedState=yl(1|r,m,o,c))}function jv(n,r){_d(8390656,8,n,r)}function ym(n,r){kd(2048,8,n,r)}function vT(n){St.flags|=4;var r=St.updateQueue;if(r===null)r=bd(),St.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function Sv(n){var r=as().memoizedState;return vT({ref:r,nextImpl:n}),function(){if((an&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function Cv(n,r){return kd(4,2,n,r)}function Nv(n,r){return kd(4,4,n,r)}function Av(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Rv(n,r,o){o=o!=null?o.concat([n]):null,kd(4,4,Av.bind(null,r,n),o)}function vm(){}function Iv(n,r){var o=as();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&om(r,c[1])?c[0]:(o.memoizedState=[n,r],n)}function Mv(n,r){var o=as();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&om(r,c[1]))return c[0];if(c=n(),_o){nt(!0);try{n()}finally{nt(!1)}}return o.memoizedState=[c,r],c}function bm(n,r,o){return o===void 0||(Bi&1073741824)!==0&&(Ot&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=D1(),St.lanes|=n,Ca|=n,o)}function Dv(n,r,o,c){return vr(o,r)?o:ml.current!==null?(n=bm(n,o,c),vr(n,r)||(hs=!0),n):(Bi&42)===0||(Bi&1073741824)!==0&&(Ot&261930)===0?(hs=!0,n.memoizedState=o):(n=D1(),St.lanes|=n,Ca|=n,r)}function Lv(n,r,o,c,f){var m=je.p;je.p=m!==0&&8>m?m:8;var x=X.T,S={};X.T=S,_m(n,!1,r,o);try{var U=f(),ne=X.S;if(ne!==null&&ne(S,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var pe=fT(U,c);kc(n,r,pe,Er(n))}else kc(n,r,c,Er(n))}catch(ke){kc(n,r,{then:function(){},status:"rejected",reason:ke},Er())}finally{je.p=m,x!==null&&S.types!==null&&(x.types=S.types),X.T=x}}function bT(){}function wm(n,r,o,c){if(n.tag!==5)throw Error(i(476));var f=Ov(n).queue;Lv(n,f,r,De,o===null?bT:function(){return Pv(n),o(c)})}function Ov(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:De},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Pv(n){var r=Ov(n);r.next===null&&(r=n.alternate.memoizedState),kc(n,r.next.queue,{},Er())}function xm(){return Ms(Bc)}function Vv(){return as().memoizedState}function Uv(){return as().memoizedState}function wT(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Er();n=_a(o);var c=ka(r,n,o);c!==null&&(dr(c,r,o),vc(c,r,o)),r={cache:Qf()},n.payload=r;return}r=r.return}}function xT(n,r,o){var c=Er();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ed(n)?zv(r,o):(o=Uf(n,r,o,c),o!==null&&(dr(o,n,c),Fv(o,r,c)))}function Bv(n,r,o){var c=Er();kc(n,r,o,c)}function kc(n,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ed(n))zv(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,S=m(x,o);if(f.hasEagerState=!0,f.eagerState=S,vr(S,x))return rd(n,r,f,0),Tn===null&&sd(),!1}catch{}if(o=Uf(n,r,f,c),o!==null)return dr(o,n,c),Fv(o,r,c),!0}return!1}function _m(n,r,o,c){if(c={lane:2,revertLane:ep(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ed(n)){if(r)throw Error(i(479))}else r=Uf(n,o,c,2),r!==null&&dr(r,n,2)}function Ed(n){var r=n.alternate;return n===St||r!==null&&r===St}function zv(n,r){pl=yd=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function Fv(n,r,o){if((o&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,o|=c,r.lanes=o,Gt(n,o)}}var Ec={readContext:Ms,use:wd,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useLayoutEffect:Yn,useInsertionEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useSyncExternalStore:Yn,useId:Yn,useHostTransitionStatus:Yn,useFormState:Yn,useActionState:Yn,useOptimistic:Yn,useMemoCache:Yn,useCacheRefresh:Yn};Ec.useEffectEvent=Yn;var qv={readContext:Ms,use:wd,useCallback:function(n,r){return er().memoizedState=[n,r===void 0?null:r],n},useContext:Ms,useEffect:jv,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,_d(4194308,4,Av.bind(null,r,n),o)},useLayoutEffect:function(n,r){return _d(4194308,4,n,r)},useInsertionEffect:function(n,r){_d(4,2,n,r)},useMemo:function(n,r){var o=er();r=r===void 0?null:r;var c=n();if(_o){nt(!0);try{n()}finally{nt(!1)}}return o.memoizedState=[c,r],c},useReducer:function(n,r,o){var c=er();if(o!==void 0){var f=o(r);if(_o){nt(!0);try{o(r)}finally{nt(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=xT.bind(null,St,n),[c.memoizedState,n]},useRef:function(n){var r=er();return n={current:n},r.memoizedState=n},useState:function(n){n=pm(n);var r=n.queue,o=Bv.bind(null,St,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:vm,useDeferredValue:function(n,r){var o=er();return bm(o,n,r)},useTransition:function(){var n=pm(!1);return n=Lv.bind(null,St,n.queue,!0,!1),er().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var c=St,f=er();if(qt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),Tn===null)throw Error(i(349));(Ot&127)!==0||uv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,jv(hv.bind(null,c,m,n),[n]),c.flags|=2048,yl(9,{destroy:void 0},dv.bind(null,c,m,o,r),null),o},useId:function(){var n=er(),r=Tn.identifierPrefix;if(qt){var o=bi,c=vi;o=(c&~(1<<32-He(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=vd++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=mT++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:xm,useFormState:xv,useActionState:xv,useOptimistic:function(n){var r=er();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=_m.bind(null,St,!0,o),o.dispatch=r,[n,r]},useMemoCache:hm,useCacheRefresh:function(){return er().memoizedState=wT.bind(null,St)},useEffectEvent:function(n){var r=er(),o={impl:n};return r.memoizedState=o,function(){if((an&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},km={readContext:Ms,use:wd,useCallback:Iv,useContext:Ms,useEffect:ym,useImperativeHandle:Rv,useInsertionEffect:Cv,useLayoutEffect:Nv,useMemo:Mv,useReducer:xd,useRef:Tv,useState:function(){return xd(zi)},useDebugValue:vm,useDeferredValue:function(n,r){var o=as();return Dv(o,vn.memoizedState,n,r)},useTransition:function(){var n=xd(zi)[0],r=as().memoizedState;return[typeof n=="boolean"?n:_c(n),r]},useSyncExternalStore:cv,useId:Vv,useHostTransitionStatus:xm,useFormState:_v,useActionState:_v,useOptimistic:function(n,r){var o=as();return pv(o,vn,n,r)},useMemoCache:hm,useCacheRefresh:Uv};km.useEffectEvent=Sv;var Hv={readContext:Ms,use:wd,useCallback:Iv,useContext:Ms,useEffect:ym,useImperativeHandle:Rv,useInsertionEffect:Cv,useLayoutEffect:Nv,useMemo:Mv,useReducer:mm,useRef:Tv,useState:function(){return mm(zi)},useDebugValue:vm,useDeferredValue:function(n,r){var o=as();return vn===null?bm(o,n,r):Dv(o,vn.memoizedState,n,r)},useTransition:function(){var n=mm(zi)[0],r=as().memoizedState;return[typeof n=="boolean"?n:_c(n),r]},useSyncExternalStore:cv,useId:Vv,useHostTransitionStatus:xm,useFormState:Ev,useActionState:Ev,useOptimistic:function(n,r){var o=as();return vn!==null?pv(o,vn,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:hm,useCacheRefresh:Uv};Hv.useEffectEvent=Sv;function Em(n,r,o,c){r=n.memoizedState,o=o(c,r),o=o==null?r:E({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Tm={enqueueSetState:function(n,r,o){n=n._reactInternals;var c=Er(),f=_a(c);f.payload=r,o!=null&&(f.callback=o),r=ka(n,f,c),r!==null&&(dr(r,n,c),vc(r,n,c))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var c=Er(),f=_a(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=ka(n,f,c),r!==null&&(dr(r,n,c),vc(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Er(),c=_a(o);c.tag=2,r!=null&&(c.callback=r),r=ka(n,c,o),r!==null&&(dr(r,n,o),vc(r,n,o))}};function $v(n,r,o,c,f,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,x):r.prototype&&r.prototype.isPureReactComponent?!uc(o,c)||!uc(f,m):!0}function Wv(n,r,o,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==n&&Tm.enqueueReplaceState(r,r.state,null)}function ko(n,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(n=n.defaultProps){o===r&&(o=E({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Gv(n){nd(n)}function Kv(n){console.error(n)}function Yv(n){nd(n)}function Td(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Qv(n,r,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function jm(n,r,o){return o=_a(o),o.tag=3,o.payload={element:null},o.callback=function(){Td(n,r)},o}function Xv(n){return n=_a(n),n.tag=3,n}function Jv(n,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Qv(r,o,c)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){Qv(r,o,c),typeof f!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function _T(n,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&cl(r,o,f,!0),o=wr.current,o!==null){switch(o.tag){case 31:case 13:return zr===null?Pd():o.alternate===null&&Qn===0&&(Qn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===hd?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),Xm(n,c,f)),!1;case 22:return o.flags|=65536,c===hd?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),Xm(n,c,f)),!1}throw Error(i(435,o.tag))}return Xm(n,c,f),Pd(),!1}if(qt)return r=wr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==$f&&(n=Error(i(422),{cause:c}),fc(Pr(n,o)))):(c!==$f&&(r=Error(i(423),{cause:c}),fc(Pr(r,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Pr(c,o),f=jm(n.stateNode,c,f),nm(n,f),Qn!==4&&(Qn=2)),!1;var m=Error(i(520),{cause:c});if(m=Pr(m,o),Ic===null?Ic=[m]:Ic.push(m),Qn!==4&&(Qn=2),r===null)return!0;c=Pr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=jm(o.stateNode,c,n),nm(o,n),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Na===null||!Na.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Xv(f),Jv(f,n,o,c),nm(o,f),!1}o=o.return}while(o!==null);return!1}var Sm=Error(i(461)),hs=!1;function Ds(n,r,o,c){r.child=n===null?nv(r,null,o,c):xo(r,n.child,o,c)}function Zv(n,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var x={};for(var S in c)S!=="ref"&&(x[S]=c[S])}else x=c;return yo(r),c=lm(n,r,o,x,m,f),S=cm(),n!==null&&!hs?(um(n,r,f),Fi(n,r,f)):(qt&&S&&qf(r),r.flags|=1,Ds(n,r,c,f),r.child)}function e1(n,r,o,c,f){if(n===null){var m=o.type;return typeof m=="function"&&!Bf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,t1(n,r,m,c,f)):(n=ad(o.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Lm(n,f)){var x=m.memoizedProps;if(o=o.compare,o=o!==null?o:uc,o(x,c)&&n.ref===r.ref)return Fi(n,r,f)}return r.flags|=1,n=Oi(m,c),n.ref=r.ref,n.return=r,r.child=n}function t1(n,r,o,c,f){if(n!==null){var m=n.memoizedProps;if(uc(m,c)&&n.ref===r.ref)if(hs=!1,r.pendingProps=c=m,Lm(n,f))(n.flags&131072)!==0&&(hs=!0);else return r.lanes=n.lanes,Fi(n,r,f)}return Cm(n,r,o,c,f)}function n1(n,r,o,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(c=r.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return s1(n,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&ud(r,m!==null?m.cachePool:null),m!==null?iv(r,m):rm(),av(r);else return c=r.lanes=536870912,s1(n,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(ud(r,m.cachePool),iv(r,m),Ta(),r.memoizedState=null):(n!==null&&ud(r,null),rm(),Ta());return Ds(n,r,f,o),r.child}function Tc(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function s1(n,r,o,c,f){var m=Jf();return m=m===null?null:{parent:us._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},n!==null&&ud(r,null),rm(),av(r),n!==null&&cl(n,r,c,!0),r.childLanes=f,null}function jd(n,r){return r=Cd({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function r1(n,r,o){return xo(r,n.child,null,o),n=jd(r,r.pendingProps),n.flags|=2,xr(r),r.memoizedState=null,n}function kT(n,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(qt){if(c.mode==="hidden")return n=jd(r,c),r.lanes=536870912,Tc(null,n);if(am(r),(n=In)?(n=gb(n,Br),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ya!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=z0(n),o.return=r,r.child=o,Is=r,In=null)):n=null,n===null)throw ba(r);return r.lanes=536870912,null}return jd(r,c)}var m=n.memoizedState;if(m!==null){var x=m.dehydrated;if(am(r),f)if(r.flags&256)r.flags&=-257,r=r1(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(hs||cl(n,r,o,!1),f=(o&n.childLanes)!==0,hs||f){if(c=Tn,c!==null&&(x=jn(c,o),x!==0&&x!==m.retryLane))throw m.retryLane=x,fo(n,x),dr(c,n,x),Sm;Pd(),r=r1(n,r,o)}else n=m.treeContext,In=Fr(x.nextSibling),Is=r,qt=!0,va=null,Br=!1,n!==null&&H0(r,n),r=jd(r,c),r.flags|=4096;return r}return n=Oi(n.child,{mode:c.mode,children:c.children}),n.ref=r.ref,r.child=n,n.return=r,n}function Sd(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Cm(n,r,o,c,f){return yo(r),o=lm(n,r,o,c,void 0,f),c=cm(),n!==null&&!hs?(um(n,r,f),Fi(n,r,f)):(qt&&c&&qf(r),r.flags|=1,Ds(n,r,o,f),r.child)}function i1(n,r,o,c,f,m){return yo(r),r.updateQueue=null,o=lv(r,c,o,f),ov(n),c=cm(),n!==null&&!hs?(um(n,r,m),Fi(n,r,m)):(qt&&c&&qf(r),r.flags|=1,Ds(n,r,o,m),r.child)}function a1(n,r,o,c,f){if(yo(r),r.stateNode===null){var m=il,x=o.contextType;typeof x=="object"&&x!==null&&(m=Ms(x)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Tm,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},em(r),x=o.contextType,m.context=typeof x=="object"&&x!==null?Ms(x):il,m.state=r.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(Em(r,o,x,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&Tm.enqueueReplaceState(m,m.state,null),wc(r,c,m,f),bc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var S=r.memoizedProps,U=ko(o,S);m.props=U;var ne=m.context,pe=o.contextType;x=il,typeof pe=="object"&&pe!==null&&(x=Ms(pe));var ke=o.getDerivedStateFromProps;pe=typeof ke=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,pe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||ne!==x)&&Wv(r,m,c,x),xa=!1;var ie=r.memoizedState;m.state=ie,wc(r,c,m,f),bc(),ne=r.memoizedState,S||ie!==ne||xa?(typeof ke=="function"&&(Em(r,o,ke,c),ne=r.memoizedState),(U=xa||$v(r,o,U,c,ie,ne,x))?(pe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ne),m.props=c,m.state=ne,m.context=x,c=U):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,tm(n,r),x=r.memoizedProps,pe=ko(o,x),m.props=pe,ke=r.pendingProps,ie=m.context,ne=o.contextType,U=il,typeof ne=="object"&&ne!==null&&(U=Ms(ne)),S=o.getDerivedStateFromProps,(ne=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==ke||ie!==U)&&Wv(r,m,c,U),xa=!1,ie=r.memoizedState,m.state=ie,wc(r,c,m,f),bc();var de=r.memoizedState;x!==ke||ie!==de||xa||n!==null&&n.dependencies!==null&&ld(n.dependencies)?(typeof S=="function"&&(Em(r,o,S,c),de=r.memoizedState),(pe=xa||$v(r,o,pe,c,ie,de,U)||n!==null&&n.dependencies!==null&&ld(n.dependencies))?(ne||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,de,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,de,U)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&ie===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&ie===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=de),m.props=c,m.state=de,m.context=U,c=pe):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&ie===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&ie===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,Sd(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=xo(r,n.child,null,f),r.child=xo(r,null,o,f)):Ds(n,r,o,f),r.memoizedState=m.state,n=r.child):n=Fi(n,r,f),n}function o1(n,r,o,c){return po(),r.flags|=256,Ds(n,r,o,c),r.child}var Nm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Am(n){return{baseLanes:n,cachePool:Q0()}}function Rm(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=kr),n}function l1(n,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,x;if((x=m)||(x=n!==null&&n.memoizedState===null?!1:(is.current&2)!==0),x&&(f=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,n===null){if(qt){if(f?Ea(r):Ta(),(n=In)?(n=gb(n,Br),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:ya!==null?{id:vi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},o=z0(n),o.return=r,r.child=o,Is=r,In=null)):n=null,n===null)throw ba(r);return fp(n)?r.lanes=32:r.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(Ta(),f=r.mode,S=Cd({mode:"hidden",children:S},f),c=mo(c,f,o,null),S.return=r,c.return=r,S.sibling=c,r.child=S,c=r.child,c.memoizedState=Am(o),c.childLanes=Rm(n,x,o),r.memoizedState=Nm,Tc(null,c)):(Ea(r),Im(r,S))}var U=n.memoizedState;if(U!==null&&(S=U.dehydrated,S!==null)){if(m)r.flags&256?(Ea(r),r.flags&=-257,r=Mm(n,r,o)):r.memoizedState!==null?(Ta(),r.child=n.child,r.flags|=128,r=null):(Ta(),S=c.fallback,f=r.mode,c=Cd({mode:"visible",children:c.children},f),S=mo(S,f,o,null),S.flags|=2,c.return=r,S.return=r,c.sibling=S,r.child=c,xo(r,n.child,null,o),c=r.child,c.memoizedState=Am(o),c.childLanes=Rm(n,x,o),r.memoizedState=Nm,r=Tc(null,c));else if(Ea(r),fp(S)){if(x=S.nextSibling&&S.nextSibling.dataset,x)var ne=x.dgst;x=ne,c=Error(i(419)),c.stack="",c.digest=x,fc({value:c,source:null,stack:null}),r=Mm(n,r,o)}else if(hs||cl(n,r,o,!1),x=(o&n.childLanes)!==0,hs||x){if(x=Tn,x!==null&&(c=jn(x,o),c!==0&&c!==U.retryLane))throw U.retryLane=c,fo(n,c),dr(x,n,c),Sm;hp(S)||Pd(),r=Mm(n,r,o)}else hp(S)?(r.flags|=192,r.child=n.child,r=null):(n=U.treeContext,In=Fr(S.nextSibling),Is=r,qt=!0,va=null,Br=!1,n!==null&&H0(r,n),r=Im(r,c.children),r.flags|=4096);return r}return f?(Ta(),S=c.fallback,f=r.mode,U=n.child,ne=U.sibling,c=Oi(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,ne!==null?S=Oi(ne,S):(S=mo(S,f,o,null),S.flags|=2),S.return=r,c.return=r,c.sibling=S,r.child=c,Tc(null,c),c=r.child,S=n.child.memoizedState,S===null?S=Am(o):(f=S.cachePool,f!==null?(U=us._currentValue,f=f.parent!==U?{parent:U,pool:U}:f):f=Q0(),S={baseLanes:S.baseLanes|o,cachePool:f}),c.memoizedState=S,c.childLanes=Rm(n,x,o),r.memoizedState=Nm,Tc(n.child,c)):(Ea(r),o=n.child,n=o.sibling,o=Oi(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,n!==null&&(x=r.deletions,x===null?(r.deletions=[n],r.flags|=16):x.push(n)),r.child=o,r.memoizedState=null,o)}function Im(n,r){return r=Cd({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Cd(n,r){return n=br(22,n,null,r),n.lanes=0,n}function Mm(n,r,o){return xo(r,n.child,null,o),n=Im(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function c1(n,r,o){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Kf(n.return,r,o)}function Dm(n,r,o,c,f,m){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=o,x.tailMode=f,x.treeForkCount=m)}function u1(n,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var x=is.current,S=(x&2)!==0;if(S?(x=x&1|2,r.flags|=128):x&=1,we(is,x),Ds(n,r,c,o),c=qt?hc:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&c1(n,o,r);else if(n.tag===19)c1(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)n=o.alternate,n!==null&&gd(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),Dm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&gd(n)===null){r.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Dm(r,!0,o,null,m,c);break;case"together":Dm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function Fi(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),Ca|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(cl(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Oi(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Oi(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function Lm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&ld(n)))}function ET(n,r,o){switch(r.tag){case 3:Ze(r,r.stateNode.containerInfo),wa(r,us,n.memoizedState.cache),po();break;case 27:case 5:Mt(r);break;case 4:Ze(r,r.stateNode.containerInfo);break;case 10:wa(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,am(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ea(r),r.flags|=128,null):(o&r.child.childLanes)!==0?l1(n,r,o):(Ea(r),n=Fi(n,r,o),n!==null?n.sibling:null);Ea(r);break;case 19:var f=(n.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(cl(n,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return u1(n,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),we(is,is.current),c)break;return null;case 22:return r.lanes=0,n1(n,r,o,r.pendingProps);case 24:wa(r,us,n.memoizedState.cache)}return Fi(n,r,o)}function d1(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)hs=!0;else{if(!Lm(n,o)&&(r.flags&128)===0)return hs=!1,ET(n,r,o);hs=(n.flags&131072)!==0}else hs=!1,qt&&(r.flags&1048576)!==0&&q0(r,hc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(n=bo(r.elementType),r.type=n,typeof n=="function")Bf(n)?(c=ko(n,c),r.tag=1,r=a1(null,r,n,c,o)):(r.tag=0,r=Cm(null,r,n,c,o));else{if(n!=null){var f=n.$$typeof;if(f===he){r.tag=11,r=Zv(null,r,n,c,o);break e}else if(f===C){r.tag=14,r=e1(null,r,n,c,o);break e}}throw r=Le(n)||n,Error(i(306,r,""))}}return r;case 0:return Cm(n,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=ko(c,r.pendingProps),a1(n,r,c,f,o);case 3:e:{if(Ze(r,r.stateNode.containerInfo),n===null)throw Error(i(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,tm(n,r),wc(r,c,null,o);var x=r.memoizedState;if(c=x.cache,wa(r,us,c),c!==m.cache&&Yf(r,[us],o,!0),bc(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=o1(n,r,c,o);break e}else if(c!==f){f=Pr(Error(i(424)),r),fc(f),r=o1(n,r,c,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,In=Fr(n.firstChild),Is=r,qt=!0,va=null,Br=!0,o=nv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(po(),c===f){r=Fi(n,r,o);break e}Ds(n,r,c,o)}r=r.child}return r;case 26:return Sd(n,r),n===null?(o=_b(r.type,null,r.pendingProps,null))?r.memoizedState=o:qt||(o=r.type,n=r.pendingProps,c=Hd(Se.current).createElement(o),c[Zt]=r,c[ln]=n,Ls(c,o,n),zt(c),r.stateNode=c):r.memoizedState=_b(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Mt(r),n===null&&qt&&(c=r.stateNode=bb(r.type,r.pendingProps,Se.current),Is=r,Br=!0,f=In,Ma(r.type)?(mp=f,In=Fr(c.firstChild)):In=f),Ds(n,r,r.pendingProps.children,o),Sd(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&qt&&((f=c=In)&&(c=ej(c,r.type,r.pendingProps,Br),c!==null?(r.stateNode=c,Is=r,In=Fr(c.firstChild),Br=!1,f=!0):f=!1),f||ba(r)),Mt(r),f=r.type,m=r.pendingProps,x=n!==null?n.memoizedProps:null,c=m.children,cp(f,m)?c=null:x!==null&&cp(f,x)&&(r.flags|=32),r.memoizedState!==null&&(f=lm(n,r,pT,null,null,o),Bc._currentValue=f),Sd(n,r),Ds(n,r,c,o),r.child;case 6:return n===null&&qt&&((n=o=In)&&(o=tj(o,r.pendingProps,Br),o!==null?(r.stateNode=o,Is=r,In=null,n=!0):n=!1),n||ba(r)),null;case 13:return l1(n,r,o);case 4:return Ze(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=xo(r,null,c,o):Ds(n,r,c,o),r.child;case 11:return Zv(n,r,r.type,r.pendingProps,o);case 7:return Ds(n,r,r.pendingProps,o),r.child;case 8:return Ds(n,r,r.pendingProps.children,o),r.child;case 12:return Ds(n,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,wa(r,r.type,c.value),Ds(n,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,yo(r),f=Ms(f),c=c(f),r.flags|=1,Ds(n,r,c,o),r.child;case 14:return e1(n,r,r.type,r.pendingProps,o);case 15:return t1(n,r,r.type,r.pendingProps,o);case 19:return u1(n,r,o);case 31:return kT(n,r,o);case 22:return n1(n,r,o,r.pendingProps);case 24:return yo(r),c=Ms(us),n===null?(f=Jf(),f===null&&(f=Tn,m=Qf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},em(r),wa(r,us,f)):((n.lanes&o)!==0&&(tm(n,r),wc(r,null,null,o),bc()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),wa(r,us,c)):(c=m.cache,wa(r,us,c),c!==f.cache&&Yf(r,[us],o,!0))),Ds(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function qi(n){n.flags|=4}function Om(n,r,o,c,f){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(V1())n.flags|=8192;else throw wo=hd,Zf}else n.flags&=-16777217}function h1(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Sb(r))if(V1())n.flags|=8192;else throw wo=hd,Zf}function Nd(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?ae():536870912,n.lanes|=r,xl|=r)}function jc(n,r){if(!qt)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Mn(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(r)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=o,r}function TT(n,r,o){var c=r.pendingProps;switch(Hf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(r),null;case 1:return Mn(r),null;case 3:return o=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Ui(us),Oe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ll(r)?qi(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wf())),Mn(r),null;case 26:var f=r.type,m=r.memoizedState;return n===null?(qi(r),m!==null?(Mn(r),h1(r,m)):(Mn(r),Om(r,f,null,c,o))):m?m!==n.memoizedState?(qi(r),Mn(r),h1(r,m)):(Mn(r),r.flags&=-16777217):(n=n.memoizedProps,n!==c&&qi(r),Mn(r),Om(r,f,n,c,o)),null;case 27:if(on(r),o=Se.current,f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&qi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Mn(r),null}n=_e.current,ll(r)?$0(r):(n=bb(f,c,o),r.stateNode=n,qi(r))}return Mn(r),null;case 5:if(on(r),f=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&qi(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return Mn(r),null}if(m=_e.current,ll(r))$0(r);else{var x=Hd(Se.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}m[Zt]=r,m[ln]=c;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=m;e:switch(Ls(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&qi(r)}}return Mn(r),Om(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&qi(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(n=Se.current,ll(r)){if(n=r.stateNode,o=r.memoizedProps,c=null,f=Is,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Zt]=r,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||lb(n.nodeValue,o)),n||ba(r,!0)}else n=Hd(n).createTextNode(c),n[Zt]=r,r.stateNode=n}return Mn(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(c=ll(r),o!==null){if(n===null){if(!c)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Zt]=r}else po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mn(r),n=!1}else o=Wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(xr(r),r):(xr(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Mn(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ll(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Zt]=r}else po(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Mn(r),f=!1}else f=Wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(xr(r),r):(xr(r),null)}return xr(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),Nd(r,r.updateQueue),Mn(r),null);case 4:return Oe(),n===null&&rp(r.stateNode.containerInfo),Mn(r),null;case 10:return Ui(r.type),Mn(r),null;case 19:if(re(is),c=r.memoizedState,c===null)return Mn(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)jc(c,!1);else{if(Qn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=gd(n),m!==null){for(r.flags|=128,jc(c,!1),n=m.updateQueue,r.updateQueue=n,Nd(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)B0(o,n),o=o.sibling;return we(is,is.current&1|2),qt&&Pi(r,c.treeForkCount),r.child}n=n.sibling}c.tail!==null&&pt()>Dd&&(r.flags|=128,f=!0,jc(c,!1),r.lanes=4194304)}else{if(!f)if(n=gd(m),n!==null){if(r.flags|=128,f=!0,n=n.updateQueue,r.updateQueue=n,Nd(r,n),jc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!qt)return Mn(r),null}else 2*pt()-c.renderingStartTime>Dd&&o!==536870912&&(r.flags|=128,f=!0,jc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(n=c.last,n!==null?n.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=pt(),n.sibling=null,o=is.current,we(is,f?o&1|2:o&1),qt&&Pi(r,c.treeForkCount),n):(Mn(r),null);case 22:case 23:return xr(r),im(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Mn(r),r.subtreeFlags&6&&(r.flags|=8192)):Mn(r),o=r.updateQueue,o!==null&&Nd(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),n!==null&&re(vo),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Ui(us),Mn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function jT(n,r){switch(Hf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Ui(us),Oe(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return on(r),null;case 31:if(r.memoizedState!==null){if(xr(r),r.alternate===null)throw Error(i(340));po()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(xr(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));po()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return re(is),null;case 4:return Oe(),null;case 10:return Ui(r.type),null;case 22:case 23:return xr(r),im(),n!==null&&re(vo),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Ui(us),null;case 25:return null;default:return null}}function f1(n,r){switch(Hf(r),r.tag){case 3:Ui(us),Oe();break;case 26:case 27:case 5:on(r);break;case 4:Oe();break;case 31:r.memoizedState!==null&&xr(r);break;case 13:xr(r);break;case 19:re(is);break;case 10:Ui(r.type);break;case 22:case 23:xr(r),im(),n!==null&&re(vo);break;case 24:Ui(us)}}function Sc(n,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&n)===n){c=void 0;var m=o.create,x=o.inst;c=m(),x.destroy=c}o=o.next}while(o!==f)}}catch(S){mn(r,r.return,S)}}function ja(n,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var x=c.inst,S=x.destroy;if(S!==void 0){x.destroy=void 0,f=r;var U=o,ne=S;try{ne()}catch(pe){mn(f,U,pe)}}}c=c.next}while(c!==m)}}catch(pe){mn(r,r.return,pe)}}function m1(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{rv(r,o)}catch(c){mn(n,n.return,c)}}}function p1(n,r,o){o.props=ko(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){mn(n,r,c)}}function Cc(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(f){mn(n,r,f)}}function wi(n,r){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){mn(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){mn(n,r,f)}else o.current=null}function g1(n){var r=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){mn(n,n.return,f)}}function Pm(n,r,o){try{var c=n.stateNode;KT(c,n.type,o,r),c[ln]=r}catch(f){mn(n,n.return,f)}}function y1(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ma(n.type)||n.tag===4}function Vm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||y1(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ma(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Um(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=ss));else if(c!==4&&(c===27&&Ma(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Um(n,r,o),n=n.sibling;n!==null;)Um(n,r,o),n=n.sibling}function Ad(n,r,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(c!==4&&(c===27&&Ma(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Ad(n,r,o),n=n.sibling;n!==null;)Ad(n,r,o),n=n.sibling}function v1(n){var r=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Ls(r,c,o),r[Zt]=n,r[ln]=o}catch(m){mn(n,n.return,m)}}var Hi=!1,fs=!1,Bm=!1,b1=typeof WeakSet=="function"?WeakSet:Set,js=null;function ST(n,r){if(n=n.containerInfo,op=Xd,n=R0(n),Mf(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var x=0,S=-1,U=-1,ne=0,pe=0,ke=n,ie=null;t:for(;;){for(var de;ke!==o||f!==0&&ke.nodeType!==3||(S=x+f),ke!==m||c!==0&&ke.nodeType!==3||(U=x+c),ke.nodeType===3&&(x+=ke.nodeValue.length),(de=ke.firstChild)!==null;)ie=ke,ke=de;for(;;){if(ke===n)break t;if(ie===o&&++ne===f&&(S=x),ie===m&&++pe===c&&(U=x),(de=ke.nextSibling)!==null)break;ke=ie,ie=ke.parentNode}ke=de}o=S===-1||U===-1?null:{start:S,end:U}}else o=null}o=o||{start:0,end:0}}else o=null;for(lp={focusedElem:n,selectionRange:o},Xd=!1,js=r;js!==null;)if(r=js,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,js=n;else for(;js!==null;){switch(r=js,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var Qe=ko(o.type,f);n=c.getSnapshotBeforeUpdate(Qe,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(ft){mn(o,o.return,ft)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)dp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":dp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,js=n;break}js=r.return}}function w1(n,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Wi(n,o),c&4&&Sc(5,o);break;case 1:if(Wi(n,o),c&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(x){mn(o,o.return,x)}else{var f=ko(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(x){mn(o,o.return,x)}}c&64&&m1(o),c&512&&Cc(o,o.return);break;case 3:if(Wi(n,o),c&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{rv(n,r)}catch(x){mn(o,o.return,x)}}break;case 27:r===null&&c&4&&v1(o);case 26:case 5:Wi(n,o),r===null&&c&4&&g1(o),c&512&&Cc(o,o.return);break;case 12:Wi(n,o);break;case 31:Wi(n,o),c&4&&k1(n,o);break;case 13:Wi(n,o),c&4&&E1(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=OT.bind(null,o),nj(n,o))));break;case 22:if(c=o.memoizedState!==null||Hi,!c){r=r!==null&&r.memoizedState!==null||fs,f=Hi;var m=fs;Hi=c,(fs=r)&&!m?Gi(n,o,(o.subtreeFlags&8772)!==0):Wi(n,o),Hi=f,fs=m}break;case 30:break;default:Wi(n,o)}}function x1(n){var r=n.alternate;r!==null&&(n.alternate=null,x1(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Fs(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Un=null,or=!1;function $i(n,r,o){for(o=o.child;o!==null;)_1(n,r,o),o=o.sibling}function _1(n,r,o){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(ut,o)}catch{}switch(o.tag){case 26:fs||wi(o,r),$i(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:fs||wi(o,r);var c=Un,f=or;Ma(o.type)&&(Un=o.stateNode,or=!1),$i(n,r,o),Pc(o.stateNode),Un=c,or=f;break;case 5:fs||wi(o,r);case 6:if(c=Un,f=or,Un=null,$i(n,r,o),Un=c,or=f,Un!==null)if(or)try{(Un.nodeType===9?Un.body:Un.nodeName==="HTML"?Un.ownerDocument.body:Un).removeChild(o.stateNode)}catch(m){mn(o,r,m)}else try{Un.removeChild(o.stateNode)}catch(m){mn(o,r,m)}break;case 18:Un!==null&&(or?(n=Un,mb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Nl(n)):mb(Un,o.stateNode));break;case 4:c=Un,f=or,Un=o.stateNode.containerInfo,or=!0,$i(n,r,o),Un=c,or=f;break;case 0:case 11:case 14:case 15:ja(2,o,r),fs||ja(4,o,r),$i(n,r,o);break;case 1:fs||(wi(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&p1(o,r,c)),$i(n,r,o);break;case 21:$i(n,r,o);break;case 22:fs=(c=fs)||o.memoizedState!==null,$i(n,r,o),fs=c;break;default:$i(n,r,o)}}function k1(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Nl(n)}catch(o){mn(r,r.return,o)}}}function E1(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Nl(n)}catch(o){mn(r,r.return,o)}}function CT(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new b1),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new b1),r;default:throw Error(i(435,n.tag))}}function Rd(n,r){var o=CT(n);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=PT.bind(null,n,c);c.then(f,f)}})}function lr(n,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=n,x=r,S=x;e:for(;S!==null;){switch(S.tag){case 27:if(Ma(S.type)){Un=S.stateNode,or=!1;break e}break;case 5:Un=S.stateNode,or=!1;break e;case 3:case 4:Un=S.stateNode.containerInfo,or=!0;break e}S=S.return}if(Un===null)throw Error(i(160));_1(m,x,f),Un=null,or=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)T1(r,n),r=r.sibling}var si=null;function T1(n,r){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:lr(r,n),cr(n),c&4&&(ja(3,n,n.return),Sc(3,n),ja(5,n,n.return));break;case 1:lr(r,n),cr(n),c&512&&(fs||o===null||wi(o,o.return)),c&64&&Hi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=si;if(lr(r,n),cr(n),c&512&&(fs||o===null||wi(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Hn]||m[Zt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Ls(m,c,o),m[Zt]=n,zt(m),c=m;break e;case"link":var x=Tb("link","href",f).get(c+(o.href||""));if(x){for(var S=0;S<x.length;S++)if(m=x[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(S,1);break t}}m=f.createElement(c),Ls(m,c,o),f.head.appendChild(m);break;case"meta":if(x=Tb("meta","content",f).get(c+(o.content||""))){for(S=0;S<x.length;S++)if(m=x[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(S,1);break t}}m=f.createElement(c),Ls(m,c,o),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[Zt]=n,zt(m),c=m}n.stateNode=c}else jb(f,n.type,n.stateNode);else n.stateNode=Eb(f,c,n.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?jb(f,n.type,n.stateNode):Eb(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Pm(n,n.memoizedProps,o.memoizedProps)}break;case 27:lr(r,n),cr(n),c&512&&(fs||o===null||wi(o,o.return)),o!==null&&c&4&&Pm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(lr(r,n),cr(n),c&512&&(fs||o===null||wi(o,o.return)),n.flags&32){f=n.stateNode;try{Ts(f,"")}catch(Qe){mn(n,n.return,Qe)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Pm(n,f,o!==null?o.memoizedProps:f)),c&1024&&(Bm=!0);break;case 6:if(lr(r,n),cr(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Qe){mn(n,n.return,Qe)}}break;case 3:if(Gd=null,f=si,si=$d(r.containerInfo),lr(r,n),si=f,cr(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Nl(r.containerInfo)}catch(Qe){mn(n,n.return,Qe)}Bm&&(Bm=!1,j1(n));break;case 4:c=si,si=$d(n.stateNode.containerInfo),lr(r,n),cr(n),si=c;break;case 12:lr(r,n),cr(n);break;case 31:lr(r,n),cr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Rd(n,c)));break;case 13:lr(r,n),cr(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Md=pt()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Rd(n,c)));break;case 22:f=n.memoizedState!==null;var U=o!==null&&o.memoizedState!==null,ne=Hi,pe=fs;if(Hi=ne||f,fs=pe||U,lr(r,n),fs=pe,Hi=ne,cr(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||U||Hi||fs||Eo(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){U=o=r;try{if(m=U.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{S=U.stateNode;var ke=U.memoizedProps.style,ie=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;S.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Qe){mn(U,U.return,Qe)}}}else if(r.tag===6){if(o===null){U=r;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(Qe){mn(U,U.return,Qe)}}}else if(r.tag===18){if(o===null){U=r;try{var de=U.stateNode;f?pb(de,!0):pb(U.stateNode,!1)}catch(Qe){mn(U,U.return,Qe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Rd(n,o))));break;case 19:lr(r,n),cr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Rd(n,c)));break;case 30:break;case 21:break;default:lr(r,n),cr(n)}}function cr(n){var r=n.flags;if(r&2){try{for(var o,c=n.return;c!==null;){if(y1(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Vm(n);Ad(n,m,f);break;case 5:var x=o.stateNode;o.flags&32&&(Ts(x,""),o.flags&=-33);var S=Vm(n);Ad(n,S,x);break;case 3:case 4:var U=o.stateNode.containerInfo,ne=Vm(n);Um(n,ne,U);break;default:throw Error(i(161))}}catch(pe){mn(n,n.return,pe)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function j1(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;j1(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Wi(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)w1(n,r.alternate,r),r=r.sibling}function Eo(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:ja(4,r,r.return),Eo(r);break;case 1:wi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&p1(r,r.return,o),Eo(r);break;case 27:Pc(r.stateNode);case 26:case 5:wi(r,r.return),Eo(r);break;case 22:r.memoizedState===null&&Eo(r);break;case 30:Eo(r);break;default:Eo(r)}n=n.sibling}}function Gi(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,x=m.flags;switch(m.tag){case 0:case 11:case 15:Gi(f,m,o),Sc(4,m);break;case 1:if(Gi(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ne){mn(c,c.return,ne)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)sv(U[f],S)}catch(ne){mn(c,c.return,ne)}}o&&x&64&&m1(m),Cc(m,m.return);break;case 27:v1(m);case 26:case 5:Gi(f,m,o),o&&c===null&&x&4&&g1(m),Cc(m,m.return);break;case 12:Gi(f,m,o);break;case 31:Gi(f,m,o),o&&x&4&&k1(f,m);break;case 13:Gi(f,m,o),o&&x&4&&E1(f,m);break;case 22:m.memoizedState===null&&Gi(f,m,o),Cc(m,m.return);break;case 30:break;default:Gi(f,m,o)}r=r.sibling}}function zm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&mc(o))}function Fm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&mc(n))}function ri(n,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)S1(n,r,o,c),r=r.sibling}function S1(n,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:ri(n,r,o,c),f&2048&&Sc(9,r);break;case 1:ri(n,r,o,c);break;case 3:ri(n,r,o,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&mc(n)));break;case 12:if(f&2048){ri(n,r,o,c),n=r.stateNode;try{var m=r.memoizedProps,x=m.id,S=m.onPostCommit;typeof S=="function"&&S(x,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(U){mn(r,r.return,U)}}else ri(n,r,o,c);break;case 31:ri(n,r,o,c);break;case 13:ri(n,r,o,c);break;case 23:break;case 22:m=r.stateNode,x=r.alternate,r.memoizedState!==null?m._visibility&2?ri(n,r,o,c):Nc(n,r):m._visibility&2?ri(n,r,o,c):(m._visibility|=2,vl(n,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&zm(x,r);break;case 24:ri(n,r,o,c),f&2048&&Fm(r.alternate,r);break;default:ri(n,r,o,c)}}function vl(n,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,x=r,S=o,U=c,ne=x.flags;switch(x.tag){case 0:case 11:case 15:vl(m,x,S,U,f),Sc(8,x);break;case 23:break;case 22:var pe=x.stateNode;x.memoizedState!==null?pe._visibility&2?vl(m,x,S,U,f):Nc(m,x):(pe._visibility|=2,vl(m,x,S,U,f)),f&&ne&2048&&zm(x.alternate,x);break;case 24:vl(m,x,S,U,f),f&&ne&2048&&Fm(x.alternate,x);break;default:vl(m,x,S,U,f)}r=r.sibling}}function Nc(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,c=r,f=c.flags;switch(c.tag){case 22:Nc(o,c),f&2048&&zm(c.alternate,c);break;case 24:Nc(o,c),f&2048&&Fm(c.alternate,c);break;default:Nc(o,c)}r=r.sibling}}var Ac=8192;function bl(n,r,o){if(n.subtreeFlags&Ac)for(n=n.child;n!==null;)C1(n,r,o),n=n.sibling}function C1(n,r,o){switch(n.tag){case 26:bl(n,r,o),n.flags&Ac&&n.memoizedState!==null&&mj(o,si,n.memoizedState,n.memoizedProps);break;case 5:bl(n,r,o);break;case 3:case 4:var c=si;si=$d(n.stateNode.containerInfo),bl(n,r,o),si=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Ac,Ac=16777216,bl(n,r,o),Ac=c):bl(n,r,o));break;default:bl(n,r,o)}}function N1(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Rc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];js=c,R1(c,n)}N1(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)A1(n),n=n.sibling}function A1(n){switch(n.tag){case 0:case 11:case 15:Rc(n),n.flags&2048&&ja(9,n,n.return);break;case 3:Rc(n);break;case 12:Rc(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Id(n)):Rc(n);break;default:Rc(n)}}function Id(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];js=c,R1(c,n)}N1(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:ja(8,r,r.return),Id(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Id(r));break;default:Id(r)}n=n.sibling}}function R1(n,r){for(;js!==null;){var o=js;switch(o.tag){case 0:case 11:case 15:ja(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:mc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,js=c;else e:for(o=n;js!==null;){c=js;var f=c.sibling,m=c.return;if(x1(c),c===o){js=null;break e}if(f!==null){f.return=m,js=f;break e}js=m}}}var NT={getCacheForType:function(n){var r=Ms(us),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return Ms(us).controller.signal}},AT=typeof WeakMap=="function"?WeakMap:Map,an=0,Tn=null,Dt=null,Ot=0,fn=0,_r=null,Sa=!1,wl=!1,qm=!1,Ki=0,Qn=0,Ca=0,To=0,Hm=0,kr=0,xl=0,Ic=null,ur=null,$m=!1,Md=0,I1=0,Dd=1/0,Ld=null,Na=null,xs=0,Aa=null,_l=null,Yi=0,Wm=0,Gm=null,M1=null,Mc=0,Km=null;function Er(){return(an&2)!==0&&Ot!==0?Ot&-Ot:X.T!==null?ep():Ns()}function D1(){if(kr===0)if((Ot&536870912)===0||qt){var n=Kn;Kn<<=1,(Kn&3932160)===0&&(Kn=262144),kr=n}else kr=536870912;return n=wr.current,n!==null&&(n.flags|=32),kr}function dr(n,r,o){(n===Tn&&(fn===2||fn===9)||n.cancelPendingCommit!==null)&&(kl(n,0),Ra(n,Ot,kr,!1)),Ke(n,o),((an&2)===0||n!==Tn)&&(n===Tn&&((an&2)===0&&(To|=o),Qn===4&&Ra(n,Ot,kr,!1)),xi(n))}function L1(n,r,o){if((an&6)!==0)throw Error(i(327));var c=!o&&(r&127)===0&&(r&n.expiredLanes)===0||pn(n,r),f=c?MT(n,r):Qm(n,r,!0),m=c;do{if(f===0){wl&&!c&&Ra(n,r,0,!1);break}else{if(o=n.current.alternate,m&&!RT(o)){f=Qm(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var S=n;f=Ic;var U=S.current.memoizedState.isDehydrated;if(U&&(kl(S,x).flags|=256),x=Qm(S,x,!1),x!==2){if(qm&&!U){S.errorRecoveryDisabledLanes|=m,To|=m,f=4;break e}m=ur,ur=f,m!==null&&(ur===null?ur=m:ur.push.apply(ur,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){kl(n,0),Ra(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ra(c,r,kr,!Sa);break e;case 2:ur=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(f=Md+300-pt(),10<f)){if(Ra(c,r,kr,!Sa),An(c,0,!0)!==0)break e;Yi=r,c.timeoutHandle=hb(O1.bind(null,c,o,ur,Ld,$m,r,kr,To,xl,Sa,m,"Throttled",-0,0),f);break e}O1(c,o,ur,Ld,$m,r,kr,To,xl,Sa,m,null,-0,0)}}break}while(!0);xi(n)}function O1(n,r,o,c,f,m,x,S,U,ne,pe,ke,ie,de){if(n.timeoutHandle=-1,ke=r.subtreeFlags,ke&8192||(ke&16785408)===16785408){ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ss},C1(r,m,ke);var Qe=(m&62914560)===m?Md-pt():(m&4194048)===m?I1-pt():0;if(Qe=pj(ke,Qe),Qe!==null){Yi=m,n.cancelPendingCommit=Qe(H1.bind(null,n,r,m,o,c,f,x,S,U,pe,ke,null,ie,de)),Ra(n,m,x,!ne);return}}H1(n,r,m,o,c,f,x,S,U)}function RT(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!vr(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ra(n,r,o,c){r&=~Hm,r&=~To,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-He(f),x=1<<m;c[m]=-1,f&=~x}o!==0&&it(n,o,r)}function Od(){return(an&6)===0?(Dc(0),!1):!0}function Ym(){if(Dt!==null){if(fn===0)var n=Dt.return;else n=Dt,Vi=go=null,dm(n),fl=null,gc=0,n=Dt;for(;n!==null;)f1(n.alternate,n),n=n.return;Dt=null}}function kl(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,XT(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Yi=0,Ym(),Tn=n,Dt=o=Oi(n.current,null),Ot=r,fn=0,_r=null,Sa=!1,wl=pn(n,r),qm=!1,xl=kr=Hm=To=Ca=Qn=0,ur=Ic=null,$m=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-He(c),m=1<<f;r|=n[f],c&=~m}return Ki=r,sd(),o}function P1(n,r){St=null,X.H=Ec,r===hl||r===dd?(r=Z0(),fn=3):r===Zf?(r=Z0(),fn=4):fn=r===Sm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,_r=r,Dt===null&&(Qn=1,Td(n,Pr(r,n.current)))}function V1(){var n=wr.current;return n===null?!0:(Ot&4194048)===Ot?zr===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?n===zr:!1}function U1(){var n=X.H;return X.H=Ec,n===null?Ec:n}function B1(){var n=X.A;return X.A=NT,n}function Pd(){Qn=4,Sa||(Ot&4194048)!==Ot&&wr.current!==null||(wl=!0),(Ca&134217727)===0&&(To&134217727)===0||Tn===null||Ra(Tn,Ot,kr,!1)}function Qm(n,r,o){var c=an;an|=2;var f=U1(),m=B1();(Tn!==n||Ot!==r)&&(Ld=null,kl(n,r)),r=!1;var x=Qn;e:do try{if(fn!==0&&Dt!==null){var S=Dt,U=_r;switch(fn){case 8:Ym(),x=6;break e;case 3:case 2:case 9:case 6:wr.current===null&&(r=!0);var ne=fn;if(fn=0,_r=null,El(n,S,U,ne),o&&wl){x=0;break e}break;default:ne=fn,fn=0,_r=null,El(n,S,U,ne)}}IT(),x=Qn;break}catch(pe){P1(n,pe)}while(!0);return r&&n.shellSuspendCounter++,Vi=go=null,an=c,X.H=f,X.A=m,Dt===null&&(Tn=null,Ot=0,sd()),x}function IT(){for(;Dt!==null;)z1(Dt)}function MT(n,r){var o=an;an|=2;var c=U1(),f=B1();Tn!==n||Ot!==r?(Ld=null,Dd=pt()+500,kl(n,r)):wl=pn(n,r);e:do try{if(fn!==0&&Dt!==null){r=Dt;var m=_r;t:switch(fn){case 1:fn=0,_r=null,El(n,r,m,1);break;case 2:case 9:if(X0(m)){fn=0,_r=null,F1(r);break}r=function(){fn!==2&&fn!==9||Tn!==n||(fn=7),xi(n)},m.then(r,r);break e;case 3:fn=7;break e;case 4:fn=5;break e;case 7:X0(m)?(fn=0,_r=null,F1(r)):(fn=0,_r=null,El(n,r,m,7));break;case 5:var x=null;switch(Dt.tag){case 26:x=Dt.memoizedState;case 5:case 27:var S=Dt;if(x?Sb(x):S.stateNode.complete){fn=0,_r=null;var U=S.sibling;if(U!==null)Dt=U;else{var ne=S.return;ne!==null?(Dt=ne,Vd(ne)):Dt=null}break t}}fn=0,_r=null,El(n,r,m,5);break;case 6:fn=0,_r=null,El(n,r,m,6);break;case 8:Ym(),Qn=6;break e;default:throw Error(i(462))}}DT();break}catch(pe){P1(n,pe)}while(!0);return Vi=go=null,X.H=c,X.A=f,an=o,Dt!==null?0:(Tn=null,Ot=0,sd(),Qn)}function DT(){for(;Dt!==null&&!Je();)z1(Dt)}function z1(n){var r=d1(n.alternate,n,Ki);n.memoizedProps=n.pendingProps,r===null?Vd(n):Dt=r}function F1(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=i1(o,r,r.pendingProps,r.type,void 0,Ot);break;case 11:r=i1(o,r,r.pendingProps,r.type.render,r.ref,Ot);break;case 5:dm(r);default:f1(o,r),r=Dt=B0(r,Ki),r=d1(o,r,Ki)}n.memoizedProps=n.pendingProps,r===null?Vd(n):Dt=r}function El(n,r,o,c){Vi=go=null,dm(r),fl=null,gc=0;var f=r.return;try{if(_T(n,f,r,o,Ot)){Qn=1,Td(n,Pr(o,n.current)),Dt=null;return}}catch(m){if(f!==null)throw Dt=f,m;Qn=1,Td(n,Pr(o,n.current)),Dt=null;return}r.flags&32768?(qt||c===1?n=!0:wl||(Ot&536870912)!==0?n=!1:(Sa=n=!0,(c===2||c===9||c===3||c===6)&&(c=wr.current,c!==null&&c.tag===13&&(c.flags|=16384))),q1(r,n)):Vd(r)}function Vd(n){var r=n;do{if((r.flags&32768)!==0){q1(r,Sa);return}n=r.return;var o=TT(r.alternate,r,Ki);if(o!==null){Dt=o;return}if(r=r.sibling,r!==null){Dt=r;return}Dt=r=n}while(r!==null);Qn===0&&(Qn=5)}function q1(n,r){do{var o=jT(n.alternate,n);if(o!==null){o.flags&=32767,Dt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Dt=n;return}Dt=n=o}while(n!==null);Qn=6,Dt=null}function H1(n,r,o,c,f,m,x,S,U){n.cancelPendingCommit=null;do Ud();while(xs!==0);if((an&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(m=r.lanes|r.childLanes,m|=Vf,vt(n,o,m,x,S,U),n===Tn&&(Dt=Tn=null,Ot=0),_l=r,Aa=n,Yi=o,Wm=m,Gm=f,M1=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,VT(Wt,function(){return Y1(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,f=je.p,je.p=2,x=an,an|=4;try{ST(n,r,o)}finally{an=x,je.p=f,X.T=c}}xs=1,$1(),W1(),G1()}}function $1(){if(xs===1){xs=0;var n=Aa,r=_l,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var c=je.p;je.p=2;var f=an;an|=4;try{T1(r,n);var m=lp,x=R0(n.containerInfo),S=m.focusedElem,U=m.selectionRange;if(x!==S&&S&&S.ownerDocument&&A0(S.ownerDocument.documentElement,S)){if(U!==null&&Mf(S)){var ne=U.start,pe=U.end;if(pe===void 0&&(pe=ne),"selectionStart"in S)S.selectionStart=ne,S.selectionEnd=Math.min(pe,S.value.length);else{var ke=S.ownerDocument||document,ie=ke&&ke.defaultView||window;if(ie.getSelection){var de=ie.getSelection(),Qe=S.textContent.length,ft=Math.min(U.start,Qe),wn=U.end===void 0?ft:Math.min(U.end,Qe);!de.extend&&ft>wn&&(x=wn,wn=ft,ft=x);var Y=N0(S,ft),H=N0(S,wn);if(Y&&H&&(de.rangeCount!==1||de.anchorNode!==Y.node||de.anchorOffset!==Y.offset||de.focusNode!==H.node||de.focusOffset!==H.offset)){var ee=ke.createRange();ee.setStart(Y.node,Y.offset),de.removeAllRanges(),ft>wn?(de.addRange(ee),de.extend(H.node,H.offset)):(ee.setEnd(H.node,H.offset),de.addRange(ee))}}}}for(ke=[],de=S;de=de.parentNode;)de.nodeType===1&&ke.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ke.length;S++){var be=ke[S];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Xd=!!op,lp=op=null}finally{an=f,je.p=c,X.T=o}}n.current=r,xs=2}}function W1(){if(xs===2){xs=0;var n=Aa,r=_l,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var c=je.p;je.p=2;var f=an;an|=4;try{w1(n,r.alternate,r)}finally{an=f,je.p=c,X.T=o}}xs=3}}function G1(){if(xs===4||xs===3){xs=0,Tt();var n=Aa,r=_l,o=Yi,c=M1;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?xs=5:(xs=0,_l=Aa=null,K1(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Na=null),Sn(o),r=r.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(ut,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=X.T,f=je.p,je.p=2,X.T=null;try{for(var m=n.onRecoverableError,x=0;x<c.length;x++){var S=c[x];m(S.value,{componentStack:S.stack})}}finally{X.T=r,je.p=f}}(Yi&3)!==0&&Ud(),xi(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===Km?Mc++:(Mc=0,Km=n):Mc=0,Dc(0)}}function K1(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,mc(r)))}function Ud(){return $1(),W1(),G1(),Y1()}function Y1(){if(xs!==5)return!1;var n=Aa,r=Wm;Wm=0;var o=Sn(Yi),c=X.T,f=je.p;try{je.p=32>o?32:o,X.T=null,o=Gm,Gm=null;var m=Aa,x=Yi;if(xs=0,_l=Aa=null,Yi=0,(an&6)!==0)throw Error(i(331));var S=an;if(an|=4,A1(m.current),S1(m,m.current,x,o),an=S,Dc(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(ut,m)}catch{}return!0}finally{je.p=f,X.T=c,K1(n,r)}}function Q1(n,r,o){r=Pr(o,r),r=jm(n.stateNode,r,2),n=ka(n,r,2),n!==null&&(Ke(n,2),xi(n))}function mn(n,r,o){if(n.tag===3)Q1(n,n,o);else for(;r!==null;){if(r.tag===3){Q1(r,n,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Na===null||!Na.has(c))){n=Pr(o,n),o=Xv(2),c=ka(r,o,2),c!==null&&(Jv(o,c,r,n),Ke(c,2),xi(c));break}}r=r.return}}function Xm(n,r,o){var c=n.pingCache;if(c===null){c=n.pingCache=new AT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(qm=!0,f.add(o),n=LT.bind(null,n,r,o),r.then(n,n))}function LT(n,r,o){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Tn===n&&(Ot&o)===o&&(Qn===4||Qn===3&&(Ot&62914560)===Ot&&300>pt()-Md?(an&2)===0&&kl(n,0):Hm|=o,xl===Ot&&(xl=0)),xi(n)}function X1(n,r){r===0&&(r=ae()),n=fo(n,r),n!==null&&(Ke(n,r),xi(n))}function OT(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),X1(n,o)}function PT(n,r){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),X1(n,o)}function VT(n,r){return ht(n,r)}var Bd=null,Tl=null,Jm=!1,zd=!1,Zm=!1,Ia=0;function xi(n){n!==Tl&&n.next===null&&(Tl===null?Bd=Tl=n:Tl=Tl.next=n),zd=!0,Jm||(Jm=!0,BT())}function Dc(n,r){if(!Zm&&zd){Zm=!0;do for(var o=!1,c=Bd;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var x=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-He(42|n)+1)-1,m&=f&~(x&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,tb(c,m))}else m=Ot,m=An(c,c===Tn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||pn(c,m)||(o=!0,tb(c,m));c=c.next}while(o);Zm=!1}}function UT(){J1()}function J1(){zd=Jm=!1;var n=0;Ia!==0&&QT()&&(n=Ia);for(var r=pt(),o=null,c=Bd;c!==null;){var f=c.next,m=Z1(c,r);m===0?(c.next=null,o===null?Bd=f:o.next=f,f===null&&(Tl=o)):(o=c,(n!==0||(m&3)!==0)&&(zd=!0)),c=f}xs!==0&&xs!==5||Dc(n),Ia!==0&&(Ia=0)}function Z1(n,r){for(var o=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var x=31-He(m),S=1<<x,U=f[x];U===-1?((S&o)===0||(S&c)!==0)&&(f[x]=ks(S,r)):U<=r&&(n.expiredLanes|=S),m&=~S}if(r=Tn,o=Ot,o=An(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===r&&(fn===2||fn===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Rt(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||pn(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(c!==null&&Rt(c),Sn(o)){case 2:case 8:o=es;break;case 32:o=Wt;break;case 268435456:o=Ae;break;default:o=Wt}return c=eb.bind(null,n),o=ht(o,c),n.callbackPriority=r,n.callbackNode=o,r}return c!==null&&c!==null&&Rt(c),n.callbackPriority=2,n.callbackNode=null,2}function eb(n,r){if(xs!==0&&xs!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ud()&&n.callbackNode!==o)return null;var c=Ot;return c=An(n,n===Tn?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(L1(n,c,r),Z1(n,pt()),n.callbackNode!=null&&n.callbackNode===o?eb.bind(null,n):null)}function tb(n,r){if(Ud())return null;L1(n,r,!0)}function BT(){JT(function(){(an&6)!==0?ht(zs,UT):J1()})}function ep(){if(Ia===0){var n=ul;n===0&&(n=Dn,Dn<<=1,(Dn&261888)===0&&(Dn=256)),Ia=n}return Ia}function nb(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:mi(""+n)}function sb(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function zT(n,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=nb((f[ln]||null).action),x=c.submitter;x&&(r=(r=x[ln]||null)?nb(r.formAction):x.getAttribute("formAction"),r!==null&&(m=r,x=null));var S=new Pn("action","action",null,c,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ia!==0){var U=x?sb(f,x):new FormData(f);wm(o,{pending:!0,data:U,method:f.method,action:m},null,U)}}else typeof m=="function"&&(S.preventDefault(),U=x?sb(f,x):new FormData(f),wm(o,{pending:!0,data:U,method:f.method,action:m},m,U))},currentTarget:f}]})}}for(var tp=0;tp<Pf.length;tp++){var np=Pf[tp],FT=np.toLowerCase(),qT=np[0].toUpperCase()+np.slice(1);ni(FT,"on"+qT)}ni(D0,"onAnimationEnd"),ni(L0,"onAnimationIteration"),ni(O0,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(iT,"onTransitionRun"),ni(aT,"onTransitionStart"),ni(oT,"onTransitionCancel"),ni(P0,"onTransitionEnd"),kn("onMouseEnter",["mouseout","mouseover"]),kn("onMouseLeave",["mouseout","mouseover"]),kn("onPointerEnter",["pointerout","pointerover"]),kn("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function rb(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var x=c.length-1;0<=x;x--){var S=c[x],U=S.instance,ne=S.currentTarget;if(S=S.listener,U!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ne;try{m(f)}catch(pe){nd(pe)}f.currentTarget=null,m=U}else for(x=0;x<c.length;x++){if(S=c[x],U=S.instance,ne=S.currentTarget,S=S.listener,U!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ne;try{m(f)}catch(pe){nd(pe)}f.currentTarget=null,m=U}}}}function Lt(n,r){var o=r[Yr];o===void 0&&(o=r[Yr]=new Set);var c=n+"__bubble";o.has(c)||(ib(r,n,2,!1),o.add(c))}function sp(n,r,o){var c=0;r&&(c|=4),ib(o,n,c,r)}var Fd="_reactListening"+Math.random().toString(36).slice(2);function rp(n){if(!n[Fd]){n[Fd]=!0,gr.forEach(function(o){o!=="selectionchange"&&(HT.has(o)||sp(o,!1,n),sp(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Fd]||(r[Fd]=!0,sp("selectionchange",!1,r))}}function ib(n,r,o,c){switch(Db(r)){case 2:var f=vj;break;case 8:f=bj;break;default:f=bp}o=f.bind(null,r,o,n),f=void 0,!Ve||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,o,{capture:!0,passive:f}):n.addEventListener(r,o,!0):f!==void 0?n.addEventListener(r,o,{passive:f}):n.addEventListener(r,o,!1)}function ip(n,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var S=c.stateNode.containerInfo;if(S===f)break;if(x===4)for(x=c.return;x!==null;){var U=x.tag;if((U===3||U===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;S!==null;){if(x=vs(S),x===null)return;if(U=x.tag,U===5||U===6||U===26||U===27){c=m=x;continue e}S=S.parentNode}}c=c.return}me(function(){var ne=m,pe=le(o),ke=[];e:{var ie=V0.get(n);if(ie!==void 0){var de=Pn,Qe=n;switch(n){case"keypress":if(En(o)===0)break e;case"keydown":case"keyup":de=Zu;break;case"focusin":Qe="focus",de=lo;break;case"focusout":Qe="blur",de=lo;break;case"beforeblur":case"afterblur":de=lo;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Hu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=v;break;case D0:case L0:case O0:de=Wu;break;case P0:de=N;break;case"scroll":case"scrollend":de=Wn;break;case"wheel":de=ce;break;case"copy":case"cut":case"paste":de=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=Li;break;case"toggle":case"beforetoggle":de=jt}var ft=(r&4)!==0,wn=!ft&&(n==="scroll"||n==="scrollend"),Y=ft?ie!==null?ie+"Capture":null:ie;ft=[];for(var H=ne,ee;H!==null;){var be=H;if(ee=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||ee===null||Y===null||(be=Ie(H,Y),be!=null&&ft.push(Oc(H,be,ee))),wn)break;H=H.return}0<ft.length&&(ie=new de(ie,Qe,null,o,pe),ke.push({event:ie,listeners:ft}))}}if((r&7)===0){e:{if(ie=n==="mouseover"||n==="pointerover",de=n==="mouseout"||n==="pointerout",ie&&o!==z&&(Qe=o.relatedTarget||o.fromElement)&&(vs(Qe)||Qe[ls]))break e;if((de||ie)&&(ie=pe.window===pe?pe:(ie=pe.ownerDocument)?ie.defaultView||ie.parentWindow:window,de?(Qe=o.relatedTarget||o.toElement,de=ne,Qe=Qe?vs(Qe):null,Qe!==null&&(wn=u(Qe),ft=Qe.tag,Qe!==wn||ft!==5&&ft!==27&&ft!==6)&&(Qe=null)):(de=null,Qe=ne),de!==Qe)){if(ft=ac,be="onMouseLeave",Y="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(ft=Li,be="onPointerLeave",Y="onPointerEnter",H="pointer"),wn=de==null?ie:Rn(de),ee=Qe==null?ie:Rn(Qe),ie=new ft(be,H+"leave",de,o,pe),ie.target=wn,ie.relatedTarget=ee,be=null,vs(pe)===ne&&(ft=new ft(Y,H+"enter",Qe,o,pe),ft.target=ee,ft.relatedTarget=wn,be=ft),wn=be,de&&Qe)t:{for(ft=$T,Y=de,H=Qe,ee=0,be=Y;be;be=ft(be))ee++;be=0;for(var ot=H;ot;ot=ft(ot))be++;for(;0<ee-be;)Y=ft(Y),ee--;for(;0<be-ee;)H=ft(H),be--;for(;ee--;){if(Y===H||H!==null&&Y===H.alternate){ft=Y;break t}Y=ft(Y),H=ft(H)}ft=null}else ft=null;de!==null&&ab(ke,ie,de,ft,!1),Qe!==null&&wn!==null&&ab(ke,wn,Qe,ft,!0)}}e:{if(ie=ne?Rn(ne):window,de=ie.nodeName&&ie.nodeName.toLowerCase(),de==="select"||de==="input"&&ie.type==="file")var tn=k0;else if(x0(ie))if(E0)tn=nT;else{tn=eT;var tt=ZE}else de=ie.nodeName,!de||de.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?ne&&Rs(ne.elementType)&&(tn=k0):tn=tT;if(tn&&(tn=tn(n,ne))){_0(ke,tn,o,pe);break e}tt&&tt(n,ie,ne),n==="focusout"&&ne&&ie.type==="number"&&ne.memoizedProps.value!=null&&As(ie,"number",ie.value)}switch(tt=ne?Rn(ne):window,n){case"focusin":(x0(tt)||tt.contentEditable==="true")&&(nl=tt,Df=ne,dc=null);break;case"focusout":dc=Df=nl=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,I0(ke,o,pe);break;case"selectionchange":if(rT)break;case"keydown":case"keyup":I0(ke,o,pe)}var Nt;if(rn)e:{switch(n){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else tl?co(n,o)&&(Pt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Pt="onCompositionStart");Pt&&(yi&&o.locale!=="ko"&&(tl||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&tl&&(Nt=en()):(at=pe,yn="value"in at?at.value:at.textContent,tl=!0)),tt=qd(ne,Pt),0<tt.length&&(Pt=new gi(Pt,n,null,o,pe),ke.push({event:Pt,listeners:tt}),Nt?Pt.data=Nt:(Nt=el(o),Nt!==null&&(Pt.data=Nt)))),(Nt=Lr?YE(n,o):QE(n,o))&&(Pt=qd(ne,"onBeforeInput"),0<Pt.length&&(tt=new gi("onBeforeInput","beforeinput",null,o,pe),ke.push({event:tt,listeners:Pt}),tt.data=Nt)),zT(ke,n,ne,o,pe)}rb(ke,r)})}function Oc(n,r,o){return{instance:n,listener:r,currentTarget:o}}function qd(n,r){for(var o=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ie(n,o),f!=null&&c.unshift(Oc(n,f,m)),f=Ie(n,r),f!=null&&c.push(Oc(n,f,m))),n.tag===3)return c;n=n.return}return[]}function $T(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ab(n,r,o,c,f){for(var m=r._reactName,x=[];o!==null&&o!==c;){var S=o,U=S.alternate,ne=S.stateNode;if(S=S.tag,U!==null&&U===c)break;S!==5&&S!==26&&S!==27||ne===null||(U=ne,f?(ne=Ie(o,m),ne!=null&&x.unshift(Oc(o,ne,U))):f||(ne=Ie(o,m),ne!=null&&x.push(Oc(o,ne,U)))),o=o.return}x.length!==0&&n.push({event:r,listeners:x})}var WT=/\r\n?/g,GT=/\u0000|\uFFFD/g;function ob(n){return(typeof n=="string"?n:""+n).replace(WT,`
`).replace(GT,"")}function lb(n,r){return r=ob(r),ob(n)===r}function bn(n,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Ts(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Ts(n,""+c);break;case"className":ue(n,"class",c);break;case"tabIndex":ue(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ue(n,o,c);break;case"style":Ir(n,c,m);break;case"data":if(r!=="object"){ue(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=mi(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&bn(n,r,"name",f.name,f,null),bn(n,r,"formEncType",f.formEncType,f,null),bn(n,r,"formMethod",f.formMethod,f,null),bn(n,r,"formTarget",f.formTarget,f,null)):(bn(n,r,"encType",f.encType,f,null),bn(n,r,"method",f.method,f,null),bn(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=mi(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=ss);break;case"onScroll":c!=null&&Lt("scroll",n);break;case"onScrollEnd":c!=null&&Lt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=mi(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Lt("beforetoggle",n),Lt("toggle",n),oe(n,"popover",c);break;case"xlinkActuate":Ue(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Ue(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Ue(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Ue(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Ue(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Ue(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Ue(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Ue(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Ue(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":oe(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=fi.get(o)||o,oe(n,o,c))}}function ap(n,r,o,c,f,m){switch(o){case"style":Ir(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof c=="string"?Ts(n,c):(typeof c=="number"||typeof c=="bigint")&&Ts(n,""+c);break;case"onScroll":c!=null&&Lt("scroll",n);break;case"onScrollEnd":c!=null&&Lt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ss);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rr.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=n[ln]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,c,f);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):oe(n,o,c)}}}function Ls(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Lt("error",n),Lt("load",n);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var x=o[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:bn(n,r,m,x,o,null)}}f&&bn(n,r,"srcSet",o.srcSet,o,null),c&&bn(n,r,"src",o.src,o,null);return;case"input":Lt("invalid",n);var S=m=x=f=null,U=null,ne=null;for(c in o)if(o.hasOwnProperty(c)){var pe=o[c];if(pe!=null)switch(c){case"name":f=pe;break;case"type":x=pe;break;case"checked":U=pe;break;case"defaultChecked":ne=pe;break;case"value":m=pe;break;case"defaultValue":S=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(i(137,r));break;default:bn(n,r,c,pe,o,null)}}Di(n,m,S,U,ne,x,f,!1);return;case"select":Lt("invalid",n),c=x=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":x=S;break;case"multiple":c=S;default:bn(n,r,f,S,o,null)}r=m,o=x,n.multiple=!!c,r!=null?Js(n,!!c,r,!1):o!=null&&Js(n,!!c,o,!0);return;case"textarea":Lt("invalid",n),m=f=c=null;for(x in o)if(o.hasOwnProperty(x)&&(S=o[x],S!=null))switch(x){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:bn(n,r,x,S,o,null)}yr(n,c,f,m);return;case"option":for(U in o)o.hasOwnProperty(U)&&(c=o[U],c!=null)&&(U==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":bn(n,r,U,c,o,null));return;case"dialog":Lt("beforetoggle",n),Lt("toggle",n),Lt("cancel",n),Lt("close",n);break;case"iframe":case"object":Lt("load",n);break;case"video":case"audio":for(c=0;c<Lc.length;c++)Lt(Lc[c],n);break;case"image":Lt("error",n),Lt("load",n);break;case"details":Lt("toggle",n);break;case"embed":case"source":case"link":Lt("error",n),Lt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in o)if(o.hasOwnProperty(ne)&&(c=o[ne],c!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:bn(n,r,ne,c,o,null)}return;default:if(Rs(r)){for(pe in o)o.hasOwnProperty(pe)&&(c=o[pe],c!==void 0&&ap(n,r,pe,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&bn(n,r,S,c,o,null))}function KT(n,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,S=null,U=null,ne=null,pe=null;for(de in o){var ke=o[de];if(o.hasOwnProperty(de)&&ke!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":U=ke;default:c.hasOwnProperty(de)||bn(n,r,de,null,c,ke)}}for(var ie in c){var de=c[ie];if(ke=o[ie],c.hasOwnProperty(ie)&&(de!=null||ke!=null))switch(ie){case"type":m=de;break;case"name":f=de;break;case"checked":ne=de;break;case"defaultChecked":pe=de;break;case"value":x=de;break;case"defaultValue":S=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,r));break;default:de!==ke&&bn(n,r,ie,de,c,ke)}}Xs(n,x,S,U,ne,pe,m,f);return;case"select":de=x=S=ie=null;for(m in o)if(U=o[m],o.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":de=U;default:c.hasOwnProperty(m)||bn(n,r,m,null,c,U)}for(f in c)if(m=c[f],U=o[f],c.hasOwnProperty(f)&&(m!=null||U!=null))switch(f){case"value":ie=m;break;case"defaultValue":S=m;break;case"multiple":x=m;default:m!==U&&bn(n,r,f,m,c,U)}r=S,o=x,c=de,ie!=null?Js(n,!!o,ie,!1):!!c!=!!o&&(r!=null?Js(n,!!o,r,!0):Js(n,!!o,o?[]:"",!1));return;case"textarea":de=ie=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:bn(n,r,S,null,c,f)}for(x in c)if(f=c[x],m=o[x],c.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":ie=f;break;case"defaultValue":de=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&bn(n,r,x,f,c,m)}ma(n,ie,de);return;case"option":for(var Qe in o)ie=o[Qe],o.hasOwnProperty(Qe)&&ie!=null&&!c.hasOwnProperty(Qe)&&(Qe==="selected"?n.selected=!1:bn(n,r,Qe,null,c,ie));for(U in c)ie=c[U],de=o[U],c.hasOwnProperty(U)&&ie!==de&&(ie!=null||de!=null)&&(U==="selected"?n.selected=ie&&typeof ie!="function"&&typeof ie!="symbol":bn(n,r,U,ie,c,de));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ft in o)ie=o[ft],o.hasOwnProperty(ft)&&ie!=null&&!c.hasOwnProperty(ft)&&bn(n,r,ft,null,c,ie);for(ne in c)if(ie=c[ne],de=o[ne],c.hasOwnProperty(ne)&&ie!==de&&(ie!=null||de!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,r));break;default:bn(n,r,ne,ie,c,de)}return;default:if(Rs(r)){for(var wn in o)ie=o[wn],o.hasOwnProperty(wn)&&ie!==void 0&&!c.hasOwnProperty(wn)&&ap(n,r,wn,void 0,c,ie);for(pe in c)ie=c[pe],de=o[pe],!c.hasOwnProperty(pe)||ie===de||ie===void 0&&de===void 0||ap(n,r,pe,ie,c,de);return}}for(var Y in o)ie=o[Y],o.hasOwnProperty(Y)&&ie!=null&&!c.hasOwnProperty(Y)&&bn(n,r,Y,null,c,ie);for(ke in c)ie=c[ke],de=o[ke],!c.hasOwnProperty(ke)||ie===de||ie==null&&de==null||bn(n,r,ke,ie,c,de)}function cb(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function YT(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,x=f.initiatorType,S=f.duration;if(m&&S&&cb(x)){for(x=0,S=f.responseEnd,c+=1;c<o.length;c++){var U=o[c],ne=U.startTime;if(ne>S)break;var pe=U.transferSize,ke=U.initiatorType;pe&&cb(ke)&&(U=U.responseEnd,x+=pe*(U<S?1:(S-ne)/(U-ne)))}if(--c,r+=8*(m+x)/(f.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var op=null,lp=null;function Hd(n){return n.nodeType===9?n:n.ownerDocument}function ub(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function db(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function cp(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var up=null;function QT(){var n=window.event;return n&&n.type==="popstate"?n===up?!1:(up=n,!0):(up=null,!1)}var hb=typeof setTimeout=="function"?setTimeout:void 0,XT=typeof clearTimeout=="function"?clearTimeout:void 0,fb=typeof Promise=="function"?Promise:void 0,JT=typeof queueMicrotask=="function"?queueMicrotask:typeof fb<"u"?function(n){return fb.resolve(null).then(n).catch(ZT)}:hb;function ZT(n){setTimeout(function(){throw n})}function Ma(n){return n==="head"}function mb(n,r){var o=r,c=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(f),Nl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Pc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Pc(o);for(var m=o.firstChild;m;){var x=m.nextSibling,S=m.nodeName;m[Hn]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=x}}else o==="body"&&Pc(n.ownerDocument.body);o=f}while(o);Nl(r)}function pb(n,r){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function dp(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":dp(o),Fs(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function ej(n,r,o,c){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Hn])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Fr(n.nextSibling),n===null)break}return null}function tj(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Fr(n.nextSibling),n===null))return null;return n}function gb(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Fr(n.nextSibling),n===null))return null;return n}function hp(n){return n.data==="$?"||n.data==="$~"}function fp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function nj(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Fr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var mp=null;function yb(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return Fr(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function vb(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function bb(n,r,o){switch(r=Hd(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Pc(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Fs(n)}var qr=new Map,wb=new Set;function $d(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Qi=je.d;je.d={f:sj,r:rj,D:ij,C:aj,L:oj,m:lj,X:uj,S:cj,M:dj};function sj(){var n=Qi.f(),r=Od();return n||r}function rj(n){var r=Ln(n);r!==null&&r.tag===5&&r.type==="form"?Pv(r):Qi.r(n)}var jl=typeof document>"u"?null:document;function xb(n,r,o){var c=jl;if(c&&typeof r=="string"&&r){var f=On(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),wb.has(f)||(wb.add(f),n={rel:n,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Ls(r,"link",n),zt(r),c.head.appendChild(r)))}}function ij(n){Qi.D(n),xb("dns-prefetch",n,null)}function aj(n,r){Qi.C(n,r),xb("preconnect",n,r)}function oj(n,r,o){Qi.L(n,r,o);var c=jl;if(c&&n&&r){var f='link[rel="preload"][as="'+On(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+On(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+On(o.imageSizes)+'"]')):f+='[href="'+On(n)+'"]';var m=f;switch(r){case"style":m=Sl(n);break;case"script":m=Cl(n)}qr.has(m)||(n=E({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),qr.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Vc(m))||r==="script"&&c.querySelector(Uc(m))||(r=c.createElement("link"),Ls(r,"link",n),zt(r),c.head.appendChild(r)))}}function lj(n,r){Qi.m(n,r);var o=jl;if(o&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+On(c)+'"][href="'+On(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Cl(n)}if(!qr.has(m)&&(n=E({rel:"modulepreload",href:n},r),qr.set(m,n),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Uc(m)))return}c=o.createElement("link"),Ls(c,"link",n),zt(c),o.head.appendChild(c)}}}function cj(n,r,o){Qi.S(n,r,o);var c=jl;if(c&&n){var f=ts(c).hoistableStyles,m=Sl(n);r=r||"default";var x=f.get(m);if(!x){var S={loading:0,preload:null};if(x=c.querySelector(Vc(m)))S.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":r},o),(o=qr.get(m))&&pp(n,o);var U=x=c.createElement("link");zt(U),Ls(U,"link",n),U._p=new Promise(function(ne,pe){U.onload=ne,U.onerror=pe}),U.addEventListener("load",function(){S.loading|=1}),U.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Wd(x,r,c)}x={type:"stylesheet",instance:x,count:1,state:S},f.set(m,x)}}}function uj(n,r){Qi.X(n,r);var o=jl;if(o&&n){var c=ts(o).hoistableScripts,f=Cl(n),m=c.get(f);m||(m=o.querySelector(Uc(f)),m||(n=E({src:n,async:!0},r),(r=qr.get(f))&&gp(n,r),m=o.createElement("script"),zt(m),Ls(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function dj(n,r){Qi.M(n,r);var o=jl;if(o&&n){var c=ts(o).hoistableScripts,f=Cl(n),m=c.get(f);m||(m=o.querySelector(Uc(f)),m||(n=E({src:n,async:!0,type:"module"},r),(r=qr.get(f))&&gp(n,r),m=o.createElement("script"),zt(m),Ls(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function _b(n,r,o,c){var f=(f=Se.current)?$d(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Sl(o.href),o=ts(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Sl(o.href);var m=ts(f).hoistableStyles,x=m.get(n);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,x),(m=f.querySelector(Vc(n)))&&!m._p&&(x.instance=m,x.state.loading=5),qr.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},qr.set(n,o),m||hj(f,n,o,x.state))),r&&c===null)throw Error(i(528,""));return x}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Cl(o),o=ts(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Sl(n){return'href="'+On(n)+'"'}function Vc(n){return'link[rel="stylesheet"]['+n+"]"}function kb(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function hj(n,r,o,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Ls(r,"link",o),zt(r),n.head.appendChild(r))}function Cl(n){return'[src="'+On(n)+'"]'}function Uc(n){return"script[async]"+n}function Eb(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+On(o.href)+'"]');if(c)return r.instance=c,zt(c),c;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),zt(c),Ls(c,"style",f),Wd(c,o.precedence,n),r.instance=c;case"stylesheet":f=Sl(o.href);var m=n.querySelector(Vc(f));if(m)return r.state.loading|=4,r.instance=m,zt(m),m;c=kb(o),(f=qr.get(f))&&pp(c,f),m=(n.ownerDocument||n).createElement("link"),zt(m);var x=m;return x._p=new Promise(function(S,U){x.onload=S,x.onerror=U}),Ls(m,"link",c),r.state.loading|=4,Wd(m,o.precedence,n),r.instance=m;case"script":return m=Cl(o.src),(f=n.querySelector(Uc(m)))?(r.instance=f,zt(f),f):(c=o,(f=qr.get(m))&&(c=E({},o),gp(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),zt(f),Ls(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Wd(c,o.precedence,n));return r.instance}function Wd(n,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,x=0;x<c.length;x++){var S=c[x];if(S.dataset.precedence===r)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function pp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function gp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Gd=null;function Tb(n,r,o){if(Gd===null){var c=new Map,f=Gd=new Map;f.set(o,c)}else f=Gd,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var m=o[f];if(!(m[Hn]||m[Zt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(r)||"";x=n+x;var S=c.get(x);S?S.push(m):c.set(x,[m])}}return c}function jb(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function fj(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Sb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function mj(n,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Sl(c.href),m=r.querySelector(Vc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Kd.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=m,zt(m);return}m=r.ownerDocument||r,c=kb(c),(f=qr.get(f))&&pp(c,f),m=m.createElement("link"),zt(m);var x=m;x._p=new Promise(function(S,U){x.onload=S,x.onerror=U}),Ls(m,"link",c),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Kd.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var yp=0;function pj(n,r){return n.stylesheets&&n.count===0&&Qd(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&Qd(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&yp===0&&(yp=62500*YT());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Qd(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>yp?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Kd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Yd=null;function Qd(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Yd=new Map,r.forEach(gj,n),Yd=null,Kd.call(n))}function gj(n,r){if(!(r.state.loading&4)){var o=Yd.get(n);if(o)var c=o.get(null);else{o=new Map,Yd.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),c=x)}c&&o.set(null,c)}f=r.instance,x=f.getAttribute("data-precedence"),m=o.get(x)||c,m===c&&o.set(null,f),o.set(x,f),this.count++,c=Kd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Bc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function yj(n,r,o,c,f,m,x,S,U){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Cb(n,r,o,c,f,m,x,S,U,ne,pe,ke){return n=new yj(n,r,o,x,U,ne,pe,ke,S),r=1,m===!0&&(r|=24),m=br(3,null,null,r),n.current=m,m.stateNode=n,r=Qf(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},em(m),n}function Nb(n){return n?(n=il,n):il}function Ab(n,r,o,c,f,m){f=Nb(f),c.context===null?c.context=f:c.pendingContext=f,c=_a(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=ka(n,c,r),o!==null&&(dr(o,n,r),vc(o,n,r))}function Rb(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function vp(n,r){Rb(n,r),(n=n.alternate)&&Rb(n,r)}function Ib(n){if(n.tag===13||n.tag===31){var r=fo(n,67108864);r!==null&&dr(r,n,67108864),vp(n,67108864)}}function Mb(n){if(n.tag===13||n.tag===31){var r=Er();r=gn(r);var o=fo(n,r);o!==null&&dr(o,n,r),vp(n,r)}}var Xd=!0;function vj(n,r,o,c){var f=X.T;X.T=null;var m=je.p;try{je.p=2,bp(n,r,o,c)}finally{je.p=m,X.T=f}}function bj(n,r,o,c){var f=X.T;X.T=null;var m=je.p;try{je.p=8,bp(n,r,o,c)}finally{je.p=m,X.T=f}}function bp(n,r,o,c){if(Xd){var f=wp(c);if(f===null)ip(n,r,c,Jd,o),Lb(n,c);else if(xj(f,n,r,o,c))c.stopPropagation();else if(Lb(n,c),r&4&&-1<wj.indexOf(n)){for(;f!==null;){var m=Ln(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Fn(m.pendingLanes);if(x!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;x;){var U=1<<31-He(x);S.entanglements[1]|=U,x&=~U}xi(m),(an&6)===0&&(Dd=pt()+500,Dc(0))}}break;case 31:case 13:S=fo(m,2),S!==null&&dr(S,m,2),Od(),vp(m,2)}if(m=wp(c),m===null&&ip(n,r,c,Jd,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else ip(n,r,c,null,o)}}function wp(n){return n=le(n),xp(n)}var Jd=null;function xp(n){if(Jd=null,n=vs(n),n!==null){var r=u(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=d(r),n!==null)return n;n=null}else if(o===31){if(n=p(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Jd=n,null}function Db(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qt()){case zs:return 2;case es:return 8;case Wt:case se:return 32;case Ae:return 268435456;default:return 32}default:return 32}}var _p=!1,Da=null,La=null,Oa=null,zc=new Map,Fc=new Map,Pa=[],wj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lb(n,r){switch(n){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":zc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fc.delete(r.pointerId)}}function qc(n,r,o,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Ln(r),r!==null&&Ib(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function xj(n,r,o,c,f){switch(r){case"focusin":return Da=qc(Da,n,r,o,c,f),!0;case"dragenter":return La=qc(La,n,r,o,c,f),!0;case"mouseover":return Oa=qc(Oa,n,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return zc.set(m,qc(zc.get(m)||null,n,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Fc.set(m,qc(Fc.get(m)||null,n,r,o,c,f)),!0}return!1}function Ob(n){var r=vs(n.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=d(o),r!==null){n.blockedOn=r,qn(n.priority,function(){Mb(o)});return}}else if(r===31){if(r=p(o),r!==null){n.blockedOn=r,qn(n.priority,function(){Mb(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zd(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=wp(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);z=c,o.target.dispatchEvent(c),z=null}else return r=Ln(o),r!==null&&Ib(r),n.blockedOn=o,!1;r.shift()}return!0}function Pb(n,r,o){Zd(n)&&o.delete(r)}function _j(){_p=!1,Da!==null&&Zd(Da)&&(Da=null),La!==null&&Zd(La)&&(La=null),Oa!==null&&Zd(Oa)&&(Oa=null),zc.forEach(Pb),Fc.forEach(Pb)}function eh(n,r){n.blockedOn===r&&(n.blockedOn=null,_p||(_p=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,_j)))}var th=null;function Vb(n){th!==n&&(th=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){th===n&&(th=null);for(var r=0;r<n.length;r+=3){var o=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(xp(c||o)===null)continue;break}var m=Ln(o);m!==null&&(n.splice(r,3),r-=3,wm(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function Nl(n){function r(U){return eh(U,n)}Da!==null&&eh(Da,n),La!==null&&eh(La,n),Oa!==null&&eh(Oa,n),zc.forEach(r),Fc.forEach(r);for(var o=0;o<Pa.length;o++){var c=Pa[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Pa.length&&(o=Pa[0],o.blockedOn===null);)Ob(o),o.blockedOn===null&&Pa.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],x=f[ln]||null;if(typeof m=="function")x||Vb(o);else if(x){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[ln]||null)S=x.formAction;else if(xp(f)!==null)continue}else S=x.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),Vb(o)}}}function Ub(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function kp(n){this._internalRoot=n}nh.prototype.render=kp.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=Er();Ab(o,c,n,r,null,null)},nh.prototype.unmount=kp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Ab(n.current,2,null,n,null,null),Od(),r[ls]=null}};function nh(n){this._internalRoot=n}nh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ns();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Pa.length&&r!==0&&r<Pa[o].priority;o++);Pa.splice(o,0,n),o===0&&Ob(n)}};var Bb=e.version;if(Bb!=="19.2.4")throw Error(i(527,Bb,"19.2.4"));je.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(r),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var kj={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{ut=sh.inject(kj),qe=sh}catch{}}return $c.createRoot=function(n,r){if(!l(n))throw Error(i(299));var o=!1,c="",f=Gv,m=Kv,x=Yv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=Cb(n,1,!1,null,null,o,c,null,f,m,x,Ub),n[ls]=r.current,rp(n),new kp(r)},$c.hydrateRoot=function(n,r,o){if(!l(n))throw Error(i(299));var c=!1,f="",m=Gv,x=Kv,S=Yv,U=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(U=o.formState)),r=Cb(n,1,!0,r,o??null,c,f,U,m,x,S,Ub),r.context=Nb(null),o=r.current,c=Er(),c=gn(c),f=_a(c),f.callback=null,ka(o,f,c),o=c,r.current.lanes=o,Ke(r,o),xi(r),n[ls]=r.current,rp(n),new nh(r)},$c.version="19.2.4",$c}var Qb;function Mj(){if(Qb)return jp.exports;Qb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),jp.exports=Ij(),jp.exports}var Dj=Mj();const Lj="modulepreload",Oj=function(s){return"/login/"+s},Xb={},Ks=function(e,t,i){let l=Promise.resolve();if(t&&t.length>0){let g=function(y){return Promise.all(y.map(b=>Promise.resolve(b).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");l=g(t.map(y=>{if(y=Oj(y),y in Xb)return;Xb[y]=!0;const b=y.endsWith(".css"),E=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${E}`))return;const T=document.createElement("link");if(T.rel=b?"stylesheet":Lj,b||(T.as="script"),T.crossOrigin="",T.href=y,p&&T.setAttribute("nonce",p),document.head.appendChild(T),b)return new Promise((L,$)=>{T.addEventListener("load",L),T.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var Jb="popstate";function Pj(s={}){function e(i,l){let{pathname:u,search:d,hash:p}=i.location;return mg("",{pathname:u,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(i,l){return typeof l=="string"?l:hu(l)}return Uj(e,t,null,s)}function Bn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Wr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Vj(){return Math.random().toString(36).substring(2,10)}function Zb(s,e){return{usr:s.state,key:s.key,idx:e}}function mg(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Ql(e):e,state:t,key:e&&e.key||i||Vj()}}function hu({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Ql(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function Uj(s,e,t,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,d=l.history,p="POP",g=null,y=b();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function b(){return(d.state||{idx:null}).idx}function E(){p="POP";let B=b(),K=B==null?null:B-y;y=B,g&&g({action:p,location:q.location,delta:K})}function T(B,K){p="PUSH";let G=mg(q.location,B,K);y=b()+1;let Q=Zb(G,y),he=q.createHref(G);try{d.pushState(Q,"",he)}catch(Ee){if(Ee instanceof DOMException&&Ee.name==="DataCloneError")throw Ee;l.location.assign(he)}u&&g&&g({action:p,location:q.location,delta:1})}function L(B,K){p="REPLACE";let G=mg(q.location,B,K);y=b();let Q=Zb(G,y),he=q.createHref(G);d.replaceState(Q,"",he),u&&g&&g({action:p,location:q.location,delta:0})}function $(B){return Bj(B)}let q={get action(){return p},get location(){return s(l,d)},listen(B){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Jb,E),g=B,()=>{l.removeEventListener(Jb,E),g=null}},createHref(B){return e(l,B)},createURL:$,encodeLocation(B){let K=$(B);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:T,replace:L,go(B){return d.go(B)}};return q}function Bj(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Bn(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:hu(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function fx(s,e,t="/"){return zj(s,e,t,!1)}function zj(s,e,t,i){let l=typeof e=="string"?Ql(e):e,u=ra(l.pathname||"/",t);if(u==null)return null;let d=mx(s);Fj(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=Zj(u);p=Xj(d[g],y,i)}return p}function mx(s,e=[],t=[],i="",l=!1){let u=(d,p,g=l,y)=>{let b={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;Bn(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let E=ea([i,b.relativePath]),T=t.concat(b);d.children&&d.children.length>0&&(Bn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),mx(d.children,e,T,E,g)),!(d.path==null&&!d.index)&&e.push({path:E,score:Yj(E,d.index),routesMeta:T})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of px(d.path))u(d,p,!0,g)}),e}function px(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,l=t.endsWith("?"),u=t.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let d=px(i.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function Fj(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Qj(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var qj=/^:[\w-]+$/,Hj=3,$j=2,Wj=1,Gj=10,Kj=-2,e2=s=>s==="*";function Yj(s,e){let t=s.split("/"),i=t.length;return t.some(e2)&&(i+=Kj),e&&(i+=$j),t.filter(l=>!e2(l)).reduce((l,u)=>l+(qj.test(u)?Hj:u===""?Wj:Gj),i)}function Qj(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function Xj(s,e,t=!1){let{routesMeta:i}=s,l={},u="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,b=u==="/"?e:e.slice(u.length)||"/",E=Ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),T=g.route;if(!E&&y&&t&&!i[i.length-1].route.index&&(E=Ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!E)return null;Object.assign(l,E.params),d.push({params:l,pathname:ea([u,E.pathname]),pathnameBase:sS(ea([u,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(u=ea([u,E.pathnameBase]))}return d}function Ih(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=Jj(s.path,s.caseSensitive,s.end),l=e.match(t);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:E},T)=>{if(b==="*"){let $=p[T]||"";d=u.slice(0,u.length-$.length).replace(/(.)\/+$/,"$1")}const L=p[T];return E&&!L?y[b]=void 0:y[b]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function Jj(s,e=!1,t=!0){Wr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function Zj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ra(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var eS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function tS(s,e="/"){let{pathname:t,search:i="",hash:l=""}=typeof s=="string"?Ql(s):s,u;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?u=t2(t.substring(1),"/"):u=t2(t,e)):u=e,{pathname:u,search:rS(i),hash:iS(l)}}function t2(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?t.length>1&&t.pop():l!=="."&&t.push(l)}),t.length>1?t.join("/"):"/"}function Ap(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function nS(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Qg(s){let e=nS(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Xg(s,e,t,i=!1){let l;typeof s=="string"?l=Ql(s):(l={...s},Bn(!l.pathname||!l.pathname.includes("?"),Ap("?","pathname","search",l)),Bn(!l.pathname||!l.pathname.includes("#"),Ap("#","pathname","hash",l)),Bn(!l.search||!l.search.includes("#"),Ap("#","search","hash",l)));let u=s===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=t;else{let E=e.length-1;if(!i&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),E-=1;l.pathname=T.join("/")}p=E>=0?e[E]:"/"}let g=tS(l,p),y=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var ea=s=>s.join("/").replace(/\/\/+/g,"/"),sS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),rS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,iS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,aS=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function oS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function lS(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var gx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yx(s,e){let t=s;if(typeof t!="string"||!eS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,l=!1;if(gx)try{let u=new URL(window.location.href),d=t.startsWith("//")?new URL(u.protocol+t):new URL(t),p=ra(d.pathname,e);d.origin===u.origin&&p!=null?t=p+d.search+d.hash:l=!0}catch{Wr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vx=["POST","PUT","PATCH","DELETE"];new Set(vx);var cS=["GET",...vx];new Set(cS);var Xl=w.createContext(null);Xl.displayName="DataRouter";var ef=w.createContext(null);ef.displayName="DataRouterState";var uS=w.createContext(!1),bx=w.createContext({isTransitioning:!1});bx.displayName="ViewTransition";var dS=w.createContext(new Map);dS.displayName="Fetchers";var hS=w.createContext(null);hS.displayName="Await";var Nr=w.createContext(null);Nr.displayName="Navigation";var Su=w.createContext(null);Su.displayName="Location";var di=w.createContext({outlet:null,matches:[],isDataRoute:!1});di.displayName="Route";var Jg=w.createContext(null);Jg.displayName="RouteError";var wx="REACT_ROUTER_ERROR",fS="REDIRECT",mS="ROUTE_ERROR_RESPONSE";function pS(s){if(s.startsWith(`${wx}:${fS}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function gS(s){if(s.startsWith(`${wx}:${mS}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new aS(e.status,e.statusText,e.data)}catch{}}function yS(s,{relative:e}={}){Bn(Jl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=w.useContext(Nr),{hash:l,pathname:u,search:d}=Cu(s,{relative:e}),p=u;return t!=="/"&&(p=u==="/"?t:ea([t,u])),i.createHref({pathname:p,search:d,hash:l})}function Jl(){return w.useContext(Su)!=null}function Ii(){return Bn(Jl(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Su).location}var xx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _x(s){w.useContext(Nr).static||w.useLayoutEffect(s)}function Ys(){let{isDataRoute:s}=w.useContext(di);return s?RS():vS()}function vS(){Bn(Jl(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(Xl),{basename:e,navigator:t}=w.useContext(Nr),{matches:i}=w.useContext(di),{pathname:l}=Ii(),u=JSON.stringify(Qg(i)),d=w.useRef(!1);return _x(()=>{d.current=!0}),w.useCallback((g,y={})=>{if(Wr(d.current,xx),!d.current)return;if(typeof g=="number"){t.go(g);return}let b=Xg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:ea([e,b.pathname])),(y.replace?t.replace:t.push)(b,y.state,y)},[e,t,u,l,s])}w.createContext(null);function bS(){let{matches:s}=w.useContext(di),e=s[s.length-1];return e?e.params:{}}function Cu(s,{relative:e}={}){let{matches:t}=w.useContext(di),{pathname:i}=Ii(),l=JSON.stringify(Qg(t));return w.useMemo(()=>Xg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function wS(s,e){return kx(s,e)}function kx(s,e,t,i,l){Bn(Jl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(Nr),{matches:d}=w.useContext(di),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",E=p&&p.route;{let G=E&&E.path||"";Tx(y,!E||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let T=Ii(),L;if(e){let G=typeof e=="string"?Ql(e):e;Bn(b==="/"||G.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${G.pathname}" was given in the \`location\` prop.`),L=G}else L=T;let $=L.pathname||"/",q=$;if(b!=="/"){let G=b.replace(/^\//,"").split("/");q="/"+$.replace(/^\//,"").split("/").slice(G.length).join("/")}let B=fx(s,{pathname:q});Wr(E||B!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),Wr(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=TS(B&&B.map(G=>Object.assign({},G,{params:Object.assign({},g,G.params),pathname:ea([b,u.encodeLocation?u.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?b:ea([b,u.encodeLocation?u.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),d,t,i,l);return e&&K?w.createElement(Su.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},K):K}function xS(){let s=AS(),e=oS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:l},t):null,d)}var _S=w.createElement(xS,null),Ex=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=gS(s.digest);t&&(s=t)}let e=s!==void 0?w.createElement(di.Provider,{value:this.props.routeContext},w.createElement(Jg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?w.createElement(kS,{error:s},e):e}};Ex.contextType=uS;var Rp=new WeakMap;function kS({children:s,error:e}){let{basename:t}=w.useContext(Nr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=pS(e.digest);if(i){let l=Rp.get(e);if(l)throw l;let u=yx(i.location,t);if(gx&&!Rp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw Rp.set(e,d),d}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function ES({routeContext:s,match:e,children:t}){let i=w.useContext(Xl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(di.Provider,{value:s},t)}function TS(s,e=[],t=null,i=null,l=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,d=t?.errors;if(d!=null){let b=u.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);Bn(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(t)for(let b=0;b<u.length;b++){let E=u[b];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=b),E.route.id){let{loaderData:T,errors:L}=t,$=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!L||L[E.route.id]===void 0);if(E.route.lazy||$){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=t&&i?(b,E)=>{i(b,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:lS(t.matches),errorInfo:E})}:void 0;return u.reduceRight((b,E,T)=>{let L,$=!1,q=null,B=null;t&&(L=d&&E.route.id?d[E.route.id]:void 0,q=E.route.errorElement||_S,p&&(g<0&&T===0?(Tx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),$=!0,B=null):g===T&&($=!0,B=E.route.hydrateFallbackElement||null)));let K=e.concat(u.slice(0,T+1)),G=()=>{let Q;return L?Q=q:$?Q=B:E.route.Component?Q=w.createElement(E.route.Component,null):E.route.element?Q=E.route.element:Q=b,w.createElement(ES,{match:E,routeContext:{outlet:b,matches:K,isDataRoute:t!=null},children:Q})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?w.createElement(Ex,{location:t.location,revalidation:t.revalidation,component:q,error:L,children:G(),routeContext:{outlet:null,matches:K,isDataRoute:!0},onError:y}):G()},null)}function Zg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jS(s){let e=w.useContext(Xl);return Bn(e,Zg(s)),e}function SS(s){let e=w.useContext(ef);return Bn(e,Zg(s)),e}function CS(s){let e=w.useContext(di);return Bn(e,Zg(s)),e}function ey(s){let e=CS(s),t=e.matches[e.matches.length-1];return Bn(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function NS(){return ey("useRouteId")}function AS(){let s=w.useContext(Jg),e=SS("useRouteError"),t=ey("useRouteError");return s!==void 0?s:e.errors?.[t]}function RS(){let{router:s}=jS("useNavigate"),e=ey("useNavigate"),t=w.useRef(!1);return _x(()=>{t.current=!0}),w.useCallback(async(l,u={})=>{Wr(t.current,xx),t.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var n2={};function Tx(s,e,t){!e&&!n2[s]&&(n2[s]=!0,Wr(!1,t))}w.memo(IS);function IS({routes:s,future:e,state:t,onError:i}){return kx(s,void 0,t,i,e)}function jx({to:s,replace:e,state:t,relative:i}){Bn(Jl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=w.useContext(Nr);Wr(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=w.useContext(di),{pathname:d}=Ii(),p=Ys(),g=Xg(s,Qg(u),d,i==="path"),y=JSON.stringify(g);return w.useEffect(()=>{p(JSON.parse(y),{replace:e,state:t,relative:i})},[p,y,i,e,t]),null}function xn(s){Bn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function MS({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){Bn(!Jl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[p,l,u,d]);typeof t=="string"&&(t=Ql(t));let{pathname:y="/",search:b="",hash:E="",state:T=null,key:L="default"}=t,$=w.useMemo(()=>{let q=ra(y,p);return q==null?null:{location:{pathname:q,search:b,hash:E,state:T,key:L},navigationType:i}},[p,y,b,E,T,L,i]);return Wr($!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${E}" because it does not start with the basename, so the <Router> won't render anything.`),$==null?null:w.createElement(Nr.Provider,{value:g},w.createElement(Su.Provider,{children:e,value:$}))}function DS({children:s,location:e}){return wS(pg(s),e)}function pg(s,e=[]){let t=[];return w.Children.forEach(s,(i,l)=>{if(!w.isValidElement(i))return;let u=[...e,l];if(i.type===w.Fragment){t.push.apply(t,pg(i.props.children,u));return}Bn(i.type===xn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bn(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=pg(i.props.children,u)),t.push(d)}),t}var bh="get",wh="application/x-www-form-urlencoded";function tf(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function LS(s){return tf(s)&&s.tagName.toLowerCase()==="button"}function OS(s){return tf(s)&&s.tagName.toLowerCase()==="form"}function PS(s){return tf(s)&&s.tagName.toLowerCase()==="input"}function VS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function US(s,e){return s.button===0&&(!e||e==="_self")&&!VS(s)}function gg(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let i=s[t];return e.concat(Array.isArray(i)?i.map(l=>[t,l]):[[t,i]])},[]))}function BS(s,e){let t=gg(s);return e&&e.forEach((i,l)=>{t.has(l)||e.getAll(l).forEach(u=>{t.append(l,u)})}),t}var rh=null;function zS(){if(rh===null)try{new FormData(document.createElement("form"),0),rh=!1}catch{rh=!0}return rh}var FS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ip(s){return s!=null&&!FS.has(s)?(Wr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wh}"`),null):s}function qS(s,e){let t,i,l,u,d;if(OS(s)){let p=s.getAttribute("action");i=p?ra(p,e):null,t=s.getAttribute("method")||bh,l=Ip(s.getAttribute("enctype"))||wh,u=new FormData(s)}else if(LS(s)||PS(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?ra(g,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||bh,l=Ip(s.getAttribute("formenctype"))||Ip(p.getAttribute("enctype"))||wh,u=new FormData(p,s),!zS()){let{name:y,type:b,value:E}=s;if(b==="image"){let T=y?`${y}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else y&&u.append(y,E)}}else{if(tf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=bh,i=null,l=wh,d=s}return u&&l==="text/plain"&&(d=u,u=void 0),{action:i,method:t.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ty(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function HS(s,e,t,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&ra(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function $S(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function GS(s,e,t){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await $S(u,t);return d.links?d.links():[]}return[]}));return XS(i.flat(1).filter(WS).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function s2(s,e,t,i,l,u){let d=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,p=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function KS(s,e,{includeHydrateFallback:t}={}){return YS(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),t&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function YS(s){return[...new Set(s)]}function QS(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function XS(s,e){let t=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(QS(l));return t.has(u)||(t.add(u),i.push({key:u,link:l})),i},[])}function Sx(){let s=w.useContext(Xl);return ty(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function JS(){let s=w.useContext(ef);return ty(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ny=w.createContext(void 0);ny.displayName="FrameworkContext";function Cx(){let s=w.useContext(ny);return ty(s,"You must render this element inside a <HydratedRouter> element"),s}function ZS(s,e){let t=w.useContext(ny),[i,l]=w.useState(!1),[u,d]=w.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:E}=e,T=w.useRef(null);w.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let q=K=>{K.forEach(G=>{d(G.isIntersecting)})},B=new IntersectionObserver(q,{threshold:.5});return T.current&&B.observe(T.current),()=>{B.disconnect()}}},[s]),w.useEffect(()=>{if(i){let q=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(q)}}},[i]);let L=()=>{l(!0)},$=()=>{l(!1),d(!1)};return t?s!=="intent"?[u,T,{}]:[u,T,{onFocus:Wc(p,L),onBlur:Wc(g,$),onMouseEnter:Wc(y,L),onMouseLeave:Wc(b,$),onTouchStart:Wc(E,L)}]:[!1,T,{}]}function Wc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function eC({page:s,...e}){let{router:t}=Sx(),i=w.useMemo(()=>fx(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?w.createElement(nC,{page:s,matches:i,...e}):null}function tC(s){let{manifest:e,routeModules:t}=Cx(),[i,l]=w.useState([]);return w.useEffect(()=>{let u=!1;return GS(s,e,t).then(d=>{u||l(d)}),()=>{u=!0}},[s,e,t]),i}function nC({page:s,matches:e,...t}){let i=Ii(),{future:l,manifest:u,routeModules:d}=Cx(),{basename:p}=Sx(),{loaderData:g,matches:y}=JS(),b=w.useMemo(()=>s2(s,e,y,u,i,"data"),[s,e,y,u,i]),E=w.useMemo(()=>s2(s,e,y,u,i,"assets"),[s,e,y,u,i]),T=w.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let q=new Set,B=!1;if(e.forEach(G=>{let Q=u.routes[G.route.id];!Q||!Q.hasLoader||(!b.some(he=>he.route.id===G.route.id)&&G.route.id in g&&d[G.route.id]?.shouldRevalidate||Q.hasClientLoader?B=!0:q.add(G.route.id))}),q.size===0)return[];let K=HS(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return B&&q.size>0&&K.searchParams.set("_routes",e.filter(G=>q.has(G.route.id)).map(G=>G.route.id).join(",")),[K.pathname+K.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,b,e,s,d]),L=w.useMemo(()=>KS(E,u),[E,u]),$=tC(E);return w.createElement(w.Fragment,null,T.map(q=>w.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...t})),L.map(q=>w.createElement("link",{key:q,rel:"modulepreload",href:q,...t})),$.map(({key:q,link:B})=>w.createElement("link",{key:q,nonce:t.nonce,...B,crossOrigin:B.crossOrigin??t.crossOrigin})))}function sC(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var rC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rC&&(window.__reactRouterVersion="7.13.0")}catch{}function iC({basename:s,children:e,unstable_useTransitions:t,window:i}){let l=w.useRef();l.current==null&&(l.current=Pj({window:i,v5Compat:!0}));let u=l.current,[d,p]=w.useState({action:u.action,location:u.location}),g=w.useCallback(y=>{t===!1?p(y):w.startTransition(()=>p(y))},[t]);return w.useLayoutEffect(()=>u.listen(g),[u,g]),w.createElement(MS,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:t})}var Nx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ax=w.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:l,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T,...L},$){let{basename:q,unstable_useTransitions:B}=w.useContext(Nr),K=typeof y=="string"&&Nx.test(y),G=yx(y,q);y=G.to;let Q=yS(y,{relative:l}),[he,Ee,ge]=ZS(i,L),C=cC(y,{replace:d,state:p,target:g,preventScrollReset:b,relative:l,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:B});function j(V){e&&e(V),V.defaultPrevented||C(V)}let R=w.createElement("a",{...L,...ge,href:G.absoluteURL||Q,onClick:G.isExternal||u?e:j,ref:sC($,Ee),target:g,"data-discover":!K&&t==="render"?"true":void 0});return he&&!K?w.createElement(w.Fragment,null,R,w.createElement(eC,{page:Q})):R});Ax.displayName="Link";var aC=w.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:p,children:g,...y},b){let E=Cu(d,{relative:y.relative}),T=Ii(),L=w.useContext(ef),{navigator:$,basename:q}=w.useContext(Nr),B=L!=null&&mC(E)&&p===!0,K=$.encodeLocation?$.encodeLocation(E).pathname:E.pathname,G=T.pathname,Q=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;t||(G=G.toLowerCase(),Q=Q?Q.toLowerCase():null,K=K.toLowerCase()),Q&&q&&(Q=ra(Q,q)||Q);const he=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let Ee=G===K||!l&&G.startsWith(K)&&G.charAt(he)==="/",ge=Q!=null&&(Q===K||!l&&Q.startsWith(K)&&Q.charAt(K.length)==="/"),C={isActive:Ee,isPending:ge,isTransitioning:B},j=Ee?e:void 0,R;typeof i=="function"?R=i(C):R=[i,Ee?"active":null,ge?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(C):u;return w.createElement(Ax,{...y,"aria-current":j,className:R,ref:b,style:V,to:d,viewTransition:p},typeof g=="function"?g(C):g)});aC.displayName="NavLink";var oC=w.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:l,state:u,method:d=bh,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T,...L},$)=>{let{unstable_useTransitions:q}=w.useContext(Nr),B=hC(),K=fC(p,{relative:y}),G=d.toLowerCase()==="get"?"get":"post",Q=typeof p=="string"&&Nx.test(p),he=Ee=>{if(g&&g(Ee),Ee.defaultPrevented)return;Ee.preventDefault();let ge=Ee.nativeEvent.submitter,C=ge?.getAttribute("formmethod")||d,j=()=>B(ge||Ee.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:l,state:u,relative:y,preventScrollReset:b,viewTransition:E,unstable_defaultShouldRevalidate:T});q&&t!==!1?w.startTransition(()=>j()):j()};return w.createElement("form",{ref:$,method:G,action:K,onSubmit:i?g:he,...L,"data-discover":!Q&&s==="render"?"true":void 0})});oC.displayName="Form";function lC(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rx(s){let e=w.useContext(Xl);return Bn(e,lC(s)),e}function cC(s,{target:e,replace:t,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Ys(),b=Ii(),E=Cu(s,{relative:u});return w.useCallback(T=>{if(US(T,e)){T.preventDefault();let L=t!==void 0?t:hu(b)===hu(E),$=()=>y(s,{replace:L,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?w.startTransition(()=>$()):$()}},[b,y,E,t,i,e,s,l,u,d,p,g])}function IO(s){Wr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef(gg(s)),t=w.useRef(!1),i=Ii(),l=w.useMemo(()=>BS(i.search,t.current?null:e.current),[i.search]),u=Ys(),d=w.useCallback((p,g)=>{const y=gg(typeof p=="function"?p(new URLSearchParams(l)):p);t.current=!0,u("?"+y,g)},[u,l]);return[l,d]}var uC=0,dC=()=>`__${String(++uC)}__`;function hC(){let{router:s}=Rx("useSubmit"),{basename:e}=w.useContext(Nr),t=NS(),i=s.fetch,l=s.navigate;return w.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:b,body:E}=qS(u,e);if(d.navigate===!1){let T=d.fetcherKey||dC();await i(T,t,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:E,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await l(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:E,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:t,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,l,e,t])}function fC(s,{relative:e}={}){let{basename:t}=w.useContext(Nr),i=w.useContext(di);Bn(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...Cu(s||".",{relative:e})},d=Ii();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(E=>E).forEach(E=>p.append("index",E));let b=p.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:ea([t,u.pathname])),hu(u)}function mC(s,{relative:e}={}){let t=w.useContext(bx);Bn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Rx("useViewTransitionState"),l=Cu(s,{relative:e});if(!t.isTransitioning)return!1;let u=ra(t.currentLocation.pathname,i)||t.currentLocation.pathname,d=ra(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Ih(l.pathname,d)!=null||Ih(l.pathname,u)!=null}const pC=()=>{};var r2={};const Ix=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[t++]=l:l<2048?(e[t++]=l>>6|192,e[t++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=l>>18|240,e[t++]=l>>12&63|128,e[t++]=l>>6&63|128,e[t++]=l&63|128):(e[t++]=l>>12|224,e[t++]=l>>6&63|128,e[t++]=l&63|128)}return e},gC=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const l=s[t++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[t++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[t++],d=s[t++],p=s[t++],g=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],d=s[t++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},Mx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],d=l+1<s.length,p=d?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,b=u>>2,E=(u&3)<<4|p>>4;let T=(p&15)<<2|y>>6,L=y&63;g||(L=64,d||(T=64)),i.push(t[b],t[E],t[T],t[L])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Ix(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):gC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=t[s.charAt(l++)],p=l<s.length?t[s.charAt(l)]:0;++l;const y=l<s.length?t[s.charAt(l)]:64;++l;const E=l<s.length?t[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||E==null)throw new yC;const T=u<<2|p>>4;if(i.push(T),y!==64){const L=p<<4&240|y>>2;if(i.push(L),E!==64){const $=y<<6&192|E;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class yC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vC=function(s){const e=Ix(s);return Mx.encodeByteArray(e,!0)},Mh=function(s){return vC(s).replace(/\./g,"")},Dx=function(s){try{return Mx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function bC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const wC=()=>bC().__FIREBASE_DEFAULTS__,xC=()=>{if(typeof process>"u"||typeof r2>"u")return;const s=r2.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},_C=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Dx(s[1]);return e&&JSON.parse(e)},nf=()=>{try{return pC()||wC()||xC()||_C()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Lx=s=>nf()?.emulatorHosts?.[s],Ox=s=>{const e=Lx(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Px=()=>nf()?.config,Vx=s=>nf()?.[`_${s}`];class kC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function so(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sy(s){return(await fetch(s,{credentials:"include"})).ok}function Ux(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Mh(JSON.stringify(t)),Mh(JSON.stringify(d)),""].join(".")}const iu={};function EC(){const s={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?s.emulator.push(e):s.prod.push(e);return s}function TC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let i2=!1;function ry(s,e){if(typeof window>"u"||typeof document>"u"||!so(window.location.host)||iu[s]===e||iu[s]||i2)return;iu[s]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",u=EC().prod.length>0;function d(){const T=document.getElementById(i);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,L){T.setAttribute("width","24"),T.setAttribute("id",L),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{i2=!0,d()},T}function b(T,L){T.setAttribute("id",L),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=TC(i),L=t("text"),$=document.getElementById(L)||document.createElement("span"),q=t("learnmore"),B=document.getElementById(q)||document.createElement("a"),K=t("preprendIcon"),G=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;p(Q),b(B,q);const he=y();g(G,K),Q.append(G,$,B,he),document.body.appendChild(Q)}u?($.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Gs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gs())}function SC(){const s=nf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NC(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function AC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RC(){const s=Gs();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function IC(){return!SC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bx(){try{return typeof indexedDB=="object"}catch{return!1}}function zx(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{t=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(t){e(t)}})}function MC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const DC="FirebaseError";class hi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=DC,Object.setPrototypeOf(this,hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$o.prototype.create)}}class $o{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?LC(u,i):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new hi(l,p,i)}}function LC(s,e){return s.replace(OC,(t,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const OC=/\{\$([^}]+)}/g;function PC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ia(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const l of t){if(!i.includes(l))return!1;const u=s[l],d=e[l];if(a2(u)&&a2(d)){if(!ia(u,d))return!1}else if(u!==d)return!1}for(const l of i)if(!t.includes(l))return!1;return!0}function a2(s){return s!==null&&typeof s=="object"}function Nu(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Zc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function eu(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function VC(s,e){const t=new UC(s,e);return t.subscribe.bind(t)}class UC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let l;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");BC(e,["next","error","complete"])?l=e:l={next:e,error:t,complete:i},l.next===void 0&&(l.next=Mp),l.error===void 0&&(l.error=Mp),l.complete===void 0&&(l.complete=Mp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BC(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Mp(){}function dn(s){return s&&s._delegate?s._delegate:s}class Gr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Co="[DEFAULT]";class zC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new kC;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:t});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qC(e))try{this.getOrInitializeService({instanceIdentifier:Co})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=Co){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Co){return this.instances.has(e)}getOptions(e=Co){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&d.resolve(l)}return l}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const l of i)try{l(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Co){return this.component?this.component.multipleInstances?e:Co:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FC(s){return s===Co?void 0:s}function qC(s){return s.instantiationMode==="EAGER"}class HC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Vt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Vt||(Vt={}));const $C={debug:Vt.DEBUG,verbose:Vt.VERBOSE,info:Vt.INFO,warn:Vt.WARN,error:Vt.ERROR,silent:Vt.SILENT},WC=Vt.INFO,GC={[Vt.DEBUG]:"log",[Vt.VERBOSE]:"log",[Vt.INFO]:"info",[Vt.WARN]:"warn",[Vt.ERROR]:"error"},KC=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=GC[e];if(l)console[l](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class iy{constructor(e){this.name=e,this._logLevel=WC,this._logHandler=KC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$C[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Vt.DEBUG,...e),this._logHandler(this,Vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Vt.VERBOSE,...e),this._logHandler(this,Vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Vt.INFO,...e),this._logHandler(this,Vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Vt.WARN,...e),this._logHandler(this,Vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Vt.ERROR,...e),this._logHandler(this,Vt.ERROR,...e)}}const YC=(s,e)=>e.some(t=>s instanceof t);let o2,l2;function QC(){return o2||(o2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XC(){return l2||(l2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fx=new WeakMap,yg=new WeakMap,qx=new WeakMap,Dp=new WeakMap,ay=new WeakMap;function JC(s){const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{t(ta(s.result)),l()},d=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Fx.set(t,s)}).catch(()=>{}),ay.set(e,s),e}function ZC(s){if(yg.has(s))return;const e=new Promise((t,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{t(),l()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});yg.set(s,e)}let vg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return yg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||qx.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ta(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function eN(s){vg=s(vg)}function tN(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Lp(this),e,...t);return qx.set(i,e.sort?e.sort():[e]),ta(i)}:XC().includes(s)?function(...e){return s.apply(Lp(this),e),ta(Fx.get(this))}:function(...e){return ta(s.apply(Lp(this),e))}}function nN(s){return typeof s=="function"?tN(s):(s instanceof IDBTransaction&&ZC(s),YC(s,QC())?new Proxy(s,vg):s)}function ta(s){if(s instanceof IDBRequest)return JC(s);if(Dp.has(s))return Dp.get(s);const e=nN(s);return e!==s&&(Dp.set(s,e),ay.set(e,s)),e}const Lp=s=>ay.get(s);function sf(s,e,{blocked:t,upgrade:i,blocking:l,terminated:u}={}){const d=indexedDB.open(s,e),p=ta(d);return i&&d.addEventListener("upgradeneeded",g=>{i(ta(d.result),g.oldVersion,g.newVersion,ta(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}function Op(s,{blocked:e}={}){const t=indexedDB.deleteDatabase(s);return e&&t.addEventListener("blocked",i=>e(i.oldVersion,i)),ta(t).then(()=>{})}const sN=["get","getKey","getAll","getAllKeys","count"],rN=["put","add","delete","clear"],Pp=new Map;function c2(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Pp.get(e))return Pp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,l=rN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(l||sN.includes(t)))return;const u=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),l&&g.done]))[0]};return Pp.set(e,u),u}eN(s=>({...s,get:(e,t,i)=>c2(e,t)||s.get(e,t,i),has:(e,t)=>!!c2(e,t)||s.has(e,t)}));class iN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function aN(s){return s.getComponent()?.type==="VERSION"}const bg="@firebase/app",u2="0.14.7";const aa=new iy("@firebase/app"),oN="@firebase/app-compat",lN="@firebase/analytics-compat",cN="@firebase/analytics",uN="@firebase/app-check-compat",dN="@firebase/app-check",hN="@firebase/auth",fN="@firebase/auth-compat",mN="@firebase/database",pN="@firebase/data-connect",gN="@firebase/database-compat",yN="@firebase/functions",vN="@firebase/functions-compat",bN="@firebase/installations",wN="@firebase/installations-compat",xN="@firebase/messaging",_N="@firebase/messaging-compat",kN="@firebase/performance",EN="@firebase/performance-compat",TN="@firebase/remote-config",jN="@firebase/remote-config-compat",SN="@firebase/storage",CN="@firebase/storage-compat",NN="@firebase/firestore",AN="@firebase/ai",RN="@firebase/firestore-compat",IN="firebase",MN="12.8.0";const wg="[DEFAULT]",DN={[bg]:"fire-core",[oN]:"fire-core-compat",[cN]:"fire-analytics",[lN]:"fire-analytics-compat",[dN]:"fire-app-check",[uN]:"fire-app-check-compat",[hN]:"fire-auth",[fN]:"fire-auth-compat",[mN]:"fire-rtdb",[pN]:"fire-data-connect",[gN]:"fire-rtdb-compat",[yN]:"fire-fn",[vN]:"fire-fn-compat",[bN]:"fire-iid",[wN]:"fire-iid-compat",[xN]:"fire-fcm",[_N]:"fire-fcm-compat",[kN]:"fire-perf",[EN]:"fire-perf-compat",[TN]:"fire-rc",[jN]:"fire-rc-compat",[SN]:"fire-gcs",[CN]:"fire-gcs-compat",[NN]:"fire-fst",[RN]:"fire-fst-compat",[AN]:"fire-vertex","fire-js":"fire-js",[IN]:"fire-js-all"};const Dh=new Map,LN=new Map,xg=new Map;function d2(s,e){try{s.container.addComponent(e)}catch(t){aa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function li(s){const e=s.name;if(xg.has(e))return aa.debug(`There were multiple attempts to register component ${e}.`),!1;xg.set(e,s);for(const t of Dh.values())d2(t,s);for(const t of LN.values())d2(t,s);return!0}function Wo(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Tr(s){return s==null?!1:s.settings!==void 0}const ON={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ka=new $o("app","Firebase",ON);class PN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ka.create("app-deleted",{appName:this._name})}}const Go=MN;function oy(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:wg,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Ka.create("bad-app-name",{appName:String(l)});if(t||(t=Px()),!t)throw Ka.create("no-options");const u=Dh.get(l);if(u){if(ia(t,u.options)&&ia(i,u.config))return u;throw Ka.create("duplicate-app",{appName:l})}const d=new HC(l);for(const g of xg.values())d.addComponent(g);const p=new PN(t,i,d);return Dh.set(l,p),p}function Au(s=wg){const e=Dh.get(s);if(!e&&s===wg&&Px())return oy();if(!e)throw Ka.create("no-app",{appName:s});return e}function mr(s,e,t){let i=DN[s]??s;t&&(i+=`-${t}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),aa.warn(d.join(" "));return}li(new Gr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const VN="firebase-heartbeat-database",UN=1,fu="firebase-heartbeat-store";let Vp=null;function Hx(){return Vp||(Vp=sf(VN,UN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(fu)}catch(t){console.warn(t)}}}}).catch(s=>{throw Ka.create("idb-open",{originalErrorMessage:s.message})})),Vp}async function BN(s){try{const t=(await Hx()).transaction(fu),i=await t.objectStore(fu).get($x(s));return await t.done,i}catch(e){if(e instanceof hi)aa.warn(e.message);else{const t=Ka.create("idb-get",{originalErrorMessage:e?.message});aa.warn(t.message)}}}async function h2(s,e){try{const i=(await Hx()).transaction(fu,"readwrite");await i.objectStore(fu).put(e,$x(s)),await i.done}catch(t){if(t instanceof hi)aa.warn(t.message);else{const i=Ka.create("idb-set",{originalErrorMessage:t?.message});aa.warn(i.message)}}}function $x(s){return`${s.name}!${s.options.appId}`}const zN=1024,FN=30;class qN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $N(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=f2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>FN){const l=WN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){aa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=f2(),{heartbeatsToSend:t,unsentEntries:i}=HN(this._heartbeatsCache.heartbeats),l=Mh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return aa.warn(e),""}}}function f2(){return new Date().toISOString().substring(0,10)}function HN(s,e=zN){const t=[];let i=s.slice();for(const l of s){const u=t.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),m2(t)>e){u.dates.pop();break}}else if(t.push({agent:l.agent,dates:[l.date]}),m2(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class $N{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bx()?zx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await BN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return h2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return h2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function m2(s){return Mh(JSON.stringify({version:2,heartbeats:s})).length}function WN(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function GN(s){li(new Gr("platform-logger",e=>new iN(e),"PRIVATE")),li(new Gr("heartbeat",e=>new qN(e),"PRIVATE")),mr(bg,u2,s),mr(bg,u2,"esm2020"),mr("fire-js","")}GN("");function Wx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KN=Wx,Gx=new $o("auth","Firebase",Wx());const Lh=new iy("@firebase/auth");function YN(s,...e){Lh.logLevel<=Vt.WARN&&Lh.warn(`Auth (${Go}): ${s}`,...e)}function xh(s,...e){Lh.logLevel<=Vt.ERROR&&Lh.error(`Auth (${Go}): ${s}`,...e)}function ci(s,...e){throw ly(s,...e)}function Ti(s,...e){return ly(s,...e)}function Kx(s,e,t){const i={...KN(),[e]:t};return new $o("auth","Firebase",i).create(e,{appName:s.name})}function na(s){return Kx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ly(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return Gx.create(s,...e)}function bt(s,e,...t){if(!s)throw ly(e,...t)}function Ji(s){const e="INTERNAL ASSERTION FAILED: "+s;throw xh(e),new Error(e)}function oa(s,e){s||Ji(e)}function _g(){return typeof self<"u"&&self.location?.href||""}function QN(){return p2()==="http:"||p2()==="https:"}function p2(){return typeof self<"u"&&self.location?.protocol||null}function XN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QN()||NC()||"connection"in navigator)?navigator.onLine:!0}function JN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,oa(t>e,"Short delay should be less than long delay!"),this.isMobile=jC()||AC()}get(){return XN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cy(s,e){oa(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class Yx{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ZN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const eA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tA=new Ru(3e4,6e4);function ua(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function da(s,e,t,i,l={}){return Qx(s,l,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const p=Nu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return CC()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&so(s.emulatorConfig.host)&&(y.credentials="include"),Yx.fetch()(await Xx(s,s.config.apiHost,t,p),y)})}async function Qx(s,e,t){s._canInitEmulator=!1;const i={...ZN,...e};try{const l=new sA(s),u=await Promise.race([t(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw ih(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw ih(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw ih(s,"user-disabled",d);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Kx(s,b,y);ci(s,b)}}catch(l){if(l instanceof hi)throw l;ci(s,"network-request-failed",{message:String(l)})}}async function Iu(s,e,t,i,l={}){const u=await da(s,e,t,i,l);return"mfaPendingCredential"in u&&ci(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Xx(s,e,t,i){const l=`${e}${t}?${i}`,u=s,d=u.config.emulator?cy(s.config,l):`${s.config.apiScheme}://${l}`;return eA.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function nA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ti(this.auth,"network-request-failed")),tA.get())})}}function ih(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const l=Ti(s,e,i);return l.customData._tokenResponse=t,l}function g2(s){return s!==void 0&&s.enterprise!==void 0}class rA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function iA(s,e){return da(s,"GET","/v2/recaptchaConfig",ua(s,e))}async function aA(s,e){return da(s,"POST","/v1/accounts:delete",e)}async function Oh(s,e){return da(s,"POST","/v1/accounts:lookup",e)}function au(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oA(s,e=!1){const t=dn(s),i=await t.getIdToken(e),l=uy(i);bt(l&&l.exp&&l.auth_time&&l.iat,t.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:i,authTime:au(Up(l.auth_time)),issuedAtTime:au(Up(l.iat)),expirationTime:au(Up(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Up(s){return Number(s)*1e3}function uy(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return xh("JWT malformed, contained fewer than 3 sections"),null;try{const l=Dx(t);return l?JSON.parse(l):(xh("Failed to decode base64 JWT payload"),null)}catch(l){return xh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function y2(s){const e=uy(s);return bt(e,"internal-error"),bt(typeof e.exp<"u","internal-error"),bt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function mu(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof hi&&lA(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function lA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class cA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class kg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ph(s){const e=s.auth,t=await s.getIdToken(),i=await mu(s,Oh(e,{idToken:t}));bt(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?Jx(l.providerUserInfo):[],d=dA(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!d?.length,y=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new kg(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function uA(s){const e=dn(s);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dA(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function Jx(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function hA(s,e){const t=await Qx(s,{},async()=>{const i=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,d=await Xx(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&so(s.emulatorConfig.host)&&(g.credentials="include"),Yx.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function fA(s,e){return da(s,"POST","/v2/accounts:revokeToken",ua(s,e))}class Pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bt(e.idToken,"internal-error"),bt(typeof e.idToken<"u","internal-error"),bt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){bt(e.length!==0,"internal-error");const t=y2(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:l,expiresIn:u}=await hA(e,t);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:l,expirationTime:u}=t,d=new Pl;return i&&(bt(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),l&&(bt(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(bt(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pl,this.toJSON())}_performRefresh(){return Ji("not implemented")}}function Ua(s,e){bt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new cA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new kg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await mu(this,this.stsTokenManager.getToken(this.auth,e));return bt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oA(this,e)}reload(){return uA(this)}_assign(e){this!==e&&(bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tr(this.auth.app))return Promise.reject(na(this.auth));const e=await this.getIdToken();return await mu(this,aA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,l=t.email??void 0,u=t.phoneNumber??void 0,d=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:L,providerData:$,stsTokenManager:q}=t;bt(E&&q,e,"internal-error");const B=Pl.fromJSON(this.name,q);bt(typeof E=="string",e,"internal-error"),Ua(i,e.name),Ua(l,e.name),bt(typeof T=="boolean",e,"internal-error"),bt(typeof L=="boolean",e,"internal-error"),Ua(u,e.name),Ua(d,e.name),Ua(p,e.name),Ua(g,e.name),Ua(y,e.name),Ua(b,e.name);const K=new ai({uid:E,auth:e,email:l,emailVerified:T,displayName:i,isAnonymous:L,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:B,createdAt:y,lastLoginAt:b});return $&&Array.isArray($)&&(K.providerData=$.map(G=>({...G}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,t,i=!1){const l=new Pl;l.updateFromServerResponse(t);const u=new ai({uid:t.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Ph(u),u}static async _fromGetAccountInfoResponse(e,t,i){const l=t.users[0];bt(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Jx(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,p=new Pl;p.updateFromIdToken(i);const g=new ai({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new kg(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const v2=new Map;function Zi(s){oa(s instanceof Function,"Expected a class definition");let e=v2.get(s);return e?(oa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,v2.set(s,e),e)}class Zx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zx.type="NONE";const b2=Zx;function _h(s,e,t){return`firebase:${s}:${e}:${t}`}class Vl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=_h(this.userKey,l.apiKey,u),this.fullPersistenceKey=_h("persistence",l.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Oh(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Vl(Zi(b2),e,i);const l=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Zi(b2);const d=_h(i,e.config.apiKey,e.name);let p=null;for(const y of t)try{const b=await y._get(d);if(b){let E;if(typeof b=="string"){const T=await Oh(e,{idToken:b}).catch(()=>{});if(!T)break;E=await ai._fromGetAccountInfoResponse(e,T,b)}else E=ai._fromJSON(e,b);y!==u&&(p=E),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Vl(u,e,i):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new Vl(u,e,i))}}function w2(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i_(e))return"Blackberry";if(a_(e))return"Webos";if(t_(e))return"Safari";if((e.includes("chrome/")||n_(e))&&!e.includes("edge/"))return"Chrome";if(r_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function e_(s=Gs()){return/firefox\//i.test(s)}function t_(s=Gs()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n_(s=Gs()){return/crios\//i.test(s)}function s_(s=Gs()){return/iemobile/i.test(s)}function r_(s=Gs()){return/android/i.test(s)}function i_(s=Gs()){return/blackberry/i.test(s)}function a_(s=Gs()){return/webos/i.test(s)}function dy(s=Gs()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function mA(s=Gs()){return dy(s)&&!!window.navigator?.standalone}function pA(){return RC()&&document.documentMode===10}function o_(s=Gs()){return dy(s)||r_(s)||a_(s)||i_(s)||/windows phone/i.test(s)||s_(s)}function l_(s,e=[]){let t;switch(s){case"Browser":t=w2(Gs());break;case"Worker":t=`${w2(Gs())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Go}/${i}`}class gA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const l of t)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function yA(s,e={}){return da(s,"GET","/v2/passwordPolicy",ua(s,e))}const vA=6;class bA{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??vA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),l&&(t.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class wA{constructor(e,t,i,l){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x2(this),this.idTokenSubscription=new x2(this),this.beforeStateQueue=new gA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Zi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Oh(this,{idToken:e}),i=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Tr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tr(this.app))return Promise.reject(na(this));const t=e?dn(e):null;return t&&bt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tr(this.app)?Promise.reject(na(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tr(this.app)?Promise.reject(na(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yA(this),t=new bA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $o("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await fA(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Zi(e)||this._popupRedirectResolver;bt(t,this,"argument-error"),this.redirectPersistenceManager=await Vl.create(this,[Zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,l){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,l);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ro(s){return dn(s)}class x2{constructor(e){this.auth=e,this.observer=null,this.addObserver=VC(t=>this.observer=t)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xA(s){rf=s}function c_(s){return rf.loadJS(s)}function _A(){return rf.recaptchaEnterpriseScript}function kA(){return rf.gapiScript}function EA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class TA{constructor(){this.enterprise=new jA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class jA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const SA="recaptcha-enterprise",u_="NO_RECAPTCHA";class CA{constructor(e){this.type=SA,this.auth=ro(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{iA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new rA(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,d,p){const g=window.grecaptcha;g2(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(u_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TA().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(p=>{if(!t&&g2(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=_A();g.length!==0&&(g+=p),c_(g).then(()=>{l(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function _2(s,e,t,i=!1,l=!1){const u=new CA(s);let d;if(l)d=u_;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Vh(s,e,t,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await _2(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await _2(s,e,t,t==="getOobCode");return i(s,d)}else return Promise.reject(u)})}function NA(s,e){const t=Wo(s,"auth");if(t.isInitialized()){const l=t.getImmediate(),u=t.getOptions();if(ia(u,e??{}))return l;ci(l,"already-initialized")}return t.initialize({options:e})}function AA(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Zi);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function RA(s,e,t){const i=ro(s);bt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=d_(e),{host:d,port:p}=IA(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},b=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){bt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),bt(ia(y,i.config.emulator)&&ia(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,so(d)?(sy(`${u}//${d}${g}`),ry("Auth",!0)):MA()}function d_(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function IA(s){const e=d_(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:k2(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:k2(d)}}}function k2(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function MA(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class hy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ji("not implemented")}_getIdTokenResponse(e){return Ji("not implemented")}_linkToIdToken(e,t){return Ji("not implemented")}_getReauthenticationResolver(e){return Ji("not implemented")}}async function DA(s,e){return da(s,"POST","/v1/accounts:signUp",e)}async function LA(s,e){return Iu(s,"POST","/v1/accounts:signInWithPassword",ua(s,e))}async function h_(s,e){return da(s,"POST","/v1/accounts:sendOobCode",ua(s,e))}async function OA(s,e){return h_(s,e)}async function PA(s,e){return h_(s,e)}async function VA(s,e){return Iu(s,"POST","/v1/accounts:signInWithEmailLink",ua(s,e))}async function UA(s,e){return Iu(s,"POST","/v1/accounts:signInWithEmailLink",ua(s,e))}class pu extends hy{constructor(e,t,i,l=null){super("password",i),this._email=e,this._password=t,this._tenantId=l}static _fromEmailAndPassword(e,t){return new pu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new pu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vh(e,t,"signInWithPassword",LA);case"emailLink":return VA(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vh(e,i,"signUpPassword",DA);case"emailLink":return UA(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Ul(s,e){return Iu(s,"POST","/v1/accounts:signInWithIdp",ua(s,e))}const BA="http://localhost";class Po extends hy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=t;if(!i||!l)return null;const d=new Po(i,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Ul(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ul(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ul(e,t)}buildRequest(){const e={requestUri:BA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nu(t)}return e}}function zA(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FA(s){const e=Zc(eu(s)).link,t=e?Zc(eu(e)).deep_link_id:null,i=Zc(eu(s)).deep_link_id;return(i?Zc(eu(i)).link:null)||i||t||e||s}class fy{constructor(e){const t=Zc(eu(e)),i=t.apiKey??null,l=t.oobCode??null,u=zA(t.mode??null);bt(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=FA(e);try{return new fy(t)}catch{return null}}}class Zl{constructor(){this.providerId=Zl.PROVIDER_ID}static credential(e,t){return pu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=fy.parseLink(t);return bt(i,"argument-error"),pu._fromEmailAndCode(e,i.code,i.tenantId)}}Zl.PROVIDER_ID="password";Zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class f_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mu extends f_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ba extends Mu{constructor(){super("facebook.com")}static credential(e){return Po._fromParams({providerId:Ba.PROVIDER_ID,signInMethod:Ba.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ba.credentialFromTaggedObject(e)}static credentialFromError(e){return Ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ba.credential(e.oauthAccessToken)}catch{return null}}}Ba.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ba.PROVIDER_ID="facebook.com";class za extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Po._fromParams({providerId:za.PROVIDER_ID,signInMethod:za.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return za.credentialFromTaggedObject(e)}static credentialFromError(e){return za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return za.credential(t,i)}catch{return null}}}za.GOOGLE_SIGN_IN_METHOD="google.com";za.PROVIDER_ID="google.com";class Fa extends Mu{constructor(){super("github.com")}static credential(e){return Po._fromParams({providerId:Fa.PROVIDER_ID,signInMethod:Fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fa.credentialFromTaggedObject(e)}static credentialFromError(e){return Fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fa.credential(e.oauthAccessToken)}catch{return null}}}Fa.GITHUB_SIGN_IN_METHOD="github.com";Fa.PROVIDER_ID="github.com";class qa extends Mu{constructor(){super("twitter.com")}static credential(e,t){return Po._fromParams({providerId:qa.PROVIDER_ID,signInMethod:qa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qa.credentialFromTaggedObject(e)}static credentialFromError(e){return qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return qa.credential(t,i)}catch{return null}}}qa.TWITTER_SIGN_IN_METHOD="twitter.com";qa.PROVIDER_ID="twitter.com";async function qA(s,e){return Iu(s,"POST","/v1/accounts:signUp",ua(s,e))}class Vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,l=!1){const u=await ai._fromIdTokenResponse(e,i,l),d=E2(i);return new Vo({user:u,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const l=E2(i);return new Vo({user:e,providerId:l,_tokenResponse:i,operationType:t})}}function E2(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Uh extends hi{constructor(e,t,i,l){super(t.code,t.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,Uh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,l){return new Uh(e,t,i,l)}}function m_(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Uh._fromErrorAndOperation(s,u,e,i):u})}async function HA(s,e,t=!1){const i=await mu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Vo._forOperation(s,"link",i)}async function $A(s,e,t=!1){const{auth:i}=s;if(Tr(i.app))return Promise.reject(na(i));const l="reauthenticate";try{const u=await mu(s,m_(i,l,e,s),t);bt(u.idToken,i,"internal-error");const d=uy(u.idToken);bt(d,i,"internal-error");const{sub:p}=d;return bt(s.uid===p,i,"user-mismatch"),Vo._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&ci(i,"user-mismatch"),u}}async function p_(s,e,t=!1){if(Tr(s.app))return Promise.reject(na(s));const i="signIn",l=await m_(s,i,e),u=await Vo._fromIdTokenResponse(s,i,l);return t||await s._updateCurrentUser(u.user),u}async function WA(s,e){return p_(ro(s),e)}async function g_(s){const e=ro(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GA(s,e,t){const i=ro(s);await Vh(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",PA)}async function KA(s,e,t){if(Tr(s.app))return Promise.reject(na(s));const i=ro(s),d=await Vh(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qA).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&g_(s),g}),p=await Vo._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function YA(s,e,t){return Tr(s.app)?Promise.reject(na(s)):WA(dn(s),Zl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&g_(s),i})}async function MO(s,e){const t=dn(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()},{email:u}=await OA(t.auth,l);u!==s.email&&await s.reload()}function T2(s,e){return dn(s).setPersistence(e)}function QA(s,e,t,i){return dn(s).onIdTokenChanged(e,t,i)}function XA(s,e,t){return dn(s).beforeAuthStateChanged(e,t)}function JA(s,e,t,i){return dn(s).onAuthStateChanged(e,t,i)}function ZA(s){return dn(s).signOut()}const Bh="__sak";class y_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const e4=1e3,t4=10;class v_ extends y_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=o_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),l=this.localCache[t];i!==l&&e(t,l,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);pA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,t4):l()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},e4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}v_.type="LOCAL";const Eg=v_;class b_ extends y_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}b_.type="SESSION";const my=b_;function n4(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(l=>l.isListeningto(e));if(t)return t;const i=new af(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:l,data:u}=t.data,d=this.handlersMap[l];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(d).map(async y=>y(t.origin,u)),g=await n4(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];function py(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class s4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=py("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:l,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(T.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ji(){return window}function r4(s){ji().location.href=s}function w_(){return typeof ji().WorkerGlobalScope<"u"&&typeof ji().importScripts=="function"}async function i4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a4(){return navigator?.serviceWorker?.controller||null}function o4(){return w_()?self:null}const x_="firebaseLocalStorageDb",l4=1,zh="firebaseLocalStorage",__="fbase_key";class Du{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function of(s,e){return s.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function c4(){const s=indexedDB.deleteDatabase(x_);return new Du(s).toPromise()}function Tg(){const s=indexedDB.open(x_,l4);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(zh,{keyPath:__})}catch(l){t(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(zh)?e(i):(i.close(),await c4(),e(await Tg()))})})}async function j2(s,e,t){const i=of(s,!0).put({[__]:e,value:t});return new Du(i).toPromise()}async function u4(s,e){const t=of(s,!1).get(e),i=await new Du(t).toPromise();return i===void 0?null:i.value}function S2(s,e){const t=of(s,!0).delete(e);return new Du(t).toPromise()}const d4=800,h4=3;class k_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>h4)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return w_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(o4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await i4(),!this.activeServiceWorker)return;this.sender=new s4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tg();return await j2(e,Bh,"1"),await S2(e,Bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>j2(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>u4(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>S2(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=of(l,!1).getAll();return new Du(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),t.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),t.push(l));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k_.type="LOCAL";const f4=k_;new Ru(3e4,6e4);function m4(s,e){return e?Zi(e):(bt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class gy extends hy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ul(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ul(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ul(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function p4(s){return p_(s.auth,new gy(s),s.bypassAuthState)}function g4(s){const{auth:e,user:t}=s;return bt(t,e,"internal-error"),$A(t,new gy(s),s.bypassAuthState)}async function y4(s){const{auth:e,user:t}=s;return bt(t,e,"internal-error"),HA(t,new gy(s),s.bypassAuthState)}class E_{constructor(e,t,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p4;case"linkViaPopup":case"linkViaRedirect":return y4;case"reauthViaPopup":case"reauthViaRedirect":return g4;default:ci(this.auth,"internal-error")}}resolve(e){oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const v4=new Ru(2e3,1e4);class Ol extends E_{constructor(e,t,i,l,u){super(e,t,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Ol.currentPopupAction&&Ol.currentPopupAction.cancel(),Ol.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bt(e,this.auth,"internal-error"),e}async onExecution(){oa(this.filter.length===1,"Popup operations only handle one event");const e=py();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ol.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v4.get())};e()}}Ol.currentPopupAction=null;const b4="pendingRedirect",kh=new Map;class w4 extends E_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=kh.get(this.auth._key());if(!e){try{const i=await x4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}kh.set(this.auth._key(),e)}return this.bypassAuthState||kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x4(s,e){const t=E4(e),i=k4(s);if(!await i._isAvailable())return!1;const l=await i._get(t)==="true";return await i._remove(t),l}function _4(s,e){kh.set(s._key(),e)}function k4(s){return Zi(s._redirectPersistence)}function E4(s){return _h(b4,s.config.apiKey,s.name)}async function T4(s,e,t=!1){if(Tr(s.app))return Promise.reject(na(s));const i=ro(s),l=m4(i,e),d=await new w4(i,l,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}const j4=600*1e3;class S4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!T_(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=j4&&this.cachedEventUids.clear(),this.cachedEventUids.has(C2(e))}saveEventToCache(e){this.cachedEventUids.add(C2(e)),this.lastProcessedEventTime=Date.now()}}function C2(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function T_({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function C4(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return T_(s);default:return!1}}async function N4(s,e={}){return da(s,"GET","/v1/projects",e)}const A4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R4=/^https?/;async function I4(s){if(s.config.emulator)return;const{authorizedDomains:e}=await N4(s);for(const t of e)try{if(M4(t))return}catch{}ci(s,"unauthorized-domain")}function M4(s){const e=_g(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!R4.test(t))return!1;if(A4.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const D4=new Ru(3e4,6e4);function N2(){const s=ji().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function L4(s){return new Promise((e,t)=>{function i(){N2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N2(),t(Ti(s,"network-request-failed"))},timeout:D4.get()})}if(ji().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ji().gapi?.load)i();else{const l=EA("iframefcb");return ji()[l]=()=>{gapi.load?i():t(Ti(s,"network-request-failed"))},c_(`${kA()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function O4(s){return Eh=Eh||L4(s),Eh}const P4=new Ru(5e3,15e3),V4="__/auth/iframe",U4="emulator/auth/iframe",B4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F4(s){const e=s.config;bt(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?cy(e,U4):`https://${s.config.authDomain}/${V4}`,i={apiKey:e.apiKey,appName:s.name,v:Go},l=z4.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${Nu(i).slice(1)}`}async function q4(s){const e=await O4(s),t=ji().gapi;return bt(t,s,"internal-error"),e.open({where:document.body,url:F4(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B4,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const d=Ti(s,"network-request-failed"),p=ji().setTimeout(()=>{u(d)},P4.get());function g(){ji().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(d)})}))}const H4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$4=500,W4=600,G4="_blank",K4="http://localhost";class A2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y4(s,e,t,i=$4,l=W4){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...H4,width:i.toString(),height:l.toString(),top:u,left:d},y=Gs().toLowerCase();t&&(p=n_(y)?G4:t),e_(y)&&(e=e||K4,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[L,$])=>`${T}${L}=${$},`,"");if(mA(y)&&p!=="_self")return Q4(e||"",p),new A2(null);const E=window.open(e||"",p,b);bt(E,s,"popup-blocked");try{E.focus()}catch{}return new A2(E)}function Q4(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const X4="__/auth/handler",J4="emulator/auth/handler",Z4=encodeURIComponent("fac");async function R2(s,e,t,i,l,u){bt(s.config.authDomain,s,"auth-domain-config-required"),bt(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Go,eventId:l};if(e instanceof f_){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",PC(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))d[b]=E}if(e instanceof Mu){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),y=g?`#${Z4}=${encodeURIComponent(g)}`:"";return`${eR(s)}?${Nu(p).slice(1)}${y}`}function eR({config:s}){return s.emulator?cy(s,J4):`https://${s.authDomain}/${X4}`}const Bp="webStorageSupport";class tR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=my,this._completeRedirectFn=T4,this._overrideRedirectResult=_4}async _openPopup(e,t,i,l){oa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await R2(e,t,i,_g(),l);return Y4(e,u,py())}async _openRedirect(e,t,i,l){await this._originValidation(e);const u=await R2(e,t,i,_g(),l);return r4(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:l,promise:u}=this.eventManagers[t];return l?Promise.resolve(l):(oa(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await q4(e),i=new S4(e);return t.register("authEvent",l=>(bt(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bp,{type:Bp},l=>{const u=l?.[0]?.[Bp];u!==void 0&&t(!!u),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=I4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return o_()||t_()||dy()}}const nR=tR;var I2="@firebase/auth",M2="1.12.0";class sR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function rR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iR(s){li(new Gr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;bt(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l_(s)},y=new wA(i,l,u,g);return AA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),li(new Gr("auth-internal",e=>{const t=ro(e.getProvider("auth").getImmediate());return(i=>new sR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),mr(I2,M2,rR(s)),mr(I2,M2,"esm2020")}const aR=300,oR=Vx("authIdTokenMaxAge")||aR;let D2=null;const lR=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>oR)return;const l=t?.token;D2!==l&&(D2=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function j_(s=Au()){const e=Wo(s,"auth");if(e.isInitialized())return e.getImmediate();const t=NA(s,{popupRedirectResolver:nR,persistence:[f4,Eg,my]}),i=Vx("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=lR(u.toString());XA(t,d,()=>d(t.currentUser)),QA(t,p=>d(p))}}const l=Lx("auth");return l&&RA(t,`http://${l}`),t}function cR(){return document.getElementsByTagName("head")?.[0]??document}xA({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=Ti("internal-error");u.customData=l,t(u)},i.type="text/javascript",i.charset="UTF-8",cR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iR("Browser");var L2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ya,S_;(function(){var s;function e(C,j){function R(){}R.prototype=j.prototype,C.F=j.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(V,O,D){for(var A=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)A[Le-2]=arguments[Le];return j.prototype[O].apply(V,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(C,j,R){R||(R=0);const V=Array(16);if(typeof j=="string")for(var O=0;O<16;++O)V[O]=j.charCodeAt(R++)|j.charCodeAt(R++)<<8|j.charCodeAt(R++)<<16|j.charCodeAt(R++)<<24;else for(O=0;O<16;++O)V[O]=j[R++]|j[R++]<<8|j[R++]<<16|j[R++]<<24;j=C.g[0],R=C.g[1],O=C.g[2];let D=C.g[3],A;A=j+(D^R&(O^D))+V[0]+3614090360&4294967295,j=R+(A<<7&4294967295|A>>>25),A=D+(O^j&(R^O))+V[1]+3905402710&4294967295,D=j+(A<<12&4294967295|A>>>20),A=O+(R^D&(j^R))+V[2]+606105819&4294967295,O=D+(A<<17&4294967295|A>>>15),A=R+(j^O&(D^j))+V[3]+3250441966&4294967295,R=O+(A<<22&4294967295|A>>>10),A=j+(D^R&(O^D))+V[4]+4118548399&4294967295,j=R+(A<<7&4294967295|A>>>25),A=D+(O^j&(R^O))+V[5]+1200080426&4294967295,D=j+(A<<12&4294967295|A>>>20),A=O+(R^D&(j^R))+V[6]+2821735955&4294967295,O=D+(A<<17&4294967295|A>>>15),A=R+(j^O&(D^j))+V[7]+4249261313&4294967295,R=O+(A<<22&4294967295|A>>>10),A=j+(D^R&(O^D))+V[8]+1770035416&4294967295,j=R+(A<<7&4294967295|A>>>25),A=D+(O^j&(R^O))+V[9]+2336552879&4294967295,D=j+(A<<12&4294967295|A>>>20),A=O+(R^D&(j^R))+V[10]+4294925233&4294967295,O=D+(A<<17&4294967295|A>>>15),A=R+(j^O&(D^j))+V[11]+2304563134&4294967295,R=O+(A<<22&4294967295|A>>>10),A=j+(D^R&(O^D))+V[12]+1804603682&4294967295,j=R+(A<<7&4294967295|A>>>25),A=D+(O^j&(R^O))+V[13]+4254626195&4294967295,D=j+(A<<12&4294967295|A>>>20),A=O+(R^D&(j^R))+V[14]+2792965006&4294967295,O=D+(A<<17&4294967295|A>>>15),A=R+(j^O&(D^j))+V[15]+1236535329&4294967295,R=O+(A<<22&4294967295|A>>>10),A=j+(O^D&(R^O))+V[1]+4129170786&4294967295,j=R+(A<<5&4294967295|A>>>27),A=D+(R^O&(j^R))+V[6]+3225465664&4294967295,D=j+(A<<9&4294967295|A>>>23),A=O+(j^R&(D^j))+V[11]+643717713&4294967295,O=D+(A<<14&4294967295|A>>>18),A=R+(D^j&(O^D))+V[0]+3921069994&4294967295,R=O+(A<<20&4294967295|A>>>12),A=j+(O^D&(R^O))+V[5]+3593408605&4294967295,j=R+(A<<5&4294967295|A>>>27),A=D+(R^O&(j^R))+V[10]+38016083&4294967295,D=j+(A<<9&4294967295|A>>>23),A=O+(j^R&(D^j))+V[15]+3634488961&4294967295,O=D+(A<<14&4294967295|A>>>18),A=R+(D^j&(O^D))+V[4]+3889429448&4294967295,R=O+(A<<20&4294967295|A>>>12),A=j+(O^D&(R^O))+V[9]+568446438&4294967295,j=R+(A<<5&4294967295|A>>>27),A=D+(R^O&(j^R))+V[14]+3275163606&4294967295,D=j+(A<<9&4294967295|A>>>23),A=O+(j^R&(D^j))+V[3]+4107603335&4294967295,O=D+(A<<14&4294967295|A>>>18),A=R+(D^j&(O^D))+V[8]+1163531501&4294967295,R=O+(A<<20&4294967295|A>>>12),A=j+(O^D&(R^O))+V[13]+2850285829&4294967295,j=R+(A<<5&4294967295|A>>>27),A=D+(R^O&(j^R))+V[2]+4243563512&4294967295,D=j+(A<<9&4294967295|A>>>23),A=O+(j^R&(D^j))+V[7]+1735328473&4294967295,O=D+(A<<14&4294967295|A>>>18),A=R+(D^j&(O^D))+V[12]+2368359562&4294967295,R=O+(A<<20&4294967295|A>>>12),A=j+(R^O^D)+V[5]+4294588738&4294967295,j=R+(A<<4&4294967295|A>>>28),A=D+(j^R^O)+V[8]+2272392833&4294967295,D=j+(A<<11&4294967295|A>>>21),A=O+(D^j^R)+V[11]+1839030562&4294967295,O=D+(A<<16&4294967295|A>>>16),A=R+(O^D^j)+V[14]+4259657740&4294967295,R=O+(A<<23&4294967295|A>>>9),A=j+(R^O^D)+V[1]+2763975236&4294967295,j=R+(A<<4&4294967295|A>>>28),A=D+(j^R^O)+V[4]+1272893353&4294967295,D=j+(A<<11&4294967295|A>>>21),A=O+(D^j^R)+V[7]+4139469664&4294967295,O=D+(A<<16&4294967295|A>>>16),A=R+(O^D^j)+V[10]+3200236656&4294967295,R=O+(A<<23&4294967295|A>>>9),A=j+(R^O^D)+V[13]+681279174&4294967295,j=R+(A<<4&4294967295|A>>>28),A=D+(j^R^O)+V[0]+3936430074&4294967295,D=j+(A<<11&4294967295|A>>>21),A=O+(D^j^R)+V[3]+3572445317&4294967295,O=D+(A<<16&4294967295|A>>>16),A=R+(O^D^j)+V[6]+76029189&4294967295,R=O+(A<<23&4294967295|A>>>9),A=j+(R^O^D)+V[9]+3654602809&4294967295,j=R+(A<<4&4294967295|A>>>28),A=D+(j^R^O)+V[12]+3873151461&4294967295,D=j+(A<<11&4294967295|A>>>21),A=O+(D^j^R)+V[15]+530742520&4294967295,O=D+(A<<16&4294967295|A>>>16),A=R+(O^D^j)+V[2]+3299628645&4294967295,R=O+(A<<23&4294967295|A>>>9),A=j+(O^(R|~D))+V[0]+4096336452&4294967295,j=R+(A<<6&4294967295|A>>>26),A=D+(R^(j|~O))+V[7]+1126891415&4294967295,D=j+(A<<10&4294967295|A>>>22),A=O+(j^(D|~R))+V[14]+2878612391&4294967295,O=D+(A<<15&4294967295|A>>>17),A=R+(D^(O|~j))+V[5]+4237533241&4294967295,R=O+(A<<21&4294967295|A>>>11),A=j+(O^(R|~D))+V[12]+1700485571&4294967295,j=R+(A<<6&4294967295|A>>>26),A=D+(R^(j|~O))+V[3]+2399980690&4294967295,D=j+(A<<10&4294967295|A>>>22),A=O+(j^(D|~R))+V[10]+4293915773&4294967295,O=D+(A<<15&4294967295|A>>>17),A=R+(D^(O|~j))+V[1]+2240044497&4294967295,R=O+(A<<21&4294967295|A>>>11),A=j+(O^(R|~D))+V[8]+1873313359&4294967295,j=R+(A<<6&4294967295|A>>>26),A=D+(R^(j|~O))+V[15]+4264355552&4294967295,D=j+(A<<10&4294967295|A>>>22),A=O+(j^(D|~R))+V[6]+2734768916&4294967295,O=D+(A<<15&4294967295|A>>>17),A=R+(D^(O|~j))+V[13]+1309151649&4294967295,R=O+(A<<21&4294967295|A>>>11),A=j+(O^(R|~D))+V[4]+4149444226&4294967295,j=R+(A<<6&4294967295|A>>>26),A=D+(R^(j|~O))+V[11]+3174756917&4294967295,D=j+(A<<10&4294967295|A>>>22),A=O+(j^(D|~R))+V[2]+718787259&4294967295,O=D+(A<<15&4294967295|A>>>17),A=R+(D^(O|~j))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+j&4294967295,C.g[1]=C.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+D&4294967295}i.prototype.v=function(C,j){j===void 0&&(j=C.length);const R=j-this.blockSize,V=this.C;let O=this.h,D=0;for(;D<j;){if(O==0)for(;D<=R;)l(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<j;)if(V[O++]=C.charCodeAt(D++),O==this.blockSize){l(this,V),O=0;break}}else for(;D<j;)if(V[O++]=C[D++],O==this.blockSize){l(this,V),O=0;break}}this.h=O,this.o+=j},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var j=1;j<C.length-8;++j)C[j]=0;j=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=j&255,j/=256;for(this.v(C),C=Array(16),j=0,R=0;R<4;++R)for(let V=0;V<32;V+=8)C[j++]=this.g[R]>>>V&255;return C};function u(C,j){var R=p;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=j(C)}function d(C,j){this.h=j;const R=[];let V=!0;for(let O=C.length-1;O>=0;O--){const D=C[O]|0;V&&D==j||(R[O]=D,V=!1)}this.g=R}var p={};function g(C){return-128<=C&&C<128?u(C,function(j){return new d([j|0],j<0?-1:0)}):new d([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return B(y(-C));const j=[];let R=1;for(let V=0;C>=R;V++)j[V]=C/R|0,R*=4294967296;return new d(j,0)}function b(C,j){if(C.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(C.charAt(0)=="-")return B(b(C.substring(1),j));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(j,8));let V=E;for(let D=0;D<C.length;D+=8){var O=Math.min(8,C.length-D);const A=parseInt(C.substring(D,D+O),j);O<8?(O=y(Math.pow(j,O)),V=V.j(O).add(y(A))):(V=V.j(R),V=V.add(y(A)))}return V}var E=g(0),T=g(1),L=g(16777216);s=d.prototype,s.m=function(){if(q(this))return-B(this).m();let C=0,j=1;for(let R=0;R<this.g.length;R++){const V=this.i(R);C+=(V>=0?V:4294967296+V)*j,j*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if($(this))return"0";if(q(this))return"-"+B(this).toString(C);const j=y(Math.pow(C,6));var R=this;let V="";for(;;){const O=he(R,j).g;R=K(R,O.j(j));let D=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=O,$(R))return D+V;for(;D.length<6;)D="0"+D;V=D+V}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function $(C){if(C.h!=0)return!1;for(let j=0;j<C.g.length;j++)if(C.g[j]!=0)return!1;return!0}function q(C){return C.h==-1}s.l=function(C){return C=K(this,C),q(C)?-1:$(C)?0:1};function B(C){const j=C.g.length,R=[];for(let V=0;V<j;V++)R[V]=~C.g[V];return new d(R,~C.h).add(T)}s.abs=function(){return q(this)?B(this):this},s.add=function(C){const j=Math.max(this.g.length,C.g.length),R=[];let V=0;for(let O=0;O<=j;O++){let D=V+(this.i(O)&65535)+(C.i(O)&65535),A=(D>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);V=A>>>16,D&=65535,A&=65535,R[O]=A<<16|D}return new d(R,R[R.length-1]&-2147483648?-1:0)};function K(C,j){return C.add(B(j))}s.j=function(C){if($(this)||$(C))return E;if(q(this))return q(C)?B(this).j(B(C)):B(B(this).j(C));if(q(C))return B(this.j(B(C)));if(this.l(L)<0&&C.l(L)<0)return y(this.m()*C.m());const j=this.g.length+C.g.length,R=[];for(var V=0;V<2*j;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(let O=0;O<C.g.length;O++){const D=this.i(V)>>>16,A=this.i(V)&65535,Le=C.i(O)>>>16,Xe=C.i(O)&65535;R[2*V+2*O]+=A*Xe,G(R,2*V+2*O),R[2*V+2*O+1]+=D*Xe,G(R,2*V+2*O+1),R[2*V+2*O+1]+=A*Le,G(R,2*V+2*O+1),R[2*V+2*O+2]+=D*Le,G(R,2*V+2*O+2)}for(C=0;C<j;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=j;C<2*j;C++)R[C]=0;return new d(R,0)};function G(C,j){for(;(C[j]&65535)!=C[j];)C[j+1]+=C[j]>>>16,C[j]&=65535,j++}function Q(C,j){this.g=C,this.h=j}function he(C,j){if($(j))throw Error("division by zero");if($(C))return new Q(E,E);if(q(C))return j=he(B(C),j),new Q(B(j.g),B(j.h));if(q(j))return j=he(C,B(j)),new Q(B(j.g),j.h);if(C.g.length>30){if(q(C)||q(j))throw Error("slowDivide_ only works with positive integers.");for(var R=T,V=j;V.l(C)<=0;)R=Ee(R),V=Ee(V);var O=ge(R,1),D=ge(V,1);for(V=ge(V,2),R=ge(R,2);!$(V);){var A=D.add(V);A.l(C)<=0&&(O=O.add(R),D=A),V=ge(V,1),R=ge(R,1)}return j=K(C,O.j(j)),new Q(O,j)}for(O=E;C.l(j)>=0;){for(R=Math.max(1,Math.floor(C.m()/j.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),D=y(R),A=D.j(j);q(A)||A.l(C)>0;)R-=V,D=y(R),A=D.j(j);$(D)&&(D=T),O=O.add(D),C=K(C,A)}return new Q(O,C)}s.B=function(C){return he(this,C).h},s.and=function(C){const j=Math.max(this.g.length,C.g.length),R=[];for(let V=0;V<j;V++)R[V]=this.i(V)&C.i(V);return new d(R,this.h&C.h)},s.or=function(C){const j=Math.max(this.g.length,C.g.length),R=[];for(let V=0;V<j;V++)R[V]=this.i(V)|C.i(V);return new d(R,this.h|C.h)},s.xor=function(C){const j=Math.max(this.g.length,C.g.length),R=[];for(let V=0;V<j;V++)R[V]=this.i(V)^C.i(V);return new d(R,this.h^C.h)};function Ee(C){const j=C.g.length+1,R=[];for(let V=0;V<j;V++)R[V]=C.i(V)<<1|C.i(V-1)>>>31;return new d(R,C.h)}function ge(C,j){const R=j>>5;j%=32;const V=C.g.length-R,O=[];for(let D=0;D<V;D++)O[D]=j>0?C.i(D+R)>>>j|C.i(D+R+1)<<32-j:C.i(D+R);return new d(O,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,S_=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Ya=d}).apply(typeof L2<"u"?L2:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var C_,tu,N_,Th,jg,A_,R_,I_;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var v=0;v<h.length;++v){var _=h[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function l(h,v){if(v)e:{var _=i;h=h.split(".");for(var N=0;N<h.length-1;N++){var Z=h[N];if(!(Z in _))break e;_=_[Z]}h=h[h.length-1],N=_[h],v=v(N),v!=N&&v!=null&&e(_,h,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(v){var _=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&_.push([N,v[N]]);return _}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,_){return h.call.apply(h.bind,arguments)}function y(h,v,_){return y=g,y.apply(null,arguments)}function b(h,v){var _=Array.prototype.slice.call(arguments,1);return function(){var N=_.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function E(h,v){function _(){}_.prototype=v.prototype,h.Z=v.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(N,Z,ce){for(var Pe=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)Pe[jt-2]=arguments[jt];return v.prototype[Z].apply(N,Pe)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function L(h){const v=h.length;if(v>0){const _=Array(v);for(let N=0;N<v;N++)_[N]=h[N];return _}return[]}function $(h,v){for(let N=1;N<arguments.length;N++){const Z=arguments[N];var _=typeof Z;if(_=_!="object"?_:Z?Array.isArray(Z)?"array":_:"null",_=="array"||_=="object"&&typeof Z.length=="number"){_=h.length||0;const ce=Z.length||0;h.length=_+ce;for(let Pe=0;Pe<ce;Pe++)h[_+Pe]=Z[Pe]}else h.push(Z)}}class q{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function B(h){d.setTimeout(()=>{throw h},0)}function K(){var h=C;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class G{constructor(){this.h=this.g=null}add(v,_){const N=Q.get();N.set(v,_),this.h?this.h.next=N:this.g=N,this.h=N}}var Q=new q(()=>new he,h=>h.reset());class he{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ee,ge=!1,C=new G,j=()=>{const h=Promise.resolve(void 0);Ee=()=>{h.then(R)}};function R(){for(var h;h=K();){try{h.h.call(h.g)}catch(_){B(_)}var v=Q;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}ge=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,v),d.removeEventListener("test",_,v)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function Le(h,v){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}E(Le,O),Le.prototype.init=function(h,v){const _=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(_=="mouseover"?v=h.fromElement:_=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),X=0;function je(h,v,_,N,Z){this.listener=h,this.proxy=null,this.src=v,this.type=_,this.capture=!!N,this.ha=Z,this.key=++X,this.da=this.fa=!1}function De(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ce(h,v,_){for(const N in h)v.call(_,h[N],N,h)}function J(h,v){for(const _ in h)v.call(void 0,h[_],_,h)}function P(h){const v={};for(const _ in h)v[_]=h[_];return v}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function we(h,v){let _,N;for(let Z=1;Z<arguments.length;Z++){N=arguments[Z];for(_ in N)h[_]=N[_];for(let ce=0;ce<re.length;ce++)_=re[ce],Object.prototype.hasOwnProperty.call(N,_)&&(h[_]=N[_])}}function _e(h){this.src=h,this.g={},this.h=0}_e.prototype.add=function(h,v,_,N,Z){const ce=h.toString();h=this.g[ce],h||(h=this.g[ce]=[],this.h++);const Pe=Se(h,v,N,Z);return Pe>-1?(v=h[Pe],_||(v.fa=!1)):(v=new je(v,this.src,ce,!!N,Z),v.fa=_,h.push(v)),v};function xe(h,v){const _=v.type;if(_ in h.g){var N=h.g[_],Z=Array.prototype.indexOf.call(N,v,void 0),ce;(ce=Z>=0)&&Array.prototype.splice.call(N,Z,1),ce&&(De(v),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Se(h,v,_,N){for(let Z=0;Z<h.length;++Z){const ce=h[Z];if(!ce.da&&ce.listener==v&&ce.capture==!!_&&ce.ha==N)return Z}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Ze={};function Oe(h,v,_,N,Z){if(Array.isArray(v)){for(let ce=0;ce<v.length;ce++)Oe(h,v[ce],_,N,Z);return null}return _=fe(_),h&&h[Xe]?h.J(v,_,p(N)?!!N.capture:!1,Z):Mt(h,v,_,!1,N,Z)}function Mt(h,v,_,N,Z,ce){if(!v)throw Error("Invalid event type");const Pe=p(Z)?!!Z.capture:!!Z;let jt=ct(h);if(jt||(h[Fe]=jt=new _e(h)),_=jt.add(v,_,N,Pe,ce),_.proxy)return _;if(N=on(),_.proxy=N,N.src=h,N.listener=_,h.addEventListener)D||(Z=Pe),Z===void 0&&(Z=!1),h.addEventListener(v.toString(),N,Z);else if(h.attachEvent)h.attachEvent(rt(v.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return _}function on(){function h(_){return v.call(h.src,h.listener,_)}const v=st;return h}function zn(h,v,_,N,Z){if(Array.isArray(v))for(var ce=0;ce<v.length;ce++)zn(h,v[ce],_,N,Z);else N=p(N)?!!N.capture:!!N,_=fe(_),h&&h[Xe]?(h=h.i,ce=String(v).toString(),ce in h.g&&(v=h.g[ce],_=Se(v,_,N,Z),_>-1&&(De(v[_]),Array.prototype.splice.call(v,_,1),v.length==0&&(delete h.g[ce],h.h--)))):h&&(h=ct(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Se(v,_,N,Z)),(_=h>-1?v[h]:null)&&Yt(_))}function Yt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Xe])xe(v.i,h);else{var _=h.type,N=h.proxy;v.removeEventListener?v.removeEventListener(_,N,h.capture):v.detachEvent?v.detachEvent(rt(_),N):v.addListener&&v.removeListener&&v.removeListener(N),(_=ct(v))?(xe(_,h),_.h==0&&(_.src=null,v[Fe]=null)):De(h)}}}function rt(h){return h in Ze?Ze[h]:Ze[h]="on"+h}function st(h,v){if(h.da)h=!0;else{v=new Le(v,this);const _=h.listener,N=h.ha||h.src;h.fa&&Yt(h),h=_.call(N,v)}return h}function ct(h){return h=h[Fe],h instanceof _e?h:null}var _n="__closure_events_fn_"+(Math.random()*1e9>>>0);function fe(h){return typeof h=="function"?h:(h[_n]||(h[_n]=function(v){return h.handleEvent(v)}),h[_n])}function Ct(){V.call(this),this.i=new _e(this),this.M=this,this.G=null}E(Ct,V),Ct.prototype[Xe]=!0,Ct.prototype.removeEventListener=function(h,v,_,N){zn(this,h,v,_,N)};function ht(h,v){var _,N=h.G;if(N)for(_=[];N;N=N.G)_.push(N);if(h=h.M,N=v.type||v,typeof v=="string")v=new O(v,h);else if(v instanceof O)v.target=v.target||h;else{var Z=v;v=new O(N,h),we(v,Z)}Z=!0;let ce,Pe;if(_)for(Pe=_.length-1;Pe>=0;Pe--)ce=v.g=_[Pe],Z=Rt(ce,N,!0,v)&&Z;if(ce=v.g=h,Z=Rt(ce,N,!0,v)&&Z,Z=Rt(ce,N,!1,v)&&Z,_)for(Pe=0;Pe<_.length;Pe++)ce=v.g=_[Pe],Z=Rt(ce,N,!1,v)&&Z}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const _=h.g[v];for(let N=0;N<_.length;N++)De(_[N]);delete h.g[v],h.h--}}this.G=null},Ct.prototype.J=function(h,v,_,N){return this.i.add(String(h),v,!1,_,N)},Ct.prototype.K=function(h,v,_,N){return this.i.add(String(h),v,!0,_,N)};function Rt(h,v,_,N){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let Z=!0;for(let ce=0;ce<v.length;++ce){const Pe=v[ce];if(Pe&&!Pe.da&&Pe.capture==_){const jt=Pe.listener,rs=Pe.ha||Pe.src;Pe.fa&&xe(h.i,Pe),Z=jt.call(rs,N)!==!1&&Z}}return Z&&!N.defaultPrevented}function Je(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Tt(h){h.g=Je(()=>{h.g=null,h.i&&(h.i=!1,Tt(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class pt extends V{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Tt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(h){V.call(this),this.h=h,this.g={}}E(Qt,V);var zs=[];function es(h){Ce(h.g,function(v,_){this.g.hasOwnProperty(_)&&Yt(v)},h),h.g={}}Qt.prototype.N=function(){Qt.Z.N.call(this),es(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=d.JSON.stringify,se=d.JSON.parse,Ae=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function gt(){}function yt(){}var ut={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qe(){O.call(this,"d")}E(qe,O);function nt(){O.call(this,"c")}E(nt,O);var He={},sn=null;function Xt(){return sn=sn||new Ct}He.Ia="serverreachability";function Nn(h){O.call(this,He.Ia,h)}E(Nn,O);function Dn(h){const v=Xt();ht(v,new Nn(v))}He.STAT_EVENT="statevent";function Kn(h,v){O.call(this,He.STAT_EVENT,h),this.stat=v}E(Kn,O);function Jt(h){const v=Xt();ht(v,new Kn(v,h))}He.Ja="timingevent";function Fn(h,v){O.call(this,He.Ja,h),this.size=v}E(Fn,O);function An(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function pn(){this.g=!0}pn.prototype.ua=function(){this.g=!1};function ks(h,v,_,N,Z,ce){h.info(function(){if(h.g)if(ce){var Pe="",jt=ce.split("&");for(let rn=0;rn<jt.length;rn++){var rs=jt[rn].split("=");if(rs.length>1){const Vn=rs[0];rs=rs[1];const Lr=Vn.split("_");Pe=Lr.length>=2&&Lr[1]=="type"?Pe+(Vn+"="+rs+"&"):Pe+(Vn+"=redacted&")}}}else Pe=null;else Pe=ce;return"XMLHTTP REQ ("+N+") [attempt "+Z+"]: "+v+`
`+_+`
`+Pe})}function ae(h,v,_,N,Z,ce,Pe){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+Z+"]: "+v+`
`+_+`
`+ce+" "+Pe})}function Me(h,v,_,N){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+vt(h,_)+(N?" "+N:"")})}function Ke(h,v){h.info(function(){return"TIMEOUT: "+v})}pn.prototype.info=function(){};function vt(h,v){if(!h.g)return v;if(!v)return null;try{const ce=JSON.parse(v);if(ce){for(h=0;h<ce.length;h++)if(Array.isArray(ce[h])){var _=ce[h];if(!(_.length<2)){var N=_[1];if(Array.isArray(N)&&!(N.length<1)){var Z=N[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let Pe=1;Pe<N.length;Pe++)N[Pe]=""}}}}return Wt(ce)}catch{return v}}var it={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Gt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jn;function gn(){}E(gn,gt),gn.prototype.g=function(){return new XMLHttpRequest},jn=new gn;function Sn(h){return encodeURIComponent(String(h))}function Ns(h){var v=1;h=h.split(":");const _=[];for(;v>0&&h.length;)_.push(h.shift()),v--;return h.length&&_.push(h.join(":")),_}function qn(h,v,_,N){this.j=h,this.i=v,this.l=_,this.S=N||1,this.V=new Qt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Es}function Es(){this.i=null,this.g="",this.h=!1}var Zt={},ln={};function ls(h,v,_){h.M=1,h.A=$n(Ue(v)),h.u=_,h.R=!0,Yr(h,null)}function Yr(h,v){h.F=Date.now(),Hn(h),h.B=Ue(h.A);var _=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),Rs(_.i,"t",N),h.C=0,_=h.j.L,h.h=new Es,h.g=Xu(h.j,_?v:null,!h.u),h.P>0&&(h.O=new pt(y(h.Y,h,h.g),h.P)),v=h.V,_=h.g,N=h.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(zs[0]=Z.toString()),Z=zs);for(let ce=0;ce<Z.length;ce++){const Pe=Oe(_,Z[ce],N||v.handleEvent,!1,v.h||v);if(!Pe)break;v.g[Pe.key]=Pe}v=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Dn(),ks(h.i,h.v,h.B,h.l,h.S,h.u)}qn.prototype.ba=function(h){h=h.target;const v=this.O;v&&It(h)==3?v.j():this.Y(h)},qn.prototype.Y=function(h){try{if(h==this.g)e:{const jt=It(this.g),rs=this.g.ya(),rn=this.g.ca();if(!(jt<3)&&(jt!=3||this.g&&(this.h.h||this.g.la()||cn(this.g)))){this.K||jt!=4||rs==7||(rs==8||rn<=0?Dn(3):Dn(2)),vs(this);var v=this.g.ca();this.X=v;var _=fa(this);if(this.o=v==200,ae(this.i,this.v,this.B,this.l,this.S,jt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,Z=this.g;if((N=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(N)){var ce=N;break t}}ce=null}if(h=ce)Me(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ts(this,h);else{this.o=!1,this.m=3,Jt(12),Rn(this),Ln(this);break e}}if(this.R){h=!0;let Vn;for(;!this.K&&this.C<_.length;)if(Vn=pr(this,_),Vn==ln){jt==4&&(this.m=4,Jt(14),h=!1),Me(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Zt){this.m=4,Jt(15),Me(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Me(this.i,this.l,Vn,null),ts(this,Vn);if(Qr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||_.length!=0||this.h.h||(this.m=1,Jt(16),h=!1),this.o=this.o&&h,!h)Me(this.i,this.l,_,"[Invalid Chunked Response]"),Rn(this),Ln(this);else if(_.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),oc(Pe),Pe.P=!0,Jt(11))}}else Me(this.i,this.l,_,null),ts(this,_);jt==4&&Rn(this),this.o&&!this.K&&(jt==4?Gu(this.j,this):(this.o=!1,Hn(this)))}else ws(this.g),v==400&&_.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),Rn(this),Ln(this)}}}catch{}};function fa(h){if(!Qr(h))return h.g.la();const v=cn(h.g);if(v==="")return"";let _="";const N=v.length,Z=It(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Rn(h),Ln(h),"";h.h.i=new d.TextDecoder}for(let ce=0;ce<N;ce++)h.h.h=!0,_+=h.h.i.decode(v[ce],{stream:!(Z&&ce==N-1)});return v.length=0,h.h.g+=_,h.C=0,h.h.g}function Qr(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function pr(h,v){var _=h.C,N=v.indexOf(`
`,_);return N==-1?ln:(_=Number(v.substring(_,N)),isNaN(_)?Zt:(N+=1,N+_>v.length?ln:(v=v.slice(N,N+_),h.C=N+_,v)))}qn.prototype.cancel=function(){this.K=!0,Rn(this)};function Hn(h){h.T=Date.now()+h.H,Fs(h,h.H)}function Fs(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=An(y(h.aa,h),v)}function vs(h){h.D&&(d.clearTimeout(h.D),h.D=null)}qn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ke(this.i,this.B),this.M!=2&&(Dn(),Jt(17)),Rn(this),this.m=2,Ln(this)):Fs(this,this.T-h)};function Ln(h){h.j.I==0||h.K||Gu(h.j,h)}function Rn(h){vs(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,es(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function ts(h,v){try{var _=h.j;if(_.I!=0&&(_.g==h||kn(_.h,h))){if(!h.L&&kn(_.h,h)&&_.I==3){try{var N=_.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var Z=N;if(Z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Zo(_),cs(_);else break e;lo(_),Jt(18)}}else _.xa=Z[1],0<_.xa-_.K&&Z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=An(y(_.Va,_),6e3));bs(_.h)<=1&&_.ta&&(_.ta=void 0)}else gi(_,11)}else if((h.L||_.g==h)&&Zo(_),!A(v))for(Z=_.Ba.g.parse(v),v=0;v<Z.length;v++){let rn=Z[v];const Vn=rn[0];if(!(Vn<=_.K))if(_.K=Vn,rn=rn[1],_.I==2)if(rn[0]=="c"){_.M=rn[1],_.ba=rn[2];const Lr=rn[3];Lr!=null&&(_.ka=Lr,_.j.info("VER="+_.ka));const yi=rn[4];yi!=null&&(_.za=yi,_.j.info("SVER="+_.za));const ei=rn[5];ei!=null&&typeof ei=="number"&&ei>0&&(N=1.5*ei,_.O=N,_.j.info("backChannelRequestTimeoutMs_="+N)),N=_;const ti=h.g;if(ti){const co=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(co){var ce=N.h;ce.g||co.indexOf("spdy")==-1&&co.indexOf("quic")==-1&&co.indexOf("h2")==-1||(ce.j=ce.l,ce.g=new Set,ce.h&&(Qs(ce,ce.h),ce.h=null))}if(N.G){const el=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;el&&(N.wa=el,Ye(N.J,N.G,el))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),N=_;var Pe=h;if(N.na=Qu(N,N.L?N.ba:null,N.W),Pe.L){Xr(N.h,Pe);var jt=Pe,rs=N.O;rs&&(jt.H=rs),jt.D&&(vs(jt),Hn(jt)),N.g=Pe}else $u(N);_.i.length>0&&Dr(_)}else rn[0]!="stop"&&rn[0]!="close"||gi(_,7);else _.I==3&&(rn[0]=="stop"||rn[0]=="close"?rn[0]=="stop"?gi(_,7):Wn(_):rn[0]!="noop"&&_.l&&_.l.qa(rn),_.A=0)}}Dn(4)}catch{}}var zt=class{constructor(h,v){this.g=h,this.map=v}};function gr(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function bs(h){return h.h?1:h.g?h.g.size:0}function kn(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Qs(h,v){h.g?h.g.add(v):h.h=v}function Xr(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}gr.prototype.cancel=function(){if(this.i=I(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function I(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const _ of h.g.values())v=v.concat(_.G);return v}return L(h.i)}var F=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oe(h,v){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const N=h[_].indexOf("=");let Z,ce=null;N>=0?(Z=h[_].substring(0,N),ce=h[_].substring(N+1)):Z=h[_],v(Z,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function ue(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof ue?(this.l=h.l,Be(this,h.j),this.o=h.o,this.g=h.g,$e(this,h.u),this.h=h.h,Ft(this,fi(h.i)),this.m=h.m):h&&(v=String(h).match(F))?(this.l=!1,Be(this,v[1]||"",!0),this.o=ns(v[2]||""),this.g=ns(v[3]||"",!0),$e(this,v[4]),this.h=ns(v[5]||"",!0),Ft(this,v[6]||"",!0),this.m=ns(v[7]||"")):(this.l=!1,this.i=new yr(null,this.l))}ue.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(ar(v,Xs,!0),":");var _=this.g;return(_||v=="file")&&(h.push("//"),(v=this.o)&&h.push(ar(v,Xs,!0),"@"),h.push(Sn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(ar(_,_.charAt(0)=="/"?As:Di,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",ar(_,ma)),h.join("")},ue.prototype.resolve=function(h){const v=Ue(this);let _=!!h.j;_?Be(v,h.j):_=!!h.o,_?v.o=h.o:_=!!h.g,_?v.g=h.g:_=h.u!=null;var N=h.h;if(_)$e(v,h.u);else if(_=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var Z=v.h.lastIndexOf("/");Z!=-1&&(N=v.h.slice(0,Z+1)+N)}if(Z=N,Z==".."||Z==".")N="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){N=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const ce=[];for(let Pe=0;Pe<Z.length;){const jt=Z[Pe++];jt=="."?N&&Pe==Z.length&&ce.push(""):jt==".."?((ce.length>1||ce.length==1&&ce[0]!="")&&ce.pop(),N&&Pe==Z.length&&ce.push("")):(ce.push(jt),N=!0)}N=ce.join("/")}else N=Z}return _?v.h=N:_=h.i.toString()!=="",_?Ft(v,fi(h.i)):_=!!h.m,_&&(v.m=h.m),v};function Ue(h){return new ue(h)}function Be(h,v,_){h.j=_?ns(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function $e(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Ft(h,v,_){v instanceof yr?(h.i=v,mi(h.i,h.l)):(_||(v=ar(v,Js)),h.i=new yr(v,h.l))}function Ye(h,v,_){h.i.set(v,_)}function $n(h){return Ye(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function ns(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ar(h,v,_){return typeof h=="string"?(h=encodeURI(h).replace(v,On),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function On(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Xs=/[#\/\?@]/g,Di=/[#\?:]/g,As=/[#\?]/g,Js=/[#\?@]/g,ma=/#/g;function yr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Ts(h){h.g||(h.g=new Map,h.h=0,h.i&&oe(h.i,function(v,_){h.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}s=yr.prototype,s.add=function(h,v){Ts(this),this.i=null,h=Mr(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(v),this.h+=1,this};function pa(h,v){Ts(h),v=Mr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Jr(h,v){return Ts(h),v=Mr(h,v),h.g.has(v)}s.forEach=function(h,v){Ts(this),this.g.forEach(function(_,N){_.forEach(function(Z){h.call(v,Z,N,this)},this)},this)};function Ir(h,v){Ts(h);let _=[];if(typeof v=="string")Jr(h,v)&&(_=_.concat(h.g.get(Mr(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)_=_.concat(h[v]);return _}s.set=function(h,v){return Ts(this),this.i=null,h=Mr(this,h),Jr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=Ir(this,h),h.length>0?String(h[0]):v):v};function Rs(h,v,_){pa(h,v),_.length>0&&(h.i=null,h.g.set(Mr(h,v),L(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var _=v[N];const Z=Sn(_);_=Ir(this,_);for(let ce=0;ce<_.length;ce++){let Pe=Z;_[ce]!==""&&(Pe+="="+Sn(_[ce])),h.push(Pe)}}return this.i=h.join("&")};function fi(h){const v=new yr;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function Mr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function mi(h,v){v&&!h.j&&(Ts(h),h.i=null,h.g.forEach(function(_,N){const Z=N.toLowerCase();N!=Z&&(pa(this,N),Rs(this,Z,_))},h)),h.j=v}function ss(h,v){const _=new pn;if(d.Image){const N=new Image;N.onload=b(le,_,"TestLoadImage: loaded",!0,v,N),N.onerror=b(le,_,"TestLoadImage: error",!1,v,N),N.onabort=b(le,_,"TestLoadImage: abort",!1,v,N),N.ontimeout=b(le,_,"TestLoadImage: timeout",!1,v,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else v(!1)}function z(h,v){const _=new pn,N=new AbortController,Z=setTimeout(()=>{N.abort(),le(_,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:N.signal}).then(ce=>{clearTimeout(Z),ce.ok?le(_,"TestPingServer: ok",!0,v):le(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Z),le(_,"TestPingServer: error",!1,v)})}function le(h,v,_,N,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),N(_)}catch{}}function k(){this.g=new Ae}function M(h){this.i=h.Sb||null,this.h=h.ab||!1}E(M,gt),M.prototype.g=function(){return new W(this.i,this.h)};function W(h,v){Ct.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(W,Ct),s=W.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Ie(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,me(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ie(this)),this.g&&(this.readyState=3,Ie(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;te(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function te(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?me(this):Ie(this),this.readyState==3&&te(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,me(this))},s.Na=function(h){this.g&&(this.response=h,me(this))},s.ga=function(){this.g&&me(this)};function me(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ie(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=v.next();return h.join(`\r
`)};function Ie(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(W.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ne(h){let v="";return Ce(h,function(_,N){v+=N,v+=":",v+=_,v+=`\r
`}),v}function Ve(h,v,_){e:{for(N in _){var N=!1;break e}N=!0}N||(_=Ne(_),typeof h=="string"?_!=null&&Sn(_):Ye(h,v,_))}function Re(h){Ct.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Re,Ct);var at=/^https?$/i,yn=["POST","PUT"];s=Re.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,_,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jn.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ce){et(this,ce);return}if(h=_||"",_=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var Z in N)_.set(Z,N[Z]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ce of N.keys())_.set(ce,N.get(ce));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(_.keys()).find(ce=>ce.toLowerCase()=="content-type"),Z=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(yn,v,void 0)>=0)||N||Z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ce,Pe]of _)this.g.setRequestHeader(ce,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ce){et(this,ce)}};function et(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,en(h),dt(h)}function en(h){h.A||(h.A=!0,ht(h,"complete"),ht(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ht(this,"complete"),ht(this,"abort"),dt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dt(this,!0)),Re.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?En(this):this.Xa())},s.Xa=function(){En(this)};function En(h){if(h.h&&typeof u<"u"){if(h.v&&It(h)==4)setTimeout(h.Ca.bind(h),0);else if(ht(h,"readystatechange"),It(h)==4){h.h=!1;try{const ce=h.ca();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var N;if(N=ce===0){let Pe=String(h.D).match(F)[1]||null;!Pe&&d.self&&d.self.location&&(Pe=d.self.location.protocol.slice(0,-1)),N=!at.test(Pe?Pe.toLowerCase():"")}_=N}if(_)ht(h,"complete"),ht(h,"success");else{h.o=6;try{var Z=It(h)>2?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.ca()+"]",en(h)}}finally{dt(h)}}}}function dt(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,v||ht(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function It(h){return h.g?h.g.readyState:0}s.ca=function(){try{return It(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),se(v)}};function cn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ws(h){const v={};h=(h.g&&It(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(A(h[N]))continue;var _=Ns(h[N]);const Z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ce=v[Z]||[];v[Z]=ce,ce.push(_)}J(v,function(N){return N.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pn(h,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||v}function hn(h){this.za=0,this.i=[],this.j=new pn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pn("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pn("baseRetryDelayMs",5e3,h),this.Za=Pn("retryDelaySeedMs",1e4,h),this.Ta=Pn("forwardChannelMaxRetries",2,h),this.va=Pn("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new gr(h&&h.concurrentRequestLimit),this.Ba=new k,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=hn.prototype,s.ka=8,s.I=1,s.connect=function(h,v,_,N){Jt(0),this.W=h,this.H=v||{},_&&N!==void 0&&(this.H.OSID=_,this.H.OAID=N),this.F=this.X,this.J=Qu(this,null,this.W),Dr(this)};function Wn(h){if(Zr(h),h.I==3){var v=h.V++,_=Ue(h.J);if(Ye(_,"SID",h.M),Ye(_,"RID",v),Ye(_,"TYPE","terminate"),oo(h,_),v=new qn(h,h.j,v),v.M=2,v.A=$n(Ue(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=v.A,_=!0),_||(v.g=Xu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Hn(v)}Yu(h)}function cs(h){h.g&&(oc(h),h.g.cancel(),h.g=null)}function Zr(h){cs(h),h.v&&(d.clearTimeout(h.v),h.v=null),Zo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Dr(h){if(!Rr(h.h)&&!h.m){h.m=!0;var v=h.Ea;Ee||j(),ge||(Ee(),ge=!0),C.add(v,h),h.D=0}}function pi(h,v){return bs(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=An(y(h.Ea,h,v),Ku(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Z=new qn(this,this.j,h);let ce=this.o;if(this.U&&(ce?(ce=P(ce),we(ce,this.U)):ce=this.U),this.u!==null||this.R||(Z.J=ce,ce=null),this.S)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var N=this.i[_];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=Hu(this,Z,v),_=Ue(this.J),Ye(_,"RID",h),Ye(_,"CVER",22),this.G&&Ye(_,"X-HTTP-Session-Id",this.G),oo(this,_),ce&&(this.R?v="headers="+Sn(Ne(ce))+"&"+v:this.u&&Ve(_,this.u,ce)),Qs(this.h,Z),this.Ra&&Ye(_,"TYPE","init"),this.S?(Ye(_,"$req",v),Ye(_,"SID","null"),Z.U=!0,ls(Z,_,null)):ls(Z,_,v),this.I=2}}else this.I==3&&(h?ac(this,h):this.i.length==0||Rr(this.h)||ac(this))};function ac(h,v){var _;v?_=v.l:_=h.V++;const N=Ue(h.J);Ye(N,"SID",h.M),Ye(N,"RID",_),Ye(N,"AID",h.K),oo(h,N),h.u&&h.o&&Ve(N,h.u,h.o),_=new qn(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),v&&(h.i=v.G.concat(h.i)),v=Hu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Qs(h.h,_),ls(_,N,v)}function oo(h,v){h.H&&Ce(h.H,function(_,N){Ye(v,N,_)}),h.l&&Ce({},function(_,N){Ye(v,N,_)})}function Hu(h,v,_){_=Math.min(h.i.length,_);const N=h.l?y(h.l.Ka,h.l,h):null;e:{var Z=h.i;let jt=-1;for(;;){const rs=["count="+_];jt==-1?_>0?(jt=Z[0].g,rs.push("ofs="+jt)):jt=0:rs.push("ofs="+jt);let rn=!0;for(let Vn=0;Vn<_;Vn++){var ce=Z[Vn].g;const Lr=Z[Vn].map;if(ce-=jt,ce<0)jt=Math.max(0,Z[Vn].g-100),rn=!1;else try{ce="req"+ce+"_"||"";try{var Pe=Lr instanceof Map?Lr:Object.entries(Lr);for(const[yi,ei]of Pe){let ti=ei;p(ei)&&(ti=Wt(ei)),rs.push(ce+yi+"="+encodeURIComponent(ti))}}catch(yi){throw rs.push(ce+"type="+encodeURIComponent("_badmap")),yi}}catch{N&&N(Lr)}}if(rn){Pe=rs.join("&");break e}}Pe=void 0}return h=h.i.splice(0,_),v.G=h,Pe}function $u(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;Ee||j(),ge||(Ee(),ge=!0),C.add(v,h),h.A=0}}function lo(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=An(y(h.Da,h),Ku(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Wu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=An(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),cs(this),Wu(this))};function oc(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Wu(h){h.g=new qn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Ue(h.na);Ye(v,"RID","rpc"),Ye(v,"SID",h.M),Ye(v,"AID",h.K),Ye(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ye(v,"TO",h.ia),Ye(v,"TYPE","xmlhttp"),oo(h,v),h.u&&h.o&&Ve(v,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=$n(Ue(v)),_.u=null,_.R=!0,Yr(_,h)}s.Va=function(){this.C!=null&&(this.C=null,cs(this),lo(this),Jt(19))};function Zo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Gu(h,v){var _=null;if(h.g==v){Zo(h),oc(h),h.g=null;var N=2}else if(kn(h.h,v))_=v.G,Xr(h.h,v),N=1;else return;if(h.I!=0){if(v.o)if(N==1){_=v.u?v.u.length:0,v=Date.now()-v.F;var Z=h.D;N=Xt(),ht(N,new Fn(N,_)),Dr(h)}else $u(h);else if(Z=v.m,Z==3||Z==0&&v.X>0||!(N==1&&pi(h,v)||N==2&&lo(h)))switch(_&&_.length>0&&(v=h.h,v.i=v.i.concat(_)),Z){case 1:gi(h,5);break;case 4:gi(h,10);break;case 3:gi(h,6);break;default:gi(h,2)}}}function Ku(h,v){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*v}function gi(h,v){if(h.j.info("Error code "+v),v==2){var _=y(h.bb,h),N=h.Ua;const Z=!N;N=new ue(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Be(N,"https"),$n(N),Z?ss(N.toString(),_):z(N.toString(),_)}else Jt(2);h.I=0,h.l&&h.l.pa(v),Yu(h),Zr(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function Yu(h){if(h.I=0,h.ja=[],h.l){const v=I(h.h);(v.length!=0||h.i.length!=0)&&($(h.ja,v),$(h.ja,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.oa()}}function Qu(h,v,_){var N=_ instanceof ue?Ue(_):new ue(_);if(N.g!="")v&&(N.g=v+"."+N.g),$e(N,N.u);else{var Z=d.location;N=Z.protocol,v=v?v+"."+Z.hostname:Z.hostname,Z=+Z.port;const ce=new ue(null);N&&Be(ce,N),v&&(ce.g=v),Z&&$e(ce,Z),_&&(ce.h=_),N=ce}return _=h.G,v=h.wa,_&&v&&Ye(N,_,v),Ye(N,"VER",h.ka),oo(h,N),N}function Xu(h,v,_){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new Re(new M({ab:_})):new Re(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ju(){}s=Ju.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ga(){}ga.prototype.g=function(h,v){return new Zs(h,v)};function Zs(h,v){Ct.call(this),this.g=new hn(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!A(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!A(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Li(this)}E(Zs,Ct),Zs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zs.prototype.close=function(){Wn(this.g)},Zs.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Wt(h),h=_);v.i.push(new zt(v.Ya++,h)),v.I==3&&Dr(v)},Zs.prototype.N=function(){this.g.l=null,delete this.j,Wn(this.g),delete this.g,Zs.Z.N.call(this)};function Zu(h){qe.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const _ in v){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}E(Zu,qe);function ed(){nt.call(this),this.status=1}E(ed,nt);function Li(h){this.g=h}E(Li,Ju),Li.prototype.ra=function(){ht(this.g,"a")},Li.prototype.qa=function(h){ht(this.g,new Zu(h))},Li.prototype.pa=function(h){ht(this.g,new ed)},Li.prototype.oa=function(){ht(this.g,"b")},ga.prototype.createWebChannel=ga.prototype.g,Zs.prototype.send=Zs.prototype.o,Zs.prototype.open=Zs.prototype.m,Zs.prototype.close=Zs.prototype.close,I_=function(){return new ga},R_=function(){return Xt()},A_=He,jg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},it.NO_ERROR=0,it.TIMEOUT=8,it.HTTP_ERROR=6,Th=it,Gt.COMPLETE="complete",N_=Gt,yt.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,tu=yt,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,C_=Re}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});class $s{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$s.UNAUTHENTICATED=new $s(null),$s.GOOGLE_CREDENTIALS=new $s("google-credentials-uid"),$s.FIRST_PARTY=new $s("first-party-uid"),$s.MOCK_USER=new $s("mock-user");let ec="12.8.0";function uR(s){ec=s}const Uo=new iy("@firebase/firestore");function Il(){return Uo.logLevel}function Ge(s,...e){if(Uo.logLevel<=Vt.DEBUG){const t=e.map(yy);Uo.debug(`Firestore (${ec}): ${s}`,...t)}}function la(s,...e){if(Uo.logLevel<=Vt.ERROR){const t=e.map(yy);Uo.error(`Firestore (${ec}): ${s}`,...t)}}function Fl(s,...e){if(Uo.logLevel<=Vt.WARN){const t=e.map(yy);Uo.warn(`Firestore (${ec}): ${s}`,...t)}}function yy(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function wt(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,M_(s,i,t)}function M_(s,e,t){let i=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw la(i),new Error(i)}function un(s,e,t,i){let l="Unexpected state";typeof t=="string"?l=t:i=t,s||M_(e,l,i)}function Et(s,e){return s}const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends hi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class sa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class D_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($s.UNAUTHENTICATED)))}shutdown(){}}class hR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class fR{constructor(e){this.t=e,this.currentUser=$s.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){un(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new sa;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new sa,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new sa)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(un(typeof i.accessToken=="string",31837,{l:i}),new D_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return un(e===null||typeof e=="string",2055,{h:e}),new $s(e)}}class mR{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=$s.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class pR{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new mR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($s.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class O2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){un(this.o===void 0,3512);const i=u=>{u.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new O2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(un(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new O2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function yR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class vy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=yR(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<t&&(i+=e.charAt(l[u]%62))}return i}}function Ut(s,e){return s<e?-1:s>e?1:0}function Sg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return zp(l)===zp(u)?Ut(l,u):zp(l)?1:-1}return Ut(s.length,e.length)}const vR=55296,bR=57343;function zp(s){const e=s.charCodeAt(0);return e>=vR&&e<=bR}function ql(s,e,t){return s.length===e.length&&s.every(((i,l)=>t(i,e[l])))}const P2="__name__";class ki{constructor(e,t,i){t===void 0?t=0:t>e.length&&wt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&wt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ki?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let l=0;l<i;l++){const u=ki.compareSegments(e.get(l),t.get(l));if(u!==0)return u}return Ut(e.length,t.length)}static compareSegments(e,t){const i=ki.isNumericId(e),l=ki.isNumericId(t);return i&&!l?-1:!i&&l?1:i&&l?ki.extractNumericId(e).compare(ki.extractNumericId(t)):Sg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ya.fromString(e.substring(4,e.length-2))}}class Cn extends ki{construct(e,t,i){return new Cn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ze(ve.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((l=>l.length>0)))}return new Cn(t)}static emptyPath(){return new Cn([])}}const wR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ps extends ki{construct(e,t,i){return new Ps(e,t,i)}static isValidIdentifier(e){return wR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ps.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P2}static keyField(){return new Ps([P2])}static fromServerFormat(e){const t=[];let i="",l=0;const u=()=>{if(i.length===0)throw new ze(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new ze(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ze(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(i+=p,l++):(u(),l++)}if(u(),d)throw new ze(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ps(t)}static emptyPath(){return new Ps([])}}class lt{constructor(e){this.path=e}static fromPath(e){return new lt(Cn.fromString(e))}static fromName(e){return new lt(Cn.fromString(e).popFirst(5))}static empty(){return new lt(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new Cn(e.slice()))}}function L_(s,e,t){if(!t)throw new ze(ve.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function xR(s,e,t,i){if(e===!0&&i===!0)throw new ze(ve.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function V2(s){if(!lt.isDocumentKey(s))throw new ze(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function U2(s){if(lt.isDocumentKey(s))throw new ze(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function O_(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function lf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":wt(12329,{type:typeof s})}function sr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ze(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lf(s);throw new ze(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function _R(s,e){if(e<=0)throw new ze(ve.INVALID_ARGUMENT,`Function ${s}() requires a positive number, but it was: ${e}.`)}function ys(s,e){const t={typeString:s};return e&&(t.value=e),t}function Lu(s,e){if(!O_(s))throw new ze(ve.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const d=s[i];if(l&&typeof d!==l){t=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new ze(ve.INVALID_ARGUMENT,t);return!0}const B2=-62135596800,z2=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*z2);return new At(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ze(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ze(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<B2)throw new ze(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/z2}_compareTo(e){return this.seconds===e.seconds?Ut(this.nanoseconds,e.nanoseconds):Ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:At._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,At._jsonSchema))return new At(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-B2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}At._jsonSchemaVersion="firestore/timestamp/1.0",At._jsonSchema={type:ys("string",At._jsonSchemaVersion),seconds:ys("number"),nanoseconds:ys("number")};class _t{static fromTimestamp(e){return new _t(e)}static min(){return new _t(new At(0,0))}static max(){return new _t(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const gu=-1;function kR(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=_t.fromTimestamp(i===1e9?new At(t+1,0):new At(t,i));return new Xa(l,lt.empty(),e)}function ER(s){return new Xa(s.readTime,s.key,gu)}class Xa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Xa(_t.min(),lt.empty(),gu)}static max(){return new Xa(_t.max(),lt.empty(),gu)}}function TR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=lt.comparator(s.documentKey,e.documentKey),t!==0?t:Ut(s.largestBatchId,e.largestBatchId))}const jR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function tc(s){if(s.code!==ve.FAILED_PRECONDITION||s.message!==jR)throw s;Ge("LocalStore","Unexpectedly lost primary lease")}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,l)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(t){return Te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Te.reject(t)}static resolve(e){return new Te(((t,i)=>{t(e)}))}static reject(e){return new Te(((t,i)=>{i(e)}))}static waitFor(e){return new Te(((t,i)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&t()}),(g=>i(g)))})),d=!0,u===l&&t()}))}static or(e){let t=Te.resolve(!1);for(const i of e)t=t.next((l=>l?Te.resolve(l):i()));return t}static forEach(e,t){const i=[];return e.forEach(((l,u)=>{i.push(t.call(this,l,u))})),this.waitFor(i)}static mapArray(e,t){return new Te(((i,l)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next((b=>{d[y]=b,++p,p===u&&i(d)}),(b=>l(b)))}}))}static doWhile(e,t){return new Te(((i,l)=>{const u=()=>{e()===!0?t().next((()=>{u()}),l):i()};u()}))}}function CR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nc(s){return s.name==="IndexedDbTransactionError"}class cf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cf.ce=-1;const by=-1;function uf(s){return s==null}function Fh(s){return s===0&&1/s==-1/0}function NR(s){return typeof s=="number"&&Number.isInteger(s)&&!Fh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const P_="";function AR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=F2(e)),e=RR(s.get(t),e);return F2(e)}function RR(s,e){let t=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":t+="";break;case P_:t+="";break;default:t+=u}}return t}function F2(s){return s+P_+""}function q2(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function io(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function V_(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Gn{constructor(e,t){this.comparator=e,this.root=t||Os.EMPTY}insert(e,t){return new Gn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Os.BLACK,null,null))}remove(e){return new Gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Os.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return t+i.left.size;l<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,t,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Os{constructor(e,t,i,l,u){this.key=e,this.value=t,this.color=i??Os.RED,this.left=l??Os.EMPTY,this.right=u??Os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,l,u){return new Os(e??this.key,t??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,t,i),null):u===0?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),t(e,l.key)===0){if(l.right.isEmpty())return Os.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw wt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw wt(27949);return e+(this.isRed()?0:1)}}Os.EMPTY=null,Os.RED=!0,Os.BLACK=!1;Os.EMPTY=new class{constructor(){this.size=0}get key(){throw wt(57766)}get value(){throw wt(16141)}get color(){throw wt(16727)}get left(){throw wt(29726)}get right(){throw wt(36894)}copy(e,t,i,l,u){return this}insert(e,t,i){return new Os(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _s{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new H2(this.data.getIterator())}getIteratorFrom(e){return new H2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof _s)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new _s(this.comparator);return t.data=e,t}}class H2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Sr{constructor(e){this.fields=e,e.sort(Ps.comparator)}static empty(){return new Sr([])}unionWith(e){let t=new _s(Ps.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class U_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new U_("Invalid base64 string: "+u):u}})(e);return new Bs(t)}static fromUint8Array(e){const t=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new Bs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bs.EMPTY_BYTE_STRING=new Bs("");const IR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(s){if(un(!!s,39018),typeof s=="string"){let e=0;const t=IR.exec(s);if(un(!!t,46558,{timestamp:s}),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:os(s.seconds),nanos:os(s.nanos)}}function os(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Za(s){return typeof s=="string"?Bs.fromBase64String(s):Bs.fromUint8Array(s)}const B_="server_timestamp",z_="__type__",F_="__previous_value__",q_="__local_write_time__";function wy(s){return(s?.mapValue?.fields||{})[z_]?.stringValue===B_}function df(s){const e=s.mapValue.fields[F_];return wy(e)?df(e):e}function yu(s){const e=Ja(s.mapValue.fields[q_].timestampValue);return new At(e.seconds,e.nanos)}class MR{constructor(e,t,i,l,u,d,p,g,y,b,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=E}}const qh="(default)";class vu{constructor(e,t){this.projectId=e,this.database=t||qh}static empty(){return new vu("","")}get isDefaultDatabase(){return this.database===qh}isEqual(e){return e instanceof vu&&e.projectId===this.projectId&&e.database===this.database}}function DR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ze(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vu(s.options.projectId,e)}const H_="__type__",LR="__max__",lh={mapValue:{}},$_="__vector__",Hh="value";function eo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?wy(s)?4:PR(s)?9007199254740991:OR(s)?10:11:wt(28295,{value:s})}function Ai(s,e){if(s===e)return!0;const t=eo(s);if(t!==eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return yu(s).isEqual(yu(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=Ja(l.timestampValue),p=Ja(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Za(l.bytesValue).isEqual(Za(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return os(l.geoPointValue.latitude)===os(u.geoPointValue.latitude)&&os(l.geoPointValue.longitude)===os(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return os(l.integerValue)===os(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=os(l.doubleValue),p=os(u.doubleValue);return d===p?Fh(d)===Fh(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return ql(s.arrayValue.values||[],e.arrayValue.values||[],Ai);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(q2(d)!==q2(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Ai(d[g],p[g])))return!1;return!0})(s,e);default:return wt(52216,{left:s})}}function bu(s,e){return(s.values||[]).find((t=>Ai(t,e)))!==void 0}function Hl(s,e){if(s===e)return 0;const t=eo(s),i=eo(e);if(t!==i)return Ut(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ut(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=os(u.integerValue||u.doubleValue),g=os(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return $2(s.timestampValue,e.timestampValue);case 4:return $2(yu(s),yu(e));case 5:return Sg(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Za(u),g=Za(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Ut(p[y],g[y]);if(b!==0)return b}return Ut(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=Ut(os(u.latitude),os(d.latitude));return p!==0?p:Ut(os(u.longitude),os(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return W2(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[Hh]?.arrayValue,b=g[Hh]?.arrayValue,E=Ut(y?.values?.length||0,b?.values?.length||0);return E!==0?E:W2(y,b)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===lh.mapValue&&d===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(d===lh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let E=0;E<g.length&&E<b.length;++E){const T=Sg(g[E],b[E]);if(T!==0)return T;const L=Hl(p[g[E]],y[b[E]]);if(L!==0)return L}return Ut(g.length,b.length)})(s.mapValue,e.mapValue);default:throw wt(23264,{he:t})}}function $2(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ut(s,e);const t=Ja(s),i=Ja(e),l=Ut(t.seconds,i.seconds);return l!==0?l:Ut(t.nanos,i.nanos)}function W2(s,e){const t=s.values||[],i=e.values||[];for(let l=0;l<t.length&&l<i.length;++l){const u=Hl(t[l],i[l]);if(u)return u}return Ut(t.length,i.length)}function $l(s){return Cg(s)}function Cg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Ja(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Za(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return lt.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",l=!0;for(const u of t.values||[])l?l=!1:i+=",",i+=Cg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let l="{",u=!0;for(const d of i)u?u=!1:l+=",",l+=`${d}:${Cg(t.fields[d])}`;return l+"}"})(s.mapValue):wt(61005,{value:s})}function jh(s){switch(eo(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=df(s);return e?16+jh(e):16;case 5:return 2*s.stringValue.length;case 6:return Za(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+jh(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return io(i.fields,((u,d)=>{l+=u.length+jh(d)})),l})(s.mapValue);default:throw wt(13486,{value:s})}}function G2(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ng(s){return!!s&&"integerValue"in s}function xy(s){return!!s&&"arrayValue"in s}function K2(s){return!!s&&"nullValue"in s}function Y2(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Sh(s){return!!s&&"mapValue"in s}function OR(s){return(s?.mapValue?.fields||{})[H_]?.stringValue===$_}function ou(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return io(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ou(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(s.arrayValue.values[t]);return e}return{...s}}function PR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===LR}class fr{constructor(e){this.value=e}static empty(){return new fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Sh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=Ps.emptyPath(),i={},l=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,l),i={},l=[],t=p.popLast()}d?i[p.lastSegment()]=ou(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,l)}delete(e){const t=this.field(e.popLast());Sh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ai(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=t.mapValue.fields[e.get(i)];Sh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,i){io(t,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new fr(ou(this.value))}}function W_(s){const e=[];return io(s.fields,((t,i)=>{const l=new Ps([t]);if(Sh(i)){const u=W_(i.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new Sr(e)}class Ws{constructor(e,t,i,l,u,d,p){this.key=e,this.documentType=t,this.version=i,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Ws(e,0,_t.min(),_t.min(),_t.min(),fr.empty(),0)}static newFoundDocument(e,t,i,l){return new Ws(e,1,t,_t.min(),i,l,0)}static newNoDocument(e,t){return new Ws(e,2,t,_t.min(),_t.min(),fr.empty(),0)}static newUnknownDocument(e,t){return new Ws(e,3,t,_t.min(),_t.min(),fr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ws&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ws(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $h{constructor(e,t){this.position=e,this.inclusive=t}}function Q2(s,e,t){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],d=s.position[l];if(u.field.isKeyField()?i=lt.comparator(lt.fromName(d.referenceValue),t.key):i=Hl(d,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function X2(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Ai(s.position[t],e.position[t]))return!1;return!0}class wu{constructor(e,t="asc"){this.field=e,this.dir=t}}function VR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class G_{}class gs extends G_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new BR(e,t,i):t==="array-contains"?new qR(e,i):t==="in"?new HR(e,i):t==="not-in"?new $R(e,i):t==="array-contains-any"?new WR(e,i):new gs(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new zR(e,i):new FR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Hl(t,this.value)):t!==null&&eo(this.value)===eo(t)&&this.matchesComparison(Hl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends G_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ui(e,t)}matches(e){return K_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function K_(s){return s.op==="and"}function Y_(s){return UR(s)&&K_(s)}function UR(s){for(const e of s.filters)if(e instanceof ui)return!1;return!0}function Ag(s){if(s instanceof gs)return s.field.canonicalString()+s.op.toString()+$l(s.value);if(Y_(s))return s.filters.map((e=>Ag(e))).join(",");{const e=s.filters.map((t=>Ag(t))).join(",");return`${s.op}(${e})`}}function Q_(s,e){return s instanceof gs?(function(i,l){return l instanceof gs&&i.op===l.op&&i.field.isEqual(l.field)&&Ai(i.value,l.value)})(s,e):s instanceof ui?(function(i,l){return l instanceof ui&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,d,p)=>u&&Q_(d,l.filters[p])),!0):!1})(s,e):void wt(19439)}function X_(s){return s instanceof gs?(function(t){return`${t.field.canonicalString()} ${t.op} ${$l(t.value)}`})(s):s instanceof ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(X_).join(" ,")+"}"})(s):"Filter"}class BR extends gs{constructor(e,t,i){super(e,t,i),this.key=lt.fromName(i.referenceValue)}matches(e){const t=lt.comparator(e.key,this.key);return this.matchesComparison(t)}}class zR extends gs{constructor(e,t){super(e,"in",t),this.keys=J_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class FR extends gs{constructor(e,t){super(e,"not-in",t),this.keys=J_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function J_(s,e){return(e.arrayValue?.values||[]).map((t=>lt.fromName(t.referenceValue)))}class qR extends gs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xy(t)&&bu(t.arrayValue,this.value)}}class HR extends gs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bu(this.value.arrayValue,t)}}class $R extends gs{constructor(e,t){super(e,"not-in",t)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bu(this.value.arrayValue,t)}}class WR extends gs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>bu(this.value.arrayValue,i)))}}class GR{constructor(e,t=null,i=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function J2(s,e=null,t=[],i=[],l=null,u=null,d=null){return new GR(s,e,t,i,l,u,d)}function _y(s){const e=Et(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Ag(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),uf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>$l(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>$l(i))).join(",")),e.Te=t}return e.Te}function ky(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!VR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Q_(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!X2(s.startAt,e.startAt)&&X2(s.endAt,e.endAt)}function Rg(s){return lt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class sc{constructor(e,t=null,i=[],l=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function KR(s,e,t,i,l,u,d,p){return new sc(s,e,t,i,l,u,d,p)}function hf(s){return new sc(s)}function Z2(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function YR(s){return lt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Z_(s){return s.collectionGroup!==null}function lu(s){const e=Et(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new _s(Ps.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new wu(u,i))})),t.has(Ps.keyField().canonicalString())||e.Ie.push(new wu(Ps.keyField(),i))}return e.Ie}function Si(s){const e=Et(s);return e.Ee||(e.Ee=QR(e,lu(s))),e.Ee}function QR(s,e){if(s.limitType==="F")return J2(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new wu(l.field,u)}));const t=s.endAt?new $h(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new $h(s.startAt.position,s.startAt.inclusive):null;return J2(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Ig(s,e){const t=s.filters.concat([e]);return new sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function XR(s,e){const t=s.explicitOrderBy.concat([e]);return new sc(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Wh(s,e,t){return new sc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function ff(s,e){return ky(Si(s),Si(e))&&s.limitType===e.limitType}function ek(s){return`${_y(Si(s))}|lt:${s.limitType}`}function Ml(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((l=>X_(l))).join(", ")}]`),uf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((l=>$l(l))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((l=>$l(l))).join(",")),`Target(${i})`})(Si(s))}; limitType=${s.limitType})`}function mf(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):lt.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of lu(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(d,p,g){const y=Q2(d,p,g);return d.inclusive?y<=0:y<0})(i.startAt,lu(i),l)||i.endAt&&!(function(d,p,g){const y=Q2(d,p,g);return d.inclusive?y>=0:y>0})(i.endAt,lu(i),l))})(s,e)}function JR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function tk(s){return(e,t)=>{let i=!1;for(const l of lu(s)){const u=ZR(l,e,t);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function ZR(s,e,t){const i=s.field.isKeyField()?lt.comparator(e.key,t.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Hl(g,y):wt(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return wt(19790,{direction:s.dir})}}class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[t]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){io(this.inner,((t,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return V_(this.inner)}size(){return this.innerSize}}const eI=new Gn(lt.comparator);function ca(){return eI}const nk=new Gn(lt.comparator);function nu(...s){let e=nk;for(const t of s)e=e.insert(t.key,t);return e}function sk(s){let e=nk;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function No(){return cu()}function rk(){return cu()}function cu(){return new Ko((s=>s.toString()),((s,e)=>s.isEqual(e)))}const tI=new Gn(lt.comparator),nI=new _s(lt.comparator);function Bt(...s){let e=nI;for(const t of s)e=e.add(t);return e}const sI=new _s(Ut);function rI(){return sI}function Ey(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(e)?"-0":e}}function ik(s){return{integerValue:""+s}}function ak(s,e){return NR(e)?ik(e):Ey(s,e)}class pf{constructor(){this._=void 0}}function iI(s,e,t){return s instanceof xu?(function(l,u){const d={fields:{[z_]:{stringValue:B_},[q_]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&wy(u)&&(u=df(u)),u&&(d.fields[F_]=u),{mapValue:d}})(t,e):s instanceof Wl?lk(s,e):s instanceof Gl?ck(s,e):(function(l,u){const d=ok(l,u),p=ew(d)+ew(l.Ae);return Ng(d)&&Ng(l.Ae)?ik(p):Ey(l.serializer,p)})(s,e)}function aI(s,e,t){return s instanceof Wl?lk(s,e):s instanceof Gl?ck(s,e):t}function ok(s,e){return s instanceof _u?(function(i){return Ng(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class xu extends pf{}class Wl extends pf{constructor(e){super(),this.elements=e}}function lk(s,e){const t=uk(e);for(const i of s.elements)t.some((l=>Ai(l,i)))||t.push(i);return{arrayValue:{values:t}}}class Gl extends pf{constructor(e){super(),this.elements=e}}function ck(s,e){let t=uk(e);for(const i of s.elements)t=t.filter((l=>!Ai(l,i)));return{arrayValue:{values:t}}}class _u extends pf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ew(s){return os(s.integerValue||s.doubleValue)}function uk(s){return xy(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class gf{constructor(e,t){this.field=e,this.transform=t}}function oI(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof Wl&&l instanceof Wl||i instanceof Gl&&l instanceof Gl?ql(i.elements,l.elements,Ai):i instanceof _u&&l instanceof _u?Ai(i.Ae,l.Ae):i instanceof xu&&l instanceof xu})(s.transform,e.transform)}class lI{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ch(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class yf{}function dk(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new vf(s.key,rr.none()):new Ou(s.key,s.data,rr.none());{const t=s.data,i=fr.empty();let l=new _s(Ps.comparator);for(let u of e.fields)if(!l.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?i.delete(u):i.set(u,d),l=l.add(u)}return new ao(s.key,i,new Sr(l.toArray()),rr.none())}}function cI(s,e,t){s instanceof Ou?(function(l,u,d){const p=l.value.clone(),g=nw(l.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,t):s instanceof ao?(function(l,u,d){if(!Ch(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=nw(l.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(hk(l)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function uu(s,e,t,i){return s instanceof Ou?(function(u,d,p,g){if(!Ch(u.precondition,d))return p;const y=u.value.clone(),b=sw(u.fieldTransforms,g,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,t,i):s instanceof ao?(function(u,d,p,g){if(!Ch(u.precondition,d))return p;const y=sw(u.fieldTransforms,g,d),b=d.data;return b.setAll(hk(u)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(s,e,t,i):(function(u,d,p){return Ch(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,t)}function uI(s,e){let t=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=ok(i.transform,l||null);u!=null&&(t===null&&(t=fr.empty()),t.set(i.field,u))}return t||null}function tw(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&ql(i,l,((u,d)=>oI(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ou extends yf{constructor(e,t,i,l=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ao extends yf{constructor(e,t,i,l,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function hk(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function nw(s,e,t){const i=new Map;un(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let l=0;l<t.length;l++){const u=s[l],d=u.transform,p=e.data.field(u.field);i.set(u.field,aI(d,p,t[l]))}return i}function sw(s,e,t){const i=new Map;for(const l of s){const u=l.transform,d=t.data.field(l.field);i.set(l.field,iI(u,d,e))}return i}class vf extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dI extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class hI{constructor(e,t,i,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&cI(u,e,i[l])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=uu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=uu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=rk();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=t.has(l.key)?null:p;const g=dk(d,p);g!==null&&i.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(_t.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Bt())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,((t,i)=>tw(t,i)))&&ql(this.baseMutations,e.baseMutations,((t,i)=>tw(t,i)))}}class Ty{constructor(e,t,i,l){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=l}static from(e,t,i){un(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return tI})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,i[d].version);return new Ty(e,t,i,l)}}class fI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class mI{constructor(e,t){this.count=e,this.unchangedNames=t}}var ms,$t;function pI(s){switch(s){case ve.OK:return wt(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return wt(15467,{code:s})}}function fk(s){if(s===void 0)return la("GRPC error has no .code"),ve.UNKNOWN;switch(s){case ms.OK:return ve.OK;case ms.CANCELLED:return ve.CANCELLED;case ms.UNKNOWN:return ve.UNKNOWN;case ms.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case ms.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case ms.INTERNAL:return ve.INTERNAL;case ms.UNAVAILABLE:return ve.UNAVAILABLE;case ms.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case ms.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case ms.NOT_FOUND:return ve.NOT_FOUND;case ms.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case ms.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case ms.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case ms.ABORTED:return ve.ABORTED;case ms.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case ms.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case ms.DATA_LOSS:return ve.DATA_LOSS;default:return wt(39323,{code:s})}}($t=ms||(ms={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";function gI(){return new TextEncoder}const yI=new Ya([4294967295,4294967295],0);function rw(s){const e=gI().encode(s),t=new S_;return t.update(e),new Uint8Array(t.digest())}function iw(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ya([t,i],0),new Ya([l,u],0)]}class jy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new su(`Invalid padding: ${t}`);if(i<0)throw new su(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new su(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new su(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ya.fromNumber(this.ge)}ye(e,t,i){let l=e.add(t.multiply(Ya.fromNumber(i)));return l.compare(yI)===1&&(l=new Ya([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=rw(e),[i,l]=iw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);if(!this.we(d))return!1}return!0}static create(e,t,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new jy(u,l,t);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const t=rw(e),[i,l]=iw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);this.be(d)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bf{constructor(e,t,i,l,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const l=new Map;return l.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new bf(_t.min(),l,new Gn(Ut),ca(),Bt())}}class Pu{constructor(e,t,i,l,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Pu(i,t,Bt(),Bt(),Bt())}}class Nh{constructor(e,t,i,l){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=l}}class mk{constructor(e,t){this.targetId=e,this.Ce=t}}class pk{constructor(e,t,i=Bs.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=l}}class aw{constructor(){this.ve=0,this.Fe=ow(),this.Me=Bs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Bt(),t=Bt(),i=Bt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:i=i.add(l);break;default:wt(38017,{changeType:u})}})),new Pu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=ow()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,un(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class vI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ca(),this.He=ch(),this.Je=ch(),this.Ze=new Gn(Ut)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:wt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,l)=>{this.rt(l)&&t(l)}))}st(e){const t=e.targetId,i=e.Ce.count,l=this.ot(t);if(l){const u=l.target;if(Rg(u))if(i===0){const d=new lt(u.path);this.et(t,d,Ws.newNoDocument(d,_t.min()))}else un(i===1,20013,{expectedCount:i});else{const d=this._t(t);if(d!==i){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=t;let d,p;try{d=Za(i).toUint8Array()}catch(g){if(g instanceof U_)return Fl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new jy(d,l,u)}catch(g){return Fl(g instanceof su?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let l=0;return i.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(t,u,null),l++)})),l}Tt(e){const t=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&Rg(p.target)){const g=new lt(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Ws.newNoDocument(g,e))}u.Be&&(t.set(d,u.ke()),u.Ke())}}));let i=Bt();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new bf(e,t,this.Ze,this.je,i);return this.je=ca(),this.He=ch(),this.Je=ch(),this.Ze=new Gn(Ut),l}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,t)?l.qe(t,1):l.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new aw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new _s(Ut),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new _s(Ut),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new aw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ch(){return new Gn(lt.comparator)}function ow(){return new Gn(lt.comparator)}const bI={asc:"ASCENDING",desc:"DESCENDING"},wI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xI={and:"AND",or:"OR"};class _I{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mg(s,e){return s.useProto3Json||uf(e)?e:{value:e}}function Gh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gk(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function kI(s,e){return Gh(s,e.toTimestamp())}function Ci(s){return un(!!s,49232),_t.fromTimestamp((function(t){const i=Ja(t);return new At(i.seconds,i.nanos)})(s))}function Sy(s,e){return Dg(s,e).canonicalString()}function Dg(s,e){const t=(function(l){return new Cn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?t:t.child(e)}function yk(s){const e=Cn.fromString(s);return un(_k(e),10190,{key:e.toString()}),e}function Lg(s,e){return Sy(s.databaseId,e.path)}function Fp(s,e){const t=yk(e);if(t.get(1)!==s.databaseId.projectId)throw new ze(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ze(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new lt(bk(t))}function vk(s,e){return Sy(s.databaseId,e)}function EI(s){const e=yk(s);return e.length===4?Cn.emptyPath():bk(e)}function Og(s){return new Cn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function bk(s){return un(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function lw(s,e,t){return{name:Lg(s,e),fields:t.value.mapValue.fields}}function TI(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:wt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(un(b===void 0||typeof b=="string",58123),Bs.fromBase64String(b||"")):(un(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Bs.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const b=y.code===void 0?ve.UNKNOWN:fk(y.code);return new ze(b,y.message||"")})(d);t=new pk(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=Fp(s,i.document.name),u=Ci(i.document.updateTime),d=i.document.createTime?Ci(i.document.createTime):_t.min(),p=new fr({mapValue:{fields:i.document.fields}}),g=Ws.newFoundDocument(l,u,d,p),y=i.targetIds||[],b=i.removedTargetIds||[];t=new Nh(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=Fp(s,i.document),u=i.readTime?Ci(i.readTime):_t.min(),d=Ws.newNoDocument(l,u),p=i.removedTargetIds||[];t=new Nh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=Fp(s,i.document),u=i.removedTargetIds||[];t=new Nh([],u,l,null)}else{if(!("filter"in e))return wt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,d=new mI(l,u),p=i.targetId;t=new mk(p,d)}}return t}function jI(s,e){let t;if(e instanceof Ou)t={update:lw(s,e.key,e.value)};else if(e instanceof vf)t={delete:Lg(s,e.key)};else if(e instanceof ao)t={update:lw(s,e.key,e.data),updateMask:LI(e.fieldMask)};else{if(!(e instanceof dI))return wt(16599,{dt:e.type});t={verify:Lg(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const p=d.transform;if(p instanceof xu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Wl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Gl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof _u)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw wt(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:kI(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:wt(27497)})(s,e.precondition)),t}function SI(s,e){return s&&s.length>0?(un(e!==void 0,14353),s.map((t=>(function(l,u){let d=l.updateTime?Ci(l.updateTime):Ci(u);return d.isEqual(_t.min())&&(d=Ci(u)),new lI(d,l.transformResults||[])})(t,e)))):[]}function CI(s,e){return{documents:[vk(s,e.path)]}}function NI(s,e){const t={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=vk(s,l);const u=(function(y){if(y.length!==0)return xk(ui.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((b=>(function(T){return{field:Dl(T.field),direction:II(T.dir)}})(b)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=Mg(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:l}}function AI(s){let e=EI(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let l=null;if(i>0){un(i===1,65062);const b=t.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=(function(E){const T=wk(E);return T instanceof ui&&Y_(T)?T.getFilters():[T]})(t.where));let d=[];t.orderBy&&(d=(function(E){return E.map((T=>(function($){return new wu(Ll($.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(T)))})(t.orderBy));let p=null;t.limit&&(p=(function(E){let T;return T=typeof E=="object"?E.value:E,uf(T)?null:T})(t.limit));let g=null;t.startAt&&(g=(function(E){const T=!!E.before,L=E.values||[];return new $h(L,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const T=!E.before,L=E.values||[];return new $h(L,T)})(t.endAt)),KR(e,l,d,u,p,"F",g,y)}function RI(s,e){const t=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt(28987,{purpose:l})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wk(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ll(t.unaryFilter.field);return gs.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Ll(t.unaryFilter.field);return gs.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ll(t.unaryFilter.field);return gs.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ll(t.unaryFilter.field);return gs.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return wt(61313);default:return wt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return gs.create(Ll(t.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return wt(58110);default:return wt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ui.create(t.compositeFilter.filters.map((i=>wk(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return wt(1026)}})(t.compositeFilter.op))})(s):wt(30097,{filter:s})}function II(s){return bI[s]}function MI(s){return wI[s]}function DI(s){return xI[s]}function Dl(s){return{fieldPath:s.canonicalString()}}function Ll(s){return Ps.fromServerFormat(s.fieldPath)}function xk(s){return s instanceof gs?(function(t){if(t.op==="=="){if(Y2(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NAN"}};if(K2(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Y2(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NAN"}};if(K2(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(t.field),op:MI(t.op),value:t.value}}})(s):s instanceof ui?(function(t){const i=t.getFilters().map((l=>xk(l)));return i.length===1?i[0]:{compositeFilter:{op:DI(t.op),filters:i}}})(s):wt(54877,{filter:s})}function LI(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function _k(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function kk(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class $a{constructor(e,t,i,l,u=_t.min(),d=_t.min(),p=Bs.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new $a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class OI{constructor(e){this.yt=e}}function PI(s){const e=AI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Wh(e,e.limit,"L"):e}class VI{constructor(){this.Sn=new UI}addToCollectionParentIndex(e,t){return this.Sn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(Xa.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(Xa.min())}updateCollectionGroup(e,t,i){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class UI{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t]||new _s(Cn.comparator),u=!l.has(i);return this.index[t]=l.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),l=this.index[t];return l&&l.has(i)}getEntries(e){return(this.index[e]||new _s(Cn.comparator)).toArray()}}const cw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ek=41943040;class hr{static withCacheSize(e){return new hr(e,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}hr.DEFAULT_COLLECTION_PERCENTILE=10,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hr.DEFAULT=new hr(Ek,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hr.DISABLED=new hr(-1,0,0);class Kl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Kl(0)}static ar(){return new Kl(-1)}}const uw="LruGarbageCollector",BI=1048576;function dw([s,e],[t,i]){const l=Ut(s,t);return l===0?Ut(e,i):l}class zI{constructor(e){this.Pr=e,this.buffer=new _s(dw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();dw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FI{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ge(uw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){nc(t)?Ge(uw,"Ignoring IndexedDB error during garbage collection: ",t):await tc(t)}await this.Ar(3e5)}))}}class qI{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Te.resolve(cf.ce);const i=new zI(t);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(cw)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,l,u,d,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),l=this.params.maximumSequenceNumbersToCollect):l=E,d=Date.now(),this.nthSequenceNumber(e,l)))).next((E=>(i=E,p=Date.now(),this.removeTargets(e,i,t)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(y=Date.now(),Il()<=Vt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:E}))))}}function HI(s,e){return new qI(s,e)}class $I{constructor(){this.changes=new Ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ws.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Te.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class GI{constructor(e,t,i,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,t)))).next((l=>(i!==null&&uu(i.mutation,l,Sr.empty(),At.now()),l)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Bt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Bt()){const l=No();return this.populateOverlays(e,l,t).next((()=>this.computeViews(e,t,l,i).next((u=>{let d=nu();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=No();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Bt())))}populateOverlays(e,t,i){const l=[];return i.forEach((u=>{t.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,i,l){let u=ca();const d=cu(),p=(function(){return cu()})();return t.forEach(((g,y)=>{const b=i.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof ao)?u=u.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),uu(b.mutation,y,b.mutation.getFieldMask(),At.now())):d.set(y.key,Sr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,b)=>d.set(y,b))),t.forEach(((y,b)=>p.set(y,new WI(b,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=cu();let l=new Gn(((d,p)=>d-p)),u=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let b=i.get(g)||Sr.empty();b=p.applyToLocalView(y,b),i.set(g,b);const E=(l.get(p.batchId)||Bt()).add(g);l=l.insert(p.batchId,E)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,E=rk();b.forEach((T=>{if(!u.has(T)){const L=dk(t.get(T),i.get(T));L!==null&&E.set(T,L),u=u.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,E))}return Te.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,l){return YR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Z_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,l):this.getDocumentsMatchingCollectionQuery(e,t,i,l)}getNextDocuments(e,t,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,l-u.size):Te.resolve(No());let p=gu,g=u;return d.next((y=>Te.forEach(y,((b,E)=>(p<E.largestBatchId&&(p=E.largestBatchId),u.get(b)?Te.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Bt()))).next((b=>({batchId:p,changes:sk(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new lt(t)).next((i=>{let l=nu();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,l){const u=t.collectionGroup;let d=nu();return this.indexManager.getCollectionParents(e,u).next((p=>Te.forEach(p,(g=>{const y=(function(E,T){return new sc(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((b=>{b.forEach(((E,T)=>{d=d.insert(E,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,l)))).next((d=>{u.forEach(((g,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,Ws.newInvalidDocument(b)))}));let p=nu();return d.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&uu(b.mutation,y,Sr.empty(),At.now()),mf(t,y)&&(p=p.insert(g,y))})),p}))}}class KI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Te.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(l){return{id:l.id,version:l.version,createTime:Ci(l.createTime)}})(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(l){return{name:l.name,query:PI(l.bundledQuery),readTime:Ci(l.readTime)}})(t)),Te.resolve()}}class YI{constructor(){this.overlays=new Gn(lt.comparator),this.Lr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const i=No();return Te.forEach(t,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((l,u)=>{this.bt(e,t,u)})),Te.resolve()}removeOverlaysForBatchId(e,t,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),Te.resolve()}getOverlaysForCollection(e,t,i){const l=No(),u=t.length+1,d=new lt(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return Te.resolve(l)}getOverlaysForCollectionGroup(e,t,i,l){let u=new Gn(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let b=u.get(y.largestBatchId);b===null&&(b=No(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=No(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=l)););return Te.resolve(p)}bt(e,t,i){const l=this.overlays.get(i.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new fI(t,i));let u=this.Lr.get(t);u===void 0&&(u=Bt(),this.Lr.set(t,u)),this.Lr.set(t,u.add(i.key))}}class QI{constructor(){this.sessionToken=Bs.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}class Cy{constructor(){this.kr=new _s(Ss.Kr),this.qr=new _s(Ss.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Ss(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Ss(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new lt(new Cn([])),i=new Ss(t,e),l=new Ss(t,e+1),u=[];return this.qr.forEachInRange([i,l],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new lt(new Cn([])),i=new Ss(t,e),l=new Ss(t,e+1);let u=Bt();return this.qr.forEachInRange([i,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new Ss(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ss{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return lt.comparator(e.key,t.key)||Ut(e.Hr,t.Hr)}static Ur(e,t){return Ut(e.Hr,t.Hr)||lt.comparator(e.key,t.key)}}class XI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new _s(Ss.Kr)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new hI(u,t,i,l);this.mutationQueue.push(d);for(const p of l)this.Jr=this.Jr.add(new Ss(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Te.resolve(d)}lookupMutationBatch(e,t){return Te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,l=this.Xr(i),u=l<0?0:l;return Te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?by:this.Yn-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ss(t,0),l=new Ss(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(d=>{const p=this.Zr(d.Hr);u.push(p)})),Te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new _s(Ut);return t.forEach((l=>{const u=new Ss(l,0),d=new Ss(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{i=i.add(p.Hr)}))})),Te.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,l=i.length+1;let u=i;lt.isDocumentKey(u)||(u=u.child(""));const d=new Ss(new lt(u),0);let p=new _s(Ut);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),d),Te.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&t.push(l)})),t}removeMutationBatch(e,t){un(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Te.forEach(t.mutations,(l=>{const u=new Ss(l.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Ss(t,0),l=this.Jr.firstAfterOrEqual(i);return Te.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class JI{constructor(e){this.ti=e,this.docs=(function(){return new Gn(lt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,l=this.docs.get(i),u=l?l.size:0,d=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Te.resolve(i?i.document.mutableCopy():Ws.newInvalidDocument(t))}getEntries(e,t){let i=ca();return t.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Ws.newInvalidDocument(l))})),Te.resolve(i)}getDocumentsMatchingQuery(e,t,i,l){let u=ca();const d=t.path,p=new lt(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||TR(ER(b),i)<=0||(l.has(b.key)||mf(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return Te.resolve(u)}getAllFromCollectionGroup(e,t,i,l){wt(9500)}ni(e,t){return Te.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new ZI(this)}getSize(e){return Te.resolve(this.size)}}class ZI extends $I{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?t.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),Te.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class eM{constructor(e){this.persistence=e,this.ri=new Ko((t=>_y(t)),ky),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.ii=0,this.si=new Cy,this.targetCount=0,this.oi=Kl._r()}forEachTarget(e,t){return this.ri.forEach(((i,l)=>t(l))),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),Te.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Kl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.lr(t),Te.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,i){let l=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Te.waitFor(u).next((()=>l))}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return Te.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),Te.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const l=this.persistence.referenceDelegate,u=[];return l&&t.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),Te.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return Te.resolve(i)}containsKey(e,t){return Te.resolve(this.si.containsKey(t))}}class Tk{constructor(e,t){this._i={},this.overlays={},this.ai=new cf(0),this.ui=!1,this.ui=!0,this.ci=new QI,this.referenceDelegate=e(this),this.li=new eM(this),this.indexManager=new VI,this.remoteDocumentCache=(function(l){return new JI(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new OI(t),this.Pi=new KI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new XI(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Ge("MemoryPersistence","Starting transaction:",e);const l=new tM(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,t){return Te.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class tM extends SR{constructor(e){super(),this.currentSequenceNumber=e}}class Ny{constructor(e){this.persistence=e,this.Ri=new Cy,this.Ai=null}static Vi(e){return new Ny(e)}get di(){if(this.Ai)return this.Ai;throw wt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),Te.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.di,(i=>{const l=lt.fromPath(i);return this.mi(e,l).next((u=>{u||t.removeEntry(l,_t.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Te.or([()=>Te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Kh{constructor(e,t){this.persistence=e,this.fi=new Ko((i=>AR(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=HI(this,t)}static Vi(e,t){return new Kh(e,t)}Ti(){}Ii(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((l=>i+l))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return Te.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?Te.resolve():t(l)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,t).next((p=>{p||(i++,u.removeEntry(d,_t.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Te.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jh(e.data.value)),t}wr(e,t,i){return Te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const l=this.fi.get(t);return Te.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ay{constructor(e,t,i,l){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=l}static Es(e,t){let i=Bt(),l=Bt();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Ay(e,t.fromCache,i,l)}}class nM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return IC()?8:CR(Gs())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,l){const u={result:null};return this.gs(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,t,l,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new nM;return this.ys(e,t,d).next((p=>{if(u.result=p,this.As)return this.ws(e,t,d,p.size)}))})).next((()=>u.result))}ws(e,t,i,l){return i.documentReadCount<this.Vs?(Il()<=Vt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Ml(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Te.resolve()):(Il()<=Vt.DEBUG&&Ge("QueryEngine","Query:",Ml(t),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Il()<=Vt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Ml(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Si(t))):Te.resolve())}gs(e,t){if(Z2(t))return Te.resolve(null);let i=Si(t);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(t.limit!==null&&l===1&&(t=Wh(t,null,"F"),i=Si(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=Bt(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(t,p);return this.Ss(t,y,d,g.readTime)?this.gs(e,Wh(t,null,"F")):this.Ds(e,y,t,g)}))))})))))}ps(e,t,i,l){return Z2(t)||l.isEqual(_t.min())?Te.resolve(null):this.fs.getDocuments(e,i).next((u=>{const d=this.bs(t,u);return this.Ss(t,d,i,l)?Te.resolve(null):(Il()<=Vt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ml(t)),this.Ds(e,d,t,kR(l,gu)).next((p=>p)))}))}bs(e,t){let i=new _s(tk(e));return t.forEach(((l,u)=>{mf(e,u)&&(i=i.add(u))})),i}Ss(e,t,i,l){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,t,i){return Il()<=Vt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Ml(t)),this.fs.getDocumentsMatchingQuery(e,t,Xa.min(),i)}Ds(e,t,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Ry="LocalStore",rM=3e8;class iM{constructor(e,t,i,l){this.persistence=e,this.Cs=t,this.serializer=l,this.vs=new Gn(Ut),this.Fs=new Ko((u=>_y(u)),ky),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function aM(s,e,t,i){return new iM(s,e,t,i)}async function jk(s,e){const t=Et(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return t.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],p=[];let g=Bt();for(const y of l){d.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function oM(s,e){const t=Et(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const E=y.batch,T=E.keys();let L=Te.resolve();return T.forEach(($=>{L=L.next((()=>b.getEntry(g,$))).next((q=>{const B=y.docVersions.get($);un(B!==null,48541),q.version.compareTo(B)<0&&(E.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),b.addEntry(q)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(g,E)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=Bt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,l)))}))}function Sk(s){const e=Et(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function lM(s,e){const t=Et(s),i=e.snapshotVersion;let l=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});l=t.vs;const p=[];e.targetChanges.forEach(((b,E)=>{const T=l.get(E);if(!T)return;p.push(t.li.removeMatchingKeys(u,b.removedDocuments,E).next((()=>t.li.addMatchingKeys(u,b.addedDocuments,E))));let L=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(Bs.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):b.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(b.resumeToken,i)),l=l.insert(E,L),(function(q,B,K){return q.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=rM?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(T,L,b)&&p.push(t.li.updateTargetData(u,L))}));let g=ca(),y=Bt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(cM(u,d,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!i.isEqual(_t.min())){const b=t.li.getLastRemoteSnapshotVersion(u).next((E=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(b)}return Te.waitFor(p).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(t.vs=l,u)))}function cM(s,e,t){let i=Bt(),l=Bt();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=ca();return t.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(_t.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):Ge(Ry,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:l}}))}function uM(s,e){const t=Et(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=by),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function dM(s,e){const t=Et(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return t.li.getTargetData(i,e).next((u=>u?(l=u,Te.resolve(l)):t.li.allocateTargetId(i).next((d=>(l=new $a(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=t.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Pg(s,e,t){const i=Et(s),l=i.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!nc(d))throw d;Ge(Ry,`Failed to update sequence numbers for target ${e}: ${d}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function hw(s,e,t){const i=Et(s);let l=_t.min(),u=Bt();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,b){const E=Et(g),T=E.Fs.get(b);return T!==void 0?Te.resolve(E.vs.get(T)):E.li.getTargetData(y,b)})(i,d,Si(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,t?l:_t.min(),t?u:Bt()))).next((p=>(hM(i,JR(e),p),{documents:p,ks:u})))))}function hM(s,e,t){let i=s.Ms.get(e)||_t.min();t.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class fw{constructor(){this.activeTargetIds=rI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fM{constructor(){this.vo=new fw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new fw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mM{Mo(e){}shutdown(){}}const mw="ConnectivityMonitor";class pw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ge(mw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ge(mw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let uh=null;function Vg(){return uh===null?uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():uh++,"0x"+uh.toString(16)}const qp="RestConnection",pM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class gM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===qh?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,t,i,l,u){const d=Vg(),p=this.Qo(e,t.toUriEncodedString());Ge(qp,`Sending RPC '${e}' ${d}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),b=so(y);return this.zo(e,p,g,i,b).then((E=>(Ge(qp,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw Fl(qp,`RPC '${e}' ${d} failed with error: `,E,"url: ",p,"request:",i),E}))}jo(e,t,i,l,u,d){return this.Wo(e,t,i,l,u)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ec})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,t){const i=pM[e];let l=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class yM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Hs="WebChannelConnection",Gc=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Bl extends gM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Bl.c_){const e=R_();Gc(e,A_.STAT_EVENT,(t=>{t.stat===jg.PROXY?Ge(Hs,"STAT_EVENT: detected buffering proxy"):t.stat===jg.NOPROXY&&Ge(Hs,"STAT_EVENT: detected no buffering proxy")})),Bl.c_=!0}}zo(e,t,i,l,u){const d=Vg();return new Promise(((p,g)=>{const y=new C_;y.setWithCredentials(!0),y.listenOnce(N_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Th.NO_ERROR:const E=y.getResponseJson();Ge(Hs,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),p(E);break;case Th.TIMEOUT:Ge(Hs,`RPC '${e}' ${d} timed out`),g(new ze(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Th.HTTP_ERROR:const T=y.getStatus();if(Ge(Hs,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const $=L?.error;if($&&$.status&&$.message){const q=(function(K){const G=K.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(G)>=0?G:ve.UNKNOWN})($.status);g(new ze(q,$.message))}else g(new ze(ve.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ze(ve.UNAVAILABLE,"Connection failed."));break;default:wt(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Ge(Hs,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(l);Ge(Hs,`RPC '${e}' ${d} sending request:`,l),y.send(t,"POST",b,i,15)}))}T_(e,t,i){const l=Vg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const y=u.join("");Ge(Hs,`Creating RPC '${e}' stream ${l}: ${y}`,p);const b=d.createWebChannel(y,p);this.I_(b);let E=!1,T=!1;const L=new yM({Ho:$=>{T?Ge(Hs,`Not sending because RPC '${e}' stream ${l} is closed:`,$):(E||(Ge(Hs,`Opening RPC '${e}' stream ${l} transport.`),b.open(),E=!0),Ge(Hs,`RPC '${e}' stream ${l} sending:`,$),b.send($))},Jo:()=>b.close()});return Gc(b,tu.EventType.OPEN,(()=>{T||(Ge(Hs,`RPC '${e}' stream ${l} transport opened.`),L.i_())})),Gc(b,tu.EventType.CLOSE,(()=>{T||(T=!0,Ge(Hs,`RPC '${e}' stream ${l} transport closed`),L.o_(),this.E_(b))})),Gc(b,tu.EventType.ERROR,($=>{T||(T=!0,Fl(Hs,`RPC '${e}' stream ${l} transport errored. Name:`,$.name,"Message:",$.message),L.o_(new ze(ve.UNAVAILABLE,"The operation could not be completed")))})),Gc(b,tu.EventType.MESSAGE,($=>{if(!T){const q=$.data[0];un(!!q,16349);const B=q,K=B?.error||B[0]?.error;if(K){Ge(Hs,`RPC '${e}' stream ${l} received error:`,K);const G=K.status;let Q=(function(ge){const C=ms[ge];if(C!==void 0)return fk(C)})(G),he=K.message;Q===void 0&&(Q=ve.INTERNAL,he="Unknown error status: "+G+" with message "+K.message),T=!0,L.o_(new ze(Q,he)),b.close()}else Ge(Hs,`RPC '${e}' stream ${l} received:`,q),L.__(q)}})),Bl.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return I_()}}function vM(s){return new Bl(s)}function Hp(){return typeof document<"u"?document:null}function wf(s){return new _I(s,!0)}Bl.c_=!1;class Ck{constructor(e,t,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,t-i);l>0&&Ge("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const gw="PersistentStream";class Nk{constructor(e,t,i,l,u,d,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ck(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ve.RESOURCE_EXHAUSTED?(la(t.toString()),la("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===t&&this.G_(i,l)}),(i=>{e((()=>{const l=new ze(ve.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ge(gw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ge(gw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bM extends Nk{constructor(e,t,i,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,l,d),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=TI(this.serializer,e),i=(function(u){if(!("targetChange"in u))return _t.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?_t.min():d.readTime?Ci(d.readTime):_t.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Og(this.serializer),t.addTarget=(function(u,d){let p;const g=d.target;if(p=Rg(g)?{documents:CI(u,g)}:{query:NI(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=gk(u,d.resumeToken);const y=Mg(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(_t.min())>0){p.readTime=Gh(u,d.snapshotVersion.toTimestamp());const y=Mg(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=RI(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Og(this.serializer),t.removeTarget=e,this.K_(t)}}class wM extends Nk{constructor(e,t,i,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,l,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return un(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,un(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){un(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=SI(e.writeResults,e.commitTime),i=Ci(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Og(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>jI(this.serializer,i)))};this.K_(t)}}class xM{}class _M extends xM{constructor(e,t,i,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ze(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,Dg(t,i),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ze(ve.UNKNOWN,u.toString())}))}jo(e,t,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Dg(t,i),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ze(ve.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function kM(s,e,t,i){return new _M(s,e,t,i)}class EM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(la(t),this.aa=!1):Ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Bo="RemoteStore";class TM{constructor(e,t,i,l,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{i.enqueueAndForget((async()=>{Yo(this)&&(Ge(Bo,"Restarting streams for network reachability change."),await(async function(g){const y=Et(g);y.Ea.add(4),await Vu(y),y.Va.set("Unknown"),y.Ea.delete(4),await xf(y)})(this))}))})),this.Va=new EM(i,l)}}async function xf(s){if(Yo(s))for(const e of s.Ra)await e(!0)}async function Vu(s){for(const e of s.Ra)await e(!1)}function Ak(s,e){const t=Et(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ly(t)?Dy(t):rc(t).O_()&&My(t,e))}function Iy(s,e){const t=Et(s),i=rc(t);t.Ia.delete(e),i.O_()&&Rk(t,e),t.Ia.size===0&&(i.O_()?i.L_():Yo(t)&&t.Va.set("Unknown"))}function My(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rc(s).Z_(e)}function Rk(s,e){s.da.$e(e),rc(s).X_(e)}function Dy(s){s.da=new vI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),rc(s).start(),s.Va.ua()}function Ly(s){return Yo(s)&&!rc(s).x_()&&s.Ia.size>0}function Yo(s){return Et(s).Ea.size===0}function Ik(s){s.da=void 0}async function jM(s){s.Va.set("Online")}async function SM(s){s.Ia.forEach(((e,t)=>{My(s,e)}))}async function CM(s,e){Ik(s),Ly(s)?(s.Va.ha(e),Dy(s)):s.Va.set("Unknown")}async function NM(s,e,t){if(s.Va.set("Online"),e instanceof pk&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){Ge(Bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Yh(s,i)}else if(e instanceof Nh?s.da.Xe(e):e instanceof mk?s.da.st(e):s.da.tt(e),!t.isEqual(_t.min()))try{const i=await Sk(s.localStore);t.compareTo(i)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(Bs.EMPTY_BYTE_STRING,b.snapshotVersion)),Rk(u,g);const E=new $a(b.target,g,y,b.sequenceNumber);My(u,E)})),u.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(i){Ge(Bo,"Failed to raise snapshot:",i),await Yh(s,i)}}async function Yh(s,e,t){if(!nc(e))throw e;s.Ea.add(1),await Vu(s),s.Va.set("Offline"),t||(t=()=>Sk(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Ge(Bo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await xf(s)}))}function Mk(s,e){return e().catch((t=>Yh(s,t,e)))}async function _f(s){const e=Et(s),t=to(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:by;for(;AM(e);)try{const l=await uM(e.localStore,i);if(l===null){e.Ta.length===0&&t.L_();break}i=l.batchId,RM(e,l)}catch(l){await Yh(e,l)}Dk(e)&&Lk(e)}function AM(s){return Yo(s)&&s.Ta.length<10}function RM(s,e){s.Ta.push(e);const t=to(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function Dk(s){return Yo(s)&&!to(s).x_()&&s.Ta.length>0}function Lk(s){to(s).start()}async function IM(s){to(s).ra()}async function MM(s){const e=to(s);for(const t of s.Ta)e.ea(t.mutations)}async function DM(s,e,t){const i=s.Ta.shift(),l=Ty.from(i,e,t);await Mk(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await _f(s)}async function LM(s,e){e&&to(s).Y_&&await(async function(i,l){if((function(d){return pI(d)&&d!==ve.ABORTED})(l.code)){const u=i.Ta.shift();to(i).B_(),await Mk(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await _f(i)}})(s,e),Dk(s)&&Lk(s)}async function yw(s,e){const t=Et(s);t.asyncQueue.verifyOperationInProgress(),Ge(Bo,"RemoteStore received new credentials");const i=Yo(t);t.Ea.add(3),await Vu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await xf(t)}async function OM(s,e){const t=Et(s);e?(t.Ea.delete(2),await xf(t)):e||(t.Ea.add(2),await Vu(t),t.Va.set("Unknown"))}function rc(s){return s.ma||(s.ma=(function(t,i,l){const u=Et(t);return u.sa(),new bM(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:jM.bind(null,s),Yo:SM.bind(null,s),t_:CM.bind(null,s),J_:NM.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Ly(s)?Dy(s):s.Va.set("Unknown")):(await s.ma.stop(),Ik(s))}))),s.ma}function to(s){return s.fa||(s.fa=(function(t,i,l){const u=Et(t);return u.sa(),new wM(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:IM.bind(null,s),t_:LM.bind(null,s),ta:MM.bind(null,s),na:DM.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await _f(s)):(await s.fa.stop(),s.Ta.length>0&&(Ge(Bo,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Oy{constructor(e,t,i,l,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,l,u){const d=Date.now()+i,p=new Oy(e,t,d,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Py(s,e){if(la("AsyncQueue",`${e}: ${s}`),nc(s))return new ze(ve.UNAVAILABLE,`${e}: ${s}`);throw s}class zl{static emptySet(e){return new zl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||lt.comparator(t.key,i.key):(t,i)=>lt.comparator(t.key,i.key),this.keyedMap=nu(),this.sortedSet=new Gn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new zl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class vw{constructor(){this.ga=new Gn(lt.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):wt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Yl{constructor(e,t,i,l,u,d,p,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,l,u){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new Yl(e,t,zl.emptySet(t),d,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==i[l].type||!t[l].doc.isEqual(i[l].doc))return!1;return!0}}class PM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class VM{constructor(){this.queries=bw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const l=Et(t),u=l.queries;l.queries=bw(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new ze(ve.ABORTED,"Firestore shutting down"))}}function bw(){return new Ko((s=>ek(s)),ff)}async function Vy(s,e){const t=Et(s);let i=3;const l=e.query;let u=t.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new PM,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(l,!0);break;case 1:u.wa=await t.onListen(l,!1);break;case 2:await t.onFirstRemoteStoreListen(l)}}catch(d){const p=Py(d,`Initialization of query '${Ml(e.query)}' failed`);return void e.onError(p)}t.queries.set(l,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&By(t)}async function Uy(s,e){const t=Et(s),i=e.query;let l=3;const u=t.queries.get(i);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function UM(s,e){const t=Et(s);let i=!1;for(const l of e){const u=l.query,d=t.queries.get(u);if(d){for(const p of d.ba)p.Fa(l)&&(i=!0);d.wa=l}}i&&By(t)}function BM(s,e,t){const i=Et(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(t);i.queries.delete(e)}function By(s){s.Ca.forEach((e=>{e.next()}))}var Ug,ww;(ww=Ug||(Ug={})).Ma="default",ww.Cache="cache";class zy{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Yl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ug.Cache}}class Ok{constructor(e){this.key=e}}class Pk{constructor(e){this.key=e}}class zM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Bt(),this.mutatedKeys=Bt(),this.eu=tk(e),this.tu=new zl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new vw,l=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,E)=>{const T=l.get(b),L=mf(this.query,E)?E:null,$=!!T&&this.mutatedKeys.has(T.key),q=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let B=!1;T&&L?T.data.isEqual(L.data)?$!==q&&(i.track({type:3,doc:L}),B=!0):this.su(T,L)||(i.track({type:2,doc:L}),B=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(p=!0)):!T&&L?(i.track({type:0,doc:L}),B=!0):T&&!L&&(i.track({type:1,doc:T}),B=!0,(g||y)&&(p=!0)),B&&(L?(d=d.add(L),u=q?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),i.track({type:1,doc:b})}return{tu:d,iu:i,Ss:p,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,E)=>(function(L,$){const q=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt(20277,{Vt:B})}};return q(L)-q($)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(i),l=l??!1;const p=t&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new Yl(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Bt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new Pk(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new Ok(i))})),t}cu(e){this.Za=e.ks,this.Ya=Bt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Fy="SyncEngine";class FM{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class qM{constructor(e){this.key=e,this.hu=!1}}class HM{constructor(e,t,i,l,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ko((p=>ek(p)),ff),this.Iu=new Map,this.Eu=new Set,this.Ru=new Gn(lt.comparator),this.Au=new Map,this.Vu=new Cy,this.du={},this.mu=new Map,this.fu=Kl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function $M(s,e,t=!0){const i=qk(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await Vk(i,e,t,!0),l}async function WM(s,e){const t=qk(s);await Vk(t,e,!0,!1)}async function Vk(s,e,t,i){const l=await dM(s.localStore,Si(e)),u=l.targetId,d=s.sharedClientState.addLocalQueryTarget(u,t);let p;return i&&(p=await GM(s,e,u,d==="current",l.resumeToken)),s.isPrimaryClient&&t&&Ak(s.remoteStore,l),p}async function GM(s,e,t,i,l){s.pu=(E,T,L)=>(async function(q,B,K,G){let Q=B.view.ru(K);Q.Ss&&(Q=await hw(q.localStore,B.query,!1).then((({documents:C})=>B.view.ru(C,Q))));const he=G&&G.targetChanges.get(B.targetId),Ee=G&&G.targetMismatches.get(B.targetId)!=null,ge=B.view.applyChanges(Q,q.isPrimaryClient,he,Ee);return _w(q,B.targetId,ge.au),ge.snapshot})(s,E,T,L);const u=await hw(s.localStore,e,!0),d=new zM(e,u.ks),p=d.ru(u.documents),g=Pu.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",l),y=d.applyChanges(p,s.isPrimaryClient,g);_w(s,t,y.au);const b=new FM(e,t,d);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function KM(s,e,t){const i=Et(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((d=>!ff(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await Pg(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),t&&Iy(i.remoteStore,l.targetId),Bg(i,l.targetId)})).catch(tc)):(Bg(i,l.targetId),await Pg(i.localStore,l.targetId,!0))}async function YM(s,e){const t=Et(s),i=t.Tu.get(e),l=t.Iu.get(i.targetId);t.isPrimaryClient&&l.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Iy(t.remoteStore,i.targetId))}async function QM(s,e,t){const i=s6(s);try{const l=await(function(d,p){const g=Et(d),y=At.now(),b=p.reduce(((L,$)=>L.add($.key)),Bt());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let $=ca(),q=Bt();return g.xs.getEntries(L,b).next((B=>{$=B,$.forEach(((K,G)=>{G.isValidDocument()||(q=q.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,$))).next((B=>{E=B;const K=[];for(const G of p){const Q=uI(G,E.get(G.key).overlayedDocument);Q!=null&&K.push(new ao(G.key,Q,W_(Q.value.mapValue),rr.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,K,p)})).next((B=>{T=B;const K=B.applyToLocalDocumentSet(E,q);return g.documentOverlayCache.saveOverlays(L,B.batchId,K)}))})).then((()=>({batchId:T.batchId,changes:sk(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new Gn(Ut)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(i,l.batchId,t),await Uu(i,l.changes),await _f(i.remoteStore)}catch(l){const u=Py(l,"Failed to persist write");t.reject(u)}}async function Uk(s,e){const t=Et(s);try{const i=await lM(t.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=t.Au.get(u);d&&(un(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?un(d.hu,14607):l.removedDocuments.size>0&&(un(d.hu,42227),d.hu=!1))})),await Uu(t,i,e)}catch(i){await tc(i)}}function xw(s,e,t){const i=Et(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const l=[];i.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=Et(d);g.onlineState=p;let y=!1;g.queries.forEach(((b,E)=>{for(const T of E.ba)T.va(p)&&(y=!0)})),y&&By(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function XM(s,e,t){const i=Et(s);i.sharedClientState.updateQueryState(e,"rejected",t);const l=i.Au.get(e),u=l&&l.key;if(u){let d=new Gn(lt.comparator);d=d.insert(u,Ws.newNoDocument(u,_t.min()));const p=Bt().add(u),g=new bf(_t.min(),new Map,new Gn(Ut),d,p);await Uk(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),qy(i)}else await Pg(i.localStore,e,!1).then((()=>Bg(i,e,t))).catch(tc)}async function JM(s,e){const t=Et(s),i=e.batch.batchId;try{const l=await oM(t.localStore,e);zk(t,i,null),Bk(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Uu(t,l)}catch(l){await tc(l)}}async function ZM(s,e,t){const i=Et(s);try{const l=await(function(d,p){const g=Et(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((E=>(un(E!==null,37113),b=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);zk(i,e,t),Bk(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Uu(i,l)}catch(l){await tc(l)}}function Bk(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function zk(s,e,t){const i=Et(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(t?u.reject(t):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function Bg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||Fk(s,i)}))}function Fk(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(Iy(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),qy(s))}function _w(s,e,t){for(const i of t)i instanceof Ok?(s.Vu.addReference(i.key,e),e6(s,i)):i instanceof Pk?(Ge(Fy,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||Fk(s,i.key)):wt(19791,{wu:i})}function e6(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||(Ge(Fy,"New document in limbo: "+t),s.Eu.add(i),qy(s))}function qy(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new lt(Cn.fromString(e)),i=s.fu.next();s.Au.set(i,new qM(t)),s.Ru=s.Ru.insert(t,i),Ak(s.remoteStore,new $a(Si(hf(t.path)),i,"TargetPurposeLimboResolution",cf.ce))}}async function Uu(s,e,t){const i=Et(s),l=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{d.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const b=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){l.push(y);const b=Ay.Es(g.targetId,y);u.push(b)}})))})),await Promise.all(d),i.Pu.J_(l),await(async function(g,y){const b=Et(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>Te.forEach(y,(T=>Te.forEach(T.Ts,(L=>b.persistence.referenceDelegate.addReference(E,T.targetId,L))).next((()=>Te.forEach(T.Is,(L=>b.persistence.referenceDelegate.removeReference(E,T.targetId,L)))))))))}catch(E){if(!nc(E))throw E;Ge(Ry,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const L=b.vs.get(T),$=L.snapshotVersion,q=L.withLastLimboFreeSnapshotVersion($);b.vs=b.vs.insert(T,q)}}})(i.localStore,u))}async function t6(s,e){const t=Et(s);if(!t.currentUser.isEqual(e)){Ge(Fy,"User change. New user:",e.toKey());const i=await jk(t.localStore,e);t.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new ze(ve.CANCELLED,d))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Uu(t,i.Ns)}}function n6(s,e){const t=Et(s),i=t.Au.get(e);if(i&&i.hu)return Bt().add(i.key);{let l=Bt();const u=t.Iu.get(e);if(!u)return l;for(const d of u){const p=t.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function qk(s){const e=Et(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=n6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XM.bind(null,e),e.Pu.J_=UM.bind(null,e.eventManager),e.Pu.yu=BM.bind(null,e.eventManager),e}function s6(s){const e=Et(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZM.bind(null,e),e}class Qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return aM(this.persistence,new sM,e.initialUser,this.serializer)}Cu(e){return new Tk(Ny.Vi,this.serializer)}Du(e){return new fM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qh.provider={build:()=>new Qh};class r6 extends Qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){un(this.persistence.referenceDelegate instanceof Kh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new FI(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hr.withCacheSize(this.cacheSizeBytes):hr.DEFAULT;return new Tk((i=>Kh.Vi(i,t)),this.serializer)}}class zg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=t6.bind(null,this.syncEngine),await OM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new VM})()}createDatastore(e){const t=wf(e.databaseInfo.databaseId),i=vM(e.databaseInfo);return kM(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,l,u,d,p){return new TM(i,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>xw(this.syncEngine,t,0)),(function(){return pw.v()?new pw:new mM})())}createSyncEngine(e,t){return(function(l,u,d,p,g,y,b){const E=new HM(l,u,d,p,g,y);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Et(t);Ge(Bo,"RemoteStore shutting down."),i.Ea.add(5),await Vu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}zg.provider={build:()=>new zg};class Hy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):la("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const no="FirestoreClient";class i6{constructor(e,t,i,l,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=l,this.user=$s.UNAUTHENTICATED,this.clientId=vy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{Ge(no,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(Ge(no,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Py(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function $p(s,e){s.asyncQueue.verifyOperationInProgress(),Ge(no,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await jk(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function kw(s,e){s.asyncQueue.verifyOperationInProgress();const t=await a6(s);Ge(no,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>yw(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>yw(e.remoteStore,l))),s._onlineComponents=e}async function a6(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ge(no,"Using user provided OfflineComponentProvider");try{await $p(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ve.FAILED_PRECONDITION||l.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(t))throw t;Fl("Error using user provided cache. Falling back to memory cache: "+t),await $p(s,new Qh)}}else Ge(no,"Using default OfflineComponentProvider"),await $p(s,new r6(void 0));return s._offlineComponents}async function Hk(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ge(no,"Using user provided OnlineComponentProvider"),await kw(s,s._uninitializedComponentsProvider._online)):(Ge(no,"Using default OnlineComponentProvider"),await kw(s,new zg))),s._onlineComponents}function o6(s){return Hk(s).then((e=>e.syncEngine))}async function Xh(s){const e=await Hk(s),t=e.eventManager;return t.onListen=$M.bind(null,e.syncEngine),t.onUnlisten=KM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=YM.bind(null,e.syncEngine),t}function l6(s,e,t,i){const l=new Hy(i),u=new zy(e,l,t);return s.asyncQueue.enqueueAndForget((async()=>Vy(await Xh(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>Uy(await Xh(s),u)))}}function c6(s,e,t={}){const i=new sa;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const b=new Hy({next:T=>{b.Nu(),d.enqueueAndForget((()=>Uy(u,E)));const L=T.docs.has(p);!L&&T.fromCache?y.reject(new ze(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&T.fromCache&&g&&g.source==="server"?y.reject(new ze(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new zy(hf(p.path),b,{includeMetadataChanges:!0,Ka:!0});return Vy(u,E)})(await Xh(s),s.asyncQueue,e,t,i))),i.promise}function u6(s,e,t={}){const i=new sa;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const b=new Hy({next:T=>{b.Nu(),d.enqueueAndForget((()=>Uy(u,E))),T.fromCache&&g.source==="server"?y.reject(new ze(ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new zy(p,b,{includeMetadataChanges:!0,Ka:!0});return Vy(u,E)})(await Xh(s),s.asyncQueue,e,t,i))),i.promise}function d6(s,e){const t=new sa;return s.asyncQueue.enqueueAndForget((async()=>QM(await o6(s),e,t))),t.promise}function $k(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const h6="ComponentProvider",Ew=new Map;function f6(s,e,t,i,l){return new MR(s,e,t,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,$k(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const Wk="firestore.googleapis.com",Tw=!0;class jw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wk,this.ssl=Tw}else this.host=e.host,this.ssl=e.ssl??Tw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ek;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BI)throw new ze(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$k(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ze(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ze(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ze(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kf{constructor(e,t,i,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new dR;switch(i.type){case"firstParty":return new pR(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ze(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Ew.get(t);i&&(Ge(h6,"Removing Datastore"),Ew.delete(t),i.terminate())})(this),Promise.resolve()}}function m6(s,e,t,i={}){s=sr(s,kf);const l=so(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;l&&(sy(`https://${p}`),ry("Firestore",!0)),u.host!==Wk&&u.host!==p&&Fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!ia(g,d)&&(s._setSettings(g),i.mockUserToken)){let y,b;if(typeof i.mockUserToken=="string")y=i.mockUserToken,b=$s.MOCK_USER;else{y=Ux(i.mockUserToken,s._app?.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ze(ve.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new $s(E)}s._authCredentials=new hR(new D_(y,b))}}class ha{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ha(this.firestore,e,this._query)}}class Xn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}toJSON(){return{type:Xn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Lu(t,Xn._jsonSchema))return new Xn(e,i||null,new lt(Cn.fromString(t.referencePath)))}}Xn._jsonSchemaVersion="firestore/documentReference/1.0",Xn._jsonSchema={type:ys("string",Xn._jsonSchemaVersion),referencePath:ys("string")};class Qa extends ha{constructor(e,t,i){super(e,t,hf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new lt(e))}withConverter(e){return new Qa(this.firestore,e,this._path)}}function mt(s,e,...t){if(s=dn(s),L_("collection","path",e),s instanceof kf){const i=Cn.fromString(e,...t);return U2(i),new Qa(s,null,i)}{if(!(s instanceof Xn||s instanceof Qa))throw new ze(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Cn.fromString(e,...t));return U2(i),new Qa(s.firestore,null,i)}}function We(s,e,...t){if(s=dn(s),arguments.length===1&&(e=vy.newId()),L_("doc","path",e),s instanceof kf){const i=Cn.fromString(e,...t);return V2(i),new Xn(s,null,new lt(i))}{if(!(s instanceof Xn||s instanceof Qa))throw new ze(ve.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Cn.fromString(e,...t));return V2(i),new Xn(s.firestore,s instanceof Qa?s.converter:null,new lt(i))}}const Sw="AsyncQueue";class Cw{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ck(this,"async_queue_retry"),this._c=()=>{const i=Hp();i&&Ge(Sw,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Hp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new sa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!nc(e))throw e;Ge(Sw,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,la("INTERNAL UNHANDLED ERROR: ",Nw(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const l=Oy.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&wt(47125,{Pc:Nw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Nw(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ri extends kf{constructor(e,t,i,l){super(e,t,i,l),this.type="firestore",this._queue=new Cw,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cw(e),this._firestoreClient=void 0,await e}}}function p6(s,e){const t=typeof s=="object"?s:Au(),i=typeof s=="string"?s:qh,l=Wo(t,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=Ox("firestore");u&&m6(l,...u)}return l}function Bu(s){if(s._terminated)throw new ze(ve.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||g6(s),s._firestoreClient}function g6(s){const e=s._freezeSettings(),t=f6(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new i6(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class $r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $r(Bs.fromBase64String(e))}catch(t){throw new ze(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $r(Bs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,$r._jsonSchema))return $r.fromBase64String(e.bytes)}}$r._jsonSchemaVersion="firestore/bytes/1.0",$r._jsonSchema={type:ys("string",$r._jsonSchemaVersion),bytes:ys("string")};class Ef{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ze(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ps(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qo{constructor(e){this._methodName=e}}class Ni{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ze(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ze(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ut(this._lat,e._lat)||Ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ni._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,Ni._jsonSchema))return new Ni(e.latitude,e.longitude)}}Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:ys("string",Ni._jsonSchemaVersion),latitude:ys("number"),longitude:ys("number")};class oi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new oi(e.vectorValues);throw new ze(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}oi._jsonSchemaVersion="firestore/vectorValue/1.0",oi._jsonSchema={type:ys("string",oi._jsonSchemaVersion),vectorValues:ys("object")};const y6=/^__.*__$/;class v6{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ou(e,this.data,t,this.fieldTransforms)}}class Gk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kk(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt(40011,{dataSource:s})}}class Tf{constructor(e,t,i,l,u,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Tf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Kk(this.dataSource)&&y6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class b6{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||wf(e)}createContext(e,t,i,l=!1){return new Tf({dataSource:e,methodName:t,targetDoc:i,path:Ps.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zu(s){const e=s._freezeSettings(),t=wf(s._databaseId);return new b6(s._databaseId,!!e.ignoreUndefinedProperties,t)}function $y(s,e,t,i,l,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,t,l);Qy("Data must be an object, but it was:",d,i);const p=Jk(i,d);let g,y;if(u.merge)g=new Sr(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const E of u.mergeFields){const T=zo(e,E,t);if(!d.contains(T))throw new ze(ve.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);tE(b,T)||b.push(T)}g=new Sr(b),y=d.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=d.fieldTransforms;return new v6(new fr(p),g,y)}class jf extends Qo{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function Yk(s,e,t){return new Tf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:s._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Wy extends Qo{_toFieldTransform(e){return new gf(e.path,new xu)}isEqual(e){return e instanceof Wy}}class Gy extends Qo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Yk(this,e,!0),i=this.Ac.map((u=>Xo(u,t))),l=new Wl(i);return new gf(e.path,l)}isEqual(e){return e instanceof Gy&&ia(this.Ac,e.Ac)}}class Ky extends Qo{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Yk(this,e,!0),i=this.Ac.map((u=>Xo(u,t))),l=new Gl(i);return new gf(e.path,l)}isEqual(e){return e instanceof Ky&&ia(this.Ac,e.Ac)}}class Yy extends Qo{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new _u(e.serializer,ak(e.serializer,this.Vc));return new gf(e.path,t)}isEqual(e){return e instanceof Yy&&this.Vc===e.Vc}}function Qk(s,e,t,i){const l=s.createContext(1,e,t);Qy("Data must be an object, but it was:",l,i);const u=[],d=fr.empty();io(i,((g,y)=>{const b=eE(e,g,t);y=dn(y);const E=l.childContextForFieldPath(b);if(y instanceof jf)u.push(b);else{const T=Xo(y,E);T!=null&&(u.push(b),d.set(b,T))}}));const p=new Sr(u);return new Gk(d,p,l.fieldTransforms)}function Xk(s,e,t,i,l,u){const d=s.createContext(1,e,t),p=[zo(e,i,t)],g=[l];if(u.length%2!=0)throw new ze(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)p.push(zo(e,u[T])),g.push(u[T+1]);const y=[],b=fr.empty();for(let T=p.length-1;T>=0;--T)if(!tE(y,p[T])){const L=p[T];let $=g[T];$=dn($);const q=d.childContextForFieldPath(L);if($ instanceof jf)y.push(L);else{const B=Xo($,q);B!=null&&(y.push(L),b.set(L,B))}}const E=new Sr(y);return new Gk(b,E,d.fieldTransforms)}function w6(s,e,t,i=!1){return Xo(t,s.createContext(i?4:3,e))}function Xo(s,e){if(Zk(s=dn(s)))return Qy("Unsupported field value:",e,s),Jk(s,e);if(s instanceof Qo)return(function(i,l){if(!Kk(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let d=0;for(const p of i){let g=Xo(p,l.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ak(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=At.fromDate(i);return{timestampValue:Gh(l.serializer,u)}}if(i instanceof At){const u=new At(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Gh(l.serializer,u)}}if(i instanceof Ni)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $r)return{bytesValue:gk(l.serializer,i._byteString)};if(i instanceof Xn){const u=l.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Sy(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof oi)return(function(d,p){const g=d instanceof oi?d.toArray():d;return{mapValue:{fields:{[H_]:{stringValue:$_},[Hh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return Ey(p.serializer,b)}))}}}}}})(i,l);if(kk(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${lf(i)}`)})(s,e)}function Jk(s,e){const t={};return V_(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):io(s,((i,l)=>{const u=Xo(l,e.childContextForField(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function Zk(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof At||s instanceof Ni||s instanceof $r||s instanceof Xn||s instanceof Qo||s instanceof oi||kk(s))}function Qy(s,e,t){if(!Zk(t)||!O_(t)){const i=lf(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function zo(s,e,t){if((e=dn(e))instanceof Ef)return e._internalPath;if(typeof e=="string")return eE(s,e);throw Jh("Field path arguments must be of type string or ",s,!1,void 0,t)}const x6=new RegExp("[~\\*/\\[\\]]");function eE(s,e,t){if(e.search(x6)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Ef(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Jh(s,e,t,i,l){const u=i&&!i.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${l}`),g+=")"),new ze(ve.INVALID_ARGUMENT,p+s+g)}function tE(s,e){return s.some((t=>t.isEqual(e)))}class _6{convertValue(e,t="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return os(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Za(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw wt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return io(e,((l,u)=>{i[l]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[Hh].arrayValue?.values?.map((i=>os(i.doubleValue)));return new oi(t)}convertGeoPoint(e){return new Ni(os(e.latitude),os(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=df(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(yu(e));default:return null}}convertTimestamp(e){const t=Ja(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Cn.fromString(e);un(_k(i),9688,{name:e});const l=new vu(i.get(1),i.get(3)),u=new lt(i.popFirst(5));return l.isEqual(t)||la(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class Xy extends _6{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}function Vs(){return new Wy("serverTimestamp")}function k6(...s){return new Gy("arrayUnion",s)}function E6(...s){return new Ky("arrayRemove",s)}function Ao(s){return new Yy("increment",s)}const Aw="@firebase/firestore",Rw="4.10.0";function Iw(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const l=t;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class nE{constructor(e,t,i,l,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new T6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(zo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class T6 extends nE{data(){return super.data()}}function sE(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ze(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jy{}class Zy extends Jy{}function Kt(s,e,...t){let i=[];e instanceof Jy&&i.push(e),i=i.concat(t),(function(u){const d=u.filter((g=>g instanceof e0)).length,p=u.filter((g=>g instanceof Sf)).length;if(d>1||d>0&&p>0)throw new ze(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class Sf extends Zy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Sf(e,t,i)}_apply(e){const t=this._parse(e);return rE(e._query,t),new ha(e.firestore,e.converter,Ig(e._query,t))}_parse(e){const t=zu(e.firestore);return(function(u,d,p,g,y,b,E){let T;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ze(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Dw(E,b);const $=[];for(const q of E)$.push(Mw(g,u,q));T={arrayValue:{values:$}}}else T=Mw(g,u,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Dw(E,b),T=w6(p,d,E,b==="in"||b==="not-in");return gs.create(y,b,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function xt(s,e,t){const i=e,l=zo("where",s);return Sf._create(l,i,t)}class e0 extends Jy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new e0(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ui.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(l,u){let d=l;const p=u.getFlattenedFilters();for(const g of p)rE(d,g),d=Ig(d,g)})(e._query,t),new ha(e.firestore,e.converter,Ig(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class t0 extends Zy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new t0(e,t)}_apply(e){const t=(function(l,u,d){if(l.startAt!==null)throw new ze(ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new ze(ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wu(u,d)})(e._query,this._field,this._direction);return new ha(e.firestore,e.converter,XR(e._query,t))}}function ku(s,e="asc"){const t=e,i=zo("orderBy",s);return t0._create(i,t)}class n0 extends Zy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n0(e,t,i)}_apply(e){return new ha(e.firestore,e.converter,Wh(e._query,this._limit,this._limitType))}}function Eu(s){return _R("limit",s),n0._create("limit",s,"F")}function Mw(s,e,t){if(typeof(t=dn(t))=="string"){if(t==="")throw new ze(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z_(e)&&t.indexOf("/")!==-1)throw new ze(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Cn.fromString(t));if(!lt.isDocumentKey(i))throw new ze(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return G2(s,new lt(i))}if(t instanceof Xn)return G2(s,t._key);throw new ze(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lf(t)}.`)}function Dw(s,e){if(!Array.isArray(s)||s.length===0)throw new ze(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rE(s,e){const t=(function(l,u){for(const d of l)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ze(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function s0(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class ru{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Io extends nE{constructor(e,t,i,l,u,d){super(e,t,i,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(zo("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Io._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Io._jsonSchemaVersion="firestore/documentSnapshot/1.0",Io._jsonSchema={type:ys("string",Io._jsonSchemaVersion),bundleSource:ys("string","DocumentSnapshot"),bundleName:ys("string"),bundle:ys("string")};class Ah extends Io{data(e={}){return super.data(e)}}class Mo{constructor(e,t,i,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new ru(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ah(this._firestore,this._userDataWriter,i.key,i,new ru(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ze(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new Ah(l._firestore,l._userDataWriter,p.doc.key,p.doc,new ru(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new Ah(l._firestore,l._userDataWriter,p.doc.key,p.doc,new ru(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),b=d.indexOf(p.doc.key)),{type:j6(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function j6(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt(61501,{type:s})}}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:ys("string",Mo._jsonSchemaVersion),bundleSource:ys("string","QuerySnapshot"),bundleName:ys("string"),bundle:ys("string")};class S6{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zu(e)}set(e,t,i){this._verifyNotCommitted();const l=Wp(e,this._firestore),u=s0(l.converter,t,i),d=$y(this._dataReader,"WriteBatch.set",l._key,u,l.converter!==null,i);return this._mutations.push(d.toMutation(l._key,rr.none())),this}update(e,t,i,...l){this._verifyNotCommitted();const u=Wp(e,this._firestore);let d;return d=typeof(t=dn(t))=="string"||t instanceof Ef?Xk(this._dataReader,"WriteBatch.update",u._key,t,i,l):Qk(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wp(e,this._firestore);return this._mutations=this._mutations.concat(new vf(t._key,rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wp(s,e){if((s=dn(s)).firestore!==e)throw new ze(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function Us(s){s=sr(s,Xn);const e=sr(s.firestore,Ri),t=Bu(e);return c6(t,s._key).then((i=>aE(e,s,i)))}function Ht(s){s=sr(s,ha);const e=sr(s.firestore,Ri),t=Bu(e),i=new Xy(e);return sE(s._query),u6(t,s._query).then((l=>new Mo(e,i,s,l)))}function Cs(s,e,t){s=sr(s,Xn);const i=sr(s.firestore,Ri),l=s0(s.converter,e,t),u=zu(i);return Fu(i,[$y(u,"setDoc",s._key,l,s.converter!==null,t).toMutation(s._key,rr.none())])}function ps(s,e,t,...i){s=sr(s,Xn);const l=sr(s.firestore,Ri),u=zu(l);let d;return d=typeof(e=dn(e))=="string"||e instanceof Ef?Xk(u,"updateDoc",s._key,e,t,i):Qk(u,"updateDoc",s._key,e),Fu(l,[d.toMutation(s._key,rr.exists(!0))])}function jr(s){return Fu(sr(s.firestore,Ri),[new vf(s._key,rr.none())])}function Cr(s,e){const t=sr(s.firestore,Ri),i=We(s),l=s0(s.converter,e),u=zu(s.firestore);return Fu(t,[$y(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,rr.exists(!1))]).then((()=>i))}function iE(s,...e){s=dn(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Iw(e[i])||(t=e[i++]);const l={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Iw(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,d,p;if(s instanceof Xn)d=sr(s.firestore,Ri),p=hf(s._key.path),u={next:y=>{e[i]&&e[i](aE(d,s,y))},error:e[i+1],complete:e[i+2]};else{const y=sr(s,ha);d=sr(y.firestore,Ri),p=y._query;const b=new Xy(d);u={next:E=>{e[i]&&e[i](new Mo(d,b,y,E))},error:e[i+1],complete:e[i+2]},sE(s._query)}const g=Bu(d);return l6(g,p,l,u)}function Fu(s,e){const t=Bu(s);return d6(t,e)}function aE(s,e,t){const i=t.docs.get(e._key),l=new Xy(s);return new Io(s,l,e._key,i,new ru(t.hasPendingWrites,t.fromCache),e.converter)}function Lw(s){return s=sr(s,Ri),Bu(s),new S6(s,(e=>Fu(s,e)))}(function(e,t=!0){uR(Go),li(new Gr("firestore",((i,{instanceIdentifier:l,options:u})=>{const d=i.getProvider("app").getImmediate(),p=new Ri(new fR(i.getProvider("auth-internal")),new gR(d,i.getProvider("app-check-internal")),DR(d,l),d);return u={useFetchStreams:t,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),mr(Aw,Rw,e),mr(Aw,Rw,"esm2020")})();var C6="firebase",N6="12.8.0";mr(C6,N6,"app");const oE="firebasestorage.googleapis.com",lE="storageBucket",A6=120*1e3,R6=600*1e3;class Zn extends hi{constructor(e,t,i=0){super(Gp(e),`Firebase Storage: ${t} (${Gp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Jn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Jn||(Jn={}));function Gp(s){return"storage/"+s}function r0(){const s="An unknown error occurred, please check the error payload for server response.";return new Zn(Jn.UNKNOWN,s)}function I6(s){return new Zn(Jn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function M6(s){return new Zn(Jn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function D6(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zn(Jn.UNAUTHENTICATED,s)}function L6(){return new Zn(Jn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function O6(s){return new Zn(Jn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function P6(){return new Zn(Jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function V6(){return new Zn(Jn.CANCELED,"User canceled the upload/download.")}function U6(s){return new Zn(Jn.INVALID_URL,"Invalid URL '"+s+"'.")}function B6(s){return new Zn(Jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function z6(){return new Zn(Jn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lE+"' property when initializing the app?")}function F6(){return new Zn(Jn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function q6(){return new Zn(Jn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function H6(s){return new Zn(Jn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Fg(s){return new Zn(Jn.INVALID_ARGUMENT,s)}function cE(){return new Zn(Jn.APP_DELETED,"The Firebase app was deleted.")}function $6(s){return new Zn(Jn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function du(s,e){return new Zn(Jn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Kc(s){throw new Zn(Jn.INTERNAL_ERROR,"Internal error: "+s)}class nr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=nr.makeFromUrl(e,t)}catch{return new nr(e,"")}if(i.path==="")return i;throw B6(e)}static makeFromUrl(e,t){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function y(he){he.path_=decodeURIComponent(he.path)}const b="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",L=new RegExp(`^https?://${E}/${b}/b/${l}/o${T}`,"i"),$={bucket:1,path:3},q=t===oE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,B="([^?#]*)",K=new RegExp(`^https?://${q}/${l}/${B}`,"i"),Q=[{regex:p,indices:g,postModify:u},{regex:L,indices:$,postModify:y},{regex:K,indices:{bucket:1,path:2},postModify:y}];for(let he=0;he<Q.length;he++){const Ee=Q[he],ge=Ee.regex.exec(e);if(ge){const C=ge[Ee.indices.bucket];let j=ge[Ee.indices.path];j||(j=""),i=new nr(C,j),Ee.postModify(i);break}}if(i==null)throw U6(e);return i}}class W6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function G6(s,e,t){let i=1,l=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function b(...B){y||(y=!0,e.apply(null,B))}function E(B){l=setTimeout(()=>{l=null,s(L,g())},B)}function T(){u&&clearTimeout(u)}function L(B,...K){if(y){T();return}if(B){T(),b.call(null,B,...K);return}if(g()||d){T(),b.call(null,B,...K);return}i<64&&(i*=2);let Q;p===1?(p=2,Q=0):Q=(i+Math.random())*1e3,E(Q)}let $=!1;function q(B){$||($=!0,T(),!y&&(l!==null?(B||(p=2),clearTimeout(l),E(0)):B||(p=1)))}return E(0),u=setTimeout(()=>{d=!0,q(!0)},t),q}function K6(s){s(!1)}function Y6(s){return s!==void 0}function Q6(s){return typeof s=="object"&&!Array.isArray(s)}function i0(s){return typeof s=="string"||s instanceof String}function Ow(s){return a0()&&s instanceof Blob}function a0(){return typeof Blob<"u"}function qg(s,e,t,i){if(i<e)throw Fg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>t)throw Fg(`Invalid value for '${s}'. Expected ${t} or less.`)}function Cf(s,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${s}`}function uE(s){const e=encodeURIComponent;let t="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);t=t+l+"&"}return t=t.slice(0,-1),t}var Do;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Do||(Do={}));function X6(s,e){const t=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||l||u}class J6{constructor(e,t,i,l,u,d,p,g,y,b,E,T=!0,L=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(($,q)=>{this.resolve_=$,this.reject_=q,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new dh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===Do.NO_ERROR,g=u.getStatus();if(!p||X6(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Do.ABORT;i(!1,new dh(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new dh(y,u))})},t=(i,l)=>{const u=this.resolve_,d=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());Y6(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=r0();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(l.canceled){const g=this.appDelete_?cE():V6();d(g)}else{const g=P6();d(g)}};this.canceled_?t(!1,new dh(!1,null,!0)):this.backoffId_=G6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&K6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dh{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Z6(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function eD(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tD(s,e){e&&(s["X-Firebase-GMPID"]=e)}function nD(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function sD(s,e,t,i,l,u,d=!0,p=!1){const g=uE(s.urlParams),y=s.url+g,b=Object.assign({},s.headers);return tD(b,e),Z6(b,t),eD(b,u),nD(b,i),new J6(y,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,d,p)}function rD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iD(...s){const e=rD();if(e!==void 0){const t=new e;for(let i=0;i<s.length;i++)t.append(s[i]);return t.getBlob()}else{if(a0())return new Blob(s);throw new Zn(Jn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function aD(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function oD(s){if(typeof atob>"u")throw H6("base-64");return atob(s)}const Ei={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kp{constructor(e,t){this.data=e,this.contentType=t||null}}function lD(s,e){switch(s){case Ei.RAW:return new Kp(dE(e));case Ei.BASE64:case Ei.BASE64URL:return new Kp(hE(s,e));case Ei.DATA_URL:return new Kp(uD(e),dD(e))}throw r0()}function dE(s){const e=[];for(let t=0;t<s.length;t++){let i=s.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=i,d=s.charCodeAt(++t);i=65536|(u&1023)<<10|d&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function cD(s){let e;try{e=decodeURIComponent(s)}catch{throw du(Ei.DATA_URL,"Malformed data URL.")}return dE(e)}function hE(s,e){switch(s){case Ei.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw du(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case Ei.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw du(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=oD(e)}catch(l){throw l.message.includes("polyfill")?l:du(s,"Invalid character found")}const i=new Uint8Array(t.length);for(let l=0;l<t.length;l++)i[l]=t.charCodeAt(l);return i}class fE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw du(Ei.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=hD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function uD(s){const e=new fE(s);return e.base64?hE(Ei.BASE64,e.rest):cD(e.rest)}function dD(s){return new fE(s).contentType}function hD(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Ha{constructor(e,t){let i=0,l="";Ow(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ow(this.data_)){const i=this.data_,l=aD(i,e,t);return l===null?null:new Ha(l)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Ha(i,!0)}}static getBlob(...e){if(a0()){const t=e.map(i=>i instanceof Ha?i.data_:i);return new Ha(iD.apply(null,t))}else{const t=e.map(d=>i0(d)?lD(Ei.RAW,d).data:d.data_);let i=0;t.forEach(d=>{i+=d.byteLength});const l=new Uint8Array(i);let u=0;return t.forEach(d=>{for(let p=0;p<d.length;p++)l[u++]=d[p]}),new Ha(l,!0)}}uploadData(){return this.data_}}function o0(s){let e;try{e=JSON.parse(s)}catch{return null}return Q6(e)?e:null}function fD(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function mD(s,e){const t=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?t:s+"/"+t}function mE(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function pD(s,e){return e}class tr{constructor(e,t,i,l){this.server=e,this.local=t||e,this.writable=!!i,this.xform=l||pD}}let hh=null;function gD(s){return!i0(s)||s.length<2?s:mE(s)}function pE(){if(hh)return hh;const s=[];s.push(new tr("bucket")),s.push(new tr("generation")),s.push(new tr("metageneration")),s.push(new tr("name","fullPath",!0));function e(u,d){return gD(d)}const t=new tr("name");t.xform=e,s.push(t);function i(u,d){return d!==void 0?Number(d):d}const l=new tr("size");return l.xform=i,s.push(l),s.push(new tr("timeCreated")),s.push(new tr("updated")),s.push(new tr("md5Hash",null,!0)),s.push(new tr("cacheControl",null,!0)),s.push(new tr("contentDisposition",null,!0)),s.push(new tr("contentEncoding",null,!0)),s.push(new tr("contentLanguage",null,!0)),s.push(new tr("contentType",null,!0)),s.push(new tr("metadata","customMetadata",!0)),hh=s,hh}function yD(s,e){function t(){const i=s.bucket,l=s.fullPath,u=new nr(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function vD(s,e,t){const i={};i.type="file";const l=t.length;for(let u=0;u<l;u++){const d=t[u];i[d.local]=d.xform(i,e[d.server])}return yD(i,s),i}function gE(s,e,t){const i=o0(e);return i===null?null:vD(s,i,t)}function bD(s,e,t,i){const l=o0(e);if(l===null||!i0(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const b=s.bucket,E=s.fullPath,T="/b/"+d(b)+"/o/"+d(E),L=Cf(T,t,i),$=uE({alt:"media",token:y});return L+$})[0]}function wD(s,e){const t={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}const Pw="prefixes",Vw="items";function xD(s,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Pw])for(const l of t[Pw]){const u=l.replace(/\/$/,""),d=s._makeStorageReference(new nr(e,u));i.prefixes.push(d)}if(t[Vw])for(const l of t[Vw]){const u=s._makeStorageReference(new nr(e,l.name));i.items.push(u)}return i}function _D(s,e,t){const i=o0(t);return i===null?null:xD(s,e,i)}class l0{constructor(e,t,i,l){this.url=e,this.method=t,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function c0(s){if(!s)throw r0()}function kD(s,e){function t(i,l){const u=gE(s,l,e);return c0(u!==null),u}return t}function ED(s,e){function t(i,l){const u=_D(s,e,l);return c0(u!==null),u}return t}function TD(s,e){function t(i,l){const u=gE(s,l,e);return c0(u!==null),bD(u,l,s.host,s._protocol)}return t}function u0(s){function e(t,i){let l;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?l=L6():l=D6():t.getStatus()===402?l=M6(s.bucket):t.getStatus()===403?l=O6(s.path):l=i,l.status=t.getStatus(),l.serverResponse=i.serverResponse,l}return e}function jD(s){const e=u0(s);function t(i,l){let u=e(i,l);return i.getStatus()===404&&(u=I6(s.path)),u.serverResponse=l.serverResponse,u}return t}function SD(s,e,t,i,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",t.length>0&&(u.delimiter=t),i&&(u.pageToken=i),l&&(u.maxResults=l);const d=e.bucketOnlyServerUrl(),p=Cf(d,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,b=new l0(p,g,ED(s,e.bucket),y);return b.urlParams=u,b.errorHandler=u0(e),b}function CD(s,e,t){const i=e.fullServerUrl(),l=Cf(i,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new l0(l,u,TD(s,t),d);return p.errorHandler=jD(e),p}function ND(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function AD(s,e,t){const i=Object.assign({},t);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=ND(null,e)),i}function RD(s,e,t,i,l){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let Q="";for(let he=0;he<2;he++)Q=Q+Math.random().toString().slice(2);return Q}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=AD(e,i,l),b=wD(y,t),E="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+g+"--",L=Ha.getBlob(E,i,T);if(L===null)throw F6();const $={name:y.fullPath},q=Cf(u,s.host,s._protocol),B="POST",K=s.maxUploadRetryTime,G=new l0(q,B,kD(s,t),K);return G.urlParams=$,G.headers=d,G.body=L.uploadData(),G.errorHandler=u0(e),G}class ID{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Do.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Do.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Do.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,l,u){if(this.sent_)throw Kc("cannot .send() more than once");if(so(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Kc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Kc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Kc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Kc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class MD extends ID{initXhr(){this.xhr_.responseType="text"}}function d0(){return new MD}class Fo{constructor(e,t){this._service=e,t instanceof nr?this._location=t:this._location=nr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fo(e,t)}get root(){const e=new nr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mE(this._location.path)}get storage(){return this._service}get parent(){const e=fD(this._location.path);if(e===null)return null;const t=new nr(this._location.bucket,e);return new Fo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw $6(e)}}function DD(s,e,t){s._throwIfRoot("uploadBytes");const i=RD(s.storage,s._location,pE(),new Ha(e,!0),t);return s.storage.makeRequestWithTokens(i,d0).then(l=>({metadata:l,ref:s}))}function LD(s){const e={prefixes:[],items:[]};return yE(s,e).then(()=>e)}async function yE(s,e,t){const l=await OD(s,{pageToken:t});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await yE(s,e,l.nextPageToken)}function OD(s,e){e!=null&&typeof e.maxResults=="number"&&qg("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=SD(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(i,d0)}function PD(s){s._throwIfRoot("getDownloadURL");const e=CD(s.storage,s._location,pE());return s.storage.makeRequestWithTokens(e,d0).then(t=>{if(t===null)throw q6();return t})}function VD(s,e){const t=mD(s._location.path,e),i=new nr(s._location.bucket,t);return new Fo(s.storage,i)}function UD(s){return/^[A-Za-z]+:\/\//.test(s)}function BD(s,e){return new Fo(s,e)}function vE(s,e){if(s instanceof h0){const t=s;if(t._bucket==null)throw z6();const i=new Fo(t,t._bucket);return e!=null?vE(i,e):i}else return e!==void 0?VD(s,e):s}function zD(s,e){if(e&&UD(e)){if(s instanceof h0)return BD(s,e);throw Fg("To use ref(service, url), the first argument must be a Storage instance.")}else return vE(s,e)}function Uw(s,e){const t=e?.[lE];return t==null?null:nr.makeFromBucketSpec(t,s)}function FD(s,e,t,i={}){s.host=`${e}:${t}`;const l=so(e);l&&(sy(`https://${s.host}/b`),ry("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:Ux(u,s.app.options.projectId))}class h0{constructor(e,t,i,l,u,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=oE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A6,this._maxUploadRetryTime=R6,this._requests=new Set,l!=null?this._bucket=nr.makeFromBucketSpec(l,this._host):this._bucket=Uw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=nr.makeFromBucketSpec(this._url,e):this._bucket=Uw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fo(this,e)}_makeRequest(e,t,i,l,u=!0){if(this._deleted)return new W6(cE());{const d=sD(e,this._appId,i,l,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,l).getPromise()}}const Bw="@firebase/storage",zw="0.14.0";const bE="storage";function Rh(s,e,t){return s=dn(s),DD(s,e,t)}function Fw(s){return s=dn(s),LD(s)}function Lo(s){return s=dn(s),PD(s)}function Wa(s,e){return s=dn(s),zD(s,e)}function qD(s=Au(),e){s=dn(s);const i=Wo(s,bE).getImmediate({identifier:e}),l=Ox("storage");return l&&HD(i,...l),i}function HD(s,e,t,i={}){FD(s,e,t,i)}function $D(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new h0(t,i,l,e,Go)}function WD(){li(new Gr(bE,$D,"PUBLIC").setMultipleInstances(!0)),mr(Bw,zw,""),mr(Bw,zw,"esm2020")}WD();const wE={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},f0=oy(wE),jo=j_(f0),ye=p6(f0),Ga=qD(f0),GD=oy(wE,"secondary"),LO=j_(GD),KD="EYdciKDOi3UYBLk1u8hHams5tmO2",xE=w.createContext();function Ar(){return w.useContext(xE)}function YD({children:s}){const[e,t]=w.useState(null),[i,l]=w.useState(!1),[u,d]=w.useState(!1),[p,g]=w.useState(null),[y,b]=w.useState(!0);w.useEffect(()=>{let G=null;const Q=JA(jo,he=>{if(t(he),G&&(G(),G=null),he)if(he.uid===KD)l(!0),d(!1),g(null),b(!1);else{l(!1);const Ee=Kt(mt(ye,"clients"),xt("uid","==",he.uid)),ge=async()=>{const C=localStorage.getItem("mcf_clientId");if(C)try{const j=await Us(We(ye,"clients",C));j.exists()&&(d(!0),g({id:j.id,...j.data()}))}catch(j){console.error("Direct client read failed:",j)}};G=iE(Ee,async C=>{if(C.empty)await ge();else{const j=C.docs[0];d(!0),g({id:j.id,...j.data()});try{localStorage.setItem("mcf_clientId",j.id)}catch{}}b(!1)},async C=>{console.error("Error listening to client data:",C),await ge(),b(!1)})}else l(!1),d(!1),g(null),b(!1)});return()=>{Q(),G&&G()}},[]);const K={currentUser:e,isAdmin:i,isClient:u,clientData:p,updateClientData:G=>{g(Q=>Q?{...Q,...G}:G)},resolveClient:async()=>{if(p)return p;const G=localStorage.getItem("mcf_clientId");if(G)try{const Q=await Us(We(ye,"clients",G));if(Q.exists()){const he={id:Q.id,...Q.data()};return d(!0),g(he),he}}catch(Q){console.error("resolveClient direct read failed:",Q)}if(e){const Q=Kt(mt(ye,"clients"),xt("uid","==",e.uid)),he=await Ht(Q);if(!he.empty){const Ee={id:he.docs[0].id,...he.docs[0].data()};return d(!0),g(Ee),Ee}}return null},login:async(G,Q,he=!0)=>(await T2(jo,he?Eg:my),await YA(jo,G,Q)),signup:async(G,Q,he)=>{await T2(jo,Eg);const Ee=await KA(jo,Q.trim().toLowerCase(),he),ge=Ee.user,C=We(mt(ye,"clients")),j={uid:ge.uid,name:G.trim(),email:Q.trim().toLowerCase(),clientType:"core_buddy",coreBuddyAccess:!0,status:"active",tier:"free",subscriptionStatus:null,signupSource:"self_signup",createdAt:At.now()};await Cs(C,j),d(!0),g({id:C.id,...j});try{localStorage.setItem("mcf_clientId",C.id)}catch{}return Ee},logout:()=>{try{localStorage.removeItem("mcf_clientId")}catch{}return ZA(jo)},resetPassword:G=>GA(jo,G),loading:y};return a.jsx(xE.Provider,{value:K,children:s})}const _E=w.createContext();function Mi(){return w.useContext(_E)}function QD({children:s}){const[e,t]=w.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[i,l]=w.useState(()=>localStorage.getItem("accent")||"red");w.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),w.useEffect(()=>{localStorage.setItem("accent",i)},[i]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),t(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:i,setAccent:g=>l(g)};return a.jsx(_E.Provider,{value:p,children:s})}const kE=w.createContext();function ic(){return w.useContext(kE)}const XD=["nutrition","buddies"],JD=[5,10],ZD=2,e3=1;function t3({children:s}){const{clientData:e,loading:t}=Ar(),i=w.useMemo(()=>{const l=e?.tier||"free",u=e?.subscriptionStatus||null,d=e&&e.signupSource!=="self_signup",p=l==="premium"||!!d;function g(y){return p?!0:!XD.includes(y)}return{tier:l,subscriptionStatus:u,isPremium:p,canAccess:g,loading:t,FREE_RANDOMISER_DURATIONS:JD,FREE_RANDOMISER_WEEKLY_LIMIT:ZD,FREE_HABIT_LIMIT:e3}},[e?.tier,e?.subscriptionStatus,e?.signupSource,t]);return a.jsx(kE.Provider,{value:i,children:s})}function n3(s){if(s?.signupSource==="self_signup"&&!s?.onboardingComplete)return"/onboarding";const e=s?.clientType;return e==="core_buddy"?"/client/core-buddy":e==="circuit_vip"||e==="circuit_dropin"?"/client/circuit":"/client"}function s3({className:s=""}){const{isDark:e,toggleTheme:t}=Mi();return a.jsx("button",{className:s||"theme-toggle",onClick:t,"aria-label":e?"Switch to light mode":"Switch to dark mode",children:e?a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:a.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})})}function r3(){const[s,e]=w.useState(""),[t,i]=w.useState(""),[l,u]=w.useState(!0),[d,p]=w.useState(""),[g,y]=w.useState(!1),[b,E]=w.useState(!1),[T,L]=w.useState(!1),{login:$,resetPassword:q,currentUser:B,isAdmin:K,isClient:G,clientData:Q,loading:he}=Ar(),Ee=Ys();if(w.useEffect(()=>{if(!he&&B){if(!B.emailVerified&&Q?.signupSource==="self_signup"){Ee("/signup");return}K?Ee("/dashboard"):G?Ee(n3(Q)):(y(!1),p("No account found. Please sign up or contact your trainer."))}},[he,B,K,G,Q,Ee]),he||B)return a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"var(--bg-body)"},children:a.jsx("div",{style:{width:36,height:36,border:"3px solid var(--color-primary-light)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"app-spin .7s linear infinite"}})});const ge=async j=>{j.preventDefault(),p(""),y(!0);try{await $(s,t,l)}catch(R){p(R.message||"Failed to log in"),y(!1)}},C=async j=>{if(j.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await q(s.trim()),L(!0)}catch(R){R.code==="auth/user-not-found"?p("No account found with this email"):p(R.message||"Failed to send reset email")}y(!1)};return a.jsxs("div",{className:"login-container",children:[a.jsx(s3,{className:"login-theme-toggle"}),a.jsxs("div",{className:"login-card",children:[a.jsxs("div",{className:"login-header",children:[a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),a.jsx("p",{children:a.jsx("strong",{children:b?"Reset Password":"Sign in as 1-2-1 or a Core Buddy"})})]}),d&&a.jsx("div",{className:"error-message",children:d}),T?a.jsxs("div",{className:"reset-sent",children:[a.jsx("div",{className:"reset-sent-icon",children:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),a.jsx("p",{children:"Reset email sent!"}),a.jsx("span",{children:"Check your inbox for a password reset link"}),a.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{E(!1),L(!1),p("")},children:"Back to Log In"})]}):b?a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:j=>e(j.target.value),placeholder:"Enter your email",required:!0})]}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!1),p("")},children:"Back to Log In"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:ge,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"email",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:s,onChange:j=>e(j.target.value),required:!0})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{htmlFor:"password",children:"Password"}),a.jsx("input",{type:"password",id:"password",value:t,onChange:j=>i(j.target.value),required:!0})]}),a.jsx("div",{className:"remember-me",children:a.jsxs("label",{children:[a.jsx("input",{type:"checkbox",checked:l,onChange:j=>u(j.target.checked)}),a.jsx("span",{children:"Remember me"})]})}),a.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),a.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{E(!0),p("")},children:"Forgot password?"}),a.jsx("button",{type:"button",className:"login-btn login-btn-outline",onClick:()=>Ee("/signup"),children:"Don't have an account? Create one free"})]}),a.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})]})}function fh({feature:s,children:e}){const{canAccess:t,loading:i}=ic();return i||t(s)?e:a.jsx(jx,{to:"/upgrade",replace:!0})}function Kr({active:s}){const e=Ys(),{clientData:t}=Ar(),{isPremium:i}=ic(),l=t?.clientType==="block"&&t?.coreBuddyAccess;return a.jsxs("nav",{className:"block-bottom-nav",children:[a.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),a.jsx("span",{children:"Profile"})]}),a.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:a.jsx("path",{d:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"})}),a.jsx("span",{children:"Workout"})]}),i&&a.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),a.jsx("span",{children:"Nutrition"})]}),i&&a.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"Buddies"})]}),a.jsxs("button",{className:`block-nav-tab${s==="badges"?" active":""}`,onClick:()=>e("/client/core-buddy/badges"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M9 14l-4 8h14l-4-8"})]}),a.jsx("span",{children:"Badges"})]}),l&&a.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),a.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),a.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),a.jsx("span",{children:"Block"})]})]})}function Jo({children:s,onRefresh:e}){const[t,i]=w.useState(0),[l,u]=w.useState(!1),d=w.useRef(null),p=w.useRef(0),g=w.useRef(!1),y=w.useCallback(T=>{window.scrollY<=0&&(p.current=T.touches[0].clientY,g.current=!0)},[]),b=w.useCallback(T=>{if(!g.current||l)return;const L=T.touches[0].clientY-p.current;L>20&&window.scrollY<=0&&(T.preventDefault(),i(Math.min((L-20)*.35,80)))},[l]),E=w.useCallback(async()=>{t>55&&!l&&(u(!0),e?await e():window.location.reload(),u(!1)),i(0),g.current=!1},[t,l,e]);return a.jsxs("div",{ref:d,onTouchStart:y,onTouchMove:b,onTouchEnd:E,children:[a.jsxs("div",{className:`pull-refresh-indicator ${t>0?"visible":""} ${l?"refreshing":""}`,style:{height:t},children:[a.jsx("div",{className:`refresh-spinner ${l?"spinning":""}`,children:a.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:a.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),a.jsx("span",{className:"refresh-text",children:l?"Refreshing...":"Pull to refresh"})]}),s]})}function qu(s,e,t,i,l){const u=[];for(let d=0;d<s;d++){const p=(d*(360/s)-90)*(Math.PI/180);u.push({x1:e+i*Math.cos(p),y1:t+i*Math.sin(p),x2:e+l*Math.cos(p),y2:t+l*Math.sin(p),thick:d%5===0})}return u}const EE=qu(60,100,100,85,96),i3=qu(60,100,100,78,94),a3=qu(60,100,100,82,94);qu(60,50,50,38,46);const OO=qu(60,40,40,30,37);function o3({steps:s,onFinish:e,active:t}){const[i,l]=w.useState(0),[u,d]=w.useState(null),[p,g]=w.useState("below"),[y,b]=w.useState(!1),E=w.useRef(null),T=w.useRef(t);T.current=t,w.useEffect(()=>{t||l(0)},[t]),w.useEffect(()=>{if(!t)return;const Ee=ge=>ge.preventDefault();return document.addEventListener("touchmove",Ee,{passive:!1}),document.addEventListener("wheel",Ee,{passive:!1}),document.body.style.overflow="hidden",()=>{document.removeEventListener("touchmove",Ee),document.removeEventListener("wheel",Ee),document.body.style.overflow=""}},[t]);const L=w.useMemo(()=>t?s.filter(Ee=>document.querySelector(Ee.selector)):[],[t]),$=L[i],q=i===L.length-1,B=$?.selector,K=w.useCallback(()=>{if(!B)return;const Ee=document.querySelector(B);if(!Ee){d(null);return}const ge=Ee.getBoundingClientRect(),C=8;d({top:ge.top-C,left:ge.left-C,width:ge.width+C*2,height:ge.height+C*2});const j=window.innerHeight-ge.bottom;g(j<260?"above":"below")},[B]);if(w.useEffect(()=>{if(!t||!B)return;b(!0);const Ee=document.querySelector(B);if(Ee){document.body.style.overflow="",Ee.scrollIntoView({behavior:"smooth",block:"center"});let ge=null,C=0,j=0;const R=60,V=()=>{j++;const A=Ee.getBoundingClientRect(),Le=Math.round(A.top);if(ge!==null&&Le===ge?C++:C=0,ge=Le,C>=3||j>=R){T.current&&(document.body.style.overflow="hidden"),K(),b(!1);return}O=requestAnimationFrame(V)};let O;const D=setTimeout(()=>{O=requestAnimationFrame(V)},120);return()=>{clearTimeout(D),O&&cancelAnimationFrame(O),T.current&&(document.body.style.overflow="hidden")}}},[t,i,B,K]),w.useEffect(()=>{if(!t)return;const Ee=()=>{E.current&&cancelAnimationFrame(E.current),E.current=requestAnimationFrame(K)};return window.addEventListener("scroll",Ee,!0),window.addEventListener("resize",Ee),()=>{window.removeEventListener("scroll",Ee,!0),window.removeEventListener("resize",Ee),E.current&&cancelAnimationFrame(E.current)}},[t,K]),!t||!$||L.length===0)return null;const G=()=>{q?e():l(i+1)},Q=()=>{i>0&&l(i-1)},he=()=>e();return a.jsxs("div",{className:"st-overlay",onClick:Ee=>{Ee.stopPropagation()},children:[a.jsx("div",{className:"st-backdrop",onClick:G}),u&&a.jsx("div",{className:`st-spotlight${y?" st-transitioning":""}`,style:{top:u.top,left:u.left,width:u.width,height:u.height}}),u&&a.jsxs("div",{className:`st-tooltip st-tooltip-${p}${y?" st-transitioning":""}`,style:{top:p==="below"?Math.min(Math.max(u.top+u.height+16,16),window.innerHeight-200):void 0,bottom:p==="above"?Math.min(Math.max(window.innerHeight-u.top+16,16),window.innerHeight-60):void 0,left:Math.max(16,Math.min(u.left,window.innerWidth-320))},children:[a.jsx("div",{className:"st-dots",children:L.map((Ee,ge)=>a.jsx("span",{className:`st-dot${ge===i?" active":""}${ge<i?" done":""}`},ge))}),a.jsx("h3",{className:"st-title",children:$.title}),a.jsx("p",{className:"st-body",children:$.body}),a.jsxs("div",{className:"st-actions",children:[i>0&&a.jsx("button",{className:"st-btn st-btn-back",onClick:Q,children:"Back"}),a.jsx("button",{className:"st-btn st-btn-next",onClick:G,children:$.cta||(q?"Let's Go!":"Next")})]}),a.jsx("button",{className:"st-skip",onClick:he,children:"Skip tour"})]})]})}const l3="/login/assets/first_workout-B8SFkzJX.PNG",c3="/login/assets/workouts_10-Z5R3u0xH.PNG",u3="/login/assets/workouts_25-CzxSlcAj.PNG",d3="/login/assets/workouts_50-BpzWup3V.PNG",h3="/login/assets/workouts_100-D7_r6tn1.PNG",f3="/login/assets/streak_2-CsRr-XA9.PNG",m3="/login/assets/streak_4-BHO09tbw.PNG",p3="/login/assets/streak_8-DX2UWMko.PNG",g3="/login/assets/first_pb-aVf_CNWy.PNG",y3="/login/assets/pbs_5-Cippawgg.PNG",v3="/login/assets/pbs_10-CZgGh9Kv.PNG",b3="/login/assets/pbs_100-C67b1wfS.PNG",w3="/login/assets/nutrition_7-CHVV11fj.PNG",x3="/login/assets/leaderboard_join-BLoId4Hz.PNG",_3="/login/assets/habits_7-Dvki70KO.PNG",k3="/login/assets/starter_streak-CCltAfrC.PNG",E3="/login/assets/consistency_king-Cho2jxBt.PNG",T3="/login/assets/thirty_in_thirty-B0BVHafW.PNG",j3="/login/assets/minute_master-hA2RLkIL.PNG",S3="/login/assets/habit_machine--nFXaIUW.PNG",C3="/login/assets/iron_will-Dh2dTaie.PNG",Oo=[{id:"first_workout",img:l3,name:"First Rep",desc:"Complete your first workout",category:"workouts",threshold:1},{id:"workouts_10",img:c3,name:"On Fire",desc:"Complete 10 workouts",category:"workouts",threshold:10},{id:"workouts_25",img:u3,name:"Dedicated",desc:"Complete 25 workouts",category:"workouts",threshold:25},{id:"workouts_50",img:d3,name:"Unstoppable",desc:"Complete 50 workouts",category:"workouts",threshold:50},{id:"workouts_100",img:h3,name:"Century",desc:"Complete 100 workouts",category:"workouts",threshold:100},{id:"streak_2",img:f3,name:"2 Week Streak",desc:"Work out for 2 weeks in a row",category:"streaks",threshold:2},{id:"streak_4",img:m3,name:"Month Strong",desc:"Work out for 4 weeks in a row",category:"streaks",threshold:4},{id:"streak_8",img:p3,name:"Iron Will",desc:"Work out for 8 weeks in a row",category:"streaks",threshold:8},{id:"first_pb",img:g3,name:"First PB",desc:"Set your first personal best",category:"pbs",threshold:1},{id:"pbs_5",img:y3,name:"PB Hunter",desc:"Set 5 personal bests",category:"pbs",threshold:5},{id:"pbs_10",img:v3,name:"PB Machine",desc:"Set 10 personal bests",category:"pbs",threshold:10},{id:"pbs_100",img:b3,name:"PB Legend",desc:"Set 100 personal bests",category:"pbs",threshold:100},{id:"nutrition_7",img:w3,name:"Macro Master",desc:"Hit your macro targets 7 days in a row",category:"nutrition",threshold:7},{id:"leaderboard_join",img:x3,name:"Competitor",desc:"Join the leaderboard",category:"leaderboard",threshold:1},{id:"habits_7",img:_3,name:"Habit Streak",desc:"Complete your daily habits 7 days in a row",category:"habits",threshold:7},{id:"starter_streak",img:k3,name:"Starter Streak",desc:"Complete 5 workouts in 7 days",category:"challenges",threshold:1},{id:"consistency_king",img:E3,name:"Consistency King",desc:"Complete 12 workouts in 30 days",category:"challenges",threshold:1},{id:"thirty_in_thirty",img:T3,name:"30 in 30",desc:"Complete 30 workouts in 30 days",category:"challenges",threshold:1},{id:"minute_master",img:j3,name:"Minute Master",desc:"Train for 300 total minutes in 30 days",category:"challenges",threshold:1},{id:"habit_machine",img:S3,name:"Habit Machine",desc:"Hit all daily habits for 7 days straight",category:"challenges",threshold:1},{id:"iron_will",img:C3,name:"Iron Will",desc:"Work out every day for 14 days straight",category:"challenges",threshold:1}],qw=3,Hw=5,N3=["trained","protein","steps","sleep","water"];function Yp(s){return s.toISOString().split("T")[0]}const Qp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}],Yc={morning:[{main:"Rise and grind,",sub:"let's get after it!"},{main:"New day, new gains,",sub:"let's build something!"},{main:"The early bird gets the gains,",sub:"let's go!"},{main:"Winners wake up ready,",sub:"you showed up!"}],afternoon:[{main:"Oye",sub:"crack on and make it count!"},{main:"Halfway through the day,",sub:"don't ease off now!"},{main:"Afternoon push,",sub:"this is where champions are made!"},{main:"Still time to make today count,",sub:"let's go!"}],evening:[{main:"Evening session?",sub:"Let's finish strong!"},{main:"End the day on a high,",sub:"you earned it!"},{main:"Night owls lift heavier,",sub:"prove it!"},{main:"One more session today?",sub:"Close it out!"}],night:[{main:"Burning the midnight oil,",sub:"Respect the hustle!"},{main:"Late night dedication,",sub:"that's what sets you apart!"},{main:"While they sleep,",sub:"you grind!"}],allDone:[{main:"Smashed it today,",sub:"Rest up and go again tomorrow."},{main:"All tasks crushed,",sub:"Absolute machine!"},{main:"Nothing left undone,",sub:"That's elite-level discipline."}]};function Xp(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function Qc(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function A3(s,e=800){return new Promise(t=>{const i=new Image;i.onload=()=>{const l=document.createElement("canvas");let u=i.width,d=i.height;u>d?u>e&&(d=Math.round(d*e/u),u=e):d>e&&(u=Math.round(u*e/d),d=e),l.width=u,l.height=d,l.getContext("2d").drawImage(i,0,0,u,d),l.toBlob(p=>t(p),"image/jpeg",.8)},i.src=URL.createObjectURL(s)})}function R3(){const{currentUser:s,isClient:e,clientData:t,logout:i,updateClientData:l,loading:u}=Ar(),{isDark:d,toggleTheme:p}=Mi(),{isPremium:g,FREE_HABIT_LIMIT:y}=ic(),b=Ys(),[E,T]=w.useState(g?Hw:y),L=E,[$,q]=w.useState({hours:0,minutes:0,seconds:0}),[B,K]=w.useState(0),[G,Q]=w.useState(0),[he,Ee]=w.useState(0),[ge,C]=w.useState(!1),[j,R]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[V,O]=w.useState(null),[D,A]=w.useState(0),[Le,Xe]=w.useState(0),[X,je]=w.useState(qw),[De,Ce]=w.useState(!1),[J,P]=w.useState(!1),[re,we]=w.useState([]),[_e,xe]=w.useState(null),[Se,Fe]=w.useState(!1),Ze=w.useRef(null),[Oe,Mt]=w.useState(0),[on,zn]=w.useState(0),[Yt,rt]=w.useState(null),st=w.useCallback((k,M="info")=>{rt({message:k,type:M}),setTimeout(()=>rt(null),4e3)},[]),[ct,_n]=w.useState([]),[fe,Ct]=w.useState(!1),[ht,Rt]=w.useState(""),[Je,Tt]=w.useState(null),[pt,Qt]=w.useState(null),[zs,es]=w.useState(!1),[Wt,se]=w.useState(new Set),[Ae,gt]=w.useState(new Set),[yt,ut]=w.useState({}),[qe,nt]=w.useState({}),[He,sn]=w.useState({}),[Xt,Nn]=w.useState({}),[Dn,Kn]=w.useState({}),[Jt,Fn]=w.useState({}),An=w.useRef(null),pn=w.useRef(null),ks=w.useRef({}),[ae,Me]=w.useState([]),[Ke,vt]=w.useState(!1),it=w.useRef(null),[Gt,jn]=w.useState([]),[gn,Sn]=w.useState(""),[Ns,qn]=w.useState(!1),[Es,Zt]=w.useState(null),[ln,ls]=w.useState([]),[Yr,fa]=w.useState(null),[Qr,pr]=w.useState(!1),Hn=w.useRef(!1),[Fs,vs]=w.useState(null),[Ln,Rn]=w.useState(!1),ts=w.useRef(!1),zt=(()=>{const k=[{selector:".cb-ring-container",title:"Your 24-Hour Countdown",body:"Every day resets. This ring tracks the time you have left  tap your photo to personalise your profile.",cta:"Next"},{selector:".cb-stats-row",title:"Progress at a Glance",body:"Your workout streak, sessions this week, and daily habits  all in one row. These fill up as you go."},{selector:".cb-nudge-card",title:"Smart Suggestions",body:"We'll highlight what needs your attention  your next session, unfinished habits, or a meal to log."},{selector:".cb-card-workouts-hero",title:"Workout",body:"Randomiser workouts  pick your focus, level and time. Save and replay your favourites.",cta:"Next"}];return g&&k.push({selector:".cb-card-nutrition",title:"Nutrition Tracking",body:"Set your macro targets, scan barcodes, and log meals to hit your daily goals."},{selector:".cb-card-consistency",title:"Daily Habits",body:"5 simple habits each day  train, hit protein, 10k steps, sleep, and hydrate. Build your streak."},{selector:".cb-card-buddies",title:"Buddies & Social",body:"Connect with other members, share your journey, and keep each other accountable."},{selector:".cb-journey-section",title:"Share Your Journey",body:"Post photos, updates, and milestones  your fitness journey in one place. Like and comment on each other's posts."}),k.push({selector:".block-bottom-nav",title:"You're All Set!",body:"Use the nav bar to jump between your profile, workouts, nutrition, and buddies. Time to get after it.",cta:"Let's Go!"}),k})();w.useEffect(()=>{!u&&!s&&b("/")},[u,s,b]),w.useEffect(()=>{!u&&t&&t.signupSource==="self_signup"&&!t.onboardingComplete&&b("/onboarding")},[u,t,b]),w.useEffect(()=>{let k=t?.tourComplete||ts.current;if(!k&&t?.id)try{k=!!localStorage.getItem(`tourDone_${t.id}`)}catch{}if(ge&&t&&!k){const M=setTimeout(()=>Rn(!0),600);return()=>clearTimeout(M)}},[ge,t]),w.useEffect(()=>{if(!(!ge||!t?.id)){try{if(localStorage.getItem(`targetHint_${t.id}`))return}catch{}if(!t?.weeklyWorkoutTarget){const k=setTimeout(()=>P(!0),1500);return()=>clearTimeout(k)}}},[ge,t]),w.useEffect(()=>{if(t)try{const k=sessionStorage.getItem(`cbDash_${t.id}`);if(k){const M=JSON.parse(k);Q(M.totalWorkouts??0),Ee(M.habitWeekPct??0),R(M.nutritionTotals??{protein:0,carbs:0,fats:0,calories:0}),O(M.nutritionTargetData??null),A(M.todayHabitsCount??0),M.realHabitCount&&T(M.realHabitCount),Xe(M.weeklyWorkouts??0),je(M.weeklyWorkoutTarget??qw),we(M.leaderboardTop3??[]),Mt(M.streakWeeks??0),C(!0)}}catch{}},[t]),w.useEffect(()=>{t?.photoURL&&xe(t.photoURL),t?.weeklyWorkoutTarget&&je(t.weeklyWorkoutTarget)},[t]),w.useEffect(()=>{if(!t)return;const k=Kt(mt(ye,"notifications"),xt("toId","==",t.id)),M=iE(k,W=>{const te=W.docs.map(me=>({id:me.id,...me.data()}));te.sort((me,Ie)=>{const Ne=me.createdAt?.toMillis?.()||0;return(Ie.createdAt?.toMillis?.()||0)-Ne}),Me(te.slice(0,50))},W=>{console.error("Notification listener error:",W),W.code==="permission-denied"&&console.warn("Firestore rules may be missing for the notifications collection. Please update your Firestore rules in the Firebase Console.")});return()=>M()},[t]),w.useEffect(()=>{const k=M=>{it.current&&!it.current.contains(M.target)&&vt(!1)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),w.useEffect(()=>{if(!t)return;const k=t.id;(async()=>{try{const[M,W,te]=await Promise.all([Ht(Kt(mt(ye,"buddies"),xt("user1","==",k))),Ht(Kt(mt(ye,"buddies"),xt("user2","==",k))),Ht(mt(ye,"clients"))]),me=new Set;[...M.docs,...W.docs].forEach(Ne=>{const Ve=Ne.data();me.add(Ve.user1===k?Ve.user2:Ve.user1)});const Ie={};te.docs.forEach(Ne=>{Ie[Ne.id]=Ne.data()}),jn(Array.from(me).filter(Ne=>Ie[Ne]).map(Ne=>({id:Ne,name:Ie[Ne].name,photoURL:Ie[Ne].photoURL||null})))}catch(M){console.error("Error loading buddies for mentions:",M)}})()},[t]);const gr=ae.filter(k=>!k.read).length,Rr=async()=>{const k=ae.filter(W=>!W.read);if(!k.length)return;const M=Lw(ye);k.forEach(W=>M.update(We(ye,"notifications",W.id),{read:!0})),await M.commit()},bs=async()=>{if(!ae.length)return;const k=Lw(ye);ae.forEach(M=>k.delete(We(ye,"notifications",M.id))),await k.commit()},kn=async(k,M,W={})=>{if(!(!t||k===t.id))try{await Cr(mt(ye,"notifications"),{toId:k,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:M,read:!1,createdAt:Vs(),...W})}catch(te){console.error("Notification create error:",te),te.code==="permission-denied"&&st("Notifications blocked  check Firestore rules","error")}},Qs=(k,M)=>{const W=M==="compose"?An.current?.selectionStart:null,me=(W!=null?k.slice(0,W):k).match(/@(\w*)$/);if(me){qn(!0),Zt(M),Sn(me[1].toLowerCase());const Ie=Gt.filter(Ne=>Ne.name&&Ne.name.toLowerCase().includes(me[1].toLowerCase())).slice(0,5);ls(Ie)}else qn(!1),ls([])},Xr=(k,M)=>{if(M==="compose"){const W=An.current,te=ht,me=W?.selectionStart??te.length,Ie=te.slice(0,me),Ne=te.slice(me),Ve=Ie.replace(/@\w*$/,`@${k.name} `);Rt(Ve+Ne),setTimeout(()=>{W?.focus(),W.selectionStart=W.selectionEnd=Ve.length},0)}else{const te=(qe[M]||"").replace(/@\w*$/,`@${k.name} `);nt(me=>({...me,[M]:te}))}qn(!1),ls([])},I=k=>k&&k.split(/(@\w[\w\s]*?\s)/g).map((W,te)=>W.startsWith("@")&&Gt.some(me=>W.trim()===`@${me.name}`)?a.jsx("span",{className:"mention-highlight",children:W.trim()},te):W),F=async k=>{const M=k.target.files?.[0];if(!(!M||!t)){if(!M.type.startsWith("image/")){st("Please select an image file","error");return}if(M.size>5*1024*1024){st("Image must be under 5MB","error");return}Fe(!0);try{const W=await new Promise(Ie=>{const Ne=new Image;Ne.onload=()=>{const Ve=document.createElement("canvas"),Re=400;let at=Ne.width,yn=Ne.height;at>yn?(yn=yn/at*Re,at=Re):(at=at/yn*Re,yn=Re),Ve.width=at,Ve.height=yn,Ve.getContext("2d").drawImage(Ne,0,0,at,yn),Ve.toBlob(et=>Ie(et),"image/jpeg",.75)},Ne.src=URL.createObjectURL(M)}),te=Wa(Ga,`profilePhotos/${t.id}`);await Rh(te,W);const me=await Lo(te);await ps(We(ye,"clients",t.id),{photoURL:me}),xe(me),l({photoURL:me}),st("Profile photo updated!","success")}catch(W){console.error("Photo upload error:",W),st("Failed to upload photo","error")}Fe(!1),Ze.current&&(Ze.current.value="")}};w.useEffect(()=>{const k=()=>{const W=new Date,te=new Date(W);te.setHours(23,59,59,999);const me=te-W,Ie=Math.floor(me/(1e3*60*60)),Ne=Math.floor(me%(1e3*60*60)/(1e3*60)),Ve=Math.floor(me%(1e3*60)/1e3);q({hours:Ie,minutes:Ne,seconds:Ve}),K(60-Ve)};k();const M=setInterval(k,1e3);return()=>clearInterval(M)},[]),w.useEffect(()=>{const k=setInterval(()=>{zn(M=>(M+1)%Qp.length)},8e3);return()=>clearInterval(k)},[]),w.useEffect(()=>{if(!s||!t)return;(async()=>{let M=null,W=null;try{const te=Yp(new Date),me=mt(ye,"workoutLogs"),Ie=Kt(me,xt("clientId","==",t.id));M=await Ht(Ie),Q(M.docs.length);const Ne=new Date,Ve=Ne.getDay(),Re=Ve===0?6:Ve-1,at=new Date(Ne);at.setDate(Ne.getDate()-Re),at.setHours(0,0,0,0);const yn=at.getTime(),et=M.docs.filter(Pn=>{const hn=Pn.data().completedAt;return hn?(hn.toDate?hn.toDate().getTime():new Date(hn).getTime())>=yn:!1}).length;Xe(et);const[en,En]=await Promise.all([Ht(Kt(mt(ye,"habitLogs"),xt("clientId","==",t.id),xt("date","==",te))),Us(We(ye,"customHabits",t.id))]);let dt=Hw;if(En.exists()){const Pn=En.data(),hn=Pn.habits||[],Wn=Pn.hiddenDefaults||[];dt=N3.filter(Zr=>!Wn.includes(Zr)).length+hn.length}g||(dt=Math.min(dt,y)),T(dt);let It=0;if(!en.empty){const Pn=en.docs[0].data().habits||{};It=Object.values(Pn).filter(Boolean).length}Ee(Math.round(It/dt*100)),A(It);const cn=await Us(We(ye,"nutritionTargets",t.id));cn.exists()&&(O(cn.data()),W=cn.data());const ws=await Us(We(ye,"nutritionLogs",`${t.id}_${te}`));if(ws.exists()){const hn=(ws.data().entries||[]).reduce((Wn,cs)=>({protein:Wn.protein+(cs.protein||0),carbs:Wn.carbs+(cs.carbs||0),fats:Wn.fats+(cs.fats||0),calories:Wn.calories+(cs.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});R(hn)}}catch(te){console.error("Error loading dashboard stats:",te)}try{const te=mt(ye,"clients"),me=Kt(te,xt("leaderboardOptIn","==",!0)),Ne=(await Ht(me)).docs.map(Ve=>({id:Ve.id,name:Ve.data().name,photoURL:Ve.data().photoURL||null}));if(we(Ne.slice(0,3)),t?.id){const Ve=Ne.findIndex(at=>at.id===t.id),Re=Ve>=0?Ve+1:null;try{const at=`lbRank_${t.id}`,yn=sessionStorage.getItem(at);yn&&vs(parseInt(yn,10)),Re&&sessionStorage.setItem(at,String(Re))}catch{}}}catch(te){console.error("Leaderboard preview error:",te)}try{let te=0;if(M){const me=M.docs.map(Ie=>Ie.data().date).filter(Boolean).sort().reverse();if(me.length>0){const Ie=new Date;let Ne=new Date(Ie);e:for(let Ve=0;Ve<52;Ve++){const Re=new Date(Ne),at=Re.getDay(),yn=at===0?6:at-1;Re.setDate(Re.getDate()-yn),Re.setHours(0,0,0,0);const et=new Date(Re);et.setDate(et.getDate()+7);const en=Yp(Re),En=Yp(et);if(me.some(It=>It>=en&&It<En))te++;else{if(Ve>0)break e;break}Ne.setDate(Ne.getDate()-7)}}}Mt(te)}catch(te){console.error("Streak computation error:",te)}C(!0)})()},[s,t,L]),w.useEffect(()=>{if(!(!ge||!t))try{sessionStorage.setItem(`cbDash_${t.id}`,JSON.stringify({totalWorkouts:G,habitWeekPct:he,nutritionTotals:j,nutritionTargetData:V,todayHabitsCount:D,realHabitCount:E,weeklyWorkouts:Le,weeklyWorkoutTarget:X,leaderboardTop3:re,streakWeeks:Oe}))}catch{}},[ge,G,he,j,V,D,Le,X,re,Oe,t]),w.useEffect(()=>{if(!(!ge||Hn.current)&&Le>=X&&X>0){const k=`weekCeleb_${t?.id}_${new Date().toISOString().slice(0,10).replace(/-\d{2}$/,"")}`;try{if(sessionStorage.getItem(k))return;sessionStorage.setItem(k,"1")}catch{}Hn.current=!0,pr(!0),setTimeout(()=>pr(!1),3500)}},[ge,Le,X,t]);const oe=w.useCallback(async()=>{if(ts.current=!0,Rn(!1),l({tourComplete:!0}),t?.id){try{localStorage.setItem(`tourDone_${t.id}`,"1")}catch{}try{await ps(We(ye,"clients",t.id),{tourComplete:!0})}catch(k){console.error("Failed to save tour completion:",k)}}},[t,l]),ue=w.useCallback(async k=>{if(je(k),Ce(!1),P(!1),t?.id){try{localStorage.setItem(`targetHint_${t.id}`,"1")}catch{}try{await ps(We(ye,"clients",t.id),{weeklyWorkoutTarget:k})}catch(M){console.error("Failed to save weekly target:",M)}}},[t]),Ue=k=>{const M=k.currentTarget,W=M.querySelector(".ripple");W&&W.remove();const te=M.getBoundingClientRect(),me=Math.max(te.width,te.height),Ie=k.clientX-te.left-me/2,Ne=k.clientY-te.top-me/2,Ve=document.createElement("span");Ve.className="ripple",Ve.style.cssText=`width:${me}px;height:${me}px;left:${Ie}px;top:${Ne}px;`,M.appendChild(Ve),setTimeout(()=>Ve.remove(),600)},Be=t?.name?.split(" ")[0]||"there",$e=Math.min(Math.round(Le/X*100),100),Ft=Oe>0?Math.min(Math.round(Oe/12*100),100):0,Ye=[{label:"Wk Streak",value:`${Oe}`,pct:Ft,color:"var(--color-primary)",size:"normal"},{label:"Workouts",value:`${Le}/${X}`,pct:$e,color:"var(--color-primary)",size:"large",editable:!0},{label:"Habits Today",value:`${he}%`,pct:he,color:"var(--color-primary)",size:"normal"}],$n=j.calories>0&&V?.calories&&j.calories>=V.calories*.8,ns=Le>=X&&X>0,ar=D>=L,On=(()=>{if(!ge)return null;const k=X-Le;return k===1?"1 more workout to hit your weekly goal":k===2?"2 more workouts to hit your weekly goal":L-D===1?"1 habit left to complete today":null})(),Xs=k=>!V||!V[k]?0:Math.min(Math.round(j[k]/V[k]*100),100),Di=(()=>{const k=new Date().getHours(),M=ge&&D>=L&&j.calories>0,W=te=>te[Math.floor(Date.now()/6e4%te.length)];return M?W(Yc.allDone):k>=5&&k<12?W(Yc.morning):k>=12&&k<17?W(Yc.afternoon):k>=17&&k<21?W(Yc.evening):W(Yc.night)})(),As=ge?Le===0?{label:"WORKOUT",message:"No workouts this week yet",cta:"Start One",action:()=>b("/client/core-buddy/workouts"),pct:0,ringLabel:"0"}:D<L?{label:"DAILY HABITS",message:`${D}/${L} completed`,cta:"Open Habits",action:()=>b("/client/core-buddy/consistency"),pct:he,ringLabel:`${D}/${L}`}:g&&j.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>b("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:null,Js=w.useCallback(async()=>{if(t){Ct(!0);try{const k=await Ht(Kt(mt(ye,"posts"),xt("authorId","==",t.id),ku("createdAt","desc"),Eu(30)));_n(k.docs.map(W=>({id:W.id,...W.data()})));const M=await Ht(Kt(mt(ye,"postLikes"),xt("userId","==",t.id)));se(new Set(M.docs.map(W=>W.data().postId)))}catch(k){console.error("Error loading journey:",k)}finally{Ct(!1)}}},[t]);w.useEffect(()=>{ge&&t&&Js()},[ge,t,Js]);const ma=k=>{const M=k.target.files?.[0];if(M){if(!M.type.startsWith("image/")){st("Please select an image file","error");return}if(M.size>10*1024*1024){st("Image must be under 10MB","error");return}Tt(M),Qt(URL.createObjectURL(M))}},yr=()=>{Tt(null),pt&&URL.revokeObjectURL(pt),Qt(null),pn.current&&(pn.current.value="")},Ts=async()=>{if(!(!ht.trim()&&!Je||zs||!t)){es(!0);try{let k=null;if(Je){const me=await A3(Je),Ie=`${Date.now()}_${Math.random().toString(36).slice(2,8)}`,Ne=Wa(Ga,`postImages/${t.id}/${Ie}`);await Rh(Ne,me),k=await Lo(Ne)}await Cr(mt(ye,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:ht.trim(),type:k?"image":"text",imageURL:k||null,createdAt:Vs(),likeCount:0,commentCount:0});const W=ht.trim().match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(W){const me=new Set;W.forEach(Ie=>{const Ne=Ie.slice(1).trim(),Ve=Gt.find(Re=>Re.name&&Re.name.toLowerCase()===Ne.toLowerCase());Ve&&!me.has(Ve.id)&&(me.add(Ve.id),kn(Ve.id,"mention",{}))})}Rt(""),yr(),An.current&&(An.current.style.height="auto"),await Js();const te=Gt.length;st(te>0?`Shared with ${te} ${te===1?"buddy":"buddies"}`:"Posted to your journey!","success")}catch(k){console.error("Error posting:",k),st(k?.message||"Failed to post","error")}finally{es(!1)}}},pa=async k=>{if(window.confirm("Delete this post?"))try{await jr(We(ye,"posts",k)),_n(M=>M.filter(W=>W.id!==k)),st("Post deleted","info")}catch(M){console.error("Delete error:",M),st("Failed to delete","error")}},Jr=async k=>{if(!t)return;const M=t.id,W=`${k}_${M}`,te=Wt.has(k),me=new Set(Wt);te?me.delete(k):me.add(k),se(me),_n(Ie=>Ie.map(Ne=>Ne.id===k?{...Ne,likeCount:Math.max(0,(Ne.likeCount||0)+(te?-1:1))}:Ne));try{if(te)await jr(We(ye,"postLikes",W)),await ps(We(ye,"posts",k),{likeCount:Ao(-1)});else{await Cs(We(ye,"postLikes",W),{postId:k,userId:M,createdAt:Vs()}),await ps(We(ye,"posts",k),{likeCount:Ao(1)});const Ie=ct.find(Ne=>Ne.id===k);Ie&&kn(Ie.authorId,"like",{postId:k})}}catch(Ie){console.error("Like error:",Ie),Js()}},Ir=async k=>{try{const M=await Ht(Kt(mt(ye,"postComments"),xt("postId","==",k),ku("createdAt","asc"),Eu(50)));ut(W=>({...W,[k]:M.docs.map(te=>({id:te.id,...te.data()}))}))}catch(M){console.error("Error loading comments:",M)}},Rs=k=>{const M=new Set(Ae);M.has(k)?M.delete(k):(M.add(k),yt[k]||Ir(k)),gt(M)},fi=async k=>{const M=(qe[k]||"").trim(),W=Dn[k];if(!(!M&&!W||!t)){sn(te=>({...te,[k]:!0}));try{let te=null;if(W){const Re=Wa(Ga,`comment-images/${Date.now()}_${W.name}`);await Rh(Re,W),te=await Lo(Re)}const me={postId:k,authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:M||"",createdAt:Vs()};te&&(me.imageURL=te);const Ie=Xt[k];Ie&&(me.replyToId=Ie.id,me.replyToName=Ie.authorName),await Cr(mt(ye,"postComments"),me),await ps(We(ye,"posts",k),{commentCount:Ao(1)});const Ne=ct.find(Re=>Re.id===k);Ne&&kn(Ne.authorId,"comment",{postId:k});const Ve=M.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(Ve){const Re=new Set;Ve.forEach(at=>{const yn=at.slice(1).trim(),et=Gt.find(en=>en.name&&en.name.toLowerCase()===yn.toLowerCase());et&&!Re.has(et.id)&&(Re.add(et.id),kn(et.id,"mention",{postId:k}))})}nt(Re=>({...Re,[k]:""})),Kn(Re=>({...Re,[k]:null})),Fn(Re=>({...Re,[k]:null})),Nn(Re=>({...Re,[k]:null})),ks.current[k]&&(ks.current[k].value=""),_n(Re=>Re.map(at=>at.id===k?{...at,commentCount:(at.commentCount||0)+1}:at)),await Ir(k)}catch(te){console.error("Comment error:",te),st("Failed to comment","error")}finally{sn(te=>({...te,[k]:!1}))}}},Mr=async(k,M)=>{try{await jr(We(ye,"postComments",M)),await ps(We(ye,"posts",k),{commentCount:Ao(-1)}),ut(W=>({...W,[k]:(W[k]||[]).filter(te=>te.id!==M)})),_n(W=>W.map(te=>te.id===k?{...te,commentCount:Math.max((te.commentCount||1)-1,0)}:te))}catch(W){console.error("Delete comment error:",W),st("Failed to delete comment","error")}},mi=(k,M)=>{const W=M.target.files?.[0];if(!W)return;if(W.size>5*1024*1024){st("Image must be under 5MB","error");return}Kn(me=>({...me,[k]:W}));const te=new FileReader;te.onload=me=>Fn(Ie=>({...Ie,[k]:me.target.result})),te.readAsDataURL(W)},ss=k=>{Kn(M=>({...M,[k]:null})),Fn(M=>({...M,[k]:null})),ks.current[k]&&(ks.current[k].value="")},z=k=>{Rt(k.target.value),k.target.style.height="auto",k.target.style.height=Math.min(k.target.scrollHeight,120)+"px",Qs(k.target.value,"compose")},le=(k,M)=>{nt(W=>({...W,[k]:M})),Qs(M,k)};return a.jsx(Jo,{children:a.jsxs("div",{className:"cb-dashboard","data-theme":d?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-left-group",children:[a.jsxs("div",{className:"header-notif-wrap",ref:it,children:[a.jsxs("button",{className:"header-notif-btn",onClick:()=>{vt(!Ke),Ke||Rr()},"aria-label":"Notifications",children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),gr>0&&a.jsx("span",{className:"header-notif-badge",children:gr>9?"9+":gr})]}),Ke&&a.jsxs("div",{className:"notif-panel",children:[a.jsxs("div",{className:"notif-panel-header",children:[a.jsx("span",{className:"notif-panel-title",children:"Notifications"}),ae.length>0&&a.jsx("button",{className:"notif-clear-btn",onClick:bs,children:"Clear all"})]}),a.jsx("div",{className:"notif-panel-list",children:ae.length===0?a.jsx("div",{className:"notif-empty",children:"No notifications yet"}):ae.map(k=>a.jsxs("div",{className:`notif-item${k.read?"":" unread"}`,onClick:()=>{if(vt(!1),k.type==="buddy_request"||k.type==="buddy_accept")b(g?"/client/core-buddy/buddies":"/upgrade");else if((k.type==="like"||k.type==="comment")&&k.postId){if(!Ae.has(k.postId)){const M=new Set(Ae);M.add(k.postId),gt(M),yt[k.postId]||Ir(k.postId)}setTimeout(()=>{const M=document.getElementById(`post-${k.postId}`);M&&M.scrollIntoView({behavior:"smooth",block:"center"})},150)}else k.type==="like"||k.type==="comment"?document.querySelector(".cb-journey-section")?.scrollIntoView({behavior:"smooth"}):k.type==="mention"&&b(`/client/core-buddy/profile/${k.fromId}`)},children:[a.jsx("div",{className:"notif-item-avatar",children:k.fromPhotoURL?a.jsx("img",{src:k.fromPhotoURL,alt:""}):a.jsx("span",{children:(k.fromName||"?")[0]})}),a.jsxs("div",{className:"notif-item-body",children:[a.jsxs("p",{className:"notif-item-text",children:[a.jsx("strong",{children:k.fromName})," ",k.type==="buddy_request"&&"sent you a buddy request",k.type==="buddy_accept"&&"accepted your buddy request",k.type==="like"&&"liked your post",k.type==="comment"&&"commented on your post",k.type==="mention"&&"mentioned you"]}),a.jsx("span",{className:"notif-item-time",children:Xp(k.createdAt)})]})]},k.id))})]})]}),a.jsx("button",{className:"header-icon-btn",onClick:()=>b("/client/core-buddy/settings"),"aria-label":"Settings",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})})]}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{className:"header-icon-btn",onClick:p,"aria-label":d?"Switch to light mode":"Switch to dark mode",children:d?a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),a.jsx("button",{className:"header-icon-btn",onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"cb-main",children:[a.jsxs("div",{className:"cb-ring-container",children:[a.jsxs("div",{className:"cb-ring",children:[a.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:EE.map((k,M)=>{const W=M<B;return a.jsx("line",{x1:k.x1,y1:k.y1,x2:k.x2,y2:k.y2,className:`ring-tick ${W?"elapsed":"remaining"}`,strokeWidth:k.thick?"3":"2"},M)})}),a.jsxs("div",{className:"cb-ring-center",children:[a.jsxs("div",{className:"cb-ring-logo",onClick:()=>Ze.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[a.jsx("img",{src:_e||"/Logo.webp",alt:_e?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`cb-photo-overlay${Se?" uploading":""}`,children:Se?a.jsx("div",{className:"cb-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:Ze,type:"file",accept:"image/*",onChange:F,style:{display:"none"}})]}),!_e&&!Se&&a.jsx("div",{className:"cb-photo-badge",onClick:()=>Ze.current?.click(),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),a.jsxs("div",{className:"cb-ring-countdown",children:[a.jsx("span",{className:"cb-timer-digit",children:String($.hours).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit",children:String($.minutes).padStart(2,"0")}),a.jsx("span",{className:"cb-timer-colon",children:":"}),a.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String($.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"cb-ring-label",children:"remaining today"}),a.jsxs("p",{className:"cb-ring-tagline",children:[Qp[on].text," ",a.jsx("strong",{children:Qp[on].bold})]},on)]}),a.jsx("div",{className:"cb-stats-row",children:Ye.map(k=>{const M=(k.size==="large",38),W=2*Math.PI*M,te=W-k.pct/100*W,me=k.editable,Ie=k.pct>=75&&k.pct<100,Ne=k.pct>=100;return a.jsxs("div",{className:`cb-stat-item${k.size==="large"?" cb-stat-large":""}`,children:[a.jsxs("div",{className:`cb-stat-ring${me?" cb-stat-tappable":""}${me&&J?" cb-stat-hint":""}${Ie?" cb-stat-near":""}${Ne?" cb-stat-complete":""}`,onClick:me?()=>{Ce(!0),P(!1)}:void 0,children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:M}),a.jsx("circle",{className:`cb-stat-fill${Ie?" cb-fill-near":""}${Ne?" cb-fill-complete":""}`,cx:"50",cy:"50",r:M,strokeDasharray:W,strokeDashoffset:te})]}),a.jsx("span",{className:`cb-stat-value${Ne?" cb-val-complete":""}`,children:k.value})]}),a.jsxs("span",{className:"cb-stat-label",children:[k.label==="Wk Streak"&&Oe>0&&a.jsx("svg",{className:"cb-streak-flame",width:"12",height:"12",viewBox:"0 0 24 24",fill:"var(--color-primary)",stroke:"none",children:a.jsx("path",{d:"M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"})}),k.label]})]},k.label)})}),De&&a.jsx("div",{className:"cb-target-overlay",onClick:()=>Ce(!1),children:a.jsxs("div",{className:"cb-target-picker",onClick:k=>k.stopPropagation(),children:[a.jsx("h4",{children:"Weekly workout goal"}),a.jsx("p",{children:"How many sessions per week?"}),a.jsx("div",{className:"cb-target-options",children:[1,2,3,4,5,6,7].map(k=>a.jsx("button",{className:`cb-target-option${k===X?" active":""}`,onClick:()=>ue(k),children:k},k))})]})}),a.jsxs("p",{className:"cb-coach-msg",children:[Di.main," ",a.jsx("strong",{children:Be}),"  ",Di.sub]}),On&&a.jsxs("div",{className:"cb-milestone-hint",children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:On})]}),As&&a.jsxs("button",{className:"cb-nudge-card",onClick:As.action||void 0,style:As.action?void 0:{cursor:"default"},children:[a.jsxs("div",{className:"cb-nudge-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),a.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-As.pct/100*2*Math.PI*38})]}),a.jsx("span",{className:"cb-nudge-ring-val",children:As.ringLabel})]}),a.jsxs("div",{className:"cb-nudge-info",children:[a.jsx("span",{className:"cb-nudge-label",children:As.label}),a.jsx("span",{className:"cb-nudge-title",children:As.message}),As.cta&&a.jsxs("span",{className:"cb-nudge-cta",children:[As.cta," "]})]})]}),a.jsxs("div",{className:"cb-features",children:[g&&a.jsxs("button",{className:`cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn${$n?" cb-card-done":""}`,onClick:k=>{Ue(k),b("/client/core-buddy/nutrition")},children:[a.jsxs("div",{className:"cb-card-top-row",children:[a.jsx("div",{className:"cb-card-content",children:a.jsx("h3",{children:"Today's Nutrition"})}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsx("div",{className:"cb-card-preview-row",children:a.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:Xs("protein"),color:"var(--color-primary)"},{label:"C",pct:Xs("carbs"),color:"var(--color-primary)"},{label:"F",pct:Xs("fats"),color:"var(--color-primary)"},{label:"Cal",pct:Xs("calories"),color:"var(--color-primary)"}].map(k=>{const W=2*Math.PI*38,te=W-k.pct/100*W;return a.jsxs("div",{className:"cb-mini-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:k.color},strokeDasharray:W,strokeDashoffset:te})]}),a.jsx("span",{style:{color:k.color},children:k.label})]},k.label)})})}),a.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),a.jsxs("button",{className:`cb-feature-card cb-card-workouts-hero ripple-btn${ns?" cb-card-done":""}`,onClick:k=>{Ue(k),b("/client/core-buddy/workouts")},children:[a.jsx("h3",{className:"cb-hero-title",children:"Workout"}),a.jsxs("div",{className:"cb-hero-stats",children:[a.jsxs("span",{children:[Le," this week"]}),a.jsx("span",{className:"cb-hero-dot",children:""}),a.jsxs("span",{children:[G," total"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:`cb-feature-card cb-card-consistency ripple-btn${ar?" cb-card-done":""}`,onClick:k=>{Ue(k),b("/client/core-buddy/consistency")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Habits"}),a.jsx("div",{className:`cb-habit-dots${D>=L?" cb-habits-all-done":""}`,children:Array.from({length:L},(k,M)=>a.jsx("span",{className:`cb-habit-dot${M<D?" done":""}${!M&&D>0&&M>=D?" cb-dot-warming":""}`,style:M>=D&&D>0?{"--glow-intensity":Math.min(D/L,.9)}:void 0},M))}),a.jsxs("span",{className:"cb-habit-dots-label",children:[D,"/",L," today"]})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:k=>{Ue(k),b("/client/leaderboard")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Leaderboard"}),re.length>0?a.jsx("div",{className:"cb-lb-preview",children:re.map((k,M)=>{const W=["#FFD700","#A8B4C0","#CD7F32"][M],te=k.name?k.name.split(" ").map(Ve=>Ve[0]).join("").slice(0,2).toUpperCase():"?",me=k.id===t?.id,Ie=M+1,Ne=me&&Fs?Fs-Ie:0;return a.jsxs("div",{className:`cb-lb-entry${me?" cb-lb-me":""}`,children:[a.jsx("div",{className:"cb-lb-avatar",style:{borderColor:W},children:k.photoURL?a.jsx("img",{src:k.photoURL,alt:"",className:"cb-lb-avatar-img"}):a.jsx("span",{children:te})}),a.jsxs("span",{className:"cb-lb-rank",style:{color:W},children:["#",Ie,me&&Ne>0&&a.jsxs("span",{className:"cb-lb-movement cb-lb-up",children:["+",Ne]}),me&&Ne<0&&a.jsx("span",{className:"cb-lb-movement cb-lb-down",children:Ne})]})]},k.id)})}):a.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("button",{className:"cb-feature-card cb-card-challenge ripple-btn",onClick:k=>{Ue(k),b("/client/core-buddy/challenges")},children:[a.jsx("div",{className:"cb-card-icon-wrap cb-card-icon-challenge",children:a.jsx("img",{src:Oo.find(k=>k.id==="iron_will")?.img,alt:"",className:"cb-card-badge-img"})}),a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Challenges"}),a.jsx("p",{children:"Push yourself with timed fitness challenges"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:k=>{Ue(k),b("/client/core-buddy/buddies")},children:[a.jsxs("div",{className:"cb-card-content",children:[a.jsx("h3",{children:"Buddies"}),a.jsx("p",{children:"Connect with other members and track each other's progress"})]}),a.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),g&&a.jsxs("div",{className:"cb-journey-section",children:[a.jsx("h3",{className:"cb-journey-title",children:"My Journey"}),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"journey-compose",children:[a.jsx("div",{className:"journey-compose-avatar",children:_e?a.jsx("img",{src:_e,alt:""}):a.jsx("span",{children:Qc(t?.name)})}),a.jsxs("div",{className:"journey-compose-body",style:{position:"relative"},children:[a.jsx("textarea",{ref:An,placeholder:"Share your progress... (use @ to mention)",value:ht,onChange:z,rows:1,maxLength:500}),Ns&&Es==="compose"&&ln.length>0&&a.jsx("div",{className:"mention-dropdown",children:ln.map(k=>a.jsxs("button",{className:"mention-option",onClick:()=>Xr(k,"compose"),children:[a.jsx("div",{className:"mention-option-avatar",children:k.photoURL?a.jsx("img",{src:k.photoURL,alt:""}):a.jsx("span",{children:Qc(k.name)})}),a.jsx("span",{children:k.name})]},k.id))}),pt&&a.jsxs("div",{className:"journey-image-preview",children:[a.jsx("img",{src:pt,alt:"Preview"}),a.jsx("button",{className:"journey-image-remove",onClick:yr,"aria-label":"Remove image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-compose-actions",children:[a.jsx("button",{className:"journey-image-btn",onClick:()=>pn.current?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:pn,type:"file",accept:"image/*",onChange:ma,hidden:!0}),(ht.trim()||Je)&&a.jsx("button",{className:"journey-post-btn",onClick:Ts,disabled:zs,children:zs?a.jsx("div",{className:"journey-btn-spinner"}):"Post"})]})]})]}),fe?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"cb-spinner"})}):ct.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"Start sharing your fitness journey!"})]}):a.jsx("div",{className:"journey-list",children:ct.map(k=>a.jsxs("div",{id:`post-${k.id}`,className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:k.authorPhotoURL?a.jsx("img",{src:k.authorPhotoURL,alt:""}):a.jsx("span",{children:Qc(k.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:k.authorName}),a.jsx("span",{className:"journey-post-time",children:Xp(k.createdAt)})]}),a.jsx("button",{className:"journey-delete-btn",onClick:()=>pa(k.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),k.type==="workout_summary"&&k.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:k.metadata.title}),k.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:k.metadata.stats.map(M=>`${M.value} ${M.label}`).join("    ")}),!k.metadata.stats?.length&&k.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:k.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed a workout using Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):k.type==="badge_earned"&&k.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame journey-card-logo-badge",children:(()=>{const M=Oo.find(W=>W.id===k.metadata.badgeId);return M?.img?a.jsx("img",{src:M.img,alt:k.metadata.title,className:"journey-card-logo-img"}):a.jsx("img",{src:"/Logo.webp",alt:k.metadata.title,className:"journey-card-logo-img"})})()}),a.jsx("h3",{className:"journey-card-title",children:k.metadata.title}),k.metadata.badgeDesc&&a.jsx("p",{className:"journey-card-stats-line",children:k.metadata.badgeDesc}),a.jsx("p",{className:"journey-card-cta",children:"I just earned a badge on Core Buddy"}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):k.type==="habits_summary"&&k.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:k.metadata.title}),k.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:k.metadata.stats.map(M=>`${M.value} ${M.label}`).join("    ")}),k.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:k.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed my daily habits with Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):a.jsxs(a.Fragment,{children:[k.content&&a.jsx("p",{className:"journey-post-content",children:I(k.content)}),k.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:k.imageURL,alt:"Post",loading:"lazy"})})]}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${Wt.has(k.id)?" liked":""}`,onClick:()=>Jr(k.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:Wt.has(k.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:k.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${Ae.has(k.id)?" active":""}`,onClick:()=>Rs(k.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:k.commentCount||0})]})]}),Ae.has(k.id)&&a.jsxs("div",{className:"journey-comments",children:[yt[k.id]?.length>0?yt[k.id].map(M=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",children:M.authorPhotoURL?a.jsx("img",{src:M.authorPhotoURL,alt:""}):a.jsx("span",{children:Qc(M.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:M.authorName}),M.replyToName&&a.jsxs("span",{className:"journey-comment-reply-tag",children:[a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"9 14 4 9 9 4"}),a.jsx("path",{d:"M20 20v-7a4 4 0 0 0-4-4H4"})]}),M.replyToName]}),M.content&&a.jsx("span",{className:"journey-comment-text",children:I(M.content)}),M.imageURL&&a.jsx("img",{className:"journey-comment-image",src:M.imageURL,alt:"Comment",loading:"lazy"})]}),a.jsxs("div",{className:"journey-comment-actions-row",children:[a.jsx("span",{className:"journey-comment-time",children:Xp(M.createdAt)}),a.jsx("button",{className:"journey-comment-reply-btn",onClick:()=>Nn(W=>({...W,[k.id]:{id:M.id,authorName:M.authorName}})),children:"Reply"}),a.jsx("button",{className:"journey-comment-delete-btn",onClick:()=>Mr(k.id,M.id),"aria-label":"Delete comment",children:a.jsxs("svg",{width:"13",height:"13",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]})]})]},M.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),Xt[k.id]&&a.jsxs("div",{className:"journey-comment-replying",children:[a.jsxs("span",{children:["Replying to ",a.jsx("strong",{children:Xt[k.id].authorName})]}),a.jsx("button",{onClick:()=>Nn(M=>({...M,[k.id]:null})),"aria-label":"Cancel reply",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),Jt[k.id]&&a.jsxs("div",{className:"journey-comment-img-preview",children:[a.jsx("img",{src:Jt[k.id],alt:"Preview"}),a.jsx("button",{onClick:()=>ss(k.id),"aria-label":"Remove image",children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})})]}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("button",{className:"journey-comment-img-btn",onClick:()=>ks.current[k.id]?.click(),"aria-label":"Add image",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]})}),a.jsx("input",{ref:M=>{ks.current[k.id]=M},type:"file",accept:"image/*",onChange:M=>mi(k.id,M),hidden:!0}),a.jsx("input",{type:"text",placeholder:"Comment",value:qe[k.id]||"",onChange:M=>le(k.id,M.target.value),onKeyDown:M=>{M.key==="Enter"&&fi(k.id)},maxLength:300}),Ns&&Es===k.id&&ln.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:ln.map(M=>a.jsxs("button",{className:"mention-option",onClick:()=>Xr(M,k.id),children:[a.jsx("div",{className:"mention-option-avatar",children:M.photoURL?a.jsx("img",{src:M.photoURL,alt:""}):a.jsx("span",{children:Qc(M.name)})}),a.jsx("span",{children:M.name})]},M.id))}),a.jsx("button",{onClick:()=>fi(k.id),disabled:!(qe[k.id]||"").trim()&&!Dn[k.id]||He[k.id],children:He[k.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},k.id))})]})]}),!g&&a.jsxs("button",{className:"cb-upgrade-cta",onClick:()=>b("/upgrade"),children:[a.jsx("span",{className:"cb-upgrade-cta-text",children:"Unlock the full experience"}),a.jsx("span",{className:"cb-upgrade-cta-sub",children:"Unlimited workout times, nutrition, buddies & more"}),a.jsxs("svg",{className:"cb-upgrade-cta-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]})]})]}),a.jsx(Kr,{active:"home"}),Qr&&a.jsx("div",{className:"cb-weekly-celebration",children:a.jsxs("div",{className:"cb-weekly-celebration-card",children:[a.jsx("span",{className:"cb-weekly-celebration-icon",children:a.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsx("h4",{children:"Weekly Goal Smashed!"}),a.jsxs("p",{children:[Le,"/",X," sessions complete"]})]})}),Yt&&a.jsxs("div",{className:`toast-notification ${Yt.type}`,children:[Yt.type==="info"&&a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Yt.type==="success"&&a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),Yt.message]}),a.jsx(o3,{steps:zt,active:Ln,onFinish:oe})]})})}const Jp=new Map;function ii(){return new Date().toISOString().split("T")[0]}const $w=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],I3={breakfast:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),a.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),a.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),a.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),a.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function M3(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function D3(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Ar(),{isDark:l,toggleTheme:u,accent:d}=Mi(),p=Ys(),[g,y]=w.useState("loading"),[b,E]=w.useState(null),[T,L]=w.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[$,q]=w.useState(null),[B,K]=w.useState(ii()),[G,Q]=w.useState({entries:[]}),[he,Ee]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[ge,C]=w.useState(!1),[j,R]=w.useState(()=>{const I=new Date;return{year:I.getFullYear(),month:I.getMonth()}}),[V,O]=w.useState(!1),[D,A]=w.useState(()=>{const I=new Date;return{year:I.getFullYear(),month:I.getMonth()}}),[Le,Xe]=w.useState(!1),[X,je]=w.useState(M3),[De,Ce]=w.useState(null),[J,P]=w.useState(null),[re,we]=w.useState(!1),[_e,xe]=w.useState(null),[Se,Fe]=w.useState(""),[Ze,Oe]=w.useState(!1),[Mt,on]=w.useState(""),[zn,Yt]=w.useState([]),[rt,st]=w.useState(!1),[ct,_n]=w.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[fe,Ct]=w.useState(null),[ht,Rt]=w.useState("100"),[Je,Tt]=w.useState(0),[pt,Qt]=w.useState("weight"),[zs,es]=w.useState(0),[Wt,se]=w.useState(null);w.useRef(null);const Ae=w.useRef(!1),gt=w.useRef(null),yt=w.useRef(null),ut=w.useRef(null),qe=w.useCallback((I,F="info")=>{se({message:I,type:F}),setTimeout(()=>se(null),3e3)},[]);w.useEffect(()=>{!i&&(!s||!e)&&p("/")},[s,e,i,p]),w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const F=await Us(We(ye,"nutritionTargets",t.id));F.exists()?(E(F.data()),y("dashboard")):y("setup")}catch(F){console.error("Error loading nutrition data:",F),y("setup")}})()},[t?.id]),w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const F=await Us(We(ye,"nutritionLogs",`${t.id}_${B}`));if(F.exists()){const oe=F.data();Q({entries:oe.entries||[]})}else Q({entries:[]})}catch(F){console.error("Error loading log:",F),Q({entries:[]})}})()},[t?.id,B]),w.useEffect(()=>{const I=G.entries.reduce((F,oe)=>({protein:F.protein+(oe.protein||0),carbs:F.carbs+(oe.carbs||0),fats:F.fats+(oe.fats||0),calories:F.calories+(oe.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Ee(I)},[G.entries]);const nt=async I=>{try{await Cs(We(ye,"nutritionLogs",`${t.id}_${B}`),{clientId:t.id,date:B,entries:I.entries,updatedAt:At.now()})}catch(F){console.error("Error saving nutrition log:",F)}},He=B===ii(),sn=(I,F)=>new Date(I,F+1,0).getDate(),Xt=(I,F)=>new Date(I,F,1).getDay(),Nn=I=>{if(I===ii())return"Today";const F=new Date(I+"T12:00:00"),oe=new Date;return oe.setDate(oe.getDate()-1),I===oe.toISOString().split("T")[0]?"Yesterday":F.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})},Dn=["January","February","March","April","May","June","July","August","September","October","November","December"],Kn=["Su","Mo","Tu","We","Th","Fr","Sa"],Jt=()=>{let I=parseFloat(T.weight);T.weightUnit==="lbs"&&(I*=.453592);let F;T.heightUnit==="cm"?F=parseFloat(T.height):F=(parseFloat(T.heightFeet)||0)*30.48+(parseFloat(T.heightInches)||0)*2.54;const oe=parseInt(T.age);let ue=T.gender==="male"?10*I+6.25*F-5*oe+5:10*I+6.25*F-5*oe-161;const Be=ue*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[T.dailyActivity],$e={low:100,moderate:200,high:300,daily:400},Ft=Math.round(Be+$e[T.trainingFrequency]);let Ye=Ft,$n,ns;switch(T.goal){case"lose":Ye=Ft*(1-{light:.15,moderate:.2,harsh:.25}[T.deficitLevel]),$n=2.2,ns=.3;break;case"build":Ye=Ft*1.1,$n=2,ns=.22;break;default:$n=1.8,ns=.25}Ye=Math.max(Ye,T.gender==="male"?1400:1100);const ar=Math.round(I*$n),On=Math.round(Ye*ns/9),Xs=Math.max(0,Math.round((Ye-ar*4-On*9)/4));q({calories:Math.round(Ye),protein:ar,carbs:Xs,fats:On,bmr:Math.round(ue),neat:Math.round(Be),exerciseAdd:$e[T.trainingFrequency],tdee:Math.round(Ft)})},Fn=async()=>{if($)try{const I={clientId:t.id,calories:$.calories,protein:$.protein,carbs:$.carbs,fats:$.fats,goal:T.goal,updatedAt:At.now()};await Cs(We(ye,"nutritionTargets",t.id),I),E(I),y("dashboard"),qe("Macro targets saved!","success")}catch(I){console.error("Error saving targets:",I),qe("Failed to save targets. Please try again.","error")}},An=()=>{const I=T.weight&&parseFloat(T.weight)>0,F=T.age&&parseInt(T.age)>0,oe=T.heightUnit==="cm"?T.height&&parseFloat(T.height)>0:T.heightFeet&&parseFloat(T.heightFeet)>0||T.heightInches&&parseFloat(T.heightInches)>0;return I&&F&&oe},pn="nut_favourite_foods",ks=()=>{try{return JSON.parse(localStorage.getItem(pn)||"[]")}catch{return[]}};w.useEffect(()=>{if(!t?.id)return;(async()=>{try{const F=await Us(We(ye,"favouriteFoods",t.id));if(F.exists()){const oe=F.data().items||[];localStorage.setItem(pn,JSON.stringify(oe)),es(ue=>ue+1)}else{const oe=ks();oe.length>0&&await Cs(We(ye,"favouriteFoods",t.id),{items:oe,updatedAt:At.now()})}}catch(F){console.error("Error loading favourites:",F)}})()},[t?.id]);const ae=I=>ks().some(F=>F.name.toLowerCase()===(I||"").toLowerCase()),Me=I=>{const F=ks(),oe=F.findIndex(ue=>ue.name.toLowerCase()===I.name.toLowerCase());oe>=0?F.splice(oe,1):F.unshift({name:I.name,protein:I.protein,carbs:I.carbs,fats:I.fats,calories:I.calories,serving:I.serving,per100g:I.per100g||null,servingUnit:I.servingUnit||"g",portion:I.portion||null}),localStorage.setItem(pn,JSON.stringify(F)),t?.id&&Cs(We(ye,"favouriteFoods",t.id),{items:F,updatedAt:At.now()}).catch(ue=>console.error("Error saving favourites:",ue)),es(ue=>ue+1)},Ke=I=>{const F=[...G.entries,{...I,meal:X,id:Date.now(),addedAt:new Date().toISOString()}],oe={...G,entries:F};Q(oe),nt(oe),P(null),Ct(null),Rt("100"),Tt(0),Qt("weight"),_n({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),qe("Food added!","success")},vt=I=>{const F=G.entries.filter(ue=>ue.id!==I),oe={...G,entries:F};Q(oe),nt(oe)},it=async I=>{if(!(!t?.id||I===B)){Xe(!0);try{const F=await Us(We(ye,"nutritionLogs",`${t.id}_${I}`));if(!F.exists()||!F.data().entries?.length){qe("No food logged on that day","error");return}const oe=F.data().entries.map(Be=>({...Be,id:Date.now()+Math.random(),addedAt:new Date().toISOString()})),ue=[...G.entries,...oe],Ue={...G,entries:ue};Q(Ue),nt(Ue),O(!1),qe(`Copied ${oe.length} items from ${Nn(I)}`,"success")}catch(F){console.error("Error copying day:",F),qe("Failed to copy day","error")}finally{Xe(!1)}}},Gt=w.useRef(null),jn=w.useRef([]),gn=3,Sn=5,Ns=async()=>{we(!0);const I=document.querySelector("#barcode-reader");if(!I){we(!1),qe("Scanner container not found.","error");return}if(!Gt.current)try{const oe=await Ks(()=>import("./quagga.min-BbicSfvA.js").then(ue=>ue.q),[]);Gt.current=oe.default}catch(oe){console.error("Failed to load barcode scanner:",oe),we(!1),qe("Could not load scanner.","error");return}const F=Gt.current;F.init({inputStream:{type:"LiveStream",target:I,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},oe=>{if(oe){console.error("Quagga init error:",oe),we(!1),qe("Could not access camera. Check permissions.","error");return}F.start(),Ae.current=!0}),jn.current=[],F.onDetected(oe=>{const ue=oe.codeResult.decodedCodes?.filter(Be=>Be.error!==void 0)?.map(Be=>Be.error)||[];if((ue.length>0?ue.reduce((Be,$e)=>Be+$e,0)/ue.length:1)<.15){const Be=oe.codeResult.code,$e=jn.current;$e.push(Be),$e.length>Sn&&$e.shift(),$e.filter(Ye=>Ye===Be).length>=gn&&(F.offDetected(),jn.current=[],xe(Be))}})},qn=()=>{const I=Gt.current;Ae.current&&I&&(I.stop(),I.offDetected(),Ae.current=!1),we(!1)},Es=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,Zt=I=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((I||"").replace(/\s/g,"")),ln=I=>{if(!I)return{value:100,unit:"g"};const F=I.toLowerCase().replace(/\s/g,""),oe=F.match(/([\d.]+)/),ue=oe?parseFloat(oe[1]):100;return Zt(I)?/cl/.test(F)?{value:ue*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(F)&&!/ml/.test(F)?{value:ue*1e3,unit:"ml"}:{value:ue,unit:"ml"}:{value:ue,unit:"g"}},ls=I=>{if(Zt(I.serving_size)||Zt(I.quantity))return"ml";const F=I.product_name||I.product_name_en||"";return Es.test(F)?"ml":"g"},Yr=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],fa=(I,F)=>{const oe=I||"",ue=oe.match(/\((\d+\.?\d*)\s*g\)/i),Ue=oe.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(ue&&Ue){const Ft=parseFloat(ue[1]);let Ye=Ue[1].replace(/^\d+\s*/,"").trim();if(Ye&&Ft>0)return{label:Ye,weight:Ft}}const Be=oe.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Be){const Ft=parseFloat(Be[1]);let Ye=Be[2].replace(/^\d+\s*/,"").trim();if(Ye&&Ft>0)return{label:Ye,weight:Ft}}const $e=F||"";for(const{pattern:Ft,label:Ye,weight:$n}of Yr)if(Ft.test($e))return{label:Ye,weight:$n};return null},Qr=I=>{const F=I.nutriments||{},oe=ls(I),ue=ln(I.serving_size),Ue=oe==="ml"?ue.unit==="ml"?ue.value:100:ue.value,Be=I.product_name||I.product_name_en||"Unknown Product",$e=fa(I.serving_size,Be);return{name:Be,brand:I.brands||"",image:I.image_small_url||I.image_url||null,servingSize:I.serving_size||"100g",servingValue:Ue,servingUnit:oe,portion:$e,protein:Math.round(F.proteins_100g||F.proteins||0),carbs:Math.round(F.carbohydrates_100g||F.carbohydrates||0),fats:Math.round(F.fat_100g||F.fat||0),calories:Math.round(F["energy-kcal_100g"]||F["energy-kcal"]||(F.energy_100g?F.energy_100g/4.184:0)),per100g:!0}},pr=async I=>{Oe(!0);try{const F=`https://world.openfoodfacts.org/api/v2/product/${I}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,oe=await fetch(F);if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const ue=await oe.json();if(ue.status==="success"||ue.status===1||ue.product){const Ue=Qr(ue.product);Ue.calories===0&&Ue.protein===0&&Ue.carbs===0?qe("Product found but no nutrition data available.","error"):(Ct(Ue),Ue.portion?(Tt(1),Rt(String(Ue.portion.weight)),Qt("portion")):(Tt(0),Rt(String(Ue.servingValue||100)),Qt("weight")),Fe(""))}else qe("Product not found. Try search or manual entry.","error")}catch(F){console.error("Barcode lookup error:",F),qe("Failed to look up product. Check your connection.","error")}Oe(!1)},Hn=(I,F,oe)=>{const ue=I.toLowerCase().trim(),Ue=F.toLowerCase().trim(),Be=oe.toLowerCase().trim();let $e=0;return(ue===Be||ue===Be+"s"||ue+"s"===Be)&&($e+=100),(ue.endsWith(" "+Be)||ue.endsWith(" "+Be+"s"))&&($e+=40),(ue.startsWith(Be+" ")||ue.startsWith(Be+"s "))&&($e+=15),Be.split(/\s+/).some(Ye=>Ue===Ye||Ue.startsWith(Ye))&&($e+=30),$e+=Math.max(0,30-ue.length),$e},Fs=async()=>{if(!Mt.trim())return;gt.current&&gt.current.abort();const I=new AbortController;gt.current=I;const F=Mt.trim().toLowerCase(),oe=F.split(/\s+/).filter(Boolean);if(Jp.has(F)){Yt(Jp.get(F));return}st(!0);try{const Ue=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Mt.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Be=await fetch(Ue,{signal:I.signal});if(!Be.ok)throw new Error(`HTTP ${Be.status}`);const Ft=((await Be.json()).products||[]).map(Ye=>Qr(Ye)).filter(Ye=>Ye.name!=="Unknown Product"&&(Ye.calories>0||Ye.protein>0)).filter(Ye=>{const $n=(Ye.name+" "+Ye.brand).toLowerCase();return oe.every(ns=>$n.includes(ns))}).sort((Ye,$n)=>Hn($n.name,$n.brand,F)-Hn(Ye.name,Ye.brand,F)).slice(0,10);Jp.set(F,Ft),Yt(Ft),Ft.length===0&&qe("No results found. Try a different search.","info")}catch(ue){if(ue.name==="AbortError")return;console.error("Search error:",ue),qe("Search failed. Check your connection.","error")}st(!1)};w.useEffect(()=>{if(yt.current&&clearTimeout(yt.current),!(!Mt.trim()||J!=="search"||fe))return yt.current=setTimeout(()=>{Fs()},700),()=>clearTimeout(yt.current)},[Mt]);const vs=l,Ln={"ring-protein":vs?"#2dd4bf":"#14b8a6","ring-carbs":vs?"#fbbf24":"#f59e0b","ring-fats":vs?"#a78bfa":"#8b5cf6","ring-cals":"var(--color-primary)"},Rn=80,ts=2*Math.PI*Rn,zt=(I,F,oe,ue,Ue)=>{const Be=ue>0?Math.min(100,Math.round(oe/ue*100)):0,$e=ts-Be/100*ts,Ft=Ln[Ue]||"#14b8a6";return a.jsxs("div",{className:"nut-ring-wrap",children:[a.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:Rn}),a.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:Rn,style:{stroke:Ft},strokeDasharray:ts,strokeDashoffset:$e})]}),a.jsxs("div",{className:"nut-ring-center",children:[a.jsx("span",{className:"nut-ring-value",style:{color:Ft},children:Math.round(oe)}),a.jsxs("span",{className:"nut-ring-target",children:["/ ",ue,I==="Calories"?"":"g"]}),a.jsx("span",{className:"nut-ring-label",style:{color:Ft},children:F})]}),a.jsxs("span",{className:"nut-ring-pct",style:{color:Ft},children:[Be,"%"]})]})};if(w.useEffect(()=>{if(!_e)return;const I=setTimeout(()=>{const F=_e;qn(),xe(null),pr(F)},1500);return()=>clearTimeout(I)},[_e]),w.useEffect(()=>()=>{const I=Gt.current;if(Ae.current&&I){try{I.stop(),I.offDetected()}catch{}Ae.current=!1}},[]),i||g==="loading")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"nut-loading-inline",children:a.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"nut-main",children:[a.jsxs("div",{className:"nut-setup-intro",children:[a.jsx("h2",{children:"Set Your Daily Targets"}),a.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),a.jsxs("div",{className:"nut-calc-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Gender"}),a.jsxs("div",{className:"nut-toggle-group",children:[a.jsx("button",{className:T.gender==="male"?"active":"",onClick:()=>{L(I=>({...I,gender:"male"})),q(null)},children:"Male"}),a.jsx("button",{className:T.gender==="female"?"active":"",onClick:()=>{L(I=>({...I,gender:"female"})),q(null)},children:"Female"})]})]}),a.jsxs("div",{className:"nut-form-row",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Age"}),a.jsx("input",{type:"number",value:T.age,onChange:I=>{L(F=>({...F,age:I.target.value})),q(null)},placeholder:"Years",min:"15",max:"100"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Weight"}),a.jsxs("div",{className:"nut-input-unit",children:[a.jsx("input",{type:"number",value:T.weight,onChange:I=>{L(F=>({...F,weight:I.target.value})),q(null)},placeholder:T.weightUnit,min:"30",max:"300"}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:T.weightUnit==="kg"?"active":"",onClick:()=>{L(I=>({...I,weightUnit:"kg"})),q(null)},children:"kg"}),a.jsx("button",{className:T.weightUnit==="lbs"?"active":"",onClick:()=>{L(I=>({...I,weightUnit:"lbs"})),q(null)},children:"lbs"})]})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Height"}),a.jsxs("div",{className:"nut-input-unit",children:[T.heightUnit==="cm"?a.jsx("input",{type:"number",value:T.height,onChange:I=>{L(F=>({...F,height:I.target.value})),q(null)},placeholder:"cm",min:"100",max:"250"}):a.jsxs("div",{className:"nut-height-imperial",children:[a.jsx("input",{type:"number",value:T.heightFeet,onChange:I=>{L(F=>({...F,heightFeet:I.target.value})),q(null)},placeholder:"ft",min:"4",max:"7"}),a.jsx("input",{type:"number",value:T.heightInches,onChange:I=>{L(F=>({...F,heightInches:I.target.value})),q(null)},placeholder:"in",min:"0",max:"11"})]}),a.jsxs("div",{className:"nut-unit-toggle",children:[a.jsx("button",{className:T.heightUnit==="cm"?"active":"",onClick:()=>{L(I=>({...I,heightUnit:"cm"})),q(null)},children:"cm"}),a.jsx("button",{className:T.heightUnit==="ft"?"active":"",onClick:()=>{L(I=>({...I,heightUnit:"ft"})),q(null)},children:"ft/in"})]})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Daily Activity (outside of training)"}),a.jsxs("select",{value:T.dailyActivity,onChange:I=>{L(F=>({...F,dailyActivity:I.target.value})),q(null)},children:[a.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),a.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),a.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),a.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Training Sessions per Week"}),a.jsxs("select",{value:T.trainingFrequency,onChange:I=>{L(F=>({...F,trainingFrequency:I.target.value})),q(null)},children:[a.jsx("option",{value:"low",children:"1-2 sessions"}),a.jsx("option",{value:"moderate",children:"3-4 sessions"}),a.jsx("option",{value:"high",children:"5-6 sessions"}),a.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fitness Goal"}),a.jsxs("div",{className:"nut-goal-options",children:[a.jsxs("button",{className:T.goal==="lose"?"active":"",onClick:()=>{L(I=>({...I,goal:"lose"})),q(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"-"}),a.jsx("span",{children:"Lose Weight"})]}),a.jsxs("button",{className:T.goal==="maintain"?"active":"",onClick:()=>{L(I=>({...I,goal:"maintain"})),q(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"="}),a.jsx("span",{children:"Maintain"})]}),a.jsxs("button",{className:T.goal==="build"?"active":"",onClick:()=>{L(I=>({...I,goal:"build"})),q(null)},children:[a.jsx("span",{className:"nut-goal-icon",children:"+"}),a.jsx("span",{children:"Build Muscle"})]})]})]}),T.goal==="lose"&&a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Deficit Level"}),a.jsxs("div",{className:"nut-deficit-options",children:[a.jsxs("button",{className:T.deficitLevel==="light"?"active":"",onClick:()=>{L(I=>({...I,deficitLevel:"light"})),q(null)},children:[a.jsx("strong",{children:"Mild"}),a.jsx("span",{children:"15% below TDEE"})]}),a.jsxs("button",{className:T.deficitLevel==="moderate"?"active":"",onClick:()=>{L(I=>({...I,deficitLevel:"moderate"})),q(null)},children:[a.jsx("strong",{children:"Moderate"}),a.jsx("span",{children:"20% below TDEE"})]}),a.jsxs("button",{className:T.deficitLevel==="harsh"?"active":"",onClick:()=>{L(I=>({...I,deficitLevel:"harsh"})),q(null)},children:[a.jsx("strong",{children:"Aggressive"}),a.jsx("span",{children:"25% below TDEE"})]})]})]}),a.jsx("button",{className:"nut-calc-btn",onClick:Jt,disabled:!An(),children:"Calculate Macros"})]}),$&&a.jsxs("div",{className:"nut-calc-results",children:[a.jsx("h3",{children:"Your Daily Targets"}),a.jsxs("div",{className:"nut-calc-rings",children:[zt("Protein","Protein",$.protein,$.protein,"ring-protein"),zt("Carbs","Carbs",$.carbs,$.carbs,"ring-carbs"),zt("Fats","Fats",$.fats,$.fats,"ring-fats"),zt("Calories","Calories",$.calories,$.calories,"ring-cals")]}),a.jsxs("div",{className:"nut-calc-info",children:[a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"BMR (body at rest)"}),a.jsxs("span",{children:[$.bmr," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Daily activity (NEAT)"}),a.jsxs("span",{children:[$.neat," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",children:[a.jsx("span",{children:"+ Training sessions"}),a.jsxs("span",{children:["+",$.exerciseAdd," cal"]})]}),a.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[a.jsx("span",{children:"TDEE (total burn)"}),a.jsxs("span",{children:[$.tdee," cal"]})]})]}),a.jsx("button",{className:"nut-save-targets-btn",onClick:Fn,children:"Set as My Daily Targets"})]})]}),Wt&&a.jsx("div",{className:`toast-notification ${Wt.type}`,children:Wt.message})]});const gr=I=>{const F=new Date(I+"T12:00:00"),oe=F.getDay(),ue=new Date(F);ue.setDate(F.getDate()-(oe+6)%7);const Ue=[];for(let Be=0;Be<7;Be++){const $e=new Date(ue);$e.setDate(ue.getDate()+Be),Ue.push($e.toISOString().split("T")[0])}return Ue},Rr=["M","T","W","T","F","S","S"],bs=(I,F="search")=>{je(I),F==="scan"?(P("scan"),Ct(null)):F==="manual"?(P("manual"),_n({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):F==="favourites"?P("favourites"):(P("search"),Yt([]),on(""))},kn=gr(B),Qs=new Date(B+"T12:00:00"),Xr=`${Dn[Qs.getMonth()]} ${Qs.getFullYear()}`;return a.jsx(Jo,{children:a.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"nut-dark-zone",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:()=>{y("setup"),q(null)},"aria-label":"Recalculate macros",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"3"}),a.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),a.jsxs("div",{className:"nut-dark-content",children:[a.jsxs("div",{className:"nut-week-strip anim-fade-up",children:[a.jsxs("div",{className:"nut-week-header",children:[a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const I=new Date(B+"T12:00:00");I.setDate(I.getDate()-7);const F=I.toISOString().split("T")[0];K(F)},"aria-label":"Previous week",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsx("button",{className:"nut-week-month-label",onClick:()=>{C(!ge),R({year:Qs.getFullYear(),month:Qs.getMonth()})},children:Xr}),a.jsx("button",{className:"nut-week-arrow",onClick:()=>{const I=new Date(B+"T12:00:00");I.setDate(I.getDate()+7);const F=I.toISOString().split("T")[0];F<=ii()&&K(F)},"aria-label":"Next week",disabled:kn[6]>=ii(),children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-week-days",children:kn.map((I,F)=>{const oe=new Date(I+"T12:00:00").getDate(),ue=I===B,Ue=I>ii(),Be=I===ii();return a.jsxs("button",{className:`nut-week-day${ue?" selected":""}${Be?" today":""}${Ue?" future":""}`,disabled:Ue,onClick:()=>K(I),children:[a.jsx("span",{className:"nut-week-day-letter",children:Rr[F]}),a.jsx("span",{className:"nut-week-day-num",children:oe})]},I)})})]}),ge&&a.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>R(I=>{let F=I.month-1,oe=I.year;return F<0&&(F=11,oe--),{year:oe,month:F}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[Dn[j.month]," ",j.year]}),a.jsx("button",{onClick:()=>R(I=>{let F=I.month+1,oe=I.year;return F>11&&(F=0,oe++),{year:oe,month:F}}),disabled:j.year===new Date().getFullYear()&&j.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Kn.map(I=>a.jsx("span",{children:I},I))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Xt(j.year,j.month))].map((I,F)=>a.jsx("span",{},`e${F}`)),[...Array(sn(j.year,j.month))].map((I,F)=>{const oe=F+1,ue=`${j.year}-${String(j.month+1).padStart(2,"0")}-${String(oe).padStart(2,"0")}`,Ue=ue>ii(),Be=ue===B,$e=ue===ii();return a.jsx("button",{className:`nut-cal-day${Be?" selected":""}${$e?" today":""}${Ue?" future":""}`,disabled:Ue,onClick:()=>{K(ue),C(!1)},children:oe},oe)})]})]}),a.jsxs("div",{className:"nut-rings-row anim-fade-up-d2",children:[zt("Protein","Protein",he.protein,b.protein,"ring-protein"),zt("Carbs","Carbs",he.carbs,b.carbs,"ring-carbs"),zt("Fats","Fats",he.fats,b.fats,"ring-fats"),zt("Calories","kCal",he.calories,b.calories,"ring-cals")]})]})]}),a.jsx("div",{className:"nut-light-zone anim-fade-up-d4",children:a.jsxs("div",{className:"nut-light-content",children:[He&&a.jsx("div",{className:"nut-quick-row",children:a.jsxs("button",{className:"nut-copy-day-btn",onClick:()=>{O(!0),A({year:new Date().getFullYear(),month:new Date().getMonth()})},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),a.jsx("span",{children:"Copy day"})]})}),a.jsx("div",{className:"nut-log-section",children:a.jsx("div",{className:"nut-meals-list",children:$w.map(I=>{const F=G.entries.filter(ue=>(ue.meal||"snacks")===I.key),oe=F.reduce((ue,Ue)=>({protein:ue.protein+(Ue.protein||0),carbs:ue.carbs+(Ue.carbs||0),fats:ue.fats+(Ue.fats||0),calories:ue.calories+(Ue.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return a.jsxs("div",{className:"nut-meal-card",children:[a.jsxs("div",{className:"nut-meal-card-header",children:[a.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${I.key}`,children:I3[I.key]}),a.jsx("span",{className:"nut-meal-card-title",children:I.label}),F.length>0&&a.jsxs("span",{className:"nut-meal-card-cal",children:[oe.calories," cal"]}),He&&a.jsx("button",{className:"nut-meal-add-btn",onClick:()=>Ce(De===I.key?null:I.key),"aria-label":`Add to ${I.label}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]}),F.length>0&&a.jsxs("div",{className:"nut-meal-bars",children:[a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,b.protein>0?oe.protein/b.protein*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[oe.protein,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,b.carbs>0?oe.carbs/b.carbs*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[oe.carbs,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,b.fats>0?oe.fats/b.fats*100:0)}%`}})}),a.jsxs("span",{className:"nut-meal-bar-val",children:[oe.fats,"g"]})]}),a.jsxs("div",{className:"nut-meal-bar-row",children:[a.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),a.jsx("div",{className:"nut-meal-bar-track",children:a.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,b.calories>0?oe.calories/b.calories*100:0)}%`}})}),a.jsx("span",{className:"nut-meal-bar-val",children:oe.calories})]})]}),F.length>0&&a.jsx("div",{className:"nut-log-list",children:F.map(ue=>a.jsxs("div",{className:"nut-log-item",children:[a.jsx("button",{className:`nut-fav-star log${ae(ue.name)?" active":""}`,onClick:()=>Me(ue),"aria-label":ae(ue.name)?"Remove from favourites":"Add to favourites",children:a.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:ae(ue.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("div",{className:"nut-log-item-info",children:[a.jsx("span",{className:"nut-log-item-name",children:ue.name}),ue.serving&&a.jsx("span",{className:"nut-log-item-serving",children:ue.serving})]}),a.jsxs("div",{className:"nut-log-item-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[ue.protein,"p"]}),a.jsxs("span",{className:"nut-macro-c",children:[ue.carbs,"c"]}),a.jsxs("span",{className:"nut-macro-f",children:[ue.fats,"f"]}),a.jsx("span",{className:"nut-macro-cal",children:ue.calories})]}),He&&a.jsx("button",{className:"nut-log-delete",onClick:()=>vt(ue.id),"aria-label":"Remove",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ue.id))}),F.length===0&&a.jsx("div",{className:"nut-meal-empty",children:a.jsx("p",{children:He?"Tap + to add food":"No entries"})})]},I.key)})})})]})}),De&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>Ce(null)}),a.jsxs("div",{className:"nut-add-picker",children:[a.jsx("div",{className:"nut-add-picker-handle"}),a.jsxs("h3",{className:"nut-add-picker-title",children:["Add to ",$w.find(I=>I.key===De)?.label]}),a.jsxs("div",{className:"nut-add-picker-options",children:[a.jsxs("button",{onClick:()=>{const I=De;Ce(null),bs(I,"scan")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),a.jsx("span",{children:"Scan Barcode"})]}),a.jsxs("button",{onClick:()=>{const I=De;Ce(null),bs(I,"search")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Search Food"})]}),a.jsxs("button",{onClick:()=>{const I=De;Ce(null),bs(I,"manual")},children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),a.jsx("span",{children:"Manual Entry"})]}),a.jsxs("button",{onClick:()=>{const I=De;Ce(null),bs(I,"favourites")},children:[a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a.jsx("span",{children:"Favourites"})]})]})]})]}),V&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>O(!1),children:a.jsxs("div",{className:"nut-copy-from-popup",onClick:I=>I.stopPropagation(),children:[a.jsxs("div",{className:"nut-copy-from-header",children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"20",height:"20",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),a.jsx("span",{children:"Copy from..."}),a.jsx("button",{className:"nut-modal-close",onClick:()=>O(!1),children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),a.jsx("p",{className:"nut-copy-from-hint",children:"Pick a day to copy its food log into today"}),a.jsxs("div",{className:"nut-cal-header",children:[a.jsx("button",{onClick:()=>A(I=>{let F=I.month-1,oe=I.year;return F<0&&(F=11,oe--),{year:oe,month:F}}),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"15 18 9 12 15 6"})})}),a.jsxs("span",{children:[Dn[D.month]," ",D.year]}),a.jsx("button",{onClick:()=>A(I=>{let F=I.month+1,oe=I.year;return F>11&&(F=0,oe++),{year:oe,month:F}}),disabled:D.year===new Date().getFullYear()&&D.month>=new Date().getMonth(),children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),a.jsx("div",{className:"nut-cal-days-header",children:Kn.map(I=>a.jsx("span",{children:I},I))}),a.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Xt(D.year,D.month))].map((I,F)=>a.jsx("span",{},`e${F}`)),[...Array(sn(D.year,D.month))].map((I,F)=>{const oe=F+1,ue=`${D.year}-${String(D.month+1).padStart(2,"0")}-${String(oe).padStart(2,"0")}`,Ue=ue>ii(),Be=ue===B,$e=ue===ii(),Ft=Ue||Be;return a.jsx("button",{className:`nut-cal-day${Be?" selected":""}${$e?" today":""}${Ue?" future":""}`,disabled:Ft,onClick:()=>it(ue),children:oe},oe)})]}),Le&&a.jsxs("div",{className:"nut-copy-from-loading",children:[a.jsx("div",{className:"wk-loading-spinner"}),a.jsx("span",{children:"Copying..."})]})]})}),J&&a.jsx("div",{className:"nut-modal-overlay",onClick:()=>{qn(),xe(null),P(null),Ct(null)},children:a.jsxs("div",{className:"nut-modal",onClick:I=>I.stopPropagation(),children:[a.jsxs("div",{className:"nut-modal-header",children:[a.jsx("h3",{children:J==="scan"?"Scan Barcode":J==="search"?"Search Food":J==="favourites"?"Favourites":"Manual Entry"}),a.jsx("button",{className:"nut-modal-close",onClick:()=>{qn(),xe(null),P(null),Ct(null)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),J==="scan"&&!fe&&a.jsxs("div",{className:"nut-scan-area",children:[a.jsxs("div",{className:"nut-scanner-wrapper",children:[a.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),re&&!_e&&a.jsx("div",{className:"nut-scan-line"}),_e&&a.jsxs("div",{className:"nut-scan-detected-overlay",children:[a.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M20 6L9 17l-5-5"})}),a.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),a.jsx("p",{className:"nut-scan-detected-code",children:_e})]})]}),!re&&a.jsxs("button",{className:"nut-scan-start-btn",onClick:Ns,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),a.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),a.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),a.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),a.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),re&&!_e&&a.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),a.jsx("div",{className:"nut-barcode-divider",children:a.jsx("span",{children:"or enter barcode manually"})}),a.jsxs("div",{className:"nut-barcode-manual",children:[a.jsx("input",{type:"text",inputMode:"numeric",value:Se,onChange:I=>Fe(I.target.value),onKeyDown:I=>I.key==="Enter"&&Se.trim()&&pr(Se.trim()),placeholder:"Enter barcode number"}),a.jsx("button",{onClick:()=>Se.trim()&&pr(Se.trim()),disabled:!Se.trim()||Ze,children:Ze?"...":"Look Up"})]})]}),J==="scan"&&fe&&(()=>{const I=fe.servingUnit||"g",F=fe.portion,oe=pt==="portion"&&F?Je*F.weight:parseFloat(ht)||0,ue=oe/100,Ue=I==="ml"?[100,200,250,500]:[50,100,150,200],Be=pt==="portion"&&F?`${Je} ${F.label}${Je!==1?"s":""} (${Math.round(oe)}${I})`:`${Math.round(oe)}${I}`;return a.jsxs("div",{className:"nut-product-result",children:[fe.image&&a.jsx("img",{src:fe.image,alt:fe.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:fe.name}),a.jsx("button",{className:`nut-fav-star confirm${ae(fe.name)?" active":""}`,onClick:()=>Me({name:fe.name,protein:fe.protein,carbs:fe.carbs,fats:fe.fats,calories:fe.calories,serving:fe.servingSize,per100g:{protein:fe.protein,carbs:fe.carbs,fats:fe.fats,calories:fe.calories},servingUnit:fe.servingUnit||"g",portion:fe.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:ae(fe.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),fe.brand&&a.jsx("p",{className:"nut-product-brand",children:fe.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",I,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[fe.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[fe.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[fe.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[fe.calories," cal"]})]}),F&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:pt==="portion"?"active":"",onClick:()=>{Qt("portion"),Je<1&&Tt(1)},children:"Portions"}),a.jsxs("button",{className:pt==="weight"?"active":"",onClick:()=>{Qt("weight"),Rt(String(Math.round(oe)||100))},children:["Custom (",I,")"]})]}),pt==="portion"&&F?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Tt(Math.max(1,Je-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Je}),a.jsxs("span",{className:"nut-stepper-label",children:[F.label,Je!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(oe),I]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Tt(Je+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",I,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:ht,onChange:$e=>Rt($e.target.value),onFocus:$e=>$e.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ue.map($e=>a.jsxs("button",{className:`nut-quick-btn${ht===String($e)?" active":""}`,onClick:()=>Rt(String($e)),children:[$e,I]},$e))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(fe.protein*ue),"p / ",Math.round(fe.carbs*ue),"c / ",Math.round(fe.fats*ue),"f / ",Math.round(fe.calories*ue)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>{Ct(null),P("scan")},children:"Scan Again"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ke({name:fe.name,protein:Math.round(fe.protein*ue),carbs:Math.round(fe.carbs*ue),fats:Math.round(fe.fats*ue),calories:Math.round(fe.calories*ue),serving:Be}),children:"Add"})]})]})})(),J==="search"&&!fe&&a.jsxs("div",{className:"nut-search-area",children:[a.jsxs("div",{className:"nut-search-bar",children:[a.jsx("input",{type:"text",ref:ut,value:Mt,onChange:I=>on(I.target.value),onKeyDown:I=>{I.key==="Enter"&&(clearTimeout(yt.current),Fs())},onFocus:()=>setTimeout(()=>ut.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),a.jsx("button",{onClick:Fs,disabled:rt,children:rt?"...":"Search"})]}),a.jsxs("div",{className:"nut-search-results",children:[zn.map((I,F)=>a.jsxs("button",{className:"nut-search-item",onClick:()=>{Ct(I),I.portion?(Tt(1),Rt(String(I.portion.weight)),Qt("portion")):(Tt(0),Rt(String(I.servingValue||100)),Qt("weight"))},children:[I.image&&a.jsx("img",{src:I.image,alt:I.name||"Product",loading:"lazy"}),a.jsxs("div",{className:"nut-search-item-info",children:[a.jsx("span",{className:"nut-search-item-name",children:I.name}),I.brand&&a.jsx("span",{className:"nut-search-item-brand",children:I.brand}),a.jsxs("span",{className:"nut-search-item-macros",children:[I.calories," cal  ",I.protein,"p  ",I.carbs,"c  ",I.fats,"f per 100",I.servingUnit||"g"]})]})]},F)),zn.length===0&&Mt&&!rt&&a.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),J==="search"&&fe&&(()=>{const I=fe.servingUnit||"g",F=fe.portion,oe=pt==="portion"&&F?Je*F.weight:parseFloat(ht)||0,ue=oe/100,Ue=I==="ml"?[100,200,250,500]:[50,100,150,200],Be=pt==="portion"&&F?`${Je} ${F.label}${Je!==1?"s":""} (${Math.round(oe)}${I})`:`${Math.round(oe)}${I}`;return a.jsxs("div",{className:"nut-product-result",children:[fe.image&&a.jsx("img",{src:fe.image,alt:fe.name||"Product",className:"nut-product-img",loading:"lazy"}),a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:fe.name}),a.jsx("button",{className:`nut-fav-star confirm${ae(fe.name)?" active":""}`,onClick:()=>Me({name:fe.name,protein:fe.protein,carbs:fe.carbs,fats:fe.fats,calories:fe.calories,serving:fe.servingSize,per100g:{protein:fe.protein,carbs:fe.carbs,fats:fe.fats,calories:fe.calories},servingUnit:fe.servingUnit||"g",portion:fe.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:ae(fe.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),fe.brand&&a.jsx("p",{className:"nut-product-brand",children:fe.brand}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",I,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[fe.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[fe.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[fe.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[fe.calories," cal"]})]}),F&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:pt==="portion"?"active":"",onClick:()=>{Qt("portion"),Je<1&&Tt(1)},children:"Portions"}),a.jsxs("button",{className:pt==="weight"?"active":"",onClick:()=>{Qt("weight"),Rt(String(Math.round(oe)||100))},children:["Custom (",I,")"]})]}),pt==="portion"&&F?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Tt(Math.max(1,Je-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Je}),a.jsxs("span",{className:"nut-stepper-label",children:[F.label,Je!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(oe),I]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Tt(Je+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",I,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:ht,onChange:$e=>Rt($e.target.value),onFocus:$e=>$e.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ue.map($e=>a.jsxs("button",{className:`nut-quick-btn${ht===String($e)?" active":""}`,onClick:()=>Rt(String($e)),children:[$e,I]},$e))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(fe.protein*ue),"p / ",Math.round(fe.carbs*ue),"c / ",Math.round(fe.fats*ue),"f / ",Math.round(fe.calories*ue)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>Ct(null),children:"Back to Search"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ke({name:fe.name,protein:Math.round(fe.protein*ue),carbs:Math.round(fe.carbs*ue),fats:Math.round(fe.fats*ue),calories:Math.round(fe.calories*ue),serving:Be}),children:"Add"})]})]})})(),J==="manual"&&a.jsxs("div",{className:"nut-manual-form",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Food Name"}),a.jsx("input",{type:"text",value:ct.name,onChange:I=>_n(F=>({...F,name:I.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Serving Size (optional)"}),a.jsx("input",{type:"text",value:ct.serving,onChange:I=>_n(F=>({...F,serving:I.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),a.jsxs("div",{className:"nut-manual-macros",children:[a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Protein (g)"}),a.jsx("input",{type:"number",value:ct.protein,onChange:I=>_n(F=>({...F,protein:I.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Carbs (g)"}),a.jsx("input",{type:"number",value:ct.carbs,onChange:I=>_n(F=>({...F,carbs:I.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Fats (g)"}),a.jsx("input",{type:"number",value:ct.fats,onChange:I=>_n(F=>({...F,fats:I.target.value})),min:"0"})]}),a.jsxs("div",{className:"nut-form-group",children:[a.jsx("label",{children:"Calories"}),a.jsx("input",{type:"number",value:ct.calories,onChange:I=>_n(F=>({...F,calories:I.target.value})),min:"0"})]})]}),a.jsx("button",{className:"nut-btn-primary",disabled:!ct.name.trim(),onClick:()=>Ke({name:ct.name,protein:parseFloat(ct.protein)||0,carbs:parseFloat(ct.carbs)||0,fats:parseFloat(ct.fats)||0,calories:parseFloat(ct.calories)||0,serving:ct.serving||""}),children:"Add Food"})]}),J==="favourites"&&!fe&&(()=>{const I=ks(),F=oe=>{if(oe.per100g){const ue=oe.per100g;Ct({name:oe.name,brand:"",image:null,servingSize:oe.serving||"100g",servingValue:100,servingUnit:oe.servingUnit||"g",portion:oe.portion||null,protein:ue.protein,carbs:ue.carbs,fats:ue.fats,calories:ue.calories,per100g:!0}),oe.portion?(Tt(1),Rt(String(oe.portion.weight)),Qt("portion")):(Tt(0),Rt("100"),Qt("weight"))}else Ke({name:oe.name,protein:oe.protein,carbs:oe.carbs,fats:oe.fats,calories:oe.calories,serving:oe.serving||""})};return a.jsx("div",{className:"nut-recent-area",children:I.length===0?a.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):a.jsx("div",{className:"nut-recent-list",children:I.map((oe,ue)=>a.jsxs("div",{className:"nut-recent-item-row",children:[a.jsx("button",{className:"nut-fav-star active",onClick:Ue=>{Ue.stopPropagation(),Me(oe)},children:a.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),a.jsxs("button",{className:"nut-recent-item",onClick:()=>F(oe),children:[a.jsxs("div",{className:"nut-recent-item-info",children:[a.jsx("span",{className:"nut-recent-item-name",children:oe.name}),a.jsx("span",{className:"nut-recent-item-serving",children:oe.serving||""})]}),a.jsxs("span",{className:"nut-recent-item-macros",children:[oe.calories," cal"]})]})]},ue))})})})(),J==="favourites"&&fe&&(()=>{const I=fe.servingUnit||"g",F=fe.portion,oe=pt==="portion"&&F?Je*F.weight:parseFloat(ht)||0,ue=oe/100,Ue=I==="ml"?[100,200,250,500]:[50,100,150,200],Be=pt==="portion"&&F?`${Je} ${F.label}${Je!==1?"s":""} (${Math.round(oe)}${I})`:`${Math.round(oe)}${I}`;return a.jsxs("div",{className:"nut-product-result",children:[a.jsxs("div",{className:"nut-product-name-row",children:[a.jsx("h4",{children:fe.name}),a.jsx("button",{className:`nut-fav-star confirm${ae(fe.name)?" active":""}`,onClick:()=>Me({name:fe.name,protein:fe.protein,carbs:fe.carbs,fats:fe.fats,calories:fe.calories,serving:fe.servingSize,per100g:{protein:fe.protein,carbs:fe.carbs,fats:fe.fats,calories:fe.calories},servingUnit:fe.servingUnit||"g",portion:fe.portion||null}),children:a.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:ae(fe.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),a.jsxs("p",{className:"nut-product-per",children:["Per 100",I,":"]}),a.jsxs("div",{className:"nut-product-macros",children:[a.jsxs("span",{className:"nut-macro-p",children:[fe.protein,"g P"]}),a.jsxs("span",{className:"nut-macro-c",children:[fe.carbs,"g C"]}),a.jsxs("span",{className:"nut-macro-f",children:[fe.fats,"g F"]}),a.jsxs("span",{className:"nut-macro-cal",children:[fe.calories," cal"]})]}),F&&a.jsxs("div",{className:"nut-mode-toggle",children:[a.jsx("button",{className:pt==="portion"?"active":"",onClick:()=>{Qt("portion"),Je<1&&Tt(1)},children:"Portions"}),a.jsxs("button",{className:pt==="weight"?"active":"",onClick:()=>{Qt("weight"),Rt(String(Math.round(oe)||100))},children:["Custom (",I,")"]})]}),pt==="portion"&&F?a.jsxs("div",{className:"nut-portion-stepper",children:[a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Tt(Math.max(1,Je-1)),children:"-"}),a.jsxs("div",{className:"nut-stepper-display",children:[a.jsx("span",{className:"nut-stepper-count",children:Je}),a.jsxs("span",{className:"nut-stepper-label",children:[F.label,Je!==1?"s":""]}),a.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(oe),I]})]}),a.jsx("button",{className:"nut-stepper-btn",onClick:()=>Tt(Je+1),children:"+"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"nut-serving-adjust",children:[a.jsxs("label",{children:["Serving (",I,")"]}),a.jsx("input",{type:"number",inputMode:"numeric",value:ht,onChange:$e=>Rt($e.target.value),onFocus:$e=>$e.target.select(),min:"0"})]}),a.jsx("div",{className:"nut-quick-amounts",children:Ue.map($e=>a.jsxs("button",{className:`nut-quick-btn${ht===String($e)?" active":""}`,onClick:()=>Rt(String($e)),children:[$e,I]},$e))})]}),a.jsx("div",{className:"nut-product-total",children:a.jsxs("span",{children:["Total: ",Math.round(fe.protein*ue),"p / ",Math.round(fe.carbs*ue),"c / ",Math.round(fe.fats*ue),"f / ",Math.round(fe.calories*ue)," cal"]})}),a.jsxs("div",{className:"nut-product-actions",children:[a.jsx("button",{className:"nut-btn-secondary",onClick:()=>Ct(null),children:"Back to Favourites"}),a.jsx("button",{className:"nut-btn-primary",onClick:()=>Ke({name:fe.name,protein:Math.round(fe.protein*ue),carbs:Math.round(fe.carbs*ue),fats:Math.round(fe.fats*ue),calories:Math.round(fe.calories*ue),serving:Be}),children:"Add"})]})]})})()]})}),a.jsx(Kr,{active:"nutrition"}),Wt&&a.jsx("div",{className:`toast-notification ${Wt.type}`,children:Wt.message})]})})}async function L3(s){const{type:e="workout",title:t="Workout Complete!",stats:i=[],badges:l=[],badgeImage:u,badgeDesc:d}=s,p=1080,g=1920,y=document.createElement("canvas");y.width=p,y.height=g;const b=y.getContext("2d"),E="#2a2a28",T="#ffffff",L="#A12F3A",$="#1a1a1a",q="#555555";b.fillStyle=E,b.fillRect(0,0,p,g);const B=Math.round(p*.82),K=Math.round(g*.75),G=Math.round((p-B)/2),Q=Math.round((g-K)/2),he=28,Ee=5;b.save(),b.shadowColor="rgba(0, 0, 0, 0.45)",b.shadowBlur=40,b.shadowOffsetY=10,Ww(b,G,Q,B,K,he),b.fillStyle=T,b.fill(),b.restore(),b.save(),Ww(b,G,Q,B,K,he),b.strokeStyle=L,b.lineWidth=Ee,b.stroke(),b.restore();const ge=220,C=50,j=52,R=68,V=10,O=36,D=48,A=30,Le=34,Xe=46,X=30,je=28;b.font=`bold ${j}px 'Orbitron', sans-serif`;const De=Xc(b,t.toUpperCase(),B-100);b.font=`500 ${O}px 'Montserrat', sans-serif`;let Ce=[];e==="badge"&&d?Ce=Xc(b,d,B-120):e==="badge"&&l.length>0?Ce=Xc(b,l.join("    "),B-120):i.length>0&&(Ce=Xc(b,i.map(st=>`${st.value} ${st.label}`).join("    "),B-120));const J=e==="badge"?"I just earned a badge on Core Buddy ":e==="habits"?"I just completed my daily habits with Core Buddy ":"I just completed a workout using Core Buddy ";b.font=`bold ${Le}px 'Montserrat', sans-serif`;const P=Xc(b,J,B-80);let re=De.length*R;Ce.length>0&&(re+=V+Ce.length*D),re+=A+P.length*Xe,re+=X+je;const _e=Q+K-60-re,Se=Q+40,Fe=_e-C,Ze=p/2,Oe=(Se+Fe)/2,Mt=e==="badge"&&u?u:"/Logo.webp";b.save();const on=e==="badge"?"rgba(255, 193, 7, 0.15)":"rgba(161, 47, 58, 0.12)",zn=b.createRadialGradient(Ze,Oe,ge*.6,Ze,Oe,ge*1.5);zn.addColorStop(0,on),zn.addColorStop(1,"rgba(0, 0, 0, 0)"),b.fillStyle=zn,b.fillRect(Ze-ge*1.5,Oe-ge*1.5,ge*3,ge*3),b.restore(),b.beginPath(),b.arc(Ze,Oe,ge+6,0,Math.PI*2),b.fillStyle=T,b.fill();const Yt=e==="badge"?"#ffc107":L;b.beginPath(),b.arc(Ze,Oe,ge,0,Math.PI*2),b.strokeStyle=Yt,b.lineWidth=5,b.stroke();try{const st=await O3(Mt);b.save(),b.beginPath(),b.arc(Ze,Oe,ge-6,0,Math.PI*2),b.clip();const ct=(ge-6)*2;b.drawImage(st,Ze-ge+6,Oe-ge+6,ct,ct),b.restore()}catch{b.textAlign="center",b.textBaseline="middle",b.fillStyle=L,b.font="bold 80px 'Orbitron', sans-serif",b.fillText(e==="badge"?"":"MCF",Ze,Oe)}let rt=_e;b.textAlign="center",b.textBaseline="alphabetic",b.fillStyle=$,b.font=`bold ${j}px 'Orbitron', sans-serif`;for(const st of De)b.fillText(st,p/2,rt),rt+=R;if(Ce.length>0){rt+=V,b.fillStyle=q,b.font=`500 ${O}px 'Montserrat', sans-serif`;for(const st of Ce)b.fillText(st,p/2,rt),rt+=D}rt+=A,b.fillStyle=$,b.font=`bold ${Le}px 'Montserrat', sans-serif`;for(const st of P)b.fillText(st,p/2,rt),rt+=Xe;return rt+=X,b.fillStyle=L,b.font=`600 ${je}px 'Montserrat', sans-serif`,b.fillText("Make It Count with Core Buddy",p/2,rt),new Promise(st=>{y.toBlob(ct=>st(ct),"image/png")})}function Ww(s,e,t,i,l,u){s.beginPath(),s.moveTo(e+u,t),s.lineTo(e+i-u,t),s.quadraticCurveTo(e+i,t,e+i,t+u),s.lineTo(e+i,t+l-u),s.quadraticCurveTo(e+i,t+l,e+i-u,t+l),s.lineTo(e+u,t+l),s.quadraticCurveTo(e,t+l,e,t+l-u),s.lineTo(e,t+u),s.quadraticCurveTo(e,t,e+u,t),s.closePath()}function O3(s){return new Promise((e,t)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>e(i),i.onerror=t,i.src=s})}function Xc(s,e,t){if(s.measureText(e).width<=t)return[e];const i=e.split(" "),l=[];let u="";for(const d of i){const p=u?`${u} ${d}`:d;s.measureText(p).width>t&&u?(l.push(u),u=d):u=p}return u&&l.push(u),l}function P3(){const s=w.useRef(null),e=w.useCallback(()=>{if(!s.current)try{s.current=new(window.AudioContext||window.webkitAudioContext)}catch{}const u=s.current;return u?.state==="suspended"&&u.resume(),u},[]),t=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate([40,60,30]);const u=e();if(!u)return;const d=u.currentTime,p=u.createBiquadFilter();p.type="lowpass",p.frequency.value=500,p.Q.value=.7,p.connect(u.destination);const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=50,y.gain.value=.3,y.gain.setTargetAtTime(0,d+.08,.04),g.connect(y).connect(p),g.start(d),g.stop(d+.2);const b=u.createOscillator(),E=u.createGain();b.type="sine",b.frequency.value=70,E.gain.value=.2,E.gain.setTargetAtTime(0,d+.22,.04),b.connect(E).connect(p),b.start(d+.15),b.stop(d+.35)},[e]),i=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate(30);const u=e();if(!u)return;const d=u.currentTime,p=u.createBiquadFilter();p.type="lowpass",p.frequency.value=500,p.Q.value=.7,p.connect(u.destination);const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=55,y.gain.value=.35,y.gain.setTargetAtTime(0,d+.08,.04),g.connect(y).connect(p),g.start(d),g.stop(d+.2)},[e]),l=w.useCallback(()=>{navigator.vibrate&&navigator.vibrate([50,80,100]);const u=e();u&&[0,.12].forEach((d,p)=>{const g=u.createOscillator(),y=u.createGain();g.type="sine",g.frequency.value=p===0?523:784,y.gain.value=.12,y.gain.setTargetAtTime(0,u.currentTime+d+.15,.02),g.connect(y).connect(u.destination),g.start(u.currentTime+d),g.stop(u.currentTime+d+.2)})},[e]);return w.useEffect(()=>()=>{s.current?.close()},[]),{tap:i,tick:t,complete:l}}const V3=2e3,Hg=42,Al=2*Math.PI*Hg,U3=1200,Gw=["Another one in the bank!","Consistency beats everything.","You showed up  that's what counts.","Stronger every session."];function $g({title:s,subtitle:e,stats:t,onDone:i,onDismissStart:l,onShareJourney:u,userName:d,buttonLabel:p="Done",holdLabel:g="Hold To Complete Session",shareType:y="workout",hideShare:b=!1}){const[E,T]=w.useState("hold"),[L,$]=w.useState(!1),[q,B]=w.useState(0),[K,G]=w.useState(!1),[Q,he]=w.useState(!1),[Ee,ge]=w.useState(null),C=P3(),j=w.useRef(null),R=w.useRef(null),V=w.useRef(null),O=w.useRef(null),D=w.useRef(!1),A=w.useRef(!1),Le=w.useRef(0),Xe=w.useRef(Gw[Math.floor(Math.random()*Gw.length)]),X=w.useRef([...Array(80)].map((xe,Se)=>({x:5+Math.random()*90,delay:Math.random()*3.5,color:["#A12F3A","#ffffff","#000000"][Se%3],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.8+Math.random()*2,width:4+Math.random()*6,height:4+Math.random()*8,shape:Se%3}))),je=w.useCallback(()=>{if(D.current)return;D.current=!0,A.current=!1,Le.current=0,$(!0),B(0),O.current=performance.now(),C.tap(),j.current&&(j.current.style.strokeDashoffset=Al);const xe=Se=>{const Fe=Se-O.current,Ze=Math.min(Fe/V3,1);if(j.current&&(j.current.style.strokeDashoffset=Al-Ze*Al),R.current){const Oe=8*(1-Ze),Mt=1-Ze,on=1+Ze*.15;R.current.style.filter=`blur(${Oe}px) grayscale(${Mt})`,R.current.style.transform=`scale(${on})`}B(Ze),Fe-Le.current>=U3&&(Le.current=Fe,C.tick()),Ze<1?V.current=requestAnimationFrame(xe):(D.current=!1,A.current=!0,V.current=null,$(!1),B(1),C.complete(),T("celebrate"))};V.current=requestAnimationFrame(xe)},[C]),De=w.useCallback(()=>{D.current&&(D.current=!1,V.current&&(cancelAnimationFrame(V.current),V.current=null),j.current&&(j.current.style.strokeDashoffset=Al),R.current&&(R.current.style.filter="",R.current.style.transform=""),$(!1),B(0))},[]),Ce=w.useCallback(()=>{G(!0),l?.(),setTimeout(()=>{i?.()},300)},[i,l]),J=w.useCallback(()=>{const xe=[s||"Workout Complete!"];return e&&xe.push(e),t?.length&&xe.push(t.map(Se=>`${Se.value} ${Se.label}`).join(" | ")),xe.push("#MindCoreFitness"),xe.join(`
`)},[s,e,t]),P=w.useCallback(async()=>{if(!(Q||!u))try{await u({type:y==="habits"?"habits_summary":"workout_summary",title:s||"Workout Complete!",subtitle:e,stats:t||[],quote:Xe.current}),he(!0),ge("Posted to Journey!"),setTimeout(()=>ge(null),2500)}catch(xe){console.error("Journey post failed:",xe),ge(xe?.message||"Failed to post"),setTimeout(()=>ge(null),3500)}},[Q,u,s,e,t]),[re,we]=w.useState(!1),_e=w.useCallback(async()=>{we(!0);try{const xe=await L3({type:y||"workout",title:s||"Workout Complete!",subtitle:e,stats:t||[],quote:Xe.current,userName:d}),Se=J();if(navigator.share&&navigator.canShare?.({files:[new File([xe],"workout.png",{type:"image/png"})]})){const Fe=new File([xe],"workout.png",{type:"image/png"});await navigator.share({title:"Mind Core Fitness",text:Se,files:[Fe]})}else navigator.share?await navigator.share({title:"Mind Core Fitness",text:Se}):(await navigator.clipboard.writeText(Se),ge("Copied to clipboard!"),setTimeout(()=>ge(null),2500))}catch{try{await navigator.clipboard.writeText(J()),ge("Copied to clipboard!"),setTimeout(()=>ge(null),2500)}catch{}}finally{we(!1)}},[s,e,t,d,J]);return E==="hold"?a.jsxs("div",{className:"wc-hold-page",children:[a.jsx("div",{className:"wc-hold-glow","aria-hidden":"true"}),a.jsx("p",{className:"wc-hold-label",children:g}),a.jsxs("div",{className:`wc-hold-ring-touch ${L?"wc-holding":""}`,onPointerDown:xe=>{xe.preventDefault(),je()},onPointerUp:De,onPointerLeave:De,onPointerCancel:De,onClick:xe=>{xe.stopPropagation(),A.current&&(A.current=!1)},role:"button",tabIndex:0,"aria-label":"Press and hold to finish workout",onKeyDown:xe=>{(xe.key==="Enter"||xe.key===" ")&&(xe.preventDefault(),C.complete(),T("celebrate"))},children:[a.jsx("div",{className:"wc-hold-ring-glow","aria-hidden":"true"}),a.jsxs("svg",{className:"wc-hold-ring-svg",viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wc-hold-ring-track",cx:"50",cy:"50",r:Hg}),a.jsx("circle",{className:"wc-hold-ring-fill",ref:j,cx:"50",cy:"50",r:Hg,style:{strokeDasharray:Al,strokeDashoffset:Al}})]}),a.jsx("img",{ref:R,src:"/Logo.webp",alt:"Mind Core Fitness",className:"wc-hold-logo",draggable:!1})]})]}):a.jsxs("div",{className:`wc-celeb-overlay ${K?"wc-celeb-dismissing":""}`,children:[a.jsx("div",{className:"wc-celeb-confetti","aria-hidden":"true",children:X.current.map((xe,Se)=>a.jsx("span",{className:`wc-celeb-confetti-piece wc-confetti-shape-${xe.shape}`,style:{"--x":`${xe.x}%`,"--delay":`${xe.delay}s`,"--color":xe.color,"--drift":`${xe.drift}px`,"--spin":`${xe.spin}deg`,"--duration":`${xe.duration}s`,width:`${xe.width}px`,height:`${xe.height}px`}},Se))}),a.jsxs("div",{className:"wc-celeb-content",children:[a.jsx("div",{className:"wc-celeb-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wc-celeb-logo-img"})}),a.jsx("h2",{className:"wc-celeb-heading",children:s||"Congratulations!"}),e&&a.jsx("p",{className:"wc-celeb-subtext",children:e}),a.jsx("p",{className:"wc-celeb-quote",children:Xe.current}),t&&t.length>0&&a.jsx("div",{className:"wc-celeb-stats-row",children:t.map((xe,Se)=>a.jsxs("div",{className:"wc-celeb-stat",children:[a.jsx("span",{className:"wc-celeb-stat-val",children:xe.value}),a.jsx("span",{className:"wc-celeb-stat-label",children:xe.label})]},Se))}),!b&&a.jsxs("div",{className:"wc-share-row",children:[u&&a.jsxs("button",{className:`wc-share-btn wc-share-journey ${Q?"wc-share-done":""}`,onClick:P,disabled:Q,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M12 20h9"}),a.jsx("path",{d:"M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4Z"})]}),Q?"Posted!":"Post to Journey"]}),a.jsxs("button",{className:"wc-share-btn wc-share-external",onClick:_e,disabled:re,children:[a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"18",cy:"5",r:"3"}),a.jsx("circle",{cx:"6",cy:"12",r:"3"}),a.jsx("circle",{cx:"18",cy:"19",r:"3"}),a.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),a.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),re?"Generating...":"Share"]})]}),a.jsx("button",{className:"wc-celeb-btn",onClick:Ce,children:p}),Ee&&a.jsx("div",{className:"wc-share-toast",children:Ee})]})]})}const Kw="/login/assets/randomiser-glq9YJkL.jpg",Yw="/login/assets/programme-card-workout-CnNzTYkz.webp",B3="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",z3="/login/assets/muscle-group-arms-C9AdZL4-.png",F3="/login/assets/arms-bicep-BUrmT1o-.png",q3="/login/assets/arms-tricep-D9tAnFnS.png",H3="/login/assets/arms-full-arms-BY3TvpJm.png",$3="/login/assets/muscle-group-chest-Cxfuc7XI.png",W3="/login/assets/chest-strength-BR4BAFTH.png",G3="/login/assets/chest-hypertrophy-B8yNrvjB.png",K3="/login/assets/chest-endurance-e-OSWtWO.png",Y3="/login/assets/muscle-group-shoulders-DibNtCLF.png",Q3="/login/assets/shoulders-strength-CKlZBF5A.png",X3="/login/assets/shoulders-hypertrophy-BUd76jiS.png",J3="/login/assets/shoulders-endurance-HuqNG5rD.png",Z3="/login/assets/muscle-group-core-CPR-bdRg.png",e5="/login/assets/core-lower-abs-TVcqGMFJ.png",t5="/login/assets/core-obliques-rotation-Djb7Qlbk.png",n5="/login/assets/core-weighted-core-4Kwh9mTv.png",s5="/login/assets/muscle-group-back-8JPV-YUo.png",r5="/login/assets/back-strength-BmSRxnwo.png",i5="/login/assets/back-hypertrophy-CXHmsnCz.png",a5="/login/assets/back-endurance-C8qJ8l5I.png",o5="/login/assets/muscle-group-legs-B8jcbdov.png",l5="/login/assets/legs-quads-DbnfsebI.png",c5="/login/assets/legs-hamstrings-glutes-BrfsvvzX.png",u5="/login/assets/legs-power-plyo-D2qBXeUR.png",d5=60,Zp=5,h5={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},f5={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},eg={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},tg=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:B3},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Jc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:z3},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z",image:$3},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z",image:s5},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",image:Y3},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z",image:o5},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",image:Z3}],Qw={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",image:W3,level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",image:G3,level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",image:K3,level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",image:r5,level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",image:i5,level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",image:a5,level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",image:Q3,level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",image:X3,level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",image:J3,level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",image:F3,level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",image:q3,level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",image:H3,level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",image:l5,level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",image:c5,level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",image:u5,level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",image:e5,level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",image:t5,level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",image:n5,level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},ng=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M1 9h2v6H1V9zm3-2h2v10H4V7zm3 4h10v2H7v-2zm10-4h2v10h-2V7zm3 2h2v6h-2V9z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Hr=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],_i=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],sg=[5,10,15,20,30],mh={core:"#e85d04",upper:"#2196f3",lower:"#4caf50",fullbody:"#9c27b0",mix:"#ff9800"},Xw=["Mix up your focus areas to build balanced strength.","Consistency beats intensity  show up and press play.","Try a new difficulty level to keep your body guessing.","Short on time? A 5-minute blast still counts.","Save your favourite combos so you can replay them anytime.","Your body adapts  switch equipment for fresh stimulus.","Rest days are growth days. Listen to your body.","Challenge yourself: go one level higher this week."];function m5(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function p5(s){const e=[...s];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function g5(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Ar(),{isDark:l,toggleTheme:u,accent:d}=Mi(),{isPremium:p,FREE_RANDOMISER_DURATIONS:g,FREE_RANDOMISER_WEEKLY_LIMIT:y}=ic(),b=Ys(),[E,T]=w.useState("randomiser_hub"),[L,$]=w.useState(["bodyweight"]),[q,B]=w.useState("core"),[K,G]=w.useState("intermediate"),[Q,he]=w.useState(p?15:5),[Ee,ge]=w.useState([]),[C,j]=w.useState(!1),R=w.useRef(!1),V=w.useRef([]),[O,D]=w.useState([]),[A,Le]=w.useState(2),[Xe,X]=w.useState(_i[1]),[je,De]=w.useState(1),[Ce,J]=w.useState(0),[P,re]=w.useState("work"),[we,_e]=w.useState(0),[xe,Se]=w.useState(!1),[Fe,Ze]=w.useState(0),[Oe,Mt]=w.useState(!1),[on,zn]=w.useState(!1),[Yt,rt]=w.useState(null),st=w.useRef(null);w.useRef(null),w.useRef(null);const[ct,_n]=w.useState(null),fe=w.useCallback((z,le="info")=>{_n({message:z,type:le}),setTimeout(()=>_n(null),3e3)},[]),Ct=w.useCallback(async z=>{if(!t)throw new Error("Not signed in");const le=z&&typeof z=="object"&&z.type;await Cr(mt(ye,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:le?"":z,type:le?z.type:"text",imageURL:null,createdAt:Vs(),likeCount:0,commentCount:0,...le?{metadata:{title:z.title||"",subtitle:z.subtitle||"",stats:z.stats||[],quote:z.quote||"",badges:z.badges||[]}}:{}})},[t]),[ht,Rt]=w.useState(null),[Je,Tt]=w.useState(null),[pt,Qt]=w.useState(0),[zs,es]=w.useState(0),[Wt,se]=w.useState([]),[Ae,gt]=w.useState(""),[yt,ut]=w.useState(""),[qe,nt]=w.useState(!1),[He,sn]=w.useState(0),[Xt,Nn]=w.useState(!1),[Dn,Kn]=w.useState({}),Jt=w.useRef(null),Fn=w.useRef(null),[An,pn]=w.useState(0),[ks,ae]=w.useState(0),[Me,Ke]=w.useState(0),[vt,it]=w.useState(0),[Gt,jn]=w.useState(0),[gn,Sn]=w.useState(0),[Ns,qn]=w.useState({beginner:0,intermediate:0,advanced:0}),Es=p?sg:sg.filter(z=>g.includes(z)),Zt=!p&&An>=y,[ln,ls]=w.useState([]),[Yr,fa]=w.useState(!1),[Qr,pr]=w.useState({}),[Hn,Fs]=w.useState(!1),[vs,Ln]=w.useState(!1),[Rn,ts]=w.useState(""),[zt,gr]=w.useState(null),[Rr,bs]=w.useState([]),[kn,Qs]=w.useState({total:0,favouriteFocus:null,streak:0}),[Xr,I]=w.useState(null),[F,oe]=w.useState(""),[ue,Ue]=w.useState(!1);w.useEffect(()=>{!i&&(!s||!e)&&b("/")},[s,e,i,b]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const le=mt(ye,"workoutLogs"),k=Kt(le,xt("clientId","==",t.id)),W=(await Ht(k)).docs.map(dt=>dt.data()),te=W.filter(dt=>dt.type!=="programme");it(te.length);const me=te.reduce((dt,It)=>dt+(It.duration||0),0);jn(me);const Ie={beginner:0,intermediate:0,advanced:0};te.forEach(dt=>{dt.level&&Ie[dt.level]!==void 0&&Ie[dt.level]++}),qn(Ie);const Ne=new Date,Ve=Ne.getDay(),Re=Ve===0?-6:1-Ve,at=new Date(Ne);at.setDate(Ne.getDate()+Re),at.setHours(0,0,0,0);const yn=at.getTime(),et=W.filter(dt=>{const It=dt.completedAt;return It?(It.toDate?It.toDate().getTime():new Date(It).getTime())>=yn:!1});pn(et.filter(dt=>dt.type!=="programme").length);let en=0;if(t)try{const dt=await Us(We(ye,"clientProgrammes",t.id));if(dt.exists()){const It=dt.data(),cn=It.templateId;en=et.filter(hn=>hn.type==="programme"&&hn.programmeId===cn).length,I(cn);const ws=tg.find(hn=>hn.id===cn);ws&&oe(ws.name);const Pn=h5[cn];if(Pn){const hn=Object.keys(It.completedSessions||{}).length,Wn=Pn.duration*Pn.daysPerWeek;Ke(Wn>0?Math.round(hn/Wn*100):0)}}else I(null),oe(""),Ke(0)}catch{}ae(en);const En=te.map(dt=>dt.completedAt).filter(Boolean).map(dt=>dt.toDate?dt.toDate().getTime():new Date(dt).getTime()).sort((dt,It)=>It-dt);if(En.length===0)Sn(0);else{const dt=new Set;En.forEach(Wn=>{const cs=new Date(Wn),Zr=cs.getDay(),Dr=Zr===0?-6:1-Zr,pi=new Date(cs);pi.setDate(cs.getDate()+Dr),pi.setHours(0,0,0,0),dt.add(pi.getTime())});const It=[...dt].sort((Wn,cs)=>cs-Wn);let cn=0;const ws=new Date(Ne),Pn=Ne.getDay()===0?-6:1-Ne.getDay();ws.setDate(Ne.getDate()+Pn),ws.setHours(0,0,0,0);let hn=ws.getTime();It.includes(hn)||(hn-=10080*60*1e3);for(let Wn=0;Wn<200&&It.includes(hn);Wn++)cn++,hn-=10080*60*1e3;Sn(cn)}}catch(le){console.error("Error loading workout stats:",le)}finally{Ue(!0)}})()},[s,t,E]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const le=Kt(mt(ye,"savedWorkouts"),xt("clientId","==",t.id)),M=(await Ht(le)).docs.map(W=>({id:W.id,...W.data()}));M.sort((W,te)=>{const me=W.savedAt?.toMillis?.()||W.savedAt?.seconds*1e3||0;return(te.savedAt?.toMillis?.()||te.savedAt?.seconds*1e3||0)-me}),ls(M)}catch(le){console.error("Error loading saved workouts:",le)}finally{fa(!0)}})()},[s,t]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const le=Kt(mt(ye,"workoutLogs"),xt("clientId","==",t.id),ku("completedAt","desc"),Eu(20)),W=(await Ht(le)).docs.map(et=>et.data()).filter(et=>et.type!=="programme"&&et.type!=="muscle_group");bs(W.slice(0,3));const te=W.length,me={};W.forEach(et=>{et.focus&&(me[et.focus]=(me[et.focus]||0)+1)});const Ie=Object.keys(me).sort((et,en)=>me[en]-me[et])[0]||null;let Ne=0;if(W.length>0){const et=new Set;W.forEach(dt=>{const It=dt.completedAt?.toDate?dt.completedAt.toDate():dt.completedAt?new Date(dt.completedAt):null;It&&et.add(new Date(It.getFullYear(),It.getMonth(),It.getDate()).toDateString())});const en=new Date;en.setHours(0,0,0,0);let En=new Date(en);for(et.has(En.toDateString())||En.setDate(En.getDate()-1);et.has(En.toDateString());)Ne++,En.setDate(En.getDate()-1)}Qs({total:te,favouriteFocus:Ie,streak:Ne});const Ve={core:null,upper:null,lower:null,fullbody:null};W.forEach(et=>{if(et.focus&&Ve[et.focus]===null&&et.completedAt){const en=et.completedAt.toDate?et.completedAt.toDate():new Date(et.completedAt);Ve[et.focus]=en}});let Re=null,at=new Date;const yn=["core","upper","lower","fullbody"];for(const et of yn){if(Ve[et]===null){const en=Hr.find(En=>En.key===et)?.label||et;Re={focus:et,label:en,daysAgo:null,message:`You haven't tried ${en} yet`};break}if(Ve[et]<at){at=Ve[et];const en=Math.floor((Date.now()-Ve[et].getTime())/864e5);if(en>=5){const En=Hr.find(dt=>dt.key===et)?.label||et;Re={focus:et,label:En,daysAgo:en,message:`${En}  ${en} days ago`}}}}gr(Re)}catch(le){console.error("Error loading recent workouts:",le)}})()},[s,t,E]);const Be=async z=>{if(!(!s||!t||O.length===0)){Fs(!0);try{const le=Hr.find(W=>W.key===q)?.label||q,k=z||`${le} ${Q}min`,M=await Cr(mt(ye,"savedWorkouts"),{clientId:t.id,name:k,equipment:L,focus:q,level:K,duration:Q,exercises:O.map(W=>({name:W.name,videoUrl:W.videoUrl,isGif:W.isGif||!1})),rounds:A,savedAt:At.now()});ls(W=>[{id:M.id,clientId:t.id,name:k,equipment:L,focus:q,level:K,duration:Q,exercises:O.map(te=>({name:te.name,videoUrl:te.videoUrl,isGif:te.isGif||!1})),rounds:A,savedAt:At.now()},...W]),fe("Workout saved!","success")}catch(le){console.error("Error saving workout:",le),fe("Failed to save workout","error")}finally{Fs(!1),Ln(!1),ts("")}}},$e=async z=>{try{await jr(We(ye,"savedWorkouts",z)),ls(le=>le.filter(k=>k.id!==z)),fe("Workout removed","info")}catch(le){console.error("Error deleting saved workout:",le),fe("Failed to remove workout","error")}},Ft=z=>{$(z.equipment||["bodyweight"]),B(z.focus||"core"),G(z.level||"intermediate"),he(z.duration||15);const le=_i.find(k=>k.key===(z.level||"intermediate"));X(le),D(z.exercises||[]),Le(z.rounds||2),T("preview")},Ye=async()=>{const z=JSON.parse(localStorage.getItem("mcf_last_randomiser")||"null");$(z?.equipment||["bodyweight"]),B(z?.focus||"core"),G(z?.level||"intermediate"),he(z?.duration||15),setTimeout(()=>On(),50)},$n=()=>{localStorage.setItem("mcf_last_randomiser",JSON.stringify({equipment:L,focus:q,level:K,duration:Q}))};localStorage.getItem("mcf_last_randomiser");const ns=()=>{const z=[];let le;q==="mix"?le=["core","upper","lower"]:q==="fullbody"?le=["upper","lower"]:le=[q];for(const k of L)for(const M of le)z.push(`exercises/${k}/${M}`);return z},ar=async()=>{if(R.current){for(;R.current;)await new Promise(z=>setTimeout(z,200));return V.current}R.current=!0,j(!0);try{const z=ns(),le=[];for(const te of z)try{const me=Wa(Ga,te),Ie=await Fw(me);le.push(...Ie.items)}catch{console.warn(`Folder ${te} not found, skipping.`)}if(le.length===0&&L.includes("bodyweight")&&q==="core")try{const te=Wa(Ga,"core"),me=await Fw(te);le.push(...me.items)}catch{console.warn("Legacy core/ folder not found either.")}if(le.length===0){const te=L.map(Ie=>ng.find(Ne=>Ne.key===Ie)?.label).join(" + "),me=Hr.find(Ie=>Ie.key===q)?.label;return fe(`No exercises found for ${te} / ${me}. Upload videos to Firebase Storage.`,"error"),R.current=!1,j(!1),[]}const k=new Set,M=le.filter(te=>{const me=te.name.replace(/\.(mp4|gif)$/i,"");return k.has(me)?!1:(k.add(me),!0)}),W=await Promise.all(M.map(async te=>{const me=await Lo(te),Ie=m5(te.name.replace(/\.(mp4|gif)$/i,"")),Ne=/\.gif$/i.test(te.name);return{name:Ie,videoUrl:me,isGif:Ne}}));return V.current=W,ge(W),R.current=!1,j(!1),W}catch(z){console.error("Error loading exercises:",z);const le=z.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${z.message||z.code||"Unknown error"}`;return fe(le,"error"),R.current=!1,j(!1),[]}},On=async()=>{if(Zt)return;$n(),T("spinning"),V.current=[];const z=await ar();if(z.length===0){T("setup");return}const le=_i.find(Ve=>Ve.key===K);X(le);const k=le.work+le.rest,M=Q*60,W=Math.floor(M/k);let te,me;W<=6?(te=Math.max(3,Math.floor(W/2)),me=Math.floor(W/te)):W<=12?(te=Math.min(6,Math.floor(W/2)),me=Math.floor(W/te)):(te=Math.min(10,Math.floor(W/2)),me=Math.floor(W/te)),me=Math.max(2,me);const Ie=p5(z),Ne=Ie.slice(0,Math.min(te,Ie.length));D(Ne),Le(me),setTimeout(()=>T("preview"),2e3)},Xs=()=>{T("countdown"),Ze(3)};w.useEffect(()=>{if(E!=="countdown")return;if(Fe<=0){T("workout"),De(1),J(0),re("work"),_e(Xe.work),Se(!1),fi();return}Rs();const z=setTimeout(()=>Ze(le=>le-1),1e3);return()=>clearTimeout(z)},[Fe,E]),w.useEffect(()=>{if(E!=="workout"||xe)return;if(we<=0){Di();return}we<=3&&Rs();const z=setTimeout(()=>_e(le=>le-1),1e3);return()=>clearTimeout(z)},[we,E,xe]);const Di=()=>{if(P==="work")re("rest"),_e(Xe.rest);else{const z=Ce+1;if(z>=O.length){const le=je+1;if(le>A){Mt(!0),As();return}De(le),J(0)}else J(z);re("work"),_e(Xe.work),fi()}},As=async()=>{if(s)try{await Cr(mt(ye,"workoutLogs"),{clientId:t.id,level:K,duration:Q,equipment:L,focus:q,exerciseCount:O.length,rounds:A,exercises:O.map(z=>z.name),completedAt:At.now()}),typeof fbq=="function"&&fbq("trackCustom","WorkoutCompleted",{duration:Q,level:K,focus_area:q,exercise_count:O.length}),pn(z=>z+1),it(z=>z+1),jn(z=>z+Q),qn(z=>({...z,[K]:(z[K]||0)+1}))}catch(z){console.error("Error saving workout log:",z)}},Js=async(z,le,k)=>{if(!(!t||!le))try{const M=t.id,W=await Us(We(ye,"coreBuddyPBs",M)),me=(W.exists()?W.data():null)?.exercises||{},Ie=me[z];let Ne=!1;if(Ie?(le>(Ie.weight||0)||le===(Ie.weight||0)&&k>(Ie.reps||0))&&(Ne=!0):Ne=!0,Ne){const Ve={...me,[z]:{weight:le,reps:k,achievedAt:At.now()}};await Cs(We(ye,"coreBuddyPBs",M),{clientId:t.id,exercises:Ve,updatedAt:At.now()}),fe(`New PB! ${le}kg  ${k} reps`,"success"),Rs()}}catch(M){console.error("Error checking PB:",M)}},ma=async z=>{if(Tt(z),z.interval){const M=[];for(const W of z.exercises){let te=null,me=!1;if(W.storagePath)try{const Ie=Wa(Ga,W.storagePath);te=await Lo(Ie),me=/\.gif$/i.test(W.storagePath)}catch{}M.push({name:W.name,videoUrl:te,isGif:me})}D(M),Le(z.rounds),X({work:z.work,rest:z.rest}),T("preview");return}const le={};for(const M of z.exercises)if(M.storagePath)try{const W=Wa(Ga,M.storagePath);le[M.name]={url:await Lo(W),isGif:/\.gif$/i.test(M.storagePath)}}catch{}Kn(le);const k=z.exercises.map(M=>({name:M.name,type:M.type,targetSets:M.sets,targetReps:M.reps||0,targetTime:M.time||0,sets:[]}));se(k),Qt(0),es(0),gt(""),ut(""),Nn(!1),nt(!1),sn(0),setMgSessionBadges([]),setMgBadgeCelebration(null),T("muscle_workout")},yr=()=>{const z=Jt.current;z&&(z.paused?(z.play(),Nn(!0)):(z.pause(),Nn(!1)))};w.useEffect(()=>{if(E!=="muscle_workout"||!qe||He<=0){E==="muscle_workout"&&qe&&He<=0&&(nt(!1),Rs());return}return Fn.current=setTimeout(()=>sn(z=>z-1),1e3),()=>clearTimeout(Fn.current)},[E,qe,He]);const Ts=async()=>{const z=Wt[pt];let le={};if(z.type==="weighted"){const W=parseFloat(Ae)||0,te=parseInt(yt)||0;if(te===0){fe("Enter your reps","error");return}le={weight:W,reps:te}}else if(z.type==="reps"){const W=parseInt(yt)||0;if(W===0){fe("Enter your reps","error");return}le={reps:W}}else if(z.type==="timed"){const W=z.targetTime-He;le={time:Math.max(W,1)}}const k=[...Wt];k[pt]={...z,sets:[...z.sets,le]},se(k),z.type==="weighted"&&le.weight>0&&await Js(z.name,le.weight,le.reps);const M=z.sets.length+1;if(M<z.targetSets)es(M),ut(""),nt(!1),sn(0);else if(pt+1<Wt.length){const W=pt+1;Qt(W),es(0),gt(""),ut(""),Nn(!1),nt(!1),sn(0)}else await pa(k),zn(!0)},pa=async z=>{if(!(!s||!t))try{const le=z.reduce((k,M)=>k+M.sets.length,0);await Cr(mt(ye,"workoutLogs"),{clientId:t.id,type:"muscle_group",muscleGroup:ht,sessionId:Je?.id,sessionName:Je?.name,exerciseCount:z.length,totalSets:le,duration:Math.round(le*1.5),exercises:z.map(k=>({name:k.name,type:k.type,sets:k.sets})),completedAt:At.now()})}catch(le){console.error("Error saving muscle group workout log:",le)}},Jr=w.useRef(null),Ir=()=>(Jr.current||(Jr.current=new(window.AudioContext||window.webkitAudioContext)),Jr.current),Rs=()=>{try{const z=Ir(),le=z.createOscillator(),k=z.createGain();le.connect(k),k.connect(z.destination),le.frequency.value=880,k.gain.value=.3,le.start(z.currentTime),le.stop(z.currentTime+.15)}catch{}},fi=()=>{try{const z=Ir(),le=z.createOscillator(),k=z.createGain();le.connect(k),k.connect(z.destination),le.frequency.value=1200,k.gain.value=.4,le.start(z.currentTime),le.stop(z.currentTime+.3)}catch{}};w.useEffect(()=>{if(E!=="workout"||P!=="work"||!O[Ce]?.isGif)return;const le=setInterval(()=>{const k=st.current;if(!k)return;const M=k.getAttribute("src");k.removeAttribute("src"),setTimeout(()=>{st.current&&st.current.setAttribute("src",M)},0)},4e3);return()=>clearInterval(le)},[E,P,Ce,je,O]);const Mr=(z,le,k)=>{const M=Math.round(z/le*d5);return a.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:a3.map((W,te)=>a.jsx("line",{x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,className:te<M?`wk-tick-filled ${k}`:"wk-tick-empty",strokeWidth:W.thick?"3":"2"},te))})},mi=()=>{const z=O.length*A;return((je-1)*O.length+Ce+(P==="rest"?.5:0))/z},ss=ct&&a.jsx("div",{className:`toast-notification ${ct.type}`,children:ct.message});if(i)return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),a.jsx("div",{className:"wk-loading-inline",children:a.jsx("div",{className:"wk-loading-spinner"})})]});if(E==="menu")return a.jsx(Jo,{children:a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-menu-heading",children:[a.jsx("h2",{children:"Choose Your Workout"}),a.jsx("p",{children:"No excuses. Just results."})]}),a.jsx("button",{className:"wk-hero-card",onClick:()=>T("randomiser_hub"),children:a.jsx("img",{src:Kw,alt:"Randomise Workout",className:"wk-hero-bg"})}),!p&&a.jsxs("button",{className:"wk-hero-card wk-free-card-premium",onClick:()=>b("/upgrade"),children:[a.jsx("img",{src:Yw,alt:"Programmes",className:"wk-hero-bg"}),a.jsx("div",{className:"wk-free-card-overlay"}),a.jsxs("div",{className:"wk-free-card-content",children:[a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{className:"wk-free-card-label",children:"Unlock Full Access"})]})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Programmes"}),a.jsxs("span",{className:"wk-section-count",children:[tg.length," available"]})]}),a.jsx("div",{className:"wk-prog-scroll-wrap",children:a.jsx("div",{className:"wk-prog-scroll",children:tg.map((z,le)=>z.image?a.jsxs("button",{className:"wk-prog-img-card",onClick:()=>b("/client/core-buddy/programmes",{state:{templateId:z.id}}),style:{animationDelay:`${le*.06}s`},children:[a.jsx("img",{src:z.image,alt:z.name,className:"wk-prog-img"}),le===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},z.id):a.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>b("/client/core-buddy/programmes",{state:{templateId:z.id}}),style:{animationDelay:`${le*.06}s`},children:[a.jsx("img",{src:Yw,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-prog-hero-overlay",style:{background:f5[z.focus]}}),a.jsxs("div",{className:"wk-prog-hero-content",children:[a.jsxs("div",{className:"wk-prog-hero-top",children:[a.jsxs("span",{className:"wk-prog-hero-badge",children:[z.duration," WEEKS"]}),a.jsx("span",{className:"wk-prog-hero-level",children:z.level})]}),a.jsxs("div",{className:"wk-prog-hero-bottom",children:[a.jsx("h3",{children:z.name.toUpperCase()}),a.jsxs("p",{children:[z.daysPerWeek,"x per week  ",z.focus==="fullbody"?"Full Body":z.focus.charAt(0).toUpperCase()+z.focus.slice(1)," Focus"]}),a.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),le===0&&a.jsx("div",{className:"wk-swipe-arrow",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},z.id))})})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"wk-section-header",children:[a.jsx("h2",{children:"Muscle Groups"}),a.jsxs("span",{className:"wk-section-count",children:[Jc.length," groups"]})]}),a.jsx("div",{className:"wk-muscle-grid",children:Jc.map((z,le)=>a.jsx("button",{className:`wk-muscle-hero-card${z.image?" wk-muscle-thumb":""}`,onClick:()=>{Rt(z.key),T("muscle_sessions")},style:{animationDelay:`${le*.05}s`},children:z.image?a.jsx("img",{src:z.image,alt:z.label,className:"wk-muscle-thumb-img"}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:Kw,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),a.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:eg[z.key]}}),a.jsxs("div",{className:"wk-muscle-hero-content",children:[a.jsx("div",{className:"wk-muscle-hero-icon",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:z.icon})})}),a.jsxs("div",{className:"wk-muscle-hero-text",children:[a.jsx("span",{className:"wk-muscle-hero-name",children:z.label}),a.jsxs("span",{className:"wk-muscle-hero-count",children:[Qw[z.key]?.length||0," sessions"]})]})]})]})},z.key))})]})]}),a.jsx(Kr,{active:"workouts"}),ss]})});if(E==="randomiser_hub"){const z=JSON.parse(localStorage.getItem("mcf_last_randomiser")||"null")||{focus:"core",level:"intermediate",duration:15},le=Hr.find(M=>M.key===z.focus)?.label||z.focus,k=_i.find(M=>M.key===z.level)?.label||z.level;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>b("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"wk-hub-heading wk-hub-heading-hero",children:[a.jsx("div",{className:"wk-hub-circle-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-hub-circle-logo"})}),a.jsx("h2",{children:"Randomiser"}),a.jsx("p",{children:"Generate, save & replay workouts"})]}),a.jsxs("div",{className:"wk-hub-launch-zone",children:[kn.total>0&&a.jsxs("div",{className:"wk-hub-stats",children:[a.jsxs("div",{className:"wk-hub-stat",children:[a.jsx("span",{className:"wk-hub-stat-value",children:kn.total}),a.jsx("span",{className:"wk-hub-stat-label",children:"Workouts"})]}),kn.streak>0&&a.jsxs("div",{className:"wk-hub-stat",children:[a.jsxs("span",{className:"wk-hub-stat-value",children:[kn.streak,a.jsx("small",{children:"d"})]}),a.jsx("span",{className:"wk-hub-stat-label",children:"Streak"})]}),kn.favouriteFocus&&a.jsxs("div",{className:"wk-hub-stat",children:[a.jsx("span",{className:"wk-hub-stat-value wk-hub-stat-focus",style:{color:mh[kn.favouriteFocus]||"var(--color-primary)"},children:Hr.find(M=>M.key===kn.favouriteFocus)?.label||kn.favouriteFocus}),a.jsx("span",{className:"wk-hub-stat-label",children:"Top Focus"})]})]}),a.jsxs("div",{className:"wk-hub-actions",children:[a.jsxs("button",{className:"wk-hub-action-btn wk-hub-new wk-hub-new-glow",onClick:()=>T("setup"),children:[a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"New Workout"]}),a.jsxs("button",{className:"wk-hub-action-btn wk-hub-quick",onClick:Ye,disabled:Zt,children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),"Quick Start",a.jsxs("span",{className:"wk-hub-quick-meta",children:[le,"  ",k,"  ",z.duration,"min"]})]})]}),zt&&a.jsxs("button",{className:"wk-hub-suggestion",onClick:()=>{B(zt.focus),T("setup")},children:[a.jsx("svg",{className:"wk-hub-suggestion-bulb",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),a.jsxs("div",{className:"wk-hub-suggestion-info",children:[a.jsx("span",{className:"wk-hub-suggestion-label",children:zt.message}),a.jsx("span",{className:"wk-hub-suggestion-cta",children:"Tap to set up "})]}),a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"wk-hub-tip",children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),Xw[Math.floor(Date.now()/864e5)%Xw.length]]})]}),p&&a.jsxs("div",{className:"wk-hub-section wk-hub-section--saved",children:[a.jsxs("h3",{className:"wk-hub-section-title",children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Saved Workouts",ln.length>0&&a.jsx("span",{className:"wk-hub-count",children:ln.length})]}),Yr?ln.length===0?a.jsxs("div",{className:"wk-hub-empty wk-hub-empty-enhanced",children:[a.jsx("svg",{className:"wk-hub-empty-icon",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),a.jsx("p",{children:a.jsx("strong",{children:"No saved workouts yet"})}),a.jsx("p",{className:"wk-hub-empty-sub",children:"Generate a workout and hit save to stash it here for quick replay."})]}):a.jsx("div",{className:"wk-hub-saved-categories",children:Hr.map(M=>{const W=ln.filter(me=>me.focus===M.key);if(W.length===0)return null;const te=Qr[M.key]||!1;return a.jsxs("div",{className:"wk-hub-saved-cat",children:[a.jsxs("button",{className:`wk-hub-saved-cat-header${te?" wk-hub-saved-cat-open":""}`,style:{"--cat-color":mh[M.key]||"var(--color-primary)"},onClick:()=>pr(me=>({...me,[M.key]:!me[M.key]})),children:[a.jsxs("span",{className:"wk-hub-saved-cat-label",children:[a.jsx("span",{className:"wk-hub-focus-pill",style:{"--pill-color":mh[M.key]||"var(--color-primary)"},children:M.label}),a.jsx("span",{className:"wk-hub-saved-cat-count",children:W.length})]}),a.jsx("svg",{className:`wk-hub-saved-cat-chevron${te?" wk-hub-saved-cat-chevron-open":""}`,width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),te&&a.jsx("div",{className:"wk-hub-saved-list",children:W.map((me,Ie)=>{const Ne=(me.equipment||[]).map(Re=>ng.find(at=>at.key===Re)?.label||Re).join(", "),Ve=_i.find(Re=>Re.key===me.level)?.label||me.level;return a.jsxs("div",{className:"wk-hub-saved-card",style:{animationDelay:`${Ie*.05}s`},children:[a.jsxs("button",{className:"wk-hub-saved-main",onClick:()=>Ft(me),children:[a.jsxs("div",{className:"wk-hub-saved-info",children:[a.jsx("span",{className:"wk-hub-saved-name",children:me.name}),a.jsx("span",{className:"wk-hub-saved-tags",children:a.jsxs("span",{className:"wk-hub-saved-meta",children:[Ve,"  ",me.duration,"min  ",(me.exercises||[]).length," ex"]})}),Ne&&a.jsx("span",{className:"wk-hub-saved-equip",children:Ne})]}),a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]}),a.jsx("button",{className:"wk-hub-saved-delete",onClick:()=>$e(me.id),"aria-label":"Remove saved workout",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polyline",{points:"3 6 5 6 21 6"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]},me.id)})})]},M.key)})}):a.jsx("div",{className:"wk-hub-empty",children:a.jsx("div",{className:"wk-loading-spinner"})})]}),a.jsxs("div",{className:"wk-hub-section wk-hub-section--recent",children:[a.jsxs("h3",{className:"wk-hub-section-title",children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),"Recent"]}),Rr.length===0?a.jsxs("div",{className:"wk-hub-empty wk-hub-empty-enhanced",children:[a.jsxs("svg",{className:"wk-hub-empty-icon",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("polyline",{points:"12 6 12 12 16 14"})]}),a.jsx("p",{children:a.jsx("strong",{children:"No workouts yet"})}),a.jsx("p",{className:"wk-hub-empty-sub",children:"Complete your first workout to see your history here."})]}):a.jsx("div",{className:"wk-hub-recent-list",children:Rr.map((M,W)=>{const te=Hr.find(Ve=>Ve.key===M.focus)?.label||M.focus||"",me=_i.find(Ve=>Ve.key===M.level)?.label||M.level||"",Ie=M.completedAt?.toDate?M.completedAt.toDate():M.completedAt?new Date(M.completedAt):null,Ne=Ie?(()=>{const Ve=Math.floor((Date.now()-Ie.getTime())/1e3);return Ve<3600?`${Math.floor(Ve/60)}m ago`:Ve<86400?`${Math.floor(Ve/3600)}h ago`:`${Math.floor(Ve/86400)}d ago`})():"";return a.jsxs("button",{className:"wk-hub-recent-card",style:{animationDelay:`${W*.05}s`},onClick:()=>{B(M.focus||"core"),G(M.level||"intermediate"),he(M.duration||15),M.equipment&&$(M.equipment),T("setup")},children:[a.jsx("div",{className:"wk-hub-recent-info",children:a.jsxs("span",{className:"wk-hub-recent-tags",children:[a.jsx("span",{className:"wk-hub-focus-pill",style:{"--pill-color":mh[M.focus]||"var(--color-primary)"},children:te}),a.jsxs("span",{className:"wk-hub-recent-meta",children:[me,"  ",M.duration||"?","min  ",M.exerciseCount||"?"," ex"]})]})}),a.jsxs("div",{className:"wk-hub-recent-action",children:[a.jsx("span",{className:"wk-hub-recent-time",children:Ne}),a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]})]},W)})})]})]}),a.jsx(Kr,{active:"workouts"}),ss]})}if(E==="setup"){const z=Hr.find(k=>k.key===q)?.label||q,le=_i.find(k=>k.key===K)?.label||K;return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("randomiser_hub"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main wk-setup-main",children:[a.jsx("div",{className:"wk-stats-row",children:[{label:"Total",value:`${vt}`,pct:vt>0?Math.min(Math.round(vt/100*100),100):0,color:"#14b8a6",size:"normal"},{label:"This Week",value:`${An}/${Zp}`,pct:Math.round(Math.min(An,Zp)/Zp*100),color:"var(--color-primary)",size:"large"},{label:"Wk Streak",value:`${gn}`,pct:gn>0?Math.min(Math.round(gn/12*100),100):0,color:"#38B6FF",size:"normal"}].map(k=>{const W=2*Math.PI*38,te=W-k.pct/100*W;return a.jsxs("div",{className:`wk-stat-item${k.size==="large"?" wk-stat-large":""}`,children:[a.jsxs("div",{className:"wk-stat-ring",children:[a.jsxs("svg",{viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"wk-stat-track",cx:"50",cy:"50",r:38}),a.jsx("circle",{className:"wk-stat-fill",cx:"50",cy:"50",r:38,style:{stroke:k.color},strokeDasharray:W,strokeDashoffset:te})]}),a.jsx("span",{className:"wk-stat-value",style:{color:k.color},children:k.value})]}),a.jsx("span",{className:"wk-stat-label",children:k.label})]},k.label)})}),a.jsxs("div",{className:"wk-setup-flow",children:[a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Focus Area"}),a.jsx("div",{className:"wk-focus-grid",children:Hr.map(k=>a.jsxs("button",{className:`wk-equip-btn${q===k.key?" active":""}${k.key==="mix"?" wk-mix-btn":""}`,onClick:()=>{Rs(),B(k.key)},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:k.icon})}),a.jsx("span",{children:k.label})]},k.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Level"}),a.jsx("div",{className:"wk-level-cards",children:_i.map(k=>a.jsxs("button",{className:`wk-level-card wk-level-${k.key}${K===k.key?" active":""}`,onClick:()=>{Rs(),G(k.key)},children:[a.jsx("span",{className:"wk-level-name",children:k.label}),a.jsx("span",{className:"wk-level-desc",children:k.desc})]},k.key))})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Time"}),a.jsx("div",{className:"wk-time-options",children:sg.map(k=>{const M=!Es.includes(k);return a.jsxs("button",{className:`wk-time-btn${Q===k?" active":""}${M?" locked":""}`,onClick:()=>{M||(Rs(),he(k))},disabled:M,children:[a.jsx("span",{className:"wk-time-num",children:k}),a.jsx("span",{className:"wk-time-unit",children:M?a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}):"min"})]},k)})})]}),a.jsxs("div",{className:"wk-setup-section",children:[a.jsx("h2",{children:"Equipment"}),a.jsx("div",{className:"wk-equip-options",children:ng.map(k=>{const M=L.includes(k.key);return a.jsxs("button",{className:`wk-equip-btn${M?" active":""}`,onClick:()=>{M&&L.length===1||(Rs(),$(W=>M&&W.length===1?W:M?W.filter(te=>te!==k.key):[...W,k.key]))},children:[a.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:k.icon})}),a.jsx("span",{children:k.label})]},k.key)})})]}),a.jsx("div",{className:"wk-setup-summary",children:a.jsxs("span",{children:[z,"  ",le,"  ",Q," min"]})})]})]}),a.jsxs("div",{className:"wk-go-sticky",children:[Zt&&a.jsx("p",{className:"wk-free-limit-msg",children:"You've used your free workout this week. Upgrade for unlimited access."}),a.jsx("button",{className:"wk-randomise-btn",onClick:On,disabled:C||Zt,children:C?"Loading exercises...":Zt?"Limit Reached":"Randomise Workout"})]}),ss]})}if(E==="spinning")return a.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[a.jsxs("div",{className:"wk-spin-container",children:[a.jsxs("div",{className:"wk-spin-ring",children:[a.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:i3.map((z,le)=>a.jsx("line",{x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,className:"wk-spin-tick",strokeWidth:z.thick?"3.5":"2",style:{animationDelay:`${le*.03}s`}},le))}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),a.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),ss]});if(E==="preview"){const z=Je?.interval?{work:Je.work,rest:Je.rest}:_i.find(k=>k.key===K),le=O.length*A*(z.work+z.rest);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T(Je?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[Je?.interval&&a.jsx("h2",{className:"mg-preview-title",children:Je.name}),a.jsxs("div",{className:"wk-preview-stats",children:[a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:O.length}),a.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:A}),a.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsx("span",{className:"wk-stat-val",children:Math.ceil(le/60)}),a.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),a.jsxs("div",{className:"wk-stat",children:[a.jsxs("span",{className:"wk-stat-val",children:[z.work,"/",z.rest]}),a.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),a.jsx("div",{className:"wk-preview-list",children:O.map((k,M)=>a.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${M*.06}s`},onClick:()=>rt(k),children:[a.jsx("span",{className:"wk-preview-num",children:M+1}),a.jsx("div",{className:"wk-preview-thumb",children:k.isGif?a.jsx("img",{src:k.videoUrl,alt:k.name,loading:"lazy"}):a.jsx("video",{src:`${k.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),a.jsx("span",{className:"wk-preview-name",children:k.name}),a.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},M))}),Yt&&a.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>rt(null),children:a.jsxs("div",{className:"wk-preview-modal",onClick:k=>k.stopPropagation(),children:[a.jsx("button",{className:"wk-preview-modal-close",onClick:()=>rt(null),"aria-label":"Close preview",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsx("div",{className:"wk-preview-modal-video",children:Yt.isGif?a.jsx("img",{src:Yt.videoUrl,alt:Yt.name}):a.jsx("video",{src:Yt.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),a.jsx("h3",{className:"wk-preview-modal-title",children:Yt.name})]})}),a.jsxs("div",{className:"wk-preview-actions",children:[!Je?.interval&&a.jsxs("div",{className:"wk-preview-actions-row",children:[a.jsxs("button",{className:"wk-btn-secondary wk-btn-half",onClick:()=>On(),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"1 4 1 10 7 10"}),a.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),p&&a.jsxs("button",{className:"wk-btn-secondary wk-btn-half",onClick:()=>Ln(!0),disabled:Hn,children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save"]})]}),a.jsx("button",{className:"wk-btn-primary wk-btn-full",onClick:Xs,children:"Start Workout"})]}),vs&&a.jsx("div",{className:"wk-save-modal-backdrop",onClick:()=>Ln(!1),children:a.jsxs("div",{className:"wk-save-modal",onClick:k=>k.stopPropagation(),children:[a.jsx("h3",{children:"Save Workout"}),a.jsx("p",{children:"Give this workout a name (or leave blank for auto-name)"}),a.jsx("input",{type:"text",className:"wk-save-input",value:Rn,onChange:k=>ts(k.target.value),placeholder:`${Hr.find(k=>k.key===q)?.label||q} ${Q}min`,maxLength:40,autoFocus:!0}),a.jsxs("div",{className:"wk-save-modal-actions",children:[a.jsx("button",{className:"wk-btn-secondary",onClick:()=>Ln(!1),children:"Cancel"}),a.jsx("button",{className:"wk-btn-primary",onClick:()=>Be(Rn),disabled:Hn,children:Hn?"Saving...":"Save"})]})]})})]})]})}if(E==="countdown")return a.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":d,children:a.jsxs("div",{className:"wk-countdown-big",children:[a.jsx("span",{className:"wk-countdown-num",children:Fe}),a.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(E==="workout"){const z=O[Ce],le=P==="work"?Xe.work:Xe.rest,k=P==="rest"?Ce+1<O.length?O[Ce+1]:je<A?O[0]:null:null;return a.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"wk-video-container",children:P==="work"?z.isGif?a.jsx("img",{ref:st,className:"wk-video",src:z.videoUrl,alt:z.name},z.videoUrl):a.jsx("video",{className:"wk-video",src:z.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},z.videoUrl):a.jsxs("div",{className:"wk-rest-screen",children:[a.jsx("span",{className:"wk-rest-label",children:"REST"}),k&&a.jsxs("span",{className:"wk-next-label",children:["Next: ",k.name]})]})}),a.jsx("div",{className:"wk-back-row",children:a.jsxs("button",{className:"wk-back-btn",onClick:()=>{confirm("Leave workout?")&&T("randomiser_hub")},children:[a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"wk-exercise-info",children:[a.jsxs("span",{className:"wk-exercise-counter",children:[Ce+1," / ",O.length]}),a.jsx("h2",{className:"wk-exercise-name",children:z.name}),a.jsxs("span",{className:"wk-round-label",children:["Round ",je," of ",A]})]}),a.jsx("div",{className:"wk-timer-section",children:a.jsxs("div",{className:"wk-timer-ring-wrap",children:[Mr(we,le,P==="work"?"wk-tick-work":"wk-tick-rest"),a.jsxs("div",{className:"wk-timer-center",children:[a.jsx("span",{className:"wk-timer-time",children:we}),a.jsx("span",{className:`wk-timer-phase ${P}`,children:P==="work"?"WORK":"REST"})]})]})}),a.jsxs("div",{className:"wk-controls",children:[a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&T("randomiser_hub")},children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>Se(!xe),children:xe?a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),a.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{_e(0)},children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),a.jsx("div",{className:"wk-progress-bar",children:a.jsx("div",{className:"wk-progress-fill",style:{width:`${mi()*100}%`}})}),Oe&&(()=>{const M=_i.find(te=>te.key===K),W=O.length*A*(M.work+M.rest);return a.jsxs(a.Fragment,{children:[a.jsx($g,{title:"Workout Complete!",stats:[{value:Math.ceil(W/60),label:"Minutes"},{value:O.length*A,label:"Intervals"},{value:A,label:"Rounds"}],hideShare:!p,onShareJourney:t?Ct:null,userName:t?.name,onDismissStart:()=>T("randomiser_hub"),onDone:()=>{Mt(!1),Tt(null),Rt(null)}}),!Je?.interval&&a.jsxs("button",{className:"wk-complete-save-btn",onClick:()=>Ln(!0),disabled:Hn,children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),"Save This Workout"]}),vs&&a.jsx("div",{className:"wk-save-modal-backdrop",onClick:()=>Ln(!1),style:{zIndex:10001},children:a.jsxs("div",{className:"wk-save-modal",onClick:te=>te.stopPropagation(),children:[a.jsx("h3",{children:"Save Workout"}),a.jsx("p",{children:"Give this workout a name (or leave blank for auto-name)"}),a.jsx("input",{type:"text",className:"wk-save-input",value:Rn,onChange:te=>ts(te.target.value),placeholder:`${Hr.find(te=>te.key===q)?.label||q} ${Q}min`,maxLength:40,autoFocus:!0}),a.jsxs("div",{className:"wk-save-modal-actions",children:[a.jsx("button",{className:"wk-btn-secondary",onClick:()=>Ln(!1),children:"Cancel"}),a.jsx("button",{className:"wk-btn-primary",onClick:()=>Be(Rn),disabled:Hn,children:Hn?"Saving...":"Save"})]})]})})]})})()]})}if(E==="muscle_sessions"){const z=Jc.find(k=>k.key===ht),le=Qw[ht]||[];return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("randomiser_hub"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main",children:[a.jsxs("div",{className:"mg-sessions-header",children:[a.jsx("div",{className:"mg-sessions-icon",style:{background:eg[ht]},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:z?.icon})})}),a.jsxs("h2",{children:[z?.label," Workouts"]}),a.jsxs("p",{children:[le.length," sessions available"]})]}),a.jsx("div",{className:"mg-sessions-list",children:le.map((k,M)=>a.jsxs("button",{className:"mg-session-card",onClick:()=>{Tt(k),T("muscle_overview")},style:{animationDelay:`${M*.08}s`},children:[a.jsxs("div",{className:"mg-session-info",children:[a.jsx("h3",{children:k.name}),a.jsx("p",{children:k.desc}),a.jsx("div",{className:"mg-session-meta",children:k.interval?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),a.jsxs("span",{className:"mg-session-tag",children:[k.exercises.length," exercises"]}),a.jsxs("span",{className:"mg-session-tag",children:[k.rounds," rounds"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),a.jsxs("span",{className:"mg-session-tag",children:[k.exercises.length," exercises"]}),a.jsx("span",{className:"mg-session-tag",children:(()=>{const W=k.exercises.map(Ie=>Ie.sets||0),te=Math.min(...W),me=Math.max(...W);return te===me?`${te} sets each`:`${te}-${me} sets each`})()})]})})]}),a.jsx("div",{className:"mg-session-arrow",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})})]},k.id))})]}),ss]})}if(E==="muscle_overview"){const z=Je;if(!z)return null;const le=Jc.find(k=>k.key===ht);return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>T("muscle_sessions"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"wk-main mg-overview-main",children:[a.jsx("div",{className:"mg-overview-hero",style:z.image?void 0:{background:eg[ht]},children:z.image?a.jsx("img",{src:z.image,alt:z.name,className:"mg-overview-hero-img"}):a.jsx("div",{className:"mg-overview-hero-content",children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:a.jsx("path",{d:le?.icon})})})}),a.jsxs("div",{className:"mg-overview-header",children:[a.jsxs("div",{className:"mg-overview-title-row",children:[a.jsx("h2",{children:z.name}),z.level&&a.jsx("span",{className:"mg-overview-level",children:z.level})]}),a.jsx("p",{className:"mg-overview-desc",children:z.desc})]}),z.overview&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),a.jsx("p",{children:z.overview})]}),z.tips&&z.tips.length>0&&a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),a.jsx("ul",{className:"mg-overview-tips",children:z.tips.map((k,M)=>a.jsx("li",{children:k},M))})]}),a.jsxs("div",{className:"mg-overview-section",children:[a.jsxs("h3",{children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),a.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),a.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",z.exercises.length,")"]}),a.jsx("div",{className:"mg-overview-exercises",children:z.exercises.map((k,M)=>a.jsxs("div",{className:"mg-overview-exercise",children:[a.jsx("span",{className:"mg-overview-ex-num",children:M+1}),a.jsxs("div",{className:"mg-overview-ex-info",children:[a.jsx("span",{className:"mg-overview-ex-name",children:k.name}),z.interval?a.jsxs("span",{className:"mg-overview-ex-detail",children:[z.work,"s work / ",z.rest,"s rest"]}):a.jsxs("span",{className:"mg-overview-ex-detail",children:[k.sets," sets  ",k.reps?`${k.reps} reps`:`${k.time}s`,k.type==="weighted"&&"  weighted"]})]})]},M))})]}),a.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>ma(z),children:[a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),ss]})}if(E==="muscle_workout"){const z=Je;if(!z)return null;const le=z.exercises[pt],k=Wt[pt];if(!le||!k)return null;const M=k.sets.length,W=z.exercises.length,te=z.exercises.reduce((Re,at)=>Re+(at.sets||0),0),Ie=Wt.reduce((Re,at)=>Re+at.sets.length,0)/te*100,Ne=Dn[le.name];le.type==="timed"&&He===0&&!qe&&M===zs&&setTimeout(()=>sn(le.time),0);const Ve=M+1<le.sets?"Log Set":pt+1<W?"Log Set  Next Exercise":"Log Set  Complete";return a.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("div",{className:"mg-session-progress",children:a.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Ie}%`}})}),a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&T("muscle_overview")},"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsxs("span",{className:"mg-header-info",children:["Exercise ",pt+1,"/",W]}),a.jsx("div",{style:{width:22}})]})}),a.jsxs("main",{className:"wk-main",children:[Ne?a.jsxs("div",{className:"mg-video-container",onClick:yr,children:[Ne.isGif?a.jsx("img",{className:"mg-video",src:Ne.url,alt:le.name}):a.jsx("video",{ref:Jt,className:"mg-video",src:Ne.url,loop:!0,muted:!0,playsInline:!0},le.name),!Xt&&!Ne.isGif&&a.jsxs("div",{className:"mg-video-overlay",children:[a.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),a.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):a.jsxs("div",{className:"mg-video-placeholder",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[a.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),a.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),a.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),a.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),a.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),a.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),a.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),a.jsx("span",{children:"Video coming soon"})]}),a.jsx("div",{className:"wk-spotify",children:a.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),a.jsxs("div",{className:"mg-exercise-card",children:[a.jsx("h2",{className:"mg-ex-name",children:le.name}),a.jsx("span",{className:`mg-ex-type-badge ${le.type}`,children:le.type==="weighted"?"Weight + Reps":le.type==="reps"?"Reps Only":"Timed"}),a.jsxs("div",{className:"mg-ex-set-info",children:[a.jsxs("span",{className:"mg-ex-set-num",children:["Set ",M+1," of ",le.sets]}),le.type!=="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",le.reps," reps"]}),le.type==="timed"&&a.jsxs("span",{className:"mg-ex-target",children:["Target: ",le.time,"s"]})]}),le.type==="weighted"&&a.jsxs("div",{className:"mg-input-area",children:[a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Weight (kg)"}),a.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:Ae,onChange:Re=>gt(Re.target.value),placeholder:"0"})]}),a.jsxs("div",{className:"mg-input-group",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:yt,onChange:Re=>ut(Re.target.value),placeholder:"0"})]})]}),le.type==="reps"&&a.jsx("div",{className:"mg-input-area",children:a.jsxs("div",{className:"mg-input-group mg-input-single",children:[a.jsx("label",{children:"Reps"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:yt,onChange:Re=>ut(Re.target.value),placeholder:"0"})]})}),le.type==="timed"&&a.jsxs("div",{className:"mg-timer-area",children:[a.jsx("div",{className:"mg-timer-display",children:a.jsxs("span",{className:"mg-timer-value",children:[He,"s"]})}),qe?a.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>nt(!1),children:"Stop"}):a.jsx("button",{className:"mg-timer-btn",onClick:()=>{He===0&&sn(le.time),nt(!0)},children:He<le.time&&He>0?"Resume":"Start Timer"})]}),a.jsx("button",{className:"mg-log-set-btn",onClick:Ts,children:Ve}),k.sets.length>0&&a.jsx("div",{className:"mg-completed-sets",children:k.sets.map((Re,at)=>a.jsxs("div",{className:"mg-completed-set",children:[a.jsx("span",{className:"mg-completed-set-check",children:""}),a.jsxs("span",{children:["Set ",at+1,": ",Re.weight!=null?`${Re.weight}kg  ${Re.reps}`:Re.reps!=null?`${Re.reps} reps`:`${Re.time}s`]})]},at))})]})]}),ss,on&&(()=>{const Re=Wt.reduce((et,en)=>et+en.sets.length,0),at=Jc.find(et=>et.key===ht)?.label||"",yn=[{value:Wt.length,label:"Exercises"},{value:Re,label:"Sets"}];return a.jsx($g,{title:`${at} Complete!`,subtitle:Je?.name,stats:yn,hideShare:!p,onShareJourney:t?Ct:null,userName:t?.name,onDismissStart:()=>T("randomiser_hub"),onDone:()=>{zn(!1),Tt(null),Rt(null)}})})()]})}return null}const y5=[{key:"trained",label:"Trained",icon:"M4 10v4M8 7v10M8 12h8M16 7v10M20 10v4",color:"#A12F3A",darkColor:"#E8475A"},{key:"protein",label:"Hit Protein",icon:"M12 22c5.52 0 10-4.48 10-10S17.52 2 12 2 2 6.48 2 12s4.48 10 10 10zM12 18c3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6 2.69 6 6 6zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z",color:"#4caf50",darkColor:"#5CDB61"},{key:"steps",label:"10k Steps",icon:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20M4 12.5A2.5 2.5 0 0 1 6.5 10H20M4 5.5A2.5 2.5 0 0 1 6.5 3H20",color:"#ff9800",darkColor:"#FFB020"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",color:"#7c3aed",darkColor:"#9B5AF2"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z",color:"#2196f3",darkColor:"#42A5F5"}],v5="M12 2l2.4 7.2L22 12l-7.6 2.8L12 22l-2.4-7.2L2 12l7.6-2.8z",b5="#e91e63",w5="#FF4D88",x5=700,Wg=42,Rl=2*Math.PI*Wg,ph=["Every day counts. See you tomorrow!","Consistency is your superpower.","Perfect day  keep the streak alive!","You showed up for yourself today."];function _5(s){const e=new Date(s),t=e.getDay(),i=t===0?-6:1-t;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function So(s){return s.toISOString().split("T")[0]}function k5(s){return Array.from({length:7},(e,t)=>{const i=new Date(s);return i.setDate(s.getDate()+t),i})}function E5(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Ar(),{isDark:l,toggleTheme:u,accent:d}=Mi(),{isPremium:p,FREE_HABIT_LIMIT:g}=ic(),y=Ys(),[b,E]=w.useState({}),[T,L]=w.useState([]),[$,q]=w.useState(!0),[B,K]=w.useState(!1),[G,Q]=w.useState(0),[he,Ee]=w.useState(null),[ge,C]=w.useState(null),[j,R]=w.useState(!1),[V,O]=w.useState(!1),[D,A]=w.useState(!1),[Le,Xe]=w.useState(!1),[X,je]=w.useState(""),[De,Ce]=w.useState(null),[J,P]=w.useState([]),[re,we]=w.useState(null),_e=w.useRef(null),xe=w.useRef(null),Se=w.useRef(null),Fe=w.useRef(null),Ze=w.useRef(!1),Oe=w.useRef({}),Mt=w.useRef([]),on=w.useRef([]),zn=w.useRef(null),Yt=w.useRef(ph[Math.floor(Math.random()*ph.length)]),rt=w.useCallback((ae,Me="info")=>{Ee({message:ae,type:Me}),setTimeout(()=>Ee(null),3e3)},[]),st=new Date,ct=So(st),_n=_5(st),fe=k5(_n),Ct=["M","T","W","T","F","S","S"],ht=(ae,Me)=>l&&Me?Me:ae,Rt=[...y5.filter(ae=>!J.includes(ae.key)).map(ae=>({...ae,color:ht(ae.color,ae.darkColor)})),...T.map(ae=>({key:`custom_${ae.id}`,label:ae.label,icon:v5,color:ht(b5,w5),isCustom:!0,id:ae.id}))],Je=p?Rt:Rt.slice(0,g);w.useEffect(()=>{!i&&(!s||!e)&&y("/")},[s,e,i,y]),w.useEffect(()=>{if(!s||!t)return;(async()=>{try{const Me=mt(ye,"habitLogs"),Ke=Kt(Me,xt("clientId","==",t.id)),vt=await Ht(Ke),it={};vt.docs.forEach(Sn=>{const Ns=Sn.data();it[Ns.date]={...Ns,_id:Sn.id}}),E(it);const Gt=await Us(We(ye,"customHabits",t.id));if(Gt.exists()){const Sn=Gt.data();L(Sn.habits||[]),P(Sn.hiddenDefaults||[])}let jn=0;const gn=new Date(st);for(;;){const Sn=So(gn),Ns=it[Sn];if(Ns)if(Object.values(Ns.habits||{}).filter(Boolean).length>=3)jn++,gn.setDate(gn.getDate()-1);else break;else if(Sn===ct)gn.setDate(gn.getDate()-1);else break}Q(jn)}catch(Me){console.error("Error loading habit logs:",Me)}finally{q(!1)}})()},[s,t]);const Tt=b[ct]||{habits:{}};w.useEffect(()=>{Object.values(Tt.habits||{}).filter(Boolean).length<Je.length&&D&&A(!1)},[Je.length,Tt.habits]);const pt=async ae=>{if(!(!s||B||Tt.habits?.[ae])){Mt.current=[...Array(10)].map((Ke,vt)=>{const it=vt/10*2*Math.PI,Gt=18+Math.random()*20;return{tx:Math.cos(it)*Gt,ty:Math.sin(it)*Gt,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),C(ae),setTimeout(()=>C(null),700),navigator.vibrate&&navigator.vibrate(50),K(!0);try{const vt={...Tt.habits||{},[ae]:!0},it=Tt._id||`${t.id}_${ct}`;E(jn=>({...jn,[ct]:{clientId:t.id,date:ct,habits:vt,_id:it}})),await Cs(We(ye,"habitLogs",it),{clientId:t.id,date:ct,habits:vt}),Object.values(vt).filter(Boolean).length===Je.length&&!D&&(Yt.current=ph[Math.floor(Math.random()*ph.length)],on.current=[...Array(80)].map((jn,gn)=>({x:5+Math.random()*90,delay:Math.random()*3.5,color:["#A12F3A","#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#FFD700","#ffffff","#9c27b0"][gn%9],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.8+Math.random()*2,width:4+Math.random()*6,height:4+Math.random()*8,shape:gn%3})),setTimeout(()=>{R(!0),A(!0),setTimeout(()=>zn.current?.focus(),1100)},400))}catch(Ke){console.error("Error saving habit:",Ke),rt("Failed to save. Try again.","error"),E(vt=>({...vt,[ct]:{...vt[ct],habits:{...vt[ct]?.habits||{},[ae]:!1}}}))}finally{K(!1)}}},Qt=async ae=>{if(!(!s||B)){K(!0);try{const Ke={...Tt.habits||{},[ae]:!1},vt=Tt._id||`${t.id}_${ct}`;await Cs(We(ye,"habitLogs",vt),{clientId:t.id,date:ct,habits:Ke}),E(it=>({...it,[ct]:{clientId:t.id,date:ct,habits:Ke,_id:vt}}))}catch(Me){console.error("Error undoing habit:",Me),rt("Failed to undo. Try again.","error")}finally{K(!1)}}},zs=ae=>{if(Tt.habits?.[ae]||!1||B||Fe.current)return;Fe.current=ae,we(ae),xe.current=performance.now();const Ke=Oe.current[ae];Ke&&(Ke.style.strokeDashoffset=Rl);const vt=it=>{const Gt=it-xe.current,jn=Math.min(Gt/x5,1),gn=Oe.current[ae];gn&&(gn.style.strokeDashoffset=Rl-jn*Rl),jn<1?Se.current=requestAnimationFrame(vt):(Fe.current=null,Ze.current=!0,Se.current=null,we(null),pt(ae))};Se.current=requestAnimationFrame(vt)},es=()=>{if(!Fe.current)return;const ae=Fe.current;Fe.current=null,Se.current&&(cancelAnimationFrame(Se.current),Se.current=null),_e.current&&(clearTimeout(_e.current),_e.current=null),Oe.current[ae]&&(Oe.current[ae].style.strokeDashoffset=Rl),we(null),xe.current=null};w.useEffect(()=>()=>{Se.current&&cancelAnimationFrame(Se.current),_e.current&&clearTimeout(_e.current)},[]);const Wt=w.useCallback(async ae=>{if(!t)throw new Error("Not signed in");const Me=ae&&typeof ae=="object"&&ae.type;await Cr(mt(ye,"posts"),{authorId:t.id,authorName:t.name||"Unknown",authorPhotoURL:t.photoURL||null,content:Me?"":ae,type:Me?ae.type:"text",imageURL:null,createdAt:Vs(),likeCount:0,commentCount:0,...Me?{metadata:{title:ae.title||"",subtitle:ae.subtitle||"",stats:ae.stats||[],quote:ae.quote||"",badges:ae.badges||[]}}:{}})},[t]),se=async()=>{const ae=X.trim();if(!ae)return;if(!t?.id){rt("Still loading, try again","error");return}const Me=Date.now().toString(36),Ke=[...T,{id:Me,label:ae}];try{await Cs(We(ye,"customHabits",t.id),{clientId:t.id,habits:Ke,hiddenDefaults:J},{merge:!0}),L(Ke),je(""),Xe(!1),rt(`Added "${ae}"`,"success")}catch(vt){console.error("Error adding custom habit:",vt),rt(vt?.code==="permission-denied"?"Permission denied  check Firestore rules for customHabits":`Failed to add habit: ${vt?.message||"Unknown error"}`,"error")}},Ae=async ae=>{if(!t?.id)return;const Me=T.filter(Ke=>Ke.id!==ae);try{await Cs(We(ye,"customHabits",t.id),{clientId:t.id,habits:Me,hiddenDefaults:J},{merge:!0}),L(Me),Ce(null),rt("Habit removed","success")}catch(Ke){console.error("Error deleting habit:",Ke),rt("Failed to remove","error")}},gt=async ae=>{if(!t?.id)return;const Me=[...J,ae];try{await Cs(We(ye,"customHabits",t.id),{clientId:t.id,habits:T,hiddenDefaults:Me},{merge:!0}),P(Me),Ce(null),rt("Habit removed","success")}catch(Ke){console.error("Error hiding default habit:",Ke),rt("Failed to remove","error")}},yt=fe.map(ae=>{const Me=So(ae),Ke=b[Me],vt=Ke?Object.values(Ke.habits||{}).filter(Boolean).length:0;return{date:ae,dateStr:Me,completed:vt,total:Je.length}}),ut=yt.reduce((ae,Me)=>ae+Me.completed,0),qe=yt.reduce((ae,Me)=>ae+Me.total,0),nt=qe>0?Math.round(ut/qe*100):0,He=Object.values(Tt.habits||{}).filter(Boolean).length,sn=Je.length>0?Math.round(He/Je.length*100):0,Xt=He===Je.length&&Je.length>0,Nn=(()=>{const ae=Object.keys(b).sort();let Me=0,Ke=0,vt=null;for(const it of ae){const Gt=b[it];if(Object.values(Gt.habits||{}).filter(Boolean).length>=3){if(vt){const gn=new Date(vt);Ke=(new Date(it)-gn)/(1e3*60*60*24)===1?Ke+1:1}else Ke=1;Ke>Me&&(Me=Ke),vt=it}else Ke=0,vt=null}return Math.max(Me,G)})(),Dn=new Date(st.getFullYear(),st.getMonth(),1),Kn=Dn.toLocaleString("default",{month:"long"}),Jt=new Date(st.getFullYear(),st.getMonth()+1,0).getDate(),Fn=(Dn.getDay()+6)%7,An=Array.from({length:Jt},(ae,Me)=>{const Ke=new Date(st.getFullYear(),st.getMonth(),Me+1),vt=So(Ke),it=b[vt],Gt=it?Object.values(it.habits||{}).filter(Boolean).length:0,jn=Ke>st;return{day:Me+1,dateStr:vt,completed:Gt,total:Je.length,isFuture:jn,isToday:vt===ct}}),pn=Je.map(ae=>({...ae,days:fe.map(Me=>{const Ke=So(Me);return b[Ke]?.habits?.[ae.key]||!1})})),ks=yt.filter(ae=>ae.completed===ae.total&&ae.total>0).length;return a.jsx(Jo,{children:a.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":d,children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>y("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i||$?a.jsx("div",{className:"cbc-loading-inline",children:a.jsx("div",{className:"cbc-loading-spinner"})}):a.jsxs("main",{className:"cbc-main",children:[a.jsxs("div",{className:"cbc-hero anim-fade-up",children:[a.jsxs("div",{className:`cbc-progress-ring${Xt?" cbc-ring-complete":""}`,children:[a.jsxs("svg",{viewBox:"0 0 200 200",children:[a.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),a.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-sn/100*2*Math.PI*80})]}),a.jsxs("div",{className:"cbc-ring-center",children:[a.jsxs("span",{className:"cbc-ring-count",children:[He,a.jsx("span",{className:"cbc-ring-divider",children:"/"}),Je.length]}),a.jsx("span",{className:"cbc-ring-label",children:Xt?"complete":"today"})]})]}),a.jsx("p",{className:"cbc-hero-tagline",children:Xt?"You showed up for yourself today.":He===0?"Start your day strong.":`${Je.length-He} to go  keep pushing.`})]}),a.jsxs("div",{className:"cbc-streak-card anim-fade-up-d1",children:[a.jsx("div",{className:"cbc-streak-icon",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})}),a.jsxs("div",{className:"cbc-streak-info",children:[a.jsx("span",{className:"cbc-streak-count",children:G}),a.jsx("span",{className:"cbc-streak-label",children:"day streak"})]}),a.jsxs("div",{className:"cbc-streak-best",children:[a.jsx("span",{className:"cbc-streak-best-val",children:Nn}),a.jsx("span",{className:"cbc-streak-best-label",children:"best"})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d2",children:[a.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),a.jsxs("div",{className:"cbc-habits-grid",children:[Je.map(ae=>{const Me=Tt.habits?.[ae.key]||!1,Ke=ge===ae.key,vt=re===ae.key;return a.jsxs("div",{className:`cbc-habit-tile ${Me?"cbc-habit-done":""} ${Ke?"cbc-habit-just-checked":""}`,style:{"--habit-color":ae.color},children:[p&&a.jsx("button",{className:"cbc-habit-delete",onClick:it=>{it.stopPropagation(),Ce(ae.isCustom?{type:"custom",id:ae.id,label:ae.label}:{type:"default",key:ae.key,label:ae.label})},"aria-label":`Remove ${ae.label}`,children:a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),a.jsxs("div",{className:`cbc-habit-ring-touch ${vt?"cbc-holding":""} ${Me?"cbc-ring-completed":""}`,onPointerDown:it=>{Me||(it.preventDefault(),zs(ae.key))},onPointerUp:es,onPointerLeave:es,onPointerCancel:es,onClick:it=>{if(it.stopPropagation(),Ze.current){Ze.current=!1;return}Me&&Qt(ae.key)},role:"button",tabIndex:0,"aria-label":Me?`Undo ${ae.label}`:`Press and hold to complete ${ae.label}`,onKeyDown:it=>{(it.key==="Enter"||it.key===" ")&&(it.preventDefault(),Me?Qt(ae.key):pt(ae.key))},children:[a.jsxs("svg",{className:"cbc-habit-ring-svg",viewBox:"0 0 100 100",children:[a.jsx("circle",{className:"cbc-habit-ring-track",cx:"50",cy:"50",r:Wg}),a.jsx("circle",{className:"cbc-habit-ring-fill",ref:it=>{it&&(Oe.current[ae.key]=it)},cx:"50",cy:"50",r:Wg,style:{stroke:ae.color,strokeDasharray:Rl,strokeDashoffset:Me?0:Rl}})]}),Me&&a.jsx("div",{className:"cbc-habit-glow-orb",style:{"--habit-color":ae.color}}),a.jsx("div",{className:"cbc-habit-ring-icon",style:{color:ae.color},children:a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:ae.icon})})}),Ke&&a.jsx("div",{className:"cbc-particles",children:Mt.current.map((it,Gt)=>a.jsx("span",{className:"cbc-particle",style:{"--tx":`${it.tx}px`,"--ty":`${it.ty}px`,"--size":`${it.size}px`,"--particle-color":ae.color,animationDuration:`${it.duration}s`}},Gt))})]}),a.jsx("span",{className:"cbc-habit-label",children:ae.label}),Me?a.jsx("span",{className:"cbc-habit-done-tag",children:"Done"}):a.jsx("span",{className:"cbc-habit-hold-hint",children:"Hold to complete"})]},ae.key)}),p?a.jsxs("div",{className:"cbc-habit-tile cbc-add-tile",onClick:()=>Xe(!0),role:"button",tabIndex:0,children:[a.jsx("div",{className:"cbc-add-ring",children:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),a.jsx("span",{className:"cbc-habit-label",children:"Add Habit"}),a.jsx("span",{className:"cbc-habit-hold-hint",children:"Your own"})]}):a.jsxs("div",{className:"cbc-habit-tile cbc-unlock-tile",onClick:()=>y("/upgrade"),role:"button",tabIndex:0,children:[a.jsx("div",{className:"cbc-unlock-ring",children:a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("span",{className:"cbc-habit-label",children:"More Habits"}),a.jsx("span",{className:"cbc-habit-hold-hint",children:"Custom & editable"})]})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d3",children:[a.jsxs("div",{className:"cbc-section-header",children:[a.jsx("h2",{className:"cbc-section-title",children:"This Week"}),a.jsxs("span",{className:"cbc-section-badge",children:[ks,"/7 perfect"]})]}),a.jsxs("div",{className:"cbc-weekly-card",children:[a.jsxs("div",{className:"cbc-weekly-header",children:[a.jsx("span",{className:"cbc-weekly-habit-name"}),Ct.map((ae,Me)=>a.jsx("span",{className:`cbc-weekly-day-label${fe[Me]&&So(fe[Me])===ct?" cbc-today-label":""}`,children:ae},Me))]}),pn.map(ae=>(ae.days.filter(Boolean).length,a.jsxs("div",{className:"cbc-weekly-row",children:[a.jsx("span",{className:"cbc-weekly-habit-name",style:{color:ae.color},children:ae.label}),ae.days.map((Me,Ke)=>a.jsx("span",{className:`cbc-weekly-dot${Me?" cbc-dot-done":""}${fe[Ke]&&So(fe[Ke])===ct?" cbc-dot-today":""}`,style:Me?{background:ae.color,borderColor:ae.color,boxShadow:`0 0 6px ${ae.color}40`}:void 0},Ke))]},ae.key))),a.jsxs("div",{className:"cbc-week-summary",children:[a.jsx("div",{className:"cbc-week-summary-bar",children:a.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${nt}%`}})}),a.jsxs("span",{className:"cbc-week-summary-text",children:[ut,"/",qe," completed (",nt,"%)"]})]})]})]}),a.jsxs("div",{className:"cbc-section anim-fade-up-d4",children:[a.jsx("h2",{className:"cbc-section-title",children:Kn}),a.jsxs("div",{className:"cbc-calendar-card",children:[a.jsx("div",{className:"cbc-cal-header",children:["M","T","W","T","F","S","S"].map((ae,Me)=>a.jsx("span",{className:"cbc-cal-day-label",children:ae},Me))}),a.jsxs("div",{className:"cbc-cal-grid",children:[Array.from({length:Fn},(ae,Me)=>a.jsx("span",{className:"cbc-cal-cell cbc-cal-empty"},`e${Me}`)),An.map(ae=>{const Me=ae.total>0?ae.completed/ae.total:0,Ke=ae.isFuture?-1:Me===0?0:Me<.4?1:Me<.75?2:Me<1?3:4;return a.jsx("span",{className:`cbc-cal-cell${ae.isToday?" cbc-cal-today":""}${Ke===4?" cbc-cal-perfect":""} cbc-cal-heat-${Ke<0?"future":Ke}`,children:ae.day},ae.day)})]}),a.jsxs("div",{className:"cbc-cal-legend",children:[a.jsx("span",{className:"cbc-cal-legend-label",children:"Less"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-0"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-1"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-2"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-3"}),a.jsx("span",{className:"cbc-cal-legend-swatch cbc-cal-heat-4"}),a.jsx("span",{className:"cbc-cal-legend-label",children:"More"})]})]})]})]}),a.jsx(Kr,{active:"home"}),Le&&a.jsx("div",{className:"cbc-modal-overlay",onClick:()=>Xe(!1),children:a.jsxs("div",{className:"cbc-modal",onClick:ae=>ae.stopPropagation(),children:[a.jsx("h3",{className:"cbc-modal-title",children:"Add Habit"}),a.jsx("p",{className:"cbc-modal-desc",children:"Track something personal to your routine."}),a.jsx("input",{className:"cbc-modal-input",type:"text",placeholder:"e.g. Meditate, Stretch, Read...",value:X,onChange:ae=>je(ae.target.value),maxLength:30,autoFocus:!0,onKeyDown:ae=>ae.key==="Enter"&&se()}),a.jsxs("div",{className:"cbc-modal-actions",children:[a.jsx("button",{className:"cbc-modal-cancel",onClick:()=>{Xe(!1),je("")},children:"Cancel"}),a.jsx("button",{className:"cbc-modal-save",onClick:se,disabled:!X.trim(),children:"Add"})]})]})}),De&&a.jsx("div",{className:"cbc-modal-overlay",onClick:()=>Ce(null),children:a.jsxs("div",{className:"cbc-modal",onClick:ae=>ae.stopPropagation(),children:[a.jsxs("h3",{className:"cbc-modal-title",children:['Remove "',De.label,'"?']}),a.jsx("p",{className:"cbc-modal-desc",children:"This will remove the habit from your daily tracker. Past logs won't be affected."}),a.jsxs("div",{className:"cbc-modal-actions",children:[a.jsx("button",{className:"cbc-modal-cancel",onClick:()=>Ce(null),children:"Keep"}),a.jsx("button",{className:"cbc-modal-delete",onClick:()=>De.type==="custom"?Ae(De.id):gt(De.key),children:"Remove"})]})]})}),j&&a.jsx($g,{title:"All Habits Complete!",subtitle:Yt.current,stats:[{value:`${He}/${Je.length}`,label:"Habits"},{value:G||1,label:"Day Streak"}],buttonLabel:"Keep Going",holdLabel:"Hold To Complete Today's Habits",shareType:"habits",hideShare:!p,onShareJourney:t?Wt:null,userName:t?.name,onDone:()=>{R(!1),O(!1)}}),he&&a.jsx("div",{className:`toast-notification ${he.type}`,children:he.message})]})})}function gh(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Jw(s,e){return[s,e].sort().join("_")}function T5(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Ar(),{isDark:l,toggleTheme:u}=Mi(),d=Ys(),[p,g]=w.useState("buddies"),[y,b]=w.useState([]),[E,T]=w.useState([]),[L,$]=w.useState([]),[q,B]=w.useState(""),[K,G]=w.useState([]),[Q,he]=w.useState([]),[Ee,ge]=w.useState(!0),[C,j]=w.useState(null),[R,V]=w.useState(null),O=w.useCallback((J,P="info")=>{V({message:J,type:P}),setTimeout(()=>V(null),3500)},[]);w.useEffect(()=>{!i&&(!s||!e)&&d("/")},[s,e,i,d]);const D=w.useCallback(async()=>{if(t){ge(!0);try{const J=t.id,re=(await Ht(mt(ye,"clients"))).docs.map(Oe=>({id:Oe.id,...Oe.data()}));he(re);const we=Object.fromEntries(re.map(Oe=>[Oe.id,Oe])),_e=await Ht(Kt(mt(ye,"buddies"),xt("user1","==",J))),xe=await Ht(Kt(mt(ye,"buddies"),xt("user2","==",J))),Se=new Set;[..._e.docs,...xe.docs].forEach(Oe=>{const Mt=Oe.data(),on=Mt.user1===J?Mt.user2:Mt.user1;Se.add(on)}),b(Array.from(Se).map(Oe=>we[Oe]).filter(Boolean));const Fe=await Ht(Kt(mt(ye,"buddyRequests"),xt("toId","==",J),xt("status","==","pending")));T(Fe.docs.map(Oe=>({reqId:Oe.id,...Oe.data(),fromClient:we[Oe.data().fromId]})).filter(Oe=>Oe.fromClient));const Ze=await Ht(Kt(mt(ye,"buddyRequests"),xt("fromId","==",J),xt("status","==","pending")));$(Ze.docs.map(Oe=>({reqId:Oe.id,...Oe.data(),toClient:we[Oe.data().toId]})).filter(Oe=>Oe.toClient))}catch(J){console.error("Error fetching buddy data:",J),O("Failed to load buddies","error")}finally{ge(!1)}}},[t,O]);w.useEffect(()=>{D()},[D]),w.useEffect(()=>{if(!q.trim()||!t){G([]);return}const J=q.toLowerCase(),P=t.id,re=new Set(y.map(Se=>Se.id)),we=new Set(L.map(Se=>Se.toId)),_e=new Set(E.map(Se=>Se.fromId)),xe=Q.filter(Se=>Se.id===P||!Se.name||!Se.coreBuddyAccess&&Se.clientType!=="core_buddy"?!1:Se.name.toLowerCase().includes(J)).map(Se=>({...Se,isBuddy:re.has(Se.id),isPendingOut:we.has(Se.id),isPendingIn:_e.has(Se.id)})).slice(0,20);G(xe)},[q,Q,y,L,E,t]);const A=async(J,P)=>{if(!(!t||J===t.id))try{await Cr(mt(ye,"notifications"),{toId:J,fromId:t.id,fromName:t.name||"Someone",fromPhotoURL:t.photoURL||null,type:P,read:!1,createdAt:Vs()})}catch(re){console.error("Notification error:",re),re.code==="permission-denied"&&O("Notifications blocked  check Firestore rules","error")}},Le=async J=>{j(J);try{const P=`${t.id}_${J}`;await Cs(We(ye,"buddyRequests",P),{fromId:t.id,toId:J,status:"pending",createdAt:Vs()}),await A(J,"buddy_request"),O("Buddy request sent!","success"),await D()}catch(P){console.error("Error sending request:",P),O("Failed to send request","error")}finally{j(null)}},Xe=async J=>{j(J.reqId);try{const P=Jw(J.fromId,t.id);await Cs(We(ye,"buddies",P),{user1:[J.fromId,t.id].sort()[0],user2:[J.fromId,t.id].sort()[1],connectedAt:Vs()}),await jr(We(ye,"buddyRequests",J.reqId)),await A(J.fromId,"buddy_accept"),O("Buddy added!","success"),await D()}catch(P){console.error("Error accepting request:",P),O("Failed to accept","error")}finally{j(null)}},X=async J=>{j(J.reqId);try{await jr(We(ye,"buddyRequests",J.reqId)),O("Request declined","info"),await D()}catch(P){console.error("Error declining:",P),O("Failed to decline","error")}finally{j(null)}},je=async J=>{j(J.reqId);try{await jr(We(ye,"buddyRequests",J.reqId)),O("Request cancelled","info"),await D()}catch(P){console.error("Error cancelling:",P),O("Failed to cancel","error")}finally{j(null)}},De=async J=>{j(J);try{const P=Jw(t.id,J);await jr(We(ye,"buddies",P)),O("Buddy removed","info"),await D()}catch(P){console.error("Error removing buddy:",P),O("Failed to remove buddy","error")}finally{j(null)}},Ce=E.length;return i?a.jsx("div",{className:"bdy-loading",children:a.jsx("div",{className:"bdy-spinner"})}):!s||!e||!t?null:a.jsx(Jo,{children:a.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdy-main",children:[a.jsx("h1",{className:"bdy-title",children:"Buddies"}),a.jsxs("button",{className:"bdy-leaderboard-link",onClick:()=>d("/client/leaderboard"),children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),a.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),a.jsx("rect",{x:"6",y:"9",width:"12",height:"13",rx:"2"}),a.jsx("path",{d:"M12 9v13"}),a.jsx("path",{d:"M2 22h20"})]}),a.jsx("span",{children:"Leaderboard"}),a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]}),a.jsxs("div",{className:"bdy-tabs",children:[a.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("span",{children:"My Buddies"})]}),a.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),a.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),a.jsx("span",{children:"Requests"}),Ce>0&&a.jsx("span",{className:"bdy-tab-badge",children:Ce})]}),a.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("span",{children:"Find"})]})]}),Ee?a.jsx("div",{className:"bdy-content-loading",children:a.jsx("div",{className:"bdy-spinner"})}):a.jsxs(a.Fragment,{children:[p==="buddies"&&a.jsx("div",{className:"bdy-section",children:y.length===0?a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"9",cy:"7",r:"4"}),a.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),a.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),a.jsx("h3",{children:"No buddies yet"}),a.jsx("p",{children:"Find members and send buddy requests to connect!"}),a.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):a.jsx("div",{className:"bdy-list",children:y.map(J=>a.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${J.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:J.photoURL?a.jsx("img",{src:J.photoURL,alt:J.name}):a.jsx("span",{children:gh(J.name)})}),a.jsx("div",{className:"bdy-card-info",children:a.jsx("span",{className:"bdy-card-name",children:J.name})}),a.jsx("button",{className:"bdy-remove-btn",onClick:P=>{P.stopPropagation(),De(J.id)},disabled:C===J.id,"aria-label":"Remove buddy",children:C===J.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},J.id))})}),p==="requests"&&a.jsxs("div",{className:"bdy-section",children:[E.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),a.jsx("div",{className:"bdy-list",children:E.map(J=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:J.fromClient.photoURL?a.jsx("img",{src:J.fromClient.photoURL,alt:J.fromClient.name}):a.jsx("span",{children:gh(J.fromClient.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:J.fromClient.name}),a.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),a.jsxs("div",{className:"bdy-action-pair",children:[a.jsx("button",{className:"bdy-accept-btn",onClick:()=>Xe(J),disabled:C===J.reqId,children:C===J.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}),a.jsx("button",{className:"bdy-decline-btn",onClick:()=>X(J),disabled:C===J.reqId,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},J.reqId))})]}),L.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"bdy-section-title",children:"Sent"}),a.jsx("div",{className:"bdy-list",children:L.map(J=>a.jsxs("div",{className:"bdy-card",children:[a.jsx("div",{className:"bdy-avatar",children:J.toClient?.photoURL?a.jsx("img",{src:J.toClient.photoURL,alt:J.toClient.name}):a.jsx("span",{children:gh(J.toClient?.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:J.toClient?.name}),a.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),a.jsx("button",{className:"bdy-cancel-btn",onClick:()=>je(J),disabled:C===J.reqId,children:C===J.reqId?a.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},J.reqId))})]}),E.length===0&&L.length===0&&a.jsxs("div",{className:"bdy-empty",children:[a.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),a.jsx("h3",{children:"No pending requests"}),a.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&a.jsxs("div",{className:"bdy-section",children:[a.jsxs("div",{className:"bdy-search-bar",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"11",cy:"11",r:"8"}),a.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),a.jsx("input",{type:"text",placeholder:"Search by name...",value:q,onChange:J=>B(J.target.value),autoFocus:!0}),q&&a.jsx("button",{className:"bdy-search-clear",onClick:()=>B(""),children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),q.trim()&&K.length===0&&a.jsx("div",{className:"bdy-empty bdy-empty-sm",children:a.jsxs("p",{children:['No members found for "',q,'"']})}),K.length>0&&a.jsx("div",{className:"bdy-list",children:K.map(J=>a.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${J.id}`),children:[a.jsx("div",{className:"bdy-avatar",children:J.photoURL?a.jsx("img",{src:J.photoURL,alt:J.name}):a.jsx("span",{children:gh(J.name)})}),a.jsxs("div",{className:"bdy-card-info",children:[a.jsx("span",{className:"bdy-card-name",children:J.name}),J.isBuddy&&a.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),J.isBuddy?a.jsx("span",{className:"bdy-status-icon",children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):J.isPendingOut?a.jsx("span",{className:"bdy-pending-label",children:"Pending"}):J.isPendingIn?a.jsx("button",{className:"bdy-accept-btn",onClick:P=>{P.stopPropagation();const re=E.find(we=>we.fromId===J.id);re&&Xe(re)},disabled:!!C,children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})})}):a.jsx("button",{className:"bdy-add-btn",onClick:P=>{P.stopPropagation(),Le(J.id)},disabled:C===J.id,children:C===J.id?a.jsx("div",{className:"bdy-btn-spinner"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},J.id))})]})]})]}),a.jsx(Kr,{}),R&&a.jsxs("div",{className:`toast-notification ${R.type}`,children:[a.jsx("span",{className:"toast-icon",children:R.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):R.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:R.message})]})]})})}function yh(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function rg(s,e){return[s,e].sort().join("_")}const j5=5;function ig(s){return s.toISOString().split("T")[0]}function Zw(s){if(!s)return"";const e=s instanceof Date?s:s.toDate?s.toDate():new Date(s),t=Math.floor((new Date-e)/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:t<604800?`${Math.floor(t/86400)}d ago`:e.toLocaleDateString("en-GB",{day:"numeric",month:"short"})}function S5(){const{userId:s}=bS(),{currentUser:e,isClient:t,clientData:i,loading:l}=Ar(),{isDark:u,toggleTheme:d}=Mi(),p=Ys(),[g,y]=w.useState(null),[b,E]=w.useState("none"),[T,L]=w.useState(null),[$,q]=w.useState(!0),[B,K]=w.useState(!1),[G,Q]=w.useState(null),[he,Ee]=w.useState([]),[ge,C]=w.useState(!1),[j,R]=w.useState(new Set),[V,O]=w.useState(new Set),[D,A]=w.useState({}),[Le,Xe]=w.useState({}),[X,je]=w.useState({}),[De,Ce]=w.useState(!0),[J,P]=w.useState(0),[re,we]=w.useState(0),[_e,xe]=w.useState(0),[Se,Fe]=w.useState([]),[Ze,Oe]=w.useState(!1),[Mt,on]=w.useState(null),[zn,Yt]=w.useState([]),rt=w.useCallback((se,Ae="info")=>{Q({message:se,type:Ae}),setTimeout(()=>Q(null),3500)},[]);w.useEffect(()=>{!l&&(!e||!t)&&p("/")},[e,t,l,p]),w.useEffect(()=>{i&&s&&i.id===s&&p("/client/core-buddy",{replace:!0})},[i,s,p]),w.useEffect(()=>{if(!i||!s||i.id===s)return;let se=!1;return(async()=>{q(!0);try{const yt=(await Ht(mt(ye,"clients"))).docs.map(He=>({id:He.id,...He.data()})).find(He=>He.id===s);if(!yt){se||q(!1);return}se||y(yt);const ut=i.id,qe=rg(ut,s);if((await Us(We(ye,"buddies",qe))).exists())se||E("buddy");else{const He=`${ut}_${s}`,sn=await Us(We(ye,"buddyRequests",He));if(sn.exists()&&sn.data().status==="pending")se||(E("pending_out"),L(He));else{const Xt=`${s}_${ut}`,Nn=await Us(We(ye,"buddyRequests",Xt));Nn.exists()&&Nn.data().status==="pending"?se||(E("pending_in"),L(Xt)):se||E("none")}}}catch(Ae){console.error("Error loading profile:",Ae)}finally{se||q(!1)}})(),()=>{se=!0}},[i,s]),w.useEffect(()=>{if(!s||!g)return;let se=!1;return(async()=>{Ce(!0);try{const Ae=await Ht(Kt(mt(ye,"workoutLogs"),xt("clientId","==",s)));if(se)return;const gt=Ae.docs.length;P(gt);let yt=0;const ut=Ae.docs.map(nt=>nt.data().date).filter(Boolean).sort().reverse();if(ut.length>0){const nt=new Date;let He=new Date(nt);for(let sn=0;sn<52;sn++){const Xt=new Date(He),Nn=Xt.getDay(),Dn=Nn===0?6:Nn-1;Xt.setDate(Xt.getDate()-Dn),Xt.setHours(0,0,0,0);const Kn=new Date(Xt);Kn.setDate(Kn.getDate()+7);const Jt=ig(Xt),Fn=ig(Kn);if(ut.some(pn=>pn>=Jt&&pn<Fn))yt++;else{if(sn>0)break;break}He.setDate(He.getDate()-7)}}se||we(yt);let qe=0;for(let nt=0;nt<30;nt++){const He=new Date;He.setDate(He.getDate()-nt);const sn=ig(He);try{const Xt=await Ht(Kt(mt(ye,"habitLogs"),xt("clientId","==",s),xt("date","==",sn)));if(Xt.empty)break;{const Nn=Xt.docs[0].data().habits||{};if(Object.values(Nn).filter(Boolean).length>=j5)qe++;else break}}catch{break}}se||xe(qe)}catch(Ae){console.error("Error loading buddy stats:",Ae)}finally{se||Ce(!1)}})(),()=>{se=!0}},[s,g]),w.useEffect(()=>{if(!i)return;const se=i.id;(async()=>{try{const[Ae,gt,yt]=await Promise.all([Ht(Kt(mt(ye,"buddies"),xt("user1","==",se))),Ht(Kt(mt(ye,"buddies"),xt("user2","==",se))),Ht(mt(ye,"clients"))]),ut=new Set;[...Ae.docs,...gt.docs].forEach(nt=>{const He=nt.data();ut.add(He.user1===se?He.user2:He.user1)});const qe={};yt.docs.forEach(nt=>{qe[nt.id]=nt.data()}),Fe(Array.from(ut).filter(nt=>qe[nt]).map(nt=>({id:nt,name:qe[nt].name,photoURL:qe[nt].photoURL||null})))}catch(Ae){console.error("Error loading buddies for mentions:",Ae)}})()},[i]);const st=async(se,Ae,gt={})=>{if(!(!i||se===i.id))try{await Cr(mt(ye,"notifications"),{toId:se,fromId:i.id,fromName:i.name||"Someone",fromPhotoURL:i.photoURL||null,type:Ae,read:!1,createdAt:Vs(),...gt})}catch(yt){console.error("Notification error:",yt),yt.code==="permission-denied"&&rt("Notifications blocked  check Firestore rules","error")}},ct=async()=>{K(!0);try{const se=`${i.id}_${s}`;await Cs(We(ye,"buddyRequests",se),{fromId:i.id,toId:s,status:"pending",createdAt:Vs()}),await st(s,"buddy_request"),E("pending_out"),L(se),rt("Buddy request sent!","success")}catch(se){console.error(se),rt("Failed to send request","error")}finally{K(!1)}},_n=async()=>{if(T){K(!0);try{const se=rg(i.id,s);await Cs(We(ye,"buddies",se),{user1:[i.id,s].sort()[0],user2:[i.id,s].sort()[1],connectedAt:Vs()}),await jr(We(ye,"buddyRequests",T)),await st(s,"buddy_accept"),E("buddy"),rt("Buddy added!","success")}catch(se){console.error(se),rt("Failed to accept","error")}finally{K(!1)}}},fe=async()=>{if(T){K(!0);try{await jr(We(ye,"buddyRequests",T)),E("none"),rt(b==="pending_out"?"Request cancelled":"Request declined","info")}catch(se){console.error(se),rt("Failed","error")}finally{K(!1)}}},Ct=async()=>{K(!0);try{const se=rg(i.id,s);await jr(We(ye,"buddies",se)),E("none"),rt("Buddy removed","info")}catch(se){console.error(se),rt("Failed to remove","error")}finally{K(!1)}},ht=w.useCallback(async()=>{if(s){C(!0);try{const se=await Ht(Kt(mt(ye,"posts"),xt("authorId","==",s),ku("createdAt","desc"),Eu(30)));if(Ee(se.docs.map(Ae=>({id:Ae.id,...Ae.data()}))),i){const Ae=await Ht(Kt(mt(ye,"postLikes"),xt("userId","==",i.id)));R(new Set(Ae.docs.map(gt=>gt.data().postId)))}}catch(se){console.error("Error loading journey:",se)}finally{C(!1)}}},[s,i]);w.useEffect(()=>{!$&&g&&ht()},[$,g,ht]);const Rt=async se=>{if(window.confirm("Delete this post?"))try{await jr(We(ye,"posts",se)),Ee(Ae=>Ae.filter(gt=>gt.id!==se)),rt("Post deleted","info")}catch(Ae){console.error("Delete error:",Ae),rt("Failed to delete","error")}},Je=async se=>{if(!i)return;const Ae=i.id,gt=`${se}_${Ae}`,yt=j.has(se),ut=new Set(j);yt?ut.delete(se):ut.add(se),R(ut),Ee(qe=>qe.map(nt=>nt.id===se?{...nt,likeCount:Math.max(0,(nt.likeCount||0)+(yt?-1:1))}:nt));try{if(yt)await jr(We(ye,"postLikes",gt)),await ps(We(ye,"posts",se),{likeCount:Ao(-1)});else{await Cs(We(ye,"postLikes",gt),{postId:se,userId:Ae,createdAt:Vs()}),await ps(We(ye,"posts",se),{likeCount:Ao(1)});const qe=he.find(nt=>nt.id===se);qe&&st(qe.authorId,"like",{postId:se})}}catch(qe){console.error("Like error:",qe),ht()}},Tt=async se=>{try{const Ae=await Ht(Kt(mt(ye,"postComments"),xt("postId","==",se),ku("createdAt","asc"),Eu(50)));A(gt=>({...gt,[se]:Ae.docs.map(yt=>({id:yt.id,...yt.data()}))}))}catch(Ae){console.error("Error loading comments:",Ae)}},pt=se=>{const Ae=new Set(V);Ae.has(se)?Ae.delete(se):(Ae.add(se),D[se]||Tt(se)),O(Ae)},Qt=(se,Ae)=>{const gt=se.match(/@(\w*)$/);if(gt){Oe(!0),on(Ae);const yt=Se.filter(ut=>ut.name&&ut.name.toLowerCase().includes(gt[1].toLowerCase())).slice(0,5);Yt(yt)}else Oe(!1),Yt([])},zs=(se,Ae)=>{const yt=(Le[Ae]||"").replace(/@\w*$/,`@${se.name} `);Xe(ut=>({...ut,[Ae]:yt})),Oe(!1),Yt([])},es=(se,Ae)=>{Xe(gt=>({...gt,[se]:Ae})),Qt(Ae,se)},Wt=async se=>{const Ae=(Le[se]||"").trim();if(!(!Ae||!i)){je(gt=>({...gt,[se]:!0}));try{await Cr(mt(ye,"postComments"),{postId:se,authorId:i.id,authorName:i.name||"Unknown",authorPhotoURL:i.photoURL||null,content:Ae,createdAt:Vs()}),await ps(We(ye,"posts",se),{commentCount:Ao(1)});const gt=he.find(ut=>ut.id===se);gt&&st(gt.authorId,"comment",{postId:se});const yt=Ae.match(/@[\w\s]+?(?=\s@|\s*$|[.,!?])/g);if(yt){const ut=new Set;yt.forEach(qe=>{const nt=qe.slice(1).trim(),He=Se.find(sn=>sn.name&&sn.name.toLowerCase()===nt.toLowerCase());He&&!ut.has(He.id)&&(ut.add(He.id),st(He.id,"mention",{postId:se}))})}Xe(ut=>({...ut,[se]:""})),Ee(ut=>ut.map(qe=>qe.id===se?{...qe,commentCount:(qe.commentCount||0)+1}:qe)),await Tt(se)}catch(gt){console.error("Comment error:",gt),rt("Failed to comment","error")}finally{je(gt=>({...gt,[se]:!1}))}}};return l||$||!i?a.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:a.jsx("div",{className:"prf-spinner"})}):!e||!t?null:g?a.jsx(Jo,{children:a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"prf-main",children:[a.jsxs("div",{className:"prf-hero",children:[a.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?a.jsx("img",{src:g.photoURL,alt:g.name}):a.jsx("span",{children:yh(g.name)})}),a.jsx("h1",{className:"prf-name",children:g.name}),a.jsxs("div",{className:"prf-buddy-action",children:[b==="none"&&a.jsx("button",{className:"prf-btn prf-btn-primary",onClick:ct,disabled:B,children:B?a.jsx("div",{className:"prf-btn-spinner"}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),b==="pending_out"&&a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:fe,disabled:B,children:B?a.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),b==="pending_in"&&a.jsxs("div",{className:"prf-btn-pair",children:[a.jsx("button",{className:"prf-btn prf-btn-success",onClick:_n,disabled:B,children:B?a.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),a.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:fe,disabled:B,children:"Decline"})]}),b==="buddy"&&a.jsx("button",{className:"prf-btn prf-btn-danger",onClick:Ct,disabled:B,children:B?a.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),De?a.jsx("div",{className:"prf-stats-loading",children:a.jsx("div",{className:"prf-spinner"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"prf-stats",children:[a.jsxs("div",{className:"prf-stat",children:[a.jsx("span",{className:"prf-stat-value",children:J}),a.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),a.jsxs("div",{className:"prf-stat",children:[a.jsxs("span",{className:"prf-stat-value",children:[re,a.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),a.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),_e>0&&a.jsx("div",{className:"prf-info-row",children:a.jsxs("div",{className:"prf-info-card info-habit",children:[a.jsx("div",{className:"prf-info-icon",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})}),a.jsxs("div",{className:"prf-info-text",children:[a.jsxs("span",{className:"prf-info-value",children:[_e," day",_e!==1?"s":""]}),a.jsx("span",{className:"prf-info-sub",children:"Habit Streak"})]})]})})]}),a.jsxs("div",{className:"prf-section",children:[a.jsx("h2",{className:"prf-section-title",children:`${g.name?.split(" ")[0]}'s Journey`}),ge?a.jsx("div",{className:"journey-loading",children:a.jsx("div",{className:"prf-spinner"})}):he.length===0?a.jsxs("div",{className:"journey-empty",children:[a.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),a.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),a.jsx("path",{d:"M21 15l-5-5L5 21"})]}),a.jsx("p",{children:"No posts yet"})]}):a.jsx("div",{className:"journey-list",children:he.map(se=>a.jsxs("div",{className:"journey-post",children:[a.jsxs("div",{className:"journey-post-header",children:[a.jsx("div",{className:"journey-post-avatar",children:se.authorPhotoURL?a.jsx("img",{src:se.authorPhotoURL,alt:""}):a.jsx("span",{children:yh(se.authorName)})}),a.jsxs("div",{className:"journey-post-meta",children:[a.jsx("span",{className:"journey-post-name",children:se.authorName}),a.jsx("span",{className:"journey-post-time",children:Zw(se.createdAt)})]}),se.authorId===i.id&&a.jsx("button",{className:"journey-delete-btn",onClick:()=>Rt(se.id),"aria-label":"Delete post",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M3 6h18"}),a.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),a.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})]}),se.type==="workout_summary"&&se.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:se.metadata.title}),se.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.stats.map(Ae=>`${Ae.value} ${Ae.label}`).join("    ")}),!se.metadata.stats?.length&&se.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed a workout using Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):se.type==="badge_earned"&&se.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame journey-card-logo-badge",children:(()=>{const Ae=Oo.find(gt=>gt.id===se.metadata.badgeId);return Ae?.img?a.jsx("img",{src:Ae.img,alt:se.metadata.title,className:"journey-card-logo-img"}):a.jsx("img",{src:"/Logo.webp",alt:se.metadata.title,className:"journey-card-logo-img"})})()}),a.jsx("h3",{className:"journey-card-title",children:se.metadata.title}),se.metadata.badgeDesc&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.badgeDesc}),a.jsx("p",{className:"journey-card-cta",children:"I just earned a badge on Core Buddy"}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):se.type==="habits_summary"&&se.metadata?a.jsxs("div",{className:"journey-card",children:[a.jsx("div",{className:"journey-card-logo-frame",children:a.jsx("img",{src:"/Logo.webp",alt:"MCF",className:"journey-card-logo-img"})}),a.jsx("h3",{className:"journey-card-title",children:se.metadata.title}),se.metadata.stats?.length>0&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.stats.map(Ae=>`${Ae.value} ${Ae.label}`).join("    ")}),se.metadata.subtitle&&a.jsx("p",{className:"journey-card-stats-line",children:se.metadata.subtitle}),a.jsx("p",{className:"journey-card-cta",children:"I just completed my daily habits with Core Buddy "}),a.jsx("p",{className:"journey-card-slogan",children:"Make It Count with Core Buddy"})]}):a.jsxs(a.Fragment,{children:[se.content&&a.jsx("p",{className:"journey-post-content",children:se.content}),se.imageURL&&a.jsx("div",{className:"journey-post-image",children:a.jsx("img",{src:se.imageURL,alt:"Post",loading:"lazy"})})]}),a.jsxs("div",{className:"journey-post-actions",children:[a.jsxs("button",{className:`journey-action-btn${j.has(se.id)?" liked":""}`,onClick:()=>Je(se.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:j.has(se.id)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),a.jsx("span",{children:se.likeCount||0})]}),a.jsxs("button",{className:`journey-action-btn${V.has(se.id)?" active":""}`,onClick:()=>pt(se.id),children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),a.jsx("span",{children:se.commentCount||0})]})]}),V.has(se.id)&&a.jsxs("div",{className:"journey-comments",children:[D[se.id]?.length>0?D[se.id].map(Ae=>a.jsxs("div",{className:"journey-comment",children:[a.jsx("div",{className:"journey-comment-avatar",onClick:()=>p(`/client/core-buddy/profile/${Ae.authorId}`),children:Ae.authorPhotoURL?a.jsx("img",{src:Ae.authorPhotoURL,alt:""}):a.jsx("span",{children:yh(Ae.authorName)})}),a.jsxs("div",{className:"journey-comment-body",children:[a.jsxs("div",{className:"journey-comment-bubble",children:[a.jsx("span",{className:"journey-comment-name",children:Ae.authorName}),a.jsx("span",{className:"journey-comment-text",children:Ae.content})]}),a.jsx("span",{className:"journey-comment-time",children:Zw(Ae.createdAt)})]})]},Ae.id)):a.jsx("p",{className:"journey-no-comments",children:"No comments yet"}),a.jsxs("div",{className:"journey-comment-input",style:{position:"relative"},children:[a.jsx("input",{type:"text",placeholder:"Comment... (@ to mention)",value:Le[se.id]||"",onChange:Ae=>es(se.id,Ae.target.value),onKeyDown:Ae=>{Ae.key==="Enter"&&Wt(se.id)},maxLength:300}),Ze&&Mt===se.id&&zn.length>0&&a.jsx("div",{className:"mention-dropdown mention-dropdown-up",children:zn.map(Ae=>a.jsxs("button",{className:"mention-option",onClick:()=>zs(Ae,se.id),children:[a.jsx("div",{className:"mention-option-avatar",children:Ae.photoURL?a.jsx("img",{src:Ae.photoURL,alt:""}):a.jsx("span",{children:yh(Ae.name)})}),a.jsx("span",{children:Ae.name})]},Ae.id))}),a.jsx("button",{onClick:()=>Wt(se.id),disabled:!(Le[se.id]||"").trim()||X[se.id],children:X[se.id]?a.jsx("div",{className:"journey-btn-spinner-sm"}):a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]},se.id))})]})]}),a.jsx(Kr,{}),G&&a.jsxs("div",{className:`toast-notification ${G.type}`,children:[a.jsx("span",{className:"toast-icon",children:G.type==="success"?a.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M5 13 L9 17 L19 7"})}):G.type==="error"?a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[a.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),a.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):a.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),a.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),a.jsx("span",{className:"toast-message",children:G.message})]})]})}):a.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions"})]})}),a.jsx("main",{className:"prf-main",children:a.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),a.jsx(Kr,{})]})}const ag=[{text:"Build your dashboard...",bold:"your way"},{text:"Pick what matters to you...",bold:"nothing else"},{text:"Your goals, your layout...",bold:"your rules"}],ex=[{id:"stats",label:"Stats Rings",desc:"Programme %, workouts this week, habits today",icon:"rings",defaultOn:!0},{id:"workouts",label:"Workouts",desc:"Sessions this week and total count",icon:"dumbbell",defaultOn:!0},{id:"habits",label:"Habits",desc:"Daily habit tracker dots",icon:"check",defaultOn:!0},{id:"pbs",label:"Personal Bests",desc:"Your top lifts at a glance",icon:"trophy"},{id:"nutrition",label:"Nutrition",desc:"Macro rings  protein, carbs, fats, cals",icon:"apple"},{id:"leaderboard",label:"Leaderboard",desc:"See where you rank among buddies",icon:"podium"},{id:"journey",label:"Journey",desc:"Your posts, likes and comments feed",icon:"feed"},{id:"coach",label:"Coach Message",desc:"Motivational nudge from Buddy",icon:"message",defaultOn:!0},{id:"nudge",label:"Smart Nudge",desc:"Contextual reminder of what to do next",icon:"lightbulb"}];function C5(s){switch(s){case"rings":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("circle",{cx:"12",cy:"12",r:"6"}),a.jsx("circle",{cx:"12",cy:"12",r:"2"})]});case"dumbbell":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M6.5 6.5h11v11h-11z",strokeLinejoin:"round"}),a.jsx("line",{x1:"2",y1:"12",x2:"6.5",y2:"12"}),a.jsx("line",{x1:"17.5",y1:"12",x2:"22",y2:"12"})]});case"check":return a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("polyline",{points:"20 6 9 17 4 12"})});case"trophy":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M6 9H3V6a1 1 0 0 1 1-1h2M18 9h3V6a1 1 0 0 0-1-1h-2"}),a.jsx("path",{d:"M6 5h12v7a6 6 0 0 1-12 0V5z"}),a.jsx("path",{d:"M9 21h6"}),a.jsx("path",{d:"M12 17v4"})]});case"apple":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M12 3c-1.5 0-3 1-3 1s-3-.5-4.5 1.5S3 9 3 12s1.5 6 3 8 3 3 6 3 4.5-1 6-3 3-5 3-8-1.5-4-3-6.5S13.5 3 12 3z"}),a.jsx("path",{d:"M12 3c0 0 1-2 3-2"})]});case"podium":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"2",y:"14",width:"6",height:"8",rx:"1"}),a.jsx("rect",{x:"9",y:"8",width:"6",height:"14",rx:"1"}),a.jsx("rect",{x:"16",y:"11",width:"6",height:"11",rx:"1"})]});case"medal":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"15",r:"6"}),a.jsx("path",{d:"M8.21 13.89L7 2h10l-1.21 11.89"})]});case"feed":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"3"}),a.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),a.jsx("line",{x1:"3",y1:"15",x2:"21",y2:"15"})]});case"message":return a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})});case"lightbulb":return a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 18h6"}),a.jsx("path",{d:"M10 22h4"}),a.jsx("path",{d:"M12 2a7 7 0 0 0-4 12.7V17h8v-2.3A7 7 0 0 0 12 2z"})]});default:return null}}function N5(){const s=Ys(),{clientData:e,currentUser:t,updateClientData:i,resolveClient:l}=Ar(),[u,d]=w.useState({hours:0,minutes:0,seconds:0}),[p,g]=w.useState(0),[y,b]=w.useState(0),[E,T]=w.useState(null),[L,$]=w.useState(!1),q=w.useRef(null),[B,K]=w.useState(()=>{const D=e?.dashboardWidgets;return D&&Array.isArray(D)?D:ex.filter(A=>A.defaultOn).map(A=>A.id)}),[G,Q]=w.useState(!1),[he,Ee]=w.useState(!1),[ge,C]=w.useState(null);w.useEffect(()=>{e?.photoURL&&T(e.photoURL)},[e?.photoURL]),w.useEffect(()=>{const D=()=>{const Le=new Date,Xe=new Date(Le);Xe.setHours(23,59,59,999);const X=Xe-Le;d({hours:Math.floor(X/36e5),minutes:Math.floor(X%36e5/6e4),seconds:Math.floor(X%6e4/1e3)}),g(60-Math.floor(X%6e4/1e3))};D();const A=setInterval(D,1e3);return()=>clearInterval(A)},[]),w.useEffect(()=>{const D=setInterval(()=>b(A=>(A+1)%ag.length),8e3);return()=>clearInterval(D)},[]);const j=async D=>{const A=D.target.files?.[0];if(!(!A||!e?.id)){$(!0);try{const Le=Wa(Ga,`profilePhotos/${e.id}`);await Rh(Le,A);const Xe=await Lo(Le);await ps(We(ye,"clients",e.id),{photoURL:Xe}),T(Xe),i({photoURL:Xe})}catch(Le){console.error("Photo upload error:",Le)}finally{$(!1)}}},R=D=>{Ee(!1),K(A=>A.includes(D)?A.filter(Le=>Le!==D):[...A,D])},V=(D,A)=>{Ee(!1),K(Le=>{const Xe=Le.indexOf(D);if(Xe<0)return Le;const X=Xe+A;if(X<0||X>=Le.length)return Le;const je=[...Le];return[je[Xe],je[X]]=[je[X],je[Xe]],je})},O=async()=>{Q(!0),C(null);try{const D=e||await l();if(!D?.id){C("Could not find your profile. Try refreshing."),Q(!1);return}await ps(We(ye,"clients",D.id),{dashboardWidgets:B}),i({dashboardWidgets:B}),Ee(!0)}catch(D){console.error("Save config error:",D),C("Save failed  please try again.")}finally{Q(!1)}};return a.jsx(Jo,{children:a.jsxs("div",{className:"bldr-page",children:[a.jsxs("div",{className:"bldr-container",children:[a.jsxs("div",{className:"bldr-header",children:[a.jsx("button",{className:"bldr-back",onClick:()=>s("/client/core-buddy"),children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M15 18l-6-6 6-6"})})}),a.jsx("h1",{className:"bldr-title",children:"Build Your Dashboard"})]}),a.jsxs("div",{className:"bldr-ring-container",children:[a.jsxs("div",{className:"bldr-ring",children:[a.jsx("svg",{className:"bldr-ring-svg",viewBox:"0 0 200 200",children:EE.map((D,A)=>a.jsx("line",{x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,className:`bldr-tick ${A<p?"elapsed":"remaining"}`,strokeWidth:D.thick?"3":"2"},A))}),a.jsxs("div",{className:"bldr-ring-center",children:[a.jsxs("div",{className:"bldr-ring-photo",onClick:()=>q.current?.click(),children:[a.jsx("img",{src:E||"/Logo.webp",alt:E?"Profile":"Mind Core Fitness"}),a.jsx("div",{className:`bldr-photo-overlay${L?" uploading":""}`,children:L?a.jsx("div",{className:"bldr-photo-spinner"}):a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),a.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:j,style:{display:"none"}})]}),!E&&!L&&a.jsx("div",{className:"bldr-photo-badge",onClick:()=>q.current?.click(),children:a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2.5",children:[a.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),a.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})]})]}),a.jsxs("div",{className:"bldr-countdown",children:[a.jsx("span",{className:"bldr-timer-digit",children:String(u.hours).padStart(2,"0")}),a.jsx("span",{className:"bldr-timer-colon",children:":"}),a.jsx("span",{className:"bldr-timer-digit",children:String(u.minutes).padStart(2,"0")}),a.jsx("span",{className:"bldr-timer-colon",children:":"}),a.jsx("span",{className:"bldr-timer-digit bldr-timer-sec",children:String(u.seconds).padStart(2,"0")})]}),a.jsx("span",{className:"bldr-ring-label",children:"remaining today"}),a.jsxs("p",{className:"bldr-tagline",children:[ag[y].text," ",a.jsx("strong",{children:ag[y].bold})]})]}),a.jsxs("div",{className:"bldr-section",children:[a.jsx("h2",{className:"bldr-section-title",children:"Choose Your Widgets"}),a.jsx("p",{className:"bldr-section-desc",children:"The countdown ring and your profile always stay at the top. Pick what goes below."}),a.jsx("div",{className:"bldr-widgets-list",children:ex.map(D=>{const A=B.includes(D.id),Le=B.indexOf(D.id);return a.jsxs("div",{className:`bldr-widget-card${A?" active":""}`,children:[a.jsx("div",{className:"bldr-widget-icon",children:C5(D.icon)}),a.jsxs("div",{className:"bldr-widget-info",children:[a.jsx("div",{className:"bldr-widget-label",children:D.label}),a.jsx("div",{className:"bldr-widget-desc",children:D.desc})]}),a.jsxs("div",{className:"bldr-widget-actions",children:[A&&a.jsxs("div",{className:"bldr-widget-order",children:[a.jsx("button",{className:"bldr-order-btn",onClick:()=>V(D.id,-1),disabled:Le===0,"aria-label":"Move up",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M18 15l-6-6-6 6"})})}),a.jsx("span",{className:"bldr-order-num",children:Le+1}),a.jsx("button",{className:"bldr-order-btn",onClick:()=>V(D.id,1),disabled:Le===B.length-1,"aria-label":"Move down",children:a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:a.jsx("path",{d:"M6 9l6 6 6-6"})})})]}),a.jsx("button",{className:`bldr-toggle${A?" on":""}`,onClick:()=>R(D.id),"aria-label":A?`Remove ${D.label}`:`Add ${D.label}`,children:a.jsx("div",{className:"bldr-toggle-thumb"})})]})]},D.id)})})]}),a.jsxs("div",{className:"bldr-save-wrap",children:[a.jsx("button",{className:`bldr-save-btn${he?" saved":""}`,onClick:O,disabled:G||he,children:G?"Saving...":he?"Saved":"Save Dashboard"}),ge&&a.jsx("p",{className:"bldr-save-error",children:ge}),he&&a.jsx("button",{className:"bldr-view-btn",onClick:()=>s("/client/core-buddy"),children:"View Dashboard"})]})]}),a.jsx(Kr,{active:"home"})]})})}const TE="@firebase/installations",m0="0.6.19";const jE=1e4,SE=`w:${m0}`,CE="FIS_v2",A5="https://firebaseinstallations.googleapis.com/v1",R5=3600*1e3,I5="installations",M5="Installations";const D5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qo=new $o(I5,M5,D5);function NE(s){return s instanceof hi&&s.code.includes("request-failed")}function AE({projectId:s}){return`${A5}/projects/${s}/installations`}function RE(s){return{token:s.token,requestStatus:2,expiresIn:O5(s.expiresIn),creationTime:Date.now()}}async function IE(s,e){const i=(await e.json()).error;return qo.create("request-failed",{requestName:s,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function ME({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function L5(s,{refreshToken:e}){const t=ME(s);return t.append("Authorization",P5(e)),t}async function DE(s){const e=await s();return e.status>=500&&e.status<600?s():e}function O5(s){return Number(s.replace("s","000"))}function P5(s){return`${CE} ${s}`}async function V5({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const i=AE(s),l=ME(s),u=e.getImmediate({optional:!0});if(u){const y=await u.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const d={fid:t,authVersion:CE,appId:s.appId,sdkVersion:SE},p={method:"POST",headers:l,body:JSON.stringify(d)},g=await DE(()=>fetch(i,p));if(g.ok){const y=await g.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:RE(y.authToken)}}else throw await IE("Create Installation",g)}function LE(s){return new Promise(e=>{setTimeout(e,s)})}function U5(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}const B5=/^[cdef][\w-]{21}$/,Gg="";function z5(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=F5(s);return B5.test(t)?t:Gg}catch{return Gg}}function F5(s){return U5(s).substr(0,22)}function Nf(s){return`${s.appName}!${s.appId}`}const OE=new Map;function PE(s,e){const t=Nf(s);VE(t,e),q5(t,e)}function VE(s,e){const t=OE.get(s);if(t)for(const i of t)i(e)}function q5(s,e){const t=H5();t&&t.postMessage({key:s,fid:e}),$5()}let Ro=null;function H5(){return!Ro&&"BroadcastChannel"in self&&(Ro=new BroadcastChannel("[Firebase] FID Change"),Ro.onmessage=s=>{VE(s.data.key,s.data.fid)}),Ro}function $5(){OE.size===0&&Ro&&(Ro.close(),Ro=null)}const W5="firebase-installations-database",G5=1,Ho="firebase-installations-store";let og=null;function p0(){return og||(og=sf(W5,G5,{upgrade:(s,e)=>{e===0&&s.createObjectStore(Ho)}})),og}async function Zh(s,e){const t=Nf(s),l=(await p0()).transaction(Ho,"readwrite"),u=l.objectStore(Ho),d=await u.get(t);return await u.put(e,t),await l.done,(!d||d.fid!==e.fid)&&PE(s,e.fid),e}async function UE(s){const e=Nf(s),i=(await p0()).transaction(Ho,"readwrite");await i.objectStore(Ho).delete(e),await i.done}async function Af(s,e){const t=Nf(s),l=(await p0()).transaction(Ho,"readwrite"),u=l.objectStore(Ho),d=await u.get(t),p=e(d);return p===void 0?await u.delete(t):await u.put(p,t),await l.done,p&&(!d||d.fid!==p.fid)&&PE(s,p.fid),p}async function g0(s){let e;const t=await Af(s.appConfig,i=>{const l=K5(i),u=Y5(s,l);return e=u.registrationPromise,u.installationEntry});return t.fid===Gg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function K5(s){const e=s||{fid:z5(),registrationStatus:0};return BE(e)}function Y5(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const l=Promise.reject(qo.create("app-offline"));return{installationEntry:e,registrationPromise:l}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Q5(s,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:X5(s)}:{installationEntry:e}}async function Q5(s,e){try{const t=await V5(s,e);return Zh(s.appConfig,t)}catch(t){throw NE(t)&&t.customData.serverCode===409?await UE(s.appConfig):await Zh(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function X5(s){let e=await tx(s.appConfig);for(;e.registrationStatus===1;)await LE(100),e=await tx(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await g0(s);return i||t}return e}function tx(s){return Af(s,e=>{if(!e)throw qo.create("installation-not-found");return BE(e)})}function BE(s){return J5(s)?{fid:s.fid,registrationStatus:0}:s}function J5(s){return s.registrationStatus===1&&s.registrationTime+jE<Date.now()}async function Z5({appConfig:s,heartbeatServiceProvider:e},t){const i=eL(s,t),l=L5(s,t),u=e.getImmediate({optional:!0});if(u){const y=await u.getHeartbeatsHeader();y&&l.append("x-firebase-client",y)}const d={installation:{sdkVersion:SE,appId:s.appId}},p={method:"POST",headers:l,body:JSON.stringify(d)},g=await DE(()=>fetch(i,p));if(g.ok){const y=await g.json();return RE(y)}else throw await IE("Generate Auth Token",g)}function eL(s,{fid:e}){return`${AE(s)}/${e}/authTokens:generate`}async function y0(s,e=!1){let t;const i=await Af(s.appConfig,u=>{if(!zE(u))throw qo.create("not-registered");const d=u.authToken;if(!e&&sL(d))return u;if(d.requestStatus===1)return t=tL(s,e),u;{if(!navigator.onLine)throw qo.create("app-offline");const p=iL(u);return t=nL(s,p),p}});return t?await t:i.authToken}async function tL(s,e){let t=await nx(s.appConfig);for(;t.authToken.requestStatus===1;)await LE(100),t=await nx(s.appConfig);const i=t.authToken;return i.requestStatus===0?y0(s,e):i}function nx(s){return Af(s,e=>{if(!zE(e))throw qo.create("not-registered");const t=e.authToken;return aL(t)?{...e,authToken:{requestStatus:0}}:e})}async function nL(s,e){try{const t=await Z5(s,e),i={...e,authToken:t};return await Zh(s.appConfig,i),t}catch(t){if(NE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await UE(s.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Zh(s.appConfig,i)}throw t}}function zE(s){return s!==void 0&&s.registrationStatus===2}function sL(s){return s.requestStatus===2&&!rL(s)}function rL(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+R5}function iL(s){const e={requestStatus:1,requestTime:Date.now()};return{...s,authToken:e}}function aL(s){return s.requestStatus===1&&s.requestTime+jE<Date.now()}async function oL(s){const e=s,{installationEntry:t,registrationPromise:i}=await g0(e);return i?i.catch(console.error):y0(e).catch(console.error),t.fid}async function lL(s,e=!1){const t=s;return await cL(t),(await y0(t,e)).token}async function cL(s){const{registrationPromise:e}=await g0(s);e&&await e}function uL(s){if(!s||!s.options)throw lg("App Configuration");if(!s.name)throw lg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw lg(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function lg(s){return qo.create("missing-app-config-values",{valueName:s})}const FE="installations",dL="installations-internal",hL=s=>{const e=s.getProvider("app").getImmediate(),t=uL(e),i=Wo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},fL=s=>{const e=s.getProvider("app").getImmediate(),t=Wo(e,FE).getImmediate();return{getId:()=>oL(t),getToken:l=>lL(t,l)}};function mL(){li(new Gr(FE,hL,"PUBLIC")),li(new Gr(dL,fL,"PRIVATE"))}mL();mr(TE,m0);mr(TE,m0,"esm2020");const pL="/firebase-messaging-sw.js",gL="/firebase-cloud-messaging-push-scope",qE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yL="https://fcmregistrations.googleapis.com/v1",HE="google.c.a.c_id",vL="google.c.a.c_l",bL="google.c.a.ts",wL="google.c.a.e",sx=1e4;var rx;(function(s){s[s.DATA_MESSAGE=1]="DATA_MESSAGE",s[s.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(rx||(rx={}));var Tu;(function(s){s.PUSH_RECEIVED="push-received",s.NOTIFICATION_CLICKED="notification-clicked"})(Tu||(Tu={}));function Xi(s){const e=new Uint8Array(s);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function xL(s){const e="=".repeat((4-s.length%4)%4),t=(s+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(t),l=new Uint8Array(i.length);for(let u=0;u<i.length;++u)l[u]=i.charCodeAt(u);return l}const cg="fcm_token_details_db",_L=5,ix="fcm_token_object_Store";async function kL(s){if("databases"in indexedDB&&!(await indexedDB.databases()).map(u=>u.name).includes(cg))return null;let e=null;return(await sf(cg,_L,{upgrade:async(i,l,u,d)=>{if(l<2||!i.objectStoreNames.contains(ix))return;const p=d.objectStore(ix),g=await p.index("fcmSenderId").get(s);if(await p.clear(),!!g){if(l===2){const y=g;if(!y.auth||!y.p256dh||!y.endpoint)return;e={token:y.fcmToken,createTime:y.createTime??Date.now(),subscriptionOptions:{auth:y.auth,p256dh:y.p256dh,endpoint:y.endpoint,swScope:y.swScope,vapidKey:typeof y.vapidKey=="string"?y.vapidKey:Xi(y.vapidKey)}}}else if(l===3){const y=g;e={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Xi(y.auth),p256dh:Xi(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Xi(y.vapidKey)}}}else if(l===4){const y=g;e={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Xi(y.auth),p256dh:Xi(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Xi(y.vapidKey)}}}}}})).close(),await Op(cg),await Op("fcm_vapid_details_db"),await Op("undefined"),EL(e)?e:null}function EL(s){if(!s||!s.subscriptionOptions)return!1;const{subscriptionOptions:e}=s;return typeof s.createTime=="number"&&s.createTime>0&&typeof s.token=="string"&&s.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}const TL="firebase-messaging-database",jL=1,ju="firebase-messaging-store";let ug=null;function $E(){return ug||(ug=sf(TL,jL,{upgrade:(s,e)=>{e===0&&s.createObjectStore(ju)}})),ug}async function SL(s){const e=WE(s),i=await(await $E()).transaction(ju).objectStore(ju).get(e);if(i)return i;{const l=await kL(s.appConfig.senderId);if(l)return await v0(s,l),l}}async function v0(s,e){const t=WE(s),l=(await $E()).transaction(ju,"readwrite");return await l.objectStore(ju).put(e,t),await l.done,e}function WE({appConfig:s}){return s.appId}const CL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ir=new $o("messaging","Messaging",CL);async function NL(s,e){const t=await w0(s),i=GE(e),l={method:"POST",headers:t,body:JSON.stringify(i)};let u;try{u=await(await fetch(b0(s.appConfig),l)).json()}catch(d){throw ir.create("token-subscribe-failed",{errorInfo:d?.toString()})}if(u.error){const d=u.error.message;throw ir.create("token-subscribe-failed",{errorInfo:d})}if(!u.token)throw ir.create("token-subscribe-no-token");return u.token}async function AL(s,e){const t=await w0(s),i=GE(e.subscriptionOptions),l={method:"PATCH",headers:t,body:JSON.stringify(i)};let u;try{u=await(await fetch(`${b0(s.appConfig)}/${e.token}`,l)).json()}catch(d){throw ir.create("token-update-failed",{errorInfo:d?.toString()})}if(u.error){const d=u.error.message;throw ir.create("token-update-failed",{errorInfo:d})}if(!u.token)throw ir.create("token-update-no-token");return u.token}async function RL(s,e){const i={method:"DELETE",headers:await w0(s)};try{const u=await(await fetch(`${b0(s.appConfig)}/${e}`,i)).json();if(u.error){const d=u.error.message;throw ir.create("token-unsubscribe-failed",{errorInfo:d})}}catch(l){throw ir.create("token-unsubscribe-failed",{errorInfo:l?.toString()})}}function b0({projectId:s}){return`${yL}/projects/${s}/registrations`}async function w0({appConfig:s,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function GE({p256dh:s,auth:e,endpoint:t,vapidKey:i}){const l={web:{endpoint:t,auth:e,p256dh:s}};return i!==qE&&(l.web.applicationPubKey=i),l}const IL=10080*60*1e3;async function ML(s){const e=await LL(s.swRegistration,s.vapidKey),t={vapidKey:s.vapidKey,swScope:s.swRegistration.scope,endpoint:e.endpoint,auth:Xi(e.getKey("auth")),p256dh:Xi(e.getKey("p256dh"))},i=await SL(s.firebaseDependencies);if(i){if(OL(i.subscriptionOptions,t))return Date.now()>=i.createTime+IL?DL(s,{token:i.token,createTime:Date.now(),subscriptionOptions:t}):i.token;try{await RL(s.firebaseDependencies,i.token)}catch(l){console.warn(l)}return ax(s.firebaseDependencies,t)}else return ax(s.firebaseDependencies,t)}async function DL(s,e){try{const t=await AL(s.firebaseDependencies,e),i={...e,token:t,createTime:Date.now()};return await v0(s.firebaseDependencies,i),t}catch(t){throw t}}async function ax(s,e){const i={token:await NL(s,e),createTime:Date.now(),subscriptionOptions:e};return await v0(s,i),i.token}async function LL(s,e){const t=await s.pushManager.getSubscription();return t||s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:xL(e)})}function OL(s,e){const t=e.vapidKey===s.vapidKey,i=e.endpoint===s.endpoint,l=e.auth===s.auth,u=e.p256dh===s.p256dh;return t&&i&&l&&u}function ox(s){const e={from:s.from,collapseKey:s.collapse_key,messageId:s.fcmMessageId};return PL(e,s),VL(e,s),UL(e,s),e}function PL(s,e){if(!e.notification)return;s.notification={};const t=e.notification.title;t&&(s.notification.title=t);const i=e.notification.body;i&&(s.notification.body=i);const l=e.notification.image;l&&(s.notification.image=l);const u=e.notification.icon;u&&(s.notification.icon=u)}function VL(s,e){e.data&&(s.data=e.data)}function UL(s,e){if(!e.fcmOptions&&!e.notification?.click_action)return;s.fcmOptions={};const t=e.fcmOptions?.link??e.notification?.click_action;t&&(s.fcmOptions.link=t);const i=e.fcmOptions?.analytics_label;i&&(s.fcmOptions.analyticsLabel=i)}function BL(s){return typeof s=="object"&&!!s&&HE in s}function zL(s){if(!s||!s.options)throw dg("App Configuration Object");if(!s.name)throw dg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=s;for(const i of e)if(!t[i])throw dg(i);return{appName:s.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function dg(s){return ir.create("missing-app-config-values",{valueName:s})}class FL{constructor(e,t,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const l=zL(e);this.firebaseDependencies={app:e,appConfig:l,installations:t,analyticsProvider:i}}_delete(){return Promise.resolve()}}async function qL(s){try{s.swRegistration=await navigator.serviceWorker.register(pL,{scope:gL}),s.swRegistration.update().catch(()=>{}),await HL(s.swRegistration)}catch(e){throw ir.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function HL(s){return new Promise((e,t)=>{const i=setTimeout(()=>t(new Error(`Service worker not registered after ${sx} ms`)),sx),l=s.installing||s.waiting;s.active?(clearTimeout(i),e()):l?l.onstatechange=u=>{u.target?.state==="activated"&&(l.onstatechange=null,clearTimeout(i),e())}:(clearTimeout(i),t(new Error("No incoming service worker found.")))})}async function $L(s,e){if(!e&&!s.swRegistration&&await qL(s),!(!e&&s.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ir.create("invalid-sw-registration");s.swRegistration=e}}async function WL(s,e){e?s.vapidKey=e:s.vapidKey||(s.vapidKey=qE)}async function KE(s,e){if(!navigator)throw ir.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ir.create("permission-blocked");return await WL(s,e?.vapidKey),await $L(s,e?.serviceWorkerRegistration),ML(s)}async function GL(s,e,t){const i=KL(e);(await s.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:t[HE],message_name:t[vL],message_time:t[bL],message_device_time:Math.floor(Date.now()/1e3)})}function KL(s){switch(s){case Tu.NOTIFICATION_CLICKED:return"notification_open";case Tu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function YL(s,e){const t=e.data;if(!t.isFirebaseMessaging)return;s.onMessageHandler&&t.messageType===Tu.PUSH_RECEIVED&&(typeof s.onMessageHandler=="function"?s.onMessageHandler(ox(t)):s.onMessageHandler.next(ox(t)));const i=t.data;BL(i)&&i[wL]==="1"&&await GL(s,t.messageType,i)}const lx="@firebase/messaging",cx="0.12.23";const QL=s=>{const e=new FL(s.getProvider("app").getImmediate(),s.getProvider("installations-internal").getImmediate(),s.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>YL(e,t)),e},XL=s=>{const e=s.getProvider("messaging").getImmediate();return{getToken:i=>KE(e,i)}};function JL(){li(new Gr("messaging",QL,"PUBLIC")),li(new Gr("messaging-internal",XL,"PRIVATE")),mr(lx,cx),mr(lx,cx,"esm2020")}async function ZL(){try{await zx()}catch{return!1}return typeof window<"u"&&Bx()&&MC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function eO(s=Au()){return ZL().then(e=>{if(!e)throw ir.create("unsupported-browser")},e=>{throw ir.create("indexed-db-unsupported")}),Wo(dn(s),"messaging").getImmediate()}async function tO(s,e){return s=dn(s),KE(s,e)}JL();const nO="BNVNdqAPfJYhKBjF9qd-YPEMYIbecZLWiOGUF5tOBfNuv6P1iXgJS6IoS9dHLM5gp-WMrExfir0pCpkMzOdTWKY";let hg=null;function sO(){if(!hg)try{hg=eO(Au())}catch{return null}return hg}function Kg(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}function ux(){return"Notification"in window?Notification.permission:"denied"}function rO(s){const e=Object.getOwnPropertyDescriptor(Notification,"permission");Object.defineProperty(Notification,"permission",{get:()=>"granted",configurable:!0});const t=()=>{e?Object.defineProperty(Notification,"permission",e):delete Notification.permission};try{const i=s();return i&&typeof i.then=="function"?i.then(l=>(t(),l),l=>{throw t(),l}):(t(),i)}catch(i){throw t(),i}}async function iO(s){if(!Kg())return null;try{const e=await Notification.requestPermission(),t=sO();if(!t)return console.error("Push: could not initialise Firebase Messaging"),null;const i=await navigator.serviceWorker.ready,l=e!=="granted";let u=null;const d=3;for(let p=1;p<=d;p++){try{const g=()=>tO(t,{vapidKey:nO,serviceWorkerRegistration:i});if(u=l?await rO(g):await g(),u)break}catch(g){console.warn(`Push getToken attempt ${p}/${d} failed:`,g)}p<d&&await new Promise(g=>setTimeout(g,1500*p))}return u&&s&&await ps(We(ye,"clients",s),{fcmTokens:k6(u)}),u}catch(e){return console.error("Push permission request failed:",e),null}}async function aO(s,e){if(!(!e||!s))try{await ps(We(ye,"clients",s),{fcmTokens:E6(e)})}catch(t){console.error("Token revoke failed:",t)}}const oO=[{key:"buddy_request",label:"Buddy requests",desc:"When someone sends you a buddy request"},{key:"buddy_accept",label:"Buddy accepted",desc:"When your buddy request is accepted"},{key:"like",label:"Likes",desc:"When someone likes your post"},{key:"comment",label:"Comments",desc:"When someone comments on your post"},{key:"mention",label:"Mentions",desc:"When someone @mentions you"}];function lO(){const{currentUser:s,clientData:e,updateClientData:t,logout:i,loading:l}=Ar(),{isDark:u,toggleTheme:d}=Mi(),p=Ys(),[g,y]=w.useState(!1),[b,E]=w.useState(null),[T,L]=w.useState(!1),[$,q]=w.useState("default"),[B,K]=w.useState({buddy_request:!0,buddy_accept:!0,like:!0,comment:!0,mention:!0}),[G,Q]=w.useState(null),he=w.useCallback((C,j="info")=>{Q({message:C,type:j}),setTimeout(()=>Q(null),4e3)},[]);w.useEffect(()=>{!l&&!s&&p("/")},[l,s,p]),w.useEffect(()=>{if(!e)return;const C=e.notificationPrefs;C&&K(R=>({...R,...C}));const j=e.fcmTokens||[];j.length>0&&(y(!0),E(j[j.length-1])),q(ux())},[e]);const Ee=async()=>{if(e){L(!0);try{if(g)b&&await aO(e.id,b),y(!1),E(null),t({fcmTokens:[]}),he("Push notifications disabled","info");else{if(!Kg()){he("Push notifications are not supported on this device","error");return}const C=await iO(e.id),j=ux();q(j),C?(y(!0),E(C),t({fcmTokens:[...e.fcmTokens||[],C]}),he("Push notifications enabled!","success")):he(j==="denied"?"Notifications blocked  enable them in your device settings, remove the app from your home screen and re-add it":j==="granted"?"Permission granted but setup failed  try closing and reopening the app, then toggle again":"Could not enable notifications  please try again","error")}}catch(C){console.error("Push toggle failed:",C),he("Something went wrong  please try again","error")}finally{L(!1)}}},ge=async C=>{if(!e)return;const j={...B,[C]:!B[C]};K(j);try{await ps(We(ye,"clients",e.id),{notificationPrefs:j}),t({notificationPrefs:j})}catch(R){console.error("Failed to save pref:",R),K(V=>({...V,[C]:!V[C]})),he("Failed to save preference","error")}};return l||!e?a.jsx("div",{className:"cb-loading",children:a.jsx("div",{className:"cb-loading-spinner"})}):a.jsxs("div",{className:"cb-settings","data-theme":u?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Back",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 12H5"}),a.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsxs("div",{className:"header-actions",children:[a.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),a.jsx("button",{onClick:i,"aria-label":"Log out",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),a.jsx("polyline",{points:"16 17 21 12 16 7"}),a.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),a.jsxs("main",{className:"settings-main",children:[a.jsx("h1",{className:"settings-title",children:"Settings"}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),a.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),"Notifications"]}),Kg()?a.jsxs("div",{className:"settings-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Push notifications"}),a.jsx("span",{className:"settings-row-desc",children:"Receive notifications even when the app is closed"})]}),a.jsx("button",{className:`settings-toggle${g?" on":""}${T?" loading":""}`,onClick:Ee,disabled:T,"aria-label":"Toggle push notifications",children:a.jsx("span",{className:"settings-toggle-knob"})})]}):a.jsx("p",{className:"settings-hint",children:"Add the app to your home screen for background push notifications. In-app notifications still work below."}),a.jsxs("div",{className:"settings-sub-section",children:[a.jsx("span",{className:"settings-sub-title",children:"Notify me about"}),oO.map(C=>a.jsxs("div",{className:"settings-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:C.label}),a.jsx("span",{className:"settings-row-desc",children:C.desc})]}),a.jsx("button",{className:`settings-toggle${B[C.key]?" on":""}`,onClick:()=>ge(C.key),"aria-label":`Toggle ${C.label}`,children:a.jsx("span",{className:"settings-toggle-knob"})})]},C.key))]})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),a.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),"Account"]}),a.jsxs("div",{className:"settings-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Dark mode"}),a.jsx("span",{className:"settings-row-desc",children:"Switch between light and dark themes"})]}),a.jsx("button",{className:`settings-toggle${u?" on":""}`,onClick:d,"aria-label":"Toggle dark mode",children:a.jsx("span",{className:"settings-toggle-knob"})})]}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Email"}),a.jsx("span",{className:"settings-row-desc",children:e?.email||""})]})}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Plan"}),a.jsx("span",{className:"settings-row-desc",style:{textTransform:"capitalize"},children:e?.tier||"free"})]})})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Support & Feedback"]}),a.jsxs("a",{href:"mailto:ross@mindcorefitness.com?subject=Core%20Buddy%20Bug%20Report",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Report a Bug"}),a.jsx("span",{className:"settings-row-desc",children:"Found something not working? Let us know"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]}),a.jsxs("a",{href:"mailto:ross@mindcorefitness.com?subject=Core%20Buddy%20Feature%20Request",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Request a Feature"}),a.jsx("span",{className:"settings-row-desc",children:"Have an idea to improve Core Buddy?"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]}),a.jsxs("a",{href:"mailto:ross@mindcorefitness.com?subject=Core%20Buddy%20Feedback",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"General Feedback"}),a.jsx("span",{className:"settings-row-desc",children:"We'd love to hear from you"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M5 12h14"}),a.jsx("path",{d:"M12 5l7 7-7 7"})]})]}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Contact Email"}),a.jsx("span",{className:"settings-row-desc",children:"ross@mindcorefitness.com"})]})})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),a.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Legal"]}),a.jsxs("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Privacy Policy"}),a.jsx("span",{className:"settings-row-desc",children:"How we collect, use, and protect your data"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]}),a.jsxs("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Terms & Conditions"}),a.jsx("span",{className:"settings-row-desc",children:"Terms of use for Core Buddy"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]}),a.jsxs("section",{className:"settings-section",children:[a.jsxs("h2",{className:"settings-section-title",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),a.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"About"]}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Core Buddy"}),a.jsx("span",{className:"settings-row-desc",children:"Food. Habits. Move."})]})}),a.jsx("div",{className:"settings-row",children:a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Version"}),a.jsx("span",{className:"settings-row-desc",children:"1.0.0"})]})}),a.jsxs("a",{href:"/core-buddy",target:"_blank",rel:"noopener noreferrer",className:"settings-link-row",children:[a.jsxs("div",{className:"settings-row-text",children:[a.jsx("span",{className:"settings-row-label",children:"Visit Our Website"}),a.jsx("span",{className:"settings-row-desc",children:"mindcorefitness.com"})]}),a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),a.jsx("polyline",{points:"15 3 21 3 21 9"}),a.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]})]}),G&&a.jsx("div",{className:`settings-toast ${G.type}`,children:G.message}),a.jsx(Kr,{active:"home"})]})}const vh=[{id:"starter_streak",name:"Starter Streak",description:"Complete 5 workouts in 7 days",goal:5,duration:7,type:"workouts",difficulty:"easy",icon:"flame",premium:!0},{id:"consistency_king",name:"Consistency King",description:"Complete 12 workouts in 30 days",goal:12,duration:30,type:"workouts",difficulty:"medium",icon:"crown",premium:!0},{id:"thirty_in_thirty",name:"30 in 30",description:"Complete 30 workouts in 30 days",goal:30,duration:30,type:"workouts",difficulty:"hard",icon:"fire",premium:!0},{id:"minute_master",name:"Minute Master",description:"Train for 300 total minutes in 30 days",goal:300,duration:30,type:"minutes",difficulty:"medium",icon:"clock",premium:!0},{id:"habit_machine",name:"Habit Machine",description:"Hit all daily habits for 7 days straight",goal:7,duration:7,type:"habits_perfect",difficulty:"medium",icon:"check",premium:!0},{id:"iron_will",name:"Iron Will",description:"Work out every day for 14 days straight",goal:14,duration:14,type:"streak",difficulty:"hard",icon:"shield",premium:!0}];function fg({icon:s,size:e=28}){const t={width:e,height:e};switch(s){case"flame":return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"})});case"crown":return a.jsxs("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7z"}),a.jsx("path",{d:"M3 20h18"})]});case"fire":return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 12c2-2.96 0-7-1-8 0 3.038-1.773 4.741-3 6-1.226 1.26-2 3.24-2 5a6 6 0 1 0 12 0c0-1.532-1.056-3.94-2-5-1.786 3-2.791 3-4 2z"})});case"clock":return a.jsxs("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("circle",{cx:"12",cy:"12",r:"10"}),a.jsx("path",{d:"M12 6v6l4 2"})]});case"check":return a.jsxs("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),a.jsx("path",{d:"M22 4L12 14.01l-3-3"})]});case"shield":return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})});default:return a.jsx("svg",{style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("circle",{cx:"12",cy:"12",r:"10"})})}}function dx({progress:s,goal:e,size:t=160,stroke:i=10,label:l}){const u=Math.min(s/e,1),d=(t-i)/2,p=2*Math.PI*d,g=p*(1-u);return a.jsxs("div",{className:"ch-ring-wrap",children:[a.jsxs("svg",{width:t,height:t,className:"ch-ring-svg",children:[a.jsx("circle",{cx:t/2,cy:t/2,r:d,fill:"none",stroke:"var(--ch-ring-bg)",strokeWidth:i}),a.jsx("circle",{cx:t/2,cy:t/2,r:d,fill:"none",stroke:"var(--color-primary)",strokeWidth:i,strokeDasharray:p,strokeDashoffset:g,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.6s ease",transform:"rotate(-90deg)",transformOrigin:"50% 50%"}})]}),a.jsxs("div",{className:"ch-ring-centre",children:[a.jsxs("span",{className:"ch-ring-num",children:[s,a.jsxs("span",{className:"ch-ring-slash",children:[" / ",e]})]}),l&&a.jsx("span",{className:"ch-ring-label",children:l})]})]})}const hx={easy:"#34C759",medium:"#FF9500",hard:"#FF3B30"};async function cO(s,e,t){const i=t instanceof At?t:At.fromDate(new Date(t)),l=At.now();switch(s.type){case"workouts":{const u=Kt(mt(ye,"workoutLogs"),xt("clientId","==",e),xt("completedAt",">=",i),xt("completedAt","<=",l));return(await Ht(u)).size}case"minutes":{const u=Kt(mt(ye,"workoutLogs"),xt("clientId","==",e),xt("completedAt",">=",i),xt("completedAt","<=",l));return(await Ht(u)).docs.reduce((p,g)=>p+(g.data().duration||0),0)}case"habits_perfect":{const u=i.toDate().toISOString().slice(0,10),d=new Date().toISOString().slice(0,10),p=Kt(mt(ye,"habitLogs"),xt("clientId","==",e));return(await Ht(p)).docs.filter(y=>{const b=y.data().date;if(b<u||b>d)return!1;const E=y.data().habits||{};return Object.values(E).length>0&&Object.values(E).every(T=>T===!0)}).length}case"streak":{const u=Kt(mt(ye,"workoutLogs"),xt("clientId","==",e),xt("completedAt",">=",i),xt("completedAt","<=",l)),d=await Ht(u),p=new Set(d.docs.map(E=>E.data().completedAt.toDate().toISOString().slice(0,10)));let g=0;const y=new Date(i.toDate()),b=new Date;for(;p.has(y.toISOString().slice(0,10))&&y<=b;)g++,y.setDate(y.getDate()+1);return g}default:return 0}}function uO(){const{currentUser:s,clientData:e,loading:t}=Ar(),{isDark:i,toggleTheme:l}=Mi(),{isPremium:u}=ic(),d=Ys(),[p,g]=w.useState(null),[y,b]=w.useState(null),[E,T]=w.useState(0),[L,$]=w.useState(0),[q,B]=w.useState(!0),[K,G]=w.useState(!1),[Q,he]=w.useState(null),[Ee,ge]=w.useState(null),[C,j]=w.useState(!1),[R,V]=w.useState(null),O=w.useCallback((Ce,J="info")=>{ge({message:Ce,type:J}),setTimeout(()=>ge(null),4e3)},[]);w.useEffect(()=>{!t&&!s&&d("/")},[t,s,d]);const D=w.useCallback(async()=>{if(e){B(!0);try{const Ce=Kt(mt(ye,"userChallenges"),xt("clientId","==",e.id),xt("status","==","active")),J=await Ht(Ce);if(J.empty)g(null),b(null);else{const we=J.docs[0],_e={id:we.id,...we.data()},xe=vh.find(Se=>Se.id===_e.challengeId);if(_e.endDate.toDate()<new Date)await ps(We(ye,"userChallenges",we.id),{status:"failed"}),g(null),b(null),O("Challenge expired  time ran out","error");else if(g(_e),b(xe),xe){const Se=await cO(xe,e.id,_e.startDate);if(T(Se),Se>=xe.goal&&_e.status==="active"){if(await ps(We(ye,"userChallenges",we.id),{status:"completed",completedAt:Vs()}),j(!0),g(Fe=>Fe?{...Fe,status:"completed"}:null),!_e.badgeAwarded){const Fe=Oo.find(Ze=>Ze.id===xe.id);if(Fe)try{const Ze=We(ye,"coreBuddyBadges",e.id),Oe=await Us(Ze),Mt=Oe.exists()?Oe.data().earned||[]:[];if(!Mt.some(on=>on.id===Fe.id)){const on={id:Fe.id,earnedAt:new Date().toISOString()};Oe.exists()?await ps(Ze,{earned:[...Mt,on]}):await Cs(Ze,{earned:[on]})}await ps(We(ye,"userChallenges",we.id),{badgeAwarded:!0}),await Cr(mt(ye,"posts"),{authorId:e.id,authorName:e.name||"Anonymous",authorPhotoURL:e.photoURL||null,type:"badge_earned",metadata:{title:Fe.name,badgeDesc:Fe.desc,badgeId:Fe.id},createdAt:Vs(),likeCount:0,commentCount:0}),V(Fe)}catch(Ze){console.error("Badge award failed:",Ze)}}typeof fbq=="function"&&fbq("trackCustom","ChallengeCompleted",{challenge_name:xe.name,challenge_type:xe.type,duration_days:xe.duration})}}}const P=Kt(mt(ye,"userChallenges"),xt("clientId","==",e.id),xt("status","==","completed")),re=await Ht(P);$(re.size)}catch(Ce){console.error("Failed to load challenges:",Ce)}finally{B(!1)}}},[e,O]);w.useEffect(()=>{D()},[D]);const A=async Ce=>{if(!(!e||K)){G(!0);try{const J=vh.find(xe=>xe.id===Ce);if(!J)return;const P=Kt(mt(ye,"userChallenges"),xt("clientId","==",e.id),xt("status","==","active"));if(!(await Ht(P)).empty){he(null),O("You already have an active challenge","info"),await D();return}const we=At.now(),_e=At.fromDate(new Date(Date.now()+J.duration*864e5));await Cr(mt(ye,"userChallenges"),{clientId:e.id,challengeId:Ce,startDate:we,endDate:_e,status:"active",completedAt:null,badgeAwarded:!1,createdAt:Vs()}),he(null),O(`${J.name} started  let's go!`,"success"),await D()}catch(J){console.error("Start challenge failed:",J),J?.code==="permission-denied"?O("Permission denied  please re-login and try again","error"):O("Something went wrong  try again","error")}finally{G(!1)}}},Le=async()=>{if(!(!p||K)){G(!0);try{await ps(We(ye,"userChallenges",p.id),{status:"failed"}),g(null),b(null),T(0),he(null),O("Challenge abandoned","info"),await D()}catch(Ce){console.error("Give up failed:",Ce),O("Something went wrong","error")}finally{G(!1)}}},Xe=p?.endDate?Math.max(0,Math.ceil((p.endDate.toDate()-new Date)/864e5)):0,X=()=>{if(!y||!p)return"";const Ce=Math.max(1,Math.ceil((Date.now()-p.startDate.toDate())/864e5)),J=y.goal/y.duration*Ce;return E>=J*1.15?"Ahead":E>=J*.85?"On Track":"Behind"};if(t||!e)return a.jsx("div",{className:"ch-loading",children:a.jsx("div",{className:"ch-spinner"})});const je=p&&p.status==="active"&&y,De=C||p&&p.status==="completed";return a.jsxs("div",{className:"ch-page","data-theme":i?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Back",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 12H5"}),a.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:l,"aria-label":"Toggle theme",children:i?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"ch-main",children:[a.jsx("h1",{className:"ch-title",children:"Challenges"}),a.jsx("p",{className:"ch-subtitle",children:"Push yourself with timed fitness challenges"}),q?a.jsx("div",{className:"ch-loading",children:a.jsx("div",{className:"ch-spinner"})}):De?a.jsxs("div",{className:"ch-completed-section",children:[a.jsx(dx,{progress:y?.goal||1,goal:y?.goal||1,label:"Complete"}),a.jsx("div",{className:"ch-completed-pulse"}),a.jsx("h2",{className:"ch-completed-heading",children:"Challenge Complete!"}),a.jsx("p",{className:"ch-completed-name",children:y?.name}),a.jsxs("p",{className:"ch-completed-count",children:[L+(C?1:0)," challenge",L!==0?"s":""," completed"]}),a.jsx("button",{className:"ch-btn ch-btn-primary",onClick:()=>{j(!1),g(null),b(null),D()},children:"Choose Next Challenge"})]}):je?a.jsxs("div",{className:"ch-active-section",children:[a.jsx(dx,{progress:E,goal:y.goal,label:y.type==="minutes"?"minutes":y.type==="streak"?"day streak":y.type==="habits_perfect"?"perfect days":"workouts"}),a.jsxs("div",{className:"ch-active-info",children:[a.jsxs("div",{className:"ch-info-row",children:[a.jsxs("div",{className:"ch-info-item",children:[a.jsx("span",{className:"ch-info-val",children:Xe}),a.jsx("span",{className:"ch-info-key",children:"days left"})]}),a.jsx("div",{className:`ch-pace ch-pace-${X().toLowerCase().replace(" ","")}`,children:X()})]}),a.jsx("h2",{className:"ch-active-name",children:y.name}),a.jsx("p",{className:"ch-active-desc",children:y.description})]}),a.jsx("button",{className:"ch-give-up",onClick:()=>he("giveup"),children:"Give Up"}),a.jsxs("div",{className:"ch-browse-locked",children:[a.jsx("p",{className:"ch-browse-locked-note",children:"Complete your current challenge to start a new one"}),a.jsx("div",{className:"ch-grid ch-grid-dimmed",children:vh.filter(Ce=>Ce.id!==y.id).map(Ce=>a.jsxs("div",{className:"ch-card ch-card-locked",children:[a.jsx("div",{className:"ch-card-icon",children:a.jsx(fg,{icon:Ce.icon,size:24})}),a.jsxs("div",{className:"ch-card-body",children:[a.jsx("h3",{children:Ce.name}),a.jsx("p",{children:Ce.description})]})]},Ce.id))})]})]}):a.jsxs("div",{className:"ch-browse-section",children:[!u&&a.jsxs("div",{className:"ch-premium-banner",children:[a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),a.jsx("span",{children:"Challenges are a premium feature"}),a.jsx("button",{className:"ch-upgrade-link",onClick:()=>d("/upgrade"),children:"Upgrade"})]}),a.jsx("div",{className:"ch-grid",children:vh.map(Ce=>a.jsxs("button",{className:`ch-card${u?"":" ch-card-gated"}`,onClick:()=>u?he(Ce):d("/upgrade"),children:[!u&&a.jsx("div",{className:"ch-lock-overlay",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),a.jsx("div",{className:"ch-card-icon",children:a.jsx(fg,{icon:Ce.icon})}),a.jsxs("div",{className:"ch-card-body",children:[a.jsx("h3",{children:Ce.name}),a.jsx("p",{children:Ce.description}),a.jsxs("div",{className:"ch-card-tags",children:[a.jsxs("span",{className:"ch-tag ch-tag-dur",children:[Ce.duration," days"]}),a.jsx("span",{className:"ch-tag ch-tag-diff",style:{color:hx[Ce.difficulty]},children:Ce.difficulty})]})]}),a.jsx("svg",{className:"ch-card-arrow",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M9 18l6-6-6-6"})})]},Ce.id))})]})]}),Q&&Q!=="giveup"&&a.jsx("div",{className:"ch-modal-backdrop",onClick:()=>!K&&he(null),children:a.jsxs("div",{className:"ch-modal",onClick:Ce=>Ce.stopPropagation(),children:[a.jsx("div",{className:"ch-modal-icon",children:a.jsx(fg,{icon:Q.icon,size:36})}),a.jsx("h2",{children:Q.name}),a.jsx("p",{children:Q.description}),a.jsxs("div",{className:"ch-modal-details",children:[a.jsxs("span",{children:[Q.duration," days"]}),a.jsx("span",{style:{color:hx[Q.difficulty]},children:Q.difficulty})]}),a.jsx("button",{className:"ch-btn ch-btn-primary",onClick:()=>A(Q.id),disabled:K,children:K?"Starting...":"Start Challenge"}),a.jsx("button",{className:"ch-btn ch-btn-secondary",onClick:()=>he(null),disabled:K,children:"Cancel"})]})}),Q==="giveup"&&a.jsx("div",{className:"ch-modal-backdrop",onClick:()=>!K&&he(null),children:a.jsxs("div",{className:"ch-modal",onClick:Ce=>Ce.stopPropagation(),children:[a.jsx("h2",{children:"Give Up?"}),a.jsx("p",{children:"Your progress will be lost and this challenge will be marked as failed."}),a.jsx("button",{className:"ch-btn ch-btn-danger",onClick:Le,disabled:K,children:K?"Abandoning...":"Yes, Give Up"}),a.jsx("button",{className:"ch-btn ch-btn-secondary",onClick:()=>he(null),disabled:K,children:"Keep Going"})]})}),R&&a.jsxs("div",{className:"cb-celebration-overlay",onClick:()=>V(null),children:[a.jsx("div",{className:"cb-confetti-container",children:Array.from({length:24}).map((Ce,J)=>a.jsx("div",{className:"cb-confetti-piece",style:{"--angle":`${J/24*360}deg`,"--distance":`${80+Math.random()*60}px`,"--drift":`${(Math.random()-.5)*40}px`,"--size":`${4+Math.random()*4}px`,"--color":["#FFD700","#FF6B6B","#4ECDC4","#A1C4FD","#F093FB","#FFECD2"][J%6],"--delay":`${Math.random()*.3}s`}},J))}),a.jsxs("div",{className:"cb-celebration-content",children:[a.jsx("div",{className:"cb-celebration-glow"}),R.img&&a.jsx("img",{src:R.img,alt:R.name,className:"cb-celebration-badge-img"}),a.jsx("h2",{className:"cb-celebration-title",children:"Badge Unlocked!"}),a.jsx("p",{className:"cb-celebration-name",children:R.name}),a.jsx("p",{className:"cb-celebration-desc",children:R.desc}),a.jsx("button",{className:"cb-celebration-dismiss",children:"Tap to dismiss"})]})]}),Ee&&a.jsx("div",{className:`ch-toast ch-toast-${Ee.type}`,children:Ee.message}),a.jsx(Kr,{})]})}const dO={workouts:"Workouts",streaks:"Streaks",pbs:"Personal Bests",nutrition:"Nutrition",leaderboard:"Leaderboard",habits:"Habits",challenges:"Challenges"},hO=["workouts","streaks","pbs","nutrition","leaderboard","habits","challenges"];function fO(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Ar(),{isDark:l,toggleTheme:u}=Mi(),d=Ys(),[p,g]=w.useState(new Set),[y,b]=w.useState({}),[E,T]=w.useState(!0),[L,$]=w.useState(null);w.useEffect(()=>{!i&&(!s||!e)&&d("/")},[s,e,i,d]),w.useEffect(()=>{t&&(async()=>{T(!0);try{const K=await Us(We(ye,"coreBuddyBadges",t.id));if(K.exists()){const G=K.data().earned||[];g(new Set(G.map(he=>he.id)));const Q={};G.forEach(he=>{Q[he.id]=he}),b(Q)}}catch(K){console.error("Failed to load badges:",K)}finally{T(!1)}})()},[t]);const q=hO.map(K=>({key:K,label:dO[K],badges:Oo.filter(G=>G.category===K)})).filter(K=>K.badges.length>0),B=Oo.filter(K=>p.has(K.id)).length;return i||!t?a.jsx("div",{className:"bdg-loading",children:a.jsx("div",{className:"bdg-spinner"})}):a.jsxs("div",{className:"bdg-page","data-theme":l?"dark":"light",children:[a.jsx("header",{className:"client-header",children:a.jsxs("div",{className:"header-content",children:[a.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Back",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M19 12H5"}),a.jsx("path",{d:"M12 19l-7-7 7-7"})]})}),a.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),a.jsx("div",{className:"header-actions",children:a.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("circle",{cx:"12",cy:"12",r:"5"}),a.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:a.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a.jsxs("main",{className:"bdg-main",children:[a.jsx("h1",{className:"bdg-title",children:"Badges"}),a.jsxs("p",{className:"bdg-subtitle",children:[B," / ",Oo.length," earned"]}),E?a.jsx("div",{className:"bdg-loading-inline",children:a.jsx("div",{className:"bdg-spinner"})}):q.map(K=>a.jsxs("div",{className:"bdg-category",children:[a.jsx("h2",{className:"bdg-category-title",children:K.label}),a.jsx("div",{className:"bdg-grid",children:K.badges.map(G=>{const Q=p.has(G.id);return a.jsxs("button",{className:`bdg-item${Q?" earned":" locked"}`,onClick:()=>$(G),children:[a.jsxs("div",{className:"bdg-img-wrap",children:[G.img?a.jsx("img",{src:G.img,alt:G.name,className:"bdg-img"}):a.jsx("div",{className:"bdg-img-placeholder",children:a.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M9 14l-4 8h14l-4-8"})]})}),!Q&&a.jsx("div",{className:"bdg-lock-overlay",children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})})]}),a.jsx("span",{className:"bdg-name",children:G.name})]},G.id)})})]},K.key))]}),L&&a.jsx("div",{className:"bdg-modal-backdrop",onClick:()=>$(null),children:a.jsxs("div",{className:"bdg-modal",onClick:K=>K.stopPropagation(),children:[a.jsx("div",{className:`bdg-modal-img-wrap${p.has(L.id)?" earned":" locked"}`,children:L.img?a.jsx("img",{src:L.img,alt:L.name,className:"bdg-modal-img"}):a.jsx("div",{className:"bdg-modal-placeholder",children:a.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[a.jsx("circle",{cx:"12",cy:"8",r:"6"}),a.jsx("path",{d:"M9 14l-4 8h14l-4-8"})]})})}),a.jsx("h2",{className:"bdg-modal-name",children:L.name}),a.jsx("p",{className:"bdg-modal-desc",children:L.desc}),p.has(L.id)?a.jsxs("span",{className:"bdg-modal-status earned",children:[a.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:a.jsx("path",{d:"M5 13l4 4L19 7"})}),"Earned",y[L.id]?.earnedAt?`  ${new Date(y[L.id].earnedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:""]}):a.jsxs("span",{className:"bdg-modal-status locked",children:[a.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),a.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),"Locked"]}),a.jsx("button",{className:"bdg-modal-close",onClick:()=>$(null),children:"Close"})]})}),a.jsx(Kr,{active:"badges"})]})}const mO=w.lazy(()=>Ks(()=>import("./Dashboard-VoLIOyCl.js"),__vite__mapDeps([0,1,2]))),pO=w.lazy(()=>Ks(()=>import("./AddClient-AfPLLu-M.js"),__vite__mapDeps([3,4]))),gO=w.lazy(()=>Ks(()=>import("./ClientDashboard-Cmn8mQ4t.js"),__vite__mapDeps([5,1,6]))),yO=w.lazy(()=>Ks(()=>import("./ClientForms-DNhVRTzv.js"),__vite__mapDeps([7,8,6]))),vO=w.lazy(()=>Ks(()=>import("./ClientTools-CSgcAn5S.js"),__vite__mapDeps([9,10,6]))),bO=w.lazy(()=>Ks(()=>import("./MacroCalculator-WuldINl2.js"),__vite__mapDeps([11,10,6]))),wO=w.lazy(()=>Ks(()=>import("./ProteinSnacks-CyjUEn9F.js"),__vite__mapDeps([12,10,6]))),xO=w.lazy(()=>Ks(()=>import("./DailyMotivation-CTm9ZN-a.js"),__vite__mapDeps([13,10,6]))),_O=w.lazy(()=>Ks(()=>import("./CircuitDashboard-CLopeKLu.js"),__vite__mapDeps([14,15]))),kO=w.lazy(()=>Ks(()=>import("./CircuitBooking-ClBoT8S-.js"),__vite__mapDeps([16,17,15]))),EO=w.lazy(()=>Ks(()=>import("./PersonalBests-KDcOqDl4.js"),__vite__mapDeps([18,19,6]))),TO=w.lazy(()=>Ks(()=>import("./Leaderboard-C58vZygU.js"),__vite__mapDeps([20,21]))),jO=w.lazy(()=>Ks(()=>import("./UpgradePage-CdSGCZ5R.js"),__vite__mapDeps([22,23,24]))),SO=w.lazy(()=>Ks(()=>import("./SignUp-CgWLfGPs.js"),[])),CO=w.lazy(()=>Ks(()=>import("./Onboarding-nfdr4ztD.js"),__vite__mapDeps([25,23,26])));function NO({children:s}){const{pathname:e}=Ii();return w.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),w.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function AO(){const s=Ys();return w.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function RO(){return a.jsx(QD,{children:a.jsx(YD,{children:a.jsx(t3,{children:a.jsxs(iC,{basename:"/login",children:[a.jsx(AO,{}),a.jsx(NO,{children:a.jsx(w.Suspense,{fallback:a.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:a.jsx("div",{style:{width:36,height:36,border:"3px solid var(--color-primary-light)",borderTopColor:"var(--color-primary)",borderRadius:"50%",animation:"app-spin .7s linear infinite"}})}),children:a.jsxs(DS,{children:[a.jsx(xn,{path:"/",element:a.jsx(r3,{})}),a.jsx(xn,{path:"/dashboard",element:a.jsx(mO,{})}),a.jsx(xn,{path:"/add-client",element:a.jsx(pO,{})}),a.jsx(xn,{path:"/client",element:a.jsx(gO,{})}),a.jsx(xn,{path:"/client/forms",element:a.jsx(yO,{})}),a.jsx(xn,{path:"/client/tools",element:a.jsx(vO,{})}),a.jsx(xn,{path:"/client/tools/macros",element:a.jsx(bO,{})}),a.jsx(xn,{path:"/client/tools/snacks",element:a.jsx(wO,{})}),a.jsx(xn,{path:"/client/tools/motivation",element:a.jsx(xO,{})}),a.jsx(xn,{path:"/client/personal-bests",element:a.jsx(EO,{})}),a.jsx(xn,{path:"/client/circuit",element:a.jsx(_O,{})}),a.jsx(xn,{path:"/client/circuit/booking",element:a.jsx(kO,{})}),a.jsx(xn,{path:"/client/core-buddy",element:a.jsx(R3,{})}),a.jsx(xn,{path:"/client/core-buddy/nutrition",element:a.jsx(fh,{feature:"nutrition",children:a.jsx(D3,{})})}),a.jsx(xn,{path:"/client/core-buddy/workouts",element:a.jsx(g5,{})}),a.jsx(xn,{path:"/client/core-buddy/consistency",element:a.jsx(fh,{feature:"consistency",children:a.jsx(E5,{})})}),a.jsx(xn,{path:"/client/core-buddy/buddies",element:a.jsx(fh,{feature:"buddies",children:a.jsx(T5,{})})}),a.jsx(xn,{path:"/client/core-buddy/builder",element:a.jsx(N5,{})}),a.jsx(xn,{path:"/client/core-buddy/profile/:userId",element:a.jsx(S5,{})}),a.jsx(xn,{path:"/client/core-buddy/settings",element:a.jsx(lO,{})}),a.jsx(xn,{path:"/client/core-buddy/challenges",element:a.jsx(uO,{})}),a.jsx(xn,{path:"/client/core-buddy/badges",element:a.jsx(fO,{})}),a.jsx(xn,{path:"/client/leaderboard",element:a.jsx(fh,{feature:"leaderboard",children:a.jsx(TO,{})})}),a.jsx(xn,{path:"/signup",element:a.jsx(SO,{})}),a.jsx(xn,{path:"/onboarding",element:a.jsx(CO,{})}),a.jsx(xn,{path:"/upgrade",element:a.jsx(jO,{})}),a.jsx(xn,{path:"*",element:a.jsx(jx,{to:"/",replace:!0})})]})})})]})})})})}Dj.createRoot(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsx(RO,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").then(s=>{setInterval(()=>s.update(),3600*1e3)}).catch(s=>console.warn("SW registration failed:",s))});export{MO as A,Vs as B,Kr as C,Jo as P,At as T,Cr as a,jr as b,mt as c,ye as d,We as e,KA as f,Ht as g,ZA as h,Cs as i,a as j,Us as k,Ar as l,Mi as m,Ys as n,ku as o,EE as p,Kt as q,w as r,LO as s,IO as t,ps as u,OO as v,xt as w,ic as x,s3 as y,n3 as z};
