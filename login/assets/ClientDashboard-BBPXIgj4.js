import{r as o,k as gs,l as vs,m as fs,g as L,q as re,c as b,d as N,w as de,i as Ns,e as Me,j as e,b as ys,a as ws,T as ks,u as bs}from"./index-B7pQgPf9.js";/* empty css                        */const Xe={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"12:00",end:"17:00"},defaultBlocked:!0}},Ss=["monday","tuesday","wednesday","thursday","friday"],S=d=>{const l=d.getFullYear(),u=(d.getMonth()+1).toString().padStart(2,"0"),m=d.getDate().toString().padStart(2,"0");return`${l}-${u}-${m}`},Le=d=>{const[l,u]=d.split(":").map(Number);return l*60+u},se=(d,l)=>{const u=Le(d)+l,m=Math.floor(u/60),C=u%60;return`${m.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`},Cs=d=>{const l=Xe[d];if(!l)return[];const u=[];if(l.morning){let m=l.morning.start;for(;m<l.morning.end;)u.push({time:m,period:"morning"}),m=se(m,15)}if(l.afternoon){let m=l.afternoon.start;for(;m<l.afternoon.end;)u.push({time:m,period:"afternoon"}),m=se(m,15)}return u},Ds=d=>{const l=d.getDay();return l>=1&&l<=5},Ge=d=>{const l=d.getDay();return l===0||l===6?null:Ss[l-1]},Ms=(d,l,u,m,C,q=null,F=[],z=[])=>{const Q=Ge(d);if(!Q)return!1;const y=S(d),j=Xe[Q];if(C.some(r=>r.date===y))return!1;if(j.defaultBlocked){const r=Math.ceil(u/15);for(let g=0;g<r;g++){const v=se(l,g*15);if(!z.some(f=>f.date===y&&f.time===v))return!1}}else{const r=Math.ceil(u/15);for(let g=0;g<r;g++){const v=se(l,g*15);if(F.some(f=>f.date===y&&f.time===v))return!1}}const A=new Date,T=S(A);if(y<T)return!1;if(y===T){const r=`${A.getHours().toString().padStart(2,"0")}:${A.getMinutes().toString().padStart(2,"0")}`;if(l<r)return!1}const te=se(l,u),E=j.morning&&l>=j.morning.start&&l<j.morning.end,X=j.afternoon&&l>=j.afternoon.start&&l<j.afternoon.end,ne=j.morning&&te<=j.morning.end,ae=j.afternoon&&te<=j.afternoon.end;if(E&&!ne||X&&!ae||!E&&!X)return!1;for(const r of m){if(q&&r.id===q||r.date!==y)continue;const g=Le(r.time),v=g+(r.duration||45),f=Le(l),I=f+u;if(f<v&&I>g)return!1}return!0},Ls=(d,l,u,m,C=null,q=[],F=[])=>{const z=Ge(d);return z?Cs(z).filter(y=>Ms(d,y.time,l,u,m,C,q,F)):[]};function $s(){const[d,l]=o.useState([]),[u,m]=o.useState([]),[C,q]=o.useState([]),[F,z]=o.useState([]),[Q,y]=o.useState([]),[j,A]=o.useState([]),[T,te]=o.useState(!0),[E,X]=o.useState(null),[ne,ae]=o.useState(!1),[r,g]=o.useState(null),[v,f]=o.useState(null),[I,ie]=o.useState(null),[Te,he]=o.useState([]),[Be,Re]=o.useState(!1),[Ke,Oe]=o.useState([]),[G,ue]=o.useState(null),[le,$e]=o.useState(!1),[me,We]=o.useState(0),K=o.useRef(null),qe=o.useRef(0),xe=o.useRef(!1),[ze,O]=o.useState(null),[P,pe]=o.useState(null),[U,Ue]=o.useState([]),[Ae,Ze]=o.useState(!1),[k,je]=o.useState(null),[ge,ve]=o.useState(null),[Y,_e]=o.useState([]),[D,fe]=o.useState(null),Je=o.useRef(null),{currentUser:Ne,isClient:ye,clientData:c,logout:es,loading:we}=gs(),{isDark:Ee,toggleTheme:ss}=vs(),w=fs(),Z=o.useCallback((s,t="info")=>{ue({message:s,type:t}),setTimeout(()=>ue(null),4e3)},[]),H=s=>{const t=s.currentTarget,i=t.querySelector(".ripple");i&&i.remove();const a=document.createElement("span"),h=Math.max(t.clientWidth,t.clientHeight),p=h/2,x=t.getBoundingClientRect();a.style.width=a.style.height=`${h}px`,a.style.left=`${s.clientX-x.left-p}px`,a.style.top=`${s.clientY-x.top-p}px`,a.classList.add("ripple"),t.appendChild(a),setTimeout(()=>a.remove(),600)},ts=s=>{K.current&&K.current.scrollTop===0&&(qe.current=s.touches[0].clientY,xe.current=!0)},ns=s=>{if(!xe.current||!K.current)return;const i=s.touches[0].clientY-qe.current;i>20&&K.current.scrollTop===0&&(s.preventDefault(),We(Math.min((i-20)*.35,80)))},as=async()=>{me>55&&!le&&($e(!0),await ke(),Z("Refreshed!","success"),$e(!1)),We(0),xe.current=!1},is=(s,t)=>{const i=s.touches[0];s.currentTarget.dataset.startX=i.clientX,s.currentTarget.dataset.startY=i.clientY},ls=(s,t)=>{const i=s.touches[0],a=parseFloat(s.currentTarget.dataset.startX),h=parseFloat(s.currentTarget.dataset.startY),p=i.clientX-a,x=i.clientY-h;Math.abs(p)>Math.abs(x)&&Math.abs(p)>10&&(s.preventDefault(),p<-50?O(t):p>50&&O(null))};o.useEffect(()=>{!we&&(!Ne||!ye)&&w("/")},[Ne,ye,we,w]),o.useEffect(()=>{if(c){if(c.dailyQuote){const s=new Date().toISOString().split("T")[0];c.dailyQuote.date===s&&ve(c.dailyQuote)}ke()}},[c]),o.useEffect(()=>{if(!T&&c){const s=setTimeout(()=>Ze(!0),300);return()=>clearTimeout(s)}},[T,c]),o.useEffect(()=>{const s=()=>{const i=be();if(i.length===0){je(null);return}const a=i[0],h=new Date,x=new Date(a.date+"T"+a.time)-h;if(x<=0){je(null);return}const M=Math.floor(x/(1e3*60*60*24)),_=Math.floor(x%(1e3*60*60*24)/(1e3*60*60)),J=Math.floor(x%(1e3*60*60)/(1e3*60)),V=Math.floor(x%(1e3*60)/1e3);je({days:M,hours:_,minutes:J,seconds:V,session:a})};s();const t=setInterval(s,1e3);return()=>clearInterval(t)},[d,T]);const ke=async()=>{try{const[s,t,i,a,h,p,x,M,_]=await Promise.all([L(re(b(N,"sessions"),de("clientId","==",c.id))),L(b(N,"sessions")),L(b(N,"holidays")),L(b(N,"blockedTimes")),L(b(N,"openedSlots")),L(re(b(N,"rescheduleRequests"),de("clientId","==",c.id))),L(re(b(N,"achievements"),de("clientId","==",c.id))),Ns(Me(N,"clients",c.id)),L(re(b(N,"sessionNotes"),de("clientId","==",c.id)))]),J=s.docs.map(n=>({id:n.id,...n.data()}));J.sort((n,W)=>n.date!==W.date?n.date.localeCompare(W.date):n.time.localeCompare(W.time)),l(J),m(t.docs.map(n=>({id:n.id,...n.data()}))),q(i.docs.map(n=>({id:n.id,...n.data()}))),z(a.docs.map(n=>({id:n.id,...n.data()}))),y(h.docs.map(n=>({id:n.id,...n.data()})));const V=p.docs.map(n=>({id:n.id,...n.data()}));Oe(V.filter(n=>n.status==="pending"));const De=V.filter(n=>{if(n.status==="pending"||!n.respondedAt)return!1;const W=n.respondedAt.toDate?n.respondedAt.toDate():new Date(n.respondedAt),ee=new Date;return ee.setDate(ee.getDate()-7),W>ee&&!n.dismissed});if(A(De),!x.empty){const n=x.docs[0].data().badges||[];Ue(n)}const js=new Date().toISOString().split("T")[0];if(M.exists()){const n=M.data();n.dailyQuote&&n.dailyQuote.date===js?ve(n.dailyQuote):ve(null)}const Qe=_.docs.map(n=>({id:n.id,...n.data()}));Qe.sort((n,W)=>{const ee=n.createdAt?.toMillis?.()||0;return(W.createdAt?.toMillis?.()||0)-ee}),_e(Qe)}catch(s){console.error("Error fetching data:",s)}te(!1)},B=s=>new Date(s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),R=s=>{const[t,i]=s.split(":"),a=parseInt(t),h=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${i}${h}`},Ie=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",oe=s=>{const t=new Date,i=S(t),a=`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`;return s.date<i||s.date===i&&s.time<a},Pe=s=>{const i=S(new Date);return s.date===i&&!oe(s)},os=()=>d.filter(s=>oe(s)).length,be=()=>d.filter(s=>!oe(s)),Ye=s=>{pe({title:"Cancel Session?",message:`Cancel your session on ${B(s.date)} at ${R(s.time)}? This cannot be undone.`,onConfirm:async()=>{pe(null),X(s.id),O(null);try{await ys(Me(N,"sessions",s.id)),l(d.filter(t=>t.id!==s.id)),Z("Session cancelled","success")}catch(t){console.error("Error cancelling session:",t),Z("Failed to cancel session. Please try again.","error")}X(null)},onCancel:()=>pe(null)})},cs=async()=>{try{await es(),w("/")}catch(s){console.error("Failed to log out:",s)}},Se=s=>Ke.some(t=>t.sessionId===s),He=s=>{g(s),f(null),ie(null),he([]),ae(!0)},ce=()=>{ae(!1),g(null),f(null),ie(null),he([])},rs=()=>c.endDate?c.endDate.toDate?c.endDate.toDate():new Date(c.endDate):new Date,ds=()=>{const s=[],t=new Date,i=rs(),a=new Date(t);for(a.setDate(a.getDate()+1);a<=i;){if(Ds(a)){const h=S(a);C.some(x=>x.date===h)||s.push(new Date(a))}a.setDate(a.getDate()+1)}return s},hs=s=>{f(s),ie(null);const t=r?.duration||c.sessionDuration||45;let i=Ls(s,t,u,C,r?.id,F,Q);r&&S(s)===r.date&&(i=i.filter(a=>a.time!==r.time)),he(i)},us=async()=>{if(!(!v||!I||!r)){Re(!0);try{await ws(b(N,"rescheduleRequests"),{sessionId:r.id,clientId:c.id,clientName:c.name,originalDate:r.date,originalTime:r.time,requestedDate:S(v),requestedTime:I,duration:r.duration,status:"pending",createdAt:ks.now(),respondedAt:null,dismissed:!1}),ce(),Z("Reschedule request submitted! You'll be notified when your trainer responds.","success"),ke()}catch(s){console.error("Error submitting reschedule request:",s),Z("Failed to submit request. Please try again.","error")}Re(!1)}},ms=async s=>{try{await bs(Me(N,"rescheduleRequests",s),{dismissed:!0}),A(j.filter(t=>t.id!==s))}catch(t){console.error("Error dismissing notification:",t)}},xs=()=>{const s=be();if(s.length===0)return null;const t=s[0],i=new Date,h=new Date(t.date+"T"+t.time)-i;if(h<=0)return null;const p=Math.floor(h/(1e3*60*60*24)),x=Math.floor(h%(1e3*60*60*24)/(1e3*60*60)),M=Math.floor(h%(1e3*60*60)/(1e3*60));return{days:p,hours:x,minutes:M,session:t}};if(we||T)return e.jsxs("div",{className:"client-dashboard",children:[e.jsx("header",{className:"client-header",children:e.jsx("div",{className:"header-content",children:e.jsx("div",{className:"skeleton skeleton-logo"})})}),e.jsxs("main",{className:"client-main",children:[e.jsxs("div",{className:"skeleton-welcome",children:[e.jsx("div",{className:"skeleton skeleton-title"}),e.jsx("div",{className:"skeleton skeleton-btn-small"})]}),e.jsxs("div",{className:"skeleton-actions",children:[e.jsx("div",{className:"skeleton skeleton-btn"}),e.jsx("div",{className:"skeleton skeleton-btn"})]}),e.jsx("div",{className:"skeleton skeleton-card-large"}),e.jsx("div",{className:"skeleton skeleton-card-medium"}),e.jsx("div",{className:"skeleton skeleton-card-medium"})]})]});if(!Ne||!ye||!c)return null;const $=os(),ps=c.totalSessions-$,Ce=be(),Ve=ne?ds():[];xs();const Fe=c.totalSessions>0?$/c.totalSessions*100:0;return e.jsxs("div",{className:"client-dashboard",children:[e.jsx("header",{className:"client-header",children:e.jsx("div",{className:"header-content",children:e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),e.jsxs("div",{className:`pull-refresh-indicator ${me>0?"visible":""} ${le?"refreshing":""}`,style:{height:me},children:[e.jsx("div",{className:`refresh-spinner ${le?"spinning":""}`,children:e.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:e.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),e.jsx("span",{className:"refresh-text",children:le?"Refreshing...":"Pull to refresh"})]}),e.jsxs("main",{className:"client-main page-transition-enter",ref:K,onTouchStart:ts,onTouchMove:ns,onTouchEnd:as,children:[e.jsxs("div",{className:"welcome-section",children:[e.jsxs("h2",{children:["Welcome, ",c.name.split(" ")[0]]}),e.jsxs("div",{className:"welcome-actions",children:[e.jsx("button",{className:"theme-toggle",onClick:ss,"aria-label":Ee?"Switch to light mode":"Switch to dark mode",children:Ee?e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),e.jsx("button",{className:"logout-btn",onClick:cs,children:"Log Out"})]})]}),j.length>0&&e.jsx("div",{className:"notifications-section",children:j.map(s=>e.jsxs("div",{className:`notification ${s.status}`,children:[e.jsxs("div",{className:"notification-content",children:[e.jsx("span",{className:"notification-icon",children:s.status==="approved"?"✓":"✗"}),e.jsxs("div",{className:"notification-text",children:[e.jsx("strong",{children:s.status==="approved"?"Reschedule Approved!":"Reschedule Declined"}),e.jsx("p",{children:s.status==="approved"?`Your session has been moved to ${B(s.requestedDate)} at ${R(s.requestedTime)}`:`Your request to reschedule from ${B(s.originalDate)} was declined. Please contact your trainer.`})]})]}),e.jsx("button",{className:"dismiss-btn",onClick:()=>ms(s.id),children:"✕"})]},s.id))}),k&&e.jsxs("div",{className:"ring-timer-container",children:[e.jsxs("div",{className:"ring-timer",children:[e.jsx("svg",{className:"ring-timer-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((s,t)=>{const i=(t*6-90)*(Math.PI/180),a=85,h=96,p=100+a*Math.cos(i),x=100+a*Math.sin(i),M=100+h*Math.cos(i),_=100+h*Math.sin(i),V=60-k.seconds,De=t<V;return e.jsx("line",{x1:p,y1:x,x2:M,y2:_,className:`ring-tick ${De?"elapsed":"remaining"}`,strokeWidth:t%5===0?"3":"2"},t)})}),e.jsxs("div",{className:"ring-timer-center",children:[e.jsx("div",{className:"ring-timer-logo",children:e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness"})}),e.jsxs("div",{className:"ring-timer-countdown",children:[k.days>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"timer-digit",children:String(k.days).padStart(2,"0")}),e.jsx("span",{className:"timer-colon",children:":"})]}),e.jsx("span",{className:"timer-digit",children:String(k.hours).padStart(2,"0")}),e.jsx("span",{className:"timer-colon",children:":"}),e.jsx("span",{className:"timer-digit",children:String(k.minutes).padStart(2,"0")}),e.jsx("span",{className:"timer-colon",children:":"}),e.jsx("span",{className:"timer-digit timer-seconds",children:String(k.seconds).padStart(2,"0")})]}),e.jsx("div",{className:"ring-timer-label",children:"until next session"})]})]}),e.jsxs("div",{className:"ring-timer-session-info",children:[B(k.session.date)," at ",R(k.session.time)]})]}),e.jsxs("div",{className:"block-info-card",children:[e.jsx("div",{className:"block-header-row",children:e.jsx("h3",{children:"Your Training Block"})}),e.jsxs("div",{className:"progress-section",children:[e.jsxs("div",{className:"progress-ring-container",children:[e.jsxs("svg",{className:"progress-ring",viewBox:"0 0 100 100",children:[e.jsx("circle",{className:"progress-ring-bg",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8"}),e.jsx("circle",{className:`progress-ring-fill ${Ae?"animate":""}`,cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:Ae?`${2*Math.PI*42*(1-Fe/100)}`:`${2*Math.PI*42}`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"progress-ring-text",children:[e.jsxs("span",{className:"progress-percent",children:[Math.round(Fe),"%"]}),e.jsx("span",{className:"progress-label",children:"complete"})]})]}),e.jsxs("div",{className:"progress-stats",children:[e.jsxs("div",{className:"progress-stat",children:[e.jsx("span",{className:"progress-stat-value",children:$}),e.jsx("span",{className:"progress-stat-label",children:"Completed"})]}),e.jsxs("div",{className:"progress-stat",children:[e.jsx("span",{className:"progress-stat-value",children:ps}),e.jsx("span",{className:"progress-stat-label",children:"Remaining"})]}),e.jsxs("div",{className:"progress-stat",children:[e.jsx("span",{className:"progress-stat-value",children:c.totalSessions}),e.jsx("span",{className:"progress-stat-label",children:"Total"})]})]})]}),e.jsxs("div",{className:"block-dates",children:[e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"date-label",children:"Start Date"}),e.jsx("span",{className:"date-value",children:Ie(c.startDate)})]}),e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"date-label",children:"End Date"}),e.jsx("span",{className:"date-value",children:Ie(c.endDate)})]}),e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"date-label",children:"Session Duration"}),e.jsxs("span",{className:"date-value",children:[c.sessionDuration," minutes"]})]})]})]}),c?.coreBuddyAccess&&e.jsxs("div",{className:"core-buddy-cta",onClick:()=>w("/client/core-buddy"),children:[e.jsx("div",{className:"core-buddy-cta-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"})})}),e.jsxs("div",{className:"core-buddy-cta-text",children:[e.jsx("span",{className:"core-buddy-cta-title",children:"Core Buddy"}),e.jsx("span",{className:"core-buddy-cta-sub",children:"Workouts, nutrition & habits"})]}),e.jsx("svg",{className:"core-buddy-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),Y.length>0&&e.jsxs("div",{className:"session-notes-card",ref:Je,children:[e.jsxs("div",{className:"session-notes-header",children:[e.jsxs("div",{className:"session-notes-title",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),e.jsx("span",{children:"Session Notes"})]}),e.jsx("span",{className:"session-notes-count",children:Y.length})]}),e.jsx("div",{className:"session-notes-list",children:Y.slice(0,D==="show-all"?void 0:3).map((s,t)=>e.jsxs("div",{className:`session-note-item ${D===s.id?"expanded":""}`,onClick:()=>fe(D===s.id?null:s.id),children:[e.jsxs("div",{className:"session-note-top",children:[e.jsx("span",{className:"session-note-date",children:s.date}),e.jsx("svg",{className:`session-note-chevron ${D===s.id?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),s.sessionNotes&&e.jsx("p",{className:"session-note-preview",children:D===s.id?s.sessionNotes:s.sessionNotes.length>80?s.sessionNotes.slice(0,80)+"...":s.sessionNotes}),D===s.id&&e.jsxs("div",{className:"session-note-details",children:[s.whatWentWell&&e.jsxs("div",{className:"session-note-section went-well",children:[e.jsx("span",{className:"session-note-label",children:"What Went Well"}),e.jsx("p",{children:s.whatWentWell})]}),s.whatWentWrong&&e.jsxs("div",{className:"session-note-section went-wrong",children:[e.jsx("span",{className:"session-note-label",children:"What Went Wrong"}),e.jsx("p",{children:s.whatWentWrong})]}),s.whatsNext&&e.jsxs("div",{className:"session-note-section whats-next",children:[e.jsx("span",{className:"session-note-label",children:"What's Next"}),e.jsx("p",{children:s.whatsNext})]})]})]},s.id))}),Y.length>3&&D===null&&e.jsxs("button",{className:"session-notes-viewall",onClick:()=>fe("show-all"),children:["View all ",Y.length," notes",e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),D==="show-all"&&Y.length>3&&e.jsxs("button",{className:"session-notes-viewall",onClick:()=>fe(null),children:["Show less",e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",style:{transform:"rotate(180deg)"},children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),U.length>0&&e.jsxs("div",{className:"achievements-card",children:[e.jsxs("div",{className:"achievements-card-header",children:[e.jsxs("div",{className:"achievements-card-title",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),e.jsx("span",{children:"Targets Achieved"})]}),e.jsx("span",{className:"achievements-card-count",children:U.length})]}),e.jsx("div",{className:"achievements-card-list",children:[...U].reverse().slice(0,3).map((s,t)=>e.jsxs("div",{className:"achievements-card-item",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),e.jsx("span",{className:"achievements-card-label",children:s.label}),e.jsx("span",{className:"achievements-card-date",children:s.achievedMonth})]},t))}),U.length>3&&e.jsxs("button",{className:"achievements-card-viewall",onClick:()=>w("/client/personal-bests"),children:["View all ",U.length," achievements",e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),ge?e.jsxs("div",{className:"daily-quote-card",children:[e.jsx("div",{className:"daily-quote-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),e.jsxs("div",{className:"daily-quote-content",children:[e.jsx("div",{className:"daily-quote-label",children:"Daily Motivation"}),e.jsx("div",{className:"daily-quote-text",children:ge.text}),e.jsxs("div",{className:"daily-quote-author",children:["— ",ge.author]}),e.jsxs("div",{className:"daily-quote-lock",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"12",height:"12",children:e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"})}),"New quote at midnight"]})]})]}):e.jsxs("div",{className:"daily-quote-cta",onClick:()=>w("/client/tools/motivation"),children:[e.jsx("div",{className:"daily-quote-cta-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),e.jsxs("div",{className:"daily-quote-cta-text",children:[e.jsx("span",{className:"daily-quote-cta-title",children:"Daily Motivation"}),e.jsx("span",{className:"daily-quote-cta-sub",children:"Tap to get today's inspiration"})]}),e.jsx("svg",{className:"daily-quote-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),e.jsxs("div",{className:"sessions-section",children:[e.jsxs("h3",{children:["Upcoming Sessions (",Ce.length,")"]}),Ce.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),e.jsx("line",{x1:"20",y1:"35",x2:"80",y2:"35"}),e.jsx("line",{x1:"35",y1:"15",x2:"35",y2:"35"}),e.jsx("line",{x1:"65",y1:"15",x2:"65",y2:"35"}),e.jsx("circle",{cx:"40",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),e.jsx("circle",{cx:"60",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),e.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"}),e.jsx("circle",{cx:"60",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"})]})}),e.jsx("h4",{children:"No upcoming sessions"}),e.jsx("p",{children:"Contact your trainer to book sessions"})]}):e.jsx("div",{className:"sessions-list",children:Ce.map(s=>e.jsxs("div",{className:`session-card-wrapper ${ze===s.id?"swiped":""}`,onTouchStart:t=>is(t,s.id),onTouchMove:t=>ls(t,s.id),children:[e.jsxs("div",{className:"session-card-swipe-actions",children:[e.jsx("button",{className:"swipe-action-btn reschedule ripple-btn",onClick:t=>{H(t),O(null),He(s)},disabled:Se(s.id),children:"Reschedule"}),e.jsx("button",{className:"swipe-action-btn cancel ripple-btn",onClick:t=>{H(t),Ye(s)},disabled:E===s.id,children:"Cancel"})]}),e.jsxs("div",{className:`session-card ${Pe(s)?"today-session":""}`,onClick:()=>ze===s.id&&O(null),children:[e.jsxs("div",{className:"session-info",children:[e.jsxs("div",{className:"session-date",children:[Pe(s)&&e.jsx("span",{className:"today-label",children:"Today - "}),B(s.date)]}),e.jsxs("div",{className:"session-time",children:[R(s.time)," (",s.duration," min)"]}),Se(s.id)&&e.jsx("div",{className:"pending-badge",children:"Reschedule pending"})]}),e.jsxs("div",{className:"session-actions",children:[e.jsx("button",{className:"reschedule-btn ripple-btn",onClick:t=>{t.stopPropagation(),H(t),He(s)},disabled:Se(s.id),children:"Reschedule"}),e.jsx("button",{className:"cancel-btn ripple-btn",onClick:t=>{t.stopPropagation(),H(t),Ye(s)},disabled:E===s.id,children:E===s.id?"Cancelling...":"Cancel"})]}),e.jsxs("div",{className:"swipe-hint",children:[e.jsx("span",{className:"swipe-hint-text",children:"Swipe"}),e.jsxs("span",{className:"swipe-hint-chevrons",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})]})]})]})]},s.id))})]}),e.jsxs("div",{className:"completed-section",children:[e.jsxs("h3",{children:["Completed Sessions (",$,")"]}),$===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"50",cy:"50",r:"35"}),e.jsx("path",{d:"M35 50 L45 60 L65 40",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),e.jsx("path",{d:"M50 25 L50 50 L65 55",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h4",{children:"No completed sessions yet"}),e.jsx("p",{children:"Your completed sessions will appear here"})]}):e.jsxs("div",{className:"sessions-list completed",children:[d.filter(s=>oe(s)).slice(-5).reverse().map(s=>e.jsxs("div",{className:"session-card completed",children:[e.jsxs("div",{className:"session-info",children:[e.jsx("div",{className:"session-date",children:B(s.date)}),e.jsx("div",{className:"session-time",children:R(s.time)})]}),e.jsx("span",{className:"completed-badge",children:"Completed"})]},s.id)),$>5&&e.jsxs("div",{className:"more-sessions",children:["And ",$-5," more completed sessions"]})]})]})]}),ne&&r&&e.jsx("div",{className:"modal-overlay",onClick:ce,children:e.jsxs("div",{className:"reschedule-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Reschedule Session"}),e.jsx("button",{className:"close-modal-btn",onClick:ce,children:"✕"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"current-session-info",children:e.jsxs("p",{children:["Current: ",e.jsx("strong",{children:B(r.date)})," at ",e.jsx("strong",{children:R(r.time)})]})}),e.jsxs("div",{className:"date-selection",children:[e.jsx("h4",{children:"Select New Date"}),Ve.length===0?e.jsx("p",{className:"no-dates",children:"No available dates within your training block"}):e.jsx("div",{className:"dates-grid",children:Ve.map((s,t)=>e.jsxs("button",{className:`date-btn ${v&&S(v)===S(s)?"selected":""}`,onClick:()=>hs(s),children:[e.jsx("span",{className:"date-day",children:s.toLocaleDateString("en-GB",{weekday:"short"})}),e.jsx("span",{className:"date-num",children:s.getDate()}),e.jsx("span",{className:"date-month",children:s.toLocaleDateString("en-GB",{month:"short"})})]},t))})]}),v&&e.jsxs("div",{className:"time-selection",children:[e.jsx("h4",{children:"Select Time"}),Te.length===0?e.jsx("p",{className:"no-slots",children:"No available slots on this date"}):e.jsx("div",{className:"times-grid",children:Te.map((s,t)=>e.jsx("button",{className:`time-btn ${I===s.time?"selected":""} ${s.period}`,onClick:()=>ie(s.time),children:R(s.time)},t))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-modal-btn",onClick:ce,children:"Cancel"}),e.jsx("button",{className:"submit-reschedule-btn",onClick:us,disabled:!v||!I||Be,children:Be?"Submitting...":"Request Reschedule"})]})]})}),G&&e.jsxs("div",{className:`toast-notification ${G.type}`,children:[e.jsx("span",{className:"toast-icon",children:G.type==="success"?e.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):G.type==="error"?e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),e.jsx("span",{className:"toast-message",children:G.message}),e.jsx("button",{className:"toast-close",onClick:()=>ue(null),children:"✕"})]}),P&&e.jsx("div",{className:"confirm-modal-overlay",onClick:P.onCancel,children:e.jsxs("div",{className:"confirm-modal",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{children:P.title}),e.jsx("p",{children:P.message}),e.jsxs("div",{className:"confirm-modal-actions",children:[e.jsx("button",{className:"confirm-cancel-btn ripple-btn",onClick:s=>{H(s),P.onCancel()},children:"Keep Session"}),e.jsx("button",{className:"confirm-btn ripple-btn",onClick:s=>{H(s),P.onConfirm()},children:"Yes, Cancel"})]})]})}),e.jsxs("nav",{className:"block-bottom-nav",children:[e.jsxs("button",{className:"block-nav-tab active",children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),e.jsx("span",{children:"Home"})]}),e.jsxs("button",{className:"block-nav-tab",onClick:()=>w("/client/forms"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),e.jsx("span",{children:"Forms"})]}),e.jsxs("button",{className:"block-nav-tab",onClick:()=>w("/client/tools"),children:[e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),e.jsx("span",{children:"Tools"})]}),e.jsxs("button",{className:"block-nav-tab",onClick:()=>w("/client/personal-bests"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 20V10"}),e.jsx("path",{d:"M18 20V4"}),e.jsx("path",{d:"M6 20v-4"})]}),e.jsx("span",{children:"PBs"})]}),c?.circuitAccess&&e.jsxs("button",{className:"block-nav-tab",onClick:()=>w("/client/circuit"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 6v6l4 2"})]}),e.jsx("span",{children:"Circuit"})]})]})]})}export{$s as default};
