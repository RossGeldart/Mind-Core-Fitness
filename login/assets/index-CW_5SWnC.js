const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DUhO37EK.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-C2PCWPwa.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-Ca-IY5c6.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-ClEhwN3h.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-BM2h9uXv.js","assets/ProteinSnacks-SQB3SI9Z.js","assets/DailyMotivation-BdJ3eDMU.js","assets/CircuitDashboard-B-4r3aeN.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-CvT0nHgh.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-CDh0i38R.js","assets/Leaderboard-lyZEtGxw.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var Zm={exports:{}},Ic={};var $0;function BT(){if($0)return Ic;$0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:a,key:d,ref:l!==void 0?l:null,props:u}}return Ic.Fragment=e,Ic.jsx=n,Ic.jsxs=n,Ic}var W0;function UT(){return W0||(W0=1,Zm.exports=BT()),Zm.exports}var i=UT(),ep={exports:{}},Pt={};var G0;function zT(){if(G0)return Pt;G0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.iterator;function P(O){return O===null||typeof O!="object"?null:(O=j&&O[j]||O["@@iterator"],typeof O=="function"?O:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,L={};function te(O,W,ge){this.props=O,this.context=W,this.refs=L,this.updater=ge||$}te.prototype.isReactComponent={},te.prototype.setState=function(O,W){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,W,"setState")},te.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Q(){}Q.prototype=te.prototype;function ce(O,W,ge){this.props=O,this.context=W,this.refs=L,this.updater=ge||$}var ve=ce.prototype=new Q;ve.constructor=ce,B(ve,te.prototype),ve.isPureReactComponent=!0;var Ue=Array.isArray;function Ae(){}var A={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function R(O,W,ge){var Ee=ge.ref;return{$$typeof:s,type:O,key:W,ref:Ee!==void 0?Ee:null,props:ge}}function D(O,W){return R(O.type,W,O.props)}function M(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function U(O){var W={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ge){return W[ge]})}var I=/\/+/g;function Ne(O,W){return typeof O=="object"&&O!==null&&O.key!=null?U(""+O.key):W.toString(36)}function pt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(Ae,Ae):(O.status="pending",O.then(function(W){O.status==="pending"&&(O.status="fulfilled",O.value=W)},function(W){O.status==="pending"&&(O.status="rejected",O.reason=W)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Y(O,W,ge,Ee,Re){var Oe=typeof O;(Oe==="undefined"||Oe==="boolean")&&(O=null);var nt=!1;if(O===null)nt=!0;else switch(Oe){case"bigint":case"string":case"number":nt=!0;break;case"object":switch(O.$$typeof){case s:case e:nt=!0;break;case x:return nt=O._init,Y(nt(O._payload),W,ge,Ee,Re)}}if(nt)return Re=Re(O),nt=Ee===""?"."+Ne(O,0):Ee,Ue(Re)?(ge="",nt!=null&&(ge=nt.replace(I,"$&/")+"/"),Y(Re,W,ge,"",function(vt){return vt})):Re!=null&&(M(Re)&&(Re=D(Re,ge+(Re.key==null||O&&O.key===Re.key?"":(""+Re.key).replace(I,"$&/")+"/")+nt)),W.push(Re)),1;nt=0;var He=Ee===""?".":Ee+":";if(Ue(O))for(var Ze=0;Ze<O.length;Ze++)Ee=O[Ze],Oe=He+Ne(Ee,Ze),nt+=Y(Ee,W,ge,Oe,Re);else if(Ze=P(O),typeof Ze=="function")for(O=Ze.call(O),Ze=0;!(Ee=O.next()).done;)Ee=Ee.value,Oe=He+Ne(Ee,Ze++),nt+=Y(Ee,W,ge,Oe,Re);else if(Oe==="object"){if(typeof O.then=="function")return Y(pt(O),W,ge,Ee,Re);throw W=String(O),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return nt}function ke(O,W,ge){if(O==null)return O;var Ee=[],Re=0;return Y(O,Ee,"","",function(Oe){return W.call(ge,Oe,Re++)}),Ee}function Pe(O){if(O._status===-1){var W=O._result;W=W(),W.then(function(ge){(O._status===0||O._status===-1)&&(O._status=1,O._result=ge)},function(ge){(O._status===0||O._status===-1)&&(O._status=2,O._result=ge)}),O._status===-1&&(O._status=0,O._result=W)}if(O._status===1)return O._result.default;throw O._result}var ae=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Me={map:ke,forEach:function(O,W,ge){ke(O,function(){W.apply(this,arguments)},ge)},count:function(O){var W=0;return ke(O,function(){W++}),W},toArray:function(O){return ke(O,function(W){return W})||[]},only:function(O){if(!M(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Pt.Activity=k,Pt.Children=Me,Pt.Component=te,Pt.Fragment=n,Pt.Profiler=l,Pt.PureComponent=ce,Pt.StrictMode=a,Pt.Suspense=g,Pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Pt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return A.H.useMemoCache(O)}},Pt.cache=function(O){return function(){return O.apply(null,arguments)}},Pt.cacheSignal=function(){return null},Pt.cloneElement=function(O,W,ge){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Ee=B({},O.props),Re=O.key;if(W!=null)for(Oe in W.key!==void 0&&(Re=""+W.key),W)!E.call(W,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&W.ref===void 0||(Ee[Oe]=W[Oe]);var Oe=arguments.length-2;if(Oe===1)Ee.children=ge;else if(1<Oe){for(var nt=Array(Oe),He=0;He<Oe;He++)nt[He]=arguments[He+2];Ee.children=nt}return R(O.type,Re,Ee)},Pt.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Pt.createElement=function(O,W,ge){var Ee,Re={},Oe=null;if(W!=null)for(Ee in W.key!==void 0&&(Oe=""+W.key),W)E.call(W,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Re[Ee]=W[Ee]);var nt=arguments.length-2;if(nt===1)Re.children=ge;else if(1<nt){for(var He=Array(nt),Ze=0;Ze<nt;Ze++)He[Ze]=arguments[Ze+2];Re.children=He}if(O&&O.defaultProps)for(Ee in nt=O.defaultProps,nt)Re[Ee]===void 0&&(Re[Ee]=nt[Ee]);return R(O,Oe,Re)},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(O){return{$$typeof:p,render:O}},Pt.isValidElement=M,Pt.lazy=function(O){return{$$typeof:x,_payload:{_status:-1,_result:O},_init:Pe}},Pt.memo=function(O,W){return{$$typeof:y,type:O,compare:W===void 0?null:W}},Pt.startTransition=function(O){var W=A.T,ge={};A.T=ge;try{var Ee=O(),Re=A.S;Re!==null&&Re(ge,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(Ae,ae)}catch(Oe){ae(Oe)}finally{W!==null&&ge.types!==null&&(W.types=ge.types),A.T=W}},Pt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Pt.use=function(O){return A.H.use(O)},Pt.useActionState=function(O,W,ge){return A.H.useActionState(O,W,ge)},Pt.useCallback=function(O,W){return A.H.useCallback(O,W)},Pt.useContext=function(O){return A.H.useContext(O)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(O,W){return A.H.useDeferredValue(O,W)},Pt.useEffect=function(O,W){return A.H.useEffect(O,W)},Pt.useEffectEvent=function(O){return A.H.useEffectEvent(O)},Pt.useId=function(){return A.H.useId()},Pt.useImperativeHandle=function(O,W,ge){return A.H.useImperativeHandle(O,W,ge)},Pt.useInsertionEffect=function(O,W){return A.H.useInsertionEffect(O,W)},Pt.useLayoutEffect=function(O,W){return A.H.useLayoutEffect(O,W)},Pt.useMemo=function(O,W){return A.H.useMemo(O,W)},Pt.useOptimistic=function(O,W){return A.H.useOptimistic(O,W)},Pt.useReducer=function(O,W,ge){return A.H.useReducer(O,W,ge)},Pt.useRef=function(O){return A.H.useRef(O)},Pt.useState=function(O){return A.H.useState(O)},Pt.useSyncExternalStore=function(O,W,ge){return A.H.useSyncExternalStore(O,W,ge)},Pt.useTransition=function(){return A.H.useTransition()},Pt.version="19.2.4",Pt}var K0;function hg(){return K0||(K0=1,ep.exports=zT()),ep.exports}var _=hg(),tp={exports:{}},Mc={},np={exports:{}},sp={};var Y0;function FT(){return Y0||(Y0=1,(function(s){function e(Y,ke){var Pe=Y.length;Y.push(ke);e:for(;0<Pe;){var ae=Pe-1>>>1,Me=Y[ae];if(0<l(Me,ke))Y[ae]=ke,Y[Pe]=Me,Pe=ae;else break e}}function n(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var ke=Y[0],Pe=Y.pop();if(Pe!==ke){Y[0]=Pe;e:for(var ae=0,Me=Y.length,O=Me>>>1;ae<O;){var W=2*(ae+1)-1,ge=Y[W],Ee=W+1,Re=Y[Ee];if(0>l(ge,Pe))Ee<Me&&0>l(Re,ge)?(Y[ae]=Re,Y[Ee]=Pe,ae=Ee):(Y[ae]=ge,Y[W]=Pe,ae=W);else if(Ee<Me&&0>l(Re,Pe))Y[ae]=Re,Y[Ee]=Pe,ae=Ee;else break e}}return ke}function l(Y,ke){var Pe=Y.sortIndex-ke.sortIndex;return Pe!==0?Pe:Y.id-ke.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],x=1,k=null,j=3,P=!1,$=!1,B=!1,L=!1,te=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function ve(Y){for(var ke=n(y);ke!==null;){if(ke.callback===null)a(y);else if(ke.startTime<=Y)a(y),ke.sortIndex=ke.expirationTime,e(g,ke);else break;ke=n(y)}}function Ue(Y){if(B=!1,ve(Y),!$)if(n(g)!==null)$=!0,Ae||(Ae=!0,U());else{var ke=n(y);ke!==null&&pt(Ue,ke.startTime-Y)}}var Ae=!1,A=-1,E=5,R=-1;function D(){return L?!0:!(s.unstable_now()-R<E)}function M(){if(L=!1,Ae){var Y=s.unstable_now();R=Y;var ke=!0;try{e:{$=!1,B&&(B=!1,Q(A),A=-1),P=!0;var Pe=j;try{t:{for(ve(Y),k=n(g);k!==null&&!(k.expirationTime>Y&&D());){var ae=k.callback;if(typeof ae=="function"){k.callback=null,j=k.priorityLevel;var Me=ae(k.expirationTime<=Y);if(Y=s.unstable_now(),typeof Me=="function"){k.callback=Me,ve(Y),ke=!0;break t}k===n(g)&&a(g),ve(Y)}else a(g);k=n(g)}if(k!==null)ke=!0;else{var O=n(y);O!==null&&pt(Ue,O.startTime-Y),ke=!1}}break e}finally{k=null,j=Pe,P=!1}ke=void 0}}finally{ke?U():Ae=!1}}}var U;if(typeof ce=="function")U=function(){ce(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ne=I.port2;I.port1.onmessage=M,U=function(){Ne.postMessage(null)}}else U=function(){te(M,0)};function pt(Y,ke){A=te(function(){Y(s.unstable_now())},ke)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return j},s.unstable_next=function(Y){switch(j){case 1:case 2:case 3:var ke=3;break;default:ke=j}var Pe=j;j=ke;try{return Y()}finally{j=Pe}},s.unstable_requestPaint=function(){L=!0},s.unstable_runWithPriority=function(Y,ke){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Pe=j;j=Y;try{return ke()}finally{j=Pe}},s.unstable_scheduleCallback=function(Y,ke,Pe){var ae=s.unstable_now();switch(typeof Pe=="object"&&Pe!==null?(Pe=Pe.delay,Pe=typeof Pe=="number"&&0<Pe?ae+Pe:ae):Pe=ae,Y){case 1:var Me=-1;break;case 2:Me=250;break;case 5:Me=1073741823;break;case 4:Me=1e4;break;default:Me=5e3}return Me=Pe+Me,Y={id:x++,callback:ke,priorityLevel:Y,startTime:Pe,expirationTime:Me,sortIndex:-1},Pe>ae?(Y.sortIndex=Pe,e(y,Y),n(g)===null&&Y===n(y)&&(B?(Q(A),A=-1):B=!0,pt(Ue,Pe-ae))):(Y.sortIndex=Me,e(g,Y),$||P||($=!0,Ae||(Ae=!0,U()))),Y},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(Y){var ke=j;return function(){var Pe=j;j=ke;try{return Y.apply(this,arguments)}finally{j=Pe}}}})(sp)),sp}var Q0;function qT(){return Q0||(Q0=1,np.exports=FT()),np.exports}var rp={exports:{}},Cs={};var X0;function HT(){if(X0)return Cs;X0=1;var s=hg();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,x){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:k==null?null:""+k,children:g,containerInfo:y,implementation:x}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Cs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Cs.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,x)},Cs.flushSync=function(g){var y=d.T,x=a.p;try{if(d.T=null,a.p=2,g)return g()}finally{d.T=y,a.p=x,a.d.f()}},Cs.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(g,y))},Cs.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},Cs.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,k=p(x,y.crossOrigin),j=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?a.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:k,integrity:j,fetchPriority:P}):x==="script"&&a.d.X(g,{crossOrigin:k,integrity:j,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Cs.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=p(y.as,y.crossOrigin);a.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(g)},Cs.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,k=p(x,y.crossOrigin);a.d.L(g,x,{crossOrigin:k,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Cs.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=p(y.as,y.crossOrigin);a.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(g)},Cs.requestFormReset=function(g){a.d.r(g)},Cs.unstable_batchedUpdates=function(g,y){return g(y)},Cs.useFormState=function(g,y,x){return d.H.useFormState(g,y,x)},Cs.useFormStatus=function(){return d.H.useHostTransitionStatus()},Cs.version="19.2.4",Cs}var J0;function $T(){if(J0)return rp.exports;J0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),rp.exports=HT(),rp.exports}var Z0;function WT(){if(Z0)return Mc;Z0=1;var s=qT(),e=hg(),n=$T();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(a(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(a(188));return r!==t?null:t}for(var o=t,c=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){o=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(a(188))}if(o.return!==c.return)o=f,c=m;else{for(var b=!1,S=f.child;S;){if(S===o){b=!0,o=f,c=m;break}if(S===c){b=!0,c=f,o=m;break}S=S.sibling}if(!b){for(S=m.child;S;){if(S===o){b=!0,o=m,c=f;break}if(S===c){b=!0,c=m,o=f;break}S=S.sibling}if(!b)throw Error(a(189))}}if(o.alternate!==c)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?t:r}function x(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=x(t),r!==null)return r;t=t.sibling}return null}var k=Object.assign,j=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Ne(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case te:return"Profiler";case L:return"StrictMode";case Ue:return"Suspense";case Ae:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case $:return"Portal";case ce:return t.displayName||"Context";case Q:return(t._context.displayName||"Context")+".Consumer";case ve:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A:return r=t.displayName||null,r!==null?r:Ne(t.type)||"Memo";case E:r=t._payload,t=t._init;try{return Ne(t(r))}catch{}}return null}var pt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe={pending:!1,data:null,method:null,action:null},ae=[],Me=-1;function O(t){return{current:t}}function W(t){0>Me||(t.current=ae[Me],ae[Me]=null,Me--)}function ge(t,r){Me++,ae[Me]=t.current,t.current=r}var Ee=O(null),Re=O(null),Oe=O(null),nt=O(null);function He(t,r){switch(ge(Oe,r),ge(Re,t),ge(Ee,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?m0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=m0(r),t=p0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(Ee),ge(Ee,t)}function Ze(){W(Ee),W(Re),W(Oe)}function vt(t){t.memoizedState!==null&&ge(nt,t);var r=Ee.current,o=p0(r,t.type);r!==o&&(ge(Re,t),ge(Ee,o))}function nn(t){Re.current===t&&(W(Ee),W(Re)),nt.current===t&&(W(nt),Nc._currentValue=Pe)}var Tt,bt;function ne(t){if(Tt===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Tt=r&&r[1]||"",bt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+t+bt}var ln=!1;function Ft(t,r){if(!t||ln)return"";ln=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(le){var se=le}Reflect.construct(t,[],Te)}else{try{Te.call()}catch(le){se=le}t.call(Te.prototype)}}else{try{throw Error()}catch(le){se=le}(Te=t())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(le){if(le&&se&&typeof le.stack=="string")return[le.stack,se.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],S=m[1];if(b&&S){var V=b.split(`
`),ee=S.split(`
`);for(f=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(c===V.length||f===ee.length)for(c=V.length-1,f=ee.length-1;1<=c&&0<=f&&V[c]!==ee[f];)f--;for(;1<=c&&0<=f;c--,f--)if(V[c]!==ee[f]){if(c!==1||f!==1)do if(c--,f--,0>f||V[c]!==ee[f]){var pe=`
`+V[c].replace(" at new "," at ");return t.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",t.displayName)),pe}while(1<=c&&0<=f);break}}}finally{ln=!1,Error.prepareStackTrace=o}return(o=t?t.displayName||t.name:"")?ne(o):""}function _t(t,r){switch(t.tag){case 26:case 27:case 5:return ne(t.type);case 16:return ne("Lazy");case 13:return t.child!==r&&r!==null?ne("Suspense Fallback"):ne("Suspense");case 19:return ne("SuspenseList");case 0:case 15:return Ft(t.type,!1);case 11:return Ft(t.type.render,!1);case 1:return Ft(t.type,!0);case 31:return ne("Activity");default:return""}}function At(t){try{var r="",o=null;do r+=_t(t,o),o=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ct=Object.prototype.hasOwnProperty,Ke=s.unstable_scheduleCallback,Gt=s.unstable_cancelCallback,as=s.unstable_shouldYield,It=s.unstable_requestPaint,Ut=s.unstable_now,Ln=s.unstable_getCurrentPriorityLevel,Ht=s.unstable_ImmediatePriority,xn=s.unstable_UserBlockingPriority,fe=s.unstable_NormalPriority,xe=s.unstable_LowPriority,Ce=s.unstable_IdlePriority,tt=s.log,Ye=s.unstable_setDisableYieldValue,ze=null,Xe=null;function We(t){if(typeof tt=="function"&&Ye(t),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(ze,t)}catch{}}var Ve=Math.clz32?Math.clz32:lt,we=Math.log,Je=Math.LN2;function lt(t){return t>>>=0,t===0?32:31-(we(t)/Je|0)|0}var Et=256,$t=262144,Ge=4194304;function jt(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ct(t,r,o){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=jt(c):(b&=S,b!==0?f=jt(b):o||(o=S&~t,o!==0&&(f=jt(o))))):(S=c&~m,S!==0?f=jt(S):b!==0?f=jt(b):o||(o=c&~t,o!==0&&(f=jt(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function Dt(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function qt(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kt(){var t=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),t}function sn(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Wt(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function rn(t,r,o,c,f,m){var b=t.pendingLanes;t.pendingLanes=o,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=o,t.entangledLanes&=o,t.errorRecoveryDisabledLanes&=o,t.shellSuspendCounter=0;var S=t.entanglements,V=t.expirationTimes,ee=t.hiddenUpdates;for(o=b&~o;0<o;){var pe=31-Ve(o),Te=1<<pe;S[pe]=0,V[pe]=-1;var se=ee[pe];if(se!==null)for(ee[pe]=null,pe=0;pe<se.length;pe++){var le=se[pe];le!==null&&(le.lane&=-536870913)}o&=~Te}c!==0&&un(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~r))}function un(t,r,o){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-Ve(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|o&261930}function dn(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var c=31-Ve(o),f=1<<c;f&r|t[c]&r&&(t[c]|=r),o&=~f}}function Sn(t,r){var o=r&-r;return o=(o&42)!==0?1:F(o),(o&(t.suspendedLanes|r))!==0?0:o}function F(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function de(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function me(){var t=ke.p;return t!==0?t:(t=window.event,t===void 0?32:V0(t.type))}function ye(t,r){var o=ke.p;try{return ke.p=t,r()}finally{ke.p=o}}var he=Math.random().toString(36).slice(2),$e="__reactFiber$"+he,ft="__reactProps$"+he,et="__reactContainer$"+he,ht="__reactEvents$"+he,mt="__reactListeners$"+he,an="__reactHandles$"+he,Ss="__reactResources$"+he,qn="__reactMarker$"+he;function Yn(t){delete t[$e],delete t[ft],delete t[ht],delete t[mt],delete t[an]}function fn(t){var r=t[$e];if(r)return r;for(var o=t.parentNode;o;){if(r=o[et]||o[$e]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=_0(t);t!==null;){if(o=t[$e])return o;t=_0(t)}return r}t=o,o=t.parentNode}return null}function z(t){if(t=t[$e]||t[et]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function oe(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function T(t){var r=t[Ss];return r||(r=t[Ss]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function C(t){t[qn]=!0}var G=new Set,J={};function Fe(t,r){Le(t,r),Le(t+"Capture",r)}function Le(t,r){for(J[t]=r,t=0;t<r.length;t++)G.add(r[t])}var De=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ot={},xt={};function H(t){return ct.call(xt,t)?!0:ct.call(Ot,t)?!1:De.test(t)?xt[t]=!0:(Ot[t]=!0,!1)}function ue(t,r,o){if(H(r))if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+o)}}function re(t,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+o)}}function Se(t,r,o,c){if(c===null)t.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttributeNS(r,o,""+c)}}function Ie(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rt(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Rt(t,r,o){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){o=""+b,m.call(this,b)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(b){o=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function at(t){if(!t._valueTracker){var r=rt(t)?"checked":"value";t._valueTracker=Rt(t,r,""+t[r])}}function Qt(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return t&&(c=rt(t)?t.checked?"true":"false":t.value),t=c,t!==o?(r.setValue(t),!0):!1}function On(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var mn=/[\n"\\]/g;function Mn(t){return t.replace(mn,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Fa(t,r,o,c,f,m,b,S){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ie(r)):t.value!==""+Ie(r)&&(t.value=""+Ie(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?qa(t,b,Ie(r)):o!=null?qa(t,b,Ie(o)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Ie(S):t.removeAttribute("name")}function Fi(t,r,o,c,f,m,b,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){at(t);return}o=o!=null?""+Ie(o):"",r=r!=null?""+Ie(r):o,S||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=S?t.checked:!!c,t.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),at(t)}function qa(t,r,o){r==="number"&&On(t.ownerDocument)===t||t.defaultValue===""+o||(t.defaultValue=""+o)}function xr(t,r,o,c){if(t=t.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<t.length;o++)f=r.hasOwnProperty("$"+t[o].value),t[o].selected!==f&&(t[o].selected=f),f&&c&&(t[o].defaultSelected=!0)}else{for(o=""+Ie(o),r=null,f=0;f<t.length;f++){if(t[f].value===o){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function hn(t,r,o){if(r!=null&&(r=""+Ie(r),r!==t.value&&(t.value=r),o==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=o!=null?""+Ie(o):""}function Hn(t,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(a(92));if(pt(c)){if(1<c.length)throw Error(a(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=Ie(r),t.defaultValue=o,c=t.textContent,c===o&&c!==""&&c!==null&&(t.value=c),at(t)}function $n(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var wr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _r(t,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,o):typeof o!="number"||o===0||wr.has(r)?r==="float"?t.cssFloat=o:t[r]=(""+o).trim():t[r]=o+"px"}function vs(t,r,o){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&o[f]!==c&&_r(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&_r(t,m,r[m])}function Ns(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ha(t){return kr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ps(){}var Hl=null;function rr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $a=null,Fr=null;function qi(t){var r=z(t);if(r&&(t=r.stateNode)){var o=t[ft]||null;e:switch(t=r.stateNode,r.type){case"input":if(Fa(t,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Mn(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==t&&c.form===t.form){var f=c[ft]||null;if(!f)throw Error(a(90));Fa(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===t.form&&Qt(c)}break e;case"textarea":hn(t,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&xr(t,!!o.multiple,r,!1)}}}var Io=!1;function Wa(t,r,o){if(Io)return t(r,o);Io=!0;try{var c=t(r);return c}finally{if(Io=!1,($a!==null||Fr!==null)&&(vh(),$a&&(r=$a,t=Fr,Fr=$a=null,qi(r),t)))for(r=0;r<t.length;r++)qi(t[r])}}function Tr(t,r){var o=t.stateNode;if(o===null)return null;var c=o[ft]||null;if(c===null)return null;o=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(a(231,r,typeof o));return o}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hi=!1;if(ar)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){Hi=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{Hi=!1}var qr=null,$l=null,$i=null;function Wl(){if($i)return $i;var t,r=$l,o=r.length,c,f="value"in qr?qr.value:qr.textContent,m=f.length;for(t=0;t<o&&r[t]===f[t];t++);var b=o-t;for(c=1;c<=b&&r[o-c]===f[m-c];c++);return $i=f.slice(t,1<c?1-c:void 0)}function Wi(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function da(){return!0}function Er(){return!1}function bs(t){function r(o,c,f,m,b){this._reactName=o,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(o=t[S],this[S]=o?o(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?da:Er,this.isPropagationStopped=Er,this}return k(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=da)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=da)},persist:function(){},isPersistent:da}),r}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hr=bs(fa),Ga=k({},fa,{view:0,detail:0}),Gl=bs(Ga),Ka,Mo,$r,Do=k({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$r&&($r&&t.type==="mousemove"?(Ka=t.screenX-$r.screenX,Mo=t.screenY-$r.screenY):Mo=Ka=0,$r=t),Ka)},movementY:function(t){return"movementY"in t?t.movementY:Mo}}),Kl=bs(Do),Gi=k({},Do,{dataTransfer:0}),ju=bs(Gi),Su=k({},Ga,{relatedTarget:0}),Ki=bs(Su),Yl=k({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),Nu=bs(Yl),Po=k({},fa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cu=bs(Po),Ru=k({},fa,{data:0}),Wr=bs(Ru),Au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Du(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Mu[t])?!!r[t]:!1}function Ya(){return Du}var Ls=k({},Ga,{key:function(t){if(t.key){var r=Au[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Wi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Iu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(t){return t.type==="keypress"?Wi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pu=bs(Ls),Lu=k({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ma=bs(Lu),h=k({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),v=bs(h),w=k({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=bs(w),X=k({},Do,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=bs(X),qe=k({},fa,{newState:0,oldState:0}),Vt=bs(qe),es=[9,13,27,32],yn=ar&&"CompositionEvent"in window,Vn=null;ar&&"documentMode"in document&&(Vn=document.documentMode);var ir=ar&&"TextEvent"in window&&!Vn,Gr=ar&&(!yn||Vn&&8<Vn&&11>=Vn),jr=" ",Sr=!1;function Yi(t,r){switch(t){case"keyup":return es.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oo=!1;function ck(t,r){switch(t){case"compositionend":return Lo(r);case"keypress":return r.which!==32?null:(Sr=!0,jr);case"textInput":return t=r.data,t===jr&&Sr?null:t;default:return null}}function uk(t,r){if(Oo)return t==="compositionend"||!yn&&Yi(t,r)?(t=Wl(),$i=$l=qr=null,Oo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Gr&&r.locale!=="ko"?null:r.data;default:return null}}var hk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ey(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!hk[t.type]:r==="textarea"}function jy(t,r,o,c){$a?Fr?Fr.push(c):Fr=[c]:$a=c,r=Eh(r,"onChange"),0<r.length&&(o=new Hr("onChange","change",null,o,c),t.push({event:o,listeners:r}))}var Ql=null,Xl=null;function dk(t){l0(t,0)}function Ou(t){var r=oe(t);if(Qt(r))return t}function Sy(t,r){if(t==="change")return r}var Ny=!1;if(ar){var af;if(ar){var of="oninput"in document;if(!of){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),of=typeof Cy.oninput=="function"}af=of}else af=!1;Ny=af&&(!document.documentMode||9<document.documentMode)}function Ry(){Ql&&(Ql.detachEvent("onpropertychange",Ay),Xl=Ql=null)}function Ay(t){if(t.propertyName==="value"&&Ou(Xl)){var r=[];jy(r,Xl,t,rr(t)),Wa(dk,r)}}function fk(t,r,o){t==="focusin"?(Ry(),Ql=r,Xl=o,Ql.attachEvent("onpropertychange",Ay)):t==="focusout"&&Ry()}function mk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ou(Xl)}function pk(t,r){if(t==="click")return Ou(r)}function gk(t,r){if(t==="input"||t==="change")return Ou(r)}function yk(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Ks=typeof Object.is=="function"?Object.is:yk;function Jl(t,r){if(Ks(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var f=o[c];if(!ct.call(r,f)||!Ks(t[f],r[f]))return!1}return!0}function Iy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function My(t,r){var o=Iy(t);t=0;for(var c;o;){if(o.nodeType===3){if(c=t+o.textContent.length,t<=r&&c>=r)return{node:o,offset:r-t};t=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Iy(o)}}function Dy(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Dy(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Py(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=On(t.document);r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=On(t.document)}return r}function lf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var vk=ar&&"documentMode"in document&&11>=document.documentMode,Vo=null,cf=null,Zl=null,uf=!1;function Ly(t,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;uf||Vo==null||Vo!==On(c)||(c=Vo,"selectionStart"in c&&lf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Zl&&Jl(Zl,c)||(Zl=c,c=Eh(cf,"onSelect"),0<c.length&&(r=new Hr("onSelect","select",null,r,o),t.push({event:r,listeners:c}),r.target=Vo)))}function Qi(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var Bo={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionrun:Qi("Transition","TransitionRun"),transitionstart:Qi("Transition","TransitionStart"),transitioncancel:Qi("Transition","TransitionCancel"),transitionend:Qi("Transition","TransitionEnd")},hf={},Oy={};ar&&(Oy=document.createElement("div").style,"AnimationEvent"in window||(delete Bo.animationend.animation,delete Bo.animationiteration.animation,delete Bo.animationstart.animation),"TransitionEvent"in window||delete Bo.transitionend.transition);function Xi(t){if(hf[t])return hf[t];if(!Bo[t])return t;var r=Bo[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Oy)return hf[t]=r[o];return t}var Vy=Xi("animationend"),By=Xi("animationiteration"),Uy=Xi("animationstart"),bk=Xi("transitionrun"),xk=Xi("transitionstart"),wk=Xi("transitioncancel"),zy=Xi("transitionend"),Fy=new Map,df="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");df.push("scrollEnd");function Nr(t,r){Fy.set(t,r),Fe(r,[t])}var Vu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},or=[],Uo=0,ff=0;function Bu(){for(var t=Uo,r=ff=Uo=0;r<t;){var o=or[r];or[r++]=null;var c=or[r];or[r++]=null;var f=or[r];or[r++]=null;var m=or[r];if(or[r++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}m!==0&&qy(o,f,m)}}function Uu(t,r,o,c){or[Uo++]=t,or[Uo++]=r,or[Uo++]=o,or[Uo++]=c,ff|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function mf(t,r,o,c){return Uu(t,r,o,c),zu(t)}function Ji(t,r){return Uu(t,null,null,r),zu(t)}function qy(t,r,o){t.lanes|=o;var c=t.alternate;c!==null&&(c.lanes|=o);for(var f=!1,m=t.return;m!==null;)m.childLanes|=o,c=m.alternate,c!==null&&(c.childLanes|=o),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-Ve(o),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=o|536870912),m):null}function zu(t){if(50<wc)throw wc=0,km=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var zo={};function _k(t,r,o,c){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(t,r,o,c){return new _k(t,r,o,c)}function pf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pa(t,r){var o=t.alternate;return o===null?(o=Ys(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&65011712,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o.refCleanup=t.refCleanup,o}function Hy(t,r){t.flags&=65011714;var o=t.alternate;return o===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=o.childLanes,t.lanes=o.lanes,t.child=o.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=o.memoizedProps,t.memoizedState=o.memoizedState,t.updateQueue=o.updateQueue,t.type=o.type,r=o.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Fu(t,r,o,c,f,m){var b=0;if(c=t,typeof t=="function")pf(t)&&(b=1);else if(typeof t=="string")b=ST(t,o,Ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Ys(31,o,r,f),t.elementType=R,t.lanes=m,t;case B:return Zi(o.children,f,m,r);case L:b=8,f|=24;break;case te:return t=Ys(12,o,r,f|2),t.elementType=te,t.lanes=m,t;case Ue:return t=Ys(13,o,r,f),t.elementType=Ue,t.lanes=m,t;case Ae:return t=Ys(19,o,r,f),t.elementType=Ae,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ce:b=10;break e;case Q:b=9;break e;case ve:b=11;break e;case A:b=14;break e;case E:b=16,c=null;break e}b=29,o=Error(a(130,t===null?"null":typeof t,"")),c=null}return r=Ys(b,o,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function Zi(t,r,o,c){return t=Ys(7,t,c,r),t.lanes=o,t}function gf(t,r,o){return t=Ys(6,t,null,r),t.lanes=o,t}function $y(t){var r=Ys(18,null,null,0);return r.stateNode=t,r}function yf(t,r,o){return r=Ys(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Wy=new WeakMap;function lr(t,r){if(typeof t=="object"&&t!==null){var o=Wy.get(t);return o!==void 0?o:(r={value:t,source:r,stack:At(r)},Wy.set(t,r),r)}return{value:t,source:r,stack:At(r)}}var Fo=[],qo=0,qu=null,ec=0,cr=[],ur=0,Qa=null,Kr=1,Yr="";function ga(t,r){Fo[qo++]=ec,Fo[qo++]=qu,qu=t,ec=r}function Gy(t,r,o){cr[ur++]=Kr,cr[ur++]=Yr,cr[ur++]=Qa,Qa=t;var c=Kr;t=Yr;var f=32-Ve(c)-1;c&=~(1<<f),o+=1;var m=32-Ve(r)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,Kr=1<<32-Ve(r)+f|o<<f|c,Yr=m+t}else Kr=1<<m|o<<f|c,Yr=t}function vf(t){t.return!==null&&(ga(t,1),Gy(t,1,0))}function bf(t){for(;t===qu;)qu=Fo[--qo],Fo[qo]=null,ec=Fo[--qo],Fo[qo]=null;for(;t===Qa;)Qa=cr[--ur],cr[ur]=null,Yr=cr[--ur],cr[ur]=null,Kr=cr[--ur],cr[ur]=null}function Ky(t,r){cr[ur++]=Kr,cr[ur++]=Yr,cr[ur++]=Qa,Kr=r.id,Yr=r.overflow,Qa=t}var xs=null,Dn=null,on=!1,Xa=null,hr=!1,xf=Error(a(519));function Ja(t){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tc(lr(r,t)),xf}function Yy(t){var r=t.stateNode,o=t.type,c=t.memoizedProps;switch(r[$e]=t,r[ft]=c,o){case"dialog":Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":case"embed":Yt("load",r);break;case"video":case"audio":for(o=0;o<kc.length;o++)Yt(kc[o],r);break;case"source":Yt("error",r);break;case"img":case"image":case"link":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"input":Yt("invalid",r),Fi(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Yt("invalid",r);break;case"textarea":Yt("invalid",r),Hn(r,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||d0(r.textContent,o)?(c.popover!=null&&(Yt("beforetoggle",r),Yt("toggle",r)),c.onScroll!=null&&Yt("scroll",r),c.onScrollEnd!=null&&Yt("scrollend",r),c.onClick!=null&&(r.onclick=Ps),r=!0):r=!1,r||Ja(t,!0)}function Qy(t){for(xs=t.return;xs;)switch(xs.tag){case 5:case 31:case 13:hr=!1;return;case 27:case 3:hr=!0;return;default:xs=xs.return}}function Ho(t){if(t!==xs)return!1;if(!on)return Qy(t),on=!0,!1;var r=t.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=t.type,o=!(o!=="form"&&o!=="button")||Vm(t.type,t.memoizedProps)),o=!o),o&&Dn&&Ja(t),Qy(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Dn=w0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Dn=w0(t)}else r===27?(r=Dn,di(t.type)?(t=qm,qm=null,Dn=t):Dn=r):Dn=xs?fr(t.stateNode.nextSibling):null;return!0}function eo(){Dn=xs=null,on=!1}function wf(){var t=Xa;return t!==null&&(qs===null?qs=t:qs.push.apply(qs,t),Xa=null),t}function tc(t){Xa===null?Xa=[t]:Xa.push(t)}var _f=O(null),to=null,ya=null;function Za(t,r,o){ge(_f,r._currentValue),r._currentValue=o}function va(t){t._currentValue=_f.current,W(_f)}function kf(t,r,o){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===o)break;t=t.return}}function Tf(t,r,o,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var V=0;V<r.length;V++)if(S.context===r[V]){m.lanes|=o,S=m.alternate,S!==null&&(S.lanes|=o),kf(m.return,o,t),c||(b=null);break e}m=S.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(a(341));b.lanes|=o,m=b.alternate,m!==null&&(m.lanes|=o),kf(b,o,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function $o(t,r,o,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var S=f.type;Ks(f.pendingProps.value,b.value)||(t!==null?t.push(S):t=[S])}}else if(f===nt.current){if(b=f.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Nc):t=[Nc])}f=f.return}t!==null&&Tf(r,t,o,c),r.flags|=262144}function Hu(t){for(t=t.firstContext;t!==null;){if(!Ks(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function no(t){to=t,ya=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ws(t){return Xy(to,t)}function $u(t,r){return to===null&&no(t),Xy(t,r)}function Xy(t,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ya===null){if(t===null)throw Error(a(308));ya=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ya=ya.next=r;return o}var kk=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(o,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(o){return o()})}},Tk=s.unstable_scheduleCallback,Ek=s.unstable_NormalPriority,is={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ef(){return{controller:new kk,data:new Map,refCount:0}}function nc(t){t.refCount--,t.refCount===0&&Tk(Ek,function(){t.controller.abort()})}var sc=null,jf=0,Wo=0,Go=null;function jk(t,r){if(sc===null){var o=sc=[];jf=0,Wo=Cm(),Go={status:"pending",value:void 0,then:function(c){o.push(c)}}}return jf++,r.then(Jy,Jy),r}function Jy(){if(--jf===0&&sc!==null){Go!==null&&(Go.status="fulfilled");var t=sc;sc=null,Wo=0,Go=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Sk(t,r){var o=[],c={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),c}var Zy=Y.S;Y.S=function(t,r){Lb=Ut(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&jk(t,r),Zy!==null&&Zy(t,r)};var so=O(null);function Sf(){var t=so.current;return t!==null?t:Nn.pooledCache}function Wu(t,r){r===null?ge(so,so.current):ge(so,r.pool)}function ev(){var t=Sf();return t===null?null:{parent:is._currentValue,pool:t}}var Ko=Error(a(460)),Nf=Error(a(474)),Gu=Error(a(542)),Ku={then:function(){}};function tv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function nv(t,r,o){switch(o=t[o],o===void 0?t.push(r):o!==r&&(r.then(Ps,Ps),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,rv(t),t;default:if(typeof r.status=="string")r.then(Ps,Ps);else{if(t=Nn,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,rv(t),t}throw ao=r,Ko}}function ro(t){try{var r=t._init;return r(t._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ao=o,Ko):o}}var ao=null;function sv(){if(ao===null)throw Error(a(459));var t=ao;return ao=null,t}function rv(t){if(t===Ko||t===Gu)throw Error(a(483))}var Yo=null,rc=0;function Yu(t){var r=rc;return rc+=1,Yo===null&&(Yo=[]),nv(Yo,t,r)}function ac(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Qu(t,r){throw r.$$typeof===j?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function av(t){function r(K,q){if(t){var Z=K.deletions;Z===null?(K.deletions=[q],K.flags|=16):Z.push(q)}}function o(K,q){if(!t)return null;for(;q!==null;)r(K,q),q=q.sibling;return null}function c(K){for(var q=new Map;K!==null;)K.key!==null?q.set(K.key,K):q.set(K.index,K),K=K.sibling;return q}function f(K,q){return K=pa(K,q),K.index=0,K.sibling=null,K}function m(K,q,Z){return K.index=Z,t?(Z=K.alternate,Z!==null?(Z=Z.index,Z<q?(K.flags|=67108866,q):Z):(K.flags|=67108866,q)):(K.flags|=1048576,q)}function b(K){return t&&K.alternate===null&&(K.flags|=67108866),K}function S(K,q,Z,be){return q===null||q.tag!==6?(q=gf(Z,K.mode,be),q.return=K,q):(q=f(q,Z),q.return=K,q)}function V(K,q,Z,be){var gt=Z.type;return gt===B?pe(K,q,Z.props.children,be,Z.key):q!==null&&(q.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===E&&ro(gt)===q.type)?(q=f(q,Z.props),ac(q,Z),q.return=K,q):(q=Fu(Z.type,Z.key,Z.props,null,K.mode,be),ac(q,Z),q.return=K,q)}function ee(K,q,Z,be){return q===null||q.tag!==4||q.stateNode.containerInfo!==Z.containerInfo||q.stateNode.implementation!==Z.implementation?(q=yf(Z,K.mode,be),q.return=K,q):(q=f(q,Z.children||[]),q.return=K,q)}function pe(K,q,Z,be,gt){return q===null||q.tag!==7?(q=Zi(Z,K.mode,be,gt),q.return=K,q):(q=f(q,Z),q.return=K,q)}function Te(K,q,Z){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=gf(""+q,K.mode,Z),q.return=K,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case P:return Z=Fu(q.type,q.key,q.props,null,K.mode,Z),ac(Z,q),Z.return=K,Z;case $:return q=yf(q,K.mode,Z),q.return=K,q;case E:return q=ro(q),Te(K,q,Z)}if(pt(q)||U(q))return q=Zi(q,K.mode,Z,null),q.return=K,q;if(typeof q.then=="function")return Te(K,Yu(q),Z);if(q.$$typeof===ce)return Te(K,$u(K,q),Z);Qu(K,q)}return null}function se(K,q,Z,be){var gt=q!==null?q.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return gt!==null?null:S(K,q,""+Z,be);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:return Z.key===gt?V(K,q,Z,be):null;case $:return Z.key===gt?ee(K,q,Z,be):null;case E:return Z=ro(Z),se(K,q,Z,be)}if(pt(Z)||U(Z))return gt!==null?null:pe(K,q,Z,be,null);if(typeof Z.then=="function")return se(K,q,Yu(Z),be);if(Z.$$typeof===ce)return se(K,q,$u(K,Z),be);Qu(K,Z)}return null}function le(K,q,Z,be,gt){if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return K=K.get(Z)||null,S(q,K,""+be,gt);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case P:return K=K.get(be.key===null?Z:be.key)||null,V(q,K,be,gt);case $:return K=K.get(be.key===null?Z:be.key)||null,ee(q,K,be,gt);case E:return be=ro(be),le(K,q,Z,be,gt)}if(pt(be)||U(be))return K=K.get(Z)||null,pe(q,K,be,gt,null);if(typeof be.then=="function")return le(K,q,Z,Yu(be),gt);if(be.$$typeof===ce)return le(K,q,Z,$u(q,be),gt);Qu(q,be)}return null}function it(K,q,Z,be){for(var gt=null,pn=null,ut=q,zt=q=0,Jt=null;ut!==null&&zt<Z.length;zt++){ut.index>zt?(Jt=ut,ut=null):Jt=ut.sibling;var gn=se(K,ut,Z[zt],be);if(gn===null){ut===null&&(ut=Jt);break}t&&ut&&gn.alternate===null&&r(K,ut),q=m(gn,q,zt),pn===null?gt=gn:pn.sibling=gn,pn=gn,ut=Jt}if(zt===Z.length)return o(K,ut),on&&ga(K,zt),gt;if(ut===null){for(;zt<Z.length;zt++)ut=Te(K,Z[zt],be),ut!==null&&(q=m(ut,q,zt),pn===null?gt=ut:pn.sibling=ut,pn=ut);return on&&ga(K,zt),gt}for(ut=c(ut);zt<Z.length;zt++)Jt=le(ut,K,zt,Z[zt],be),Jt!==null&&(t&&Jt.alternate!==null&&ut.delete(Jt.key===null?zt:Jt.key),q=m(Jt,q,zt),pn===null?gt=Jt:pn.sibling=Jt,pn=Jt);return t&&ut.forEach(function(yi){return r(K,yi)}),on&&ga(K,zt),gt}function wt(K,q,Z,be){if(Z==null)throw Error(a(151));for(var gt=null,pn=null,ut=q,zt=q=0,Jt=null,gn=Z.next();ut!==null&&!gn.done;zt++,gn=Z.next()){ut.index>zt?(Jt=ut,ut=null):Jt=ut.sibling;var yi=se(K,ut,gn.value,be);if(yi===null){ut===null&&(ut=Jt);break}t&&ut&&yi.alternate===null&&r(K,ut),q=m(yi,q,zt),pn===null?gt=yi:pn.sibling=yi,pn=yi,ut=Jt}if(gn.done)return o(K,ut),on&&ga(K,zt),gt;if(ut===null){for(;!gn.done;zt++,gn=Z.next())gn=Te(K,gn.value,be),gn!==null&&(q=m(gn,q,zt),pn===null?gt=gn:pn.sibling=gn,pn=gn);return on&&ga(K,zt),gt}for(ut=c(ut);!gn.done;zt++,gn=Z.next())gn=le(ut,K,zt,gn.value,be),gn!==null&&(t&&gn.alternate!==null&&ut.delete(gn.key===null?zt:gn.key),q=m(gn,q,zt),pn===null?gt=gn:pn.sibling=gn,pn=gn);return t&&ut.forEach(function(VT){return r(K,VT)}),on&&ga(K,zt),gt}function jn(K,q,Z,be){if(typeof Z=="object"&&Z!==null&&Z.type===B&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:e:{for(var gt=Z.key;q!==null;){if(q.key===gt){if(gt=Z.type,gt===B){if(q.tag===7){o(K,q.sibling),be=f(q,Z.props.children),be.return=K,K=be;break e}}else if(q.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===E&&ro(gt)===q.type){o(K,q.sibling),be=f(q,Z.props),ac(be,Z),be.return=K,K=be;break e}o(K,q);break}else r(K,q);q=q.sibling}Z.type===B?(be=Zi(Z.props.children,K.mode,be,Z.key),be.return=K,K=be):(be=Fu(Z.type,Z.key,Z.props,null,K.mode,be),ac(be,Z),be.return=K,K=be)}return b(K);case $:e:{for(gt=Z.key;q!==null;){if(q.key===gt)if(q.tag===4&&q.stateNode.containerInfo===Z.containerInfo&&q.stateNode.implementation===Z.implementation){o(K,q.sibling),be=f(q,Z.children||[]),be.return=K,K=be;break e}else{o(K,q);break}else r(K,q);q=q.sibling}be=yf(Z,K.mode,be),be.return=K,K=be}return b(K);case E:return Z=ro(Z),jn(K,q,Z,be)}if(pt(Z))return it(K,q,Z,be);if(U(Z)){if(gt=U(Z),typeof gt!="function")throw Error(a(150));return Z=gt.call(Z),wt(K,q,Z,be)}if(typeof Z.then=="function")return jn(K,q,Yu(Z),be);if(Z.$$typeof===ce)return jn(K,q,$u(K,Z),be);Qu(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,q!==null&&q.tag===6?(o(K,q.sibling),be=f(q,Z),be.return=K,K=be):(o(K,q),be=gf(Z,K.mode,be),be.return=K,K=be),b(K)):o(K,q)}return function(K,q,Z,be){try{rc=0;var gt=jn(K,q,Z,be);return Yo=null,gt}catch(ut){if(ut===Ko||ut===Gu)throw ut;var pn=Ys(29,ut,null,K.mode);return pn.lanes=be,pn.return=K,pn}}}var io=av(!0),iv=av(!1),ei=!1;function Cf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ti(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ni(t,r,o){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(vn&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=zu(t),qy(t,null,o),r}return Uu(t,c,r,o),zu(t)}function ic(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,dn(t,o)}}function Af(t,r){var o=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}var If=!1;function oc(){if(If){var t=Go;if(t!==null)throw t}}function lc(t,r,o,c){If=!1;var f=t.updateQueue;ei=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var V=S,ee=V.next;V.next=null,b===null?m=ee:b.next=ee,b=V;var pe=t.alternate;pe!==null&&(pe=pe.updateQueue,S=pe.lastBaseUpdate,S!==b&&(S===null?pe.firstBaseUpdate=ee:S.next=ee,pe.lastBaseUpdate=V))}if(m!==null){var Te=f.baseState;b=0,pe=ee=V=null,S=m;do{var se=S.lane&-536870913,le=se!==S.lane;if(le?(Xt&se)===se:(c&se)===se){se!==0&&se===Wo&&(If=!0),pe!==null&&(pe=pe.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var it=t,wt=S;se=r;var jn=o;switch(wt.tag){case 1:if(it=wt.payload,typeof it=="function"){Te=it.call(jn,Te,se);break e}Te=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=wt.payload,se=typeof it=="function"?it.call(jn,Te,se):it,se==null)break e;Te=k({},Te,se);break e;case 2:ei=!0}}se=S.callback,se!==null&&(t.flags|=64,le&&(t.flags|=8192),le=f.callbacks,le===null?f.callbacks=[se]:le.push(se))}else le={lane:se,tag:S.tag,payload:S.payload,callback:S.callback,next:null},pe===null?(ee=pe=le,V=Te):pe=pe.next=le,b|=se;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;le=S,S=le.next,le.next=null,f.lastBaseUpdate=le,f.shared.pending=null}}while(!0);pe===null&&(V=Te),f.baseState=V,f.firstBaseUpdate=ee,f.lastBaseUpdate=pe,m===null&&(f.shared.lanes=0),oi|=b,t.lanes=b,t.memoizedState=Te}}function ov(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function lv(t,r){var o=t.callbacks;if(o!==null)for(t.callbacks=null,t=0;t<o.length;t++)ov(o[t],r)}var Qo=O(null),Xu=O(0);function cv(t,r){t=Sa,ge(Xu,t),ge(Qo,r),Sa=t|r.baseLanes}function Mf(){ge(Xu,Sa),ge(Qo,Qo.current)}function Df(){Sa=Xu.current,W(Qo),W(Xu)}var Qs=O(null),dr=null;function si(t){var r=t.alternate;ge(ts,ts.current&1),ge(Qs,t),dr===null&&(r===null||Qo.current!==null||r.memoizedState!==null)&&(dr=t)}function Pf(t){ge(ts,ts.current),ge(Qs,t),dr===null&&(dr=t)}function uv(t){t.tag===22?(ge(ts,ts.current),ge(Qs,t),dr===null&&(dr=t)):ri()}function ri(){ge(ts,ts.current),ge(Qs,Qs.current)}function Xs(t){W(Qs),dr===t&&(dr=null),W(ts)}var ts=O(0);function Ju(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||zm(o)||Fm(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ba=0,Bt=null,Tn=null,os=null,Zu=!1,Xo=!1,oo=!1,eh=0,cc=0,Jo=null,Nk=0;function Qn(){throw Error(a(321))}function Lf(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Ks(t[o],r[o]))return!1;return!0}function Of(t,r,o,c,f,m){return ba=m,Bt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?Gv:Jf,oo=!1,m=o(c,f),oo=!1,Xo&&(m=dv(r,o,c,f)),hv(t),m}function hv(t){Y.H=dc;var r=Tn!==null&&Tn.next!==null;if(ba=0,os=Tn=Bt=null,Zu=!1,cc=0,Jo=null,r)throw Error(a(300));t===null||ls||(t=t.dependencies,t!==null&&Hu(t)&&(ls=!0))}function dv(t,r,o,c){Bt=t;var f=0;do{if(Xo&&(Jo=null),cc=0,Xo=!1,25<=f)throw Error(a(301));if(f+=1,os=Tn=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=Kv,m=r(o,c)}while(Xo);return m}function Ck(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?uc(r):r,t=t.useState()[0],(Tn!==null?Tn.memoizedState:null)!==t&&(Bt.flags|=1024),r}function Vf(){var t=eh!==0;return eh=0,t}function Bf(t,r,o){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~o}function Uf(t){if(Zu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Zu=!1}ba=0,os=Tn=Bt=null,Xo=!1,cc=eh=0,Jo=null}function Os(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return os===null?Bt.memoizedState=os=t:os=os.next=t,os}function ns(){if(Tn===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=Tn.next;var r=os===null?Bt.memoizedState:os.next;if(r!==null)os=r,Tn=t;else{if(t===null)throw Bt.alternate===null?Error(a(467)):Error(a(310));Tn=t,t={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},os===null?Bt.memoizedState=os=t:os=os.next=t}return os}function th(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uc(t){var r=cc;return cc+=1,Jo===null&&(Jo=[]),t=nv(Jo,t,r),r=Bt,(os===null?r.memoizedState:os.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?Gv:Jf),t}function nh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return uc(t);if(t.$$typeof===ce)return ws(t)}throw Error(a(438,String(t)))}function zf(t){var r=null,o=Bt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=Bt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=th(),Bt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(t),c=0;c<t;c++)o[c]=D;return r.index++,o}function xa(t,r){return typeof r=="function"?r(t):r}function sh(t){var r=ns();return Ff(r,Tn,t)}function Ff(t,r,o){var c=t.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=o;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var S=b=null,V=null,ee=r,pe=!1;do{var Te=ee.lane&-536870913;if(Te!==ee.lane?(Xt&Te)===Te:(ba&Te)===Te){var se=ee.revertLane;if(se===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),Te===Wo&&(pe=!0);else if((ba&se)===se){ee=ee.next,se===Wo&&(pe=!0);continue}else Te={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},V===null?(S=V=Te,b=m):V=V.next=Te,Bt.lanes|=se,oi|=se;Te=ee.action,oo&&o(m,Te),m=ee.hasEagerState?ee.eagerState:o(m,Te)}else se={lane:Te,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},V===null?(S=V=se,b=m):V=V.next=se,Bt.lanes|=Te,oi|=Te;ee=ee.next}while(ee!==null&&ee!==r);if(V===null?b=m:V.next=S,!Ks(m,t.memoizedState)&&(ls=!0,pe&&(o=Go,o!==null)))throw o;t.memoizedState=m,t.baseState=b,t.baseQueue=V,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function qf(t){var r=ns(),o=r.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=t;var c=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);Ks(m,r.memoizedState)||(ls=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,c]}function fv(t,r,o){var c=Bt,f=ns(),m=on;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=r();var b=!Ks((Tn||f).memoizedState,o);if(b&&(f.memoizedState=o,ls=!0),f=f.queue,Wf(gv.bind(null,c,f,t),[t]),f.getSnapshot!==r||b||os!==null&&os.memoizedState.tag&1){if(c.flags|=2048,Zo(9,{destroy:void 0},pv.bind(null,c,f,o,r),null),Nn===null)throw Error(a(349));m||(ba&127)!==0||mv(c,r,o)}return o}function mv(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Bt.updateQueue,r===null?(r=th(),Bt.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function pv(t,r,o,c){r.value=o,r.getSnapshot=c,yv(r)&&vv(t)}function gv(t,r,o){return o(function(){yv(r)&&vv(t)})}function yv(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Ks(t,o)}catch{return!0}}function vv(t){var r=Ji(t,2);r!==null&&Hs(r,t,2)}function Hf(t){var r=Os();if(typeof t=="function"){var o=t;if(t=o(),oo){We(!0);try{o()}finally{We(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},r}function bv(t,r,o,c){return t.baseState=o,Ff(t,Tn,typeof c=="function"?c:xa)}function Rk(t,r,o,c,f){if(ih(t))throw Error(a(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};Y.T!==null?o(!0):m.isTransition=!1,c(m),o=r.pending,o===null?(m.next=r.pending=m,xv(r,m)):(m.next=o.next,r.pending=o.next=m)}}function xv(t,r){var o=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=Y.T,b={};Y.T=b;try{var S=o(f,c),V=Y.S;V!==null&&V(b,S),wv(t,r,S)}catch(ee){$f(t,r,ee)}finally{m!==null&&b.types!==null&&(m.types=b.types),Y.T=m}}else try{m=o(f,c),wv(t,r,m)}catch(ee){$f(t,r,ee)}}function wv(t,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){_v(t,r,c)},function(c){return $f(t,r,c)}):_v(t,r,o)}function _v(t,r,o){r.status="fulfilled",r.value=o,kv(r),t.state=o,r=t.pending,r!==null&&(o=r.next,o===r?t.pending=null:(o=o.next,r.next=o,xv(t,o)))}function $f(t,r,o){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,kv(r),r=r.next;while(r!==c)}t.action=null}function kv(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Tv(t,r){return r}function Ev(t,r){if(on){var o=Nn.formState;if(o!==null){e:{var c=Bt;if(on){if(Dn){t:{for(var f=Dn,m=hr;f.nodeType!==8;){if(!m){f=null;break t}if(f=fr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Dn=fr(f.nextSibling),c=f.data==="F!";break e}}Ja(c)}c=!1}c&&(r=o[0])}}return o=Os(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tv,lastRenderedState:r},o.queue=c,o=Hv.bind(null,Bt,c),c.dispatch=o,c=Hf(!1),m=Xf.bind(null,Bt,!1,c.queue),c=Os(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,o=Rk.bind(null,Bt,f,m,o),f.dispatch=o,c.memoizedState=t,[r,o,!1]}function jv(t){var r=ns();return Sv(r,Tn,t)}function Sv(t,r,o){if(r=Ff(t,r,Tv)[0],t=sh(xa)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=uc(r)}catch(b){throw b===Ko?Gu:b}else c=r;r=ns();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Bt.flags|=2048,Zo(9,{destroy:void 0},Ak.bind(null,f,o),null)),[c,m,t]}function Ak(t,r){t.action=r}function Nv(t){var r=ns(),o=Tn;if(o!==null)return Sv(r,o,t);ns(),r=r.memoizedState,o=ns();var c=o.queue.dispatch;return o.memoizedState=t,[r,c,!1]}function Zo(t,r,o,c){return t={tag:t,create:o,deps:c,inst:r,next:null},r=Bt.updateQueue,r===null&&(r=th(),Bt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=t.next=t:(c=o.next,o.next=t,t.next=c,r.lastEffect=t),t}function Cv(){return ns().memoizedState}function rh(t,r,o,c){var f=Os();Bt.flags|=t,f.memoizedState=Zo(1|r,{destroy:void 0},o,c===void 0?null:c)}function ah(t,r,o,c){var f=ns();c=c===void 0?null:c;var m=f.memoizedState.inst;Tn!==null&&c!==null&&Lf(c,Tn.memoizedState.deps)?f.memoizedState=Zo(r,m,o,c):(Bt.flags|=t,f.memoizedState=Zo(1|r,m,o,c))}function Rv(t,r){rh(8390656,8,t,r)}function Wf(t,r){ah(2048,8,t,r)}function Ik(t){Bt.flags|=4;var r=Bt.updateQueue;if(r===null)r=th(),Bt.updateQueue=r,r.events=[t];else{var o=r.events;o===null?r.events=[t]:o.push(t)}}function Av(t){var r=ns().memoizedState;return Ik({ref:r,nextImpl:t}),function(){if((vn&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function Iv(t,r){return ah(4,2,t,r)}function Mv(t,r){return ah(4,4,t,r)}function Dv(t,r){if(typeof r=="function"){t=t();var o=r(t);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Pv(t,r,o){o=o!=null?o.concat([t]):null,ah(4,4,Dv.bind(null,r,t),o)}function Gf(){}function Lv(t,r){var o=ns();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&Lf(r,c[1])?c[0]:(o.memoizedState=[t,r],t)}function Ov(t,r){var o=ns();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&Lf(r,c[1]))return c[0];if(c=t(),oo){We(!0);try{t()}finally{We(!1)}}return o.memoizedState=[c,r],c}function Kf(t,r,o){return o===void 0||(ba&1073741824)!==0&&(Xt&261930)===0?t.memoizedState=r:(t.memoizedState=o,t=Vb(),Bt.lanes|=t,oi|=t,o)}function Vv(t,r,o,c){return Ks(o,r)?o:Qo.current!==null?(t=Kf(t,o,c),Ks(t,r)||(ls=!0),t):(ba&42)===0||(ba&1073741824)!==0&&(Xt&261930)===0?(ls=!0,t.memoizedState=o):(t=Vb(),Bt.lanes|=t,oi|=t,r)}function Bv(t,r,o,c,f){var m=ke.p;ke.p=m!==0&&8>m?m:8;var b=Y.T,S={};Y.T=S,Xf(t,!1,r,o);try{var V=f(),ee=Y.S;if(ee!==null&&ee(S,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var pe=Sk(V,c);hc(t,r,pe,er(t))}else hc(t,r,c,er(t))}catch(Te){hc(t,r,{then:function(){},status:"rejected",reason:Te},er())}finally{ke.p=m,b!==null&&S.types!==null&&(b.types=S.types),Y.T=b}}function Mk(){}function Yf(t,r,o,c){if(t.tag!==5)throw Error(a(476));var f=Uv(t).queue;Bv(t,f,r,Pe,o===null?Mk:function(){return zv(t),o(c)})}function Uv(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Pe,baseState:Pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:Pe},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:o},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function zv(t){var r=Uv(t);r.next===null&&(r=t.alternate.memoizedState),hc(t,r.next.queue,{},er())}function Qf(){return ws(Nc)}function Fv(){return ns().memoizedState}function qv(){return ns().memoizedState}function Dk(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var o=er();t=ti(o);var c=ni(r,t,o);c!==null&&(Hs(c,r,o),ic(c,r,o)),r={cache:Ef()},t.payload=r;return}r=r.return}}function Pk(t,r,o){var c=er();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ih(t)?$v(r,o):(o=mf(t,r,o,c),o!==null&&(Hs(o,t,c),Wv(o,r,c)))}function Hv(t,r,o){var c=er();hc(t,r,o,c)}function hc(t,r,o,c){var f={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(ih(t))$v(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,S=m(b,o);if(f.hasEagerState=!0,f.eagerState=S,Ks(S,b))return Uu(t,r,f,0),Nn===null&&Bu(),!1}catch{}if(o=mf(t,r,f,c),o!==null)return Hs(o,t,c),Wv(o,r,c),!0}return!1}function Xf(t,r,o,c){if(c={lane:2,revertLane:Cm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ih(t)){if(r)throw Error(a(479))}else r=mf(t,o,c,2),r!==null&&Hs(r,t,2)}function ih(t){var r=t.alternate;return t===Bt||r!==null&&r===Bt}function $v(t,r){Xo=Zu=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Wv(t,r,o){if((o&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,o|=c,r.lanes=o,dn(t,o)}}var dc={readContext:ws,use:nh,useCallback:Qn,useContext:Qn,useEffect:Qn,useImperativeHandle:Qn,useLayoutEffect:Qn,useInsertionEffect:Qn,useMemo:Qn,useReducer:Qn,useRef:Qn,useState:Qn,useDebugValue:Qn,useDeferredValue:Qn,useTransition:Qn,useSyncExternalStore:Qn,useId:Qn,useHostTransitionStatus:Qn,useFormState:Qn,useActionState:Qn,useOptimistic:Qn,useMemoCache:Qn,useCacheRefresh:Qn};dc.useEffectEvent=Qn;var Gv={readContext:ws,use:nh,useCallback:function(t,r){return Os().memoizedState=[t,r===void 0?null:r],t},useContext:ws,useEffect:Rv,useImperativeHandle:function(t,r,o){o=o!=null?o.concat([t]):null,rh(4194308,4,Dv.bind(null,r,t),o)},useLayoutEffect:function(t,r){return rh(4194308,4,t,r)},useInsertionEffect:function(t,r){rh(4,2,t,r)},useMemo:function(t,r){var o=Os();r=r===void 0?null:r;var c=t();if(oo){We(!0);try{t()}finally{We(!1)}}return o.memoizedState=[c,r],c},useReducer:function(t,r,o){var c=Os();if(o!==void 0){var f=o(r);if(oo){We(!0);try{o(r)}finally{We(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=Pk.bind(null,Bt,t),[c.memoizedState,t]},useRef:function(t){var r=Os();return t={current:t},r.memoizedState=t},useState:function(t){t=Hf(t);var r=t.queue,o=Hv.bind(null,Bt,r);return r.dispatch=o,[t.memoizedState,o]},useDebugValue:Gf,useDeferredValue:function(t,r){var o=Os();return Kf(o,t,r)},useTransition:function(){var t=Hf(!1);return t=Bv.bind(null,Bt,t.queue,!0,!1),Os().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,o){var c=Bt,f=Os();if(on){if(o===void 0)throw Error(a(407));o=o()}else{if(o=r(),Nn===null)throw Error(a(349));(Xt&127)!==0||mv(c,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,Rv(gv.bind(null,c,m,t),[t]),c.flags|=2048,Zo(9,{destroy:void 0},pv.bind(null,c,m,o,r),null),o},useId:function(){var t=Os(),r=Nn.identifierPrefix;if(on){var o=Yr,c=Kr;o=(c&~(1<<32-Ve(c)-1)).toString(32)+o,r="_"+r+"R_"+o,o=eh++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=Nk++,r="_"+r+"r_"+o.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Qf,useFormState:Ev,useActionState:Ev,useOptimistic:function(t){var r=Os();r.memoizedState=r.baseState=t;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Xf.bind(null,Bt,!0,o),o.dispatch=r,[t,r]},useMemoCache:zf,useCacheRefresh:function(){return Os().memoizedState=Dk.bind(null,Bt)},useEffectEvent:function(t){var r=Os(),o={impl:t};return r.memoizedState=o,function(){if((vn&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},Jf={readContext:ws,use:nh,useCallback:Lv,useContext:ws,useEffect:Wf,useImperativeHandle:Pv,useInsertionEffect:Iv,useLayoutEffect:Mv,useMemo:Ov,useReducer:sh,useRef:Cv,useState:function(){return sh(xa)},useDebugValue:Gf,useDeferredValue:function(t,r){var o=ns();return Vv(o,Tn.memoizedState,t,r)},useTransition:function(){var t=sh(xa)[0],r=ns().memoizedState;return[typeof t=="boolean"?t:uc(t),r]},useSyncExternalStore:fv,useId:Fv,useHostTransitionStatus:Qf,useFormState:jv,useActionState:jv,useOptimistic:function(t,r){var o=ns();return bv(o,Tn,t,r)},useMemoCache:zf,useCacheRefresh:qv};Jf.useEffectEvent=Av;var Kv={readContext:ws,use:nh,useCallback:Lv,useContext:ws,useEffect:Wf,useImperativeHandle:Pv,useInsertionEffect:Iv,useLayoutEffect:Mv,useMemo:Ov,useReducer:qf,useRef:Cv,useState:function(){return qf(xa)},useDebugValue:Gf,useDeferredValue:function(t,r){var o=ns();return Tn===null?Kf(o,t,r):Vv(o,Tn.memoizedState,t,r)},useTransition:function(){var t=qf(xa)[0],r=ns().memoizedState;return[typeof t=="boolean"?t:uc(t),r]},useSyncExternalStore:fv,useId:Fv,useHostTransitionStatus:Qf,useFormState:Nv,useActionState:Nv,useOptimistic:function(t,r){var o=ns();return Tn!==null?bv(o,Tn,t,r):(o.baseState=t,[t,o.queue.dispatch])},useMemoCache:zf,useCacheRefresh:qv};Kv.useEffectEvent=Av;function Zf(t,r,o,c){r=t.memoizedState,o=o(c,r),o=o==null?r:k({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var em={enqueueSetState:function(t,r,o){t=t._reactInternals;var c=er(),f=ti(c);f.payload=r,o!=null&&(f.callback=o),r=ni(t,f,c),r!==null&&(Hs(r,t,c),ic(r,t,c))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var c=er(),f=ti(c);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=ni(t,f,c),r!==null&&(Hs(r,t,c),ic(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=er(),c=ti(o);c.tag=2,r!=null&&(c.callback=r),r=ni(t,c,o),r!==null&&(Hs(r,t,o),ic(r,t,o))}};function Yv(t,r,o,c,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!Jl(o,c)||!Jl(f,m):!0}function Qv(t,r,o,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==t&&em.enqueueReplaceState(r,r.state,null)}function lo(t,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(t=t.defaultProps){o===r&&(o=k({},o));for(var f in t)o[f]===void 0&&(o[f]=t[f])}return o}function Xv(t){Vu(t)}function Jv(t){console.error(t)}function Zv(t){Vu(t)}function oh(t,r){try{var o=t.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function eb(t,r,o){try{var c=t.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function tm(t,r,o){return o=ti(o),o.tag=3,o.payload={element:null},o.callback=function(){oh(t,r)},o}function tb(t){return t=ti(t),t.tag=3,t}function nb(t,r,o,c){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){eb(r,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){eb(r,o,c),typeof f!="function"&&(li===null?li=new Set([this]):li.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function Lk(t,r,o,c,f){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&$o(r,o,f,!0),o=Qs.current,o!==null){switch(o.tag){case 31:case 13:return dr===null?bh():o.alternate===null&&Xn===0&&(Xn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,c===Ku?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),jm(t,c,f)),!1;case 22:return o.flags|=65536,c===Ku?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),jm(t,c,f)),!1}throw Error(a(435,o.tag))}return jm(t,c,f),bh(),!1}if(on)return r=Qs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==xf&&(t=Error(a(422),{cause:c}),tc(lr(t,o)))):(c!==xf&&(r=Error(a(423),{cause:c}),tc(lr(r,o))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=lr(c,o),f=tm(t.stateNode,c,f),Af(t,f),Xn!==4&&(Xn=2)),!1;var m=Error(a(520),{cause:c});if(m=lr(m,o),xc===null?xc=[m]:xc.push(m),Xn!==4&&(Xn=2),r===null)return!0;c=lr(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,t=f&-f,o.lanes|=t,t=tm(o.stateNode,c,t),Af(o,t),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(li===null||!li.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=tb(f),nb(f,t,o,c),Af(o,f),!1}o=o.return}while(o!==null);return!1}var nm=Error(a(461)),ls=!1;function _s(t,r,o,c){r.child=t===null?iv(r,null,o,c):io(r,t.child,o,c)}function sb(t,r,o,c,f){o=o.render;var m=r.ref;if("ref"in c){var b={};for(var S in c)S!=="ref"&&(b[S]=c[S])}else b=c;return no(r),c=Of(t,r,o,b,m,f),S=Vf(),t!==null&&!ls?(Bf(t,r,f),wa(t,r,f)):(on&&S&&vf(r),r.flags|=1,_s(t,r,c,f),r.child)}function rb(t,r,o,c,f){if(t===null){var m=o.type;return typeof m=="function"&&!pf(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,ab(t,r,m,c,f)):(t=Fu(o.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!um(t,f)){var b=m.memoizedProps;if(o=o.compare,o=o!==null?o:Jl,o(b,c)&&t.ref===r.ref)return wa(t,r,f)}return r.flags|=1,t=pa(m,c),t.ref=r.ref,t.return=r,r.child=t}function ab(t,r,o,c,f){if(t!==null){var m=t.memoizedProps;if(Jl(m,c)&&t.ref===r.ref)if(ls=!1,r.pendingProps=c=m,um(t,f))(t.flags&131072)!==0&&(ls=!0);else return r.lanes=t.lanes,wa(t,r,f)}return sm(t,r,o,c,f)}function ib(t,r,o,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return ob(t,r,m,o,c)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Wu(r,m!==null?m.cachePool:null),m!==null?cv(r,m):Mf(),uv(r);else return c=r.lanes=536870912,ob(t,r,m!==null?m.baseLanes|o:o,o,c)}else m!==null?(Wu(r,m.cachePool),cv(r,m),ri(),r.memoizedState=null):(t!==null&&Wu(r,null),Mf(),ri());return _s(t,r,f,o),r.child}function fc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function ob(t,r,o,c,f){var m=Sf();return m=m===null?null:{parent:is._currentValue,pool:m},r.memoizedState={baseLanes:o,cachePool:m},t!==null&&Wu(r,null),Mf(),uv(r),t!==null&&$o(t,r,c,!0),r.childLanes=f,null}function lh(t,r){return r=uh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function lb(t,r,o){return io(r,t.child,null,o),t=lh(r,r.pendingProps),t.flags|=2,Xs(r),r.memoizedState=null,t}function Ok(t,r,o){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(on){if(c.mode==="hidden")return t=lh(r,c),r.lanes=536870912,fc(null,t);if(Pf(r),(t=Dn)?(t=x0(t,hr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Qa!==null?{id:Kr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},o=$y(t),o.return=r,r.child=o,xs=r,Dn=null)):t=null,t===null)throw Ja(r);return r.lanes=536870912,null}return lh(r,c)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(Pf(r),f)if(r.flags&256)r.flags&=-257,r=lb(t,r,o);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(a(558));else if(ls||$o(t,r,o,!1),f=(o&t.childLanes)!==0,ls||f){if(c=Nn,c!==null&&(b=Sn(c,o),b!==0&&b!==m.retryLane))throw m.retryLane=b,Ji(t,b),Hs(c,t,b),nm;bh(),r=lb(t,r,o)}else t=m.treeContext,Dn=fr(b.nextSibling),xs=r,on=!0,Xa=null,hr=!1,t!==null&&Ky(r,t),r=lh(r,c),r.flags|=4096;return r}return t=pa(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function ch(t,r){var o=r.ref;if(o===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(t===null||t.ref!==o)&&(r.flags|=4194816)}}function sm(t,r,o,c,f){return no(r),o=Of(t,r,o,c,void 0,f),c=Vf(),t!==null&&!ls?(Bf(t,r,f),wa(t,r,f)):(on&&c&&vf(r),r.flags|=1,_s(t,r,o,f),r.child)}function cb(t,r,o,c,f,m){return no(r),r.updateQueue=null,o=dv(r,c,o,f),hv(t),c=Vf(),t!==null&&!ls?(Bf(t,r,m),wa(t,r,m)):(on&&c&&vf(r),r.flags|=1,_s(t,r,o,m),r.child)}function ub(t,r,o,c,f){if(no(r),r.stateNode===null){var m=zo,b=o.contextType;typeof b=="object"&&b!==null&&(m=ws(b)),m=new o(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=em,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Cf(r),b=o.contextType,m.context=typeof b=="object"&&b!==null?ws(b):zo,m.state=r.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Zf(r,o,b,c),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&em.enqueueReplaceState(m,m.state,null),lc(r,c,m,f),oc(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var S=r.memoizedProps,V=lo(o,S);m.props=V;var ee=m.context,pe=o.contextType;b=zo,typeof pe=="object"&&pe!==null&&(b=ws(pe));var Te=o.getDerivedStateFromProps;pe=typeof Te=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,pe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||ee!==b)&&Qv(r,m,c,b),ei=!1;var se=r.memoizedState;m.state=se,lc(r,c,m,f),oc(),ee=r.memoizedState,S||se!==ee||ei?(typeof Te=="function"&&(Zf(r,o,Te,c),ee=r.memoizedState),(V=ei||Yv(r,o,V,c,se,ee,b))?(pe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=ee),m.props=c,m.state=ee,m.context=b,c=V):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Rf(t,r),b=r.memoizedProps,pe=lo(o,b),m.props=pe,Te=r.pendingProps,se=m.context,ee=o.contextType,V=zo,typeof ee=="object"&&ee!==null&&(V=ws(ee)),S=o.getDerivedStateFromProps,(ee=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==Te||se!==V)&&Qv(r,m,c,V),ei=!1,se=r.memoizedState,m.state=se,lc(r,c,m,f),oc();var le=r.memoizedState;b!==Te||se!==le||ei||t!==null&&t.dependencies!==null&&Hu(t.dependencies)?(typeof S=="function"&&(Zf(r,o,S,c),le=r.memoizedState),(pe=ei||Yv(r,o,pe,c,se,le,V)||t!==null&&t.dependencies!==null&&Hu(t.dependencies))?(ee||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,le,V),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,le,V)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&se===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&se===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=le),m.props=c,m.state=le,m.context=V,c=pe):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&se===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&se===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,ch(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=io(r,t.child,null,f),r.child=io(r,null,o,f)):_s(t,r,o,f),r.memoizedState=m.state,t=r.child):t=wa(t,r,f),t}function hb(t,r,o,c){return eo(),r.flags|=256,_s(t,r,o,c),r.child}var rm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function am(t){return{baseLanes:t,cachePool:ev()}}function im(t,r,o){return t=t!==null?t.childLanes&~o:0,r&&(t|=Zs),t}function db(t,r,o){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(ts.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(on){if(f?si(r):ri(),(t=Dn)?(t=x0(t,hr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Qa!==null?{id:Kr,overflow:Yr}:null,retryLane:536870912,hydrationErrors:null},o=$y(t),o.return=r,r.child=o,xs=r,Dn=null)):t=null,t===null)throw Ja(r);return Fm(t)?r.lanes=32:r.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(ri(),f=r.mode,S=uh({mode:"hidden",children:S},f),c=Zi(c,f,o,null),S.return=r,c.return=r,S.sibling=c,r.child=S,c=r.child,c.memoizedState=am(o),c.childLanes=im(t,b,o),r.memoizedState=rm,fc(null,c)):(si(r),om(r,S))}var V=t.memoizedState;if(V!==null&&(S=V.dehydrated,S!==null)){if(m)r.flags&256?(si(r),r.flags&=-257,r=lm(t,r,o)):r.memoizedState!==null?(ri(),r.child=t.child,r.flags|=128,r=null):(ri(),S=c.fallback,f=r.mode,c=uh({mode:"visible",children:c.children},f),S=Zi(S,f,o,null),S.flags|=2,c.return=r,S.return=r,c.sibling=S,r.child=c,io(r,t.child,null,o),c=r.child,c.memoizedState=am(o),c.childLanes=im(t,b,o),r.memoizedState=rm,r=fc(null,c));else if(si(r),Fm(S)){if(b=S.nextSibling&&S.nextSibling.dataset,b)var ee=b.dgst;b=ee,c=Error(a(419)),c.stack="",c.digest=b,tc({value:c,source:null,stack:null}),r=lm(t,r,o)}else if(ls||$o(t,r,o,!1),b=(o&t.childLanes)!==0,ls||b){if(b=Nn,b!==null&&(c=Sn(b,o),c!==0&&c!==V.retryLane))throw V.retryLane=c,Ji(t,c),Hs(b,t,c),nm;zm(S)||bh(),r=lm(t,r,o)}else zm(S)?(r.flags|=192,r.child=t.child,r=null):(t=V.treeContext,Dn=fr(S.nextSibling),xs=r,on=!0,Xa=null,hr=!1,t!==null&&Ky(r,t),r=om(r,c.children),r.flags|=4096);return r}return f?(ri(),S=c.fallback,f=r.mode,V=t.child,ee=V.sibling,c=pa(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,ee!==null?S=pa(ee,S):(S=Zi(S,f,o,null),S.flags|=2),S.return=r,c.return=r,c.sibling=S,r.child=c,fc(null,c),c=r.child,S=t.child.memoizedState,S===null?S=am(o):(f=S.cachePool,f!==null?(V=is._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=ev(),S={baseLanes:S.baseLanes|o,cachePool:f}),c.memoizedState=S,c.childLanes=im(t,b,o),r.memoizedState=rm,fc(t.child,c)):(si(r),o=t.child,t=o.sibling,o=pa(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=o,r.memoizedState=null,o)}function om(t,r){return r=uh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function uh(t,r){return t=Ys(22,t,null,r),t.lanes=0,t}function lm(t,r,o){return io(r,t.child,null,o),t=om(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function fb(t,r,o){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),kf(t.return,r,o)}function cm(t,r,o,c,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:f,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=o,b.tailMode=f,b.treeForkCount=m)}function mb(t,r,o){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var b=ts.current,S=(b&2)!==0;if(S?(b=b&1|2,r.flags|=128):b&=1,ge(ts,b),_s(t,r,c,o),c=on?ec:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fb(t,o,r);else if(t.tag===19)fb(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(o=r.child,f=null;o!==null;)t=o.alternate,t!==null&&Ju(t)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),cm(r,!1,f,o,m,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Ju(t)===null){r.child=f;break}t=f.sibling,f.sibling=o,o=f,f=t}cm(r,!0,o,null,m,c);break;case"together":cm(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function wa(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),oi|=r.lanes,(o&r.childLanes)===0)if(t!==null){if($o(t,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,o=pa(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=pa(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function um(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Hu(t)))}function Vk(t,r,o){switch(r.tag){case 3:He(r,r.stateNode.containerInfo),Za(r,is,t.memoizedState.cache),eo();break;case 27:case 5:vt(r);break;case 4:He(r,r.stateNode.containerInfo);break;case 10:Za(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Pf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(si(r),r.flags|=128,null):(o&r.child.childLanes)!==0?db(t,r,o):(si(r),t=wa(t,r,o),t!==null?t.sibling:null);si(r);break;case 19:var f=(t.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||($o(t,r,o,!1),c=(o&r.childLanes)!==0),f){if(c)return mb(t,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ge(ts,ts.current),c)break;return null;case 22:return r.lanes=0,ib(t,r,o,r.pendingProps);case 24:Za(r,is,t.memoizedState.cache)}return wa(t,r,o)}function pb(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps)ls=!0;else{if(!um(t,o)&&(r.flags&128)===0)return ls=!1,Vk(t,r,o);ls=(t.flags&131072)!==0}else ls=!1,on&&(r.flags&1048576)!==0&&Gy(r,ec,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=ro(r.elementType),r.type=t,typeof t=="function")pf(t)?(c=lo(t,c),r.tag=1,r=ub(null,r,t,c,o)):(r.tag=0,r=sm(null,r,t,c,o));else{if(t!=null){var f=t.$$typeof;if(f===ve){r.tag=11,r=sb(null,r,t,c,o);break e}else if(f===A){r.tag=14,r=rb(null,r,t,c,o);break e}}throw r=Ne(t)||t,Error(a(306,r,""))}}return r;case 0:return sm(t,r,r.type,r.pendingProps,o);case 1:return c=r.type,f=lo(c,r.pendingProps),ub(t,r,c,f,o);case 3:e:{if(He(r,r.stateNode.containerInfo),t===null)throw Error(a(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Rf(t,r),lc(r,c,null,o);var b=r.memoizedState;if(c=b.cache,Za(r,is,c),c!==m.cache&&Tf(r,[is],o,!0),oc(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=hb(t,r,c,o);break e}else if(c!==f){f=lr(Error(a(424)),r),tc(f),r=hb(t,r,c,o);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Dn=fr(t.firstChild),xs=r,on=!0,Xa=null,hr=!0,o=iv(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(eo(),c===f){r=wa(t,r,o);break e}_s(t,r,c,o)}r=r.child}return r;case 26:return ch(t,r),t===null?(o=j0(r.type,null,r.pendingProps,null))?r.memoizedState=o:on||(o=r.type,t=r.pendingProps,c=jh(Oe.current).createElement(o),c[$e]=r,c[ft]=t,ks(c,o,t),C(c),r.stateNode=c):r.memoizedState=j0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return vt(r),t===null&&on&&(c=r.stateNode=k0(r.type,r.pendingProps,Oe.current),xs=r,hr=!0,f=Dn,di(r.type)?(qm=f,Dn=fr(c.firstChild)):Dn=f),_s(t,r,r.pendingProps.children,o),ch(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&on&&((f=c=Dn)&&(c=mT(c,r.type,r.pendingProps,hr),c!==null?(r.stateNode=c,xs=r,Dn=fr(c.firstChild),hr=!1,f=!0):f=!1),f||Ja(r)),vt(r),f=r.type,m=r.pendingProps,b=t!==null?t.memoizedProps:null,c=m.children,Vm(f,m)?c=null:b!==null&&Vm(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Of(t,r,Ck,null,null,o),Nc._currentValue=f),ch(t,r),_s(t,r,c,o),r.child;case 6:return t===null&&on&&((t=o=Dn)&&(o=pT(o,r.pendingProps,hr),o!==null?(r.stateNode=o,xs=r,Dn=null,t=!0):t=!1),t||Ja(r)),null;case 13:return db(t,r,o);case 4:return He(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=io(r,null,c,o):_s(t,r,c,o),r.child;case 11:return sb(t,r,r.type,r.pendingProps,o);case 7:return _s(t,r,r.pendingProps,o),r.child;case 8:return _s(t,r,r.pendingProps.children,o),r.child;case 12:return _s(t,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Za(r,r.type,c.value),_s(t,r,c.children,o),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,no(r),f=ws(f),c=c(f),r.flags|=1,_s(t,r,c,o),r.child;case 14:return rb(t,r,r.type,r.pendingProps,o);case 15:return ab(t,r,r.type,r.pendingProps,o);case 19:return mb(t,r,o);case 31:return Ok(t,r,o);case 22:return ib(t,r,o,r.pendingProps);case 24:return no(r),c=ws(is),t===null?(f=Sf(),f===null&&(f=Nn,m=Ef(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:c,cache:f},Cf(r),Za(r,is,f)):((t.lanes&o)!==0&&(Rf(t,r),lc(r,null,null,o),oc()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Za(r,is,c)):(c=m.cache,Za(r,is,c),c!==f.cache&&Tf(r,[is],o,!0))),_s(t,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function _a(t){t.flags|=4}function hm(t,r,o,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Fb())t.flags|=8192;else throw ao=Ku,Nf}else t.flags&=-16777217}function gb(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!A0(r))if(Fb())t.flags|=8192;else throw ao=Ku,Nf}function hh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?kt():536870912,t.lanes|=r,sl|=r)}function mc(t,r){if(!on)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Pn(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,c=0;if(r)for(var f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)o|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=o,r}function Bk(t,r,o){var c=r.pendingProps;switch(bf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(r),null;case 1:return Pn(r),null;case 3:return o=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),va(is),Ze(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(Ho(r)?_a(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,wf())),Pn(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(_a(r),m!==null?(Pn(r),gb(r,m)):(Pn(r),hm(r,f,null,c,o))):m?m!==t.memoizedState?(_a(r),Pn(r),gb(r,m)):(Pn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&_a(r),Pn(r),hm(r,f,t,c,o)),null;case 27:if(nn(r),o=Oe.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&_a(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Pn(r),null}t=Ee.current,Ho(r)?Yy(r):(t=k0(f,c,o),r.stateNode=t,_a(r))}return Pn(r),null;case 5:if(nn(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&_a(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Pn(r),null}if(m=Ee.current,Ho(r))Yy(r);else{var b=jh(Oe.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(f,{is:c.is}):b.createElement(f)}}m[$e]=r,m[ft]=c;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(ks(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&_a(r)}}return Pn(r),hm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,o),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&_a(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(t=Oe.current,Ho(r)){if(t=r.stateNode,o=r.memoizedProps,c=null,f=xs,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[$e]=r,t=!!(t.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||d0(t.nodeValue,o)),t||Ja(r,!0)}else t=jh(t).createTextNode(c),t[$e]=r,r.stateNode=t}return Pn(r),null;case 31:if(o=r.memoizedState,t===null||t.memoizedState!==null){if(c=Ho(r),o!==null){if(t===null){if(!c)throw Error(a(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[$e]=r}else eo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Pn(r),t=!1}else o=wf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),t=!0;if(!t)return r.flags&256?(Xs(r),r):(Xs(r),null);if((r.flags&128)!==0)throw Error(a(558))}return Pn(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ho(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[$e]=r}else eo(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Pn(r),f=!1}else f=wf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Xs(r),r):(Xs(r),null)}return Xs(r),(r.flags&128)!==0?(r.lanes=o,r):(o=c!==null,t=t!==null&&t.memoizedState!==null,o&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),o!==t&&o&&(r.child.flags|=8192),hh(r,r.updateQueue),Pn(r),null);case 4:return Ze(),t===null&&Mm(r.stateNode.containerInfo),Pn(r),null;case 10:return va(r.type),Pn(r),null;case 19:if(W(ts),c=r.memoizedState,c===null)return Pn(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)mc(c,!1);else{if(Xn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Ju(t),m!==null){for(r.flags|=128,mc(c,!1),t=m.updateQueue,r.updateQueue=t,hh(r,t),r.subtreeFlags=0,t=o,o=r.child;o!==null;)Hy(o,t),o=o.sibling;return ge(ts,ts.current&1|2),on&&ga(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&Ut()>gh&&(r.flags|=128,f=!0,mc(c,!1),r.lanes=4194304)}else{if(!f)if(t=Ju(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,hh(r,t),mc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!on)return Pn(r),null}else 2*Ut()-c.renderingStartTime>gh&&o!==536870912&&(r.flags|=128,f=!0,mc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Ut(),t.sibling=null,o=ts.current,ge(ts,f?o&1|2:o&1),on&&ga(r,c.treeForkCount),t):(Pn(r),null);case 22:case 23:return Xs(r),Df(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(Pn(r),r.subtreeFlags&6&&(r.flags|=8192)):Pn(r),o=r.updateQueue,o!==null&&hh(r,o.retryQueue),o=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),t!==null&&W(so),null;case 24:return o=null,t!==null&&(o=t.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),va(is),Pn(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function Uk(t,r){switch(bf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return va(is),Ze(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return nn(r),null;case 31:if(r.memoizedState!==null){if(Xs(r),r.alternate===null)throw Error(a(340));eo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Xs(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));eo()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return W(ts),null;case 4:return Ze(),null;case 10:return va(r.type),null;case 22:case 23:return Xs(r),Df(),t!==null&&W(so),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return va(is),null;case 25:return null;default:return null}}function yb(t,r){switch(bf(r),r.tag){case 3:va(is),Ze();break;case 26:case 27:case 5:nn(r);break;case 4:Ze();break;case 31:r.memoizedState!==null&&Xs(r);break;case 13:Xs(r);break;case 19:W(ts);break;case 10:va(r.type);break;case 22:case 23:Xs(r),Df(),t!==null&&W(so);break;case 24:va(is)}}function pc(t,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&t)===t){c=void 0;var m=o.create,b=o.inst;c=m(),b.destroy=c}o=o.next}while(o!==f)}}catch(S){_n(r,r.return,S)}}function ai(t,r,o){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var b=c.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,f=r;var V=o,ee=S;try{ee()}catch(pe){_n(f,V,pe)}}}c=c.next}while(c!==m)}}catch(pe){_n(r,r.return,pe)}}function vb(t){var r=t.updateQueue;if(r!==null){var o=t.stateNode;try{lv(r,o)}catch(c){_n(t,t.return,c)}}}function bb(t,r,o){o.props=lo(t.type,t.memoizedProps),o.state=t.memoizedState;try{o.componentWillUnmount()}catch(c){_n(t,r,c)}}function gc(t,r){try{var o=t.ref;if(o!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof o=="function"?t.refCleanup=o(c):o.current=c}}catch(f){_n(t,r,f)}}function Qr(t,r){var o=t.ref,c=t.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(f){_n(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){_n(t,r,f)}else o.current=null}function xb(t){var r=t.type,o=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(f){_n(t,t.return,f)}}function dm(t,r,o){try{var c=t.stateNode;lT(c,t.type,o,r),c[ft]=r}catch(f){_n(t,t.return,f)}}function wb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&di(t.type)||t.tag===4}function fm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&di(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mm(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(t,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(t),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ps));else if(c!==4&&(c===27&&di(t.type)&&(o=t.stateNode,r=null),t=t.child,t!==null))for(mm(t,r,o),t=t.sibling;t!==null;)mm(t,r,o),t=t.sibling}function dh(t,r,o){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(c!==4&&(c===27&&di(t.type)&&(o=t.stateNode),t=t.child,t!==null))for(dh(t,r,o),t=t.sibling;t!==null;)dh(t,r,o),t=t.sibling}function _b(t){var r=t.stateNode,o=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);ks(r,c,o),r[$e]=t,r[ft]=o}catch(m){_n(t,t.return,m)}}var ka=!1,cs=!1,pm=!1,kb=typeof WeakSet=="function"?WeakSet:Set,gs=null;function zk(t,r){if(t=t.containerInfo,Lm=Mh,t=Py(t),lf(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var b=0,S=-1,V=-1,ee=0,pe=0,Te=t,se=null;t:for(;;){for(var le;Te!==o||f!==0&&Te.nodeType!==3||(S=b+f),Te!==m||c!==0&&Te.nodeType!==3||(V=b+c),Te.nodeType===3&&(b+=Te.nodeValue.length),(le=Te.firstChild)!==null;)se=Te,Te=le;for(;;){if(Te===t)break t;if(se===o&&++ee===f&&(S=b),se===m&&++pe===c&&(V=b),(le=Te.nextSibling)!==null)break;Te=se,se=Te.parentNode}Te=le}o=S===-1||V===-1?null:{start:S,end:V}}else o=null}o=o||{start:0,end:0}}else o=null;for(Om={focusedElem:t,selectionRange:o},Mh=!1,gs=r;gs!==null;)if(r=gs,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,gs=t;else for(;gs!==null;){switch(r=gs,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(o=0;o<t.length;o++)f=t[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,c=o.stateNode;try{var it=lo(o.type,f);t=c.getSnapshotBeforeUpdate(it,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(wt){_n(o,o.return,wt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,o=t.nodeType,o===9)Um(t);else if(o===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Um(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,gs=t;break}gs=r.return}}function Tb(t,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ea(t,o),c&4&&pc(5,o);break;case 1:if(Ea(t,o),c&4)if(t=o.stateNode,r===null)try{t.componentDidMount()}catch(b){_n(o,o.return,b)}else{var f=lo(o.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){_n(o,o.return,b)}}c&64&&vb(o),c&512&&gc(o,o.return);break;case 3:if(Ea(t,o),c&64&&(t=o.updateQueue,t!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{lv(t,r)}catch(b){_n(o,o.return,b)}}break;case 27:r===null&&c&4&&_b(o);case 26:case 5:Ea(t,o),r===null&&c&4&&xb(o),c&512&&gc(o,o.return);break;case 12:Ea(t,o);break;case 31:Ea(t,o),c&4&&Sb(t,o);break;case 13:Ea(t,o),c&4&&Nb(t,o),c&64&&(t=o.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(o=Qk.bind(null,o),gT(t,o))));break;case 22:if(c=o.memoizedState!==null||ka,!c){r=r!==null&&r.memoizedState!==null||cs,f=ka;var m=cs;ka=c,(cs=r)&&!m?ja(t,o,(o.subtreeFlags&8772)!==0):Ea(t,o),ka=f,cs=m}break;case 30:break;default:Ea(t,o)}}function Eb(t){var r=t.alternate;r!==null&&(t.alternate=null,Eb(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Yn(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Bn=null,Us=!1;function Ta(t,r,o){for(o=o.child;o!==null;)jb(t,r,o),o=o.sibling}function jb(t,r,o){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(ze,o)}catch{}switch(o.tag){case 26:cs||Qr(o,r),Ta(t,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:cs||Qr(o,r);var c=Bn,f=Us;di(o.type)&&(Bn=o.stateNode,Us=!1),Ta(t,r,o),Ec(o.stateNode),Bn=c,Us=f;break;case 5:cs||Qr(o,r);case 6:if(c=Bn,f=Us,Bn=null,Ta(t,r,o),Bn=c,Us=f,Bn!==null)if(Us)try{(Bn.nodeType===9?Bn.body:Bn.nodeName==="HTML"?Bn.ownerDocument.body:Bn).removeChild(o.stateNode)}catch(m){_n(o,r,m)}else try{Bn.removeChild(o.stateNode)}catch(m){_n(o,r,m)}break;case 18:Bn!==null&&(Us?(t=Bn,v0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,o.stateNode),hl(t)):v0(Bn,o.stateNode));break;case 4:c=Bn,f=Us,Bn=o.stateNode.containerInfo,Us=!0,Ta(t,r,o),Bn=c,Us=f;break;case 0:case 11:case 14:case 15:ai(2,o,r),cs||ai(4,o,r),Ta(t,r,o);break;case 1:cs||(Qr(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&bb(o,r,c)),Ta(t,r,o);break;case 21:Ta(t,r,o);break;case 22:cs=(c=cs)||o.memoizedState!==null,Ta(t,r,o),cs=c;break;default:Ta(t,r,o)}}function Sb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{hl(t)}catch(o){_n(r,r.return,o)}}}function Nb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{hl(t)}catch(o){_n(r,r.return,o)}}function Fk(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new kb),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new kb),r;default:throw Error(a(435,t.tag))}}function fh(t,r){var o=Fk(t);r.forEach(function(c){if(!o.has(c)){o.add(c);var f=Xk.bind(null,t,c);c.then(f,f)}})}function zs(t,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var f=o[c],m=t,b=r,S=b;e:for(;S!==null;){switch(S.tag){case 27:if(di(S.type)){Bn=S.stateNode,Us=!1;break e}break;case 5:Bn=S.stateNode,Us=!1;break e;case 3:case 4:Bn=S.stateNode.containerInfo,Us=!0;break e}S=S.return}if(Bn===null)throw Error(a(160));jb(m,b,f),Bn=null,Us=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Cb(r,t),r=r.sibling}var Cr=null;function Cb(t,r){var o=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zs(r,t),Fs(t),c&4&&(ai(3,t,t.return),pc(3,t),ai(5,t,t.return));break;case 1:zs(r,t),Fs(t),c&512&&(cs||o===null||Qr(o,o.return)),c&64&&ka&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(o=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var f=Cr;if(zs(r,t),Fs(t),c&512&&(cs||o===null||Qr(o,o.return)),c&4){var m=o!==null?o.memoizedState:null;if(c=t.memoizedState,o===null)if(c===null)if(t.stateNode===null){e:{c=t.type,o=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[qn]||m[$e]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),ks(m,c,o),m[$e]=t,C(m),c=m;break e;case"link":var b=C0("link","href",f).get(c+(o.href||""));if(b){for(var S=0;S<b.length;S++)if(m=b[S],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(S,1);break t}}m=f.createElement(c),ks(m,c,o),f.head.appendChild(m);break;case"meta":if(b=C0("meta","content",f).get(c+(o.content||""))){for(S=0;S<b.length;S++)if(m=b[S],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(S,1);break t}}m=f.createElement(c),ks(m,c,o),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[$e]=t,C(m),c=m}t.stateNode=c}else R0(f,t.type,t.stateNode);else t.stateNode=N0(f,c,t.memoizedProps);else m!==c?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,c===null?R0(f,t.type,t.stateNode):N0(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&dm(t,t.memoizedProps,o.memoizedProps)}break;case 27:zs(r,t),Fs(t),c&512&&(cs||o===null||Qr(o,o.return)),o!==null&&c&4&&dm(t,t.memoizedProps,o.memoizedProps);break;case 5:if(zs(r,t),Fs(t),c&512&&(cs||o===null||Qr(o,o.return)),t.flags&32){f=t.stateNode;try{$n(f,"")}catch(it){_n(t,t.return,it)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,dm(t,f,o!==null?o.memoizedProps:f)),c&1024&&(pm=!0);break;case 6:if(zs(r,t),Fs(t),c&4){if(t.stateNode===null)throw Error(a(162));c=t.memoizedProps,o=t.stateNode;try{o.nodeValue=c}catch(it){_n(t,t.return,it)}}break;case 3:if(Ch=null,f=Cr,Cr=Sh(r.containerInfo),zs(r,t),Cr=f,Fs(t),c&4&&o!==null&&o.memoizedState.isDehydrated)try{hl(r.containerInfo)}catch(it){_n(t,t.return,it)}pm&&(pm=!1,Rb(t));break;case 4:c=Cr,Cr=Sh(t.stateNode.containerInfo),zs(r,t),Fs(t),Cr=c;break;case 12:zs(r,t),Fs(t);break;case 31:zs(r,t),Fs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,fh(t,c)));break;case 13:zs(r,t),Fs(t),t.child.flags&8192&&t.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ph=Ut()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,fh(t,c)));break;case 22:f=t.memoizedState!==null;var V=o!==null&&o.memoizedState!==null,ee=ka,pe=cs;if(ka=ee||f,cs=pe||V,zs(r,t),cs=pe,ka=ee,Fs(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||V||ka||cs||co(t)),o=null,r=t;;){if(r.tag===5||r.tag===26){if(o===null){V=o=r;try{if(m=V.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{S=V.stateNode;var Te=V.memoizedProps.style,se=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;S.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(it){_n(V,V.return,it)}}}else if(r.tag===6){if(o===null){V=r;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(it){_n(V,V.return,it)}}}else if(r.tag===18){if(o===null){V=r;try{var le=V.stateNode;f?b0(le,!0):b0(V.stateNode,!1)}catch(it){_n(V,V.return,it)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,fh(t,o))));break;case 19:zs(r,t),Fs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,fh(t,c)));break;case 30:break;case 21:break;default:zs(r,t),Fs(t)}}function Fs(t){var r=t.flags;if(r&2){try{for(var o,c=t.return;c!==null;){if(wb(c)){o=c;break}c=c.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,m=fm(t);dh(t,m,f);break;case 5:var b=o.stateNode;o.flags&32&&($n(b,""),o.flags&=-33);var S=fm(t);dh(t,S,b);break;case 3:case 4:var V=o.stateNode.containerInfo,ee=fm(t);mm(t,ee,V);break;default:throw Error(a(161))}}catch(pe){_n(t,t.return,pe)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Rb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Rb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ea(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Tb(t,r.alternate,r),r=r.sibling}function co(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ai(4,r,r.return),co(r);break;case 1:Qr(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&bb(r,r.return,o),co(r);break;case 27:Ec(r.stateNode);case 26:case 5:Qr(r,r.return),co(r);break;case 22:r.memoizedState===null&&co(r);break;case 30:co(r);break;default:co(r)}t=t.sibling}}function ja(t,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:ja(f,m,o),pc(4,m);break;case 1:if(ja(f,m,o),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){_n(c,c.return,ee)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)ov(V[f],S)}catch(ee){_n(c,c.return,ee)}}o&&b&64&&vb(m),gc(m,m.return);break;case 27:_b(m);case 26:case 5:ja(f,m,o),o&&c===null&&b&4&&xb(m),gc(m,m.return);break;case 12:ja(f,m,o);break;case 31:ja(f,m,o),o&&b&4&&Sb(f,m);break;case 13:ja(f,m,o),o&&b&4&&Nb(f,m);break;case 22:m.memoizedState===null&&ja(f,m,o),gc(m,m.return);break;case 30:break;default:ja(f,m,o)}r=r.sibling}}function gm(t,r){var o=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==o&&(t!=null&&t.refCount++,o!=null&&nc(o))}function ym(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&nc(t))}function Rr(t,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ab(t,r,o,c),r=r.sibling}function Ab(t,r,o,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Rr(t,r,o,c),f&2048&&pc(9,r);break;case 1:Rr(t,r,o,c);break;case 3:Rr(t,r,o,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&nc(t)));break;case 12:if(f&2048){Rr(t,r,o,c),t=r.stateNode;try{var m=r.memoizedProps,b=m.id,S=m.onPostCommit;typeof S=="function"&&S(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(V){_n(r,r.return,V)}}else Rr(t,r,o,c);break;case 31:Rr(t,r,o,c);break;case 13:Rr(t,r,o,c);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?Rr(t,r,o,c):yc(t,r):m._visibility&2?Rr(t,r,o,c):(m._visibility|=2,el(t,r,o,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&gm(b,r);break;case 24:Rr(t,r,o,c),f&2048&&ym(r.alternate,r);break;default:Rr(t,r,o,c)}}function el(t,r,o,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,b=r,S=o,V=c,ee=b.flags;switch(b.tag){case 0:case 11:case 15:el(m,b,S,V,f),pc(8,b);break;case 23:break;case 22:var pe=b.stateNode;b.memoizedState!==null?pe._visibility&2?el(m,b,S,V,f):yc(m,b):(pe._visibility|=2,el(m,b,S,V,f)),f&&ee&2048&&gm(b.alternate,b);break;case 24:el(m,b,S,V,f),f&&ee&2048&&ym(b.alternate,b);break;default:el(m,b,S,V,f)}r=r.sibling}}function yc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=t,c=r,f=c.flags;switch(c.tag){case 22:yc(o,c),f&2048&&gm(c.alternate,c);break;case 24:yc(o,c),f&2048&&ym(c.alternate,c);break;default:yc(o,c)}r=r.sibling}}var vc=8192;function tl(t,r,o){if(t.subtreeFlags&vc)for(t=t.child;t!==null;)Ib(t,r,o),t=t.sibling}function Ib(t,r,o){switch(t.tag){case 26:tl(t,r,o),t.flags&vc&&t.memoizedState!==null&&NT(o,Cr,t.memoizedState,t.memoizedProps);break;case 5:tl(t,r,o);break;case 3:case 4:var c=Cr;Cr=Sh(t.stateNode.containerInfo),tl(t,r,o),Cr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=vc,vc=16777216,tl(t,r,o),vc=c):tl(t,r,o));break;default:tl(t,r,o)}}function Mb(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function bc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];gs=c,Pb(c,t)}Mb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Db(t),t=t.sibling}function Db(t){switch(t.tag){case 0:case 11:case 15:bc(t),t.flags&2048&&ai(9,t,t.return);break;case 3:bc(t);break;case 12:bc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,mh(t)):bc(t);break;default:bc(t)}}function mh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];gs=c,Pb(c,t)}Mb(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ai(8,r,r.return),mh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,mh(r));break;default:mh(r)}t=t.sibling}}function Pb(t,r){for(;gs!==null;){var o=gs;switch(o.tag){case 0:case 11:case 15:ai(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:nc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,gs=c;else e:for(o=t;gs!==null;){c=gs;var f=c.sibling,m=c.return;if(Eb(c),c===o){gs=null;break e}if(f!==null){f.return=m,gs=f;break e}gs=m}}}var qk={getCacheForType:function(t){var r=ws(is),o=r.data.get(t);return o===void 0&&(o=t(),r.data.set(t,o)),o},cacheSignal:function(){return ws(is).controller.signal}},Hk=typeof WeakMap=="function"?WeakMap:Map,vn=0,Nn=null,Kt=null,Xt=0,wn=0,Js=null,ii=!1,nl=!1,vm=!1,Sa=0,Xn=0,oi=0,uo=0,bm=0,Zs=0,sl=0,xc=null,qs=null,xm=!1,ph=0,Lb=0,gh=1/0,yh=null,li=null,ms=0,ci=null,rl=null,Na=0,wm=0,_m=null,Ob=null,wc=0,km=null;function er(){return(vn&2)!==0&&Xt!==0?Xt&-Xt:Y.T!==null?Cm():me()}function Vb(){if(Zs===0)if((Xt&536870912)===0||on){var t=$t;$t<<=1,($t&3932160)===0&&($t=262144),Zs=t}else Zs=536870912;return t=Qs.current,t!==null&&(t.flags|=32),Zs}function Hs(t,r,o){(t===Nn&&(wn===2||wn===9)||t.cancelPendingCommit!==null)&&(al(t,0),ui(t,Xt,Zs,!1)),Wt(t,o),((vn&2)===0||t!==Nn)&&(t===Nn&&((vn&2)===0&&(uo|=o),Xn===4&&ui(t,Xt,Zs,!1)),Xr(t))}function Bb(t,r,o){if((vn&6)!==0)throw Error(a(327));var c=!o&&(r&127)===0&&(r&t.expiredLanes)===0||Dt(t,r),f=c?Gk(t,r):Em(t,r,!0),m=c;do{if(f===0){nl&&!c&&ui(t,r,0,!1);break}else{if(o=t.current.alternate,m&&!$k(o)){f=Em(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var S=t;f=xc;var V=S.current.memoizedState.isDehydrated;if(V&&(al(S,b).flags|=256),b=Em(S,b,!1),b!==2){if(vm&&!V){S.errorRecoveryDisabledLanes|=m,uo|=m,f=4;break e}m=qs,qs=f,m!==null&&(qs===null?qs=m:qs.push.apply(qs,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){al(t,0),ui(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:ui(c,r,Zs,!ii);break e;case 2:qs=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=ph+300-Ut(),10<f)){if(ui(c,r,Zs,!ii),Ct(c,0,!0)!==0)break e;Na=r,c.timeoutHandle=g0(Ub.bind(null,c,o,qs,yh,xm,r,Zs,uo,sl,ii,m,"Throttled",-0,0),f);break e}Ub(c,o,qs,yh,xm,r,Zs,uo,sl,ii,m,null,-0,0)}}break}while(!0);Xr(t)}function Ub(t,r,o,c,f,m,b,S,V,ee,pe,Te,se,le){if(t.timeoutHandle=-1,Te=r.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ps},Ib(r,m,Te);var it=(m&62914560)===m?ph-Ut():(m&4194048)===m?Lb-Ut():0;if(it=CT(Te,it),it!==null){Na=m,t.cancelPendingCommit=it(Kb.bind(null,t,r,m,o,c,f,b,S,V,pe,Te,null,se,le)),ui(t,m,b,!ee);return}}Kb(t,r,m,o,c,f,b,S,V)}function $k(t){for(var r=t;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var f=o[c],m=f.getSnapshot;f=f.value;try{if(!Ks(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ui(t,r,o,c){r&=~bm,r&=~uo,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-Ve(f),b=1<<m;c[m]=-1,f&=~b}o!==0&&un(t,o,r)}function vh(){return(vn&6)===0?(_c(0),!1):!0}function Tm(){if(Kt!==null){if(wn===0)var t=Kt.return;else t=Kt,ya=to=null,Uf(t),Yo=null,rc=0,t=Kt;for(;t!==null;)yb(t.alternate,t),t=t.return;Kt=null}}function al(t,r){var o=t.timeoutHandle;o!==-1&&(t.timeoutHandle=-1,hT(o)),o=t.cancelPendingCommit,o!==null&&(t.cancelPendingCommit=null,o()),Na=0,Tm(),Nn=t,Kt=o=pa(t.current,null),Xt=r,wn=0,Js=null,ii=!1,nl=Dt(t,r),vm=!1,sl=Zs=bm=uo=oi=Xn=0,qs=xc=null,xm=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-Ve(c),m=1<<f;r|=t[f],c&=~m}return Sa=r,Bu(),o}function zb(t,r){Bt=null,Y.H=dc,r===Ko||r===Gu?(r=sv(),wn=3):r===Nf?(r=sv(),wn=4):wn=r===nm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Js=r,Kt===null&&(Xn=1,oh(t,lr(r,t.current)))}function Fb(){var t=Qs.current;return t===null?!0:(Xt&4194048)===Xt?dr===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?t===dr:!1}function qb(){var t=Y.H;return Y.H=dc,t===null?dc:t}function Hb(){var t=Y.A;return Y.A=qk,t}function bh(){Xn=4,ii||(Xt&4194048)!==Xt&&Qs.current!==null||(nl=!0),(oi&134217727)===0&&(uo&134217727)===0||Nn===null||ui(Nn,Xt,Zs,!1)}function Em(t,r,o){var c=vn;vn|=2;var f=qb(),m=Hb();(Nn!==t||Xt!==r)&&(yh=null,al(t,r)),r=!1;var b=Xn;e:do try{if(wn!==0&&Kt!==null){var S=Kt,V=Js;switch(wn){case 8:Tm(),b=6;break e;case 3:case 2:case 9:case 6:Qs.current===null&&(r=!0);var ee=wn;if(wn=0,Js=null,il(t,S,V,ee),o&&nl){b=0;break e}break;default:ee=wn,wn=0,Js=null,il(t,S,V,ee)}}Wk(),b=Xn;break}catch(pe){zb(t,pe)}while(!0);return r&&t.shellSuspendCounter++,ya=to=null,vn=c,Y.H=f,Y.A=m,Kt===null&&(Nn=null,Xt=0,Bu()),b}function Wk(){for(;Kt!==null;)$b(Kt)}function Gk(t,r){var o=vn;vn|=2;var c=qb(),f=Hb();Nn!==t||Xt!==r?(yh=null,gh=Ut()+500,al(t,r)):nl=Dt(t,r);e:do try{if(wn!==0&&Kt!==null){r=Kt;var m=Js;t:switch(wn){case 1:wn=0,Js=null,il(t,r,m,1);break;case 2:case 9:if(tv(m)){wn=0,Js=null,Wb(r);break}r=function(){wn!==2&&wn!==9||Nn!==t||(wn=7),Xr(t)},m.then(r,r);break e;case 3:wn=7;break e;case 4:wn=5;break e;case 7:tv(m)?(wn=0,Js=null,Wb(r)):(wn=0,Js=null,il(t,r,m,7));break;case 5:var b=null;switch(Kt.tag){case 26:b=Kt.memoizedState;case 5:case 27:var S=Kt;if(b?A0(b):S.stateNode.complete){wn=0,Js=null;var V=S.sibling;if(V!==null)Kt=V;else{var ee=S.return;ee!==null?(Kt=ee,xh(ee)):Kt=null}break t}}wn=0,Js=null,il(t,r,m,5);break;case 6:wn=0,Js=null,il(t,r,m,6);break;case 8:Tm(),Xn=6;break e;default:throw Error(a(462))}}Kk();break}catch(pe){zb(t,pe)}while(!0);return ya=to=null,Y.H=c,Y.A=f,vn=o,Kt!==null?0:(Nn=null,Xt=0,Bu(),Xn)}function Kk(){for(;Kt!==null&&!as();)$b(Kt)}function $b(t){var r=pb(t.alternate,t,Sa);t.memoizedProps=t.pendingProps,r===null?xh(t):Kt=r}function Wb(t){var r=t,o=r.alternate;switch(r.tag){case 15:case 0:r=cb(o,r,r.pendingProps,r.type,void 0,Xt);break;case 11:r=cb(o,r,r.pendingProps,r.type.render,r.ref,Xt);break;case 5:Uf(r);default:yb(o,r),r=Kt=Hy(r,Sa),r=pb(o,r,Sa)}t.memoizedProps=t.pendingProps,r===null?xh(t):Kt=r}function il(t,r,o,c){ya=to=null,Uf(r),Yo=null,rc=0;var f=r.return;try{if(Lk(t,f,r,o,Xt)){Xn=1,oh(t,lr(o,t.current)),Kt=null;return}}catch(m){if(f!==null)throw Kt=f,m;Xn=1,oh(t,lr(o,t.current)),Kt=null;return}r.flags&32768?(on||c===1?t=!0:nl||(Xt&536870912)!==0?t=!1:(ii=t=!0,(c===2||c===9||c===3||c===6)&&(c=Qs.current,c!==null&&c.tag===13&&(c.flags|=16384))),Gb(r,t)):xh(r)}function xh(t){var r=t;do{if((r.flags&32768)!==0){Gb(r,ii);return}t=r.return;var o=Bk(r.alternate,r,Sa);if(o!==null){Kt=o;return}if(r=r.sibling,r!==null){Kt=r;return}Kt=r=t}while(r!==null);Xn===0&&(Xn=5)}function Gb(t,r){do{var o=Uk(t.alternate,t);if(o!==null){o.flags&=32767,Kt=o;return}if(o=t.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(t=t.sibling,t!==null)){Kt=t;return}Kt=t=o}while(t!==null);Xn=6,Kt=null}function Kb(t,r,o,c,f,m,b,S,V){t.cancelPendingCommit=null;do wh();while(ms!==0);if((vn&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=ff,rn(t,o,m,b,S,V),t===Nn&&(Kt=Nn=null,Xt=0),rl=r,ci=t,Na=o,wm=m,_m=f,Ob=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Jk(fe,function(){return Zb(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=ke.p,ke.p=2,b=vn,vn|=4;try{zk(t,r,o)}finally{vn=b,ke.p=f,Y.T=c}}ms=1,Yb(),Qb(),Xb()}}function Yb(){if(ms===1){ms=0;var t=ci,r=rl,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var c=ke.p;ke.p=2;var f=vn;vn|=4;try{Cb(r,t);var m=Om,b=Py(t.containerInfo),S=m.focusedElem,V=m.selectionRange;if(b!==S&&S&&S.ownerDocument&&Dy(S.ownerDocument.documentElement,S)){if(V!==null&&lf(S)){var ee=V.start,pe=V.end;if(pe===void 0&&(pe=ee),"selectionStart"in S)S.selectionStart=ee,S.selectionEnd=Math.min(pe,S.value.length);else{var Te=S.ownerDocument||document,se=Te&&Te.defaultView||window;if(se.getSelection){var le=se.getSelection(),it=S.textContent.length,wt=Math.min(V.start,it),jn=V.end===void 0?wt:Math.min(V.end,it);!le.extend&&wt>jn&&(b=jn,jn=wt,wt=b);var K=My(S,wt),q=My(S,jn);if(K&&q&&(le.rangeCount!==1||le.anchorNode!==K.node||le.anchorOffset!==K.offset||le.focusNode!==q.node||le.focusOffset!==q.offset)){var Z=Te.createRange();Z.setStart(K.node,K.offset),le.removeAllRanges(),wt>jn?(le.addRange(Z),le.extend(q.node,q.offset)):(Z.setEnd(q.node,q.offset),le.addRange(Z))}}}}for(Te=[],le=S;le=le.parentNode;)le.nodeType===1&&Te.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Te.length;S++){var be=Te[S];be.element.scrollLeft=be.left,be.element.scrollTop=be.top}}Mh=!!Lm,Om=Lm=null}finally{vn=f,ke.p=c,Y.T=o}}t.current=r,ms=2}}function Qb(){if(ms===2){ms=0;var t=ci,r=rl,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var c=ke.p;ke.p=2;var f=vn;vn|=4;try{Tb(t,r.alternate,r)}finally{vn=f,ke.p=c,Y.T=o}}ms=3}}function Xb(){if(ms===4||ms===3){ms=0,It();var t=ci,r=rl,o=Na,c=Ob;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ms=5:(ms=0,rl=ci=null,Jb(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(li=null),de(o),r=r.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(ze,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,f=ke.p,ke.p=2,Y.T=null;try{for(var m=t.onRecoverableError,b=0;b<c.length;b++){var S=c[b];m(S.value,{componentStack:S.stack})}}finally{Y.T=r,ke.p=f}}(Na&3)!==0&&wh(),Xr(t),f=t.pendingLanes,(o&261930)!==0&&(f&42)!==0?t===km?wc++:(wc=0,km=t):wc=0,_c(0)}}function Jb(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,nc(r)))}function wh(){return Yb(),Qb(),Xb(),Zb()}function Zb(){if(ms!==5)return!1;var t=ci,r=wm;wm=0;var o=de(Na),c=Y.T,f=ke.p;try{ke.p=32>o?32:o,Y.T=null,o=_m,_m=null;var m=ci,b=Na;if(ms=0,rl=ci=null,Na=0,(vn&6)!==0)throw Error(a(331));var S=vn;if(vn|=4,Db(m.current),Ab(m,m.current,b,o),vn=S,_c(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(ze,m)}catch{}return!0}finally{ke.p=f,Y.T=c,Jb(t,r)}}function e0(t,r,o){r=lr(o,r),r=tm(t.stateNode,r,2),t=ni(t,r,2),t!==null&&(Wt(t,2),Xr(t))}function _n(t,r,o){if(t.tag===3)e0(t,t,o);else for(;r!==null;){if(r.tag===3){e0(r,t,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(li===null||!li.has(c))){t=lr(o,t),o=tb(2),c=ni(r,o,2),c!==null&&(nb(o,c,r,t),Wt(c,2),Xr(c));break}}r=r.return}}function jm(t,r,o){var c=t.pingCache;if(c===null){c=t.pingCache=new Hk;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(o)||(vm=!0,f.add(o),t=Yk.bind(null,t,r,o),r.then(t,t))}function Yk(t,r,o){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&o,t.warmLanes&=~o,Nn===t&&(Xt&o)===o&&(Xn===4||Xn===3&&(Xt&62914560)===Xt&&300>Ut()-ph?(vn&2)===0&&al(t,0):bm|=o,sl===Xt&&(sl=0)),Xr(t)}function t0(t,r){r===0&&(r=kt()),t=Ji(t,r),t!==null&&(Wt(t,r),Xr(t))}function Qk(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),t0(t,o)}function Xk(t,r){var o=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(o=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),t0(t,o)}function Jk(t,r){return Ke(t,r)}var _h=null,ol=null,Sm=!1,kh=!1,Nm=!1,hi=0;function Xr(t){t!==ol&&t.next===null&&(ol===null?_h=ol=t:ol=ol.next=t),kh=!0,Sm||(Sm=!0,eT())}function _c(t,r){if(!Nm&&kh){Nm=!0;do for(var o=!1,c=_h;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var b=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-Ve(42|t)+1)-1,m&=f&~(b&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,a0(c,m))}else m=Xt,m=Ct(c,c===Nn?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Dt(c,m)||(o=!0,a0(c,m));c=c.next}while(o);Nm=!1}}function Zk(){n0()}function n0(){kh=Sm=!1;var t=0;hi!==0&&uT()&&(t=hi);for(var r=Ut(),o=null,c=_h;c!==null;){var f=c.next,m=s0(c,r);m===0?(c.next=null,o===null?_h=f:o.next=f,f===null&&(ol=o)):(o=c,(t!==0||(m&3)!==0)&&(kh=!0)),c=f}ms!==0&&ms!==5||_c(t),hi!==0&&(hi=0)}function s0(t,r){for(var o=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Ve(m),S=1<<b,V=f[b];V===-1?((S&o)===0||(S&c)!==0)&&(f[b]=qt(S,r)):V<=r&&(t.expiredLanes|=S),m&=~S}if(r=Nn,o=Xt,o=Ct(t,t===r?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,o===0||t===r&&(wn===2||wn===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Gt(c),t.callbackNode=null,t.callbackPriority=0;if((o&3)===0||Dt(t,o)){if(r=o&-o,r===t.callbackPriority)return r;switch(c!==null&&Gt(c),de(o)){case 2:case 8:o=xn;break;case 32:o=fe;break;case 268435456:o=Ce;break;default:o=fe}return c=r0.bind(null,t),o=Ke(o,c),t.callbackPriority=r,t.callbackNode=o,r}return c!==null&&c!==null&&Gt(c),t.callbackPriority=2,t.callbackNode=null,2}function r0(t,r){if(ms!==0&&ms!==5)return t.callbackNode=null,t.callbackPriority=0,null;var o=t.callbackNode;if(wh()&&t.callbackNode!==o)return null;var c=Xt;return c=Ct(t,t===Nn?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Bb(t,c,r),s0(t,Ut()),t.callbackNode!=null&&t.callbackNode===o?r0.bind(null,t):null)}function a0(t,r){if(wh())return null;Bb(t,r,!0)}function eT(){dT(function(){(vn&6)!==0?Ke(Ht,Zk):n0()})}function Cm(){if(hi===0){var t=Wo;t===0&&(t=Et,Et<<=1,(Et&261888)===0&&(Et=256)),hi=t}return hi}function i0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ha(""+t)}function o0(t,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,t.id&&o.setAttribute("form",t.id),r.parentNode.insertBefore(o,r),t=new FormData(t),o.parentNode.removeChild(o),t}function tT(t,r,o,c,f){if(r==="submit"&&o&&o.stateNode===f){var m=i0((f[ft]||null).action),b=c.submitter;b&&(r=(r=b[ft]||null)?i0(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var S=new Hr("action","action",null,c,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(hi!==0){var V=b?o0(f,b):new FormData(f);Yf(o,{pending:!0,data:V,method:f.method,action:m},null,V)}}else typeof m=="function"&&(S.preventDefault(),V=b?o0(f,b):new FormData(f),Yf(o,{pending:!0,data:V,method:f.method,action:m},m,V))},currentTarget:f}]})}}for(var Rm=0;Rm<df.length;Rm++){var Am=df[Rm],nT=Am.toLowerCase(),sT=Am[0].toUpperCase()+Am.slice(1);Nr(nT,"on"+sT)}Nr(Vy,"onAnimationEnd"),Nr(By,"onAnimationIteration"),Nr(Uy,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(bk,"onTransitionRun"),Nr(xk,"onTransitionStart"),Nr(wk,"onTransitionCancel"),Nr(zy,"onTransitionEnd"),Le("onMouseEnter",["mouseout","mouseover"]),Le("onMouseLeave",["mouseout","mouseover"]),Le("onPointerEnter",["pointerout","pointerover"]),Le("onPointerLeave",["pointerout","pointerover"]),Fe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kc));function l0(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var c=t[o],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var S=c[b],V=S.instance,ee=S.currentTarget;if(S=S.listener,V!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ee;try{m(f)}catch(pe){Vu(pe)}f.currentTarget=null,m=V}else for(b=0;b<c.length;b++){if(S=c[b],V=S.instance,ee=S.currentTarget,S=S.listener,V!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ee;try{m(f)}catch(pe){Vu(pe)}f.currentTarget=null,m=V}}}}function Yt(t,r){var o=r[ht];o===void 0&&(o=r[ht]=new Set);var c=t+"__bubble";o.has(c)||(c0(r,t,2,!1),o.add(c))}function Im(t,r,o){var c=0;r&&(c|=4),c0(o,t,c,r)}var Th="_reactListening"+Math.random().toString(36).slice(2);function Mm(t){if(!t[Th]){t[Th]=!0,G.forEach(function(o){o!=="selectionchange"&&(rT.has(o)||Im(o,!1,t),Im(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Th]||(r[Th]=!0,Im("selectionchange",!1,r))}}function c0(t,r,o,c){switch(V0(r)){case 2:var f=IT;break;case 8:f=MT;break;default:f=Km}o=f.bind(null,r,o,t),f=void 0,!Hi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,o,{capture:!0,passive:f}):t.addEventListener(r,o,!0):f!==void 0?t.addEventListener(r,o,{passive:f}):t.addEventListener(r,o,!1)}function Dm(t,r,o,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var S=c.stateNode.containerInfo;if(S===f)break;if(b===4)for(b=c.return;b!==null;){var V=b.tag;if((V===3||V===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;S!==null;){if(b=fn(S),b===null)return;if(V=b.tag,V===5||V===6||V===26||V===27){c=m=b;continue e}S=S.parentNode}}c=c.return}Wa(function(){var ee=m,pe=rr(o),Te=[];e:{var se=Fy.get(t);if(se!==void 0){var le=Hr,it=t;switch(t){case"keypress":if(Wi(o)===0)break e;case"keydown":case"keyup":le=Pu;break;case"focusin":it="focus",le=Ki;break;case"focusout":it="blur",le=Ki;break;case"beforeblur":case"afterblur":le=Ki;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=v;break;case Vy:case By:case Uy:le=Nu;break;case zy:le=N;break;case"scroll":case"scrollend":le=Gl;break;case"wheel":le=ie;break;case"copy":case"cut":case"paste":le=Cu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ma;break;case"toggle":case"beforetoggle":le=Vt}var wt=(r&4)!==0,jn=!wt&&(t==="scroll"||t==="scrollend"),K=wt?se!==null?se+"Capture":null:se;wt=[];for(var q=ee,Z;q!==null;){var be=q;if(Z=be.stateNode,be=be.tag,be!==5&&be!==26&&be!==27||Z===null||K===null||(be=Tr(q,K),be!=null&&wt.push(Tc(q,be,Z))),jn)break;q=q.return}0<wt.length&&(se=new le(se,it,null,o,pe),Te.push({event:se,listeners:wt}))}}if((r&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",se&&o!==Hl&&(it=o.relatedTarget||o.fromElement)&&(fn(it)||it[et]))break e;if((le||se)&&(se=pe.window===pe?pe:(se=pe.ownerDocument)?se.defaultView||se.parentWindow:window,le?(it=o.relatedTarget||o.toElement,le=ee,it=it?fn(it):null,it!==null&&(jn=u(it),wt=it.tag,it!==jn||wt!==5&&wt!==27&&wt!==6)&&(it=null)):(le=null,it=ee),le!==it)){if(wt=Kl,be="onMouseLeave",K="onMouseEnter",q="mouse",(t==="pointerout"||t==="pointerover")&&(wt=ma,be="onPointerLeave",K="onPointerEnter",q="pointer"),jn=le==null?se:oe(le),Z=it==null?se:oe(it),se=new wt(be,q+"leave",le,o,pe),se.target=jn,se.relatedTarget=Z,be=null,fn(pe)===ee&&(wt=new wt(K,q+"enter",it,o,pe),wt.target=Z,wt.relatedTarget=jn,be=wt),jn=be,le&&it)t:{for(wt=aT,K=le,q=it,Z=0,be=K;be;be=wt(be))Z++;be=0;for(var gt=q;gt;gt=wt(gt))be++;for(;0<Z-be;)K=wt(K),Z--;for(;0<be-Z;)q=wt(q),be--;for(;Z--;){if(K===q||q!==null&&K===q.alternate){wt=K;break t}K=wt(K),q=wt(q)}wt=null}else wt=null;le!==null&&u0(Te,se,le,wt,!1),it!==null&&jn!==null&&u0(Te,jn,it,wt,!0)}}e:{if(se=ee?oe(ee):window,le=se.nodeName&&se.nodeName.toLowerCase(),le==="select"||le==="input"&&se.type==="file")var pn=Sy;else if(Ey(se))if(Ny)pn=gk;else{pn=mk;var ut=fk}else le=se.nodeName,!le||le.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ee&&Ns(ee.elementType)&&(pn=Sy):pn=pk;if(pn&&(pn=pn(t,ee))){jy(Te,pn,o,pe);break e}ut&&ut(t,se,ee),t==="focusout"&&ee&&se.type==="number"&&ee.memoizedProps.value!=null&&qa(se,"number",se.value)}switch(ut=ee?oe(ee):window,t){case"focusin":(Ey(ut)||ut.contentEditable==="true")&&(Vo=ut,cf=ee,Zl=null);break;case"focusout":Zl=cf=Vo=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,Ly(Te,o,pe);break;case"selectionchange":if(vk)break;case"keydown":case"keyup":Ly(Te,o,pe)}var zt;if(yn)e:{switch(t){case"compositionstart":var Jt="onCompositionStart";break e;case"compositionend":Jt="onCompositionEnd";break e;case"compositionupdate":Jt="onCompositionUpdate";break e}Jt=void 0}else Oo?Yi(t,o)&&(Jt="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(Jt="onCompositionStart");Jt&&(Gr&&o.locale!=="ko"&&(Oo||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&Oo&&(zt=Wl()):(qr=pe,$l="value"in qr?qr.value:qr.textContent,Oo=!0)),ut=Eh(ee,Jt),0<ut.length&&(Jt=new Wr(Jt,t,null,o,pe),Te.push({event:Jt,listeners:ut}),zt?Jt.data=zt:(zt=Lo(o),zt!==null&&(Jt.data=zt)))),(zt=ir?ck(t,o):uk(t,o))&&(Jt=Eh(ee,"onBeforeInput"),0<Jt.length&&(ut=new Wr("onBeforeInput","beforeinput",null,o,pe),Te.push({event:ut,listeners:Jt}),ut.data=zt)),tT(Te,t,ee,o,pe)}l0(Te,r)})}function Tc(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Eh(t,r){for(var o=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Tr(t,o),f!=null&&c.unshift(Tc(t,f,m)),f=Tr(t,r),f!=null&&c.push(Tc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function aT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function u0(t,r,o,c,f){for(var m=r._reactName,b=[];o!==null&&o!==c;){var S=o,V=S.alternate,ee=S.stateNode;if(S=S.tag,V!==null&&V===c)break;S!==5&&S!==26&&S!==27||ee===null||(V=ee,f?(ee=Tr(o,m),ee!=null&&b.unshift(Tc(o,ee,V))):f||(ee=Tr(o,m),ee!=null&&b.push(Tc(o,ee,V)))),o=o.return}b.length!==0&&t.push({event:r,listeners:b})}var iT=/\r\n?/g,oT=/\u0000|\uFFFD/g;function h0(t){return(typeof t=="string"?t:""+t).replace(iT,`
`).replace(oT,"")}function d0(t,r){return r=h0(r),h0(t)===r}function En(t,r,o,c,f,m){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||$n(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&$n(t,""+c);break;case"className":re(t,"class",c);break;case"tabIndex":re(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":re(t,o,c);break;case"style":vs(t,c,m);break;case"data":if(r!=="object"){re(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){t.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=Ha(""+c),t.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&En(t,r,"name",f.name,f,null),En(t,r,"formEncType",f.formEncType,f,null),En(t,r,"formMethod",f.formMethod,f,null),En(t,r,"formTarget",f.formTarget,f,null)):(En(t,r,"encType",f.encType,f,null),En(t,r,"method",f.method,f,null),En(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(o);break}c=Ha(""+c),t.setAttribute(o,c);break;case"onClick":c!=null&&(t.onclick=Ps);break;case"onScroll":c!=null&&Yt("scroll",t);break;case"onScrollEnd":c!=null&&Yt("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=o}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}o=Ha(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""+c):t.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,""):t.removeAttribute(o);break;case"capture":case"download":c===!0?t.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(o,c):t.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(o,c):t.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(o):t.setAttribute(o,c);break;case"popover":Yt("beforetoggle",t),Yt("toggle",t),ue(t,"popover",c);break;case"xlinkActuate":Se(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Se(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Se(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Se(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Se(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Se(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Se(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Se(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Se(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ue(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=zr.get(o)||o,ue(t,o,c))}}function Pm(t,r,o,c,f,m){switch(o){case"style":vs(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(o=c.__html,o!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=o}}break;case"children":typeof c=="string"?$n(t,c):(typeof c=="number"||typeof c=="bigint")&&$n(t,""+c);break;case"onScroll":c!=null&&Yt("scroll",t);break;case"onScrollEnd":c!=null&&Yt("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Ps);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!J.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=t[ft]||null,m=m!=null?m[o]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(o in t?t[o]=null:t.hasAttribute(o)&&t.removeAttribute(o)),t.addEventListener(r,c,f);break e}o in t?t[o]=c:c===!0?t.setAttribute(o,""):ue(t,o,c)}}}function ks(t,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yt("error",t),Yt("load",t);var c=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var b=o[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:En(t,r,m,b,o,null)}}f&&En(t,r,"srcSet",o.srcSet,o,null),c&&En(t,r,"src",o.src,o,null);return;case"input":Yt("invalid",t);var S=m=b=f=null,V=null,ee=null;for(c in o)if(o.hasOwnProperty(c)){var pe=o[c];if(pe!=null)switch(c){case"name":f=pe;break;case"type":b=pe;break;case"checked":V=pe;break;case"defaultChecked":ee=pe;break;case"value":m=pe;break;case"defaultValue":S=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(a(137,r));break;default:En(t,r,c,pe,o,null)}}Fi(t,m,S,V,ee,b,f,!1);return;case"select":Yt("invalid",t),c=b=m=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":b=S;break;case"multiple":c=S;default:En(t,r,f,S,o,null)}r=m,o=b,t.multiple=!!c,r!=null?xr(t,!!c,r,!1):o!=null&&xr(t,!!c,o,!0);return;case"textarea":Yt("invalid",t),m=f=c=null;for(b in o)if(o.hasOwnProperty(b)&&(S=o[b],S!=null))switch(b){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(a(91));break;default:En(t,r,b,S,o,null)}Hn(t,c,f,m);return;case"option":for(V in o)o.hasOwnProperty(V)&&(c=o[V],c!=null)&&(V==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":En(t,r,V,c,o,null));return;case"dialog":Yt("beforetoggle",t),Yt("toggle",t),Yt("cancel",t),Yt("close",t);break;case"iframe":case"object":Yt("load",t);break;case"video":case"audio":for(c=0;c<kc.length;c++)Yt(kc[c],t);break;case"image":Yt("error",t),Yt("load",t);break;case"details":Yt("toggle",t);break;case"embed":case"source":case"link":Yt("error",t),Yt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(c=o[ee],c!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:En(t,r,ee,c,o,null)}return;default:if(Ns(r)){for(pe in o)o.hasOwnProperty(pe)&&(c=o[pe],c!==void 0&&Pm(t,r,pe,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&En(t,r,S,c,o,null))}function lT(t,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,S=null,V=null,ee=null,pe=null;for(le in o){var Te=o[le];if(o.hasOwnProperty(le)&&Te!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":V=Te;default:c.hasOwnProperty(le)||En(t,r,le,null,c,Te)}}for(var se in c){var le=c[se];if(Te=o[se],c.hasOwnProperty(se)&&(le!=null||Te!=null))switch(se){case"type":m=le;break;case"name":f=le;break;case"checked":ee=le;break;case"defaultChecked":pe=le;break;case"value":b=le;break;case"defaultValue":S=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,r));break;default:le!==Te&&En(t,r,se,le,c,Te)}}Fa(t,b,S,V,ee,pe,m,f);return;case"select":le=b=S=se=null;for(m in o)if(V=o[m],o.hasOwnProperty(m)&&V!=null)switch(m){case"value":break;case"multiple":le=V;default:c.hasOwnProperty(m)||En(t,r,m,null,c,V)}for(f in c)if(m=c[f],V=o[f],c.hasOwnProperty(f)&&(m!=null||V!=null))switch(f){case"value":se=m;break;case"defaultValue":S=m;break;case"multiple":b=m;default:m!==V&&En(t,r,f,m,c,V)}r=S,o=b,c=le,se!=null?xr(t,!!o,se,!1):!!c!=!!o&&(r!=null?xr(t,!!o,r,!0):xr(t,!!o,o?[]:"",!1));return;case"textarea":le=se=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:En(t,r,S,null,c,f)}for(b in c)if(f=c[b],m=o[b],c.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":se=f;break;case"defaultValue":le=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&En(t,r,b,f,c,m)}hn(t,se,le);return;case"option":for(var it in o)se=o[it],o.hasOwnProperty(it)&&se!=null&&!c.hasOwnProperty(it)&&(it==="selected"?t.selected=!1:En(t,r,it,null,c,se));for(V in c)se=c[V],le=o[V],c.hasOwnProperty(V)&&se!==le&&(se!=null||le!=null)&&(V==="selected"?t.selected=se&&typeof se!="function"&&typeof se!="symbol":En(t,r,V,se,c,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var wt in o)se=o[wt],o.hasOwnProperty(wt)&&se!=null&&!c.hasOwnProperty(wt)&&En(t,r,wt,null,c,se);for(ee in c)if(se=c[ee],le=o[ee],c.hasOwnProperty(ee)&&se!==le&&(se!=null||le!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,r));break;default:En(t,r,ee,se,c,le)}return;default:if(Ns(r)){for(var jn in o)se=o[jn],o.hasOwnProperty(jn)&&se!==void 0&&!c.hasOwnProperty(jn)&&Pm(t,r,jn,void 0,c,se);for(pe in c)se=c[pe],le=o[pe],!c.hasOwnProperty(pe)||se===le||se===void 0&&le===void 0||Pm(t,r,pe,se,c,le);return}}for(var K in o)se=o[K],o.hasOwnProperty(K)&&se!=null&&!c.hasOwnProperty(K)&&En(t,r,K,null,c,se);for(Te in c)se=c[Te],le=o[Te],!c.hasOwnProperty(Te)||se===le||se==null&&le==null||En(t,r,Te,se,c,le)}function f0(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var f=o[c],m=f.transferSize,b=f.initiatorType,S=f.duration;if(m&&S&&f0(b)){for(b=0,S=f.responseEnd,c+=1;c<o.length;c++){var V=o[c],ee=V.startTime;if(ee>S)break;var pe=V.transferSize,Te=V.initiatorType;pe&&f0(Te)&&(V=V.responseEnd,b+=pe*(V<S?1:(S-ee)/(V-ee)))}if(--c,r+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Lm=null,Om=null;function jh(t){return t.nodeType===9?t:t.ownerDocument}function m0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Vm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Bm=null;function uT(){var t=window.event;return t&&t.type==="popstate"?t===Bm?!1:(Bm=t,!0):(Bm=null,!1)}var g0=typeof setTimeout=="function"?setTimeout:void 0,hT=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,dT=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(t){return y0.resolve(null).then(t).catch(fT)}:g0;function fT(t){setTimeout(function(){throw t})}function di(t){return t==="head"}function v0(t,r){var o=r,c=0;do{var f=o.nextSibling;if(t.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(c===0){t.removeChild(f),hl(r);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")Ec(t.ownerDocument.documentElement);else if(o==="head"){o=t.ownerDocument.head,Ec(o);for(var m=o.firstChild;m;){var b=m.nextSibling,S=m.nodeName;m[qn]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=b}}else o==="body"&&Ec(t.ownerDocument.body);o=f}while(o);hl(r)}function b0(t,r){var o=t;t=0;do{var c=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(t===0)break;t--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||t++;o=c}while(o)}function Um(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Um(o),Yn(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}t.removeChild(o)}}function mT(t,r,o,c){for(;t.nodeType===1;){var f=o;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[qn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=fr(t.nextSibling),t===null)break}return null}function pT(t,r,o){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=fr(t.nextSibling),t===null))return null;return t}function x0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=fr(t.nextSibling),t===null))return null;return t}function zm(t){return t.data==="$?"||t.data==="$~"}function Fm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function gT(t,r){var o=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||o.readyState!=="loading")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function fr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var qm=null;function w0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"||o==="/&"){if(r===0)return fr(t.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}t=t.nextSibling}return null}function _0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return t;r--}else o!=="/$"&&o!=="/&"||r++}t=t.previousSibling}return null}function k0(t,r,o){switch(r=jh(o),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Ec(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Yn(t)}var mr=new Map,T0=new Set;function Sh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ca=ke.d;ke.d={f:yT,r:vT,D:bT,C:xT,L:wT,m:_T,X:TT,S:kT,M:ET};function yT(){var t=Ca.f(),r=vh();return t||r}function vT(t){var r=z(t);r!==null&&r.tag===5&&r.type==="form"?zv(r):Ca.r(t)}var ll=typeof document>"u"?null:document;function E0(t,r,o){var c=ll;if(c&&typeof r=="string"&&r){var f=Mn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),T0.has(f)||(T0.add(f),t={rel:t,crossOrigin:o,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),ks(r,"link",t),C(r),c.head.appendChild(r)))}}function bT(t){Ca.D(t),E0("dns-prefetch",t,null)}function xT(t,r){Ca.C(t,r),E0("preconnect",t,r)}function wT(t,r,o){Ca.L(t,r,o);var c=ll;if(c&&t&&r){var f='link[rel="preload"][as="'+Mn(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Mn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Mn(o.imageSizes)+'"]')):f+='[href="'+Mn(t)+'"]';var m=f;switch(r){case"style":m=cl(t);break;case"script":m=ul(t)}mr.has(m)||(t=k({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:t,as:r},o),mr.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(jc(m))||r==="script"&&c.querySelector(Sc(m))||(r=c.createElement("link"),ks(r,"link",t),C(r),c.head.appendChild(r)))}}function _T(t,r){Ca.m(t,r);var o=ll;if(o&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Mn(c)+'"][href="'+Mn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ul(t)}if(!mr.has(m)&&(t=k({rel:"modulepreload",href:t},r),mr.set(m,t),o.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Sc(m)))return}c=o.createElement("link"),ks(c,"link",t),C(c),o.head.appendChild(c)}}}function kT(t,r,o){Ca.S(t,r,o);var c=ll;if(c&&t){var f=T(c).hoistableStyles,m=cl(t);r=r||"default";var b=f.get(m);if(!b){var S={loading:0,preload:null};if(b=c.querySelector(jc(m)))S.loading=5;else{t=k({rel:"stylesheet",href:t,"data-precedence":r},o),(o=mr.get(m))&&Hm(t,o);var V=b=c.createElement("link");C(V),ks(V,"link",t),V._p=new Promise(function(ee,pe){V.onload=ee,V.onerror=pe}),V.addEventListener("load",function(){S.loading|=1}),V.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Nh(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:S},f.set(m,b)}}}function TT(t,r){Ca.X(t,r);var o=ll;if(o&&t){var c=T(o).hoistableScripts,f=ul(t),m=c.get(f);m||(m=o.querySelector(Sc(f)),m||(t=k({src:t,async:!0},r),(r=mr.get(f))&&$m(t,r),m=o.createElement("script"),C(m),ks(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function ET(t,r){Ca.M(t,r);var o=ll;if(o&&t){var c=T(o).hoistableScripts,f=ul(t),m=c.get(f);m||(m=o.querySelector(Sc(f)),m||(t=k({src:t,async:!0,type:"module"},r),(r=mr.get(f))&&$m(t,r),m=o.createElement("script"),C(m),ks(m,"link",t),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function j0(t,r,o,c){var f=(f=Oe.current)?Sh(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=cl(o.href),o=T(f).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){t=cl(o.href);var m=T(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(jc(t)))&&!m._p&&(b.instance=m,b.state.loading=5),mr.has(t)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},mr.set(t,o),m||jT(f,t,o,b.state))),r&&c===null)throw Error(a(528,""));return b}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ul(o),o=T(f).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function cl(t){return'href="'+Mn(t)+'"'}function jc(t){return'link[rel="stylesheet"]['+t+"]"}function S0(t){return k({},t,{"data-precedence":t.precedence,precedence:null})}function jT(t,r,o,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),ks(r,"link",o),C(r),t.head.appendChild(r))}function ul(t){return'[src="'+Mn(t)+'"]'}function Sc(t){return"script[async]"+t}function N0(t,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+Mn(o.href)+'"]');if(c)return r.instance=c,C(c),c;var f=k({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),C(c),ks(c,"style",f),Nh(c,o.precedence,t),r.instance=c;case"stylesheet":f=cl(o.href);var m=t.querySelector(jc(f));if(m)return r.state.loading|=4,r.instance=m,C(m),m;c=S0(o),(f=mr.get(f))&&Hm(c,f),m=(t.ownerDocument||t).createElement("link"),C(m);var b=m;return b._p=new Promise(function(S,V){b.onload=S,b.onerror=V}),ks(m,"link",c),r.state.loading|=4,Nh(m,o.precedence,t),r.instance=m;case"script":return m=ul(o.src),(f=t.querySelector(Sc(m)))?(r.instance=f,C(f),f):(c=o,(f=mr.get(m))&&(c=k({},o),$m(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),C(f),ks(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Nh(c,o.precedence,t));return r.instance}function Nh(t,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,b=0;b<c.length;b++){var S=c[b];if(S.dataset.precedence===r)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(t,r.firstChild))}function Hm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function $m(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Ch=null;function C0(t,r,o){if(Ch===null){var c=new Map,f=Ch=new Map;f.set(o,c)}else f=Ch,c=f.get(o),c||(c=new Map,f.set(o,c));if(c.has(t))return c;for(c.set(t,null),o=o.getElementsByTagName(t),f=0;f<o.length;f++){var m=o[f];if(!(m[qn]||m[$e]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=t+b;var S=c.get(b);S?S.push(m):c.set(b,[m])}}return c}function R0(t,r,o){t=t.ownerDocument||t,t.head.insertBefore(o,r==="title"?t.querySelector("head > title"):null)}function ST(t,r,o){if(o===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function A0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function NT(t,r,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=cl(c.href),m=r.querySelector(jc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Rh.bind(t),r.then(t,t)),o.state.loading|=4,o.instance=m,C(m);return}m=r.ownerDocument||r,c=S0(c),(f=mr.get(f))&&Hm(c,f),m=m.createElement("link"),C(m);var b=m;b._p=new Promise(function(S,V){b.onload=S,b.onerror=V}),ks(m,"link",c),o.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(t.count++,o=Rh.bind(t),r.addEventListener("load",o),r.addEventListener("error",o))}}var Wm=0;function CT(t,r){return t.stylesheets&&t.count===0&&Ih(t,t.stylesheets),0<t.count||0<t.imgCount?function(o){var c=setTimeout(function(){if(t.stylesheets&&Ih(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Wm===0&&(Wm=62500*cT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ih(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Wm?50:800)+r);return t.unsuspend=o,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Rh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ih(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ah=null;function Ih(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ah=new Map,r.forEach(RT,t),Ah=null,Rh.call(t))}function RT(t,r){if(!(r.state.loading&4)){var o=Ah.get(t);if(o)var c=o.get(null);else{o=new Map,Ah.set(t,o);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}f=r.instance,b=f.getAttribute("data-precedence"),m=o.get(b)||c,m===c&&o.set(null,f),o.set(b,f),this.count++,c=Rh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Nc={$$typeof:ce,Provider:null,Consumer:null,_currentValue:Pe,_currentValue2:Pe,_threadCount:0};function AT(t,r,o,c,f,m,b,S,V){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sn(0),this.hiddenUpdates=sn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function I0(t,r,o,c,f,m,b,S,V,ee,pe,Te){return t=new AT(t,r,o,b,V,ee,pe,Te,S),r=1,m===!0&&(r|=24),m=Ys(3,null,null,r),t.current=m,m.stateNode=t,r=Ef(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:o,cache:r},Cf(m),t}function M0(t){return t?(t=zo,t):zo}function D0(t,r,o,c,f,m){f=M0(f),c.context===null?c.context=f:c.pendingContext=f,c=ti(r),c.payload={element:o},m=m===void 0?null:m,m!==null&&(c.callback=m),o=ni(t,c,r),o!==null&&(Hs(o,t,r),ic(o,t,r))}function P0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Gm(t,r){P0(t,r),(t=t.alternate)&&P0(t,r)}function L0(t){if(t.tag===13||t.tag===31){var r=Ji(t,67108864);r!==null&&Hs(r,t,67108864),Gm(t,67108864)}}function O0(t){if(t.tag===13||t.tag===31){var r=er();r=F(r);var o=Ji(t,r);o!==null&&Hs(o,t,r),Gm(t,r)}}var Mh=!0;function IT(t,r,o,c){var f=Y.T;Y.T=null;var m=ke.p;try{ke.p=2,Km(t,r,o,c)}finally{ke.p=m,Y.T=f}}function MT(t,r,o,c){var f=Y.T;Y.T=null;var m=ke.p;try{ke.p=8,Km(t,r,o,c)}finally{ke.p=m,Y.T=f}}function Km(t,r,o,c){if(Mh){var f=Ym(c);if(f===null)Dm(t,r,c,Dh,o),B0(t,c);else if(PT(f,t,r,o,c))c.stopPropagation();else if(B0(t,c),r&4&&-1<DT.indexOf(t)){for(;f!==null;){var m=z(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=jt(m.pendingLanes);if(b!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var V=1<<31-Ve(b);S.entanglements[1]|=V,b&=~V}Xr(m),(vn&6)===0&&(gh=Ut()+500,_c(0))}}break;case 31:case 13:S=Ji(m,2),S!==null&&Hs(S,m,2),vh(),Gm(m,2)}if(m=Ym(c),m===null&&Dm(t,r,c,Dh,o),m===f)break;f=m}f!==null&&c.stopPropagation()}else Dm(t,r,c,null,o)}}function Ym(t){return t=rr(t),Qm(t)}var Dh=null;function Qm(t){if(Dh=null,t=fn(t),t!==null){var r=u(t);if(r===null)t=null;else{var o=r.tag;if(o===13){if(t=d(r),t!==null)return t;t=null}else if(o===31){if(t=p(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Dh=t,null}function V0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ln()){case Ht:return 2;case xn:return 8;case fe:case xe:return 32;case Ce:return 268435456;default:return 32}default:return 32}}var Xm=!1,fi=null,mi=null,pi=null,Cc=new Map,Rc=new Map,gi=[],DT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B0(t,r){switch(t){case"focusin":case"focusout":fi=null;break;case"dragenter":case"dragleave":mi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":Cc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(r.pointerId)}}function Ac(t,r,o,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=z(r),r!==null&&L0(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function PT(t,r,o,c,f){switch(r){case"focusin":return fi=Ac(fi,t,r,o,c,f),!0;case"dragenter":return mi=Ac(mi,t,r,o,c,f),!0;case"mouseover":return pi=Ac(pi,t,r,o,c,f),!0;case"pointerover":var m=f.pointerId;return Cc.set(m,Ac(Cc.get(m)||null,t,r,o,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Rc.set(m,Ac(Rc.get(m)||null,t,r,o,c,f)),!0}return!1}function U0(t){var r=fn(t.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=d(o),r!==null){t.blockedOn=r,ye(t.priority,function(){O0(o)});return}}else if(r===31){if(r=p(o),r!==null){t.blockedOn=r,ye(t.priority,function(){O0(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ph(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=Ym(t.nativeEvent);if(o===null){o=t.nativeEvent;var c=new o.constructor(o.type,o);Hl=c,o.target.dispatchEvent(c),Hl=null}else return r=z(o),r!==null&&L0(r),t.blockedOn=o,!1;r.shift()}return!0}function z0(t,r,o){Ph(t)&&o.delete(r)}function LT(){Xm=!1,fi!==null&&Ph(fi)&&(fi=null),mi!==null&&Ph(mi)&&(mi=null),pi!==null&&Ph(pi)&&(pi=null),Cc.forEach(z0),Rc.forEach(z0)}function Lh(t,r){t.blockedOn===r&&(t.blockedOn=null,Xm||(Xm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,LT)))}var Oh=null;function F0(t){Oh!==t&&(Oh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Oh===t&&(Oh=null);for(var r=0;r<t.length;r+=3){var o=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(Qm(c||o)===null)continue;break}var m=z(o);m!==null&&(t.splice(r,3),r-=3,Yf(m,{pending:!0,data:f,method:o.method,action:c},c,f))}}))}function hl(t){function r(V){return Lh(V,t)}fi!==null&&Lh(fi,t),mi!==null&&Lh(mi,t),pi!==null&&Lh(pi,t),Cc.forEach(r),Rc.forEach(r);for(var o=0;o<gi.length;o++){var c=gi[o];c.blockedOn===t&&(c.blockedOn=null)}for(;0<gi.length&&(o=gi[0],o.blockedOn===null);)U0(o),o.blockedOn===null&&gi.shift();if(o=(t.ownerDocument||t).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var f=o[c],m=o[c+1],b=f[ft]||null;if(typeof m=="function")b||F0(o);else if(b){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[ft]||null)S=b.formAction;else if(Qm(f)!==null)continue}else S=b.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),F0(o)}}}function q0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Jm(t){this._internalRoot=t}Vh.prototype.render=Jm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var o=r.current,c=er();D0(o,c,t,r,null,null)},Vh.prototype.unmount=Jm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;D0(t.current,2,null,t,null,null),vh(),r[et]=null}};function Vh(t){this._internalRoot=t}Vh.prototype.unstable_scheduleHydration=function(t){if(t){var r=me();t={blockedOn:null,target:t,priority:r};for(var o=0;o<gi.length&&r!==0&&r<gi[o].priority;o++);gi.splice(o,0,t),o===0&&U0(t)}};var H0=e.version;if(H0!=="19.2.4")throw Error(a(527,H0,"19.2.4"));ke.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(r),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var OT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{ze=Bh.inject(OT),Xe=Bh}catch{}}return Mc.createRoot=function(t,r){if(!l(t))throw Error(a(299));var o=!1,c="",f=Xv,m=Jv,b=Zv;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=I0(t,1,!1,null,null,o,c,null,f,m,b,q0),t[et]=r.current,Mm(t),new Jm(r)},Mc.hydrateRoot=function(t,r,o){if(!l(t))throw Error(a(299));var c=!1,f="",m=Xv,b=Jv,S=Zv,V=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(V=o.formState)),r=I0(t,1,!0,r,o??null,c,f,V,m,b,S,q0),r.context=M0(null),o=r.current,c=er(),c=F(c),f=ti(c),f.callback=null,ni(o,f,c),o=c,r.current.lanes=o,Wt(r,o),Xr(r),t[et]=r.current,Mm(t),new Vh(r)},Mc.version="19.2.4",Mc}var e1;function GT(){if(e1)return tp.exports;e1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),tp.exports=WT(),tp.exports}var KT=GT();const YT="modulepreload",QT=function(s){return"/login/"+s},t1={},vr=function(e,n,a){let l=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(x=>Promise.resolve(x).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");l=g(n.map(y=>{if(y=QT(y),y in t1)return;t1[y]=!0;const x=y.endsWith(".css"),k=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${k}`))return;const j=document.createElement("link");if(j.rel=x?"stylesheet":YT,x||(j.as="script"),j.crossOrigin="",j.href=y,p&&j.setAttribute("nonce",p),document.head.appendChild(j),x)return new Promise((P,$)=>{j.addEventListener("load",P),j.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var n1="popstate";function XT(s={}){function e(a,l){let{pathname:u,search:d,hash:p}=a.location;return Dp("",{pathname:u,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){return typeof l=="string"?l:Zc(l)}return ZT(e,n,null,s)}function zn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function yr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JT(){return Math.random().toString(36).substring(2,10)}function s1(s,e){return{usr:s.state,key:s.key,idx:e}}function Dp(s,e,n=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Pl(e):e,state:n,key:e&&e.key||a||JT()}}function Zc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Pl(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function ZT(s,e,n,a={}){let{window:l=document.defaultView,v5Compat:u=!1}=a,d=l.history,p="POP",g=null,y=x();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function x(){return(d.state||{idx:null}).idx}function k(){p="POP";let L=x(),te=L==null?null:L-y;y=L,g&&g({action:p,location:B.location,delta:te})}function j(L,te){p="PUSH";let Q=Dp(B.location,L,te);y=x()+1;let ce=s1(Q,y),ve=B.createHref(Q);try{d.pushState(ce,"",ve)}catch(Ue){if(Ue instanceof DOMException&&Ue.name==="DataCloneError")throw Ue;l.location.assign(ve)}u&&g&&g({action:p,location:B.location,delta:1})}function P(L,te){p="REPLACE";let Q=Dp(B.location,L,te);y=x();let ce=s1(Q,y),ve=B.createHref(Q);d.replaceState(ce,"",ve),u&&g&&g({action:p,location:B.location,delta:0})}function $(L){return eE(L)}let B={get action(){return p},get location(){return s(l,d)},listen(L){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(n1,k),g=L,()=>{l.removeEventListener(n1,k),g=null}},createHref(L){return e(l,L)},createURL:$,encodeLocation(L){let te=$(L);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:j,replace:P,go(L){return d.go(L)}};return B}function eE(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),zn(n,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:Zc(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function ex(s,e,n="/"){return tE(s,e,n,!1)}function tE(s,e,n,a){let l=typeof e=="string"?Pl(e):e,u=Pa(l.pathname||"/",n);if(u==null)return null;let d=tx(s);nE(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=fE(u);p=hE(d[g],y,a)}return p}function tx(s,e=[],n=[],a="",l=!1){let u=(d,p,g=l,y)=>{let x={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(a)&&g)return;zn(x.relativePath.startsWith(a),`Absolute route path "${x.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(a.length)}let k=Ia([a,x.relativePath]),j=n.concat(x);d.children&&d.children.length>0&&(zn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),tx(d.children,e,j,k,g)),!(d.path==null&&!d.index)&&e.push({path:k,score:cE(k,d.index),routesMeta:j})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of nx(d.path))u(d,p,!0,g)}),e}function nx(s){let e=s.split("/");if(e.length===0)return[];let[n,...a]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return l?[u,""]:[u];let d=nx(a.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function nE(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:uE(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var sE=/^:[\w-]+$/,rE=3,aE=2,iE=1,oE=10,lE=-2,r1=s=>s==="*";function cE(s,e){let n=s.split("/"),a=n.length;return n.some(r1)&&(a+=lE),e&&(a+=aE),n.filter(l=>!r1(l)).reduce((l,u)=>l+(sE.test(u)?rE:u===""?iE:oE),a)}function uE(s,e){return s.length===e.length&&s.slice(0,-1).every((a,l)=>a===e[l])?s[s.length-1]-e[e.length-1]:0}function hE(s,e,n=!1){let{routesMeta:a}=s,l={},u="/",d=[];for(let p=0;p<a.length;++p){let g=a[p],y=p===a.length-1,x=u==="/"?e:e.slice(u.length)||"/",k=dd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),j=g.route;if(!k&&y&&n&&!a[a.length-1].route.index&&(k=dd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!k)return null;Object.assign(l,k.params),d.push({params:l,pathname:Ia([u,k.pathname]),pathnameBase:yE(Ia([u,k.pathnameBase])),route:j}),k.pathnameBase!=="/"&&(u=Ia([u,k.pathnameBase]))}return d}function dd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,a]=dE(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:a.reduce((y,{paramName:x,isOptional:k},j)=>{if(x==="*"){let $=p[j]||"";d=u.slice(0,u.length-$.length).replace(/(.)\/+$/,"$1")}const P=p[j];return k&&!P?y[x]=void 0:y[x]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function dE(s,e=!1,n=!0){yr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(a.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),a]}function fE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Pa(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=s.charAt(n);return a&&a!=="/"?null:s.slice(n)||"/"}var mE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function pE(s,e="/"){let{pathname:n,search:a="",hash:l=""}=typeof s=="string"?Pl(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=a1(n.substring(1),"/"):u=a1(n,e)):u=e,{pathname:u,search:vE(a),hash:bE(l)}}function a1(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function ap(s,e,n,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gE(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dg(s){let e=gE(s);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function fg(s,e,n,a=!1){let l;typeof s=="string"?l=Pl(s):(l={...s},zn(!l.pathname||!l.pathname.includes("?"),ap("?","pathname","search",l)),zn(!l.pathname||!l.pathname.includes("#"),ap("#","pathname","hash",l)),zn(!l.search||!l.search.includes("#"),ap("#","search","hash",l)));let u=s===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=n;else{let k=e.length-1;if(!a&&d.startsWith("..")){let j=d.split("/");for(;j[0]==="..";)j.shift(),k-=1;l.pathname=j.join("/")}p=k>=0?e[k]:"/"}let g=pE(l,p),y=d&&d!=="/"&&d.endsWith("/"),x=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var Ia=s=>s.join("/").replace(/\/\/+/g,"/"),yE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),vE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,bE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,xE=class{constructor(s,e,n,a=!1){this.status=s,this.statusText=e||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function wE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function _E(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var sx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rx(s,e){let n=s;if(typeof n!="string"||!mE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let a=n,l=!1;if(sx)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=Pa(d.pathname,e);d.origin===u.origin&&p!=null?n=p+d.search+d.hash:l=!0}catch{yr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ax=["POST","PUT","PATCH","DELETE"];new Set(ax);var kE=["GET",...ax];new Set(kE);var Ll=_.createContext(null);Ll.displayName="DataRouter";var Md=_.createContext(null);Md.displayName="DataRouterState";var TE=_.createContext(!1),ix=_.createContext({isTransitioning:!1});ix.displayName="ViewTransition";var EE=_.createContext(new Map);EE.displayName="Fetchers";var jE=_.createContext(null);jE.displayName="Await";var sr=_.createContext(null);sr.displayName="Navigation";var hu=_.createContext(null);hu.displayName="Location";var Br=_.createContext({outlet:null,matches:[],isDataRoute:!1});Br.displayName="Route";var mg=_.createContext(null);mg.displayName="RouteError";var ox="REACT_ROUTER_ERROR",SE="REDIRECT",NE="ROUTE_ERROR_RESPONSE";function CE(s){if(s.startsWith(`${ox}:${SE}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function RE(s){if(s.startsWith(`${ox}:${NE}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new xE(e.status,e.statusText,e.data)}catch{}}function AE(s,{relative:e}={}){zn(Ol(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=_.useContext(sr),{hash:l,pathname:u,search:d}=du(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Ia([n,u])),a.createHref({pathname:p,search:d,hash:l})}function Ol(){return _.useContext(hu)!=null}function Ur(){return zn(Ol(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(hu).location}var lx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cx(s){_.useContext(sr).static||_.useLayoutEffect(s)}function Ds(){let{isDataRoute:s}=_.useContext(Br);return s?$E():IE()}function IE(){zn(Ol(),"useNavigate() may be used only in the context of a <Router> component.");let s=_.useContext(Ll),{basename:e,navigator:n}=_.useContext(sr),{matches:a}=_.useContext(Br),{pathname:l}=Ur(),u=JSON.stringify(dg(a)),d=_.useRef(!1);return cx(()=>{d.current=!0}),_.useCallback((g,y={})=>{if(yr(d.current,lx),!d.current)return;if(typeof g=="number"){n.go(g);return}let x=fg(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Ia([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,u,l,s])}_.createContext(null);function ME(){let{matches:s}=_.useContext(Br),e=s[s.length-1];return e?e.params:{}}function du(s,{relative:e}={}){let{matches:n}=_.useContext(Br),{pathname:a}=Ur(),l=JSON.stringify(dg(n));return _.useMemo(()=>fg(s,JSON.parse(l),a,e==="path"),[s,l,a,e])}function DE(s,e){return ux(s,e)}function ux(s,e,n,a,l){zn(Ol(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=_.useContext(sr),{matches:d}=_.useContext(Br),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",x=p?p.pathnameBase:"/",k=p&&p.route;{let Q=k&&k.path||"";dx(y,!k||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let j=Ur(),P;if(e){let Q=typeof e=="string"?Pl(e):e;zn(x==="/"||Q.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),P=Q}else P=j;let $=P.pathname||"/",B=$;if(x!=="/"){let Q=x.replace(/^\//,"").split("/");B="/"+$.replace(/^\//,"").split("/").slice(Q.length).join("/")}let L=ex(s,{pathname:B});yr(k||L!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),yr(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let te=BE(L&&L.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:Ia([x,u.encodeLocation?u.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?x:Ia([x,u.encodeLocation?u.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),d,n,a,l);return e&&te?_.createElement(hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},te):te}function PE(){let s=HE(),e=wE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:u},"ErrorBoundary")," or"," ",_.createElement("code",{style:u},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:l},n):null,d)}var LE=_.createElement(PE,null),hx=class extends _.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=RE(s.digest);n&&(s=n)}let e=s!==void 0?_.createElement(Br.Provider,{value:this.props.routeContext},_.createElement(mg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?_.createElement(OE,{error:s},e):e}};hx.contextType=TE;var ip=new WeakMap;function OE({children:s,error:e}){let{basename:n}=_.useContext(sr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=CE(e.digest);if(a){let l=ip.get(e);if(l)throw l;let u=rx(a.location,n);if(sx&&!ip.get(e))if(u.isExternal||a.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:a.replace}));throw ip.set(e,d),d}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function VE({routeContext:s,match:e,children:n}){let a=_.useContext(Ll);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(Br.Provider,{value:s},n)}function BE(s,e=[],n=null,a=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,d=n?.errors;if(d!=null){let x=u.findIndex(k=>k.route.id&&d?.[k.route.id]!==void 0);zn(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,x+1))}let p=!1,g=-1;if(n)for(let x=0;x<u.length;x++){let k=u[x];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(g=x),k.route.id){let{loaderData:j,errors:P}=n,$=k.route.loader&&!j.hasOwnProperty(k.route.id)&&(!P||P[k.route.id]===void 0);if(k.route.lazy||$){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&a?(x,k)=>{a(x,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:_E(n.matches),errorInfo:k})}:void 0;return u.reduceRight((x,k,j)=>{let P,$=!1,B=null,L=null;n&&(P=d&&k.route.id?d[k.route.id]:void 0,B=k.route.errorElement||LE,p&&(g<0&&j===0?(dx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),$=!0,L=null):g===j&&($=!0,L=k.route.hydrateFallbackElement||null)));let te=e.concat(u.slice(0,j+1)),Q=()=>{let ce;return P?ce=B:$?ce=L:k.route.Component?ce=_.createElement(k.route.Component,null):k.route.element?ce=k.route.element:ce=x,_.createElement(VE,{match:k,routeContext:{outlet:x,matches:te,isDataRoute:n!=null},children:ce})};return n&&(k.route.ErrorBoundary||k.route.errorElement||j===0)?_.createElement(hx,{location:n.location,revalidation:n.revalidation,component:B,error:P,children:Q(),routeContext:{outlet:null,matches:te,isDataRoute:!0},onError:y}):Q()},null)}function pg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UE(s){let e=_.useContext(Ll);return zn(e,pg(s)),e}function zE(s){let e=_.useContext(Md);return zn(e,pg(s)),e}function FE(s){let e=_.useContext(Br);return zn(e,pg(s)),e}function gg(s){let e=FE(s),n=e.matches[e.matches.length-1];return zn(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function qE(){return gg("useRouteId")}function HE(){let s=_.useContext(mg),e=zE("useRouteError"),n=gg("useRouteError");return s!==void 0?s:e.errors?.[n]}function $E(){let{router:s}=UE("useNavigate"),e=gg("useNavigate"),n=_.useRef(!1);return cx(()=>{n.current=!0}),_.useCallback(async(l,u={})=>{yr(n.current,lx),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var i1={};function dx(s,e,n){!e&&!i1[s]&&(i1[s]=!0,yr(!1,n))}_.memo(WE);function WE({routes:s,future:e,state:n,onError:a}){return ux(s,void 0,n,a,e)}function GE({to:s,replace:e,state:n,relative:a}){zn(Ol(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=_.useContext(sr);yr(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=_.useContext(Br),{pathname:d}=Ur(),p=Ds(),g=fg(s,dg(u),d,a==="path"),y=JSON.stringify(g);return _.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:a})},[p,y,a,e,n]),null}function Wn(s){zn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KE({basename:s="/",children:e=null,location:n,navigationType:a="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){zn(!Ol(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=_.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[p,l,u,d]);typeof n=="string"&&(n=Pl(n));let{pathname:y="/",search:x="",hash:k="",state:j=null,key:P="default"}=n,$=_.useMemo(()=>{let B=Pa(y,p);return B==null?null:{location:{pathname:B,search:x,hash:k,state:j,key:P},navigationType:a}},[p,y,x,k,j,P,a]);return yr($!=null,`<Router basename="${p}"> is not able to match the URL "${y}${x}${k}" because it does not start with the basename, so the <Router> won't render anything.`),$==null?null:_.createElement(sr.Provider,{value:g},_.createElement(hu.Provider,{children:e,value:$}))}function YE({children:s,location:e}){return DE(Pp(s),e)}function Pp(s,e=[]){let n=[];return _.Children.forEach(s,(a,l)=>{if(!_.isValidElement(a))return;let u=[...e,l];if(a.type===_.Fragment){n.push.apply(n,Pp(a.props.children,u));return}zn(a.type===Wn,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zn(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Pp(a.props.children,u)),n.push(d)}),n}var ed="get",td="application/x-www-form-urlencoded";function Dd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function QE(s){return Dd(s)&&s.tagName.toLowerCase()==="button"}function XE(s){return Dd(s)&&s.tagName.toLowerCase()==="form"}function JE(s){return Dd(s)&&s.tagName.toLowerCase()==="input"}function ZE(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function ej(s,e){return s.button===0&&(!e||e==="_self")&&!ZE(s)}function Lp(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let a=s[n];return e.concat(Array.isArray(a)?a.map(l=>[n,l]):[[n,a]])},[]))}function tj(s,e){let n=Lp(s);return e&&e.forEach((a,l)=>{n.has(l)||e.getAll(l).forEach(u=>{n.append(l,u)})}),n}var Uh=null;function nj(){if(Uh===null)try{new FormData(document.createElement("form"),0),Uh=!1}catch{Uh=!0}return Uh}var sj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function op(s){return s!=null&&!sj.has(s)?(yr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${td}"`),null):s}function rj(s,e){let n,a,l,u,d;if(XE(s)){let p=s.getAttribute("action");a=p?Pa(p,e):null,n=s.getAttribute("method")||ed,l=op(s.getAttribute("enctype"))||td,u=new FormData(s)}else if(QE(s)||JE(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(a=g?Pa(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||ed,l=op(s.getAttribute("formenctype"))||op(p.getAttribute("enctype"))||td,u=new FormData(p,s),!nj()){let{name:y,type:x,value:k}=s;if(x==="image"){let j=y?`${y}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else y&&u.append(y,k)}}else{if(Dd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ed,a=null,l=td,d=s}return u&&l==="text/plain"&&(d=u,u=void 0),{action:a,method:n.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function yg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function aj(s,e,n,a){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${a}`:l.pathname=`${l.pathname}.${a}`:l.pathname==="/"?l.pathname=`_root.${a}`:e&&Pa(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${a}`,l}async function ij(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oj(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function lj(s,e,n){let a=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await ij(u,n);return d.links?d.links():[]}return[]}));return dj(a.flat(1).filter(oj).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function o1(s,e,n,a,l,u){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let x=a.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let k=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function cj(s,e,{includeHydrateFallback:n}={}){return uj(s.map(a=>{let l=e.routes[a.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function uj(s){return[...new Set(s)]}function hj(s){let e={},n=Object.keys(s).sort();for(let a of n)e[a]=s[a];return e}function dj(s,e){let n=new Set;return new Set(e),s.reduce((a,l)=>{let u=JSON.stringify(hj(l));return n.has(u)||(n.add(u),a.push({key:u,link:l})),a},[])}function fx(){let s=_.useContext(Ll);return yg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function fj(){let s=_.useContext(Md);return yg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var vg=_.createContext(void 0);vg.displayName="FrameworkContext";function mx(){let s=_.useContext(vg);return yg(s,"You must render this element inside a <HydratedRouter> element"),s}function mj(s,e){let n=_.useContext(vg),[a,l]=_.useState(!1),[u,d]=_.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:k}=e,j=_.useRef(null);_.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let B=te=>{te.forEach(Q=>{d(Q.isIntersecting)})},L=new IntersectionObserver(B,{threshold:.5});return j.current&&L.observe(j.current),()=>{L.disconnect()}}},[s]),_.useEffect(()=>{if(a){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[a]);let P=()=>{l(!0)},$=()=>{l(!1),d(!1)};return n?s!=="intent"?[u,j,{}]:[u,j,{onFocus:Dc(p,P),onBlur:Dc(g,$),onMouseEnter:Dc(y,P),onMouseLeave:Dc(x,$),onTouchStart:Dc(k,P)}]:[!1,j,{}]}function Dc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function pj({page:s,...e}){let{router:n}=fx(),a=_.useMemo(()=>ex(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?_.createElement(yj,{page:s,matches:a,...e}):null}function gj(s){let{manifest:e,routeModules:n}=mx(),[a,l]=_.useState([]);return _.useEffect(()=>{let u=!1;return lj(s,e,n).then(d=>{u||l(d)}),()=>{u=!0}},[s,e,n]),a}function yj({page:s,matches:e,...n}){let a=Ur(),{future:l,manifest:u,routeModules:d}=mx(),{basename:p}=fx(),{loaderData:g,matches:y}=fj(),x=_.useMemo(()=>o1(s,e,y,u,a,"data"),[s,e,y,u,a]),k=_.useMemo(()=>o1(s,e,y,u,a,"assets"),[s,e,y,u,a]),j=_.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let B=new Set,L=!1;if(e.forEach(Q=>{let ce=u.routes[Q.route.id];!ce||!ce.hasLoader||(!x.some(ve=>ve.route.id===Q.route.id)&&Q.route.id in g&&d[Q.route.id]?.shouldRevalidate||ce.hasClientLoader?L=!0:B.add(Q.route.id))}),B.size===0)return[];let te=aj(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return L&&B.size>0&&te.searchParams.set("_routes",e.filter(Q=>B.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[te.pathname+te.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,a,u,x,e,s,d]),P=_.useMemo(()=>cj(k,u),[k,u]),$=gj(k);return _.createElement(_.Fragment,null,j.map(B=>_.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),P.map(B=>_.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),$.map(({key:B,link:L})=>_.createElement("link",{key:B,nonce:n.nonce,...L,crossOrigin:L.crossOrigin??n.crossOrigin})))}function vj(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bj&&(window.__reactRouterVersion="7.13.0")}catch{}function xj({basename:s,children:e,unstable_useTransitions:n,window:a}){let l=_.useRef();l.current==null&&(l.current=XT({window:a,v5Compat:!0}));let u=l.current,[d,p]=_.useState({action:u.action,location:u.location}),g=_.useCallback(y=>{n===!1?p(y):_.startTransition(()=>p(y))},[n]);return _.useLayoutEffect(()=>u.listen(g),[u,g]),_.createElement(KE,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var px=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gx=_.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:l,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j,...P},$){let{basename:B,unstable_useTransitions:L}=_.useContext(sr),te=typeof y=="string"&&px.test(y),Q=rx(y,B);y=Q.to;let ce=AE(y,{relative:l}),[ve,Ue,Ae]=mj(a,P),A=Tj(y,{replace:d,state:p,target:g,preventScrollReset:x,relative:l,viewTransition:k,unstable_defaultShouldRevalidate:j,unstable_useTransitions:L});function E(D){e&&e(D),D.defaultPrevented||A(D)}let R=_.createElement("a",{...P,...Ae,href:Q.absoluteURL||ce,onClick:Q.isExternal||u?e:E,ref:vj($,Ue),target:g,"data-discover":!te&&n==="render"?"true":void 0});return ve&&!te?_.createElement(_.Fragment,null,R,_.createElement(pj,{page:ce})):R});gx.displayName="Link";var wj=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:l=!1,style:u,to:d,viewTransition:p,children:g,...y},x){let k=du(d,{relative:y.relative}),j=Ur(),P=_.useContext(Md),{navigator:$,basename:B}=_.useContext(sr),L=P!=null&&Rj(k)&&p===!0,te=$.encodeLocation?$.encodeLocation(k).pathname:k.pathname,Q=j.pathname,ce=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(Q=Q.toLowerCase(),ce=ce?ce.toLowerCase():null,te=te.toLowerCase()),ce&&B&&(ce=Pa(ce,B)||ce);const ve=te!=="/"&&te.endsWith("/")?te.length-1:te.length;let Ue=Q===te||!l&&Q.startsWith(te)&&Q.charAt(ve)==="/",Ae=ce!=null&&(ce===te||!l&&ce.startsWith(te)&&ce.charAt(te.length)==="/"),A={isActive:Ue,isPending:Ae,isTransitioning:L},E=Ue?e:void 0,R;typeof a=="function"?R=a(A):R=[a,Ue?"active":null,Ae?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(A):u;return _.createElement(gx,{...y,"aria-current":E,className:R,ref:x,style:D,to:d,viewTransition:p},typeof g=="function"?g(A):g)});wj.displayName="NavLink";var _j=_.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:l,state:u,method:d=ed,action:p,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j,...P},$)=>{let{unstable_useTransitions:B}=_.useContext(sr),L=Nj(),te=Cj(p,{relative:y}),Q=d.toLowerCase()==="get"?"get":"post",ce=typeof p=="string"&&px.test(p),ve=Ue=>{if(g&&g(Ue),Ue.defaultPrevented)return;Ue.preventDefault();let Ae=Ue.nativeEvent.submitter,A=Ae?.getAttribute("formmethod")||d,E=()=>L(Ae||Ue.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:l,state:u,relative:y,preventScrollReset:x,viewTransition:k,unstable_defaultShouldRevalidate:j});B&&n!==!1?_.startTransition(()=>E()):E()};return _.createElement("form",{ref:$,method:Q,action:te,onSubmit:a?g:ve,...P,"data-discover":!ce&&s==="render"?"true":void 0})});_j.displayName="Form";function kj(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yx(s){let e=_.useContext(Ll);return zn(e,kj(s)),e}function Tj(s,{target:e,replace:n,state:a,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Ds(),x=Ur(),k=du(s,{relative:u});return _.useCallback(j=>{if(ej(j,e)){j.preventDefault();let P=n!==void 0?n:Zc(x)===Zc(k),$=()=>y(s,{replace:P,state:a,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?_.startTransition(()=>$()):$()}},[x,y,k,n,a,e,s,l,u,d,p,g])}function Ej(s){yr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=_.useRef(Lp(s)),n=_.useRef(!1),a=Ur(),l=_.useMemo(()=>tj(a.search,n.current?null:e.current),[a.search]),u=Ds(),d=_.useCallback((p,g)=>{const y=Lp(typeof p=="function"?p(new URLSearchParams(l)):p);n.current=!0,u("?"+y,g)},[u,l]);return[l,d]}var jj=0,Sj=()=>`__${String(++jj)}__`;function Nj(){let{router:s}=yx("useSubmit"),{basename:e}=_.useContext(sr),n=qE(),a=s.fetch,l=s.navigate;return _.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:x,body:k}=rj(u,e);if(d.navigate===!1){let j=d.fetcherKey||Sj();await a(j,n,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:k,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await l(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:k,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,l,e,n])}function Cj(s,{relative:e}={}){let{basename:n}=_.useContext(sr),a=_.useContext(Br);zn(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),u={...du(s||".",{relative:e})},d=Ur();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(x=>x==="")){p.delete("index"),g.filter(k=>k).forEach(k=>p.append("index",k));let x=p.toString();u.search=x?`?${x}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Ia([n,u.pathname])),Zc(u)}function Rj(s,{relative:e}={}){let n=_.useContext(ix);zn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=yx("useViewTransitionState"),l=du(s,{relative:e});if(!n.isTransitioning)return!1;let u=Pa(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=Pa(n.nextLocation.pathname,a)||n.nextLocation.pathname;return dd(l.pathname,d)!=null||dd(l.pathname,u)!=null}const Aj=()=>{};var l1={};const vx=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let l=s.charCodeAt(a);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Ij=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const l=s[n++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[a++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],d=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[a++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},bx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<s.length;l+=3){const u=s[l],d=l+1<s.length,p=d?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,x=u>>2,k=(u&3)<<4|p>>4;let j=(p&15)<<2|y>>6,P=y&63;g||(P=64,d||(j=64)),a.push(n[x],n[k],n[j],n[P])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(vx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Ij(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const k=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||k==null)throw new Mj;const j=u<<2|p>>4;if(a.push(j),y!==64){const P=p<<4&240|y>>2;if(a.push(P),k!==64){const $=y<<6&192|k;a.push($)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Mj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dj=function(s){const e=vx(s);return bx.encodeByteArray(e,!0)},fd=function(s){return Dj(s).replace(/\./g,"")},xx=function(s){try{return bx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Pj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Lj=()=>Pj().__FIREBASE_DEFAULTS__,Oj=()=>{if(typeof process>"u"||typeof l1>"u")return;const s=l1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Vj=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&xx(s[1]);return e&&JSON.parse(e)},Pd=()=>{try{return Aj()||Lj()||Oj()||Vj()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},wx=s=>Pd()?.emulatorHosts?.[s],_x=s=>{const e=wx(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},kx=()=>Pd()?.config,Tx=s=>Pd()?.[`_${s}`];class Bj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}function Vi(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bg(s){return(await fetch(s,{credentials:"include"})).ok}function Ex(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[fd(JSON.stringify(n)),fd(JSON.stringify(d)),""].join(".")}const $c={};function Uj(){const s={prod:[],emulator:[]};for(const e of Object.keys($c))$c[e]?s.emulator.push(e):s.prod.push(e);return s}function zj(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let c1=!1;function xg(s,e){if(typeof window>"u"||typeof document>"u"||!Vi(window.location.host)||$c[s]===e||$c[s]||c1)return;$c[s]=e;function n(j){return`__firebase__banner__${j}`}const a="__firebase__banner",u=Uj().prod.length>0;function d(){const j=document.getElementById(a);j&&j.remove()}function p(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function g(j,P){j.setAttribute("width","24"),j.setAttribute("id",P),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function y(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{c1=!0,d()},j}function x(j,P){j.setAttribute("id",P),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function k(){const j=zj(a),P=n("text"),$=document.getElementById(P)||document.createElement("span"),B=n("learnmore"),L=document.getElementById(B)||document.createElement("a"),te=n("preprendIcon"),Q=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const ce=j.element;p(ce),x(L,B);const ve=y();g(Q,te),ce.append(Q,$,L,ve),document.body.appendChild(ce)}u?($.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}function Ms(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ms())}function qj(){const s=Pd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Hj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $j(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Wj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gj(){const s=Ms();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Kj(){return!qj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yj(){try{return typeof indexedDB=="object"}catch{return!1}}function Qj(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const Xj="FirebaseError";class ua extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=Xj,Object.setPrototypeOf(this,ua.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?Jj(u,a):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new ua(l,p,a)}}function Jj(s,e){return s.replace(Zj,(n,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const Zj=/\{\$([^}]+)}/g;function eS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function bo(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const l of n){if(!a.includes(l))return!1;const u=s[l],d=e[l];if(u1(u)&&u1(d)){if(!bo(u,d))return!1}else if(u!==d)return!1}for(const l of a)if(!n.includes(l))return!1;return!0}function u1(s){return s!==null&&typeof s=="object"}function mu(s){const e=[];for(const[n,a]of Object.entries(s))Array.isArray(a)?a.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Bc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[l,u]=a.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Uc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function tS(s,e){const n=new nS(s,e);return n.subscribe.bind(n)}class nS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let l;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");sS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:a},l.next===void 0&&(l.next=lp),l.error===void 0&&(l.error=lp),l.complete===void 0&&(l.complete=lp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function lp(){}function Fn(s){return s&&s._delegate?s._delegate:s}class Ai{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mo="[DEFAULT]";class rS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new Bj;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iS(e))try{this.getOrInitializeService({instanceIdentifier:mo})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});a.resolve(u)}catch{}}}}clearInstance(e=mo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=mo){return this.instances.has(e)}getOptions(e=mo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);a===p&&d.resolve(l)}return l}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(a)??new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const l of a)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:aS(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=mo){return this.component?this.component.multipleInstances?e:mo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aS(s){return s===mo?void 0:s}function iS(s){return s.instantiationMode==="EAGER"}class oS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Zt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Zt||(Zt={}));const lS={debug:Zt.DEBUG,verbose:Zt.VERBOSE,info:Zt.INFO,warn:Zt.WARN,error:Zt.ERROR,silent:Zt.SILENT},cS=Zt.INFO,uS={[Zt.DEBUG]:"log",[Zt.VERBOSE]:"log",[Zt.INFO]:"info",[Zt.WARN]:"warn",[Zt.ERROR]:"error"},hS=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),l=uS[e];if(l)console[l](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wg{constructor(e){this.name=e,this._logLevel=cS,this._logHandler=hS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zt.DEBUG,...e),this._logHandler(this,Zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zt.VERBOSE,...e),this._logHandler(this,Zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zt.INFO,...e),this._logHandler(this,Zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zt.WARN,...e),this._logHandler(this,Zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zt.ERROR,...e),this._logHandler(this,Zt.ERROR,...e)}}const dS=(s,e)=>e.some(n=>s instanceof n);let h1,d1;function fS(){return h1||(h1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mS(){return d1||(d1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jx=new WeakMap,Op=new WeakMap,Sx=new WeakMap,cp=new WeakMap,_g=new WeakMap;function pS(s){const e=new Promise((n,a)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(Si(s.result)),l()},d=()=>{a(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&jx.set(n,s)}).catch(()=>{}),_g.set(e,s),e}function gS(s){if(Op.has(s))return;const e=new Promise((n,a)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),l()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});Op.set(s,e)}let Vp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Op.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Sx.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Si(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function yS(s){Vp=s(Vp)}function vS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(up(this),e,...n);return Sx.set(a,e.sort?e.sort():[e]),Si(a)}:mS().includes(s)?function(...e){return s.apply(up(this),e),Si(jx.get(this))}:function(...e){return Si(s.apply(up(this),e))}}function bS(s){return typeof s=="function"?vS(s):(s instanceof IDBTransaction&&gS(s),dS(s,fS())?new Proxy(s,Vp):s)}function Si(s){if(s instanceof IDBRequest)return pS(s);if(cp.has(s))return cp.get(s);const e=bS(s);return e!==s&&(cp.set(s,e),_g.set(e,s)),e}const up=s=>_g.get(s);function xS(s,e,{blocked:n,upgrade:a,blocking:l,terminated:u}={}){const d=indexedDB.open(s,e),p=Si(d);return a&&d.addEventListener("upgradeneeded",g=>{a(Si(d.result),g.oldVersion,g.newVersion,Si(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const wS=["get","getKey","getAll","getAllKeys","count"],_S=["put","add","delete","clear"],hp=new Map;function f1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(hp.get(e))return hp.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,l=_S.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(l||wS.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return a&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return hp.set(e,u),u}yS(s=>({...s,get:(e,n,a)=>f1(e,n)||s.get(e,n,a),has:(e,n)=>!!f1(e,n)||s.has(e,n)}));class kS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TS(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function TS(s){return s.getComponent()?.type==="VERSION"}const Bp="@firebase/app",m1="0.14.7";const La=new wg("@firebase/app"),ES="@firebase/app-compat",jS="@firebase/analytics-compat",SS="@firebase/analytics",NS="@firebase/app-check-compat",CS="@firebase/app-check",RS="@firebase/auth",AS="@firebase/auth-compat",IS="@firebase/database",MS="@firebase/data-connect",DS="@firebase/database-compat",PS="@firebase/functions",LS="@firebase/functions-compat",OS="@firebase/installations",VS="@firebase/installations-compat",BS="@firebase/messaging",US="@firebase/messaging-compat",zS="@firebase/performance",FS="@firebase/performance-compat",qS="@firebase/remote-config",HS="@firebase/remote-config-compat",$S="@firebase/storage",WS="@firebase/storage-compat",GS="@firebase/firestore",KS="@firebase/ai",YS="@firebase/firestore-compat",QS="firebase",XS="12.8.0";const Up="[DEFAULT]",JS={[Bp]:"fire-core",[ES]:"fire-core-compat",[SS]:"fire-analytics",[jS]:"fire-analytics-compat",[CS]:"fire-app-check",[NS]:"fire-app-check-compat",[RS]:"fire-auth",[AS]:"fire-auth-compat",[IS]:"fire-rtdb",[MS]:"fire-data-connect",[DS]:"fire-rtdb-compat",[PS]:"fire-fn",[LS]:"fire-fn-compat",[OS]:"fire-iid",[VS]:"fire-iid-compat",[BS]:"fire-fcm",[US]:"fire-fcm-compat",[zS]:"fire-perf",[FS]:"fire-perf-compat",[qS]:"fire-rc",[HS]:"fire-rc-compat",[$S]:"fire-gcs",[WS]:"fire-gcs-compat",[GS]:"fire-fst",[YS]:"fire-fst-compat",[KS]:"fire-vertex","fire-js":"fire-js",[QS]:"fire-js-all"};const md=new Map,ZS=new Map,zp=new Map;function p1(s,e){try{s.container.addComponent(e)}catch(n){La.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function xo(s){const e=s.name;if(zp.has(e))return La.debug(`There were multiple attempts to register component ${e}.`),!1;zp.set(e,s);for(const n of md.values())p1(n,s);for(const n of ZS.values())p1(n,s);return!0}function Ld(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function tr(s){return s==null?!1:s.settings!==void 0}const eN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ni=new fu("app","Firebase",eN);class tN{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ni.create("app-deleted",{appName:this._name})}}const So=XS;function kg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:Up,automaticDataCollectionEnabled:!0,...e},l=a.name;if(typeof l!="string"||!l)throw Ni.create("bad-app-name",{appName:String(l)});if(n||(n=kx()),!n)throw Ni.create("no-options");const u=md.get(l);if(u){if(bo(n,u.options)&&bo(a,u.config))return u;throw Ni.create("duplicate-app",{appName:l})}const d=new oS(l);for(const g of zp.values())d.addComponent(g);const p=new tN(n,a,d);return md.set(l,p),p}function Tg(s=Up){const e=md.get(s);if(!e&&s===Up&&kx())return kg();if(!e)throw Ni.create("no-app",{appName:s});return e}function na(s,e,n){let a=JS[s]??s;n&&(a+=`-${n}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),La.warn(d.join(" "));return}xo(new Ai(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const nN="firebase-heartbeat-database",sN=1,eu="firebase-heartbeat-store";let dp=null;function Nx(){return dp||(dp=xS(nN,sN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(eu)}catch(n){console.warn(n)}}}}).catch(s=>{throw Ni.create("idb-open",{originalErrorMessage:s.message})})),dp}async function rN(s){try{const n=(await Nx()).transaction(eu),a=await n.objectStore(eu).get(Cx(s));return await n.done,a}catch(e){if(e instanceof ua)La.warn(e.message);else{const n=Ni.create("idb-get",{originalErrorMessage:e?.message});La.warn(n.message)}}}async function g1(s,e){try{const a=(await Nx()).transaction(eu,"readwrite");await a.objectStore(eu).put(e,Cx(s)),await a.done}catch(n){if(n instanceof ua)La.warn(n.message);else{const a=Ni.create("idb-set",{originalErrorMessage:n?.message});La.warn(a.message)}}}function Cx(s){return`${s.name}!${s.options.appId}`}const aN=1024,iN=30;class oN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cN(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=y1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>iN){const l=uN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){La.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=y1(),{heartbeatsToSend:n,unsentEntries:a}=lN(this._heartbeatsCache.heartbeats),l=fd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return La.warn(e),""}}}function y1(){return new Date().toISOString().substring(0,10)}function lN(s,e=aN){const n=[];let a=s.slice();for(const l of s){const u=n.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),v1(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),v1(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class cN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yj()?Qj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return g1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return g1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function v1(s){return fd(JSON.stringify({version:2,heartbeats:s})).length}function uN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}function hN(s){xo(new Ai("platform-logger",e=>new kS(e),"PRIVATE")),xo(new Ai("heartbeat",e=>new oN(e),"PRIVATE")),na(Bp,m1,s),na(Bp,m1,"esm2020"),na("fire-js","")}hN("");function Rx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dN=Rx,Ax=new fu("auth","Firebase",Rx());const pd=new wg("@firebase/auth");function fN(s,...e){pd.logLevel<=Zt.WARN&&pd.warn(`Auth (${So}): ${s}`,...e)}function nd(s,...e){pd.logLevel<=Zt.ERROR&&pd.error(`Auth (${So}): ${s}`,...e)}function Lr(s,...e){throw Eg(s,...e)}function sa(s,...e){return Eg(s,...e)}function Ix(s,e,n){const a={...dN(),[e]:n};return new fu("auth","Firebase",a).create(e,{appName:s.name})}function Ma(s){return Ix(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Eg(s,...e){if(typeof s!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(n,...a)}return Ax.create(s,...e)}function St(s,e,...n){if(!s)throw Eg(e,...n)}function Ra(s){const e="INTERNAL ASSERTION FAILED: "+s;throw nd(e),new Error(e)}function Oa(s,e){s||Ra(e)}function Fp(){return typeof self<"u"&&self.location?.href||""}function mN(){return b1()==="http:"||b1()==="https:"}function b1(){return typeof self<"u"&&self.location?.protocol||null}function pN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mN()||$j()||"connection"in navigator)?navigator.onLine:!0}function gN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class pu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Oa(n>e,"Short delay should be less than long delay!"),this.isMobile=Fj()||Wj()}get(){return pN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jg(s,e){Oa(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Mx{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ra("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ra("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ra("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const vN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bN=new pu(3e4,6e4);function Ua(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function za(s,e,n,a,l={}){return Dx(s,l,async()=>{let u={},d={};a&&(e==="GET"?d=a:u={body:JSON.stringify(a)});const p=mu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return Hj()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Vi(s.emulatorConfig.host)&&(y.credentials="include"),Mx.fetch()(await Px(s,s.config.apiHost,n,p),y)})}async function Dx(s,e,n){s._canInitEmulator=!1;const a={...yN,...e};try{const l=new wN(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw zh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw zh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw zh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw zh(s,"user-disabled",d);const x=a[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Ix(s,x,y);Lr(s,x)}}catch(l){if(l instanceof ua)throw l;Lr(s,"network-request-failed",{message:String(l)})}}async function gu(s,e,n,a,l={}){const u=await za(s,e,n,a,l);return"mfaPendingCredential"in u&&Lr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Px(s,e,n,a){const l=`${e}${n}?${a}`,u=s,d=u.config.emulator?jg(s.config,l):`${s.config.apiScheme}://${l}`;return vN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function xN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(sa(this.auth,"network-request-failed")),bN.get())})}}function zh(s,e,n){const a={appName:s.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const l=sa(s,e,a);return l.customData._tokenResponse=n,l}function x1(s){return s!==void 0&&s.enterprise!==void 0}class _N{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kN(s,e){return za(s,"GET","/v2/recaptchaConfig",Ua(s,e))}async function TN(s,e){return za(s,"POST","/v1/accounts:delete",e)}async function gd(s,e){return za(s,"POST","/v1/accounts:lookup",e)}function Wc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EN(s,e=!1){const n=Fn(s),a=await n.getIdToken(e),l=Sg(a);St(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:a,authTime:Wc(fp(l.auth_time)),issuedAtTime:Wc(fp(l.iat)),expirationTime:Wc(fp(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function fp(s){return Number(s)*1e3}function Sg(s){const[e,n,a]=s.split(".");if(e===void 0||n===void 0||a===void 0)return nd("JWT malformed, contained fewer than 3 sections"),null;try{const l=xx(n);return l?JSON.parse(l):(nd("Failed to decode base64 JWT payload"),null)}catch(l){return nd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function w1(s){const e=Sg(s);return St(e,"internal-error"),St(typeof e.exp<"u","internal-error"),St(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function tu(s,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof ua&&jN(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function jN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class SN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class qp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wc(this.lastLoginAt),this.creationTime=Wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function yd(s){const e=s.auth,n=await s.getIdToken(),a=await tu(s,gd(e,{idToken:n}));St(a?.users.length,e,"internal-error");const l=a.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?Lx(l.providerUserInfo):[],d=CN(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!d?.length,y=p?g:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new qp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function NN(s){const e=Fn(s);await yd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CN(s,e){return[...s.filter(a=>!e.some(l=>l.providerId===a.providerId)),...e]}function Lx(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function RN(s,e){const n=await Dx(s,{},async()=>{const a=mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,d=await Px(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:a};return s.emulatorConfig&&Vi(s.emulatorConfig.host)&&(g.credentials="include"),Mx.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AN(s,e){return za(s,"POST","/v2/accounts:revokeToken",Ua(s,e))}class kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){St(e.idToken,"internal-error"),St(typeof e.idToken<"u","internal-error"),St(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){St(e.length!==0,"internal-error");const n=w1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(St(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:l,expiresIn:u}=await RN(e,n);this.updateTokensAndExpiration(a,l,Number(u))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:l,expirationTime:u}=n,d=new kl;return a&&(St(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),l&&(St(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(St(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kl,this.toJSON())}_performRefresh(){return Ra("not implemented")}}function vi(s,e){St(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Dr{constructor({uid:e,auth:n,stsTokenManager:a,...l}){this.providerId="firebase",this.proactiveRefresh=new SN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new qp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await tu(this,this.stsTokenManager.getToken(this.auth,e));return St(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EN(this,e)}reload(){return NN(this)}_assign(e){this!==e&&(St(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){St(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await yd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(Ma(this.auth));const e=await this.getIdToken();return await tu(this,TN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:k,emailVerified:j,isAnonymous:P,providerData:$,stsTokenManager:B}=n;St(k&&B,e,"internal-error");const L=kl.fromJSON(this.name,B);St(typeof k=="string",e,"internal-error"),vi(a,e.name),vi(l,e.name),St(typeof j=="boolean",e,"internal-error"),St(typeof P=="boolean",e,"internal-error"),vi(u,e.name),vi(d,e.name),vi(p,e.name),vi(g,e.name),vi(y,e.name),vi(x,e.name);const te=new Dr({uid:k,auth:e,email:l,emailVerified:j,displayName:a,isAnonymous:P,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:L,createdAt:y,lastLoginAt:x});return $&&Array.isArray($)&&(te.providerData=$.map(Q=>({...Q}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,n,a=!1){const l=new kl;l.updateFromServerResponse(n);const u=new Dr({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:a});return await yd(u),u}static async _fromGetAccountInfoResponse(e,n,a){const l=n.users[0];St(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Lx(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,p=new kl;p.updateFromIdToken(a);const g=new Dr({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new qp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const _1=new Map;function Aa(s){Oa(s instanceof Function,"Expected a class definition");let e=_1.get(s);return e?(Oa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,_1.set(s,e),e)}class Ox{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ox.type="NONE";const k1=Ox;function sd(s,e,n){return`firebase:${s}:${e}:${n}`}class Tl{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:l,name:u}=this.auth;this.fullUserKey=sd(this.userKey,l.apiKey,u),this.fullPersistenceKey=sd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await gd(this.auth,{idToken:e}).catch(()=>{});return n?Dr._fromGetAccountInfoResponse(this.auth,n,e):null}return Dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new Tl(Aa(k1),e,a);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Aa(k1);const d=sd(a,e.config.apiKey,e.name);let p=null;for(const y of n)try{const x=await y._get(d);if(x){let k;if(typeof x=="string"){const j=await gd(e,{idToken:x}).catch(()=>{});if(!j)break;k=await Dr._fromGetAccountInfoResponse(e,j,x)}else k=Dr._fromJSON(e,x);y!==u&&(p=k),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Tl(u,e,a):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new Tl(u,e,a))}}function T1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qx(e))return"Blackberry";if(Hx(e))return"Webos";if(Bx(e))return"Safari";if((e.includes("chrome/")||Ux(e))&&!e.includes("edge/"))return"Chrome";if(Fx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(n);if(a?.length===2)return a[1]}return"Other"}function Vx(s=Ms()){return/firefox\//i.test(s)}function Bx(s=Ms()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ux(s=Ms()){return/crios\//i.test(s)}function zx(s=Ms()){return/iemobile/i.test(s)}function Fx(s=Ms()){return/android/i.test(s)}function qx(s=Ms()){return/blackberry/i.test(s)}function Hx(s=Ms()){return/webos/i.test(s)}function Ng(s=Ms()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function IN(s=Ms()){return Ng(s)&&!!window.navigator?.standalone}function MN(){return Gj()&&document.documentMode===10}function $x(s=Ms()){return Ng(s)||Fx(s)||Hx(s)||qx(s)||/windows phone/i.test(s)||zx(s)}function Wx(s,e=[]){let n;switch(s){case"Browser":n=T1(Ms());break;case"Worker":n=`${T1(Ms())}-${s}`;break;default:n=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${So}/${a}`}class DN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});a.onAbort=n,this.queue.push(a);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function PN(s,e={}){return za(s,"GET","/v2/passwordPolicy",Ua(s,e))}const LN=6;class ON{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??LN,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let l=0;l<e.length;l++)a=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class VN{constructor(e,n,a,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E1(this),this.idTokenSubscription=new E1(this),this.beforeStateQueue=new DN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ax,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Aa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gd(this,{idToken:e}),a=await Dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(tr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=a?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(a=p.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return St(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(Ma(this));const n=e?Fn(e):null;return n&&St(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&St(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(Ma(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(Ma(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PN(this),n=new ON(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fu("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await AN(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Aa(e)||this._popupRedirectResolver;St(n,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[Aa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(St(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,a,l);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return St(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&fN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bi(s){return Fn(s)}class E1{constructor(e){this.auth=e,this.observer=null,this.addObserver=tS(n=>this.observer=n)}get next(){return St(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BN(s){Od=s}function Gx(s){return Od.loadJS(s)}function UN(){return Od.recaptchaEnterpriseScript}function zN(){return Od.gapiScript}function FN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class qN{constructor(){this.enterprise=new HN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class HN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const $N="recaptcha-enterprise",Kx="NO_RECAPTCHA";class WN{constructor(e){this.type=$N,this.auth=Bi(e)}async verify(e="verify",n=!1){async function a(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{kN(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new _N(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,d,p){const g=window.grecaptcha;x1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(Kx)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qN().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{a(this.auth).then(p=>{if(!n&&x1(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=UN();g.length!==0&&(g+=p),Gx(g).then(()=>{l(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function j1(s,e,n,a=!1,l=!1){const u=new WN(s);let d;if(l)d=Kx;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return a?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function vd(s,e,n,a,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await j1(s,e,n,n==="getOobCode");return a(s,u)}else return a(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await j1(s,e,n,n==="getOobCode");return a(s,d)}else return Promise.reject(u)})}function GN(s,e){const n=Ld(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(bo(u,e??{}))return l;Lr(l,"already-initialized")}return n.initialize({options:e})}function KN(s,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(Aa);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function YN(s,e,n){const a=Bi(s);St(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const l=!1,u=Yx(e),{host:d,port:p}=QN(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},x=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!a._canInitEmulator){St(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),St(bo(y,a.config.emulator)&&bo(x,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=x,a.settings.appVerificationDisabledForTesting=!0,Vi(d)?(bg(`${u}//${d}${g}`),xg("Auth",!0)):XN()}function Yx(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function QN(s){const e=Yx(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(a);if(l){const u=l[1];return{host:u,port:S1(a.substr(u.length+1))}}else{const[u,d]=a.split(":");return{host:u,port:S1(d)}}}function S1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function XN(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Cg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ra("not implemented")}_getIdTokenResponse(e){return Ra("not implemented")}_linkToIdToken(e,n){return Ra("not implemented")}_getReauthenticationResolver(e){return Ra("not implemented")}}async function JN(s,e){return za(s,"POST","/v1/accounts:signUp",e)}async function ZN(s,e){return gu(s,"POST","/v1/accounts:signInWithPassword",Ua(s,e))}async function e4(s,e){return za(s,"POST","/v1/accounts:sendOobCode",Ua(s,e))}async function t4(s,e){return e4(s,e)}async function n4(s,e){return gu(s,"POST","/v1/accounts:signInWithEmailLink",Ua(s,e))}async function s4(s,e){return gu(s,"POST","/v1/accounts:signInWithEmailLink",Ua(s,e))}class nu extends Cg{constructor(e,n,a,l=null){super("password",a),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new nu(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new nu(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vd(e,n,"signInWithPassword",ZN);case"emailLink":return n4(e,{email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vd(e,a,"signUpPassword",JN);case"emailLink":return s4(e,{idToken:n,email:this._email,oobCode:this._password});default:Lr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function El(s,e){return gu(s,"POST","/v1/accounts:signInWithIdp",Ua(s,e))}const r4="http://localhost";class wo extends Cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:l,...u}=n;if(!a||!l)return null;const d=new wo(a,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return El(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,El(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,El(e,n)}buildRequest(){const e={requestUri:r4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mu(n)}return e}}function a4(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i4(s){const e=Bc(Uc(s)).link,n=e?Bc(Uc(e)).deep_link_id:null,a=Bc(Uc(s)).deep_link_id;return(a?Bc(Uc(a)).link:null)||a||n||e||s}class Rg{constructor(e){const n=Bc(Uc(e)),a=n.apiKey??null,l=n.oobCode??null,u=a4(n.mode??null);St(a&&l&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=i4(e);try{return new Rg(n)}catch{return null}}}class Vl{constructor(){this.providerId=Vl.PROVIDER_ID}static credential(e,n){return nu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Rg.parseLink(n);return St(a,"argument-error"),nu._fromEmailAndCode(e,a.code,a.tenantId)}}Vl.PROVIDER_ID="password";Vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Qx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class yu extends Qx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class wi extends yu{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";class _i extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wo._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return _i.credential(n,a)}catch{return null}}}_i.GOOGLE_SIGN_IN_METHOD="google.com";_i.PROVIDER_ID="google.com";class ki extends yu{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.GITHUB_SIGN_IN_METHOD="github.com";ki.PROVIDER_ID="github.com";class Ti extends yu{constructor(){super("twitter.com")}static credential(e,n){return wo._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return Ti.credential(n,a)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";async function o4(s,e){return gu(s,"POST","/v1/accounts:signUp",Ua(s,e))}class _o{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,l=!1){const u=await Dr._fromIdTokenResponse(e,a,l),d=N1(a);return new _o({user:u,providerId:d,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const l=N1(a);return new _o({user:e,providerId:l,_tokenResponse:a,operationType:n})}}function N1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class bd extends ua{constructor(e,n,a,l){super(n.code,n.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,l){return new bd(e,n,a,l)}}function Xx(s,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?bd._fromErrorAndOperation(s,u,e,a):u})}async function l4(s,e,n=!1){const a=await tu(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return _o._forOperation(s,"link",a)}async function c4(s,e,n=!1){const{auth:a}=s;if(tr(a.app))return Promise.reject(Ma(a));const l="reauthenticate";try{const u=await tu(s,Xx(a,l,e,s),n);St(u.idToken,a,"internal-error");const d=Sg(u.idToken);St(d,a,"internal-error");const{sub:p}=d;return St(s.uid===p,a,"user-mismatch"),_o._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Lr(a,"user-mismatch"),u}}async function Jx(s,e,n=!1){if(tr(s.app))return Promise.reject(Ma(s));const a="signIn",l=await Xx(s,a,e),u=await _o._fromIdTokenResponse(s,a,l);return n||await s._updateCurrentUser(u.user),u}async function u4(s,e){return Jx(Bi(s),e)}async function Zx(s){const e=Bi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function h4(s,e,n){const a=Bi(s);await vd(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",t4)}async function ND(s,e,n){if(tr(s.app))return Promise.reject(Ma(s));const a=Bi(s),d=await vd(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",o4).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Zx(s),g}),p=await _o._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(p.user),p}function d4(s,e,n){return tr(s.app)?Promise.reject(Ma(s)):u4(Fn(s),Vl.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Zx(s),a})}function f4(s,e){return Fn(s).setPersistence(e)}function m4(s,e,n,a){return Fn(s).onIdTokenChanged(e,n,a)}function p4(s,e,n){return Fn(s).beforeAuthStateChanged(e,n)}function g4(s,e,n,a){return Fn(s).onAuthStateChanged(e,n,a)}function y4(s){return Fn(s).signOut()}const xd="__sak";class ew{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xd,"1"),this.storage.removeItem(xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const v4=1e3,b4=10;class tw extends ew{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$x(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),l=this.localCache[n];a!==l&&e(n,l,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const a=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(a);!n&&this.localCache[a]===d||this.notifyListeners(a,d)},u=this.storage.getItem(a);MN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,b4):l()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},v4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}tw.type="LOCAL";const nw=tw;class sw extends ew{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sw.type="SESSION";const Ag=sw;function x4(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Vd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const a=new Vd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:l,data:u}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,u)),g=await x4(p);n.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vd.receivers=[];function Ig(s="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return s+n}class w4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=Ig("",20);l.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},a);d={messageChannel:l,onMessage(k){const j=k;if(j.data.eventId===y)switch(j.data.status){case"ack":clearTimeout(x),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(j.data.response);break;default:clearTimeout(x),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ra(){return window}function _4(s){ra().location.href=s}function rw(){return typeof ra().WorkerGlobalScope<"u"&&typeof ra().importScripts=="function"}async function k4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function T4(){return navigator?.serviceWorker?.controller||null}function E4(){return rw()?self:null}const aw="firebaseLocalStorageDb",j4=1,wd="firebaseLocalStorage",iw="fbase_key";class vu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Bd(s,e){return s.transaction([wd],e?"readwrite":"readonly").objectStore(wd)}function S4(){const s=indexedDB.deleteDatabase(aw);return new vu(s).toPromise()}function Hp(){const s=indexedDB.open(aw,j4);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(wd,{keyPath:iw})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(wd)?e(a):(a.close(),await S4(),e(await Hp()))})})}async function C1(s,e,n){const a=Bd(s,!0).put({[iw]:e,value:n});return new vu(a).toPromise()}async function N4(s,e){const n=Bd(s,!1).get(e),a=await new vu(n).toPromise();return a===void 0?null:a.value}function R1(s,e){const n=Bd(s,!0).delete(e);return new vu(n).toPromise()}const C4=800,R4=3;class ow{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>R4)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vd._getInstance(E4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await k4(),!this.activeServiceWorker)return;this.sender=new w4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||T4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hp();return await C1(e,xd,"1"),await R1(e,xd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>C1(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>N4(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Bd(l,!1).getAll();return new vu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),C4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ow.type="LOCAL";const A4=ow;new pu(3e4,6e4);function I4(s,e){return e?Aa(e):(St(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Mg extends Cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return El(e,this._buildIdpRequest())}_linkToIdToken(e,n){return El(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return El(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function M4(s){return Jx(s.auth,new Mg(s),s.bypassAuthState)}function D4(s){const{auth:e,user:n}=s;return St(n,e,"internal-error"),c4(n,new Mg(s),s.bypassAuthState)}async function P4(s){const{auth:e,user:n}=s;return St(n,e,"internal-error"),l4(n,new Mg(s),s.bypassAuthState)}class lw{constructor(e,n,a,l,u=!1){this.auth=e,this.resolver=a,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:a,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M4;case"linkViaPopup":case"linkViaRedirect":return P4;case"reauthViaPopup":case"reauthViaRedirect":return D4;default:Lr(this.auth,"internal-error")}}resolve(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const L4=new pu(2e3,1e4);class xl extends lw{constructor(e,n,a,l,u){super(e,n,l,u),this.provider=a,this.authWindow=null,this.pollId=null,xl.currentPopupAction&&xl.currentPopupAction.cancel(),xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return St(e,this.auth,"internal-error"),e}async onExecution(){Oa(this.filter.length===1,"Popup operations only handle one event");const e=Ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(sa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,L4.get())};e()}}xl.currentPopupAction=null;const O4="pendingRedirect",rd=new Map;class V4 extends lw{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=rd.get(this.auth._key());if(!e){try{const a=await B4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}rd.set(this.auth._key(),e)}return this.bypassAuthState||rd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B4(s,e){const n=F4(e),a=z4(s);if(!await a._isAvailable())return!1;const l=await a._get(n)==="true";return await a._remove(n),l}function U4(s,e){rd.set(s._key(),e)}function z4(s){return Aa(s._redirectPersistence)}function F4(s){return sd(O4,s.config.apiKey,s.name)}async function q4(s,e,n=!1){if(tr(s.app))return Promise.reject(Ma(s));const a=Bi(s),l=I4(a,e),d=await new V4(a,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}const H4=600*1e3;class $4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!cw(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(sa(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H4&&this.cachedEventUids.clear(),this.cachedEventUids.has(A1(e))}saveEventToCache(e){this.cachedEventUids.add(A1(e)),this.lastProcessedEventTime=Date.now()}}function A1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function cw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function W4(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cw(s);default:return!1}}async function G4(s,e={}){return za(s,"GET","/v1/projects",e)}const K4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y4=/^https?/;async function Q4(s){if(s.config.emulator)return;const{authorizedDomains:e}=await G4(s);for(const n of e)try{if(X4(n))return}catch{}Lr(s,"unauthorized-domain")}function X4(s){const e=Fp(),{protocol:n,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===a}if(!Y4.test(n))return!1;if(K4.test(s))return a===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(a)}const J4=new pu(3e4,6e4);function I1(){const s=ra().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function Z4(s){return new Promise((e,n)=>{function a(){I1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{I1(),n(sa(s,"network-request-failed"))},timeout:J4.get()})}if(ra().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ra().gapi?.load)a();else{const l=FN("iframefcb");return ra()[l]=()=>{gapi.load?a():n(sa(s,"network-request-failed"))},Gx(`${zN()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw ad=null,e})}let ad=null;function eC(s){return ad=ad||Z4(s),ad}const tC=new pu(5e3,15e3),nC="__/auth/iframe",sC="emulator/auth/iframe",rC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iC(s){const e=s.config;St(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?jg(e,sC):`https://${s.config.authDomain}/${nC}`,a={apiKey:e.apiKey,appName:s.name,v:So},l=aC.get(s.config.apiHost);l&&(a.eid=l);const u=s._getFrameworks();return u.length&&(a.fw=u.join(",")),`${n}?${mu(a).slice(1)}`}async function oC(s){const e=await eC(s),n=ra().gapi;return St(n,s,"internal-error"),e.open({where:document.body,url:iC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rC,dontclear:!0},a=>new Promise(async(l,u)=>{await a.restyle({setHideOnLeave:!1});const d=sa(s,"network-request-failed"),p=ra().setTimeout(()=>{u(d)},tC.get());function g(){ra().clearTimeout(p),l(a)}a.ping(g).then(g,()=>{u(d)})}))}const lC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cC=500,uC=600,hC="_blank",dC="http://localhost";class M1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fC(s,e,n,a=cC,l=uC){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let p="";const g={...lC,width:a.toString(),height:l.toString(),top:u,left:d},y=Ms().toLowerCase();n&&(p=Ux(y)?hC:n),Vx(y)&&(e=e||dC,g.scrollbars="yes");const x=Object.entries(g).reduce((j,[P,$])=>`${j}${P}=${$},`,"");if(IN(y)&&p!=="_self")return mC(e||"",p),new M1(null);const k=window.open(e||"",p,x);St(k,s,"popup-blocked");try{k.focus()}catch{}return new M1(k)}function mC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const pC="__/auth/handler",gC="emulator/auth/handler",yC=encodeURIComponent("fac");async function D1(s,e,n,a,l,u){St(s.config.authDomain,s,"auth-domain-config-required"),St(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:a,v:So,eventId:l};if(e instanceof Qx){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",eS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,k]of Object.entries({}))d[x]=k}if(e instanceof yu){const x=e.getScopes().filter(k=>k!=="");x.length>0&&(d.scopes=x.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const g=await s._getAppCheckToken(),y=g?`#${yC}=${encodeURIComponent(g)}`:"";return`${vC(s)}?${mu(p).slice(1)}${y}`}function vC({config:s}){return s.emulator?jg(s,gC):`https://${s.authDomain}/${pC}`}const mp="webStorageSupport";class bC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ag,this._completeRedirectFn=q4,this._overrideRedirectResult=U4}async _openPopup(e,n,a,l){Oa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await D1(e,n,a,Fp(),l);return fC(e,u,Ig())}async _openRedirect(e,n,a,l){await this._originValidation(e);const u=await D1(e,n,a,Fp(),l);return _4(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Oa(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await oC(e),a=new $4(e);return n.register("authEvent",l=>(St(l?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mp,{type:mp},l=>{const u=l?.[0]?.[mp];u!==void 0&&n(!!u),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Q4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $x()||Bx()||Ng()}}const xC=bC;var P1="@firebase/auth",L1="1.12.0";class wC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){St(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _C(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kC(s){xo(new Ai("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=a.options;St(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wx(s)},y=new VN(a,l,u,g);return KN(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),xo(new Ai("auth-internal",e=>{const n=Bi(e.getProvider("auth").getImmediate());return(a=>new wC(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),na(P1,L1,_C(s)),na(P1,L1,"esm2020")}const TC=300,EC=Tx("authIdTokenMaxAge")||TC;let O1=null;const jC=s=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>EC)return;const l=n?.token;O1!==l&&(O1=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function uw(s=Tg()){const e=Ld(s,"auth");if(e.isInitialized())return e.getImmediate();const n=GN(s,{popupRedirectResolver:xC,persistence:[A4,nw,Ag]}),a=Tx("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const d=jC(u.toString());p4(n,d,()=>d(n.currentUser)),m4(n,p=>d(p))}}const l=wx("auth");return l&&YN(n,`http://${l}`),n}function SC(){return document.getElementsByTagName("head")?.[0]??document}BN({loadJS(s){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=l=>{const u=sa("internal-error");u.customData=l,n(u)},a.type="text/javascript",a.charset="UTF-8",SC().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kC("Browser");var V1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ci,hw;(function(){var s;function e(A,E){function R(){}R.prototype=E.prototype,A.F=E.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(D,M,U){for(var I=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)I[Ne-2]=arguments[Ne];return E.prototype[M].apply(D,I)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(A,E,R){R||(R=0);const D=Array(16);if(typeof E=="string")for(var M=0;M<16;++M)D[M]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(M=0;M<16;++M)D[M]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=A.g[0],R=A.g[1],M=A.g[2];let U=A.g[3],I;I=E+(U^R&(M^U))+D[0]+3614090360&4294967295,E=R+(I<<7&4294967295|I>>>25),I=U+(M^E&(R^M))+D[1]+3905402710&4294967295,U=E+(I<<12&4294967295|I>>>20),I=M+(R^U&(E^R))+D[2]+606105819&4294967295,M=U+(I<<17&4294967295|I>>>15),I=R+(E^M&(U^E))+D[3]+3250441966&4294967295,R=M+(I<<22&4294967295|I>>>10),I=E+(U^R&(M^U))+D[4]+4118548399&4294967295,E=R+(I<<7&4294967295|I>>>25),I=U+(M^E&(R^M))+D[5]+1200080426&4294967295,U=E+(I<<12&4294967295|I>>>20),I=M+(R^U&(E^R))+D[6]+2821735955&4294967295,M=U+(I<<17&4294967295|I>>>15),I=R+(E^M&(U^E))+D[7]+4249261313&4294967295,R=M+(I<<22&4294967295|I>>>10),I=E+(U^R&(M^U))+D[8]+1770035416&4294967295,E=R+(I<<7&4294967295|I>>>25),I=U+(M^E&(R^M))+D[9]+2336552879&4294967295,U=E+(I<<12&4294967295|I>>>20),I=M+(R^U&(E^R))+D[10]+4294925233&4294967295,M=U+(I<<17&4294967295|I>>>15),I=R+(E^M&(U^E))+D[11]+2304563134&4294967295,R=M+(I<<22&4294967295|I>>>10),I=E+(U^R&(M^U))+D[12]+1804603682&4294967295,E=R+(I<<7&4294967295|I>>>25),I=U+(M^E&(R^M))+D[13]+4254626195&4294967295,U=E+(I<<12&4294967295|I>>>20),I=M+(R^U&(E^R))+D[14]+2792965006&4294967295,M=U+(I<<17&4294967295|I>>>15),I=R+(E^M&(U^E))+D[15]+1236535329&4294967295,R=M+(I<<22&4294967295|I>>>10),I=E+(M^U&(R^M))+D[1]+4129170786&4294967295,E=R+(I<<5&4294967295|I>>>27),I=U+(R^M&(E^R))+D[6]+3225465664&4294967295,U=E+(I<<9&4294967295|I>>>23),I=M+(E^R&(U^E))+D[11]+643717713&4294967295,M=U+(I<<14&4294967295|I>>>18),I=R+(U^E&(M^U))+D[0]+3921069994&4294967295,R=M+(I<<20&4294967295|I>>>12),I=E+(M^U&(R^M))+D[5]+3593408605&4294967295,E=R+(I<<5&4294967295|I>>>27),I=U+(R^M&(E^R))+D[10]+38016083&4294967295,U=E+(I<<9&4294967295|I>>>23),I=M+(E^R&(U^E))+D[15]+3634488961&4294967295,M=U+(I<<14&4294967295|I>>>18),I=R+(U^E&(M^U))+D[4]+3889429448&4294967295,R=M+(I<<20&4294967295|I>>>12),I=E+(M^U&(R^M))+D[9]+568446438&4294967295,E=R+(I<<5&4294967295|I>>>27),I=U+(R^M&(E^R))+D[14]+3275163606&4294967295,U=E+(I<<9&4294967295|I>>>23),I=M+(E^R&(U^E))+D[3]+4107603335&4294967295,M=U+(I<<14&4294967295|I>>>18),I=R+(U^E&(M^U))+D[8]+1163531501&4294967295,R=M+(I<<20&4294967295|I>>>12),I=E+(M^U&(R^M))+D[13]+2850285829&4294967295,E=R+(I<<5&4294967295|I>>>27),I=U+(R^M&(E^R))+D[2]+4243563512&4294967295,U=E+(I<<9&4294967295|I>>>23),I=M+(E^R&(U^E))+D[7]+1735328473&4294967295,M=U+(I<<14&4294967295|I>>>18),I=R+(U^E&(M^U))+D[12]+2368359562&4294967295,R=M+(I<<20&4294967295|I>>>12),I=E+(R^M^U)+D[5]+4294588738&4294967295,E=R+(I<<4&4294967295|I>>>28),I=U+(E^R^M)+D[8]+2272392833&4294967295,U=E+(I<<11&4294967295|I>>>21),I=M+(U^E^R)+D[11]+1839030562&4294967295,M=U+(I<<16&4294967295|I>>>16),I=R+(M^U^E)+D[14]+4259657740&4294967295,R=M+(I<<23&4294967295|I>>>9),I=E+(R^M^U)+D[1]+2763975236&4294967295,E=R+(I<<4&4294967295|I>>>28),I=U+(E^R^M)+D[4]+1272893353&4294967295,U=E+(I<<11&4294967295|I>>>21),I=M+(U^E^R)+D[7]+4139469664&4294967295,M=U+(I<<16&4294967295|I>>>16),I=R+(M^U^E)+D[10]+3200236656&4294967295,R=M+(I<<23&4294967295|I>>>9),I=E+(R^M^U)+D[13]+681279174&4294967295,E=R+(I<<4&4294967295|I>>>28),I=U+(E^R^M)+D[0]+3936430074&4294967295,U=E+(I<<11&4294967295|I>>>21),I=M+(U^E^R)+D[3]+3572445317&4294967295,M=U+(I<<16&4294967295|I>>>16),I=R+(M^U^E)+D[6]+76029189&4294967295,R=M+(I<<23&4294967295|I>>>9),I=E+(R^M^U)+D[9]+3654602809&4294967295,E=R+(I<<4&4294967295|I>>>28),I=U+(E^R^M)+D[12]+3873151461&4294967295,U=E+(I<<11&4294967295|I>>>21),I=M+(U^E^R)+D[15]+530742520&4294967295,M=U+(I<<16&4294967295|I>>>16),I=R+(M^U^E)+D[2]+3299628645&4294967295,R=M+(I<<23&4294967295|I>>>9),I=E+(M^(R|~U))+D[0]+4096336452&4294967295,E=R+(I<<6&4294967295|I>>>26),I=U+(R^(E|~M))+D[7]+1126891415&4294967295,U=E+(I<<10&4294967295|I>>>22),I=M+(E^(U|~R))+D[14]+2878612391&4294967295,M=U+(I<<15&4294967295|I>>>17),I=R+(U^(M|~E))+D[5]+4237533241&4294967295,R=M+(I<<21&4294967295|I>>>11),I=E+(M^(R|~U))+D[12]+1700485571&4294967295,E=R+(I<<6&4294967295|I>>>26),I=U+(R^(E|~M))+D[3]+2399980690&4294967295,U=E+(I<<10&4294967295|I>>>22),I=M+(E^(U|~R))+D[10]+4293915773&4294967295,M=U+(I<<15&4294967295|I>>>17),I=R+(U^(M|~E))+D[1]+2240044497&4294967295,R=M+(I<<21&4294967295|I>>>11),I=E+(M^(R|~U))+D[8]+1873313359&4294967295,E=R+(I<<6&4294967295|I>>>26),I=U+(R^(E|~M))+D[15]+4264355552&4294967295,U=E+(I<<10&4294967295|I>>>22),I=M+(E^(U|~R))+D[6]+2734768916&4294967295,M=U+(I<<15&4294967295|I>>>17),I=R+(U^(M|~E))+D[13]+1309151649&4294967295,R=M+(I<<21&4294967295|I>>>11),I=E+(M^(R|~U))+D[4]+4149444226&4294967295,E=R+(I<<6&4294967295|I>>>26),I=U+(R^(E|~M))+D[11]+3174756917&4294967295,U=E+(I<<10&4294967295|I>>>22),I=M+(E^(U|~R))+D[2]+718787259&4294967295,M=U+(I<<15&4294967295|I>>>17),I=R+(U^(M|~E))+D[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+U&4294967295}a.prototype.v=function(A,E){E===void 0&&(E=A.length);const R=E-this.blockSize,D=this.C;let M=this.h,U=0;for(;U<E;){if(M==0)for(;U<=R;)l(this,A,U),U+=this.blockSize;if(typeof A=="string"){for(;U<E;)if(D[M++]=A.charCodeAt(U++),M==this.blockSize){l(this,D),M=0;break}}else for(;U<E;)if(D[M++]=A[U++],M==this.blockSize){l(this,D),M=0;break}}this.h=M,this.o+=E},a.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;E=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=E&255,E/=256;for(this.v(A),A=Array(16),E=0,R=0;R<4;++R)for(let D=0;D<32;D+=8)A[E++]=this.g[R]>>>D&255;return A};function u(A,E){var R=p;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=E(A)}function d(A,E){this.h=E;const R=[];let D=!0;for(let M=A.length-1;M>=0;M--){const U=A[M]|0;D&&U==E||(R[M]=U,D=!1)}this.g=R}var p={};function g(A){return-128<=A&&A<128?u(A,function(E){return new d([E|0],E<0?-1:0)}):new d([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return k;if(A<0)return L(y(-A));const E=[];let R=1;for(let D=0;A>=R;D++)E[D]=A/R|0,R*=4294967296;return new d(E,0)}function x(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return L(x(A.substring(1),E));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(E,8));let D=k;for(let U=0;U<A.length;U+=8){var M=Math.min(8,A.length-U);const I=parseInt(A.substring(U,U+M),E);M<8?(M=y(Math.pow(E,M)),D=D.j(M).add(y(I))):(D=D.j(R),D=D.add(y(I)))}return D}var k=g(0),j=g(1),P=g(16777216);s=d.prototype,s.m=function(){if(B(this))return-L(this).m();let A=0,E=1;for(let R=0;R<this.g.length;R++){const D=this.i(R);A+=(D>=0?D:4294967296+D)*E,E*=4294967296}return A},s.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if($(this))return"0";if(B(this))return"-"+L(this).toString(A);const E=y(Math.pow(A,6));var R=this;let D="";for(;;){const M=ve(R,E).g;R=te(R,M.j(E));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=M,$(R))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},s.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function $(A){if(A.h!=0)return!1;for(let E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function B(A){return A.h==-1}s.l=function(A){return A=te(this,A),B(A)?-1:$(A)?0:1};function L(A){const E=A.g.length,R=[];for(let D=0;D<E;D++)R[D]=~A.g[D];return new d(R,~A.h).add(j)}s.abs=function(){return B(this)?L(this):this},s.add=function(A){const E=Math.max(this.g.length,A.g.length),R=[];let D=0;for(let M=0;M<=E;M++){let U=D+(this.i(M)&65535)+(A.i(M)&65535),I=(U>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);D=I>>>16,U&=65535,I&=65535,R[M]=I<<16|U}return new d(R,R[R.length-1]&-2147483648?-1:0)};function te(A,E){return A.add(L(E))}s.j=function(A){if($(this)||$(A))return k;if(B(this))return B(A)?L(this).j(L(A)):L(L(this).j(A));if(B(A))return L(this.j(L(A)));if(this.l(P)<0&&A.l(P)<0)return y(this.m()*A.m());const E=this.g.length+A.g.length,R=[];for(var D=0;D<2*E;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(let M=0;M<A.g.length;M++){const U=this.i(D)>>>16,I=this.i(D)&65535,Ne=A.i(M)>>>16,pt=A.i(M)&65535;R[2*D+2*M]+=I*pt,Q(R,2*D+2*M),R[2*D+2*M+1]+=U*pt,Q(R,2*D+2*M+1),R[2*D+2*M+1]+=I*Ne,Q(R,2*D+2*M+1),R[2*D+2*M+2]+=U*Ne,Q(R,2*D+2*M+2)}for(A=0;A<E;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=E;A<2*E;A++)R[A]=0;return new d(R,0)};function Q(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function ce(A,E){this.g=A,this.h=E}function ve(A,E){if($(E))throw Error("division by zero");if($(A))return new ce(k,k);if(B(A))return E=ve(L(A),E),new ce(L(E.g),L(E.h));if(B(E))return E=ve(A,L(E)),new ce(L(E.g),E.h);if(A.g.length>30){if(B(A)||B(E))throw Error("slowDivide_ only works with positive integers.");for(var R=j,D=E;D.l(A)<=0;)R=Ue(R),D=Ue(D);var M=Ae(R,1),U=Ae(D,1);for(D=Ae(D,2),R=Ae(R,2);!$(D);){var I=U.add(D);I.l(A)<=0&&(M=M.add(R),U=I),D=Ae(D,1),R=Ae(R,1)}return E=te(A,M.j(E)),new ce(M,E)}for(M=k;A.l(E)>=0;){for(R=Math.max(1,Math.floor(A.m()/E.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=y(R),I=U.j(E);B(I)||I.l(A)>0;)R-=D,U=y(R),I=U.j(E);$(U)&&(U=j),M=M.add(U),A=te(A,I)}return new ce(M,A)}s.B=function(A){return ve(this,A).h},s.and=function(A){const E=Math.max(this.g.length,A.g.length),R=[];for(let D=0;D<E;D++)R[D]=this.i(D)&A.i(D);return new d(R,this.h&A.h)},s.or=function(A){const E=Math.max(this.g.length,A.g.length),R=[];for(let D=0;D<E;D++)R[D]=this.i(D)|A.i(D);return new d(R,this.h|A.h)},s.xor=function(A){const E=Math.max(this.g.length,A.g.length),R=[];for(let D=0;D<E;D++)R[D]=this.i(D)^A.i(D);return new d(R,this.h^A.h)};function Ue(A){const E=A.g.length+1,R=[];for(let D=0;D<E;D++)R[D]=A.i(D)<<1|A.i(D-1)>>>31;return new d(R,A.h)}function Ae(A,E){const R=E>>5;E%=32;const D=A.g.length-R,M=[];for(let U=0;U<D;U++)M[U]=E>0?A.i(U+R)>>>E|A.i(U+R+1)<<32-E:A.i(U+R);return new d(M,A.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,hw=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=x,Ci=d}).apply(typeof V1<"u"?V1:typeof self<"u"?self:typeof window<"u"?window:{});var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var dw,zc,fw,id,$p,mw,pw,gw;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fh=="object"&&Fh];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var a=n(this);function l(h,v){if(v)e:{var w=a;h=h.split(".");for(var N=0;N<h.length-1;N++){var X=h[N];if(!(X in w))break e;w=w[X]}h=h[h.length-1],N=w[h],v=v(N),v!=N&&v!=null&&e(w,h,{configurable:!0,writable:!0,value:v})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(v){var w=[],N;for(N in v)Object.prototype.hasOwnProperty.call(v,N)&&w.push([N,v[N]]);return w}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,w){return h.call.apply(h.bind,arguments)}function y(h,v,w){return y=g,y.apply(null,arguments)}function x(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var N=w.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function k(h,v){function w(){}w.prototype=v.prototype,h.Z=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(N,X,ie){for(var qe=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)qe[Vt-2]=arguments[Vt];return v.prototype[X].apply(N,qe)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function P(h){const v=h.length;if(v>0){const w=Array(v);for(let N=0;N<v;N++)w[N]=h[N];return w}return[]}function $(h,v){for(let N=1;N<arguments.length;N++){const X=arguments[N];var w=typeof X;if(w=w!="object"?w:X?Array.isArray(X)?"array":w:"null",w=="array"||w=="object"&&typeof X.length=="number"){w=h.length||0;const ie=X.length||0;h.length=w+ie;for(let qe=0;qe<ie;qe++)h[w+qe]=X[qe]}else h.push(X)}}class B{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function L(h){d.setTimeout(()=>{throw h},0)}function te(){var h=A;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Q{constructor(){this.h=this.g=null}add(v,w){const N=ce.get();N.set(v,w),this.h?this.h.next=N:this.g=N,this.h=N}}var ce=new B(()=>new ve,h=>h.reset());class ve{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Ae=!1,A=new Q,E=()=>{const h=Promise.resolve(void 0);Ue=()=>{h.then(R)}};function R(){for(var h;h=te();){try{h.h.call(h.g)}catch(w){L(w)}var v=ce;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}Ae=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};d.addEventListener("test",w,v),d.removeEventListener("test",w,v)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function Ne(h,v){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}k(Ne,M),Ne.prototype.init=function(h,v){const w=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var pt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ke(h,v,w,N,X){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!N,this.ha=X,this.key=++Y,this.da=this.fa=!1}function Pe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ae(h,v,w){for(const N in h)v.call(w,h[N],N,h)}function Me(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function O(h){const v={};for(const w in h)v[w]=h[w];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(h,v){let w,N;for(let X=1;X<arguments.length;X++){N=arguments[X];for(w in N)h[w]=N[w];for(let ie=0;ie<W.length;ie++)w=W[ie],Object.prototype.hasOwnProperty.call(N,w)&&(h[w]=N[w])}}function Ee(h){this.src=h,this.g={},this.h=0}Ee.prototype.add=function(h,v,w,N,X){const ie=h.toString();h=this.g[ie],h||(h=this.g[ie]=[],this.h++);const qe=Oe(h,v,N,X);return qe>-1?(v=h[qe],w||(v.fa=!1)):(v=new ke(v,this.src,ie,!!N,X),v.fa=w,h.push(v)),v};function Re(h,v){const w=v.type;if(w in h.g){var N=h.g[w],X=Array.prototype.indexOf.call(N,v,void 0),ie;(ie=X>=0)&&Array.prototype.splice.call(N,X,1),ie&&(Pe(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Oe(h,v,w,N){for(let X=0;X<h.length;++X){const ie=h[X];if(!ie.da&&ie.listener==v&&ie.capture==!!w&&ie.ha==N)return X}return-1}var nt="closure_lm_"+(Math.random()*1e6|0),He={};function Ze(h,v,w,N,X){if(Array.isArray(v)){for(let ie=0;ie<v.length;ie++)Ze(h,v[ie],w,N,X);return null}return w=At(w),h&&h[pt]?h.J(v,w,p(N)?!!N.capture:!1,X):vt(h,v,w,!1,N,X)}function vt(h,v,w,N,X,ie){if(!v)throw Error("Invalid event type");const qe=p(X)?!!X.capture:!!X;let Vt=Ft(h);if(Vt||(h[nt]=Vt=new Ee(h)),w=Vt.add(v,w,N,qe,ie),w.proxy)return w;if(N=nn(),w.proxy=N,N.src=h,N.listener=w,h.addEventListener)U||(X=qe),X===void 0&&(X=!1),h.addEventListener(v.toString(),N,X);else if(h.attachEvent)h.attachEvent(ne(v.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return w}function nn(){function h(w){return v.call(h.src,h.listener,w)}const v=ln;return h}function Tt(h,v,w,N,X){if(Array.isArray(v))for(var ie=0;ie<v.length;ie++)Tt(h,v[ie],w,N,X);else N=p(N)?!!N.capture:!!N,w=At(w),h&&h[pt]?(h=h.i,ie=String(v).toString(),ie in h.g&&(v=h.g[ie],w=Oe(v,w,N,X),w>-1&&(Pe(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete h.g[ie],h.h--)))):h&&(h=Ft(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Oe(v,w,N,X)),(w=h>-1?v[h]:null)&&bt(w))}function bt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[pt])Re(v.i,h);else{var w=h.type,N=h.proxy;v.removeEventListener?v.removeEventListener(w,N,h.capture):v.detachEvent?v.detachEvent(ne(w),N):v.addListener&&v.removeListener&&v.removeListener(N),(w=Ft(v))?(Re(w,h),w.h==0&&(w.src=null,v[nt]=null)):Pe(h)}}}function ne(h){return h in He?He[h]:He[h]="on"+h}function ln(h,v){if(h.da)h=!0;else{v=new Ne(v,this);const w=h.listener,N=h.ha||h.src;h.fa&&bt(h),h=w.call(N,v)}return h}function Ft(h){return h=h[nt],h instanceof Ee?h:null}var _t="__closure_events_fn_"+(Math.random()*1e9>>>0);function At(h){return typeof h=="function"?h:(h[_t]||(h[_t]=function(v){return h.handleEvent(v)}),h[_t])}function ct(){D.call(this),this.i=new Ee(this),this.M=this,this.G=null}k(ct,D),ct.prototype[pt]=!0,ct.prototype.removeEventListener=function(h,v,w,N){Tt(this,h,v,w,N)};function Ke(h,v){var w,N=h.G;if(N)for(w=[];N;N=N.G)w.push(N);if(h=h.M,N=v.type||v,typeof v=="string")v=new M(v,h);else if(v instanceof M)v.target=v.target||h;else{var X=v;v=new M(N,h),ge(v,X)}X=!0;let ie,qe;if(w)for(qe=w.length-1;qe>=0;qe--)ie=v.g=w[qe],X=Gt(ie,N,!0,v)&&X;if(ie=v.g=h,X=Gt(ie,N,!0,v)&&X,X=Gt(ie,N,!1,v)&&X,w)for(qe=0;qe<w.length;qe++)ie=v.g=w[qe],X=Gt(ie,N,!1,v)&&X}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const w=h.g[v];for(let N=0;N<w.length;N++)Pe(w[N]);delete h.g[v],h.h--}}this.G=null},ct.prototype.J=function(h,v,w,N){return this.i.add(String(h),v,!1,w,N)},ct.prototype.K=function(h,v,w,N){return this.i.add(String(h),v,!0,w,N)};function Gt(h,v,w,N){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let X=!0;for(let ie=0;ie<v.length;++ie){const qe=v[ie];if(qe&&!qe.da&&qe.capture==w){const Vt=qe.listener,es=qe.ha||qe.src;qe.fa&&Re(h.i,qe),X=Vt.call(es,N)!==!1&&X}}return X&&!N.defaultPrevented}function as(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function It(h){h.g=as(()=>{h.g=null,h.i&&(h.i=!1,It(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Ut extends D{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ln(h){D.call(this),this.h=h,this.g={}}k(Ln,D);var Ht=[];function xn(h){ae(h.g,function(v,w){this.g.hasOwnProperty(w)&&bt(v)},h),h.g={}}Ln.prototype.N=function(){Ln.Z.N.call(this),xn(this)},Ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fe=d.JSON.stringify,xe=d.JSON.parse,Ce=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function tt(){}function Ye(){}var ze={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xe(){M.call(this,"d")}k(Xe,M);function We(){M.call(this,"c")}k(We,M);var Ve={},we=null;function Je(){return we=we||new ct}Ve.Ia="serverreachability";function lt(h){M.call(this,Ve.Ia,h)}k(lt,M);function Et(h){const v=Je();Ke(v,new lt(v))}Ve.STAT_EVENT="statevent";function $t(h,v){M.call(this,Ve.STAT_EVENT,h),this.stat=v}k($t,M);function Ge(h){const v=Je();Ke(v,new $t(v,h))}Ve.Ja="timingevent";function jt(h,v){M.call(this,Ve.Ja,h),this.size=v}k(jt,M);function Ct(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function Dt(){this.g=!0}Dt.prototype.ua=function(){this.g=!1};function qt(h,v,w,N,X,ie){h.info(function(){if(h.g)if(ie){var qe="",Vt=ie.split("&");for(let yn=0;yn<Vt.length;yn++){var es=Vt[yn].split("=");if(es.length>1){const Vn=es[0];es=es[1];const ir=Vn.split("_");qe=ir.length>=2&&ir[1]=="type"?qe+(Vn+"="+es+"&"):qe+(Vn+"=redacted&")}}}else qe=null;else qe=ie;return"XMLHTTP REQ ("+N+") [attempt "+X+"]: "+v+`
`+w+`
`+qe})}function kt(h,v,w,N,X,ie,qe){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+X+"]: "+v+`
`+w+`
`+ie+" "+qe})}function sn(h,v,w,N){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+rn(h,w)+(N?" "+N:"")})}function Wt(h,v){h.info(function(){return"TIMEOUT: "+v})}Dt.prototype.info=function(){};function rn(h,v){if(!h.g)return v;if(!v)return null;try{const ie=JSON.parse(v);if(ie){for(h=0;h<ie.length;h++)if(Array.isArray(ie[h])){var w=ie[h];if(!(w.length<2)){var N=w[1];if(Array.isArray(N)&&!(N.length<1)){var X=N[0];if(X!="noop"&&X!="stop"&&X!="close")for(let qe=1;qe<N.length;qe++)N[qe]=""}}}}return fe(ie)}catch{return v}}var un={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sn;function F(){}k(F,tt),F.prototype.g=function(){return new XMLHttpRequest},Sn=new F;function de(h){return encodeURIComponent(String(h))}function me(h){var v=1;h=h.split(":");const w=[];for(;v>0&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function ye(h,v,w,N){this.j=h,this.i=v,this.l=w,this.S=N||1,this.V=new Ln(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new he}function he(){this.i=null,this.g="",this.h=!1}var $e={},ft={};function et(h,v,w){h.M=1,h.A=Qt(Se(v)),h.u=w,h.R=!0,ht(h,null)}function ht(h,v){h.F=Date.now(),qn(h),h.B=Se(h.A);var w=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),Ns(w.i,"t",N),h.C=0,w=h.j.L,h.h=new he,h.g=Mu(h.j,w?v:null,!h.u),h.P>0&&(h.O=new Ut(y(h.Y,h,h.g),h.P)),v=h.V,w=h.g,N=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(Ht[0]=X.toString()),X=Ht);for(let ie=0;ie<X.length;ie++){const qe=Ze(w,X[ie],N||v.handleEvent,!1,v.h||v);if(!qe)break;v.g[qe.key]=qe}v=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),Et(),qt(h.i,h.v,h.B,h.l,h.S,h.u)}ye.prototype.ba=function(h){h=h.target;const v=this.O;v&&Er(h)==3?v.j():this.Y(h)},ye.prototype.Y=function(h){try{if(h==this.g)e:{const Vt=Er(this.g),es=this.g.ya(),yn=this.g.ca();if(!(Vt<3)&&(Vt!=3||this.g&&(this.h.h||this.g.la()||bs(this.g)))){this.K||Vt!=4||es==7||(es==8||yn<=0?Et(3):Et(2)),fn(this);var v=this.g.ca();this.X=v;var w=mt(this);if(this.o=v==200,kt(this.i,this.v,this.B,this.l,this.S,Vt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var N,X=this.g;if((N=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(N)){var ie=N;break t}}ie=null}if(h=ie)sn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,T(this,h);else{this.o=!1,this.m=3,Ge(12),oe(this),z(this);break e}}if(this.R){h=!0;let Vn;for(;!this.K&&this.C<w.length;)if(Vn=Ss(this,w),Vn==ft){Vt==4&&(this.m=4,Ge(14),h=!1),sn(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==$e){this.m=4,Ge(15),sn(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else sn(this.i,this.l,Vn,null),T(this,Vn);if(an(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||w.length!=0||this.h.h||(this.m=1,Ge(16),h=!1),this.o=this.o&&h,!h)sn(this.i,this.l,w,"[Invalid Chunked Response]"),oe(this),z(this);else if(w.length>0&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.aa&&!qe.P&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Yl(qe),qe.P=!0,Ge(11))}}else sn(this.i,this.l,w,null),T(this,w);Vt==4&&oe(this),this.o&&!this.K&&(Vt==4?Cu(this.j,this):(this.o=!1,qn(this)))}else fa(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,Ge(12)):(this.m=0,Ge(13)),oe(this),z(this)}}}catch{}};function mt(h){if(!an(h))return h.g.la();const v=bs(h.g);if(v==="")return"";let w="";const N=v.length,X=Er(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return oe(h),z(h),"";h.h.i=new d.TextDecoder}for(let ie=0;ie<N;ie++)h.h.h=!0,w+=h.h.i.decode(v[ie],{stream:!(X&&ie==N-1)});return v.length=0,h.h.g+=w,h.C=0,h.h.g}function an(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ss(h,v){var w=h.C,N=v.indexOf(`
`,w);return N==-1?ft:(w=Number(v.substring(w,N)),isNaN(w)?$e:(N+=1,N+w>v.length?ft:(v=v.slice(N,N+w),h.C=N+w,v)))}ye.prototype.cancel=function(){this.K=!0,oe(this)};function qn(h){h.T=Date.now()+h.H,Yn(h,h.H)}function Yn(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ct(y(h.aa,h),v)}function fn(h){h.D&&(d.clearTimeout(h.D),h.D=null)}ye.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Wt(this.i,this.B),this.M!=2&&(Et(),Ge(17)),oe(this),this.m=2,z(this)):Yn(this,this.T-h)};function z(h){h.j.I==0||h.K||Cu(h.j,h)}function oe(h){fn(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,xn(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function T(h,v){try{var w=h.j;if(w.I!=0&&(w.g==h||Le(w.h,h))){if(!h.L&&Le(w.h,h)&&w.I==3){try{var N=w.Ba.g.parse(v)}catch{N=null}if(Array.isArray(N)&&N.length==3){var X=N;if(X[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Po(w),Ka(w);else break e;Ki(w),Ge(18)}}else w.xa=X[1],0<w.xa-w.K&&X[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ct(y(w.Va,w),6e3));Fe(w.h)<=1&&w.ta&&(w.ta=void 0)}else Wr(w,11)}else if((h.L||w.g==h)&&Po(w),!I(v))for(X=w.Ba.g.parse(v),v=0;v<X.length;v++){let yn=X[v];const Vn=yn[0];if(!(Vn<=w.K))if(w.K=Vn,yn=yn[1],w.I==2)if(yn[0]=="c"){w.M=yn[1],w.ba=yn[2];const ir=yn[3];ir!=null&&(w.ka=ir,w.j.info("VER="+w.ka));const Gr=yn[4];Gr!=null&&(w.za=Gr,w.j.info("SVER="+w.za));const jr=yn[5];jr!=null&&typeof jr=="number"&&jr>0&&(N=1.5*jr,w.O=N,w.j.info("backChannelRequestTimeoutMs_="+N)),N=w;const Sr=h.g;if(Sr){const Yi=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var ie=N.h;ie.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(De(ie,ie.h),ie.h=null))}if(N.G){const Lo=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Lo&&(N.wa=Lo,at(N.J,N.G,Lo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),N=w;var qe=h;if(N.na=Iu(N,N.L?N.ba:null,N.W),qe.L){Ot(N.h,qe);var Vt=qe,es=N.O;es&&(Vt.H=es),Vt.D&&(fn(Vt),qn(Vt)),N.g=qe}else Su(N);w.i.length>0&&$r(w)}else yn[0]!="stop"&&yn[0]!="close"||Wr(w,7);else w.I==3&&(yn[0]=="stop"||yn[0]=="close"?yn[0]=="stop"?Wr(w,7):Gl(w):yn[0]!="noop"&&w.l&&w.l.qa(yn),w.A=0)}}Et(4)}catch{}}var C=class{constructor(h,v){this.g=h,this.map=v}};function G(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function J(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Fe(h){return h.h?1:h.g?h.g.size:0}function Le(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function De(h,v){h.g?h.g.add(v):h.h=v}function Ot(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}G.prototype.cancel=function(){if(this.i=xt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function xt(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.G);return v}return P(h.i)}var H=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ue(h,v){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const N=h[w].indexOf("=");let X,ie=null;N>=0?(X=h[w].substring(0,N),ie=h[w].substring(N+1)):X=h[w],v(X,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function re(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof re?(this.l=h.l,Ie(this,h.j),this.o=h.o,this.g=h.g,rt(this,h.u),this.h=h.h,Rt(this,zr(h.i)),this.m=h.m):h&&(v=String(h).match(H))?(this.l=!1,Ie(this,v[1]||"",!0),this.o=On(v[2]||""),this.g=On(v[3]||"",!0),rt(this,v[4]),this.h=On(v[5]||"",!0),Rt(this,v[6]||"",!0),this.m=On(v[7]||"")):(this.l=!1,this.i=new Hn(null,this.l))}re.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(mn(v,Fa,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(mn(v,Fa,!0),"@"),h.push(de(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(mn(w,w.charAt(0)=="/"?qa:Fi,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",mn(w,hn)),h.join("")},re.prototype.resolve=function(h){const v=Se(this);let w=!!h.j;w?Ie(v,h.j):w=!!h.o,w?v.o=h.o:w=!!h.g,w?v.g=h.g:w=h.u!=null;var N=h.h;if(w)rt(v,h.u);else if(w=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var X=v.h.lastIndexOf("/");X!=-1&&(N=v.h.slice(0,X+1)+N)}if(X=N,X==".."||X==".")N="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){N=X.lastIndexOf("/",0)==0,X=X.split("/");const ie=[];for(let qe=0;qe<X.length;){const Vt=X[qe++];Vt=="."?N&&qe==X.length&&ie.push(""):Vt==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),N&&qe==X.length&&ie.push("")):(ie.push(Vt),N=!0)}N=ie.join("/")}else N=X}return w?v.h=N:w=h.i.toString()!=="",w?Rt(v,zr(h.i)):w=!!h.m,w&&(v.m=h.m),v};function Se(h){return new re(h)}function Ie(h,v,w){h.j=w?On(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function rt(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function Rt(h,v,w){v instanceof Hn?(h.i=v,Ha(h.i,h.l)):(w||(v=mn(v,xr)),h.i=new Hn(v,h.l))}function at(h,v,w){h.i.set(v,w)}function Qt(h){return at(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function On(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function mn(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,Mn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Mn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fa=/[#\/\?@]/g,Fi=/[#\?:]/g,qa=/[#\?]/g,xr=/[#\?@]/g,hn=/#/g;function Hn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function $n(h){h.g||(h.g=new Map,h.h=0,h.i&&ue(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}s=Hn.prototype,s.add=function(h,v){$n(this),this.i=null,h=kr(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function wr(h,v){$n(h),v=kr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function _r(h,v){return $n(h),v=kr(h,v),h.g.has(v)}s.forEach=function(h,v){$n(this),this.g.forEach(function(w,N){w.forEach(function(X){h.call(v,X,N,this)},this)},this)};function vs(h,v){$n(h);let w=[];if(typeof v=="string")_r(h,v)&&(w=w.concat(h.g.get(kr(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)w=w.concat(h[v]);return w}s.set=function(h,v){return $n(this),this.i=null,h=kr(this,h),_r(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=vs(this,h),h.length>0?String(h[0]):v):v};function Ns(h,v,w){wr(h,v),w.length>0&&(h.i=null,h.g.set(kr(h,v),P(w)),h.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let N=0;N<v.length;N++){var w=v[N];const X=de(w);w=vs(this,w);for(let ie=0;ie<w.length;ie++){let qe=X;w[ie]!==""&&(qe+="="+de(w[ie])),h.push(qe)}}return this.i=h.join("&")};function zr(h){const v=new Hn;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function kr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ha(h,v){v&&!h.j&&($n(h),h.i=null,h.g.forEach(function(w,N){const X=N.toLowerCase();N!=X&&(wr(this,N),Ns(this,X,w))},h)),h.j=v}function Ps(h,v){const w=new Dt;if(d.Image){const N=new Image;N.onload=x(rr,w,"TestLoadImage: loaded",!0,v,N),N.onerror=x(rr,w,"TestLoadImage: error",!1,v,N),N.onabort=x(rr,w,"TestLoadImage: abort",!1,v,N),N.ontimeout=x(rr,w,"TestLoadImage: timeout",!1,v,N),d.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else v(!1)}function Hl(h,v){const w=new Dt,N=new AbortController,X=setTimeout(()=>{N.abort(),rr(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:N.signal}).then(ie=>{clearTimeout(X),ie.ok?rr(w,"TestPingServer: ok",!0,v):rr(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(X),rr(w,"TestPingServer: error",!1,v)})}function rr(h,v,w,N,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),N(w)}catch{}}function $a(){this.g=new Ce}function Fr(h){this.i=h.Sb||null,this.h=h.ab||!1}k(Fr,tt),Fr.prototype.g=function(){return new qi(this.i,this.h)};function qi(h,v){ct.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(qi,ct),s=qi.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,Tr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Wa(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Tr(this)),this.g&&(this.readyState=3,Tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Io(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Io(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Wa(this):Tr(this),this.readyState==3&&Io(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Wa(this))},s.Na=function(h){this.g&&(this.response=h,Wa(this))},s.ga=function(){this.g&&Wa(this)};function Wa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Tr(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function Tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ar(h){let v="";return ae(h,function(w,N){v+=N,v+=":",v+=w,v+=`\r
`}),v}function Hi(h,v,w){e:{for(N in w){var N=!1;break e}N=!0}N||(w=ar(w),typeof h=="string"?w!=null&&de(w):at(h,v,w))}function kn(h){ct.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(kn,ct);var qr=/^https?$/i,$l=["POST","PUT"];s=kn.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,w,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sn.g(),this.g.onreadystatechange=j(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ie){$i(this,ie);return}if(h=w||"",w=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var X in N)w.set(X,N[X]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ie of N.keys())w.set(ie,N.get(ie));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(w.keys()).find(ie=>ie.toLowerCase()=="content-type"),X=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call($l,v,void 0)>=0)||N||X||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,qe]of w)this.g.setRequestHeader(ie,qe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ie){$i(this,ie)}};function $i(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Wl(h),da(h)}function Wl(h){h.A||(h.A=!0,Ke(h,"complete"),Ke(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ke(this,"complete"),Ke(this,"abort"),da(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),da(this,!0)),kn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Wi(this):this.Xa())},s.Xa=function(){Wi(this)};function Wi(h){if(h.h&&typeof u<"u"){if(h.v&&Er(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ke(h,"readystatechange"),Er(h)==4){h.h=!1;try{const ie=h.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var N;if(N=ie===0){let qe=String(h.D).match(H)[1]||null;!qe&&d.self&&d.self.location&&(qe=d.self.location.protocol.slice(0,-1)),N=!qr.test(qe?qe.toLowerCase():"")}w=N}if(w)Ke(h,"complete"),Ke(h,"success");else{h.o=6;try{var X=Er(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",Wl(h)}}finally{da(h)}}}}function da(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,v||Ke(h,"ready");try{w.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Er(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Er(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),xe(v)}};function bs(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function fa(h){const v={};h=(h.g&&Er(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(I(h[N]))continue;var w=me(h[N]);const X=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const ie=v[X]||[];v[X]=ie,ie.push(w)}Me(v,function(N){return N.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function Ga(h){this.za=0,this.i=[],this.j=new Dt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hr("baseRetryDelayMs",5e3,h),this.Za=Hr("retryDelaySeedMs",1e4,h),this.Ta=Hr("forwardChannelMaxRetries",2,h),this.va=Hr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new G(h&&h.concurrentRequestLimit),this.Ba=new $a,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ga.prototype,s.ka=8,s.I=1,s.connect=function(h,v,w,N){Ge(0),this.W=h,this.H=v||{},w&&N!==void 0&&(this.H.OSID=w,this.H.OAID=N),this.F=this.X,this.J=Iu(this,null,this.W),$r(this)};function Gl(h){if(Mo(h),h.I==3){var v=h.V++,w=Se(h.J);if(at(w,"SID",h.M),at(w,"RID",v),at(w,"TYPE","terminate"),Gi(h,w),v=new ye(h,h.j,v),v.M=2,v.A=Qt(Se(w)),w=!1,d.navigator&&d.navigator.sendBeacon)try{w=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&d.Image&&(new Image().src=v.A,w=!0),w||(v.g=Mu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),qn(v)}Au(h)}function Ka(h){h.g&&(Yl(h),h.g.cancel(),h.g=null)}function Mo(h){Ka(h),h.v&&(d.clearTimeout(h.v),h.v=null),Po(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function $r(h){if(!J(h.h)&&!h.m){h.m=!0;var v=h.Ea;Ue||E(),Ae||(Ue(),Ae=!0),A.add(v,h),h.D=0}}function Do(h,v){return Fe(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ct(y(h.Ea,h,v),Ru(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new ye(this,this.j,h);let ie=this.o;if(this.U&&(ie?(ie=O(ie),ge(ie,this.U)):ie=this.U),this.u!==null||this.R||(X.J=ie,ie=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var N=this.i[w];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(v+=N,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=ju(this,X,v),w=Se(this.J),at(w,"RID",h),at(w,"CVER",22),this.G&&at(w,"X-HTTP-Session-Id",this.G),Gi(this,w),ie&&(this.R?v="headers="+de(ar(ie))+"&"+v:this.u&&Hi(w,this.u,ie)),De(this.h,X),this.Ra&&at(w,"TYPE","init"),this.S?(at(w,"$req",v),at(w,"SID","null"),X.U=!0,et(X,w,null)):et(X,w,v),this.I=2}}else this.I==3&&(h?Kl(this,h):this.i.length==0||J(this.h)||Kl(this))};function Kl(h,v){var w;v?w=v.l:w=h.V++;const N=Se(h.J);at(N,"SID",h.M),at(N,"RID",w),at(N,"AID",h.K),Gi(h,N),h.u&&h.o&&Hi(N,h.u,h.o),w=new ye(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),v&&(h.i=v.G.concat(h.i)),v=ju(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),De(h.h,w),et(w,N,v)}function Gi(h,v){h.H&&ae(h.H,function(w,N){at(v,N,w)}),h.l&&ae({},function(w,N){at(v,N,w)})}function ju(h,v,w){w=Math.min(h.i.length,w);const N=h.l?y(h.l.Ka,h.l,h):null;e:{var X=h.i;let Vt=-1;for(;;){const es=["count="+w];Vt==-1?w>0?(Vt=X[0].g,es.push("ofs="+Vt)):Vt=0:es.push("ofs="+Vt);let yn=!0;for(let Vn=0;Vn<w;Vn++){var ie=X[Vn].g;const ir=X[Vn].map;if(ie-=Vt,ie<0)Vt=Math.max(0,X[Vn].g-100),yn=!1;else try{ie="req"+ie+"_"||"";try{var qe=ir instanceof Map?ir:Object.entries(ir);for(const[Gr,jr]of qe){let Sr=jr;p(jr)&&(Sr=fe(jr)),es.push(ie+Gr+"="+encodeURIComponent(Sr))}}catch(Gr){throw es.push(ie+"type="+encodeURIComponent("_badmap")),Gr}}catch{N&&N(ir)}}if(yn){qe=es.join("&");break e}}qe=void 0}return h=h.i.splice(0,w),v.G=h,qe}function Su(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;Ue||E(),Ae||(Ue(),Ae=!0),A.add(v,h),h.A=0}}function Ki(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ct(y(h.Da,h),Ru(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ct(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ge(10),Ka(this),Nu(this))};function Yl(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Nu(h){h.g=new ye(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=Se(h.na);at(v,"RID","rpc"),at(v,"SID",h.M),at(v,"AID",h.K),at(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&at(v,"TO",h.ia),at(v,"TYPE","xmlhttp"),Gi(h,v),h.u&&h.o&&Hi(v,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Qt(Se(v)),w.u=null,w.R=!0,ht(w,h)}s.Va=function(){this.C!=null&&(this.C=null,Ka(this),Ki(this),Ge(19))};function Po(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Cu(h,v){var w=null;if(h.g==v){Po(h),Yl(h),h.g=null;var N=2}else if(Le(h.h,v))w=v.G,Ot(h.h,v),N=1;else return;if(h.I!=0){if(v.o)if(N==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var X=h.D;N=Je(),Ke(N,new jt(N,w)),$r(h)}else Su(h);else if(X=v.m,X==3||X==0&&v.X>0||!(N==1&&Do(h,v)||N==2&&Ki(h)))switch(w&&w.length>0&&(v=h.h,v.i=v.i.concat(w)),X){case 1:Wr(h,5);break;case 4:Wr(h,10);break;case 3:Wr(h,6);break;default:Wr(h,2)}}}function Ru(h,v){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*v}function Wr(h,v){if(h.j.info("Error code "+v),v==2){var w=y(h.bb,h),N=h.Ua;const X=!N;N=new re(N||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ie(N,"https"),Qt(N),X?Ps(N.toString(),w):Hl(N.toString(),w)}else Ge(2);h.I=0,h.l&&h.l.pa(v),Au(h),Mo(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function Au(h){if(h.I=0,h.ja=[],h.l){const v=xt(h.h);(v.length!=0||h.i.length!=0)&&($(h.ja,v),$(h.ja,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.oa()}}function Iu(h,v,w){var N=w instanceof re?Se(w):new re(w);if(N.g!="")v&&(N.g=v+"."+N.g),rt(N,N.u);else{var X=d.location;N=X.protocol,v=v?v+"."+X.hostname:X.hostname,X=+X.port;const ie=new re(null);N&&Ie(ie,N),v&&(ie.g=v),X&&rt(ie,X),w&&(ie.h=w),N=ie}return w=h.G,v=h.wa,w&&v&&at(N,w,v),at(N,"VER",h.ka),Gi(h,N),N}function Mu(h,v,w){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new kn(new Fr({ab:w})):new kn(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Du(){}s=Du.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ya(){}Ya.prototype.g=function(h,v){return new Ls(h,v)};function Ls(h,v){ct.call(this),this.g=new Ga(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!I(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ma(this)}k(Ls,ct),Ls.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ls.prototype.close=function(){Gl(this.g)},Ls.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=fe(h),h=w);v.i.push(new C(v.Ya++,h)),v.I==3&&$r(v)},Ls.prototype.N=function(){this.g.l=null,delete this.j,Gl(this.g),delete this.g,Ls.Z.N.call(this)};function Pu(h){Xe.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const w in v){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}k(Pu,Xe);function Lu(){We.call(this),this.status=1}k(Lu,We);function ma(h){this.g=h}k(ma,Du),ma.prototype.ra=function(){Ke(this.g,"a")},ma.prototype.qa=function(h){Ke(this.g,new Pu(h))},ma.prototype.pa=function(h){Ke(this.g,new Lu)},ma.prototype.oa=function(){Ke(this.g,"b")},Ya.prototype.createWebChannel=Ya.prototype.g,Ls.prototype.send=Ls.prototype.o,Ls.prototype.open=Ls.prototype.m,Ls.prototype.close=Ls.prototype.close,gw=function(){return new Ya},pw=function(){return Je()},mw=Ve,$p={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},un.NO_ERROR=0,un.TIMEOUT=8,un.HTTP_ERROR=6,id=un,dn.COMPLETE="complete",fw=dn,Ye.EventType=ze,ze.OPEN="a",ze.CLOSE="b",ze.ERROR="c",ze.MESSAGE="d",ct.prototype.listen=ct.prototype.J,zc=Ye,kn.prototype.listenOnce=kn.prototype.K,kn.prototype.getLastError=kn.prototype.Ha,kn.prototype.getLastErrorCode=kn.prototype.ya,kn.prototype.getStatus=kn.prototype.ca,kn.prototype.getResponseJson=kn.prototype.La,kn.prototype.getResponseText=kn.prototype.la,kn.prototype.send=kn.prototype.ea,kn.prototype.setWithCredentials=kn.prototype.Fa,dw=kn}).apply(typeof Fh<"u"?Fh:typeof self<"u"?self:typeof window<"u"?window:{});class As{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");let Bl="12.8.0";function NC(s){Bl=s}const ko=new wg("@firebase/firestore");function gl(){return ko.logLevel}function st(s,...e){if(ko.logLevel<=Zt.DEBUG){const n=e.map(Dg);ko.debug(`Firestore (${Bl}): ${s}`,...n)}}function Va(s,...e){if(ko.logLevel<=Zt.ERROR){const n=e.map(Dg);ko.error(`Firestore (${Bl}): ${s}`,...n)}}function Cl(s,...e){if(ko.logLevel<=Zt.WARN){const n=e.map(Dg);ko.warn(`Firestore (${Bl}): ${s}`,...n)}}function Dg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Nt(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,yw(s,a,n)}function yw(s,e,n){let a=`FIRESTORE (${Bl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Va(a),new Error(a)}function bn(s,e,n,a){let l="Unexpected state";typeof n=="string"?l=n:a=n,s||yw(e,l,a)}function Lt(s,e){return s}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qe extends ua{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Da{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class vw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(As.UNAUTHENTICATED)))}shutdown(){}}class RC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class AC{constructor(e){this.t=e,this.currentUser=As.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){bn(this.o===void 0,42304);let a=this.i;const l=g=>this.i!==a?(a=this.i,n(g)):Promise.resolve();let u=new Da;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Da,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Da)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(bn(typeof a.accessToken=="string",31837,{l:a}),new vw(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bn(e===null||typeof e=="string",2055,{h:e}),new As(e)}}class IC{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=As.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class MC{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new IC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(As.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class B1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){bn(this.o===void 0,3512);const a=u=>{u.error!=null&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,st("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const l=u=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new B1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(bn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new B1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function PC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}class Pg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=PC(40);for(let u=0;u<l.length;++u)a.length<20&&l[u]<n&&(a+=e.charAt(l[u]%62))}return a}}function en(s,e){return s<e?-1:s>e?1:0}function Wp(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const l=s.charAt(a),u=e.charAt(a);if(l!==u)return pp(l)===pp(u)?en(l,u):pp(l)?1:-1}return en(s.length,e.length)}const LC=55296,OC=57343;function pp(s){const e=s.charCodeAt(0);return e>=LC&&e<=OC}function Rl(s,e,n){return s.length===e.length&&s.every(((a,l)=>n(a,e[l])))}const U1="__name__";class Zr{constructor(e,n,a){n===void 0?n=0:n>e.length&&Nt(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Nt(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Zr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zr?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let l=0;l<a;l++){const u=Zr.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return en(e.length,n.length)}static compareSegments(e,n){const a=Zr.isNumericId(e),l=Zr.isNumericId(n);return a&&!l?-1:!a&&l?1:a&&l?Zr.extractNumericId(e).compare(Zr.extractNumericId(n)):Wp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ci.fromString(e.substring(4,e.length-2))}}class Cn extends Zr{construct(e,n,a){return new Cn(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new Qe(_e.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((l=>l.length>0)))}return new Cn(n)}static emptyPath(){return new Cn([])}}const VC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Es extends Zr{construct(e,n,a){return new Es(e,n,a)}static isValidIdentifier(e){return VC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Es.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U1}static keyField(){return new Es([U1])}static fromServerFormat(e){const n=[];let a="",l=0;const u=()=>{if(a.length===0)throw new Qe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Qe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Qe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(a+=p,l++):(u(),l++)}if(u(),d)throw new Qe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Es(n)}static emptyPath(){return new Es([])}}class yt{constructor(e){this.path=e}static fromPath(e){return new yt(Cn.fromString(e))}static fromName(e){return new yt(Cn.fromString(e).popFirst(5))}static empty(){return new yt(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new yt(new Cn(e.slice()))}}function bw(s,e,n){if(!n)throw new Qe(_e.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function BC(s,e,n,a){if(e===!0&&a===!0)throw new Qe(_e.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function z1(s){if(!yt.isDocumentKey(s))throw new Qe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function F1(s){if(yt.isDocumentKey(s))throw new Qe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function xw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Ud(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Nt(12329,{type:typeof s})}function Or(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Qe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ud(s);throw new Qe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function fs(s,e){const n={typeString:s};return e&&(n.value=e),n}function bu(s,e){if(!xw(s))throw new Qe(_e.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const l=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const d=s[a];if(l&&typeof d!==l){n=`JSON field '${a}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new Qe(_e.INVALID_ARGUMENT,n);return!0}const q1=-62135596800,H1=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*H1);return new dt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Qe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q1)throw new Qe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/H1}_compareTo(e){return this.seconds===e.seconds?en(this.nanoseconds,e.nanoseconds):en(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bu(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:fs("string",dt._jsonSchemaVersion),seconds:fs("number"),nanoseconds:fs("number")};class Mt{static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new dt(0,0))}static max(){return new Mt(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const su=-1;function UC(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,l=Mt.fromTimestamp(a===1e9?new dt(n+1,0):new dt(n,a));return new Ii(l,yt.empty(),e)}function zC(s){return new Ii(s.readTime,s.key,su)}class Ii{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Ii(Mt.min(),yt.empty(),su)}static max(){return new Ii(Mt.max(),yt.empty(),su)}}function FC(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=yt.comparator(s.documentKey,e.documentKey),n!==0?n:en(s.largestBatchId,e.largestBatchId))}const qC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Ul(s){if(s.code!==_e.FAILED_PRECONDITION||s.message!==qC)throw s;st("LocalStore","Unexpectedly lost primary lease")}class je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new je(((a,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof je?n:je.resolve(n)}catch(n){return je.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):je.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):je.reject(n)}static resolve(e){return new je(((n,a)=>{n(e)}))}static reject(e){return new je(((n,a)=>{a(e)}))}static waitFor(e){return new je(((n,a)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&n()}),(g=>a(g)))})),d=!0,u===l&&n()}))}static or(e){let n=je.resolve(!1);for(const a of e)n=n.next((l=>l?je.resolve(l):a()));return n}static forEach(e,n){const a=[];return e.forEach(((l,u)=>{a.push(n.call(this,l,u))})),this.waitFor(a)}static mapArray(e,n){return new je(((a,l)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((x=>{d[y]=x,++p,p===u&&a(d)}),(x=>l(x)))}}))}static doWhile(e,n){return new je(((a,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):a()};u()}))}}function $C(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zl(s){return s.name==="IndexedDbTransactionError"}class zd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zd.ce=-1;const Lg=-1;function Fd(s){return s==null}function _d(s){return s===0&&1/s==-1/0}function WC(s){return typeof s=="number"&&Number.isInteger(s)&&!_d(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const ww="";function GC(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=$1(e)),e=KC(s.get(n),e);return $1(e)}function KC(s,e){let n=e;const a=s.length;for(let l=0;l<a;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case ww:n+="";break;default:n+=u}}return n}function $1(s){return s+ww+""}function W1(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Ui(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function _w(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Kn{constructor(e,n){this.comparator=e,this.root=n||Ts.EMPTY}insert(e,n){return new Kn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ts.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ts.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(e,a.key);if(l===0)return n+a.left.size;l<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,n,a,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ts{constructor(e,n,a,l,u){this.key=e,this.value=n,this.color=a??Ts.RED,this.left=l??Ts.EMPTY,this.right=u??Ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,l,u){return new Ts(e??this.key,n??this.value,a??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let l=this;const u=a(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,a),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Ts.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Nt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Nt(27949);return e+(this.isRed()?0:1)}}Ts.EMPTY=null,Ts.RED=!0,Ts.BLACK=!1;Ts.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt(57766)}get value(){throw Nt(16141)}get color(){throw Nt(16727)}get left(){throw Nt(29726)}get right(){throw Nt(36894)}copy(e,n,a,l,u){return this}insert(e,n,a){return new Ts(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ps{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new G1(this.data.getIterator())}getIteratorFrom(e){return new G1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof ps)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=a.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ps(this.comparator);return n.data=e,n}}class G1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class nr{constructor(e){this.fields=e,e.sort(Es.comparator)}static empty(){return new nr([])}unionWith(e){let n=new ps(Es.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new nr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rl(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}class kw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class js{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new kw("Invalid base64 string: "+u):u}})(e);return new js(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new js(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let l=0;l<n.length;l++)a[l]=n.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return en(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}js.EMPTY_BYTE_STRING=new js("");const YC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(s){if(bn(!!s,39018),typeof s=="string"){let e=0;const n=YC.exec(s);if(bn(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:ss(s.seconds),nanos:ss(s.nanos)}}function ss(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Di(s){return typeof s=="string"?js.fromBase64String(s):js.fromUint8Array(s)}const Tw="server_timestamp",Ew="__type__",jw="__previous_value__",Sw="__local_write_time__";function Og(s){return(s?.mapValue?.fields||{})[Ew]?.stringValue===Tw}function qd(s){const e=s.mapValue.fields[jw];return Og(e)?qd(e):e}function ru(s){const e=Mi(s.mapValue.fields[Sw].timestampValue);return new dt(e.seconds,e.nanos)}class QC{constructor(e,n,a,l,u,d,p,g,y,x,k){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x,this.apiKey=k}}const kd="(default)";class au{constructor(e,n){this.projectId=e,this.database=n||kd}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof au&&e.projectId===this.projectId&&e.database===this.database}}function XC(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Qe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(s.options.projectId,e)}const Nw="__type__",JC="__max__",Hh={mapValue:{}},Cw="__vector__",Td="value";function Pi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Og(s)?4:eR(s)?9007199254740991:ZC(s)?10:11:Nt(28295,{value:s})}function la(s,e){if(s===e)return!0;const n=Pi(s);if(n!==Pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ru(s).isEqual(ru(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=Mi(l.timestampValue),p=Mi(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return Di(l.bytesValue).isEqual(Di(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return ss(l.geoPointValue.latitude)===ss(u.geoPointValue.latitude)&&ss(l.geoPointValue.longitude)===ss(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return ss(l.integerValue)===ss(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=ss(l.doubleValue),p=ss(u.doubleValue);return d===p?_d(d)===_d(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return Rl(s.arrayValue.values||[],e.arrayValue.values||[],la);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(W1(d)!==W1(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!la(d[g],p[g])))return!1;return!0})(s,e);default:return Nt(52216,{left:s})}}function iu(s,e){return(s.values||[]).find((n=>la(n,e)))!==void 0}function Al(s,e){if(s===e)return 0;const n=Pi(s),a=Pi(e);if(n!==a)return en(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return en(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=ss(u.integerValue||u.doubleValue),g=ss(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return K1(s.timestampValue,e.timestampValue);case 4:return K1(ru(s),ru(e));case 5:return Wp(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Di(u),g=Di(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const x=en(p[y],g[y]);if(x!==0)return x}return en(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=en(ss(u.latitude),ss(d.latitude));return p!==0?p:en(ss(u.longitude),ss(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Y1(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[Td]?.arrayValue,x=g[Td]?.arrayValue,k=en(y?.values?.length||0,x?.values?.length||0);return k!==0?k:Y1(y,x)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Hh.mapValue&&d===Hh.mapValue)return 0;if(u===Hh.mapValue)return 1;if(d===Hh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let k=0;k<g.length&&k<x.length;++k){const j=Wp(g[k],x[k]);if(j!==0)return j;const P=Al(p[g[k]],y[x[k]]);if(P!==0)return P}return en(g.length,x.length)})(s.mapValue,e.mapValue);default:throw Nt(23264,{he:n})}}function K1(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return en(s,e);const n=Mi(s),a=Mi(e),l=en(n.seconds,a.seconds);return l!==0?l:en(n.nanos,a.nanos)}function Y1(s,e){const n=s.values||[],a=e.values||[];for(let l=0;l<n.length&&l<a.length;++l){const u=Al(n[l],a[l]);if(u)return u}return en(n.length,a.length)}function Il(s){return Gp(s)}function Gp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=Mi(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Di(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return yt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",l=!0;for(const u of n.values||[])l?l=!1:a+=",",a+=Gp(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const d of a)u?u=!1:l+=",",l+=`${d}:${Gp(n.fields[d])}`;return l+"}"})(s.mapValue):Nt(61005,{value:s})}function od(s){switch(Pi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qd(s);return e?16+od(e):16;case 5:return 2*s.stringValue.length;case 6:return Di(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,u)=>l+od(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let l=0;return Ui(a.fields,((u,d)=>{l+=u.length+od(d)})),l})(s.mapValue);default:throw Nt(13486,{value:s})}}function Q1(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Kp(s){return!!s&&"integerValue"in s}function Vg(s){return!!s&&"arrayValue"in s}function X1(s){return!!s&&"nullValue"in s}function J1(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ld(s){return!!s&&"mapValue"in s}function ZC(s){return(s?.mapValue?.fields||{})[Nw]?.stringValue===Cw}function Gc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ui(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Gc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gc(s.arrayValue.values[n]);return e}return{...s}}function eR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===JC}class Gs{constructor(e){this.value=e}static empty(){return new Gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!ld(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gc(n)}setAll(e){let n=Es.emptyPath(),a={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,a,l),a={},l=[],n=p.popLast()}d?a[p.lastSegment()]=Gc(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,l)}delete(e){const n=this.field(e.popLast());ld(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return la(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=n.mapValue.fields[e.get(a)];ld(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,a){Ui(n,((l,u)=>e[l]=u));for(const l of a)delete e[l]}clone(){return new Gs(Gc(this.value))}}function Rw(s){const e=[];return Ui(s.fields,((n,a)=>{const l=new Es([n]);if(ld(a)){const u=Rw(a.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new nr(e)}class Is{constructor(e,n,a,l,u,d,p){this.key=e,this.documentType=n,this.version=a,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Is(e,0,Mt.min(),Mt.min(),Mt.min(),Gs.empty(),0)}static newFoundDocument(e,n,a,l){return new Is(e,1,n,Mt.min(),a,l,0)}static newNoDocument(e,n){return new Is(e,2,n,Mt.min(),Mt.min(),Gs.empty(),0)}static newUnknownDocument(e,n){return new Is(e,3,n,Mt.min(),Mt.min(),Gs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Mt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Is&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Is(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ed{constructor(e,n){this.position=e,this.inclusive=n}}function Z1(s,e,n){let a=0;for(let l=0;l<s.position.length;l++){const u=e[l],d=s.position[l];if(u.field.isKeyField()?a=yt.comparator(yt.fromName(d.referenceValue),n.key):a=Al(d,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function e2(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!la(s.position[n],e.position[n]))return!1;return!0}class ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function tR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class Aw{}class hs extends Aw{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new sR(e,n,a):n==="array-contains"?new iR(e,a):n==="in"?new oR(e,a):n==="not-in"?new lR(e,a):n==="array-contains-any"?new cR(e,a):new hs(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new rR(e,a):new aR(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Al(n,this.value)):n!==null&&Pi(this.value)===Pi(n)&&this.matchesComparison(Al(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vr extends Aw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vr(e,n)}matches(e){return Iw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Iw(s){return s.op==="and"}function Mw(s){return nR(s)&&Iw(s)}function nR(s){for(const e of s.filters)if(e instanceof Vr)return!1;return!0}function Yp(s){if(s instanceof hs)return s.field.canonicalString()+s.op.toString()+Il(s.value);if(Mw(s))return s.filters.map((e=>Yp(e))).join(",");{const e=s.filters.map((n=>Yp(n))).join(",");return`${s.op}(${e})`}}function Dw(s,e){return s instanceof hs?(function(a,l){return l instanceof hs&&a.op===l.op&&a.field.isEqual(l.field)&&la(a.value,l.value)})(s,e):s instanceof Vr?(function(a,l){return l instanceof Vr&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((u,d,p)=>u&&Dw(d,l.filters[p])),!0):!1})(s,e):void Nt(19439)}function Pw(s){return s instanceof hs?(function(n){return`${n.field.canonicalString()} ${n.op} ${Il(n.value)}`})(s):s instanceof Vr?(function(n){return n.op.toString()+" {"+n.getFilters().map(Pw).join(" ,")+"}"})(s):"Filter"}class sR extends hs{constructor(e,n,a){super(e,n,a),this.key=yt.fromName(a.referenceValue)}matches(e){const n=yt.comparator(e.key,this.key);return this.matchesComparison(n)}}class rR extends hs{constructor(e,n){super(e,"in",n),this.keys=Lw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class aR extends hs{constructor(e,n){super(e,"not-in",n),this.keys=Lw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Lw(s,e){return(e.arrayValue?.values||[]).map((n=>yt.fromName(n.referenceValue)))}class iR extends hs{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vg(n)&&iu(n.arrayValue,this.value)}}class oR extends hs{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&iu(this.value.arrayValue,n)}}class lR extends hs{constructor(e,n){super(e,"not-in",n)}matches(e){if(iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!iu(this.value.arrayValue,n)}}class cR extends hs{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>iu(this.value.arrayValue,a)))}}class uR{constructor(e,n=null,a=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function t2(s,e=null,n=[],a=[],l=null,u=null,d=null){return new uR(s,e,n,a,l,u,d)}function Bg(s){const e=Lt(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>Yp(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Fd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>Il(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>Il(a))).join(",")),e.Te=n}return e.Te}function Ug(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!tR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Dw(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!e2(s.startAt,e.startAt)&&e2(s.endAt,e.endAt)}function Qp(s){return yt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Fl{constructor(e,n=null,a=[],l=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function hR(s,e,n,a,l,u,d,p){return new Fl(s,e,n,a,l,u,d,p)}function zg(s){return new Fl(s)}function n2(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function dR(s){return yt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Ow(s){return s.collectionGroup!==null}function Kc(s){const e=Lt(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new ps(Es.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new ou(u,a))})),n.has(Es.keyField().canonicalString())||e.Ie.push(new ou(Es.keyField(),a))}return e.Ie}function aa(s){const e=Lt(s);return e.Ee||(e.Ee=fR(e,Kc(s))),e.Ee}function fR(s,e){if(s.limitType==="F")return t2(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new ou(l.field,u)}));const n=s.endAt?new Ed(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Ed(s.startAt.position,s.startAt.inclusive):null;return t2(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function Xp(s,e){const n=s.filters.concat([e]);return new Fl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function mR(s,e){const n=s.explicitOrderBy.concat([e]);return new Fl(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Jp(s,e,n){return new Fl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Hd(s,e){return Ug(aa(s),aa(e))&&s.limitType===e.limitType}function Vw(s){return`${Bg(aa(s))}|lt:${s.limitType}`}function yl(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((l=>Pw(l))).join(", ")}]`),Fd(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((l=>Il(l))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((l=>Il(l))).join(",")),`Target(${a})`})(aa(s))}; limitType=${s.limitType})`}function $d(s,e){return e.isFoundDocument()&&(function(a,l){const u=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):yt.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,l){for(const u of Kc(a))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,l){for(const u of a.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(a,l){return!(a.startAt&&!(function(d,p,g){const y=Z1(d,p,g);return d.inclusive?y<=0:y<0})(a.startAt,Kc(a),l)||a.endAt&&!(function(d,p,g){const y=Z1(d,p,g);return d.inclusive?y>=0:y>0})(a.endAt,Kc(a),l))})(s,e)}function pR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Bw(s){return(e,n)=>{let a=!1;for(const l of Kc(s)){const u=gR(l,e,n);if(u!==0)return u;a=a||l.field.isKeyField()}return 0}}function gR(s,e,n){const a=s.field.isKeyField()?yt.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Al(g,y):Nt(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Nt(19790,{direction:s.dir})}}class No{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[l,u]of a)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[n]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,((n,a)=>{for(const[l,u]of a)e(l,u)}))}isEmpty(){return _w(this.inner)}size(){return this.innerSize}}const yR=new Kn(yt.comparator);function Ba(){return yR}const Uw=new Kn(yt.comparator);function Fc(...s){let e=Uw;for(const n of s)e=e.insert(n.key,n);return e}function zw(s){let e=Uw;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function po(){return Yc()}function Fw(){return Yc()}function Yc(){return new No((s=>s.toString()),((s,e)=>s.isEqual(e)))}const vR=new Kn(yt.comparator),bR=new ps(yt.comparator);function tn(...s){let e=bR;for(const n of s)e=e.add(n);return e}const xR=new ps(en);function wR(){return xR}function Fg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(e)?"-0":e}}function qw(s){return{integerValue:""+s}}function _R(s,e){return WC(e)?qw(e):Fg(s,e)}class Wd{constructor(){this._=void 0}}function kR(s,e,n){return s instanceof lu?(function(l,u){const d={fields:{[Ew]:{stringValue:Tw},[Sw]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Og(u)&&(u=qd(u)),u&&(d.fields[jw]=u),{mapValue:d}})(n,e):s instanceof cu?$w(s,e):s instanceof uu?Ww(s,e):(function(l,u){const d=Hw(l,u),p=s2(d)+s2(l.Ae);return Kp(d)&&Kp(l.Ae)?qw(p):Fg(l.serializer,p)})(s,e)}function TR(s,e,n){return s instanceof cu?$w(s,e):s instanceof uu?Ww(s,e):n}function Hw(s,e){return s instanceof jd?(function(a){return Kp(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class lu extends Wd{}class cu extends Wd{constructor(e){super(),this.elements=e}}function $w(s,e){const n=Gw(e);for(const a of s.elements)n.some((l=>la(l,a)))||n.push(a);return{arrayValue:{values:n}}}class uu extends Wd{constructor(e){super(),this.elements=e}}function Ww(s,e){let n=Gw(e);for(const a of s.elements)n=n.filter((l=>!la(l,a)));return{arrayValue:{values:n}}}class jd extends Wd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function s2(s){return ss(s.integerValue||s.doubleValue)}function Gw(s){return Vg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class ER{constructor(e,n){this.field=e,this.transform=n}}function jR(s,e){return s.field.isEqual(e.field)&&(function(a,l){return a instanceof cu&&l instanceof cu||a instanceof uu&&l instanceof uu?Rl(a.elements,l.elements,la):a instanceof jd&&l instanceof jd?la(a.Ae,l.Ae):a instanceof lu&&l instanceof lu})(s.transform,e.transform)}class SR{constructor(e,n){this.version=e,this.transformResults=n}}class gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Gd{}function Kw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new qg(s.key,gr.none()):new xu(s.key,s.data,gr.none());{const n=s.data,a=Gs.empty();let l=new ps(Es.comparator);for(let u of e.fields)if(!l.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?a.delete(u):a.set(u,d),l=l.add(u)}return new zi(s.key,a,new nr(l.toArray()),gr.none())}}function NR(s,e,n){s instanceof xu?(function(l,u,d){const p=l.value.clone(),g=a2(l.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof zi?(function(l,u,d){if(!cd(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=a2(l.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(Yw(l)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Qc(s,e,n,a){return s instanceof xu?(function(u,d,p,g){if(!cd(u.precondition,d))return p;const y=u.value.clone(),x=i2(u.fieldTransforms,g,d);return y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,a):s instanceof zi?(function(u,d,p,g){if(!cd(u.precondition,d))return p;const y=i2(u.fieldTransforms,g,d),x=d.data;return x.setAll(Yw(u)),x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((k=>k.field)))})(s,e,n,a):(function(u,d,p){return cd(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function CR(s,e){let n=null;for(const a of s.fieldTransforms){const l=e.data.field(a.field),u=Hw(a.transform,l||null);u!=null&&(n===null&&(n=Gs.empty()),n.set(a.field,u))}return n||null}function r2(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&Rl(a,l,((u,d)=>jR(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class xu extends Gd{constructor(e,n,a,l=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class zi extends Gd{constructor(e,n,a,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Yw(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function a2(s,e,n){const a=new Map;bn(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],d=u.transform,p=e.data.field(u.field);a.set(u.field,TR(d,p,n[l]))}return a}function i2(s,e,n){const a=new Map;for(const l of s){const u=l.transform,d=n.data.field(l.field);a.set(l.field,kR(u,d,e))}return a}class qg extends Gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RR extends Gd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class AR{constructor(e,n,a,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&NR(u,e,a[l])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=Qc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=Qc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=Fw();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(l.key)?null:p;const g=Kw(d,p);g!==null&&a.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Mt.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),tn())}isEqual(e){return this.batchId===e.batchId&&Rl(this.mutations,e.mutations,((n,a)=>r2(n,a)))&&Rl(this.baseMutations,e.baseMutations,((n,a)=>r2(n,a)))}}class Hg{constructor(e,n,a,l){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=l}static from(e,n,a){bn(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let l=(function(){return vR})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,a[d].version);return new Hg(e,n,a,l)}}class IR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class MR{constructor(e,n){this.count=e,this.unchangedNames=n}}var us,cn;function DR(s){switch(s){case _e.OK:return Nt(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return Nt(15467,{code:s})}}function Qw(s){if(s===void 0)return Va("GRPC error has no .code"),_e.UNKNOWN;switch(s){case us.OK:return _e.OK;case us.CANCELLED:return _e.CANCELLED;case us.UNKNOWN:return _e.UNKNOWN;case us.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case us.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case us.INTERNAL:return _e.INTERNAL;case us.UNAVAILABLE:return _e.UNAVAILABLE;case us.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case us.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case us.NOT_FOUND:return _e.NOT_FOUND;case us.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case us.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case us.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case us.ABORTED:return _e.ABORTED;case us.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case us.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case us.DATA_LOSS:return _e.DATA_LOSS;default:return Nt(39323,{code:s})}}(cn=us||(us={}))[cn.OK=0]="OK",cn[cn.CANCELLED=1]="CANCELLED",cn[cn.UNKNOWN=2]="UNKNOWN",cn[cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cn[cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cn[cn.NOT_FOUND=5]="NOT_FOUND",cn[cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",cn[cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",cn[cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",cn[cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cn[cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cn[cn.ABORTED=10]="ABORTED",cn[cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",cn[cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",cn[cn.INTERNAL=13]="INTERNAL",cn[cn.UNAVAILABLE=14]="UNAVAILABLE",cn[cn.DATA_LOSS=15]="DATA_LOSS";function PR(){return new TextEncoder}const LR=new Ci([4294967295,4294967295],0);function o2(s){const e=PR().encode(s),n=new hw;return n.update(e),new Uint8Array(n.digest())}function l2(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ci([n,a],0),new Ci([l,u],0)]}class $g{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new qc(`Invalid padding: ${n}`);if(a<0)throw new qc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new qc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new qc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ci.fromNumber(this.ge)}ye(e,n,a){let l=e.add(n.multiply(Ci.fromNumber(a)));return l.compare(LR)===1&&(l=new Ci([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=o2(e),[a,l]=l2(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,l,u);if(!this.we(d))return!1}return!0}static create(e,n,a){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new $g(u,l,n);return a.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=o2(e),[a,l]=l2(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,l,u);this.be(d)}}be(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class qc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Kd{constructor(e,n,a,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const l=new Map;return l.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Kd(Mt.min(),l,new Kn(en),Ba(),tn())}}class wu{constructor(e,n,a,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new wu(a,n,tn(),tn(),tn())}}class ud{constructor(e,n,a,l){this.Se=e,this.removedTargetIds=n,this.key=a,this.De=l}}class Xw{constructor(e,n){this.targetId=e,this.Ce=n}}class Jw{constructor(e,n,a=js.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=l}}class c2{constructor(){this.ve=0,this.Fe=u2(),this.Me=js.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tn(),n=tn(),a=tn();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:a=a.add(l);break;default:Nt(38017,{changeType:u})}})),new wu(this.Me,this.xe,e,n,a)}Ke(){this.Oe=!1,this.Fe=u2()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,bn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class OR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ba(),this.He=$h(),this.Je=$h(),this.Ze=new Kn(en)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Nt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,a=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Qp(u))if(a===0){const d=new yt(u.path);this.et(n,d,Is.newNoDocument(d,Mt.min()))}else bn(a===1,20013,{expectedCount:a});else{const d=this._t(n);if(d!==a){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:u=0}=n;let d,p;try{d=Di(a).toUint8Array()}catch(g){if(g instanceof kw)return Cl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new $g(d,l,u)}catch(g){return Cl(g instanceof qc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let l=0;return a.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&Qp(p.target)){const g=new yt(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Is.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let a=tn();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(a=a.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new Kd(e,n,this.Ze,this.je,a);return this.je=Ba(),this.He=$h(),this.Je=$h(),this.Ze=new Kn(en),l}Ye(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,a),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new c2,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ps(en),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ps(en),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||st("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new c2),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function $h(){return new Kn(yt.comparator)}function u2(){return new Kn(yt.comparator)}const VR={asc:"ASCENDING",desc:"DESCENDING"},BR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UR={and:"AND",or:"OR"};class zR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zp(s,e){return s.useProto3Json||Fd(e)?e:{value:e}}function Sd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function FR(s,e){return Sd(s,e.toTimestamp())}function ia(s){return bn(!!s,49232),Mt.fromTimestamp((function(n){const a=Mi(n);return new dt(a.seconds,a.nanos)})(s))}function Wg(s,e){return eg(s,e).canonicalString()}function eg(s,e){const n=(function(l){return new Cn(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function e_(s){const e=Cn.fromString(s);return bn(a_(e),10190,{key:e.toString()}),e}function tg(s,e){return Wg(s.databaseId,e.path)}function gp(s,e){const n=e_(e);if(n.get(1)!==s.databaseId.projectId)throw new Qe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Qe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new yt(n_(n))}function t_(s,e){return Wg(s.databaseId,e)}function qR(s){const e=e_(s);return e.length===4?Cn.emptyPath():n_(e)}function ng(s){return new Cn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function n_(s){return bn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function h2(s,e,n){return{name:tg(s,e),fields:n.value.mapValue.fields}}function HR(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Nt(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,x){return y.useProto3Json?(bn(x===void 0||typeof x=="string",58123),js.fromBase64String(x||"")):(bn(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),js.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const x=y.code===void 0?_e.UNKNOWN:Qw(y.code);return new Qe(x,y.message||"")})(d);n=new Jw(a,l,u,p||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const l=gp(s,a.document.name),u=ia(a.document.updateTime),d=a.document.createTime?ia(a.document.createTime):Mt.min(),p=new Gs({mapValue:{fields:a.document.fields}}),g=Is.newFoundDocument(l,u,d,p),y=a.targetIds||[],x=a.removedTargetIds||[];n=new ud(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const l=gp(s,a.document),u=a.readTime?ia(a.readTime):Mt.min(),d=Is.newNoDocument(l,u),p=a.removedTargetIds||[];n=new ud([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const l=gp(s,a.document),u=a.removedTargetIds||[];n=new ud([],u,l,null)}else{if(!("filter"in e))return Nt(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:l=0,unchangedNames:u}=a,d=new MR(l,u),p=a.targetId;n=new Xw(p,d)}}return n}function $R(s,e){let n;if(e instanceof xu)n={update:h2(s,e.key,e.value)};else if(e instanceof qg)n={delete:tg(s,e.key)};else if(e instanceof zi)n={update:h2(s,e.key,e.data),updateMask:eA(e.fieldMask)};else{if(!(e instanceof RR))return Nt(16599,{dt:e.type});n={verify:tg(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,d){const p=d.transform;if(p instanceof lu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof cu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof uu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof jd)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Nt(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:FR(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Nt(27497)})(s,e.precondition)),n}function WR(s,e){return s&&s.length>0?(bn(e!==void 0,14353),s.map((n=>(function(l,u){let d=l.updateTime?ia(l.updateTime):ia(u);return d.isEqual(Mt.min())&&(d=ia(u)),new SR(d,l.transformResults||[])})(n,e)))):[]}function GR(s,e){return{documents:[t_(s,e.path)]}}function KR(s,e){const n={structuredQuery:{}},a=e.path;let l;e.collectionGroup!==null?(l=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=t_(s,l);const u=(function(y){if(y.length!==0)return r_(Vr.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((x=>(function(j){return{field:vl(j.field),direction:XR(j.dir)}})(x)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Zp(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function YR(s){let e=qR(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let l=null;if(a>0){bn(a===1,65062);const x=n.from[0];x.allDescendants?l=x.collectionId:e=e.child(x.collectionId)}let u=[];n.where&&(u=(function(k){const j=s_(k);return j instanceof Vr&&Mw(j)?j.getFilters():[j]})(n.where));let d=[];n.orderBy&&(d=(function(k){return k.map((j=>(function($){return new ou(bl($.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(j)))})(n.orderBy));let p=null;n.limit&&(p=(function(k){let j;return j=typeof k=="object"?k.value:k,Fd(j)?null:j})(n.limit));let g=null;n.startAt&&(g=(function(k){const j=!!k.before,P=k.values||[];return new Ed(P,j)})(n.startAt));let y=null;return n.endAt&&(y=(function(k){const j=!k.before,P=k.values||[];return new Ed(P,j)})(n.endAt)),hR(e,l,d,u,p,"F",g,y)}function QR(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nt(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function s_(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=bl(n.unaryFilter.field);return hs.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=bl(n.unaryFilter.field);return hs.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=bl(n.unaryFilter.field);return hs.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=bl(n.unaryFilter.field);return hs.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Nt(61313);default:return Nt(60726)}})(s):s.fieldFilter!==void 0?(function(n){return hs.create(bl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Nt(58110);default:return Nt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Vr.create(n.compositeFilter.filters.map((a=>s_(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Nt(1026)}})(n.compositeFilter.op))})(s):Nt(30097,{filter:s})}function XR(s){return VR[s]}function JR(s){return BR[s]}function ZR(s){return UR[s]}function vl(s){return{fieldPath:s.canonicalString()}}function bl(s){return Es.fromServerFormat(s.fieldPath)}function r_(s){return s instanceof hs?(function(n){if(n.op==="=="){if(J1(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NAN"}};if(X1(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(J1(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NOT_NAN"}};if(X1(n.value))return{unaryFilter:{field:vl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vl(n.field),op:JR(n.op),value:n.value}}})(s):s instanceof Vr?(function(n){const a=n.getFilters().map((l=>r_(l)));return a.length===1?a[0]:{compositeFilter:{op:ZR(n.op),filters:a}}})(s):Nt(54877,{filter:s})}function eA(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function a_(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function i_(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class ji{constructor(e,n,a,l,u=Mt.min(),d=Mt.min(),p=js.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tA{constructor(e){this.yt=e}}function nA(s){const e=YR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Jp(e,e.limit,"L"):e}class sA{constructor(){this.Sn=new rA}addToCollectionParentIndex(e,n){return this.Sn.add(n),je.resolve()}getCollectionParents(e,n){return je.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return je.resolve()}deleteFieldIndex(e,n){return je.resolve()}deleteAllFieldIndexes(e){return je.resolve()}createTargetIndexes(e,n){return je.resolve()}getDocumentsMatchingTarget(e,n){return je.resolve(null)}getIndexType(e,n){return je.resolve(0)}getFieldIndexes(e,n){return je.resolve([])}getNextCollectionGroupToUpdate(e){return je.resolve(null)}getMinOffset(e,n){return je.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,n){return je.resolve(Ii.min())}updateCollectionGroup(e,n,a){return je.resolve()}updateIndexEntries(e,n){return je.resolve()}}class rA{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),l=this.index[n]||new ps(Cn.comparator),u=!l.has(a);return this.index[n]=l.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),l=this.index[n];return l&&l.has(a)}getEntries(e){return(this.index[e]||new ps(Cn.comparator)).toArray()}}const d2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o_=41943040;class Ws{static withCacheSize(e){return new Ws(e,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}Ws.DEFAULT_COLLECTION_PERCENTILE=10,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ws.DEFAULT=new Ws(o_,Ws.DEFAULT_COLLECTION_PERCENTILE,Ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ws.DISABLED=new Ws(-1,0,0);class Ml{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ml(0)}static ar(){return new Ml(-1)}}const f2="LruGarbageCollector",aA=1048576;function m2([s,e],[n,a]){const l=en(s,n);return l===0?en(e,a):l}class iA{constructor(e){this.Pr=e,this.buffer=new ps(m2),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();m2(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class oA{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){st(f2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){zl(n)?st(f2,"Ignoring IndexedDB error during garbage collection: ",n):await Ul(n)}await this.Ar(3e5)}))}}class lA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return je.resolve(zd.ce);const a=new iA(n);return this.Vr.forEachTarget(e,(l=>a.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>a.Er(l))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(st("LruGarbageCollector","Garbage collection skipped; disabled"),je.resolve(d2)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),d2):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let a,l,u,d,p,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),l=this.params.maximumSequenceNumbersToCollect):l=k,d=Date.now(),this.nthSequenceNumber(e,l)))).next((k=>(a=k,p=Date.now(),this.removeTargets(e,a,n)))).next((k=>(u=k,g=Date.now(),this.removeOrphanedDocuments(e,a)))).next((k=>(y=Date.now(),gl()<=Zt.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${k} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),je.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:k}))))}}function cA(s,e){return new lA(s,e)}class uA{constructor(){this.changes=new No((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Is.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?je.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class dA{constructor(e,n,a,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(a=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(a!==null&&Qc(a.mutation,l,nr.empty(),dt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,tn()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=tn()){const l=po();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,a).next((u=>{let d=Fc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const a=po();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,tn())))}populateOverlays(e,n,a){const l=[];return a.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,a,l){let u=Ba();const d=Yc(),p=(function(){return Yc()})();return n.forEach(((g,y)=>{const x=a.get(y.key);l.has(y.key)&&(x===void 0||x.mutation instanceof zi)?u=u.insert(y.key,y):x!==void 0?(d.set(y.key,x.mutation.getFieldMask()),Qc(x.mutation,y,x.mutation.getFieldMask(),dt.now())):d.set(y.key,nr.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,x)=>d.set(y,x))),n.forEach(((y,x)=>p.set(y,new hA(x,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const a=Yc();let l=new Kn(((d,p)=>d-p)),u=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let x=a.get(g)||nr.empty();x=p.applyToLocalView(y,x),a.set(g,x);const k=(l.get(p.batchId)||tn()).add(g);l=l.insert(p.batchId,k)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,x=g.value,k=Fw();x.forEach((j=>{if(!u.has(j)){const P=Kw(n.get(j),a.get(j));P!==null&&k.set(j,P),u=u.add(j)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,k))}return je.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,l){return dR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ow(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,l):this.getDocumentsMatchingCollectionQuery(e,n,a,l)}getNextDocuments(e,n,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,l-u.size):je.resolve(po());let p=su,g=u;return d.next((y=>je.forEach(y,((x,k)=>(p<k.largestBatchId&&(p=k.largestBatchId),u.get(x)?je.resolve():this.remoteDocumentCache.getEntry(e,x).next((j=>{g=g.insert(x,j)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,tn()))).next((x=>({batchId:p,changes:zw(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new yt(n)).next((a=>{let l=Fc();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,l){const u=n.collectionGroup;let d=Fc();return this.indexManager.getCollectionParents(e,u).next((p=>je.forEach(p,(g=>{const y=(function(k,j){return new Fl(j,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,a,l).next((x=>{x.forEach(((k,j)=>{d=d.insert(k,j)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,a,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,l)))).next((d=>{u.forEach(((g,y)=>{const x=y.getKey();d.get(x)===null&&(d=d.insert(x,Is.newInvalidDocument(x)))}));let p=Fc();return d.forEach(((g,y)=>{const x=u.get(g);x!==void 0&&Qc(x.mutation,y,nr.empty(),dt.now()),$d(n,y)&&(p=p.insert(g,y))})),p}))}}class fA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return je.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ia(l.createTime)}})(n)),je.resolve()}getNamedQuery(e,n){return je.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:nA(l.bundledQuery),readTime:ia(l.readTime)}})(n)),je.resolve()}}class mA{constructor(){this.overlays=new Kn(yt.comparator),this.Lr=new Map}getOverlay(e,n){return je.resolve(this.overlays.get(n))}getOverlays(e,n){const a=po();return je.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&a.set(l,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((l,u)=>{this.bt(e,n,u)})),je.resolve()}removeOverlaysForBatchId(e,n,a){const l=this.Lr.get(a);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),je.resolve()}getOverlaysForCollection(e,n,a){const l=po(),u=n.length+1,d=new yt(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>a&&l.set(g.getKey(),g)}return je.resolve(l)}getOverlaysForCollectionGroup(e,n,a,l){let u=new Kn(((y,x)=>y-x));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>a){let x=u.get(y.largestBatchId);x===null&&(x=po(),u=u.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const p=po(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>p.set(y,x))),!(p.size()>=l)););return je.resolve(p)}bt(e,n,a){const l=this.overlays.get(a.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(a.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new IR(n,a));let u=this.Lr.get(n);u===void 0&&(u=tn(),this.Lr.set(n,u)),this.Lr.set(n,u.add(a.key))}}class pA{constructor(){this.sessionToken=js.EMPTY_BYTE_STRING}getSessionToken(e){return je.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,je.resolve()}}class Gg{constructor(){this.kr=new ps(ys.Kr),this.qr=new ps(ys.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const a=new ys(e,n);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Wr(new ys(e,n))}Qr(e,n){e.forEach((a=>this.removeReference(a,n)))}Gr(e){const n=new yt(new Cn([])),a=new ys(n,e),l=new ys(n,e+1),u=[];return this.qr.forEachInRange([a,l],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new yt(new Cn([])),a=new ys(n,e),l=new ys(n,e+1);let u=tn();return this.qr.forEachInRange([a,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new ys(e,0),a=this.kr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class ys{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return yt.comparator(e.key,n.key)||en(e.Hr,n.Hr)}static Ur(e,n){return en(e.Hr,n.Hr)||yt.comparator(e.key,n.key)}}class gA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ps(ys.Kr)}checkEmpty(e){return je.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new AR(u,n,a,l);this.mutationQueue.push(d);for(const p of l)this.Jr=this.Jr.add(new ys(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return je.resolve(d)}lookupMutationBatch(e,n){return je.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,l=this.Xr(a),u=l<0?0:l;return je.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return je.resolve(this.mutationQueue.length===0?Lg:this.Yn-1)}getAllMutationBatches(e){return je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new ys(n,0),l=new ys(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,l],(d=>{const p=this.Zr(d.Hr);u.push(p)})),je.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new ps(en);return n.forEach((l=>{const u=new ys(l,0),d=new ys(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{a=a.add(p.Hr)}))})),je.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,l=a.length+1;let u=a;yt.isDocumentKey(u)||(u=u.child(""));const d=new ys(new yt(u),0);let p=new ps(en);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!a.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),d),je.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((a=>{const l=this.Zr(a);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){bn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return je.forEach(n.mutations,(l=>{const u=new ys(l.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,n){const a=new ys(n,0),l=this.Jr.firstAfterOrEqual(a);return je.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,je.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class yA{constructor(e){this.ti=e,this.docs=(function(){return new Kn(yt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,l=this.docs.get(a),u=l?l.size:0,d=this.ti(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return je.resolve(a?a.document.mutableCopy():Is.newInvalidDocument(n))}getEntries(e,n){let a=Ba();return n.forEach((l=>{const u=this.docs.get(l);a=a.insert(l,u?u.document.mutableCopy():Is.newInvalidDocument(l))})),je.resolve(a)}getDocumentsMatchingQuery(e,n,a,l){let u=Ba();const d=n.path,p=new yt(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||FC(zC(x),a)<=0||(l.has(x.key)||$d(n,x))&&(u=u.insert(x.key,x.mutableCopy()))}return je.resolve(u)}getAllFromCollectionGroup(e,n,a,l){Nt(9500)}ni(e,n){return je.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new vA(this)}getSize(e){return je.resolve(this.size)}}class vA extends uA{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(a)})),je.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class bA{constructor(e){this.persistence=e,this.ri=new No((n=>Bg(n)),Ug),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.ii=0,this.si=new Gg,this.targetCount=0,this.oi=Ml._r()}forEachTarget(e,n){return this.ri.forEach(((a,l)=>n(l))),je.resolve()}getLastRemoteSnapshotVersion(e){return je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return je.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),je.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.ii&&(this.ii=n),je.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ml(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,je.resolve()}updateTargetData(e,n){return this.lr(n),je.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,je.resolve()}removeTargets(e,n,a){let l=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&a.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),je.waitFor(u).next((()=>l))}getTargetCount(e){return je.resolve(this.targetCount)}getTargetData(e,n){const a=this.ri.get(n)||null;return je.resolve(a)}addMatchingKeys(e,n,a){return this.si.$r(n,a),je.resolve()}removeMatchingKeys(e,n,a){this.si.Qr(n,a);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),je.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),je.resolve()}getMatchingKeysForTargetId(e,n){const a=this.si.jr(n);return je.resolve(a)}containsKey(e,n){return je.resolve(this.si.containsKey(n))}}class l_{constructor(e,n){this._i={},this.overlays={},this.ai=new zd(0),this.ui=!1,this.ui=!0,this.ci=new pA,this.referenceDelegate=e(this),this.li=new bA(this),this.indexManager=new sA,this.remoteDocumentCache=(function(l){return new yA(l)})((a=>this.referenceDelegate.hi(a))),this.serializer=new tA(n),this.Pi=new fA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this._i[e.toKey()];return a||(a=new gA(n,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,a){st("MemoryPersistence","Starting transaction:",e);const l=new xA(this.ai.next());return this.referenceDelegate.Ti(),a(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return je.or(Object.values(this._i).map((a=>()=>a.containsKey(e,n))))}}class xA extends HC{constructor(e){super(),this.currentSequenceNumber=e}}class Kg{constructor(e){this.persistence=e,this.Ri=new Gg,this.Ai=null}static Vi(e){return new Kg(e)}get di(){if(this.Ai)return this.Ai;throw Nt(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.di.delete(a.toString()),je.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.di.add(a.toString()),je.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),je.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return je.forEach(this.di,(a=>{const l=yt.fromPath(a);return this.mi(e,l).next((u=>{u||n.removeEntry(l,Mt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((a=>{a?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return je.or([()=>je.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Nd{constructor(e,n){this.persistence=e,this.fi=new No((a=>GC(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=cA(this,n)}static Vi(e,n){return new Nd(e,n)}Ti(){}Ii(e){return je.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((l=>a+l))))}pr(e){let n=0;return this.mr(e,(a=>{n++})).next((()=>n))}mr(e,n){return je.forEach(this.fi,((a,l)=>this.wr(e,a,l).next((u=>u?je.resolve():n(l)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(a++,u.removeEntry(d,Mt.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),je.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),je.resolve()}removeReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),je.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),je.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=od(e.data.value)),n}wr(e,n,a){return je.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return je.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Yg{constructor(e,n,a,l){this.targetId=e,this.fromCache=n,this.Ts=a,this.Is=l}static Es(e,n){let a=tn(),l=tn();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Yg(e,n.fromCache,a,l)}}class wA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _A{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Kj()?8:$C(Ms())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,l){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,l,a).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new wA;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,a,l){return a.documentReadCount<this.Vs?(gl()<=Zt.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",yl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),je.resolve()):(gl()<=Zt.DEBUG&&st("QueryEngine","Query:",yl(n),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.ds*l?(gl()<=Zt.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",yl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,aa(n))):je.resolve())}gs(e,n){if(n2(n))return je.resolve(null);let a=aa(n);return this.indexManager.getIndexType(e,a).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Jp(n,null,"F"),a=aa(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const d=tn(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,a).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,d,g.readTime)?this.gs(e,Jp(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,a,l){return n2(n)||l.isEqual(Mt.min())?je.resolve(null):this.fs.getDocuments(e,a).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,a,l)?je.resolve(null):(gl()<=Zt.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),yl(n)),this.Ds(e,d,n,UC(l,su)).next((p=>p)))}))}bs(e,n){let a=new ps(Bw(e));return n.forEach(((l,u)=>{$d(e,u)&&(a=a.add(u))})),a}Ss(e,n,a,l){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,a){return gl()<=Zt.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",yl(n)),this.fs.getDocumentsMatchingQuery(e,n,Ii.min(),a)}Ds(e,n,a,l){return this.fs.getDocumentsMatchingQuery(e,a,l).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Qg="LocalStore",kA=3e8;class TA{constructor(e,n,a,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new Kn(en),this.Fs=new No((u=>Bg(u)),Ug),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function EA(s,e,n,a){return new TA(s,e,n,a)}async function c_(s,e){const n=Lt(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return n.mutationQueue.getAllMutationBatches(a).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const d=[],p=[];let g=tn();for(const y of l){d.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of u){p.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(a,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function jA(s,e){const n=Lt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,x){const k=y.batch,j=k.keys();let P=je.resolve();return j.forEach(($=>{P=P.next((()=>x.getEntry(g,$))).next((B=>{const L=y.docVersions.get($);bn(L!==null,48541),B.version.compareTo(L)<0&&(k.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),x.addEntry(B)))}))})),P.next((()=>p.mutationQueue.removeMutationBatch(g,k)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(p){let g=tn();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(a,l)))}))}function u_(s){const e=Lt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function SA(s,e){const n=Lt(s),a=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((x,k)=>{const j=l.get(k);if(!j)return;p.push(n.li.removeMatchingKeys(u,x.removedDocuments,k).next((()=>n.li.addMatchingKeys(u,x.addedDocuments,k))));let P=j.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(k)!==null?P=P.withResumeToken(js.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):x.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(x.resumeToken,a)),l=l.insert(k,P),(function(B,L,te){return B.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=kA?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(j,P,x)&&p.push(n.li.updateTargetData(u,P))}));let g=Ba(),y=tn();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,x))})),p.push(NA(u,d,e.documentUpdates).next((x=>{g=x.Bs,y=x.Ls}))),!a.isEqual(Mt.min())){const x=n.li.getLastRemoteSnapshotVersion(u).next((k=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));p.push(x)}return je.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=l,u)))}function NA(s,e,n){let a=tn(),l=tn();return n.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let d=Ba();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Mt.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):st(Qg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:l}}))}function CA(s,e){const n=Lt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Lg),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function RA(s,e){const n=Lt(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return n.li.getTargetData(a,e).next((u=>u?(l=u,je.resolve(l)):n.li.allocateTargetId(a).next((d=>(l=new ji(e,d,"TargetPurposeListen",a.currentSequenceNumber),n.li.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=n.vs.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(a.targetId,a),n.Fs.set(e,a.targetId)),a}))}async function sg(s,e,n){const a=Lt(s),l=a.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(d=>a.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!zl(d))throw d;st(Qg,`Failed to update sequence numbers for target ${e}: ${d}`)}a.vs=a.vs.remove(e),a.Fs.delete(l.target)}function p2(s,e,n){const a=Lt(s);let l=Mt.min(),u=tn();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,x){const k=Lt(g),j=k.Fs.get(x);return j!==void 0?je.resolve(k.vs.get(j)):k.li.getTargetData(y,x)})(a,d,aa(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>a.Cs.getDocumentsMatchingQuery(d,e,n?l:Mt.min(),n?u:tn()))).next((p=>(AA(a,pR(e),p),{documents:p,ks:u})))))}function AA(s,e,n){let a=s.Ms.get(e)||Mt.min();n.forEach(((l,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Ms.set(e,a)}class g2{constructor(){this.activeTargetIds=wR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IA{constructor(){this.vo=new g2,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,a){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new g2,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class MA{Mo(e){}shutdown(){}}const y2="ConnectivityMonitor";class v2{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){st(y2,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){st(y2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Wh=null;function rg(){return Wh===null?Wh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wh++,"0x"+Wh.toString(16)}const yp="RestConnection",DA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class PA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${a}/databases/${l}`,this.$o=this.databaseId.database===kd?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Wo(e,n,a,l,u){const d=rg(),p=this.Qo(e,n.toUriEncodedString());st(yp,`Sending RPC '${e}' ${d}:`,p,a);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),x=Vi(y);return this.zo(e,p,g,a,x).then((k=>(st(yp,`Received RPC '${e}' ${d}: `,k),k)),(k=>{throw Cl(yp,`RPC '${e}' ${d} failed with error: `,k,"url: ",p,"request:",a),k}))}jo(e,n,a,l,u,d){return this.Wo(e,n,a,l,u)}Go(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),a&&a.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const a=DA[e];let l=`${this.qo}/v1/${n}:${a}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class LA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Rs="WebChannelConnection",Pc=(s,e,n)=>{s.listen(e,(a=>{try{n(a)}catch(l){setTimeout((()=>{throw l}),0)}}))};class jl extends PA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!jl.c_){const e=pw();Pc(e,mw.STAT_EVENT,(n=>{n.stat===$p.PROXY?st(Rs,"STAT_EVENT: detected buffering proxy"):n.stat===$p.NOPROXY&&st(Rs,"STAT_EVENT: detected no buffering proxy")})),jl.c_=!0}}zo(e,n,a,l,u){const d=rg();return new Promise(((p,g)=>{const y=new dw;y.setWithCredentials(!0),y.listenOnce(fw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case id.NO_ERROR:const k=y.getResponseJson();st(Rs,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(k)),p(k);break;case id.TIMEOUT:st(Rs,`RPC '${e}' ${d} timed out`),g(new Qe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case id.HTTP_ERROR:const j=y.getStatus();if(st(Rs,`RPC '${e}' ${d} failed with status:`,j,"response text:",y.getResponseText()),j>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const $=P?.error;if($&&$.status&&$.message){const B=(function(te){const Q=te.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(Q)>=0?Q:_e.UNKNOWN})($.status);g(new Qe(B,$.message))}else g(new Qe(_e.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Qe(_e.UNAVAILABLE,"Connection failed."));break;default:Nt(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{st(Rs,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(l);st(Rs,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",x,a,15)}))}T_(e,n,a){const l=rg(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,a),p.encodeInitMessageHeaders=!0;const y=u.join("");st(Rs,`Creating RPC '${e}' stream ${l}: ${y}`,p);const x=d.createWebChannel(y,p);this.I_(x);let k=!1,j=!1;const P=new LA({Ho:$=>{j?st(Rs,`Not sending because RPC '${e}' stream ${l} is closed:`,$):(k||(st(Rs,`Opening RPC '${e}' stream ${l} transport.`),x.open(),k=!0),st(Rs,`RPC '${e}' stream ${l} sending:`,$),x.send($))},Jo:()=>x.close()});return Pc(x,zc.EventType.OPEN,(()=>{j||(st(Rs,`RPC '${e}' stream ${l} transport opened.`),P.i_())})),Pc(x,zc.EventType.CLOSE,(()=>{j||(j=!0,st(Rs,`RPC '${e}' stream ${l} transport closed`),P.o_(),this.E_(x))})),Pc(x,zc.EventType.ERROR,($=>{j||(j=!0,Cl(Rs,`RPC '${e}' stream ${l} transport errored. Name:`,$.name,"Message:",$.message),P.o_(new Qe(_e.UNAVAILABLE,"The operation could not be completed")))})),Pc(x,zc.EventType.MESSAGE,($=>{if(!j){const B=$.data[0];bn(!!B,16349);const L=B,te=L?.error||L[0]?.error;if(te){st(Rs,`RPC '${e}' stream ${l} received error:`,te);const Q=te.status;let ce=(function(Ae){const A=us[Ae];if(A!==void 0)return Qw(A)})(Q),ve=te.message;ce===void 0&&(ce=_e.INTERNAL,ve="Unknown error status: "+Q+" with message "+te.message),j=!0,P.o_(new Qe(ce,ve)),x.close()}else st(Rs,`RPC '${e}' stream ${l} received:`,B),P.__(B)}})),jl.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,a){super.Go(e,n,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return gw()}}function OA(s){return new jl(s)}function vp(){return typeof document<"u"?document:null}function Yd(s){return new zR(s,!0)}jl.c_=!1;class h_{constructor(e,n,a=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-a);l>0&&st("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const b2="PersistentStream";class d_{constructor(e,n,a,l,u,d,p,g){this.Ci=e,this.b_=a,this.S_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new h_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===_e.RESOURCE_EXHAUSTED?(Va(n.toString()),Va("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===n&&this.G_(a,l)}),(a=>{e((()=>{const l=new Qe(_e.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(e,n){const a=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return st(b2,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(st(b2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class VA extends d_{constructor(e,n,a,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,l,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=HR(this.serializer,e),a=(function(u){if(!("targetChange"in u))return Mt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Mt.min():d.readTime?ia(d.readTime):Mt.min()})(e);return this.listener.J_(n,a)}Z_(e){const n={};n.database=ng(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=Qp(g)?{documents:GR(u,g)}:{query:KR(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=Zw(u,d.resumeToken);const y=Zp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Mt.min())>0){p.readTime=Sd(u,d.snapshotVersion.toTimestamp());const y=Zp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const a=QR(this.serializer,e);a&&(n.labels=a),this.K_(n)}X_(e){const n={};n.database=ng(this.serializer),n.removeTarget=e,this.K_(n)}}class BA extends d_{constructor(e,n,a,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,l,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return bn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,bn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){bn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=WR(e.writeResults,e.commitTime),a=ia(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=ng(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>$R(this.serializer,a)))};this.K_(n)}}class UA{}class zA extends UA{constructor(e,n,a,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Qe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,eg(n,a),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Qe(_e.UNKNOWN,u.toString())}))}jo(e,n,a,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,eg(n,a),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Qe(_e.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function FA(s,e,n,a){return new zA(s,e,n,a)}class qA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Va(n),this.aa=!1):st("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const To="RemoteStore";class HA{constructor(e,n,a,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{a.enqueueAndForget((async()=>{Co(this)&&(st(To,"Restarting streams for network reachability change."),await(async function(g){const y=Lt(g);y.Ea.add(4),await _u(y),y.Va.set("Unknown"),y.Ea.delete(4),await Qd(y)})(this))}))})),this.Va=new qA(a,l)}}async function Qd(s){if(Co(s))for(const e of s.Ra)await e(!0)}async function _u(s){for(const e of s.Ra)await e(!1)}function f_(s,e){const n=Lt(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ey(n)?Zg(n):ql(n).O_()&&Jg(n,e))}function Xg(s,e){const n=Lt(s),a=ql(n);n.Ia.delete(e),a.O_()&&m_(n,e),n.Ia.size===0&&(a.O_()?a.L_():Co(n)&&n.Va.set("Unknown"))}function Jg(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Mt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ql(s).Z_(e)}function m_(s,e){s.da.$e(e),ql(s).X_(e)}function Zg(s){s.da=new OR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),ql(s).start(),s.Va.ua()}function ey(s){return Co(s)&&!ql(s).x_()&&s.Ia.size>0}function Co(s){return Lt(s).Ea.size===0}function p_(s){s.da=void 0}async function $A(s){s.Va.set("Online")}async function WA(s){s.Ia.forEach(((e,n)=>{Jg(s,e)}))}async function GA(s,e){p_(s),ey(s)?(s.Va.ha(e),Zg(s)):s.Va.set("Unknown")}async function KA(s,e,n){if(s.Va.set("Online"),e instanceof Jw&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(a){st(To,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Cd(s,a)}else if(e instanceof ud?s.da.Xe(e):e instanceof Xw?s.da.st(e):s.da.tt(e),!n.isEqual(Mt.min()))try{const a=await u_(s.localStore);n.compareTo(a)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=u.Ia.get(y);x&&u.Ia.set(y,x.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const x=u.Ia.get(g);if(!x)return;u.Ia.set(g,x.withResumeToken(js.EMPTY_BYTE_STRING,x.snapshotVersion)),m_(u,g);const k=new ji(x.target,g,y,x.sequenceNumber);Jg(u,k)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(a){st(To,"Failed to raise snapshot:",a),await Cd(s,a)}}async function Cd(s,e,n){if(!zl(e))throw e;s.Ea.add(1),await _u(s),s.Va.set("Offline"),n||(n=()=>u_(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{st(To,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Qd(s)}))}function g_(s,e){return e().catch((n=>Cd(s,n,e)))}async function Xd(s){const e=Lt(s),n=Li(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Lg;for(;YA(e);)try{const l=await CA(e.localStore,a);if(l===null){e.Ta.length===0&&n.L_();break}a=l.batchId,QA(e,l)}catch(l){await Cd(e,l)}y_(e)&&v_(e)}function YA(s){return Co(s)&&s.Ta.length<10}function QA(s,e){s.Ta.push(e);const n=Li(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function y_(s){return Co(s)&&!Li(s).x_()&&s.Ta.length>0}function v_(s){Li(s).start()}async function XA(s){Li(s).ra()}async function JA(s){const e=Li(s);for(const n of s.Ta)e.ea(n.mutations)}async function ZA(s,e,n){const a=s.Ta.shift(),l=Hg.from(a,e,n);await g_(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Xd(s)}async function eI(s,e){e&&Li(s).Y_&&await(async function(a,l){if((function(d){return DR(d)&&d!==_e.ABORTED})(l.code)){const u=a.Ta.shift();Li(a).B_(),await g_(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Xd(a)}})(s,e),y_(s)&&v_(s)}async function x2(s,e){const n=Lt(s);n.asyncQueue.verifyOperationInProgress(),st(To,"RemoteStore received new credentials");const a=Co(n);n.Ea.add(3),await _u(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qd(n)}async function tI(s,e){const n=Lt(s);e?(n.Ea.delete(2),await Qd(n)):e||(n.Ea.add(2),await _u(n),n.Va.set("Unknown"))}function ql(s){return s.ma||(s.ma=(function(n,a,l){const u=Lt(n);return u.sa(),new VA(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:$A.bind(null,s),Yo:WA.bind(null,s),t_:GA.bind(null,s),J_:KA.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),ey(s)?Zg(s):s.Va.set("Unknown")):(await s.ma.stop(),p_(s))}))),s.ma}function Li(s){return s.fa||(s.fa=(function(n,a,l){const u=Lt(n);return u.sa(),new BA(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:XA.bind(null,s),t_:eI.bind(null,s),ta:JA.bind(null,s),na:ZA.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Xd(s)):(await s.fa.stop(),s.Ta.length>0&&(st(To,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class ty{constructor(e,n,a,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=l,this.removalCallback=u,this.deferred=new Da,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,l,u){const d=Date.now()+a,p=new ty(e,n,d,l,u);return p.start(a),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ny(s,e){if(Va("AsyncQueue",`${e}: ${s}`),zl(s))return new Qe(_e.UNAVAILABLE,`${e}: ${s}`);throw s}class Sl{static emptySet(e){return new Sl(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||yt.comparator(n.key,a.key):(n,a)=>yt.comparator(n.key,a.key),this.keyedMap=Fc(),this.sortedSet=new Kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=a.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Sl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class w2{constructor(){this.ga=new Kn(yt.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Nt(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class Dl{constructor(e,n,a,l,u,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,a,l,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Dl(e,n,Sl.emptySet(n),d,a,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==a[l].type||!n[l].doc.isEqual(a[l].doc))return!1;return!0}}class nI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class sI{constructor(){this.queries=_2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const l=Lt(n),u=l.queries;l.queries=_2(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(a)}))})(this,new Qe(_e.ABORTED,"Firestore shutting down"))}}function _2(){return new No((s=>Vw(s)),Hd)}async function b_(s,e){const n=Lt(s);let a=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(a=2):(u=new nI,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=ny(d,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&sy(n)}async function x_(s,e){const n=Lt(s),a=e.query;let l=3;const u=n.queries.get(a);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function rI(s,e){const n=Lt(s);let a=!1;for(const l of e){const u=l.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(l)&&(a=!0);d.wa=l}}a&&sy(n)}function aI(s,e,n){const a=Lt(s),l=a.queries.get(e);if(l)for(const u of l.ba)u.onError(n);a.queries.delete(e)}function sy(s){s.Ca.forEach((e=>{e.next()}))}var ag,k2;(k2=ag||(ag={})).Ma="default",k2.Cache="cache";class w_{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const l of e.docChanges)l.type!==3&&a.push(l);e=new Dl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Dl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ag.Cache}}class __{constructor(e){this.key=e}}class k_{constructor(e){this.key=e}}class iI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=tn(),this.mutatedKeys=tn(),this.eu=Bw(e),this.tu=new Sl(this.eu)}get nu(){return this.Za}ru(e,n){const a=n?n.iu:new w2,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((x,k)=>{const j=l.get(x),P=$d(this.query,k)?k:null,$=!!j&&this.mutatedKeys.has(j.key),B=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let L=!1;j&&P?j.data.isEqual(P.data)?$!==B&&(a.track({type:3,doc:P}),L=!0):this.su(j,P)||(a.track({type:2,doc:P}),L=!0,(g&&this.eu(P,g)>0||y&&this.eu(P,y)<0)&&(p=!0)):!j&&P?(a.track({type:0,doc:P}),L=!0):j&&!P&&(a.track({type:1,doc:j}),L=!0,(g||y)&&(p=!0)),L&&(P?(d=d.add(P),u=B?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),a.track({type:1,doc:x})}return{tu:d,iu:a,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,k)=>(function(P,$){const B=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt(20277,{Vt:L})}};return B(P)-B($)})(x.type,k.type)||this.eu(x.doc,k.doc))),this.ou(a),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new Dl(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new w2,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=tn(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const n=[];return e.forEach((a=>{this.Ya.has(a)||n.push(new k_(a))})),this.Ya.forEach((a=>{e.has(a)||n.push(new __(a))})),n}cu(e){this.Za=e.ks,this.Ya=tn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Dl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ry="SyncEngine";class oI{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class lI{constructor(e){this.key=e,this.hu=!1}}class cI{constructor(e,n,a,l,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new No((p=>Vw(p)),Hd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Kn(yt.comparator),this.Au=new Map,this.Vu=new Gg,this.du={},this.mu=new Map,this.fu=Ml.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uI(s,e,n=!0){const a=C_(s);let l;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await T_(a,e,n,!0),l}async function hI(s,e){const n=C_(s);await T_(n,e,!0,!1)}async function T_(s,e,n,a){const l=await RA(s.localStore,aa(e)),u=l.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let p;return a&&(p=await dI(s,e,u,d==="current",l.resumeToken)),s.isPrimaryClient&&n&&f_(s.remoteStore,l),p}async function dI(s,e,n,a,l){s.pu=(k,j,P)=>(async function(B,L,te,Q){let ce=L.view.ru(te);ce.Ss&&(ce=await p2(B.localStore,L.query,!1).then((({documents:A})=>L.view.ru(A,ce))));const ve=Q&&Q.targetChanges.get(L.targetId),Ue=Q&&Q.targetMismatches.get(L.targetId)!=null,Ae=L.view.applyChanges(ce,B.isPrimaryClient,ve,Ue);return E2(B,L.targetId,Ae.au),Ae.snapshot})(s,k,j,P);const u=await p2(s.localStore,e,!0),d=new iI(e,u.ks),p=d.ru(u.documents),g=wu.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",l),y=d.applyChanges(p,s.isPrimaryClient,g);E2(s,n,y.au);const x=new oI(e,n,d);return s.Tu.set(e,x),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function fI(s,e,n){const a=Lt(s),l=a.Tu.get(e),u=a.Iu.get(l.targetId);if(u.length>1)return a.Iu.set(l.targetId,u.filter((d=>!Hd(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await sg(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),n&&Xg(a.remoteStore,l.targetId),ig(a,l.targetId)})).catch(Ul)):(ig(a,l.targetId),await sg(a.localStore,l.targetId,!0))}async function mI(s,e){const n=Lt(s),a=n.Tu.get(e),l=n.Iu.get(a.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),Xg(n.remoteStore,a.targetId))}async function pI(s,e,n){const a=_I(s);try{const l=await(function(d,p){const g=Lt(d),y=dt.now(),x=p.reduce(((P,$)=>P.add($.key)),tn());let k,j;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let $=Ba(),B=tn();return g.xs.getEntries(P,x).next((L=>{$=L,$.forEach(((te,Q)=>{Q.isValidDocument()||(B=B.add(te))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,$))).next((L=>{k=L;const te=[];for(const Q of p){const ce=CR(Q,k.get(Q.key).overlayedDocument);ce!=null&&te.push(new zi(Q.key,ce,Rw(ce.value.mapValue),gr.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,te,p)})).next((L=>{j=L;const te=L.applyToLocalDocumentSet(k,B);return g.documentOverlayCache.saveOverlays(P,L.batchId,te)}))})).then((()=>({batchId:j.batchId,changes:zw(k)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new Kn(en)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(a,l.batchId,n),await ku(a,l.changes),await Xd(a.remoteStore)}catch(l){const u=ny(l,"Failed to persist write");n.reject(u)}}async function E_(s,e){const n=Lt(s);try{const a=await SA(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=n.Au.get(u);d&&(bn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?bn(d.hu,14607):l.removedDocuments.size>0&&(bn(d.hu,42227),d.hu=!1))})),await ku(n,a,e)}catch(a){await Ul(a)}}function T2(s,e,n){const a=Lt(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const l=[];a.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=Lt(d);g.onlineState=p;let y=!1;g.queries.forEach(((x,k)=>{for(const j of k.ba)j.va(p)&&(y=!0)})),y&&sy(g)})(a.eventManager,e),l.length&&a.Pu.J_(l),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function gI(s,e,n){const a=Lt(s);a.sharedClientState.updateQueryState(e,"rejected",n);const l=a.Au.get(e),u=l&&l.key;if(u){let d=new Kn(yt.comparator);d=d.insert(u,Is.newNoDocument(u,Mt.min()));const p=tn().add(u),g=new Kd(Mt.min(),new Map,new Kn(en),d,p);await E_(a,g),a.Ru=a.Ru.remove(u),a.Au.delete(e),ay(a)}else await sg(a.localStore,e,!1).then((()=>ig(a,e,n))).catch(Ul)}async function yI(s,e){const n=Lt(s),a=e.batch.batchId;try{const l=await jA(n.localStore,e);S_(n,a,null),j_(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await ku(n,l)}catch(l){await Ul(l)}}async function vI(s,e,n){const a=Lt(s);try{const l=await(function(d,p){const g=Lt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,p).next((k=>(bn(k!==null,37113),x=k.keys(),g.mutationQueue.removeMutationBatch(y,k)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(a.localStore,e);S_(a,e,n),j_(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await ku(a,l)}catch(l){await Ul(l)}}function j_(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function S_(s,e,n){const a=Lt(s);let l=a.du[a.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),a.du[a.currentUser.toKey()]=l}}function ig(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||N_(s,a)}))}function N_(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Xg(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),ay(s))}function E2(s,e,n){for(const a of n)a instanceof __?(s.Vu.addReference(a.key,e),bI(s,a)):a instanceof k_?(st(ry,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||N_(s,a.key)):Nt(19791,{wu:a})}function bI(s,e){const n=e.key,a=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(a)||(st(ry,"New document in limbo: "+n),s.Eu.add(a),ay(s))}function ay(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new yt(Cn.fromString(e)),a=s.fu.next();s.Au.set(a,new lI(n)),s.Ru=s.Ru.insert(n,a),f_(s.remoteStore,new ji(aa(zg(n.path)),a,"TargetPurposeLimboResolution",zd.ce))}}async function ku(s,e,n){const a=Lt(s),l=[],u=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((p,g)=>{d.push(a.pu(g,e,n).then((y=>{if((y||n)&&a.isPrimaryClient){const x=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;a.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){l.push(y);const x=Yg.Es(g.targetId,y);u.push(x)}})))})),await Promise.all(d),a.Pu.J_(l),await(async function(g,y){const x=Lt(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>je.forEach(y,(j=>je.forEach(j.Ts,(P=>x.persistence.referenceDelegate.addReference(k,j.targetId,P))).next((()=>je.forEach(j.Is,(P=>x.persistence.referenceDelegate.removeReference(k,j.targetId,P)))))))))}catch(k){if(!zl(k))throw k;st(Qg,"Failed to update sequence numbers: "+k)}for(const k of y){const j=k.targetId;if(!k.fromCache){const P=x.vs.get(j),$=P.snapshotVersion,B=P.withLastLimboFreeSnapshotVersion($);x.vs=x.vs.insert(j,B)}}})(a.localStore,u))}async function xI(s,e){const n=Lt(s);if(!n.currentUser.isEqual(e)){st(ry,"User change. New user:",e.toKey());const a=await c_(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Qe(_e.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await ku(n,a.Ns)}}function wI(s,e){const n=Lt(s),a=n.Au.get(e);if(a&&a.hu)return tn().add(a.key);{let l=tn();const u=n.Iu.get(e);if(!u)return l;for(const d of u){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function C_(s){const e=Lt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=E_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gI.bind(null,e),e.Pu.J_=rI.bind(null,e.eventManager),e.Pu.yu=aI.bind(null,e.eventManager),e}function _I(s){const e=Lt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vI.bind(null,e),e}class Rd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return EA(this.persistence,new _A,e.initialUser,this.serializer)}Cu(e){return new l_(Kg.Vi,this.serializer)}Du(e){return new IA}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rd.provider={build:()=>new Rd};class kI extends Rd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){bn(this.persistence.referenceDelegate instanceof Nd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new oA(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ws.withCacheSize(this.cacheSizeBytes):Ws.DEFAULT;return new l_((a=>Nd.Vi(a,n)),this.serializer)}}class og{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>T2(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=xI.bind(null,this.syncEngine),await tI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new sI})()}createDatastore(e){const n=Yd(e.databaseInfo.databaseId),a=OA(e.databaseInfo);return FA(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,l,u,d,p){return new HA(a,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>T2(this.syncEngine,n,0)),(function(){return v2.v()?new v2:new MA})())}createSyncEngine(e,n){return(function(l,u,d,p,g,y,x){const k=new cI(l,u,d,p,g,y);return x&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=Lt(n);st(To,"RemoteStore shutting down."),a.Ea.add(5),await _u(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}og.provider={build:()=>new og};class R_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Va("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Oi="FirestoreClient";class TI{constructor(e,n,a,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this._databaseInfo=l,this.user=As.UNAUTHENTICATED,this.clientId=Pg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async d=>{st(Oi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(st(Oi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Da;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=ny(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function bp(s,e){s.asyncQueue.verifyOperationInProgress(),st(Oi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async l=>{a.isEqual(l)||(await c_(e.localStore,l),a=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function j2(s,e){s.asyncQueue.verifyOperationInProgress();const n=await EI(s);st(Oi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>x2(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,l)=>x2(e.remoteStore,l))),s._onlineComponents=e}async function EI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){st(Oi,"Using user provided OfflineComponentProvider");try{await bp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===_e.FAILED_PRECONDITION||l.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Cl("Error using user provided cache. Falling back to memory cache: "+n),await bp(s,new Rd)}}else st(Oi,"Using default OfflineComponentProvider"),await bp(s,new kI(void 0));return s._offlineComponents}async function A_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(st(Oi,"Using user provided OnlineComponentProvider"),await j2(s,s._uninitializedComponentsProvider._online)):(st(Oi,"Using default OnlineComponentProvider"),await j2(s,new og))),s._onlineComponents}function jI(s){return A_(s).then((e=>e.syncEngine))}async function I_(s){const e=await A_(s),n=e.eventManager;return n.onListen=uI.bind(null,e.syncEngine),n.onUnlisten=fI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mI.bind(null,e.syncEngine),n}function SI(s,e,n={}){const a=new Da;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const x=new R_({next:j=>{x.Nu(),d.enqueueAndForget((()=>x_(u,k)));const P=j.docs.has(p);!P&&j.fromCache?y.reject(new Qe(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&j.fromCache&&g&&g.source==="server"?y.reject(new Qe(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(j)},error:j=>y.reject(j)}),k=new w_(zg(p.path),x,{includeMetadataChanges:!0,Ka:!0});return b_(u,k)})(await I_(s),s.asyncQueue,e,n,a))),a.promise}function NI(s,e,n={}){const a=new Da;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const x=new R_({next:j=>{x.Nu(),d.enqueueAndForget((()=>x_(u,k))),j.fromCache&&g.source==="server"?y.reject(new Qe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(j)},error:j=>y.reject(j)}),k=new w_(p,x,{includeMetadataChanges:!0,Ka:!0});return b_(u,k)})(await I_(s),s.asyncQueue,e,n,a))),a.promise}function CI(s,e){const n=new Da;return s.asyncQueue.enqueueAndForget((async()=>pI(await jI(s),e,n))),n.promise}function M_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const RI="ComponentProvider",S2=new Map;function AI(s,e,n,a,l){return new QC(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,M_(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,a)}const D_="firestore.googleapis.com",N2=!0;class C2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Qe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=D_,this.ssl=N2}else this.host=e.host,this.ssl=e.ssl??N2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=o_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aA)throw new Qe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M_(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Qe(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Qe(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Qe(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,n,a,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Qe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new CC;switch(a.type){case"firstParty":return new MC(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Qe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=S2.get(n);a&&(st(RI,"Removing Datastore"),S2.delete(n),a.terminate())})(this),Promise.resolve()}}function II(s,e,n,a={}){s=Or(s,Jd);const l=Vi(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(bg(`https://${p}`),xg("Firestore",!0)),u.host!==D_&&u.host!==p&&Cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:a};if(!bo(g,d)&&(s._setSettings(g),a.mockUserToken)){let y,x;if(typeof a.mockUserToken=="string")y=a.mockUserToken,x=As.MOCK_USER;else{y=Ex(a.mockUserToken,s._app?.options.projectId);const k=a.mockUserToken.sub||a.mockUserToken.user_id;if(!k)throw new Qe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new As(k)}s._authCredentials=new RC(new vw(y,x))}}class Ro{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ro(this.firestore,e,this._query)}}class rs{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rs(this.firestore,e,this._key)}toJSON(){return{type:rs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(bu(n,rs._jsonSchema))return new rs(e,a||null,new yt(Cn.fromString(n.referencePath)))}}rs._jsonSchemaVersion="firestore/documentReference/1.0",rs._jsonSchema={type:fs("string",rs._jsonSchemaVersion),referencePath:fs("string")};class Ri extends Ro{constructor(e,n,a){super(e,n,zg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rs(this.firestore,null,new yt(e))}withConverter(e){return new Ri(this.firestore,e,this._path)}}function An(s,e,...n){if(s=Fn(s),bw("collection","path",e),s instanceof Jd){const a=Cn.fromString(e,...n);return F1(a),new Ri(s,null,a)}{if(!(s instanceof rs||s instanceof Ri))throw new Qe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Cn.fromString(e,...n));return F1(a),new Ri(s.firestore,null,a)}}function ot(s,e,...n){if(s=Fn(s),arguments.length===1&&(e=Pg.newId()),bw("doc","path",e),s instanceof Jd){const a=Cn.fromString(e,...n);return z1(a),new rs(s,null,new yt(a))}{if(!(s instanceof rs||s instanceof Ri))throw new Qe(_e.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Cn.fromString(e,...n));return z1(a),new rs(s.firestore,s instanceof Ri?s.converter:null,new yt(a))}}const R2="AsyncQueue";class A2{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new h_(this,"async_queue_retry"),this._c=()=>{const a=vp();a&&st(R2,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=vp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Da;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!zl(e))throw e;st(R2,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Va("INTERNAL UNHANDLED ERROR: ",I2(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=ty.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&Nt(47125,{Pc:I2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function I2(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ao extends Jd{constructor(e,n,a,l){super(e,n,a,l),this.type="firestore",this._queue=new A2,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new A2(e),this._firestoreClient=void 0,await e}}}function MI(s,e){const n=typeof s=="object"?s:Tg(),a=typeof s=="string"?s:kd,l=Ld(n,"firestore").getImmediate({identifier:a});if(!l._initialized){const u=_x("firestore");u&&II(l,...u)}return l}function iy(s){if(s._terminated)throw new Qe(_e.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||DI(s),s._firestoreClient}function DI(s){const e=s._freezeSettings(),n=AI(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new TI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pr(js.fromBase64String(e))}catch(n){throw new Qe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pr(js.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bu(e,pr._jsonSchema))return pr.fromBase64String(e.bytes)}}pr._jsonSchemaVersion="firestore/bytes/1.0",pr._jsonSchema={type:fs("string",pr._jsonSchemaVersion),bytes:fs("string")};class oy{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Qe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Es(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zd{constructor(e){this._methodName=e}}class oa{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Qe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Qe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return en(this._lat,e._lat)||en(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:oa._jsonSchemaVersion}}static fromJSON(e){if(bu(e,oa._jsonSchema))return new oa(e.latitude,e.longitude)}}oa._jsonSchemaVersion="firestore/geoPoint/1.0",oa._jsonSchema={type:fs("string",oa._jsonSchemaVersion),latitude:fs("number"),longitude:fs("number")};class Pr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,l){if(a.length!==l.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bu(e,Pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Pr(e.vectorValues);throw new Qe(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pr._jsonSchemaVersion="firestore/vectorValue/1.0",Pr._jsonSchema={type:fs("string",Pr._jsonSchemaVersion),vectorValues:fs("object")};const PI=/^__.*__$/;class LI{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new zi(e,this.data,this.fieldMask,n,this.fieldTransforms):new xu(e,this.data,n,this.fieldTransforms)}}class P_{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new zi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function L_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt(40011,{dataSource:s})}}class ly{constructor(e,n,a,l,u,d){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new ly({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ad(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(L_(this.dataSource)&&PI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class OI{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||Yd(e)}createContext(e,n,a,l=!1){return new ly({dataSource:e,methodName:n,targetDoc:a,path:Es.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ef(s){const e=s._freezeSettings(),n=Yd(s._databaseId);return new OI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function O_(s,e,n,a,l,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);uy("Data must be an object, but it was:",d,a);const p=V_(a,d);let g,y;if(u.merge)g=new nr(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const k of u.mergeFields){const j=Eo(e,k,n);if(!d.contains(j))throw new Qe(_e.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);z_(x,j)||x.push(j)}g=new nr(x),y=d.fieldTransforms.filter((k=>g.covers(k.field)))}else g=null,y=d.fieldTransforms;return new LI(new Gs(p),g,y)}class tf extends Zd{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tf}}class cy extends Zd{_toFieldTransform(e){return new ER(e.path,new lu)}isEqual(e){return e instanceof cy}}function VI(s,e,n,a){const l=s.createContext(1,e,n);uy("Data must be an object, but it was:",l,a);const u=[],d=Gs.empty();Ui(a,((g,y)=>{const x=U_(e,g,n);y=Fn(y);const k=l.childContextForFieldPath(x);if(y instanceof tf)u.push(x);else{const j=Tu(y,k);j!=null&&(u.push(x),d.set(x,j))}}));const p=new nr(u);return new P_(d,p,l.fieldTransforms)}function BI(s,e,n,a,l,u){const d=s.createContext(1,e,n),p=[Eo(e,a,n)],g=[l];if(u.length%2!=0)throw new Qe(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)p.push(Eo(e,u[j])),g.push(u[j+1]);const y=[],x=Gs.empty();for(let j=p.length-1;j>=0;--j)if(!z_(y,p[j])){const P=p[j];let $=g[j];$=Fn($);const B=d.childContextForFieldPath(P);if($ instanceof tf)y.push(P);else{const L=Tu($,B);L!=null&&(y.push(P),x.set(P,L))}}const k=new nr(y);return new P_(x,k,d.fieldTransforms)}function UI(s,e,n,a=!1){return Tu(n,s.createContext(a?4:3,e))}function Tu(s,e){if(B_(s=Fn(s)))return uy("Unsupported field value:",e,s),V_(s,e);if(s instanceof Zd)return(function(a,l){if(!L_(l.dataSource))throw l.createError(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,l){const u=[];let d=0;for(const p of a){let g=Tu(p,l.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(a,l){if((a=Fn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return _R(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=dt.fromDate(a);return{timestampValue:Sd(l.serializer,u)}}if(a instanceof dt){const u=new dt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Sd(l.serializer,u)}}if(a instanceof oa)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof pr)return{bytesValue:Zw(l.serializer,a._byteString)};if(a instanceof rs){const u=l.databaseId,d=a.firestore._databaseId;if(!d.isEqual(u))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Wg(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Pr)return(function(d,p){const g=d instanceof Pr?d.toArray():d;return{mapValue:{fields:{[Nw]:{stringValue:Cw},[Td]:{arrayValue:{values:g.map((x=>{if(typeof x!="number")throw p.createError("VectorValues must only contain numeric values.");return Fg(p.serializer,x)}))}}}}}})(a,l);if(i_(a))return a._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Ud(a)}`)})(s,e)}function V_(s,e){const n={};return _w(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(s,((a,l)=>{const u=Tu(l,e.childContextForField(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function B_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof dt||s instanceof oa||s instanceof pr||s instanceof rs||s instanceof Zd||s instanceof Pr||i_(s))}function uy(s,e,n){if(!B_(n)||!xw(n)){const a=Ud(n);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function Eo(s,e,n){if((e=Fn(e))instanceof oy)return e._internalPath;if(typeof e=="string")return U_(s,e);throw Ad("Field path arguments must be of type string or ",s,!1,void 0,n)}const zI=new RegExp("[~\\*/\\[\\]]");function U_(s,e,n){if(e.search(zI)>=0)throw Ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new oy(...e.split("."))._internalPath}catch{throw Ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Ad(s,e,n,a,l){const u=a&&!a.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${a}`),d&&(g+=` in document ${l}`),g+=")"),new Qe(_e.INVALID_ARGUMENT,p+s+g)}function z_(s,e){return s.some((n=>n.isEqual(e)))}class FI{convertValue(e,n="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ss(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Nt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return Ui(e,((l,u)=>{a[l]=this.convertValue(u,n)})),a}convertVectorValue(e){const n=e.fields?.[Td].arrayValue?.values?.map((a=>ss(a.doubleValue)));return new Pr(n)}convertGeoPoint(e){return new oa(ss(e.latitude),ss(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=qd(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const n=Mi(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Cn.fromString(e);bn(a_(a),9688,{name:e});const l=new au(a.get(1),a.get(3)),u=new yt(a.popFirst(5));return l.isEqual(n)||Va(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class F_ extends FI{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rs(this.firestore,null,n)}}function Id(){return new cy("serverTimestamp")}const M2="@firebase/firestore",D2="4.10.0";class q_{constructor(e,n,a,l,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new rs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Eo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qI extends q_{data(){return super.data()}}function HI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Qe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hy{}class H_ extends hy{}function ds(s,e,...n){let a=[];e instanceof hy&&a.push(e),a=a.concat(n),(function(u){const d=u.filter((g=>g instanceof dy)).length,p=u.filter((g=>g instanceof nf)).length;if(d>1||d>0&&p>0)throw new Qe(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const l of a)s=l._apply(s);return s}class nf extends H_{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new nf(e,n,a)}_apply(e){const n=this._parse(e);return $_(e._query,n),new Ro(e.firestore,e.converter,Xp(e._query,n))}_parse(e){const n=ef(e.firestore);return(function(u,d,p,g,y,x,k){let j;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new Qe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){L2(k,x);const $=[];for(const B of k)$.push(P2(g,u,B));j={arrayValue:{values:$}}}else j=P2(g,u,k)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||L2(k,x),j=UI(p,d,k,x==="in"||x==="not-in");return hs.create(y,x,j)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Un(s,e,n){const a=e,l=Eo("where",s);return nf._create(l,a,n)}class dy extends hy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dy(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Vr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let d=l;const p=u.getFlattenedFilters();for(const g of p)$_(d,g),d=Xp(d,g)})(e._query,n),new Ro(e.firestore,e.converter,Xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fy extends H_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fy(e,n)}_apply(e){const n=(function(l,u,d){if(l.startAt!==null)throw new Qe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new Qe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ou(u,d)})(e._query,this._field,this._direction);return new Ro(e.firestore,e.converter,mR(e._query,n))}}function RD(s,e="asc"){const n=e,a=Eo("orderBy",s);return fy._create(a,n)}function P2(s,e,n){if(typeof(n=Fn(n))=="string"){if(n==="")throw new Qe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ow(e)&&n.indexOf("/")!==-1)throw new Qe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(Cn.fromString(n));if(!yt.isDocumentKey(a))throw new Qe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Q1(s,new yt(a))}if(n instanceof rs)return Q1(s,n._key);throw new Qe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ud(n)}.`)}function L2(s,e){if(!Array.isArray(s)||s.length===0)throw new Qe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $_(s,e){const n=(function(l,u){for(const d of l)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Qe(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Qe(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function W_(s,e,n){let a;return a=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,a}class Hc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yo extends q_{constructor(e,n,a,l,u,d){super(e,n,a,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(Eo("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Qe(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=yo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}yo._jsonSchemaVersion="firestore/documentSnapshot/1.0",yo._jsonSchema={type:fs("string",yo._jsonSchemaVersion),bundleSource:fs("string","DocumentSnapshot"),bundleName:fs("string"),bundle:fs("string")};class hd extends yo{data(e={}){return super.data(e)}}class Nl{constructor(e,n,a,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Hc(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new hd(this._firestore,this._userDataWriter,a.key,a,new Hc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Qe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new hd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Hc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new hd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Hc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,x=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),x=d.indexOf(p.doc.key)),{type:$I(p.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Qe(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $I(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt(61501,{type:s})}}Nl._jsonSchemaVersion="firestore/querySnapshot/1.0",Nl._jsonSchema={type:fs("string",Nl._jsonSchemaVersion),bundleSource:fs("string","QuerySnapshot"),bundleName:fs("string"),bundle:fs("string")};function In(s){s=Or(s,rs);const e=Or(s.firestore,Ao),n=iy(e);return SI(n,s._key).then((a=>GI(e,s,a)))}function Gn(s){s=Or(s,Ro);const e=Or(s.firestore,Ao),n=iy(e),a=new F_(e);return HI(s._query),NI(n,s._query).then((l=>new Nl(e,a,s,l)))}function Rn(s,e,n){s=Or(s,rs);const a=Or(s.firestore,Ao),l=W_(s.converter,e,n),u=ef(a);return sf(a,[O_(u,"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,gr.none())])}function WI(s,e,n,...a){s=Or(s,rs);const l=Or(s.firestore,Ao),u=ef(l);let d;return d=typeof(e=Fn(e))=="string"||e instanceof oy?BI(u,"updateDoc",s._key,e,n,a):VI(u,"updateDoc",s._key,e),sf(l,[d.toMutation(s._key,gr.exists(!0))])}function ea(s){return sf(Or(s.firestore,Ao),[new qg(s._key,gr.none())])}function lg(s,e){const n=Or(s.firestore,Ao),a=ot(s),l=W_(s.converter,e),u=ef(s.firestore);return sf(n,[O_(u,"addDoc",a._key,l,s.converter!==null,{}).toMutation(a._key,gr.exists(!1))]).then((()=>a))}function sf(s,e){const n=iy(s);return CI(n,e)}function GI(s,e,n){const a=n.docs.get(e._key),l=new F_(s);return new yo(s,l,e._key,a,new Hc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){NC(So),xo(new Ai("firestore",((a,{instanceIdentifier:l,options:u})=>{const d=a.getProvider("app").getImmediate(),p=new Ao(new AC(a.getProvider("auth-internal")),new DC(d,a.getProvider("app-check-internal")),XC(d,l),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),na(M2,D2,e),na(M2,D2,"esm2020")})();var KI="firebase",YI="12.8.0";na(KI,YI,"app");const G_="firebasestorage.googleapis.com",K_="storageBucket",QI=120*1e3,XI=600*1e3;class Zn extends ua{constructor(e,n,a=0){super(xp(e),`Firebase Storage: ${n} (${xp(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Jn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Jn||(Jn={}));function xp(s){return"storage/"+s}function my(){const s="An unknown error occurred, please check the error payload for server response.";return new Zn(Jn.UNKNOWN,s)}function JI(s){return new Zn(Jn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function ZI(s){return new Zn(Jn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function eM(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zn(Jn.UNAUTHENTICATED,s)}function tM(){return new Zn(Jn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nM(s){return new Zn(Jn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function sM(){return new Zn(Jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rM(){return new Zn(Jn.CANCELED,"User canceled the upload/download.")}function aM(s){return new Zn(Jn.INVALID_URL,"Invalid URL '"+s+"'.")}function iM(s){return new Zn(Jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function oM(){return new Zn(Jn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+K_+"' property when initializing the app?")}function lM(){return new Zn(Jn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function cM(){return new Zn(Jn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function uM(s){return new Zn(Jn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function cg(s){return new Zn(Jn.INVALID_ARGUMENT,s)}function Y_(){return new Zn(Jn.APP_DELETED,"The Firebase app was deleted.")}function hM(s){return new Zn(Jn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xc(s,e){return new Zn(Jn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Lc(s){throw new Zn(Jn.INTERNAL_ERROR,"Internal error: "+s)}class Bs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=Bs.makeFromUrl(e,n)}catch{return new Bs(e,"")}if(a.path==="")return a;throw iM(e)}static makeFromUrl(e,n){let a=null;const l="([A-Za-z0-9.\\-_]+)";function u(ve){ve.path.charAt(ve.path.length-1)==="/"&&(ve.path_=ve.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function y(ve){ve.path_=decodeURIComponent(ve.path)}const x="v[A-Za-z0-9_]+",k=n.replace(/[.]/g,"\\."),j="(/([^?#]*).*)?$",P=new RegExp(`^https?://${k}/${x}/b/${l}/o${j}`,"i"),$={bucket:1,path:3},B=n===G_?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",te=new RegExp(`^https?://${B}/${l}/${L}`,"i"),ce=[{regex:p,indices:g,postModify:u},{regex:P,indices:$,postModify:y},{regex:te,indices:{bucket:1,path:2},postModify:y}];for(let ve=0;ve<ce.length;ve++){const Ue=ce[ve],Ae=Ue.regex.exec(e);if(Ae){const A=Ae[Ue.indices.bucket];let E=Ae[Ue.indices.path];E||(E=""),a=new Bs(A,E),Ue.postModify(a);break}}if(a==null)throw aM(e);return a}}class dM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function fM(s,e,n){let a=1,l=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function x(...L){y||(y=!0,e.apply(null,L))}function k(L){l=setTimeout(()=>{l=null,s(P,g())},L)}function j(){u&&clearTimeout(u)}function P(L,...te){if(y){j();return}if(L){j(),x.call(null,L,...te);return}if(g()||d){j(),x.call(null,L,...te);return}a<64&&(a*=2);let ce;p===1?(p=2,ce=0):ce=(a+Math.random())*1e3,k(ce)}let $=!1;function B(L){$||($=!0,j(),!y&&(l!==null?(L||(p=2),clearTimeout(l),k(0)):L||(p=1)))}return k(0),u=setTimeout(()=>{d=!0,B(!0)},n),B}function mM(s){s(!1)}function pM(s){return s!==void 0}function gM(s){return typeof s=="object"&&!Array.isArray(s)}function py(s){return typeof s=="string"||s instanceof String}function O2(s){return gy()&&s instanceof Blob}function gy(){return typeof Blob<"u"}function ug(s,e,n,a){if(a<e)throw cg(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>n)throw cg(`Invalid value for '${s}'. Expected ${n} or less.`)}function rf(s,e,n){let a=e;return n==null&&(a=`https://${e}`),`${n}://${a}/v0${s}`}function Q_(s){const e=encodeURIComponent;let n="?";for(const a in s)if(s.hasOwnProperty(a)){const l=e(a)+"="+e(s[a]);n=n+l+"&"}return n=n.slice(0,-1),n}var vo;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(vo||(vo={}));function yM(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class vM{constructor(e,n,a,l,u,d,p,g,y,x,k,j=!0,P=!1){this.url_=e,this.method_=n,this.headers_=a,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=k,this.retry=j,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(($,B)=>{this.resolve_=$,this.reject_=B,this.start_()})}start_(){const e=(a,l)=>{if(l){a(!1,new Gh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===vo.NO_ERROR,g=u.getStatus();if(!p||yM(g,this.additionalRetryCodes_)&&this.retry){const x=u.getErrorCode()===vo.ABORT;a(!1,new Gh(!1,null,x));return}const y=this.successCodes_.indexOf(g)!==-1;a(!0,new Gh(y,u))})},n=(a,l)=>{const u=this.resolve_,d=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());pM(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=my();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(l.canceled){const g=this.appDelete_?Y_():rM();d(g)}else{const g=sM();d(g)}};this.canceled_?n(!1,new Gh(!1,null,!0)):this.backoffId_=fM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gh{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function bM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function xM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function _M(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function kM(s,e,n,a,l,u,d=!0,p=!1){const g=Q_(s.urlParams),y=s.url+g,x=Object.assign({},s.headers);return wM(x,e),bM(x,n),xM(x,u),_M(x,a),new vM(y,s.method,x,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,d,p)}function TM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function EM(...s){const e=TM();if(e!==void 0){const n=new e;for(let a=0;a<s.length;a++)n.append(s[a]);return n.getBlob()}else{if(gy())return new Blob(s);throw new Zn(Jn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jM(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function SM(s){if(typeof atob>"u")throw uM("base-64");return atob(s)}const ta={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wp{constructor(e,n){this.data=e,this.contentType=n||null}}function NM(s,e){switch(s){case ta.RAW:return new wp(X_(e));case ta.BASE64:case ta.BASE64URL:return new wp(J_(s,e));case ta.DATA_URL:return new wp(RM(e),AM(e))}throw my()}function X_(s){const e=[];for(let n=0;n<s.length;n++){let a=s.charCodeAt(n);if(a<=127)e.push(a);else if(a<=2047)e.push(192|a>>6,128|a&63);else if((a&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=a,d=s.charCodeAt(++n);a=65536|(u&1023)<<10|d&1023,e.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63)}else(a&64512)===56320?e.push(239,191,189):e.push(224|a>>12,128|a>>6&63,128|a&63)}return new Uint8Array(e)}function CM(s){let e;try{e=decodeURIComponent(s)}catch{throw Xc(ta.DATA_URL,"Malformed data URL.")}return X_(e)}function J_(s,e){switch(s){case ta.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw Xc(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case ta.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw Xc(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=SM(e)}catch(l){throw l.message.includes("polyfill")?l:Xc(s,"Invalid character found")}const a=new Uint8Array(n.length);for(let l=0;l<n.length;l++)a[l]=n.charCodeAt(l);return a}class Z_{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Xc(ta.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const a=n[1]||null;a!=null&&(this.base64=IM(a,";base64"),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}function RM(s){const e=new Z_(s);return e.base64?J_(ta.BASE64,e.rest):CM(e.rest)}function AM(s){return new Z_(s).contentType}function IM(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Ei{constructor(e,n){let a=0,l="";O2(e)?(this.data_=e,a=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),a=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),a=e.length),this.size_=a,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(O2(this.data_)){const a=this.data_,l=jM(a,e,n);return l===null?null:new Ei(l)}else{const a=new Uint8Array(this.data_.buffer,e,n-e);return new Ei(a,!0)}}static getBlob(...e){if(gy()){const n=e.map(a=>a instanceof Ei?a.data_:a);return new Ei(EM.apply(null,n))}else{const n=e.map(d=>py(d)?NM(ta.RAW,d).data:d.data_);let a=0;n.forEach(d=>{a+=d.byteLength});const l=new Uint8Array(a);let u=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)l[u++]=d[p]}),new Ei(l,!0)}}uploadData(){return this.data_}}function yy(s){let e;try{e=JSON.parse(s)}catch{return null}return gM(e)?e:null}function MM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function DM(s,e){const n=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?n:s+"/"+n}function ek(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function PM(s,e){return e}class Vs{constructor(e,n,a,l){this.server=e,this.local=n||e,this.writable=!!a,this.xform=l||PM}}let Kh=null;function LM(s){return!py(s)||s.length<2?s:ek(s)}function tk(){if(Kh)return Kh;const s=[];s.push(new Vs("bucket")),s.push(new Vs("generation")),s.push(new Vs("metageneration")),s.push(new Vs("name","fullPath",!0));function e(u,d){return LM(d)}const n=new Vs("name");n.xform=e,s.push(n);function a(u,d){return d!==void 0?Number(d):d}const l=new Vs("size");return l.xform=a,s.push(l),s.push(new Vs("timeCreated")),s.push(new Vs("updated")),s.push(new Vs("md5Hash",null,!0)),s.push(new Vs("cacheControl",null,!0)),s.push(new Vs("contentDisposition",null,!0)),s.push(new Vs("contentEncoding",null,!0)),s.push(new Vs("contentLanguage",null,!0)),s.push(new Vs("contentType",null,!0)),s.push(new Vs("metadata","customMetadata",!0)),Kh=s,Kh}function OM(s,e){function n(){const a=s.bucket,l=s.fullPath,u=new Bs(a,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function VM(s,e,n){const a={};a.type="file";const l=n.length;for(let u=0;u<l;u++){const d=n[u];a[d.local]=d.xform(a,e[d.server])}return OM(a,s),a}function nk(s,e,n){const a=yy(e);return a===null?null:VM(s,a,n)}function BM(s,e,n,a){const l=yy(e);if(l===null||!py(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const x=s.bucket,k=s.fullPath,j="/b/"+d(x)+"/o/"+d(k),P=rf(j,n,a),$=Q_({alt:"media",token:y});return P+$})[0]}function UM(s,e){const n={},a=e.length;for(let l=0;l<a;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}const V2="prefixes",B2="items";function zM(s,e,n){const a={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[V2])for(const l of n[V2]){const u=l.replace(/\/$/,""),d=s._makeStorageReference(new Bs(e,u));a.prefixes.push(d)}if(n[B2])for(const l of n[B2]){const u=s._makeStorageReference(new Bs(e,l.name));a.items.push(u)}return a}function FM(s,e,n){const a=yy(n);return a===null?null:zM(s,e,a)}class vy{constructor(e,n,a,l){this.url=e,this.method=n,this.handler=a,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function by(s){if(!s)throw my()}function qM(s,e){function n(a,l){const u=nk(s,l,e);return by(u!==null),u}return n}function HM(s,e){function n(a,l){const u=FM(s,e,l);return by(u!==null),u}return n}function $M(s,e){function n(a,l){const u=nk(s,l,e);return by(u!==null),BM(u,l,s.host,s._protocol)}return n}function xy(s){function e(n,a){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=tM():l=eM():n.getStatus()===402?l=ZI(s.bucket):n.getStatus()===403?l=nM(s.path):l=a,l.status=n.getStatus(),l.serverResponse=a.serverResponse,l}return e}function WM(s){const e=xy(s);function n(a,l){let u=e(a,l);return a.getStatus()===404&&(u=JI(s.path)),u.serverResponse=l.serverResponse,u}return n}function GM(s,e,n,a,l){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),a&&(u.pageToken=a),l&&(u.maxResults=l);const d=e.bucketOnlyServerUrl(),p=rf(d,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,x=new vy(p,g,HM(s,e.bucket),y);return x.urlParams=u,x.errorHandler=xy(e),x}function KM(s,e,n){const a=e.fullServerUrl(),l=rf(a,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new vy(l,u,$M(s,n),d);return p.errorHandler=WM(e),p}function YM(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function QM(s,e,n){const a=Object.assign({},n);return a.fullPath=s.path,a.size=e.size(),a.contentType||(a.contentType=YM(null,e)),a}function XM(s,e,n,a,l){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let ce="";for(let ve=0;ve<2;ve++)ce=ce+Math.random().toString().slice(2);return ce}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=QM(e,a,l),x=UM(y,n),k="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,j=`\r
--`+g+"--",P=Ei.getBlob(k,a,j);if(P===null)throw lM();const $={name:y.fullPath},B=rf(u,s.host,s._protocol),L="POST",te=s.maxUploadRetryTime,Q=new vy(B,L,qM(s,n),te);return Q.urlParams=$,Q.headers=d,Q.body=P.uploadData(),Q.errorHandler=xy(e),Q}class JM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,a,l,u){if(this.sent_)throw Lc("cannot .send() more than once");if(Vi(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ZM extends JM{initXhr(){this.xhr_.responseType="text"}}function wy(){return new ZM}class jo{constructor(e,n){this._service=e,n instanceof Bs?this._location=n:this._location=Bs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new jo(e,n)}get root(){const e=new Bs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ek(this._location.path)}get storage(){return this._service}get parent(){const e=MM(this._location.path);if(e===null)return null;const n=new Bs(this._location.bucket,e);return new jo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw hM(e)}}function e3(s,e,n){s._throwIfRoot("uploadBytes");const a=XM(s.storage,s._location,tk(),new Ei(e,!0),n);return s.storage.makeRequestWithTokens(a,wy).then(l=>({metadata:l,ref:s}))}function t3(s){const e={prefixes:[],items:[]};return sk(s,e).then(()=>e)}async function sk(s,e,n){const l=await n3(s,{pageToken:n});e.prefixes.push(...l.prefixes),e.items.push(...l.items),l.nextPageToken!=null&&await sk(s,e,l.nextPageToken)}function n3(s,e){e!=null&&typeof e.maxResults=="number"&&ug("options.maxResults",1,1e3,e.maxResults);const n=e||{},a=GM(s.storage,s._location,"/",n.pageToken,n.maxResults);return s.storage.makeRequestWithTokens(a,wy)}function s3(s){s._throwIfRoot("getDownloadURL");const e=KM(s.storage,s._location,tk());return s.storage.makeRequestWithTokens(e,wy).then(n=>{if(n===null)throw cM();return n})}function r3(s,e){const n=DM(s._location.path,e),a=new Bs(s._location.bucket,n);return new jo(s.storage,a)}function a3(s){return/^[A-Za-z]+:\/\//.test(s)}function i3(s,e){return new jo(s,e)}function rk(s,e){if(s instanceof _y){const n=s;if(n._bucket==null)throw oM();const a=new jo(n,n._bucket);return e!=null?rk(a,e):a}else return e!==void 0?r3(s,e):s}function o3(s,e){if(e&&a3(e)){if(s instanceof _y)return i3(s,e);throw cg("To use ref(service, url), the first argument must be a Storage instance.")}else return rk(s,e)}function U2(s,e){const n=e?.[K_];return n==null?null:Bs.makeFromBucketSpec(n,s)}function l3(s,e,n,a={}){s.host=`${e}:${n}`;const l=Vi(e);l&&(bg(`https://${s.host}/b`),xg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=a;u&&(s._overrideAuthToken=typeof u=="string"?u:Ex(u,s.app.options.projectId))}class _y{constructor(e,n,a,l,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=G_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=QI,this._maxUploadRetryTime=XI,this._requests=new Set,l!=null?this._bucket=Bs.makeFromBucketSpec(l,this._host):this._bucket=U2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bs.makeFromBucketSpec(this._url,e):this._bucket=U2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ug("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ug("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jo(this,e)}_makeRequest(e,n,a,l,u=!0){if(this._deleted)return new dM(Y_());{const d=kM(e,this._appId,a,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[a,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,l).getPromise()}}const z2="@firebase/storage",F2="0.14.0";const ak="storage";function c3(s,e,n){return s=Fn(s),e3(s,e,n)}function q2(s){return s=Fn(s),t3(s)}function Jc(s){return s=Fn(s),s3(s)}function wl(s,e){return s=Fn(s),o3(s,e)}function u3(s=Tg(),e){s=Fn(s);const a=Ld(s,ak).getImmediate({identifier:e}),l=_x("storage");return l&&h3(a,...l),a}function h3(s,e,n,a={}){l3(s,e,n,a)}function d3(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new _y(n,a,l,e,So)}function f3(){xo(new Ai(ak,d3,"PUBLIC").setMultipleInstances(!0)),na(z2,F2,""),na(z2,F2,"esm2020")}f3();const ik={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},ky=kg(ik),Oc=uw(ky),Be=MI(ky),_l=u3(ky),m3=kg(ik,"secondary"),AD=uw(m3),p3="EYdciKDOi3UYBLk1u8hHams5tmO2",ok=_.createContext();function br(){return _.useContext(ok)}function g3({children:s}){const[e,n]=_.useState(null),[a,l]=_.useState(!1),[u,d]=_.useState(!1),[p,g]=_.useState(null),[y,x]=_.useState(!0);_.useEffect(()=>g4(Oc,async te=>{if(n(te),te)if(te.uid===p3)l(!0),d(!1),g(null);else{l(!1);try{const Q=ds(An(Be,"clients"),Un("uid","==",te.uid)),ce=await Gn(Q);if(ce.empty)d(!1),g(null);else{const ve=ce.docs[0];d(!0),g({id:ve.id,...ve.data()})}}catch(Q){console.error("Error fetching client data:",Q),d(!1),g(null)}}else l(!1),d(!1),g(null);x(!1)}),[]);const B={currentUser:e,isAdmin:a,isClient:u,clientData:p,updateClientData:L=>{g(te=>te&&{...te,...L})},login:async(L,te,Q=!0)=>(await f4(Oc,Q?nw:Ag),await d4(Oc,L,te)),logout:()=>y4(Oc),resetPassword:L=>h4(Oc,L),loading:y};return i.jsx(ok.Provider,{value:B,children:s})}const lk=_.createContext();function ha(){return _.useContext(lk)}function y3({children:s}){const[e,n]=_.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[a,l]=_.useState(()=>localStorage.getItem("accent")||"red");_.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),_.useEffect(()=>{localStorage.setItem("accent",a)},[a]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:a,setAccent:g=>l(g)};return i.jsx(lk.Provider,{value:p,children:s})}function v3(){const[s,e]=_.useState(""),[n,a]=_.useState(""),[l,u]=_.useState(!0),[d,p]=_.useState(""),[g,y]=_.useState(!1),[x,k]=_.useState(!1),[j,P]=_.useState(!1),{login:$,resetPassword:B,currentUser:L,isAdmin:te,isClient:Q,clientData:ce,loading:ve}=br(),Ue=Ds();if(_.useEffect(()=>{if(!ve&&L){if(te)Ue("/dashboard");else if(Q){const E=ce?.clientType;Ue(E==="core_buddy"?"/client/core-buddy":E==="circuit_vip"||E==="circuit_dropin"?"/client/circuit":"/client")}}},[ve,L,te,Q,ce,Ue]),ve)return null;const Ae=async E=>{E.preventDefault(),p(""),y(!0);try{await $(s,n,l)}catch(R){p(R.message||"Failed to log in"),y(!1)}},A=async E=>{if(E.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await B(s.trim()),P(!0)}catch(R){R.code==="auth/user-not-found"?p("No account found with this email"):p(R.message||"Failed to send reset email")}y(!1)};return i.jsx("div",{className:"login-container",children:i.jsxs("div",{className:"login-card",children:[i.jsxs("div",{className:"login-header",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),i.jsx("p",{children:x?"Reset Password":"Client Portal"})]}),d&&i.jsx("div",{className:"error-message",children:d}),j?i.jsxs("div",{className:"reset-sent",children:[i.jsx("div",{className:"reset-sent-icon",children:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),i.jsx("p",{children:"Reset email sent!"}),i.jsx("span",{children:"Check your inbox for a password reset link"}),i.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{k(!1),P(!1),p("")},children:"Back to Log In"})]}):x?i.jsxs("form",{onSubmit:A,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",children:"Email"}),i.jsx("input",{type:"email",id:"email",value:s,onChange:E=>e(E.target.value),placeholder:"Enter your email",required:!0})]}),i.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),i.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!1),p("")},children:"Back to Log In"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:Ae,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",children:"Email"}),i.jsx("input",{type:"email",id:"email",value:s,onChange:E=>e(E.target.value),required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"password",children:"Password"}),i.jsx("input",{type:"password",id:"password",value:n,onChange:E=>a(E.target.value),required:!0})]}),i.jsx("div",{className:"remember-me",children:i.jsxs("label",{children:[i.jsx("input",{type:"checkbox",checked:l,onChange:E=>u(E.target.checked)}),i.jsx("span",{children:"Remember me"})]})}),i.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),i.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{k(!0),p("")},children:"Forgot password?"})]}),i.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function ca({active:s}){const e=Ds(),{clientData:n}=br(),a=n?.clientType==="block"&&n?.coreBuddyAccess;return i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"})}),i.jsx("span",{children:"Workouts"})]}),i.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),i.jsx("span",{children:"Nutrition"})]}),i.jsxs("button",{className:`block-nav-tab${s==="buddies"?" active":""}`,onClick:()=>e("/client/core-buddy/buddies"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),i.jsx("span",{children:"Buddies"})]}),a&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),i.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),i.jsx("span",{children:"Block"})]})]})}function Eu(s,e,n,a,l){const u=[];for(let d=0;d<s;d++){const p=(d*(360/s)-90)*(Math.PI/180);u.push({x1:e+a*Math.cos(p),y1:n+a*Math.sin(p),x2:e+l*Math.cos(p),y2:n+l*Math.sin(p),thick:d%5===0})}return u}const Ty=Eu(60,100,100,85,96),go=Eu(60,100,100,78,94),b3=Eu(60,100,100,82,94);Eu(60,50,50,38,46);const x3=Eu(60,40,40,30,37),_p=[10,25,50,100,200,500,1e3],bi=5;function dl(s){return s.toISOString().split("T")[0]}function w3(s){let e=0;for(const n of _p){if(s<n)return{prev:e,next:n};e=n}return{prev:_p[_p.length-1],next:s+100}}const _3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},k3={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},kp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}],$s={first_workout:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M6 4v16"}),i.jsx("path",{d:"M18 4v16"}),i.jsx("path",{d:"M6 12h12"}),i.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),i.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]}),workouts_10:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),i.jsx("path",{d:"M12 14v4"}),i.jsx("path",{d:"M10 18h4"})]}),workouts_25:i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),workouts_50:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M4 12h4"}),i.jsx("path",{d:"M16 12h4"}),i.jsx("path",{d:"M12 4v4"}),i.jsx("path",{d:"M12 16v4"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]}),workouts_100:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),streak_2:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),i.jsx("path",{d:"M16 2v4"}),i.jsx("path",{d:"M8 2v4"}),i.jsx("path",{d:"M3 10h18"}),i.jsx("path",{d:"M9 16l2 2 4-4"})]}),streak_4:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),i.jsx("path",{d:"M16 2v4"}),i.jsx("path",{d:"M8 2v4"}),i.jsx("path",{d:"M3 10h18"}),i.jsx("path",{d:"M8 16h8"}),i.jsx("path",{d:"M12 14v4"})]}),streak_8:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),i.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]}),programme_done:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),i.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),i.jsx("path",{d:"M4 22h16"}),i.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),i.jsx("path",{d:"M9 12l2 2 4-4"})]}),habits_7:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),nutrition_7:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),i.jsx("path",{d:"M9 7h6"})]}),first_pb:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"8",r:"6"}),i.jsx("path",{d:"M12 14v8"}),i.jsx("path",{d:"M9 18l3 3 3-3"}),i.jsx("path",{d:"M10 6l2 2 2-2"})]}),pbs_5:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 20h18"}),i.jsx("path",{d:"M5 20V10l4-6"}),i.jsx("path",{d:"M9 20V4"}),i.jsx("path",{d:"M13 20V10l4-6"}),i.jsx("path",{d:"M17 20V4"}),i.jsx("path",{d:"M21 20V10"})]}),leaderboard_join:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})},H2=[{id:"first_workout",icon:$s.first_workout,name:"First Rep",desc:"Complete your first workout",category:"workouts"},{id:"workouts_10",icon:$s.workouts_10,name:"On Fire",desc:"Complete 10 workouts",category:"workouts"},{id:"workouts_25",icon:$s.workouts_25,name:"Lightning",desc:"Complete 25 workouts",category:"workouts"},{id:"workouts_50",icon:$s.workouts_50,name:"Iron Will",desc:"Complete 50 workouts",category:"workouts"},{id:"workouts_100",icon:$s.workouts_100,name:"Century Club",desc:"Complete 100 workouts",category:"workouts"},{id:"streak_2",icon:$s.streak_2,name:"2 Week Warrior",desc:"2-week workout streak",category:"streak"},{id:"streak_4",icon:$s.streak_4,name:"Month Strong",desc:"4-week workout streak",category:"streak"},{id:"streak_8",icon:$s.streak_8,name:"Unbreakable",desc:"8-week workout streak",category:"streak"},{id:"programme_done",icon:$s.programme_done,name:"Finisher",desc:"Complete a programme",category:"programme"},{id:"habits_7",icon:$s.habits_7,name:"Habit Machine",desc:"7-day perfect habit streak",category:"habits"},{id:"nutrition_7",icon:$s.nutrition_7,name:"Fuel Master",desc:"Log nutrition 7 days in a row",category:"nutrition"},{id:"first_pb",icon:$s.first_pb,name:"Record Breaker",desc:"Set your first PB",category:"pbs"},{id:"pbs_5",icon:$s.pbs_5,name:"Climbing",desc:"Set 5 personal bests",category:"pbs"},{id:"leaderboard_join",icon:$s.leaderboard_join,name:"Competitor",desc:"Join the leaderboard",category:"social"}];function T3(){const{currentUser:s,isClient:e,clientData:n,logout:a,updateClientData:l,loading:u}=br(),{isDark:d,toggleTheme:p}=ha(),g=Ds(),[y,x]=_.useState({hours:0,minutes:0,seconds:0}),[k,j]=_.useState(0),[P,$]=_.useState(0),[B,L]=_.useState(""),[te,Q]=_.useState(0),[ce,ve]=_.useState(0),[Ue,Ae]=_.useState(!1),[A,E]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[R,D]=_.useState(null),[M,U]=_.useState(0),[I,Ne]=_.useState(null),[pt,Y]=_.useState(!1),[ke,Pe]=_.useState(!1),[ae,Me]=_.useState(0),[O,W]=_.useState(0),[ge,Ee]=_.useState([]),[Re,Oe]=_.useState([]),[nt,He]=_.useState(null),[Ze,vt]=_.useState(!1),nn=_.useRef(null),[Tt,bt]=_.useState([]),[ne,ln]=_.useState(null),[Ft,_t]=_.useState(0),[At,ct]=_.useState(0),[Ke,Gt]=_.useState(0),[as,It]=_.useState(0),[Ut,Ln]=_.useState(null),Ht=_.useCallback((we,Je="info")=>{Ln({message:we,type:Je}),setTimeout(()=>Ln(null),4e3)},[]);_.useEffect(()=>{!u&&!s&&g("/")},[u,s,g]),_.useEffect(()=>{n?.photoURL&&He(n.photoURL)},[n]);const xn=async we=>{const Je=we.target.files?.[0];if(!(!Je||!n)){if(!Je.type.startsWith("image/")){Ht("Please select an image file","error");return}if(Je.size>5*1024*1024){Ht("Image must be under 5MB","error");return}vt(!0);try{const lt=await new Promise(Ge=>{const jt=new Image;jt.onload=()=>{const Ct=document.createElement("canvas"),Dt=400;let qt=jt.width,kt=jt.height;qt>kt?(kt=kt/qt*Dt,qt=Dt):(qt=qt/kt*Dt,kt=Dt),Ct.width=qt,Ct.height=kt,Ct.getContext("2d").drawImage(jt,0,0,qt,kt),Ct.toBlob(sn=>Ge(sn),"image/jpeg",.75)},jt.src=URL.createObjectURL(Je)}),Et=wl(_l,`profilePhotos/${n.id}`);await c3(Et,lt);const $t=await Jc(Et);await WI(ot(Be,"clients",n.id),{photoURL:$t}),He($t),l({photoURL:$t}),Ht("Profile photo updated!","success")}catch(lt){console.error("Photo upload error:",lt),Ht("Failed to upload photo","error")}vt(!1),nn.current&&(nn.current.value="")}};_.useEffect(()=>{const we=()=>{const lt=new Date,Et=new Date(lt);Et.setHours(23,59,59,999);const $t=Et-lt,Ge=Math.floor($t/(1e3*60*60)),jt=Math.floor($t%(1e3*60*60)/(1e3*60)),Ct=Math.floor($t%(1e3*60)/1e3);x({hours:Ge,minutes:jt,seconds:Ct}),j(60-Ct)};we();const Je=setInterval(we,1e3);return()=>clearInterval(Je)},[]),_.useEffect(()=>{const we=setInterval(()=>{It(Je=>(Je+1)%kp.length)},8e3);return()=>clearInterval(we)},[]),_.useEffect(()=>{if(!s||!n)return;(async()=>{let Je=null,lt=0,Et=[],$t=!1;try{const Ge=dl(new Date),jt=await In(ot(Be,"clientProgrammes",n.id));if(jt.exists()){const $e=jt.data(),ft=_3[$e.templateId];if(Y(!0),ft){const et=$e.completedSessions||{},ht=Object.keys(et).length,mt=ft.duration*ft.daysPerWeek;$(mt>0?Math.round(ht/mt*100):0);const an=$e.templateId.replace(/_/g," ").replace(/\b\w/g,Yn=>Yn.toUpperCase());L(an);const Ss=k3[$e.templateId];let qn=!1;for(let Yn=1;Yn<=ft.duration&&!qn;Yn++)for(let fn=0;fn<ft.daysPerWeek&&!qn;fn++)et[`w${Yn}d${fn}`]||(Ne({week:Yn,dayIdx:fn,label:Ss?.[fn]||`Day ${fn+1}`}),qn=!0);qn||(Pe(!0),$t=!0)}}const Ct=An(Be,"workoutLogs"),Dt=ds(Ct,Un("clientId","==",n.id));Je=await Gn(Dt);const qt=Je.docs.filter($e=>$e.data().type!=="programme").length;Q(qt);const kt=new Date,sn=kt.getDay(),Wt=sn===0?6:sn-1,rn=new Date(kt);rn.setDate(kt.getDate()-Wt),rn.setHours(0,0,0,0);const un=dl(rn),dn=Je.docs.filter($e=>($e.data().date||"")>=un).length;Me(dn);const Sn=An(Be,"habitLogs"),F=ds(Sn,Un("clientId","==",n.id),Un("date","==",Ge)),de=await Gn(F);let me=0;if(!de.empty){const $e=de.docs[0].data().habits||{};me=Object.values($e).filter(Boolean).length}ve(Math.round(me/bi*100)),U(me);const ye=await In(ot(Be,"nutritionTargets",n.id));ye.exists()&&D(ye.data());const he=await In(ot(Be,"nutritionLogs",`${n.id}_${Ge}`));if(he.exists()){const ft=(he.data().entries||[]).reduce((et,ht)=>({protein:et.protein+(ht.protein||0),carbs:et.carbs+(ht.carbs||0),fats:et.fats+(ht.fats||0),calories:et.calories+(ht.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});E(ft)}}catch(Ge){console.error("Error loading dashboard stats:",Ge)}try{let Ge=[];const jt=await In(ot(Be,"coreBuddyPBs",n.id));if(jt.exists()){const Ct=jt.data().exercises||{};W(Object.keys(Ct).length),lt=Object.keys(Ct).length,Ge=Object.entries(Ct).sort(([,Dt],[,qt])=>(qt.weight||0)-(Dt.weight||0)).slice(0,3).map(([Dt,qt])=>({name:Dt,weight:qt.weight,reps:qt.reps}))}if(Ge.length===0){const Ct={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},Dt=ds(An(Be,"personalBests"),Un("clientId","==",n.id)),qt=await Gn(Dt);if(!qt.empty){const kt={};qt.docs.forEach(Wt=>{const rn=Wt.data().benchmarks||{};Object.entries(rn).forEach(([un,dn])=>{if(!dn.weight||!Ct[un])return;const Sn=(dn.weight||0)*(dn.reps||1);(!kt[un]||Sn>(kt[un].weight||0)*(kt[un].reps||1))&&(kt[un]={name:Ct[un],weight:dn.weight,reps:dn.reps})})});const sn=Object.values(kt);W(sn.length),lt=sn.length,Ge=sn.sort((Wt,rn)=>(rn.weight||0)-(Wt.weight||0)).slice(0,3)}}Et=Ge,Ee(Ge)}catch(Ge){console.error("PB fetch error:",Ge)}try{const Ge=An(Be,"clients"),jt=ds(Ge,Un("leaderboardOptIn","==",!0)),Dt=(await Gn(jt)).docs.map(qt=>({id:qt.id,name:qt.data().name}));Oe(Dt.slice(0,3))}catch(Ge){console.error("Leaderboard preview error:",Ge)}try{let Ge=0;if(Je){const Wt=Je.docs.map(rn=>rn.data().date).filter(Boolean).sort().reverse();if(Wt.length>0){const rn=new Date;let un=new Date(rn);e:for(let dn=0;dn<52;dn++){const Sn=new Date(un),F=Sn.getDay(),de=F===0?6:F-1;Sn.setDate(Sn.getDate()-de),Sn.setHours(0,0,0,0);const me=new Date(Sn);me.setDate(me.getDate()+7);const ye=dl(Sn),he=dl(me);if(Wt.some(ft=>ft>=ye&&ft<he))Ge++;else{if(dn>0)break e;break}un.setDate(un.getDate()-7)}}}_t(Ge);let jt=0;for(let Wt=0;Wt<30;Wt++){const rn=new Date;rn.setDate(rn.getDate()-Wt);const un=dl(rn);try{const dn=await Gn(ds(An(Be,"habitLogs"),Un("clientId","==",n.id),Un("date","==",un)));if(dn.empty)break;{const Sn=dn.docs[0].data().habits||{};if(Object.values(Sn).filter(Boolean).length>=bi)jt++;else break}}catch{break}}ct(jt);let Ct=0;for(let Wt=0;Wt<30;Wt++){const rn=new Date;rn.setDate(rn.getDate()-Wt);const un=dl(rn);try{const dn=await In(ot(Be,"nutritionLogs",`${n.id}_${un}`));if(dn.exists()&&(dn.data().entries||[]).length>0)Ct++;else break}catch{break}}Gt(Ct);const Dt=Je?Je.docs.length:0,qt=[],kt=Wt=>qt.push(Wt);Dt>=1&&kt("first_workout"),Dt>=10&&kt("workouts_10"),Dt>=25&&kt("workouts_25"),Dt>=50&&kt("workouts_50"),Dt>=100&&kt("workouts_100"),Ge>=2&&kt("streak_2"),Ge>=4&&kt("streak_4"),Ge>=8&&kt("streak_8"),$t&&kt("programme_done"),jt>=7&&kt("habits_7"),Ct>=7&&kt("nutrition_7"),(lt>0||Et.length>0)&&kt("first_pb"),lt>=5&&kt("pbs_5"),n.leaderboardOptIn&&kt("leaderboard_join"),bt(qt);const sn={};qt.forEach(Wt=>{sn[Wt]={unlockedAt:new Date().toISOString()}}),Rn(ot(Be,"achievements",n.id),{badges:sn,updatedAt:new Date().toISOString()},{merge:!0}).catch(()=>{})}catch(Ge){console.error("Achievement computation error:",Ge)}Ae(!0)})()},[s,n]);const fe=we=>{const Je=we.currentTarget,lt=Je.querySelector(".ripple");lt&&lt.remove();const Et=Je.getBoundingClientRect(),$t=Math.max(Et.width,Et.height),Ge=we.clientX-Et.left-$t/2,jt=we.clientY-Et.top-$t/2,Ct=document.createElement("span");Ct.className="ripple",Ct.style.cssText=`width:${$t}px;height:${$t}px;left:${Ge}px;top:${jt}px;`,Je.appendChild(Ct),setTimeout(()=>Ct.remove(),600)},xe=n?.name?.split(" ")[0]||"there",{prev:Ce,next:tt}=w3(te),Ye=tt>Ce?Math.round((te-Ce)/(tt-Ce)*100):100,ze=[{label:"Programme",value:`${P}%`,pct:P,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${te}`,pct:Ye,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${ce}%`,pct:ce,color:"#38B6FF",size:"normal"}],Xe=we=>!R||!R[we]?0:Math.min(Math.round(A[we]/R[we]*100),100),We=(()=>{const we=new Date().getHours();return Ue&&M>=bi&&A.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:we>=5&&we<12?{main:"Rise and grind,",sub:"let's get after it!"}:we>=12&&we<17?{main:"Oye",sub:"crack on and make it count!"}:we>=17&&we<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),Ve=Ue?pt&&I&&!ke?{label:"NEXT SESSION",message:`Week ${I.week}, Day ${I.dayIdx+1}  ${I.label}`,cta:"Continue",action:()=>g("/client/core-buddy/programmes"),pct:P,ringLabel:`${P}%`}:M<bi?{label:"DAILY HABITS",message:`${M}/${bi} completed`,cta:"Open Habits",action:()=>g("/client/core-buddy/consistency"),pct:ce,ringLabel:`${M}/${bi}`}:A.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>g("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:pt?ke?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>g("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>g("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null;return i.jsxs("div",{className:"cb-dashboard","data-theme":d?"dark":"light",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsxs("div",{className:"header-actions",children:[i.jsx("button",{onClick:p,"aria-label":"Toggle theme",children:d?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),i.jsx("button",{onClick:a,"aria-label":"Log out",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),i.jsx("polyline",{points:"16 17 21 12 16 7"}),i.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),i.jsxs("main",{className:"cb-main",children:[i.jsxs("div",{className:"cb-ring-container",children:[i.jsxs("div",{className:"cb-ring",children:[i.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:Ty.map((we,Je)=>{const lt=Je<k;return i.jsx("line",{x1:we.x1,y1:we.y1,x2:we.x2,y2:we.y2,className:`ring-tick ${lt?"elapsed":"remaining"}`,strokeWidth:we.thick?"3":"2"},Je)})}),i.jsx("div",{className:"cb-ring-center",children:i.jsxs("div",{className:"cb-ring-logo",onClick:()=>nn.current?.click(),role:"button",tabIndex:0,"aria-label":"Change profile photo",children:[i.jsx("img",{src:nt||"/Logo.webp",alt:nt?"Profile":"Mind Core Fitness"}),i.jsx("div",{className:`cb-photo-overlay${Ze?" uploading":""}`,children:Ze?i.jsx("div",{className:"cb-photo-spinner"}):i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"2",children:[i.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),i.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),i.jsx("input",{ref:nn,type:"file",accept:"image/*",onChange:xn,style:{display:"none"}})]})})]}),i.jsxs("div",{className:"cb-ring-countdown",children:[i.jsx("span",{className:"cb-timer-digit",children:String(y.hours).padStart(2,"0")}),i.jsx("span",{className:"cb-timer-colon",children:":"}),i.jsx("span",{className:"cb-timer-digit",children:String(y.minutes).padStart(2,"0")}),i.jsx("span",{className:"cb-timer-colon",children:":"}),i.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(y.seconds).padStart(2,"0")})]}),i.jsx("span",{className:"cb-ring-label",children:"remaining today"}),i.jsxs("p",{className:"cb-ring-tagline",children:[kp[as].text," ",i.jsx("strong",{children:kp[as].bold})]},as)]}),i.jsx("div",{className:"cb-stats-row",children:ze.map(we=>{const Je=(we.size==="large",38),lt=2*Math.PI*Je,Et=lt-we.pct/100*lt;return i.jsxs("div",{className:`cb-stat-item${we.size==="large"?" cb-stat-large":""}`,children:[i.jsxs("div",{className:"cb-stat-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:Je}),i.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:Je,style:{stroke:we.color},strokeDasharray:lt,strokeDashoffset:Et})]}),i.jsx("span",{className:"cb-stat-value",style:{color:we.color},children:we.value})]}),i.jsx("span",{className:"cb-stat-label",children:we.label})]},we.label)})}),i.jsxs("p",{className:"cb-coach-msg",children:[We.main," ",i.jsx("strong",{children:xe}),"  ",We.sub]}),Ve&&i.jsxs("button",{className:"cb-nudge-card",onClick:Ve.action||void 0,style:Ve.action?void 0:{cursor:"default"},children:[i.jsxs("div",{className:"cb-nudge-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),i.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-Ve.pct/100*2*Math.PI*38})]}),i.jsx("span",{className:"cb-nudge-ring-val",children:Ve.ringLabel})]}),i.jsxs("div",{className:"cb-nudge-info",children:[i.jsx("span",{className:"cb-nudge-label",children:Ve.label}),i.jsx("span",{className:"cb-nudge-title",children:Ve.message}),Ve.cta&&i.jsxs("span",{className:"cb-nudge-cta",children:[Ve.cta," "]})]})]}),i.jsxs("div",{className:"cb-features",children:[i.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:we=>{fe(we),g("/client/core-buddy/nutrition")},children:[i.jsxs("div",{className:"cb-card-top-row",children:[i.jsx("div",{className:"cb-card-content",children:i.jsx("h3",{children:"Today's Nutrition"})}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsx("div",{className:"cb-card-preview-row",children:i.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:Xe("protein"),color:"#14b8a6"},{label:"C",pct:Xe("carbs"),color:"var(--color-primary)"},{label:"F",pct:Xe("fats"),color:"#eab308"},{label:"Cal",pct:Xe("calories"),color:"#38B6FF"}].map(we=>{const lt=2*Math.PI*38,Et=lt-we.pct/100*lt;return i.jsxs("div",{className:"cb-mini-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),i.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:we.color},strokeDasharray:lt,strokeDashoffset:Et})]}),i.jsx("span",{style:{color:we.color},children:we.label})]},we.label)})})}),i.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),i.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:we=>{fe(we),g("/client/core-buddy/workouts")},children:[i.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),i.jsxs("div",{className:"cb-hero-stats",children:[i.jsxs("span",{children:[ae," this week"]}),i.jsx("span",{className:"cb-hero-dot",children:""}),i.jsxs("span",{children:[te," total"]})]}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("div",{className:"cb-grid-row",children:[i.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:we=>{fe(we),g("/client/core-buddy/consistency")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"Habits"}),i.jsx("div",{className:"cb-habit-dots",children:Array.from({length:bi},(we,Je)=>i.jsx("span",{className:`cb-habit-dot${Je<M?" done":""}`},Je))}),i.jsxs("span",{className:"cb-habit-dots-label",children:[M,"/",bi," today"]})]}),i.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:we=>{fe(we),g("/client/personal-bests?mode=corebuddy")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"PBs"}),ge.length>0?i.jsx("div",{className:"cb-pb-preview",children:ge.slice(0,2).map(we=>i.jsxs("div",{className:"cb-pb-entry",children:[i.jsx("span",{className:"cb-pb-name",children:we.name}),i.jsxs("span",{className:"cb-pb-value",children:[we.weight,"kg"]})]},we.name))}):i.jsxs("div",{className:"cb-progress-preview",children:[i.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),i.jsx("span",{children:"Start lifting!"})]})]}),i.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),i.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:we=>{fe(we),g("/client/leaderboard")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"Leaderboard"}),Re.length>0?i.jsx("div",{className:"cb-lb-preview",children:Re.map((we,Je)=>{const lt=["#FFD700","#A8B4C0","#CD7F32"][Je],Et=we.name?we.name.split(" ").map(Ge=>Ge[0]).join("").slice(0,2).toUpperCase():"?",$t=we.id===n?.id;return i.jsxs("div",{className:`cb-lb-entry${$t?" cb-lb-me":""}`,children:[i.jsx("div",{className:"cb-lb-avatar",style:{borderColor:lt},children:i.jsx("span",{children:Et})}),i.jsxs("span",{className:"cb-lb-rank",style:{color:lt},children:["#",Je+1]})]},we.id)})}):i.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("button",{className:"cb-feature-card cb-card-buddies ripple-btn",onClick:we=>{fe(we),g("/client/core-buddy/buddies")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"Buddies"}),i.jsx("p",{children:"Connect with other members and track each other's progress"})]}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("div",{className:"cb-achievements-section",children:[i.jsx("h3",{className:"cb-achievements-title",children:"Achievements"}),i.jsx("div",{className:"cb-badges-scroll",children:H2.map(we=>{const Je=Tt.includes(we.id);return i.jsxs("button",{className:`cb-badge${Je?" unlocked":" locked"}`,onClick:()=>ln(ne?.id===we.id?null:we),children:[i.jsx("span",{className:"cb-badge-icon",children:we.icon}),i.jsx("span",{className:"cb-badge-name",children:we.name})]},we.id)})}),ne&&i.jsxs("div",{className:"cb-badge-detail",children:[i.jsx("span",{className:"cb-badge-detail-icon",children:ne.icon}),i.jsxs("div",{className:"cb-badge-detail-info",children:[i.jsx("strong",{children:ne.name}),i.jsx("span",{children:ne.desc}),Tt.includes(ne.id)?i.jsx("span",{className:"cb-badge-status unlocked",children:"Unlocked"}):i.jsx("span",{className:"cb-badge-status locked",children:"Locked"})]})]}),i.jsxs("p",{className:"cb-badges-count",children:[Tt.length,"/",H2.length," unlocked"]})]})]})]}),i.jsx(ca,{active:"home"}),Ut&&i.jsxs("div",{className:`toast-notification ${Ut.type}`,children:[Ut.type==="info"&&i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),i.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),Ut.message]})]})}const Tp=new Map;function xi(){return new Date().toISOString().split("T")[0]}const E3=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],j3={breakfast:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),i.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),i.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),i.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),i.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function S3(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function N3(){const{currentUser:s,isClient:e,clientData:n,loading:a}=br(),{isDark:l,toggleTheme:u,accent:d}=ha(),p=Ds(),[g,y]=_.useState("loading"),[x,k]=_.useState(null),[j,P]=_.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[$,B]=_.useState(null),[L,te]=_.useState(xi()),[Q,ce]=_.useState({entries:[],water:0}),[ve,Ue]=_.useState({protein:0,carbs:0,fats:0,calories:0}),[Ae,A]=_.useState(!1),[E,R]=_.useState(!1),[D,M]=_.useState(()=>{const T=new Date;return{year:T.getFullYear(),month:T.getMonth()}}),[U,I]=_.useState(S3),[Ne,pt]=_.useState(null),[Y,ke]=_.useState(null),[Pe,ae]=_.useState(!1),[Me,O]=_.useState(null),[W,ge]=_.useState(""),[Ee,Re]=_.useState(!1),[Oe,nt]=_.useState(""),[He,Ze]=_.useState([]),[vt,nn]=_.useState(!1),[Tt,bt]=_.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[ne,ln]=_.useState(null),[Ft,_t]=_.useState("100"),[At,ct]=_.useState(0),[Ke,Gt]=_.useState("weight"),[as,It]=_.useState(0),[Ut,Ln]=_.useState(null);_.useRef(null);const Ht=_.useRef(!1),xn=_.useRef(null),fe=_.useRef(null),xe=_.useRef(null),Ce=_.useCallback((T,C="info")=>{Ln({message:T,type:C}),setTimeout(()=>Ln(null),3e3)},[]);_.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const C=await In(ot(Be,"nutritionTargets",n.id));C.exists()?(k(C.data()),y("dashboard")):y("setup")}catch(C){console.error("Error loading nutrition data:",C),y("setup")}})()},[n?.id]),_.useEffect(()=>{if(!n?.id)return;(async()=>{try{const C=await In(ot(Be,"nutritionLogs",`${n.id}_${L}`));if(C.exists()){const G=C.data();ce({entries:G.entries||[],water:G.water||0})}else ce({entries:[],water:0})}catch(C){console.error("Error loading log:",C),ce({entries:[],water:0})}})()},[n?.id,L]),_.useEffect(()=>{const T=Q.entries.reduce((C,G)=>({protein:C.protein+(G.protein||0),carbs:C.carbs+(G.carbs||0),fats:C.fats+(G.fats||0),calories:C.calories+(G.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});Ue(T)},[Q.entries]);const tt=async T=>{try{await Rn(ot(Be,"nutritionLogs",`${n.id}_${L}`),{clientId:n.id,date:L,entries:T.entries,water:T.water,updatedAt:dt.now()})}catch(C){console.error("Error saving nutrition log:",C)}},Ye=L===xi(),ze=(T,C)=>new Date(T,C+1,0).getDate(),Xe=(T,C)=>new Date(T,C,1).getDay(),We=["January","February","March","April","May","June","July","August","September","October","November","December"],Ve=["Su","Mo","Tu","We","Th","Fr","Sa"],we=()=>{let T=parseFloat(j.weight);j.weightUnit==="lbs"&&(T*=.453592);let C;j.heightUnit==="cm"?C=parseFloat(j.height):C=(parseFloat(j.heightFeet)||0)*30.48+(parseFloat(j.heightInches)||0)*2.54;const G=parseInt(j.age);let J=j.gender==="male"?10*T+6.25*C-5*G+5:10*T+6.25*C-5*G-161;const Le=J*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[j.dailyActivity],De={low:100,moderate:200,high:300,daily:400},Ot=Math.round(Le+De[j.trainingFrequency]);let xt=Ot,H,ue;switch(j.goal){case"lose":xt=Ot*(1-{light:.15,moderate:.2,harsh:.25}[j.deficitLevel]),H=2.2,ue=.3;break;case"build":xt=Ot*1.1,H=2,ue=.22;break;default:H=1.8,ue=.25}xt=Math.max(xt,j.gender==="male"?1400:1100);const re=Math.round(T*H),Se=Math.round(xt*ue/9),Ie=Math.max(0,Math.round((xt-re*4-Se*9)/4));B({calories:Math.round(xt),protein:re,carbs:Ie,fats:Se,bmr:Math.round(J),neat:Math.round(Le),exerciseAdd:De[j.trainingFrequency],tdee:Math.round(Ot)})},Je=async()=>{if($)try{const T={clientId:n.id,calories:$.calories,protein:$.protein,carbs:$.carbs,fats:$.fats,waterGoal:8,goal:j.goal,updatedAt:dt.now()};await Rn(ot(Be,"nutritionTargets",n.id),T),k(T),y("dashboard"),Ce("Macro targets saved!","success")}catch(T){console.error("Error saving targets:",T),Ce("Failed to save targets. Please try again.","error")}},lt=()=>{const T=j.weight&&parseFloat(j.weight)>0,C=j.age&&parseInt(j.age)>0,G=j.heightUnit==="cm"?j.height&&parseFloat(j.height)>0:j.heightFeet&&parseFloat(j.heightFeet)>0||j.heightInches&&parseFloat(j.heightInches)>0;return T&&C&&G},Et="nut_favourite_foods",$t=()=>{try{return JSON.parse(localStorage.getItem(Et)||"[]")}catch{return[]}},Ge=T=>$t().some(C=>C.name.toLowerCase()===(T||"").toLowerCase()),jt=T=>{const C=$t(),G=C.findIndex(J=>J.name.toLowerCase()===T.name.toLowerCase());G>=0?C.splice(G,1):C.unshift({name:T.name,protein:T.protein,carbs:T.carbs,fats:T.fats,calories:T.calories,serving:T.serving,per100g:T.per100g||null,servingUnit:T.servingUnit||"g",portion:T.portion||null}),localStorage.setItem(Et,JSON.stringify(C)),It(J=>J+1)},Ct=T=>{const C=[...Q.entries,{...T,meal:U,id:Date.now(),addedAt:new Date().toISOString()}],G={...Q,entries:C};ce(G),tt(G),ke(null),ln(null),_t("100"),ct(0),Gt("weight"),bt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),Ce("Food added!","success")},Dt=T=>{const C=Q.entries.filter(J=>J.id!==T),G={...Q,entries:C};ce(G),tt(G)},qt=_.useRef(null),kt=async()=>{ae(!0);const T=document.querySelector("#barcode-reader");if(!T){ae(!1),Ce("Scanner container not found.","error");return}if(!qt.current)try{const G=await vr(()=>import("./quagga.min-BbicSfvA.js").then(J=>J.q),[]);qt.current=G.default}catch(G){console.error("Failed to load barcode scanner:",G),ae(!1),Ce("Could not load scanner.","error");return}const C=qt.current;C.init({inputStream:{type:"LiveStream",target:T,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},G=>{if(G){console.error("Quagga init error:",G),ae(!1),Ce("Could not access camera. Check permissions.","error");return}C.start(),Ht.current=!0}),C.onDetected(G=>{const J=G.codeResult.decodedCodes?.filter(Le=>Le.error!==void 0)?.map(Le=>Le.error)||[];if((J.length>0?J.reduce((Le,De)=>Le+De,0)/J.length:1)<.15){const Le=G.codeResult.code;C.offDetected(),O(Le)}})},sn=()=>{const T=qt.current;Ht.current&&T&&(T.stop(),T.offDetected(),Ht.current=!1),ae(!1)},Wt=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,rn=T=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((T||"").replace(/\s/g,"")),un=T=>{if(!T)return{value:100,unit:"g"};const C=T.toLowerCase().replace(/\s/g,""),G=C.match(/([\d.]+)/),J=G?parseFloat(G[1]):100;return rn(T)?/cl/.test(C)?{value:J*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(C)&&!/ml/.test(C)?{value:J*1e3,unit:"ml"}:{value:J,unit:"ml"}:{value:J,unit:"g"}},dn=T=>{if(rn(T.serving_size)||rn(T.quantity))return"ml";const C=T.product_name||T.product_name_en||"";return Wt.test(C)?"ml":"g"},Sn=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],F=(T,C)=>{const G=T||"",J=G.match(/\((\d+\.?\d*)\s*g\)/i),Fe=G.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(J&&Fe){const Ot=parseFloat(J[1]);let xt=Fe[1].replace(/^\d+\s*/,"").trim();if(xt&&Ot>0)return{label:xt,weight:Ot}}const Le=G.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Le){const Ot=parseFloat(Le[1]);let xt=Le[2].replace(/^\d+\s*/,"").trim();if(xt&&Ot>0)return{label:xt,weight:Ot}}const De=C||"";for(const{pattern:Ot,label:xt,weight:H}of Sn)if(Ot.test(De))return{label:xt,weight:H};return null},de=T=>{const C=T.nutriments||{},G=dn(T),J=un(T.serving_size),Fe=G==="ml"?J.unit==="ml"?J.value:100:J.value,Le=T.product_name||T.product_name_en||"Unknown Product",De=F(T.serving_size,Le);return{name:Le,brand:T.brands||"",image:T.image_small_url||T.image_url||null,servingSize:T.serving_size||"100g",servingValue:Fe,servingUnit:G,portion:De,protein:Math.round(C.proteins_100g||C.proteins||0),carbs:Math.round(C.carbohydrates_100g||C.carbohydrates||0),fats:Math.round(C.fat_100g||C.fat||0),calories:Math.round(C["energy-kcal_100g"]||C["energy-kcal"]||(C.energy_100g?C.energy_100g/4.184:0)),per100g:!0}},me=async T=>{Re(!0);try{const C=`https://world.openfoodfacts.org/api/v2/product/${T}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,G=await fetch(C);if(!G.ok)throw new Error(`HTTP ${G.status}`);const J=await G.json();if(J.status==="success"||J.status===1||J.product){const Fe=de(J.product);Fe.calories===0&&Fe.protein===0&&Fe.carbs===0?Ce("Product found but no nutrition data available.","error"):(ln(Fe),Fe.portion?(ct(1),_t(String(Fe.portion.weight)),Gt("portion")):(ct(0),_t(String(Fe.servingValue||100)),Gt("weight")),ge(""))}else Ce("Product not found. Try search or manual entry.","error")}catch(C){console.error("Barcode lookup error:",C),Ce("Failed to look up product. Check your connection.","error")}Re(!1)},ye=(T,C,G)=>{const J=T.toLowerCase().trim(),Fe=C.toLowerCase().trim(),Le=G.toLowerCase().trim();let De=0;return(J===Le||J===Le+"s"||J+"s"===Le)&&(De+=100),(J.endsWith(" "+Le)||J.endsWith(" "+Le+"s"))&&(De+=40),(J.startsWith(Le+" ")||J.startsWith(Le+"s "))&&(De+=15),Le.split(/\s+/).some(xt=>Fe===xt||Fe.startsWith(xt))&&(De+=30),De+=Math.max(0,30-J.length),De},he=async()=>{if(!Oe.trim())return;xn.current&&xn.current.abort();const T=new AbortController;xn.current=T;const C=Oe.trim().toLowerCase(),G=C.split(/\s+/).filter(Boolean);if(Tp.has(C)){Ze(Tp.get(C));return}nn(!0);try{const Fe=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(Oe.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Le=await fetch(Fe,{signal:T.signal});if(!Le.ok)throw new Error(`HTTP ${Le.status}`);const Ot=((await Le.json()).products||[]).map(xt=>de(xt)).filter(xt=>xt.name!=="Unknown Product"&&(xt.calories>0||xt.protein>0)).filter(xt=>{const H=(xt.name+" "+xt.brand).toLowerCase();return G.every(ue=>H.includes(ue))}).sort((xt,H)=>ye(H.name,H.brand,C)-ye(xt.name,xt.brand,C)).slice(0,10);Tp.set(C,Ot),Ze(Ot),Ot.length===0&&Ce("No results found. Try a different search.","info")}catch(J){if(J.name==="AbortError")return;console.error("Search error:",J),Ce("Search failed. Check your connection.","error")}nn(!1)};_.useEffect(()=>{if(fe.current&&clearTimeout(fe.current),!(!Oe.trim()||Y!=="search"||ne))return fe.current=setTimeout(()=>{he()},700),()=>clearTimeout(fe.current)},[Oe]);const $e=()=>{const T={...Q,water:Q.water+1};ce(T),tt(T)},ft=()=>{if(Q.water<=0)return;const T={...Q,water:Q.water-1};ce(T),tt(T)},et={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},ht=80,mt=2*Math.PI*ht,an=(T,C,G,J,Fe)=>{const Le=J>0?Math.min(100,Math.round(G/J*100)):0,De=mt-Le/100*mt,Ot=et[Fe]||"#14b8a6";return i.jsxs("div",{className:"nut-ring-wrap",children:[i.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[i.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:ht}),i.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:ht,style:{stroke:Ot},strokeDasharray:mt,strokeDashoffset:De})]}),i.jsxs("div",{className:"nut-ring-center",children:[i.jsx("span",{className:"nut-ring-value",style:{color:Ot},children:Math.round(G)}),i.jsxs("span",{className:"nut-ring-target",children:["/ ",J,T==="Calories"?"":"g"]}),i.jsx("span",{className:"nut-ring-label",style:{color:Ot},children:C})]}),i.jsxs("span",{className:"nut-ring-pct",style:{color:Ot},children:[Le,"%"]})]})};if(_.useEffect(()=>{if(!Me)return;const T=setTimeout(()=>{const C=Me;sn(),O(null),me(C)},1500);return()=>clearTimeout(T)},[Me]),_.useEffect(()=>()=>{const T=qt.current;if(Ht.current&&T){try{T.stop(),T.offDetected()}catch{}Ht.current=!1}},[]),a||g==="loading")return i.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsx("div",{className:"nut-loading-inline",children:i.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return i.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"nut-main",children:[i.jsxs("div",{className:"nut-setup-intro",children:[i.jsx("h2",{children:"Set Your Daily Targets"}),i.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),i.jsxs("div",{className:"nut-calc-form",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Gender"}),i.jsxs("div",{className:"nut-toggle-group",children:[i.jsx("button",{className:j.gender==="male"?"active":"",onClick:()=>{P(T=>({...T,gender:"male"})),B(null)},children:"Male"}),i.jsx("button",{className:j.gender==="female"?"active":"",onClick:()=>{P(T=>({...T,gender:"female"})),B(null)},children:"Female"})]})]}),i.jsxs("div",{className:"nut-form-row",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Age"}),i.jsx("input",{type:"number",value:j.age,onChange:T=>{P(C=>({...C,age:T.target.value})),B(null)},placeholder:"Years",min:"15",max:"100"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Weight"}),i.jsxs("div",{className:"nut-input-unit",children:[i.jsx("input",{type:"number",value:j.weight,onChange:T=>{P(C=>({...C,weight:T.target.value})),B(null)},placeholder:j.weightUnit,min:"30",max:"300"}),i.jsxs("div",{className:"nut-unit-toggle",children:[i.jsx("button",{className:j.weightUnit==="kg"?"active":"",onClick:()=>{P(T=>({...T,weightUnit:"kg"})),B(null)},children:"kg"}),i.jsx("button",{className:j.weightUnit==="lbs"?"active":"",onClick:()=>{P(T=>({...T,weightUnit:"lbs"})),B(null)},children:"lbs"})]})]})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Height"}),i.jsxs("div",{className:"nut-input-unit",children:[j.heightUnit==="cm"?i.jsx("input",{type:"number",value:j.height,onChange:T=>{P(C=>({...C,height:T.target.value})),B(null)},placeholder:"cm",min:"100",max:"250"}):i.jsxs("div",{className:"nut-height-imperial",children:[i.jsx("input",{type:"number",value:j.heightFeet,onChange:T=>{P(C=>({...C,heightFeet:T.target.value})),B(null)},placeholder:"ft",min:"4",max:"7"}),i.jsx("input",{type:"number",value:j.heightInches,onChange:T=>{P(C=>({...C,heightInches:T.target.value})),B(null)},placeholder:"in",min:"0",max:"11"})]}),i.jsxs("div",{className:"nut-unit-toggle",children:[i.jsx("button",{className:j.heightUnit==="cm"?"active":"",onClick:()=>{P(T=>({...T,heightUnit:"cm"})),B(null)},children:"cm"}),i.jsx("button",{className:j.heightUnit==="ft"?"active":"",onClick:()=>{P(T=>({...T,heightUnit:"ft"})),B(null)},children:"ft/in"})]})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Daily Activity (outside of training)"}),i.jsxs("select",{value:j.dailyActivity,onChange:T=>{P(C=>({...C,dailyActivity:T.target.value})),B(null)},children:[i.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),i.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),i.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),i.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Training Sessions per Week"}),i.jsxs("select",{value:j.trainingFrequency,onChange:T=>{P(C=>({...C,trainingFrequency:T.target.value})),B(null)},children:[i.jsx("option",{value:"low",children:"1-2 sessions"}),i.jsx("option",{value:"moderate",children:"3-4 sessions"}),i.jsx("option",{value:"high",children:"5-6 sessions"}),i.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Fitness Goal"}),i.jsxs("div",{className:"nut-goal-options",children:[i.jsxs("button",{className:j.goal==="lose"?"active":"",onClick:()=>{P(T=>({...T,goal:"lose"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"-"}),i.jsx("span",{children:"Lose Weight"})]}),i.jsxs("button",{className:j.goal==="maintain"?"active":"",onClick:()=>{P(T=>({...T,goal:"maintain"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"="}),i.jsx("span",{children:"Maintain"})]}),i.jsxs("button",{className:j.goal==="build"?"active":"",onClick:()=>{P(T=>({...T,goal:"build"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"+"}),i.jsx("span",{children:"Build Muscle"})]})]})]}),j.goal==="lose"&&i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Deficit Level"}),i.jsxs("div",{className:"nut-deficit-options",children:[i.jsxs("button",{className:j.deficitLevel==="light"?"active":"",onClick:()=>{P(T=>({...T,deficitLevel:"light"})),B(null)},children:[i.jsx("strong",{children:"Mild"}),i.jsx("span",{children:"15% below TDEE"})]}),i.jsxs("button",{className:j.deficitLevel==="moderate"?"active":"",onClick:()=>{P(T=>({...T,deficitLevel:"moderate"})),B(null)},children:[i.jsx("strong",{children:"Moderate"}),i.jsx("span",{children:"20% below TDEE"})]}),i.jsxs("button",{className:j.deficitLevel==="harsh"?"active":"",onClick:()=>{P(T=>({...T,deficitLevel:"harsh"})),B(null)},children:[i.jsx("strong",{children:"Aggressive"}),i.jsx("span",{children:"25% below TDEE"})]})]})]}),i.jsx("button",{className:"nut-calc-btn",onClick:we,disabled:!lt(),children:"Calculate Macros"})]}),$&&i.jsxs("div",{className:"nut-calc-results",children:[i.jsx("h3",{children:"Your Daily Targets"}),i.jsxs("div",{className:"nut-calc-rings",children:[an("Protein","Protein",$.protein,$.protein,"ring-protein"),an("Carbs","Carbs",$.carbs,$.carbs,"ring-carbs"),an("Fats","Fats",$.fats,$.fats,"ring-fats"),an("Calories","Calories",$.calories,$.calories,"ring-cals")]}),i.jsxs("div",{className:"nut-calc-info",children:[i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"BMR (body at rest)"}),i.jsxs("span",{children:[$.bmr," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"+ Daily activity (NEAT)"}),i.jsxs("span",{children:[$.neat," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"+ Training sessions"}),i.jsxs("span",{children:["+",$.exerciseAdd," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[i.jsx("span",{children:"TDEE (total burn)"}),i.jsxs("span",{children:[$.tdee," cal"]})]})]}),i.jsx("button",{className:"nut-save-targets-btn",onClick:Je,children:"Set as My Daily Targets"})]})]}),Ut&&i.jsx("div",{className:`toast-notification ${Ut.type}`,children:Ut.message})]});const Ss=T=>{const C=new Date(T+"T12:00:00"),G=C.getDay(),J=new Date(C);J.setDate(C.getDate()-(G+6)%7);const Fe=[];for(let Le=0;Le<7;Le++){const De=new Date(J);De.setDate(J.getDate()+Le),Fe.push(De.toISOString().split("T")[0])}return Fe},qn=["M","T","W","T","F","S","S"],Yn=(T,C="search")=>{I(T),C==="scan"?(ke("scan"),ln(null)):C==="manual"?(ke("manual"),bt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):C==="favourites"?ke("favourites"):(ke("search"),Ze([]),nt(""))},fn=Ss(L),z=new Date(L+"T12:00:00"),oe=`${We[z.getMonth()]} ${z.getFullYear()}`;return i.jsxs("div",{className:"nut-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"nut-dark-zone",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsxs("div",{className:"header-actions",children:[i.jsx("button",{onClick:()=>{y("setup"),B(null)},"aria-label":"Recalculate macros",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),i.jsxs("div",{className:"nut-dark-content",children:[i.jsxs("div",{className:"nut-week-strip",children:[i.jsxs("div",{className:"nut-week-header",children:[i.jsx("button",{className:"nut-week-arrow",onClick:()=>{const T=new Date(L+"T12:00:00");T.setDate(T.getDate()-7);const C=T.toISOString().split("T")[0];te(C)},"aria-label":"Previous week",children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:i.jsx("polyline",{points:"15 18 9 12 15 6"})})}),i.jsx("button",{className:"nut-week-month-label",onClick:()=>{A(!Ae),M({year:z.getFullYear(),month:z.getMonth()})},children:oe}),i.jsx("button",{className:"nut-week-arrow",onClick:()=>{const T=new Date(L+"T12:00:00");T.setDate(T.getDate()+7);const C=T.toISOString().split("T")[0];C<=xi()&&te(C)},"aria-label":"Next week",disabled:fn[6]>=xi(),children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:i.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),i.jsx("div",{className:"nut-week-days",children:fn.map((T,C)=>{const G=new Date(T+"T12:00:00").getDate(),J=T===L,Fe=T>xi(),Le=T===xi();return i.jsxs("button",{className:`nut-week-day${J?" selected":""}${Le?" today":""}${Fe?" future":""}`,disabled:Fe,onClick:()=>te(T),children:[i.jsx("span",{className:"nut-week-day-letter",children:qn[C]}),i.jsx("span",{className:"nut-week-day-num",children:G})]},T)})})]}),Ae&&i.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[i.jsxs("div",{className:"nut-cal-header",children:[i.jsx("button",{onClick:()=>M(T=>{let C=T.month-1,G=T.year;return C<0&&(C=11,G--),{year:G,month:C}}),children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("polyline",{points:"15 18 9 12 15 6"})})}),i.jsxs("span",{children:[We[D.month]," ",D.year]}),i.jsx("button",{onClick:()=>M(T=>{let C=T.month+1,G=T.year;return C>11&&(C=0,G++),{year:G,month:C}}),disabled:D.year===new Date().getFullYear()&&D.month>=new Date().getMonth(),children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),i.jsx("div",{className:"nut-cal-days-header",children:Ve.map(T=>i.jsx("span",{children:T},T))}),i.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Xe(D.year,D.month))].map((T,C)=>i.jsx("span",{},`e${C}`)),[...Array(ze(D.year,D.month))].map((T,C)=>{const G=C+1,J=`${D.year}-${String(D.month+1).padStart(2,"0")}-${String(G).padStart(2,"0")}`,Fe=J>xi(),Le=J===L,De=J===xi();return i.jsx("button",{className:`nut-cal-day${Le?" selected":""}${De?" today":""}${Fe?" future":""}`,disabled:Fe,onClick:()=>{te(J),A(!1)},children:G},G)})]})]}),i.jsxs("div",{className:"nut-rings-row",children:[an("Protein","Protein",ve.protein,x.protein,"ring-protein"),an("Carbs","Carbs",ve.carbs,x.carbs,"ring-carbs"),an("Fats","Fats",ve.fats,x.fats,"ring-fats"),an("Calories","kCal",ve.calories,x.calories,"ring-cals")]})]})]}),i.jsx("div",{className:"nut-light-zone",children:i.jsxs("div",{className:"nut-light-content",children:[Ye&&i.jsxs("button",{className:"nut-water-quick",onClick:()=>R(!0),children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),i.jsxs("span",{className:"nut-water-quick-count",children:[Q.water," / ",x?.waterGoal||8]}),i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),i.jsx("div",{className:"nut-log-section",children:i.jsx("div",{className:"nut-meals-list",children:E3.map(T=>{const C=Q.entries.filter(J=>(J.meal||"snacks")===T.key),G=C.reduce((J,Fe)=>({protein:J.protein+(Fe.protein||0),carbs:J.carbs+(Fe.carbs||0),fats:J.fats+(Fe.fats||0),calories:J.calories+(Fe.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return i.jsxs("div",{className:"nut-meal-card",children:[i.jsxs("div",{className:"nut-meal-card-header",children:[i.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${T.key}`,children:j3[T.key]}),i.jsx("span",{className:"nut-meal-card-title",children:T.label}),C.length>0&&i.jsxs("span",{className:"nut-meal-card-cal",children:[G.calories," cal"]}),Ye&&i.jsxs("div",{className:"nut-add-wrapper",children:[i.jsx("button",{className:"nut-meal-add-btn",onClick:()=>pt(Ne===T.key?null:T.key),"aria-label":`Add to ${T.label}`,children:i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),Ne===T.key&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>pt(null)}),i.jsxs("div",{className:"nut-add-picker",children:[i.jsxs("button",{onClick:()=>{pt(null),Yn(T.key,"scan")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),i.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),i.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),i.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),i.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),i.jsx("span",{children:"Scan"})]}),i.jsxs("button",{onClick:()=>{pt(null),Yn(T.key,"search")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),i.jsx("span",{children:"Search"})]}),i.jsxs("button",{onClick:()=>{pt(null),Yn(T.key,"manual")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),i.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),i.jsx("span",{children:"Manual"})]}),i.jsxs("button",{onClick:()=>{pt(null),Yn(T.key,"favourites")},children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),i.jsx("span",{children:"Favs"})]})]})]})]})]}),C.length>0&&i.jsxs("div",{className:"nut-meal-bars",children:[i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,x.protein>0?G.protein/x.protein*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[G.protein,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,x.carbs>0?G.carbs/x.carbs*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[G.carbs,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,x.fats>0?G.fats/x.fats*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[G.fats,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,x.calories>0?G.calories/x.calories*100:0)}%`}})}),i.jsx("span",{className:"nut-meal-bar-val",children:G.calories})]})]}),C.length>0&&i.jsx("div",{className:"nut-log-list",children:C.map(J=>i.jsxs("div",{className:"nut-log-item",children:[i.jsxs("div",{className:"nut-log-item-info",children:[i.jsx("span",{className:"nut-log-item-name",children:J.name}),J.serving&&i.jsx("span",{className:"nut-log-item-serving",children:J.serving})]}),i.jsxs("div",{className:"nut-log-item-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[J.protein,"p"]}),i.jsxs("span",{className:"nut-macro-c",children:[J.carbs,"c"]}),i.jsxs("span",{className:"nut-macro-f",children:[J.fats,"f"]}),i.jsx("span",{className:"nut-macro-cal",children:J.calories})]}),Ye&&i.jsx("button",{className:"nut-log-delete",onClick:()=>Dt(J.id),"aria-label":"Remove",children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},J.id))}),C.length===0&&i.jsx("div",{className:"nut-meal-empty",children:i.jsx("p",{children:Ye?"Tap + to add food":"No entries"})})]},T.key)})})})]})}),E&&i.jsx("div",{className:"nut-modal-overlay",onClick:()=>R(!1),children:i.jsxs("div",{className:"nut-water-popup",onClick:T=>T.stopPropagation(),children:[i.jsxs("div",{className:"nut-water-popup-header",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),i.jsx("span",{children:"Water Intake"}),i.jsx("button",{className:"nut-modal-close",onClick:()=>R(!1),children:i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),i.jsxs("div",{className:"nut-water-popup-body",children:[i.jsx("div",{className:"nut-water-glasses",children:[...Array(x?.waterGoal||8)].map((T,C)=>i.jsx("div",{className:`nut-water-glass ${C<Q.water?"filled":""}`,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:C<Q.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},C))}),i.jsxs("div",{className:"nut-water-popup-count",children:[Q.water," / ",x?.waterGoal||8," glasses"]}),i.jsxs("div",{className:"nut-water-btns",children:[i.jsx("button",{onClick:ft,disabled:Q.water<=0,children:"-"}),i.jsx("button",{onClick:$e,children:"+"})]})]})]})}),Y&&i.jsx("div",{className:"nut-modal-overlay",onClick:()=>{sn(),O(null),ke(null),ln(null)},children:i.jsxs("div",{className:"nut-modal",onClick:T=>T.stopPropagation(),children:[i.jsxs("div",{className:"nut-modal-header",children:[i.jsx("h3",{children:Y==="scan"?"Scan Barcode":Y==="search"?"Search Food":Y==="favourites"?"Favourites":"Manual Entry"}),i.jsx("button",{className:"nut-modal-close",onClick:()=>{sn(),O(null),ke(null),ln(null)},children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Y==="scan"&&!ne&&i.jsxs("div",{className:"nut-scan-area",children:[i.jsxs("div",{className:"nut-scanner-wrapper",children:[i.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),Pe&&!Me&&i.jsx("div",{className:"nut-scan-line"}),Me&&i.jsxs("div",{className:"nut-scan-detected-overlay",children:[i.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})}),i.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),i.jsx("p",{className:"nut-scan-detected-code",children:Me})]})]}),!Pe&&i.jsxs("button",{className:"nut-scan-start-btn",onClick:kt,children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),i.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),i.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),i.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),i.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),Pe&&!Me&&i.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),i.jsx("div",{className:"nut-barcode-divider",children:i.jsx("span",{children:"or enter barcode manually"})}),i.jsxs("div",{className:"nut-barcode-manual",children:[i.jsx("input",{type:"text",inputMode:"numeric",value:W,onChange:T=>ge(T.target.value),onKeyDown:T=>T.key==="Enter"&&W.trim()&&me(W.trim()),placeholder:"Enter barcode number"}),i.jsx("button",{onClick:()=>W.trim()&&me(W.trim()),disabled:!W.trim()||Ee,children:Ee?"...":"Look Up"})]})]}),Y==="scan"&&ne&&(()=>{const T=ne.servingUnit||"g",C=ne.portion,G=Ke==="portion"&&C?At*C.weight:parseFloat(Ft)||0,J=G/100,Fe=T==="ml"?[100,200,250,500]:[50,100,150,200],Le=Ke==="portion"&&C?`${At} ${C.label}${At!==1?"s":""} (${Math.round(G)}${T})`:`${Math.round(G)}${T}`;return i.jsxs("div",{className:"nut-product-result",children:[ne.image&&i.jsx("img",{src:ne.image,alt:ne.name||"Product",className:"nut-product-img",loading:"lazy"}),i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:ne.name}),i.jsx("button",{className:`nut-fav-star confirm${Ge(ne.name)?" active":""}`,onClick:()=>jt({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Ge(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ne.brand&&i.jsx("p",{className:"nut-product-brand",children:ne.brand}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),C&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:Ke==="portion"?"active":"",onClick:()=>{Gt("portion"),At<1&&ct(1)},children:"Portions"}),i.jsxs("button",{className:Ke==="weight"?"active":"",onClick:()=>{Gt("weight"),_t(String(Math.round(G)||100))},children:["Custom (",T,")"]})]}),Ke==="portion"&&C?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,At-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:At}),i.jsxs("span",{className:"nut-stepper-label",children:[C.label,At!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(G),T]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(At+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",T,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:Ft,onChange:De=>_t(De.target.value),onFocus:De=>De.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Fe.map(De=>i.jsxs("button",{className:`nut-quick-btn${Ft===String(De)?" active":""}`,onClick:()=>_t(String(De)),children:[De,T]},De))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>{ln(null),ke("scan")},children:"Scan Again"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>Ct({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Le}),children:"Add"})]})]})})(),Y==="search"&&!ne&&i.jsxs("div",{className:"nut-search-area",children:[i.jsxs("div",{className:"nut-search-bar",children:[i.jsx("input",{type:"text",ref:xe,value:Oe,onChange:T=>nt(T.target.value),onKeyDown:T=>{T.key==="Enter"&&(clearTimeout(fe.current),he())},onFocus:()=>setTimeout(()=>xe.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),i.jsx("button",{onClick:he,disabled:vt,children:vt?"...":"Search"})]}),i.jsxs("div",{className:"nut-search-results",children:[He.map((T,C)=>i.jsxs("button",{className:"nut-search-item",onClick:()=>{ln(T),T.portion?(ct(1),_t(String(T.portion.weight)),Gt("portion")):(ct(0),_t(String(T.servingValue||100)),Gt("weight"))},children:[T.image&&i.jsx("img",{src:T.image,alt:T.name||"Product",loading:"lazy"}),i.jsxs("div",{className:"nut-search-item-info",children:[i.jsx("span",{className:"nut-search-item-name",children:T.name}),T.brand&&i.jsx("span",{className:"nut-search-item-brand",children:T.brand}),i.jsxs("span",{className:"nut-search-item-macros",children:[T.calories," cal  ",T.protein,"p  ",T.carbs,"c  ",T.fats,"f per 100",T.servingUnit||"g"]})]})]},C)),He.length===0&&Oe&&!vt&&i.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),Y==="search"&&ne&&(()=>{const T=ne.servingUnit||"g",C=ne.portion,G=Ke==="portion"&&C?At*C.weight:parseFloat(Ft)||0,J=G/100,Fe=T==="ml"?[100,200,250,500]:[50,100,150,200],Le=Ke==="portion"&&C?`${At} ${C.label}${At!==1?"s":""} (${Math.round(G)}${T})`:`${Math.round(G)}${T}`;return i.jsxs("div",{className:"nut-product-result",children:[ne.image&&i.jsx("img",{src:ne.image,alt:ne.name||"Product",className:"nut-product-img",loading:"lazy"}),i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:ne.name}),i.jsx("button",{className:`nut-fav-star confirm${Ge(ne.name)?" active":""}`,onClick:()=>jt({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Ge(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),ne.brand&&i.jsx("p",{className:"nut-product-brand",children:ne.brand}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),C&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:Ke==="portion"?"active":"",onClick:()=>{Gt("portion"),At<1&&ct(1)},children:"Portions"}),i.jsxs("button",{className:Ke==="weight"?"active":"",onClick:()=>{Gt("weight"),_t(String(Math.round(G)||100))},children:["Custom (",T,")"]})]}),Ke==="portion"&&C?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,At-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:At}),i.jsxs("span",{className:"nut-stepper-label",children:[C.label,At!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(G),T]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(At+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",T,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:Ft,onChange:De=>_t(De.target.value),onFocus:De=>De.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Fe.map(De=>i.jsxs("button",{className:`nut-quick-btn${Ft===String(De)?" active":""}`,onClick:()=>_t(String(De)),children:[De,T]},De))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>ln(null),children:"Back to Search"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>Ct({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Le}),children:"Add"})]})]})})(),Y==="manual"&&i.jsxs("div",{className:"nut-manual-form",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Food Name"}),i.jsx("input",{type:"text",value:Tt.name,onChange:T=>bt(C=>({...C,name:T.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Serving Size (optional)"}),i.jsx("input",{type:"text",value:Tt.serving,onChange:T=>bt(C=>({...C,serving:T.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),i.jsxs("div",{className:"nut-manual-macros",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Protein (g)"}),i.jsx("input",{type:"number",value:Tt.protein,onChange:T=>bt(C=>({...C,protein:T.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Carbs (g)"}),i.jsx("input",{type:"number",value:Tt.carbs,onChange:T=>bt(C=>({...C,carbs:T.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Fats (g)"}),i.jsx("input",{type:"number",value:Tt.fats,onChange:T=>bt(C=>({...C,fats:T.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Calories"}),i.jsx("input",{type:"number",value:Tt.calories,onChange:T=>bt(C=>({...C,calories:T.target.value})),min:"0"})]})]}),i.jsx("button",{className:"nut-btn-primary",disabled:!Tt.name.trim(),onClick:()=>Ct({name:Tt.name,protein:parseFloat(Tt.protein)||0,carbs:parseFloat(Tt.carbs)||0,fats:parseFloat(Tt.fats)||0,calories:parseFloat(Tt.calories)||0,serving:Tt.serving||""}),children:"Add Food"})]}),Y==="favourites"&&!ne&&(()=>{const T=$t(),C=G=>{if(G.per100g){const J=G.per100g;ln({name:G.name,brand:"",image:null,servingSize:G.serving||"100g",servingValue:100,servingUnit:G.servingUnit||"g",portion:G.portion||null,protein:J.protein,carbs:J.carbs,fats:J.fats,calories:J.calories,per100g:!0}),G.portion?(ct(1),_t(String(G.portion.weight)),Gt("portion")):(ct(0),_t("100"),Gt("weight"))}else Ct({name:G.name,protein:G.protein,carbs:G.carbs,fats:G.fats,calories:G.calories,serving:G.serving||""})};return i.jsx("div",{className:"nut-recent-area",children:T.length===0?i.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):i.jsx("div",{className:"nut-recent-list",children:T.map((G,J)=>i.jsxs("div",{className:"nut-recent-item-row",children:[i.jsx("button",{className:"nut-fav-star active",onClick:Fe=>{Fe.stopPropagation(),jt(G)},children:i.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("button",{className:"nut-recent-item",onClick:()=>C(G),children:[i.jsxs("div",{className:"nut-recent-item-info",children:[i.jsx("span",{className:"nut-recent-item-name",children:G.name}),i.jsx("span",{className:"nut-recent-item-serving",children:G.serving||""})]}),i.jsxs("span",{className:"nut-recent-item-macros",children:[G.calories," cal"]})]})]},J))})})})(),Y==="favourites"&&ne&&(()=>{const T=ne.servingUnit||"g",C=ne.portion,G=Ke==="portion"&&C?At*C.weight:parseFloat(Ft)||0,J=G/100,Fe=T==="ml"?[100,200,250,500]:[50,100,150,200],Le=Ke==="portion"&&C?`${At} ${C.label}${At!==1?"s":""} (${Math.round(G)}${T})`:`${Math.round(G)}${T}`;return i.jsxs("div",{className:"nut-product-result",children:[i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:ne.name}),i.jsx("button",{className:`nut-fav-star confirm${Ge(ne.name)?" active":""}`,onClick:()=>jt({name:ne.name,protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories,serving:ne.servingSize,per100g:{protein:ne.protein,carbs:ne.carbs,fats:ne.fats,calories:ne.calories},servingUnit:ne.servingUnit||"g",portion:ne.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:Ge(ne.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",T,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[ne.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[ne.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[ne.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[ne.calories," cal"]})]}),C&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:Ke==="portion"?"active":"",onClick:()=>{Gt("portion"),At<1&&ct(1)},children:"Portions"}),i.jsxs("button",{className:Ke==="weight"?"active":"",onClick:()=>{Gt("weight"),_t(String(Math.round(G)||100))},children:["Custom (",T,")"]})]}),Ke==="portion"&&C?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(Math.max(1,At-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:At}),i.jsxs("span",{className:"nut-stepper-label",children:[C.label,At!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round(G),T]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>ct(At+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",T,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:Ft,onChange:De=>_t(De.target.value),onFocus:De=>De.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Fe.map(De=>i.jsxs("button",{className:`nut-quick-btn${Ft===String(De)?" active":""}`,onClick:()=>_t(String(De)),children:[De,T]},De))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(ne.protein*J),"p / ",Math.round(ne.carbs*J),"c / ",Math.round(ne.fats*J),"f / ",Math.round(ne.calories*J)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>ln(null),children:"Back to Favourites"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>Ct({name:ne.name,protein:Math.round(ne.protein*J),carbs:Math.round(ne.carbs*J),fats:Math.round(ne.fats*J),calories:Math.round(ne.calories*J),serving:Le}),children:"Add"})]})]})})()]})}),i.jsx(ca,{active:"nutrition"}),Ut&&i.jsx("div",{className:`toast-notification ${Ut.type}`,children:Ut.message})]})}const $2="/login/assets/randomiser-glq9YJkL.jpg",C3="/login/assets/programme-card-workout-CnNzTYkz.webp",R3="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",A3="/login/assets/mg-arms-BeOQU3wx.jpg",W2=60,Ep=5,I3=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],M3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},D3={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},P3={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},jp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},Sp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:R3},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Vc=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:A3},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],G2={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},K2=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],Np=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],fl=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],L3=[5,10,15,20,30];function O3(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function V3(s){const e=[...s];for(let n=e.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[e[n],e[a]]=[e[a],e[n]]}return e}function B3(){const{currentUser:s,isClient:e,clientData:n,loading:a}=br(),{isDark:l,toggleTheme:u,accent:d}=ha(),p=Ds(),[g,y]=_.useState("menu"),[x,k]=_.useState(["bodyweight"]),[j,P]=_.useState("core"),[$,B]=_.useState("intermediate"),[L,te]=_.useState(15),[Q,ce]=_.useState([]),[ve,Ue]=_.useState(!1),Ae=_.useRef(!1),A=_.useRef([]),[E,R]=_.useState([]),[D,M]=_.useState(2),[U,I]=_.useState(fl[1]),[Ne,pt]=_.useState(1),[Y,ke]=_.useState(0),[Pe,ae]=_.useState("work"),[Me,O]=_.useState(0),[W,ge]=_.useState(!1),[Ee,Re]=_.useState(0),[Oe,nt]=_.useState(null),He=_.useRef(null);_.useRef(null),_.useRef(null);const[Ze,vt]=_.useState(null),nn=_.useCallback((H,ue="info")=>{vt({message:H,type:ue}),setTimeout(()=>vt(null),3e3)},[]),[Tt,bt]=_.useState(null),[ne,ln]=_.useState(null),[Ft,_t]=_.useState(0),[At,ct]=_.useState(0),[Ke,Gt]=_.useState([]),[as,It]=_.useState(""),[Ut,Ln]=_.useState(""),[Ht,xn]=_.useState(!1),[fe,xe]=_.useState(0),[Ce,tt]=_.useState(!1),[Ye,ze]=_.useState({}),Xe=_.useRef(null),We=_.useRef(null),[Ve,we]=_.useState([]),[Je,lt]=_.useState(null),[Et,$t]=_.useState(0),[Ge,jt]=_.useState(0),[Ct,Dt]=_.useState(0),[qt,kt]=_.useState(0),[sn,Wt]=_.useState(0),[rn,un]=_.useState(0),[dn,Sn]=_.useState({beginner:0,intermediate:0,advanced:0}),[F,de]=_.useState(null),[me,ye]=_.useState(""),[he,$e]=_.useState(!1);_.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const ue=An(Be,"workoutLogs"),re=ds(ue,Un("clientId","==",n.id)),Ie=(await Gn(re)).docs.map(hn=>hn.data()),rt=Ie.filter(hn=>hn.type!=="programme");kt(rt.length);const Rt=rt.reduce((hn,Hn)=>hn+(Hn.duration||0),0);Wt(Rt);const at={beginner:0,intermediate:0,advanced:0};rt.forEach(hn=>{hn.level&&at[hn.level]!==void 0&&at[hn.level]++}),Sn(at);const Qt=new Date,On=Qt.getDay(),mn=On===0?-6:1-On,Mn=new Date(Qt);Mn.setDate(Qt.getDate()+mn),Mn.setHours(0,0,0,0);const Fa=Mn.getTime(),Fi=Ie.filter(hn=>{const Hn=hn.completedAt;return Hn?(Hn.toDate?Hn.toDate().getTime():new Date(Hn).getTime())>=Fa:!1});$t(Fi.filter(hn=>hn.type!=="programme").length);let qa=0;if(n)try{const hn=await In(ot(Be,"clientProgrammes",n.id));if(hn.exists()){const Hn=hn.data(),$n=Hn.templateId;qa=Fi.filter(vs=>vs.type==="programme"&&vs.programmeId===$n).length,de($n);const wr=Sp.find(vs=>vs.id===$n);wr&&ye(wr.name);const _r=D3[$n];if(_r){const vs=Object.keys(Hn.completedSessions||{}).length,Ns=_r.duration*_r.daysPerWeek;Dt(Ns>0?Math.round(vs/Ns*100):0)}}else de(null),ye(""),Dt(0)}catch{}jt(qa);const xr=rt.map(hn=>hn.completedAt).filter(Boolean).map(hn=>hn.toDate?hn.toDate().getTime():new Date(hn).getTime()).sort((hn,Hn)=>Hn-hn);if(xr.length===0)un(0);else{const hn=new Set;xr.forEach(Ns=>{const zr=new Date(Ns),kr=zr.getDay(),Ha=kr===0?-6:1-kr,Ps=new Date(zr);Ps.setDate(zr.getDate()+Ha),Ps.setHours(0,0,0,0),hn.add(Ps.getTime())});const Hn=[...hn].sort((Ns,zr)=>zr-Ns);let $n=0;const wr=new Date(Qt),_r=Qt.getDay()===0?-6:1-Qt.getDay();wr.setDate(Qt.getDate()+_r),wr.setHours(0,0,0,0);let vs=wr.getTime();Hn.includes(vs)||(vs-=10080*60*1e3);for(let Ns=0;Ns<200&&Hn.includes(vs);Ns++)$n++,vs-=10080*60*1e3;un($n)}}catch(ue){console.error("Error loading workout stats:",ue)}finally{$e(!0)}})()},[s,n,g]);const ft=()=>{const H=[];let ue;j==="mix"?ue=["core","upper","lower"]:j==="fullbody"?ue=["upper","lower"]:ue=[j];for(const re of x)for(const Se of ue)H.push(`exercises/${re}/${Se}`);return H},et=async()=>{if(Ae.current){for(;Ae.current;)await new Promise(H=>setTimeout(H,200));return A.current}Ae.current=!0,Ue(!0);try{const H=ft(),ue=[];for(const rt of H)try{const Rt=wl(_l,rt),at=await q2(Rt);ue.push(...at.items)}catch{console.warn(`Folder ${rt} not found, skipping.`)}if(ue.length===0&&x.includes("bodyweight")&&j==="core")try{const rt=wl(_l,"core"),Rt=await q2(rt);ue.push(...Rt.items)}catch{console.warn("Legacy core/ folder not found either.")}if(ue.length===0){const rt=x.map(at=>K2.find(Qt=>Qt.key===at)?.label).join(" + "),Rt=Np.find(at=>at.key===j)?.label;return nn(`No exercises found for ${rt} / ${Rt}. Upload videos to Firebase Storage.`,"error"),Ae.current=!1,Ue(!1),[]}const re=new Set,Se=ue.filter(rt=>{const Rt=rt.name.replace(/\.(mp4|gif)$/i,"");return re.has(Rt)?!1:(re.add(Rt),!0)}),Ie=await Promise.all(Se.map(async rt=>{const Rt=await Jc(rt),at=O3(rt.name.replace(/\.(mp4|gif)$/i,"")),Qt=/\.gif$/i.test(rt.name);return{name:at,videoUrl:Rt,isGif:Qt}}));return A.current=Ie,ce(Ie),Ae.current=!1,Ue(!1),Ie}catch(H){console.error("Error loading exercises:",H);const ue=H.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${H.message||H.code||"Unknown error"}`;return nn(ue,"error"),Ae.current=!1,Ue(!1),[]}},ht=async()=>{y("spinning"),A.current=[];const H=await et();if(H.length===0){y("setup");return}const ue=fl.find(On=>On.key===$);I(ue);const re=ue.work+ue.rest,Se=L*60,Ie=Math.floor(Se/re);let rt,Rt;Ie<=6?(rt=Math.max(3,Math.floor(Ie/2)),Rt=Math.floor(Ie/rt)):Ie<=12?(rt=Math.min(6,Math.floor(Ie/2)),Rt=Math.floor(Ie/rt)):(rt=Math.min(10,Math.floor(Ie/2)),Rt=Math.floor(Ie/rt)),Rt=Math.max(2,Rt);const at=V3(H),Qt=at.slice(0,Math.min(rt,at.length));R(Qt),M(Rt),setTimeout(()=>y("preview"),2e3)},mt=()=>{y("countdown"),Re(3)};_.useEffect(()=>{if(g!=="countdown")return;if(Ee<=0){y("workout"),pt(1),ke(0),ae("work"),O(U.work),ge(!1),Le();return}Fe();const H=setTimeout(()=>Re(ue=>ue-1),1e3);return()=>clearTimeout(H)},[Ee,g]),_.useEffect(()=>{if(g!=="workout"||W)return;if(Me<=0){an();return}Me<=3&&Fe();const H=setTimeout(()=>O(ue=>ue-1),1e3);return()=>clearTimeout(H)},[Me,g,W]);const an=()=>{if(Pe==="work")ae("rest"),O(U.rest);else{const H=Y+1;if(H>=E.length){const ue=Ne+1;if(ue>D){y("complete"),Ss();return}pt(ue),ke(0)}else ke(H);ae("work"),O(U.work),Le()}},Ss=async()=>{if(s)try{await lg(An(Be,"workoutLogs"),{clientId:n.id,level:$,duration:L,equipment:x,focus:j,exerciseCount:E.length,rounds:D,exercises:E.map(H=>H.name),completedAt:dt.now()}),$t(H=>H+1),kt(H=>H+1),Wt(H=>H+L),Sn(H=>({...H,[$]:(H[$]||0)+1}))}catch(H){console.error("Error saving workout log:",H)}},qn=async(H,ue,re)=>{if(!(!n||!ue))try{const Se=n.id,Ie=await In(ot(Be,"coreBuddyPBs",Se)),Rt=(Ie.exists()?Ie.data():null)?.exercises||{},at=Rt[H];let Qt=!1;if(at?(ue>(at.weight||0)||ue===(at.weight||0)&&re>(at.reps||0))&&(Qt=!0):Qt=!0,Qt){const On={...Rt,[H]:{weight:ue,reps:re,achievedAt:dt.now()}};await Rn(ot(Be,"coreBuddyPBs",Se),{clientId:n.id,exercises:On,updatedAt:dt.now()}),nn(`New PB! ${ue}kg  ${re} reps`,"success"),Fe(),await Yn(H,ue)}}catch(Se){console.error("Error checking PB:",Se)}},Yn=async(H,ue)=>{if(n)try{const re=await In(ot(Be,"coreBuddyTargets",n.id));if(!re.exists())return;const Ie=(re.data().targets||{})[H];if(!Ie||ue<Ie.targetWeight)return;const rt=await In(ot(Be,"coreBuddyAchievements",n.id)),Rt=rt.exists()?rt.data():{clientId:n.id,badges:[],totalVolume:0};if(Rt.badges.some(mn=>mn.type==="pb_target"&&mn.exercise===H&&mn.targetWeight===Ie.targetWeight))return;const Qt={type:"pb_target",exercise:H,group:M3[H]||"push",targetWeight:Ie.targetWeight,achievedAt:dt.now()},On=[...Rt.badges,Qt];await Rn(ot(Be,"coreBuddyAchievements",n.id),{...Rt,badges:On,updatedAt:dt.now()}),we(mn=>[...mn,Qt])}catch(re){console.error("Error checking target badge:",re)}},fn=async H=>{if(!(!n||H<=0))try{const ue=await In(ot(Be,"coreBuddyAchievements",n.id)),re=ue.exists()?ue.data():{clientId:n.id,badges:[],totalVolume:0},Se=re.totalVolume||0,Ie=Se+H,rt=[];I3.forEach(at=>{Ie>=at.threshold&&Se<at.threshold&&(re.badges.some(On=>On.type==="volume_milestone"&&On.milestone===at.threshold)||rt.push({type:"volume_milestone",milestone:at.threshold,label:at.label,achievedAt:dt.now()}))});const Rt=[...re.badges,...rt];await Rn(ot(Be,"coreBuddyAchievements",n.id),{clientId:n.id,badges:Rt,totalVolume:Math.round(Ie),updatedAt:dt.now()}),rt.length>0&&we(at=>[...at,...rt])}catch(ue){console.error("Error updating volume:",ue)}},z=async H=>{if(ln(H),H.interval){const Se=[];for(const Ie of H.exercises){let rt=null,Rt=!1;if(Ie.storagePath)try{const at=wl(_l,Ie.storagePath);rt=await Jc(at),Rt=/\.gif$/i.test(Ie.storagePath)}catch{}Se.push({name:Ie.name,videoUrl:rt,isGif:Rt})}R(Se),M(H.rounds),I({work:H.work,rest:H.rest}),y("preview");return}const ue={};for(const Se of H.exercises)if(Se.storagePath)try{const Ie=wl(_l,Se.storagePath);ue[Se.name]={url:await Jc(Ie),isGif:/\.gif$/i.test(Se.storagePath)}}catch{}ze(ue);const re=H.exercises.map(Se=>({name:Se.name,type:Se.type,targetSets:Se.sets,targetReps:Se.reps||0,targetTime:Se.time||0,sets:[]}));Gt(re),_t(0),ct(0),It(""),Ln(""),tt(!1),xn(!1),xe(0),we([]),lt(null),y("muscle_workout")},oe=()=>{const H=Xe.current;H&&(H.paused?(H.play(),tt(!0)):(H.pause(),tt(!1)))};_.useEffect(()=>{if(g!=="muscle_workout"||!Ht||fe<=0){g==="muscle_workout"&&Ht&&fe<=0&&(xn(!1),Fe());return}return We.current=setTimeout(()=>xe(H=>H-1),1e3),()=>clearTimeout(We.current)},[g,Ht,fe]);const T=async()=>{const H=Ke[Ft];let ue={};if(H.type==="weighted"){const Ie=parseFloat(as)||0,rt=parseInt(Ut)||0;if(rt===0){nn("Enter your reps","error");return}ue={weight:Ie,reps:rt}}else if(H.type==="reps"){const Ie=parseInt(Ut)||0;if(Ie===0){nn("Enter your reps","error");return}ue={reps:Ie}}else if(H.type==="timed"){const Ie=H.targetTime-fe;ue={time:Math.max(Ie,1)}}const re=[...Ke];re[Ft]={...H,sets:[...H.sets,ue]},Gt(re),H.type==="weighted"&&ue.weight>0&&await qn(H.name,ue.weight,ue.reps);const Se=H.sets.length+1;if(Se<H.targetSets)ct(Se),Ln(""),xn(!1),xe(0);else if(Ft+1<Ke.length){const Ie=Ft+1;_t(Ie),ct(0),It(""),Ln(""),tt(!1),xn(!1),xe(0)}else await C(re),y("muscle_complete")},C=async H=>{if(!(!s||!n))try{const ue=H.reduce((Se,Ie)=>Se+Ie.sets.reduce((rt,Rt)=>rt+(Rt.weight||0)*(Rt.reps||0),0),0),re=H.reduce((Se,Ie)=>Se+Ie.sets.length,0);await lg(An(Be,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:Tt,sessionId:ne?.id,sessionName:ne?.name,exerciseCount:H.length,totalSets:re,duration:Math.round(re*1.5),volume:Math.round(ue),exercises:H.map(Se=>({name:Se.name,type:Se.type,sets:Se.sets})),completedAt:dt.now()}),ue>0&&await fn(ue),Ve.length>0&&lt({badges:[...Ve]})}catch(ue){console.error("Error saving muscle group workout log:",ue)}},G=_.useRef(null),J=()=>(G.current||(G.current=new(window.AudioContext||window.webkitAudioContext)),G.current),Fe=()=>{try{const H=J(),ue=H.createOscillator(),re=H.createGain();ue.connect(re),re.connect(H.destination),ue.frequency.value=880,re.gain.value=.3,ue.start(H.currentTime),ue.stop(H.currentTime+.15)}catch{}},Le=()=>{try{const H=J(),ue=H.createOscillator(),re=H.createGain();ue.connect(re),re.connect(H.destination),ue.frequency.value=1200,re.gain.value=.4,ue.start(H.currentTime),ue.stop(H.currentTime+.3)}catch{}};_.useEffect(()=>{if(g!=="workout"||Pe!=="work"||!E[Y]?.isGif)return;const ue=setInterval(()=>{const re=He.current;if(!re)return;const Se=re.getAttribute("src");re.removeAttribute("src"),setTimeout(()=>{He.current&&He.current.setAttribute("src",Se)},0)},4e3);return()=>clearInterval(ue)},[g,Pe,Y,Ne,E]);const De=(H,ue,re)=>{const Se=Math.round(H/ue*W2);return i.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:b3.map((Ie,rt)=>i.jsx("line",{x1:Ie.x1,y1:Ie.y1,x2:Ie.x2,y2:Ie.y2,className:rt<Se?`wk-tick-filled ${re}`:"wk-tick-empty",strokeWidth:Ie.thick?"3":"2"},rt))})},Ot=()=>{const H=E.length*D;return((Ne-1)*E.length+Y+(Pe==="rest"?.5:0))/H},xt=Ze&&i.jsx("div",{className:`toast-notification ${Ze.type}`,children:Ze.message});if(a)return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsx("div",{className:"wk-loading-inline",children:i.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[i.jsxs("div",{className:"wk-menu-heading",children:[i.jsx("h2",{children:"Choose Your Workout"}),i.jsx("p",{children:"No excuses. Just results."})]}),i.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:i.jsx("img",{src:$2,alt:"Randomise Workout",className:"wk-hero-bg"})}),i.jsxs("div",{className:"wk-section-header",children:[i.jsx("h2",{children:"Programmes"}),i.jsxs("span",{className:"wk-section-count",children:[Sp.length," available"]})]}),i.jsx("div",{className:"wk-prog-scroll-wrap",children:i.jsx("div",{className:"wk-prog-scroll",children:Sp.map((H,ue)=>H.image?i.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:H.id}}),style:{animationDelay:`${ue*.06}s`},children:[i.jsx("img",{src:H.image,alt:H.name,className:"wk-prog-img"}),ue===0&&i.jsx("div",{className:"wk-swipe-arrow",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},H.id):i.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:H.id}}),style:{animationDelay:`${ue*.06}s`},children:[i.jsx("img",{src:C3,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),i.jsx("div",{className:"wk-prog-hero-overlay",style:{background:P3[H.focus]}}),i.jsxs("div",{className:"wk-prog-hero-content",children:[i.jsxs("div",{className:"wk-prog-hero-top",children:[i.jsxs("span",{className:"wk-prog-hero-badge",children:[H.duration," WEEKS"]}),i.jsx("span",{className:"wk-prog-hero-level",children:H.level})]}),i.jsxs("div",{className:"wk-prog-hero-bottom",children:[i.jsx("h3",{children:H.name.toUpperCase()}),i.jsxs("p",{children:[H.daysPerWeek,"x per week  ",H.focus==="fullbody"?"Full Body":H.focus.charAt(0).toUpperCase()+H.focus.slice(1)," Focus"]}),i.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),ue===0&&i.jsx("div",{className:"wk-swipe-arrow",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},H.id))})}),i.jsxs("div",{className:"wk-section-header",children:[i.jsx("h2",{children:"Muscle Groups"}),i.jsxs("span",{className:"wk-section-count",children:[Vc.length," groups"]})]}),i.jsx("div",{className:"wk-muscle-grid",children:Vc.map((H,ue)=>i.jsx("button",{className:`wk-muscle-hero-card${H.image?" wk-muscle-thumb":""}`,onClick:()=>{bt(H.key),y("muscle_sessions")},style:{animationDelay:`${ue*.05}s`},children:H.image?i.jsx("img",{src:H.image,alt:H.label,className:"wk-muscle-thumb-img"}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:$2,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),i.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:jp[H.key]}}),i.jsxs("div",{className:"wk-muscle-hero-content",children:[i.jsx("div",{className:"wk-muscle-hero-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:H.icon})})}),i.jsxs("div",{className:"wk-muscle-hero-text",children:[i.jsx("span",{className:"wk-muscle-hero-name",children:H.label}),i.jsxs("span",{className:"wk-muscle-hero-count",children:[G2[H.key]?.length||0," sessions"]})]})]})]})},H.key))})]}),i.jsx(ca,{active:"workouts"}),xt]});if(g==="setup"){const H=Np.find(re=>re.key===j)?.label||j,ue=fl.find(re=>re.key===$)?.label||$;return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main wk-setup-main",children:[i.jsxs("div",{className:"wk-stats-strip",children:[i.jsxs("div",{className:"wk-stats-strip-ring",children:[i.jsx("svg",{viewBox:"0 0 200 200",children:go.map((re,Se)=>{const Ie=Math.round(Math.min(Et,Ep)/Ep*W2);return i.jsx("line",{x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,className:Se<Ie?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:re.thick?"3":"2"},Se)})}),i.jsxs("span",{className:"wk-stats-strip-ring-num",children:[Et,i.jsxs("small",{children:["/",Ep]})]})]}),i.jsxs("div",{className:"wk-stats-strip-items",children:[i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:qt}),i.jsx("span",{className:"wk-stats-strip-label",children:"Workouts"})]}),i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:sn}),i.jsx("span",{className:"wk-stats-strip-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:rn}),i.jsx("span",{className:"wk-stats-strip-label",children:"Wk Streak"})]})]})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Focus Area"}),i.jsx("div",{className:"wk-focus-grid",children:Np.map(re=>i.jsxs("button",{className:`wk-equip-btn${j===re.key?" active":""}${re.key==="mix"?" wk-mix-btn":""}`,onClick:()=>P(re.key),children:[i.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:re.icon})}),i.jsx("span",{children:re.label})]},re.key))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Level"}),i.jsx("div",{className:"wk-level-cards",children:fl.map(re=>i.jsxs("button",{className:`wk-level-card wk-level-${re.key}${$===re.key?" active":""}`,onClick:()=>B(re.key),children:[i.jsx("span",{className:"wk-level-name",children:re.label}),i.jsx("span",{className:"wk-level-desc",children:re.desc})]},re.key))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Time"}),i.jsx("div",{className:"wk-time-options",children:L3.map(re=>i.jsxs("button",{className:`wk-time-btn${L===re?" active":""}`,onClick:()=>te(re),children:[i.jsx("span",{className:"wk-time-num",children:re}),i.jsx("span",{className:"wk-time-unit",children:"min"})]},re))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Equipment"}),i.jsx("div",{className:"wk-equip-options",children:K2.map(re=>{const Se=x.includes(re.key);return i.jsxs("button",{className:`wk-equip-btn${Se?" active":""}`,onClick:()=>{k(Ie=>Se&&Ie.length===1?Ie:Se?Ie.filter(rt=>rt!==re.key):[...Ie,re.key])},children:[i.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:re.icon})}),i.jsx("span",{children:re.label})]},re.key)})})]}),i.jsx("div",{className:"wk-setup-summary",children:i.jsxs("span",{children:[H,"  ",ue,"  ",L," min"]})})]}),i.jsx("div",{className:"wk-go-sticky",children:i.jsx("button",{className:"wk-randomise-btn",onClick:ht,disabled:ve,children:ve?"Loading exercises...":"Randomise Workout"})}),xt]})}if(g==="spinning")return i.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"wk-spin-container",children:[i.jsxs("div",{className:"wk-spin-ring",children:[i.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:go.map((H,ue)=>i.jsx("line",{x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,className:"wk-spin-tick",strokeWidth:H.thick?"3.5":"2",style:{animationDelay:`${ue*.03}s`}},ue))}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),i.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),xt]});if(g==="preview"){const H=ne?.interval?{work:ne.work,rest:ne.rest}:fl.find(re=>re.key===$),ue=E.length*D*(H.work+H.rest);return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y(ne?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[ne?.interval&&i.jsx("h2",{className:"mg-preview-title",children:ne.name}),i.jsxs("div",{className:"wk-preview-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:E.length}),i.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:D}),i.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.ceil(ue/60)}),i.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsxs("span",{className:"wk-stat-val",children:[H.work,"/",H.rest]}),i.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),i.jsx("div",{className:"wk-preview-list",children:E.map((re,Se)=>i.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${Se*.06}s`},onClick:()=>nt(re),children:[i.jsx("span",{className:"wk-preview-num",children:Se+1}),i.jsx("div",{className:"wk-preview-thumb",children:re.isGif?i.jsx("img",{src:re.videoUrl,alt:re.name,loading:"lazy"}):i.jsx("video",{src:`${re.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),i.jsx("span",{className:"wk-preview-name",children:re.name}),i.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},Se))}),Oe&&i.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>nt(null),children:i.jsxs("div",{className:"wk-preview-modal",onClick:re=>re.stopPropagation(),children:[i.jsx("button",{className:"wk-preview-modal-close",onClick:()=>nt(null),"aria-label":"Close preview",children:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),i.jsx("div",{className:"wk-preview-modal-video",children:Oe.isGif?i.jsx("img",{src:Oe.videoUrl,alt:Oe.name}):i.jsx("video",{src:Oe.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),i.jsx("h3",{className:"wk-preview-modal-title",children:Oe.name})]})}),i.jsxs("div",{className:"wk-preview-actions",children:[!ne?.interval&&i.jsxs("button",{className:"wk-btn-secondary",onClick:()=>ht(),children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("polyline",{points:"1 4 1 10 7 10"}),i.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),i.jsx("button",{className:"wk-btn-primary",onClick:mt,children:"Start Workout"})]})]})]})}if(g==="countdown")return i.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":l?"dark":"light","data-accent":d,children:i.jsxs("div",{className:"wk-countdown-big",children:[i.jsx("span",{className:"wk-countdown-num",children:Ee}),i.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const H=E[Y],ue=Pe==="work"?U.work:U.rest,re=Pe==="rest"?Y+1<E.length?E[Y+1]:Ne<D?E[0]:null:null;return i.jsxs("div",{className:"wk-page wk-page-workout","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"wk-video-container",children:Pe==="work"?H.isGif?i.jsx("img",{ref:He,className:"wk-video",src:H.videoUrl,alt:H.name},H.videoUrl):i.jsx("video",{className:"wk-video",src:H.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},H.videoUrl):i.jsxs("div",{className:"wk-rest-screen",children:[i.jsx("span",{className:"wk-rest-label",children:"REST"}),re&&i.jsxs("span",{className:"wk-next-label",children:["Next: ",re.name]})]})}),i.jsx("div",{className:"wk-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"wk-exercise-info",children:[i.jsxs("span",{className:"wk-exercise-counter",children:[Y+1," / ",E.length]}),i.jsx("h2",{className:"wk-exercise-name",children:H.name}),i.jsxs("span",{className:"wk-round-label",children:["Round ",Ne," of ",D]})]}),i.jsx("div",{className:"wk-timer-section",children:i.jsxs("div",{className:"wk-timer-ring-wrap",children:[De(Me,ue,Pe==="work"?"wk-tick-work":"wk-tick-rest"),i.jsxs("div",{className:"wk-timer-center",children:[i.jsx("span",{className:"wk-timer-time",children:Me}),i.jsx("span",{className:`wk-timer-phase ${Pe}`,children:Pe==="work"?"WORK":"REST"})]})]})}),i.jsxs("div",{className:"wk-controls",children:[i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>ge(!W),children:W?i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):i.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),i.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{O(0)},children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),i.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),i.jsx("div",{className:"wk-progress-bar",children:i.jsx("div",{className:"wk-progress-fill",style:{width:`${Ot()*100}%`}})})]})}if(g==="complete"){const H=fl.find(re=>re.key===$),ue=E.length*D*(H.work+H.rest);return i.jsx("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:i.jsxs("div",{className:"wk-complete",children:[i.jsxs("div",{className:"wk-complete-ring",children:[i.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:go.map((re,Se)=>i.jsx("line",{x1:re.x1,y1:re.y1,x2:re.x2,y2:re.y2,className:"wk-tick-complete",strokeWidth:re.thick?"3.5":"2",style:{animationDelay:`${Se*.02}s`}},Se))}),i.jsx("div",{className:"wk-complete-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),i.jsxs("div",{className:"wk-complete-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.ceil(ue/60)}),i.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:E.length*D}),i.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:D}),i.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),i.jsx("div",{className:"wk-complete-actions",children:i.jsx("button",{className:"wk-btn-primary",onClick:()=>{ln(null),bt(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const H=Vc.find(re=>re.key===Tt),ue=G2[Tt]||[];return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[i.jsxs("div",{className:"mg-sessions-header",children:[i.jsx("div",{className:"mg-sessions-icon",style:{background:jp[Tt]},children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:H?.icon})})}),i.jsxs("h2",{children:[H?.label," Workouts"]}),i.jsxs("p",{children:[ue.length," sessions available"]})]}),i.jsx("div",{className:"mg-sessions-list",children:ue.map((re,Se)=>i.jsxs("button",{className:"mg-session-card",onClick:()=>{ln(re),y("muscle_overview")},style:{animationDelay:`${Se*.08}s`},children:[i.jsxs("div",{className:"mg-session-info",children:[i.jsx("h3",{children:re.name}),i.jsx("p",{children:re.desc}),i.jsx("div",{className:"mg-session-meta",children:re.interval?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),i.jsxs("span",{className:"mg-session-tag",children:[re.exercises.length," exercises"]}),i.jsxs("span",{className:"mg-session-tag",children:[re.rounds," rounds"]})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),i.jsxs("span",{className:"mg-session-tag",children:[re.exercises.length," exercises"]}),i.jsx("span",{className:"mg-session-tag",children:(()=>{const Ie=re.exercises.map(at=>at.sets||0),rt=Math.min(...Ie),Rt=Math.max(...Ie);return rt===Rt?`${rt} sets each`:`${rt}-${Rt} sets each`})()})]})})]}),i.jsx("div",{className:"mg-session-arrow",children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},re.id))})]}),xt]})}if(g==="muscle_overview"){const H=ne;if(!H)return null;const ue=Vc.find(re=>re.key===Tt);return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main mg-overview-main",children:[i.jsx("div",{className:"mg-overview-hero",style:{background:jp[Tt]},children:i.jsx("div",{className:"mg-overview-hero-content",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:i.jsx("path",{d:ue?.icon})})})}),i.jsxs("div",{className:"mg-overview-header",children:[i.jsxs("div",{className:"mg-overview-title-row",children:[i.jsx("h2",{children:H.name}),H.level&&i.jsx("span",{className:"mg-overview-level",children:H.level})]}),i.jsx("p",{className:"mg-overview-desc",children:H.desc})]}),H.overview&&i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),i.jsx("p",{children:H.overview})]}),H.tips&&H.tips.length>0&&i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),i.jsx("ul",{className:"mg-overview-tips",children:H.tips.map((re,Se)=>i.jsx("li",{children:re},Se))})]}),i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),i.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),i.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",H.exercises.length,")"]}),i.jsx("div",{className:"mg-overview-exercises",children:H.exercises.map((re,Se)=>i.jsxs("div",{className:"mg-overview-exercise",children:[i.jsx("span",{className:"mg-overview-ex-num",children:Se+1}),i.jsxs("div",{className:"mg-overview-ex-info",children:[i.jsx("span",{className:"mg-overview-ex-name",children:re.name}),H.interval?i.jsxs("span",{className:"mg-overview-ex-detail",children:[H.work,"s work / ",H.rest,"s rest"]}):i.jsxs("span",{className:"mg-overview-ex-detail",children:[re.sets," sets  ",re.reps?`${re.reps} reps`:`${re.time}s`,re.type==="weighted"&&"  weighted"]})]})]},Se))})]}),i.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>z(H),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),xt]})}if(g==="muscle_workout"){const H=ne;if(!H)return null;const ue=H.exercises[Ft],re=Ke[Ft];if(!ue||!re)return null;const Se=re.sets.length,Ie=H.exercises.length,rt=H.exercises.reduce((mn,Mn)=>mn+(Mn.sets||0),0),at=Ke.reduce((mn,Mn)=>mn+Mn.sets.length,0)/rt*100,Qt=Ye[ue.name];ue.type==="timed"&&fe===0&&!Ht&&Se===At&&setTimeout(()=>xe(ue.time),0);const On=Se+1<ue.sets?"Log Set":Ft+1<Ie?"Log Set  Next Exercise":"Log Set  Complete";return i.jsxs("div",{className:"wk-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"mg-session-progress",children:i.jsx("div",{className:"mg-session-progress-fill",style:{width:`${at}%`}})}),i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsxs("span",{className:"mg-header-info",children:["Exercise ",Ft+1,"/",Ie]}),i.jsx("div",{style:{width:22}})]})}),i.jsxs("main",{className:"wk-main",children:[Qt?i.jsxs("div",{className:"mg-video-container",onClick:oe,children:[Qt.isGif?i.jsx("img",{className:"mg-video",src:Qt.url,alt:ue.name}):i.jsx("video",{ref:Xe,className:"mg-video",src:Qt.url,loop:!0,muted:!0,playsInline:!0},ue.name),!Ce&&!Qt.isGif&&i.jsxs("div",{className:"mg-video-overlay",children:[i.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),i.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):i.jsxs("div",{className:"mg-video-placeholder",children:[i.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[i.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),i.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),i.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),i.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),i.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),i.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),i.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),i.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),i.jsx("span",{children:"Video coming soon"})]}),i.jsx("div",{className:"wk-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"mg-exercise-card",children:[i.jsx("h2",{className:"mg-ex-name",children:ue.name}),i.jsx("span",{className:`mg-ex-type-badge ${ue.type}`,children:ue.type==="weighted"?"Weight + Reps":ue.type==="reps"?"Reps Only":"Timed"}),i.jsxs("div",{className:"mg-ex-set-info",children:[i.jsxs("span",{className:"mg-ex-set-num",children:["Set ",Se+1," of ",ue.sets]}),ue.type!=="timed"&&i.jsxs("span",{className:"mg-ex-target",children:["Target: ",ue.reps," reps"]}),ue.type==="timed"&&i.jsxs("span",{className:"mg-ex-target",children:["Target: ",ue.time,"s"]})]}),ue.type==="weighted"&&i.jsxs("div",{className:"mg-input-area",children:[i.jsxs("div",{className:"mg-input-group",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:as,onChange:mn=>It(mn.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"mg-input-group",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Ut,onChange:mn=>Ln(mn.target.value),placeholder:"0"})]})]}),ue.type==="reps"&&i.jsx("div",{className:"mg-input-area",children:i.jsxs("div",{className:"mg-input-group mg-input-single",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:Ut,onChange:mn=>Ln(mn.target.value),placeholder:"0"})]})}),ue.type==="timed"&&i.jsxs("div",{className:"mg-timer-area",children:[i.jsx("div",{className:"mg-timer-display",children:i.jsxs("span",{className:"mg-timer-value",children:[fe,"s"]})}),Ht?i.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>xn(!1),children:"Stop"}):i.jsx("button",{className:"mg-timer-btn",onClick:()=>{fe===0&&xe(ue.time),xn(!0)},children:fe<ue.time&&fe>0?"Resume":"Start Timer"})]}),i.jsx("button",{className:"mg-log-set-btn",onClick:T,children:On}),re.sets.length>0&&i.jsx("div",{className:"mg-completed-sets",children:re.sets.map((mn,Mn)=>i.jsxs("div",{className:"mg-completed-set",children:[i.jsx("span",{className:"mg-completed-set-check",children:""}),i.jsxs("span",{children:["Set ",Mn+1,": ",mn.weight!=null?`${mn.weight}kg  ${mn.reps}`:mn.reps!=null?`${mn.reps} reps`:`${mn.time}s`]})]},Mn))})]})]}),xt]})}if(g==="muscle_complete"){const H=Ke.reduce((Se,Ie)=>Se+Ie.sets.length,0),ue=Ke.reduce((Se,Ie)=>Se+Ie.sets.reduce((rt,Rt)=>rt+(Rt.weight||0)*(Rt.reps||0),0),0),re=Vc.find(Se=>Se.key===Tt)?.label||"";return i.jsxs("div",{className:"wk-page wk-page-center","data-theme":l?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"wk-complete",children:[i.jsxs("div",{className:"wk-complete-ring",children:[i.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:go.map((Se,Ie)=>i.jsx("line",{x1:Se.x1,y1:Se.y1,x2:Se.x2,y2:Se.y2,className:"wk-tick-complete",strokeWidth:Se.thick?"3.5":"2",style:{animationDelay:`${Ie*.02}s`}},Ie))}),i.jsx("div",{className:"wk-complete-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsxs("h2",{className:"wk-complete-title",children:[re," Complete!"]}),i.jsx("p",{className:"mg-complete-session-name",children:ne?.name}),i.jsxs("div",{className:"wk-complete-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Ke.length}),i.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:H}),i.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),ue>0&&i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.round(ue).toLocaleString()}),i.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),i.jsx("div",{className:"wk-complete-actions",children:i.jsx("button",{className:"wk-btn-primary",onClick:()=>{ln(null),bt(null),lt(null),y("menu")},children:"Done"})})]}),Je&&i.jsx("div",{className:"mg-badge-celebration",onClick:()=>lt(null),children:i.jsxs("div",{className:"mg-badge-celebration-card",children:[i.jsx("div",{className:"mg-badge-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),i.jsx("h3",{className:"mg-badge-celebration-title",children:Je.badges.length===1?"Badge Earned!":`${Je.badges.length} Badges Earned!`}),i.jsx("div",{className:"mg-badge-celebration-list",children:Je.badges.map((Se,Ie)=>i.jsx("div",{className:"mg-badge-celebration-item",children:Se.type==="pb_target"?`${Se.exercise}  ${Se.targetWeight}kg`:Se.label},Ie))}),i.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const U3=60,z3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},F3=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],Y2=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function Yh(s,e,n){const a=s.baseReps?s.baseReps+(e-1)*(n.repProg||0):void 0,l=s.baseTime?s.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:s.sets,reps:a,time:l}}const q3={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function H3(){const{currentUser:s,isClient:e,clientData:n,loading:a}=br(),{isDark:l,toggleTheme:u,accent:d}=ha(),p=Ds(),g=Ur(),[y,x]=_.useState("loading"),[k,j]=_.useState(null),P=_.useRef(!1),[$,B]=_.useState(null),[L,te]=_.useState(1),[Q,ce]=_.useState(0),[ve,Ue]=_.useState(0),[Ae,A]=_.useState(0),[E,R]=_.useState([]),[D,M]=_.useState(""),[U,I]=_.useState(""),[Ne,pt]=_.useState(!1),[Y,ke]=_.useState(0),Pe=_.useRef(null),[ae,Me]=_.useState({}),[O,W]=_.useState(!1),ge=_.useRef(null),[Ee,Re]=_.useState(null),[Oe,nt]=_.useState([]);_.useEffect(()=>{window.scrollTo(0,0)},[y]);const[He,Ze]=_.useState(null),vt=_.useCallback((fe,xe="info")=>{Ze({message:fe,type:xe}),setTimeout(()=>Ze(null),4e3)},[]),nn=_.useRef(null),Tt=()=>(nn.current||(nn.current=new(window.AudioContext||window.webkitAudioContext)),nn.current),bt=()=>{try{const fe=Tt(),xe=fe.createOscillator(),Ce=fe.createGain();xe.connect(Ce),Ce.connect(fe.destination),xe.frequency.value=1200,Ce.gain.value=.4,xe.start(fe.currentTime),xe.stop(fe.currentTime+.3)}catch{}};_.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const xe=ot(Be,"clientProgrammes",n.id),Ce=await In(xe);Ce.exists()?(B(Ce.data()),x("dashboard")):g.state?.templateId?x("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(xe){console.error("Error loading programme:",xe),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),_.useEffect(()=>{if(P.current||y==="loading")return;const fe=g.state?.templateId;if(!fe)return;const xe=Y2.find(Ce=>Ce.id===fe);xe&&(P.current=!0,j(xe),x("overview"))},[y,g.state]),_.useEffect(()=>{if(!Ne||Y<=0){Ne&&Y<=0&&(pt(!1),bt());return}return Pe.current=setTimeout(()=>ke(fe=>fe-1),1e3),()=>clearTimeout(Pe.current)},[Ne,Y]);const ne=async fe=>{if(n)try{await Rn(ot(Be,"clientProgrammes",n.id),fe),B(fe)}catch(xe){console.error("Error saving programme:",xe),vt("Failed to save. Check Firestore rules for clientProgrammes.","error")}},ln=async fe=>{const xe={templateId:fe.id,startDate:dt.now(),completedSessions:{}};await ne(xe),x("dashboard")},Ft=async()=>{if(n)try{await ea(ot(Be,"clientProgrammes",n.id)),B(null),x("browse")}catch(fe){console.error("Error quitting programme:",fe)}},_t=()=>$?Y2.find(fe=>fe.id===$.templateId):null,At=()=>{if(!$)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const fe=$.completedSessions||{},xe=Object.keys(fe).length,Ce=_t();if(!Ce)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const tt=Ce.duration*Ce.daysPerWeek,Ye=Math.min(Math.floor(xe/Ce.daysPerWeek)+1,Ce.duration),ze=xe-(Ye-1)*Ce.daysPerWeek;for(let Xe=1;Xe<=Ce.duration;Xe++)for(let We=0;We<Ce.daysPerWeek;We++){const Ve=`w${Xe}d${We}`;if(!fe[Ve])return{currentWeek:Xe,completedThisWeek:ze,nextDay:We,nextWeek:Xe,totalCompleted:xe,totalSessions:tt}}return{currentWeek:Ce.duration,completedThisWeek:Ce.daysPerWeek,nextDay:-1,totalCompleted:xe,totalSessions:tt,complete:!0}},ct=(fe,xe,Ce)=>{if(!$||fe<=1)return null;const tt=`w${fe-1}d${xe}`,Ye=$.completedSessions?.[tt];if(!Ye)return null;const ze=Ye.exercises?.find(Xe=>Xe.name===Ce);return ze?.sets?.length?ze.sets[ze.sets.length-1]:null},Ke=(fe,xe)=>{const Ce=_t();if(!Ce)return;te(fe),ce(xe),Ue(0),A(0),R([]),I(""),pt(!1),ke(0),W(!1),Me({});const tt=Ce.days[xe],Ye=tt.exercises.map(Ve=>{const we=Yh(Ve,fe,Ce);return{name:Ve.name,type:Ve.type,pbKey:Ve.pbKey,targetSets:we.sets,targetReps:we.reps,targetTime:we.time,sets:[]}});R(Ye);const ze=tt.exercises[0],Xe=ct(fe,xe,ze.name);Xe?.weight&&ze.type==="weighted"?M(String(Xe.weight)):M(""),(async()=>{const Ve={};for(const we of tt.exercises)if(we.storagePath)try{const Je=wl(_l,we.storagePath),lt=await Jc(Je);Ve[we.name]={url:lt,isGif:/\.gif$/i.test(we.storagePath)}}catch(Je){console.warn(`Video not found for ${we.name}:`,Je)}Me(Ve)})(),x("session")},Gt=async()=>{_t();const fe=E[ve];if(!fe)return;let xe={};if(fe.type==="weighted"){const Ye=parseFloat(D)||0,ze=parseInt(U)||0;if(ze===0){vt("Enter your reps","error");return}xe={weight:Ye,reps:ze}}else if(fe.type==="reps"){const Ye=parseInt(U)||0;if(Ye===0){vt("Enter your reps","error");return}xe={reps:Ye}}else if(fe.type==="timed"){const Ye=fe.targetTime-Y;xe={time:Math.max(Ye,1)}}const Ce=[...E];Ce[ve]={...fe,sets:[...fe.sets,xe]},R(Ce),fe.type==="weighted"&&xe.weight>0&&await Ut(fe.name,xe.weight,xe.reps);const tt=fe.sets.length+1;if(tt<fe.targetSets)A(tt),M(xe.weight?String(xe.weight):""),I(""),pt(!1),ke(0);else if(ve+1<E.length){const Ye=ve+1;Ue(Ye),A(0),W(!1);const Xe=_t()?.days[Q]?.exercises[Ye],We=ct(L,Q,Xe?.name);We?.weight&&Xe?.type==="weighted"?M(String(We.weight)):M(""),I(""),pt(!1),ke(0)}else await as(Ce)},as=async fe=>{if(!$||!n)return;const xe=`w${L}d${Q}`,Ce={...$.completedSessions,[xe]:{completedAt:new Date().toISOString(),exercises:fe.map(ze=>({name:ze.name,type:ze.type,sets:ze.sets}))}},tt={...$,completedSessions:Ce};await ne(tt);const Ye=fe.reduce((ze,Xe)=>ze+Xe.sets.reduce((We,Ve)=>We+(Ve.weight||0)*(Ve.reps||0),0),0);Ye>0&&await It(Ye);try{const ze=_t();await lg(An(Be,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:ze?.id,programmeName:ze?.name,week:L,day:Q+1,exerciseCount:fe.length,duration:Math.round(fe.reduce((Xe,We)=>Xe+We.sets.length*1.5,0)),volume:Math.round(Ye),completedAt:dt.now()})}catch(ze){console.error("Error saving workout log:",ze)}Oe.length>0&&(Re({badges:[...Oe]}),nt([])),x("sessionComplete")},It=async fe=>{if(n)try{const xe=await In(ot(Be,"coreBuddyAchievements",n.id)),Ce=xe.exists()?xe.data():{clientId:n.id,badges:[],totalVolume:0},tt=Ce.totalVolume||0,Ye=tt+fe,ze=[];F3.forEach(We=>{Ye>=We.threshold&&tt<We.threshold&&(Ce.badges.some(we=>we.type==="volume_milestone"&&we.milestone===We.threshold)||ze.push({type:"volume_milestone",milestone:We.threshold,label:We.label,achievedAt:dt.now()}))});const Xe=[...Ce.badges,...ze];await Rn(ot(Be,"coreBuddyAchievements",n.id),{clientId:n.id,badges:Xe,totalVolume:Math.round(Ye),updatedAt:dt.now()}),ze.length>0&&nt(We=>[...We,...ze])}catch(xe){console.error("Error updating volume:",xe)}},Ut=async(fe,xe,Ce)=>{if(n)try{const tt=n.id,Ye=await In(ot(Be,"coreBuddyPBs",tt)),Xe=(Ye.exists()?Ye.data():null)?.exercises||{},We=Xe[fe];let Ve=!1;if(We?(xe>(We.weight||0)||xe===(We.weight||0)&&Ce>(We.reps||0))&&(Ve=!0):Ve=!0,Ve){const we={...Xe,[fe]:{weight:xe,reps:Ce,achievedAt:dt.now()}};await Rn(ot(Be,"coreBuddyPBs",tt),{clientId:n.id,exercises:we,updatedAt:dt.now()}),vt(`New PB! ${xe}kg  ${Ce} reps`,"success"),bt(),await Ln(fe,xe)}}catch(tt){console.error("Error checking PB:",tt)}},Ln=async(fe,xe)=>{if(n)try{const Ce=await In(ot(Be,"coreBuddyTargets",n.id));if(!Ce.exists())return;const Ye=(Ce.data().targets||{})[fe];if(!Ye||xe<Ye.targetWeight)return;const ze=await In(ot(Be,"coreBuddyAchievements",n.id)),Xe=ze.exists()?ze.data():{clientId:n.id,badges:[],totalVolume:0};if(Xe.badges.some(Je=>Je.type==="pb_target"&&Je.exercise===fe&&Je.targetWeight===Ye.targetWeight))return;const Ve={type:"pb_target",exercise:fe,group:z3[fe]||"push",targetWeight:Ye.targetWeight,achievedAt:dt.now()},we=[...Xe.badges,Ve];await Rn(ot(Be,"coreBuddyAchievements",n.id),{...Xe,badges:we,updatedAt:dt.now()}),nt(Je=>[...Je,Ve])}catch(Ce){console.error("Error checking target badge:",Ce)}},Ht=He&&i.jsxs("div",{className:`toast-notification ${He.type}`,children:[He.type==="success"&&i.jsx("span",{children:" "}),He.message]}),xn=(fe,xe)=>i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:xe,"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(a||y==="loading")return i.jsx("div",{className:"cb-loading",children:i.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&k){const fe=k;return i.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":d,children:[xn(fe.name,()=>p("/client/core-buddy/workouts")),i.jsxs("main",{className:"pg-main",children:[i.jsxs("div",{className:"pg-overview-hero",children:[i.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:q3[fe.focus]})}),i.jsx("h2",{className:"pg-overview-name",children:fe.name}),i.jsx("p",{className:"pg-overview-desc",children:fe.description}),i.jsxs("div",{className:"pg-overview-stats",children:[i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:fe.duration}),i.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:fe.daysPerWeek}),i.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:fe.duration*fe.daysPerWeek}),i.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),i.jsx("div",{className:"pg-overview-days",children:fe.days.map((xe,Ce)=>i.jsxs("div",{className:"pg-day-card",children:[i.jsxs("div",{className:"pg-day-header",children:[i.jsx("span",{className:"pg-day-name",children:xe.name}),i.jsx("span",{className:"pg-day-label",children:xe.label})]}),i.jsx("div",{className:"pg-day-exercises",children:xe.exercises.map((tt,Ye)=>{const ze=Yh(tt,1,fe);return i.jsxs("div",{className:"pg-day-ex",children:[i.jsx("span",{className:"pg-day-ex-name",children:tt.name}),i.jsx("span",{className:"pg-day-ex-target",children:tt.type==="timed"?`${ze.sets}${ze.time}s`:`${ze.sets}${ze.reps}`}),i.jsx("span",{className:`pg-day-ex-badge pg-badge-${tt.type}`,children:tt.type==="weighted"?"WT":tt.type==="timed"?"TMR":"BW"})]},Ye)})})]},Ce))}),i.jsxs("div",{className:"pg-overview-note",children:[i.jsx("strong",{children:"Progressive Overload:"})," +",fe.repProg," reps/week",fe.timeProg?`, +${fe.timeProg}s/week for timed`:""]}),i.jsx("button",{className:"pg-start-btn",onClick:()=>ln(fe),children:"Start Programme"})]}),Ht]})}if(y==="dashboard"){const fe=_t();if(!fe)return x("browse"),null;const xe=At(),Ce=$?.completedSessions||{},tt=xe.totalSessions?Math.round(xe.totalCompleted/xe.totalSessions*100):0,Ye=Math.round(xe.totalCompleted/(xe.totalSessions||1)*U3);return i.jsxs("div",{className:"pg-page","data-theme":l?"dark":"light","data-accent":d,children:[xn("Programme",()=>p("/client/core-buddy/workouts")),i.jsxs("main",{className:"pg-main",children:[i.jsxs("div",{className:"pg-dash-hero",children:[i.jsxs("div",{className:"pg-dash-ring-wrap",children:[i.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:go.map((ze,Xe)=>i.jsx("line",{x1:ze.x1,y1:ze.y1,x2:ze.x2,y2:ze.y2,className:Xe<Ye?"pg-tick-filled":"pg-tick-empty",strokeWidth:ze.thick?"3":"2"},Xe))}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"pg-dash-ring-logo",width:"50",height:"50"})]}),i.jsx("h2",{className:"pg-dash-name",children:fe.name}),i.jsxs("div",{className:"pg-dash-progress-text",children:[i.jsxs("span",{className:"pg-dash-pct",children:[tt,"%"]}),i.jsxs("span",{className:"pg-dash-week",children:["Week ",xe.currentWeek," of ",fe.duration]})]})]}),i.jsx("div",{className:"pg-weeks",children:Array.from({length:fe.duration},(ze,Xe)=>{const We=Xe+1;return i.jsxs("div",{className:`pg-week-row${We===xe.currentWeek?" pg-week-current":""}`,children:[i.jsxs("span",{className:"pg-week-label",children:["W",We]}),i.jsx("div",{className:"pg-week-days",children:fe.days.map((Ve,we)=>{const Je=`w${We}d${we}`,lt=!!Ce[Je],Et=!xe.complete&&We===xe.nextWeek&&we===xe.nextDay;return i.jsx("button",{className:`pg-day-dot${lt?" done":""}${Et?" next":""}`,disabled:lt,onClick:()=>{Et&&Ke(We,we)},children:lt?i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})}):i.jsx("span",{children:Ve.name.replace("Day ","")})},we)})})]},Xe)})}),!xe.complete&&xe.nextDay>=0&&i.jsxs("div",{className:"pg-next-session",children:[i.jsx("h3",{children:"Next Session"}),i.jsxs("p",{className:"pg-next-info",children:["Week ",xe.nextWeek,"  ",fe.days[xe.nextDay].name,": ",fe.days[xe.nextDay].label]}),i.jsx("div",{className:"pg-next-exercises",children:fe.days[xe.nextDay].exercises.map((ze,Xe)=>{const We=Yh(ze,xe.nextWeek,fe);return i.jsxs("div",{className:"pg-next-ex",children:[i.jsx("span",{className:"pg-next-ex-name",children:ze.name}),i.jsx("span",{className:"pg-next-ex-target",children:ze.type==="timed"?`${We.sets}${We.time}s`:`${We.sets}${We.reps}`})]},Xe)})}),i.jsx("button",{className:"pg-start-btn",onClick:()=>Ke(xe.nextWeek,xe.nextDay),children:"Start Session"})]}),xe.complete&&i.jsxs("div",{className:"pg-complete-msg",children:[i.jsx("h3",{children:"Programme Complete! "}),i.jsxs("p",{children:["You finished all ",xe.totalSessions," sessions."]}),i.jsx("button",{className:"pg-start-btn",onClick:Ft,children:"Choose New Programme"})]}),i.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&Ft()},children:"Quit Programme"})]}),i.jsx(ca,{active:"workouts"}),Ht]})}if(y==="session"){const fe=_t();if(!fe)return null;const xe=fe.days[Q],Ce=xe.exercises[ve],tt=Yh(Ce,L,fe),Ye=E[ve],ze=Ye?.sets?.length||0,Xe=xe.exercises.length,We=(ve+ze/tt.sets)/Xe,Ve=ae[Ce.name],we=ct(L,Q,Ce.name);Ce.type==="timed"&&Y===0&&!Ne&&ze===Ae&&setTimeout(()=>ke(tt.time),0);const Je=()=>{Ve?.isGif?W(!O):ge.current&&(O?ge.current.pause():ge.current.play(),W(!O))};return i.jsxs("div",{className:"pg-page pg-page-session","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"pg-session-progress",children:i.jsx("div",{className:"pg-session-progress-fill",style:{width:`${We*100}%`}})}),i.jsxs("div",{className:"pg-session-header",children:[i.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&x("dashboard")},children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),i.jsxs("div",{className:"pg-session-title",children:[i.jsxs("span",{className:"pg-session-counter",children:[ve+1," / ",Xe]}),i.jsxs("span",{className:"pg-session-week",children:["Week ",L,"  ",xe.name]})]})]}),Ve&&i.jsxs("div",{className:"pg-video-container",onClick:Je,children:[Ve.isGif?i.jsx("img",{className:"pg-video",src:Ve.url,alt:Ce.name}):i.jsx("video",{ref:ge,className:"pg-video",src:Ve.url,loop:!0,muted:!0,playsInline:!0},Ce.name),!O&&i.jsxs("div",{className:"pg-video-overlay",children:[i.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),i.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),i.jsx("div",{className:"pg-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"pg-exercise-card",children:[i.jsx("h2",{className:"pg-ex-name",children:Ce.name}),i.jsx("span",{className:`pg-ex-type-badge pg-badge-${Ce.type}`,children:Ce.type==="weighted"?"Weight + Reps":Ce.type==="timed"?"Timed":"Reps Only"}),Ce.type==="weighted"&&we&&i.jsxs("div",{className:"pg-last-week",children:[i.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),i.jsxs("span",{className:"pg-last-week-value",children:[we.weight,"kg x ",we.reps," reps"]})]}),i.jsxs("div",{className:"pg-ex-set-info",children:[i.jsxs("span",{className:"pg-ex-set-num",children:["Set ",ze+1," of ",tt.sets]}),i.jsxs("span",{className:"pg-ex-target",children:["Target: ",Ce.type==="timed"?`${tt.time}s hold`:`${tt.reps} reps`]})]}),Ce.type==="weighted"&&i.jsxs("div",{className:"pg-input-area",children:[i.jsxs("div",{className:"pg-input-group",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",value:D,onChange:lt=>M(lt.target.value),placeholder:"0",className:"pg-input"})]}),i.jsxs("div",{className:"pg-input-group",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",value:U,onChange:lt=>I(lt.target.value),placeholder:String(tt.reps),className:"pg-input"})]})]}),Ce.type==="reps"&&i.jsx("div",{className:"pg-input-area",children:i.jsxs("div",{className:"pg-input-group pg-input-single",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",value:U,onChange:lt=>I(lt.target.value),placeholder:String(tt.reps),className:"pg-input"})]})}),Ce.type==="timed"&&i.jsxs("div",{className:"pg-timer-area",children:[i.jsx("div",{className:"pg-timer-display",children:i.jsxs("span",{className:"pg-timer-value",children:[Y,"s"]})}),Ne?i.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>pt(!1),children:"Stop"}):i.jsx("button",{className:"pg-timer-btn",onClick:()=>{Y===0&&ke(tt.time),pt(!0)},children:Y<tt.time&&Y>0?"Resume":"Start Timer"})]}),i.jsx("button",{className:"pg-log-set-btn",onClick:Gt,disabled:Ce.type==="timed"&&Ne,children:ze+1<tt.sets?"Log Set":ve+1<Xe?"Log Set  Next Exercise":"Log Set  Complete"}),Ye?.sets?.length>0&&i.jsx("div",{className:"pg-completed-sets",children:Ye.sets.map((lt,Et)=>i.jsxs("div",{className:"pg-completed-set",children:[i.jsx("span",{className:"pg-completed-set-check",children:""}),i.jsxs("span",{children:["Set ",Et+1,": ",lt.weight!==void 0?`${lt.weight}kg  ${lt.reps}`:lt.time!==void 0?`${lt.time}s`:`${lt.reps} reps`]})]},Et))})]}),Ht]})}if(y==="sessionComplete"){const xe=_t()?.days[Q],Ce=E.reduce((Ye,ze)=>Ye+ze.sets.length,0),tt=E.reduce((Ye,ze)=>Ye+ze.sets.reduce((Xe,We)=>Xe+(We.weight||0)*(We.reps||0),0),0);return i.jsxs("div",{className:"pg-page pg-page-center","data-theme":l?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"pg-session-done",children:[i.jsxs("div",{className:"pg-done-ring",children:[i.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:go.map((Ye,ze)=>i.jsx("line",{x1:Ye.x1,y1:Ye.y1,x2:Ye.x2,y2:Ye.y2,className:"pg-tick-complete",strokeWidth:Ye.thick?"3.5":"2",style:{animationDelay:`${ze*.02}s`}},ze))}),i.jsx("div",{className:"pg-done-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),i.jsxs("p",{className:"pg-done-subtitle",children:["Week ",L,"  ",xe?.name,": ",xe?.label]}),i.jsxs("div",{className:"pg-done-stats",children:[i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:E.length}),i.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:Ce}),i.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),tt>0&&i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:Math.round(tt).toLocaleString()}),i.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),i.jsx("button",{className:"pg-start-btn",onClick:()=>x("dashboard"),children:"Back to Programme"})]}),Ee&&i.jsx("div",{className:"pg-badge-celebration",onClick:()=>Re(null),children:i.jsxs("div",{className:"pg-badge-celebration-card",onClick:Ye=>Ye.stopPropagation(),children:[i.jsx("div",{className:"pg-badge-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pg-badge-celebration-title",children:Ee.badges.length===1?"Badge Earned!":`${Ee.badges.length} Badges Earned!`}),i.jsx("div",{className:"pg-badge-celebration-list",children:Ee.badges.map((Ye,ze)=>i.jsx("div",{className:"pg-badge-celebration-item",children:Ye.type==="pb_target"?`${Ye.exercise}  ${Ye.targetWeight}kg`:Ye.label},ze))}),i.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Re(null),children:"Tap to dismiss"})]})}),Ht]})}return null}const $3={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},W3={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},Cp=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function G3(s){return $3[s]||"push"}function K3(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function Y3(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function Q3(){const{currentUser:s,isClient:e,clientData:n,loading:a}=br(),{isDark:l,toggleTheme:u,accent:d}=ha(),p=Ds(),[g,y]=_.useState(!0),[x,k]=_.useState(null),[j,P]=_.useState({});_.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),_.useEffect(()=>{if(!n)return;(async()=>{try{const[R,D]=await Promise.all([In(ot(Be,"coreBuddyAchievements",n.id)),In(ot(Be,"coreBuddyPBs",n.id))]);R.exists()&&k(R.data()),D.exists()&&P(D.data().exercises||{})}catch(R){console.error("Error loading achievements:",R)}y(!1)})()},[n]);const $=x?.badges||[],B=x?.totalVolume||0,L=$.filter(E=>E.type==="pb_target"),te=$.filter(E=>E.type==="volume_milestone"),Q={push:[],pull:[],lower:[],core:[]};L.forEach(E=>{const R=E.group||G3(E.exercise);Q[R]&&Q[R].push(E)});const ce=Cp.find(E=>B<E.threshold),ve=Cp.filter(E=>B>=E.threshold).pop()?.threshold||0,Ue=ce?(B-ve)/(ce.threshold-ve):1;if(a||g)return i.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsx("div",{className:"ach-loading-inline",children:i.jsx("div",{className:"cb-loading-spinner"})})]});const Ae=$.length,A=Ae>0||B>0;return i.jsxs("div",{className:"ach-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"ach-main",children:[i.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/core-buddy"),children:" Back"}),i.jsxs("div",{className:"ach-stats-banner",children:[i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:Ae}),i.jsx("span",{className:"ach-stat-label",children:Ae===1?"Badge":"Badges"})]}),i.jsx("div",{className:"ach-stat-divider"}),i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:K3(B)}),i.jsxs("span",{className:"ach-stat-label",children:[Y3(B)," lifted"]})]}),i.jsx("div",{className:"ach-stat-divider"}),i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:Object.keys(j).length}),i.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!A&&i.jsxs("div",{className:"ach-empty",children:[i.jsx("div",{className:"ach-empty-icon",children:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[i.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),i.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),i.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),i.jsx("h4",{children:"No achievements yet"}),i.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),i.jsxs("div",{className:"ach-section",children:[i.jsxs("h3",{className:"ach-section-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),i.jsxs("div",{className:"ach-volume-hero",children:[i.jsxs("div",{className:"ach-volume-ring",children:[i.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:go.map((E,R)=>{const D=R<Math.round(Ue*60);return i.jsx("line",{x1:E.x1,y1:E.y1,x2:E.x2,y2:E.y2,className:D?"ach-tick-filled":"ach-tick-empty",strokeWidth:E.thick?"3":"2"},R)})}),i.jsxs("div",{className:"ach-volume-center",children:[i.jsx("span",{className:"ach-volume-number",children:Math.round(B).toLocaleString()}),i.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),ce&&i.jsxs("div",{className:"ach-volume-next",children:["Next: ",i.jsx("strong",{children:ce.label})," (",(ce.threshold-B).toLocaleString(),"kg to go)"]})]}),i.jsx("div",{className:"ach-milestone-shelf",children:Cp.map((E,R)=>{const D=B>=E.threshold,M=te.find(U=>U.milestone===E.threshold);return i.jsxs("div",{className:`ach-milestone ${D?"unlocked":"locked"}`,children:[i.jsx("div",{className:"ach-milestone-hex",children:i.jsx("span",{className:"ach-milestone-icon",children:E.icon})}),i.jsx("span",{className:"ach-milestone-label",children:E.label}),M?.achievedAt&&i.jsx("span",{className:"ach-milestone-date",children:(M.achievedAt.toDate?M.achievedAt.toDate():new Date(M.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},R)})})]}),i.jsxs("div",{className:"ach-section",children:[i.jsxs("h3",{className:"ach-section-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),L.length===0?i.jsx("div",{className:"ach-pb-empty",children:i.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",i.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(Q).map(([E,R])=>{if(R.length===0)return null;const D=W3[E];return i.jsxs("div",{className:"ach-group",children:[i.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:D.color},children:[i.jsx("span",{className:"ach-group-label",style:{color:D.color},children:D.label}),i.jsx("span",{className:"ach-group-count",children:R.length})]}),i.jsx("div",{className:"ach-badge-grid",children:R.map((M,U)=>i.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${U*.06}s`,"--group-color":D.color},children:[i.jsx("div",{className:"ach-badge-hex",style:{borderColor:D.color,boxShadow:`0 0 12px ${D.color}33`},children:i.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:D.color,strokeWidth:"2",strokeLinecap:"round",children:i.jsx("path",{d:D.icon})})}),i.jsxs("div",{className:"ach-badge-info",children:[i.jsx("span",{className:"ach-badge-exercise",children:M.exercise}),i.jsxs("span",{className:"ach-badge-value",style:{color:D.color},children:[M.targetWeight,"kg"]}),M.achievedAt&&i.jsx("span",{className:"ach-badge-date",children:(M.achievedAt.toDate?M.achievedAt.toDate():new Date(M.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},U))})]},E)})]})]}),i.jsx(ca,{active:"home"})]})}const Qh=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function X3(s){const e=new Date(s),n=e.getDay(),a=n===0?-6:1-n;return e.setDate(e.getDate()+a),e.setHours(0,0,0,0),e}function Rp(s){return s.toISOString().split("T")[0]}function J3(s){return Array.from({length:7},(e,n)=>{const a=new Date(s);return a.setDate(s.getDate()+n),a})}function Z3(){const{currentUser:s,isClient:e,clientData:n,loading:a}=br(),{isDark:l,toggleTheme:u,accent:d}=ha(),p=Ds(),[g,y]=_.useState({}),[x,k]=_.useState(!0),[j,P]=_.useState(!1),[$,B]=_.useState(0),[L,te]=_.useState(null),[Q,ce]=_.useState(null),[ve,Ue]=_.useState(!1),Ae=_.useRef([]),A=_.useRef([]),E=_.useCallback((W,ge="info")=>{te({message:W,type:ge}),setTimeout(()=>te(null),3e3)},[]),R=new Date,D=Rp(R),M=X3(R),U=J3(M),I=["M","T","W","T","F","S","S"];_.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),_.useEffect(()=>{if(!s||!n)return;(async()=>{try{const ge=An(Be,"habitLogs"),Ee=ds(ge,Un("clientId","==",n.id)),Re=await Gn(Ee),Oe={};Re.docs.forEach(Ze=>{const vt=Ze.data();Oe[vt.date]={...vt,_id:Ze.id}}),y(Oe);let nt=0;const He=new Date(R);for(;;){const Ze=Rp(He),vt=Oe[Ze];if(vt)if(Object.values(vt.habits||{}).filter(Boolean).length>=3)nt++,He.setDate(He.getDate()-1);else break;else if(Ze===D)He.setDate(He.getDate()-1);else break}B(nt)}catch(ge){console.error("Error loading habit logs:",ge)}finally{k(!1)}})()},[s,n]);const Ne=g[D]||{habits:{}},pt=async W=>{if(!s||j)return;const ge=Ne.habits?.[W]||!1;ge||(Ae.current=[...Array(10)].map((Ee,Re)=>{const Oe=Re/10*2*Math.PI,nt=18+Math.random()*20;return{tx:Math.cos(Oe)*nt,ty:Math.sin(Oe)*nt,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),ce(W),setTimeout(()=>ce(null),700)),P(!0);try{const Ee=Ne.habits||{},Re={...Ee,[W]:!Ee[W]},Oe=Ne._id||`${n.id}_${D}`;await Rn(ot(Be,"habitLogs",Oe),{clientId:n.id,date:D,habits:Re}),y(He=>({...He,[D]:{clientId:n.id,date:D,habits:Re,_id:Oe}})),Object.values(Re).filter(Boolean).length===Qh.length&&!ge&&(A.current=[...Array(50)].map((He,Ze)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][Ze%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{Ue(!0),setTimeout(()=>Ue(!1),3500)},500))}catch(Ee){console.error("Error saving habit:",Ee),E("Failed to save. Try again.","error")}finally{P(!1)}},Y=U.map(W=>{const ge=Rp(W),Ee=g[ge],Re=Ee?Object.values(Ee.habits||{}).filter(Boolean).length:0;return{date:W,dateStr:ge,completed:Re,total:Qh.length}}),ke=Y.reduce((W,ge)=>W+ge.completed,0),Pe=Y.reduce((W,ge)=>W+ge.total,0),ae=Pe>0?Math.round(ke/Pe*100):0,Me=Object.values(Ne.habits||{}).filter(Boolean).length,O=Math.round(Me/Qh.length*100);return i.jsxs("div",{className:"cbc-page","data-theme":l?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a||x?i.jsx("div",{className:"cbc-loading-inline",children:i.jsx("div",{className:"cbc-loading-spinner"})}):i.jsxs("main",{className:"cbc-main",children:[i.jsxs("div",{className:"cbc-ring-section",children:[i.jsxs("div",{className:"cbc-progress-ring",children:[i.jsxs("svg",{viewBox:"0 0 200 200",children:[i.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),i.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-O/100*2*Math.PI*80})]}),i.jsxs("div",{className:"cbc-ring-center",children:[i.jsxs("span",{className:"cbc-ring-pct",children:[O,"%"]}),i.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),i.jsxs("div",{className:"cbc-streak",children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),i.jsx("span",{className:"cbc-streak-count",children:$}),i.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),i.jsxs("div",{className:"cbc-section",children:[i.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),i.jsx("div",{className:"cbc-habits",children:Qh.map(W=>{const ge=Ne.habits?.[W.key]||!1,Ee=Q===W.key;return i.jsxs("button",{className:`cbc-habit-btn cbc-habit-${W.key} ${ge?"cbc-habit-done":""} ${Ee?"cbc-habit-just-checked":""}`,onClick:()=>pt(W.key),disabled:j,children:[i.jsx("div",{className:"cbc-habit-check",children:ge?i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${Ee?"cbc-check-animate":""}`})}):i.jsx("div",{className:"cbc-habit-circle"})}),Ee&&i.jsx("div",{className:"cbc-particles",children:Ae.current.map((Re,Oe)=>i.jsx("span",{className:"cbc-particle",style:{"--tx":`${Re.tx}px`,"--ty":`${Re.ty}px`,"--size":`${Re.size}px`,animationDuration:`${Re.duration}s`}},Oe))}),i.jsx("div",{className:`cbc-habit-icon cbc-icon-${W.key}`,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:i.jsx("path",{d:W.icon})})}),i.jsx("span",{className:"cbc-habit-label",children:W.label})]},W.key)})})]}),i.jsxs("div",{className:"cbc-section",children:[i.jsx("h2",{className:"cbc-section-title",children:"This Week"}),i.jsx("div",{className:"cbc-week-grid",children:Y.map((W,ge)=>{const Ee=W.dateStr===D,Re=W.total>0?W.completed/W.total:0,Oe=38,nt=2*Math.PI*Oe,He=nt-Re*nt;return i.jsxs("div",{className:`cbc-day-ring ${Ee?"cbc-day-today":""} ${W.completed>0?"cbc-day-active":""}`,children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:Oe}),i.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:Oe,strokeDasharray:nt,strokeDashoffset:He})]}),i.jsx("span",{className:"cbc-day-label",children:I[ge]}),i.jsxs("span",{className:"cbc-day-count",children:[W.completed,"/",W.total]})]},ge)})}),i.jsxs("div",{className:"cbc-week-summary",children:[i.jsx("div",{className:"cbc-week-summary-bar",children:i.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${ae}%`}})}),i.jsxs("span",{className:"cbc-week-summary-text",children:[ke," / ",Pe," habits this week (",ae,"%)"]})]})]})]}),i.jsx(ca,{active:"home"}),ve&&i.jsxs("div",{className:"cbc-celebration",onClick:()=>Ue(!1),children:[i.jsx("div",{className:"cbc-confetti-container",children:A.current.map((W,ge)=>i.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${W.x}%`,"--delay":`${W.delay}s`,"--color":W.color,"--drift":`${W.drift}px`,"--spin":`${W.spin}deg`,"--duration":`${W.duration}s`,width:`${W.width}px`,height:`${W.height}px`}},ge))}),i.jsxs("div",{className:"cbc-celebration-card",children:[i.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),i.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),i.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),L&&i.jsx("div",{className:`toast-notification ${L.type}`,children:L.message})]})}function Xh(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Q2(s,e){return[s,e].sort().join("_")}function eD(){const{currentUser:s,isClient:e,clientData:n,loading:a}=br(),{isDark:l,toggleTheme:u}=ha(),d=Ds(),[p,g]=_.useState("buddies"),[y,x]=_.useState([]),[k,j]=_.useState([]),[P,$]=_.useState([]),[B,L]=_.useState(""),[te,Q]=_.useState([]),[ce,ve]=_.useState([]),[Ue,Ae]=_.useState(!0),[A,E]=_.useState(null),[R,D]=_.useState(null),M=_.useCallback((ae,Me="info")=>{D({message:ae,type:Me}),setTimeout(()=>D(null),3500)},[]);_.useEffect(()=>{!a&&(!s||!e)&&d("/")},[s,e,a,d]);const U=_.useCallback(async()=>{if(n){Ae(!0);try{const ae=n.id,O=(await Gn(An(Be,"clients"))).docs.map(He=>({id:He.id,...He.data()}));ve(O);const W=Object.fromEntries(O.map(He=>[He.id,He])),ge=await Gn(ds(An(Be,"buddies"),Un("user1","==",ae))),Ee=await Gn(ds(An(Be,"buddies"),Un("user2","==",ae))),Re=new Set;[...ge.docs,...Ee.docs].forEach(He=>{const Ze=He.data(),vt=Ze.user1===ae?Ze.user2:Ze.user1;Re.add(vt)}),x(Array.from(Re).map(He=>W[He]).filter(Boolean));const Oe=await Gn(ds(An(Be,"buddyRequests"),Un("toId","==",ae),Un("status","==","pending")));j(Oe.docs.map(He=>({reqId:He.id,...He.data(),fromClient:W[He.data().fromId]})).filter(He=>He.fromClient));const nt=await Gn(ds(An(Be,"buddyRequests"),Un("fromId","==",ae),Un("status","==","pending")));$(nt.docs.map(He=>({reqId:He.id,...He.data(),toClient:W[He.data().toId]})).filter(He=>He.toClient))}catch(ae){console.error("Error fetching buddy data:",ae),M("Failed to load buddies","error")}finally{Ae(!1)}}},[n,M]);_.useEffect(()=>{U()},[U]),_.useEffect(()=>{if(!B.trim()||!n){Q([]);return}const ae=B.toLowerCase(),Me=n.id,O=new Set(y.map(Re=>Re.id)),W=new Set(P.map(Re=>Re.toId)),ge=new Set(k.map(Re=>Re.fromId)),Ee=ce.filter(Re=>Re.id===Me||!Re.name||!Re.coreBuddyAccess?!1:Re.name.toLowerCase().includes(ae)).map(Re=>({...Re,isBuddy:O.has(Re.id),isPendingOut:W.has(Re.id),isPendingIn:ge.has(Re.id)})).slice(0,20);Q(Ee)},[B,ce,y,P,k,n]);const I=async ae=>{E(ae);try{const Me=`${n.id}_${ae}`;await Rn(ot(Be,"buddyRequests",Me),{fromId:n.id,toId:ae,status:"pending",createdAt:Id()}),M("Buddy request sent!","success"),await U()}catch(Me){console.error("Error sending request:",Me),M("Failed to send request","error")}finally{E(null)}},Ne=async ae=>{E(ae.reqId);try{const Me=Q2(ae.fromId,n.id);await Rn(ot(Be,"buddies",Me),{user1:[ae.fromId,n.id].sort()[0],user2:[ae.fromId,n.id].sort()[1],connectedAt:Id()}),await ea(ot(Be,"buddyRequests",ae.reqId)),M("Buddy added!","success"),await U()}catch(Me){console.error("Error accepting request:",Me),M("Failed to accept","error")}finally{E(null)}},pt=async ae=>{E(ae.reqId);try{await ea(ot(Be,"buddyRequests",ae.reqId)),M("Request declined","info"),await U()}catch(Me){console.error("Error declining:",Me),M("Failed to decline","error")}finally{E(null)}},Y=async ae=>{E(ae.reqId);try{await ea(ot(Be,"buddyRequests",ae.reqId)),M("Request cancelled","info"),await U()}catch(Me){console.error("Error cancelling:",Me),M("Failed to cancel","error")}finally{E(null)}},ke=async ae=>{E(ae);try{const Me=Q2(n.id,ae);await ea(ot(Be,"buddies",Me)),M("Buddy removed","info"),await U()}catch(Me){console.error("Error removing buddy:",Me),M("Failed to remove buddy","error")}finally{E(null)}},Pe=k.length;return a?i.jsx("div",{className:"bdy-loading",children:i.jsx("div",{className:"bdy-spinner"})}):!s||!e||!n?null:i.jsxs("div",{className:"bdy-page","data-theme":l?"dark":"light",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>d("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:l?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"bdy-main",children:[i.jsx("h1",{className:"bdy-title",children:"Buddies"}),i.jsxs("div",{className:"bdy-tabs",children:[i.jsxs("button",{className:`bdy-tab${p==="buddies"?" active":""}`,onClick:()=>g("buddies"),children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),i.jsx("span",{children:"My Buddies"})]}),i.jsxs("button",{className:`bdy-tab${p==="requests"?" active":""}`,onClick:()=>g("requests"),children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),i.jsx("line",{x1:"22",y1:"11",x2:"16",y2:"11"})]}),i.jsx("span",{children:"Requests"}),Pe>0&&i.jsx("span",{className:"bdy-tab-badge",children:Pe})]}),i.jsxs("button",{className:`bdy-tab${p==="search"?" active":""}`,onClick:()=>g("search"),children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),i.jsx("span",{children:"Find"})]})]}),Ue?i.jsx("div",{className:"bdy-content-loading",children:i.jsx("div",{className:"bdy-spinner"})}):i.jsxs(i.Fragment,{children:[p==="buddies"&&i.jsx("div",{className:"bdy-section",children:y.length===0?i.jsxs("div",{className:"bdy-empty",children:[i.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),i.jsx("h3",{children:"No buddies yet"}),i.jsx("p",{children:"Find members and send buddy requests to connect!"}),i.jsx("button",{className:"bdy-empty-btn",onClick:()=>g("search"),children:"Find Buddies"})]}):i.jsx("div",{className:"bdy-list",children:y.map(ae=>i.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${ae.id}`),children:[i.jsx("div",{className:"bdy-avatar",children:ae.photoURL?i.jsx("img",{src:ae.photoURL,alt:ae.name}):i.jsx("span",{children:Xh(ae.name)})}),i.jsx("div",{className:"bdy-card-info",children:i.jsx("span",{className:"bdy-card-name",children:ae.name})}),i.jsx("button",{className:"bdy-remove-btn",onClick:Me=>{Me.stopPropagation(),ke(ae.id)},disabled:A===ae.id,"aria-label":"Remove buddy",children:A===ae.id?i.jsx("div",{className:"bdy-btn-spinner"}):i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ae.id))})}),p==="requests"&&i.jsxs("div",{className:"bdy-section",children:[k.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"bdy-section-title",children:"Incoming"}),i.jsx("div",{className:"bdy-list",children:k.map(ae=>i.jsxs("div",{className:"bdy-card",children:[i.jsx("div",{className:"bdy-avatar",children:ae.fromClient.photoURL?i.jsx("img",{src:ae.fromClient.photoURL,alt:ae.fromClient.name}):i.jsx("span",{children:Xh(ae.fromClient.name)})}),i.jsxs("div",{className:"bdy-card-info",children:[i.jsx("span",{className:"bdy-card-name",children:ae.fromClient.name}),i.jsx("span",{className:"bdy-card-sub",children:"wants to be your buddy"})]}),i.jsxs("div",{className:"bdy-action-pair",children:[i.jsx("button",{className:"bdy-accept-btn",onClick:()=>Ne(ae),disabled:A===ae.reqId,children:A===ae.reqId?i.jsx("div",{className:"bdy-btn-spinner"}):i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("path",{d:"M5 13l4 4L19 7"})})}),i.jsx("button",{className:"bdy-decline-btn",onClick:()=>pt(ae),disabled:A===ae.reqId,children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]},ae.reqId))})]}),P.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"bdy-section-title",children:"Sent"}),i.jsx("div",{className:"bdy-list",children:P.map(ae=>i.jsxs("div",{className:"bdy-card",children:[i.jsx("div",{className:"bdy-avatar",children:ae.toClient?.photoURL?i.jsx("img",{src:ae.toClient.photoURL,alt:ae.toClient.name}):i.jsx("span",{children:Xh(ae.toClient?.name)})}),i.jsxs("div",{className:"bdy-card-info",children:[i.jsx("span",{className:"bdy-card-name",children:ae.toClient?.name}),i.jsx("span",{className:"bdy-card-sub",children:"pending"})]}),i.jsx("button",{className:"bdy-cancel-btn",onClick:()=>Y(ae),disabled:A===ae.reqId,children:A===ae.reqId?i.jsx("div",{className:"bdy-btn-spinner"}):"Cancel"})]},ae.reqId))})]}),k.length===0&&P.length===0&&i.jsxs("div",{className:"bdy-empty",children:[i.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("path",{d:"M22 4L12 14.01l-3-3"})]}),i.jsx("h3",{children:"No pending requests"}),i.jsx("p",{children:"All caught up!"})]})]}),p==="search"&&i.jsxs("div",{className:"bdy-section",children:[i.jsxs("div",{className:"bdy-search-bar",children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),i.jsx("input",{type:"text",placeholder:"Search by name...",value:B,onChange:ae=>L(ae.target.value),autoFocus:!0}),B&&i.jsx("button",{className:"bdy-search-clear",onClick:()=>L(""),children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),B.trim()&&te.length===0&&i.jsx("div",{className:"bdy-empty bdy-empty-sm",children:i.jsxs("p",{children:['No members found for "',B,'"']})}),te.length>0&&i.jsx("div",{className:"bdy-list",children:te.map(ae=>i.jsxs("div",{className:"bdy-card",onClick:()=>d(`/client/core-buddy/profile/${ae.id}`),children:[i.jsx("div",{className:"bdy-avatar",children:ae.photoURL?i.jsx("img",{src:ae.photoURL,alt:ae.name}):i.jsx("span",{children:Xh(ae.name)})}),i.jsxs("div",{className:"bdy-card-info",children:[i.jsx("span",{className:"bdy-card-name",children:ae.name}),ae.isBuddy&&i.jsx("span",{className:"bdy-card-badge",children:"Buddy"})]}),ae.isBuddy?i.jsx("span",{className:"bdy-status-icon",children:i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-success)",strokeWidth:"2.5",children:i.jsx("path",{d:"M5 13l4 4L19 7"})})}):ae.isPendingOut?i.jsx("span",{className:"bdy-pending-label",children:"Pending"}):ae.isPendingIn?i.jsx("button",{className:"bdy-accept-btn",onClick:Me=>{Me.stopPropagation();const O=k.find(W=>W.fromId===ae.id);O&&Ne(O)},disabled:!!A,children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("path",{d:"M5 13l4 4L19 7"})})}):i.jsx("button",{className:"bdy-add-btn",onClick:Me=>{Me.stopPropagation(),I(ae.id)},disabled:A===ae.id,children:A===ae.id?i.jsx("div",{className:"bdy-btn-spinner"}):i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]},ae.id))})]})]})]}),i.jsx(ca,{}),R&&i.jsxs("div",{className:`toast-notification ${R.type}`,children:[i.jsx("span",{className:"toast-icon",children:R.type==="success"?i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M5 13 L9 17 L19 7"})}):R.type==="error"?i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),i.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),i.jsx("span",{className:"toast-message",children:R.message})]})]})}function tD(s){if(!s)return"?";const e=s.trim().split(/\s+/);return e.length===1?e[0][0].toUpperCase():(e[0][0]+e[e.length-1][0]).toUpperCase()}function Ap(s,e){return[s,e].sort().join("_")}function nD(s){if(s<60)return`${s}m`;const e=Math.floor(s/60),n=s%60;return n>0?`${e}h ${n}m`:`${e}h`}function sD(s){const e=new Date(s),n=e.getDay(),a=n===0?-6:1-n;return e.setDate(e.getDate()+a),e.setHours(0,0,0,0),e}function X2(s){return s.toISOString().split("T")[0]}function rD(s){if(s.size===0)return 0;const n=sD(new Date);let a=0,l=new Date(n);const u=new Date(l);u.setDate(u.getDate()+6);let d=!1;s.forEach(p=>{const g=new Date(p);g>=l&&g<=u&&(d=!0)}),d||l.setDate(l.getDate()-7);for(let p=0;p<52;p++){const g=new Date(l),y=new Date(l);y.setDate(y.getDate()+6);let x=!1;if(s.forEach(k=>{const j=new Date(k);j>=g&&j<=y&&(x=!0)}),x)a++,l.setDate(l.getDate()-7);else break}return a}const J2=[{id:"first_workout",name:"First Rep",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M6 4v16"}),i.jsx("path",{d:"M18 4v16"}),i.jsx("path",{d:"M6 12h12"}),i.jsx("rect",{x:"3",y:"7",width:"6",height:"10",rx:"1"}),i.jsx("rect",{x:"15",y:"7",width:"6",height:"10",rx:"1"})]})},{id:"workouts_10",name:"On Fire",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2c1 3 4 5.5 4 8.5a4 4 0 1 1-8 0C8 7.5 11 5 12 2z"}),i.jsx("path",{d:"M12 14v4"}),i.jsx("path",{d:"M10 18h4"})]})},{id:"workouts_25",name:"Lightning",icon:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})})},{id:"workouts_50",name:"Iron Will",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M4 12h4"}),i.jsx("path",{d:"M16 12h4"}),i.jsx("path",{d:"M12 4v4"}),i.jsx("path",{d:"M12 16v4"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20z"})]})},{id:"workouts_100",name:"Century",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]})},{id:"streak_2",name:"2 Wk",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),i.jsx("path",{d:"M16 2v4"}),i.jsx("path",{d:"M8 2v4"}),i.jsx("path",{d:"M3 10h18"}),i.jsx("path",{d:"M9 16l2 2 4-4"})]})},{id:"streak_4",name:"4 Wk",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),i.jsx("path",{d:"M16 2v4"}),i.jsx("path",{d:"M8 2v4"}),i.jsx("path",{d:"M3 10h18"}),i.jsx("path",{d:"M8 16h8"}),i.jsx("path",{d:"M12 14v4"})]})},{id:"streak_8",name:"8 Wk",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M10 2c-1.5 3-5 5-5 9a7 7 0 0 0 14 0c0-4-3.5-6-5-9"}),i.jsx("path",{d:"M12 18c-2 0-3-1.5-3-3 0-2 1.5-3 3-5 1.5 2 3 3 3 5 0 1.5-1 3-3 3z"})]})},{id:"programme_done",name:"Finisher",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5C7 4 7 7 7 7"}),i.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5C17 4 17 7 17 7"}),i.jsx("path",{d:"M4 22h16"}),i.jsx("path",{d:"M10 22V8a4 4 0 0 0-4-4H8a4 4 0 0 0 4 4h0a4 4 0 0 0 4-4h2a4 4 0 0 0-4 4v14"}),i.jsx("path",{d:"M9 12l2 2 4-4"})]})},{id:"habits_7",name:"Habits",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("path",{d:"M22 4L12 14.01l-3-3"})]})},{id:"nutrition_7",name:"Fuel",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 2a5 5 0 0 1 5 5c0 2-1.5 3.5-3 4.5V20a2 2 0 0 1-4 0v-8.5C8.5 10.5 7 9 7 7a5 5 0 0 1 5-5z"}),i.jsx("path",{d:"M9 7h6"})]})},{id:"first_pb",name:"PB",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"8",r:"6"}),i.jsx("path",{d:"M12 14v8"}),i.jsx("path",{d:"M9 18l3 3 3-3"}),i.jsx("path",{d:"M10 6l2 2 2-2"})]})},{id:"pbs_5",name:"Climb",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 20h18"}),i.jsx("path",{d:"M5 20V10l4-6"}),i.jsx("path",{d:"M9 20V4"}),i.jsx("path",{d:"M13 20V10l4-6"}),i.jsx("path",{d:"M17 20V4"}),i.jsx("path",{d:"M21 20V10"})]})},{id:"leaderboard_join",name:"Social",icon:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}];function aD(){const{userId:s}=ME(),{currentUser:e,isClient:n,clientData:a,loading:l}=br(),{isDark:u,toggleTheme:d}=ha(),p=Ds(),[g,y]=_.useState(null),[x,k]=_.useState({workouts:0,minutes:0,streak:0}),[j,P]=_.useState([]),[$,B]=_.useState("none"),[L,te]=_.useState(null),[Q,ce]=_.useState(!0),[ve,Ue]=_.useState(!1),[Ae,A]=_.useState(null),E=_.useCallback((Ne,pt="info")=>{A({message:Ne,type:pt}),setTimeout(()=>A(null),3500)},[]);_.useEffect(()=>{!l&&(!e||!n)&&p("/")},[e,n,l,p]);const R=a?.id===s;_.useEffect(()=>{if(!a||!s)return;let Ne=!1;return(async()=>{ce(!0);try{const ke=(await Gn(An(Be,"clients"))).docs.map(Ze=>({id:Ze.id,...Ze.data()})).find(Ze=>Ze.id===s);if(!ke){Ne||ce(!1);return}Ne||y(ke);const Pe=new Date,ae=new Date(Pe);ae.setDate(ae.getDate()-365),ae.setHours(0,0,0,0);let Me=0,O=0;const W=new Set;(await Gn(ds(An(Be,"workoutLogs"),Un("clientId","==",s)))).docs.forEach(Ze=>{const vt=Ze.data();Me++,O+=vt.duration||0,vt.completedAt&&W.add(X2(vt.completedAt.toDate()))}),(await Gn(An(Be,"circuitSessions"))).docs.forEach(Ze=>{const vt=Ze.data();(vt.slots||[]).forEach(nn=>{nn.attended&&nn.memberId===s&&(Me++,O+=45,W.add(vt.date))})});const Re=X2(new Date);(await Gn(ds(An(Be,"sessions"),Un("clientId","==",s)))).docs.forEach(Ze=>{const vt=Ze.data();vt.date<=Re&&(Me++,O+=vt.duration||45,W.add(vt.date))});const nt=rD(W);Ne||k({workouts:Me,minutes:O,streak:nt});const He=await In(ot(Be,"coreBuddyAchievements",s));if(Ne||P(He.exists()?He.data().unlocked||[]:[]),!R){const Ze=a.id,vt=Ap(Ze,s);if((await In(ot(Be,"buddies",vt))).exists())Ne||B("buddy");else{const Tt=`${Ze}_${s}`,bt=await In(ot(Be,"buddyRequests",Tt));if(bt.exists()&&bt.data().status==="pending")Ne||(B("pending_out"),te(Tt));else{const ne=`${s}_${Ze}`,ln=await In(ot(Be,"buddyRequests",ne));ln.exists()&&ln.data().status==="pending"?Ne||(B("pending_in"),te(ne)):Ne||B("none")}}}}catch(pt){console.error("Error loading profile:",pt)}finally{Ne||ce(!1)}})(),()=>{Ne=!0}},[a,s,R]);const D=async()=>{Ue(!0);try{const Ne=`${a.id}_${s}`;await Rn(ot(Be,"buddyRequests",Ne),{fromId:a.id,toId:s,status:"pending",createdAt:Id()}),B("pending_out"),te(Ne),E("Buddy request sent!","success")}catch(Ne){console.error(Ne),E("Failed to send request","error")}finally{Ue(!1)}},M=async()=>{if(L){Ue(!0);try{const Ne=Ap(a.id,s);await Rn(ot(Be,"buddies",Ne),{user1:[a.id,s].sort()[0],user2:[a.id,s].sort()[1],connectedAt:Id()}),await ea(ot(Be,"buddyRequests",L)),B("buddy"),E("Buddy added!","success")}catch(Ne){console.error(Ne),E("Failed to accept","error")}finally{Ue(!1)}}},U=async()=>{if(L){Ue(!0);try{await ea(ot(Be,"buddyRequests",L)),B("none"),E($==="pending_out"?"Request cancelled":"Request declined","info")}catch(Ne){console.error(Ne),E("Failed","error")}finally{Ue(!1)}}},I=async()=>{Ue(!0);try{const Ne=Ap(a.id,s);await ea(ot(Be,"buddies",Ne)),B("none"),E("Buddy removed","info")}catch(Ne){console.error(Ne),E("Failed to remove","error")}finally{Ue(!1)}};return l||Q||!a?i.jsx("div",{className:"prf-loading","data-theme":u?"dark":"light",children:i.jsx("div",{className:"prf-spinner"})}):!e||!n?null:g?i.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"prf-main",children:[i.jsxs("div",{className:"prf-hero",children:[i.jsx("div",{className:"prf-avatar-lg",children:g.photoURL?i.jsx("img",{src:g.photoURL,alt:g.name}):i.jsx("span",{children:tD(g.name)})}),i.jsx("h1",{className:"prf-name",children:g.name}),R&&i.jsx("span",{className:"prf-you-label",children:"You"}),!R&&i.jsxs("div",{className:"prf-buddy-action",children:[$==="none"&&i.jsx("button",{className:"prf-btn prf-btn-primary",onClick:D,disabled:ve,children:ve?i.jsx("div",{className:"prf-btn-spinner"}):i.jsxs(i.Fragment,{children:[i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Buddy"]})}),$==="pending_out"&&i.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:U,disabled:ve,children:ve?i.jsx("div",{className:"prf-btn-spinner dark"}):"Cancel Request"}),$==="pending_in"&&i.jsxs("div",{className:"prf-btn-pair",children:[i.jsx("button",{className:"prf-btn prf-btn-success",onClick:M,disabled:ve,children:ve?i.jsx("div",{className:"prf-btn-spinner"}):"Accept"}),i.jsx("button",{className:"prf-btn prf-btn-secondary",onClick:U,disabled:ve,children:"Decline"})]}),$==="buddy"&&i.jsx("button",{className:"prf-btn prf-btn-danger",onClick:I,disabled:ve,children:ve?i.jsx("div",{className:"prf-btn-spinner"}):"Remove Buddy"})]})]}),i.jsxs("div",{className:"prf-stats",children:[i.jsxs("div",{className:"prf-stat",children:[i.jsx("span",{className:"prf-stat-value",children:x.workouts}),i.jsx("span",{className:"prf-stat-label",children:"Workouts"})]}),i.jsxs("div",{className:"prf-stat",children:[i.jsx("span",{className:"prf-stat-value",children:nD(x.minutes)}),i.jsx("span",{className:"prf-stat-label",children:"Active Time"})]}),i.jsxs("div",{className:"prf-stat",children:[i.jsxs("span",{className:"prf-stat-value",children:[x.streak,i.jsx("span",{className:"prf-stat-unit",children:"wk"})]}),i.jsx("span",{className:"prf-stat-label",children:"Streak"})]})]}),i.jsxs("div",{className:"prf-section",children:[i.jsx("h2",{className:"prf-section-title",children:"Achievements"}),i.jsx("div",{className:"prf-badges",children:J2.map(Ne=>{const pt=j.includes(Ne.id);return i.jsxs("div",{className:`prf-badge${pt?" unlocked":" locked"}`,title:Ne.name,children:[i.jsx("span",{className:"prf-badge-icon",children:Ne.icon}),i.jsx("span",{className:"prf-badge-name",children:Ne.name})]},Ne.id)})}),i.jsxs("p",{className:"prf-badges-count",children:[j.length,"/",J2.length," unlocked"]})]})]}),i.jsx(ca,{}),Ae&&i.jsxs("div",{className:`toast-notification ${Ae.type}`,children:[i.jsx("span",{className:"toast-icon",children:Ae.type==="success"?i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M5 13 L9 17 L19 7"})}):Ae.type==="error"?i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),i.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),i.jsx("span",{className:"toast-message",children:Ae.message})]})]}):i.jsxs("div",{className:"prf-page","data-theme":u?"dark":"light",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p(-1),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions"})]})}),i.jsx("main",{className:"prf-main",children:i.jsx("p",{style:{textAlign:"center",color:"var(--text-tertiary)",padding:"40px 0"},children:"User not found"})}),i.jsx(ca,{})]})}const Ar=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],ho=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function iD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Ir(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function oD(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function lD(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function Jh(s,e){if(!e)return"-";switch(s.unit){case"weight":return lD(e.weight,e.reps);case"time":return oD(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function ml(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function Ip(s,e){return!e||e===0?null:(s-e)/e*100}function cD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return i.jsx("div",{className:"pb-trend-empty",children:i.jsx("p",{children:"Not enough data for trend line yet"})});const a=s.map(B=>{const L=B.benchmarks?.[e];if(!L)return 0;switch(n){case"weight":return(L.weight||0)*(L.reps||0);case"time":return L.time||0;case"reps":return L.reps||0;case"distance":return L.distance||0;default:return 0}}),l=Math.max(...a),u=Math.min(...a),d=l-u||1,p=300,g=100,y=20,x=p-y*2,k=g-y*2,j=a.map((B,L)=>{const te=y+L/(a.length-1)*x,Q=y+k-(B-u)/d*k;return{x:te,y:Q,value:B}}),P=j.map((B,L)=>`${L===0?"M":"L"} ${B.x} ${B.y}`).join(" "),$=P+` L ${j[j.length-1].x} ${y+k} L ${j[0].x} ${y+k} Z`;return i.jsxs("div",{className:"pb-trend-chart",children:[i.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),i.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),i.jsx("path",{d:$,fill:"url(#trendGradientJr)"}),i.jsx("path",{d:P,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((B,L)=>i.jsx("circle",{cx:B.x,cy:B.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},L))]}),i.jsx("div",{className:"pb-trend-labels",children:s.map((B,L)=>i.jsxs("span",{className:"pb-trend-label",children:[B.month.split("-")[1],"/",B.month.split("-")[0].slice(2)]},L))})]})}function uD(){const[s,e]=_.useState("bests"),[n,a]=_.useState([]),[l,u]=_.useState(!0),[d,p]=_.useState(!1),[g,y]=_.useState(0),[x,k]=_.useState(!1),[j,P]=_.useState(!1),[$,B]=_.useState(!1),[L,te]=_.useState({}),[Q,ce]=_.useState({}),[ve,Ue]=_.useState({}),[Ae,A]=_.useState({}),[E,R]=_.useState({}),[D,M]=_.useState(!1),[U,I]=_.useState({}),[Ne,pt]=_.useState([]),[Y,ke]=_.useState(null),[Pe,ae]=_.useState(null),[Me,O]=_.useState(!1),[W,ge]=_.useState(""),[Ee,Re]=_.useState(""),Oe=_.useRef(null),nt=_.useRef(0),He=_.useRef(0),Ze=_.useRef("right"),vt=_.useCallback(F=>{y(de=>{const me=Math.max(0,Math.min(Ar.length-1,F));return me===de?de:(Ze.current=me>de?"right":"left",me)})},[]),{currentUser:nn,isClient:Tt,clientData:bt,loading:ne}=br(),{isDark:ln}=ha(),Ft=Ds(),_t=_.useCallback((F,de="info")=>{ae({message:F,type:de}),setTimeout(()=>ae(null),4e3)},[]);_.useEffect(()=>{!ne&&(!nn||!Tt)&&Ft("/")},[nn,Tt,ne,Ft]),_.useEffect(()=>{bt&&At()},[bt]);const At=async()=>{try{const F=ds(An(Be,"juniorPBs"),Un("clientId","==",bt.id)),me=(await Gn(F)).docs.map(et=>({id:et.id,...et.data()}));me.sort((et,ht)=>et.month.localeCompare(ht.month)),a(me);const ye=ds(An(Be,"juniorPBTargets"),Un("clientId","==",bt.id)),he=await Gn(ye);if(!he.empty){const et=he.docs[0].data();Ue(et.targets||{}),A(et.metricTargets||{}),R(et.targets||{}),I(et.metricTargets||{})}const $e=ds(An(Be,"juniorAchievements"),Un("clientId","==",bt.id)),ft=await Gn($e);ft.empty||pt(ft.docs[0].data().badges||[])}catch(F){console.error("Error fetching junior personal bests:",F)}u(!1)},ct=iD(),Ke=n.find(F=>F.month===ct),Gt=n.filter(F=>F.month<ct),as=Gt.length>0?Gt[Gt.length-1]:null;_.useEffect(()=>{Ke?(te(Ke.benchmarks||{}),ce(Ke.bodyMetrics||{})):(te({}),ce({}))},[Ke?.id]);const It=async(F,de)=>{const me=[];if(F==="strength"?Ar.forEach(ye=>{const he=ve[ye.key];if(!he)return;const $e=de[ye.key];if(!$e)return;let ft;if(he.targetType==="time"){if(!he.targetValue)return;const et=he.startValue||0,ht=$e.time||0,mt=he.targetValue-et;ft=mt===0?ht>=he.targetValue?1:0:Math.max(0,(ht-et)/mt)}else if(he.targetType==="reps"){if(!he.targetReps)return;const et=he.startReps||0,ht=$e.reps||0,mt=he.targetReps-et;ft=mt===0?ht>=he.targetReps?1:0:Math.max(0,(ht-et)/mt)}else if(he.targetType==="distance"){if(!he.targetDistance)return;const et=he.startDistance||0,ht=$e.distance||0,mt=he.targetDistance-et;ft=mt===0?ht>=he.targetDistance?1:0:Math.max(0,(ht-et)/mt)}else{if(!he.targetWeight&&!he.targetReps)return;const et=(he.startWeight||0)*(he.startReps||0),ht=(he.targetWeight||0)*(he.targetReps||0),mt=($e.weight||0)*($e.reps||0),an=ht-et;ft=an===0?mt>=ht?1:0:Math.max(0,(mt-et)/an)}if(ft>=1){let et,ht;he.targetType==="time"?(et=Ne.some(mt=>mt.type==="strength"&&mt.key===ye.key&&mt.targetValue===he.targetValue),ht=`${ye.name} ${he.targetValue}s`):he.targetType==="reps"?(et=Ne.some(mt=>mt.type==="strength"&&mt.key===ye.key&&mt.targetReps===he.targetReps),ht=`${ye.name} ${he.targetReps} reps`):he.targetType==="distance"?(et=Ne.some(mt=>mt.type==="strength"&&mt.key===ye.key&&mt.targetDistance===he.targetDistance),ht=`${ye.name} ${he.targetDistance}cm`):(et=Ne.some(mt=>mt.type==="strength"&&mt.key===ye.key&&mt.targetWeight===he.targetWeight&&mt.targetReps===he.targetReps),ht=`${ye.name} ${he.targetWeight}kg  ${he.targetReps}`),et||me.push({type:"strength",key:ye.key,...he.targetType==="time"?{targetType:"time",targetValue:he.targetValue}:he.targetType==="reps"?{targetType:"reps",targetReps:he.targetReps}:he.targetType==="distance"?{targetType:"distance",targetDistance:he.targetDistance}:{targetWeight:he.targetWeight,targetReps:he.targetReps},achievedMonth:ct,label:ht})}}):ho.forEach(ye=>{const he=Ae[ye.key];if(!he||!he.targetValue)return;const $e=de[ye.key];if($e==null)return;const ft=he.startValue||0,et=he.targetValue,ht=et-ft;(ht===0?$e===et?1:0:Math.max(0,($e-ft)/ht))>=1&&(Ne.some(Ss=>Ss.type==="metric"&&Ss.key===ye.key&&Ss.targetValue===et)||me.push({type:"metric",key:ye.key,targetValue:et,achievedMonth:ct,label:`${ye.name} ${et}${ye.suffix}`}))}),me.length>0){const ye=[...Ne,...me];await Rn(ot(Be,"juniorAchievements",bt.id),{clientId:bt.id,badges:ye,updatedAt:dt.now()}),pt(ye),ke(me),setTimeout(()=>ke(null),5e3)}},Ut=(F,de)=>{if(F==="strength"){const me=ve[de];if(!me)return!1;switch(Ar.find(he=>he.key===de)?.unit){case"time":return Ne.some(he=>he.type==="strength"&&he.key===de&&he.targetValue===me.targetValue);case"reps":return Ne.some(he=>he.type==="strength"&&he.key===de&&he.targetReps===me.targetReps);case"distance":return Ne.some(he=>he.type==="strength"&&he.key===de&&he.targetDistance===me.targetDistance);default:return!me.targetWeight&&!me.targetReps?!1:Ne.some(he=>he.type==="strength"&&he.key===de&&he.targetWeight===me.targetWeight&&he.targetReps===me.targetReps)}}else{const me=Ae[de];return!me||!me.targetValue?!1:Ne.some(ye=>ye.type==="metric"&&ye.key===de&&ye.targetValue===me.targetValue)}},Ln=async()=>{p(!0);try{const F=`${bt.id}_${ct}`,de=Ke||{};await Rn(ot(Be,"juniorPBs",F),{clientId:bt.id,month:ct,benchmarks:L,bodyMetrics:de.bodyMetrics||Q||{},createdAt:de.createdAt||dt.now(),updatedAt:dt.now()}),await It("strength",L),_t("Benchmarks saved!","success"),k(!1),await At()}catch(F){console.error("Error saving benchmarks:",F),_t("Failed to save. Please try again.","error")}p(!1)},Ht=async()=>{p(!0);try{const F=`${bt.id}_${ct}`,de=Ke||{};await Rn(ot(Be,"juniorPBs",F),{clientId:bt.id,month:ct,benchmarks:de.benchmarks||L||{},bodyMetrics:Q,createdAt:de.createdAt||dt.now(),updatedAt:dt.now()}),await It("metric",Q),_t("Body metrics saved!","success"),P(!1),await At()}catch(F){console.error("Error saving metrics:",F),_t("Failed to save. Please try again.","error")}p(!1)},xn=(F,de,me)=>{te(ye=>({...ye,[F]:{...ye[F],[de]:me===""?"":parseFloat(me)}}))},fe=(F,de)=>{ce(me=>({...me,[F]:de===""?"":parseFloat(de)}))},xe=(F,de,me)=>{R(ye=>({...ye,[F]:{...ye[F],[de]:me===""?"":parseFloat(me)}}))},Ce=async()=>{p(!0);try{const F=`targets_${bt.id}`,de=Ke?.benchmarks||{},me={};Ar.forEach(ye=>{const he=de[ye.key];switch(ye.unit){case"time":E[ye.key]?.targetValue&&(me[ye.key]={targetType:"time",targetValue:E[ye.key].targetValue,startValue:he?.time||0});break;case"reps":E[ye.key]?.targetReps&&(me[ye.key]={targetType:"reps",targetReps:E[ye.key].targetReps,startReps:he?.reps||0});break;case"distance":E[ye.key]?.targetDistance&&(me[ye.key]={targetType:"distance",targetDistance:E[ye.key].targetDistance,startDistance:he?.distance||0});break;default:(E[ye.key]?.targetWeight||E[ye.key]?.targetReps)&&(me[ye.key]={targetWeight:E[ye.key].targetWeight||0,targetReps:E[ye.key].targetReps||0,startWeight:he?.weight||0,startReps:he?.reps||0})}}),await Rn(ot(Be,"juniorPBTargets",F),{clientId:bt.id,targets:me,metricTargets:Ae,updatedAt:dt.now()}),Ue(me),R(me),_t("Targets saved!","success"),B(!1)}catch(F){console.error("Error saving targets:",F),_t("Failed to save targets.","error")}p(!1)},tt=(F,de)=>{I(me=>({...me,[F]:{...me[F],targetValue:de===""?"":parseFloat(de)}}))},Ye=async()=>{p(!0);try{const F=`targets_${bt.id}`,de={};ho.forEach(me=>{if(U[me.key]?.targetValue){const ye=Ke?.bodyMetrics?.[me.key]||0;de[me.key]={targetValue:U[me.key].targetValue,startValue:ye}}}),await Rn(ot(Be,"juniorPBTargets",F),{clientId:bt.id,targets:ve,metricTargets:de,updatedAt:dt.now()}),A(de),I(de),_t("Metric targets saved!","success"),M(!1)}catch(F){console.error("Error saving metric targets:",F),_t("Failed to save targets.","error")}p(!1)},ze=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const F=ot(Be,"juniorPBTargets",`targets_${bt.id}`);await ea(F),Ue({}),A({}),R({}),I({}),_t("All goals have been reset","success")}catch(F){console.error("Error resetting targets:",F),_t("Failed to reset goals","error")}p(!1)}},Xe=(F,de)=>{const me=ve[F];if(!me||!de)return null;if(me.targetType==="time"){if(!me.targetValue)return null;const et=me.startValue||0,ht=me.targetValue,mt=de.time||0,an=ht-et;return an<=0?mt>=ht?1:0:Math.max(0,Math.min((mt-et)/an,1))}if(me.targetType==="reps"){if(!me.targetReps)return null;const et=me.startReps||0,ht=me.targetReps,mt=de.reps||0,an=ht-et;return an<=0?mt>=ht?1:0:Math.max(0,Math.min((mt-et)/an,1))}if(me.targetType==="distance"){if(!me.targetDistance)return null;const et=me.startDistance||0,ht=me.targetDistance,mt=de.distance||0,an=ht-et;return an<=0?mt>=ht?1:0:Math.max(0,Math.min((mt-et)/an,1))}if(!me.targetWeight&&!me.targetReps)return null;const ye=(me.startWeight||0)*(me.startReps||0),he=(me.targetWeight||0)*(me.targetReps||0),$e=(de.weight||0)*(de.reps||0),ft=he-ye;return ft<=0?$e>=he?1:0:Math.max(0,Math.min(($e-ye)/ft,1))},We=F=>{const de=Ae[F];if(!de||!de.targetValue)return null;const me=Ke?.bodyMetrics?.[F];if(me==null)return null;const ye=de.startValue||0,he=de.targetValue,$e=he-ye;return $e===0?me===he?1:0:Math.max(0,Math.min((me-ye)/$e,1))},Ve=F=>{nt.current=F.touches[0].clientX,He.current=0},we=F=>{He.current=F.touches[0].clientX-nt.current},Je=()=>{He.current<-50?vt(g+1):He.current>50&&vt(g-1),He.current=0},lt=F=>{const de=Ke?.bodyMetrics?.[F],me=as?.bodyMetrics?.[F];return de==null||me==null?null:parseFloat((de-me).toFixed(2))},Et=n.find(F=>F.month===W),$t=n.find(F=>F.month===Ee);if(ne||l)return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsxs("main",{className:"pb-main",children:[i.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),i.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!nn||!Tt||!bt)return null;const Ge=Ar[g],jt=Ke?.benchmarks?.[Ge.key],Ct=as?.benchmarks?.[Ge.key],Dt=ml(Ge,jt),qt=ml(Ge,Ct),kt=Ip(Dt,qt),sn=Xe(Ge.key,jt),Wt=sn!==null,rn=sn!==null&&sn>=1,un=Wt?Math.round(sn*60):Dt>0?15:0,dn=ve[Ge.key],Sn=F=>F?F.targetType==="time"?`${F.startValue||0}s  ${F.targetValue}s`:F.targetType==="reps"?`${F.startReps||0}  ${F.targetReps} reps`:F.targetType==="distance"?`${F.startDistance||0}  ${F.targetDistance}cm`:`${F.startWeight||0}kg${F.startReps||0}  ${F.targetWeight}kg${F.targetReps}`:null;return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>Ft("/client"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsxs("main",{className:"pb-main page-transition-enter",children:[i.jsxs("div",{className:"pb-intro",children:[i.jsx("h2",{children:"Junior Strength Tests"}),i.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),i.jsxs("div",{className:"pb-tabs",children:[i.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),i.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),i.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&i.jsxs("div",{className:"pb-strength-section",children:[!x&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-carousel",ref:Oe,onTouchStart:Ve,onTouchMove:we,onTouchEnd:Je,children:[i.jsx("div",{className:`pb-ring-container slide-from-${Ze.current}`,children:i.jsxs("div",{className:"pb-ring",children:[i.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Ty.map((F,de)=>{const me=de<Math.round(un);return i.jsx("line",{x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,className:`pb-ring-tick ${me?rn?"hit":"filled":"empty"}`,strokeWidth:F.thick?"3":"2"},de)})}),i.jsxs("div",{className:"pb-ring-center",children:[i.jsx("div",{className:"pb-ring-category",children:Ge.category}),i.jsxs("div",{className:"pb-ring-exercise",children:[Ge.name,Ut("strength",Ge.key)&&i.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),i.jsx("div",{className:"pb-ring-value",children:jt?Jh(Ge,jt):"-"}),kt!==null&&i.jsxs("div",{className:`pb-ring-change ${kt>=0?"positive":"negative"}`,children:[kt>=0?"+":"",kt.toFixed(1),"%"]}),kt===null&&jt&&i.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),dn&&i.jsx("div",{className:`pb-ring-target ${rn?"hit":""}`,children:rn?"Target hit!":Sn(dn)}),!dn&&i.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),i.jsx("div",{className:"pb-carousel-dots",children:Ar.map((F,de)=>i.jsx("button",{className:`pb-dot ${de===g?"active":""}`,onClick:()=>vt(de)},de))}),i.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>vt(g-1),disabled:g===0,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),i.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>vt(g+1),disabled:g===Ar.length-1,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),i.jsxs("div",{className:"pb-trend-section",children:[i.jsx("h4",{children:"Trend"}),i.jsx(cD,{data:n,exerciseKey:Ge.key,unit:Ge.unit})]})]}),!x&&!$&&i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:Ke?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>B(!0),children:Object.keys(ve).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ve).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:ze,disabled:d,children:"Reset All Goals"})]}),x&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Benchmarks - ",Ir(ct)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),te(Ke?.benchmarks||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:Ar.map(F=>i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:F.name}),F.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:L[F.key]?.weight??"",onChange:de=>xn(F.key,"weight",de.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",value:L[F.key]?.reps??"",onChange:de=>xn(F.key,"reps",de.target.value),placeholder:"0"})]})]}):F.unit==="reps"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Reps (max in 1 min)"}),i.jsx("input",{type:"number",value:L[F.key]?.reps??"",onChange:de=>xn(F.key,"reps",de.target.value),placeholder:"0"})]})}):F.unit==="distance"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Distance (cm)"}),i.jsx("input",{type:"number",step:"0.5",value:L[F.key]?.distance??"",onChange:de=>xn(F.key,"distance",de.target.value),placeholder:"0"})]})}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Time (seconds)"}),i.jsx("input",{type:"number",step:"0.01",value:L[F.key]?.time??"",onChange:de=>xn(F.key,"time",de.target.value),placeholder:"0"})]})})]},F.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),te(Ke?.benchmarks||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ln,disabled:d,children:d?"Saving...":"Save"})]})]}),$&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Set Your Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),R(ve)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Ar.map(F=>{const de=Ke?.benchmarks?.[F.key];let me="-";if(de)switch(F.unit){case"weight":(de.weight||de.reps)&&(me=`${de.weight||0}kg  ${de.reps||0}`);break;case"time":de.time&&(me=`${de.time}s`);break;case"reps":de.reps&&(me=`${de.reps} reps`);break;case"distance":de.distance&&(me=`${de.distance} cm`);break}return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:F.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",me]})]}),F.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:E[F.key]?.targetWeight??"",onChange:ye=>xe(F.key,"targetWeight",ye.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Reps"}),i.jsx("input",{type:"number",value:E[F.key]?.targetReps??"",onChange:ye=>xe(F.key,"targetReps",ye.target.value),placeholder:"0"})]})]}):F.unit==="reps"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target Reps (in 1 min)"}),i.jsx("input",{type:"number",value:E[F.key]?.targetReps??"",onChange:ye=>xe(F.key,"targetReps",ye.target.value),placeholder:"0"})]})}):F.unit==="distance"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target Distance (cm)"}),i.jsx("input",{type:"number",step:"0.5",value:E[F.key]?.targetDistance??"",onChange:ye=>xe(F.key,"targetDistance",ye.target.value),placeholder:"0"})]})}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target (seconds)"}),i.jsx("input",{type:"number",step:"1",value:E[F.key]?.targetValue??"",onChange:ye=>xe(F.key,"targetValue",ye.target.value),placeholder:"0"})]})})]},F.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),R(ve)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ce,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&i.jsxs("div",{className:"pb-metrics-section",children:[!j&&!D&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-metrics-card",children:[i.jsx("h3",{children:"Body Measurements"}),i.jsx("p",{className:"pb-metrics-month",children:Ir(ct)}),i.jsx("div",{className:"pb-metrics-list",children:ho.map(F=>{const de=Ke?.bodyMetrics?.[F.key],me=lt(F.key),ye=Ae[F.key],he=We(F.key),$e=he!==null&&he>=1;return i.jsxs("div",{className:"pb-metric-row",children:[i.jsxs("div",{className:"pb-metric-top",children:[i.jsxs("div",{className:"pb-metric-left",children:[i.jsxs("span",{className:"pb-metric-name",children:[F.name,Ut("metric",F.key)&&i.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),ye&&i.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",ye.targetValue," ",F.suffix]})]}),i.jsxs("div",{className:"pb-metric-values",children:[i.jsx("span",{className:"pb-metric-current",children:de!=null?`${de} ${F.suffix}`:"-"}),me!==null&&i.jsxs("span",{className:`pb-metric-change ${me>0?"up":me<0?"down":"same"}`,children:[me>0?"+":"",me," ",F.suffix]})]})]}),he!==null&&i.jsxs("div",{className:"pb-metric-progress",children:[i.jsx("div",{className:"pb-metric-bar",children:i.jsx("div",{className:`pb-metric-bar-fill ${$e?"hit":""}`,style:{width:`${Math.round(he*100)}%`}})}),i.jsx("span",{className:`pb-metric-percent ${$e?"hit":""}`,children:$e?"Hit!":`${Math.round(he*100)}%`})]})]},F.key)})})]}),i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>P(!0),children:Ke?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>M(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ve).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:ze,disabled:d,children:"Reset All Goals"})]})]}),j&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Measurements - ",Ir(ct)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{P(!1),ce(Ke?.bodyMetrics||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:ho.map(F=>i.jsx("div",{className:"pb-edit-metric",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:[F.name," (",F.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:Q[F.key]??"",onChange:de=>fe(F.key,de.target.value),placeholder:"0"})]})},F.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{P(!1),ce(Ke?.bodyMetrics||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ht,disabled:d,children:d?"Saving...":"Save"})]})]}),D&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Body Metric Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{M(!1),I(Ae)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),ho.map(F=>{const de=Ke?.bodyMetrics?.[F.key];return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:F.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",de!=null?`${de} ${F.suffix}`:"-"]})]}),i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:["Target (",F.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:U[F.key]?.targetValue??"",onChange:me=>tt(F.key,me.target.value),placeholder:"0"})]})})]},F.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{M(!1),I(Ae)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ye,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&i.jsx("div",{className:"pb-history-section",children:n.length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("h4",{children:"No records yet"}),i.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):i.jsxs(i.Fragment,{children:[Ne.length>0&&i.jsxs("div",{className:"pb-achievements-wall",children:[i.jsxs("h4",{className:"pb-achievements-wall-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),i.jsx("div",{className:"pb-achievements-list",children:[...Ne].reverse().map((F,de)=>i.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${de*.05}s`},children:[i.jsx("div",{className:"pb-achievement-star",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("div",{className:"pb-achievement-info",children:[i.jsx("span",{className:"pb-achievement-label",children:F.label}),i.jsx("span",{className:"pb-achievement-date",children:Ir(F.achievedMonth)})]})]},de))})]}),i.jsx("div",{className:"pb-history-controls",children:i.jsx("button",{className:`pb-compare-toggle ${Me?"active":""}`,onClick:()=>{O(!Me),!Me&&n.length>=2&&(ge(n[0].month),Re(n[n.length-1].month))},children:Me?"Back to Timeline":"Compare Months"})}),Me?i.jsxs("div",{className:"pb-compare",children:[i.jsxs("div",{className:"pb-compare-selectors",children:[i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"From"}),i.jsx("select",{value:W,onChange:F=>ge(F.target.value),children:n.map(F=>i.jsx("option",{value:F.month,children:Ir(F.month)},F.month))})]}),i.jsx("div",{className:"pb-compare-vs",children:"vs"}),i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"To"}),i.jsx("select",{value:Ee,onChange:F=>Re(F.target.value),children:n.map(F=>i.jsx("option",{value:F.month,children:Ir(F.month)},F.month))})]})]}),Et&&$t&&i.jsxs("div",{className:"pb-compare-results",children:[i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Strength Tests"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Exercise"}),i.jsx("span",{children:Ir(W).split(" ")[0]}),i.jsx("span",{children:Ir(Ee).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),Ar.map(F=>{const de=Et.benchmarks?.[F.key],me=$t.benchmarks?.[F.key],ye=ml(F,de),he=ml(F,me),$e=Ip(he,ye);return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:F.name}),i.jsx("span",{className:"pb-compare-val",children:de?Jh(F,de):"-"}),i.jsx("span",{className:"pb-compare-val",children:me?Jh(F,me):"-"}),i.jsx("span",{className:`pb-compare-change ${$e!==null?$e>=0?"positive":"negative":""}`,children:$e!==null?`${$e>=0?"+":""}${$e.toFixed(1)}%`:"-"})]},F.key)})]})]}),i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Body Measurements"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Measurement"}),i.jsx("span",{children:Ir(W).split(" ")[0]}),i.jsx("span",{children:Ir(Ee).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),ho.map(F=>{const de=Et.bodyMetrics?.[F.key],me=$t.bodyMetrics?.[F.key],ye=de!=null&&me!=null?parseFloat((me-de).toFixed(2)):null;return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:F.name}),i.jsx("span",{className:"pb-compare-val",children:de!=null?`${de}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:me!=null?`${me}`:"-"}),i.jsx("span",{className:`pb-compare-change ${ye!==null?ye>0?"positive":ye<0?"negative":"neutral":""}`,children:ye!==null?`${ye>0?"+":""}${ye} ${F.suffix}`:"-"})]},F.key)})]})]})]})]}):i.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((F,de)=>{const me=n.filter(ye=>ye.month<F.month).pop();return i.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${de*.05}s`},children:[i.jsx("div",{className:"pb-timeline-dot"}),i.jsxs("div",{className:"pb-timeline-card",children:[i.jsx("h4",{children:Ir(F.month)}),F.benchmarks&&Object.keys(F.benchmarks).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Strength Tests"}),Ar.map(ye=>{const he=F.benchmarks[ye.key];if(!he)return null;const $e=me?.benchmarks?.[ye.key],ft=ml(ye,he),et=ml(ye,$e),ht=Ip(ft,et);return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:ye.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsx("span",{className:"pb-timeline-value",children:Jh(ye,he)}),ht!==null&&i.jsxs("span",{className:`pb-timeline-change ${ht>=0?"positive":"negative"}`,children:[ht>=0?"+":"",ht.toFixed(1),"%"]})]})]},ye.key)})]}),F.bodyMetrics&&Object.keys(F.bodyMetrics).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Body Measurements"}),ho.map(ye=>{const he=F.bodyMetrics[ye.key];if(he==null)return null;const $e=me?.bodyMetrics?.[ye.key],ft=$e!=null?parseFloat((he-$e).toFixed(2)):null;return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:ye.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsxs("span",{className:"pb-timeline-value",children:[he," ",ye.suffix]}),ft!==null&&i.jsxs("span",{className:`pb-timeline-change ${ft>0?"positive":ft<0?"negative":"neutral"}`,children:[ft>0?"+":"",ft," ",ye.suffix]})]})]},ye.key)})]})]})]},F.id)})})]})})]}),Y&&i.jsx("div",{className:"pb-celebration-overlay",onClick:()=>ke(null),children:i.jsxs("div",{className:"pb-celebration-card",children:[i.jsx("div",{className:"pb-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),i.jsx("div",{className:"pb-celebration-badges",children:Y.map((F,de)=>i.jsx("div",{className:"pb-celebration-badge",children:F.label},de))}),i.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Pe&&i.jsxs("div",{className:`toast-notification ${Pe.type}`,children:[i.jsx("span",{className:"toast-icon",children:Pe.type==="success"?i.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),i.jsx("span",{className:"toast-message",children:Pe.message}),i.jsx("button",{className:"toast-close",onClick:()=>ae(null),children:""})]}),i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ft("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ft("/client/forms"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),i.jsx("polyline",{points:"14 2 14 8 20 8"}),i.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),i.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),i.jsx("span",{children:"Forms"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ft("/client/tools"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),i.jsx("span",{children:"Tools"})]}),i.jsxs("button",{className:"block-nav-tab active",children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"PBs"})]}),bt?.circuitAccess&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ft("/client/circuit"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 6v6l4 2"})]}),i.jsx("span",{children:"Circuit"})]})]})]})}const Jr=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],fo=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function hD(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Mr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function Zh(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function Z2(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function pl(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function Mp(s,e){return!e||e===0?null:(s-e)/e*100}function dD({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return i.jsx("div",{className:"pb-trend-empty",children:i.jsx("p",{children:"Not enough data for trend line yet"})});const a=s.map(B=>{const L=B.benchmarks?.[e];return L?n==="time"?L.time||0:(L.weight||0)*(L.reps||0):0}),l=Math.max(...a),u=Math.min(...a),d=l-u||1,p=300,g=100,y=20,x=p-y*2,k=g-y*2,j=a.map((B,L)=>{const te=y+L/(a.length-1)*x,Q=y+k-(B-u)/d*k;return{x:te,y:Q,value:B}}),P=j.map((B,L)=>`${L===0?"M":"L"} ${B.x} ${B.y}`).join(" "),$=P+` L ${j[j.length-1].x} ${y+k} L ${j[0].x} ${y+k} Z`;return i.jsxs("div",{className:"pb-trend-chart",children:[i.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),i.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),i.jsx("path",{d:$,fill:"url(#trendGradient)"}),i.jsx("path",{d:P,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),j.map((B,L)=>i.jsx("circle",{cx:B.x,cy:B.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},L))]}),i.jsx("div",{className:"pb-trend-labels",children:s.map((B,L)=>i.jsxs("span",{className:"pb-trend-label",children:[B.month.split("-")[1],"/",B.month.split("-")[0].slice(2)]},L))})]})}function fD(){const[s,e]=_.useState("bests"),[n,a]=_.useState([]),[l,u]=_.useState(!0),[d,p]=_.useState(!1),[g,y]=_.useState(0),[x,k]=_.useState(!1),[j,P]=_.useState(!1),[$,B]=_.useState(!1),[L,te]=_.useState({}),[Q,ce]=_.useState({}),[ve,Ue]=_.useState({}),[Ae,A]=_.useState({}),[E,R]=_.useState({}),[D,M]=_.useState(!1),[U,I]=_.useState({}),[Ne,pt]=_.useState([]),[Y,ke]=_.useState(null),[Pe,ae]=_.useState(null),[Me,O]=_.useState(!1),[W,ge]=_.useState(""),[Ee,Re]=_.useState(""),[Oe,nt]=_.useState({}),[He,Ze]=_.useState({}),[vt,nn]=_.useState(null),[Tt,bt]=_.useState(null),[ne,ln]=_.useState(""),Ft=_.useRef(null),_t=_.useRef(0),At=_.useRef(0),ct=_.useRef("right"),Ke=_.useCallback(z=>{y(oe=>{const T=Math.max(0,Math.min(Jr.length-1,z));return T===oe?oe:(ct.current=T>oe?"right":"left",T)})},[]),{currentUser:Gt,isClient:as,clientData:It,loading:Ut}=br(),{isDark:Ln}=ha(),Ht=Ds(),[xn]=Ej(),fe=xn.get("mode")==="corebuddy",xe=!fe&&(!It?.clientType||It.clientType==="block"),Ce=_.useCallback((z,oe="info")=>{ae({message:z,type:oe}),setTimeout(()=>ae(null),4e3)},[]);_.useEffect(()=>{!Ut&&(!Gt||!as)&&Ht("/")},[Gt,as,Ut,Ht]),_.useEffect(()=>{It&&(xe?tt():(async()=>{try{const[oe,T,C]=await Promise.all([In(ot(Be,"coreBuddyPBs",It.id)),In(ot(Be,"coreBuddyTargets",It.id)),In(ot(Be,"coreBuddyAchievements",It.id))]);oe.exists()&&nt(oe.data().exercises||{}),T.exists()&&Ze(T.data().targets||{}),C.exists()&&nn(C.data())}catch(oe){console.error("Error loading Core Buddy PBs:",oe)}u(!1)})())},[It]);const tt=async()=>{try{const z=ds(An(Be,"personalBests"),Un("clientId","==",It.id)),T=(await Gn(z)).docs.map(Le=>({id:Le.id,...Le.data()}));T.sort((Le,De)=>Le.month.localeCompare(De.month)),a(T);const C=ds(An(Be,"personalBestTargets"),Un("clientId","==",It.id)),G=await Gn(C);if(!G.empty){const Le=G.docs[0].data();Ue(Le.targets||{}),A(Le.metricTargets||{}),R(Le.targets||{}),I(Le.metricTargets||{})}const J=ds(An(Be,"achievements"),Un("clientId","==",It.id)),Fe=await Gn(J);Fe.empty||pt(Fe.docs[0].data().badges||[])}catch(z){console.error("Error fetching personal bests:",z)}u(!1)},Ye=async()=>{if(!Tt||!ne||!It)return;const z=parseFloat(ne),oe=Oe[Tt];if(!oe||z<=oe.weight){Ce("Target must be higher than current PB","error");return}p(!0);try{const T={...He,[Tt]:{targetWeight:z,setAt:dt.now(),currentPBWhenSet:oe.weight}};await Rn(ot(Be,"coreBuddyTargets",It.id),{clientId:It.id,targets:T,updatedAt:dt.now()}),Ze(T),bt(null),ln(""),Ce("Target set!","success")}catch(T){console.error("Error saving target:",T),Ce("Failed to save target","error")}p(!1)},ze=z=>{if(!vt?.badges)return!1;const oe=He[z];return oe?vt.badges.some(T=>T.type==="pb_target"&&T.exercise===z&&T.targetWeight===oe.targetWeight):!1},Xe=z=>{const oe=He[z];if(!oe)return null;const T=Oe[z];if(!T)return 0;const C=oe.currentPBWhenSet||0,G=oe.targetWeight,J=G-C;return J<=0?T.weight>=G?1:0:Math.max(0,Math.min((T.weight-C)/J,1))},We=hD(),Ve=n.find(z=>z.month===We),we=n.filter(z=>z.month<We),Je=we.length>0?we[we.length-1]:null;_.useEffect(()=>{Ve?(te(Ve.benchmarks||{}),ce(Ve.bodyMetrics||{})):(te({}),ce({}))},[Ve?.id]);const lt=async(z,oe)=>{const T=[];if(z==="strength"?Jr.forEach(C=>{const G=ve[C.key];if(!G)return;const J=oe[C.key];if(!J)return;let Fe;if(G.targetType==="time"){if(!G.targetValue)return;const Le=G.startValue||0,De=J.time||0,Ot=G.targetValue-Le;Fe=Ot===0?De>=G.targetValue?1:0:Math.max(0,(De-Le)/Ot)}else{if(!G.targetWeight&&!G.targetReps)return;const Le=(G.startWeight||0)*(G.startReps||0),De=(G.targetWeight||0)*(G.targetReps||0),Ot=(J.weight||0)*(J.reps||0),xt=De-Le;Fe=xt===0?Ot>=De?1:0:Math.max(0,(Ot-Le)/xt)}if(Fe>=1&&!(G.targetType==="time"?Ne.some(De=>De.type==="strength"&&De.key===C.key&&De.targetValue===G.targetValue):Ne.some(De=>De.type==="strength"&&De.key===C.key&&De.targetWeight===G.targetWeight&&De.targetReps===G.targetReps))){const De=G.targetType==="time"?`${C.name} ${G.targetValue}s`:`${C.name} ${G.targetWeight}kg  ${G.targetReps}`;T.push({type:"strength",key:C.key,...G.targetType==="time"?{targetType:"time",targetValue:G.targetValue}:{targetWeight:G.targetWeight,targetReps:G.targetReps},achievedMonth:We,label:De})}}):fo.forEach(C=>{const G=Ae[C.key];if(!G||!G.targetValue)return;const J=oe[C.key];if(J==null)return;const Fe=G.startValue||0,Le=G.targetValue,De=Le-Fe;(De===0?J===Le?1:0:Math.max(0,(J-Fe)/De))>=1&&(Ne.some(H=>H.type==="metric"&&H.key===C.key&&H.targetValue===Le)||T.push({type:"metric",key:C.key,targetValue:Le,achievedMonth:We,label:`${C.name} ${Le}${C.suffix}`}))}),T.length>0){const C=[...Ne,...T];await Rn(ot(Be,"achievements",It.id),{clientId:It.id,badges:C,updatedAt:dt.now()}),pt(C),ke(T),setTimeout(()=>ke(null),5e3)}},Et=(z,oe)=>{if(z==="strength"){const T=ve[oe];return T?T.targetType==="time"?Ne.some(C=>C.type==="strength"&&C.key===oe&&C.targetValue===T.targetValue):!T.targetWeight&&!T.targetReps?!1:Ne.some(C=>C.type==="strength"&&C.key===oe&&C.targetWeight===T.targetWeight&&C.targetReps===T.targetReps):!1}else{const T=Ae[oe];return!T||!T.targetValue?!1:Ne.some(C=>C.type==="metric"&&C.key===oe&&C.targetValue===T.targetValue)}},$t=async()=>{p(!0);try{const z=`${It.id}_${We}`,oe=Ve||{};await Rn(ot(Be,"personalBests",z),{clientId:It.id,month:We,benchmarks:L,bodyMetrics:oe.bodyMetrics||Q||{},createdAt:oe.createdAt||dt.now(),updatedAt:dt.now()}),await lt("strength",L),Ce("Benchmarks saved!","success"),k(!1),await tt()}catch(z){console.error("Error saving benchmarks:",z),Ce("Failed to save. Please try again.","error")}p(!1)},Ge=async()=>{p(!0);try{const z=`${It.id}_${We}`,oe=Ve||{};await Rn(ot(Be,"personalBests",z),{clientId:It.id,month:We,benchmarks:oe.benchmarks||L||{},bodyMetrics:Q,createdAt:oe.createdAt||dt.now(),updatedAt:dt.now()}),await lt("metric",Q),Ce("Body metrics saved!","success"),P(!1),await tt()}catch(z){console.error("Error saving metrics:",z),Ce("Failed to save. Please try again.","error")}p(!1)},jt=(z,oe,T)=>{te(C=>({...C,[z]:{...C[z],[oe]:T===""?"":parseFloat(T)}}))},Ct=(z,oe)=>{ce(T=>({...T,[z]:oe===""?"":parseFloat(oe)}))},Dt=(z,oe,T)=>{R(C=>({...C,[z]:{...C[z],[oe]:T===""?"":parseFloat(T)}}))},qt=async()=>{p(!0);try{const z=`targets_${It.id}`,oe=Ve?.benchmarks||{},T={};Jr.forEach(C=>{const G=oe[C.key];C.unit==="time"?E[C.key]?.targetValue&&(T[C.key]={targetType:"time",targetValue:E[C.key].targetValue,startValue:G?.time||0}):(E[C.key]?.targetWeight||E[C.key]?.targetReps)&&(T[C.key]={targetWeight:E[C.key].targetWeight||0,targetReps:E[C.key].targetReps||0,startWeight:G?.weight||0,startReps:G?.reps||0})}),await Rn(ot(Be,"personalBestTargets",z),{clientId:It.id,targets:T,metricTargets:Ae,updatedAt:dt.now()}),Ue(T),R(T),Ce("Targets saved!","success"),B(!1)}catch(z){console.error("Error saving targets:",z),Ce("Failed to save targets.","error")}p(!1)},kt=(z,oe)=>{I(T=>({...T,[z]:{...T[z],targetValue:oe===""?"":parseFloat(oe)}}))},sn=async()=>{p(!0);try{const z=`targets_${It.id}`,oe={};fo.forEach(T=>{if(U[T.key]?.targetValue){const C=Ve?.bodyMetrics?.[T.key]||0;oe[T.key]={targetValue:U[T.key].targetValue,startValue:C}}}),await Rn(ot(Be,"personalBestTargets",z),{clientId:It.id,targets:ve,metricTargets:oe,updatedAt:dt.now()}),A(oe),I(oe),Ce("Metric targets saved!","success"),M(!1)}catch(z){console.error("Error saving metric targets:",z),Ce("Failed to save targets.","error")}p(!1)},Wt=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const z=ot(Be,"personalBestTargets",`targets_${It.id}`);await ea(z),Ue({}),A({}),R({}),I({}),Ce("All goals have been reset","success")}catch(z){console.error("Error resetting targets:",z),Ce("Failed to reset goals","error")}p(!1)}},rn=(z,oe)=>{const T=ve[z];if(!T||!oe)return null;if(T.targetType==="time"){if(!T.targetValue)return null;const Le=T.startValue||0,De=T.targetValue,Ot=oe.time||0,xt=De-Le;return xt<=0?Ot>=De?1:0:Math.max(0,Math.min((Ot-Le)/xt,1))}if(!T.targetWeight&&!T.targetReps)return null;const C=(T.startWeight||0)*(T.startReps||0),G=(T.targetWeight||0)*(T.targetReps||0),J=(oe.weight||0)*(oe.reps||0),Fe=G-C;return Fe<=0?J>=G?1:0:Math.max(0,Math.min((J-C)/Fe,1))},un=z=>{const oe=Ae[z];if(!oe||!oe.targetValue)return null;const T=Ve?.bodyMetrics?.[z];if(T==null)return null;const C=oe.startValue||0,G=oe.targetValue,J=G-C;return J===0?T===G?1:0:Math.max(0,Math.min((T-C)/J,1))},dn=z=>{_t.current=z.touches[0].clientX,At.current=0},Sn=z=>{At.current=z.touches[0].clientX-_t.current},F=()=>{At.current<-50?Ke(g+1):At.current>50&&Ke(g-1),At.current=0},de=z=>{const oe=Ve?.bodyMetrics?.[z],T=Je?.bodyMetrics?.[z];return oe==null||T==null?null:parseFloat((oe-T).toFixed(2))},me=n.find(z=>z.month===W),ye=n.find(z=>z.month===Ee);if(Ut||l)return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsxs("main",{className:"pb-main",children:[i.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),i.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!Gt||!as||!It)return null;if(xe&&It?.isJunior)return i.jsx(uD,{});const he=Jr[g],$e=Ve?.benchmarks?.[he.key],ft=Je?.benchmarks?.[he.key],et=pl(he,$e),ht=pl(he,ft),mt=Mp(et,ht),an=rn(he.key,$e),Ss=an!==null,qn=an!==null&&an>=1,Yn=Ss?Math.round(an*60):et>0?15:0,fn=ve[he.key];return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>Ht(fe?"/client/core-buddy":"/client"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsxs("main",{className:"pb-main page-transition-enter",children:[i.jsxs("div",{className:"pb-intro",children:[i.jsx("h2",{children:"Personal Bests"}),i.jsx("p",{children:xe?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!xe&&i.jsxs("div",{className:"pb-cb-section",children:[Object.keys(Oe).length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("div",{className:"pb-cb-empty-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),i.jsx("h4",{children:"No personal bests yet"}),i.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):i.jsx("div",{className:"pb-cb-grid",children:Object.entries(Oe).sort(([z],[oe])=>z.localeCompare(oe)).map(([z,oe],T)=>{const C=He[z],G=Xe(z),J=G!==null&&G>=1,Fe=ze(z),Le=G!==null?Math.round(G*60):60;return i.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${T*.05}s`},children:[i.jsxs("div",{className:"pb-cb-card-ring",children:[i.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:x3.map((De,Ot)=>{const xt=Ot<Le;return i.jsx("line",{x1:De.x1,y1:De.y1,x2:De.x2,y2:De.y2,className:`pb-ring-tick ${xt?J?"hit":"filled":"empty"}`,strokeWidth:De.thick?"2":"1.5"},Ot)})}),i.jsx("div",{className:"pb-cb-ring-icon",children:Fe?i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),i.jsxs("div",{className:"pb-cb-card-info",children:[i.jsx("h4",{className:"pb-cb-card-name",children:z}),i.jsxs("div",{className:"pb-cb-card-value",children:[oe.weight,"kg  ",oe.reps]}),oe.achievedAt&&i.jsx("div",{className:"pb-cb-card-date",children:(oe.achievedAt.toDate?oe.achievedAt.toDate():new Date(oe.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),C&&!J&&i.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",C.targetWeight,"kg (",Math.round((G||0)*100),"%)"]}),C&&J&&!Fe&&i.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),Fe&&i.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),i.jsx("div",{className:"pb-cb-card-action",children:C?J&&Fe?i.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{bt(z),ln("")},children:i.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:i.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{bt(z),ln("")},children:i.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("circle",{cx:"12",cy:"12",r:"6"}),i.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},z)})}),Object.keys(Oe).length>0&&i.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>Ht("/client/core-buddy/achievements"),children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",i.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),Tt&&i.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>bt(null),children:i.jsxs("div",{className:"pb-cb-target-modal",onClick:z=>z.stopPropagation(),children:[i.jsx("h3",{children:"Set Target"}),i.jsx("p",{className:"pb-cb-target-exercise-name",children:Tt}),i.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",i.jsxs("strong",{children:[Oe[Tt]?.weight,"kg"]})]}),i.jsxs("div",{className:"pb-cb-target-input-wrap",children:[i.jsx("label",{children:"Your target (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:ne,onChange:z=>ln(z.target.value),placeholder:String((Oe[Tt]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),i.jsxs("div",{className:"pb-cb-target-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>bt(null),children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ye,disabled:d,children:d?"Saving...":"Set Target"})]})]})})]}),xe&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-tabs",children:[i.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),i.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),i.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&i.jsxs("div",{className:"pb-strength-section",children:[!x&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-carousel",ref:Ft,onTouchStart:dn,onTouchMove:Sn,onTouchEnd:F,children:[i.jsx("div",{className:`pb-ring-container slide-from-${ct.current}`,children:i.jsxs("div",{className:"pb-ring",children:[i.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:Ty.map((z,oe)=>{const T=oe<Math.round(Yn);return i.jsx("line",{x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,className:`pb-ring-tick ${T?qn?"hit":"filled":"empty"}`,strokeWidth:z.thick?"3":"2"},oe)})}),i.jsxs("div",{className:"pb-ring-center",children:[i.jsx("div",{className:"pb-ring-category",children:he.category}),i.jsxs("div",{className:"pb-ring-exercise",children:[he.name,Et("strength",he.key)&&i.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),i.jsx("div",{className:"pb-ring-value",children:$e?he.unit==="time"?Zh($e.time):Z2($e.weight,$e.reps):"-"}),mt!==null&&i.jsxs("div",{className:`pb-ring-change ${mt>=0?"positive":"negative"}`,children:[mt>=0?"+":"",mt.toFixed(1),"%"]}),mt===null&&$e&&i.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),fn&&i.jsx("div",{className:`pb-ring-target ${qn?"hit":""}`,children:qn?"Target hit!":fn.targetType==="time"?`${fn.startValue||0}s  ${fn.targetValue}s`:`${fn.startWeight||0}kg${fn.startReps||0}  ${fn.targetWeight}kg${fn.targetReps}`}),!fn&&i.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),i.jsx("div",{className:"pb-carousel-dots",children:Jr.map((z,oe)=>i.jsx("button",{className:`pb-dot ${oe===g?"active":""}`,onClick:()=>Ke(oe)},oe))}),i.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Ke(g-1),disabled:g===0,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),i.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Ke(g+1),disabled:g===Jr.length-1,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),i.jsxs("div",{className:"pb-trend-section",children:[i.jsx("h4",{children:"Trend"}),i.jsx(dD,{data:n,exerciseKey:he.key,unit:he.unit})]})]}),!x&&!$&&i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>k(!0),children:Ve?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>B(!0),children:Object.keys(ve).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ve).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Wt,disabled:d,children:"Reset All Goals"})]}),x&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Benchmarks - ",Mr(We)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{k(!1),te(Ve?.benchmarks||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:Jr.map(z=>i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),z.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:L[z.key]?.weight??"",onChange:oe=>jt(z.key,"weight",oe.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",value:L[z.key]?.reps??"",onChange:oe=>jt(z.key,"reps",oe.target.value),placeholder:"0"})]})]}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Time (seconds)"}),i.jsx("input",{type:"number",step:"0.01",value:L[z.key]?.time??"",onChange:oe=>jt(z.key,"time",oe.target.value),placeholder:"0"})]})})]},z.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{k(!1),te(Ve?.benchmarks||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:$t,disabled:d,children:d?"Saving...":"Save"})]})]}),$&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Set Your Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),R(ve)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Jr.map(z=>{const oe=Ve?.benchmarks?.[z.key];let T="-";return oe&&(z.unit==="time"&&oe.time?T=`${oe.time}s`:(oe.weight||oe.reps)&&(T=`${oe.weight||0}kg  ${oe.reps||0}`)),i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",T]})]}),z.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:E[z.key]?.targetWeight??"",onChange:C=>Dt(z.key,"targetWeight",C.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Reps"}),i.jsx("input",{type:"number",value:E[z.key]?.targetReps??"",onChange:C=>Dt(z.key,"targetReps",C.target.value),placeholder:"0"})]})]}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target (seconds)"}),i.jsx("input",{type:"number",step:"1",value:E[z.key]?.targetValue??"",onChange:C=>Dt(z.key,"targetValue",C.target.value),placeholder:"0"})]})})]},z.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),R(ve)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:qt,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&i.jsxs("div",{className:"pb-metrics-section",children:[!j&&!D&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-metrics-card",children:[i.jsx("h3",{children:"Body Measurements"}),i.jsx("p",{className:"pb-metrics-month",children:Mr(We)}),i.jsx("div",{className:"pb-metrics-list",children:fo.map(z=>{const oe=Ve?.bodyMetrics?.[z.key],T=de(z.key),C=Ae[z.key],G=un(z.key),J=G!==null&&G>=1;return i.jsxs("div",{className:"pb-metric-row",children:[i.jsxs("div",{className:"pb-metric-top",children:[i.jsxs("div",{className:"pb-metric-left",children:[i.jsxs("span",{className:"pb-metric-name",children:[z.name,Et("metric",z.key)&&i.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),C&&i.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",C.targetValue," ",z.suffix]})]}),i.jsxs("div",{className:"pb-metric-values",children:[i.jsx("span",{className:"pb-metric-current",children:oe!=null?`${oe} ${z.suffix}`:"-"}),T!==null&&i.jsxs("span",{className:`pb-metric-change ${T>0?"up":T<0?"down":"same"}`,children:[T>0?"+":"",T," ",z.suffix]})]})]}),G!==null&&i.jsxs("div",{className:"pb-metric-progress",children:[i.jsx("div",{className:"pb-metric-bar",children:i.jsx("div",{className:`pb-metric-bar-fill ${J?"hit":""}`,style:{width:`${Math.round(G*100)}%`}})}),i.jsx("span",{className:`pb-metric-percent ${J?"hit":""}`,children:J?"Hit!":`${Math.round(G*100)}%`})]})]},z.key)})})]}),i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>P(!0),children:Ve?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>M(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(ve).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Wt,disabled:d,children:"Reset All Goals"})]})]}),j&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Measurements - ",Mr(We)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{P(!1),ce(Ve?.bodyMetrics||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:fo.map(z=>i.jsx("div",{className:"pb-edit-metric",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:[z.name," (",z.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:Q[z.key]??"",onChange:oe=>Ct(z.key,oe.target.value),placeholder:"0"})]})},z.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{P(!1),ce(Ve?.bodyMetrics||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ge,disabled:d,children:d?"Saving...":"Save"})]})]}),D&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Body Metric Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{M(!1),I(Ae)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),fo.map(z=>{const oe=Ve?.bodyMetrics?.[z.key];return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",oe!=null?`${oe} ${z.suffix}`:"-"]})]}),i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:["Target (",z.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:U[z.key]?.targetValue??"",onChange:T=>kt(z.key,T.target.value),placeholder:"0"})]})})]},z.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{M(!1),I(Ae)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:sn,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&i.jsx("div",{className:"pb-history-section",children:n.length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("h4",{children:"No records yet"}),i.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):i.jsxs(i.Fragment,{children:[Ne.length>0&&i.jsxs("div",{className:"pb-achievements-wall",children:[i.jsxs("h4",{className:"pb-achievements-wall-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),i.jsx("div",{className:"pb-achievements-list",children:[...Ne].reverse().map((z,oe)=>i.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${oe*.05}s`},children:[i.jsx("div",{className:"pb-achievement-star",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("div",{className:"pb-achievement-info",children:[i.jsx("span",{className:"pb-achievement-label",children:z.label}),i.jsx("span",{className:"pb-achievement-date",children:Mr(z.achievedMonth)})]})]},oe))})]}),i.jsx("div",{className:"pb-history-controls",children:i.jsx("button",{className:`pb-compare-toggle ${Me?"active":""}`,onClick:()=>{O(!Me),!Me&&n.length>=2&&(ge(n[0].month),Re(n[n.length-1].month))},children:Me?"Back to Timeline":"Compare Months"})}),Me?i.jsxs("div",{className:"pb-compare",children:[i.jsxs("div",{className:"pb-compare-selectors",children:[i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"From"}),i.jsx("select",{value:W,onChange:z=>ge(z.target.value),children:n.map(z=>i.jsx("option",{value:z.month,children:Mr(z.month)},z.month))})]}),i.jsx("div",{className:"pb-compare-vs",children:"vs"}),i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"To"}),i.jsx("select",{value:Ee,onChange:z=>Re(z.target.value),children:n.map(z=>i.jsx("option",{value:z.month,children:Mr(z.month)},z.month))})]})]}),me&&ye&&i.jsxs("div",{className:"pb-compare-results",children:[i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Strength Benchmarks"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Exercise"}),i.jsx("span",{children:Mr(W).split(" ")[0]}),i.jsx("span",{children:Mr(Ee).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),Jr.map(z=>{const oe=me.benchmarks?.[z.key],T=ye.benchmarks?.[z.key],C=pl(z,oe),G=pl(z,T),J=Mp(G,C);return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:z.name}),i.jsx("span",{className:"pb-compare-val",children:oe?z.unit==="time"?Zh(oe.time):`${oe.weight}x${oe.reps}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:T?z.unit==="time"?Zh(T.time):`${T.weight}x${T.reps}`:"-"}),i.jsx("span",{className:`pb-compare-change ${J!==null?J>=0?"positive":"negative":""}`,children:J!==null?`${J>=0?"+":""}${J.toFixed(1)}%`:"-"})]},z.key)})]})]}),i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Body Measurements"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Measurement"}),i.jsx("span",{children:Mr(W).split(" ")[0]}),i.jsx("span",{children:Mr(Ee).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),fo.map(z=>{const oe=me.bodyMetrics?.[z.key],T=ye.bodyMetrics?.[z.key],C=oe!=null&&T!=null?parseFloat((T-oe).toFixed(2)):null;return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:z.name}),i.jsx("span",{className:"pb-compare-val",children:oe!=null?`${oe}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:T!=null?`${T}`:"-"}),i.jsx("span",{className:`pb-compare-change ${C!==null?C>0?"positive":C<0?"negative":"neutral":""}`,children:C!==null?`${C>0?"+":""}${C} ${z.suffix}`:"-"})]},z.key)})]})]})]})]}):i.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((z,oe)=>{const T=n.find(C=>C.month<z.month&&n.indexOf(C)===n.indexOf(z)-1)||n.filter(C=>C.month<z.month).pop();return i.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${oe*.05}s`},children:[i.jsx("div",{className:"pb-timeline-dot"}),i.jsxs("div",{className:"pb-timeline-card",children:[i.jsx("h4",{children:Mr(z.month)}),z.benchmarks&&Object.keys(z.benchmarks).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Strength Benchmarks"}),Jr.map(C=>{const G=z.benchmarks[C.key];if(!G)return null;const J=T?.benchmarks?.[C.key],Fe=pl(C,G),Le=pl(C,J),De=Mp(Fe,Le);return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:C.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsx("span",{className:"pb-timeline-value",children:C.unit==="time"?Zh(G.time):Z2(G.weight,G.reps)}),De!==null&&i.jsxs("span",{className:`pb-timeline-change ${De>=0?"positive":"negative"}`,children:[De>=0?"+":"",De.toFixed(1),"%"]})]})]},C.key)})]}),z.bodyMetrics&&Object.keys(z.bodyMetrics).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Body Measurements"}),fo.map(C=>{const G=z.bodyMetrics[C.key];if(G==null)return null;const J=T?.bodyMetrics?.[C.key],Fe=J!=null?parseFloat((G-J).toFixed(2)):null;return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:C.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsxs("span",{className:"pb-timeline-value",children:[G," ",C.suffix]}),Fe!==null&&i.jsxs("span",{className:`pb-timeline-change ${Fe>0?"positive":Fe<0?"negative":"neutral"}`,children:[Fe>0?"+":"",Fe," ",C.suffix]})]})]},C.key)})]})]})]},z.id)})})]})})]})]}),Y&&i.jsx("div",{className:"pb-celebration-overlay",onClick:()=>ke(null),children:i.jsxs("div",{className:"pb-celebration-card",children:[i.jsx("div",{className:"pb-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),i.jsx("div",{className:"pb-celebration-badges",children:Y.map((z,oe)=>i.jsx("div",{className:"pb-celebration-badge",children:z.label},oe))}),i.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Pe&&i.jsxs("div",{className:`toast-notification ${Pe.type}`,children:[i.jsx("span",{className:"toast-icon",children:Pe.type==="success"?i.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),i.jsx("span",{className:"toast-message",children:Pe.message}),i.jsx("button",{className:"toast-close",onClick:()=>ae(null),children:""})]}),xe&&i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/forms"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),i.jsx("polyline",{points:"14 2 14 8 20 8"}),i.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),i.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),i.jsx("span",{children:"Forms"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/tools"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),i.jsx("span",{children:"Tools"})]}),i.jsxs("button",{className:"block-nav-tab active",children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"PBs"})]}),It?.circuitAccess&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ht("/client/circuit"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 6v6l4 2"})]}),i.jsx("span",{children:"Circuit"})]})]}),fe&&i.jsx(ca,{active:"progress"})]})}const mD=_.lazy(()=>vr(()=>import("./Dashboard-DUhO37EK.js"),__vite__mapDeps([0,1]))),pD=_.lazy(()=>vr(()=>import("./AddClient-C2PCWPwa.js"),__vite__mapDeps([2,3]))),gD=_.lazy(()=>vr(()=>import("./ClientDashboard-DNo0XfF-.js"),[])),yD=_.lazy(()=>vr(()=>import("./ClientForms-Ca-IY5c6.js"),__vite__mapDeps([4,5]))),vD=_.lazy(()=>vr(()=>import("./ClientTools-ClEhwN3h.js"),__vite__mapDeps([6,7]))),bD=_.lazy(()=>vr(()=>import("./MacroCalculator-BM2h9uXv.js"),__vite__mapDeps([8,7]))),xD=_.lazy(()=>vr(()=>import("./ProteinSnacks-SQB3SI9Z.js"),__vite__mapDeps([9,7]))),wD=_.lazy(()=>vr(()=>import("./DailyMotivation-BdJ3eDMU.js"),__vite__mapDeps([10,7]))),_D=_.lazy(()=>vr(()=>import("./CircuitDashboard-B-4r3aeN.js"),__vite__mapDeps([11,12]))),kD=_.lazy(()=>vr(()=>import("./CircuitBooking-CvT0nHgh.js"),__vite__mapDeps([13,14,12]))),TD=_.lazy(()=>vr(()=>import("./Leaderboard-CDh0i38R.js"),__vite__mapDeps([15,16])));function ED({children:s}){const{pathname:e}=Ur();return _.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),_.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function jD(){const s=Ds();return _.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function SD(){return i.jsx(y3,{children:i.jsx(g3,{children:i.jsxs(xj,{basename:"/login",children:[i.jsx(jD,{}),i.jsx(ED,{children:i.jsx(_.Suspense,{fallback:null,children:i.jsxs(YE,{children:[i.jsx(Wn,{path:"/",element:i.jsx(v3,{})}),i.jsx(Wn,{path:"/dashboard",element:i.jsx(mD,{})}),i.jsx(Wn,{path:"/add-client",element:i.jsx(pD,{})}),i.jsx(Wn,{path:"/client",element:i.jsx(gD,{})}),i.jsx(Wn,{path:"/client/forms",element:i.jsx(yD,{})}),i.jsx(Wn,{path:"/client/tools",element:i.jsx(vD,{})}),i.jsx(Wn,{path:"/client/tools/macros",element:i.jsx(bD,{})}),i.jsx(Wn,{path:"/client/tools/snacks",element:i.jsx(xD,{})}),i.jsx(Wn,{path:"/client/tools/motivation",element:i.jsx(wD,{})}),i.jsx(Wn,{path:"/client/personal-bests",element:i.jsx(fD,{})}),i.jsx(Wn,{path:"/client/circuit",element:i.jsx(_D,{})}),i.jsx(Wn,{path:"/client/circuit/booking",element:i.jsx(kD,{})}),i.jsx(Wn,{path:"/client/core-buddy",element:i.jsx(T3,{})}),i.jsx(Wn,{path:"/client/core-buddy/nutrition",element:i.jsx(N3,{})}),i.jsx(Wn,{path:"/client/core-buddy/workouts",element:i.jsx(B3,{})}),i.jsx(Wn,{path:"/client/core-buddy/programmes",element:i.jsx(H3,{})}),i.jsx(Wn,{path:"/client/core-buddy/achievements",element:i.jsx(Q3,{})}),i.jsx(Wn,{path:"/client/core-buddy/consistency",element:i.jsx(Z3,{})}),i.jsx(Wn,{path:"/client/core-buddy/buddies",element:i.jsx(eD,{})}),i.jsx(Wn,{path:"/client/core-buddy/profile/:userId",element:i.jsx(aD,{})}),i.jsx(Wn,{path:"/client/leaderboard",element:i.jsx(TD,{})}),i.jsx(Wn,{path:"*",element:i.jsx(GE,{to:"/",replace:!0})})]})})})]})})})}KT.createRoot(document.getElementById("root")).render(i.jsx(_.StrictMode,{children:i.jsx(SD,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{ca as C,dt as T,lg as a,ea as b,An as c,Be as d,ot as e,ND as f,Gn as g,y4 as h,In as i,i as j,br as k,ha as l,Ds as m,Ty as n,RD as o,Rn as p,ds as q,_ as r,AD as s,WI as u,Un as w};
