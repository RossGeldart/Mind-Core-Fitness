import{r as l,k as gs,l as vs,m as fs,g as L,q as ce,c as b,d as N,w as re,i as Ns,e as De,j as e,n as ys,b as ws,a as ks,T as bs,u as Ss}from"./index-D1A0SdOo.js";const Qe={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"12:00",end:"17:00"},defaultBlocked:!0}},Cs=["monday","tuesday","wednesday","thursday","friday"],S=d=>{const i=d.getFullYear(),h=(d.getMonth()+1).toString().padStart(2,"0"),u=d.getDate().toString().padStart(2,"0");return`${i}-${h}-${u}`},Le=d=>{const[i,h]=d.split(":").map(Number);return i*60+h},Z=(d,i)=>{const h=Le(d)+i,u=Math.floor(h/60),C=h%60;return`${u.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`},Ds=d=>{const i=Qe[d];if(!i)return[];const h=[];if(i.morning){let u=i.morning.start;for(;u<i.morning.end;)h.push({time:u,period:"morning"}),u=Z(u,15)}if(i.afternoon){let u=i.afternoon.start;for(;u<i.afternoon.end;)h.push({time:u,period:"afternoon"}),u=Z(u,15)}return h},Ls=d=>{const i=d.getDay();return i>=1&&i<=5},Xe=d=>{const i=d.getDay();return i===0||i===6?null:Cs[i-1]},Ms=(d,i,h,u,C,W=null,V=[],q=[])=>{const F=Xe(d);if(!F)return!1;const y=S(d),p=Qe[F];if(C.some(r=>r.date===y))return!1;if(p.defaultBlocked){const r=Math.ceil(h/15);for(let g=0;g<r;g++){const v=Z(i,g*15);if(!q.some(f=>f.date===y&&f.time===v))return!1}}else{const r=Math.ceil(h/15);for(let g=0;g<r;g++){const v=Z(i,g*15);if(V.some(f=>f.date===y&&f.time===v))return!1}}const z=new Date,M=S(z);if(y<M)return!1;if(y===M){const r=`${z.getHours().toString().padStart(2,"0")}:${z.getMinutes().toString().padStart(2,"0")}`;if(i<r)return!1}const J=Z(i,h),A=p.morning&&i>=p.morning.start&&i<p.morning.end,Q=p.afternoon&&i>=p.afternoon.start&&i<p.afternoon.end,ee=p.morning&&J<=p.morning.end,se=p.afternoon&&J<=p.afternoon.end;if(A&&!ee||Q&&!se||!A&&!Q)return!1;for(const r of u){if(W&&r.id===W||r.date!==y)continue;const g=Le(r.time),v=g+(r.duration||45),f=Le(i),E=f+h;if(f<v&&E>g)return!1}return!0},Ts=(d,i,h,u,C=null,W=[],V=[])=>{const q=Xe(d);return q?Ds(q).filter(y=>Ms(d,y.time,i,h,u,C,W,V)):[]};function $s(){const[d,i]=l.useState([]),[h,u]=l.useState([]),[C,W]=l.useState([]),[V,q]=l.useState([]),[F,y]=l.useState([]),[p,z]=l.useState([]),[M,J]=l.useState(!0),[A,Q]=l.useState(null),[ee,se]=l.useState(!1),[r,g]=l.useState(null),[v,f]=l.useState(null),[E,te]=l.useState(null),[Me,de]=l.useState([]),[Te,Be]=l.useState(!1),[Ke,Ge]=l.useState([]),[X,he]=l.useState(null),[ne,Re]=l.useState(!1),[ue,$e]=l.useState(0),K=l.useRef(null),We=l.useRef(0),me=l.useRef(!1),[qe,G]=l.useState(null),[I,xe]=l.useState(null),[O,Oe]=l.useState([]),[ze,Ue]=l.useState(!1),[k,pe]=l.useState(null),[je,ge]=l.useState(null),[Y,_e]=l.useState([]),[D,ve]=l.useState(null),Ze=l.useRef(null),{currentUser:fe,isClient:Ne,clientData:c,logout:Je,loading:ye}=gs(),{isDark:Ae,toggleTheme:es}=vs(),w=fs(),U=l.useCallback((s,t="info")=>{he({message:s,type:t}),setTimeout(()=>he(null),4e3)},[]),P=s=>{const t=s.currentTarget,o=t.querySelector(".ripple");o&&o.remove();const a=document.createElement("span"),m=Math.max(t.clientWidth,t.clientHeight),j=m/2,x=t.getBoundingClientRect();a.style.width=a.style.height=`${m}px`,a.style.left=`${s.clientX-x.left-j}px`,a.style.top=`${s.clientY-x.top-j}px`,a.classList.add("ripple"),t.appendChild(a),setTimeout(()=>a.remove(),600)},ss=s=>{K.current&&K.current.scrollTop===0&&(We.current=s.touches[0].clientY,me.current=!0)},ts=s=>{if(!me.current||!K.current)return;const o=s.touches[0].clientY-We.current;o>20&&K.current.scrollTop===0&&(s.preventDefault(),$e(Math.min((o-20)*.35,80)))},ns=async()=>{ue>55&&!ne&&(Re(!0),await we(),U("Refreshed!","success"),Re(!1)),$e(0),me.current=!1},as=(s,t)=>{const o=s.touches[0];s.currentTarget.dataset.startX=o.clientX,s.currentTarget.dataset.startY=o.clientY},is=(s,t)=>{const o=s.touches[0],a=parseFloat(s.currentTarget.dataset.startX),m=parseFloat(s.currentTarget.dataset.startY),j=o.clientX-a,x=o.clientY-m;Math.abs(j)>Math.abs(x)&&Math.abs(j)>10&&(s.preventDefault(),j<-50?G(t):j>50&&G(null))};l.useEffect(()=>{!ye&&(!fe||!Ne)&&w("/")},[fe,Ne,ye,w]),l.useEffect(()=>{if(c){if(c.dailyQuote){const s=new Date().toISOString().split("T")[0];c.dailyQuote.date===s&&ge(c.dailyQuote)}we()}},[c]),l.useEffect(()=>{if(!M&&c){const s=setTimeout(()=>Ue(!0),300);return()=>clearTimeout(s)}},[M,c]),l.useEffect(()=>{const s=()=>{const o=ke();if(o.length===0){pe(null);return}const a=o[0],m=new Date,x=new Date(a.date+"T"+a.time)-m;if(x<=0){pe(null);return}const H=Math.floor(x/(1e3*60*60*24)),Ce=Math.floor(x%(1e3*60*60*24)/(1e3*60*60)),le=Math.floor(x%(1e3*60*60)/(1e3*60)),oe=Math.floor(x%(1e3*60)/1e3);pe({days:H,hours:Ce,minutes:le,seconds:oe,session:a})};s();const t=setInterval(s,1e3);return()=>clearInterval(t)},[d,M]);const we=async()=>{try{const[s,t,o,a,m,j,x,H,Ce]=await Promise.all([L(ce(b(N,"sessions"),re("clientId","==",c.id))),L(b(N,"sessions")),L(b(N,"holidays")),L(b(N,"blockedTimes")),L(b(N,"openedSlots")),L(ce(b(N,"rescheduleRequests"),re("clientId","==",c.id))),L(ce(b(N,"achievements"),re("clientId","==",c.id))),Ns(De(N,"clients",c.id)),L(ce(b(N,"sessionNotes"),re("clientId","==",c.id)))]),le=s.docs.map(n=>({id:n.id,...n.data()}));le.sort((n,$)=>n.date!==$.date?n.date.localeCompare($.date):n.time.localeCompare($.time)),i(le),u(t.docs.map(n=>({id:n.id,...n.data()}))),W(o.docs.map(n=>({id:n.id,...n.data()}))),q(a.docs.map(n=>({id:n.id,...n.data()}))),y(m.docs.map(n=>({id:n.id,...n.data()})));const oe=j.docs.map(n=>({id:n.id,...n.data()}));Ge(oe.filter(n=>n.status==="pending"));const ps=oe.filter(n=>{if(n.status==="pending"||!n.respondedAt)return!1;const $=n.respondedAt.toDate?n.respondedAt.toDate():new Date(n.respondedAt),_=new Date;return _.setDate(_.getDate()-7),$>_&&!n.dismissed});if(z(ps),!x.empty){const n=x.docs[0].data().badges||[];Oe(n)}const js=new Date().toISOString().split("T")[0];if(H.exists()){const n=H.data();n.dailyQuote&&n.dailyQuote.date===js?ge(n.dailyQuote):ge(null)}const Fe=Ce.docs.map(n=>({id:n.id,...n.data()}));Fe.sort((n,$)=>{const _=n.createdAt?.toMillis?.()||0;return($.createdAt?.toMillis?.()||0)-_}),_e(Fe)}catch(s){console.error("Error fetching data:",s)}J(!1)},T=s=>new Date(s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),B=s=>{const[t,o]=s.split(":"),a=parseInt(t),m=a>=12?"pm":"am";return`${a>12?a-12:a===0?12:a}:${o}${m}`},Ee=s=>s?(s.toDate?s.toDate():new Date(s)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",ae=s=>{const t=new Date,o=S(t),a=`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`;return s.date<o||s.date===o&&s.time<a},Ie=s=>{const o=S(new Date);return s.date===o&&!ae(s)},ls=()=>d.filter(s=>ae(s)).length,ke=()=>d.filter(s=>!ae(s)),Ye=s=>{xe({title:"Cancel Session?",message:`Cancel your session on ${T(s.date)} at ${B(s.time)}? This cannot be undone.`,onConfirm:async()=>{xe(null),Q(s.id),G(null);try{await ws(De(N,"sessions",s.id)),i(d.filter(t=>t.id!==s.id)),U("Session cancelled","success")}catch(t){console.error("Error cancelling session:",t),U("Failed to cancel session. Please try again.","error")}Q(null)},onCancel:()=>xe(null)})},os=async()=>{try{await Je(),w("/")}catch(s){console.error("Failed to log out:",s)}},be=s=>Ke.some(t=>t.sessionId===s),Pe=s=>{g(s),f(null),te(null),de([]),se(!0)},ie=()=>{se(!1),g(null),f(null),te(null),de([])},cs=()=>c.endDate?c.endDate.toDate?c.endDate.toDate():new Date(c.endDate):new Date,rs=()=>{const s=[],t=new Date,o=cs(),a=new Date(t);for(a.setDate(a.getDate()+1);a<=o;){if(Ls(a)){const m=S(a);C.some(x=>x.date===m)||s.push(new Date(a))}a.setDate(a.getDate()+1)}return s},ds=s=>{f(s),te(null);const t=r?.duration||c.sessionDuration||45;let o=Ts(s,t,h,C,r?.id,V,F);r&&S(s)===r.date&&(o=o.filter(a=>a.time!==r.time)),de(o)},hs=async()=>{if(!(!v||!E||!r)){Be(!0);try{await ks(b(N,"rescheduleRequests"),{sessionId:r.id,clientId:c.id,clientName:c.name,originalDate:r.date,originalTime:r.time,requestedDate:S(v),requestedTime:E,duration:r.duration,status:"pending",createdAt:bs.now(),respondedAt:null,dismissed:!1}),ie(),U("Reschedule request submitted! You'll be notified when your trainer responds.","success"),we()}catch(s){console.error("Error submitting reschedule request:",s),U("Failed to submit request. Please try again.","error")}Be(!1)}},us=async s=>{try{await Ss(De(N,"rescheduleRequests",s),{dismissed:!0}),z(p.filter(t=>t.id!==s))}catch(t){console.error("Error dismissing notification:",t)}},ms=()=>{const s=ke();if(s.length===0)return null;const t=s[0],o=new Date,m=new Date(t.date+"T"+t.time)-o;if(m<=0)return null;const j=Math.floor(m/(1e3*60*60*24)),x=Math.floor(m%(1e3*60*60*24)/(1e3*60*60)),H=Math.floor(m%(1e3*60*60)/(1e3*60));return{days:j,hours:x,minutes:H,session:t}};if(ye||M)return e.jsxs("div",{className:"client-dashboard",children:[e.jsx("header",{className:"client-header",children:e.jsx("div",{className:"header-content",children:e.jsx("div",{className:"skeleton skeleton-logo"})})}),e.jsxs("main",{className:"client-main",children:[e.jsxs("div",{className:"skeleton-welcome",children:[e.jsx("div",{className:"skeleton skeleton-title"}),e.jsx("div",{className:"skeleton skeleton-btn-small"})]}),e.jsxs("div",{className:"skeleton-actions",children:[e.jsx("div",{className:"skeleton skeleton-btn"}),e.jsx("div",{className:"skeleton skeleton-btn"})]}),e.jsx("div",{className:"skeleton skeleton-card-large"}),e.jsx("div",{className:"skeleton skeleton-card-medium"}),e.jsx("div",{className:"skeleton skeleton-card-medium"})]})]});if(!fe||!Ne||!c)return null;const R=ls(),xs=c.totalSessions-R,Se=ke(),He=ee?rs():[];ms();const Ve=c.totalSessions>0?R/c.totalSessions*100:0;return e.jsxs("div",{className:"client-dashboard",children:[e.jsx("header",{className:"client-header",children:e.jsx("div",{className:"header-content",children:e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),e.jsxs("div",{className:`pull-refresh-indicator ${ue>0?"visible":""} ${ne?"refreshing":""}`,style:{height:ue},children:[e.jsx("div",{className:`refresh-spinner ${ne?"spinning":""}`,children:e.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:e.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),e.jsx("span",{className:"refresh-text",children:ne?"Refreshing...":"Pull to refresh"})]}),e.jsxs("main",{className:"client-main page-transition-enter",ref:K,onTouchStart:ss,onTouchMove:ts,onTouchEnd:ns,children:[e.jsxs("div",{className:"welcome-section",children:[e.jsxs("h2",{children:["Welcome, ",c.name.split(" ")[0]]}),e.jsxs("div",{className:"welcome-actions",children:[e.jsx("button",{className:"theme-toggle",onClick:es,"aria-label":Ae?"Switch to light mode":"Switch to dark mode",children:Ae?e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),e.jsx("button",{className:"logout-btn",onClick:os,children:"Log Out"})]})]}),p.length>0&&e.jsx("div",{className:"notifications-section",children:p.map(s=>e.jsxs("div",{className:`notification ${s.status}`,children:[e.jsxs("div",{className:"notification-content",children:[e.jsx("span",{className:"notification-icon",children:s.status==="approved"?"✓":"✗"}),e.jsxs("div",{className:"notification-text",children:[e.jsx("strong",{children:s.status==="approved"?"Reschedule Approved!":"Reschedule Declined"}),e.jsx("p",{children:s.status==="approved"?`Your session has been moved to ${T(s.requestedDate)} at ${B(s.requestedTime)}`:`Your request to reschedule from ${T(s.originalDate)} was declined. Please contact your trainer.`})]})]}),e.jsx("button",{className:"dismiss-btn",onClick:()=>us(s.id),children:"✕"})]},s.id))}),k&&e.jsxs("div",{className:"ring-timer-container",children:[e.jsxs("div",{className:"ring-timer",children:[e.jsx("svg",{className:"ring-timer-svg",viewBox:"0 0 200 200",children:ys.map((s,t)=>{const a=60-k.seconds,m=t<a;return e.jsx("line",{x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,className:`ring-tick ${m?"elapsed":"remaining"}`,strokeWidth:s.thick?"3":"2"},t)})}),e.jsxs("div",{className:"ring-timer-center",children:[e.jsx("div",{className:"ring-timer-logo",children:e.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness"})}),e.jsxs("div",{className:"ring-timer-countdown",children:[k.days>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"timer-digit",children:String(k.days).padStart(2,"0")}),e.jsx("span",{className:"timer-colon",children:":"})]}),e.jsx("span",{className:"timer-digit",children:String(k.hours).padStart(2,"0")}),e.jsx("span",{className:"timer-colon",children:":"}),e.jsx("span",{className:"timer-digit",children:String(k.minutes).padStart(2,"0")}),e.jsx("span",{className:"timer-colon",children:":"}),e.jsx("span",{className:"timer-digit timer-seconds",children:String(k.seconds).padStart(2,"0")})]}),e.jsx("div",{className:"ring-timer-label",children:"until next session"})]})]}),e.jsxs("div",{className:"ring-timer-session-info",children:[T(k.session.date)," at ",B(k.session.time)]})]}),e.jsxs("div",{className:"block-info-card",children:[e.jsx("div",{className:"block-header-row",children:e.jsx("h3",{children:"Your Training Block"})}),e.jsxs("div",{className:"progress-section",children:[e.jsxs("div",{className:"progress-ring-container",children:[e.jsxs("svg",{className:"progress-ring",viewBox:"0 0 100 100",children:[e.jsx("circle",{className:"progress-ring-bg",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8"}),e.jsx("circle",{className:`progress-ring-fill ${ze?"animate":""}`,cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:ze?`${2*Math.PI*42*(1-Ve/100)}`:`${2*Math.PI*42}`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"progress-ring-text",children:[e.jsxs("span",{className:"progress-percent",children:[Math.round(Ve),"%"]}),e.jsx("span",{className:"progress-label",children:"complete"})]})]}),e.jsxs("div",{className:"progress-stats",children:[e.jsxs("div",{className:"progress-stat",children:[e.jsx("span",{className:"progress-stat-value",children:R}),e.jsx("span",{className:"progress-stat-label",children:"Completed"})]}),e.jsxs("div",{className:"progress-stat",children:[e.jsx("span",{className:"progress-stat-value",children:xs}),e.jsx("span",{className:"progress-stat-label",children:"Remaining"})]}),e.jsxs("div",{className:"progress-stat",children:[e.jsx("span",{className:"progress-stat-value",children:c.totalSessions}),e.jsx("span",{className:"progress-stat-label",children:"Total"})]})]})]}),e.jsxs("div",{className:"block-dates",children:[e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"date-label",children:"Start Date"}),e.jsx("span",{className:"date-value",children:Ee(c.startDate)})]}),e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"date-label",children:"End Date"}),e.jsx("span",{className:"date-value",children:Ee(c.endDate)})]}),e.jsxs("div",{className:"date-item",children:[e.jsx("span",{className:"date-label",children:"Session Duration"}),e.jsxs("span",{className:"date-value",children:[c.sessionDuration," minutes"]})]})]})]}),c?.coreBuddyAccess&&e.jsxs("div",{className:"core-buddy-cta",onClick:()=>w("/client/core-buddy"),children:[e.jsx("div",{className:"core-buddy-cta-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"})})}),e.jsxs("div",{className:"core-buddy-cta-text",children:[e.jsx("span",{className:"core-buddy-cta-title",children:"Core Buddy"}),e.jsx("span",{className:"core-buddy-cta-sub",children:"Workouts, nutrition & habits"})]}),e.jsx("svg",{className:"core-buddy-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),Y.length>0&&e.jsxs("div",{className:"session-notes-card",ref:Ze,children:[e.jsxs("div",{className:"session-notes-header",children:[e.jsxs("div",{className:"session-notes-title",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"18",height:"18",children:[e.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),e.jsx("span",{children:"Session Notes"})]}),e.jsx("span",{className:"session-notes-count",children:Y.length})]}),e.jsx("div",{className:"session-notes-list",children:Y.slice(0,D==="show-all"?void 0:3).map((s,t)=>e.jsxs("div",{className:`session-note-item ${D===s.id?"expanded":""}`,onClick:()=>ve(D===s.id?null:s.id),children:[e.jsxs("div",{className:"session-note-top",children:[e.jsx("span",{className:"session-note-date",children:s.date}),e.jsx("svg",{className:`session-note-chevron ${D===s.id?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",width:"16",height:"16",children:e.jsx("path",{d:"M6 9l6 6 6-6"})})]}),s.sessionNotes&&e.jsx("p",{className:"session-note-preview",children:D===s.id?s.sessionNotes:s.sessionNotes.length>80?s.sessionNotes.slice(0,80)+"...":s.sessionNotes}),D===s.id&&e.jsxs("div",{className:"session-note-details",children:[s.whatWentWell&&e.jsxs("div",{className:"session-note-section went-well",children:[e.jsx("span",{className:"session-note-label",children:"What Went Well"}),e.jsx("p",{children:s.whatWentWell})]}),s.whatWentWrong&&e.jsxs("div",{className:"session-note-section went-wrong",children:[e.jsx("span",{className:"session-note-label",children:"What Went Wrong"}),e.jsx("p",{children:s.whatWentWrong})]}),s.whatsNext&&e.jsxs("div",{className:"session-note-section whats-next",children:[e.jsx("span",{className:"session-note-label",children:"What's Next"}),e.jsx("p",{children:s.whatsNext})]})]})]},s.id))}),Y.length>3&&D===null&&e.jsxs("button",{className:"session-notes-viewall",onClick:()=>ve("show-all"),children:["View all ",Y.length," notes",e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),D==="show-all"&&Y.length>3&&e.jsxs("button",{className:"session-notes-viewall",onClick:()=>ve(null),children:["Show less",e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"16",height:"16",style:{transform:"rotate(180deg)"},children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),O.length>0&&e.jsxs("div",{className:"achievements-card",children:[e.jsxs("div",{className:"achievements-card-header",children:[e.jsxs("div",{className:"achievements-card-title",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),e.jsx("span",{children:"Targets Achieved"})]}),e.jsx("span",{className:"achievements-card-count",children:O.length})]}),e.jsx("div",{className:"achievements-card-list",children:[...O].reverse().slice(0,3).map((s,t)=>e.jsxs("div",{className:"achievements-card-item",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),e.jsx("span",{className:"achievements-card-label",children:s.label}),e.jsx("span",{className:"achievements-card-date",children:s.achievedMonth})]},t))}),O.length>3&&e.jsxs("button",{className:"achievements-card-viewall",onClick:()=>w("/client/personal-bests"),children:["View all ",O.length," achievements",e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),je?e.jsxs("div",{className:"daily-quote-card",children:[e.jsx("div",{className:"daily-quote-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),e.jsxs("div",{className:"daily-quote-content",children:[e.jsx("div",{className:"daily-quote-label",children:"Daily Motivation"}),e.jsx("div",{className:"daily-quote-text",children:je.text}),e.jsxs("div",{className:"daily-quote-author",children:["— ",je.author]}),e.jsxs("div",{className:"daily-quote-lock",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"12",height:"12",children:e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"})}),"New quote at midnight"]})]})]}):e.jsxs("div",{className:"daily-quote-cta",onClick:()=>w("/client/tools/motivation"),children:[e.jsx("div",{className:"daily-quote-cta-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:e.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),e.jsxs("div",{className:"daily-quote-cta-text",children:[e.jsx("span",{className:"daily-quote-cta-title",children:"Daily Motivation"}),e.jsx("span",{className:"daily-quote-cta-sub",children:"Tap to get today's inspiration"})]}),e.jsx("svg",{className:"daily-quote-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),e.jsxs("div",{className:"sessions-section",children:[e.jsxs("h3",{children:["Upcoming Sessions (",Se.length,")"]}),Se.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),e.jsx("line",{x1:"20",y1:"35",x2:"80",y2:"35"}),e.jsx("line",{x1:"35",y1:"15",x2:"35",y2:"35"}),e.jsx("line",{x1:"65",y1:"15",x2:"65",y2:"35"}),e.jsx("circle",{cx:"40",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),e.jsx("circle",{cx:"60",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),e.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"}),e.jsx("circle",{cx:"60",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"})]})}),e.jsx("h4",{children:"No upcoming sessions"}),e.jsx("p",{children:"Contact your trainer to book sessions"})]}):e.jsx("div",{className:"sessions-list",children:Se.map(s=>e.jsxs("div",{className:`session-card-wrapper ${qe===s.id?"swiped":""}`,onTouchStart:t=>as(t,s.id),onTouchMove:t=>is(t,s.id),children:[e.jsxs("div",{className:"session-card-swipe-actions",children:[e.jsx("button",{className:"swipe-action-btn reschedule ripple-btn",onClick:t=>{P(t),G(null),Pe(s)},disabled:be(s.id),children:"Reschedule"}),e.jsx("button",{className:"swipe-action-btn cancel ripple-btn",onClick:t=>{P(t),Ye(s)},disabled:A===s.id,children:"Cancel"})]}),e.jsxs("div",{className:`session-card ${Ie(s)?"today-session":""}`,onClick:()=>qe===s.id&&G(null),children:[e.jsxs("div",{className:"session-info",children:[e.jsxs("div",{className:"session-date",children:[Ie(s)&&e.jsx("span",{className:"today-label",children:"Today - "}),T(s.date)]}),e.jsxs("div",{className:"session-time",children:[B(s.time)," (",s.duration," min)"]}),be(s.id)&&e.jsx("div",{className:"pending-badge",children:"Reschedule pending"})]}),e.jsxs("div",{className:"session-actions",children:[e.jsx("button",{className:"reschedule-btn ripple-btn",onClick:t=>{t.stopPropagation(),P(t),Pe(s)},disabled:be(s.id),children:"Reschedule"}),e.jsx("button",{className:"cancel-btn ripple-btn",onClick:t=>{t.stopPropagation(),P(t),Ye(s)},disabled:A===s.id,children:A===s.id?"Cancelling...":"Cancel"})]}),e.jsxs("div",{className:"swipe-hint",children:[e.jsx("span",{className:"swipe-hint-text",children:"Swipe"}),e.jsxs("span",{className:"swipe-hint-chevrons",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})]})]})]})]},s.id))})]}),e.jsxs("div",{className:"completed-section",children:[e.jsxs("h3",{children:["Completed Sessions (",R,")"]}),R===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:e.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"50",cy:"50",r:"35"}),e.jsx("path",{d:"M35 50 L45 60 L65 40",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),e.jsx("path",{d:"M50 25 L50 50 L65 55",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsx("h4",{children:"No completed sessions yet"}),e.jsx("p",{children:"Your completed sessions will appear here"})]}):e.jsxs("div",{className:"sessions-list completed",children:[d.filter(s=>ae(s)).slice(-5).reverse().map(s=>e.jsxs("div",{className:"session-card completed",children:[e.jsxs("div",{className:"session-info",children:[e.jsx("div",{className:"session-date",children:T(s.date)}),e.jsx("div",{className:"session-time",children:B(s.time)})]}),e.jsx("span",{className:"completed-badge",children:"Completed"})]},s.id)),R>5&&e.jsxs("div",{className:"more-sessions",children:["And ",R-5," more completed sessions"]})]})]})]}),ee&&r&&e.jsx("div",{className:"modal-overlay",onClick:ie,children:e.jsxs("div",{className:"reschedule-modal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Reschedule Session"}),e.jsx("button",{className:"close-modal-btn",onClick:ie,children:"✕"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"current-session-info",children:e.jsxs("p",{children:["Current: ",e.jsx("strong",{children:T(r.date)})," at ",e.jsx("strong",{children:B(r.time)})]})}),e.jsxs("div",{className:"date-selection",children:[e.jsx("h4",{children:"Select New Date"}),He.length===0?e.jsx("p",{className:"no-dates",children:"No available dates within your training block"}):e.jsx("div",{className:"dates-grid",children:He.map((s,t)=>e.jsxs("button",{className:`date-btn ${v&&S(v)===S(s)?"selected":""}`,onClick:()=>ds(s),children:[e.jsx("span",{className:"date-day",children:s.toLocaleDateString("en-GB",{weekday:"short"})}),e.jsx("span",{className:"date-num",children:s.getDate()}),e.jsx("span",{className:"date-month",children:s.toLocaleDateString("en-GB",{month:"short"})})]},t))})]}),v&&e.jsxs("div",{className:"time-selection",children:[e.jsx("h4",{children:"Select Time"}),Me.length===0?e.jsx("p",{className:"no-slots",children:"No available slots on this date"}):e.jsx("div",{className:"times-grid",children:Me.map((s,t)=>e.jsx("button",{className:`time-btn ${E===s.time?"selected":""} ${s.period}`,onClick:()=>te(s.time),children:B(s.time)},t))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"cancel-modal-btn",onClick:ie,children:"Cancel"}),e.jsx("button",{className:"submit-reschedule-btn",onClick:hs,disabled:!v||!E||Te,children:Te?"Submitting...":"Request Reschedule"})]})]})}),X&&e.jsxs("div",{className:`toast-notification ${X.type}`,children:[e.jsx("span",{className:"toast-icon",children:X.type==="success"?e.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):X.type==="error"?e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),e.jsx("span",{className:"toast-message",children:X.message}),e.jsx("button",{className:"toast-close",onClick:()=>he(null),children:"✕"})]}),I&&e.jsx("div",{className:"confirm-modal-overlay",onClick:I.onCancel,children:e.jsxs("div",{className:"confirm-modal",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{children:I.title}),e.jsx("p",{children:I.message}),e.jsxs("div",{className:"confirm-modal-actions",children:[e.jsx("button",{className:"confirm-cancel-btn ripple-btn",onClick:s=>{P(s),I.onCancel()},children:"Keep Session"}),e.jsx("button",{className:"confirm-btn ripple-btn",onClick:s=>{P(s),I.onConfirm()},children:"Yes, Cancel"})]})]})}),e.jsxs("nav",{className:"block-bottom-nav",children:[e.jsxs("button",{className:"block-nav-tab active",children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),e.jsx("span",{children:"Home"})]}),e.jsxs("button",{className:"block-nav-tab",onClick:()=>w("/client/forms"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),e.jsx("span",{children:"Forms"})]}),e.jsxs("button",{className:"block-nav-tab",onClick:()=>w("/client/tools"),children:[e.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),e.jsx("span",{children:"Tools"})]}),e.jsxs("button",{className:"block-nav-tab",onClick:()=>w("/client/personal-bests"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M12 20V10"}),e.jsx("path",{d:"M18 20V4"}),e.jsx("path",{d:"M6 20v-4"})]}),e.jsx("span",{children:"PBs"})]}),c?.circuitAccess&&e.jsxs("button",{className:"block-nav-tab",onClick:()=>w("/client/circuit"),children:[e.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 6v6l4 2"})]}),e.jsx("span",{children:"Circuit"})]})]})]})}export{$s as default};
