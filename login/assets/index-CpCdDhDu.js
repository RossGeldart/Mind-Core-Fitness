(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function FE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Mp={exports:{}},Xu={};var S1;function qE(){if(S1)return Xu;S1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,c){var u=null;if(c!==void 0&&(u=""+c),a.key!==void 0&&(u=""+a.key),"key"in a){c={};for(var f in a)f!=="key"&&(c[f]=a[f])}else c=a;return a=c.ref,{$$typeof:s,type:i,key:u,ref:a!==void 0?a:null,props:c}}return Xu.Fragment=e,Xu.jsx=t,Xu.jsxs=t,Xu}var T1;function HE(){return T1||(T1=1,Mp.exports=qE()),Mp.exports}var l=HE(),Op={exports:{}},Et={};var C1;function $E(){if(C1)return Et;C1=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),A=Symbol.iterator;function B(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,$={};function J(M,se,ie){this.props=M,this.context=se,this.refs=$,this.updater=ie||L}J.prototype.isReactComponent={},J.prototype.setState=function(M,se){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,se,"setState")},J.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Y(){}Y.prototype=J.prototype;function ce(M,se,ie){this.props=M,this.context=se,this.refs=$,this.updater=ie||L}var X=ce.prototype=new Y;X.constructor=ce,F(X,J.prototype),X.isPureReactComponent=!0;var pe=Array.isArray;function xe(){}var q={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function H(M,se,ie){var he=ie.ref;return{$$typeof:s,type:M,key:se,ref:he!==void 0?he:null,props:ie}}function te(M,se){return H(M.type,se,M.props)}function W(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function ee(M){var se={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ie){return se[ie]})}var O=/\/+/g;function Re(M,se){return typeof M=="object"&&M!==null&&M.key!=null?ee(""+M.key):se.toString(36)}function qe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(xe,xe):(M.status="pending",M.then(function(se){M.status==="pending"&&(M.status="fulfilled",M.value=se)},function(se){M.status==="pending"&&(M.status="rejected",M.reason=se)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function ne(M,se,ie,he,Q){var de=typeof M;(de==="undefined"||de==="boolean")&&(M=null);var fe=!1;if(M===null)fe=!0;else switch(de){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(M.$$typeof){case s:case e:fe=!0;break;case S:return fe=M._init,ne(fe(M._payload),se,ie,he,Q)}}if(fe)return Q=Q(M),fe=he===""?"."+Re(M,0):he,pe(Q)?(ie="",fe!=null&&(ie=fe.replace(O,"$&/")+"/"),ne(Q,se,ie,"",function(nt){return nt})):Q!=null&&(W(Q)&&(Q=te(Q,ie+(Q.key==null||M&&M.key===Q.key?"":(""+Q.key).replace(O,"$&/")+"/")+fe)),se.push(Q)),1;fe=0;var Oe=he===""?".":he+":";if(pe(M))for(var He=0;He<M.length;He++)he=M[He],de=Oe+Re(he,He),fe+=ne(he,se,ie,de,Q);else if(He=B(M),typeof He=="function")for(M=He.call(M),He=0;!(he=M.next()).done;)he=he.value,de=Oe+Re(he,He++),fe+=ne(he,se,ie,de,Q);else if(de==="object"){if(typeof M.then=="function")return ne(qe(M),se,ie,he,Q);throw se=String(M),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return fe}function Ee(M,se,ie){if(M==null)return M;var he=[],Q=0;return ne(M,he,"","",function(de){return se.call(ie,de,Q++)}),he}function Le(M){if(M._status===-1){var se=M._result;se=se(),se.then(function(ie){(M._status===0||M._status===-1)&&(M._status=1,M._result=ie)},function(ie){(M._status===0||M._status===-1)&&(M._status=2,M._result=ie)}),M._status===-1&&(M._status=0,M._result=se)}if(M._status===1)return M._result.default;throw M._result}var Ae=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Ge={map:Ee,forEach:function(M,se,ie){Ee(M,function(){se.apply(this,arguments)},ie)},count:function(M){var se=0;return Ee(M,function(){se++}),se},toArray:function(M){return Ee(M,function(se){return se})||[]},only:function(M){if(!W(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Et.Activity=C,Et.Children=Ge,Et.Component=J,Et.Fragment=t,Et.Profiler=a,Et.PureComponent=ce,Et.StrictMode=i,Et.Suspense=p,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,Et.__COMPILER_RUNTIME={__proto__:null,c:function(M){return q.H.useMemoCache(M)}},Et.cache=function(M){return function(){return M.apply(null,arguments)}},Et.cacheSignal=function(){return null},Et.cloneElement=function(M,se,ie){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var he=F({},M.props),Q=M.key;if(se!=null)for(de in se.key!==void 0&&(Q=""+se.key),se)!V.call(se,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&se.ref===void 0||(he[de]=se[de]);var de=arguments.length-2;if(de===1)he.children=ie;else if(1<de){for(var fe=Array(de),Oe=0;Oe<de;Oe++)fe[Oe]=arguments[Oe+2];he.children=fe}return H(M.type,Q,he)},Et.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Et.createElement=function(M,se,ie){var he,Q={},de=null;if(se!=null)for(he in se.key!==void 0&&(de=""+se.key),se)V.call(se,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Q[he]=se[he]);var fe=arguments.length-2;if(fe===1)Q.children=ie;else if(1<fe){for(var Oe=Array(fe),He=0;He<fe;He++)Oe[He]=arguments[He+2];Q.children=Oe}if(M&&M.defaultProps)for(he in fe=M.defaultProps,fe)Q[he]===void 0&&(Q[he]=fe[he]);return H(M,de,Q)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(M){return{$$typeof:f,render:M}},Et.isValidElement=W,Et.lazy=function(M){return{$$typeof:S,_payload:{_status:-1,_result:M},_init:Le}},Et.memo=function(M,se){return{$$typeof:x,type:M,compare:se===void 0?null:se}},Et.startTransition=function(M){var se=q.T,ie={};q.T=ie;try{var he=M(),Q=q.S;Q!==null&&Q(ie,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(xe,Ae)}catch(de){Ae(de)}finally{se!==null&&ie.types!==null&&(se.types=ie.types),q.T=se}},Et.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},Et.use=function(M){return q.H.use(M)},Et.useActionState=function(M,se,ie){return q.H.useActionState(M,se,ie)},Et.useCallback=function(M,se){return q.H.useCallback(M,se)},Et.useContext=function(M){return q.H.useContext(M)},Et.useDebugValue=function(){},Et.useDeferredValue=function(M,se){return q.H.useDeferredValue(M,se)},Et.useEffect=function(M,se){return q.H.useEffect(M,se)},Et.useEffectEvent=function(M){return q.H.useEffectEvent(M)},Et.useId=function(){return q.H.useId()},Et.useImperativeHandle=function(M,se,ie){return q.H.useImperativeHandle(M,se,ie)},Et.useInsertionEffect=function(M,se){return q.H.useInsertionEffect(M,se)},Et.useLayoutEffect=function(M,se){return q.H.useLayoutEffect(M,se)},Et.useMemo=function(M,se){return q.H.useMemo(M,se)},Et.useOptimistic=function(M,se){return q.H.useOptimistic(M,se)},Et.useReducer=function(M,se,ie){return q.H.useReducer(M,se,ie)},Et.useRef=function(M){return q.H.useRef(M)},Et.useState=function(M){return q.H.useState(M)},Et.useSyncExternalStore=function(M,se,ie){return q.H.useSyncExternalStore(M,se,ie)},Et.useTransition=function(){return q.H.useTransition()},Et.version="19.2.4",Et}var N1;function zg(){return N1||(N1=1,Op.exports=$E()),Op.exports}var z=zg(),Lp={exports:{}},Ju={},Pp={exports:{}},Vp={};var A1;function GE(){return A1||(A1=1,(function(s){function e(ne,Ee){var Le=ne.length;ne.push(Ee);e:for(;0<Le;){var Ae=Le-1>>>1,Ge=ne[Ae];if(0<a(Ge,Ee))ne[Ae]=Ee,ne[Le]=Ge,Le=Ae;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var Ee=ne[0],Le=ne.pop();if(Le!==Ee){ne[0]=Le;e:for(var Ae=0,Ge=ne.length,M=Ge>>>1;Ae<M;){var se=2*(Ae+1)-1,ie=ne[se],he=se+1,Q=ne[he];if(0>a(ie,Le))he<Ge&&0>a(Q,ie)?(ne[Ae]=Q,ne[he]=Le,Ae=he):(ne[Ae]=ie,ne[se]=Le,Ae=se);else if(he<Ge&&0>a(Q,Le))ne[Ae]=Q,ne[he]=Le,Ae=he;else break e}}return Ee}function a(ne,Ee){var Le=ne.sortIndex-Ee.sortIndex;return Le!==0?Le:ne.id-Ee.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();s.unstable_now=function(){return u.now()-f}}var p=[],x=[],S=1,C=null,A=3,B=!1,L=!1,F=!1,$=!1,J=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function X(ne){for(var Ee=t(x);Ee!==null;){if(Ee.callback===null)i(x);else if(Ee.startTime<=ne)i(x),Ee.sortIndex=Ee.expirationTime,e(p,Ee);else break;Ee=t(x)}}function pe(ne){if(F=!1,X(ne),!L)if(t(p)!==null)L=!0,xe||(xe=!0,ee());else{var Ee=t(x);Ee!==null&&qe(pe,Ee.startTime-ne)}}var xe=!1,q=-1,V=5,H=-1;function te(){return $?!0:!(s.unstable_now()-H<V)}function W(){if($=!1,xe){var ne=s.unstable_now();H=ne;var Ee=!0;try{e:{L=!1,F&&(F=!1,Y(q),q=-1),B=!0;var Le=A;try{t:{for(X(ne),C=t(p);C!==null&&!(C.expirationTime>ne&&te());){var Ae=C.callback;if(typeof Ae=="function"){C.callback=null,A=C.priorityLevel;var Ge=Ae(C.expirationTime<=ne);if(ne=s.unstable_now(),typeof Ge=="function"){C.callback=Ge,X(ne),Ee=!0;break t}C===t(p)&&i(p),X(ne)}else i(p);C=t(p)}if(C!==null)Ee=!0;else{var M=t(x);M!==null&&qe(pe,M.startTime-ne),Ee=!1}}break e}finally{C=null,A=Le,B=!1}Ee=void 0}}finally{Ee?ee():xe=!1}}}var ee;if(typeof ce=="function")ee=function(){ce(W)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Re=O.port2;O.port1.onmessage=W,ee=function(){Re.postMessage(null)}}else ee=function(){J(W,0)};function qe(ne,Ee){q=J(function(){ne(s.unstable_now())},Ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ne){ne.callback=null},s.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<ne?Math.floor(1e3/ne):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(ne){switch(A){case 1:case 2:case 3:var Ee=3;break;default:Ee=A}var Le=A;A=Ee;try{return ne()}finally{A=Le}},s.unstable_requestPaint=function(){$=!0},s.unstable_runWithPriority=function(ne,Ee){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var Le=A;A=ne;try{return Ee()}finally{A=Le}},s.unstable_scheduleCallback=function(ne,Ee,Le){var Ae=s.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?Ae+Le:Ae):Le=Ae,ne){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=Le+Ge,ne={id:S++,callback:Ee,priorityLevel:ne,startTime:Le,expirationTime:Ge,sortIndex:-1},Le>Ae?(ne.sortIndex=Le,e(x,ne),t(p)===null&&ne===t(x)&&(F?(Y(q),q=-1):F=!0,qe(pe,Le-Ae))):(ne.sortIndex=Ge,e(p,ne),L||B||(L=!0,xe||(xe=!0,ee()))),ne},s.unstable_shouldYield=te,s.unstable_wrapCallback=function(ne){var Ee=A;return function(){var Le=A;A=Ee;try{return ne.apply(this,arguments)}finally{A=Le}}}})(Vp)),Vp}var j1;function WE(){return j1||(j1=1,Pp.exports=GE()),Pp.exports}var Up={exports:{}},Fr={};var R1;function YE(){if(R1)return Fr;R1=1;var s=zg();function e(p){var x="https://react.dev/errors/"+p;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)x+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(p,x,S){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:C==null?null:""+C,children:p,containerInfo:x,implementation:S}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,x){if(p==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Fr.createPortal=function(p,x){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return c(p,x,null,S)},Fr.flushSync=function(p){var x=u.T,S=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=x,i.p=S,i.d.f()}},Fr.preconnect=function(p,x){typeof p=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(p,x))},Fr.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Fr.preinit=function(p,x){if(typeof p=="string"&&x&&typeof x.as=="string"){var S=x.as,C=f(S,x.crossOrigin),A=typeof x.integrity=="string"?x.integrity:void 0,B=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;S==="style"?i.d.S(p,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:C,integrity:A,fetchPriority:B}):S==="script"&&i.d.X(p,{crossOrigin:C,integrity:A,fetchPriority:B,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Fr.preinitModule=function(p,x){if(typeof p=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var S=f(x.as,x.crossOrigin);i.d.M(p,{crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(p)},Fr.preload=function(p,x){if(typeof p=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var S=x.as,C=f(S,x.crossOrigin);i.d.L(p,S,{crossOrigin:C,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Fr.preloadModule=function(p,x){if(typeof p=="string")if(x){var S=f(x.as,x.crossOrigin);i.d.m(p,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:S,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(p)},Fr.requestFormReset=function(p){i.d.r(p)},Fr.unstable_batchedUpdates=function(p,x){return p(x)},Fr.useFormState=function(p,x,S){return u.H.useFormState(p,x,S)},Fr.useFormStatus=function(){return u.H.useHostTransitionStatus()},Fr.version="19.2.4",Fr}var k1;function QE(){if(k1)return Up.exports;k1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Up.exports=YE(),Up.exports}var D1;function KE(){if(D1)return Ju;D1=1;var s=WE(),e=zg(),t=QE();function i(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var r=n,o=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(o=r.return),n=r.return;while(n)}return r.tag===3?o:null}function u(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function f(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function p(n){if(c(n)!==n)throw Error(i(188))}function x(n){var r=n.alternate;if(!r){if(r=c(n),r===null)throw Error(i(188));return r!==n?null:n}for(var o=n,h=r;;){var y=o.return;if(y===null)break;var w=y.alternate;if(w===null){if(h=y.return,h!==null){o=h;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===o)return p(y),n;if(w===h)return p(y),r;w=w.sibling}throw Error(i(188))}if(o.return!==h.return)o=y,h=w;else{for(var j=!1,P=y.child;P;){if(P===o){j=!0,o=y,h=w;break}if(P===h){j=!0,h=y,o=w;break}P=P.sibling}if(!j){for(P=w.child;P;){if(P===o){j=!0,o=w,h=y;break}if(P===h){j=!0,h=w,o=y;break}P=P.sibling}if(!j)throw Error(i(189))}}if(o.alternate!==h)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:r}function S(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=S(n),r!==null)return r;n=n.sibling}return null}var C=Object.assign,A=Symbol.for("react.element"),B=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),te=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ee(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var O=Symbol.for("react.client.reference");function Re(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===O?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case J:return"Profiler";case $:return"StrictMode";case pe:return"Suspense";case xe:return"SuspenseList";case H:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case L:return"Portal";case ce:return n.displayName||"Context";case Y:return(n._context.displayName||"Context")+".Consumer";case X:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case q:return r=n.displayName||null,r!==null?r:Re(n.type)||"Memo";case V:r=n._payload,n=n._init;try{return Re(n(r))}catch{}}return null}var qe=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le={pending:!1,data:null,method:null,action:null},Ae=[],Ge=-1;function M(n){return{current:n}}function se(n){0>Ge||(n.current=Ae[Ge],Ae[Ge]=null,Ge--)}function ie(n,r){Ge++,Ae[Ge]=n.current,n.current=r}var he=M(null),Q=M(null),de=M(null),fe=M(null);function Oe(n,r){switch(ie(de,r),ie(Q,n),ie(he,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?W0(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=W0(r),n=Y0(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}se(he),ie(he,n)}function He(){se(he),se(Q),se(de)}function nt(n){n.memoizedState!==null&&ie(fe,n);var r=he.current,o=Y0(r,n.type);r!==o&&(ie(Q,n),ie(he,o))}function Ve(n){Q.current===n&&(se(he),se(Q)),fe.current===n&&(se(fe),Wu._currentValue=Le)}var Mt,Zt;function jt(n){if(Mt===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Mt=r&&r[1]||"",Zt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mt+n+Zt}var Yt=!1;function xt(n,r){if(!n||Yt)return"";Yt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(Ne){var Se=Ne}Reflect.construct(n,[],ze)}else{try{ze.call()}catch(Ne){Se=Ne}n.call(ze.prototype)}}else{try{throw Error()}catch(Ne){Se=Ne}(ze=n())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(Ne){if(Ne&&Se&&typeof Ne.stack=="string")return[Ne.stack,Se.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),j=w[0],P=w[1];if(j&&P){var re=j.split(`
`),_e=P.split(`
`);for(y=h=0;h<re.length&&!re[h].includes("DetermineComponentFrameRoot");)h++;for(;y<_e.length&&!_e[y].includes("DetermineComponentFrameRoot");)y++;if(h===re.length||y===_e.length)for(h=re.length-1,y=_e.length-1;1<=h&&0<=y&&re[h]!==_e[y];)y--;for(;1<=h&&0<=y;h--,y--)if(re[h]!==_e[y]){if(h!==1||y!==1)do if(h--,y--,0>y||re[h]!==_e[y]){var Me=`
`+re[h].replace(" at new "," at ");return n.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",n.displayName)),Me}while(1<=h&&0<=y);break}}}finally{Yt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?jt(o):""}function it(n,r){switch(n.tag){case 26:case 27:case 5:return jt(n.type);case 16:return jt("Lazy");case 13:return n.child!==r&&r!==null?jt("Suspense Fallback"):jt("Suspense");case 19:return jt("SuspenseList");case 0:case 15:return xt(n.type,!1);case 11:return xt(n.type.render,!1);case 1:return xt(n.type,!0);case 31:return jt("Activity");default:return""}}function Bt(n){try{var r="",o=null;do r+=it(n,o),o=n,n=n.return;while(n);return r}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ot=Object.prototype.hasOwnProperty,Lt=s.unstable_scheduleCallback,br=s.unstable_cancelCallback,Sn=s.unstable_shouldYield,Mr=s.unstable_requestPaint,Pt=s.unstable_now,Er=s.unstable_getCurrentPriorityLevel,Yr=s.unstable_ImmediatePriority,Qr=s.unstable_UserBlockingPriority,Or=s.unstable_NormalPriority,Ss=s.unstable_LowPriority,Lr=s.unstable_IdlePriority,kn=s.log,Jn=s.unstable_setDisableYieldValue,zn=null,mn=null;function Fn(n){if(typeof kn=="function"&&Jn(n),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(zn,n)}catch{}}var zt=Math.clz32?Math.clz32:rt,ve=Math.log,De=Math.LN2;function rt(n){return n>>>=0,n===0?32:31-(ve(n)/De|0)|0}var dt=256,yt=262144,kt=4194304;function cn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Dn(n,r,o){var h=n.pendingLanes;if(h===0)return 0;var y=0,w=n.suspendedLanes,j=n.pingedLanes;n=n.warmLanes;var P=h&134217727;return P!==0?(h=P&~w,h!==0?y=cn(h):(j&=P,j!==0?y=cn(j):o||(o=P&~n,o!==0&&(y=cn(o))))):(P=h&~w,P!==0?y=cn(P):j!==0?y=cn(j):o||(o=h&~n,o!==0&&(y=cn(o)))),y===0?0:r!==0&&r!==y&&(r&w)===0&&(w=y&-y,o=r&-r,w>=o||w===32&&(o&4194048)!==0)?r:y}function nn(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Zn(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kr(){var n=kt;return kt<<=1,(kt&62914560)===0&&(kt=4194304),n}function In(n){for(var r=[],o=0;31>o;o++)r.push(n);return r}function qn(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Sr(n,r,o,h,y,w){var j=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var P=n.entanglements,re=n.expirationTimes,_e=n.hiddenUpdates;for(o=j&~o;0<o;){var Me=31-zt(o),ze=1<<Me;P[Me]=0,re[Me]=-1;var Se=_e[Me];if(Se!==null)for(_e[Me]=null,Me=0;Me<Se.length;Me++){var Ne=Se[Me];Ne!==null&&(Ne.lane&=-536870913)}o&=~ze}h!==0&&ge(n,h,0),w!==0&&y===0&&n.tag!==0&&(n.suspendedLanes|=w&~(j&~r))}function ge(n,r,o){n.pendingLanes|=r,n.suspendedLanes&=~r;var h=31-zt(r);n.entangledLanes|=r,n.entanglements[h]=n.entanglements[h]|1073741824|o&261930}function Be(n,r){var o=n.entangledLanes|=r;for(n=n.entanglements;o;){var h=31-zt(o),y=1<<h;y&r|n[h]&r&&(n[h]|=r),o&=~y}}function $e(n,r){var o=r&-r;return o=(o&42)!==0?1:Z(o),(o&(n.suspendedLanes|r))!==0?0:o}function Z(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function je(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function We(){var n=Ee.p;return n!==0?n:(n=window.event,n===void 0?32:v1(n.type))}function Qe(n,r){var o=Ee.p;try{return Ee.p=n,r()}finally{Ee.p=o}}var ot=Math.random().toString(36).slice(2),lt="__reactFiber$"+ot,bt="__reactProps$"+ot,Mn="__reactContainer$"+ot,er="__reactEvents$"+ot,Tr="__reactListeners$"+ot,zs="__reactHandles$"+ot,hi="__reactResources$"+ot,os="__reactMarker$"+ot;function di(n){delete n[lt],delete n[bt],delete n[er],delete n[Tr],delete n[zs]}function vt(n){var r=n[lt];if(r)return r;for(var o=n.parentNode;o;){if(r=o[Mn]||o[lt]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(n=t1(n);n!==null;){if(o=n[lt])return o;n=t1(n)}return r}n=o,o=n.parentNode}return null}function Hn(n){if(n=n[lt]||n[Mn]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function tr(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(i(33))}function Fs(n){var r=n[hi];return r||(r=n[hi]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function On(n){n[os]=!0}var al=new Set,ol={};function qs(n,r){Hs(n,r),Hs(n+"Capture",r)}function Hs(n,r){for(ol[n]=r,n=0;n<r.length;n++)al.add(r[n])}var ll=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eo={},to={};function cl(n){return Ot.call(to,n)?!0:Ot.call(eo,n)?!1:ll.test(n)?to[n]=!0:(eo[n]=!0,!1)}function no(n,r,o){if(cl(r))if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+o)}}function Xr(n,r,o){if(o===null)n.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+o)}}function Ln(n,r,o,h){if(h===null)n.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(r,o,""+h)}}function Pn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Mi(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ul(n,r,o){var h=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,w=h.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return y.call(this)},set:function(j){o=""+j,w.call(this,j)}}),Object.defineProperty(n,r,{enumerable:h.enumerable}),{getValue:function(){return o},setValue:function(j){o=""+j},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function rn(n){if(!n._valueTracker){var r=Mi(n)?"checked":"value";n._valueTracker=ul(n,r,""+n[r])}}function ca(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var o=r.getValue(),h="";return n&&(h=Mi(n)?n.checked?"true":"false":n.value),n=h,n!==o?(r.setValue(n),!0):!1}function $s(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ua=/[\n"\\]/g;function Pr(n){return n.replace(ua,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ro(n,r,o,h,y,w,j,P){n.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.type=j:n.removeAttribute("type"),r!=null?j==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Pn(r)):n.value!==""+Pn(r)&&(n.value=""+Pn(r)):j!=="submit"&&j!=="reset"||n.removeAttribute("value"),r!=null?hl(n,j,Pn(r)):o!=null?hl(n,j,Pn(o)):h!=null&&n.removeAttribute("value"),y==null&&w!=null&&(n.defaultChecked=!!w),y!=null&&(n.checked=y&&typeof y!="function"&&typeof y!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?n.name=""+Pn(P):n.removeAttribute("name")}function Xl(n,r,o,h,y,w,j,P){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.type=w),r!=null||o!=null){if(!(w!=="submit"&&w!=="reset"||r!=null)){rn(n);return}o=o!=null?""+Pn(o):"",r=r!=null?""+Pn(r):o,P||r===n.value||(n.value=r),n.defaultValue=r}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,n.checked=P?n.checked:!!h,n.defaultChecked=!!h,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(n.name=j),rn(n)}function hl(n,r,o){r==="number"&&$s(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Oi(n,r,o,h){if(n=n.options,r){r={};for(var y=0;y<o.length;y++)r["$"+o[y]]=!0;for(o=0;o<n.length;o++)y=r.hasOwnProperty("$"+n[o].value),n[o].selected!==y&&(n[o].selected=y),y&&h&&(n[o].defaultSelected=!0)}else{for(o=""+Pn(o),r=null,y=0;y<n.length;y++){if(n[y].value===o){n[y].selected=!0,h&&(n[y].defaultSelected=!0);return}r!==null||n[y].disabled||(r=n[y])}r!==null&&(r.selected=!0)}}function Jl(n,r,o){if(r!=null&&(r=""+Pn(r),r!==n.value&&(n.value=r),o==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=o!=null?""+Pn(o):""}function Li(n,r,o,h){if(r==null){if(h!=null){if(o!=null)throw Error(i(92));if(qe(h)){if(1<h.length)throw Error(i(93));h=h[0]}o=h}o==null&&(o=""),r=o}o=Pn(r),n.defaultValue=o,h=n.textContent,h===o&&h!==""&&h!==null&&(n.value=h),rn(n)}function Vr(n,r){if(r){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=r;return}}n.textContent=r}var Zl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dl(n,r,o){var h=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":h?n.setProperty(r,o):typeof o!="number"||o===0||Zl.has(r)?r==="float"?n.cssFloat=o:n[r]=(""+o).trim():n[r]=o+"px"}function fl(n,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(n=n.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?n.setProperty(h,""):h==="float"?n.cssFloat="":n[h]="");for(var y in r)h=r[y],r.hasOwnProperty(y)&&o[y]!==h&&dl(n,y,h)}else for(var w in r)r.hasOwnProperty(w)&&dl(n,w,r[w])}function so(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ec=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(n){return Pi.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Ts(){}var ml=null;function ls(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Vi=null,Cr=null;function ha(n){var r=Hn(n);if(r&&(n=r.stateNode)){var o=n[bt]||null;e:switch(n=r.stateNode,r.type){case"input":if(ro(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pr(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var h=o[r];if(h!==n&&h.form===n.form){var y=h[bt]||null;if(!y)throw Error(i(90));ro(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<o.length;r++)h=o[r],h.form===n.form&&ca(h)}break e;case"textarea":Jl(n,o.value,o.defaultValue);break e;case"select":r=o.value,r!=null&&Oi(n,!!o.multiple,r,!1)}}}var Ui=!1;function Bi(n,r,o){if(Ui)return n(r,o);Ui=!0;try{var h=n(r);return h}finally{if(Ui=!1,(Vi!==null||Cr!==null)&&(Td(),Vi&&(r=Vi,n=Cr,Cr=Vi=null,ha(r),n)))for(r=0;r<n.length;r++)ha(n[r])}}function Cs(n,r){var o=n.stateNode;if(o===null)return null;var h=o[bt]||null;if(h===null)return null;o=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),da=!1;if(Ur)try{var on={};Object.defineProperty(on,"passive",{get:function(){da=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{da=!1}var Gs=null,pl=null,Ws=null;function ao(){if(Ws)return Ws;var n,r=pl,o=r.length,h,y="value"in Gs?Gs.value:Gs.textContent,w=y.length;for(n=0;n<o&&r[n]===y[n];n++);var j=o-n;for(h=1;h<=j&&r[o-h]===y[w-h];h++);return Ws=y.slice(n,1<h?1-h:void 0)}function zi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function fi(){return!0}function Jr(){return!1}function un(n){function r(o,h,y,w,j){this._reactName=o,this._targetInst=y,this.type=h,this.nativeEvent=w,this.target=j,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(o=n[P],this[P]=o?o(w):w[P]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?fi:Jr,this.isPropagationStopped=Jr,this}return C(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=fi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=fi)},persist:function(){},isPersistent:fi}),r}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nr=un(mi),Fi=C({},mi,{view:0,detail:0}),Cn=un(Fi),Ys,oo,pn,lo=C({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pn&&(pn&&n.type==="mousemove"?(Ys=n.screenX-pn.screenX,oo=n.screenY-pn.screenY):oo=Ys=0,pn=n),Ys)},movementY:function(n){return"movementY"in n?n.movementY:oo}}),Ct=un(lo),fa=C({},lo,{dataTransfer:0}),$n=un(fa),gl=C({},Fi,{relatedTarget:0}),qi=un(gl),Zr=C({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),tc=un(Zr),ma=C({},mi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),nc=un(ma),vl=C({},mi,{data:0}),Qs=un(vl),yl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},co={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uo(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=co[n])?!!r[n]:!1}function pi(){return uo}var _r=C({},Fi,{key:function(n){if(n.key){var r=yl[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=zi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(n){return n.type==="keypress"?zi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?zi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sc=un(_r),bl=C({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gi=un(bl),m=C({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),N=un(m),k=C({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),G=un(k),ye=C({},lo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Te=un(ye),Ye=C({},mi,{newState:0,oldState:0}),wt=un(Ye),jn=[9,13,27,32],Kt=Ur&&"CompositionEvent"in window,wn=null;Ur&&"documentMode"in document&&(wn=document.documentMode);var cs=Ur&&"TextEvent"in window&&!wn,Ks=Ur&&(!Kt||wn&&8<wn&&11>=wn),us=" ",Ns=!1;function vi(n,r){switch(n){case"keyup":return jn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ga=!1;function zh(n,r){switch(n){case"compositionend":return pa(r);case"keypress":return r.which!==32?null:(Ns=!0,us);case"textInput":return n=r.data,n===us&&Ns?null:n;default:return null}}function lu(n,r){if(ga)return n==="compositionend"||!Kt&&vi(n,r)?(n=ao(),Ws=pl=Gs=null,ga=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ks&&r.locale!=="ko"?null:r.data;default:return null}}var um={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fh(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!um[n.type]:r==="textarea"}function cu(n,r,o,h){Vi?Cr?Cr.push(h):Cr=[h]:Vi=h,r=Dd(r,"onChange"),0<r.length&&(o=new nr("onChange","change",null,o,h),n.push({event:o,listeners:r}))}var _l=null,ho=null;function qh(n){z0(n,0)}function As(n){var r=tr(n);if(ca(r))return n}function Hh(n,r){if(n==="change")return r}var uu=!1;if(Ur){var hu;if(Ur){var du="oninput"in document;if(!du){var fu=document.createElement("div");fu.setAttribute("oninput","return;"),du=typeof fu.oninput=="function"}hu=du}else hu=!1;uu=hu&&(!document.documentMode||9<document.documentMode)}function $h(){_l&&(_l.detachEvent("onpropertychange",mu),ho=_l=null)}function mu(n){if(n.propertyName==="value"&&As(ho)){var r=[];cu(r,ho,n,ls(n)),Bi(qh,r)}}function hm(n,r,o){n==="focusin"?($h(),_l=r,ho=o,_l.attachEvent("onpropertychange",mu)):n==="focusout"&&$h()}function Gh(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return As(ho)}function xl(n,r){if(n==="click")return As(r)}function Wh(n,r){if(n==="input"||n==="change")return As(r)}function dm(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Br=typeof Object.is=="function"?Object.is:dm;function fo(n,r){if(Br(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var o=Object.keys(n),h=Object.keys(r);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var y=o[h];if(!Ot.call(r,y)||!Br(n[y],r[y]))return!1}return!0}function ic(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function pu(n,r){var o=ic(n);n=0;for(var h;o;){if(o.nodeType===3){if(h=n+o.textContent.length,n<=r&&h>=r)return{node:o,offset:r-n};n=h}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=ic(o)}}function Yh(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Yh(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function gu(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=$s(n.document);r instanceof n.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)n=r.contentWindow;else break;r=$s(n.document)}return r}function ac(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var fm=Ur&&"documentMode"in document&&11>=document.documentMode,va=null,mo=null,Hi=null,po=!1;function Qh(n,r,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;po||va==null||va!==$s(h)||(h=va,"selectionStart"in h&&ac(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Hi&&fo(Hi,h)||(Hi=h,h=Dd(mo,"onSelect"),0<h.length&&(r=new nr("onSelect","select",null,r,o),n.push({event:r,listeners:h}),r.target=va)))}function $i(n,r){var o={};return o[n.toLowerCase()]=r.toLowerCase(),o["Webkit"+n]="webkit"+r,o["Moz"+n]="moz"+r,o}var Xs={animationend:$i("Animation","AnimationEnd"),animationiteration:$i("Animation","AnimationIteration"),animationstart:$i("Animation","AnimationStart"),transitionrun:$i("Transition","TransitionRun"),transitionstart:$i("Transition","TransitionStart"),transitioncancel:$i("Transition","TransitionCancel"),transitionend:$i("Transition","TransitionEnd")},wl={},Gi={};Ur&&(Gi=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function ya(n){if(wl[n])return wl[n];if(!Xs[n])return n;var r=Xs[n],o;for(o in r)if(r.hasOwnProperty(o)&&o in Gi)return wl[n]=r[o];return n}var Kh=ya("animationend"),Xh=ya("animationiteration"),Jh=ya("animationstart"),mm=ya("transitionrun"),pm=ya("transitionstart"),vu=ya("transitioncancel"),yu=ya("transitionend"),Zh=new Map,oc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");oc.push("scrollEnd");function dr(n,r){Zh.set(n,r),qs(r,[n])}var lc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},es=[],ba=0,bu=0;function El(){for(var n=ba,r=bu=ba=0;r<n;){var o=es[r];es[r++]=null;var h=es[r];es[r++]=null;var y=es[r];es[r++]=null;var w=es[r];if(es[r++]=null,h!==null&&y!==null){var j=h.pending;j===null?y.next=y:(y.next=j.next,j.next=y),h.pending=y}w!==0&&xu(o,y,w)}}function cc(n,r,o,h){es[ba++]=n,es[ba++]=r,es[ba++]=o,es[ba++]=h,bu|=h,n.lanes|=h,n=n.alternate,n!==null&&(n.lanes|=h)}function _u(n,r,o,h){return cc(n,r,o,h),uc(n)}function Wi(n,r){return cc(n,null,null,r),uc(n)}function xu(n,r,o){n.lanes|=o;var h=n.alternate;h!==null&&(h.lanes|=o);for(var y=!1,w=n.return;w!==null;)w.childLanes|=o,h=w.alternate,h!==null&&(h.childLanes|=o),w.tag===22&&(n=w.stateNode,n===null||n._visibility&1||(y=!0)),n=w,w=w.return;return n.tag===3?(w=n.stateNode,y&&r!==null&&(y=31-zt(o),n=w.hiddenUpdates,h=n[y],h===null?n[y]=[r]:h.push(r),r.lane=o|536870912),w):null}function uc(n){if(50<Bu)throw Bu=0,sp=null,Error(i(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var _a={};function hc(n,r,o,h){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(n,r,o,h){return new hc(n,r,o,h)}function go(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Js(n,r){var o=n.alternate;return o===null?(o=fr(n.tag,r,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=r,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,r=n.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ed(n,r){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,r=o.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Sl(n,r,o,h,y,w){var j=0;if(h=n,typeof n=="function")go(n)&&(j=1);else if(typeof n=="string")j=RE(n,o,he.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case H:return n=fr(31,o,r,y),n.elementType=H,n.lanes=w,n;case F:return Yi(o.children,y,w,r);case $:j=8,y|=24;break;case J:return n=fr(12,o,r,y|2),n.elementType=J,n.lanes=w,n;case pe:return n=fr(13,o,r,y),n.elementType=pe,n.lanes=w,n;case xe:return n=fr(19,o,r,y),n.elementType=xe,n.lanes=w,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ce:j=10;break e;case Y:j=9;break e;case X:j=11;break e;case q:j=14;break e;case V:j=16,h=null;break e}j=29,o=Error(i(130,n===null?"null":typeof n,"")),h=null}return r=fr(j,o,r,y),r.elementType=n,r.type=h,r.lanes=w,r}function Yi(n,r,o,h){return n=fr(7,n,h,r),n.lanes=o,n}function wu(n,r,o){return n=fr(6,n,null,r),n.lanes=o,n}function Tl(n){var r=fr(18,null,null,0);return r.stateNode=n,r}function dc(n,r,o){return r=fr(4,n.children!==null?n.children:[],n.key,r),r.lanes=o,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var td=new WeakMap;function hs(n,r){if(typeof n=="object"&&n!==null){var o=td.get(n);return o!==void 0?o:(r={value:n,source:r,stack:Bt(r)},td.set(n,r),r)}return{value:n,source:r,stack:Bt(r)}}var vo=[],yo=0,fc=null,Cl=0,ts=[],ds=0,Qi=null,js=1,Zs="";function fs(n,r){vo[yo++]=Cl,vo[yo++]=fc,fc=n,Cl=r}function Nr(n,r,o){ts[ds++]=js,ts[ds++]=Zs,ts[ds++]=Qi,Qi=n;var h=js;n=Zs;var y=32-zt(h)-1;h&=~(1<<y),o+=1;var w=32-zt(r)+y;if(30<w){var j=y-y%5;w=(h&(1<<j)-1).toString(32),h>>=j,y-=j,js=1<<32-zt(r)+y|o<<y|h,Zs=w+n}else js=1<<w|o<<y|h,Zs=n}function Eu(n){n.return!==null&&(fs(n,1),Nr(n,1,0))}function yi(n){for(;n===fc;)fc=vo[--yo],vo[yo]=null,Cl=vo[--yo],vo[yo]=null;for(;n===Qi;)Qi=ts[--ds],ts[ds]=null,Zs=ts[--ds],ts[ds]=null,js=ts[--ds],ts[ds]=null}function ei(n,r){ts[ds++]=js,ts[ds++]=Zs,ts[ds++]=Qi,js=r.id,Zs=r.overflow,Qi=n}var Gn=null,Ft=null,Dt=!1,ns=null,sn=!1,ti=Error(i(519));function mr(n){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rs(hs(r,n)),ti}function pr(n){var r=n.stateNode,o=n.type,h=n.memoizedProps;switch(r[lt]=n,r[bt]=h,o){case"dialog":Ut("cancel",r),Ut("close",r);break;case"iframe":case"object":case"embed":Ut("load",r);break;case"video":case"audio":for(o=0;o<Fu.length;o++)Ut(Fu[o],r);break;case"source":Ut("error",r);break;case"img":case"image":case"link":Ut("error",r),Ut("load",r);break;case"details":Ut("toggle",r);break;case"input":Ut("invalid",r),Xl(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":Ut("invalid",r);break;case"textarea":Ut("invalid",r),Li(r,h.value,h.defaultValue,h.children)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||h.suppressHydrationWarning===!0||$0(r.textContent,o)?(h.popover!=null&&(Ut("beforetoggle",r),Ut("toggle",r)),h.onScroll!=null&&Ut("scroll",r),h.onScrollEnd!=null&&Ut("scrollend",r),h.onClick!=null&&(r.onclick=Ts),r=!0):r=!1,r||mr(n,!0)}function bo(n){for(Gn=n.return;Gn;)switch(Gn.tag){case 5:case 31:case 13:sn=!1;return;case 27:case 3:sn=!0;return;default:Gn=Gn.return}}function xa(n){if(n!==Gn)return!1;if(!Dt)return bo(n),Dt=!0,!1;var r=n.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||bp(n.type,n.memoizedProps)),o=!o),o&&Ft&&mr(n),bo(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ft=e1(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ft=e1(n)}else r===27?(r=Ft,Do(n.type)?(n=Sp,Sp=null,Ft=n):Ft=r):Ft=Gn?ii(n.stateNode.nextSibling):null;return!0}function wa(){Ft=Gn=null,Dt=!1}function Ki(){var n=ns;return n!==null&&(bs===null?bs=n:bs.push.apply(bs,n),ns=null),n}function Rs(n){ns===null?ns=[n]:ns.push(n)}var Su=M(null),Ea=null,bi=null;function Xi(n,r,o){ie(Su,r._currentValue),r._currentValue=o}function _i(n){n._currentValue=Su.current,se(Su)}function Tu(n,r,o){for(;n!==null;){var h=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),n===o)break;n=n.return}}function Cu(n,r,o,h){var y=n.child;for(y!==null&&(y.return=n);y!==null;){var w=y.dependencies;if(w!==null){var j=y.child;w=w.firstContext;e:for(;w!==null;){var P=w;w=y;for(var re=0;re<r.length;re++)if(P.context===r[re]){w.lanes|=o,P=w.alternate,P!==null&&(P.lanes|=o),Tu(w.return,o,n),h||(j=null);break e}w=P.next}}else if(y.tag===18){if(j=y.return,j===null)throw Error(i(341));j.lanes|=o,w=j.alternate,w!==null&&(w.lanes|=o),Tu(j,o,n),j=null}else j=y.child;if(j!==null)j.return=y;else for(j=y;j!==null;){if(j===n){j=null;break}if(y=j.sibling,y!==null){y.return=j.return,j=y;break}j=j.return}y=j}}function _o(n,r,o,h){n=null;for(var y=r,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var j=y.alternate;if(j===null)throw Error(i(387));if(j=j.memoizedProps,j!==null){var P=y.type;Br(y.pendingProps.value,j.value)||(n!==null?n.push(P):n=[P])}}else if(y===fe.current){if(j=y.alternate,j===null)throw Error(i(387));j.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(n!==null?n.push(Wu):n=[Wu])}y=y.return}n!==null&&Cu(r,n,o,h),r.flags|=262144}function Nl(n){for(n=n.firstContext;n!==null;){if(!Br(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Sa(n){Ea=n,bi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function rr(n){return nd(Ea,n)}function Al(n,r){return Ea===null&&Sa(n),nd(n,r)}function nd(n,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},bi===null){if(n===null)throw Error(i(308));bi=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else bi=bi.next=r;return o}var rd=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(o,h){n.push(h)}};this.abort=function(){r.aborted=!0,n.forEach(function(o){return o()})}},mc=s.unstable_scheduleCallback,ni=s.unstable_NormalPriority,Vn={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nu(){return{controller:new rd,data:new Map,refCount:0}}function jl(n){n.refCount--,n.refCount===0&&mc(ni,function(){n.controller.abort()})}var xo=null,pc=0,wo=0,Ta=null;function Ji(n,r){if(xo===null){var o=xo=[];pc=0,wo=up(),Ta={status:"pending",value:void 0,then:function(h){o.push(h)}}}return pc++,r.then(Eo,Eo),r}function Eo(){if(--pc===0&&xo!==null){Ta!==null&&(Ta.status="fulfilled");var n=xo;xo=null,wo=0,Ta=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function sd(n,r){var o=[],h={status:"pending",value:null,reason:null,then:function(y){o.push(y)}};return n.then(function(){h.status="fulfilled",h.value=r;for(var y=0;y<o.length;y++)(0,o[y])(r)},function(y){for(h.status="rejected",h.reason=y,y=0;y<o.length;y++)(0,o[y])(void 0)}),h}var g=ne.S;ne.S=function(n,r){p0=Pt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ji(n,r),g!==null&&g(n,r)};var b=M(null);function d(){var n=b.current;return n!==null?n:_n.pooledCache}function v(n,r){r===null?ie(b,b.current):ie(b,r.pool)}function _(){var n=d();return n===null?null:{parent:Vn._currentValue,pool:n}}var E=Error(i(460)),T=Error(i(474)),R=Error(i(542)),D={then:function(){}};function I(n){return n=n.status,n==="fulfilled"||n==="rejected"}function U(n,r,o){switch(o=n[o],o===void 0?n.push(r):o!==r&&(r.then(Ts,Ts),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ce(n),n;default:if(typeof r.status=="string")r.then(Ts,Ts);else{if(n=_n,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=r,n.status="pending",n.then(function(h){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=h}},function(h){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Ce(n),n}throw ae=r,E}}function K(n){try{var r=n._init;return r(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ae=o,E):o}}var ae=null;function ue(){if(ae===null)throw Error(i(459));var n=ae;return ae=null,n}function Ce(n){if(n===E||n===R)throw Error(i(483))}var oe=null,we=0;function ke(n){var r=we;return we+=1,oe===null&&(oe=[]),U(oe,n,r)}function Ie(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Ze(n,r){throw r.$$typeof===A?Error(i(525)):(n=Object.prototype.toString.call(r),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Ke(n){function r(me,le){if(n){var be=me.deletions;be===null?(me.deletions=[le],me.flags|=16):be.push(le)}}function o(me,le){if(!n)return null;for(;le!==null;)r(me,le),le=le.sibling;return null}function h(me){for(var le=new Map;me!==null;)me.key!==null?le.set(me.key,me):le.set(me.index,me),me=me.sibling;return le}function y(me,le){return me=Js(me,le),me.index=0,me.sibling=null,me}function w(me,le,be){return me.index=be,n?(be=me.alternate,be!==null?(be=be.index,be<le?(me.flags|=67108866,le):be):(me.flags|=67108866,le)):(me.flags|=1048576,le)}function j(me){return n&&me.alternate===null&&(me.flags|=67108866),me}function P(me,le,be,Pe){return le===null||le.tag!==6?(le=wu(be,me.mode,Pe),le.return=me,le):(le=y(le,be),le.return=me,le)}function re(me,le,be,Pe){var ut=be.type;return ut===F?Me(me,le,be.props.children,Pe,be.key):le!==null&&(le.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===V&&K(ut)===le.type)?(le=y(le,be.props),Ie(le,be),le.return=me,le):(le=Sl(be.type,be.key,be.props,null,me.mode,Pe),Ie(le,be),le.return=me,le)}function _e(me,le,be,Pe){return le===null||le.tag!==4||le.stateNode.containerInfo!==be.containerInfo||le.stateNode.implementation!==be.implementation?(le=dc(be,me.mode,Pe),le.return=me,le):(le=y(le,be.children||[]),le.return=me,le)}function Me(me,le,be,Pe,ut){return le===null||le.tag!==7?(le=Yi(be,me.mode,Pe,ut),le.return=me,le):(le=y(le,be),le.return=me,le)}function ze(me,le,be){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=wu(""+le,me.mode,be),le.return=me,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case B:return be=Sl(le.type,le.key,le.props,null,me.mode,be),Ie(be,le),be.return=me,be;case L:return le=dc(le,me.mode,be),le.return=me,le;case V:return le=K(le),ze(me,le,be)}if(qe(le)||ee(le))return le=Yi(le,me.mode,be,null),le.return=me,le;if(typeof le.then=="function")return ze(me,ke(le),be);if(le.$$typeof===ce)return ze(me,Al(me,le),be);Ze(me,le)}return null}function Se(me,le,be,Pe){var ut=le!==null?le.key:null;if(typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint")return ut!==null?null:P(me,le,""+be,Pe);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case B:return be.key===ut?re(me,le,be,Pe):null;case L:return be.key===ut?_e(me,le,be,Pe):null;case V:return be=K(be),Se(me,le,be,Pe)}if(qe(be)||ee(be))return ut!==null?null:Me(me,le,be,Pe,null);if(typeof be.then=="function")return Se(me,le,ke(be),Pe);if(be.$$typeof===ce)return Se(me,le,Al(me,be),Pe);Ze(me,be)}return null}function Ne(me,le,be,Pe,ut){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return me=me.get(be)||null,P(le,me,""+Pe,ut);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case B:return me=me.get(Pe.key===null?be:Pe.key)||null,re(le,me,Pe,ut);case L:return me=me.get(Pe.key===null?be:Pe.key)||null,_e(le,me,Pe,ut);case V:return Pe=K(Pe),Ne(me,le,be,Pe,ut)}if(qe(Pe)||ee(Pe))return me=me.get(be)||null,Me(le,me,Pe,ut,null);if(typeof Pe.then=="function")return Ne(me,le,be,ke(Pe),ut);if(Pe.$$typeof===ce)return Ne(me,le,be,Al(le,Pe),ut);Ze(le,Pe)}return null}function tt(me,le,be,Pe){for(var ut=null,en=null,st=le,Rt=le=0,Ht=null;st!==null&&Rt<be.length;Rt++){st.index>Rt?(Ht=st,st=null):Ht=st.sibling;var tn=Se(me,st,be[Rt],Pe);if(tn===null){st===null&&(st=Ht);break}n&&st&&tn.alternate===null&&r(me,st),le=w(tn,le,Rt),en===null?ut=tn:en.sibling=tn,en=tn,st=Ht}if(Rt===be.length)return o(me,st),Dt&&fs(me,Rt),ut;if(st===null){for(;Rt<be.length;Rt++)st=ze(me,be[Rt],Pe),st!==null&&(le=w(st,le,Rt),en===null?ut=st:en.sibling=st,en=st);return Dt&&fs(me,Rt),ut}for(st=h(st);Rt<be.length;Rt++)Ht=Ne(st,me,Rt,be[Rt],Pe),Ht!==null&&(n&&Ht.alternate!==null&&st.delete(Ht.key===null?Rt:Ht.key),le=w(Ht,le,Rt),en===null?ut=Ht:en.sibling=Ht,en=Ht);return n&&st.forEach(function(Po){return r(me,Po)}),Dt&&fs(me,Rt),ut}function mt(me,le,be,Pe){if(be==null)throw Error(i(151));for(var ut=null,en=null,st=le,Rt=le=0,Ht=null,tn=be.next();st!==null&&!tn.done;Rt++,tn=be.next()){st.index>Rt?(Ht=st,st=null):Ht=st.sibling;var Po=Se(me,st,tn.value,Pe);if(Po===null){st===null&&(st=Ht);break}n&&st&&Po.alternate===null&&r(me,st),le=w(Po,le,Rt),en===null?ut=Po:en.sibling=Po,en=Po,st=Ht}if(tn.done)return o(me,st),Dt&&fs(me,Rt),ut;if(st===null){for(;!tn.done;Rt++,tn=be.next())tn=ze(me,tn.value,Pe),tn!==null&&(le=w(tn,le,Rt),en===null?ut=tn:en.sibling=tn,en=tn);return Dt&&fs(me,Rt),ut}for(st=h(st);!tn.done;Rt++,tn=be.next())tn=Ne(st,me,Rt,tn.value,Pe),tn!==null&&(n&&tn.alternate!==null&&st.delete(tn.key===null?Rt:tn.key),le=w(tn,le,Rt),en===null?ut=tn:en.sibling=tn,en=tn);return n&&st.forEach(function(zE){return r(me,zE)}),Dt&&fs(me,Rt),ut}function bn(me,le,be,Pe){if(typeof be=="object"&&be!==null&&be.type===F&&be.key===null&&(be=be.props.children),typeof be=="object"&&be!==null){switch(be.$$typeof){case B:e:{for(var ut=be.key;le!==null;){if(le.key===ut){if(ut=be.type,ut===F){if(le.tag===7){o(me,le.sibling),Pe=y(le,be.props.children),Pe.return=me,me=Pe;break e}}else if(le.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===V&&K(ut)===le.type){o(me,le.sibling),Pe=y(le,be.props),Ie(Pe,be),Pe.return=me,me=Pe;break e}o(me,le);break}else r(me,le);le=le.sibling}be.type===F?(Pe=Yi(be.props.children,me.mode,Pe,be.key),Pe.return=me,me=Pe):(Pe=Sl(be.type,be.key,be.props,null,me.mode,Pe),Ie(Pe,be),Pe.return=me,me=Pe)}return j(me);case L:e:{for(ut=be.key;le!==null;){if(le.key===ut)if(le.tag===4&&le.stateNode.containerInfo===be.containerInfo&&le.stateNode.implementation===be.implementation){o(me,le.sibling),Pe=y(le,be.children||[]),Pe.return=me,me=Pe;break e}else{o(me,le);break}else r(me,le);le=le.sibling}Pe=dc(be,me.mode,Pe),Pe.return=me,me=Pe}return j(me);case V:return be=K(be),bn(me,le,be,Pe)}if(qe(be))return tt(me,le,be,Pe);if(ee(be)){if(ut=ee(be),typeof ut!="function")throw Error(i(150));return be=ut.call(be),mt(me,le,be,Pe)}if(typeof be.then=="function")return bn(me,le,ke(be),Pe);if(be.$$typeof===ce)return bn(me,le,Al(me,be),Pe);Ze(me,be)}return typeof be=="string"&&be!==""||typeof be=="number"||typeof be=="bigint"?(be=""+be,le!==null&&le.tag===6?(o(me,le.sibling),Pe=y(le,be),Pe.return=me,me=Pe):(o(me,le),Pe=wu(be,me.mode,Pe),Pe.return=me,me=Pe),j(me)):o(me,le)}return function(me,le,be,Pe){try{we=0;var ut=bn(me,le,be,Pe);return oe=null,ut}catch(st){if(st===E||st===R)throw st;var en=fr(29,st,null,me.mode);return en.lanes=Pe,en.return=me,en}}}var ct=Ke(!0),Nt=Ke(!1),ft=!1;function It(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zr(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function sr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function gn(n,r,o){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(an&2)!==0){var y=h.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),h.pending=r,r=uc(n),xu(n,null,o),r}return cc(n,h,r,o),uc(n)}function xi(n,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var h=r.lanes;h&=n.pendingLanes,o|=h,r.lanes=o,Be(n,o)}}function ks(n,r){var o=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var y=null,w=null;if(o=o.firstBaseUpdate,o!==null){do{var j={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};w===null?y=w=j:w=w.next=j,o=o.next}while(o!==null);w===null?y=w=r:w=w.next=r}else y=w=r;o={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=r:n.next=r,o.lastBaseUpdate=r}var ri=!1;function ms(){if(ri){var n=Ta;if(n!==null)throw n}}function rs(n,r,o,h){ri=!1;var y=n.updateQueue;ft=!1;var w=y.firstBaseUpdate,j=y.lastBaseUpdate,P=y.shared.pending;if(P!==null){y.shared.pending=null;var re=P,_e=re.next;re.next=null,j===null?w=_e:j.next=_e,j=re;var Me=n.alternate;Me!==null&&(Me=Me.updateQueue,P=Me.lastBaseUpdate,P!==j&&(P===null?Me.firstBaseUpdate=_e:P.next=_e,Me.lastBaseUpdate=re))}if(w!==null){var ze=y.baseState;j=0,Me=_e=re=null,P=w;do{var Se=P.lane&-536870913,Ne=Se!==P.lane;if(Ne?(qt&Se)===Se:(h&Se)===Se){Se!==0&&Se===wo&&(ri=!0),Me!==null&&(Me=Me.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var tt=n,mt=P;Se=r;var bn=o;switch(mt.tag){case 1:if(tt=mt.payload,typeof tt=="function"){ze=tt.call(bn,ze,Se);break e}ze=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=mt.payload,Se=typeof tt=="function"?tt.call(bn,ze,Se):tt,Se==null)break e;ze=C({},ze,Se);break e;case 2:ft=!0}}Se=P.callback,Se!==null&&(n.flags|=64,Ne&&(n.flags|=8192),Ne=y.callbacks,Ne===null?y.callbacks=[Se]:Ne.push(Se))}else Ne={lane:Se,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Me===null?(_e=Me=Ne,re=ze):Me=Me.next=Ne,j|=Se;if(P=P.next,P===null){if(P=y.shared.pending,P===null)break;Ne=P,P=Ne.next,Ne.next=null,y.lastBaseUpdate=Ne,y.shared.pending=null}}while(!0);Me===null&&(re=ze),y.baseState=re,y.firstBaseUpdate=_e,y.lastBaseUpdate=Me,w===null&&(y.shared.lanes=0),No|=j,n.lanes=j,n.memoizedState=ze}}function hn(n,r){if(typeof n!="function")throw Error(i(191,n));n.call(r)}function ps(n,r){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)hn(o[n],r)}var si=M(null),Ds=M(0);function Is(n,r){n=Ma,ie(Ds,n),ie(si,r),Ma=n|r.baseLanes}function Qt(){ie(Ds,Ma),ie(si,si.current)}function Wn(){Ma=Ds.current,se(si),se(Ds)}var ss=M(null),is=null;function wi(n){var r=n.alternate;ie(Yn,Yn.current&1),ie(ss,n),is===null&&(r===null||si.current!==null||r.memoizedState!==null)&&(is=n)}function gm(n){ie(Yn,Yn.current),ie(ss,n),is===null&&(is=n)}function qv(n){n.tag===22?(ie(Yn,Yn.current),ie(ss,n),is===null&&(is=n)):So()}function So(){ie(Yn,Yn.current),ie(ss,ss.current)}function Ms(n){se(ss),is===n&&(is=null),se(Yn)}var Yn=M(0);function id(n){for(var r=n;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||wp(o)||Ep(o)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ca=0,At=null,vn=null,ir=null,ad=!1,gc=!1,Rl=!1,od=0,Au=0,vc=null,kw=0;function Un(){throw Error(i(321))}function vm(n,r){if(r===null)return!1;for(var o=0;o<r.length&&o<n.length;o++)if(!Br(n[o],r[o]))return!1;return!0}function ym(n,r,o,h,y,w){return Ca=w,At=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ne.H=n===null||n.memoizedState===null?Cy:Im,Rl=!1,w=o(h,y),Rl=!1,gc&&(w=$v(r,o,h,y)),Hv(n),w}function Hv(n){ne.H=ku;var r=vn!==null&&vn.next!==null;if(Ca=0,ir=vn=At=null,ad=!1,Au=0,vc=null,r)throw Error(i(300));n===null||ar||(n=n.dependencies,n!==null&&Nl(n)&&(ar=!0))}function $v(n,r,o,h){At=n;var y=0;do{if(gc&&(vc=null),Au=0,gc=!1,25<=y)throw Error(i(301));if(y+=1,ir=vn=null,n.updateQueue!=null){var w=n.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}ne.H=Ny,w=r(o,h)}while(gc);return w}function Dw(){var n=ne.H,r=n.useState()[0];return r=typeof r.then=="function"?ju(r):r,n=n.useState()[0],(vn!==null?vn.memoizedState:null)!==n&&(At.flags|=1024),r}function bm(){var n=od!==0;return od=0,n}function _m(n,r,o){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~o}function xm(n){if(ad){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}ad=!1}Ca=0,ir=vn=At=null,gc=!1,Au=od=0,vc=null}function as(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?At.memoizedState=ir=n:ir=ir.next=n,ir}function Qn(){if(vn===null){var n=At.alternate;n=n!==null?n.memoizedState:null}else n=vn.next;var r=ir===null?At.memoizedState:ir.next;if(r!==null)ir=r,vn=n;else{if(n===null)throw At.alternate===null?Error(i(467)):Error(i(310));vn=n,n={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},ir===null?At.memoizedState=ir=n:ir=ir.next=n}return ir}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ju(n){var r=Au;return Au+=1,vc===null&&(vc=[]),n=U(vc,n,r),r=At,(ir===null?r.memoizedState:ir.next)===null&&(r=r.alternate,ne.H=r===null||r.memoizedState===null?Cy:Im),n}function cd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ju(n);if(n.$$typeof===ce)return rr(n)}throw Error(i(438,String(n)))}function wm(n){var r=null,o=At.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var h=At.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=ld(),At.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(n),h=0;h<n;h++)o[h]=te;return r.index++,o}function Na(n,r){return typeof r=="function"?r(n):r}function ud(n){var r=Qn();return Em(r,vn,n)}function Em(n,r,o){var h=n.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var y=n.baseQueue,w=h.pending;if(w!==null){if(y!==null){var j=y.next;y.next=w.next,w.next=j}r.baseQueue=y=w,h.pending=null}if(w=n.baseState,y===null)n.memoizedState=w;else{r=y.next;var P=j=null,re=null,_e=r,Me=!1;do{var ze=_e.lane&-536870913;if(ze!==_e.lane?(qt&ze)===ze:(Ca&ze)===ze){var Se=_e.revertLane;if(Se===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),ze===wo&&(Me=!0);else if((Ca&Se)===Se){_e=_e.next,Se===wo&&(Me=!0);continue}else ze={lane:0,revertLane:_e.revertLane,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},re===null?(P=re=ze,j=w):re=re.next=ze,At.lanes|=Se,No|=Se;ze=_e.action,Rl&&o(w,ze),w=_e.hasEagerState?_e.eagerState:o(w,ze)}else Se={lane:ze,revertLane:_e.revertLane,gesture:_e.gesture,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},re===null?(P=re=Se,j=w):re=re.next=Se,At.lanes|=ze,No|=ze;_e=_e.next}while(_e!==null&&_e!==r);if(re===null?j=w:re.next=P,!Br(w,n.memoizedState)&&(ar=!0,Me&&(o=Ta,o!==null)))throw o;n.memoizedState=w,n.baseState=j,n.baseQueue=re,h.lastRenderedState=w}return y===null&&(h.lanes=0),[n.memoizedState,h.dispatch]}function Sm(n){var r=Qn(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var h=o.dispatch,y=o.pending,w=r.memoizedState;if(y!==null){o.pending=null;var j=y=y.next;do w=n(w,j.action),j=j.next;while(j!==y);Br(w,r.memoizedState)||(ar=!0),r.memoizedState=w,r.baseQueue===null&&(r.baseState=w),o.lastRenderedState=w}return[w,h]}function Gv(n,r,o){var h=At,y=Qn(),w=Dt;if(w){if(o===void 0)throw Error(i(407));o=o()}else o=r();var j=!Br((vn||y).memoizedState,o);if(j&&(y.memoizedState=o,ar=!0),y=y.queue,Nm(Qv.bind(null,h,y,n),[n]),y.getSnapshot!==r||j||ir!==null&&ir.memoizedState.tag&1){if(h.flags|=2048,yc(9,{destroy:void 0},Yv.bind(null,h,y,o,r),null),_n===null)throw Error(i(349));w||(Ca&127)!==0||Wv(h,r,o)}return o}function Wv(n,r,o){n.flags|=16384,n={getSnapshot:r,value:o},r=At.updateQueue,r===null?(r=ld(),At.updateQueue=r,r.stores=[n]):(o=r.stores,o===null?r.stores=[n]:o.push(n))}function Yv(n,r,o,h){r.value=o,r.getSnapshot=h,Kv(r)&&Xv(n)}function Qv(n,r,o){return o(function(){Kv(r)&&Xv(n)})}function Kv(n){var r=n.getSnapshot;n=n.value;try{var o=r();return!Br(n,o)}catch{return!0}}function Xv(n){var r=Wi(n,2);r!==null&&_s(r,n,2)}function Tm(n){var r=as();if(typeof n=="function"){var o=n;if(n=o(),Rl){Fn(!0);try{o()}finally{Fn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:n},r}function Jv(n,r,o,h){return n.baseState=o,Em(n,vn,typeof h=="function"?h:Na)}function Iw(n,r,o,h,y){if(fd(n))throw Error(i(485));if(n=r.action,n!==null){var w={payload:y,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){w.listeners.push(j)}};ne.T!==null?o(!0):w.isTransition=!1,h(w),o=r.pending,o===null?(w.next=r.pending=w,Zv(r,w)):(w.next=o.next,r.pending=o.next=w)}}function Zv(n,r){var o=r.action,h=r.payload,y=n.state;if(r.isTransition){var w=ne.T,j={};ne.T=j;try{var P=o(y,h),re=ne.S;re!==null&&re(j,P),ey(n,r,P)}catch(_e){Cm(n,r,_e)}finally{w!==null&&j.types!==null&&(w.types=j.types),ne.T=w}}else try{w=o(y,h),ey(n,r,w)}catch(_e){Cm(n,r,_e)}}function ey(n,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){ty(n,r,h)},function(h){return Cm(n,r,h)}):ty(n,r,o)}function ty(n,r,o){r.status="fulfilled",r.value=o,ny(r),n.state=o,r=n.pending,r!==null&&(o=r.next,o===r?n.pending=null:(o=o.next,r.next=o,Zv(n,o)))}function Cm(n,r,o){var h=n.pending;if(n.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=o,ny(r),r=r.next;while(r!==h)}n.action=null}function ny(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function ry(n,r){return r}function sy(n,r){if(Dt){var o=_n.formState;if(o!==null){e:{var h=At;if(Dt){if(Ft){t:{for(var y=Ft,w=sn;y.nodeType!==8;){if(!w){y=null;break t}if(y=ii(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){Ft=ii(y.nextSibling),h=y.data==="F!";break e}}mr(h)}h=!1}h&&(r=o[0])}}return o=as(),o.memoizedState=o.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ry,lastRenderedState:r},o.queue=h,o=Ey.bind(null,At,h),h.dispatch=o,h=Tm(!1),w=Dm.bind(null,At,!1,h.queue),h=as(),y={state:r,dispatch:null,action:n,pending:null},h.queue=y,o=Iw.bind(null,At,y,w,o),y.dispatch=o,h.memoizedState=n,[r,o,!1]}function iy(n){var r=Qn();return ay(r,vn,n)}function ay(n,r,o){if(r=Em(n,r,ry)[0],n=ud(Na)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=ju(r)}catch(j){throw j===E?R:j}else h=r;r=Qn();var y=r.queue,w=y.dispatch;return o!==r.memoizedState&&(At.flags|=2048,yc(9,{destroy:void 0},Mw.bind(null,y,o),null)),[h,w,n]}function Mw(n,r){n.action=r}function oy(n){var r=Qn(),o=vn;if(o!==null)return ay(r,o,n);Qn(),r=r.memoizedState,o=Qn();var h=o.queue.dispatch;return o.memoizedState=n,[r,h,!1]}function yc(n,r,o,h){return n={tag:n,create:o,deps:h,inst:r,next:null},r=At.updateQueue,r===null&&(r=ld(),At.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=n.next=n:(h=o.next,o.next=n,n.next=h,r.lastEffect=n),n}function ly(){return Qn().memoizedState}function hd(n,r,o,h){var y=as();At.flags|=n,y.memoizedState=yc(1|r,{destroy:void 0},o,h===void 0?null:h)}function dd(n,r,o,h){var y=Qn();h=h===void 0?null:h;var w=y.memoizedState.inst;vn!==null&&h!==null&&vm(h,vn.memoizedState.deps)?y.memoizedState=yc(r,w,o,h):(At.flags|=n,y.memoizedState=yc(1|r,w,o,h))}function cy(n,r){hd(8390656,8,n,r)}function Nm(n,r){dd(2048,8,n,r)}function Ow(n){At.flags|=4;var r=At.updateQueue;if(r===null)r=ld(),At.updateQueue=r,r.events=[n];else{var o=r.events;o===null?r.events=[n]:o.push(n)}}function uy(n){var r=Qn().memoizedState;return Ow({ref:r,nextImpl:n}),function(){if((an&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function hy(n,r){return dd(4,2,n,r)}function dy(n,r){return dd(4,4,n,r)}function fy(n,r){if(typeof r=="function"){n=n();var o=r(n);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function my(n,r,o){o=o!=null?o.concat([n]):null,dd(4,4,fy.bind(null,r,n),o)}function Am(){}function py(n,r){var o=Qn();r=r===void 0?null:r;var h=o.memoizedState;return r!==null&&vm(r,h[1])?h[0]:(o.memoizedState=[n,r],n)}function gy(n,r){var o=Qn();r=r===void 0?null:r;var h=o.memoizedState;if(r!==null&&vm(r,h[1]))return h[0];if(h=n(),Rl){Fn(!0);try{n()}finally{Fn(!1)}}return o.memoizedState=[h,r],h}function jm(n,r,o){return o===void 0||(Ca&1073741824)!==0&&(qt&261930)===0?n.memoizedState=r:(n.memoizedState=o,n=v0(),At.lanes|=n,No|=n,o)}function vy(n,r,o,h){return Br(o,r)?o:si.current!==null?(n=jm(n,o,h),Br(n,r)||(ar=!0),n):(Ca&42)===0||(Ca&1073741824)!==0&&(qt&261930)===0?(ar=!0,n.memoizedState=o):(n=v0(),At.lanes|=n,No|=n,r)}function yy(n,r,o,h,y){var w=Ee.p;Ee.p=w!==0&&8>w?w:8;var j=ne.T,P={};ne.T=P,Dm(n,!1,r,o);try{var re=y(),_e=ne.S;if(_e!==null&&_e(P,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Me=sd(re,h);Ru(n,r,Me,Ps(n))}else Ru(n,r,h,Ps(n))}catch(ze){Ru(n,r,{then:function(){},status:"rejected",reason:ze},Ps())}finally{Ee.p=w,j!==null&&P.types!==null&&(j.types=P.types),ne.T=j}}function Lw(){}function Rm(n,r,o,h){if(n.tag!==5)throw Error(i(476));var y=by(n).queue;yy(n,y,r,Le,o===null?Lw:function(){return _y(n),o(h)})}function by(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:Le,baseState:Le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:Le},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:o},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function _y(n){var r=by(n);r.next===null&&(r=n.alternate.memoizedState),Ru(n,r.next.queue,{},Ps())}function km(){return rr(Wu)}function xy(){return Qn().memoizedState}function wy(){return Qn().memoizedState}function Pw(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var o=Ps();n=sr(o);var h=gn(r,n,o);h!==null&&(_s(h,r,o),xi(h,r,o)),r={cache:Nu()},n.payload=r;return}r=r.return}}function Vw(n,r,o){var h=Ps();o={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},fd(n)?Sy(r,o):(o=_u(n,r,o,h),o!==null&&(_s(o,n,h),Ty(o,r,h)))}function Ey(n,r,o){var h=Ps();Ru(n,r,o,h)}function Ru(n,r,o,h){var y={lane:h,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(fd(n))Sy(r,y);else{var w=n.alternate;if(n.lanes===0&&(w===null||w.lanes===0)&&(w=r.lastRenderedReducer,w!==null))try{var j=r.lastRenderedState,P=w(j,o);if(y.hasEagerState=!0,y.eagerState=P,Br(P,j))return cc(n,r,y,0),_n===null&&El(),!1}catch{}if(o=_u(n,r,y,h),o!==null)return _s(o,n,h),Ty(o,r,h),!0}return!1}function Dm(n,r,o,h){if(h={lane:2,revertLane:up(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},fd(n)){if(r)throw Error(i(479))}else r=_u(n,o,h,2),r!==null&&_s(r,n,2)}function fd(n){var r=n.alternate;return n===At||r!==null&&r===At}function Sy(n,r){gc=ad=!0;var o=n.pending;o===null?r.next=r:(r.next=o.next,o.next=r),n.pending=r}function Ty(n,r,o){if((o&4194048)!==0){var h=r.lanes;h&=n.pendingLanes,o|=h,r.lanes=o,Be(n,o)}}var ku={readContext:rr,use:cd,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useLayoutEffect:Un,useInsertionEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useSyncExternalStore:Un,useId:Un,useHostTransitionStatus:Un,useFormState:Un,useActionState:Un,useOptimistic:Un,useMemoCache:Un,useCacheRefresh:Un};ku.useEffectEvent=Un;var Cy={readContext:rr,use:cd,useCallback:function(n,r){return as().memoizedState=[n,r===void 0?null:r],n},useContext:rr,useEffect:cy,useImperativeHandle:function(n,r,o){o=o!=null?o.concat([n]):null,hd(4194308,4,fy.bind(null,r,n),o)},useLayoutEffect:function(n,r){return hd(4194308,4,n,r)},useInsertionEffect:function(n,r){hd(4,2,n,r)},useMemo:function(n,r){var o=as();r=r===void 0?null:r;var h=n();if(Rl){Fn(!0);try{n()}finally{Fn(!1)}}return o.memoizedState=[h,r],h},useReducer:function(n,r,o){var h=as();if(o!==void 0){var y=o(r);if(Rl){Fn(!0);try{o(r)}finally{Fn(!1)}}}else y=r;return h.memoizedState=h.baseState=y,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:y},h.queue=n,n=n.dispatch=Vw.bind(null,At,n),[h.memoizedState,n]},useRef:function(n){var r=as();return n={current:n},r.memoizedState=n},useState:function(n){n=Tm(n);var r=n.queue,o=Ey.bind(null,At,r);return r.dispatch=o,[n.memoizedState,o]},useDebugValue:Am,useDeferredValue:function(n,r){var o=as();return jm(o,n,r)},useTransition:function(){var n=Tm(!1);return n=yy.bind(null,At,n.queue,!0,!1),as().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,o){var h=At,y=as();if(Dt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),_n===null)throw Error(i(349));(qt&127)!==0||Wv(h,r,o)}y.memoizedState=o;var w={value:o,getSnapshot:r};return y.queue=w,cy(Qv.bind(null,h,w,n),[n]),h.flags|=2048,yc(9,{destroy:void 0},Yv.bind(null,h,w,o,r),null),o},useId:function(){var n=as(),r=_n.identifierPrefix;if(Dt){var o=Zs,h=js;o=(h&~(1<<32-zt(h)-1)).toString(32)+o,r="_"+r+"R_"+o,o=od++,0<o&&(r+="H"+o.toString(32)),r+="_"}else o=kw++,r="_"+r+"r_"+o.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:km,useFormState:sy,useActionState:sy,useOptimistic:function(n){var r=as();r.memoizedState=r.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Dm.bind(null,At,!0,o),o.dispatch=r,[n,r]},useMemoCache:wm,useCacheRefresh:function(){return as().memoizedState=Pw.bind(null,At)},useEffectEvent:function(n){var r=as(),o={impl:n};return r.memoizedState=o,function(){if((an&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Im={readContext:rr,use:cd,useCallback:py,useContext:rr,useEffect:Nm,useImperativeHandle:my,useInsertionEffect:hy,useLayoutEffect:dy,useMemo:gy,useReducer:ud,useRef:ly,useState:function(){return ud(Na)},useDebugValue:Am,useDeferredValue:function(n,r){var o=Qn();return vy(o,vn.memoizedState,n,r)},useTransition:function(){var n=ud(Na)[0],r=Qn().memoizedState;return[typeof n=="boolean"?n:ju(n),r]},useSyncExternalStore:Gv,useId:xy,useHostTransitionStatus:km,useFormState:iy,useActionState:iy,useOptimistic:function(n,r){var o=Qn();return Jv(o,vn,n,r)},useMemoCache:wm,useCacheRefresh:wy};Im.useEffectEvent=uy;var Ny={readContext:rr,use:cd,useCallback:py,useContext:rr,useEffect:Nm,useImperativeHandle:my,useInsertionEffect:hy,useLayoutEffect:dy,useMemo:gy,useReducer:Sm,useRef:ly,useState:function(){return Sm(Na)},useDebugValue:Am,useDeferredValue:function(n,r){var o=Qn();return vn===null?jm(o,n,r):vy(o,vn.memoizedState,n,r)},useTransition:function(){var n=Sm(Na)[0],r=Qn().memoizedState;return[typeof n=="boolean"?n:ju(n),r]},useSyncExternalStore:Gv,useId:xy,useHostTransitionStatus:km,useFormState:oy,useActionState:oy,useOptimistic:function(n,r){var o=Qn();return vn!==null?Jv(o,vn,n,r):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:wm,useCacheRefresh:wy};Ny.useEffectEvent=uy;function Mm(n,r,o,h){r=n.memoizedState,o=o(h,r),o=o==null?r:C({},r,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Om={enqueueSetState:function(n,r,o){n=n._reactInternals;var h=Ps(),y=sr(h);y.payload=r,o!=null&&(y.callback=o),r=gn(n,y,h),r!==null&&(_s(r,n,h),xi(r,n,h))},enqueueReplaceState:function(n,r,o){n=n._reactInternals;var h=Ps(),y=sr(h);y.tag=1,y.payload=r,o!=null&&(y.callback=o),r=gn(n,y,h),r!==null&&(_s(r,n,h),xi(r,n,h))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var o=Ps(),h=sr(o);h.tag=2,r!=null&&(h.callback=r),r=gn(n,h,o),r!==null&&(_s(r,n,o),xi(r,n,o))}};function Ay(n,r,o,h,y,w,j){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,w,j):r.prototype&&r.prototype.isPureReactComponent?!fo(o,h)||!fo(y,w):!0}function jy(n,r,o,h){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,h),r.state!==n&&Om.enqueueReplaceState(r,r.state,null)}function kl(n,r){var o=r;if("ref"in r){o={};for(var h in r)h!=="ref"&&(o[h]=r[h])}if(n=n.defaultProps){o===r&&(o=C({},o));for(var y in n)o[y]===void 0&&(o[y]=n[y])}return o}function Ry(n){lc(n)}function ky(n){console.error(n)}function Dy(n){lc(n)}function md(n,r){try{var o=n.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function Iy(n,r,o){try{var h=n.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Lm(n,r,o){return o=sr(o),o.tag=3,o.payload={element:null},o.callback=function(){md(n,r)},o}function My(n){return n=sr(n),n.tag=3,n}function Oy(n,r,o,h){var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var w=h.value;n.payload=function(){return y(w)},n.callback=function(){Iy(r,o,h)}}var j=o.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(n.callback=function(){Iy(r,o,h),typeof y!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var P=h.stack;this.componentDidCatch(h.value,{componentStack:P!==null?P:""})})}function Uw(n,r,o,h,y){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=o.alternate,r!==null&&_o(r,o,y,!0),o=ss.current,o!==null){switch(o.tag){case 31:case 13:return is===null?Cd():o.alternate===null&&Bn===0&&(Bn=3),o.flags&=-257,o.flags|=65536,o.lanes=y,h===D?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([h]):r.add(h),op(n,h,y)),!1;case 22:return o.flags|=65536,h===D?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([h]):o.add(h)),op(n,h,y)),!1}throw Error(i(435,o.tag))}return op(n,h,y),Cd(),!1}if(Dt)return r=ss.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,h!==ti&&(n=Error(i(422),{cause:h}),Rs(hs(n,o)))):(h!==ti&&(r=Error(i(423),{cause:h}),Rs(hs(r,o))),n=n.current.alternate,n.flags|=65536,y&=-y,n.lanes|=y,h=hs(h,o),y=Lm(n.stateNode,h,y),ks(n,y),Bn!==4&&(Bn=2)),!1;var w=Error(i(520),{cause:h});if(w=hs(w,o),Uu===null?Uu=[w]:Uu.push(w),Bn!==4&&(Bn=2),r===null)return!0;h=hs(h,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,n=y&-y,o.lanes|=n,n=Lm(o.stateNode,h,n),ks(o,n),!1;case 1:if(r=o.type,w=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ao===null||!Ao.has(w))))return o.flags|=65536,y&=-y,o.lanes|=y,y=My(y),Oy(y,n,o,h),ks(o,y),!1}o=o.return}while(o!==null);return!1}var Pm=Error(i(461)),ar=!1;function Ar(n,r,o,h){r.child=n===null?Nt(r,null,o,h):ct(r,n.child,o,h)}function Ly(n,r,o,h,y){o=o.render;var w=r.ref;if("ref"in h){var j={};for(var P in h)P!=="ref"&&(j[P]=h[P])}else j=h;return Sa(r),h=ym(n,r,o,j,w,y),P=bm(),n!==null&&!ar?(_m(n,r,y),Aa(n,r,y)):(Dt&&P&&Eu(r),r.flags|=1,Ar(n,r,h,y),r.child)}function Py(n,r,o,h,y){if(n===null){var w=o.type;return typeof w=="function"&&!go(w)&&w.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=w,Vy(n,r,w,h,y)):(n=Sl(o.type,null,h,r,r.mode,y),n.ref=r.ref,n.return=r,r.child=n)}if(w=n.child,!$m(n,y)){var j=w.memoizedProps;if(o=o.compare,o=o!==null?o:fo,o(j,h)&&n.ref===r.ref)return Aa(n,r,y)}return r.flags|=1,n=Js(w,h),n.ref=r.ref,n.return=r,r.child=n}function Vy(n,r,o,h,y){if(n!==null){var w=n.memoizedProps;if(fo(w,h)&&n.ref===r.ref)if(ar=!1,r.pendingProps=h=w,$m(n,y))(n.flags&131072)!==0&&(ar=!0);else return r.lanes=n.lanes,Aa(n,r,y)}return Vm(n,r,o,h,y)}function Uy(n,r,o,h){var y=h.children,w=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((r.flags&128)!==0){if(w=w!==null?w.baseLanes|o:o,n!==null){for(h=r.child=n.child,y=0;h!==null;)y=y|h.lanes|h.childLanes,h=h.sibling;h=y&~w}else h=0,r.child=null;return By(n,r,w,o,h)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&v(r,w!==null?w.cachePool:null),w!==null?Is(r,w):Qt(),qv(r);else return h=r.lanes=536870912,By(n,r,w!==null?w.baseLanes|o:o,o,h)}else w!==null?(v(r,w.cachePool),Is(r,w),So(),r.memoizedState=null):(n!==null&&v(r,null),Qt(),So());return Ar(n,r,y,o),r.child}function Du(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function By(n,r,o,h,y){var w=d();return w=w===null?null:{parent:Vn._currentValue,pool:w},r.memoizedState={baseLanes:o,cachePool:w},n!==null&&v(r,null),Qt(),qv(r),n!==null&&_o(n,r,h,!0),r.childLanes=y,null}function pd(n,r){return r=vd({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function zy(n,r,o){return ct(r,n.child,null,o),n=pd(r,r.pendingProps),n.flags|=2,Ms(r),r.memoizedState=null,n}function Bw(n,r,o){var h=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Dt){if(h.mode==="hidden")return n=pd(r,h),r.lanes=536870912,Du(null,n);if(gm(r),(n=Ft)?(n=Z0(n,sn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Qi!==null?{id:js,overflow:Zs}:null,retryLane:536870912,hydrationErrors:null},o=Tl(n),o.return=r,r.child=o,Gn=r,Ft=null)):n=null,n===null)throw mr(r);return r.lanes=536870912,null}return pd(r,h)}var w=n.memoizedState;if(w!==null){var j=w.dehydrated;if(gm(r),y)if(r.flags&256)r.flags&=-257,r=zy(n,r,o);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(i(558));else if(ar||_o(n,r,o,!1),y=(o&n.childLanes)!==0,ar||y){if(h=_n,h!==null&&(j=$e(h,o),j!==0&&j!==w.retryLane))throw w.retryLane=j,Wi(n,j),_s(h,n,j),Pm;Cd(),r=zy(n,r,o)}else n=w.treeContext,Ft=ii(j.nextSibling),Gn=r,Dt=!0,ns=null,sn=!1,n!==null&&ei(r,n),r=pd(r,h),r.flags|=4096;return r}return n=Js(n.child,{mode:h.mode,children:h.children}),n.ref=r.ref,r.child=n,n.return=r,n}function gd(n,r){var o=r.ref;if(o===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(r.flags|=4194816)}}function Vm(n,r,o,h,y){return Sa(r),o=ym(n,r,o,h,void 0,y),h=bm(),n!==null&&!ar?(_m(n,r,y),Aa(n,r,y)):(Dt&&h&&Eu(r),r.flags|=1,Ar(n,r,o,y),r.child)}function Fy(n,r,o,h,y,w){return Sa(r),r.updateQueue=null,o=$v(r,h,o,y),Hv(n),h=bm(),n!==null&&!ar?(_m(n,r,w),Aa(n,r,w)):(Dt&&h&&Eu(r),r.flags|=1,Ar(n,r,o,w),r.child)}function qy(n,r,o,h,y){if(Sa(r),r.stateNode===null){var w=_a,j=o.contextType;typeof j=="object"&&j!==null&&(w=rr(j)),w=new o(h,w),r.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Om,r.stateNode=w,w._reactInternals=r,w=r.stateNode,w.props=h,w.state=r.memoizedState,w.refs={},It(r),j=o.contextType,w.context=typeof j=="object"&&j!==null?rr(j):_a,w.state=r.memoizedState,j=o.getDerivedStateFromProps,typeof j=="function"&&(Mm(r,o,j,h),w.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(j=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),j!==w.state&&Om.enqueueReplaceState(w,w.state,null),rs(r,h,w,y),ms(),w.state=r.memoizedState),typeof w.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(n===null){w=r.stateNode;var P=r.memoizedProps,re=kl(o,P);w.props=re;var _e=w.context,Me=o.contextType;j=_a,typeof Me=="object"&&Me!==null&&(j=rr(Me));var ze=o.getDerivedStateFromProps;Me=typeof ze=="function"||typeof w.getSnapshotBeforeUpdate=="function",P=r.pendingProps!==P,Me||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P||_e!==j)&&jy(r,w,h,j),ft=!1;var Se=r.memoizedState;w.state=Se,rs(r,h,w,y),ms(),_e=r.memoizedState,P||Se!==_e||ft?(typeof ze=="function"&&(Mm(r,o,ze,h),_e=r.memoizedState),(re=ft||Ay(r,o,re,h,Se,_e,j))?(Me||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=_e),w.props=h,w.state=_e,w.context=j,h=re):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{w=r.stateNode,zr(n,r),j=r.memoizedProps,Me=kl(o,j),w.props=Me,ze=r.pendingProps,Se=w.context,_e=o.contextType,re=_a,typeof _e=="object"&&_e!==null&&(re=rr(_e)),P=o.getDerivedStateFromProps,(_e=typeof P=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(j!==ze||Se!==re)&&jy(r,w,h,re),ft=!1,Se=r.memoizedState,w.state=Se,rs(r,h,w,y),ms();var Ne=r.memoizedState;j!==ze||Se!==Ne||ft||n!==null&&n.dependencies!==null&&Nl(n.dependencies)?(typeof P=="function"&&(Mm(r,o,P,h),Ne=r.memoizedState),(Me=ft||Ay(r,o,Me,h,Se,Ne,re)||n!==null&&n.dependencies!==null&&Nl(n.dependencies))?(_e||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Ne,re),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Ne,re)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||j===n.memoizedProps&&Se===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&Se===n.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=Ne),w.props=h,w.state=Ne,w.context=re,h=Me):(typeof w.componentDidUpdate!="function"||j===n.memoizedProps&&Se===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&Se===n.memoizedState||(r.flags|=1024),h=!1)}return w=h,gd(n,r),h=(r.flags&128)!==0,w||h?(w=r.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:w.render(),r.flags|=1,n!==null&&h?(r.child=ct(r,n.child,null,y),r.child=ct(r,null,o,y)):Ar(n,r,o,y),r.memoizedState=w.state,n=r.child):n=Aa(n,r,y),n}function Hy(n,r,o,h){return wa(),r.flags|=256,Ar(n,r,o,h),r.child}var Um={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bm(n){return{baseLanes:n,cachePool:_()}}function zm(n,r,o){return n=n!==null?n.childLanes&~o:0,r&&(n|=Ls),n}function $y(n,r,o){var h=r.pendingProps,y=!1,w=(r.flags&128)!==0,j;if((j=w)||(j=n!==null&&n.memoizedState===null?!1:(Yn.current&2)!==0),j&&(y=!0,r.flags&=-129),j=(r.flags&32)!==0,r.flags&=-33,n===null){if(Dt){if(y?wi(r):So(),(n=Ft)?(n=Z0(n,sn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:Qi!==null?{id:js,overflow:Zs}:null,retryLane:536870912,hydrationErrors:null},o=Tl(n),o.return=r,r.child=o,Gn=r,Ft=null)):n=null,n===null)throw mr(r);return Ep(n)?r.lanes=32:r.lanes=536870912,null}var P=h.children;return h=h.fallback,y?(So(),y=r.mode,P=vd({mode:"hidden",children:P},y),h=Yi(h,y,o,null),P.return=r,h.return=r,P.sibling=h,r.child=P,h=r.child,h.memoizedState=Bm(o),h.childLanes=zm(n,j,o),r.memoizedState=Um,Du(null,h)):(wi(r),Fm(r,P))}var re=n.memoizedState;if(re!==null&&(P=re.dehydrated,P!==null)){if(w)r.flags&256?(wi(r),r.flags&=-257,r=qm(n,r,o)):r.memoizedState!==null?(So(),r.child=n.child,r.flags|=128,r=null):(So(),P=h.fallback,y=r.mode,h=vd({mode:"visible",children:h.children},y),P=Yi(P,y,o,null),P.flags|=2,h.return=r,P.return=r,h.sibling=P,r.child=h,ct(r,n.child,null,o),h=r.child,h.memoizedState=Bm(o),h.childLanes=zm(n,j,o),r.memoizedState=Um,r=Du(null,h));else if(wi(r),Ep(P)){if(j=P.nextSibling&&P.nextSibling.dataset,j)var _e=j.dgst;j=_e,h=Error(i(419)),h.stack="",h.digest=j,Rs({value:h,source:null,stack:null}),r=qm(n,r,o)}else if(ar||_o(n,r,o,!1),j=(o&n.childLanes)!==0,ar||j){if(j=_n,j!==null&&(h=$e(j,o),h!==0&&h!==re.retryLane))throw re.retryLane=h,Wi(n,h),_s(j,n,h),Pm;wp(P)||Cd(),r=qm(n,r,o)}else wp(P)?(r.flags|=192,r.child=n.child,r=null):(n=re.treeContext,Ft=ii(P.nextSibling),Gn=r,Dt=!0,ns=null,sn=!1,n!==null&&ei(r,n),r=Fm(r,h.children),r.flags|=4096);return r}return y?(So(),P=h.fallback,y=r.mode,re=n.child,_e=re.sibling,h=Js(re,{mode:"hidden",children:h.children}),h.subtreeFlags=re.subtreeFlags&65011712,_e!==null?P=Js(_e,P):(P=Yi(P,y,o,null),P.flags|=2),P.return=r,h.return=r,h.sibling=P,r.child=h,Du(null,h),h=r.child,P=n.child.memoizedState,P===null?P=Bm(o):(y=P.cachePool,y!==null?(re=Vn._currentValue,y=y.parent!==re?{parent:re,pool:re}:y):y=_(),P={baseLanes:P.baseLanes|o,cachePool:y}),h.memoizedState=P,h.childLanes=zm(n,j,o),r.memoizedState=Um,Du(n.child,h)):(wi(r),o=n.child,n=o.sibling,o=Js(o,{mode:"visible",children:h.children}),o.return=r,o.sibling=null,n!==null&&(j=r.deletions,j===null?(r.deletions=[n],r.flags|=16):j.push(n)),r.child=o,r.memoizedState=null,o)}function Fm(n,r){return r=vd({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function vd(n,r){return n=fr(22,n,null,r),n.lanes=0,n}function qm(n,r,o){return ct(r,n.child,null,o),n=Fm(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Gy(n,r,o){n.lanes|=r;var h=n.alternate;h!==null&&(h.lanes|=r),Tu(n.return,r,o)}function Hm(n,r,o,h,y,w){var j=n.memoizedState;j===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:y,treeForkCount:w}:(j.isBackwards=r,j.rendering=null,j.renderingStartTime=0,j.last=h,j.tail=o,j.tailMode=y,j.treeForkCount=w)}function Wy(n,r,o){var h=r.pendingProps,y=h.revealOrder,w=h.tail;h=h.children;var j=Yn.current,P=(j&2)!==0;if(P?(j=j&1|2,r.flags|=128):j&=1,ie(Yn,j),Ar(n,r,h,o),h=Dt?Cl:0,!P&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Gy(n,o,r);else if(n.tag===19)Gy(n,o,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(y){case"forwards":for(o=r.child,y=null;o!==null;)n=o.alternate,n!==null&&id(n)===null&&(y=o),o=o.sibling;o=y,o===null?(y=r.child,r.child=null):(y=o.sibling,o.sibling=null),Hm(r,!1,y,o,w,h);break;case"backwards":case"unstable_legacy-backwards":for(o=null,y=r.child,r.child=null;y!==null;){if(n=y.alternate,n!==null&&id(n)===null){r.child=y;break}n=y.sibling,y.sibling=o,o=y,y=n}Hm(r,!0,o,null,w,h);break;case"together":Hm(r,!1,null,null,void 0,h);break;default:r.memoizedState=null}return r.child}function Aa(n,r,o){if(n!==null&&(r.dependencies=n.dependencies),No|=r.lanes,(o&r.childLanes)===0)if(n!==null){if(_o(n,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(i(153));if(r.child!==null){for(n=r.child,o=Js(n,n.pendingProps),r.child=o,o.return=r;n.sibling!==null;)n=n.sibling,o=o.sibling=Js(n,n.pendingProps),o.return=r;o.sibling=null}return r.child}function $m(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Nl(n)))}function zw(n,r,o){switch(r.tag){case 3:Oe(r,r.stateNode.containerInfo),Xi(r,Vn,n.memoizedState.cache),wa();break;case 27:case 5:nt(r);break;case 4:Oe(r,r.stateNode.containerInfo);break;case 10:Xi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,gm(r),null;break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(wi(r),r.flags|=128,null):(o&r.child.childLanes)!==0?$y(n,r,o):(wi(r),n=Aa(n,r,o),n!==null?n.sibling:null);wi(r);break;case 19:var y=(n.flags&128)!==0;if(h=(o&r.childLanes)!==0,h||(_o(n,r,o,!1),h=(o&r.childLanes)!==0),y){if(h)return Wy(n,r,o);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ie(Yn,Yn.current),h)break;return null;case 22:return r.lanes=0,Uy(n,r,o,r.pendingProps);case 24:Xi(r,Vn,n.memoizedState.cache)}return Aa(n,r,o)}function Yy(n,r,o){if(n!==null)if(n.memoizedProps!==r.pendingProps)ar=!0;else{if(!$m(n,o)&&(r.flags&128)===0)return ar=!1,zw(n,r,o);ar=(n.flags&131072)!==0}else ar=!1,Dt&&(r.flags&1048576)!==0&&Nr(r,Cl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var h=r.pendingProps;if(n=K(r.elementType),r.type=n,typeof n=="function")go(n)?(h=kl(n,h),r.tag=1,r=qy(null,r,n,h,o)):(r.tag=0,r=Vm(null,r,n,h,o));else{if(n!=null){var y=n.$$typeof;if(y===X){r.tag=11,r=Ly(null,r,n,h,o);break e}else if(y===q){r.tag=14,r=Py(null,r,n,h,o);break e}}throw r=Re(n)||n,Error(i(306,r,""))}}return r;case 0:return Vm(n,r,r.type,r.pendingProps,o);case 1:return h=r.type,y=kl(h,r.pendingProps),qy(n,r,h,y,o);case 3:e:{if(Oe(r,r.stateNode.containerInfo),n===null)throw Error(i(387));h=r.pendingProps;var w=r.memoizedState;y=w.element,zr(n,r),rs(r,h,null,o);var j=r.memoizedState;if(h=j.cache,Xi(r,Vn,h),h!==w.cache&&Cu(r,[Vn],o,!0),ms(),h=j.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:j.cache},r.updateQueue.baseState=w,r.memoizedState=w,r.flags&256){r=Hy(n,r,h,o);break e}else if(h!==y){y=hs(Error(i(424)),r),Rs(y),r=Hy(n,r,h,o);break e}else for(n=r.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Ft=ii(n.firstChild),Gn=r,Dt=!0,ns=null,sn=!0,o=Nt(r,null,h,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(wa(),h===y){r=Aa(n,r,o);break e}Ar(n,r,h,o)}r=r.child}return r;case 26:return gd(n,r),n===null?(o=i1(r.type,null,r.pendingProps,null))?r.memoizedState=o:Dt||(o=r.type,n=r.pendingProps,h=Id(de.current).createElement(o),h[lt]=r,h[bt]=n,jr(h,o,n),On(h),r.stateNode=h):r.memoizedState=i1(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return nt(r),n===null&&Dt&&(h=r.stateNode=n1(r.type,r.pendingProps,de.current),Gn=r,sn=!0,y=Ft,Do(r.type)?(Sp=y,Ft=ii(h.firstChild)):Ft=y),Ar(n,r,r.pendingProps.children,o),gd(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Dt&&((y=h=Ft)&&(h=vE(h,r.type,r.pendingProps,sn),h!==null?(r.stateNode=h,Gn=r,Ft=ii(h.firstChild),sn=!1,y=!0):y=!1),y||mr(r)),nt(r),y=r.type,w=r.pendingProps,j=n!==null?n.memoizedProps:null,h=w.children,bp(y,w)?h=null:j!==null&&bp(y,j)&&(r.flags|=32),r.memoizedState!==null&&(y=ym(n,r,Dw,null,null,o),Wu._currentValue=y),gd(n,r),Ar(n,r,h,o),r.child;case 6:return n===null&&Dt&&((n=o=Ft)&&(o=yE(o,r.pendingProps,sn),o!==null?(r.stateNode=o,Gn=r,Ft=null,n=!0):n=!1),n||mr(r)),null;case 13:return $y(n,r,o);case 4:return Oe(r,r.stateNode.containerInfo),h=r.pendingProps,n===null?r.child=ct(r,null,h,o):Ar(n,r,h,o),r.child;case 11:return Ly(n,r,r.type,r.pendingProps,o);case 7:return Ar(n,r,r.pendingProps,o),r.child;case 8:return Ar(n,r,r.pendingProps.children,o),r.child;case 12:return Ar(n,r,r.pendingProps.children,o),r.child;case 10:return h=r.pendingProps,Xi(r,r.type,h.value),Ar(n,r,h.children,o),r.child;case 9:return y=r.type._context,h=r.pendingProps.children,Sa(r),y=rr(y),h=h(y),r.flags|=1,Ar(n,r,h,o),r.child;case 14:return Py(n,r,r.type,r.pendingProps,o);case 15:return Vy(n,r,r.type,r.pendingProps,o);case 19:return Wy(n,r,o);case 31:return Bw(n,r,o);case 22:return Uy(n,r,o,r.pendingProps);case 24:return Sa(r),h=rr(Vn),n===null?(y=d(),y===null&&(y=_n,w=Nu(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=o),y=w),r.memoizedState={parent:h,cache:y},It(r),Xi(r,Vn,y)):((n.lanes&o)!==0&&(zr(n,r),rs(r,null,null,o),ms()),y=n.memoizedState,w=r.memoizedState,y.parent!==h?(y={parent:h,cache:h},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Xi(r,Vn,h)):(h=w.cache,Xi(r,Vn,h),h!==y.cache&&Cu(r,[Vn],o,!0))),Ar(n,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function ja(n){n.flags|=4}function Gm(n,r,o,h,y){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(y&335544128)===y)if(n.stateNode.complete)n.flags|=8192;else if(x0())n.flags|=8192;else throw ae=D,T}else n.flags&=-16777217}function Qy(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!u1(r))if(x0())n.flags|=8192;else throw ae=D,T}function yd(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Kr():536870912,n.lanes|=r,wc|=r)}function Iu(n,r){if(!Dt)switch(n.tailMode){case"hidden":r=n.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Tn(n){var r=n.alternate!==null&&n.alternate.child===n.child,o=0,h=0;if(r)for(var y=n.child;y!==null;)o|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)o|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=h,n.childLanes=o,r}function Fw(n,r,o){var h=r.pendingProps;switch(yi(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(r),null;case 1:return Tn(r),null;case 3:return o=r.stateNode,h=null,n!==null&&(h=n.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),_i(Vn),He(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(xa(r)?ja(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ki())),Tn(r),null;case 26:var y=r.type,w=r.memoizedState;return n===null?(ja(r),w!==null?(Tn(r),Qy(r,w)):(Tn(r),Gm(r,y,null,h,o))):w?w!==n.memoizedState?(ja(r),Tn(r),Qy(r,w)):(Tn(r),r.flags&=-16777217):(n=n.memoizedProps,n!==h&&ja(r),Tn(r),Gm(r,y,n,h,o)),null;case 27:if(Ve(r),o=de.current,y=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==h&&ja(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tn(r),null}n=he.current,xa(r)?pr(r):(n=n1(y,h,o),r.stateNode=n,ja(r))}return Tn(r),null;case 5:if(Ve(r),y=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==h&&ja(r);else{if(!h){if(r.stateNode===null)throw Error(i(166));return Tn(r),null}if(w=he.current,xa(r))pr(r);else{var j=Id(de.current);switch(w){case 1:w=j.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:w=j.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":w=j.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":w=j.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":w=j.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?j.createElement("select",{is:h.is}):j.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?j.createElement(y,{is:h.is}):j.createElement(y)}}w[lt]=r,w[bt]=h;e:for(j=r.child;j!==null;){if(j.tag===5||j.tag===6)w.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===r)break e;for(;j.sibling===null;){if(j.return===null||j.return===r)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}r.stateNode=w;e:switch(jr(w,y,h),y){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&ja(r)}}return Tn(r),Gm(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,o),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==h&&ja(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(i(166));if(n=de.current,xa(r)){if(n=r.stateNode,o=r.memoizedProps,h=null,y=Gn,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}n[lt]=r,n=!!(n.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||$0(n.nodeValue,o)),n||mr(r,!0)}else n=Id(n).createTextNode(h),n[lt]=r,r.stateNode=n}return Tn(r),null;case 31:if(o=r.memoizedState,n===null||n.memoizedState!==null){if(h=xa(r),o!==null){if(n===null){if(!h)throw Error(i(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[lt]=r}else wa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tn(r),n=!1}else o=Ki(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return r.flags&256?(Ms(r),r):(Ms(r),null);if((r.flags&128)!==0)throw Error(i(558))}return Tn(r),null;case 13:if(h=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(y=xa(r),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[lt]=r}else wa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Tn(r),y=!1}else y=Ki(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(Ms(r),r):(Ms(r),null)}return Ms(r),(r.flags&128)!==0?(r.lanes=o,r):(o=h!==null,n=n!==null&&n.memoizedState!==null,o&&(h=r.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==y&&(h.flags|=2048)),o!==n&&o&&(r.child.flags|=8192),yd(r,r.updateQueue),Tn(r),null);case 4:return He(),n===null&&mp(r.stateNode.containerInfo),Tn(r),null;case 10:return _i(r.type),Tn(r),null;case 19:if(se(Yn),h=r.memoizedState,h===null)return Tn(r),null;if(y=(r.flags&128)!==0,w=h.rendering,w===null)if(y)Iu(h,!1);else{if(Bn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(w=id(n),w!==null){for(r.flags|=128,Iu(h,!1),n=w.updateQueue,r.updateQueue=n,yd(r,n),r.subtreeFlags=0,n=o,o=r.child;o!==null;)ed(o,n),o=o.sibling;return ie(Yn,Yn.current&1|2),Dt&&fs(r,h.treeForkCount),r.child}n=n.sibling}h.tail!==null&&Pt()>Ed&&(r.flags|=128,y=!0,Iu(h,!1),r.lanes=4194304)}else{if(!y)if(n=id(w),n!==null){if(r.flags|=128,y=!0,n=n.updateQueue,r.updateQueue=n,yd(r,n),Iu(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!Dt)return Tn(r),null}else 2*Pt()-h.renderingStartTime>Ed&&o!==536870912&&(r.flags|=128,y=!0,Iu(h,!1),r.lanes=4194304);h.isBackwards?(w.sibling=r.child,r.child=w):(n=h.last,n!==null?n.sibling=w:r.child=w,h.last=w)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Pt(),n.sibling=null,o=Yn.current,ie(Yn,y?o&1|2:o&1),Dt&&fs(r,h.treeForkCount),n):(Tn(r),null);case 22:case 23:return Ms(r),Wn(),h=r.memoizedState!==null,n!==null?n.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(o&536870912)!==0&&(r.flags&128)===0&&(Tn(r),r.subtreeFlags&6&&(r.flags|=8192)):Tn(r),o=r.updateQueue,o!==null&&yd(r,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==o&&(r.flags|=2048),n!==null&&se(b),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),_i(Vn),Tn(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function qw(n,r){switch(yi(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return _i(Vn),He(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return Ve(r),null;case 31:if(r.memoizedState!==null){if(Ms(r),r.alternate===null)throw Error(i(340));wa()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Ms(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(i(340));wa()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return se(Yn),null;case 4:return He(),null;case 10:return _i(r.type),null;case 22:case 23:return Ms(r),Wn(),n!==null&&se(b),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return _i(Vn),null;case 25:return null;default:return null}}function Ky(n,r){switch(yi(r),r.tag){case 3:_i(Vn),He();break;case 26:case 27:case 5:Ve(r);break;case 4:He();break;case 31:r.memoizedState!==null&&Ms(r);break;case 13:Ms(r);break;case 19:se(Yn);break;case 10:_i(r.type);break;case 22:case 23:Ms(r),Wn(),n!==null&&se(b);break;case 24:_i(Vn)}}function Mu(n,r){try{var o=r.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var y=h.next;o=y;do{if((o.tag&n)===n){h=void 0;var w=o.create,j=o.inst;h=w(),j.destroy=h}o=o.next}while(o!==y)}}catch(P){fn(r,r.return,P)}}function To(n,r,o){try{var h=r.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var w=y.next;h=w;do{if((h.tag&n)===n){var j=h.inst,P=j.destroy;if(P!==void 0){j.destroy=void 0,y=r;var re=o,_e=P;try{_e()}catch(Me){fn(y,re,Me)}}}h=h.next}while(h!==w)}}catch(Me){fn(r,r.return,Me)}}function Xy(n){var r=n.updateQueue;if(r!==null){var o=n.stateNode;try{ps(r,o)}catch(h){fn(n,n.return,h)}}}function Jy(n,r,o){o.props=kl(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(h){fn(n,r,h)}}function Ou(n,r){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var h=n.stateNode;break;case 30:h=n.stateNode;break;default:h=n.stateNode}typeof o=="function"?n.refCleanup=o(h):o.current=h}}catch(y){fn(n,r,y)}}function Zi(n,r){var o=n.ref,h=n.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(y){fn(n,r,y)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(y){fn(n,r,y)}else o.current=null}function Zy(n){var r=n.type,o=n.memoizedProps,h=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break e;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(y){fn(n,n.return,y)}}function Wm(n,r,o){try{var h=n.stateNode;hE(h,n.type,o,r),h[bt]=r}catch(y){fn(n,n.return,y)}}function e0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Do(n.type)||n.tag===4}function Ym(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||e0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Do(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qm(n,r,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(n),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ts));else if(h!==4&&(h===27&&Do(n.type)&&(o=n.stateNode,r=null),n=n.child,n!==null))for(Qm(n,r,o),n=n.sibling;n!==null;)Qm(n,r,o),n=n.sibling}function bd(n,r,o){var h=n.tag;if(h===5||h===6)n=n.stateNode,r?o.insertBefore(n,r):o.appendChild(n);else if(h!==4&&(h===27&&Do(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(bd(n,r,o),n=n.sibling;n!==null;)bd(n,r,o),n=n.sibling}function t0(n){var r=n.stateNode,o=n.memoizedProps;try{for(var h=n.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);jr(r,h,o),r[lt]=n,r[bt]=o}catch(w){fn(n,n.return,w)}}var Ra=!1,or=!1,Km=!1,n0=typeof WeakSet=="function"?WeakSet:Set,xr=null;function Hw(n,r){if(n=n.containerInfo,vp=Bd,n=gu(n),ac(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var y=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{o.nodeType,w.nodeType}catch{o=null;break e}var j=0,P=-1,re=-1,_e=0,Me=0,ze=n,Se=null;t:for(;;){for(var Ne;ze!==o||y!==0&&ze.nodeType!==3||(P=j+y),ze!==w||h!==0&&ze.nodeType!==3||(re=j+h),ze.nodeType===3&&(j+=ze.nodeValue.length),(Ne=ze.firstChild)!==null;)Se=ze,ze=Ne;for(;;){if(ze===n)break t;if(Se===o&&++_e===y&&(P=j),Se===w&&++Me===h&&(re=j),(Ne=ze.nextSibling)!==null)break;ze=Se,Se=ze.parentNode}ze=Ne}o=P===-1||re===-1?null:{start:P,end:re}}else o=null}o=o||{start:0,end:0}}else o=null;for(yp={focusedElem:n,selectionRange:o},Bd=!1,xr=r;xr!==null;)if(r=xr,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,xr=n;else for(;xr!==null;){switch(r=xr,w=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)y=n[o],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&w!==null){n=void 0,o=r,y=w.memoizedProps,w=w.memoizedState,h=o.stateNode;try{var tt=kl(o.type,y);n=h.getSnapshotBeforeUpdate(tt,w),h.__reactInternalSnapshotBeforeUpdate=n}catch(mt){fn(o,o.return,mt)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,o=n.nodeType,o===9)xp(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":xp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=r.sibling,n!==null){n.return=r.return,xr=n;break}xr=r.return}}function r0(n,r,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:Da(n,o),h&4&&Mu(5,o);break;case 1:if(Da(n,o),h&4)if(n=o.stateNode,r===null)try{n.componentDidMount()}catch(j){fn(o,o.return,j)}else{var y=kl(o.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(y,r,n.__reactInternalSnapshotBeforeUpdate)}catch(j){fn(o,o.return,j)}}h&64&&Xy(o),h&512&&Ou(o,o.return);break;case 3:if(Da(n,o),h&64&&(n=o.updateQueue,n!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{ps(n,r)}catch(j){fn(o,o.return,j)}}break;case 27:r===null&&h&4&&t0(o);case 26:case 5:Da(n,o),r===null&&h&4&&Zy(o),h&512&&Ou(o,o.return);break;case 12:Da(n,o);break;case 31:Da(n,o),h&4&&a0(n,o);break;case 13:Da(n,o),h&4&&o0(n,o),h&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=Zw.bind(null,o),bE(n,o))));break;case 22:if(h=o.memoizedState!==null||Ra,!h){r=r!==null&&r.memoizedState!==null||or,y=Ra;var w=or;Ra=h,(or=r)&&!w?Ia(n,o,(o.subtreeFlags&8772)!==0):Da(n,o),Ra=y,or=w}break;case 30:break;default:Da(n,o)}}function s0(n){var r=n.alternate;r!==null&&(n.alternate=null,s0(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&di(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Nn=null,gs=!1;function ka(n,r,o){for(o=o.child;o!==null;)i0(n,r,o),o=o.sibling}function i0(n,r,o){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(zn,o)}catch{}switch(o.tag){case 26:or||Zi(o,r),ka(n,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:or||Zi(o,r);var h=Nn,y=gs;Do(o.type)&&(Nn=o.stateNode,gs=!1),ka(n,r,o),Hu(o.stateNode),Nn=h,gs=y;break;case 5:or||Zi(o,r);case 6:if(h=Nn,y=gs,Nn=null,ka(n,r,o),Nn=h,gs=y,Nn!==null)if(gs)try{(Nn.nodeType===9?Nn.body:Nn.nodeName==="HTML"?Nn.ownerDocument.body:Nn).removeChild(o.stateNode)}catch(w){fn(o,r,w)}else try{Nn.removeChild(o.stateNode)}catch(w){fn(o,r,w)}break;case 18:Nn!==null&&(gs?(n=Nn,X0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Rc(n)):X0(Nn,o.stateNode));break;case 4:h=Nn,y=gs,Nn=o.stateNode.containerInfo,gs=!0,ka(n,r,o),Nn=h,gs=y;break;case 0:case 11:case 14:case 15:To(2,o,r),or||To(4,o,r),ka(n,r,o);break;case 1:or||(Zi(o,r),h=o.stateNode,typeof h.componentWillUnmount=="function"&&Jy(o,r,h)),ka(n,r,o);break;case 21:ka(n,r,o);break;case 22:or=(h=or)||o.memoizedState!==null,ka(n,r,o),or=h;break;default:ka(n,r,o)}}function a0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Rc(n)}catch(o){fn(r,r.return,o)}}}function o0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Rc(n)}catch(o){fn(r,r.return,o)}}function $w(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new n0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new n0),r;default:throw Error(i(435,n.tag))}}function _d(n,r){var o=$w(n);r.forEach(function(h){if(!o.has(h)){o.add(h);var y=eE.bind(null,n,h);h.then(y,y)}})}function vs(n,r){var o=r.deletions;if(o!==null)for(var h=0;h<o.length;h++){var y=o[h],w=n,j=r,P=j;e:for(;P!==null;){switch(P.tag){case 27:if(Do(P.type)){Nn=P.stateNode,gs=!1;break e}break;case 5:Nn=P.stateNode,gs=!1;break e;case 3:case 4:Nn=P.stateNode.containerInfo,gs=!0;break e}P=P.return}if(Nn===null)throw Error(i(160));i0(w,j,y),Nn=null,gs=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)l0(r,n),r=r.sibling}var Ei=null;function l0(n,r){var o=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:vs(r,n),ys(n),h&4&&(To(3,n,n.return),Mu(3,n),To(5,n,n.return));break;case 1:vs(r,n),ys(n),h&512&&(or||o===null||Zi(o,o.return)),h&64&&Ra&&(n=n.updateQueue,n!==null&&(h=n.callbacks,h!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var y=Ei;if(vs(r,n),ys(n),h&512&&(or||o===null||Zi(o,o.return)),h&4){var w=o!==null?o.memoizedState:null;if(h=n.memoizedState,o===null)if(h===null)if(n.stateNode===null){e:{h=n.type,o=n.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":w=y.getElementsByTagName("title")[0],(!w||w[os]||w[lt]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(h),y.head.insertBefore(w,y.querySelector("head > title"))),jr(w,h,o),w[lt]=n,On(w),h=w;break e;case"link":var j=l1("link","href",y).get(h+(o.href||""));if(j){for(var P=0;P<j.length;P++)if(w=j[P],w.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&w.getAttribute("rel")===(o.rel==null?null:o.rel)&&w.getAttribute("title")===(o.title==null?null:o.title)&&w.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){j.splice(P,1);break t}}w=y.createElement(h),jr(w,h,o),y.head.appendChild(w);break;case"meta":if(j=l1("meta","content",y).get(h+(o.content||""))){for(P=0;P<j.length;P++)if(w=j[P],w.getAttribute("content")===(o.content==null?null:""+o.content)&&w.getAttribute("name")===(o.name==null?null:o.name)&&w.getAttribute("property")===(o.property==null?null:o.property)&&w.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&w.getAttribute("charset")===(o.charSet==null?null:o.charSet)){j.splice(P,1);break t}}w=y.createElement(h),jr(w,h,o),y.head.appendChild(w);break;default:throw Error(i(468,h))}w[lt]=n,On(w),h=w}n.stateNode=h}else c1(y,n.type,n.stateNode);else n.stateNode=o1(y,h,n.memoizedProps);else w!==h?(w===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):w.count--,h===null?c1(y,n.type,n.stateNode):o1(y,h,n.memoizedProps)):h===null&&n.stateNode!==null&&Wm(n,n.memoizedProps,o.memoizedProps)}break;case 27:vs(r,n),ys(n),h&512&&(or||o===null||Zi(o,o.return)),o!==null&&h&4&&Wm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(vs(r,n),ys(n),h&512&&(or||o===null||Zi(o,o.return)),n.flags&32){y=n.stateNode;try{Vr(y,"")}catch(tt){fn(n,n.return,tt)}}h&4&&n.stateNode!=null&&(y=n.memoizedProps,Wm(n,y,o!==null?o.memoizedProps:y)),h&1024&&(Km=!0);break;case 6:if(vs(r,n),ys(n),h&4){if(n.stateNode===null)throw Error(i(162));h=n.memoizedProps,o=n.stateNode;try{o.nodeValue=h}catch(tt){fn(n,n.return,tt)}}break;case 3:if(Ld=null,y=Ei,Ei=Md(r.containerInfo),vs(r,n),Ei=y,ys(n),h&4&&o!==null&&o.memoizedState.isDehydrated)try{Rc(r.containerInfo)}catch(tt){fn(n,n.return,tt)}Km&&(Km=!1,c0(n));break;case 4:h=Ei,Ei=Md(n.stateNode.containerInfo),vs(r,n),ys(n),Ei=h;break;case 12:vs(r,n),ys(n);break;case 31:vs(r,n),ys(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,_d(n,h)));break;case 13:vs(r,n),ys(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(wd=Pt()),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,_d(n,h)));break;case 22:y=n.memoizedState!==null;var re=o!==null&&o.memoizedState!==null,_e=Ra,Me=or;if(Ra=_e||y,or=Me||re,vs(r,n),or=Me,Ra=_e,ys(n),h&8192)e:for(r=n.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(o===null||re||Ra||or||Dl(n)),o=null,r=n;;){if(r.tag===5||r.tag===26){if(o===null){re=o=r;try{if(w=re.stateNode,y)j=w.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{P=re.stateNode;var ze=re.memoizedProps.style,Se=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;P.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(tt){fn(re,re.return,tt)}}}else if(r.tag===6){if(o===null){re=r;try{re.stateNode.nodeValue=y?"":re.memoizedProps}catch(tt){fn(re,re.return,tt)}}}else if(r.tag===18){if(o===null){re=r;try{var Ne=re.stateNode;y?J0(Ne,!0):J0(re.stateNode,!1)}catch(tt){fn(re,re.return,tt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=n.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,_d(n,o))));break;case 19:vs(r,n),ys(n),h&4&&(h=n.updateQueue,h!==null&&(n.updateQueue=null,_d(n,h)));break;case 30:break;case 21:break;default:vs(r,n),ys(n)}}function ys(n){var r=n.flags;if(r&2){try{for(var o,h=n.return;h!==null;){if(e0(h)){o=h;break}h=h.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var y=o.stateNode,w=Ym(n);bd(n,w,y);break;case 5:var j=o.stateNode;o.flags&32&&(Vr(j,""),o.flags&=-33);var P=Ym(n);bd(n,P,j);break;case 3:case 4:var re=o.stateNode.containerInfo,_e=Ym(n);Qm(n,_e,re);break;default:throw Error(i(161))}}catch(Me){fn(n,n.return,Me)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function c0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;c0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Da(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)r0(n,r.alternate,r),r=r.sibling}function Dl(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:To(4,r,r.return),Dl(r);break;case 1:Zi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&Jy(r,r.return,o),Dl(r);break;case 27:Hu(r.stateNode);case 26:case 5:Zi(r,r.return),Dl(r);break;case 22:r.memoizedState===null&&Dl(r);break;case 30:Dl(r);break;default:Dl(r)}n=n.sibling}}function Ia(n,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,y=n,w=r,j=w.flags;switch(w.tag){case 0:case 11:case 15:Ia(y,w,o),Mu(4,w);break;case 1:if(Ia(y,w,o),h=w,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(_e){fn(h,h.return,_e)}if(h=w,y=h.updateQueue,y!==null){var P=h.stateNode;try{var re=y.shared.hiddenCallbacks;if(re!==null)for(y.shared.hiddenCallbacks=null,y=0;y<re.length;y++)hn(re[y],P)}catch(_e){fn(h,h.return,_e)}}o&&j&64&&Xy(w),Ou(w,w.return);break;case 27:t0(w);case 26:case 5:Ia(y,w,o),o&&h===null&&j&4&&Zy(w),Ou(w,w.return);break;case 12:Ia(y,w,o);break;case 31:Ia(y,w,o),o&&j&4&&a0(y,w);break;case 13:Ia(y,w,o),o&&j&4&&o0(y,w);break;case 22:w.memoizedState===null&&Ia(y,w,o),Ou(w,w.return);break;case 30:break;default:Ia(y,w,o)}r=r.sibling}}function Xm(n,r){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&jl(o))}function Jm(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&jl(n))}function Si(n,r,o,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)u0(n,r,o,h),r=r.sibling}function u0(n,r,o,h){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Si(n,r,o,h),y&2048&&Mu(9,r);break;case 1:Si(n,r,o,h);break;case 3:Si(n,r,o,h),y&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&jl(n)));break;case 12:if(y&2048){Si(n,r,o,h),n=r.stateNode;try{var w=r.memoizedProps,j=w.id,P=w.onPostCommit;typeof P=="function"&&P(j,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(re){fn(r,r.return,re)}}else Si(n,r,o,h);break;case 31:Si(n,r,o,h);break;case 13:Si(n,r,o,h);break;case 23:break;case 22:w=r.stateNode,j=r.alternate,r.memoizedState!==null?w._visibility&2?Si(n,r,o,h):Lu(n,r):w._visibility&2?Si(n,r,o,h):(w._visibility|=2,bc(n,r,o,h,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Xm(j,r);break;case 24:Si(n,r,o,h),y&2048&&Jm(r.alternate,r);break;default:Si(n,r,o,h)}}function bc(n,r,o,h,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var w=n,j=r,P=o,re=h,_e=j.flags;switch(j.tag){case 0:case 11:case 15:bc(w,j,P,re,y),Mu(8,j);break;case 23:break;case 22:var Me=j.stateNode;j.memoizedState!==null?Me._visibility&2?bc(w,j,P,re,y):Lu(w,j):(Me._visibility|=2,bc(w,j,P,re,y)),y&&_e&2048&&Xm(j.alternate,j);break;case 24:bc(w,j,P,re,y),y&&_e&2048&&Jm(j.alternate,j);break;default:bc(w,j,P,re,y)}r=r.sibling}}function Lu(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=n,h=r,y=h.flags;switch(h.tag){case 22:Lu(o,h),y&2048&&Xm(h.alternate,h);break;case 24:Lu(o,h),y&2048&&Jm(h.alternate,h);break;default:Lu(o,h)}r=r.sibling}}var Pu=8192;function _c(n,r,o){if(n.subtreeFlags&Pu)for(n=n.child;n!==null;)h0(n,r,o),n=n.sibling}function h0(n,r,o){switch(n.tag){case 26:_c(n,r,o),n.flags&Pu&&n.memoizedState!==null&&kE(o,Ei,n.memoizedState,n.memoizedProps);break;case 5:_c(n,r,o);break;case 3:case 4:var h=Ei;Ei=Md(n.stateNode.containerInfo),_c(n,r,o),Ei=h;break;case 22:n.memoizedState===null&&(h=n.alternate,h!==null&&h.memoizedState!==null?(h=Pu,Pu=16777216,_c(n,r,o),Pu=h):_c(n,r,o));break;default:_c(n,r,o)}}function d0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Vu(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var h=r[o];xr=h,m0(h,n)}d0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)f0(n),n=n.sibling}function f0(n){switch(n.tag){case 0:case 11:case 15:Vu(n),n.flags&2048&&To(9,n,n.return);break;case 3:Vu(n);break;case 12:Vu(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,xd(n)):Vu(n);break;default:Vu(n)}}function xd(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var h=r[o];xr=h,m0(h,n)}d0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:To(8,r,r.return),xd(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,xd(r));break;default:xd(r)}n=n.sibling}}function m0(n,r){for(;xr!==null;){var o=xr;switch(o.tag){case 0:case 11:case 15:To(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:jl(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,xr=h;else e:for(o=n;xr!==null;){h=xr;var y=h.sibling,w=h.return;if(s0(h),h===o){xr=null;break e}if(y!==null){y.return=w,xr=y;break e}xr=w}}}var Gw={getCacheForType:function(n){var r=rr(Vn),o=r.data.get(n);return o===void 0&&(o=n(),r.data.set(n,o)),o},cacheSignal:function(){return rr(Vn).controller.signal}},Ww=typeof WeakMap=="function"?WeakMap:Map,an=0,_n=null,Vt=null,qt=0,dn=0,Os=null,Co=!1,xc=!1,Zm=!1,Ma=0,Bn=0,No=0,Il=0,ep=0,Ls=0,wc=0,Uu=null,bs=null,tp=!1,wd=0,p0=0,Ed=1/0,Sd=null,Ao=null,gr=0,jo=null,Ec=null,Oa=0,np=0,rp=null,g0=null,Bu=0,sp=null;function Ps(){return(an&2)!==0&&qt!==0?qt&-qt:ne.T!==null?up():We()}function v0(){if(Ls===0)if((qt&536870912)===0||Dt){var n=yt;yt<<=1,(yt&3932160)===0&&(yt=262144),Ls=n}else Ls=536870912;return n=ss.current,n!==null&&(n.flags|=32),Ls}function _s(n,r,o){(n===_n&&(dn===2||dn===9)||n.cancelPendingCommit!==null)&&(Sc(n,0),Ro(n,qt,Ls,!1)),qn(n,o),((an&2)===0||n!==_n)&&(n===_n&&((an&2)===0&&(Il|=o),Bn===4&&Ro(n,qt,Ls,!1)),ea(n))}function y0(n,r,o){if((an&6)!==0)throw Error(i(327));var h=!o&&(r&127)===0&&(r&n.expiredLanes)===0||nn(n,r),y=h?Kw(n,r):ap(n,r,!0),w=h;do{if(y===0){xc&&!h&&Ro(n,r,0,!1);break}else{if(o=n.current.alternate,w&&!Yw(o)){y=ap(n,r,!1),w=!1;continue}if(y===2){if(w=r,n.errorRecoveryDisabledLanes&w)var j=0;else j=n.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){r=j;e:{var P=n;y=Uu;var re=P.current.memoizedState.isDehydrated;if(re&&(Sc(P,j).flags|=256),j=ap(P,j,!1),j!==2){if(Zm&&!re){P.errorRecoveryDisabledLanes|=w,Il|=w,y=4;break e}w=bs,bs=y,w!==null&&(bs===null?bs=w:bs.push.apply(bs,w))}y=j}if(w=!1,y!==2)continue}}if(y===1){Sc(n,0),Ro(n,r,0,!0);break}e:{switch(h=n,w=y,w){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Ro(h,r,Ls,!Co);break e;case 2:bs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=wd+300-Pt(),10<y)){if(Ro(h,r,Ls,!Co),Dn(h,0,!0)!==0)break e;Oa=r,h.timeoutHandle=Q0(b0.bind(null,h,o,bs,Sd,tp,r,Ls,Il,wc,Co,w,"Throttled",-0,0),y);break e}b0(h,o,bs,Sd,tp,r,Ls,Il,wc,Co,w,null,-0,0)}}break}while(!0);ea(n)}function b0(n,r,o,h,y,w,j,P,re,_e,Me,ze,Se,Ne){if(n.timeoutHandle=-1,ze=r.subtreeFlags,ze&8192||(ze&16785408)===16785408){ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ts},h0(r,w,ze);var tt=(w&62914560)===w?wd-Pt():(w&4194048)===w?p0-Pt():0;if(tt=DE(ze,tt),tt!==null){Oa=w,n.cancelPendingCommit=tt(N0.bind(null,n,r,w,o,h,y,j,P,re,Me,ze,null,Se,Ne)),Ro(n,w,j,!_e);return}}N0(n,r,w,o,h,y,j,P,re)}function Yw(n){for(var r=n;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var y=o[h],w=y.getSnapshot;y=y.value;try{if(!Br(w(),y))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ro(n,r,o,h){r&=~ep,r&=~Il,n.suspendedLanes|=r,n.pingedLanes&=~r,h&&(n.warmLanes|=r),h=n.expirationTimes;for(var y=r;0<y;){var w=31-zt(y),j=1<<w;h[w]=-1,y&=~j}o!==0&&ge(n,o,r)}function Td(){return(an&6)===0?(zu(0),!1):!0}function ip(){if(Vt!==null){if(dn===0)var n=Vt.return;else n=Vt,bi=Ea=null,xm(n),oe=null,we=0,n=Vt;for(;n!==null;)Ky(n.alternate,n),n=n.return;Vt=null}}function Sc(n,r){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,mE(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Oa=0,ip(),_n=n,Vt=o=Js(n.current,null),qt=r,dn=0,Os=null,Co=!1,xc=nn(n,r),Zm=!1,wc=Ls=ep=Il=No=Bn=0,bs=Uu=null,tp=!1,(r&8)!==0&&(r|=r&32);var h=n.entangledLanes;if(h!==0)for(n=n.entanglements,h&=r;0<h;){var y=31-zt(h),w=1<<y;r|=n[y],h&=~w}return Ma=r,El(),o}function _0(n,r){At=null,ne.H=ku,r===E||r===R?(r=ue(),dn=3):r===T?(r=ue(),dn=4):dn=r===Pm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Os=r,Vt===null&&(Bn=1,md(n,hs(r,n.current)))}function x0(){var n=ss.current;return n===null?!0:(qt&4194048)===qt?is===null:(qt&62914560)===qt||(qt&536870912)!==0?n===is:!1}function w0(){var n=ne.H;return ne.H=ku,n===null?ku:n}function E0(){var n=ne.A;return ne.A=Gw,n}function Cd(){Bn=4,Co||(qt&4194048)!==qt&&ss.current!==null||(xc=!0),(No&134217727)===0&&(Il&134217727)===0||_n===null||Ro(_n,qt,Ls,!1)}function ap(n,r,o){var h=an;an|=2;var y=w0(),w=E0();(_n!==n||qt!==r)&&(Sd=null,Sc(n,r)),r=!1;var j=Bn;e:do try{if(dn!==0&&Vt!==null){var P=Vt,re=Os;switch(dn){case 8:ip(),j=6;break e;case 3:case 2:case 9:case 6:ss.current===null&&(r=!0);var _e=dn;if(dn=0,Os=null,Tc(n,P,re,_e),o&&xc){j=0;break e}break;default:_e=dn,dn=0,Os=null,Tc(n,P,re,_e)}}Qw(),j=Bn;break}catch(Me){_0(n,Me)}while(!0);return r&&n.shellSuspendCounter++,bi=Ea=null,an=h,ne.H=y,ne.A=w,Vt===null&&(_n=null,qt=0,El()),j}function Qw(){for(;Vt!==null;)S0(Vt)}function Kw(n,r){var o=an;an|=2;var h=w0(),y=E0();_n!==n||qt!==r?(Sd=null,Ed=Pt()+500,Sc(n,r)):xc=nn(n,r);e:do try{if(dn!==0&&Vt!==null){r=Vt;var w=Os;t:switch(dn){case 1:dn=0,Os=null,Tc(n,r,w,1);break;case 2:case 9:if(I(w)){dn=0,Os=null,T0(r);break}r=function(){dn!==2&&dn!==9||_n!==n||(dn=7),ea(n)},w.then(r,r);break e;case 3:dn=7;break e;case 4:dn=5;break e;case 7:I(w)?(dn=0,Os=null,T0(r)):(dn=0,Os=null,Tc(n,r,w,7));break;case 5:var j=null;switch(Vt.tag){case 26:j=Vt.memoizedState;case 5:case 27:var P=Vt;if(j?u1(j):P.stateNode.complete){dn=0,Os=null;var re=P.sibling;if(re!==null)Vt=re;else{var _e=P.return;_e!==null?(Vt=_e,Nd(_e)):Vt=null}break t}}dn=0,Os=null,Tc(n,r,w,5);break;case 6:dn=0,Os=null,Tc(n,r,w,6);break;case 8:ip(),Bn=6;break e;default:throw Error(i(462))}}Xw();break}catch(Me){_0(n,Me)}while(!0);return bi=Ea=null,ne.H=h,ne.A=y,an=o,Vt!==null?0:(_n=null,qt=0,El(),Bn)}function Xw(){for(;Vt!==null&&!Sn();)S0(Vt)}function S0(n){var r=Yy(n.alternate,n,Ma);n.memoizedProps=n.pendingProps,r===null?Nd(n):Vt=r}function T0(n){var r=n,o=r.alternate;switch(r.tag){case 15:case 0:r=Fy(o,r,r.pendingProps,r.type,void 0,qt);break;case 11:r=Fy(o,r,r.pendingProps,r.type.render,r.ref,qt);break;case 5:xm(r);default:Ky(o,r),r=Vt=ed(r,Ma),r=Yy(o,r,Ma)}n.memoizedProps=n.pendingProps,r===null?Nd(n):Vt=r}function Tc(n,r,o,h){bi=Ea=null,xm(r),oe=null,we=0;var y=r.return;try{if(Uw(n,y,r,o,qt)){Bn=1,md(n,hs(o,n.current)),Vt=null;return}}catch(w){if(y!==null)throw Vt=y,w;Bn=1,md(n,hs(o,n.current)),Vt=null;return}r.flags&32768?(Dt||h===1?n=!0:xc||(qt&536870912)!==0?n=!1:(Co=n=!0,(h===2||h===9||h===3||h===6)&&(h=ss.current,h!==null&&h.tag===13&&(h.flags|=16384))),C0(r,n)):Nd(r)}function Nd(n){var r=n;do{if((r.flags&32768)!==0){C0(r,Co);return}n=r.return;var o=Fw(r.alternate,r,Ma);if(o!==null){Vt=o;return}if(r=r.sibling,r!==null){Vt=r;return}Vt=r=n}while(r!==null);Bn===0&&(Bn=5)}function C0(n,r){do{var o=qw(n.alternate,n);if(o!==null){o.flags&=32767,Vt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(n=n.sibling,n!==null)){Vt=n;return}Vt=n=o}while(n!==null);Bn=6,Vt=null}function N0(n,r,o,h,y,w,j,P,re){n.cancelPendingCommit=null;do Ad();while(gr!==0);if((an&6)!==0)throw Error(i(327));if(r!==null){if(r===n.current)throw Error(i(177));if(w=r.lanes|r.childLanes,w|=bu,Sr(n,o,w,j,P,re),n===_n&&(Vt=_n=null,qt=0),Ec=r,jo=n,Oa=o,np=w,rp=y,g0=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,tE(Or,function(){return D0(),null})):(n.callbackNode=null,n.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=ne.T,ne.T=null,y=Ee.p,Ee.p=2,j=an,an|=4;try{Hw(n,r,o)}finally{an=j,Ee.p=y,ne.T=h}}gr=1,A0(),j0(),R0()}}function A0(){if(gr===1){gr=0;var n=jo,r=Ec,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=ne.T,ne.T=null;var h=Ee.p;Ee.p=2;var y=an;an|=4;try{l0(r,n);var w=yp,j=gu(n.containerInfo),P=w.focusedElem,re=w.selectionRange;if(j!==P&&P&&P.ownerDocument&&Yh(P.ownerDocument.documentElement,P)){if(re!==null&&ac(P)){var _e=re.start,Me=re.end;if(Me===void 0&&(Me=_e),"selectionStart"in P)P.selectionStart=_e,P.selectionEnd=Math.min(Me,P.value.length);else{var ze=P.ownerDocument||document,Se=ze&&ze.defaultView||window;if(Se.getSelection){var Ne=Se.getSelection(),tt=P.textContent.length,mt=Math.min(re.start,tt),bn=re.end===void 0?mt:Math.min(re.end,tt);!Ne.extend&&mt>bn&&(j=bn,bn=mt,mt=j);var me=pu(P,mt),le=pu(P,bn);if(me&&le&&(Ne.rangeCount!==1||Ne.anchorNode!==me.node||Ne.anchorOffset!==me.offset||Ne.focusNode!==le.node||Ne.focusOffset!==le.offset)){var be=ze.createRange();be.setStart(me.node,me.offset),Ne.removeAllRanges(),mt>bn?(Ne.addRange(be),Ne.extend(le.node,le.offset)):(be.setEnd(le.node,le.offset),Ne.addRange(be))}}}}for(ze=[],Ne=P;Ne=Ne.parentNode;)Ne.nodeType===1&&ze.push({element:Ne,left:Ne.scrollLeft,top:Ne.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<ze.length;P++){var Pe=ze[P];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}Bd=!!vp,yp=vp=null}finally{an=y,Ee.p=h,ne.T=o}}n.current=r,gr=2}}function j0(){if(gr===2){gr=0;var n=jo,r=Ec,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=ne.T,ne.T=null;var h=Ee.p;Ee.p=2;var y=an;an|=4;try{r0(n,r.alternate,r)}finally{an=y,Ee.p=h,ne.T=o}}gr=3}}function R0(){if(gr===4||gr===3){gr=0,Mr();var n=jo,r=Ec,o=Oa,h=g0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?gr=5:(gr=0,Ec=jo=null,k0(n,n.pendingLanes));var y=n.pendingLanes;if(y===0&&(Ao=null),je(o),r=r.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(zn,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=ne.T,y=Ee.p,Ee.p=2,ne.T=null;try{for(var w=n.onRecoverableError,j=0;j<h.length;j++){var P=h[j];w(P.value,{componentStack:P.stack})}}finally{ne.T=r,Ee.p=y}}(Oa&3)!==0&&Ad(),ea(n),y=n.pendingLanes,(o&261930)!==0&&(y&42)!==0?n===sp?Bu++:(Bu=0,sp=n):Bu=0,zu(0)}}function k0(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,jl(r)))}function Ad(){return A0(),j0(),R0(),D0()}function D0(){if(gr!==5)return!1;var n=jo,r=np;np=0;var o=je(Oa),h=ne.T,y=Ee.p;try{Ee.p=32>o?32:o,ne.T=null,o=rp,rp=null;var w=jo,j=Oa;if(gr=0,Ec=jo=null,Oa=0,(an&6)!==0)throw Error(i(331));var P=an;if(an|=4,f0(w.current),u0(w,w.current,j,o),an=P,zu(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(zn,w)}catch{}return!0}finally{Ee.p=y,ne.T=h,k0(n,r)}}function I0(n,r,o){r=hs(o,r),r=Lm(n.stateNode,r,2),n=gn(n,r,2),n!==null&&(qn(n,2),ea(n))}function fn(n,r,o){if(n.tag===3)I0(n,n,o);else for(;r!==null;){if(r.tag===3){I0(r,n,o);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ao===null||!Ao.has(h))){n=hs(o,n),o=My(2),h=gn(r,o,2),h!==null&&(Oy(o,h,r,n),qn(h,2),ea(h));break}}r=r.return}}function op(n,r,o){var h=n.pingCache;if(h===null){h=n.pingCache=new Ww;var y=new Set;h.set(r,y)}else y=h.get(r),y===void 0&&(y=new Set,h.set(r,y));y.has(o)||(Zm=!0,y.add(o),n=Jw.bind(null,n,r,o),r.then(n,n))}function Jw(n,r,o){var h=n.pingCache;h!==null&&h.delete(r),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,_n===n&&(qt&o)===o&&(Bn===4||Bn===3&&(qt&62914560)===qt&&300>Pt()-wd?(an&2)===0&&Sc(n,0):ep|=o,wc===qt&&(wc=0)),ea(n)}function M0(n,r){r===0&&(r=Kr()),n=Wi(n,r),n!==null&&(qn(n,r),ea(n))}function Zw(n){var r=n.memoizedState,o=0;r!==null&&(o=r.retryLane),M0(n,o)}function eE(n,r){var o=0;switch(n.tag){case 31:case 13:var h=n.stateNode,y=n.memoizedState;y!==null&&(o=y.retryLane);break;case 19:h=n.stateNode;break;case 22:h=n.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(r),M0(n,o)}function tE(n,r){return Lt(n,r)}var jd=null,Cc=null,lp=!1,Rd=!1,cp=!1,ko=0;function ea(n){n!==Cc&&n.next===null&&(Cc===null?jd=Cc=n:Cc=Cc.next=n),Rd=!0,lp||(lp=!0,rE())}function zu(n,r){if(!cp&&Rd){cp=!0;do for(var o=!1,h=jd;h!==null;){if(n!==0){var y=h.pendingLanes;if(y===0)var w=0;else{var j=h.suspendedLanes,P=h.pingedLanes;w=(1<<31-zt(42|n)+1)-1,w&=y&~(j&~P),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(o=!0,V0(h,w))}else w=qt,w=Dn(h,h===_n?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||nn(h,w)||(o=!0,V0(h,w));h=h.next}while(o);cp=!1}}function nE(){O0()}function O0(){Rd=lp=!1;var n=0;ko!==0&&fE()&&(n=ko);for(var r=Pt(),o=null,h=jd;h!==null;){var y=h.next,w=L0(h,r);w===0?(h.next=null,o===null?jd=y:o.next=y,y===null&&(Cc=o)):(o=h,(n!==0||(w&3)!==0)&&(Rd=!0)),h=y}gr!==0&&gr!==5||zu(n),ko!==0&&(ko=0)}function L0(n,r){for(var o=n.suspendedLanes,h=n.pingedLanes,y=n.expirationTimes,w=n.pendingLanes&-62914561;0<w;){var j=31-zt(w),P=1<<j,re=y[j];re===-1?((P&o)===0||(P&h)!==0)&&(y[j]=Zn(P,r)):re<=r&&(n.expiredLanes|=P),w&=~P}if(r=_n,o=qt,o=Dn(n,n===r?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h=n.callbackNode,o===0||n===r&&(dn===2||dn===9)||n.cancelPendingCommit!==null)return h!==null&&h!==null&&br(h),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||nn(n,o)){if(r=o&-o,r===n.callbackPriority)return r;switch(h!==null&&br(h),je(o)){case 2:case 8:o=Qr;break;case 32:o=Or;break;case 268435456:o=Lr;break;default:o=Or}return h=P0.bind(null,n),o=Lt(o,h),n.callbackPriority=r,n.callbackNode=o,r}return h!==null&&h!==null&&br(h),n.callbackPriority=2,n.callbackNode=null,2}function P0(n,r){if(gr!==0&&gr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Ad()&&n.callbackNode!==o)return null;var h=qt;return h=Dn(n,n===_n?h:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),h===0?null:(y0(n,h,r),L0(n,Pt()),n.callbackNode!=null&&n.callbackNode===o?P0.bind(null,n):null)}function V0(n,r){if(Ad())return null;y0(n,r,!0)}function rE(){pE(function(){(an&6)!==0?Lt(Yr,nE):O0()})}function up(){if(ko===0){var n=wo;n===0&&(n=dt,dt<<=1,(dt&261888)===0&&(dt=256)),ko=n}return ko}function U0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:io(""+n)}function B0(n,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,n.id&&o.setAttribute("form",n.id),r.parentNode.insertBefore(o,r),n=new FormData(n),o.parentNode.removeChild(o),n}function sE(n,r,o,h,y){if(r==="submit"&&o&&o.stateNode===y){var w=U0((y[bt]||null).action),j=h.submitter;j&&(r=(r=j[bt]||null)?U0(r.formAction):j.getAttribute("formAction"),r!==null&&(w=r,j=null));var P=new nr("action","action",null,h,y);n.push({event:P,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ko!==0){var re=j?B0(y,j):new FormData(y);Rm(o,{pending:!0,data:re,method:y.method,action:w},null,re)}}else typeof w=="function"&&(P.preventDefault(),re=j?B0(y,j):new FormData(y),Rm(o,{pending:!0,data:re,method:y.method,action:w},w,re))},currentTarget:y}]})}}for(var hp=0;hp<oc.length;hp++){var dp=oc[hp],iE=dp.toLowerCase(),aE=dp[0].toUpperCase()+dp.slice(1);dr(iE,"on"+aE)}dr(Kh,"onAnimationEnd"),dr(Xh,"onAnimationIteration"),dr(Jh,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(mm,"onTransitionRun"),dr(pm,"onTransitionStart"),dr(vu,"onTransitionCancel"),dr(yu,"onTransitionEnd"),Hs("onMouseEnter",["mouseout","mouseover"]),Hs("onMouseLeave",["mouseout","mouseover"]),Hs("onPointerEnter",["pointerout","pointerover"]),Hs("onPointerLeave",["pointerout","pointerover"]),qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qs("onBeforeInput",["compositionend","keypress","textInput","paste"]),qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fu));function z0(n,r){r=(r&4)!==0;for(var o=0;o<n.length;o++){var h=n[o],y=h.event;h=h.listeners;e:{var w=void 0;if(r)for(var j=h.length-1;0<=j;j--){var P=h[j],re=P.instance,_e=P.currentTarget;if(P=P.listener,re!==w&&y.isPropagationStopped())break e;w=P,y.currentTarget=_e;try{w(y)}catch(Me){lc(Me)}y.currentTarget=null,w=re}else for(j=0;j<h.length;j++){if(P=h[j],re=P.instance,_e=P.currentTarget,P=P.listener,re!==w&&y.isPropagationStopped())break e;w=P,y.currentTarget=_e;try{w(y)}catch(Me){lc(Me)}y.currentTarget=null,w=re}}}}function Ut(n,r){var o=r[er];o===void 0&&(o=r[er]=new Set);var h=n+"__bubble";o.has(h)||(F0(r,n,2,!1),o.add(h))}function fp(n,r,o){var h=0;r&&(h|=4),F0(o,n,h,r)}var kd="_reactListening"+Math.random().toString(36).slice(2);function mp(n){if(!n[kd]){n[kd]=!0,al.forEach(function(o){o!=="selectionchange"&&(oE.has(o)||fp(o,!1,n),fp(o,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[kd]||(r[kd]=!0,fp("selectionchange",!1,r))}}function F0(n,r,o,h){switch(v1(r)){case 2:var y=OE;break;case 8:y=LE;break;default:y=jp}o=y.bind(null,r,o,n),y=void 0,!da||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),h?y!==void 0?n.addEventListener(r,o,{capture:!0,passive:y}):n.addEventListener(r,o,!0):y!==void 0?n.addEventListener(r,o,{passive:y}):n.addEventListener(r,o,!1)}function pp(n,r,o,h,y){var w=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var j=h.tag;if(j===3||j===4){var P=h.stateNode.containerInfo;if(P===y)break;if(j===4)for(j=h.return;j!==null;){var re=j.tag;if((re===3||re===4)&&j.stateNode.containerInfo===y)return;j=j.return}for(;P!==null;){if(j=vt(P),j===null)return;if(re=j.tag,re===5||re===6||re===26||re===27){h=w=j;continue e}P=P.parentNode}}h=h.return}Bi(function(){var _e=w,Me=ls(o),ze=[];e:{var Se=Zh.get(n);if(Se!==void 0){var Ne=nr,tt=n;switch(n){case"keypress":if(zi(o)===0)break e;case"keydown":case"keyup":Ne=sc;break;case"focusin":tt="focus",Ne=qi;break;case"focusout":tt="blur",Ne=qi;break;case"beforeblur":case"afterblur":Ne=qi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=Ct;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=$n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=N;break;case Kh:case Xh:case Jh:Ne=tc;break;case yu:Ne=G;break;case"scroll":case"scrollend":Ne=Cn;break;case"wheel":Ne=Te;break;case"copy":case"cut":case"paste":Ne=nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=gi;break;case"toggle":case"beforetoggle":Ne=wt}var mt=(r&4)!==0,bn=!mt&&(n==="scroll"||n==="scrollend"),me=mt?Se!==null?Se+"Capture":null:Se;mt=[];for(var le=_e,be;le!==null;){var Pe=le;if(be=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||be===null||me===null||(Pe=Cs(le,me),Pe!=null&&mt.push(qu(le,Pe,be))),bn)break;le=le.return}0<mt.length&&(Se=new Ne(Se,tt,null,o,Me),ze.push({event:Se,listeners:mt}))}}if((r&7)===0){e:{if(Se=n==="mouseover"||n==="pointerover",Ne=n==="mouseout"||n==="pointerout",Se&&o!==ml&&(tt=o.relatedTarget||o.fromElement)&&(vt(tt)||tt[Mn]))break e;if((Ne||Se)&&(Se=Me.window===Me?Me:(Se=Me.ownerDocument)?Se.defaultView||Se.parentWindow:window,Ne?(tt=o.relatedTarget||o.toElement,Ne=_e,tt=tt?vt(tt):null,tt!==null&&(bn=c(tt),mt=tt.tag,tt!==bn||mt!==5&&mt!==27&&mt!==6)&&(tt=null)):(Ne=null,tt=_e),Ne!==tt)){if(mt=Ct,Pe="onMouseLeave",me="onMouseEnter",le="mouse",(n==="pointerout"||n==="pointerover")&&(mt=gi,Pe="onPointerLeave",me="onPointerEnter",le="pointer"),bn=Ne==null?Se:tr(Ne),be=tt==null?Se:tr(tt),Se=new mt(Pe,le+"leave",Ne,o,Me),Se.target=bn,Se.relatedTarget=be,Pe=null,vt(Me)===_e&&(mt=new mt(me,le+"enter",tt,o,Me),mt.target=be,mt.relatedTarget=bn,Pe=mt),bn=Pe,Ne&&tt)t:{for(mt=lE,me=Ne,le=tt,be=0,Pe=me;Pe;Pe=mt(Pe))be++;Pe=0;for(var ut=le;ut;ut=mt(ut))Pe++;for(;0<be-Pe;)me=mt(me),be--;for(;0<Pe-be;)le=mt(le),Pe--;for(;be--;){if(me===le||le!==null&&me===le.alternate){mt=me;break t}me=mt(me),le=mt(le)}mt=null}else mt=null;Ne!==null&&q0(ze,Se,Ne,mt,!1),tt!==null&&bn!==null&&q0(ze,bn,tt,mt,!0)}}e:{if(Se=_e?tr(_e):window,Ne=Se.nodeName&&Se.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&Se.type==="file")var en=Hh;else if(Fh(Se))if(uu)en=Wh;else{en=Gh;var st=hm}else Ne=Se.nodeName,!Ne||Ne.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?_e&&so(_e.elementType)&&(en=Hh):en=xl;if(en&&(en=en(n,_e))){cu(ze,en,o,Me);break e}st&&st(n,Se,_e),n==="focusout"&&_e&&Se.type==="number"&&_e.memoizedProps.value!=null&&hl(Se,"number",Se.value)}switch(st=_e?tr(_e):window,n){case"focusin":(Fh(st)||st.contentEditable==="true")&&(va=st,mo=_e,Hi=null);break;case"focusout":Hi=mo=va=null;break;case"mousedown":po=!0;break;case"contextmenu":case"mouseup":case"dragend":po=!1,Qh(ze,o,Me);break;case"selectionchange":if(fm)break;case"keydown":case"keyup":Qh(ze,o,Me)}var Rt;if(Kt)e:{switch(n){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else ga?vi(n,o)&&(Ht="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ht="onCompositionStart");Ht&&(Ks&&o.locale!=="ko"&&(ga||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&ga&&(Rt=ao()):(Gs=Me,pl="value"in Gs?Gs.value:Gs.textContent,ga=!0)),st=Dd(_e,Ht),0<st.length&&(Ht=new Qs(Ht,n,null,o,Me),ze.push({event:Ht,listeners:st}),Rt?Ht.data=Rt:(Rt=pa(o),Rt!==null&&(Ht.data=Rt)))),(Rt=cs?zh(n,o):lu(n,o))&&(Ht=Dd(_e,"onBeforeInput"),0<Ht.length&&(st=new Qs("onBeforeInput","beforeinput",null,o,Me),ze.push({event:st,listeners:Ht}),st.data=Rt)),sE(ze,n,_e,o,Me)}z0(ze,r)})}function qu(n,r,o){return{instance:n,listener:r,currentTarget:o}}function Dd(n,r){for(var o=r+"Capture",h=[];n!==null;){var y=n,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=Cs(n,o),y!=null&&h.unshift(qu(n,y,w)),y=Cs(n,r),y!=null&&h.push(qu(n,y,w))),n.tag===3)return h;n=n.return}return[]}function lE(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function q0(n,r,o,h,y){for(var w=r._reactName,j=[];o!==null&&o!==h;){var P=o,re=P.alternate,_e=P.stateNode;if(P=P.tag,re!==null&&re===h)break;P!==5&&P!==26&&P!==27||_e===null||(re=_e,y?(_e=Cs(o,w),_e!=null&&j.unshift(qu(o,_e,re))):y||(_e=Cs(o,w),_e!=null&&j.push(qu(o,_e,re)))),o=o.return}j.length!==0&&n.push({event:r,listeners:j})}var cE=/\r\n?/g,uE=/\u0000|\uFFFD/g;function H0(n){return(typeof n=="string"?n:""+n).replace(cE,`
`).replace(uE,"")}function $0(n,r){return r=H0(r),H0(n)===r}function yn(n,r,o,h,y,w){switch(o){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||Vr(n,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&Vr(n,""+h);break;case"className":Xr(n,"class",h);break;case"tabIndex":Xr(n,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(n,o,h);break;case"style":fl(n,h,w);break;case"data":if(r!=="object"){Xr(n,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||o!=="href")){n.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(o);break}h=io(""+h),n.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(o==="formAction"?(r!=="input"&&yn(n,r,"name",y.name,y,null),yn(n,r,"formEncType",y.formEncType,y,null),yn(n,r,"formMethod",y.formMethod,y,null),yn(n,r,"formTarget",y.formTarget,y,null)):(yn(n,r,"encType",y.encType,y,null),yn(n,r,"method",y.method,y,null),yn(n,r,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){n.removeAttribute(o);break}h=io(""+h),n.setAttribute(o,h);break;case"onClick":h!=null&&(n.onclick=Ts);break;case"onScroll":h!=null&&Ut("scroll",n);break;case"onScrollEnd":h!=null&&Ut("scrollend",n);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(o=h.__html,o!=null){if(y.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":n.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){n.removeAttribute("xlink:href");break}o=io(""+h),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,""+h):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":h===!0?n.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?n.setAttribute(o,h):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?n.setAttribute(o,h):n.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?n.removeAttribute(o):n.setAttribute(o,h);break;case"popover":Ut("beforetoggle",n),Ut("toggle",n),no(n,"popover",h);break;case"xlinkActuate":Ln(n,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ln(n,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ln(n,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ln(n,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ln(n,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ln(n,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ln(n,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ln(n,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ln(n,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":no(n,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ec.get(o)||o,no(n,o,h))}}function gp(n,r,o,h,y,w){switch(o){case"style":fl(n,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(o=h.__html,o!=null){if(y.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof h=="string"?Vr(n,h):(typeof h=="number"||typeof h=="bigint")&&Vr(n,""+h);break;case"onScroll":h!=null&&Ut("scroll",n);break;case"onScrollEnd":h!=null&&Ut("scrollend",n);break;case"onClick":h!=null&&(n.onclick=Ts);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(y=o.endsWith("Capture"),r=o.slice(2,y?o.length-7:void 0),w=n[bt]||null,w=w!=null?w[o]:null,typeof w=="function"&&n.removeEventListener(r,w,y),typeof h=="function")){typeof w!="function"&&w!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(r,h,y);break e}o in n?n[o]=h:h===!0?n.setAttribute(o,""):no(n,o,h)}}}function jr(n,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",n),Ut("load",n);var h=!1,y=!1,w;for(w in o)if(o.hasOwnProperty(w)){var j=o[w];if(j!=null)switch(w){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:yn(n,r,w,j,o,null)}}y&&yn(n,r,"srcSet",o.srcSet,o,null),h&&yn(n,r,"src",o.src,o,null);return;case"input":Ut("invalid",n);var P=w=j=y=null,re=null,_e=null;for(h in o)if(o.hasOwnProperty(h)){var Me=o[h];if(Me!=null)switch(h){case"name":y=Me;break;case"type":j=Me;break;case"checked":re=Me;break;case"defaultChecked":_e=Me;break;case"value":w=Me;break;case"defaultValue":P=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(i(137,r));break;default:yn(n,r,h,Me,o,null)}}Xl(n,w,P,re,_e,j,y,!1);return;case"select":Ut("invalid",n),h=j=w=null;for(y in o)if(o.hasOwnProperty(y)&&(P=o[y],P!=null))switch(y){case"value":w=P;break;case"defaultValue":j=P;break;case"multiple":h=P;default:yn(n,r,y,P,o,null)}r=w,o=j,n.multiple=!!h,r!=null?Oi(n,!!h,r,!1):o!=null&&Oi(n,!!h,o,!0);return;case"textarea":Ut("invalid",n),w=y=h=null;for(j in o)if(o.hasOwnProperty(j)&&(P=o[j],P!=null))switch(j){case"value":h=P;break;case"defaultValue":y=P;break;case"children":w=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:yn(n,r,j,P,o,null)}Li(n,h,y,w);return;case"option":for(re in o)o.hasOwnProperty(re)&&(h=o[re],h!=null)&&(re==="selected"?n.selected=h&&typeof h!="function"&&typeof h!="symbol":yn(n,r,re,h,o,null));return;case"dialog":Ut("beforetoggle",n),Ut("toggle",n),Ut("cancel",n),Ut("close",n);break;case"iframe":case"object":Ut("load",n);break;case"video":case"audio":for(h=0;h<Fu.length;h++)Ut(Fu[h],n);break;case"image":Ut("error",n),Ut("load",n);break;case"details":Ut("toggle",n);break;case"embed":case"source":case"link":Ut("error",n),Ut("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in o)if(o.hasOwnProperty(_e)&&(h=o[_e],h!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:yn(n,r,_e,h,o,null)}return;default:if(so(r)){for(Me in o)o.hasOwnProperty(Me)&&(h=o[Me],h!==void 0&&gp(n,r,Me,h,o,void 0));return}}for(P in o)o.hasOwnProperty(P)&&(h=o[P],h!=null&&yn(n,r,P,h,o,null))}function hE(n,r,o,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,j=null,P=null,re=null,_e=null,Me=null;for(Ne in o){var ze=o[Ne];if(o.hasOwnProperty(Ne)&&ze!=null)switch(Ne){case"checked":break;case"value":break;case"defaultValue":re=ze;default:h.hasOwnProperty(Ne)||yn(n,r,Ne,null,h,ze)}}for(var Se in h){var Ne=h[Se];if(ze=o[Se],h.hasOwnProperty(Se)&&(Ne!=null||ze!=null))switch(Se){case"type":w=Ne;break;case"name":y=Ne;break;case"checked":_e=Ne;break;case"defaultChecked":Me=Ne;break;case"value":j=Ne;break;case"defaultValue":P=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(i(137,r));break;default:Ne!==ze&&yn(n,r,Se,Ne,h,ze)}}ro(n,j,P,re,_e,Me,w,y);return;case"select":Ne=j=P=Se=null;for(w in o)if(re=o[w],o.hasOwnProperty(w)&&re!=null)switch(w){case"value":break;case"multiple":Ne=re;default:h.hasOwnProperty(w)||yn(n,r,w,null,h,re)}for(y in h)if(w=h[y],re=o[y],h.hasOwnProperty(y)&&(w!=null||re!=null))switch(y){case"value":Se=w;break;case"defaultValue":P=w;break;case"multiple":j=w;default:w!==re&&yn(n,r,y,w,h,re)}r=P,o=j,h=Ne,Se!=null?Oi(n,!!o,Se,!1):!!h!=!!o&&(r!=null?Oi(n,!!o,r,!0):Oi(n,!!o,o?[]:"",!1));return;case"textarea":Ne=Se=null;for(P in o)if(y=o[P],o.hasOwnProperty(P)&&y!=null&&!h.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:yn(n,r,P,null,h,y)}for(j in h)if(y=h[j],w=o[j],h.hasOwnProperty(j)&&(y!=null||w!=null))switch(j){case"value":Se=y;break;case"defaultValue":Ne=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==w&&yn(n,r,j,y,h,w)}Jl(n,Se,Ne);return;case"option":for(var tt in o)Se=o[tt],o.hasOwnProperty(tt)&&Se!=null&&!h.hasOwnProperty(tt)&&(tt==="selected"?n.selected=!1:yn(n,r,tt,null,h,Se));for(re in h)Se=h[re],Ne=o[re],h.hasOwnProperty(re)&&Se!==Ne&&(Se!=null||Ne!=null)&&(re==="selected"?n.selected=Se&&typeof Se!="function"&&typeof Se!="symbol":yn(n,r,re,Se,h,Ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in o)Se=o[mt],o.hasOwnProperty(mt)&&Se!=null&&!h.hasOwnProperty(mt)&&yn(n,r,mt,null,h,Se);for(_e in h)if(Se=h[_e],Ne=o[_e],h.hasOwnProperty(_e)&&Se!==Ne&&(Se!=null||Ne!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(i(137,r));break;default:yn(n,r,_e,Se,h,Ne)}return;default:if(so(r)){for(var bn in o)Se=o[bn],o.hasOwnProperty(bn)&&Se!==void 0&&!h.hasOwnProperty(bn)&&gp(n,r,bn,void 0,h,Se);for(Me in h)Se=h[Me],Ne=o[Me],!h.hasOwnProperty(Me)||Se===Ne||Se===void 0&&Ne===void 0||gp(n,r,Me,Se,h,Ne);return}}for(var me in o)Se=o[me],o.hasOwnProperty(me)&&Se!=null&&!h.hasOwnProperty(me)&&yn(n,r,me,null,h,Se);for(ze in h)Se=h[ze],Ne=o[ze],!h.hasOwnProperty(ze)||Se===Ne||Se==null&&Ne==null||yn(n,r,ze,Se,h,Ne)}function G0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dE(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,o=performance.getEntriesByType("resource"),h=0;h<o.length;h++){var y=o[h],w=y.transferSize,j=y.initiatorType,P=y.duration;if(w&&P&&G0(j)){for(j=0,P=y.responseEnd,h+=1;h<o.length;h++){var re=o[h],_e=re.startTime;if(_e>P)break;var Me=re.transferSize,ze=re.initiatorType;Me&&G0(ze)&&(re=re.responseEnd,j+=Me*(re<P?1:(P-_e)/(re-_e)))}if(--h,r+=8*(w+j)/(y.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var vp=null,yp=null;function Id(n){return n.nodeType===9?n:n.ownerDocument}function W0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Y0(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function bp(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var _p=null;function fE(){var n=window.event;return n&&n.type==="popstate"?n===_p?!1:(_p=n,!0):(_p=null,!1)}var Q0=typeof setTimeout=="function"?setTimeout:void 0,mE=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,pE=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(n){return K0.resolve(null).then(n).catch(gE)}:Q0;function gE(n){setTimeout(function(){throw n})}function Do(n){return n==="head"}function X0(n,r){var o=r,h=0;do{var y=o.nextSibling;if(n.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"||o==="/&"){if(h===0){n.removeChild(y),Rc(r);return}h--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")h++;else if(o==="html")Hu(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Hu(o);for(var w=o.firstChild;w;){var j=w.nextSibling,P=w.nodeName;w[os]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&w.rel.toLowerCase()==="stylesheet"||o.removeChild(w),w=j}}else o==="body"&&Hu(n.ownerDocument.body);o=y}while(o);Rc(r)}function J0(n,r){var o=n;n=0;do{var h=o.nextSibling;if(o.nodeType===1?r?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(r?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=h}while(o)}function xp(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":xp(o),di(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function vE(n,r,o,h){for(;n.nodeType===1;){var y=o;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(h){if(!n[os])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(w=n.getAttribute("rel"),w==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(w!==y.rel||n.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||n.getAttribute("title")!==(y.title==null?null:y.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(w=n.getAttribute("src"),(w!==(y.src==null?null:y.src)||n.getAttribute("type")!==(y.type==null?null:y.type)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&n.getAttribute("name")===w)return n}else return n;if(n=ii(n.nextSibling),n===null)break}return null}function yE(n,r,o){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=ii(n.nextSibling),n===null))return null;return n}function Z0(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=ii(n.nextSibling),n===null))return null;return n}function wp(n){return n.data==="$?"||n.data==="$~"}function Ep(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function bE(n,r){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||o.readyState!=="loading")r();else{var h=function(){r(),o.removeEventListener("DOMContentLoaded",h)};o.addEventListener("DOMContentLoaded",h),n._reactRetry=h}}function ii(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var Sp=null;function e1(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(r===0)return ii(n.nextSibling);r--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||r++}n=n.nextSibling}return null}function t1(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(r===0)return n;r--}else o!=="/$"&&o!=="/&"||r++}n=n.previousSibling}return null}function n1(n,r,o){switch(r=Id(o),n){case"html":if(n=r.documentElement,!n)throw Error(i(452));return n;case"head":if(n=r.head,!n)throw Error(i(453));return n;case"body":if(n=r.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Hu(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);di(n)}var ai=new Map,r1=new Set;function Md(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var La=Ee.d;Ee.d={f:_E,r:xE,D:wE,C:EE,L:SE,m:TE,X:NE,S:CE,M:AE};function _E(){var n=La.f(),r=Td();return n||r}function xE(n){var r=Hn(n);r!==null&&r.tag===5&&r.type==="form"?_y(r):La.r(n)}var Nc=typeof document>"u"?null:document;function s1(n,r,o){var h=Nc;if(h&&typeof r=="string"&&r){var y=Pr(r);y='link[rel="'+n+'"][href="'+y+'"]',typeof o=="string"&&(y+='[crossorigin="'+o+'"]'),r1.has(y)||(r1.add(y),n={rel:n,crossOrigin:o,href:r},h.querySelector(y)===null&&(r=h.createElement("link"),jr(r,"link",n),On(r),h.head.appendChild(r)))}}function wE(n){La.D(n),s1("dns-prefetch",n,null)}function EE(n,r){La.C(n,r),s1("preconnect",n,r)}function SE(n,r,o){La.L(n,r,o);var h=Nc;if(h&&n&&r){var y='link[rel="preload"][as="'+Pr(r)+'"]';r==="image"&&o&&o.imageSrcSet?(y+='[imagesrcset="'+Pr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(y+='[imagesizes="'+Pr(o.imageSizes)+'"]')):y+='[href="'+Pr(n)+'"]';var w=y;switch(r){case"style":w=Ac(n);break;case"script":w=jc(n)}ai.has(w)||(n=C({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:n,as:r},o),ai.set(w,n),h.querySelector(y)!==null||r==="style"&&h.querySelector($u(w))||r==="script"&&h.querySelector(Gu(w))||(r=h.createElement("link"),jr(r,"link",n),On(r),h.head.appendChild(r)))}}function TE(n,r){La.m(n,r);var o=Nc;if(o&&n){var h=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Pr(h)+'"][href="'+Pr(n)+'"]',w=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=jc(n)}if(!ai.has(w)&&(n=C({rel:"modulepreload",href:n},r),ai.set(w,n),o.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gu(w)))return}h=o.createElement("link"),jr(h,"link",n),On(h),o.head.appendChild(h)}}}function CE(n,r,o){La.S(n,r,o);var h=Nc;if(h&&n){var y=Fs(h).hoistableStyles,w=Ac(n);r=r||"default";var j=y.get(w);if(!j){var P={loading:0,preload:null};if(j=h.querySelector($u(w)))P.loading=5;else{n=C({rel:"stylesheet",href:n,"data-precedence":r},o),(o=ai.get(w))&&Tp(n,o);var re=j=h.createElement("link");On(re),jr(re,"link",n),re._p=new Promise(function(_e,Me){re.onload=_e,re.onerror=Me}),re.addEventListener("load",function(){P.loading|=1}),re.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Od(j,r,h)}j={type:"stylesheet",instance:j,count:1,state:P},y.set(w,j)}}}function NE(n,r){La.X(n,r);var o=Nc;if(o&&n){var h=Fs(o).hoistableScripts,y=jc(n),w=h.get(y);w||(w=o.querySelector(Gu(y)),w||(n=C({src:n,async:!0},r),(r=ai.get(y))&&Cp(n,r),w=o.createElement("script"),On(w),jr(w,"link",n),o.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function AE(n,r){La.M(n,r);var o=Nc;if(o&&n){var h=Fs(o).hoistableScripts,y=jc(n),w=h.get(y);w||(w=o.querySelector(Gu(y)),w||(n=C({src:n,async:!0,type:"module"},r),(r=ai.get(y))&&Cp(n,r),w=o.createElement("script"),On(w),jr(w,"link",n),o.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function i1(n,r,o,h){var y=(y=de.current)?Md(y):null;if(!y)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Ac(o.href),o=Fs(y).hoistableStyles,h=o.get(r),h||(h={type:"style",instance:null,count:0,state:null},o.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Ac(o.href);var w=Fs(y).hoistableStyles,j=w.get(n);if(j||(y=y.ownerDocument||y,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(n,j),(w=y.querySelector($u(n)))&&!w._p&&(j.instance=w,j.state.loading=5),ai.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ai.set(n,o),w||jE(y,n,o,j.state))),r&&h===null)throw Error(i(528,""));return j}if(r&&h!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=jc(o),o=Fs(y).hoistableScripts,h=o.get(r),h||(h={type:"script",instance:null,count:0,state:null},o.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ac(n){return'href="'+Pr(n)+'"'}function $u(n){return'link[rel="stylesheet"]['+n+"]"}function a1(n){return C({},n,{"data-precedence":n.precedence,precedence:null})}function jE(n,r,o,h){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=n.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),jr(r,"link",o),On(r),n.head.appendChild(r))}function jc(n){return'[src="'+Pr(n)+'"]'}function Gu(n){return"script[async]"+n}function o1(n,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var h=n.querySelector('style[data-href~="'+Pr(o.href)+'"]');if(h)return r.instance=h,On(h),h;var y=C({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(n.ownerDocument||n).createElement("style"),On(h),jr(h,"style",y),Od(h,o.precedence,n),r.instance=h;case"stylesheet":y=Ac(o.href);var w=n.querySelector($u(y));if(w)return r.state.loading|=4,r.instance=w,On(w),w;h=a1(o),(y=ai.get(y))&&Tp(h,y),w=(n.ownerDocument||n).createElement("link"),On(w);var j=w;return j._p=new Promise(function(P,re){j.onload=P,j.onerror=re}),jr(w,"link",h),r.state.loading|=4,Od(w,o.precedence,n),r.instance=w;case"script":return w=jc(o.src),(y=n.querySelector(Gu(w)))?(r.instance=y,On(y),y):(h=o,(y=ai.get(w))&&(h=C({},o),Cp(h,y)),n=n.ownerDocument||n,y=n.createElement("script"),On(y),jr(y,"link",h),n.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Od(h,o.precedence,n));return r.instance}function Od(n,r,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,w=y,j=0;j<h.length;j++){var P=h[j];if(P.dataset.precedence===r)w=P;else if(w!==y)break}w?w.parentNode.insertBefore(n,w.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(n,r.firstChild))}function Tp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Cp(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Ld=null;function l1(n,r,o){if(Ld===null){var h=new Map,y=Ld=new Map;y.set(o,h)}else y=Ld,h=y.get(o),h||(h=new Map,y.set(o,h));if(h.has(n))return h;for(h.set(n,null),o=o.getElementsByTagName(n),y=0;y<o.length;y++){var w=o[y];if(!(w[os]||w[lt]||n==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var j=w.getAttribute(r)||"";j=n+j;var P=h.get(j);P?P.push(w):h.set(j,[w])}}return h}function c1(n,r,o){n=n.ownerDocument||n,n.head.insertBefore(o,r==="title"?n.querySelector("head > title"):null)}function RE(n,r,o){if(o===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(n=r.disabled,typeof r.precedence=="string"&&n==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function u1(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function kE(n,r,o,h){if(o.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var y=Ac(h.href),w=r.querySelector($u(y));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Pd.bind(n),r.then(n,n)),o.state.loading|=4,o.instance=w,On(w);return}w=r.ownerDocument||r,h=a1(h),(y=ai.get(y))&&Tp(h,y),w=w.createElement("link"),On(w);var j=w;j._p=new Promise(function(P,re){j.onload=P,j.onerror=re}),jr(w,"link",h),o.instance=w}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Pd.bind(n),r.addEventListener("load",o),r.addEventListener("error",o))}}var Np=0;function DE(n,r){return n.stylesheets&&n.count===0&&Ud(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var h=setTimeout(function(){if(n.stylesheets&&Ud(n,n.stylesheets),n.unsuspend){var w=n.unsuspend;n.unsuspend=null,w()}},6e4+r);0<n.imgBytes&&Np===0&&(Np=62500*dE());var y=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ud(n,n.stylesheets),n.unsuspend)){var w=n.unsuspend;n.unsuspend=null,w()}},(n.imgBytes>Np?50:800)+r);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(h),clearTimeout(y)}}:null}function Pd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ud(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Vd=null;function Ud(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Vd=new Map,r.forEach(IE,n),Vd=null,Pd.call(n))}function IE(n,r){if(!(r.state.loading&4)){var o=Vd.get(n);if(o)var h=o.get(null);else{o=new Map,Vd.set(n,o);for(var y=n.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var j=y[w];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(o.set(j.dataset.precedence,j),h=j)}h&&o.set(null,h)}y=r.instance,j=y.getAttribute("data-precedence"),w=o.get(j)||h,w===h&&o.set(null,y),o.set(j,y),this.count++,h=Pd.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),w?w.parentNode.insertBefore(y,w.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(y,n.firstChild)),r.state.loading|=4}}var Wu={$$typeof:ce,Provider:null,Consumer:null,_currentValue:Le,_currentValue2:Le,_threadCount:0};function ME(n,r,o,h,y,w,j,P,re){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=In(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=In(0),this.hiddenUpdates=In(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function h1(n,r,o,h,y,w,j,P,re,_e,Me,ze){return n=new ME(n,r,o,j,re,_e,Me,ze,P),r=1,w===!0&&(r|=24),w=fr(3,null,null,r),n.current=w,w.stateNode=n,r=Nu(),r.refCount++,n.pooledCache=r,r.refCount++,w.memoizedState={element:h,isDehydrated:o,cache:r},It(w),n}function d1(n){return n?(n=_a,n):_a}function f1(n,r,o,h,y,w){y=d1(y),h.context===null?h.context=y:h.pendingContext=y,h=sr(r),h.payload={element:o},w=w===void 0?null:w,w!==null&&(h.callback=w),o=gn(n,h,r),o!==null&&(_s(o,n,r),xi(o,n,r))}function m1(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<r?o:r}}function Ap(n,r){m1(n,r),(n=n.alternate)&&m1(n,r)}function p1(n){if(n.tag===13||n.tag===31){var r=Wi(n,67108864);r!==null&&_s(r,n,67108864),Ap(n,67108864)}}function g1(n){if(n.tag===13||n.tag===31){var r=Ps();r=Z(r);var o=Wi(n,r);o!==null&&_s(o,n,r),Ap(n,r)}}var Bd=!0;function OE(n,r,o,h){var y=ne.T;ne.T=null;var w=Ee.p;try{Ee.p=2,jp(n,r,o,h)}finally{Ee.p=w,ne.T=y}}function LE(n,r,o,h){var y=ne.T;ne.T=null;var w=Ee.p;try{Ee.p=8,jp(n,r,o,h)}finally{Ee.p=w,ne.T=y}}function jp(n,r,o,h){if(Bd){var y=Rp(h);if(y===null)pp(n,r,h,zd,o),y1(n,h);else if(VE(y,n,r,o,h))h.stopPropagation();else if(y1(n,h),r&4&&-1<PE.indexOf(n)){for(;y!==null;){var w=Hn(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var j=cn(w.pendingLanes);if(j!==0){var P=w;for(P.pendingLanes|=2,P.entangledLanes|=2;j;){var re=1<<31-zt(j);P.entanglements[1]|=re,j&=~re}ea(w),(an&6)===0&&(Ed=Pt()+500,zu(0))}}break;case 31:case 13:P=Wi(w,2),P!==null&&_s(P,w,2),Td(),Ap(w,2)}if(w=Rp(h),w===null&&pp(n,r,h,zd,o),w===y)break;y=w}y!==null&&h.stopPropagation()}else pp(n,r,h,null,o)}}function Rp(n){return n=ls(n),kp(n)}var zd=null;function kp(n){if(zd=null,n=vt(n),n!==null){var r=c(n);if(r===null)n=null;else{var o=r.tag;if(o===13){if(n=u(r),n!==null)return n;n=null}else if(o===31){if(n=f(r),n!==null)return n;n=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return zd=n,null}function v1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Er()){case Yr:return 2;case Qr:return 8;case Or:case Ss:return 32;case Lr:return 268435456;default:return 32}default:return 32}}var Dp=!1,Io=null,Mo=null,Oo=null,Yu=new Map,Qu=new Map,Lo=[],PE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function y1(n,r){switch(n){case"focusin":case"focusout":Io=null;break;case"dragenter":case"dragleave":Mo=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":Yu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qu.delete(r.pointerId)}}function Ku(n,r,o,h,y,w){return n===null||n.nativeEvent!==w?(n={blockedOn:r,domEventName:o,eventSystemFlags:h,nativeEvent:w,targetContainers:[y]},r!==null&&(r=Hn(r),r!==null&&p1(r)),n):(n.eventSystemFlags|=h,r=n.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),n)}function VE(n,r,o,h,y){switch(r){case"focusin":return Io=Ku(Io,n,r,o,h,y),!0;case"dragenter":return Mo=Ku(Mo,n,r,o,h,y),!0;case"mouseover":return Oo=Ku(Oo,n,r,o,h,y),!0;case"pointerover":var w=y.pointerId;return Yu.set(w,Ku(Yu.get(w)||null,n,r,o,h,y)),!0;case"gotpointercapture":return w=y.pointerId,Qu.set(w,Ku(Qu.get(w)||null,n,r,o,h,y)),!0}return!1}function b1(n){var r=vt(n.target);if(r!==null){var o=c(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){n.blockedOn=r,Qe(n.priority,function(){g1(o)});return}}else if(r===31){if(r=f(o),r!==null){n.blockedOn=r,Qe(n.priority,function(){g1(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Fd(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var o=Rp(n.nativeEvent);if(o===null){o=n.nativeEvent;var h=new o.constructor(o.type,o);ml=h,o.target.dispatchEvent(h),ml=null}else return r=Hn(o),r!==null&&p1(r),n.blockedOn=o,!1;r.shift()}return!0}function _1(n,r,o){Fd(n)&&o.delete(r)}function UE(){Dp=!1,Io!==null&&Fd(Io)&&(Io=null),Mo!==null&&Fd(Mo)&&(Mo=null),Oo!==null&&Fd(Oo)&&(Oo=null),Yu.forEach(_1),Qu.forEach(_1)}function qd(n,r){n.blockedOn===r&&(n.blockedOn=null,Dp||(Dp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,UE)))}var Hd=null;function x1(n){Hd!==n&&(Hd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Hd===n&&(Hd=null);for(var r=0;r<n.length;r+=3){var o=n[r],h=n[r+1],y=n[r+2];if(typeof h!="function"){if(kp(h||o)===null)continue;break}var w=Hn(o);w!==null&&(n.splice(r,3),r-=3,Rm(w,{pending:!0,data:y,method:o.method,action:h},h,y))}}))}function Rc(n){function r(re){return qd(re,n)}Io!==null&&qd(Io,n),Mo!==null&&qd(Mo,n),Oo!==null&&qd(Oo,n),Yu.forEach(r),Qu.forEach(r);for(var o=0;o<Lo.length;o++){var h=Lo[o];h.blockedOn===n&&(h.blockedOn=null)}for(;0<Lo.length&&(o=Lo[0],o.blockedOn===null);)b1(o),o.blockedOn===null&&Lo.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var y=o[h],w=o[h+1],j=y[bt]||null;if(typeof w=="function")j||x1(o);else if(j){var P=null;if(w&&w.hasAttribute("formAction")){if(y=w,j=w[bt]||null)P=j.formAction;else if(kp(y)!==null)continue}else P=j.action;typeof P=="function"?o[h+1]=P:(o.splice(h,3),h-=3),x1(o)}}}function w1(){function n(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(j){return y=j})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),h||setTimeout(o,20)}function o(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,y=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(o,100),function(){h=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Ip(n){this._internalRoot=n}$d.prototype.render=Ip.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,h=Ps();f1(o,h,n,r,null,null)},$d.prototype.unmount=Ip.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;f1(n.current,2,null,n,null,null),Td(),r[Mn]=null}};function $d(n){this._internalRoot=n}$d.prototype.unstable_scheduleHydration=function(n){if(n){var r=We();n={blockedOn:null,target:n,priority:r};for(var o=0;o<Lo.length&&r!==0&&r<Lo[o].priority;o++);Lo.splice(o,0,n),o===0&&b1(n)}};var E1=e.version;if(E1!=="19.2.4")throw Error(i(527,E1,"19.2.4"));Ee.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=x(r),n=n!==null?S(n):null,n=n===null?null:n.stateNode,n};var BE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{zn=Gd.inject(BE),mn=Gd}catch{}}return Ju.createRoot=function(n,r){if(!a(n))throw Error(i(299));var o=!1,h="",y=Ry,w=ky,j=Dy;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(j=r.onRecoverableError)),r=h1(n,1,!1,null,null,o,h,null,y,w,j,w1),n[Mn]=r.current,mp(n),new Ip(r)},Ju.hydrateRoot=function(n,r,o){if(!a(n))throw Error(i(299));var h=!1,y="",w=Ry,j=ky,P=Dy,re=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onUncaughtError!==void 0&&(w=o.onUncaughtError),o.onCaughtError!==void 0&&(j=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError),o.formState!==void 0&&(re=o.formState)),r=h1(n,1,!0,r,o??null,h,y,re,w,j,P,w1),r.context=d1(null),o=r.current,h=Ps(),h=Z(h),y=sr(h),y.callback=null,gn(o,y,h),o=h,r.current.lanes=o,qn(r,o),ea(r),n[Mn]=r.current,mp(n),new $d(r)},Ju.version="19.2.4",Ju}var I1;function XE(){if(I1)return Lp.exports;I1=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Lp.exports=KE(),Lp.exports}var JE=XE();var M1="popstate";function ZE(s={}){function e(i,a){let{pathname:c,search:u,hash:f}=i.location;return lg("",{pathname:c,search:u,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:ph(a)}return tS(e,t,null,s)}function An(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ri(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eS(){return Math.random().toString(36).substring(2,10)}function O1(s,e){return{usr:s.state,key:s.key,idx:e}}function lg(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Xc(e):e,state:t,key:e&&e.key||i||eS()}}function ph({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Xc(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function tS(s,e,t,i={}){let{window:a=document.defaultView,v5Compat:c=!1}=i,u=a.history,f="POP",p=null,x=S();x==null&&(x=0,u.replaceState({...u.state,idx:x},""));function S(){return(u.state||{idx:null}).idx}function C(){f="POP";let $=S(),J=$==null?null:$-x;x=$,p&&p({action:f,location:F.location,delta:J})}function A($,J){f="PUSH";let Y=lg(F.location,$,J);x=S()+1;let ce=O1(Y,x),X=F.createHref(Y);try{u.pushState(ce,"",X)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;a.location.assign(X)}c&&p&&p({action:f,location:F.location,delta:1})}function B($,J){f="REPLACE";let Y=lg(F.location,$,J);x=S();let ce=O1(Y,x),X=F.createHref(Y);u.replaceState(ce,"",X),c&&p&&p({action:f,location:F.location,delta:0})}function L($){return nS($)}let F={get action(){return f},get location(){return s(a,u)},listen($){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(M1,C),p=$,()=>{a.removeEventListener(M1,C),p=null}},createHref($){return e(a,$)},createURL:L,encodeLocation($){let J=L($);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:A,replace:B,go($){return u.go($)}};return F}function nS(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),An(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:ph(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function N_(s,e,t="/"){return rS(s,e,t,!1)}function rS(s,e,t,i){let a=typeof e=="string"?Xc(e):e,c=$a(a.pathname||"/",t);if(c==null)return null;let u=A_(s);sS(u);let f=null;for(let p=0;f==null&&p<u.length;++p){let x=pS(c);f=fS(u[p],x,i)}return f}function A_(s,e=[],t=[],i="",a=!1){let c=(u,f,p=a,x)=>{let S={relativePath:x===void 0?u.path||"":x,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(i)&&p)return;An(S.relativePath.startsWith(i),`Absolute route path "${S.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(i.length)}let C=za([i,S.relativePath]),A=t.concat(S);u.children&&u.children.length>0&&(An(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),A_(u.children,e,A,C,p)),!(u.path==null&&!u.index)&&e.push({path:C,score:hS(C,u.index),routesMeta:A})};return s.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))c(u,f);else for(let p of j_(u.path))c(u,f,!0,p)}),e}function j_(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),c=t.replace(/\?$/,"");if(i.length===0)return a?[c,""]:[c];let u=j_(i.join("/")),f=[];return f.push(...u.map(p=>p===""?c:[c,p].join("/"))),a&&f.push(...u),f.map(p=>s.startsWith("/")&&p===""?"/":p)}function sS(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:dS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var iS=/^:[\w-]+$/,aS=3,oS=2,lS=1,cS=10,uS=-2,L1=s=>s==="*";function hS(s,e){let t=s.split("/"),i=t.length;return t.some(L1)&&(i+=uS),e&&(i+=oS),t.filter(a=>!L1(a)).reduce((a,c)=>a+(iS.test(c)?aS:c===""?lS:cS),i)}function dS(s,e){return s.length===e.length&&s.slice(0,-1).every((i,a)=>i===e[a])?s[s.length-1]-e[e.length-1]:0}function fS(s,e,t=!1){let{routesMeta:i}=s,a={},c="/",u=[];for(let f=0;f<i.length;++f){let p=i[f],x=f===i.length-1,S=c==="/"?e:e.slice(c.length)||"/",C=vf({path:p.relativePath,caseSensitive:p.caseSensitive,end:x},S),A=p.route;if(!C&&x&&t&&!i[i.length-1].route.index&&(C=vf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},S)),!C)return null;Object.assign(a,C.params),u.push({params:a,pathname:za([c,C.pathname]),pathnameBase:bS(za([c,C.pathnameBase])),route:A}),C.pathnameBase!=="/"&&(c=za([c,C.pathnameBase]))}return u}function vf(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=mS(s.path,s.caseSensitive,s.end),a=e.match(t);if(!a)return null;let c=a[0],u=c.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((x,{paramName:S,isOptional:C},A)=>{if(S==="*"){let L=f[A]||"";u=c.slice(0,c.length-L.length).replace(/(.)\/+$/,"$1")}const B=f[A];return C&&!B?x[S]=void 0:x[S]=(B||"").replace(/%2F/g,"/"),x},{}),pathname:c,pathnameBase:u,pattern:s}}function mS(s,e=!1,t=!0){Ri(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function pS(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ri(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function $a(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var gS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function vS(s,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof s=="string"?Xc(s):s,c;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?c=P1(t.substring(1),"/"):c=P1(t,e)):c=e,{pathname:c,search:_S(i),hash:xS(a)}}function P1(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Bp(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yS(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Fg(s){let e=yS(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function qg(s,e,t,i=!1){let a;typeof s=="string"?a=Xc(s):(a={...s},An(!a.pathname||!a.pathname.includes("?"),Bp("?","pathname","search",a)),An(!a.pathname||!a.pathname.includes("#"),Bp("#","pathname","hash",a)),An(!a.search||!a.search.includes("#"),Bp("#","search","hash",a)));let c=s===""||a.pathname==="",u=c?"/":a.pathname,f;if(u==null)f=t;else{let C=e.length-1;if(!i&&u.startsWith("..")){let A=u.split("/");for(;A[0]==="..";)A.shift(),C-=1;a.pathname=A.join("/")}f=C>=0?e[C]:"/"}let p=vS(a,f),x=u&&u!=="/"&&u.endsWith("/"),S=(c||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(x||S)&&(p.pathname+="/"),p}var za=s=>s.join("/").replace(/\/\/+/g,"/"),bS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),_S=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,xS=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,wS=class{constructor(s,e,t,i=!1){this.status=s,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function ES(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function SS(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var R_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function k_(s,e){let t=s;if(typeof t!="string"||!gS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(R_)try{let c=new URL(window.location.href),u=t.startsWith("//")?new URL(c.protocol+t):new URL(t),f=$a(u.pathname,e);u.origin===c.origin&&f!=null?t=f+u.search+u.hash:a=!0}catch{Ri(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var D_=["POST","PUT","PATCH","DELETE"];new Set(D_);var TS=["GET",...D_];new Set(TS);var Jc=z.createContext(null);Jc.displayName="DataRouter";var zf=z.createContext(null);zf.displayName="DataRouterState";var CS=z.createContext(!1),I_=z.createContext({isTransitioning:!1});I_.displayName="ViewTransition";var NS=z.createContext(new Map);NS.displayName="Fetchers";var AS=z.createContext(null);AS.displayName="Await";var Bs=z.createContext(null);Bs.displayName="Navigation";var Nh=z.createContext(null);Nh.displayName="Location";var la=z.createContext({outlet:null,matches:[],isDataRoute:!1});la.displayName="Route";var Hg=z.createContext(null);Hg.displayName="RouteError";var M_="REACT_ROUTER_ERROR",jS="REDIRECT",RS="ROUTE_ERROR_RESPONSE";function kS(s){if(s.startsWith(`${M_}:${jS}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function DS(s){if(s.startsWith(`${M_}:${RS}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new wS(e.status,e.statusText,e.data)}catch{}}function IS(s,{relative:e}={}){An(Zc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext(Bs),{hash:a,pathname:c,search:u}=Ah(s,{relative:e}),f=c;return t!=="/"&&(f=c==="/"?t:za([t,c])),i.createHref({pathname:f,search:u,hash:a})}function Zc(){return z.useContext(Nh)!=null}function Ka(){return An(Zc(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Nh).location}var O_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function L_(s){z.useContext(Bs).static||z.useLayoutEffect(s)}function Ir(){let{isDataRoute:s}=z.useContext(la);return s?GS():MS()}function MS(){An(Zc(),"useNavigate() may be used only in the context of a <Router> component.");let s=z.useContext(Jc),{basename:e,navigator:t}=z.useContext(Bs),{matches:i}=z.useContext(la),{pathname:a}=Ka(),c=JSON.stringify(Fg(i)),u=z.useRef(!1);return L_(()=>{u.current=!0}),z.useCallback((p,x={})=>{if(Ri(u.current,O_),!u.current)return;if(typeof p=="number"){t.go(p);return}let S=qg(p,JSON.parse(c),a,x.relative==="path");s==null&&e!=="/"&&(S.pathname=S.pathname==="/"?e:za([e,S.pathname])),(x.replace?t.replace:t.push)(S,x.state,x)},[e,t,c,a,s])}z.createContext(null);function Ah(s,{relative:e}={}){let{matches:t}=z.useContext(la),{pathname:i}=Ka(),a=JSON.stringify(Fg(t));return z.useMemo(()=>qg(s,JSON.parse(a),i,e==="path"),[s,a,i,e])}function OS(s,e){return P_(s,e)}function P_(s,e,t,i,a){An(Zc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=z.useContext(Bs),{matches:u}=z.useContext(la),f=u[u.length-1],p=f?f.params:{},x=f?f.pathname:"/",S=f?f.pathnameBase:"/",C=f&&f.route;{let Y=C&&C.path||"";U_(x,!C||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let A=Ka(),B;if(e){let Y=typeof e=="string"?Xc(e):e;An(S==="/"||Y.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),B=Y}else B=A;let L=B.pathname||"/",F=L;if(S!=="/"){let Y=S.replace(/^\//,"").split("/");F="/"+L.replace(/^\//,"").split("/").slice(Y.length).join("/")}let $=N_(s,{pathname:F});Ri(C||$!=null,`No routes matched location "${B.pathname}${B.search}${B.hash}" `),Ri($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${B.pathname}${B.search}${B.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=BS($&&$.map(Y=>Object.assign({},Y,{params:Object.assign({},p,Y.params),pathname:za([S,c.encodeLocation?c.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?S:za([S,c.encodeLocation?c.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),u,t,i,a);return e&&J?z.createElement(Nh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...B},navigationType:"POP"}},J):J}function LS(){let s=$S(),e=ES(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:c},"ErrorBoundary")," or"," ",z.createElement("code",{style:c},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:a},t):null,u)}var PS=z.createElement(LS,null),V_=class extends z.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=DS(s.digest);t&&(s=t)}let e=s!==void 0?z.createElement(la.Provider,{value:this.props.routeContext},z.createElement(Hg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?z.createElement(VS,{error:s},e):e}};V_.contextType=CS;var zp=new WeakMap;function VS({children:s,error:e}){let{basename:t}=z.useContext(Bs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=kS(e.digest);if(i){let a=zp.get(e);if(a)throw a;let c=k_(i.location,t);if(R_&&!zp.get(e))if(c.isExternal||i.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:i.replace}));throw zp.set(e,u),u}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return s}function US({routeContext:s,match:e,children:t}){let i=z.useContext(Jc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(la.Provider,{value:s},t)}function BS(s,e=[],t=null,i=null,a=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let c=s,u=t?.errors;if(u!=null){let S=c.findIndex(C=>C.route.id&&u?.[C.route.id]!==void 0);An(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),c=c.slice(0,Math.min(c.length,S+1))}let f=!1,p=-1;if(t)for(let S=0;S<c.length;S++){let C=c[S];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(p=S),C.route.id){let{loaderData:A,errors:B}=t,L=C.route.loader&&!A.hasOwnProperty(C.route.id)&&(!B||B[C.route.id]===void 0);if(C.route.lazy||L){f=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}let x=t&&i?(S,C)=>{i(S,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:SS(t.matches),errorInfo:C})}:void 0;return c.reduceRight((S,C,A)=>{let B,L=!1,F=null,$=null;t&&(B=u&&C.route.id?u[C.route.id]:void 0,F=C.route.errorElement||PS,f&&(p<0&&A===0?(U_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,$=null):p===A&&(L=!0,$=C.route.hydrateFallbackElement||null)));let J=e.concat(c.slice(0,A+1)),Y=()=>{let ce;return B?ce=F:L?ce=$:C.route.Component?ce=z.createElement(C.route.Component,null):C.route.element?ce=C.route.element:ce=S,z.createElement(US,{match:C,routeContext:{outlet:S,matches:J,isDataRoute:t!=null},children:ce})};return t&&(C.route.ErrorBoundary||C.route.errorElement||A===0)?z.createElement(V_,{location:t.location,revalidation:t.revalidation,component:F,error:B,children:Y(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:x}):Y()},null)}function $g(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zS(s){let e=z.useContext(Jc);return An(e,$g(s)),e}function FS(s){let e=z.useContext(zf);return An(e,$g(s)),e}function qS(s){let e=z.useContext(la);return An(e,$g(s)),e}function Gg(s){let e=qS(s),t=e.matches[e.matches.length-1];return An(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function HS(){return Gg("useRouteId")}function $S(){let s=z.useContext(Hg),e=FS("useRouteError"),t=Gg("useRouteError");return s!==void 0?s:e.errors?.[t]}function GS(){let{router:s}=zS("useNavigate"),e=Gg("useNavigate"),t=z.useRef(!1);return L_(()=>{t.current=!0}),z.useCallback(async(a,c={})=>{Ri(t.current,O_),t.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:e,...c}))},[s,e])}var V1={};function U_(s,e,t){!e&&!V1[s]&&(V1[s]=!0,Ri(!1,t))}z.memo(WS);function WS({routes:s,future:e,state:t,onError:i}){return P_(s,void 0,t,i,e)}function YS({to:s,replace:e,state:t,relative:i}){An(Zc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=z.useContext(Bs);Ri(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=z.useContext(la),{pathname:u}=Ka(),f=Ir(),p=qg(s,Fg(c),u,i==="path"),x=JSON.stringify(p);return z.useEffect(()=>{f(JSON.parse(x),{replace:e,state:t,relative:i})},[f,x,i,e,t]),null}function Hr(s){An(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QS({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:c=!1,unstable_useTransitions:u}){An(!Zc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=s.replace(/^\/*/,"/"),p=z.useMemo(()=>({basename:f,navigator:a,static:c,unstable_useTransitions:u,future:{}}),[f,a,c,u]);typeof t=="string"&&(t=Xc(t));let{pathname:x="/",search:S="",hash:C="",state:A=null,key:B="default"}=t,L=z.useMemo(()=>{let F=$a(x,f);return F==null?null:{location:{pathname:F,search:S,hash:C,state:A,key:B},navigationType:i}},[f,x,S,C,A,B,i]);return Ri(L!=null,`<Router basename="${f}"> is not able to match the URL "${x}${S}${C}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:z.createElement(Bs.Provider,{value:p},z.createElement(Nh.Provider,{children:e,value:L}))}function KS({children:s,location:e}){return OS(cg(s),e)}function cg(s,e=[]){let t=[];return z.Children.forEach(s,(i,a)=>{if(!z.isValidElement(i))return;let c=[...e,a];if(i.type===z.Fragment){t.push.apply(t,cg(i.props.children,c));return}An(i.type===Hr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),An(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=cg(i.props.children,c)),t.push(u)}),t}var nf="get",rf="application/x-www-form-urlencoded";function Ff(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function XS(s){return Ff(s)&&s.tagName.toLowerCase()==="button"}function JS(s){return Ff(s)&&s.tagName.toLowerCase()==="form"}function ZS(s){return Ff(s)&&s.tagName.toLowerCase()==="input"}function eT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function tT(s,e){return s.button===0&&(!e||e==="_self")&&!eT(s)}var Wd=null;function nT(){if(Wd===null)try{new FormData(document.createElement("form"),0),Wd=!1}catch{Wd=!0}return Wd}var rT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fp(s){return s!=null&&!rT.has(s)?(Ri(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rf}"`),null):s}function sT(s,e){let t,i,a,c,u;if(JS(s)){let f=s.getAttribute("action");i=f?$a(f,e):null,t=s.getAttribute("method")||nf,a=Fp(s.getAttribute("enctype"))||rf,c=new FormData(s)}else if(XS(s)||ZS(s)&&(s.type==="submit"||s.type==="image")){let f=s.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||f.getAttribute("action");if(i=p?$a(p,e):null,t=s.getAttribute("formmethod")||f.getAttribute("method")||nf,a=Fp(s.getAttribute("formenctype"))||Fp(f.getAttribute("enctype"))||rf,c=new FormData(f,s),!nT()){let{name:x,type:S,value:C}=s;if(S==="image"){let A=x?`${x}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else x&&c.append(x,C)}}else{if(Ff(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=nf,i=null,a=rf,u=s}return c&&a==="text/plain"&&(u=c,c=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:c,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function iT(s,e,t,i){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&$a(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function aT(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function lT(s,e,t){let i=await Promise.all(s.map(async a=>{let c=e.routes[a.route.id];if(c){let u=await aT(c,t);return u.links?u.links():[]}return[]}));return dT(i.flat(1).filter(oT).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function U1(s,e,t,i,a,c){let u=(p,x)=>t[x]?p.route.id!==t[x].route.id:!0,f=(p,x)=>t[x].pathname!==p.pathname||t[x].route.path?.endsWith("*")&&t[x].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,x)=>u(p,x)||f(p,x)):c==="data"?e.filter((p,x)=>{let S=i.routes[p.route.id];if(!S||!S.hasLoader)return!1;if(u(p,x)||f(p,x))return!0;if(p.route.shouldRevalidate){let C=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function cT(s,e,{includeHydrateFallback:t}={}){return uT(s.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let c=[a.module];return a.clientActionModule&&(c=c.concat(a.clientActionModule)),a.clientLoaderModule&&(c=c.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(c=c.concat(a.hydrateFallbackModule)),a.imports&&(c=c.concat(a.imports)),c}).flat(1))}function uT(s){return[...new Set(s)]}function hT(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function dT(s,e){let t=new Set;return new Set(e),s.reduce((i,a)=>{let c=JSON.stringify(hT(a));return t.has(c)||(t.add(c),i.push({key:c,link:a})),i},[])}function B_(){let s=z.useContext(Jc);return Wg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function fT(){let s=z.useContext(zf);return Wg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Yg=z.createContext(void 0);Yg.displayName="FrameworkContext";function z_(){let s=z.useContext(Yg);return Wg(s,"You must render this element inside a <HydratedRouter> element"),s}function mT(s,e){let t=z.useContext(Yg),[i,a]=z.useState(!1),[c,u]=z.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:x,onMouseLeave:S,onTouchStart:C}=e,A=z.useRef(null);z.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let F=J=>{J.forEach(Y=>{u(Y.isIntersecting)})},$=new IntersectionObserver(F,{threshold:.5});return A.current&&$.observe(A.current),()=>{$.disconnect()}}},[s]),z.useEffect(()=>{if(i){let F=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(F)}}},[i]);let B=()=>{a(!0)},L=()=>{a(!1),u(!1)};return t?s!=="intent"?[c,A,{}]:[c,A,{onFocus:Zu(f,B),onBlur:Zu(p,L),onMouseEnter:Zu(x,B),onMouseLeave:Zu(S,L),onTouchStart:Zu(C,B)}]:[!1,A,{}]}function Zu(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function pT({page:s,...e}){let{router:t}=B_(),i=z.useMemo(()=>N_(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?z.createElement(vT,{page:s,matches:i,...e}):null}function gT(s){let{manifest:e,routeModules:t}=z_(),[i,a]=z.useState([]);return z.useEffect(()=>{let c=!1;return lT(s,e,t).then(u=>{c||a(u)}),()=>{c=!0}},[s,e,t]),i}function vT({page:s,matches:e,...t}){let i=Ka(),{future:a,manifest:c,routeModules:u}=z_(),{basename:f}=B_(),{loaderData:p,matches:x}=fT(),S=z.useMemo(()=>U1(s,e,x,c,i,"data"),[s,e,x,c,i]),C=z.useMemo(()=>U1(s,e,x,c,i,"assets"),[s,e,x,c,i]),A=z.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let F=new Set,$=!1;if(e.forEach(Y=>{let ce=c.routes[Y.route.id];!ce||!ce.hasLoader||(!S.some(X=>X.route.id===Y.route.id)&&Y.route.id in p&&u[Y.route.id]?.shouldRevalidate||ce.hasClientLoader?$=!0:F.add(Y.route.id))}),F.size===0)return[];let J=iT(s,f,a.unstable_trailingSlashAwareDataRequests,"data");return $&&F.size>0&&J.searchParams.set("_routes",e.filter(Y=>F.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[J.pathname+J.search]},[f,a.unstable_trailingSlashAwareDataRequests,p,i,c,S,e,s,u]),B=z.useMemo(()=>cT(C,c),[C,c]),L=gT(C);return z.createElement(z.Fragment,null,A.map(F=>z.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...t})),B.map(F=>z.createElement("link",{key:F,rel:"modulepreload",href:F,...t})),L.map(({key:F,link:$})=>z.createElement("link",{key:F,nonce:t.nonce,...$,crossOrigin:$.crossOrigin??t.crossOrigin})))}function yT(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var bT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bT&&(window.__reactRouterVersion="7.13.0")}catch{}function _T({basename:s,children:e,unstable_useTransitions:t,window:i}){let a=z.useRef();a.current==null&&(a.current=ZE({window:i,v5Compat:!0}));let c=a.current,[u,f]=z.useState({action:c.action,location:c.location}),p=z.useCallback(x=>{t===!1?f(x):z.startTransition(()=>f(x))},[t]);return z.useLayoutEffect(()=>c.listen(p),[c,p]),z.createElement(QS,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:c,unstable_useTransitions:t})}var F_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q_=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:c,replace:u,state:f,target:p,to:x,preventScrollReset:S,viewTransition:C,unstable_defaultShouldRevalidate:A,...B},L){let{basename:F,unstable_useTransitions:$}=z.useContext(Bs),J=typeof x=="string"&&F_.test(x),Y=k_(x,F);x=Y.to;let ce=IS(x,{relative:a}),[X,pe,xe]=mT(i,B),q=ST(x,{replace:u,state:f,target:p,preventScrollReset:S,relative:a,viewTransition:C,unstable_defaultShouldRevalidate:A,unstable_useTransitions:$});function V(te){e&&e(te),te.defaultPrevented||q(te)}let H=z.createElement("a",{...B,...xe,href:Y.absoluteURL||ce,onClick:Y.isExternal||c?e:V,ref:yT(L,pe),target:p,"data-discover":!J&&t==="render"?"true":void 0});return X&&!J?z.createElement(z.Fragment,null,H,z.createElement(pT,{page:ce})):H});q_.displayName="Link";var xT=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:c,to:u,viewTransition:f,children:p,...x},S){let C=Ah(u,{relative:x.relative}),A=Ka(),B=z.useContext(zf),{navigator:L,basename:F}=z.useContext(Bs),$=B!=null&&jT(C)&&f===!0,J=L.encodeLocation?L.encodeLocation(C).pathname:C.pathname,Y=A.pathname,ce=B&&B.navigation&&B.navigation.location?B.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),ce=ce?ce.toLowerCase():null,J=J.toLowerCase()),ce&&F&&(ce=$a(ce,F)||ce);const X=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let pe=Y===J||!a&&Y.startsWith(J)&&Y.charAt(X)==="/",xe=ce!=null&&(ce===J||!a&&ce.startsWith(J)&&ce.charAt(J.length)==="/"),q={isActive:pe,isPending:xe,isTransitioning:$},V=pe?e:void 0,H;typeof i=="function"?H=i(q):H=[i,pe?"active":null,xe?"pending":null,$?"transitioning":null].filter(Boolean).join(" ");let te=typeof c=="function"?c(q):c;return z.createElement(q_,{...x,"aria-current":V,className:H,ref:S,style:te,to:u,viewTransition:f},typeof p=="function"?p(q):p)});xT.displayName="NavLink";var wT=z.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:c,method:u=nf,action:f,onSubmit:p,relative:x,preventScrollReset:S,viewTransition:C,unstable_defaultShouldRevalidate:A,...B},L)=>{let{unstable_useTransitions:F}=z.useContext(Bs),$=NT(),J=AT(f,{relative:x}),Y=u.toLowerCase()==="get"?"get":"post",ce=typeof f=="string"&&F_.test(f),X=pe=>{if(p&&p(pe),pe.defaultPrevented)return;pe.preventDefault();let xe=pe.nativeEvent.submitter,q=xe?.getAttribute("formmethod")||u,V=()=>$(xe||pe.currentTarget,{fetcherKey:e,method:q,navigate:t,replace:a,state:c,relative:x,preventScrollReset:S,viewTransition:C,unstable_defaultShouldRevalidate:A});F&&t!==!1?z.startTransition(()=>V()):V()};return z.createElement("form",{ref:L,method:Y,action:J,onSubmit:i?p:X,...B,"data-discover":!ce&&s==="render"?"true":void 0})});wT.displayName="Form";function ET(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H_(s){let e=z.useContext(Jc);return An(e,ET(s)),e}function ST(s,{target:e,replace:t,state:i,preventScrollReset:a,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:p}={}){let x=Ir(),S=Ka(),C=Ah(s,{relative:c});return z.useCallback(A=>{if(tT(A,e)){A.preventDefault();let B=t!==void 0?t:ph(S)===ph(C),L=()=>x(s,{replace:B,state:i,preventScrollReset:a,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:f});p?z.startTransition(()=>L()):L()}},[S,x,C,t,i,e,s,a,c,u,f,p])}var TT=0,CT=()=>`__${String(++TT)}__`;function NT(){let{router:s}=H_("useSubmit"),{basename:e}=z.useContext(Bs),t=HS(),i=s.fetch,a=s.navigate;return z.useCallback(async(c,u={})=>{let{action:f,method:p,encType:x,formData:S,body:C}=sT(c,e);if(u.navigate===!1){let A=u.fetcherKey||CT();await i(A,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:S,body:C,formMethod:u.method||p,formEncType:u.encType||x,flushSync:u.flushSync})}else await a(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:S,body:C,formMethod:u.method||p,formEncType:u.encType||x,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,a,e,t])}function AT(s,{relative:e}={}){let{basename:t}=z.useContext(Bs),i=z.useContext(la);An(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),c={...Ah(s||".",{relative:e})},u=Ka();if(s==null){c.search=u.search;let f=new URLSearchParams(c.search),p=f.getAll("index");if(p.some(S=>S==="")){f.delete("index"),p.filter(C=>C).forEach(C=>f.append("index",C));let S=f.toString();c.search=S?`?${S}`:""}}return(!s||s===".")&&a.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:za([t,c.pathname])),ph(c)}function jT(s,{relative:e}={}){let t=z.useContext(I_);An(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=H_("useViewTransitionState"),a=Ah(s,{relative:e});if(!t.isTransitioning)return!1;let c=$a(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=$a(t.nextLocation.pathname,i)||t.nextLocation.pathname;return vf(a.pathname,u)!=null||vf(a.pathname,c)!=null}const RT=()=>{};var B1={};const $_=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let a=s.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},kT=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const a=s[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const c=s[t++];e[i++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=s[t++],u=s[t++],f=s[t++],p=((a&7)<<18|(c&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const c=s[t++],u=s[t++];e[i++]=String.fromCharCode((a&15)<<12|(c&63)<<6|u&63)}}return e.join("")},G_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<s.length;a+=3){const c=s[a],u=a+1<s.length,f=u?s[a+1]:0,p=a+2<s.length,x=p?s[a+2]:0,S=c>>2,C=(c&3)<<4|f>>4;let A=(f&15)<<2|x>>6,B=x&63;p||(B=64,u||(A=64)),i.push(t[S],t[C],t[A],t[B])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray($_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):kT(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<s.length;){const c=t[s.charAt(a++)],f=a<s.length?t[s.charAt(a)]:0;++a;const x=a<s.length?t[s.charAt(a)]:64;++a;const C=a<s.length?t[s.charAt(a)]:64;if(++a,c==null||f==null||x==null||C==null)throw new DT;const A=c<<2|f>>4;if(i.push(A),x!==64){const B=f<<4&240|x>>2;if(i.push(B),C!==64){const L=x<<6&192|C;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class DT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IT=function(s){const e=$_(s);return G_.encodeByteArray(e,!0)},yf=function(s){return IT(s).replace(/\./g,"")},W_=function(s){try{return G_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function MT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const OT=()=>MT().__FIREBASE_DEFAULTS__,LT=()=>{if(typeof process>"u"||typeof B1>"u")return;const s=B1.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},PT=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&W_(s[1]);return e&&JSON.parse(e)},qf=()=>{try{return RT()||OT()||LT()||PT()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Y_=s=>qf()?.emulatorHosts?.[s],VT=s=>{const e=Y_(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Q_=()=>qf()?.config,K_=s=>qf()?.[`_${s}`];class UT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function eu(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X_(s){return(await fetch(s,{credentials:"include"})).ok}function BT(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[yf(JSON.stringify(t)),yf(JSON.stringify(u)),""].join(".")}const ch={};function zT(){const s={prod:[],emulator:[]};for(const e of Object.keys(ch))ch[e]?s.emulator.push(e):s.prod.push(e);return s}function FT(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let z1=!1;function J_(s,e){if(typeof window>"u"||typeof document>"u"||!eu(window.location.host)||ch[s]===e||ch[s]||z1)return;ch[s]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",c=zT().prod.length>0;function u(){const A=document.getElementById(i);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,B){A.setAttribute("width","24"),A.setAttribute("id",B),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function x(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{z1=!0,u()},A}function S(A,B){A.setAttribute("id",B),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function C(){const A=FT(i),B=t("text"),L=document.getElementById(B)||document.createElement("span"),F=t("learnmore"),$=document.getElementById(F)||document.createElement("a"),J=t("preprendIcon"),Y=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ce=A.element;f(ce),S($,F);const X=x();p(Y,J),ce.append(Y,L,$,X),document.body.appendChild(ce)}c?(L.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}function Wr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wr())}function HT(){const s=qf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $T(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GT(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function WT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YT(){const s=Wr();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function QT(){return!HT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KT(){try{return typeof indexedDB=="object"}catch{return!1}}function XT(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const JT="FirebaseError";class Xa extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=JT,Object.setPrototypeOf(this,Xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jh.prototype.create)}}class jh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],u=c?ZT(c,i):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new Xa(a,f,i)}}function ZT(s,e){return s.replace(eC,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const eC=/\{\$([^}]+)}/g;function tC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ul(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const c=s[a],u=e[a];if(F1(c)&&F1(u)){if(!Ul(c,u))return!1}else if(c!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function F1(s){return s!==null&&typeof s=="object"}function Rh(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function rh(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,c]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function sh(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function nC(s,e){const t=new rC(s,e);return t.subscribe.bind(t)}class rC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");sC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=qp),a.error===void 0&&(a.error=qp),a.complete===void 0&&(a.complete=qp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sC(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function qp(){}function yr(s){return s&&s._delegate?s._delegate:s}class Bl{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ll="[DEFAULT]";class iC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new UT;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oC(e))try{this.getOrInitializeService({instanceIdentifier:Ll})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});i.resolve(c)}catch{}}}}clearInstance(e=Ll){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ll){return this.instances.has(e)}getOptions(e=Ll){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);i===f&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const c=this.instances.get(i);return c&&e(c,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:aC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ll){return this.component?this.component.multipleInstances?e:Ll:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aC(s){return s===Ll?void 0:s}function oC(s){return s.instantiationMode==="EAGER"}class lC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new iC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var $t;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})($t||($t={}));const cC={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},uC=$t.INFO,hC={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},dC=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),a=hC[e];if(a)console[a](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qg{constructor(e){this.name=e,this._logLevel=uC,this._logHandler=dC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...e),this._logHandler(this,$t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...e),this._logHandler(this,$t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...e),this._logHandler(this,$t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...e),this._logHandler(this,$t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...e),this._logHandler(this,$t.ERROR,...e)}}const fC=(s,e)=>e.some(t=>s instanceof t);let q1,H1;function mC(){return q1||(q1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pC(){return H1||(H1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z_=new WeakMap,ug=new WeakMap,ex=new WeakMap,Hp=new WeakMap,Kg=new WeakMap;function gC(s){const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("success",c),s.removeEventListener("error",u)},c=()=>{t($o(s.result)),a()},u=()=>{i(s.error),a()};s.addEventListener("success",c),s.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Z_.set(t,s)}).catch(()=>{}),Kg.set(e,s),e}function vC(s){if(ug.has(s))return;const e=new Promise((t,i)=>{const a=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",u),s.removeEventListener("abort",u)},c=()=>{t(),a()},u=()=>{i(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",c),s.addEventListener("error",u),s.addEventListener("abort",u)});ug.set(s,e)}let hg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return ug.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ex.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $o(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function yC(s){hg=s(hg)}function bC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call($p(this),e,...t);return ex.set(i,e.sort?e.sort():[e]),$o(i)}:pC().includes(s)?function(...e){return s.apply($p(this),e),$o(Z_.get(this))}:function(...e){return $o(s.apply($p(this),e))}}function _C(s){return typeof s=="function"?bC(s):(s instanceof IDBTransaction&&vC(s),fC(s,mC())?new Proxy(s,hg):s)}function $o(s){if(s instanceof IDBRequest)return gC(s);if(Hp.has(s))return Hp.get(s);const e=_C(s);return e!==s&&(Hp.set(s,e),Kg.set(e,s)),e}const $p=s=>Kg.get(s);function xC(s,e,{blocked:t,upgrade:i,blocking:a,terminated:c}={}){const u=indexedDB.open(s,e),f=$o(u);return i&&u.addEventListener("upgradeneeded",p=>{i($o(u.result),p.oldVersion,p.newVersion,$o(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{c&&p.addEventListener("close",()=>c()),a&&p.addEventListener("versionchange",x=>a(x.oldVersion,x.newVersion,x))}).catch(()=>{}),f}const wC=["get","getKey","getAll","getAllKeys","count"],EC=["put","add","delete","clear"],Gp=new Map;function $1(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Gp.get(e))return Gp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=EC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||wC.includes(t)))return;const c=async function(u,...f){const p=this.transaction(u,a?"readwrite":"readonly");let x=p.store;return i&&(x=x.index(f.shift())),(await Promise.all([x[t](...f),a&&p.done]))[0]};return Gp.set(e,c),c}yC(s=>({...s,get:(e,t,i)=>$1(e,t)||s.get(e,t,i),has:(e,t)=>!!$1(e,t)||s.has(e,t)}));class SC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TC(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function TC(s){return s.getComponent()?.type==="VERSION"}const dg="@firebase/app",G1="0.14.7";const Ga=new Qg("@firebase/app"),CC="@firebase/app-compat",NC="@firebase/analytics-compat",AC="@firebase/analytics",jC="@firebase/app-check-compat",RC="@firebase/app-check",kC="@firebase/auth",DC="@firebase/auth-compat",IC="@firebase/database",MC="@firebase/data-connect",OC="@firebase/database-compat",LC="@firebase/functions",PC="@firebase/functions-compat",VC="@firebase/installations",UC="@firebase/installations-compat",BC="@firebase/messaging",zC="@firebase/messaging-compat",FC="@firebase/performance",qC="@firebase/performance-compat",HC="@firebase/remote-config",$C="@firebase/remote-config-compat",GC="@firebase/storage",WC="@firebase/storage-compat",YC="@firebase/firestore",QC="@firebase/ai",KC="@firebase/firestore-compat",XC="firebase",JC="12.8.0";const fg="[DEFAULT]",ZC={[dg]:"fire-core",[CC]:"fire-core-compat",[AC]:"fire-analytics",[NC]:"fire-analytics-compat",[RC]:"fire-app-check",[jC]:"fire-app-check-compat",[kC]:"fire-auth",[DC]:"fire-auth-compat",[IC]:"fire-rtdb",[MC]:"fire-data-connect",[OC]:"fire-rtdb-compat",[LC]:"fire-fn",[PC]:"fire-fn-compat",[VC]:"fire-iid",[UC]:"fire-iid-compat",[BC]:"fire-fcm",[zC]:"fire-fcm-compat",[FC]:"fire-perf",[qC]:"fire-perf-compat",[HC]:"fire-rc",[$C]:"fire-rc-compat",[GC]:"fire-gcs",[WC]:"fire-gcs-compat",[YC]:"fire-fst",[KC]:"fire-fst-compat",[QC]:"fire-vertex","fire-js":"fire-js",[XC]:"fire-js-all"};const bf=new Map,eN=new Map,mg=new Map;function W1(s,e){try{s.container.addComponent(e)}catch(t){Ga.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Hc(s){const e=s.name;if(mg.has(e))return Ga.debug(`There were multiple attempts to register component ${e}.`),!1;mg.set(e,s);for(const t of bf.values())W1(t,s);for(const t of eN.values())W1(t,s);return!0}function Xg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function oi(s){return s==null?!1:s.settings!==void 0}const tN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Go=new jh("app","Firebase",tN);class nN{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Bl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Go.create("app-deleted",{appName:this._name})}}const tu=JC;function Jg(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:fg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Go.create("bad-app-name",{appName:String(a)});if(t||(t=Q_()),!t)throw Go.create("no-options");const c=bf.get(a);if(c){if(Ul(t,c.options)&&Ul(i,c.config))return c;throw Go.create("duplicate-app",{appName:a})}const u=new lC(a);for(const p of mg.values())u.addComponent(p);const f=new nN(t,i,u);return bf.set(a,f),f}function tx(s=fg){const e=bf.get(s);if(!e&&s===fg&&Q_())return Jg();if(!e)throw Go.create("no-app",{appName:s});return e}function Wo(s,e,t){let i=ZC[s]??s;t&&(i+=`-${t}`);const a=i.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ga.warn(u.join(" "));return}Hc(new Bl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const rN="firebase-heartbeat-database",sN=1,gh="firebase-heartbeat-store";let Wp=null;function nx(){return Wp||(Wp=xC(rN,sN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(gh)}catch(t){console.warn(t)}}}}).catch(s=>{throw Go.create("idb-open",{originalErrorMessage:s.message})})),Wp}async function iN(s){try{const t=(await nx()).transaction(gh),i=await t.objectStore(gh).get(rx(s));return await t.done,i}catch(e){if(e instanceof Xa)Ga.warn(e.message);else{const t=Go.create("idb-get",{originalErrorMessage:e?.message});Ga.warn(t.message)}}}async function Y1(s,e){try{const i=(await nx()).transaction(gh,"readwrite");await i.objectStore(gh).put(e,rx(s)),await i.done}catch(t){if(t instanceof Xa)Ga.warn(t.message);else{const i=Go.create("idb-set",{originalErrorMessage:t?.message});Ga.warn(i.message)}}}function rx(s){return`${s.name}!${s.options.appId}`}const aN=1024,oN=30;class lN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Q1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>oN){const a=hN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ga.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Q1(),{heartbeatsToSend:t,unsentEntries:i}=cN(this._heartbeatsCache.heartbeats),a=yf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Ga.warn(e),""}}}function Q1(){return new Date().toISOString().substring(0,10)}function cN(s,e=aN){const t=[];let i=s.slice();for(const a of s){const c=t.find(u=>u.agent===a.agent);if(c){if(c.dates.push(a.date),K1(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),K1(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class uN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KT()?XT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await iN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Y1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Y1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function K1(s){return yf(JSON.stringify({version:2,heartbeats:s})).length}function hN(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function dN(s){Hc(new Bl("platform-logger",e=>new SC(e),"PRIVATE")),Hc(new Bl("heartbeat",e=>new lN(e),"PRIVATE")),Wo(dg,G1,s),Wo(dg,G1,"esm2020"),Wo("fire-js","")}dN("");function sx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fN=sx,ix=new jh("auth","Firebase",sx());const _f=new Qg("@firebase/auth");function mN(s,...e){_f.logLevel<=$t.WARN&&_f.warn(`Auth (${tu}): ${s}`,...e)}function sf(s,...e){_f.logLevel<=$t.ERROR&&_f.error(`Auth (${tu}): ${s}`,...e)}function ki(s,...e){throw Zg(s,...e)}function na(s,...e){return Zg(s,...e)}function ax(s,e,t){const i={...fN(),[e]:t};return new jh("auth","Firebase",i).create(e,{appName:s.name})}function Fa(s){return ax(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zg(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return ix.create(s,...e)}function pt(s,e,...t){if(!s)throw Zg(e,...t)}function Ua(s){const e="INTERNAL ASSERTION FAILED: "+s;throw sf(e),new Error(e)}function Wa(s,e){s||Ua(e)}function pg(){return typeof self<"u"&&self.location?.href||""}function pN(){return X1()==="http:"||X1()==="https:"}function X1(){return typeof self<"u"&&self.location?.protocol||null}function gN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pN()||GT()||"connection"in navigator)?navigator.onLine:!0}function vN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class kh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wa(t>e,"Short delay should be less than long delay!"),this.isMobile=qT()||WT()}get(){return gN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ev(s,e){Wa(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class ox{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ua("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ua("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ua("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const bN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_N=new kh(3e4,6e4);function Ja(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Za(s,e,t,i,a={}){return lx(s,a,async()=>{let c={},u={};i&&(e==="GET"?u=i:c={body:JSON.stringify(i)});const f=Rh({key:s.config.apiKey,...u}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const x={method:e,headers:p,...c};return $T()||(x.referrerPolicy="no-referrer"),s.emulatorConfig&&eu(s.emulatorConfig.host)&&(x.credentials="include"),ox.fetch()(await cx(s,s.config.apiHost,t,f),x)})}async function lx(s,e,t){s._canInitEmulator=!1;const i={...yN,...e};try{const a=new wN(s),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Yd(s,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const f=c.ok?u.errorMessage:u.error.message,[p,x]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yd(s,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw Yd(s,"email-already-in-use",u);if(p==="USER_DISABLED")throw Yd(s,"user-disabled",u);const S=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw ax(s,S,x);ki(s,S)}}catch(a){if(a instanceof Xa)throw a;ki(s,"network-request-failed",{message:String(a)})}}async function Dh(s,e,t,i,a={}){const c=await Za(s,e,t,i,a);return"mfaPendingCredential"in c&&ki(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function cx(s,e,t,i){const a=`${e}${t}?${i}`,c=s,u=c.config.emulator?ev(s.config,a):`${s.config.apiScheme}://${a}`;return bN.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function xN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(na(this.auth,"network-request-failed")),_N.get())})}}function Yd(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=na(s,e,i);return a.customData._tokenResponse=t,a}function J1(s){return s!==void 0&&s.enterprise!==void 0}class EN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SN(s,e){return Za(s,"GET","/v2/recaptchaConfig",Ja(s,e))}async function TN(s,e){return Za(s,"POST","/v1/accounts:delete",e)}async function xf(s,e){return Za(s,"POST","/v1/accounts:lookup",e)}function uh(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CN(s,e=!1){const t=yr(s),i=await t.getIdToken(e),a=tv(i);pt(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,u=c?.sign_in_provider;return{claims:a,token:i,authTime:uh(Yp(a.auth_time)),issuedAtTime:uh(Yp(a.iat)),expirationTime:uh(Yp(a.exp)),signInProvider:u||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Yp(s){return Number(s)*1e3}function tv(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{const a=W_(t);return a?JSON.parse(a):(sf("Failed to decode base64 JWT payload"),null)}catch(a){return sf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Z1(s){const e=tv(s);return pt(e,"internal-error"),pt(typeof e.exp<"u","internal-error"),pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function vh(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Xa&&NN(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function NN({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class AN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class gg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uh(this.lastLoginAt),this.creationTime=uh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function wf(s){const e=s.auth,t=await s.getIdToken(),i=await vh(s,xf(e,{idToken:t}));pt(i?.users.length,e,"internal-error");const a=i.users[0];s._notifyReloadListener(a);const c=a.providerUserInfo?.length?ux(a.providerUserInfo):[],u=RN(s.providerData,c),f=s.isAnonymous,p=!(s.email&&a.passwordHash)&&!u?.length,x=f?p:!1,S={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new gg(a.createdAt,a.lastLoginAt),isAnonymous:x};Object.assign(s,S)}async function jN(s){const e=yr(s);await wf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RN(s,e){return[...s.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function ux(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function kN(s,e){const t=await lx(s,{},async()=>{const i=Rh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=s.config,u=await cx(s,a,"/v1/token",`key=${c}`),f=await s._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return s.emulatorConfig&&eu(s.emulatorConfig.host)&&(p.credentials="include"),ox.fetch()(u,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DN(s,e){return Za(s,"POST","/v2/accounts:revokeToken",Ja(s,e))}class Vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pt(e.idToken,"internal-error"),pt(typeof e.idToken<"u","internal-error"),pt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pt(e.length!==0,"internal-error");const t=Z1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:c}=await kN(e,t);this.updateTokensAndExpiration(i,a,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:c}=t,u=new Vc;return i&&(pt(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(pt(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),c&&(pt(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vc,this.toJSON())}_performRefresh(){return Ua("not implemented")}}function Vo(s,e){pt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Ni{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new AN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new gg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await vh(this,this.stsTokenManager.getToken(this.auth,e));return pt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return CN(this,e)}reload(){return jN(this)}_assign(e){this!==e&&(pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await wf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(Fa(this.auth));const e=await this.getIdToken();return await vh(this,TN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,x=t.createdAt??void 0,S=t.lastLoginAt??void 0,{uid:C,emailVerified:A,isAnonymous:B,providerData:L,stsTokenManager:F}=t;pt(C&&F,e,"internal-error");const $=Vc.fromJSON(this.name,F);pt(typeof C=="string",e,"internal-error"),Vo(i,e.name),Vo(a,e.name),pt(typeof A=="boolean",e,"internal-error"),pt(typeof B=="boolean",e,"internal-error"),Vo(c,e.name),Vo(u,e.name),Vo(f,e.name),Vo(p,e.name),Vo(x,e.name),Vo(S,e.name);const J=new Ni({uid:C,auth:e,email:a,emailVerified:A,displayName:i,isAnonymous:B,photoURL:u,phoneNumber:c,tenantId:f,stsTokenManager:$,createdAt:x,lastLoginAt:S});return L&&Array.isArray(L)&&(J.providerData=L.map(Y=>({...Y}))),p&&(J._redirectEventId=p),J}static async _fromIdTokenResponse(e,t,i=!1){const a=new Vc;a.updateFromServerResponse(t);const c=new Ni({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await wf(c),c}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];pt(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?ux(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!c?.length,f=new Vc;f.updateFromIdToken(i);const p=new Ni({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),x={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new gg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!c?.length};return Object.assign(p,x),p}}const eb=new Map;function Ba(s){Wa(s instanceof Function,"Expected a class definition");let e=eb.get(s);return e?(Wa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,eb.set(s,e),e)}class hx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}hx.type="NONE";const tb=hx;function af(s,e,t){return`firebase:${s}:${e}:${t}`}class Uc{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:c}=this.auth;this.fullUserKey=af(this.userKey,a.apiKey,c),this.fullPersistenceKey=af("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xf(this.auth,{idToken:e}).catch(()=>{});return t?Ni._fromGetAccountInfoResponse(this.auth,t,e):null}return Ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Uc(Ba(tb),e,i);const a=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let c=a[0]||Ba(tb);const u=af(i,e.config.apiKey,e.name);let f=null;for(const x of t)try{const S=await x._get(u);if(S){let C;if(typeof S=="string"){const A=await xf(e,{idToken:S}).catch(()=>{});if(!A)break;C=await Ni._fromGetAccountInfoResponse(e,A,S)}else C=Ni._fromJSON(e,S);x!==c&&(f=C),c=x;break}}catch{}const p=a.filter(x=>x._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Uc(c,e,i):(c=p[0],f&&await c._set(u,f.toJSON()),await Promise.all(t.map(async x=>{if(x!==c)try{await x._remove(u)}catch{}})),new Uc(c,e,i))}}function nb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(px(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(dx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vx(e))return"Blackberry";if(yx(e))return"Webos";if(fx(e))return"Safari";if((e.includes("chrome/")||mx(e))&&!e.includes("edge/"))return"Chrome";if(gx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function dx(s=Wr()){return/firefox\//i.test(s)}function fx(s=Wr()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mx(s=Wr()){return/crios\//i.test(s)}function px(s=Wr()){return/iemobile/i.test(s)}function gx(s=Wr()){return/android/i.test(s)}function vx(s=Wr()){return/blackberry/i.test(s)}function yx(s=Wr()){return/webos/i.test(s)}function nv(s=Wr()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function IN(s=Wr()){return nv(s)&&!!window.navigator?.standalone}function MN(){return YT()&&document.documentMode===10}function bx(s=Wr()){return nv(s)||gx(s)||yx(s)||vx(s)||/windows phone/i.test(s)||px(s)}function _x(s,e=[]){let t;switch(s){case"Browser":t=nb(Wr());break;case"Worker":t=`${nb(Wr())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${tu}/${i}`}class ON{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=c=>new Promise((u,f)=>{try{const p=e(c);u(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function LN(s,e={}){return Za(s,"GET","/v2/passwordPolicy",Ja(s,e))}const PN=6;class VN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??PN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class UN{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rb(this),this.idTokenSubscription=new rb(this),this.beforeStateQueue=new ON(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ix,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ba(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Uc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xf(this,{idToken:e}),i=await Ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(oi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,u=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===u)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject(Fa(this));const t=e?yr(e):null;return t&&pt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(Fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject(Fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ba(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LN(this),t=new VN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await DN(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ba(e)||this._popupRedirectResolver;pt(t,this,"argument-error"),this.redirectPersistenceManager=await Uc.create(this,[Ba(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(f,this,"internal-error"),f.then(()=>{u||c(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_x(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&mN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function rl(s){return yr(s)}class rb{constructor(e){this.auth=e,this.observer=null,this.addObserver=nC(t=>this.observer=t)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Hf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BN(s){Hf=s}function xx(s){return Hf.loadJS(s)}function zN(){return Hf.recaptchaEnterpriseScript}function FN(){return Hf.gapiScript}function qN(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class HN{constructor(){this.enterprise=new $N}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $N{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const GN="recaptcha-enterprise",wx="NO_RECAPTCHA";class WN{constructor(e){this.type=GN,this.auth=rl(e)}async verify(e="verify",t=!1){async function i(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,f)=>{SN(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const x=new EN(p);return c.tenantId==null?c._agentRecaptchaConfig=x:c._tenantRecaptchaConfigs[c.tenantId]=x,u(x.siteKey)}}).catch(p=>{f(p)})})}function a(c,u,f){const p=window.grecaptcha;J1(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(x=>{u(x)}).catch(()=>{u(wx)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HN().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{i(this.auth).then(f=>{if(!t&&J1(window.grecaptcha))a(f,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=zN();p.length!==0&&(p+=f),xx(p).then(()=>{a(f,c,u)}).catch(x=>{u(x)})}}).catch(f=>{u(f)})})}}async function sb(s,e,t,i=!1,a=!1){const c=new WN(s);let u;if(a)u=wx;else try{u=await c.verify(t)}catch{u=await c.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,x=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:x,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Ef(s,e,t,i,a){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await sb(s,e,t,t==="getOobCode");return i(s,c)}else return i(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await sb(s,e,t,t==="getOobCode");return i(s,u)}else return Promise.reject(c)})}function YN(s,e){const t=Xg(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(Ul(c,e??{}))return a;ki(a,"already-initialized")}return t.initialize({options:e})}function QN(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ba);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function KN(s,e,t){const i=rl(s);pt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,c=Ex(e),{host:u,port:f}=XN(e),p=f===null?"":`:${f}`,x={url:`${c}//${u}${p}/`},S=Object.freeze({host:u,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){pt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pt(Ul(x,i.config.emulator)&&Ul(S,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=x,i.emulatorConfig=S,i.settings.appVerificationDisabledForTesting=!0,eu(u)?(X_(`${c}//${u}${p}`),J_("Auth",!0)):JN()}function Ex(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function XN(s){const e=Ex(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const c=a[1];return{host:c,port:ib(i.substr(c.length+1))}}else{const[c,u]=i.split(":");return{host:c,port:ib(u)}}}function ib(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function JN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class rv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ua("not implemented")}_getIdTokenResponse(e){return Ua("not implemented")}_linkToIdToken(e,t){return Ua("not implemented")}_getReauthenticationResolver(e){return Ua("not implemented")}}async function ZN(s,e){return Za(s,"POST","/v1/accounts:signUp",e)}async function eA(s,e){return Dh(s,"POST","/v1/accounts:signInWithPassword",Ja(s,e))}async function tA(s,e){return Za(s,"POST","/v1/accounts:sendOobCode",Ja(s,e))}async function nA(s,e){return tA(s,e)}async function rA(s,e){return Dh(s,"POST","/v1/accounts:signInWithEmailLink",Ja(s,e))}async function sA(s,e){return Dh(s,"POST","/v1/accounts:signInWithEmailLink",Ja(s,e))}class yh extends rv{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new yh(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new yh(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ef(e,t,"signInWithPassword",eA);case"emailLink":return rA(e,{email:this._email,oobCode:this._password});default:ki(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ef(e,i,"signUpPassword",ZN);case"emailLink":return sA(e,{idToken:t,email:this._email,oobCode:this._password});default:ki(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Bc(s,e){return Dh(s,"POST","/v1/accounts:signInWithIdp",Ja(s,e))}const iA="http://localhost";class zl extends rv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ki("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...c}=t;if(!i||!a)return null;const u=new zl(i,a);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Bc(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Bc(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bc(e,t)}buildRequest(){const e={requestUri:iA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Rh(t)}return e}}function aA(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oA(s){const e=rh(sh(s)).link,t=e?rh(sh(e)).deep_link_id:null,i=rh(sh(s)).deep_link_id;return(i?rh(sh(i)).link:null)||i||t||e||s}class sv{constructor(e){const t=rh(sh(e)),i=t.apiKey??null,a=t.oobCode??null,c=aA(t.mode??null);pt(i&&a&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=oA(e);try{return new sv(t)}catch{return null}}}class nu{constructor(){this.providerId=nu.PROVIDER_ID}static credential(e,t){return yh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=sv.parseLink(t);return pt(i,"argument-error"),yh._fromEmailAndCode(e,i.code,i.tenantId)}}nu.PROVIDER_ID="password";nu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Sx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ih extends Sx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Bo extends Ih{constructor(){super("facebook.com")}static credential(e){return zl._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bo.credential(e.oauthAccessToken)}catch{return null}}}Bo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bo.PROVIDER_ID="facebook.com";class zo extends Ih{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zl._fromParams({providerId:zo.PROVIDER_ID,signInMethod:zo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zo.credentialFromTaggedObject(e)}static credentialFromError(e){return zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return zo.credential(t,i)}catch{return null}}}zo.GOOGLE_SIGN_IN_METHOD="google.com";zo.PROVIDER_ID="google.com";class Fo extends Ih{constructor(){super("github.com")}static credential(e){return zl._fromParams({providerId:Fo.PROVIDER_ID,signInMethod:Fo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fo.credentialFromTaggedObject(e)}static credentialFromError(e){return Fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fo.credential(e.oauthAccessToken)}catch{return null}}}Fo.GITHUB_SIGN_IN_METHOD="github.com";Fo.PROVIDER_ID="github.com";class qo extends Ih{constructor(){super("twitter.com")}static credential(e,t){return zl._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return qo.credential(t,i)}catch{return null}}}qo.TWITTER_SIGN_IN_METHOD="twitter.com";qo.PROVIDER_ID="twitter.com";async function lA(s,e){return Dh(s,"POST","/v1/accounts:signUp",Ja(s,e))}class Fl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const c=await Ni._fromIdTokenResponse(e,i,a),u=ab(i);return new Fl({user:c,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=ab(i);return new Fl({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function ab(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Sf extends Xa{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Sf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Sf(e,t,i,a)}}function Tx(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Sf._fromErrorAndOperation(s,c,e,i):c})}async function cA(s,e,t=!1){const i=await vh(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Fl._forOperation(s,"link",i)}async function uA(s,e,t=!1){const{auth:i}=s;if(oi(i.app))return Promise.reject(Fa(i));const a="reauthenticate";try{const c=await vh(s,Tx(i,a,e,s),t);pt(c.idToken,i,"internal-error");const u=tv(c.idToken);pt(u,i,"internal-error");const{sub:f}=u;return pt(s.uid===f,i,"user-mismatch"),Fl._forOperation(s,a,c)}catch(c){throw c?.code==="auth/user-not-found"&&ki(i,"user-mismatch"),c}}async function Cx(s,e,t=!1){if(oi(s.app))return Promise.reject(Fa(s));const i="signIn",a=await Tx(s,i,e),c=await Fl._fromIdTokenResponse(s,i,a);return t||await s._updateCurrentUser(c.user),c}async function hA(s,e){return Cx(rl(s),e)}async function Nx(s){const e=rl(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dA(s,e,t){const i=rl(s);await Ef(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",nA)}async function Ax(s,e,t){if(oi(s.app))return Promise.reject(Fa(s));const i=rl(s),u=await Ef(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lA).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Nx(s),p}),f=await Fl._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function fA(s,e,t){return oi(s.app)?Promise.reject(Fa(s)):hA(yr(s),nu.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Nx(s),i})}function mA(s,e){return yr(s).setPersistence(e)}function pA(s,e,t,i){return yr(s).onIdTokenChanged(e,t,i)}function gA(s,e,t){return yr(s).beforeAuthStateChanged(e,t)}function vA(s,e,t,i){return yr(s).onAuthStateChanged(e,t,i)}function iv(s){return yr(s).signOut()}const Tf="__sak";class jx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tf,"1"),this.storage.removeItem(Tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const yA=1e3,bA=10;class Rx extends jx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},c=this.storage.getItem(i);MN()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,bA):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},yA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Rx.type="LOCAL";const kx=Rx;class Dx extends jx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dx.type="SESSION";const av=Dx;function _A(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class $f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new $f(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:c}=t.data,u=this.handlersMap[a];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(u).map(async x=>x(t.origin,c)),p=await _A(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$f.receivers=[];function ov(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class xA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((f,p)=>{const x=ov("",20);a.port1.start();const S=setTimeout(()=>{p(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(C){const A=C;if(A.data.eventId===x)switch(A.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(A.data.response);break;default:clearTimeout(S),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function ra(){return window}function wA(s){ra().location.href=s}function Ix(){return typeof ra().WorkerGlobalScope<"u"&&typeof ra().importScripts=="function"}async function EA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SA(){return navigator?.serviceWorker?.controller||null}function TA(){return Ix()?self:null}const Mx="firebaseLocalStorageDb",CA=1,Cf="firebaseLocalStorage",Ox="fbase_key";class Mh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gf(s,e){return s.transaction([Cf],e?"readwrite":"readonly").objectStore(Cf)}function NA(){const s=indexedDB.deleteDatabase(Mx);return new Mh(s).toPromise()}function vg(){const s=indexedDB.open(Mx,CA);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(Cf,{keyPath:Ox})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(Cf)?e(i):(i.close(),await NA(),e(await vg()))})})}async function ob(s,e,t){const i=Gf(s,!0).put({[Ox]:e,value:t});return new Mh(i).toPromise()}async function AA(s,e){const t=Gf(s,!1).get(e),i=await new Mh(t).toPromise();return i===void 0?null:i.value}function lb(s,e){const t=Gf(s,!0).delete(e);return new Mh(t).toPromise()}const jA=800,RA=3;class Lx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>RA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ix()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$f._getInstance(TA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await EA(),!this.activeServiceWorker)return;this.sender=new xA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vg();return await ob(e,Tf,"1"),await lb(e,Tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ob(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>AA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Gf(a,!1).getAll();return new Mh(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lx.type="LOCAL";const kA=Lx;new kh(3e4,6e4);function DA(s,e){return e?Ba(e):(pt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class lv extends rv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function IA(s){return Cx(s.auth,new lv(s),s.bypassAuthState)}function MA(s){const{auth:e,user:t}=s;return pt(t,e,"internal-error"),uA(t,new lv(s),s.bypassAuthState)}async function OA(s){const{auth:e,user:t}=s;return pt(t,e,"internal-error"),cA(t,new lv(s),s.bypassAuthState)}class Px{constructor(e,t,i,a,c=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:c,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IA;case"linkViaPopup":case"linkViaRedirect":return OA;case"reauthViaPopup":case"reauthViaRedirect":return MA;default:ki(this.auth,"internal-error")}}resolve(e){Wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const LA=new kh(2e3,1e4);class Lc extends Px{constructor(e,t,i,a,c){super(e,t,a,c),this.provider=i,this.authWindow=null,this.pollId=null,Lc.currentPopupAction&&Lc.currentPopupAction.cancel(),Lc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pt(e,this.auth,"internal-error"),e}async onExecution(){Wa(this.filter.length===1,"Popup operations only handle one event");const e=ov();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(na(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(na(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(na(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LA.get())};e()}}Lc.currentPopupAction=null;const PA="pendingRedirect",of=new Map;class VA extends Px{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=of.get(this.auth._key());if(!e){try{const i=await UA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}of.set(this.auth._key(),e)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UA(s,e){const t=FA(e),i=zA(s);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function BA(s,e){of.set(s._key(),e)}function zA(s){return Ba(s._redirectPersistence)}function FA(s){return af(PA,s.config.apiKey,s.name)}async function qA(s,e,t=!1){if(oi(s.app))return Promise.reject(Fa(s));const i=rl(s),a=DA(i,e),u=await new VA(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}const HA=600*1e3;class $A{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Vx(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(na(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HA&&this.cachedEventUids.clear(),this.cachedEventUids.has(cb(e))}saveEventToCache(e){this.cachedEventUids.add(cb(e)),this.lastProcessedEventTime=Date.now()}}function cb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Vx({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function GA(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vx(s);default:return!1}}async function WA(s,e={}){return Za(s,"GET","/v1/projects",e)}const YA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QA=/^https?/;async function KA(s){if(s.config.emulator)return;const{authorizedDomains:e}=await WA(s);for(const t of e)try{if(XA(t))return}catch{}ki(s,"unauthorized-domain")}function XA(s){const e=pg(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const u=new URL(s);return u.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!QA.test(t))return!1;if(YA.test(s))return i===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const JA=new kh(3e4,6e4);function ub(){const s=ra().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function ZA(s){return new Promise((e,t)=>{function i(){ub(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ub(),t(na(s,"network-request-failed"))},timeout:JA.get()})}if(ra().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ra().gapi?.load)i();else{const a=qN("iframefcb");return ra()[a]=()=>{gapi.load?i():t(na(s,"network-request-failed"))},xx(`${FN()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw lf=null,e})}let lf=null;function ej(s){return lf=lf||ZA(s),lf}const tj=new kh(5e3,15e3),nj="__/auth/iframe",rj="emulator/auth/iframe",sj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ij=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aj(s){const e=s.config;pt(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?ev(e,rj):`https://${s.config.authDomain}/${nj}`,i={apiKey:e.apiKey,appName:s.name,v:tu},a=ij.get(s.config.apiHost);a&&(i.eid=a);const c=s._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${Rh(i).slice(1)}`}async function oj(s){const e=await ej(s),t=ra().gapi;return pt(t,s,"internal-error"),e.open({where:document.body,url:aj(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sj,dontclear:!0},i=>new Promise(async(a,c)=>{await i.restyle({setHideOnLeave:!1});const u=na(s,"network-request-failed"),f=ra().setTimeout(()=>{c(u)},tj.get());function p(){ra().clearTimeout(f),a(i)}i.ping(p).then(p,()=>{c(u)})}))}const lj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cj=500,uj=600,hj="_blank",dj="http://localhost";class hb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fj(s,e,t,i=cj,a=uj){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p={...lj,width:i.toString(),height:a.toString(),top:c,left:u},x=Wr().toLowerCase();t&&(f=mx(x)?hj:t),dx(x)&&(e=e||dj,p.scrollbars="yes");const S=Object.entries(p).reduce((A,[B,L])=>`${A}${B}=${L},`,"");if(IN(x)&&f!=="_self")return mj(e||"",f),new hb(null);const C=window.open(e||"",f,S);pt(C,s,"popup-blocked");try{C.focus()}catch{}return new hb(C)}function mj(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const pj="__/auth/handler",gj="emulator/auth/handler",vj=encodeURIComponent("fac");async function db(s,e,t,i,a,c){pt(s.config.authDomain,s,"auth-domain-config-required"),pt(s.config.apiKey,s,"invalid-api-key");const u={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:tu,eventId:a};if(e instanceof Sx){e.setDefaultLanguage(s.languageCode),u.providerId=e.providerId||"",tC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,C]of Object.entries({}))u[S]=C}if(e instanceof Ih){const S=e.getScopes().filter(C=>C!=="");S.length>0&&(u.scopes=S.join(","))}s.tenantId&&(u.tid=s.tenantId);const f=u;for(const S of Object.keys(f))f[S]===void 0&&delete f[S];const p=await s._getAppCheckToken(),x=p?`#${vj}=${encodeURIComponent(p)}`:"";return`${yj(s)}?${Rh(f).slice(1)}${x}`}function yj({config:s}){return s.emulator?ev(s,gj):`https://${s.authDomain}/${pj}`}const Qp="webStorageSupport";class bj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=av,this._completeRedirectFn=qA,this._overrideRedirectResult=BA}async _openPopup(e,t,i,a){Wa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await db(e,t,i,pg(),a);return fj(e,c,ov())}async _openRedirect(e,t,i,a){await this._originValidation(e);const c=await db(e,t,i,pg(),a);return wA(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Wa(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await oj(e),i=new $A(e);return t.register("authEvent",a=>(pt(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qp,{type:Qp},a=>{const c=a?.[0]?.[Qp];c!==void 0&&t(!!c),ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=KA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bx()||fx()||nv()}}const _j=bj;var fb="@firebase/auth",mb="1.12.0";class xj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wj(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ej(s){Hc(new Bl("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;pt(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:u,authDomain:f,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_x(s)},x=new UN(i,a,c,p);return QN(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Hc(new Bl("auth-internal",e=>{const t=rl(e.getProvider("auth").getImmediate());return(i=>new xj(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wo(fb,mb,wj(s)),Wo(fb,mb,"esm2020")}const Sj=300,Tj=K_("authIdTokenMaxAge")||Sj;let pb=null;const Cj=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Tj)return;const a=t?.token;pb!==a&&(pb=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Ux(s=tx()){const e=Xg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=YN(s,{popupRedirectResolver:_j,persistence:[kA,kx,av]}),i=K_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const u=Cj(c.toString());gA(t,u,()=>u(t.currentUser)),pA(t,f=>u(f))}}const a=Y_("auth");return a&&KN(t,`http://${a}`),t}function Nj(){return document.getElementsByTagName("head")?.[0]??document}BN({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=a=>{const c=na("internal-error");c.customData=a,t(c)},i.type="text/javascript",i.charset="UTF-8",Nj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ej("Browser");var gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Yo,Bx;(function(){var s;function e(q,V){function H(){}H.prototype=V.prototype,q.F=V.prototype,q.prototype=new H,q.prototype.constructor=q,q.D=function(te,W,ee){for(var O=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)O[Re-2]=arguments[Re];return V.prototype[W].apply(te,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(q,V,H){H||(H=0);const te=Array(16);if(typeof V=="string")for(var W=0;W<16;++W)te[W]=V.charCodeAt(H++)|V.charCodeAt(H++)<<8|V.charCodeAt(H++)<<16|V.charCodeAt(H++)<<24;else for(W=0;W<16;++W)te[W]=V[H++]|V[H++]<<8|V[H++]<<16|V[H++]<<24;V=q.g[0],H=q.g[1],W=q.g[2];let ee=q.g[3],O;O=V+(ee^H&(W^ee))+te[0]+3614090360&4294967295,V=H+(O<<7&4294967295|O>>>25),O=ee+(W^V&(H^W))+te[1]+3905402710&4294967295,ee=V+(O<<12&4294967295|O>>>20),O=W+(H^ee&(V^H))+te[2]+606105819&4294967295,W=ee+(O<<17&4294967295|O>>>15),O=H+(V^W&(ee^V))+te[3]+3250441966&4294967295,H=W+(O<<22&4294967295|O>>>10),O=V+(ee^H&(W^ee))+te[4]+4118548399&4294967295,V=H+(O<<7&4294967295|O>>>25),O=ee+(W^V&(H^W))+te[5]+1200080426&4294967295,ee=V+(O<<12&4294967295|O>>>20),O=W+(H^ee&(V^H))+te[6]+2821735955&4294967295,W=ee+(O<<17&4294967295|O>>>15),O=H+(V^W&(ee^V))+te[7]+4249261313&4294967295,H=W+(O<<22&4294967295|O>>>10),O=V+(ee^H&(W^ee))+te[8]+1770035416&4294967295,V=H+(O<<7&4294967295|O>>>25),O=ee+(W^V&(H^W))+te[9]+2336552879&4294967295,ee=V+(O<<12&4294967295|O>>>20),O=W+(H^ee&(V^H))+te[10]+4294925233&4294967295,W=ee+(O<<17&4294967295|O>>>15),O=H+(V^W&(ee^V))+te[11]+2304563134&4294967295,H=W+(O<<22&4294967295|O>>>10),O=V+(ee^H&(W^ee))+te[12]+1804603682&4294967295,V=H+(O<<7&4294967295|O>>>25),O=ee+(W^V&(H^W))+te[13]+4254626195&4294967295,ee=V+(O<<12&4294967295|O>>>20),O=W+(H^ee&(V^H))+te[14]+2792965006&4294967295,W=ee+(O<<17&4294967295|O>>>15),O=H+(V^W&(ee^V))+te[15]+1236535329&4294967295,H=W+(O<<22&4294967295|O>>>10),O=V+(W^ee&(H^W))+te[1]+4129170786&4294967295,V=H+(O<<5&4294967295|O>>>27),O=ee+(H^W&(V^H))+te[6]+3225465664&4294967295,ee=V+(O<<9&4294967295|O>>>23),O=W+(V^H&(ee^V))+te[11]+643717713&4294967295,W=ee+(O<<14&4294967295|O>>>18),O=H+(ee^V&(W^ee))+te[0]+3921069994&4294967295,H=W+(O<<20&4294967295|O>>>12),O=V+(W^ee&(H^W))+te[5]+3593408605&4294967295,V=H+(O<<5&4294967295|O>>>27),O=ee+(H^W&(V^H))+te[10]+38016083&4294967295,ee=V+(O<<9&4294967295|O>>>23),O=W+(V^H&(ee^V))+te[15]+3634488961&4294967295,W=ee+(O<<14&4294967295|O>>>18),O=H+(ee^V&(W^ee))+te[4]+3889429448&4294967295,H=W+(O<<20&4294967295|O>>>12),O=V+(W^ee&(H^W))+te[9]+568446438&4294967295,V=H+(O<<5&4294967295|O>>>27),O=ee+(H^W&(V^H))+te[14]+3275163606&4294967295,ee=V+(O<<9&4294967295|O>>>23),O=W+(V^H&(ee^V))+te[3]+4107603335&4294967295,W=ee+(O<<14&4294967295|O>>>18),O=H+(ee^V&(W^ee))+te[8]+1163531501&4294967295,H=W+(O<<20&4294967295|O>>>12),O=V+(W^ee&(H^W))+te[13]+2850285829&4294967295,V=H+(O<<5&4294967295|O>>>27),O=ee+(H^W&(V^H))+te[2]+4243563512&4294967295,ee=V+(O<<9&4294967295|O>>>23),O=W+(V^H&(ee^V))+te[7]+1735328473&4294967295,W=ee+(O<<14&4294967295|O>>>18),O=H+(ee^V&(W^ee))+te[12]+2368359562&4294967295,H=W+(O<<20&4294967295|O>>>12),O=V+(H^W^ee)+te[5]+4294588738&4294967295,V=H+(O<<4&4294967295|O>>>28),O=ee+(V^H^W)+te[8]+2272392833&4294967295,ee=V+(O<<11&4294967295|O>>>21),O=W+(ee^V^H)+te[11]+1839030562&4294967295,W=ee+(O<<16&4294967295|O>>>16),O=H+(W^ee^V)+te[14]+4259657740&4294967295,H=W+(O<<23&4294967295|O>>>9),O=V+(H^W^ee)+te[1]+2763975236&4294967295,V=H+(O<<4&4294967295|O>>>28),O=ee+(V^H^W)+te[4]+1272893353&4294967295,ee=V+(O<<11&4294967295|O>>>21),O=W+(ee^V^H)+te[7]+4139469664&4294967295,W=ee+(O<<16&4294967295|O>>>16),O=H+(W^ee^V)+te[10]+3200236656&4294967295,H=W+(O<<23&4294967295|O>>>9),O=V+(H^W^ee)+te[13]+681279174&4294967295,V=H+(O<<4&4294967295|O>>>28),O=ee+(V^H^W)+te[0]+3936430074&4294967295,ee=V+(O<<11&4294967295|O>>>21),O=W+(ee^V^H)+te[3]+3572445317&4294967295,W=ee+(O<<16&4294967295|O>>>16),O=H+(W^ee^V)+te[6]+76029189&4294967295,H=W+(O<<23&4294967295|O>>>9),O=V+(H^W^ee)+te[9]+3654602809&4294967295,V=H+(O<<4&4294967295|O>>>28),O=ee+(V^H^W)+te[12]+3873151461&4294967295,ee=V+(O<<11&4294967295|O>>>21),O=W+(ee^V^H)+te[15]+530742520&4294967295,W=ee+(O<<16&4294967295|O>>>16),O=H+(W^ee^V)+te[2]+3299628645&4294967295,H=W+(O<<23&4294967295|O>>>9),O=V+(W^(H|~ee))+te[0]+4096336452&4294967295,V=H+(O<<6&4294967295|O>>>26),O=ee+(H^(V|~W))+te[7]+1126891415&4294967295,ee=V+(O<<10&4294967295|O>>>22),O=W+(V^(ee|~H))+te[14]+2878612391&4294967295,W=ee+(O<<15&4294967295|O>>>17),O=H+(ee^(W|~V))+te[5]+4237533241&4294967295,H=W+(O<<21&4294967295|O>>>11),O=V+(W^(H|~ee))+te[12]+1700485571&4294967295,V=H+(O<<6&4294967295|O>>>26),O=ee+(H^(V|~W))+te[3]+2399980690&4294967295,ee=V+(O<<10&4294967295|O>>>22),O=W+(V^(ee|~H))+te[10]+4293915773&4294967295,W=ee+(O<<15&4294967295|O>>>17),O=H+(ee^(W|~V))+te[1]+2240044497&4294967295,H=W+(O<<21&4294967295|O>>>11),O=V+(W^(H|~ee))+te[8]+1873313359&4294967295,V=H+(O<<6&4294967295|O>>>26),O=ee+(H^(V|~W))+te[15]+4264355552&4294967295,ee=V+(O<<10&4294967295|O>>>22),O=W+(V^(ee|~H))+te[6]+2734768916&4294967295,W=ee+(O<<15&4294967295|O>>>17),O=H+(ee^(W|~V))+te[13]+1309151649&4294967295,H=W+(O<<21&4294967295|O>>>11),O=V+(W^(H|~ee))+te[4]+4149444226&4294967295,V=H+(O<<6&4294967295|O>>>26),O=ee+(H^(V|~W))+te[11]+3174756917&4294967295,ee=V+(O<<10&4294967295|O>>>22),O=W+(V^(ee|~H))+te[2]+718787259&4294967295,W=ee+(O<<15&4294967295|O>>>17),O=H+(ee^(W|~V))+te[9]+3951481745&4294967295,q.g[0]=q.g[0]+V&4294967295,q.g[1]=q.g[1]+(W+(O<<21&4294967295|O>>>11))&4294967295,q.g[2]=q.g[2]+W&4294967295,q.g[3]=q.g[3]+ee&4294967295}i.prototype.v=function(q,V){V===void 0&&(V=q.length);const H=V-this.blockSize,te=this.C;let W=this.h,ee=0;for(;ee<V;){if(W==0)for(;ee<=H;)a(this,q,ee),ee+=this.blockSize;if(typeof q=="string"){for(;ee<V;)if(te[W++]=q.charCodeAt(ee++),W==this.blockSize){a(this,te),W=0;break}}else for(;ee<V;)if(te[W++]=q[ee++],W==this.blockSize){a(this,te),W=0;break}}this.h=W,this.o+=V},i.prototype.A=function(){var q=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);q[0]=128;for(var V=1;V<q.length-8;++V)q[V]=0;V=this.o*8;for(var H=q.length-8;H<q.length;++H)q[H]=V&255,V/=256;for(this.v(q),q=Array(16),V=0,H=0;H<4;++H)for(let te=0;te<32;te+=8)q[V++]=this.g[H]>>>te&255;return q};function c(q,V){var H=f;return Object.prototype.hasOwnProperty.call(H,q)?H[q]:H[q]=V(q)}function u(q,V){this.h=V;const H=[];let te=!0;for(let W=q.length-1;W>=0;W--){const ee=q[W]|0;te&&ee==V||(H[W]=ee,te=!1)}this.g=H}var f={};function p(q){return-128<=q&&q<128?c(q,function(V){return new u([V|0],V<0?-1:0)}):new u([q|0],q<0?-1:0)}function x(q){if(isNaN(q)||!isFinite(q))return C;if(q<0)return $(x(-q));const V=[];let H=1;for(let te=0;q>=H;te++)V[te]=q/H|0,H*=4294967296;return new u(V,0)}function S(q,V){if(q.length==0)throw Error("number format error: empty string");if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(q.charAt(0)=="-")return $(S(q.substring(1),V));if(q.indexOf("-")>=0)throw Error('number format error: interior "-" character');const H=x(Math.pow(V,8));let te=C;for(let ee=0;ee<q.length;ee+=8){var W=Math.min(8,q.length-ee);const O=parseInt(q.substring(ee,ee+W),V);W<8?(W=x(Math.pow(V,W)),te=te.j(W).add(x(O))):(te=te.j(H),te=te.add(x(O)))}return te}var C=p(0),A=p(1),B=p(16777216);s=u.prototype,s.m=function(){if(F(this))return-$(this).m();let q=0,V=1;for(let H=0;H<this.g.length;H++){const te=this.i(H);q+=(te>=0?te:4294967296+te)*V,V*=4294967296}return q},s.toString=function(q){if(q=q||10,q<2||36<q)throw Error("radix out of range: "+q);if(L(this))return"0";if(F(this))return"-"+$(this).toString(q);const V=x(Math.pow(q,6));var H=this;let te="";for(;;){const W=X(H,V).g;H=J(H,W.j(V));let ee=((H.g.length>0?H.g[0]:H.h)>>>0).toString(q);if(H=W,L(H))return ee+te;for(;ee.length<6;)ee="0"+ee;te=ee+te}},s.i=function(q){return q<0?0:q<this.g.length?this.g[q]:this.h};function L(q){if(q.h!=0)return!1;for(let V=0;V<q.g.length;V++)if(q.g[V]!=0)return!1;return!0}function F(q){return q.h==-1}s.l=function(q){return q=J(this,q),F(q)?-1:L(q)?0:1};function $(q){const V=q.g.length,H=[];for(let te=0;te<V;te++)H[te]=~q.g[te];return new u(H,~q.h).add(A)}s.abs=function(){return F(this)?$(this):this},s.add=function(q){const V=Math.max(this.g.length,q.g.length),H=[];let te=0;for(let W=0;W<=V;W++){let ee=te+(this.i(W)&65535)+(q.i(W)&65535),O=(ee>>>16)+(this.i(W)>>>16)+(q.i(W)>>>16);te=O>>>16,ee&=65535,O&=65535,H[W]=O<<16|ee}return new u(H,H[H.length-1]&-2147483648?-1:0)};function J(q,V){return q.add($(V))}s.j=function(q){if(L(this)||L(q))return C;if(F(this))return F(q)?$(this).j($(q)):$($(this).j(q));if(F(q))return $(this.j($(q)));if(this.l(B)<0&&q.l(B)<0)return x(this.m()*q.m());const V=this.g.length+q.g.length,H=[];for(var te=0;te<2*V;te++)H[te]=0;for(te=0;te<this.g.length;te++)for(let W=0;W<q.g.length;W++){const ee=this.i(te)>>>16,O=this.i(te)&65535,Re=q.i(W)>>>16,qe=q.i(W)&65535;H[2*te+2*W]+=O*qe,Y(H,2*te+2*W),H[2*te+2*W+1]+=ee*qe,Y(H,2*te+2*W+1),H[2*te+2*W+1]+=O*Re,Y(H,2*te+2*W+1),H[2*te+2*W+2]+=ee*Re,Y(H,2*te+2*W+2)}for(q=0;q<V;q++)H[q]=H[2*q+1]<<16|H[2*q];for(q=V;q<2*V;q++)H[q]=0;return new u(H,0)};function Y(q,V){for(;(q[V]&65535)!=q[V];)q[V+1]+=q[V]>>>16,q[V]&=65535,V++}function ce(q,V){this.g=q,this.h=V}function X(q,V){if(L(V))throw Error("division by zero");if(L(q))return new ce(C,C);if(F(q))return V=X($(q),V),new ce($(V.g),$(V.h));if(F(V))return V=X(q,$(V)),new ce($(V.g),V.h);if(q.g.length>30){if(F(q)||F(V))throw Error("slowDivide_ only works with positive integers.");for(var H=A,te=V;te.l(q)<=0;)H=pe(H),te=pe(te);var W=xe(H,1),ee=xe(te,1);for(te=xe(te,2),H=xe(H,2);!L(te);){var O=ee.add(te);O.l(q)<=0&&(W=W.add(H),ee=O),te=xe(te,1),H=xe(H,1)}return V=J(q,W.j(V)),new ce(W,V)}for(W=C;q.l(V)>=0;){for(H=Math.max(1,Math.floor(q.m()/V.m())),te=Math.ceil(Math.log(H)/Math.LN2),te=te<=48?1:Math.pow(2,te-48),ee=x(H),O=ee.j(V);F(O)||O.l(q)>0;)H-=te,ee=x(H),O=ee.j(V);L(ee)&&(ee=A),W=W.add(ee),q=J(q,O)}return new ce(W,q)}s.B=function(q){return X(this,q).h},s.and=function(q){const V=Math.max(this.g.length,q.g.length),H=[];for(let te=0;te<V;te++)H[te]=this.i(te)&q.i(te);return new u(H,this.h&q.h)},s.or=function(q){const V=Math.max(this.g.length,q.g.length),H=[];for(let te=0;te<V;te++)H[te]=this.i(te)|q.i(te);return new u(H,this.h|q.h)},s.xor=function(q){const V=Math.max(this.g.length,q.g.length),H=[];for(let te=0;te<V;te++)H[te]=this.i(te)^q.i(te);return new u(H,this.h^q.h)};function pe(q){const V=q.g.length+1,H=[];for(let te=0;te<V;te++)H[te]=q.i(te)<<1|q.i(te-1)>>>31;return new u(H,q.h)}function xe(q,V){const H=V>>5;V%=32;const te=q.g.length-H,W=[];for(let ee=0;ee<te;ee++)W[ee]=V>0?q.i(ee+H)>>>V|q.i(ee+H+1)<<32-V:q.i(ee+H);return new u(W,q.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Bx=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=x,u.fromString=S,Yo=u}).apply(typeof gb<"u"?gb:typeof self<"u"?self:typeof window<"u"?window:{});var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var zx,ih,Fx,cf,yg,qx,Hx,$x;(function(){var s,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qd=="object"&&Qd];for(var N=0;N<m.length;++N){var k=m[N];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var i=t(this);function a(m,N){if(N)e:{var k=i;m=m.split(".");for(var G=0;G<m.length-1;G++){var ye=m[G];if(!(ye in k))break e;k=k[ye]}m=m[m.length-1],G=k[m],N=N(G),N!=G&&N!=null&&e(k,m,{configurable:!0,writable:!0,value:N})}}a("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(m){return m||function(N){var k=[],G;for(G in N)Object.prototype.hasOwnProperty.call(N,G)&&k.push([G,N[G]]);return k}});var c=c||{},u=this||self;function f(m){var N=typeof m;return N=="object"&&m!=null||N=="function"}function p(m,N,k){return m.call.apply(m.bind,arguments)}function x(m,N,k){return x=p,x.apply(null,arguments)}function S(m,N){var k=Array.prototype.slice.call(arguments,1);return function(){var G=k.slice();return G.push.apply(G,arguments),m.apply(this,G)}}function C(m,N){function k(){}k.prototype=N.prototype,m.Z=N.prototype,m.prototype=new k,m.prototype.constructor=m,m.Ob=function(G,ye,Te){for(var Ye=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)Ye[wt-2]=arguments[wt];return N.prototype[ye].apply(G,Ye)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function B(m){const N=m.length;if(N>0){const k=Array(N);for(let G=0;G<N;G++)k[G]=m[G];return k}return[]}function L(m,N){for(let G=1;G<arguments.length;G++){const ye=arguments[G];var k=typeof ye;if(k=k!="object"?k:ye?Array.isArray(ye)?"array":k:"null",k=="array"||k=="object"&&typeof ye.length=="number"){k=m.length||0;const Te=ye.length||0;m.length=k+Te;for(let Ye=0;Ye<Te;Ye++)m[k+Ye]=ye[Ye]}else m.push(ye)}}class F{constructor(N,k){this.i=N,this.j=k,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function $(m){u.setTimeout(()=>{throw m},0)}function J(){var m=q;let N=null;return m.g&&(N=m.g,m.g=m.g.next,m.g||(m.h=null),N.next=null),N}class Y{constructor(){this.h=this.g=null}add(N,k){const G=ce.get();G.set(N,k),this.h?this.h.next=G:this.g=G,this.h=G}}var ce=new F(()=>new X,m=>m.reset());class X{constructor(){this.next=this.g=this.h=null}set(N,k){this.h=N,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,xe=!1,q=new Y,V=()=>{const m=Promise.resolve(void 0);pe=()=>{m.then(H)}};function H(){for(var m;m=J();){try{m.h.call(m.g)}catch(k){$(k)}var N=ce;N.j(m),N.h<100&&(N.h++,m.next=N.g,N.g=m)}xe=!1}function te(){this.u=this.u,this.C=this.C}te.prototype.u=!1,te.prototype.dispose=function(){this.u||(this.u=!0,this.N())},te.prototype[Symbol.dispose]=function(){this.dispose()},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(m,N){this.type=m,this.g=this.target=N,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ee=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,N=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const k=()=>{};u.addEventListener("test",k,N),u.removeEventListener("test",k,N)}catch{}return m})();function O(m){return/^[\s\xa0]*$/.test(m)}function Re(m,N){W.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,N)}C(Re,W),Re.prototype.init=function(m,N){const k=this.type=m.type,G=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=N,N=m.relatedTarget,N||(k=="mouseover"?N=m.fromElement:k=="mouseout"&&(N=m.toElement)),this.relatedTarget=N,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Re.Z.h.call(this)},Re.prototype.h=function(){Re.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var qe="closure_listenable_"+(Math.random()*1e6|0),ne=0;function Ee(m,N,k,G,ye){this.listener=m,this.proxy=null,this.src=N,this.type=k,this.capture=!!G,this.ha=ye,this.key=++ne,this.da=this.fa=!1}function Le(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ae(m,N,k){for(const G in m)N.call(k,m[G],G,m)}function Ge(m,N){for(const k in m)N.call(void 0,m[k],k,m)}function M(m){const N={};for(const k in m)N[k]=m[k];return N}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ie(m,N){let k,G;for(let ye=1;ye<arguments.length;ye++){G=arguments[ye];for(k in G)m[k]=G[k];for(let Te=0;Te<se.length;Te++)k=se[Te],Object.prototype.hasOwnProperty.call(G,k)&&(m[k]=G[k])}}function he(m){this.src=m,this.g={},this.h=0}he.prototype.add=function(m,N,k,G,ye){const Te=m.toString();m=this.g[Te],m||(m=this.g[Te]=[],this.h++);const Ye=de(m,N,G,ye);return Ye>-1?(N=m[Ye],k||(N.fa=!1)):(N=new Ee(N,this.src,Te,!!G,ye),N.fa=k,m.push(N)),N};function Q(m,N){const k=N.type;if(k in m.g){var G=m.g[k],ye=Array.prototype.indexOf.call(G,N,void 0),Te;(Te=ye>=0)&&Array.prototype.splice.call(G,ye,1),Te&&(Le(N),m.g[k].length==0&&(delete m.g[k],m.h--))}}function de(m,N,k,G){for(let ye=0;ye<m.length;++ye){const Te=m[ye];if(!Te.da&&Te.listener==N&&Te.capture==!!k&&Te.ha==G)return ye}return-1}var fe="closure_lm_"+(Math.random()*1e6|0),Oe={};function He(m,N,k,G,ye){if(Array.isArray(N)){for(let Te=0;Te<N.length;Te++)He(m,N[Te],k,G,ye);return null}return k=Bt(k),m&&m[qe]?m.J(N,k,f(G)?!!G.capture:!1,ye):nt(m,N,k,!1,G,ye)}function nt(m,N,k,G,ye,Te){if(!N)throw Error("Invalid event type");const Ye=f(ye)?!!ye.capture:!!ye;let wt=xt(m);if(wt||(m[fe]=wt=new he(m)),k=wt.add(N,k,G,Ye,Te),k.proxy)return k;if(G=Ve(),k.proxy=G,G.src=m,G.listener=k,m.addEventListener)ee||(ye=Ye),ye===void 0&&(ye=!1),m.addEventListener(N.toString(),G,ye);else if(m.attachEvent)m.attachEvent(jt(N.toString()),G);else if(m.addListener&&m.removeListener)m.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Ve(){function m(k){return N.call(m.src,m.listener,k)}const N=Yt;return m}function Mt(m,N,k,G,ye){if(Array.isArray(N))for(var Te=0;Te<N.length;Te++)Mt(m,N[Te],k,G,ye);else G=f(G)?!!G.capture:!!G,k=Bt(k),m&&m[qe]?(m=m.i,Te=String(N).toString(),Te in m.g&&(N=m.g[Te],k=de(N,k,G,ye),k>-1&&(Le(N[k]),Array.prototype.splice.call(N,k,1),N.length==0&&(delete m.g[Te],m.h--)))):m&&(m=xt(m))&&(N=m.g[N.toString()],m=-1,N&&(m=de(N,k,G,ye)),(k=m>-1?N[m]:null)&&Zt(k))}function Zt(m){if(typeof m!="number"&&m&&!m.da){var N=m.src;if(N&&N[qe])Q(N.i,m);else{var k=m.type,G=m.proxy;N.removeEventListener?N.removeEventListener(k,G,m.capture):N.detachEvent?N.detachEvent(jt(k),G):N.addListener&&N.removeListener&&N.removeListener(G),(k=xt(N))?(Q(k,m),k.h==0&&(k.src=null,N[fe]=null)):Le(m)}}}function jt(m){return m in Oe?Oe[m]:Oe[m]="on"+m}function Yt(m,N){if(m.da)m=!0;else{N=new Re(N,this);const k=m.listener,G=m.ha||m.src;m.fa&&Zt(m),m=k.call(G,N)}return m}function xt(m){return m=m[fe],m instanceof he?m:null}var it="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bt(m){return typeof m=="function"?m:(m[it]||(m[it]=function(N){return m.handleEvent(N)}),m[it])}function Ot(){te.call(this),this.i=new he(this),this.M=this,this.G=null}C(Ot,te),Ot.prototype[qe]=!0,Ot.prototype.removeEventListener=function(m,N,k,G){Mt(this,m,N,k,G)};function Lt(m,N){var k,G=m.G;if(G)for(k=[];G;G=G.G)k.push(G);if(m=m.M,G=N.type||N,typeof N=="string")N=new W(N,m);else if(N instanceof W)N.target=N.target||m;else{var ye=N;N=new W(G,m),ie(N,ye)}ye=!0;let Te,Ye;if(k)for(Ye=k.length-1;Ye>=0;Ye--)Te=N.g=k[Ye],ye=br(Te,G,!0,N)&&ye;if(Te=N.g=m,ye=br(Te,G,!0,N)&&ye,ye=br(Te,G,!1,N)&&ye,k)for(Ye=0;Ye<k.length;Ye++)Te=N.g=k[Ye],ye=br(Te,G,!1,N)&&ye}Ot.prototype.N=function(){if(Ot.Z.N.call(this),this.i){var m=this.i;for(const N in m.g){const k=m.g[N];for(let G=0;G<k.length;G++)Le(k[G]);delete m.g[N],m.h--}}this.G=null},Ot.prototype.J=function(m,N,k,G){return this.i.add(String(m),N,!1,k,G)},Ot.prototype.K=function(m,N,k,G){return this.i.add(String(m),N,!0,k,G)};function br(m,N,k,G){if(N=m.i.g[String(N)],!N)return!0;N=N.concat();let ye=!0;for(let Te=0;Te<N.length;++Te){const Ye=N[Te];if(Ye&&!Ye.da&&Ye.capture==k){const wt=Ye.listener,jn=Ye.ha||Ye.src;Ye.fa&&Q(m.i,Ye),ye=wt.call(jn,G)!==!1&&ye}}return ye&&!G.defaultPrevented}function Sn(m,N){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=x(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:u.setTimeout(m,N||0)}function Mr(m){m.g=Sn(()=>{m.g=null,m.i&&(m.i=!1,Mr(m))},m.l);const N=m.h;m.h=null,m.m.apply(null,N)}class Pt extends te{constructor(N,k){super(),this.m=N,this.l=k,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Mr(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Er(m){te.call(this),this.h=m,this.g={}}C(Er,te);var Yr=[];function Qr(m){Ae(m.g,function(N,k){this.g.hasOwnProperty(k)&&Zt(N)},m),m.g={}}Er.prototype.N=function(){Er.Z.N.call(this),Qr(this)},Er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Or=u.JSON.stringify,Ss=u.JSON.parse,Lr=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function kn(){}function Jn(){}var zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mn(){W.call(this,"d")}C(mn,W);function Fn(){W.call(this,"c")}C(Fn,W);var zt={},ve=null;function De(){return ve=ve||new Ot}zt.Ia="serverreachability";function rt(m){W.call(this,zt.Ia,m)}C(rt,W);function dt(m){const N=De();Lt(N,new rt(N))}zt.STAT_EVENT="statevent";function yt(m,N){W.call(this,zt.STAT_EVENT,m),this.stat=N}C(yt,W);function kt(m){const N=De();Lt(N,new yt(N,m))}zt.Ja="timingevent";function cn(m,N){W.call(this,zt.Ja,m),this.size=N}C(cn,W);function Dn(m,N){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},N)}function nn(){this.g=!0}nn.prototype.ua=function(){this.g=!1};function Zn(m,N,k,G,ye,Te){m.info(function(){if(m.g)if(Te){var Ye="",wt=Te.split("&");for(let Kt=0;Kt<wt.length;Kt++){var jn=wt[Kt].split("=");if(jn.length>1){const wn=jn[0];jn=jn[1];const cs=wn.split("_");Ye=cs.length>=2&&cs[1]=="type"?Ye+(wn+"="+jn+"&"):Ye+(wn+"=redacted&")}}}else Ye=null;else Ye=Te;return"XMLHTTP REQ ("+G+") [attempt "+ye+"]: "+N+`
`+k+`
`+Ye})}function Kr(m,N,k,G,ye,Te,Ye){m.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ye+"]: "+N+`
`+k+`
`+Te+" "+Ye})}function In(m,N,k,G){m.info(function(){return"XMLHTTP TEXT ("+N+"): "+Sr(m,k)+(G?" "+G:"")})}function qn(m,N){m.info(function(){return"TIMEOUT: "+N})}nn.prototype.info=function(){};function Sr(m,N){if(!m.g)return N;if(!N)return null;try{const Te=JSON.parse(N);if(Te){for(m=0;m<Te.length;m++)if(Array.isArray(Te[m])){var k=Te[m];if(!(k.length<2)){var G=k[1];if(Array.isArray(G)&&!(G.length<1)){var ye=G[0];if(ye!="noop"&&ye!="stop"&&ye!="close")for(let Ye=1;Ye<G.length;Ye++)G[Ye]=""}}}}return Or(Te)}catch{return N}}var ge={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Be={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$e;function Z(){}C(Z,kn),Z.prototype.g=function(){return new XMLHttpRequest},$e=new Z;function je(m){return encodeURIComponent(String(m))}function We(m){var N=1;m=m.split(":");const k=[];for(;N>0&&m.length;)k.push(m.shift()),N--;return m.length&&k.push(m.join(":")),k}function Qe(m,N,k,G){this.j=m,this.i=N,this.l=k,this.S=G||1,this.V=new Er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ot}function ot(){this.i=null,this.g="",this.h=!1}var lt={},bt={};function Mn(m,N,k){m.M=1,m.A=ca(Ln(N)),m.u=k,m.R=!0,er(m,null)}function er(m,N){m.F=Date.now(),os(m),m.B=Ln(m.A);var k=m.B,G=m.S;Array.isArray(G)||(G=[String(G)]),so(k.i,"t",G),m.C=0,k=m.j.L,m.h=new ot,m.g=co(m.j,k?N:null,!m.u),m.P>0&&(m.O=new Pt(x(m.Y,m,m.g),m.P)),N=m.V,k=m.g,G=m.ba;var ye="readystatechange";Array.isArray(ye)||(ye&&(Yr[0]=ye.toString()),ye=Yr);for(let Te=0;Te<ye.length;Te++){const Ye=He(k,ye[Te],G||N.handleEvent,!1,N.h||N);if(!Ye)break;N.g[Ye.key]=Ye}N=m.J?M(m.J):{},m.u?(m.v||(m.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,N)):(m.v="GET",m.g.ea(m.B,m.v,null,N)),dt(),Zn(m.i,m.v,m.B,m.l,m.S,m.u)}Qe.prototype.ba=function(m){m=m.target;const N=this.O;N&&Jr(m)==3?N.j():this.Y(m)},Qe.prototype.Y=function(m){try{if(m==this.g)e:{const wt=Jr(this.g),jn=this.g.ya(),Kt=this.g.ca();if(!(wt<3)&&(wt!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||wt!=4||jn==7||(jn==8||Kt<=0?dt(3):dt(2)),vt(this);var N=this.g.ca();this.X=N;var k=Tr(this);if(this.o=N==200,Kr(this.i,this.v,this.B,this.l,this.S,wt,N),this.o){if(this.U&&!this.L){t:{if(this.g){var G,ye=this.g;if((G=ye.g?ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(G)){var Te=G;break t}}Te=null}if(m=Te)In(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fs(this,m);else{this.o=!1,this.m=3,kt(12),tr(this),Hn(this);break e}}if(this.R){m=!0;let wn;for(;!this.K&&this.C<k.length;)if(wn=hi(this,k),wn==bt){wt==4&&(this.m=4,kt(14),m=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==lt){this.m=4,kt(15),In(this.i,this.l,k,"[Invalid Chunk]"),m=!1;break}else In(this.i,this.l,wn,null),Fs(this,wn);if(zs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||k.length!=0||this.h.h||(this.m=1,kt(16),m=!1),this.o=this.o&&m,!m)In(this.i,this.l,k,"[Invalid Chunked Response]"),tr(this),Hn(this);else if(k.length>0&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.aa&&!Ye.P&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Zr(Ye),Ye.P=!0,kt(11))}}else In(this.i,this.l,k,null),Fs(this,k);wt==4&&tr(this),this.o&&!this.K&&(wt==4?nc(this.j,this):(this.o=!1,os(this)))}else mi(this.g),N==400&&k.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),tr(this),Hn(this)}}}catch{}};function Tr(m){if(!zs(m))return m.g.la();const N=un(m.g);if(N==="")return"";let k="";const G=N.length,ye=Jr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return tr(m),Hn(m),"";m.h.i=new u.TextDecoder}for(let Te=0;Te<G;Te++)m.h.h=!0,k+=m.h.i.decode(N[Te],{stream:!(ye&&Te==G-1)});return N.length=0,m.h.g+=k,m.C=0,m.h.g}function zs(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function hi(m,N){var k=m.C,G=N.indexOf(`
`,k);return G==-1?bt:(k=Number(N.substring(k,G)),isNaN(k)?lt:(G+=1,G+k>N.length?bt:(N=N.slice(G,G+k),m.C=G+k,N)))}Qe.prototype.cancel=function(){this.K=!0,tr(this)};function os(m){m.T=Date.now()+m.H,di(m,m.H)}function di(m,N){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Dn(x(m.aa,m),N)}function vt(m){m.D&&(u.clearTimeout(m.D),m.D=null)}Qe.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(qn(this.i,this.B),this.M!=2&&(dt(),kt(17)),tr(this),this.m=2,Hn(this)):di(this,this.T-m)};function Hn(m){m.j.I==0||m.K||nc(m.j,m)}function tr(m){vt(m);var N=m.O;N&&typeof N.dispose=="function"&&N.dispose(),m.O=null,Qr(m.V),m.g&&(N=m.g,m.g=null,N.abort(),N.dispose())}function Fs(m,N){try{var k=m.j;if(k.I!=0&&(k.g==m||Hs(k.h,m))){if(!m.L&&Hs(k.h,m)&&k.I==3){try{var G=k.Ba.g.parse(N)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ye=G;if(ye[0]==0){e:if(!k.v){if(k.g)if(k.g.F+3e3<m.F)ma(k),Ys(k);else break e;qi(k),kt(18)}}else k.xa=ye[1],0<k.xa-k.K&&ye[2]<37500&&k.F&&k.A==0&&!k.C&&(k.C=Dn(x(k.Va,k),6e3));qs(k.h)<=1&&k.ta&&(k.ta=void 0)}else Qs(k,11)}else if((m.L||k.g==m)&&ma(k),!O(N))for(ye=k.Ba.g.parse(N),N=0;N<ye.length;N++){let Kt=ye[N];const wn=Kt[0];if(!(wn<=k.K))if(k.K=wn,Kt=Kt[1],k.I==2)if(Kt[0]=="c"){k.M=Kt[1],k.ba=Kt[2];const cs=Kt[3];cs!=null&&(k.ka=cs,k.j.info("VER="+k.ka));const Ks=Kt[4];Ks!=null&&(k.za=Ks,k.j.info("SVER="+k.za));const us=Kt[5];us!=null&&typeof us=="number"&&us>0&&(G=1.5*us,k.O=G,k.j.info("backChannelRequestTimeoutMs_="+G)),G=k;const Ns=m.g;if(Ns){const vi=Ns.g?Ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vi){var Te=G.h;Te.g||vi.indexOf("spdy")==-1&&vi.indexOf("quic")==-1&&vi.indexOf("h2")==-1||(Te.j=Te.l,Te.g=new Set,Te.h&&(ll(Te,Te.h),Te.h=null))}if(G.G){const pa=Ns.g?Ns.g.getResponseHeader("X-HTTP-Session-Id"):null;pa&&(G.wa=pa,rn(G.J,G.G,pa))}}k.I=3,k.l&&k.l.ra(),k.aa&&(k.T=Date.now()-m.F,k.j.info("Handshake RTT: "+k.T+"ms")),G=k;var Ye=m;if(G.na=rc(G,G.L?G.ba:null,G.W),Ye.L){eo(G.h,Ye);var wt=Ye,jn=G.O;jn&&(wt.H=jn),wt.D&&(vt(wt),os(wt)),G.g=Ye}else gl(G);k.i.length>0&&pn(k)}else Kt[0]!="stop"&&Kt[0]!="close"||Qs(k,7);else k.I==3&&(Kt[0]=="stop"||Kt[0]=="close"?Kt[0]=="stop"?Qs(k,7):Cn(k):Kt[0]!="noop"&&k.l&&k.l.qa(Kt),k.A=0)}}dt(4)}catch{}}var On=class{constructor(m,N){this.g=m,this.map=N}};function al(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ol(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function qs(m){return m.h?1:m.g?m.g.size:0}function Hs(m,N){return m.h?m.h==N:m.g?m.g.has(N):!1}function ll(m,N){m.g?m.g.add(N):m.h=N}function eo(m,N){m.h&&m.h==N?m.h=null:m.g&&m.g.has(N)&&m.g.delete(N)}al.prototype.cancel=function(){if(this.i=to(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function to(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let N=m.i;for(const k of m.g.values())N=N.concat(k.G);return N}return B(m.i)}var cl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function no(m,N){if(m){m=m.split("&");for(let k=0;k<m.length;k++){const G=m[k].indexOf("=");let ye,Te=null;G>=0?(ye=m[k].substring(0,G),Te=m[k].substring(G+1)):ye=m[k],N(ye,Te?decodeURIComponent(Te.replace(/\+/g," ")):"")}}}function Xr(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;m instanceof Xr?(this.l=m.l,Pn(this,m.j),this.o=m.o,this.g=m.g,Mi(this,m.u),this.h=m.h,ul(this,ec(m.i)),this.m=m.m):m&&(N=String(m).match(cl))?(this.l=!1,Pn(this,N[1]||"",!0),this.o=$s(N[2]||""),this.g=$s(N[3]||"",!0),Mi(this,N[4]),this.h=$s(N[5]||"",!0),ul(this,N[6]||"",!0),this.m=$s(N[7]||"")):(this.l=!1,this.i=new Li(null,this.l))}Xr.prototype.toString=function(){const m=[];var N=this.j;N&&m.push(ua(N,ro,!0),":");var k=this.g;return(k||N=="file")&&(m.push("//"),(N=this.o)&&m.push(ua(N,ro,!0),"@"),m.push(je(k).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.u,k!=null&&m.push(":",String(k))),(k=this.h)&&(this.g&&k.charAt(0)!="/"&&m.push("/"),m.push(ua(k,k.charAt(0)=="/"?hl:Xl,!0))),(k=this.i.toString())&&m.push("?",k),(k=this.m)&&m.push("#",ua(k,Jl)),m.join("")},Xr.prototype.resolve=function(m){const N=Ln(this);let k=!!m.j;k?Pn(N,m.j):k=!!m.o,k?N.o=m.o:k=!!m.g,k?N.g=m.g:k=m.u!=null;var G=m.h;if(k)Mi(N,m.u);else if(k=!!m.h){if(G.charAt(0)!="/")if(this.g&&!this.h)G="/"+G;else{var ye=N.h.lastIndexOf("/");ye!=-1&&(G=N.h.slice(0,ye+1)+G)}if(ye=G,ye==".."||ye==".")G="";else if(ye.indexOf("./")!=-1||ye.indexOf("/.")!=-1){G=ye.lastIndexOf("/",0)==0,ye=ye.split("/");const Te=[];for(let Ye=0;Ye<ye.length;){const wt=ye[Ye++];wt=="."?G&&Ye==ye.length&&Te.push(""):wt==".."?((Te.length>1||Te.length==1&&Te[0]!="")&&Te.pop(),G&&Ye==ye.length&&Te.push("")):(Te.push(wt),G=!0)}G=Te.join("/")}else G=ye}return k?N.h=G:k=m.i.toString()!=="",k?ul(N,ec(m.i)):k=!!m.m,k&&(N.m=m.m),N};function Ln(m){return new Xr(m)}function Pn(m,N,k){m.j=k?$s(N,!0):N,m.j&&(m.j=m.j.replace(/:$/,""))}function Mi(m,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);m.u=N}else m.u=null}function ul(m,N,k){N instanceof Li?(m.i=N,io(m.i,m.l)):(k||(N=ua(N,Oi)),m.i=new Li(N,m.l))}function rn(m,N,k){m.i.set(N,k)}function ca(m){return rn(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function $s(m,N){return m?N?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function ua(m,N,k){return typeof m=="string"?(m=encodeURI(m).replace(N,Pr),k&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Pr(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var ro=/[#\/\?@]/g,Xl=/[#\?:]/g,hl=/[#\?]/g,Oi=/[#\?@]/g,Jl=/#/g;function Li(m,N){this.h=this.g=null,this.i=m||null,this.j=!!N}function Vr(m){m.g||(m.g=new Map,m.h=0,m.i&&no(m.i,function(N,k){m.add(decodeURIComponent(N.replace(/\+/g," ")),k)}))}s=Li.prototype,s.add=function(m,N){Vr(this),this.i=null,m=Pi(this,m);let k=this.g.get(m);return k||this.g.set(m,k=[]),k.push(N),this.h+=1,this};function Zl(m,N){Vr(m),N=Pi(m,N),m.g.has(N)&&(m.i=null,m.h-=m.g.get(N).length,m.g.delete(N))}function dl(m,N){return Vr(m),N=Pi(m,N),m.g.has(N)}s.forEach=function(m,N){Vr(this),this.g.forEach(function(k,G){k.forEach(function(ye){m.call(N,ye,G,this)},this)},this)};function fl(m,N){Vr(m);let k=[];if(typeof N=="string")dl(m,N)&&(k=k.concat(m.g.get(Pi(m,N))));else for(m=Array.from(m.g.values()),N=0;N<m.length;N++)k=k.concat(m[N]);return k}s.set=function(m,N){return Vr(this),this.i=null,m=Pi(this,m),dl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[N]),this.h+=1,this},s.get=function(m,N){return m?(m=fl(this,m),m.length>0?String(m[0]):N):N};function so(m,N,k){Zl(m,N),k.length>0&&(m.i=null,m.g.set(Pi(m,N),B(k)),m.h+=k.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],N=Array.from(this.g.keys());for(let G=0;G<N.length;G++){var k=N[G];const ye=je(k);k=fl(this,k);for(let Te=0;Te<k.length;Te++){let Ye=ye;k[Te]!==""&&(Ye+="="+je(k[Te])),m.push(Ye)}}return this.i=m.join("&")};function ec(m){const N=new Li;return N.i=m.i,m.g&&(N.g=new Map(m.g),N.h=m.h),N}function Pi(m,N){return N=String(N),m.j&&(N=N.toLowerCase()),N}function io(m,N){N&&!m.j&&(Vr(m),m.i=null,m.g.forEach(function(k,G){const ye=G.toLowerCase();G!=ye&&(Zl(this,G),so(this,ye,k))},m)),m.j=N}function Ts(m,N){const k=new nn;if(u.Image){const G=new Image;G.onload=S(ls,k,"TestLoadImage: loaded",!0,N,G),G.onerror=S(ls,k,"TestLoadImage: error",!1,N,G),G.onabort=S(ls,k,"TestLoadImage: abort",!1,N,G),G.ontimeout=S(ls,k,"TestLoadImage: timeout",!1,N,G),u.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=m}else N(!1)}function ml(m,N){const k=new nn,G=new AbortController,ye=setTimeout(()=>{G.abort(),ls(k,"TestPingServer: timeout",!1,N)},1e4);fetch(m,{signal:G.signal}).then(Te=>{clearTimeout(ye),Te.ok?ls(k,"TestPingServer: ok",!0,N):ls(k,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ye),ls(k,"TestPingServer: error",!1,N)})}function ls(m,N,k,G,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),G(k)}catch{}}function Vi(){this.g=new Lr}function Cr(m){this.i=m.Sb||null,this.h=m.ab||!1}C(Cr,kn),Cr.prototype.g=function(){return new ha(this.i,this.h)};function ha(m,N){Ot.call(this),this.H=m,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(ha,Ot),s=ha.prototype,s.open=function(m,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=N,this.readyState=1,Cs(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(N.body=m),(this.H||u).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},s.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Cs(this)),this.g&&(this.readyState=3,Cs(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ui(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ui(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}s.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var N=m.value?m.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!m.done}))&&(this.response=this.responseText+=N)}m.done?Bi(this):Cs(this),this.readyState==3&&Ui(this)}},s.Oa=function(m){this.g&&(this.response=this.responseText=m,Bi(this))},s.Na=function(m){this.g&&(this.response=m,Bi(this))},s.ga=function(){this.g&&Bi(this)};function Bi(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Cs(m)}s.setRequestHeader=function(m,N){this.A.append(m,N)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],N=this.h.entries();for(var k=N.next();!k.done;)k=k.value,m.push(k[0]+": "+k[1]),k=N.next();return m.join(`\r
`)};function Cs(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ur(m){let N="";return Ae(m,function(k,G){N+=G,N+=":",N+=k,N+=`\r
`}),N}function da(m,N,k){e:{for(G in k){var G=!1;break e}G=!0}G||(k=Ur(k),typeof m=="string"?k!=null&&je(k):rn(m,N,k))}function on(m){Ot.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(on,Ot);var Gs=/^https?$/i,pl=["POST","PUT"];s=on.prototype,s.Fa=function(m){this.H=m},s.ea=function(m,N,k,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);N=N?N.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$e.g(),this.g.onreadystatechange=A(x(this.Ca,this));try{this.B=!0,this.g.open(N,String(m),!0),this.B=!1}catch(Te){Ws(this,Te);return}if(m=k||"",k=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ye in G)k.set(ye,G[ye]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const Te of G.keys())k.set(Te,G.get(Te));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(k.keys()).find(Te=>Te.toLowerCase()=="content-type"),ye=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(pl,N,void 0)>=0)||G||ye||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Te,Ye]of k)this.g.setRequestHeader(Te,Ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Te){Ws(this,Te)}};function Ws(m,N){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=N,m.o=5,ao(m),fi(m)}function ao(m){m.A||(m.A=!0,Lt(m,"complete"),Lt(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Lt(this,"complete"),Lt(this,"abort"),fi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fi(this,!0)),on.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?zi(this):this.Xa())},s.Xa=function(){zi(this)};function zi(m){if(m.h&&typeof c<"u"){if(m.v&&Jr(m)==4)setTimeout(m.Ca.bind(m),0);else if(Lt(m,"readystatechange"),Jr(m)==4){m.h=!1;try{const Te=m.ca();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var k;if(!(k=N)){var G;if(G=Te===0){let Ye=String(m.D).match(cl)[1]||null;!Ye&&u.self&&u.self.location&&(Ye=u.self.location.protocol.slice(0,-1)),G=!Gs.test(Ye?Ye.toLowerCase():"")}k=G}if(k)Lt(m,"complete"),Lt(m,"success");else{m.o=6;try{var ye=Jr(m)>2?m.g.statusText:""}catch{ye=""}m.l=ye+" ["+m.ca()+"]",ao(m)}}finally{fi(m)}}}}function fi(m,N){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const k=m.g;m.g=null,N||Lt(m,"ready");try{k.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Jr(m){return m.g?m.g.readyState:0}s.ca=function(){try{return Jr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(m){if(this.g){var N=this.g.responseText;return m&&N.indexOf(m)==0&&(N=N.substring(m.length)),Ss(N)}};function un(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function mi(m){const N={};m=(m.g&&Jr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<m.length;G++){if(O(m[G]))continue;var k=We(m[G]);const ye=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const Te=N[ye]||[];N[ye]=Te,Te.push(k)}Ge(N,function(G){return G.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function nr(m,N,k){return k&&k.internalChannelParams&&k.internalChannelParams[m]||N}function Fi(m){this.za=0,this.i=[],this.j=new nn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=nr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=nr("baseRetryDelayMs",5e3,m),this.Za=nr("retryDelaySeedMs",1e4,m),this.Ta=nr("forwardChannelMaxRetries",2,m),this.va=nr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new al(m&&m.concurrentRequestLimit),this.Ba=new Vi,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Fi.prototype,s.ka=8,s.I=1,s.connect=function(m,N,k,G){kt(0),this.W=m,this.H=N||{},k&&G!==void 0&&(this.H.OSID=k,this.H.OAID=G),this.F=this.X,this.J=rc(this,null,this.W),pn(this)};function Cn(m){if(oo(m),m.I==3){var N=m.V++,k=Ln(m.J);if(rn(k,"SID",m.M),rn(k,"RID",N),rn(k,"TYPE","terminate"),fa(m,k),N=new Qe(m,m.j,N),N.M=2,N.A=ca(Ln(k)),k=!1,u.navigator&&u.navigator.sendBeacon)try{k=u.navigator.sendBeacon(N.A.toString(),"")}catch{}!k&&u.Image&&(new Image().src=N.A,k=!0),k||(N.g=co(N.j,null),N.g.ea(N.A)),N.F=Date.now(),os(N)}yl(m)}function Ys(m){m.g&&(Zr(m),m.g.cancel(),m.g=null)}function oo(m){Ys(m),m.v&&(u.clearTimeout(m.v),m.v=null),ma(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function pn(m){if(!ol(m.h)&&!m.m){m.m=!0;var N=m.Ea;pe||V(),xe||(pe(),xe=!0),q.add(N,m),m.D=0}}function lo(m,N){return qs(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=N.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Dn(x(m.Ea,m,N),vl(m,m.D)),m.D++,!0)}s.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const ye=new Qe(this,this.j,m);let Te=this.o;if(this.U&&(Te?(Te=M(Te),ie(Te,this.U)):Te=this.U),this.u!==null||this.R||(ye.J=Te,Te=null),this.S)e:{for(var N=0,k=0;k<this.i.length;k++){t:{var G=this.i[k];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(N+=G,N>4096){N=k;break e}if(N===4096||k===this.i.length-1){N=k+1;break e}}N=1e3}else N=1e3;N=$n(this,ye,N),k=Ln(this.J),rn(k,"RID",m),rn(k,"CVER",22),this.G&&rn(k,"X-HTTP-Session-Id",this.G),fa(this,k),Te&&(this.R?N="headers="+je(Ur(Te))+"&"+N:this.u&&da(k,this.u,Te)),ll(this.h,ye),this.Ra&&rn(k,"TYPE","init"),this.S?(rn(k,"$req",N),rn(k,"SID","null"),ye.U=!0,Mn(ye,k,null)):Mn(ye,k,N),this.I=2}}else this.I==3&&(m?Ct(this,m):this.i.length==0||ol(this.h)||Ct(this))};function Ct(m,N){var k;N?k=N.l:k=m.V++;const G=Ln(m.J);rn(G,"SID",m.M),rn(G,"RID",k),rn(G,"AID",m.K),fa(m,G),m.u&&m.o&&da(G,m.u,m.o),k=new Qe(m,m.j,k,m.D+1),m.u===null&&(k.J=m.o),N&&(m.i=N.G.concat(m.i)),N=$n(m,k,1e3),k.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ll(m.h,k),Mn(k,G,N)}function fa(m,N){m.H&&Ae(m.H,function(k,G){rn(N,G,k)}),m.l&&Ae({},function(k,G){rn(N,G,k)})}function $n(m,N,k){k=Math.min(m.i.length,k);const G=m.l?x(m.l.Ka,m.l,m):null;e:{var ye=m.i;let wt=-1;for(;;){const jn=["count="+k];wt==-1?k>0?(wt=ye[0].g,jn.push("ofs="+wt)):wt=0:jn.push("ofs="+wt);let Kt=!0;for(let wn=0;wn<k;wn++){var Te=ye[wn].g;const cs=ye[wn].map;if(Te-=wt,Te<0)wt=Math.max(0,ye[wn].g-100),Kt=!1;else try{Te="req"+Te+"_"||"";try{var Ye=cs instanceof Map?cs:Object.entries(cs);for(const[Ks,us]of Ye){let Ns=us;f(us)&&(Ns=Or(us)),jn.push(Te+Ks+"="+encodeURIComponent(Ns))}}catch(Ks){throw jn.push(Te+"type="+encodeURIComponent("_badmap")),Ks}}catch{G&&G(cs)}}if(Kt){Ye=jn.join("&");break e}}Ye=void 0}return m=m.i.splice(0,k),N.G=m,Ye}function gl(m){if(!m.g&&!m.v){m.Y=1;var N=m.Da;pe||V(),xe||(pe(),xe=!0),q.add(N,m),m.A=0}}function qi(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Dn(x(m.Da,m),vl(m,m.A)),m.A++,!0)}s.Da=function(){if(this.v=null,tc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Dn(x(this.Wa,this),m)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),Ys(this),tc(this))};function Zr(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function tc(m){m.g=new Qe(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var N=Ln(m.na);rn(N,"RID","rpc"),rn(N,"SID",m.M),rn(N,"AID",m.K),rn(N,"CI",m.F?"0":"1"),!m.F&&m.ia&&rn(N,"TO",m.ia),rn(N,"TYPE","xmlhttp"),fa(m,N),m.u&&m.o&&da(N,m.u,m.o),m.O&&(m.g.H=m.O);var k=m.g;m=m.ba,k.M=1,k.A=ca(Ln(N)),k.u=null,k.R=!0,er(k,m)}s.Va=function(){this.C!=null&&(this.C=null,Ys(this),qi(this),kt(19))};function ma(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function nc(m,N){var k=null;if(m.g==N){ma(m),Zr(m),m.g=null;var G=2}else if(Hs(m.h,N))k=N.G,eo(m.h,N),G=1;else return;if(m.I!=0){if(N.o)if(G==1){k=N.u?N.u.length:0,N=Date.now()-N.F;var ye=m.D;G=De(),Lt(G,new cn(G,k)),pn(m)}else gl(m);else if(ye=N.m,ye==3||ye==0&&N.X>0||!(G==1&&lo(m,N)||G==2&&qi(m)))switch(k&&k.length>0&&(N=m.h,N.i=N.i.concat(k)),ye){case 1:Qs(m,5);break;case 4:Qs(m,10);break;case 3:Qs(m,6);break;default:Qs(m,2)}}}function vl(m,N){let k=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(k*=2),k*N}function Qs(m,N){if(m.j.info("Error code "+N),N==2){var k=x(m.bb,m),G=m.Ua;const ye=!G;G=new Xr(G||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Pn(G,"https"),ca(G),ye?Ts(G.toString(),k):ml(G.toString(),k)}else kt(2);m.I=0,m.l&&m.l.pa(N),yl(m),oo(m)}s.bb=function(m){m?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function yl(m){if(m.I=0,m.ja=[],m.l){const N=to(m.h);(N.length!=0||m.i.length!=0)&&(L(m.ja,N),L(m.ja,m.i),m.h.i.length=0,B(m.i),m.i.length=0),m.l.oa()}}function rc(m,N,k){var G=k instanceof Xr?Ln(k):new Xr(k);if(G.g!="")N&&(G.g=N+"."+G.g),Mi(G,G.u);else{var ye=u.location;G=ye.protocol,N=N?N+"."+ye.hostname:ye.hostname,ye=+ye.port;const Te=new Xr(null);G&&Pn(Te,G),N&&(Te.g=N),ye&&Mi(Te,ye),k&&(Te.h=k),G=Te}return k=m.G,N=m.wa,k&&N&&rn(G,k,N),rn(G,"VER",m.ka),fa(m,G),G}function co(m,N,k){if(N&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=m.Aa&&!m.ma?new on(new Cr({ab:k})):new on(m.ma),N.Fa(m.L),N}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function uo(){}s=uo.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function pi(){}pi.prototype.g=function(m,N){return new _r(m,N)};function _r(m,N){Ot.call(this),this.g=new Fi(N),this.l=m,this.h=N&&N.messageUrlParams||null,m=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(m?m["X-WebChannel-Content-Type"]=N.messageContentType:m={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(m?m["X-WebChannel-Client-Profile"]=N.sa:m={"X-WebChannel-Client-Profile":N.sa}),this.g.U=m,(m=N&&N.Qb)&&!O(m)&&(this.g.u=m),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!O(N)&&(this.g.G=N,m=this.h,m!==null&&N in m&&(m=this.h,N in m&&delete m[N])),this.j=new gi(this)}C(_r,Ot),_r.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_r.prototype.close=function(){Cn(this.g)},_r.prototype.o=function(m){var N=this.g;if(typeof m=="string"){var k={};k.__data__=m,m=k}else this.v&&(k={},k.__data__=Or(m),m=k);N.i.push(new On(N.Ya++,m)),N.I==3&&pn(N)},_r.prototype.N=function(){this.g.l=null,delete this.j,Cn(this.g),delete this.g,_r.Z.N.call(this)};function sc(m){mn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var N=m.__sm__;if(N){e:{for(const k in N){m=k;break e}m=void 0}(this.i=m)&&(m=this.i,N=N!==null&&m in N?N[m]:void 0),this.data=N}else this.data=m}C(sc,mn);function bl(){Fn.call(this),this.status=1}C(bl,Fn);function gi(m){this.g=m}C(gi,uo),gi.prototype.ra=function(){Lt(this.g,"a")},gi.prototype.qa=function(m){Lt(this.g,new sc(m))},gi.prototype.pa=function(m){Lt(this.g,new bl)},gi.prototype.oa=function(){Lt(this.g,"b")},pi.prototype.createWebChannel=pi.prototype.g,_r.prototype.send=_r.prototype.o,_r.prototype.open=_r.prototype.m,_r.prototype.close=_r.prototype.close,$x=function(){return new pi},Hx=function(){return De()},qx=zt,yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ge.NO_ERROR=0,ge.TIMEOUT=8,ge.HTTP_ERROR=6,cf=ge,Be.COMPLETE="complete",Fx=Be,Jn.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",Ot.prototype.listen=Ot.prototype.J,ih=Jn,on.prototype.listenOnce=on.prototype.K,on.prototype.getLastError=on.prototype.Ha,on.prototype.getLastErrorCode=on.prototype.ya,on.prototype.getStatus=on.prototype.ca,on.prototype.getResponseJson=on.prototype.La,on.prototype.getResponseText=on.prototype.la,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Fa,zx=on}).apply(typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{});class $r{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$r.UNAUTHENTICATED=new $r(null),$r.GOOGLE_CREDENTIALS=new $r("google-credentials-uid"),$r.FIRST_PARTY=new $r("first-party-uid"),$r.MOCK_USER=new $r("mock-user");let ru="12.8.0";function Aj(s){ru=s}const ql=new Qg("@firebase/firestore");function Dc(){return ql.logLevel}function et(s,...e){if(ql.logLevel<=$t.DEBUG){const t=e.map(cv);ql.debug(`Firestore (${ru}): ${s}`,...t)}}function Ya(s,...e){if(ql.logLevel<=$t.ERROR){const t=e.map(cv);ql.error(`Firestore (${ru}): ${s}`,...t)}}function $c(s,...e){if(ql.logLevel<=$t.WARN){const t=e.map(cv);ql.warn(`Firestore (${ru}): ${s}`,...t)}}function cv(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function gt(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Gx(s,i,t)}function Gx(s,e,t){let i=`FIRESTORE (${ru}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ya(i),new Error(i)}function ln(s,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,s||Gx(e,a,i)}function Tt(s,e){return s}const Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends Xa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Wx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($r.UNAUTHENTICATED)))}shutdown(){}}class Rj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class kj{constructor(e){this.t=e,this.currentUser=$r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ln(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let c=new qa;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new qa,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const p=c;e.enqueueRetryable((async()=>{await p.promise,await a(this.currentUser)}))},f=p=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new qa)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ln(typeof i.accessToken=="string",31837,{l:i}),new Wx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ln(e===null||typeof e=="string",2055,{h:e}),new $r(e)}}class Dj{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=$r.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Ij{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Dj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($r.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ln(this.o===void 0,3512);const i=c=>{c.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,et("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const a=c=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ln(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Oj(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class uv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=Oj(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<t&&(i+=e.charAt(a[c]%62))}return i}}function Gt(s,e){return s<e?-1:s>e?1:0}function bg(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const a=s.charAt(i),c=e.charAt(i);if(a!==c)return Kp(a)===Kp(c)?Gt(a,c):Kp(a)?1:-1}return Gt(s.length,e.length)}const Lj=55296,Pj=57343;function Kp(s){const e=s.charCodeAt(0);return e>=Lj&&e<=Pj}function Gc(s,e,t){return s.length===e.length&&s.every(((i,a)=>t(i,e[a])))}const yb="__name__";class ta{constructor(e,t,i){t===void 0?t=0:t>e.length&&gt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&gt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ta.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ta?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const c=ta.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return Gt(e.length,t.length)}static compareSegments(e,t){const i=ta.isNumericId(e),a=ta.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?ta.extractNumericId(e).compare(ta.extractNumericId(t)):bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yo.fromString(e.substring(4,e.length-2))}}class En extends ta{construct(e,t,i){return new En(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Je(Ue.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new En(t)}static emptyPath(){return new En([])}}const Vj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kr extends ta{construct(e,t,i){return new kr(e,t,i)}static isValidIdentifier(e){return Vj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yb}static keyField(){return new kr([yb])}static fromServerFormat(e){const t=[];let i="",a=0;const c=()=>{if(i.length===0)throw new Je(Ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new Je(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Je(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(i+=f,a++):(c(),a++)}if(c(),u)throw new Je(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kr(t)}static emptyPath(){return new kr([])}}class ht{constructor(e){this.path=e}static fromPath(e){return new ht(En.fromString(e))}static fromName(e){return new ht(En.fromString(e).popFirst(5))}static empty(){return new ht(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&En.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ht(new En(e.slice()))}}function Yx(s,e,t){if(!t)throw new Je(Ue.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Uj(s,e,t,i){if(e===!0&&i===!0)throw new Je(Ue.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function bb(s){if(!ht.isDocumentKey(s))throw new Je(Ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function _b(s){if(ht.isDocumentKey(s))throw new Je(Ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Qx(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Wf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":gt(12329,{type:typeof s})}function Di(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Je(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wf(s);throw new Je(Ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function hr(s,e){const t={typeString:s};return e&&(t.value=e),t}function Oh(s,e){if(!Qx(s))throw new Je(Ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const u=s[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(c!==void 0&&u!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new Je(Ue.INVALID_ARGUMENT,t);return!0}const xb=-62135596800,wb=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*wb);return new at(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Je(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Je(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xb)throw new Je(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wb}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oh(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:hr("string",at._jsonSchemaVersion),seconds:hr("number"),nanoseconds:hr("number")};class _t{static fromTimestamp(e){return new _t(e)}static min(){return new _t(new at(0,0))}static max(){return new _t(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const bh=-1;function Bj(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,a=_t.fromTimestamp(i===1e9?new at(t+1,0):new at(t,i));return new Ko(a,ht.empty(),e)}function zj(s){return new Ko(s.readTime,s.key,bh)}class Ko{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ko(_t.min(),ht.empty(),bh)}static max(){return new Ko(_t.max(),ht.empty(),bh)}}function Fj(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ht.comparator(s.documentKey,e.documentKey),t!==0?t:Gt(s.largestBatchId,e.largestBatchId))}const qj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function su(s){if(s.code!==Ue.FAILED_PRECONDITION||s.message!==qj)throw s;et("LocalStore","Unexpectedly lost primary lease")}class Fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fe(((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Fe?t:Fe.resolve(t)}catch(t){return Fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Fe.reject(t)}static resolve(e){return new Fe(((t,i)=>{t(e)}))}static reject(e){return new Fe(((t,i)=>{i(e)}))}static waitFor(e){return new Fe(((t,i)=>{let a=0,c=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++c,u&&c===a&&t()}),(p=>i(p)))})),u=!0,c===a&&t()}))}static or(e){let t=Fe.resolve(!1);for(const i of e)t=t.next((a=>a?Fe.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,c)=>{i.push(t.call(this,a,c))})),this.waitFor(i)}static mapArray(e,t){return new Fe(((i,a)=>{const c=e.length,u=new Array(c);let f=0;for(let p=0;p<c;p++){const x=p;t(e[x]).next((S=>{u[x]=S,++f,f===c&&i(u)}),(S=>a(S)))}}))}static doWhile(e,t){return new Fe(((i,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):i()};c()}))}}function $j(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function iu(s){return s.name==="IndexedDbTransactionError"}class Yf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yf.ce=-1;const hv=-1;function Qf(s){return s==null}function Nf(s){return s===0&&1/s==-1/0}function Gj(s){return typeof s=="number"&&Number.isInteger(s)&&!Nf(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const Kx="";function Wj(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Eb(e)),e=Yj(s.get(t),e);return Eb(e)}function Yj(s,e){let t=e;const i=s.length;for(let a=0;a<i;a++){const c=s.charAt(a);switch(c){case"\0":t+="";break;case Kx:t+="";break;default:t+=c}}return t}function Eb(s){return s+Kx+""}function Sb(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function sl(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Xx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Rn{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new Rn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new Rn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kd(this.root,e,this.comparator,!0)}}class Kd{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rr{constructor(e,t,i,a,c){this.key=e,this.value=t,this.color=i??Rr.RED,this.left=a??Rr.EMPTY,this.right=c??Rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,c){return new Rr(e??this.key,t??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,i),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Rr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gt(27949);return e+(this.isRed()?0:1)}}Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1;Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(e,t,i,a,c){return this}insert(e,t,i){return new Rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vr{constructor(e){this.comparator=e,this.data=new Rn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tb(this.data.getIterator())}getIteratorFrom(e){return new Tb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof vr)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new vr(this.comparator);return t.data=e,t}}class Tb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Us{constructor(e){this.fields=e,e.sort(kr.comparator)}static empty(){return new Us([])}unionWith(e){let t=new vr(kr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Us(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gc(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Jx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Jx("Invalid base64 string: "+c):c}})(e);return new Dr(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let u=0;u<a.length;++u)c+=String.fromCharCode(a[u]);return c})(e);return new Dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const Qj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xo(s){if(ln(!!s,39018),typeof s=="string"){let e=0;const t=Qj.exec(s);if(ln(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Kn(s.seconds),nanos:Kn(s.nanos)}}function Kn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Jo(s){return typeof s=="string"?Dr.fromBase64String(s):Dr.fromUint8Array(s)}const Zx="server_timestamp",e2="__type__",t2="__previous_value__",n2="__local_write_time__";function dv(s){return(s?.mapValue?.fields||{})[e2]?.stringValue===Zx}function Kf(s){const e=s.mapValue.fields[t2];return dv(e)?Kf(e):e}function _h(s){const e=Xo(s.mapValue.fields[n2].timestampValue);return new at(e.seconds,e.nanos)}class Kj{constructor(e,t,i,a,c,u,f,p,x,S,C){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=x,this.isUsingEmulator=S,this.apiKey=C}}const Af="(default)";class xh{constructor(e,t){this.projectId=e,this.database=t||Af}static empty(){return new xh("","")}get isDefaultDatabase(){return this.database===Af}isEqual(e){return e instanceof xh&&e.projectId===this.projectId&&e.database===this.database}}function Xj(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Je(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xh(s.options.projectId,e)}const r2="__type__",Jj="__max__",Xd={mapValue:{}},s2="__vector__",jf="value";function Zo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?dv(s)?4:eR(s)?9007199254740991:Zj(s)?10:11:gt(28295,{value:s})}function oa(s,e){if(s===e)return!0;const t=Zo(s);if(t!==Zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return _h(s).isEqual(_h(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const u=Xo(a.timestampValue),f=Xo(c.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,c){return Jo(a.bytesValue).isEqual(Jo(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,c){return Kn(a.geoPointValue.latitude)===Kn(c.geoPointValue.latitude)&&Kn(a.geoPointValue.longitude)===Kn(c.geoPointValue.longitude)})(s,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return Kn(a.integerValue)===Kn(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const u=Kn(a.doubleValue),f=Kn(c.doubleValue);return u===f?Nf(u)===Nf(f):isNaN(u)&&isNaN(f)}return!1})(s,e);case 9:return Gc(s.arrayValue.values||[],e.arrayValue.values||[],oa);case 10:case 11:return(function(a,c){const u=a.mapValue.fields||{},f=c.mapValue.fields||{};if(Sb(u)!==Sb(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!oa(u[p],f[p])))return!1;return!0})(s,e);default:return gt(52216,{left:s})}}function wh(s,e){return(s.values||[]).find((t=>oa(t,e)))!==void 0}function Wc(s,e){if(s===e)return 0;const t=Zo(s),i=Zo(e);if(t!==i)return Gt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(s.booleanValue,e.booleanValue);case 2:return(function(c,u){const f=Kn(c.integerValue||c.doubleValue),p=Kn(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(s,e);case 3:return Cb(s.timestampValue,e.timestampValue);case 4:return Cb(_h(s),_h(e));case 5:return bg(s.stringValue,e.stringValue);case 6:return(function(c,u){const f=Jo(c),p=Jo(u);return f.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(c,u){const f=c.split("/"),p=u.split("/");for(let x=0;x<f.length&&x<p.length;x++){const S=Gt(f[x],p[x]);if(S!==0)return S}return Gt(f.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,u){const f=Gt(Kn(c.latitude),Kn(u.latitude));return f!==0?f:Gt(Kn(c.longitude),Kn(u.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Nb(s.arrayValue,e.arrayValue);case 10:return(function(c,u){const f=c.fields||{},p=u.fields||{},x=f[jf]?.arrayValue,S=p[jf]?.arrayValue,C=Gt(x?.values?.length||0,S?.values?.length||0);return C!==0?C:Nb(x,S)})(s.mapValue,e.mapValue);case 11:return(function(c,u){if(c===Xd.mapValue&&u===Xd.mapValue)return 0;if(c===Xd.mapValue)return 1;if(u===Xd.mapValue)return-1;const f=c.fields||{},p=Object.keys(f),x=u.fields||{},S=Object.keys(x);p.sort(),S.sort();for(let C=0;C<p.length&&C<S.length;++C){const A=bg(p[C],S[C]);if(A!==0)return A;const B=Wc(f[p[C]],x[S[C]]);if(B!==0)return B}return Gt(p.length,S.length)})(s.mapValue,e.mapValue);default:throw gt(23264,{he:t})}}function Cb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Gt(s,e);const t=Xo(s),i=Xo(e),a=Gt(t.seconds,i.seconds);return a!==0?a:Gt(t.nanos,i.nanos)}function Nb(s,e){const t=s.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const c=Wc(t[a],i[a]);if(c)return c}return Gt(t.length,i.length)}function Yc(s){return _g(s)}function _g(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Xo(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Jo(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ht.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",a=!0;for(const c of t.values||[])a?a=!1:i+=",",i+=_g(c);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const u of i)c?c=!1:a+=",",a+=`${u}:${_g(t.fields[u])}`;return a+"}"})(s.mapValue):gt(61005,{value:s})}function uf(s){switch(Zo(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kf(s);return e?16+uf(e):16;case 5:return 2*s.stringValue.length;case 6:return Jo(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,c)=>a+uf(c)),0)})(s.arrayValue);case 10:case 11:return(function(i){let a=0;return sl(i.fields,((c,u)=>{a+=c.length+uf(u)})),a})(s.mapValue);default:throw gt(13486,{value:s})}}function Ab(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function xg(s){return!!s&&"integerValue"in s}function fv(s){return!!s&&"arrayValue"in s}function jb(s){return!!s&&"nullValue"in s}function Rb(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function hf(s){return!!s&&"mapValue"in s}function Zj(s){return(s?.mapValue?.fields||{})[r2]?.stringValue===s2}function hh(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return sl(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=hh(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hh(s.arrayValue.values[t]);return e}return{...s}}function eR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Jj}class ws{constructor(e){this.value=e}static empty(){return new ws({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!hf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hh(t)}setAll(e){let t=kr.emptyPath(),i={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=f.popLast()}u?i[f.lastSegment()]=hh(u):a.push(f.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,i,a)}delete(e){const t=this.field(e.popLast());hf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];hf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){sl(t,((a,c)=>e[a]=c));for(const a of i)delete e[a]}clone(){return new ws(hh(this.value))}}function i2(s){const e=[];return sl(s.fields,((t,i)=>{const a=new kr([t]);if(hf(i)){const c=i2(i.mapValue).fields;if(c.length===0)e.push(a);else for(const u of c)e.push(a.child(u))}else e.push(a)})),new Us(e)}class Gr{constructor(e,t,i,a,c,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=c,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Gr(e,0,_t.min(),_t.min(),_t.min(),ws.empty(),0)}static newFoundDocument(e,t,i,a){return new Gr(e,1,t,_t.min(),i,a,0)}static newNoDocument(e,t){return new Gr(e,2,t,_t.min(),_t.min(),ws.empty(),0)}static newUnknownDocument(e,t){return new Gr(e,3,t,_t.min(),_t.min(),ws.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ws.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ws.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rf{constructor(e,t){this.position=e,this.inclusive=t}}function kb(s,e,t){let i=0;for(let a=0;a<s.position.length;a++){const c=e[a],u=s.position[a];if(c.field.isKeyField()?i=ht.comparator(ht.fromName(u.referenceValue),t.key):i=Wc(u,t.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function Db(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!oa(s.position[t],e.position[t]))return!1;return!0}class Eh{constructor(e,t="asc"){this.field=e,this.dir=t}}function tR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class a2{}class ur extends a2{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new rR(e,t,i):t==="array-contains"?new aR(e,i):t==="in"?new oR(e,i):t==="not-in"?new lR(e,i):t==="array-contains-any"?new cR(e,i):new ur(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new sR(e,i):new iR(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wc(t,this.value)):t!==null&&Zo(this.value)===Zo(t)&&this.matchesComparison(Wc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ii extends a2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ii(e,t)}matches(e){return o2(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function o2(s){return s.op==="and"}function l2(s){return nR(s)&&o2(s)}function nR(s){for(const e of s.filters)if(e instanceof Ii)return!1;return!0}function wg(s){if(s instanceof ur)return s.field.canonicalString()+s.op.toString()+Yc(s.value);if(l2(s))return s.filters.map((e=>wg(e))).join(",");{const e=s.filters.map((t=>wg(t))).join(",");return`${s.op}(${e})`}}function c2(s,e){return s instanceof ur?(function(i,a){return a instanceof ur&&i.op===a.op&&i.field.isEqual(a.field)&&oa(i.value,a.value)})(s,e):s instanceof Ii?(function(i,a){return a instanceof Ii&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((c,u,f)=>c&&c2(u,a.filters[f])),!0):!1})(s,e):void gt(19439)}function u2(s){return s instanceof ur?(function(t){return`${t.field.canonicalString()} ${t.op} ${Yc(t.value)}`})(s):s instanceof Ii?(function(t){return t.op.toString()+" {"+t.getFilters().map(u2).join(" ,")+"}"})(s):"Filter"}class rR extends ur{constructor(e,t,i){super(e,t,i),this.key=ht.fromName(i.referenceValue)}matches(e){const t=ht.comparator(e.key,this.key);return this.matchesComparison(t)}}class sR extends ur{constructor(e,t){super(e,"in",t),this.keys=h2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iR extends ur{constructor(e,t){super(e,"not-in",t),this.keys=h2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function h2(s,e){return(e.arrayValue?.values||[]).map((t=>ht.fromName(t.referenceValue)))}class aR extends ur{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fv(t)&&wh(t.arrayValue,this.value)}}class oR extends ur{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wh(this.value.arrayValue,t)}}class lR extends ur{constructor(e,t){super(e,"not-in",t)}matches(e){if(wh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wh(this.value.arrayValue,t)}}class cR extends ur{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>wh(this.value.arrayValue,i)))}}class uR{constructor(e,t=null,i=[],a=[],c=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=u,this.endAt=f,this.Te=null}}function Ib(s,e=null,t=[],i=[],a=null,c=null,u=null){return new uR(s,e,t,i,a,c,u)}function mv(s){const e=Tt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>wg(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),Qf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Yc(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Yc(i))).join(",")),e.Te=t}return e.Te}function pv(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!tR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!c2(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Db(s.startAt,e.startAt)&&Db(s.endAt,e.endAt)}function Eg(s){return ht.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class au{constructor(e,t=null,i=[],a=[],c=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=u,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function hR(s,e,t,i,a,c,u,f){return new au(s,e,t,i,a,c,u,f)}function gv(s){return new au(s)}function Mb(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function dR(s){return ht.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function d2(s){return s.collectionGroup!==null}function dh(s){const e=Tt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new vr(kr.comparator);return u.filters.forEach((p=>{p.getFlattenedFilters().forEach((x=>{x.isInequality()&&(f=f.add(x.field))}))})),f})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Eh(c,i))})),t.has(kr.keyField().canonicalString())||e.Ie.push(new Eh(kr.keyField(),i))}return e.Ie}function sa(s){const e=Tt(s);return e.Ee||(e.Ee=fR(e,dh(s))),e.Ee}function fR(s,e){if(s.limitType==="F")return Ib(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Eh(a.field,c)}));const t=s.endAt?new Rf(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Rf(s.startAt.position,s.startAt.inclusive):null;return Ib(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Sg(s,e){const t=s.filters.concat([e]);return new au(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function mR(s,e){const t=s.explicitOrderBy.concat([e]);return new au(s.path,s.collectionGroup,t,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Tg(s,e,t){return new au(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Xf(s,e){return pv(sa(s),sa(e))&&s.limitType===e.limitType}function f2(s){return`${mv(sa(s))}|lt:${s.limitType}`}function Ic(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>u2(a))).join(", ")}]`),Qf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Yc(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Yc(a))).join(",")),`Target(${i})`})(sa(s))}; limitType=${s.limitType})`}function Jf(s,e){return e.isFoundDocument()&&(function(i,a){const c=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):ht.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(s,e)&&(function(i,a){for(const c of dh(i))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(i,a){for(const c of i.filters)if(!c.matches(a))return!1;return!0})(s,e)&&(function(i,a){return!(i.startAt&&!(function(u,f,p){const x=kb(u,f,p);return u.inclusive?x<=0:x<0})(i.startAt,dh(i),a)||i.endAt&&!(function(u,f,p){const x=kb(u,f,p);return u.inclusive?x>=0:x>0})(i.endAt,dh(i),a))})(s,e)}function pR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function m2(s){return(e,t)=>{let i=!1;for(const a of dh(s)){const c=gR(a,e,t);if(c!==0)return c;i=i||a.field.isKeyField()}return 0}}function gR(s,e,t){const i=s.field.isKeyField()?ht.comparator(e.key,t.key):(function(c,u,f){const p=u.data.field(c),x=f.data.field(c);return p!==null&&x!==null?Wc(p,x):gt(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return gt(19790,{direction:s.dir})}}class Gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,c]of i)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){sl(this.inner,((t,i)=>{for(const[a,c]of i)e(a,c)}))}isEmpty(){return Xx(this.inner)}size(){return this.innerSize}}const vR=new Rn(ht.comparator);function Qa(){return vR}const p2=new Rn(ht.comparator);function ah(...s){let e=p2;for(const t of s)e=e.insert(t.key,t);return e}function g2(s){let e=p2;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Pl(){return fh()}function v2(){return fh()}function fh(){return new Gl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const yR=new Rn(ht.comparator),bR=new vr(ht.comparator);function Wt(...s){let e=bR;for(const t of s)e=e.add(t);return e}const _R=new vr(Gt);function xR(){return _R}function vv(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nf(e)?"-0":e}}function y2(s){return{integerValue:""+s}}function wR(s,e){return Gj(e)?y2(e):vv(s,e)}class Zf{constructor(){this._=void 0}}function ER(s,e,t){return s instanceof kf?(function(a,c){const u={fields:{[e2]:{stringValue:Zx},[n2]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&dv(c)&&(c=Kf(c)),c&&(u.fields[t2]=c),{mapValue:u}})(t,e):s instanceof Sh?_2(s,e):s instanceof Th?x2(s,e):(function(a,c){const u=b2(a,c),f=Ob(u)+Ob(a.Ae);return xg(u)&&xg(a.Ae)?y2(f):vv(a.serializer,f)})(s,e)}function SR(s,e,t){return s instanceof Sh?_2(s,e):s instanceof Th?x2(s,e):t}function b2(s,e){return s instanceof Df?(function(i){return xg(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class kf extends Zf{}class Sh extends Zf{constructor(e){super(),this.elements=e}}function _2(s,e){const t=w2(e);for(const i of s.elements)t.some((a=>oa(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Th extends Zf{constructor(e){super(),this.elements=e}}function x2(s,e){let t=w2(e);for(const i of s.elements)t=t.filter((a=>!oa(a,i)));return{arrayValue:{values:t}}}class Df extends Zf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ob(s){return Kn(s.integerValue||s.doubleValue)}function w2(s){return fv(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function TR(s,e){return s.field.isEqual(e.field)&&(function(i,a){return i instanceof Sh&&a instanceof Sh||i instanceof Th&&a instanceof Th?Gc(i.elements,a.elements,oa):i instanceof Df&&a instanceof Df?oa(i.Ae,a.Ae):i instanceof kf&&a instanceof kf})(s.transform,e.transform)}class CR{constructor(e,t){this.version=e,this.transformResults=t}}class ui{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ui}static exists(e){return new ui(void 0,e)}static updateTime(e){return new ui(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class em{}function E2(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new yv(s.key,ui.none()):new Lh(s.key,s.data,ui.none());{const t=s.data,i=ws.empty();let a=new vr(kr.comparator);for(let c of e.fields)if(!a.has(c)){let u=t.field(c);u===null&&c.length>1&&(c=c.popLast(),u=t.field(c)),u===null?i.delete(c):i.set(c,u),a=a.add(c)}return new il(s.key,i,new Us(a.toArray()),ui.none())}}function NR(s,e,t){s instanceof Lh?(function(a,c,u){const f=a.value.clone(),p=Pb(a.fieldTransforms,c,u.transformResults);f.setAll(p),c.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(s,e,t):s instanceof il?(function(a,c,u){if(!df(a.precondition,c))return void c.convertToUnknownDocument(u.version);const f=Pb(a.fieldTransforms,c,u.transformResults),p=c.data;p.setAll(S2(a)),p.setAll(f),c.convertToFoundDocument(u.version,p).setHasCommittedMutations()})(s,e,t):(function(a,c,u){c.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function mh(s,e,t,i){return s instanceof Lh?(function(c,u,f,p){if(!df(c.precondition,u))return f;const x=c.value.clone(),S=Vb(c.fieldTransforms,p,u);return x.setAll(S),u.convertToFoundDocument(u.version,x).setHasLocalMutations(),null})(s,e,t,i):s instanceof il?(function(c,u,f,p){if(!df(c.precondition,u))return f;const x=Vb(c.fieldTransforms,p,u),S=u.data;return S.setAll(S2(c)),S.setAll(x),u.convertToFoundDocument(u.version,S).setHasLocalMutations(),f===null?null:f.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((C=>C.field)))})(s,e,t,i):(function(c,u,f){return df(c.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(s,e,t)}function AR(s,e){let t=null;for(const i of s.fieldTransforms){const a=e.data.field(i.field),c=b2(i.transform,a||null);c!=null&&(t===null&&(t=ws.empty()),t.set(i.field,c))}return t||null}function Lb(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Gc(i,a,((c,u)=>TR(c,u)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Lh extends em{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class il extends em{constructor(e,t,i,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function S2(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function Pb(s,e,t){const i=new Map;ln(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let a=0;a<t.length;a++){const c=s[a],u=c.transform,f=e.data.field(c.field);i.set(c.field,SR(u,f,t[a]))}return i}function Vb(s,e,t){const i=new Map;for(const a of s){const c=a.transform,u=t.data.field(a.field);i.set(a.field,ER(c,u,e))}return i}class yv extends em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jR extends em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class RR{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&NR(c,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=mh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=mh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=v2();return this.mutations.forEach((a=>{const c=e.get(a.key),u=c.overlayedDocument;let f=this.applyToLocalView(u,c.mutatedFields);f=t.has(a.key)?null:f;const p=E2(u,f);p!==null&&i.set(a.key,p),u.isValidDocument()||u.convertToNoDocument(_t.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Wt())}isEqual(e){return this.batchId===e.batchId&&Gc(this.mutations,e.mutations,((t,i)=>Lb(t,i)))&&Gc(this.baseMutations,e.baseMutations,((t,i)=>Lb(t,i)))}}class bv{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ln(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return yR})();const c=e.mutations;for(let u=0;u<c.length;u++)a=a.insert(c[u].key,i[u].version);return new bv(e,t,i,a)}}class kR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class DR{constructor(e,t){this.count=e,this.unchangedNames=t}}var lr,Xt;function IR(s){switch(s){case Ue.OK:return gt(64938);case Ue.CANCELLED:case Ue.UNKNOWN:case Ue.DEADLINE_EXCEEDED:case Ue.RESOURCE_EXHAUSTED:case Ue.INTERNAL:case Ue.UNAVAILABLE:case Ue.UNAUTHENTICATED:return!1;case Ue.INVALID_ARGUMENT:case Ue.NOT_FOUND:case Ue.ALREADY_EXISTS:case Ue.PERMISSION_DENIED:case Ue.FAILED_PRECONDITION:case Ue.ABORTED:case Ue.OUT_OF_RANGE:case Ue.UNIMPLEMENTED:case Ue.DATA_LOSS:return!0;default:return gt(15467,{code:s})}}function T2(s){if(s===void 0)return Ya("GRPC error has no .code"),Ue.UNKNOWN;switch(s){case lr.OK:return Ue.OK;case lr.CANCELLED:return Ue.CANCELLED;case lr.UNKNOWN:return Ue.UNKNOWN;case lr.DEADLINE_EXCEEDED:return Ue.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return Ue.RESOURCE_EXHAUSTED;case lr.INTERNAL:return Ue.INTERNAL;case lr.UNAVAILABLE:return Ue.UNAVAILABLE;case lr.UNAUTHENTICATED:return Ue.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return Ue.INVALID_ARGUMENT;case lr.NOT_FOUND:return Ue.NOT_FOUND;case lr.ALREADY_EXISTS:return Ue.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return Ue.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return Ue.FAILED_PRECONDITION;case lr.ABORTED:return Ue.ABORTED;case lr.OUT_OF_RANGE:return Ue.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return Ue.UNIMPLEMENTED;case lr.DATA_LOSS:return Ue.DATA_LOSS;default:return gt(39323,{code:s})}}(Xt=lr||(lr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";function MR(){return new TextEncoder}const OR=new Yo([4294967295,4294967295],0);function Ub(s){const e=MR().encode(s),t=new Bx;return t.update(e),new Uint8Array(t.digest())}function Bb(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Yo([t,i],0),new Yo([a,c],0)]}class _v{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new oh(`Invalid padding: ${t}`);if(i<0)throw new oh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new oh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new oh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Yo.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(Yo.fromNumber(i)));return a.compare(OR)===1&&(a=new Yo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ub(e),[i,a]=Bb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,a,c);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),u=new _v(c,a,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=Ub(e),[i,a]=Bb(t);for(let c=0;c<this.hashCount;c++){const u=this.ye(i,a,c);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class oh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tm{constructor(e,t,i,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Ph.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new tm(_t.min(),a,new Rn(Gt),Qa(),Wt())}}class Ph{constructor(e,t,i,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ph(i,t,Wt(),Wt(),Wt())}}class ff{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class C2{constructor(e,t){this.targetId=e,this.Ce=t}}class N2{constructor(e,t,i=Dr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class zb{constructor(){this.ve=0,this.Fe=Fb(),this.Me=Dr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Wt(),t=Wt(),i=Wt();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:gt(38017,{changeType:c})}})),new Ph(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Fb()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ln(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class LR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qa(),this.He=Jd(),this.Je=Jd(),this.Ze=new Rn(Gt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:gt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(Eg(c))if(i===0){const u=new ht(c.path);this.et(t,u,Gr.newNoDocument(u,_t.min()))}else ln(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),p=f?this.ct(f,e,u):1;if(p!==0){this.it(t);const x=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:c=0}=t;let u,f;try{u=Jo(i).toUint8Array()}catch(p){if(p instanceof Jx)return $c("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new _v(u,a,c)}catch(p){return $c(p instanceof oh?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((c=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${c.path.canonicalString()}`;e.mightContain(f)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,u)=>{const f=this.ot(u);if(f){if(c.current&&Eg(f.target)){const p=new ht(f.target.path);this.It(p).has(u)||this.Et(u,p)||this.et(u,p,Gr.newNoDocument(p,e))}c.Be&&(t.set(u,c.ke()),c.Ke())}}));let i=Wt();this.Je.forEach(((c,u)=>{let f=!0;u.forEachWhile((p=>{const x=this.ot(p);return!x||x.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(c))})),this.je.forEach(((c,u)=>u.setReadTime(e)));const a=new tm(e,t,this.Ze,this.je,i);return this.je=Qa(),this.He=Jd(),this.Je=Jd(),this.Ze=new Rn(Gt),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new zb,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new vr(Gt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new vr(Gt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||et("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Jd(){return new Rn(ht.comparator)}function Fb(){return new Rn(ht.comparator)}const PR={asc:"ASCENDING",desc:"DESCENDING"},VR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UR={and:"AND",or:"OR"};class BR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cg(s,e){return s.useProto3Json||Qf(e)?e:{value:e}}function If(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A2(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function zR(s,e){return If(s,e.toTimestamp())}function ia(s){return ln(!!s,49232),_t.fromTimestamp((function(t){const i=Xo(t);return new at(i.seconds,i.nanos)})(s))}function xv(s,e){return Ng(s,e).canonicalString()}function Ng(s,e){const t=(function(a){return new En(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function j2(s){const e=En.fromString(s);return ln(M2(e),10190,{key:e.toString()}),e}function Ag(s,e){return xv(s.databaseId,e.path)}function Xp(s,e){const t=j2(e);if(t.get(1)!==s.databaseId.projectId)throw new Je(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Je(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ht(k2(t))}function R2(s,e){return xv(s.databaseId,e)}function FR(s){const e=j2(s);return e.length===4?En.emptyPath():k2(e)}function jg(s){return new En(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function k2(s){return ln(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function qb(s,e,t){return{name:Ag(s,e),fields:t.value.mapValue.fields}}function qR(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:gt(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(x,S){return x.useProto3Json?(ln(S===void 0||typeof S=="string",58123),Dr.fromBase64String(S||"")):(ln(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Dr.fromUint8Array(S||new Uint8Array))})(s,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(x){const S=x.code===void 0?Ue.UNKNOWN:T2(x.code);return new Je(S,x.message||"")})(u);t=new N2(i,a,c,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Xp(s,i.document.name),c=ia(i.document.updateTime),u=i.document.createTime?ia(i.document.createTime):_t.min(),f=new ws({mapValue:{fields:i.document.fields}}),p=Gr.newFoundDocument(a,c,u,f),x=i.targetIds||[],S=i.removedTargetIds||[];t=new ff(x,S,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Xp(s,i.document),c=i.readTime?ia(i.readTime):_t.min(),u=Gr.newNoDocument(a,c),f=i.removedTargetIds||[];t=new ff([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Xp(s,i.document),c=i.removedTargetIds||[];t=new ff([],c,a,null)}else{if(!("filter"in e))return gt(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:c}=i,u=new DR(a,c),f=i.targetId;t=new C2(f,u)}}return t}function HR(s,e){let t;if(e instanceof Lh)t={update:qb(s,e.key,e.value)};else if(e instanceof yv)t={delete:Ag(s,e.key)};else if(e instanceof il)t={update:qb(s,e.key,e.data),updateMask:ZR(e.fieldMask)};else{if(!(e instanceof jR))return gt(16599,{dt:e.type});t={verify:Ag(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(c,u){const f=u.transform;if(f instanceof kf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Sh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Th)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Df)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw gt(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:zR(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:gt(27497)})(s,e.precondition)),t}function $R(s,e){return s&&s.length>0?(ln(e!==void 0,14353),s.map((t=>(function(a,c){let u=a.updateTime?ia(a.updateTime):ia(c);return u.isEqual(_t.min())&&(u=ia(c)),new CR(u,a.transformResults||[])})(t,e)))):[]}function GR(s,e){return{documents:[R2(s,e.path)]}}function WR(s,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=R2(s,a);const c=(function(x){if(x.length!==0)return I2(Ii.create(x,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const u=(function(x){if(x.length!==0)return x.map((S=>(function(A){return{field:Mc(A.field),direction:KR(A.dir)}})(S)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Cg(s,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:a}}function YR(s){let e=FR(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ln(i===1,65062);const S=t.from[0];S.allDescendants?a=S.collectionId:e=e.child(S.collectionId)}let c=[];t.where&&(c=(function(C){const A=D2(C);return A instanceof Ii&&l2(A)?A.getFilters():[A]})(t.where));let u=[];t.orderBy&&(u=(function(C){return C.map((A=>(function(L){return new Eh(Oc(L.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(A)))})(t.orderBy));let f=null;t.limit&&(f=(function(C){let A;return A=typeof C=="object"?C.value:C,Qf(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(C){const A=!!C.before,B=C.values||[];return new Rf(B,A)})(t.startAt));let x=null;return t.endAt&&(x=(function(C){const A=!C.before,B=C.values||[];return new Rf(B,A)})(t.endAt)),hR(e,a,u,c,f,"F",p,x)}function QR(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function D2(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Oc(t.unaryFilter.field);return ur.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Oc(t.unaryFilter.field);return ur.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Oc(t.unaryFilter.field);return ur.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Oc(t.unaryFilter.field);return ur.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}})(s):s.fieldFilter!==void 0?(function(t){return ur.create(Oc(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Ii.create(t.compositeFilter.filters.map((i=>D2(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return gt(1026)}})(t.compositeFilter.op))})(s):gt(30097,{filter:s})}function KR(s){return PR[s]}function XR(s){return VR[s]}function JR(s){return UR[s]}function Mc(s){return{fieldPath:s.canonicalString()}}function Oc(s){return kr.fromServerFormat(s.fieldPath)}function I2(s){return s instanceof ur?(function(t){if(t.op==="=="){if(Rb(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NAN"}};if(jb(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Rb(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NOT_NAN"}};if(jb(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mc(t.field),op:XR(t.op),value:t.value}}})(s):s instanceof Ii?(function(t){const i=t.getFilters().map((a=>I2(a)));return i.length===1?i[0]:{compositeFilter:{op:JR(t.op),filters:i}}})(s):gt(54877,{filter:s})}function ZR(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function M2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function O2(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Ho{constructor(e,t,i,a,c=_t.min(),u=_t.min(),f=Dr.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ek{constructor(e){this.yt=e}}function tk(s){const e=YR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Tg(e,e.limit,"L"):e}class nk{constructor(){this.Sn=new rk}addToCollectionParentIndex(e,t){return this.Sn.add(t),Fe.resolve()}getCollectionParents(e,t){return Fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Fe.resolve()}deleteFieldIndex(e,t){return Fe.resolve()}deleteAllFieldIndexes(e){return Fe.resolve()}createTargetIndexes(e,t){return Fe.resolve()}getDocumentsMatchingTarget(e,t){return Fe.resolve(null)}getIndexType(e,t){return Fe.resolve(0)}getFieldIndexes(e,t){return Fe.resolve([])}getNextCollectionGroupToUpdate(e){return Fe.resolve(null)}getMinOffset(e,t){return Fe.resolve(Ko.min())}getMinOffsetFromCollectionGroup(e,t){return Fe.resolve(Ko.min())}updateCollectionGroup(e,t,i){return Fe.resolve()}updateIndexEntries(e,t){return Fe.resolve()}}class rk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new vr(En.comparator),c=!a.has(i);return this.index[t]=a.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new vr(En.comparator)).toArray()}}const Hb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},L2=41943040;class xs{static withCacheSize(e){return new xs(e,xs.DEFAULT_COLLECTION_PERCENTILE,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}xs.DEFAULT_COLLECTION_PERCENTILE=10,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xs.DEFAULT=new xs(L2,xs.DEFAULT_COLLECTION_PERCENTILE,xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xs.DISABLED=new xs(-1,0,0);class Qc{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Qc(0)}static ar(){return new Qc(-1)}}const $b="LruGarbageCollector",sk=1048576;function Gb([s,e],[t,i]){const a=Gt(s,t);return a===0?Gt(e,i):a}class ik{constructor(e){this.Pr=e,this.buffer=new vr(Gb),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Gb(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ak{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){et($b,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){iu(t)?et($b,"Ignoring IndexedDB error during garbage collection: ",t):await su(t)}await this.Ar(3e5)}))}}class ok{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Fe.resolve(Yf.ce);const i=new ik(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(et("LruGarbageCollector","Garbage collection skipped; disabled"),Fe.resolve(Hb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hb):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,c,u,f,p,x;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),a=this.params.maximumSequenceNumbersToCollect):a=C,u=Date.now(),this.nthSequenceNumber(e,a)))).next((C=>(i=C,f=Date.now(),this.removeTargets(e,i,t)))).next((C=>(c=C,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((C=>(x=Date.now(),Dc()<=$t.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-S}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${c} targets in `+(p-f)+`ms
	Removed ${C} documents in `+(x-p)+`ms
Total Duration: ${x-S}ms`),Fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:C}))))}}function lk(s,e){return new ok(s,e)}class ck{constructor(){this.changes=new Gl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Fe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class hk{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&mh(i.mutation,a,Us.empty(),at.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Wt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Wt()){const a=Pl();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((c=>{let u=ah();return c.forEach(((f,p)=>{u=u.insert(f,p.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=Pl();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Wt())))}populateOverlays(e,t,i){const a=[];return i.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,a){let c=Qa();const u=fh(),f=(function(){return fh()})();return t.forEach(((p,x)=>{const S=i.get(x.key);a.has(x.key)&&(S===void 0||S.mutation instanceof il)?c=c.insert(x.key,x):S!==void 0?(u.set(x.key,S.mutation.getFieldMask()),mh(S.mutation,x,S.mutation.getFieldMask(),at.now())):u.set(x.key,Us.empty())})),this.recalculateAndSaveOverlays(e,c).next((p=>(p.forEach(((x,S)=>u.set(x,S))),t.forEach(((x,S)=>f.set(x,new uk(S,u.get(x)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=fh();let a=new Rn(((u,f)=>u-f)),c=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((p=>{const x=t.get(p);if(x===null)return;let S=i.get(p)||Us.empty();S=f.applyToLocalView(x,S),i.set(p,S);const C=(a.get(f.batchId)||Wt()).add(p);a=a.insert(f.batchId,C)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),x=p.key,S=p.value,C=v2();S.forEach((A=>{if(!c.has(A)){const B=E2(t.get(A),i.get(A));B!==null&&C.set(A,B),c=c.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,x,C))}return Fe.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return dR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):d2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((c=>{const u=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-c.size):Fe.resolve(Pl());let f=bh,p=c;return u.next((x=>Fe.forEach(x,((S,C)=>(f<C.largestBatchId&&(f=C.largestBatchId),c.get(S)?Fe.resolve():this.remoteDocumentCache.getEntry(e,S).next((A=>{p=p.insert(S,A)}))))).next((()=>this.populateOverlays(e,x,c))).next((()=>this.computeViews(e,p,x,Wt()))).next((S=>({batchId:f,changes:g2(S)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ht(t)).next((i=>{let a=ah();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const c=t.collectionGroup;let u=ah();return this.indexManager.getCollectionParents(e,c).next((f=>Fe.forEach(f,(p=>{const x=(function(C,A){return new au(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(t,p.child(c));return this.getDocumentsMatchingCollectionQuery(e,x,i,a).next((S=>{S.forEach(((C,A)=>{u=u.insert(C,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(c=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,c,a)))).next((u=>{c.forEach(((p,x)=>{const S=x.getKey();u.get(S)===null&&(u=u.insert(S,Gr.newInvalidDocument(S)))}));let f=ah();return u.forEach(((p,x)=>{const S=c.get(p);S!==void 0&&mh(S.mutation,x,Us.empty(),at.now()),Jf(t,x)&&(f=f.insert(p,x))})),f}))}}class dk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ia(a.createTime)}})(t)),Fe.resolve()}getNamedQuery(e,t){return Fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:tk(a.bundledQuery),readTime:ia(a.readTime)}})(t)),Fe.resolve()}}class fk{constructor(){this.overlays=new Rn(ht.comparator),this.Lr=new Map}getOverlay(e,t){return Fe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Pl();return Fe.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&i.set(a,c)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,c)=>{this.bt(e,t,c)})),Fe.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(i)),Fe.resolve()}getOverlaysForCollection(e,t,i){const a=Pl(),c=t.length+1,u=new ht(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,x=p.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===c&&p.largestBatchId>i&&a.set(p.getKey(),p)}return Fe.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let c=new Rn(((x,S)=>x-S));const u=this.overlays.getIterator();for(;u.hasNext();){const x=u.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>i){let S=c.get(x.largestBatchId);S===null&&(S=Pl(),c=c.insert(x.largestBatchId,S)),S.set(x.getKey(),x)}}const f=Pl(),p=c.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((x,S)=>f.set(x,S))),!(f.size()>=a)););return Fe.resolve(f)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new kR(t,i));let c=this.Lr.get(t);c===void 0&&(c=Wt(),this.Lr.set(t,c)),this.Lr.set(t,c.add(i.key))}}class mk{constructor(){this.sessionToken=Dr.EMPTY_BYTE_STRING}getSessionToken(e){return Fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Fe.resolve()}}class wv{constructor(){this.kr=new vr(wr.Kr),this.qr=new vr(wr.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new wr(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new wr(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new ht(new En([])),i=new wr(t,e),a=new wr(t,e+1),c=[];return this.qr.forEachInRange([i,a],(u=>{this.Wr(u),c.push(u.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ht(new En([])),i=new wr(t,e),a=new wr(t,e+1);let c=Wt();return this.qr.forEachInRange([i,a],(u=>{c=c.add(u.key)})),c}containsKey(e){const t=new wr(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class wr{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ht.comparator(e.key,t.key)||Gt(e.Hr,t.Hr)}static Ur(e,t){return Gt(e.Hr,t.Hr)||ht.comparator(e.key,t.key)}}class pk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new vr(wr.Kr)}checkEmpty(e){return Fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new RR(c,t,i,a);this.mutationQueue.push(u);for(const f of a)this.Jr=this.Jr.add(new wr(f.key,c)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Fe.resolve(u)}lookupMutationBatch(e,t){return Fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),c=a<0?0:a;return Fe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Fe.resolve(this.mutationQueue.length===0?hv:this.Yn-1)}getAllMutationBatches(e){return Fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new wr(t,0),a=new wr(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([i,a],(u=>{const f=this.Zr(u.Hr);c.push(f)})),Fe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new vr(Gt);return t.forEach((a=>{const c=new wr(a,0),u=new wr(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,u],(f=>{i=i.add(f.Hr)}))})),Fe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let c=i;ht.isDocumentKey(c)||(c=c.child(""));const u=new wr(new ht(c),0);let f=new vr(Gt);return this.Jr.forEachWhile((p=>{const x=p.key.path;return!!i.isPrefixOf(x)&&(x.length===a&&(f=f.add(p.Hr)),!0)}),u),Fe.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ln(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Fe.forEach(t.mutations,(a=>{const c=new wr(a.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new wr(t,0),a=this.Jr.firstAfterOrEqual(i);return Fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class gk{constructor(e){this.ti=e,this.docs=(function(){return new Rn(ht.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),c=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Fe.resolve(i?i.document.mutableCopy():Gr.newInvalidDocument(t))}getEntries(e,t){let i=Qa();return t.forEach((a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():Gr.newInvalidDocument(a))})),Fe.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let c=Qa();const u=t.path,f=new ht(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:x,value:{document:S}}=p.getNext();if(!u.isPrefixOf(x.path))break;x.path.length>u.length+1||Fj(zj(S),i)<=0||(a.has(S.key)||Jf(t,S))&&(c=c.insert(S.key,S.mutableCopy()))}return Fe.resolve(c)}getAllFromCollectionGroup(e,t,i,a){gt(9500)}ni(e,t){return Fe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new vk(this)}getSize(e){return Fe.resolve(this.size)}}class vk extends ck{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),Fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class yk{constructor(e){this.persistence=e,this.ri=new Gl((t=>mv(t)),pv),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.ii=0,this.si=new wv,this.targetCount=0,this.oi=Qc._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),Fe.resolve()}getLastRemoteSnapshotVersion(e){return Fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),Fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Qc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Fe.resolve()}updateTargetData(e,t){return this.lr(t),Fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Fe.resolve()}removeTargets(e,t,i){let a=0;const c=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(u),c.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),Fe.waitFor(c).next((()=>a))}getTargetCount(e){return Fe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return Fe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),Fe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((u=>{c.push(a.markPotentiallyOrphaned(e,u))})),Fe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Fe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return Fe.resolve(i)}containsKey(e,t){return Fe.resolve(this.si.containsKey(t))}}class P2{constructor(e,t){this._i={},this.overlays={},this.ai=new Yf(0),this.ui=!1,this.ui=!0,this.ci=new mk,this.referenceDelegate=e(this),this.li=new yk(this),this.indexManager=new nk,this.remoteDocumentCache=(function(a){return new gk(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new ek(t),this.Pi=new dk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new pk(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){et("MemoryPersistence","Starting transaction:",e);const a=new bk(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return Fe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class bk extends Hj{constructor(e){super(),this.currentSequenceNumber=e}}class Ev{constructor(e){this.persistence=e,this.Ri=new wv,this.Ai=null}static Vi(e){return new Ev(e)}get di(){if(this.Ai)return this.Ai;throw gt(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),Fe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),Fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fe.forEach(this.di,(i=>{const a=ht.fromPath(i);return this.mi(e,a).next((c=>{c||t.removeEntry(a,_t.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Fe.or([()=>Fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mf{constructor(e,t){this.persistence=e,this.fi=new Gl((i=>Wj(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=lk(this,t)}static Vi(e,t){return new Mf(e,t)}Ti(){}Ii(e){return Fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return Fe.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((c=>c?Fe.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(i++,c.removeEntry(u,_t.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Fe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Fe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uf(e.data.value)),t}wr(e,t,i){return Fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return Fe.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Sv{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=Wt(),a=Wt();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Sv(e,t.fromCache,i,a)}}class _k{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return QT()?8:$j(Wr())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const c={result:null};return this.gs(e,t).next((u=>{c.result=u})).next((()=>{if(!c.result)return this.ps(e,t,a,i).next((u=>{c.result=u}))})).next((()=>{if(c.result)return;const u=new _k;return this.ys(e,t,u).next((f=>{if(c.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>c.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(Dc()<=$t.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",Ic(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Fe.resolve()):(Dc()<=$t.DEBUG&&et("QueryEngine","Query:",Ic(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(Dc()<=$t.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",Ic(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sa(t))):Fe.resolve())}gs(e,t){if(Mb(t))return Fe.resolve(null);let i=sa(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Tg(t,null,"F"),i=sa(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const u=Wt(...c);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((p=>{const x=this.bs(t,f);return this.Ss(t,x,u,p.readTime)?this.gs(e,Tg(t,null,"F")):this.Ds(e,x,t,p)}))))})))))}ps(e,t,i,a){return Mb(t)||a.isEqual(_t.min())?Fe.resolve(null):this.fs.getDocuments(e,i).next((c=>{const u=this.bs(t,c);return this.Ss(t,u,i,a)?Fe.resolve(null):(Dc()<=$t.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ic(t)),this.Ds(e,u,t,Bj(a,bh)).next((f=>f)))}))}bs(e,t){let i=new vr(m2(e));return t.forEach(((a,c)=>{Jf(e,c)&&(i=i.add(c))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,i){return Dc()<=$t.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",Ic(t)),this.fs.getDocumentsMatchingQuery(e,t,Ko.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((c=>(t.forEach((u=>{c=c.insert(u.key,u)})),c)))}}const Tv="LocalStore",wk=3e8;class Ek{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Rn(Gt),this.Fs=new Gl((c=>mv(c)),pv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hk(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Sk(s,e,t,i){return new Ek(s,e,t,i)}async function V2(s,e){const t=Tt(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((c=>{const u=[],f=[];let p=Wt();for(const x of a){u.push(x.batchId);for(const S of x.mutations)p=p.add(S.key)}for(const x of c){f.push(x.batchId);for(const S of x.mutations)p=p.add(S.key)}return t.localDocuments.getDocuments(i,p).next((x=>({Ns:x,removedBatchIds:u,addedBatchIds:f})))}))}))}function Tk(s,e){const t=Tt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,p,x,S){const C=x.batch,A=C.keys();let B=Fe.resolve();return A.forEach((L=>{B=B.next((()=>S.getEntry(p,L))).next((F=>{const $=x.docVersions.get(L);ln($!==null,48541),F.version.compareTo($)<0&&(C.applyToRemoteDocument(F,x),F.isValidDocument()&&(F.setReadTime(x.commitVersion),S.addEntry(F)))}))})),B.next((()=>f.mutationQueue.removeMutationBatch(p,C)))})(t,i,e,c).next((()=>c.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let p=Wt();for(let x=0;x<f.mutationResults.length;++x)f.mutationResults[x].transformResults.length>0&&(p=p.add(f.batch.mutations[x].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function U2(s){const e=Tt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function Ck(s,e){const t=Tt(s),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((S,C)=>{const A=a.get(C);if(!A)return;f.push(t.li.removeMatchingKeys(c,S.removedDocuments,C).next((()=>t.li.addMatchingKeys(c,S.addedDocuments,C))));let B=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(C)!==null?B=B.withResumeToken(Dr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):S.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(S.resumeToken,i)),a=a.insert(C,B),(function(F,$,J){return F.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=wk?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(A,B,S)&&f.push(t.li.updateTargetData(c,B))}));let p=Qa(),x=Wt();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(c,S))})),f.push(Nk(c,u,e.documentUpdates).next((S=>{p=S.Bs,x=S.Ls}))),!i.isEqual(_t.min())){const S=t.li.getLastRemoteSnapshotVersion(c).next((C=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,i)));f.push(S)}return Fe.waitFor(f).next((()=>u.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,p,x))).next((()=>p))})).then((c=>(t.vs=a,c)))}function Nk(s,e,t){let i=Wt(),a=Wt();return t.forEach((c=>i=i.add(c))),e.getEntries(s,i).next((c=>{let u=Qa();return t.forEach(((f,p)=>{const x=c.get(f);p.isFoundDocument()!==x.isFoundDocument()&&(a=a.add(f)),p.isNoDocument()&&p.version.isEqual(_t.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!x.isValidDocument()||p.version.compareTo(x.version)>0||p.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):et(Tv,"Ignoring outdated watch update for ",f,". Current version:",x.version," Watch version:",p.version)})),{Bs:u,Ls:a}}))}function Ak(s,e){const t=Tt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=hv),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function jk(s,e){const t=Tt(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((c=>c?(a=c,Fe.resolve(a)):t.li.allocateTargetId(i).next((u=>(a=new Ho(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Rg(s,e,t){const i=Tt(s),a=i.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",c,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!iu(u))throw u;et(Tv,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function Wb(s,e,t){const i=Tt(s);let a=_t.min(),c=Wt();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(p,x,S){const C=Tt(p),A=C.Fs.get(S);return A!==void 0?Fe.resolve(C.vs.get(A)):C.li.getTargetData(x,S)})(i,u,sa(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,f.targetId).next((p=>{c=p}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?a:_t.min(),t?c:Wt()))).next((f=>(Rk(i,pR(e),f),{documents:f,ks:c})))))}function Rk(s,e,t){let i=s.Ms.get(e)||_t.min();t.forEach(((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),s.Ms.set(e,i)}class Yb{constructor(){this.activeTargetIds=xR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kk{constructor(){this.vo=new Yb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Yb,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Dk{Mo(e){}shutdown(){}}const Qb="ConnectivityMonitor";class Kb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){et(Qb,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){et(Qb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zd=null;function kg(){return Zd===null?Zd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zd++,"0x"+Zd.toString(16)}const Jp="RestConnection",Ik={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Mk{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===Af?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,c){const u=kg(),f=this.Qo(e,t.toUriEncodedString());et(Jp,`Sending RPC '${e}' ${u}:`,f,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,a,c);const{host:x}=new URL(f),S=eu(x);return this.zo(e,f,p,i,S).then((C=>(et(Jp,`Received RPC '${e}' ${u}: `,C),C)),(C=>{throw $c(Jp,`RPC '${e}' ${u} failed with error: `,C,"url: ",f,"request:",i),C}))}jo(e,t,i,a,c,u){return this.Wo(e,t,i,a,c)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ru})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),i&&i.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const i=Ik[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}class Ok{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const qr="WebChannelConnection",eh=(s,e,t)=>{s.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class zc extends Mk{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!zc.c_){const e=Hx();eh(e,qx.STAT_EVENT,(t=>{t.stat===yg.PROXY?et(qr,"STAT_EVENT: detected buffering proxy"):t.stat===yg.NOPROXY&&et(qr,"STAT_EVENT: detected no buffering proxy")})),zc.c_=!0}}zo(e,t,i,a,c){const u=kg();return new Promise(((f,p)=>{const x=new zx;x.setWithCredentials(!0),x.listenOnce(Fx.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case cf.NO_ERROR:const C=x.getResponseJson();et(qr,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(C)),f(C);break;case cf.TIMEOUT:et(qr,`RPC '${e}' ${u} timed out`),p(new Je(Ue.DEADLINE_EXCEEDED,"Request time out"));break;case cf.HTTP_ERROR:const A=x.getStatus();if(et(qr,`RPC '${e}' ${u} failed with status:`,A,"response text:",x.getResponseText()),A>0){let B=x.getResponseJson();Array.isArray(B)&&(B=B[0]);const L=B?.error;if(L&&L.status&&L.message){const F=(function(J){const Y=J.toLowerCase().replace(/_/g,"-");return Object.values(Ue).indexOf(Y)>=0?Y:Ue.UNKNOWN})(L.status);p(new Je(F,L.message))}else p(new Je(Ue.UNKNOWN,"Server responded with status "+x.getStatus()))}else p(new Je(Ue.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:e,streamId:u,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{et(qr,`RPC '${e}' ${u} completed.`)}}));const S=JSON.stringify(a);et(qr,`RPC '${e}' ${u} sending request:`,a),x.send(t,"POST",S,i,15)}))}T_(e,t,i){const a=kg(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const x=c.join("");et(qr,`Creating RPC '${e}' stream ${a}: ${x}`,f);const S=u.createWebChannel(x,f);this.I_(S);let C=!1,A=!1;const B=new Ok({Ho:L=>{A?et(qr,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(C||(et(qr,`Opening RPC '${e}' stream ${a} transport.`),S.open(),C=!0),et(qr,`RPC '${e}' stream ${a} sending:`,L),S.send(L))},Jo:()=>S.close()});return eh(S,ih.EventType.OPEN,(()=>{A||(et(qr,`RPC '${e}' stream ${a} transport opened.`),B.i_())})),eh(S,ih.EventType.CLOSE,(()=>{A||(A=!0,et(qr,`RPC '${e}' stream ${a} transport closed`),B.o_(),this.E_(S))})),eh(S,ih.EventType.ERROR,(L=>{A||(A=!0,$c(qr,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),B.o_(new Je(Ue.UNAVAILABLE,"The operation could not be completed")))})),eh(S,ih.EventType.MESSAGE,(L=>{if(!A){const F=L.data[0];ln(!!F,16349);const $=F,J=$?.error||$[0]?.error;if(J){et(qr,`RPC '${e}' stream ${a} received error:`,J);const Y=J.status;let ce=(function(xe){const q=lr[xe];if(q!==void 0)return T2(q)})(Y),X=J.message;ce===void 0&&(ce=Ue.INTERNAL,X="Unknown error status: "+Y+" with message "+J.message),A=!0,B.o_(new Je(ce,X)),S.close()}else et(qr,`RPC '${e}' stream ${a} received:`,F),B.__(F)}})),zc.u_(),setTimeout((()=>{B.s_()}),0),B}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return $x()}}function Lk(s){return new zc(s)}function Zp(){return typeof document<"u"?document:null}function nm(s){return new BR(s,!0)}zc.c_=!1;class B2{constructor(e,t,i=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&et("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Xb="PersistentStream";class z2{constructor(e,t,i,a,c,u,f,p){this.Ci=e,this.b_=i,this.S_=a,this.connection=c,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new B2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ue.RESOURCE_EXHAUSTED?(Ya(t.toString()),Ya("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new Je(Ue.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return et(Xb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(et(Xb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Pk extends z2{constructor(e,t,i,a,c,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=qR(this.serializer,e),i=(function(c){if(!("targetChange"in c))return _t.min();const u=c.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?ia(u.readTime):_t.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=jg(this.serializer),t.addTarget=(function(c,u){let f;const p=u.target;if(f=Eg(p)?{documents:GR(c,p)}:{query:WR(c,p).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=A2(c,u.resumeToken);const x=Cg(c,u.expectedCount);x!==null&&(f.expectedCount=x)}else if(u.snapshotVersion.compareTo(_t.min())>0){f.readTime=If(c,u.snapshotVersion.toTimestamp());const x=Cg(c,u.expectedCount);x!==null&&(f.expectedCount=x)}return f})(this.serializer,e);const i=QR(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=jg(this.serializer),t.removeTarget=e,this.K_(t)}}class Vk extends z2{constructor(e,t,i,a,c,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ln(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ln(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ln(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=$R(e.writeResults,e.commitTime),i=ia(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=jg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>HR(this.serializer,i)))};this.K_(t)}}class Uk{}class Bk extends Uk{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Je(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Wo(e,Ng(t,i),a,c,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Je(Ue.UNKNOWN,c.toString())}))}jo(e,t,i,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,Ng(t,i),a,u,f,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Je(Ue.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function zk(s,e,t,i){return new Bk(s,e,t,i)}class Fk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ya(t),this.aa=!1):et("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Hl="RemoteStore";class qk{constructor(e,t,i,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{Wl(this)&&(et(Hl,"Restarting streams for network reachability change."),await(async function(p){const x=Tt(p);x.Ea.add(4),await Vh(x),x.Va.set("Unknown"),x.Ea.delete(4),await rm(x)})(this))}))})),this.Va=new Fk(i,a)}}async function rm(s){if(Wl(s))for(const e of s.Ra)await e(!0)}async function Vh(s){for(const e of s.Ra)await e(!1)}function F2(s,e){const t=Tt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),jv(t)?Av(t):ou(t).O_()&&Nv(t,e))}function Cv(s,e){const t=Tt(s),i=ou(t);t.Ia.delete(e),i.O_()&&q2(t,e),t.Ia.size===0&&(i.O_()?i.L_():Wl(t)&&t.Va.set("Unknown"))}function Nv(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ou(s).Z_(e)}function q2(s,e){s.da.$e(e),ou(s).X_(e)}function Av(s){s.da=new LR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),ou(s).start(),s.Va.ua()}function jv(s){return Wl(s)&&!ou(s).x_()&&s.Ia.size>0}function Wl(s){return Tt(s).Ea.size===0}function H2(s){s.da=void 0}async function Hk(s){s.Va.set("Online")}async function $k(s){s.Ia.forEach(((e,t)=>{Nv(s,e)}))}async function Gk(s,e){H2(s),jv(s)?(s.Va.ha(e),Av(s)):s.Va.set("Unknown")}async function Wk(s,e,t){if(s.Va.set("Online"),e instanceof N2&&e.state===2&&e.cause)try{await(async function(a,c){const u=c.cause;for(const f of c.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.da.removeTarget(f))})(s,e)}catch(i){et(Hl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Of(s,i)}else if(e instanceof ff?s.da.Xe(e):e instanceof C2?s.da.st(e):s.da.tt(e),!t.isEqual(_t.min()))try{const i=await U2(s.localStore);t.compareTo(i)>=0&&await(function(c,u){const f=c.da.Tt(u);return f.targetChanges.forEach(((p,x)=>{if(p.resumeToken.approximateByteSize()>0){const S=c.Ia.get(x);S&&c.Ia.set(x,S.withResumeToken(p.resumeToken,u))}})),f.targetMismatches.forEach(((p,x)=>{const S=c.Ia.get(p);if(!S)return;c.Ia.set(p,S.withResumeToken(Dr.EMPTY_BYTE_STRING,S.snapshotVersion)),q2(c,p);const C=new Ho(S.target,p,x,S.sequenceNumber);Nv(c,C)})),c.remoteSyncer.applyRemoteEvent(f)})(s,t)}catch(i){et(Hl,"Failed to raise snapshot:",i),await Of(s,i)}}async function Of(s,e,t){if(!iu(e))throw e;s.Ea.add(1),await Vh(s),s.Va.set("Offline"),t||(t=()=>U2(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{et(Hl,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await rm(s)}))}function $2(s,e){return e().catch((t=>Of(s,t,e)))}async function sm(s){const e=Tt(s),t=el(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hv;for(;Yk(e);)try{const a=await Ak(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,Qk(e,a)}catch(a){await Of(e,a)}G2(e)&&W2(e)}function Yk(s){return Wl(s)&&s.Ta.length<10}function Qk(s,e){s.Ta.push(e);const t=el(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function G2(s){return Wl(s)&&!el(s).x_()&&s.Ta.length>0}function W2(s){el(s).start()}async function Kk(s){el(s).ra()}async function Xk(s){const e=el(s);for(const t of s.Ta)e.ea(t.mutations)}async function Jk(s,e,t){const i=s.Ta.shift(),a=bv.from(i,e,t);await $2(s,(()=>s.remoteSyncer.applySuccessfulWrite(a))),await sm(s)}async function Zk(s,e){e&&el(s).Y_&&await(async function(i,a){if((function(u){return IR(u)&&u!==Ue.ABORTED})(a.code)){const c=i.Ta.shift();el(i).B_(),await $2(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,a))),await sm(i)}})(s,e),G2(s)&&W2(s)}async function Jb(s,e){const t=Tt(s);t.asyncQueue.verifyOperationInProgress(),et(Hl,"RemoteStore received new credentials");const i=Wl(t);t.Ea.add(3),await Vh(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await rm(t)}async function eD(s,e){const t=Tt(s);e?(t.Ea.delete(2),await rm(t)):e||(t.Ea.add(2),await Vh(t),t.Va.set("Unknown"))}function ou(s){return s.ma||(s.ma=(function(t,i,a){const c=Tt(t);return c.sa(),new Pk(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:Hk.bind(null,s),Yo:$k.bind(null,s),t_:Gk.bind(null,s),J_:Wk.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),jv(s)?Av(s):s.Va.set("Unknown")):(await s.ma.stop(),H2(s))}))),s.ma}function el(s){return s.fa||(s.fa=(function(t,i,a){const c=Tt(t);return c.sa(),new Vk(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Kk.bind(null,s),t_:Zk.bind(null,s),ta:Xk.bind(null,s),na:Jk.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await sm(s)):(await s.fa.stop(),s.Ta.length>0&&(et(Hl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Rv{constructor(e,t,i,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new qa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,c){const u=Date.now()+i,f=new Rv(e,t,u,a,c);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Je(Ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kv(s,e){if(Ya("AsyncQueue",`${e}: ${s}`),iu(s))return new Je(Ue.UNAVAILABLE,`${e}: ${s}`);throw s}class Fc{static emptySet(e){return new Fc(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ht.comparator(t.key,i.key):(t,i)=>ht.comparator(t.key,i.key),this.keyedMap=ah(),this.sortedSet=new Rn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Fc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Zb{constructor(){this.ga=new Rn(ht.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):gt(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Kc{constructor(e,t,i,a,c,u,f,p,x){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=x}static fromInitialDocuments(e,t,i,a,c){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Kc(e,t,Fc.emptySet(t),u,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class tD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class nD{constructor(){this.queries=e_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Tt(t),c=a.queries;a.queries=e_(),c.forEach(((u,f)=>{for(const p of f.ba)p.onError(i)}))})(this,new Je(Ue.ABORTED,"Firestore shutting down"))}}function e_(){return new Gl((s=>f2(s)),Xf)}async function Y2(s,e){const t=Tt(s);let i=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(i=2):(c=new tD,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=kv(u,`Initialization of query '${Ic(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Dv(t)}async function Q2(s,e){const t=Tt(s),i=e.query;let a=3;const c=t.queries.get(i);if(c){const u=c.ba.indexOf(e);u>=0&&(c.ba.splice(u,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function rD(s,e){const t=Tt(s);let i=!1;for(const a of e){const c=a.query,u=t.queries.get(c);if(u){for(const f of u.ba)f.Fa(a)&&(i=!0);u.wa=a}}i&&Dv(t)}function sD(s,e,t){const i=Tt(s),a=i.queries.get(e);if(a)for(const c of a.ba)c.onError(t);i.queries.delete(e)}function Dv(s){s.Ca.forEach((e=>{e.next()}))}var Dg,t_;(t_=Dg||(Dg={})).Ma="default",t_.Cache="cache";class K2{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new Kc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Kc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dg.Cache}}class X2{constructor(e){this.key=e}}class J2{constructor(e){this.key=e}}class iD{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Wt(),this.mutatedKeys=Wt(),this.eu=m2(e),this.tu=new Fc(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new Zb,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,x=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((S,C)=>{const A=a.get(S),B=Jf(this.query,C)?C:null,L=!!A&&this.mutatedKeys.has(A.key),F=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let $=!1;A&&B?A.data.isEqual(B.data)?L!==F&&(i.track({type:3,doc:B}),$=!0):this.su(A,B)||(i.track({type:2,doc:B}),$=!0,(p&&this.eu(B,p)>0||x&&this.eu(B,x)<0)&&(f=!0)):!A&&B?(i.track({type:0,doc:B}),$=!0):A&&!B&&(i.track({type:1,doc:A}),$=!0,(p||x)&&(f=!0)),$&&(B?(u=u.add(B),c=F?c.add(S):c.delete(S)):(u=u.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const S=this.query.limitType==="F"?u.last():u.first();u=u.delete(S.key),c=c.delete(S.key),i.track({type:1,doc:S})}return{tu:u,iu:i,Ss:f,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((S,C)=>(function(B,L){const F=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Vt:$})}};return F(B)-F(L)})(S.type,C.type)||this.eu(S.doc,C.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],p=this.Ya.size===0&&this.current&&!a?1:0,x=p!==this.Xa;return this.Xa=p,u.length!==0||x?{snapshot:new Kc(this.query,e.tu,c,u,e.mutatedKeys,p===0,x,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Wt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new J2(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new X2(i))})),t}cu(e){this.Za=e.ks,this.Ya=Wt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Kc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Iv="SyncEngine";class aD{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class oD{constructor(e){this.key=e,this.hu=!1}}class lD{constructor(e,t,i,a,c,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Gl((f=>f2(f)),Xf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Rn(ht.comparator),this.Au=new Map,this.Vu=new wv,this.du={},this.mu=new Map,this.fu=Qc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cD(s,e,t=!0){const i=sw(s);let a;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await Z2(i,e,t,!0),a}async function uD(s,e){const t=sw(s);await Z2(t,e,!0,!1)}async function Z2(s,e,t,i){const a=await jk(s.localStore,sa(e)),c=a.targetId,u=s.sharedClientState.addLocalQueryTarget(c,t);let f;return i&&(f=await hD(s,e,c,u==="current",a.resumeToken)),s.isPrimaryClient&&t&&F2(s.remoteStore,a),f}async function hD(s,e,t,i,a){s.pu=(C,A,B)=>(async function(F,$,J,Y){let ce=$.view.ru(J);ce.Ss&&(ce=await Wb(F.localStore,$.query,!1).then((({documents:q})=>$.view.ru(q,ce))));const X=Y&&Y.targetChanges.get($.targetId),pe=Y&&Y.targetMismatches.get($.targetId)!=null,xe=$.view.applyChanges(ce,F.isPrimaryClient,X,pe);return r_(F,$.targetId,xe.au),xe.snapshot})(s,C,A,B);const c=await Wb(s.localStore,e,!0),u=new iD(e,c.ks),f=u.ru(c.documents),p=Ph.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",a),x=u.applyChanges(f,s.isPrimaryClient,p);r_(s,t,x.au);const S=new aD(e,t,u);return s.Tu.set(e,S),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),x.snapshot}async function dD(s,e,t){const i=Tt(s),a=i.Tu.get(e),c=i.Iu.get(a.targetId);if(c.length>1)return i.Iu.set(a.targetId,c.filter((u=>!Xf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Rg(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Cv(i.remoteStore,a.targetId),Ig(i,a.targetId)})).catch(su)):(Ig(i,a.targetId),await Rg(i.localStore,a.targetId,!0))}async function fD(s,e){const t=Tt(s),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Cv(t.remoteStore,i.targetId))}async function mD(s,e,t){const i=xD(s);try{const a=await(function(u,f){const p=Tt(u),x=at.now(),S=f.reduce(((B,L)=>B.add(L.key)),Wt());let C,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let L=Qa(),F=Wt();return p.xs.getEntries(B,S).next(($=>{L=$,L.forEach(((J,Y)=>{Y.isValidDocument()||(F=F.add(J))}))})).next((()=>p.localDocuments.getOverlayedDocuments(B,L))).next(($=>{C=$;const J=[];for(const Y of f){const ce=AR(Y,C.get(Y.key).overlayedDocument);ce!=null&&J.push(new il(Y.key,ce,i2(ce.value.mapValue),ui.exists(!0)))}return p.mutationQueue.addMutationBatch(B,x,J,f)})).next(($=>{A=$;const J=$.applyToLocalDocumentSet(C,F);return p.documentOverlayCache.saveOverlays(B,$.batchId,J)}))})).then((()=>({batchId:A.batchId,changes:g2(C)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,f,p){let x=u.du[u.currentUser.toKey()];x||(x=new Rn(Gt)),x=x.insert(f,p),u.du[u.currentUser.toKey()]=x})(i,a.batchId,t),await Uh(i,a.changes),await sm(i.remoteStore)}catch(a){const c=kv(a,"Failed to persist write");t.reject(c)}}async function ew(s,e){const t=Tt(s);try{const i=await Ck(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const u=t.Au.get(c);u&&(ln(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?ln(u.hu,14607):a.removedDocuments.size>0&&(ln(u.hu,42227),u.hu=!1))})),await Uh(t,i,e)}catch(i){await su(i)}}function n_(s,e,t){const i=Tt(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((c,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const p=Tt(u);p.onlineState=f;let x=!1;p.queries.forEach(((S,C)=>{for(const A of C.ba)A.va(f)&&(x=!0)})),x&&Dv(p)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function pD(s,e,t){const i=Tt(s);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),c=a&&a.key;if(c){let u=new Rn(ht.comparator);u=u.insert(c,Gr.newNoDocument(c,_t.min()));const f=Wt().add(c),p=new tm(_t.min(),new Map,new Rn(Gt),u,f);await ew(i,p),i.Ru=i.Ru.remove(c),i.Au.delete(e),Mv(i)}else await Rg(i.localStore,e,!1).then((()=>Ig(i,e,t))).catch(su)}async function gD(s,e){const t=Tt(s),i=e.batch.batchId;try{const a=await Tk(t.localStore,e);nw(t,i,null),tw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Uh(t,a)}catch(a){await su(a)}}async function vD(s,e,t){const i=Tt(s);try{const a=await(function(u,f){const p=Tt(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let S;return p.mutationQueue.lookupMutationBatch(x,f).next((C=>(ln(C!==null,37113),S=C.keys(),p.mutationQueue.removeMutationBatch(x,C)))).next((()=>p.mutationQueue.performConsistencyCheck(x))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(x,S,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,S))).next((()=>p.localDocuments.getDocuments(x,S)))}))})(i.localStore,e);nw(i,e,t),tw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Uh(i,a)}catch(a){await su(a)}}function tw(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function nw(s,e,t){const i=Tt(s);let a=i.du[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function Ig(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||rw(s,i)}))}function rw(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(Cv(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),Mv(s))}function r_(s,e,t){for(const i of t)i instanceof X2?(s.Vu.addReference(i.key,e),yD(s,i)):i instanceof J2?(et(Iv,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||rw(s,i.key)):gt(19791,{wu:i})}function yD(s,e){const t=e.key,i=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(i)||(et(Iv,"New document in limbo: "+t),s.Eu.add(i),Mv(s))}function Mv(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ht(En.fromString(e)),i=s.fu.next();s.Au.set(i,new oD(t)),s.Ru=s.Ru.insert(t,i),F2(s.remoteStore,new Ho(sa(gv(t.path)),i,"TargetPurposeLimboResolution",Yf.ce))}}async function Uh(s,e,t){const i=Tt(s),a=[],c=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,p)=>{u.push(i.pu(p,e,t).then((x=>{if((x||t)&&i.isPrimaryClient){const S=x?!x.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,S?"current":"not-current")}if(x){a.push(x);const S=Sv.Es(p.targetId,x);c.push(S)}})))})),await Promise.all(u),i.Pu.J_(a),await(async function(p,x){const S=Tt(p);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>Fe.forEach(x,(A=>Fe.forEach(A.Ts,(B=>S.persistence.referenceDelegate.addReference(C,A.targetId,B))).next((()=>Fe.forEach(A.Is,(B=>S.persistence.referenceDelegate.removeReference(C,A.targetId,B)))))))))}catch(C){if(!iu(C))throw C;et(Tv,"Failed to update sequence numbers: "+C)}for(const C of x){const A=C.targetId;if(!C.fromCache){const B=S.vs.get(A),L=B.snapshotVersion,F=B.withLastLimboFreeSnapshotVersion(L);S.vs=S.vs.insert(A,F)}}})(i.localStore,c))}async function bD(s,e){const t=Tt(s);if(!t.currentUser.isEqual(e)){et(Iv,"User change. New user:",e.toKey());const i=await V2(t.localStore,e);t.currentUser=e,(function(c,u){c.mu.forEach((f=>{f.forEach((p=>{p.reject(new Je(Ue.CANCELLED,u))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Uh(t,i.Ns)}}function _D(s,e){const t=Tt(s),i=t.Au.get(e);if(i&&i.hu)return Wt().add(i.key);{let a=Wt();const c=t.Iu.get(e);if(!c)return a;for(const u of c){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}function sw(s){const e=Tt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=ew.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_D.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pD.bind(null,e),e.Pu.J_=rD.bind(null,e.eventManager),e.Pu.yu=sD.bind(null,e.eventManager),e}function xD(s){const e=Tt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vD.bind(null,e),e}class Lf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Sk(this.persistence,new xk,e.initialUser,this.serializer)}Cu(e){return new P2(Ev.Vi,this.serializer)}Du(e){return new kk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lf.provider={build:()=>new Lf};class wD extends Lf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ln(this.persistence.referenceDelegate instanceof Mf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ak(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?xs.withCacheSize(this.cacheSizeBytes):xs.DEFAULT;return new P2((i=>Mf.Vi(i,t)),this.serializer)}}class Mg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>n_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bD.bind(null,this.syncEngine),await eD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nD})()}createDatastore(e){const t=nm(e.databaseInfo.databaseId),i=Lk(e.databaseInfo);return zk(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,c,u,f){return new qk(i,a,c,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>n_(this.syncEngine,t,0)),(function(){return Kb.v()?new Kb:new Dk})())}createSyncEngine(e,t){return(function(a,c,u,f,p,x,S){const C=new lD(a,c,u,f,p,x);return S&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Tt(t);et(Hl,"RemoteStore shutting down."),i.Ea.add(5),await Vh(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mg.provider={build:()=>new Mg};class iw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ya("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const tl="FirestoreClient";class ED{constructor(e,t,i,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=$r.UNAUTHENTICATED,this.clientId=uv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async u=>{et(tl,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(et(tl,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=kv(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function eg(s,e){s.asyncQueue.verifyOperationInProgress(),et(tl,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async a=>{i.isEqual(a)||(await V2(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function s_(s,e){s.asyncQueue.verifyOperationInProgress();const t=await SD(s);et(tl,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>Jb(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,a)=>Jb(e.remoteStore,a))),s._onlineComponents=e}async function SD(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){et(tl,"Using user provided OfflineComponentProvider");try{await eg(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Ue.FAILED_PRECONDITION||a.code===Ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;$c("Error using user provided cache. Falling back to memory cache: "+t),await eg(s,new Lf)}}else et(tl,"Using default OfflineComponentProvider"),await eg(s,new wD(void 0));return s._offlineComponents}async function aw(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(et(tl,"Using user provided OnlineComponentProvider"),await s_(s,s._uninitializedComponentsProvider._online)):(et(tl,"Using default OnlineComponentProvider"),await s_(s,new Mg))),s._onlineComponents}function TD(s){return aw(s).then((e=>e.syncEngine))}async function ow(s){const e=await aw(s),t=e.eventManager;return t.onListen=cD.bind(null,e.syncEngine),t.onUnlisten=dD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fD.bind(null,e.syncEngine),t}function CD(s,e,t={}){const i=new qa;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,p,x){const S=new iw({next:A=>{S.Nu(),u.enqueueAndForget((()=>Q2(c,C)));const B=A.docs.has(f);!B&&A.fromCache?x.reject(new Je(Ue.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&A.fromCache&&p&&p.source==="server"?x.reject(new Je(Ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(A)},error:A=>x.reject(A)}),C=new K2(gv(f.path),S,{includeMetadataChanges:!0,Ka:!0});return Y2(c,C)})(await ow(s),s.asyncQueue,e,t,i))),i.promise}function ND(s,e,t={}){const i=new qa;return s.asyncQueue.enqueueAndForget((async()=>(function(c,u,f,p,x){const S=new iw({next:A=>{S.Nu(),u.enqueueAndForget((()=>Q2(c,C))),A.fromCache&&p.source==="server"?x.reject(new Je(Ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(A)},error:A=>x.reject(A)}),C=new K2(f,S,{includeMetadataChanges:!0,Ka:!0});return Y2(c,C)})(await ow(s),s.asyncQueue,e,t,i))),i.promise}function AD(s,e){const t=new qa;return s.asyncQueue.enqueueAndForget((async()=>mD(await TD(s),e,t))),t.promise}function lw(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const jD="ComponentProvider",i_=new Map;function RD(s,e,t,i,a){return new Kj(s,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,lw(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}const cw="firestore.googleapis.com",a_=!0;class o_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Je(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cw,this.ssl=a_}else this.host=e.host,this.ssl=e.ssl??a_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=L2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sk)throw new Je(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Uj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Je(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Je(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Je(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class im{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Je(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Je(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new jj;switch(i.type){case"firstParty":return new Ij(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Je(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=i_.get(t);i&&(et(jD,"Removing Datastore"),i_.delete(t),i.terminate())})(this),Promise.resolve()}}function kD(s,e,t,i={}){s=Di(s,im);const a=eu(e),c=s._getSettings(),u={...c,emulatorOptions:s._getEmulatorOptions()},f=`${e}:${t}`;a&&(X_(`https://${f}`),J_("Firestore",!0)),c.host!==cw&&c.host!==f&&$c("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...c,host:f,ssl:a,emulatorOptions:i};if(!Ul(p,u)&&(s._setSettings(p),i.mockUserToken)){let x,S;if(typeof i.mockUserToken=="string")x=i.mockUserToken,S=$r.MOCK_USER;else{x=BT(i.mockUserToken,s._app?.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new Je(Ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new $r(C)}s._authCredentials=new Rj(new Wx(x,S))}}class Yl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Yl(this.firestore,e,this._query)}}class Xn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xn(this.firestore,e,this._key)}toJSON(){return{type:Xn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Oh(t,Xn._jsonSchema))return new Xn(e,i||null,new ht(En.fromString(t.referencePath)))}}Xn._jsonSchemaVersion="firestore/documentReference/1.0",Xn._jsonSchema={type:hr("string",Xn._jsonSchemaVersion),referencePath:hr("string")};class Qo extends Yl{constructor(e,t,i){super(e,t,gv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new ht(e))}withConverter(e){return new Qo(this.firestore,e,this._path)}}function Jt(s,e,...t){if(s=yr(s),Yx("collection","path",e),s instanceof im){const i=En.fromString(e,...t);return _b(i),new Qo(s,null,i)}{if(!(s instanceof Xn||s instanceof Qo))throw new Je(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(En.fromString(e,...t));return _b(i),new Qo(s.firestore,null,i)}}function St(s,e,...t){if(s=yr(s),arguments.length===1&&(e=uv.newId()),Yx("doc","path",e),s instanceof im){const i=En.fromString(e,...t);return bb(i),new Xn(s,null,new ht(i))}{if(!(s instanceof Xn||s instanceof Qo))throw new Je(Ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(En.fromString(e,...t));return bb(i),new Xn(s.firestore,s instanceof Qo?s.converter:null,new ht(i))}}const l_="AsyncQueue";class c_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new B2(this,"async_queue_retry"),this._c=()=>{const i=Zp();i&&et(l_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Zp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Zp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new qa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!iu(e))throw e;et(l_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ya("INTERNAL UNHANDLED ERROR: ",u_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Rv.createAndSchedule(this,e,t,i,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&gt(47125,{Pc:u_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Ql extends im{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new c_,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c_(e),this._firestoreClient=void 0,await e}}}function DD(s,e){const t=typeof s=="object"?s:tx(),i=typeof s=="string"?s:Af,a=Xg(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const c=VT("firestore");c&&kD(a,...c)}return a}function Ov(s){if(s._terminated)throw new Je(Ue.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||ID(s),s._firestoreClient}function ID(s){const e=s._freezeSettings(),t=RD(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new ED(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(s._componentsProvider))}class li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new li(Dr.fromBase64String(e))}catch(t){throw new Je(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new li(Dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oh(e,li._jsonSchema))return li.fromBase64String(e.bytes)}}li._jsonSchemaVersion="firestore/bytes/1.0",li._jsonSchema={type:hr("string",li._jsonSchemaVersion),bytes:hr("string")};class Lv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Je(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pv{constructor(e){this._methodName=e}}class aa{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Je(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Je(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:aa._jsonSchemaVersion}}static fromJSON(e){if(Oh(e,aa._jsonSchema))return new aa(e.latitude,e.longitude)}}aa._jsonSchemaVersion="firestore/geoPoint/1.0",aa._jsonSchema={type:hr("string",aa._jsonSchemaVersion),latitude:hr("number"),longitude:hr("number")};class Ai{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ai._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oh(e,Ai._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ai(e.vectorValues);throw new Je(Ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ai._jsonSchemaVersion="firestore/vectorValue/1.0",Ai._jsonSchema={type:hr("string",Ai._jsonSchemaVersion),vectorValues:hr("object")};const MD=/^__.*__$/;class OD{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new il(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lh(e,this.data,t,this.fieldTransforms)}}class uw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new il(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hw(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{dataSource:s})}}class Vv{constructor(e,t,i,a,c,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Vv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const t=this.path?.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Pf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(hw(this.dataSource)&&MD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class LD{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||nm(e)}createContext(e,t,i,a=!1){return new Vv({dataSource:e,methodName:t,targetDoc:i,path:kr.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function am(s){const e=s._freezeSettings(),t=nm(s._databaseId);return new LD(s._databaseId,!!e.ignoreUndefinedProperties,t)}function dw(s,e,t,i,a,c={}){const u=s.createContext(c.merge||c.mergeFields?2:0,e,t,a);Uv("Data must be an object, but it was:",u,i);const f=fw(i,u);let p,x;if(c.merge)p=new Us(u.fieldMask),x=u.fieldTransforms;else if(c.mergeFields){const S=[];for(const C of c.mergeFields){const A=$l(e,C,t);if(!u.contains(A))throw new Je(Ue.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);gw(S,A)||S.push(A)}p=new Us(S),x=u.fieldTransforms.filter((C=>p.covers(C.field)))}else p=null,x=u.fieldTransforms;return new OD(new ws(f),p,x)}class om extends Pv{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof om}}function PD(s,e,t,i){const a=s.createContext(1,e,t);Uv("Data must be an object, but it was:",a,i);const c=[],u=ws.empty();sl(i,((p,x)=>{const S=pw(e,p,t);x=yr(x);const C=a.childContextForFieldPath(S);if(x instanceof om)c.push(S);else{const A=Bh(x,C);A!=null&&(c.push(S),u.set(S,A))}}));const f=new Us(c);return new uw(u,f,a.fieldTransforms)}function VD(s,e,t,i,a,c){const u=s.createContext(1,e,t),f=[$l(e,i,t)],p=[a];if(c.length%2!=0)throw new Je(Ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)f.push($l(e,c[A])),p.push(c[A+1]);const x=[],S=ws.empty();for(let A=f.length-1;A>=0;--A)if(!gw(x,f[A])){const B=f[A];let L=p[A];L=yr(L);const F=u.childContextForFieldPath(B);if(L instanceof om)x.push(B);else{const $=Bh(L,F);$!=null&&(x.push(B),S.set(B,$))}}const C=new Us(x);return new uw(S,C,u.fieldTransforms)}function UD(s,e,t,i=!1){return Bh(t,s.createContext(i?4:3,e))}function Bh(s,e){if(mw(s=yr(s)))return Uv("Unsupported field value:",e,s),fw(s,e);if(s instanceof Pv)return(function(i,a){if(!hw(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const c=[];let u=0;for(const f of i){let p=Bh(f,a.childContextForArray(u));p==null&&(p={nullValue:"NULL_VALUE"}),c.push(p),u++}return{arrayValue:{values:c}}})(s,e)}return(function(i,a){if((i=yr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wR(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=at.fromDate(i);return{timestampValue:If(a.serializer,c)}}if(i instanceof at){const c=new at(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:If(a.serializer,c)}}if(i instanceof aa)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof li)return{bytesValue:A2(a.serializer,i._byteString)};if(i instanceof Xn){const c=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(c))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:xv(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Ai)return(function(u,f){const p=u instanceof Ai?u.toArray():u;return{mapValue:{fields:{[r2]:{stringValue:s2},[jf]:{arrayValue:{values:p.map((S=>{if(typeof S!="number")throw f.createError("VectorValues must only contain numeric values.");return vv(f.serializer,S)}))}}}}}})(i,a);if(O2(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Wf(i)}`)})(s,e)}function fw(s,e){const t={};return Xx(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sl(s,((i,a)=>{const c=Bh(a,e.childContextForField(i));c!=null&&(t[i]=c)})),{mapValue:{fields:t}}}function mw(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof at||s instanceof aa||s instanceof li||s instanceof Xn||s instanceof Pv||s instanceof Ai||O2(s))}function Uv(s,e,t){if(!mw(t)||!Qx(t)){const i=Wf(t);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function $l(s,e,t){if((e=yr(e))instanceof Lv)return e._internalPath;if(typeof e=="string")return pw(s,e);throw Pf("Field path arguments must be of type string or ",s,!1,void 0,t)}const BD=new RegExp("[~\\*/\\[\\]]");function pw(s,e,t){if(e.search(BD)>=0)throw Pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Lv(...e.split("."))._internalPath}catch{throw Pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Pf(s,e,t,i,a){const c=i&&!i.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(c||u)&&(p+=" (found",c&&(p+=` in field ${i}`),u&&(p+=` in document ${a}`),p+=")"),new Je(Ue.INVALID_ARGUMENT,f+s+p)}function gw(s,e){return s.some((t=>t.isEqual(e)))}class zD{convertValue(e,t="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw gt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return sl(e,((a,c)=>{i[a]=this.convertValue(c,t)})),i}convertVectorValue(e){const t=e.fields?.[jf].arrayValue?.values?.map((i=>Kn(i.doubleValue)));return new Ai(t)}convertGeoPoint(e){return new aa(Kn(e.latitude),Kn(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Kf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(_h(e));default:return null}}convertTimestamp(e){const t=Xo(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=En.fromString(e);ln(M2(i),9688,{name:e});const a=new xh(i.get(1),i.get(3)),c=new ht(i.popFirst(5));return a.isEqual(t)||Ya(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}class vw extends zD{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}const h_="@firebase/firestore",d_="4.10.0";class yw{constructor(e,t,i,a,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field($l("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class FD extends yw{data(){return super.data()}}function qD(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Je(Ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bv{}class bw extends Bv{}function ji(s,e,...t){let i=[];e instanceof Bv&&i.push(e),i=i.concat(t),(function(c){const u=c.filter((p=>p instanceof zv)).length,f=c.filter((p=>p instanceof lm)).length;if(u>1||u>0&&f>0)throw new Je(Ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)s=a._apply(s);return s}class lm extends bw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new lm(e,t,i)}_apply(e){const t=this._parse(e);return _w(e._query,t),new Yl(e.firestore,e.converter,Sg(e._query,t))}_parse(e){const t=am(e.firestore);return(function(c,u,f,p,x,S,C){let A;if(x.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Je(Ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){m_(C,S);const L=[];for(const F of C)L.push(f_(p,c,F));A={arrayValue:{values:L}}}else A=f_(p,c,C)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||m_(C,S),A=UD(f,u,C,S==="in"||S==="not-in");return ur.create(x,S,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ci(s,e,t){const i=e,a=$l("where",s);return lm._create(a,i,t)}class zv extends Bv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zv(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ii.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let u=a;const f=c.getFlattenedFilters();for(const p of f)_w(u,p),u=Sg(u,p)})(e._query,t),new Yl(e.firestore,e.converter,Sg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fv extends bw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Fv(e,t)}_apply(e){const t=(function(a,c,u){if(a.startAt!==null)throw new Je(Ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Je(Ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eh(c,u)})(e._query,this._field,this._direction);return new Yl(e.firestore,e.converter,mR(e._query,t))}}function HD(s,e="asc"){const t=e,i=$l("orderBy",s);return Fv._create(i,t)}function f_(s,e,t){if(typeof(t=yr(t))=="string"){if(t==="")throw new Je(Ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d2(e)&&t.indexOf("/")!==-1)throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(En.fromString(t));if(!ht.isDocumentKey(i))throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ab(s,new ht(i))}if(t instanceof Xn)return Ab(s,t._key);throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(t)}.`)}function m_(s,e){if(!Array.isArray(s)||s.length===0)throw new Je(Ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _w(s,e){const t=(function(a,c){for(const u of a)for(const f of u.getFlattenedFilters())if(c.indexOf(f.op)>=0)return f.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Je(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Je(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function xw(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class lh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vl extends yw{constructor(e,t,i,a,c,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field($l("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Je(Ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vl._jsonSchema={type:hr("string",Vl._jsonSchemaVersion),bundleSource:hr("string","DocumentSnapshot"),bundleName:hr("string"),bundle:hr("string")};class mf extends Vl{data(e={}){return super.data(e)}}class qc{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new lh(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new mf(this._firestore,this._userDataWriter,i.key,i,new lh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Je(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const p=new mf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new lh(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const p=new mf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new lh(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let x=-1,S=-1;return f.type!==0&&(x=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),S=u.indexOf(f.doc.key)),{type:$D(f.type),doc:p,oldIndex:x,newIndex:S}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Je(Ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $D(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:s})}}qc._jsonSchemaVersion="firestore/querySnapshot/1.0",qc._jsonSchema={type:hr("string",qc._jsonSchemaVersion),bundleSource:hr("string","QuerySnapshot"),bundleName:hr("string"),bundle:hr("string")};function nl(s){s=Di(s,Xn);const e=Di(s.firestore,Ql),t=Ov(e);return CD(t,s._key).then((i=>GD(e,s,i)))}function xn(s){s=Di(s,Yl);const e=Di(s.firestore,Ql),t=Ov(e),i=new vw(e);return qD(s._query),ND(t,s._query).then((a=>new qc(e,i,s,a)))}function Va(s,e,t){s=Di(s,Xn);const i=Di(s.firestore,Ql),a=xw(s.converter,e,t),c=am(i);return cm(i,[dw(c,"setDoc",s._key,a,s.converter!==null,t).toMutation(s._key,ui.none())])}function cr(s,e,t,...i){s=Di(s,Xn);const a=Di(s.firestore,Ql),c=am(a);let u;return u=typeof(e=yr(e))=="string"||e instanceof Lv?VD(c,"updateDoc",s._key,e,t,i):PD(c,"updateDoc",s._key,e),cm(a,[u.toMutation(s._key,ui.exists(!0))])}function Ha(s){return cm(Di(s.firestore,Ql),[new yv(s._key,ui.none())])}function Pc(s,e){const t=Di(s.firestore,Ql),i=St(s),a=xw(s.converter,e),c=am(s.firestore);return cm(t,[dw(c,"addDoc",i._key,a,s.converter!==null,{}).toMutation(i._key,ui.exists(!1))]).then((()=>i))}function cm(s,e){const t=Ov(s);return AD(t,e)}function GD(s,e,t){const i=t.docs.get(e._key),a=new vw(s);return new Vl(s,a,e._key,i,new lh(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Aj(tu),Hc(new Bl("firestore",((i,{instanceIdentifier:a,options:c})=>{const u=i.getProvider("app").getImmediate(),f=new Ql(new kj(i.getProvider("auth-internal")),new Mj(u,i.getProvider("app-check-internal")),Xj(u,a),u);return c={useFetchStreams:t,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Wo(h_,d_,e),Wo(h_,d_,"esm2020")})();var WD="firebase",YD="12.8.0";Wo(WD,YD,"app");const ww={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},Ew=Jg(ww),th=Ux(Ew),Xe=DD(Ew),QD=Jg(ww,"secondary"),Vf=Ux(QD),KD="EYdciKDOi3UYBLk1u8hHams5tmO2",Sw=z.createContext();function Es(){return z.useContext(Sw)}function XD({children:s}){const[e,t]=z.useState(null),[i,a]=z.useState(!1),[c,u]=z.useState(!1),[f,p]=z.useState(null),[x,S]=z.useState(!0);z.useEffect(()=>vA(th,async $=>{if(t($),$)if($.uid===KD)a(!0),u(!1),p(null);else{a(!1);try{const J=ji(Jt(Xe,"clients"),ci("uid","==",$.uid)),Y=await xn(J);if(Y.empty)u(!1),p(null);else{const ce=Y.docs[0];u(!0),p({id:ce.id,...ce.data()})}}catch(J){console.error("Error fetching client data:",J),u(!1),p(null)}}else a(!1),u(!1),p(null);S(!1)}),[]);const L={currentUser:e,isAdmin:i,isClient:c,clientData:f,login:async(F,$,J=!0)=>(await mA(th,J?kx:av),await fA(th,F,$)),logout:()=>iv(th),resetPassword:F=>dA(th,F),loading:x};return l.jsx(Sw.Provider,{value:L,children:s})}const Tw=z.createContext();function Kl(){return z.useContext(Tw)}function JD({children:s}){const[e,t]=z.useState(()=>{const c=localStorage.getItem("theme");return c?c==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});z.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]);const a={isDark:e,toggleTheme:()=>t(!e)};return l.jsx(Tw.Provider,{value:a,children:s})}function ZD(){const[s,e]=z.useState(""),[t,i]=z.useState(""),[a,c]=z.useState(!0),[u,f]=z.useState(""),[p,x]=z.useState(!1),[S,C]=z.useState(!1),[A,B]=z.useState(!1),{login:L,resetPassword:F,currentUser:$,isAdmin:J,isClient:Y,clientData:ce,loading:X}=Es(),pe=Ir();if(z.useEffect(()=>{if(!X&&$){if(J)pe("/dashboard");else if(Y){const V=ce?.clientType;pe(V==="core_buddy"?"/client/core-buddy":V==="circuit_vip"||V==="circuit_dropin"?"/client/circuit":"/client")}}},[X,$,J,Y,ce,pe]),X)return l.jsx("div",{className:"login-container",children:l.jsx("div",{className:"login-loading",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"loading-logo"})})});const xe=async V=>{V.preventDefault(),f(""),x(!0);try{await L(s,t,a)}catch(H){f(H.message||"Failed to log in"),x(!1)}},q=async V=>{if(V.preventDefault(),f(""),!s.trim()){f("Please enter your email address");return}x(!0);try{await F(s.trim()),B(!0)}catch(H){H.code==="auth/user-not-found"?f("No account found with this email"):f(H.message||"Failed to send reset email")}x(!1)};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-card",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"login-logo"}),l.jsx("p",{children:S?"Reset Password":"Client Portal"})]}),u&&l.jsx("div",{className:"error-message",children:u}),A?l.jsxs("div",{className:"reset-sent",children:[l.jsx("div",{className:"reset-sent-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsx("p",{children:"Reset email sent!"}),l.jsx("span",{children:"Check your inbox for a password reset link"}),l.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{C(!1),B(!1),f("")},children:"Back to Log In"})]}):S?l.jsxs("form",{onSubmit:q,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{type:"email",id:"email",value:s,onChange:V=>e(V.target.value),placeholder:"Enter your email",required:!0})]}),l.jsx("button",{type:"submit",className:"login-btn",disabled:p,children:p?"Sending...":"Send Reset Link"}),l.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{C(!1),f("")},children:"Back to Log In"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:xe,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{type:"email",id:"email",value:s,onChange:V=>e(V.target.value),required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsx("input",{type:"password",id:"password",value:t,onChange:V=>i(V.target.value),required:!0})]}),l.jsx("div",{className:"remember-me",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",checked:a,onChange:V=>c(V.target.checked)}),l.jsx("span",{children:"Remember me"})]})}),l.jsx("button",{type:"submit",className:"login-btn",disabled:p,children:p?"Logging in...":"Log In"})]}),l.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{C(!0),f("")},children:"Forgot password?"})]}),l.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function e4(){const[s,e]=z.useState([]),[t,i]=z.useState([]),[a,c]=z.useState(!0),[u,f]=z.useState(null),[p,x]=z.useState({}),[S,C]=z.useState(null),[A,B]=z.useState(""),[L,F]=z.useState("all");z.useEffect(()=>{$()},[]);const $=async()=>{try{const[M,se]=await Promise.all([xn(ji(Jt(Xe,"clients"),HD("createdAt","desc"))),xn(Jt(Xe,"sessions"))]),ie=M.docs.map(Q=>({id:Q.id,...Q.data()})),he=se.docs.map(Q=>({id:Q.id,...Q.data()}));e(ie),i(he)}catch(M){console.error("Error fetching data:",M)}c(!1)},J=M=>{const se=new Date,ie=se.getFullYear(),he=(se.getMonth()+1).toString().padStart(2,"0"),Q=se.getDate().toString().padStart(2,"0"),de=`${ie}-${he}-${Q}`,fe=`${se.getHours().toString().padStart(2,"0")}:${se.getMinutes().toString().padStart(2,"0")}`;return t.filter(Oe=>Oe.clientId!==M?!1:Oe.date<de||Oe.date===de&&Oe.time<fe).length},Y=M=>{const se=J(M.id);return(M.totalSessions||0)-se},ce=M=>{const se=new Date,ie=se.getFullYear(),he=(se.getMonth()+1).toString().padStart(2,"0"),Q=se.getDate().toString().padStart(2,"0"),de=`${ie}-${he}-${Q}`,fe=`${se.getHours().toString().padStart(2,"0")}:${se.getMinutes().toString().padStart(2,"0")}`;return t.filter(Oe=>Oe.clientId!==M?!1:Oe.date>de||Oe.date===de&&Oe.time>=fe).length},X=M=>M?(M.toDate?M.toDate():new Date(M)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",pe=async(M,se)=>{if(window.confirm(`Are you sure you want to delete ${se}? This will also delete all their booked sessions.`))try{const he=t.filter(Q=>Q.clientId===M).map(Q=>Ha(St(Xe,"sessions",Q.id)));await Promise.all(he),await Ha(St(Xe,"clients",M)),e(s.filter(Q=>Q.id!==M)),i(t.filter(Q=>Q.clientId!==M))}catch(ie){console.error("Error deleting client:",ie),alert("Failed to delete client")}},xe=M=>{if(!M)return"";const se=M.toDate?M.toDate():new Date(M),ie=se.getFullYear(),he=(se.getMonth()+1).toString().padStart(2,"0"),Q=se.getDate().toString().padStart(2,"0");return`${ie}-${he}-${Q}`},q=M=>{f(M.id),x({name:M.name,email:M.email,password:"",clientType:M.clientType||"block",weeksInBlock:M.weeksInBlock||"",totalSessions:M.totalSessions||"",sessionsRemaining:M.sessionsRemaining,sessionDuration:M.sessionDuration||45,startDate:xe(M.startDate),endDate:xe(M.endDate),status:M.status,hasPortalAccess:!!M.uid,circuitAccess:!!M.circuitAccess,coreBuddyAccess:!!M.coreBuddyAccess})},V=M=>{const{name:se,value:ie}=M.target;if(x(he=>({...he,[se]:ie})),se==="startDate"||se==="weeksInBlock"){const he=se==="startDate"?ie:p.startDate,Q=parseInt(se==="weeksInBlock"?ie:p.weeksInBlock);if(he&&Q>0){const de=new Date(he),fe=new Date(de);fe.setDate(fe.getDate()+Q*7);const Oe=fe.getFullYear(),He=(fe.getMonth()+1).toString().padStart(2,"0"),nt=fe.getDate().toString().padStart(2,"0");x(Ve=>({...Ve,[se]:ie,endDate:`${Oe}-${He}-${nt}`}))}}},H=async M=>{try{const se=s.find(de=>de.id===M);let ie=se?.uid;if(p.password&&p.password.length>=6&&!se?.uid)try{const de=await Ax(Vf,p.email.trim().toLowerCase(),p.password);await iv(Vf),ie=de.user.uid}catch(de){if(console.error("Error creating auth account:",de),de.code==="auth/email-already-in-use")alert("This email already has a portal account. Password not changed.");else if(de.code==="auth/weak-password"){alert("Password must be at least 6 characters.");return}else{alert("Failed to create portal account: "+de.message);return}}const he=p.clientType==="block",Q={name:p.name.trim(),email:p.email.trim().toLowerCase(),clientType:p.clientType,status:p.status,coreBuddyAccess:p.coreBuddyAccess};if(he)Q.weeksInBlock=parseInt(p.weeksInBlock)||0,Q.totalSessions=parseInt(p.totalSessions)||0,Q.sessionDuration=parseInt(p.sessionDuration),Q.circuitAccess=p.circuitAccess,p.startDate&&(Q.startDate=at.fromDate(new Date(p.startDate))),p.endDate&&(Q.endDate=at.fromDate(new Date(p.endDate)));else{const de=s.find(fe=>fe.id===M);de?.circuitStrikes===void 0&&(Q.circuitStrikes=0),de?.circuitBanUntil===void 0&&(Q.circuitBanUntil=null)}ie&&!se?.uid&&(Q.uid=ie),await cr(St(Xe,"clients",M),Q),e(s.map(de=>de.id===M?{...de,...p,uid:ie||de.uid,weeksInBlock:parseInt(p.weeksInBlock),totalSessions:parseInt(p.totalSessions),sessionDuration:parseInt(p.sessionDuration),startDate:at.fromDate(new Date(p.startDate)),endDate:at.fromDate(new Date(p.endDate))}:de)),f(null),ie&&!se?.uid&&alert("Portal access created! Client can now log in.")}catch(se){console.error("Error updating client:",se),alert("Failed to update client")}},te=async M=>{try{const se=s.find(ie=>ie.id===M)?.status==="archived"?"active":"archived";await cr(St(Xe,"clients",M),{status:se}),e(s.map(ie=>ie.id===M?{...ie,status:se}:ie))}catch(se){console.error("Error archiving client:",se),alert("Failed to update client status")}};if(a)return l.jsx("div",{className:"client-list-loading",children:"Loading clients..."});if(s.length===0)return l.jsxs("div",{className:"client-list-empty",children:[l.jsx("p",{children:"No clients yet"}),l.jsx("span",{children:"Add your first client to get started"})]});const W=M=>M.clientType==="circuit_vip"?"VIP":M.clientType==="circuit_dropin"?"Drop-in":M.clientType==="core_buddy"?"Core Buddy":"Block",ee=s.filter(M=>M.name?.toLowerCase().includes(A.toLowerCase())||M.email?.toLowerCase().includes(A.toLowerCase())),O=M=>M.clientType==="circuit_vip"||M.clientType==="circuit_dropin",Re=M=>M.clientType==="core_buddy",qe=ee.filter(M=>!O(M)&&!Re(M)),ne=ee.filter(M=>O(M)),Ee=ee.filter(M=>Re(M)),Le=L==="block"?qe:L==="circuit"?ne:L==="core_buddy"?Ee:ee,Ae=M=>{u||C(se=>se===M?null:M)},Ge=M=>{const se=S===M.id,ie=u===M.id,he=!M.clientType||M.clientType==="block";return l.jsxs("div",{className:`client-card ${M.status==="archived"?"archived":""} ${se||ie?"expanded":"collapsed"}`,children:[l.jsxs("div",{className:"client-name-row",onClick:()=>Ae(M.id),children:[l.jsxs("div",{className:"client-name-row-left",children:[l.jsx("span",{className:"client-name-initial",children:M.name?.charAt(0)?.toUpperCase()}),l.jsxs("div",{className:"client-name-text",children:[l.jsx("h3",{children:M.name}),l.jsx("span",{className:"client-name-sub",children:he?`${Y(M)}/${M.totalSessions||0} sessions`:W(M)})]})]}),l.jsxs("div",{className:"client-name-row-right",children:[(M.clientType==="circuit_vip"||M.clientType==="circuit_dropin"||M.clientType==="core_buddy")&&l.jsx("span",{className:`client-type-badge ${M.clientType==="circuit_vip"?"vip":M.clientType==="core_buddy"?"core-buddy":"dropin"}`,children:W(M)}),l.jsx("span",{className:`status-dot ${M.status}`}),l.jsx("svg",{className:`client-chevron ${se||ie?"open":""}`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M6 9l6 6 6-6"})})]})]}),(se||ie)&&l.jsx("div",{className:"client-expand-panel",children:ie?l.jsxs("div",{className:"edit-form",children:[l.jsx("div",{className:"edit-type-toggle",children:[{value:"block",label:"Block"},{value:"circuit_vip",label:"VIP"},{value:"circuit_dropin",label:"Drop-in"},{value:"core_buddy",label:"Core Buddy"}].map(Q=>l.jsx("button",{type:"button",className:`edit-type-btn ${p.clientType===Q.value?"active":""}`,onClick:()=>x(de=>({...de,clientType:Q.value})),children:Q.label},Q.value))}),l.jsxs("div",{className:"edit-row",children:[l.jsx("input",{type:"text",name:"name",value:p.name,onChange:V,placeholder:"Name"}),l.jsx("input",{type:"email",name:"email",value:p.email,onChange:V,placeholder:"Email"})]}),p.clientType==="block"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"edit-row",children:[l.jsx("input",{type:"number",name:"weeksInBlock",value:p.weeksInBlock,onChange:V,placeholder:"Weeks",min:"1"}),l.jsx("input",{type:"number",name:"totalSessions",value:p.totalSessions,onChange:V,placeholder:"Total Sessions",min:"1"}),l.jsxs("select",{name:"sessionDuration",value:p.sessionDuration,onChange:V,children:[l.jsx("option",{value:"30",children:"30 min"}),l.jsx("option",{value:"45",children:"45 min"})]})]}),l.jsxs("div",{className:"edit-row",children:[l.jsx("input",{type:"date",name:"startDate",value:p.startDate,onChange:V}),l.jsx("input",{type:"date",name:"endDate",value:p.endDate,onChange:V})]})]}),l.jsx("div",{className:"edit-row password-row",children:p.hasPortalAccess?l.jsx("div",{className:"portal-status has-access",children:"Has portal access"}):l.jsxs(l.Fragment,{children:[l.jsx("input",{type:"text",name:"password",value:p.password,onChange:V,placeholder:"Set portal password (min 6 chars)"}),l.jsx("span",{className:"password-hint",children:"Set password to enable client portal"})]})}),p.clientType==="block"&&l.jsx("div",{className:"edit-row circuit-row",children:l.jsxs("label",{className:"circuit-access-toggle",children:[l.jsx("input",{type:"checkbox",checked:p.circuitAccess,onChange:Q=>x(de=>({...de,circuitAccess:Q.target.checked}))}),l.jsx("span",{children:"Circuit Class Access"})]})}),p.clientType!=="core_buddy"&&l.jsx("div",{className:"edit-row circuit-row",children:l.jsxs("label",{className:"circuit-access-toggle",children:[l.jsx("input",{type:"checkbox",checked:p.coreBuddyAccess,onChange:Q=>x(de=>({...de,coreBuddyAccess:Q.target.checked}))}),l.jsx("span",{children:"Core Buddy Access"})]})}),l.jsxs("div",{className:"edit-actions",children:[l.jsx("button",{className:"save-edit-btn",onClick:()=>H(M.id),children:"Save"}),l.jsx("button",{className:"cancel-edit-btn",onClick:()=>{f(null)},children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"client-expand-info",children:[l.jsx("span",{className:"client-email",children:M.email}),l.jsx("span",{className:`status-badge ${M.status}`,children:M.status})]}),he?l.jsxs("div",{className:"client-details",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Block"}),l.jsxs("span",{className:"detail-value",children:[M.weeksInBlock," weeks"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Sessions"}),l.jsxs("span",{className:"detail-value",children:[Y(M)," / ",M.totalSessions," remaining"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Booked"}),l.jsxs("span",{className:"detail-value",children:[ce(M.id)," sessions"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Duration"}),l.jsxs("span",{className:"detail-value",children:[M.sessionDuration||45," min"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Start"}),l.jsx("span",{className:"detail-value",children:X(M.startDate)})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"End"}),l.jsx("span",{className:"detail-value",children:X(M.endDate)})]})]}):l.jsxs("div",{className:"client-details circuit-details",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Type"}),l.jsx("span",{className:"detail-value",children:M.clientType==="circuit_vip"?"Monthly VIP":"Drop-in"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Strikes"}),l.jsxs("span",{className:"detail-value",children:[M.circuitStrikes||0,"/3"]})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-label",children:"Joined"}),l.jsx("span",{className:"detail-value",children:X(M.createdAt)})]})]}),l.jsxs("div",{className:"client-actions",children:[l.jsx("button",{className:"action-btn edit",onClick:Q=>{Q.stopPropagation(),q(M)},children:"Edit"}),l.jsx("button",{className:"action-btn archive",onClick:Q=>{Q.stopPropagation(),te(M.id)},children:M.status==="archived"?"Reactivate":"Archive"}),l.jsx("button",{className:"action-btn delete",onClick:Q=>{Q.stopPropagation(),pe(M.id,M.name)},children:"Delete"})]})]})})]},M.id)};return l.jsxs("div",{className:"client-list",children:[l.jsxs("div",{className:"client-search",children:[l.jsxs("svg",{className:"client-search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("path",{d:"M21 21l-4.35-4.35"})]}),l.jsx("input",{type:"text",placeholder:"Search clients...",value:A,onChange:M=>B(M.target.value),className:"client-search-input"}),A&&l.jsx("button",{className:"client-search-clear",onClick:()=>B(""),children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),l.jsx("div",{className:"client-type-filter",children:[{value:"all",label:"All",count:ee.length},{value:"block",label:"Block",count:qe.length},{value:"circuit",label:"Circuit",count:ne.length},{value:"core_buddy",label:"Core Buddy",count:Ee.length}].map(M=>l.jsxs("button",{className:`client-filter-btn ${L===M.value?"active":""}`,onClick:()=>F(M.value),children:[M.label,l.jsx("span",{className:"client-filter-count",children:M.count})]},M.value))}),L==="all"?l.jsxs(l.Fragment,{children:[qe.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"client-section-header",children:["Block Members ",l.jsx("span",{children:qe.length})]}),qe.map(Ge)]}),ne.length>0&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"client-section-header",children:["Circuit Members ",l.jsx("span",{children:ne.length})]}),ne.map(Ge)]})]}):l.jsxs(l.Fragment,{children:[Le.length===0&&l.jsxs("div",{className:"client-section-empty",children:["No ",L," clients found"]}),Le.map(Ge)]})]})}const Cw={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},Og=["monday","tuesday","wednesday","thursday","friday"],t4=["Monday","Tuesday","Wednesday","Thursday","Friday"],n4=["Mon","Tue","Wed","Thu","Fri"],p_=s=>{const[e,t]=s.split(":"),i=parseInt(e),a=i>=12?"pm":"am";return`${i>12?i-12:i===0?12:i}:${t}${a}`},r4=s=>{const e=new Date(s),t=e.getDay(),i=e.getDate()-t+(t===0?-6:1);return e.setDate(i),Og.map((a,c)=>{const u=new Date(e);return u.setDate(e.getDate()+c),u})},Vs=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},Lg=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},Uf=(s,e)=>{const t=Lg(s)+e,i=Math.floor(t/60),a=t%60;return`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},s4=s=>{const e=Cw[s];if(!e)return[];const t=[];if(e.morning){let i=e.morning.start;for(;i<e.morning.end;)t.push({time:i,period:"morning"}),i=Uf(i,15)}if(e.afternoon){let i=e.afternoon.start;for(;i<e.afternoon.end;)t.push({time:i,period:"afternoon"}),i=Uf(i,15)}return t};function i4(){const[s,e]=z.useState(new Date),[t,i]=z.useState([]),[a,c]=z.useState([]),[u,f]=z.useState([]),[p,x]=z.useState([]),[S,C]=z.useState([]),[A,B]=z.useState(null),[L,F]=z.useState(null),[$,J]=z.useState(!1),[Y,ce]=z.useState(!0);z.useEffect(()=>{i(r4(s))},[s]),z.useEffect(()=>{V()},[]);const X=ie=>{if(B(ie),J(!1),ie.startDate){const he=ie.startDate.toDate?ie.startDate.toDate():new Date(ie.startDate);e(he)}F(null)},pe=ie=>{const he=new Date,Q=Vs(he),de=`${he.getHours().toString().padStart(2,"0")}:${he.getMinutes().toString().padStart(2,"0")}`;return u.filter(fe=>fe.clientId!==ie?!1:fe.date<Q||fe.date===Q&&fe.time<de).length},xe=ie=>{const he=pe(ie.id);return(ie.totalSessions||0)-he},q=ie=>{const he=new Date,Q=he.getFullYear(),de=(he.getMonth()+1).toString().padStart(2,"0"),fe=he.getDate().toString().padStart(2,"0"),Oe=`${Q}-${de}-${fe}`,He=`${he.getHours().toString().padStart(2,"0")}:${he.getMinutes().toString().padStart(2,"0")}`;return u.filter(nt=>nt.clientId!==ie?!1:nt.date>Oe||nt.date===Oe&&nt.time>=He).length},V=async()=>{try{const he=(await xn(Jt(Xe,"clients"))).docs.map(Ve=>({id:Ve.id,...Ve.data()})).filter(Ve=>Ve.status==="active");c(he);const de=(await xn(Jt(Xe,"sessions"))).docs.map(Ve=>({id:Ve.id,...Ve.data()}));f(de);const Oe=(await xn(Jt(Xe,"holidays"))).docs.map(Ve=>({id:Ve.id,...Ve.data()}));x(Oe);const nt=(await xn(Jt(Xe,"blockedTimes"))).docs.map(Ve=>({id:Ve.id,...Ve.data()}));C(nt)}catch(ie){console.error("Error fetching data:",ie)}ce(!1)},H=ie=>{const he=new Date(s);he.setDate(he.getDate()+ie*7),e(he),F(null)},te=()=>{e(new Date),F(null)},W=ie=>{const he=Vs(ie);return p.some(Q=>Q.date===he)},ee=(ie,he)=>{const Q=Vs(ie);return S.some(de=>de.date===Q&&de.time===he)},O=async(ie,he)=>{const Q=Vs(ie),de=S.find(fe=>fe.date===Q&&fe.time===he);try{if(de)await Ha(St(Xe,"blockedTimes",de.id)),C(S.filter(fe=>fe.id!==de.id));else{const fe=await Pc(Jt(Xe,"blockedTimes"),{date:Q,time:he,createdAt:at.now()});C([...S,{id:fe.id,date:Q,time:he}])}}catch(fe){console.error("Error toggling blocked time:",fe),alert("Failed to update time slot")}},Re=ie=>{const he=Vs(ie);return u.filter(Q=>Q.date===he)},qe=(ie,he)=>{const Q=Vs(ie);return u.find(de=>de.date===Q&&de.time===he)},ne=(ie,he,Q)=>{const de=Og[ie.getDay()-1];if(!de||W(ie))return!1;const fe=Math.ceil(Q/15);for(let xt=0;xt<fe;xt++){const it=Uf(he,xt*15);if(ee(ie,it))return!1}const Oe=Vs(ie);if(u.find(xt=>xt.date===Oe&&xt.time===he))return!1;const nt=Uf(he,Q),Ve=Cw[de],Mt=Ve.morning&&nt<=Ve.morning.end,Zt=Ve.afternoon&&nt<=Ve.afternoon.end,jt=Ve.morning&&he>=Ve.morning.start&&he<Ve.morning.end,Yt=Ve.afternoon&&he>=Ve.afternoon.start&&he<Ve.afternoon.end;if(jt&&!Mt||Yt&&!Zt)return!1;for(const xt of u){if(xt.date!==Oe)continue;const it=Lg(xt.time),Bt=it+(xt.duration||45),Ot=Lg(he),Lt=Ot+Q;if(Ot<Bt&&Lt>it)return!1}return!0},Ee=async(ie,he)=>{const Q=qe(ie,he);if(Q){if(window.confirm(`Cancel ${Q.clientName}'s session at ${p_(he)}?`))try{await Ha(St(Xe,"sessions",Q.id)),f(u.filter(fe=>fe.id!==Q.id))}catch(fe){console.error("Error cancelling session:",fe),alert("Failed to cancel session")}return}if(!A){alert("Please select a client first");return}if(!ne(ie,he,A.sessionDuration||45)){alert("This slot is not available for this client's session duration");return}if(u.filter(fe=>fe.clientId===A.id).length>=A.totalSessions){alert(`${A.name} has already booked all ${A.totalSessions} sessions`);return}try{const fe=Vs(ie),Oe={clientId:A.id,clientName:A.name,date:fe,time:he,duration:A.sessionDuration||45,createdAt:at.now()},He=await Pc(Jt(Xe,"sessions"),Oe);f([...u,{id:He.id,...Oe}])}catch(fe){console.error("Error booking session:",fe),alert("Failed to book session")}},Le=async()=>{if(!A)return;const ie=A.startDate?.toDate?A.startDate.toDate():new Date(A.startDate),he=A.endDate?.toDate?A.endDate.toDate():new Date(A.endDate),Q=u.filter(Ve=>Ve.clientId!==A.id?!1:t.some(Mt=>Vs(Mt)===Ve.date));if(Q.length===0){alert("No sessions in current week to repeat. Book some sessions first, then use this button.");return}const de=A.weeksInBlock||Math.ceil((he-ie)/(10080*60*1e3)),fe=Q.map(Ve=>({dayOfWeek:new Date(Ve.date).getDay(),time:Ve.time}));let Oe=[];const He=u.filter(Ve=>Ve.clientId===A.id).length;for(let Ve=0;Ve<de;Ve++){const Mt=new Date(ie);Mt.setDate(Mt.getDate()+Ve*7);const Zt=new Date(Mt),jt=Zt.getDay(),Yt=Zt.getDate()-jt+(jt===0?-6:1);Zt.setDate(Yt);for(const xt of fe){const it=new Date(Zt),Bt=xt.dayOfWeek===0?6:xt.dayOfWeek-1;it.setDate(Zt.getDate()+Bt);const Ot=Vs(it);u.some(Lt=>Lt.clientId===A.id&&Lt.date===Ot&&Lt.time===xt.time)||it<ie||it>he||p.some(Lt=>Lt.date===Ot)||Oe.push({dateKey:Ot,time:xt.time,sessionDate:it})}}const nt=He+Oe.length;if(nt>A.totalSessions){alert(`This would create ${Oe.length} new sessions (${nt} total), but client only has ${A.totalSessions} sessions in their package.

You can still book ${A.totalSessions-He} more sessions.`);return}if(Oe.length===0){alert("All weeks already have sessions booked for this pattern.");return}if(window.confirm(`This will create ${Oe.length} new sessions across the block.

(${He} existing + ${Oe.length} new = ${nt} total)

Continue?`))try{const Ve=[];for(const Mt of Oe){const Zt={clientId:A.id,clientName:A.name,date:Mt.dateKey,time:Mt.time,duration:A.sessionDuration||45,createdAt:at.now()},jt=await Pc(Jt(Xe,"sessions"),Zt);Ve.push({id:jt.id,...Zt})}f([...u,...Ve]),alert(`Created ${Ve.length} new sessions!`)}catch(Ve){console.error("Error repeating weekly:",Ve),alert("Failed to repeat sessions")}},Ae=async ie=>{const he=Vs(ie),Q=p.find(de=>de.date===he);try{if(Q)await Ha(St(Xe,"holidays",Q.id)),x(p.filter(de=>de.id!==Q.id));else{const de=await Pc(Jt(Xe,"holidays"),{date:he,createdAt:at.now()});x([...p,{id:de.id,date:he}])}}catch(de){console.error("Error toggling day availability:",de),alert("Failed to update day availability")}};if(Y)return l.jsx("div",{className:"calendar-loading",children:"Loading calendar..."});const Ge=t[0],M=t[4],se=Ge&&M?`${Ge.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${M.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return l.jsxs("div",{className:"calendar",children:[l.jsxs("div",{className:"calendar-header",children:[l.jsxs("div",{className:"calendar-nav",children:[l.jsx("button",{onClick:()=>H(-1),children:""}),l.jsx("button",{onClick:te,children:"Today"}),l.jsx("button",{onClick:()=>H(1),children:""})]}),l.jsx("h3",{children:se})]}),l.jsxs("div",{className:"client-selector",children:[l.jsx("span",{className:"selector-label",children:"Booking for:"}),A?l.jsxs("div",{className:"selected-client",children:[l.jsxs("div",{className:"selected-info",children:[l.jsx("strong",{children:A.name}),l.jsxs("span",{children:[A.sessionDuration||45,"min  ",xe(A),"/",A.totalSessions," remaining"]}),l.jsxs("span",{className:"booked-info",children:[q(A.id)," booked"]})]}),l.jsx("button",{onClick:()=>B(null),children:"Change"})]}):l.jsx("button",{className:"select-client-btn",onClick:()=>J(!0),children:"Select Client"})]}),A&&l.jsxs("div",{className:"repeat-weekly-section",children:[l.jsx("button",{className:"repeat-weekly-btn",onClick:Le,children:"Repeat This Week's Schedule For All Weeks"}),l.jsx("span",{className:"repeat-hint",children:"Copies current week's sessions to all weeks in block"})]}),l.jsx("div",{className:"day-cards",children:t.map((ie,he)=>{const Q=Re(ie),de=Vs(ie)===Vs(new Date),fe=W(ie);return l.jsxs("div",{className:`day-card ${L===he?"selected":""} ${de?"today":""} ${fe?"holiday":""}`,onClick:()=>F(L===he?null:he),children:[l.jsxs("div",{className:"day-card-header",children:[l.jsx("span",{className:"day-name",children:n4[he]}),l.jsx("span",{className:"day-date",children:ie.getDate()})]}),fe?l.jsx("div",{className:"day-card-status holiday",children:"Unavailable"}):l.jsxs("div",{className:"day-card-status",children:[Q.length," session",Q.length!==1?"s":""]})]},he)})}),L!==null&&t[L]&&l.jsxs("div",{className:"time-panel",children:[l.jsxs("div",{className:"time-panel-header",children:[l.jsxs("h4",{children:[t4[L]," ",t[L].getDate()]}),l.jsx("button",{className:"close-panel",onClick:()=>F(null),children:""})]}),l.jsx("div",{className:"availability-toggle",children:l.jsx("button",{className:`toggle-availability-btn ${W(t[L])?"unavailable":"available"}`,onClick:()=>Ae(t[L]),children:W(t[L])?"Mark Day Available":"Mark Day Unavailable"})}),W(t[L])?l.jsxs("div",{className:"day-unavailable-message",children:[l.jsx("p",{children:"This day is marked as unavailable"}),l.jsx("span",{children:"Tap the button above to make it available again"})]}):l.jsx("div",{className:"time-slots",children:s4(Og[L]).map(({time:ie,period:he},Q,de)=>{const fe=qe(t[L],ie),Oe=ee(t[L],ie),He=A&&ne(t[L],ie,A.sessionDuration||45),nt=Q===0||de[Q-1]?.period!==he;return l.jsxs("div",{children:[nt&&l.jsx("div",{className:"period-label",children:he==="morning"?"Morning":"Afternoon"}),l.jsxs("div",{className:"time-slot-row",children:[l.jsxs("button",{className:`time-slot ${fe?"booked":""} ${Oe?"blocked":""} ${He?"available":""} ${!fe&&!Oe&&!He&&A?"unavailable":""}`,onClick:()=>!Oe&&Ee(t[L],ie),disabled:Oe,children:[l.jsx("span",{className:"slot-time",children:p_(ie)}),fe?l.jsxs("span",{className:"slot-client",children:[fe.clientName," (",fe.duration,"m)"]}):Oe?l.jsx("span",{className:"slot-blocked",children:"Blocked"}):He?l.jsx("span",{className:"slot-available",children:"Available"}):A?l.jsx("span",{className:"slot-unavailable",children:"Unavailable"}):l.jsx("span",{className:"slot-empty",children:"Select client to book"})]}),l.jsx("button",{className:`block-toggle-btn ${Oe?"is-blocked":""}`,onClick:()=>O(t[L],ie),disabled:!!fe,title:Oe?"Unblock this time":"Block this time",children:Oe?"":""})]})]},ie)})})]}),$&&l.jsx("div",{className:"modal-overlay",onClick:()=>J(!1),children:l.jsxs("div",{className:"modal-content",onClick:ie=>ie.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h3",{children:"Select Client"}),l.jsx("button",{className:"close-btn",onClick:()=>J(!1),children:""})]}),l.jsx("div",{className:"client-list-picker",children:a.length===0?l.jsx("p",{className:"no-items",children:"No active clients"}):a.map(ie=>{const he=ie.startDate?.toDate?ie.startDate.toDate():new Date(ie.startDate),Q=ie.endDate?.toDate?ie.endDate.toDate():new Date(ie.endDate),de=xe(ie),fe=q(ie.id);return l.jsxs("button",{className:"client-option",onClick:()=>X(ie),children:[l.jsx("strong",{children:ie.name}),l.jsxs("span",{children:[ie.sessionDuration||45,"min  ",de,"/",ie.totalSessions," remaining  ",fe," booked"]}),l.jsxs("span",{className:"client-dates",children:[he.toLocaleDateString("en-GB",{day:"numeric",month:"short"})," - ",Q.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]},ie.id)})})]})})]})}const g_=s=>{const[e,t]=s.split(":"),i=parseInt(e),a=i>=12?"pm":"am";return`${i>12?i-12:i===0?12:i}:${t}${a}`},Ch=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},Nw=s=>s===Ch(new Date),a4=s=>{const e=new Date;return e.setDate(e.getDate()+1),s===Ch(e)},v_=s=>Nw(s)?"Today":a4(s)?"Tomorrow":new Date(s).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"}),y_=s=>{const e=new Date,t=Ch(e),i=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;if(s.date<t)return!0;if(s.date===t){const a=b_(s.time)+(s.duration||45);return b_(i)>=a}return!1},b_=s=>{const[e,t]=s.split(":").map(Number);return e*60+t};function o4(){const[s,e]=z.useState([]),[t,i]=z.useState(!0),[a,c]=z.useState(new Date);z.useEffect(()=>{u();const L=setInterval(()=>{c(new Date)},6e4);return()=>clearInterval(L)},[]);const u=async()=>{try{const F=(await xn(Jt(Xe,"sessions"))).docs.map(Y=>({id:Y.id,...Y.data()})),$=Ch(new Date),J=F.filter(Y=>Y.date>=$).sort((Y,ce)=>Y.date!==ce.date?Y.date.localeCompare(ce.date):Y.time.localeCompare(ce.time));e(J)}catch(L){console.error("Error fetching sessions:",L)}i(!1)},f=async L=>{if(window.confirm(`Cancel ${L.clientName}'s session at ${g_(L.time)} on ${v_(L.date)}?`))try{await Ha(St(Xe,"sessions",L.id)),e(s.filter(F=>F.id!==L.id))}catch(F){console.error("Error cancelling session:",F),alert("Failed to cancel session")}};if(t)return l.jsx("div",{className:"schedule-loading",children:"Loading schedule..."});const p=s.reduce((L,F)=>{const $=F.date;return L[$]||(L[$]=[]),L[$].push(F),L},{}),x=Object.keys(p).sort(),S=Ch(new Date),C=p[S]||[],A=C.filter(L=>y_(L)).length,B=C.length-A;return l.jsxs("div",{className:"schedule",children:[l.jsxs("div",{className:"today-summary",children:[l.jsx("h3",{children:"Today's Sessions"}),l.jsx("div",{className:"today-count",children:C.length===0?l.jsx("span",{className:"no-sessions",children:"No sessions today"}):l.jsxs("div",{className:"today-stats",children:[l.jsxs("span",{className:"completed-count",children:[A," completed"]}),l.jsxs("span",{className:"remaining-count",children:[B," remaining"]})]})})]}),x.length===0?l.jsx("div",{className:"no-upcoming",children:l.jsx("p",{children:"No upcoming sessions booked"})}):l.jsx("div",{className:"sessions-list",children:x.map(L=>l.jsxs("div",{className:`date-group ${Nw(L)?"today":""}`,children:[l.jsxs("div",{className:"date-header",children:[l.jsx("span",{className:"date-label",children:v_(L)}),l.jsxs("span",{className:"date-count",children:[p[L].length," session",p[L].length!==1?"s":""]})]}),l.jsx("div",{className:"date-sessions",children:p[L].map(F=>{const $=y_(F);return l.jsxs("div",{className:`session-card ${$?"completed":""}`,children:[l.jsx("div",{className:"session-time",children:g_(F.time)}),l.jsxs("div",{className:"session-details",children:[l.jsx("strong",{children:F.clientName}),l.jsxs("span",{children:[F.duration,"min session"]})]}),$?l.jsx("div",{className:"completed-badge",children:""}):l.jsx("button",{className:"cancel-session-btn",onClick:()=>f(F),children:"Cancel"})]},F.id)})})]},L))})]})}const Aw={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},Pg=["monday","tuesday","wednesday","thursday","friday"],l4=["Monday","Tuesday","Wednesday","Thursday","Friday"],c4=s=>{const[e,t]=s.split(":"),i=parseInt(e),a=i>=12?"pm":"am";return`${i>12?i-12:i===0?12:i}:${t}${a}`},nh=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},u4=s=>{const e=new Date(s),t=e.getDay(),i=e.getDate()-t+(t===0?-6:1);return e.setDate(i),Pg.map((a,c)=>{const u=new Date(e);return u.setDate(e.getDate()+c),u})},Vg=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},Ug=(s,e)=>{const t=Vg(s)+e,i=Math.floor(t/60),a=t%60;return`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},h4=s=>{const e=Aw[s];if(!e)return[];const t=[];if(e.morning){let i=e.morning.start;for(;i<e.morning.end;)t.push({time:i,period:"morning"}),i=Ug(i,15)}if(e.afternoon){let i=e.afternoon.start;for(;i<e.afternoon.end;)t.push({time:i,period:"afternoon"}),i=Ug(i,15)}return t};function d4(){const[s,e]=z.useState(new Date),[t,i]=z.useState([]),[a,c]=z.useState([]),[u,f]=z.useState([]),[p,x]=z.useState(!0),[S,C]=z.useState(45);z.useEffect(()=>{i(u4(s))},[s]),z.useEffect(()=>{A()},[]);const A=async()=>{try{const xe=(await xn(Jt(Xe,"sessions"))).docs.map(H=>({id:H.id,...H.data()}));c(xe);const V=(await xn(Jt(Xe,"holidays"))).docs.map(H=>({id:H.id,...H.data()}));f(V)}catch(pe){console.error("Error fetching data:",pe)}x(!1)},B=pe=>{const xe=new Date(s);xe.setDate(xe.getDate()+pe*7),e(xe)},L=()=>{e(new Date)},F=pe=>{const xe=nh(pe);return u.some(q=>q.date===xe)},$=(pe,xe)=>{const q=Pg[pe.getDay()-1];if(!q||F(pe))return!1;const V=nh(pe),H=new Date,te=nh(H);if(V<te)return!1;if(V===te){const Ee=`${H.getHours().toString().padStart(2,"0")}:${H.getMinutes().toString().padStart(2,"0")}`;if(xe<Ee)return!1}const W=Ug(xe,S),ee=Aw[q],O=ee.morning&&xe>=ee.morning.start&&xe<ee.morning.end,Re=ee.afternoon&&xe>=ee.afternoon.start&&xe<ee.afternoon.end,qe=ee.morning&&W<=ee.morning.end,ne=ee.afternoon&&W<=ee.afternoon.end;if(O&&!qe||Re&&!ne)return!1;for(const Ee of a){if(Ee.date!==V)continue;const Le=Vg(Ee.time),Ae=Le+(Ee.duration||45),Ge=Vg(xe),M=Ge+S;if(Ge<Ae&&M>Le)return!1}return!0},J=(pe,xe)=>{const q=Pg[xe];return h4(q).filter(H=>$(pe,H.time))};if(p)return l.jsx("div",{className:"availability-loading",children:"Loading availability..."});const Y=t[0],ce=t[4],X=Y&&ce?`${Y.toLocaleDateString("en-GB",{day:"numeric",month:"short"})} - ${ce.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}`:"";return l.jsxs("div",{className:"availability",children:[l.jsxs("div",{className:"availability-header",children:[l.jsxs("div",{className:"availability-nav",children:[l.jsx("button",{onClick:()=>B(-1),children:""}),l.jsx("button",{onClick:L,children:"Today"}),l.jsx("button",{onClick:()=>B(1),children:""})]}),l.jsx("h3",{children:X}),l.jsxs("div",{className:"duration-selector",children:[l.jsx("label",{children:"Session:"}),l.jsxs("select",{value:S,onChange:pe=>C(Number(pe.target.value)),children:[l.jsx("option",{value:30,children:"30 min"}),l.jsx("option",{value:45,children:"45 min"}),l.jsx("option",{value:60,children:"60 min"})]})]})]}),l.jsx("div",{className:"availability-grid",children:t.map((pe,xe)=>{const q=F(pe),V=q?[]:J(pe,xe),H=nh(pe)===nh(new Date),te=pe<new Date&&!H;return l.jsxs("div",{className:`day-column ${H?"today":""} ${te?"past":""}`,children:[l.jsxs("div",{className:"day-header",children:[l.jsx("span",{className:"day-name",children:l4[xe]}),l.jsxs("span",{className:"day-date",children:[pe.getDate(),"/",pe.getMonth()+1]}),q&&l.jsx("span",{className:"holiday-badge",children:"Holiday"})]}),l.jsx("div",{className:"slots-container",children:q?l.jsx("div",{className:"no-slots",children:"Unavailable"}):V.length===0?l.jsx("div",{className:"no-slots",children:"Fully booked"}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"slots-count",children:[V.length," slots"]}),l.jsx("div",{className:"slots-list",children:V.map(W=>l.jsx("div",{className:`slot ${W.period}`,children:c4(W.time)},W.time))})]})})]},xe)})})]})}const tg=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,__=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"}),x_=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const a=new Date(s);a.setHours(9,45,0,0),s>a&&(t=7)}const i=new Date(s);return i.setDate(s.getDate()+t),i},pf=s=>s==="circuit_vip"?"VIP":s==="circuit_dropin"?"Drop-in":"Block",gf=s=>s==="circuit_vip"?"vip":s==="circuit_dropin"?"dropin":"block";function f4(){const[s,e]=z.useState(!0),[t,i]=z.useState([]),[a,c]=z.useState([]),[u,f]=z.useState(null),[p,x]=z.useState("upcoming"),[S,C]=z.useState(!1),[A,B]=z.useState(null),[L,F]=z.useState(!1),[$,J]=z.useState(!1),Y=z.useCallback((Q,de="info")=>{B({message:Q,type:de}),setTimeout(()=>B(null),4e3)},[]);z.useEffect(()=>{ce()},[]);const ce=async()=>{try{const de=(await xn(Jt(Xe,"circuitSessions"))).docs.map(Ve=>({id:Ve.id,...Ve.data()}));de.sort((Ve,Mt)=>Mt.date.localeCompare(Ve.date)),i(de);const Oe=(await xn(Jt(Xe,"clients"))).docs.map(Ve=>({id:Ve.id,...Ve.data()})).filter(Ve=>Ve.clientType==="circuit_vip"||Ve.clientType==="circuit_dropin"||Ve.circuitAccess===!0);c(Oe);const He=tg(x_()),nt=de.find(Ve=>Ve.date===He);nt?f(nt):de.length>0&&f(de[0])}catch(Q){console.error("Error loading circuit data:",Q),Y("Failed to load circuit data","error")}e(!1)},X=async Q=>{if(!(!u||S)&&window.confirm("Remove this member from the slot?")){C(!0);try{const de=[...u.slots],fe=de.findIndex(nt=>nt.slotNumber===Q);if(fe===-1){C(!1);return}let Oe=[...u.waitlist||[]];if(Oe.length>0){const nt=Oe.shift();de[fe]={slotNumber:Q,memberId:nt.memberId,memberName:nt.memberName,memberType:nt.memberType,status:"confirmed",bookedAt:at.now()},Y(`Slot given to ${nt.memberName} from waitlist`,"success")}else de[fe]={slotNumber:Q,memberId:null,memberName:null,memberType:null,status:"available"},Y("Member removed from slot","success");await cr(St(Xe,"circuitSessions",u.id),{slots:de,waitlist:Oe});const He={...u,slots:de,waitlist:Oe};f(He),i(nt=>nt.map(Ve=>Ve.id===He.id?He:Ve))}catch(de){console.error("Error removing from slot:",de),Y("Failed to remove member","error")}C(!1)}},pe=async(Q,de)=>{if(!(!u||S)){C(!0);try{const fe=[...u.slots],Oe=fe.findIndex(Ve=>Ve.slotNumber===Q&&Ve.status==="available");if(Oe===-1){Y("Slot is not available","error"),C(!1);return}if(fe.some(Ve=>Ve.memberId===de.id)){Y(`${de.name} already has a slot`,"error"),C(!1);return}fe[Oe]={slotNumber:Q,memberId:de.id,memberName:de.name,memberType:de.clientType||"block",status:"confirmed",bookedAt:at.now()};const He=(u.waitlist||[]).filter(Ve=>Ve.memberId!==de.id);await cr(St(Xe,"circuitSessions",u.id),{slots:fe,waitlist:He});const nt={...u,slots:fe,waitlist:He};f(nt),i(Ve=>Ve.map(Mt=>Mt.id===nt.id?nt:Mt)),Y(`${de.name} added to slot ${Q}`,"success")}catch(fe){console.error("Error adding to slot:",fe),Y("Failed to add member","error")}C(!1)}},xe=async Q=>{if(!(!u||S)){C(!0);try{const de=(u.waitlist||[]).filter(Oe=>Oe.memberId!==Q);await cr(St(Xe,"circuitSessions",u.id),{waitlist:de});const fe={...u,waitlist:de};f(fe),i(Oe=>Oe.map(He=>He.id===fe.id?fe:He)),Y("Removed from waitlist","success")}catch(de){console.error("Error removing from waitlist:",de),Y("Failed to remove from waitlist","error")}C(!1)}},q=async(Q,de)=>{if(!(!u||S)){C(!0);try{const fe=[...u.slots],Oe=fe.findIndex(nt=>nt.slotNumber===Q);if(Oe===-1){C(!1);return}if(fe[Oe]={...fe[Oe],attended:de},await cr(St(Xe,"circuitSessions",u.id),{slots:fe}),de===!1){const nt=fe[Oe].memberId;if(nt){const Ve=St(Xe,"clients",nt),Mt=await nl(Ve);if(Mt.exists()){const jt=(Mt.data().circuitStrikes||0)+1,Yt={circuitStrikes:jt};if(jt>=3){const xt=new Date;xt.setMonth(xt.getMonth()+1),Yt.circuitBanUntil=at.fromDate(xt),Yt.circuitStrikes=0,Y(`${fe[Oe].memberName} banned for 1 month (3 strikes)`,"error")}else Y(`No-show recorded - ${fe[Oe].memberName} (${jt}/3 strikes)`,"error");await cr(Ve,Yt)}}}else Y(`${fe[Oe].memberName} marked as attended`,"success");const He={...u,slots:fe};f(He),i(nt=>nt.map(Ve=>Ve.id===He.id?He:Ve))}catch(fe){console.error("Error marking attendance:",fe),Y("Failed to update attendance","error")}C(!1)}},V=async(Q,de)=>{if(!S&&window.confirm(`Reset strikes for ${de}?`)){C(!0);try{await cr(St(Xe,"clients",Q),{circuitStrikes:0,circuitBanUntil:null}),c(fe=>fe.map(Oe=>Oe.id===Q?{...Oe,circuitStrikes:0,circuitBanUntil:null}:Oe)),Y(`Strikes reset for ${de}`,"success")}catch(fe){console.error("Error resetting strikes:",fe),Y("Failed to reset strikes","error")}C(!1)}},H=async(Q,de)=>{if(!S&&window.confirm(`Lift ban for ${de}?`)){C(!0);try{await cr(St(Xe,"clients",Q),{circuitBanUntil:null,circuitStrikes:0}),c(fe=>fe.map(Oe=>Oe.id===Q?{...Oe,circuitBanUntil:null,circuitStrikes:0}:Oe)),Y(`Ban lifted for ${de}`,"success")}catch(fe){console.error("Error lifting ban:",fe),Y("Failed to lift ban","error")}C(!1)}};if(s)return l.jsxs("div",{className:"cm-loading",children:[l.jsx("div",{className:"cm-loading-spinner"}),l.jsx("span",{children:"Loading circuit data..."})]});const te=tg(new Date),W=tg(x_()),ee=t.filter(Q=>Q.date>=te),O=t.filter(Q=>Q.date<te),Re=p==="upcoming"?ee:O,qe=u?u.slots.filter(Q=>Q.status!=="available").length:0,ne=u?u.slots.filter(Q=>Q.status==="available").length:0,Ee=u?u.date>=te:!1,Le=u?u.slots.filter(Q=>Q.memberId).map(Q=>Q.memberId):[],Ae=u?(u.waitlist||[]).map(Q=>Q.memberId):[],Ge=a.filter(Q=>!Le.includes(Q.id)&&!Ae.includes(Q.id)),M=a.filter(Q=>Q.clientType==="circuit_vip").length,se=a.filter(Q=>Q.clientType==="circuit_dropin").length,ie=a.filter(Q=>Q.circuitAccess&&Q.clientType!=="circuit_vip"&&Q.clientType!=="circuit_dropin").length,he=a.filter(Q=>Q.circuitBanUntil?(Q.circuitBanUntil.toDate?Q.circuitBanUntil.toDate():new Date(Q.circuitBanUntil))>new Date:!1);return l.jsxs("div",{className:"cm-container",children:[l.jsxs("div",{className:"cm-stats-row",children:[l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:M}),l.jsx("span",{className:"cm-stat-label",children:"VIP"})]}),l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:se}),l.jsx("span",{className:"cm-stat-label",children:"Drop-in"})]}),l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:ie}),l.jsx("span",{className:"cm-stat-label",children:"Block"})]}),l.jsxs("div",{className:"cm-stat-pill",children:[l.jsx("span",{className:"cm-stat-num",children:t.length}),l.jsx("span",{className:"cm-stat-label",children:"Sessions"})]})]}),l.jsxs("div",{className:"cm-view-toggle",children:[l.jsx("button",{className:`cm-toggle-btn ${L?"":"active"}`,onClick:()=>F(!1),children:"Sessions"}),l.jsx("button",{className:`cm-toggle-btn ${L?"active":""}`,onClick:()=>F(!0),children:"Members"})]}),!L&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"cm-tabs",children:[l.jsxs("button",{className:`cm-tab ${p==="upcoming"?"active":""}`,onClick:()=>x("upcoming"),children:["Upcoming (",ee.length,")"]}),l.jsxs("button",{className:`cm-tab ${p==="past"?"active":""}`,onClick:()=>x("past"),children:["Past (",O.length,")"]})]}),l.jsx("div",{className:"cm-sessions-list",children:Re.length===0?l.jsx("div",{className:"cm-empty",children:l.jsxs("p",{children:["No ",p," sessions"]})}):Re.map(Q=>{const de=Q.slots.filter(He=>He.status!=="available").length,fe=u?.id===Q.id,Oe=Q.date===W;return l.jsxs("button",{className:`cm-session-btn ${fe?"selected":""} ${Oe?"next":""}`,onClick:()=>{f(Q),J(!1)},children:[l.jsxs("div",{className:"cm-session-btn-left",children:[l.jsx("span",{className:"cm-session-date",children:__(Q.date)}),Oe&&l.jsx("span",{className:"cm-next-badge",children:"Next"})]}),l.jsxs("div",{className:"cm-session-btn-right",children:[l.jsxs("span",{className:"cm-session-fill",children:[de,"/8"]}),(Q.waitlist?.length||0)>0&&l.jsxs("span",{className:"cm-waitlist-count",children:["+",Q.waitlist.length," wl"]})]})]},Q.id)})}),u&&l.jsxs("div",{className:"cm-detail",children:[l.jsxs("div",{className:"cm-detail-header",children:[l.jsxs("div",{children:[l.jsx("h3",{children:__(u.date)}),l.jsxs("p",{children:[u.time," - ",u.endTime,"  ",qe,"/8 booked  ",ne," available"]})]}),!Ee&&l.jsx("button",{className:`cm-attendance-btn ${$?"active":""}`,onClick:()=>J(!$),children:$?"Done":"Attendance"})]}),l.jsx("div",{className:"cm-slots",children:u.slots.map(Q=>{const de=Q.status==="available";return l.jsxs("div",{className:`cm-slot ${de?"empty":"filled"} ${Q.attended===!0?"attended":""} ${Q.attended===!1?"no-show":""}`,children:[l.jsx("span",{className:"cm-slot-num",children:Q.slotNumber}),de?l.jsxs("div",{className:"cm-slot-empty",children:[l.jsx("span",{children:"Available"}),Ee&&l.jsx(m4,{members:Ge,onSelect:fe=>pe(Q.slotNumber,fe),disabled:S})]}):l.jsxs("div",{className:"cm-slot-filled",children:[l.jsxs("div",{className:"cm-slot-info",children:[l.jsx("span",{className:"cm-slot-name",children:Q.memberName}),l.jsx("span",{className:`cm-type-badge ${gf(Q.memberType)}`,children:pf(Q.memberType)})]}),l.jsxs("div",{className:"cm-slot-actions",children:[$&&Q.attended===void 0&&l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"cm-attend-yes",onClick:()=>q(Q.slotNumber,!0),disabled:S,title:"Attended",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsx("button",{className:"cm-attend-no",onClick:()=>q(Q.slotNumber,!1),disabled:S,title:"No-show",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),Q.attended===!0&&l.jsx("span",{className:"cm-attended-label",children:"Attended"}),Q.attended===!1&&l.jsx("span",{className:"cm-noshow-label",children:"No-show"}),Ee&&l.jsx("button",{className:"cm-remove-btn",onClick:()=>X(Q.slotNumber),disabled:S,title:"Remove from slot",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]})]})]},Q.slotNumber)})}),(u.waitlist?.length||0)>0&&l.jsxs("div",{className:"cm-waitlist",children:[l.jsxs("h4",{children:["Waitlist (",u.waitlist.length,")"]}),u.waitlist.map((Q,de)=>l.jsxs("div",{className:"cm-waitlist-row",children:[l.jsxs("span",{className:"cm-wl-pos",children:["#",de+1]}),l.jsx("span",{className:"cm-wl-name",children:Q.memberName}),l.jsx("span",{className:`cm-type-badge ${gf(Q.memberType)}`,children:pf(Q.memberType)}),Ee&&l.jsx("button",{className:"cm-wl-remove",onClick:()=>xe(Q.memberId),disabled:S,children:"Remove"})]},Q.memberId))]})]})]}),L&&l.jsxs("div",{className:"cm-members",children:[he.length>0&&l.jsxs("div",{className:"cm-ban-alert",children:[l.jsxs("h4",{children:["Currently Banned (",he.length,")"]}),he.map(Q=>{const de=Q.circuitBanUntil?.toDate?Q.circuitBanUntil.toDate():new Date(Q.circuitBanUntil);return l.jsxs("div",{className:"cm-ban-row",children:[l.jsxs("div",{className:"cm-ban-info",children:[l.jsx("span",{className:"cm-ban-name",children:Q.name}),l.jsxs("span",{className:"cm-ban-until",children:["Until ",de.toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]}),l.jsx("button",{className:"cm-lift-ban-btn",onClick:()=>H(Q.id,Q.name),disabled:S,children:"Lift Ban"})]},Q.id)})]}),l.jsx("div",{className:"cm-members-list",children:a.length===0?l.jsxs("div",{className:"cm-empty",children:[l.jsx("p",{children:"No circuit members yet"}),l.jsx("span",{children:"Add members via the Clients page"})]}):a.map(Q=>{const de=Q.circuitStrikes||0,fe=he.some(Oe=>Oe.id===Q.id);return l.jsxs("div",{className:`cm-member-card ${fe?"banned":""}`,children:[l.jsxs("div",{className:"cm-member-top",children:[l.jsx("span",{className:"cm-member-name",children:Q.name}),l.jsx("span",{className:`cm-type-badge ${gf(Q.clientType)}`,children:pf(Q.clientType)})]}),l.jsxs("div",{className:"cm-member-bottom",children:[l.jsxs("div",{className:"cm-strikes",children:[[0,1,2].map(Oe=>l.jsx("span",{className:`cm-strike-dot ${Oe<de?"active":""}`},Oe)),l.jsxs("span",{className:"cm-strike-text",children:[de,"/3 strikes"]})]}),l.jsxs("div",{className:"cm-member-actions",children:[fe&&l.jsx("button",{className:"cm-small-btn ban",onClick:()=>H(Q.id,Q.name),disabled:S,children:"Lift Ban"}),de>0&&!fe&&l.jsx("button",{className:"cm-small-btn reset",onClick:()=>V(Q.id,Q.name),disabled:S,children:"Reset"})]})]})]},Q.id)})})]}),A&&l.jsx("div",{className:`cm-toast ${A.type}`,children:l.jsx("span",{children:A.message})})]})}function m4({members:s,onSelect:e,disabled:t}){const[i,a]=z.useState(!1),[c,u]=z.useState(""),f=s.filter(p=>p.name.toLowerCase().includes(c.toLowerCase()));return s.length===0?null:l.jsxs("div",{className:"cm-add-dropdown",children:[l.jsx("button",{className:"cm-add-trigger",onClick:()=>a(!i),disabled:t,children:"+ Add"}),i&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"cm-dropdown-backdrop",onClick:()=>{a(!1),u("")}}),l.jsxs("div",{className:"cm-dropdown-menu",children:[s.length>4&&l.jsx("input",{type:"text",className:"cm-dropdown-search",placeholder:"Search...",value:c,onChange:p=>u(p.target.value),autoFocus:!0}),l.jsxs("div",{className:"cm-dropdown-list",children:[f.map(p=>l.jsxs("button",{className:"cm-dropdown-item",onClick:()=>{e(p),a(!1),u("")},children:[l.jsx("span",{children:p.name}),l.jsx("span",{className:`cm-type-badge sm ${gf(p.clientType)}`,children:pf(p.clientType)})]},p.id)),f.length===0&&l.jsx("div",{className:"cm-dropdown-empty",children:"No members found"})]})]})]})]})}function p4(){const[s,e]=z.useState(()=>localStorage.getItem("adminActiveView")||"schedule"),t=ne=>{e(ne),localStorage.setItem("adminActiveView",ne)},[i,a]=z.useState(0),[c,u]=z.useState(!1),[f,p]=z.useState([]),[x,S]=z.useState(null),[C,A]=z.useState(null),{currentUser:B,logout:L,isAdmin:F,loading:$}=Es(),{isDark:J,toggleTheme:Y}=Kl(),ce=Ir(),X=z.useRef(0),pe=z.useRef(!1);z.useRef(null);const xe=z.useCallback((ne,Ee="info")=>{A({message:ne,type:Ee}),setTimeout(()=>A(null),4e3)},[]);z.useEffect(()=>{!$&&(!B||!F)&&ce("/")},[B,F,$,ce]),z.useEffect(()=>{B&&F&&q()},[B,F]);const q=async()=>{try{const ne=ji(Jt(Xe,"rescheduleRequests"),ci("status","==","pending")),Le=(await xn(ne)).docs.map(Ae=>({id:Ae.id,...Ae.data()}));Le.sort((Ae,Ge)=>{const M=Ae.createdAt?.toDate?Ae.createdAt.toDate():new Date(0);return(Ge.createdAt?.toDate?Ge.createdAt.toDate():new Date(0))-M}),p(Le)}catch(ne){console.error("Error fetching reschedule requests:",ne)}};z.useEffect(()=>{(async()=>{if(!(!B||!F))try{const[Ee,Le]=await Promise.all([xn(Jt(Xe,"clients")),xn(Jt(Xe,"sessions"))]),Ae=new Set(Ee.docs.map(M=>M.id)),Ge=Le.docs.filter(M=>!Ae.has(M.data().clientId));if(Ge.length>0){console.log(`Cleaning up ${Ge.length} orphaned sessions...`);const M=Ge.map(se=>Ha(St(Xe,"sessions",se.id)));await Promise.all(M),console.log("Orphaned sessions cleaned up successfully")}}catch(Ee){console.error("Error cleaning up orphaned sessions:",Ee)}})()},[B,F]),z.useEffect(()=>{const ne=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,Ee=Ge=>{ne()<=0&&(X.current=Ge.touches[0].clientY,pe.current=!1)},Le=Ge=>{const M=ne(),ie=Ge.touches[0].clientY-X.current;if(M>5||ie<=0){pe.current=!1,a(0);return}ie>20&&M<=0&&(pe.current=!0,a(Math.min((ie-20)*.4,80)))},Ae=()=>{pe.current&&i>60?(u(!0),setTimeout(()=>{window.location.reload()},300)):a(0),pe.current=!1};return document.addEventListener("touchstart",Ee,{passive:!0}),document.addEventListener("touchmove",Le,{passive:!0}),document.addEventListener("touchend",Ae),()=>{document.removeEventListener("touchstart",Ee),document.removeEventListener("touchmove",Le),document.removeEventListener("touchend",Ae)}},[i]);const V=()=>{u(!0),setTimeout(()=>{window.location.reload()},300)},H=async()=>{try{await L(),ce("/")}catch(ne){console.error("Failed to log out:",ne)}},te=()=>{ce("/add-client")},W=ne=>new Date(ne).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"}),ee=ne=>{const[Ee,Le]=ne.split(":"),Ae=parseInt(Ee),Ge=Ae>=12?"pm":"am";return`${Ae>12?Ae-12:Ae===0?12:Ae}:${Le}${Ge}`},O=async ne=>{if(window.confirm(`Approve reschedule for ${ne.clientName}?

From: ${W(ne.originalDate)} at ${ee(ne.originalTime)}
To: ${W(ne.requestedDate)} at ${ee(ne.requestedTime)}`)){S(ne.id);try{await cr(St(Xe,"sessions",ne.sessionId),{date:ne.requestedDate,time:ne.requestedTime}),await cr(St(Xe,"rescheduleRequests",ne.id),{status:"approved",respondedAt:at.now()}),p(f.filter(Ee=>Ee.id!==ne.id)),xe(`Approved reschedule for ${ne.clientName}`,"success")}catch(Ee){console.error("Error approving request:",Ee),xe("Failed to approve request","error")}S(null)}},Re=async ne=>{if(window.confirm(`Reject reschedule request from ${ne.clientName}?`)){S(ne.id);try{await cr(St(Xe,"rescheduleRequests",ne.id),{status:"rejected",respondedAt:at.now()}),p(f.filter(Ee=>Ee.id!==ne.id)),xe(`Request from ${ne.clientName} rejected`,"info")}catch(Ee){console.error("Error rejecting request:",Ee),xe("Failed to reject request","error")}S(null)}};if($)return l.jsx("div",{className:"loading",children:"Loading..."});if(!B||!F)return null;const qe=f.length;return l.jsxs("div",{className:"dashboard",children:[i>0&&l.jsxs("div",{className:"pull-indicator",style:{height:i},children:[l.jsx("div",{className:`pull-spinner ${c?"spinning":""}`,children:c?"":""}),l.jsx("span",{children:c?"Refreshing...":i>60?"Release to refresh":"Pull to refresh"})]}),l.jsxs("header",{className:"dashboard-header",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"admin-header-logo"}),l.jsx("span",{className:"admin-badge",children:"Admin"})]}),l.jsxs("nav",{className:"header-nav",children:[l.jsx("button",{className:`nav-btn ${s==="schedule"?"active":""}`,onClick:()=>t("schedule"),children:"Today"}),l.jsx("button",{className:`nav-btn ${s==="clients"?"active":""}`,onClick:()=>t("clients"),children:"Clients"}),l.jsx("button",{className:`nav-btn ${s==="calendar"?"active":""}`,onClick:()=>t("calendar"),children:"Calendar"}),l.jsxs("button",{className:`nav-btn ${s==="requests"?"active":""} ${qe>0?"has-badge":""}`,onClick:()=>t("requests"),children:["Requests",qe>0&&l.jsx("span",{className:"nav-badge",children:qe})]}),l.jsx("button",{className:`nav-btn ${s==="availability"?"active":""}`,onClick:()=>t("availability"),children:"Slots"}),l.jsx("button",{className:`nav-btn ${s==="circuits"?"active":""}`,onClick:()=>t("circuits"),children:"Circuits"})]}),l.jsxs("div",{className:"header-actions",children:[l.jsx("button",{className:"theme-toggle-btn",onClick:Y,"aria-label":J?"Switch to light mode":"Switch to dark mode",children:J?l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),l.jsx("button",{className:"refresh-btn",onClick:V,disabled:c,children:c?"":""}),l.jsx("button",{className:"logout-btn",onClick:H,children:"Log Out"})]})]}),C&&l.jsx("div",{className:"toast-container",children:l.jsxs("div",{className:`toast ${C.type}`,children:[l.jsxs("span",{className:"toast-icon",children:[C.type==="success"&&l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),C.type==="error"&&l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"})}),C.type==="info"&&l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})]}),l.jsx("span",{className:"toast-message",children:C.message})]})}),l.jsxs("main",{className:"dashboard-main",children:[s==="schedule"&&l.jsxs("div",{className:"schedule-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Schedule"})}),l.jsx(o4,{})]}),s==="clients"&&l.jsxs("div",{className:"clients-view",children:[l.jsxs("div",{className:"view-header",children:[l.jsx("h2",{children:"Clients"}),l.jsx("button",{className:"add-btn",onClick:te,children:"+ Add Client"})]}),l.jsx(e4,{})]}),s==="calendar"&&l.jsxs("div",{className:"calendar-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Calendar"})}),l.jsx(i4,{})]}),s==="requests"&&l.jsxs("div",{className:"requests-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Reschedule Requests"})}),f.length===0?l.jsxs("div",{className:"no-requests",children:[l.jsx("div",{className:"empty-icon",children:l.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"20",y:"25",width:"60",height:"50",rx:"4"}),l.jsx("path",{d:"M20 35 L50 55 L80 35"}),l.jsx("circle",{cx:"50",cy:"70",r:"3",fill:"currentColor"})]})}),l.jsx("p",{children:"No pending requests"}),l.jsx("span",{children:"When clients request to reschedule, they will appear here"})]}):l.jsx("div",{className:"requests-list",children:f.map(ne=>l.jsxs("div",{className:"request-card",children:[l.jsxs("div",{className:"request-header",children:[l.jsx("span",{className:"client-name",children:ne.clientName}),l.jsx("span",{className:"request-time",children:ne.createdAt?.toDate?ne.createdAt.toDate().toLocaleDateString("en-GB",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}):""})]}),l.jsx("div",{className:"request-details",children:l.jsxs("div",{className:"request-change",children:[l.jsxs("div",{className:"from-session",children:[l.jsx("span",{className:"label",children:"From:"}),l.jsxs("span",{className:"value",children:[W(ne.originalDate)," at ",ee(ne.originalTime)]})]}),l.jsx("div",{className:"arrow",children:""}),l.jsxs("div",{className:"to-session",children:[l.jsx("span",{className:"label",children:"To:"}),l.jsxs("span",{className:"value",children:[W(ne.requestedDate)," at ",ee(ne.requestedTime)]})]})]})}),l.jsxs("div",{className:"request-actions",children:[l.jsx("button",{className:"approve-btn",onClick:()=>O(ne),disabled:x===ne.id,children:x===ne.id?"Processing...":"Approve"}),l.jsx("button",{className:"reject-btn",onClick:()=>Re(ne),disabled:x===ne.id,children:"Reject"})]})]},ne.id))})]}),s==="availability"&&l.jsxs("div",{className:"availability-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Available Slots"})}),l.jsx(d4,{})]}),s==="circuits"&&l.jsxs("div",{className:"circuits-view",children:[l.jsx("div",{className:"view-header",children:l.jsx("h2",{children:"Circuit Management"})}),l.jsx(f4,{})]})]})]})}const g4=[{value:"block",label:"Block (1-2-1)"},{value:"circuit_vip",label:"Circuit VIP"},{value:"circuit_dropin",label:"Circuit Drop-in"}];function v4(){const[s,e]=z.useState({name:"",email:"",password:"",clientType:"block",circuitAccess:!1,weeksInBlock:"",numberOfSessions:"",sessionDuration:"45",startDate:"",endDate:""}),[t,i]=z.useState(!1),[a,c]=z.useState(""),{currentUser:u,isAdmin:f,loading:p}=Es(),x=Ir();z.useEffect(()=>{!p&&(!u||!f)&&x("/")},[u,f,p,x]),z.useEffect(()=>{if(s.startDate&&s.weeksInBlock){const L=new Date(s.startDate),F=parseInt(s.weeksInBlock);if(!isNaN(F)&&F>0){const $=new Date(L);$.setDate($.getDate()+F*7);const J=$.getFullYear(),Y=($.getMonth()+1).toString().padStart(2,"0"),ce=$.getDate().toString().padStart(2,"0");e(X=>({...X,endDate:`${J}-${Y}-${ce}`}))}}},[s.startDate,s.weeksInBlock]);const S=L=>{const{name:F,value:$,type:J,checked:Y}=L.target;e(ce=>({...ce,[F]:J==="checkbox"?Y:$}))},C=async L=>{L.preventDefault(),c(""),i(!0);try{const F=await Ax(Vf,s.email.trim().toLowerCase(),s.password);await iv(Vf);const $=s.clientType==="block",J={uid:F.user.uid,name:s.name.trim(),email:s.email.trim().toLowerCase(),clientType:s.clientType,status:"active",createdAt:at.now()};$?(J.circuitAccess=s.circuitAccess,J.weeksInBlock=parseInt(s.weeksInBlock),J.totalSessions=parseInt(s.numberOfSessions),J.sessionsRemaining=parseInt(s.numberOfSessions),J.sessionDuration=parseInt(s.sessionDuration),J.startDate=at.fromDate(new Date(s.startDate)),J.endDate=at.fromDate(new Date(s.endDate))):(J.circuitStrikes=0,J.circuitBanUntil=null),await Pc(Jt(Xe,"clients"),J),x("/dashboard")}catch(F){console.error("Error adding client:",F),F.code==="auth/email-already-in-use"?c("This email is already registered."):F.code==="auth/weak-password"?c("Password should be at least 6 characters."):c("Failed to add client. Please try again."),i(!1)}},A=()=>{x("/dashboard")};if(p)return l.jsx("div",{className:"loading",children:"Loading..."});if(!u||!f)return null;const B=s.clientType==="block";return l.jsxs("div",{className:"add-client-page",children:[l.jsxs("header",{className:"page-header",children:[l.jsx("button",{className:"back-btn",onClick:A,children:" Back"}),l.jsx("h1",{children:"Add New Client"})]}),l.jsxs("main",{className:"page-content",children:[a&&l.jsx("div",{className:"form-error",children:a}),l.jsxs("form",{onSubmit:C,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Client Type"}),l.jsx("div",{className:"client-type-toggle",children:g4.map(L=>l.jsx("button",{type:"button",className:`type-btn ${s.clientType===L.value?"active":""}`,onClick:()=>e(F=>({...F,clientType:L.value})),children:L.label},L.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"name",children:"Client Name"}),l.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:S,placeholder:"John Smith",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Client Email"}),l.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:S,placeholder:"john@example.com",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"password",children:"Client Portal Password"}),l.jsx("input",{type:"text",id:"password",name:"password",value:s.password,onChange:S,placeholder:"Set a password for client login",minLength:"6",required:!0}),l.jsx("span",{className:"helper-text",children:"Minimum 6 characters. Share this with your client."})]}),B&&l.jsx("div",{className:"form-group",children:l.jsxs("label",{className:"circuit-toggle-label",children:[l.jsx("input",{type:"checkbox",name:"circuitAccess",checked:s.circuitAccess,onChange:S}),l.jsx("span",{children:"Also allow Circuit Class access"})]})}),B&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"weeksInBlock",children:"Weeks in Block"}),l.jsx("input",{type:"number",id:"weeksInBlock",name:"weeksInBlock",value:s.weeksInBlock,onChange:S,placeholder:"8",min:"1",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"numberOfSessions",children:"Number of Sessions"}),l.jsx("input",{type:"number",id:"numberOfSessions",name:"numberOfSessions",value:s.numberOfSessions,onChange:S,placeholder:"16",min:"1",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"sessionDuration",children:"Session Duration"}),l.jsxs("select",{id:"sessionDuration",name:"sessionDuration",value:s.sessionDuration,onChange:S,required:!0,children:[l.jsx("option",{value:"30",children:"30 minutes"}),l.jsx("option",{value:"45",children:"45 minutes"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"startDate",children:"Start Date"}),l.jsx("input",{type:"date",id:"startDate",name:"startDate",value:s.startDate,onChange:S,required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"endDate",children:"End Date (auto-calculated)"}),l.jsx("input",{type:"date",id:"endDate",name:"endDate",value:s.endDate,onChange:S,required:!0}),l.jsx("span",{className:"helper-text",children:"Calculated from start date + weeks"})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",className:"cancel-btn",onClick:A,children:"Cancel"}),l.jsx("button",{type:"submit",className:"submit-btn",disabled:t,children:t?"Saving...":"Save Client"})]})]})]})]})}const jw={monday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},tuesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},wednesday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},thursday:{morning:{start:"06:15",end:"12:00"},afternoon:{start:"15:00",end:"20:00"}},friday:{morning:{start:"08:00",end:"10:00"},afternoon:null}},y4=["monday","tuesday","wednesday","thursday","friday"],Pa=s=>{const e=s.getFullYear(),t=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0");return`${e}-${t}-${i}`},Bg=s=>{const[e,t]=s.split(":").map(Number);return e*60+t},Bf=(s,e)=>{const t=Bg(s)+e,i=Math.floor(t/60),a=t%60;return`${i.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},b4=s=>{const e=jw[s];if(!e)return[];const t=[];if(e.morning){let i=e.morning.start;for(;i<e.morning.end;)t.push({time:i,period:"morning"}),i=Bf(i,15)}if(e.afternoon){let i=e.afternoon.start;for(;i<e.afternoon.end;)t.push({time:i,period:"afternoon"}),i=Bf(i,15)}return t},_4=s=>{const e=s.getDay();return e>=1&&e<=5},Rw=s=>{const e=s.getDay();return e===0||e===6?null:y4[e-1]},x4=(s,e,t,i,a,c=null,u=[])=>{const f=Rw(s);if(!f)return!1;const p=Pa(s);if(a.some(Y=>Y.date===p))return!1;const x=Math.ceil(t/15);for(let Y=0;Y<x;Y++){const ce=Bf(e,Y*15);if(u.some(X=>X.date===p&&X.time===ce))return!1}const S=new Date,C=Pa(S);if(p<C)return!1;if(p===C){const Y=`${S.getHours().toString().padStart(2,"0")}:${S.getMinutes().toString().padStart(2,"0")}`;if(e<Y)return!1}const A=Bf(e,t),B=jw[f],L=B.morning&&e>=B.morning.start&&e<B.morning.end,F=B.afternoon&&e>=B.afternoon.start&&e<B.afternoon.end,$=B.morning&&A<=B.morning.end,J=B.afternoon&&A<=B.afternoon.end;if(L&&!$||F&&!J||!L&&!F)return!1;for(const Y of i){if(c&&Y.id===c||Y.date!==p)continue;const ce=Bg(Y.time),X=ce+(Y.duration||45),pe=Bg(e),xe=pe+t;if(pe<X&&xe>ce)return!1}return!0},w4=(s,e,t,i,a=null,c=[])=>{const u=Rw(s);return u?b4(u).filter(p=>x4(s,p.time,e,t,i,a,c)):[]};function E4(){const[s,e]=z.useState([]),[t,i]=z.useState([]),[a,c]=z.useState([]),[u,f]=z.useState([]),[p,x]=z.useState([]),[S,C]=z.useState(!0),[A,B]=z.useState(null),[L,F]=z.useState(!1),[$,J]=z.useState(null),[Y,ce]=z.useState(null),[X,pe]=z.useState(null),[xe,q]=z.useState([]),[V,H]=z.useState(!1),[te,W]=z.useState([]),[ee,O]=z.useState(null),[Re,qe]=z.useState(!1),[ne,Ee]=z.useState(0),Le=z.useRef(null),Ae=z.useRef(0),Ge=z.useRef(!1),[M,se]=z.useState(null),[ie,he]=z.useState(null),[Q,de]=z.useState(!1),[fe,Oe]=z.useState([]),[He,nt]=z.useState(!1),[Ve,Mt]=z.useState(null),[Zt,jt]=z.useState(null),{currentUser:Yt,isClient:xt,clientData:it,logout:Bt,loading:Ot}=Es(),{isDark:Lt,toggleTheme:br}=Kl(),Sn=Ir(),Mr=z.useCallback((Z,je="info")=>{O({message:Z,type:je}),setTimeout(()=>O(null),4e3)},[]),Pt=Z=>{const je=Z.currentTarget,We=je.querySelector(".ripple");We&&We.remove();const Qe=document.createElement("span"),ot=Math.max(je.clientWidth,je.clientHeight),lt=ot/2,bt=je.getBoundingClientRect();Qe.style.width=Qe.style.height=`${ot}px`,Qe.style.left=`${Z.clientX-bt.left-lt}px`,Qe.style.top=`${Z.clientY-bt.top-lt}px`,Qe.classList.add("ripple"),je.appendChild(Qe),setTimeout(()=>Qe.remove(),600)},Er=Z=>{Le.current&&Le.current.scrollTop===0&&(Ae.current=Z.touches[0].clientY,Ge.current=!0)},Yr=Z=>{if(!Ge.current||!Le.current)return;const We=Z.touches[0].clientY-Ae.current;We>20&&Le.current.scrollTop===0&&(Z.preventDefault(),Ee(Math.min((We-20)*.35,80)))},Qr=async()=>{ne>55&&!Re&&(qe(!0),await Lr(),Mr("Refreshed!","success"),qe(!1)),Ee(0),Ge.current=!1},Or=(Z,je)=>{const We=Z.touches[0];Z.currentTarget.dataset.startX=We.clientX,Z.currentTarget.dataset.startY=We.clientY},Ss=(Z,je)=>{const We=Z.touches[0],Qe=parseFloat(Z.currentTarget.dataset.startX),ot=parseFloat(Z.currentTarget.dataset.startY),lt=We.clientX-Qe,bt=We.clientY-ot;Math.abs(lt)>Math.abs(bt)&&Math.abs(lt)>10&&(Z.preventDefault(),lt<-50?se(je):lt>50&&se(null))};z.useEffect(()=>{!Ot&&(!Yt||!xt)&&Sn("/")},[Yt,xt,Ot,Sn]),z.useEffect(()=>{it&&Lr()},[it]),z.useEffect(()=>{if(!S&&it){const Z=setTimeout(()=>nt(!0),300);return()=>clearTimeout(Z)}},[S,it]),z.useEffect(()=>{const Z=()=>{const We=ve();if(We.length===0){Mt(null);return}const Qe=We[0],ot=new Date,bt=new Date(Qe.date+"T"+Qe.time)-ot;if(bt<=0){Mt(null);return}const Mn=Math.floor(bt/(1e3*60*60*24)),er=Math.floor(bt%(1e3*60*60*24)/(1e3*60*60)),Tr=Math.floor(bt%(1e3*60*60)/(1e3*60)),zs=Math.floor(bt%(1e3*60)/1e3);Mt({days:Mn,hours:er,minutes:Tr,seconds:zs,session:Qe})};Z();const je=setInterval(Z,1e3);return()=>clearInterval(je)},[s,S]);const Lr=async()=>{try{const Z=ji(Jt(Xe,"sessions"),ci("clientId","==",it.id)),We=(await xn(Z)).docs.map(vt=>({id:vt.id,...vt.data()}));We.sort((vt,Hn)=>vt.date!==Hn.date?vt.date.localeCompare(Hn.date):vt.time.localeCompare(Hn.time)),e(We);const Qe=await xn(Jt(Xe,"sessions"));i(Qe.docs.map(vt=>({id:vt.id,...vt.data()})));const ot=await xn(Jt(Xe,"holidays"));c(ot.docs.map(vt=>({id:vt.id,...vt.data()})));const lt=await xn(Jt(Xe,"blockedTimes"));f(lt.docs.map(vt=>({id:vt.id,...vt.data()})));const bt=ji(Jt(Xe,"rescheduleRequests"),ci("clientId","==",it.id)),er=(await xn(bt)).docs.map(vt=>({id:vt.id,...vt.data()}));W(er.filter(vt=>vt.status==="pending"));const Tr=er.filter(vt=>{if(vt.status==="pending"||!vt.respondedAt)return!1;const Hn=vt.respondedAt.toDate?vt.respondedAt.toDate():new Date(vt.respondedAt),tr=new Date;return tr.setDate(tr.getDate()-7),Hn>tr&&!vt.dismissed});x(Tr);const zs=ji(Jt(Xe,"achievements"),ci("clientId","==",it.id)),hi=await xn(zs);if(!hi.empty){const vt=hi.docs[0].data().badges||[];Oe(vt)}const os=new Date().toISOString().split("T")[0],di=await nl(St(Xe,"clients",it.id));if(di.exists()){const vt=di.data();vt.dailyQuote&&vt.dailyQuote.date===os?jt(vt.dailyQuote):jt(null)}}catch(Z){console.error("Error fetching data:",Z)}C(!1)},kn=Z=>new Date(Z).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),Jn=Z=>{const[je,We]=Z.split(":"),Qe=parseInt(je),ot=Qe>=12?"pm":"am";return`${Qe>12?Qe-12:Qe===0?12:Qe}:${We}${ot}`},zn=Z=>Z?(Z.toDate?Z.toDate():new Date(Z)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-",mn=Z=>{const je=new Date,We=Pa(je),Qe=`${je.getHours().toString().padStart(2,"0")}:${je.getMinutes().toString().padStart(2,"0")}`;return Z.date<We||Z.date===We&&Z.time<Qe},Fn=Z=>{const We=Pa(new Date);return Z.date===We&&!mn(Z)},zt=()=>s.filter(Z=>mn(Z)).length,ve=()=>s.filter(Z=>!mn(Z)),De=Z=>{he({title:"Cancel Session?",message:`Cancel your session on ${kn(Z.date)} at ${Jn(Z.time)}? This cannot be undone.`,onConfirm:async()=>{he(null),B(Z.id),se(null);try{await Ha(St(Xe,"sessions",Z.id)),e(s.filter(je=>je.id!==Z.id)),Mr("Session cancelled","success")}catch(je){console.error("Error cancelling session:",je),Mr("Failed to cancel session. Please try again.","error")}B(null)},onCancel:()=>he(null)})},rt=async()=>{try{await Bt(),Sn("/")}catch(Z){console.error("Failed to log out:",Z)}},dt=Z=>te.some(je=>je.sessionId===Z),yt=Z=>{J(Z),ce(null),pe(null),q([]),F(!0)},kt=()=>{F(!1),J(null),ce(null),pe(null),q([])},cn=()=>it.endDate?it.endDate.toDate?it.endDate.toDate():new Date(it.endDate):new Date,Dn=()=>{const Z=[],je=new Date,We=cn(),Qe=new Date(je);for(Qe.setDate(Qe.getDate()+1);Qe<=We;){if(_4(Qe)){const ot=Pa(Qe);a.some(bt=>bt.date===ot)||Z.push(new Date(Qe))}Qe.setDate(Qe.getDate()+1)}return Z},nn=Z=>{ce(Z),pe(null);const je=$?.duration||it.sessionDuration||45;let We=w4(Z,je,t,a,$?.id,u);$&&Pa(Z)===$.date&&(We=We.filter(Qe=>Qe.time!==$.time)),q(We)},Zn=async()=>{if(!(!Y||!X||!$)){H(!0);try{await Pc(Jt(Xe,"rescheduleRequests"),{sessionId:$.id,clientId:it.id,clientName:it.name,originalDate:$.date,originalTime:$.time,requestedDate:Pa(Y),requestedTime:X,duration:$.duration,status:"pending",createdAt:at.now(),respondedAt:null,dismissed:!1}),kt(),Mr("Reschedule request submitted! You'll be notified when your trainer responds.","success"),Lr()}catch(Z){console.error("Error submitting reschedule request:",Z),Mr("Failed to submit request. Please try again.","error")}H(!1)}},Kr=async Z=>{try{await cr(St(Xe,"rescheduleRequests",Z),{dismissed:!0}),x(p.filter(je=>je.id!==Z))}catch(je){console.error("Error dismissing notification:",je)}},In=()=>{const Z=ve();if(Z.length===0)return null;const je=Z[0],We=new Date,ot=new Date(je.date+"T"+je.time)-We;if(ot<=0)return null;const lt=Math.floor(ot/(1e3*60*60*24)),bt=Math.floor(ot%(1e3*60*60*24)/(1e3*60*60)),Mn=Math.floor(ot%(1e3*60*60)/(1e3*60));return{days:lt,hours:bt,minutes:Mn,session:je}};if(Ot||S)return l.jsxs("div",{className:"client-dashboard",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("div",{className:"skeleton skeleton-logo"})})}),l.jsxs("main",{className:"client-main",children:[l.jsxs("div",{className:"skeleton-welcome",children:[l.jsx("div",{className:"skeleton skeleton-title"}),l.jsx("div",{className:"skeleton skeleton-btn-small"})]}),l.jsxs("div",{className:"skeleton-actions",children:[l.jsx("div",{className:"skeleton skeleton-btn"}),l.jsx("div",{className:"skeleton skeleton-btn"})]}),l.jsx("div",{className:"skeleton skeleton-card-large"}),l.jsx("div",{className:"skeleton skeleton-card-medium"}),l.jsx("div",{className:"skeleton skeleton-card-medium"})]})]});if(!Yt||!xt||!it)return null;const qn=zt(),Sr=it.totalSessions-qn,ge=ve(),Be=L?Dn():[];In();const $e=it.totalSessions>0?qn/it.totalSessions*100:0;return l.jsxs("div",{className:"client-dashboard",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("div",{className:`pull-refresh-indicator ${ne>0?"visible":""} ${Re?"refreshing":""}`,style:{height:ne},children:[l.jsx("div",{className:`refresh-spinner ${Re?"spinning":""}`,children:l.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",children:l.jsx("path",{fill:"currentColor",d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})})}),l.jsx("span",{className:"refresh-text",children:Re?"Refreshing...":"Pull to refresh"})]}),l.jsxs("main",{className:"client-main page-transition-enter",ref:Le,onTouchStart:Er,onTouchMove:Yr,onTouchEnd:Qr,children:[l.jsxs("div",{className:"welcome-section",children:[l.jsxs("h2",{children:["Welcome, ",it.name.split(" ")[0]]}),l.jsxs("div",{className:"welcome-actions",children:[l.jsx("button",{className:"theme-toggle",onClick:br,"aria-label":Lt?"Switch to light mode":"Switch to dark mode",children:Lt?l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 3a9 9 0 109 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 01-4.4 2.26 5.403 5.403 0 01-3.14-9.8c-.44-.06-.9-.1-1.36-.1z"})}):l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37a.996.996 0 00-1.41 0 .996.996 0 000 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 000-1.41l-1.06-1.06zm1.06-10.96a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36a.996.996 0 000-1.41.996.996 0 00-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"})})}),l.jsx("button",{className:"logout-btn",onClick:rt,children:"Log Out"})]})]}),p.length>0&&l.jsx("div",{className:"notifications-section",children:p.map(Z=>l.jsxs("div",{className:`notification ${Z.status}`,children:[l.jsxs("div",{className:"notification-content",children:[l.jsx("span",{className:"notification-icon",children:Z.status==="approved"?"":""}),l.jsxs("div",{className:"notification-text",children:[l.jsx("strong",{children:Z.status==="approved"?"Reschedule Approved!":"Reschedule Declined"}),l.jsx("p",{children:Z.status==="approved"?`Your session has been moved to ${kn(Z.requestedDate)} at ${Jn(Z.requestedTime)}`:`Your request to reschedule from ${kn(Z.originalDate)} was declined. Please contact your trainer.`})]})]}),l.jsx("button",{className:"dismiss-btn",onClick:()=>Kr(Z.id),children:""})]},Z.id))}),Ve&&l.jsxs("div",{className:"ring-timer-container",children:[l.jsxs("div",{className:"ring-timer",children:[l.jsx("svg",{className:"ring-timer-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((Z,je)=>{const We=(je*6-90)*(Math.PI/180),Qe=85,ot=96,lt=100+Qe*Math.cos(We),bt=100+Qe*Math.sin(We),Mn=100+ot*Math.cos(We),er=100+ot*Math.sin(We),zs=60-Ve.seconds,hi=je<zs;return l.jsx("line",{x1:lt,y1:bt,x2:Mn,y2:er,className:`ring-tick ${hi?"elapsed":"remaining"}`,strokeWidth:je%5===0?"3":"2"},je)})}),l.jsxs("div",{className:"ring-timer-center",children:[l.jsx("div",{className:"ring-timer-logo",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),l.jsxs("div",{className:"ring-timer-countdown",children:[Ve.days>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"timer-digit",children:String(Ve.days).padStart(2,"0")}),l.jsx("span",{className:"timer-colon",children:":"})]}),l.jsx("span",{className:"timer-digit",children:String(Ve.hours).padStart(2,"0")}),l.jsx("span",{className:"timer-colon",children:":"}),l.jsx("span",{className:"timer-digit",children:String(Ve.minutes).padStart(2,"0")}),l.jsx("span",{className:"timer-colon",children:":"}),l.jsx("span",{className:"timer-digit timer-seconds",children:String(Ve.seconds).padStart(2,"0")})]}),l.jsx("div",{className:"ring-timer-label",children:"until next session"})]})]}),l.jsxs("div",{className:"ring-timer-session-info",children:[kn(Ve.session.date)," at ",Jn(Ve.session.time)]})]}),l.jsxs("div",{className:"block-info-card",children:[l.jsx("div",{className:"block-header-row",children:l.jsx("h3",{children:"Your Training Block"})}),l.jsxs("div",{className:"progress-section",children:[l.jsxs("div",{className:"progress-ring-container",children:[l.jsxs("svg",{className:"progress-ring",viewBox:"0 0 100 100",children:[l.jsx("circle",{className:"progress-ring-bg",cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8"}),l.jsx("circle",{className:`progress-ring-fill ${He?"animate":""}`,cx:"50",cy:"50",r:"42",fill:"none",strokeWidth:"8",strokeDasharray:`${2*Math.PI*42}`,strokeDashoffset:He?`${2*Math.PI*42*(1-$e/100)}`:`${2*Math.PI*42}`,strokeLinecap:"round"})]}),l.jsxs("div",{className:"progress-ring-text",children:[l.jsxs("span",{className:"progress-percent",children:[Math.round($e),"%"]}),l.jsx("span",{className:"progress-label",children:"complete"})]})]}),l.jsxs("div",{className:"progress-stats",children:[l.jsxs("div",{className:"progress-stat",children:[l.jsx("span",{className:"progress-stat-value",children:qn}),l.jsx("span",{className:"progress-stat-label",children:"Completed"})]}),l.jsxs("div",{className:"progress-stat",children:[l.jsx("span",{className:"progress-stat-value",children:Sr}),l.jsx("span",{className:"progress-stat-label",children:"Remaining"})]}),l.jsxs("div",{className:"progress-stat",children:[l.jsx("span",{className:"progress-stat-value",children:it.totalSessions}),l.jsx("span",{className:"progress-stat-label",children:"Total"})]})]})]}),l.jsxs("div",{className:"block-dates",children:[l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"Start Date"}),l.jsx("span",{className:"date-value",children:zn(it.startDate)})]}),l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"End Date"}),l.jsx("span",{className:"date-value",children:zn(it.endDate)})]}),l.jsxs("div",{className:"date-item",children:[l.jsx("span",{className:"date-label",children:"Session Duration"}),l.jsxs("span",{className:"date-value",children:[it.sessionDuration," minutes"]})]})]})]}),l.jsxs("div",{className:"quick-actions",children:[l.jsx("button",{className:"forms-btn ripple-btn",onClick:Z=>{Pt(Z),Sn("/client/forms")},children:"Forms & Questionnaires"}),l.jsx("button",{className:"tools-btn ripple-btn",onClick:Z=>{Pt(Z),Sn("/client/tools")},children:"Tools & Calculators"})]}),l.jsx("div",{className:"quick-actions",style:{marginTop:"-8px"},children:l.jsx("button",{className:"forms-btn ripple-btn",onClick:Z=>{Pt(Z),Sn("/client/personal-bests")},style:{flex:"1 1 100%"},children:"Personal Bests & Progress"})}),fe.length>0&&l.jsxs("div",{className:"achievements-card",children:[l.jsxs("div",{className:"achievements-card-header",children:[l.jsxs("div",{className:"achievements-card-title",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),l.jsx("span",{children:"Targets Achieved"})]}),l.jsx("span",{className:"achievements-card-count",children:fe.length})]}),l.jsx("div",{className:"achievements-card-list",children:[...fe].reverse().slice(0,3).map((Z,je)=>l.jsxs("div",{className:"achievements-card-item",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),l.jsx("span",{className:"achievements-card-label",children:Z.label}),l.jsx("span",{className:"achievements-card-date",children:Z.achievedMonth})]},je))}),fe.length>3&&l.jsxs("button",{className:"achievements-card-viewall",onClick:()=>Sn("/client/personal-bests"),children:["View all ",fe.length," achievements",l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]}),Zt?l.jsxs("div",{className:"daily-quote-card",children:[l.jsx("div",{className:"daily-quote-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),l.jsxs("div",{className:"daily-quote-content",children:[l.jsx("div",{className:"daily-quote-text",children:Zt.text}),l.jsxs("div",{className:"daily-quote-author",children:[" ",Zt.author]})]})]}):l.jsxs("div",{className:"daily-quote-cta",onClick:()=>Sn("/client/tools/motivation"),children:[l.jsx("div",{className:"daily-quote-cta-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),l.jsxs("div",{className:"daily-quote-cta-text",children:[l.jsx("span",{className:"daily-quote-cta-title",children:"Get More Inspiration"}),l.jsx("span",{className:"daily-quote-cta-sub",children:"Tap to get today's motivation"})]}),l.jsx("svg",{className:"daily-quote-cta-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),l.jsxs("div",{className:"sessions-section",children:[l.jsxs("h3",{children:["Upcoming Sessions (",ge.length,")"]}),ge.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:l.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"20",y:"15",width:"60",height:"70",rx:"4"}),l.jsx("line",{x1:"20",y1:"35",x2:"80",y2:"35"}),l.jsx("line",{x1:"35",y1:"15",x2:"35",y2:"35"}),l.jsx("line",{x1:"65",y1:"15",x2:"65",y2:"35"}),l.jsx("circle",{cx:"40",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),l.jsx("circle",{cx:"60",cy:"55",r:"4",fill:"currentColor",opacity:"0.3"}),l.jsx("circle",{cx:"40",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"}),l.jsx("circle",{cx:"60",cy:"70",r:"4",fill:"currentColor",opacity:"0.3"})]})}),l.jsx("h4",{children:"No upcoming sessions"}),l.jsx("p",{children:"Contact your trainer to book sessions"})]}):l.jsx("div",{className:"sessions-list",children:ge.map(Z=>l.jsxs("div",{className:`session-card-wrapper ${M===Z.id?"swiped":""}`,onTouchStart:je=>Or(je,Z.id),onTouchMove:je=>Ss(je,Z.id),children:[l.jsxs("div",{className:"session-card-swipe-actions",children:[l.jsx("button",{className:"swipe-action-btn reschedule ripple-btn",onClick:je=>{Pt(je),se(null),yt(Z)},disabled:dt(Z.id),children:"Reschedule"}),l.jsx("button",{className:"swipe-action-btn cancel ripple-btn",onClick:je=>{Pt(je),De(Z)},disabled:A===Z.id,children:"Cancel"})]}),l.jsxs("div",{className:`session-card ${Fn(Z)?"today-session":""}`,onClick:()=>M===Z.id&&se(null),children:[l.jsxs("div",{className:"session-info",children:[l.jsxs("div",{className:"session-date",children:[Fn(Z)&&l.jsx("span",{className:"today-label",children:"Today - "}),kn(Z.date)]}),l.jsxs("div",{className:"session-time",children:[Jn(Z.time)," (",Z.duration," min)"]}),dt(Z.id)&&l.jsx("div",{className:"pending-badge",children:"Reschedule pending"})]}),l.jsxs("div",{className:"session-actions",children:[l.jsx("button",{className:"reschedule-btn ripple-btn",onClick:je=>{je.stopPropagation(),Pt(je),yt(Z)},disabled:dt(Z.id),children:"Reschedule"}),l.jsx("button",{className:"cancel-btn ripple-btn",onClick:je=>{je.stopPropagation(),Pt(je),De(Z)},disabled:A===Z.id,children:A===Z.id?"Cancelling...":"Cancel"})]}),l.jsxs("div",{className:"swipe-hint",children:[l.jsx("span",{className:"swipe-hint-text",children:"Swipe"}),l.jsxs("span",{className:"swipe-hint-chevrons",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})]})]})]})]},Z.id))})]}),l.jsxs("div",{className:"completed-section",children:[l.jsxs("h3",{children:["Completed Sessions (",qn,")"]}),qn===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-state-icon",children:l.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"50",cy:"50",r:"35"}),l.jsx("path",{d:"M35 50 L45 60 L65 40",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),l.jsx("path",{d:"M50 25 L50 50 L65 55",strokeLinecap:"round",strokeLinejoin:"round"})]})}),l.jsx("h4",{children:"No completed sessions yet"}),l.jsx("p",{children:"Your completed sessions will appear here"})]}):l.jsxs("div",{className:"sessions-list completed",children:[s.filter(Z=>mn(Z)).slice(-5).reverse().map(Z=>l.jsxs("div",{className:"session-card completed",children:[l.jsxs("div",{className:"session-info",children:[l.jsx("div",{className:"session-date",children:kn(Z.date)}),l.jsx("div",{className:"session-time",children:Jn(Z.time)})]}),l.jsx("span",{className:"completed-badge",children:"Completed"})]},Z.id)),qn>5&&l.jsxs("div",{className:"more-sessions",children:["And ",qn-5," more completed sessions"]})]})]})]}),L&&$&&l.jsx("div",{className:"modal-overlay",onClick:kt,children:l.jsxs("div",{className:"reschedule-modal",onClick:Z=>Z.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h3",{children:"Reschedule Session"}),l.jsx("button",{className:"close-modal-btn",onClick:kt,children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsx("div",{className:"current-session-info",children:l.jsxs("p",{children:["Current: ",l.jsx("strong",{children:kn($.date)})," at ",l.jsx("strong",{children:Jn($.time)})]})}),l.jsxs("div",{className:"date-selection",children:[l.jsx("h4",{children:"Select New Date"}),Be.length===0?l.jsx("p",{className:"no-dates",children:"No available dates within your training block"}):l.jsx("div",{className:"dates-grid",children:Be.map((Z,je)=>l.jsxs("button",{className:`date-btn ${Y&&Pa(Y)===Pa(Z)?"selected":""}`,onClick:()=>nn(Z),children:[l.jsx("span",{className:"date-day",children:Z.toLocaleDateString("en-GB",{weekday:"short"})}),l.jsx("span",{className:"date-num",children:Z.getDate()}),l.jsx("span",{className:"date-month",children:Z.toLocaleDateString("en-GB",{month:"short"})})]},je))})]}),Y&&l.jsxs("div",{className:"time-selection",children:[l.jsx("h4",{children:"Select Time"}),xe.length===0?l.jsx("p",{className:"no-slots",children:"No available slots on this date"}):l.jsx("div",{className:"times-grid",children:xe.map((Z,je)=>l.jsx("button",{className:`time-btn ${X===Z.time?"selected":""} ${Z.period}`,onClick:()=>pe(Z.time),children:Jn(Z.time)},je))})]})]}),l.jsxs("div",{className:"modal-footer",children:[l.jsx("button",{className:"cancel-modal-btn",onClick:kt,children:"Cancel"}),l.jsx("button",{className:"submit-reschedule-btn",onClick:Zn,disabled:!Y||!X||V,children:V?"Submitting...":"Request Reschedule"})]})]})}),ee&&l.jsxs("div",{className:`toast-notification ${ee.type}`,children:[l.jsx("span",{className:"toast-icon",children:ee.type==="success"?l.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):ee.type==="error"?l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]}):l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),l.jsx("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"})]})}),l.jsx("span",{className:"toast-message",children:ee.message}),l.jsx("button",{className:"toast-close",onClick:()=>O(null),children:""})]}),ie&&l.jsx("div",{className:"confirm-modal-overlay",onClick:ie.onCancel,children:l.jsxs("div",{className:"confirm-modal",onClick:Z=>Z.stopPropagation(),children:[l.jsx("h3",{children:ie.title}),l.jsx("p",{children:ie.message}),l.jsxs("div",{className:"confirm-modal-actions",children:[l.jsx("button",{className:"confirm-cancel-btn ripple-btn",onClick:Z=>{Pt(Z),ie.onCancel()},children:"Keep Session"}),l.jsx("button",{className:"confirm-btn ripple-btn",onClick:Z=>{Pt(Z),ie.onConfirm()},children:"Yes, Cancel"})]})]})}),Q&&l.jsx("div",{className:"fab-backdrop",onClick:()=>de(!1)}),l.jsxs("div",{className:`fab-container ${Q?"open":""}`,children:[l.jsx("button",{className:`fab-main ripple-btn ${Q?"open":""}`,onClick:Z=>{Pt(Z),de(!Q)},"aria-label":"Quick actions",children:l.jsx("span",{className:"fab-icon",children:"+"})}),l.jsxs("div",{className:"fab-actions",children:[l.jsxs("button",{className:"fab-action ripple-btn",onClick:Z=>{Pt(Z),de(!1),Sn("/client/tools")},children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),"Tools & Calculators"]}),l.jsxs("button",{className:"fab-action ripple-btn",onClick:Z=>{Pt(Z),de(!1),Sn("/client/forms")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.jsx("polyline",{points:"14 2 14 8 20 8"}),l.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),l.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),l.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Forms & Questionnaires"]}),l.jsxs("button",{className:"fab-action ripple-btn",onClick:Z=>{Pt(Z),de(!1),Sn("/client/personal-bests")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M12 20V10"}),l.jsx("path",{d:"M18 20V4"}),l.jsx("path",{d:"M6 20v-4"})]}),"Personal Bests"]}),it?.circuitAccess&&l.jsxs("button",{className:"fab-action ripple-btn",onClick:Z=>{Pt(Z),de(!1),Sn("/client/circuit")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M12 6v6l4 2"})]}),"Circuit Classes"]}),it?.coreBuddyAccess&&l.jsxs("button",{className:"fab-action ripple-btn",onClick:Z=>{Pt(Z),de(!1),Sn("/client/core-buddy")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),"Core Buddy"]})]})]})]})}function S4(){const[s,e]=z.useState(null),[t,i]=z.useState(!1),{currentUser:a,isClient:c,clientData:u,logout:f,loading:p}=Es(),x=Ir(),[S,C]=z.useState({fitnessGoals:"",currentActivityLevel:"",exerciseHistory:"",injuries:"",medicalConditions:"",sleepHours:"",stressLevel:"",dietaryInfo:"",availability:"",additionalInfo:""}),[A,B]=z.useState({q1HeartCondition:!1,q2ChestPain:!1,q3ChestPainLastMonth:!1,q4Balance:!1,q5BoneJoint:!1,q6BloodPressure:!1,q7OtherReason:!1,additionalDetails:"",declaration:!1});z.useEffect(()=>{!p&&(!a||!c)&&x("/")},[a,c,p,x]),z.useEffect(()=>{u?.welcomeForm&&C(u.welcomeForm),u?.parqForm&&B(u.parqForm)},[u]);const L=X=>{const{name:pe,value:xe}=X.target;C(q=>({...q,[pe]:xe}))},F=X=>{const{name:pe,type:xe,checked:q,value:V}=X.target;B(H=>({...H,[pe]:xe==="checkbox"?q:V}))},$=async()=>{i(!0);try{await cr(St(Xe,"clients",u.id),{welcomeForm:{...S,completedAt:at.now()}}),alert("Welcome form saved successfully!"),e(null)}catch(X){console.error("Error saving welcome form:",X),alert("Failed to save form. Please try again.")}i(!1)},J=async()=>{if(!A.declaration){alert("Please confirm the declaration to submit the form.");return}i(!0);try{await cr(St(Xe,"clients",u.id),{parqForm:{...A,completedAt:at.now()}}),alert("PAR-Q form saved successfully!"),e(null)}catch(X){console.error("Error saving PAR-Q form:",X),alert("Failed to save form. Please try again.")}i(!1)};if(p)return l.jsx("div",{className:"client-loading",children:"Loading..."});if(!a||!c||!u)return null;const Y=!!u?.welcomeForm?.completedAt,ce=!!u?.parqForm?.completedAt;return l.jsxs("div",{className:"client-forms-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"forms-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>x("/client"),children:" Back"}),s?s==="welcome"?l.jsxs("div",{className:"form-container",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h2",{children:"Welcome Questionnaire"}),l.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),l.jsxs("div",{className:"form-body",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"What are your main fitness goals?"}),l.jsx("textarea",{name:"fitnessGoals",value:S.fitnessGoals,onChange:L,placeholder:"e.g., Lose weight, build muscle, improve endurance, increase flexibility...",rows:"3"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"How would you describe your current activity level?"}),l.jsxs("select",{name:"currentActivityLevel",value:S.currentActivityLevel,onChange:L,children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),l.jsx("option",{value:"light",children:"Lightly Active (1-2 days/week)"}),l.jsx("option",{value:"moderate",children:"Moderately Active (3-4 days/week)"}),l.jsx("option",{value:"active",children:"Very Active (5+ days/week)"}),l.jsx("option",{value:"athlete",children:"Athlete/Highly Active"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"What is your exercise history?"}),l.jsx("textarea",{name:"exerciseHistory",value:S.exerciseHistory,onChange:L,placeholder:"Describe your previous experience with exercise, sports, or training...",rows:"3"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Do you have any current or past injuries?"}),l.jsx("textarea",{name:"injuries",value:S.injuries,onChange:L,placeholder:"List any injuries that may affect your training...",rows:"2"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Do you have any medical conditions we should know about?"}),l.jsx("textarea",{name:"medicalConditions",value:S.medicalConditions,onChange:L,placeholder:"e.g., Diabetes, asthma, heart conditions...",rows:"2"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"How many hours of sleep do you typically get?"}),l.jsxs("select",{name:"sleepHours",value:S.sleepHours,onChange:L,children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"less-5",children:"Less than 5 hours"}),l.jsx("option",{value:"5-6",children:"5-6 hours"}),l.jsx("option",{value:"7-8",children:"7-8 hours"}),l.jsx("option",{value:"more-8",children:"More than 8 hours"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"How would you rate your current stress level?"}),l.jsxs("select",{name:"stressLevel",value:S.stressLevel,onChange:L,children:[l.jsx("option",{value:"",children:"Select..."}),l.jsx("option",{value:"low",children:"Low"}),l.jsx("option",{value:"moderate",children:"Moderate"}),l.jsx("option",{value:"high",children:"High"}),l.jsx("option",{value:"very-high",children:"Very High"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Tell us about your diet/nutrition"}),l.jsx("textarea",{name:"dietaryInfo",value:S.dietaryInfo,onChange:L,placeholder:"Any dietary restrictions, typical eating habits, nutrition goals...",rows:"3"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"What is your preferred training schedule/availability?"}),l.jsx("textarea",{name:"availability",value:S.availability,onChange:L,placeholder:"Days and times that work best for you...",rows:"2"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Anything else you'd like us to know?"}),l.jsx("textarea",{name:"additionalInfo",value:S.additionalInfo,onChange:L,placeholder:"Any other information that might be helpful...",rows:"3"})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),l.jsx("button",{className:"save-btn",onClick:$,disabled:t,children:t?"Saving...":"Save"})]})]})]}):l.jsxs("div",{className:"form-container",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h2",{children:"PAR-Q Health Screening"}),l.jsx("button",{className:"close-form",onClick:()=>e(null),children:""})]}),l.jsxs("div",{className:"form-body",children:[l.jsx("div",{className:"parq-intro",children:l.jsx("p",{children:"The Physical Activity Readiness Questionnaire (PAR-Q) is designed to identify those who should check with a doctor before starting an exercise program."})}),l.jsxs("div",{className:"parq-questions",children:[l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q1HeartCondition",checked:A.q1HeartCondition,onChange:F}),l.jsx("span",{children:"Has your doctor ever said that you have a heart condition and that you should only do physical activity recommended by a doctor?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q2ChestPain",checked:A.q2ChestPain,onChange:F}),l.jsx("span",{children:"Do you feel pain in your chest when you do physical activity?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q3ChestPainLastMonth",checked:A.q3ChestPainLastMonth,onChange:F}),l.jsx("span",{children:"In the past month, have you had chest pain when you were not doing physical activity?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q4Balance",checked:A.q4Balance,onChange:F}),l.jsx("span",{children:"Do you lose your balance because of dizziness or do you ever lose consciousness?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q5BoneJoint",checked:A.q5BoneJoint,onChange:F}),l.jsx("span",{children:"Do you have a bone or joint problem that could be made worse by a change in your physical activity?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q6BloodPressure",checked:A.q6BloodPressure,onChange:F}),l.jsx("span",{children:"Is your doctor currently prescribing drugs for your blood pressure or heart condition?"})]})}),l.jsx("div",{className:"parq-question",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"q7OtherReason",checked:A.q7OtherReason,onChange:F}),l.jsx("span",{children:"Do you know of any other reason why you should not do physical activity?"})]})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"If you answered YES to any questions, please provide details:"}),l.jsx("textarea",{name:"additionalDetails",value:A.additionalDetails,onChange:F,placeholder:"Please explain any conditions or concerns...",rows:"4"})]}),l.jsx("div",{className:"parq-declaration",children:l.jsxs("label",{children:[l.jsx("input",{type:"checkbox",name:"declaration",checked:A.declaration,onChange:F}),l.jsx("span",{children:"I have read, understood and completed this questionnaire. Any questions I had were answered to my full satisfaction. I confirm that the information provided is accurate to the best of my knowledge."})]})}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{className:"cancel-btn",onClick:()=>e(null),children:"Cancel"}),l.jsx("button",{className:"save-btn",onClick:J,disabled:t,children:t?"Saving...":"Submit"})]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"forms-intro",children:[l.jsx("h2",{children:"Forms"}),l.jsx("p",{children:"Please complete these forms to help us better understand your fitness journey and ensure your safety."})]}),l.jsxs("div",{className:"forms-list",children:[l.jsxs("div",{className:`form-card ${Y?"completed":""}`,children:[l.jsxs("div",{className:"form-card-info",children:[l.jsx("h3",{children:"Welcome Questionnaire"}),l.jsx("p",{children:"Tell us about your fitness goals, experience, and lifestyle."}),Y&&l.jsx("span",{className:"completed-badge",children:"Completed"})]}),l.jsx("button",{onClick:()=>e("welcome"),children:Y?"View / Edit":"Start"})]}),l.jsxs("div",{className:`form-card ${ce?"completed":""}`,children:[l.jsxs("div",{className:"form-card-info",children:[l.jsx("h3",{children:"PAR-Q Health Screening"}),l.jsx("p",{children:"Physical Activity Readiness Questionnaire for your safety."}),ce&&l.jsx("span",{className:"completed-badge",children:"Completed"})]}),l.jsx("button",{onClick:()=>e("parq"),children:ce?"View / Edit":"Start"})]})]})]})]})]})}function T4(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Es(),a=Ir();return z.useEffect(()=>{!i&&(!s||!e)&&a("/")},[s,e,i,a]),i?l.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/client"),children:" Back"}),l.jsxs("div",{className:"tools-intro",children:[l.jsx("h2",{children:"Tools"}),l.jsx("p",{children:"Use these tools to help plan your nutrition and stay motivated."})]}),l.jsxs("div",{className:"tools-grid",children:[l.jsxs("div",{className:"tool-select-card",onClick:()=>a("/client/tools/macros"),children:[l.jsx("div",{className:"tool-select-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M4 6h16M4 12h16M4 18h7"}),l.jsx("circle",{cx:"17",cy:"18",r:"3"}),l.jsx("path",{d:"M17 15v6M14 18h6"})]})}),l.jsxs("div",{className:"tool-select-info",children:[l.jsx("h3",{children:"Macro Calculator"}),l.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),l.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),l.jsxs("div",{className:"tool-select-card",onClick:()=>a("/client/tools/snacks"),children:[l.jsx("div",{className:"tool-select-icon snack-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[l.jsx("path",{d:"M18 8h1a4 4 0 010 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 01-4 4H6a4 4 0 01-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),l.jsxs("div",{className:"tool-select-info",children:[l.jsx("h3",{children:"Protein Snack Generator"}),l.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),l.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]}),l.jsxs("div",{className:"tool-select-card",onClick:()=>a("/client/tools/motivation"),children:[l.jsx("div",{className:"tool-select-icon quote-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})})}),l.jsxs("div",{className:"tool-select-info",children:[l.jsx("h3",{children:"Daily Motivation"}),l.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),l.jsx("svg",{className:"tool-select-arrow",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})]})]})]})]})}function C4(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Es(),a=Ir(),[c,u]=z.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",activityLevel:"moderate",goal:"maintain",deficitLevel:"moderate"}),[f,p]=z.useState(null),[x,S]=z.useState(!1);z.useEffect(()=>{!i&&(!s||!e)&&a("/")},[s,e,i,a]);const C=F=>{const{name:$,value:J}=F.target;u(Y=>({...Y,[$]:J})),S(!1)},A=()=>{let F=parseFloat(c.weight);c.weightUnit==="lbs"&&(F=F*.453592);let $;if(c.heightUnit==="cm")$=parseFloat(c.height);else{const qe=parseFloat(c.heightFeet)||0,ne=parseFloat(c.heightInches)||0;$=qe*30.48+ne*2.54}const J=parseInt(c.age);let Y;c.gender==="male"?Y=10*F+6.25*$-5*J+5:Y=10*F+6.25*$-5*J-161;const X=Y*{sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[c.activityLevel];let pe=X,xe,q;switch(c.goal){case"lose":pe=X-{light:250,moderate:500,harsh:750}[c.deficitLevel],xe=2.2,q=.3;break;case"build":pe=X+300,xe=2,q=.22;break;default:xe=1.8,q=.25;break}const V=c.gender==="male"?1500:1200;pe=Math.max(pe,V);const H=Math.round(F*xe),te=H*4,W=pe*q,ee=Math.round(W/9),O=pe-te-W,Re=Math.max(0,Math.round(O/4));p({bmr:Math.round(Y),tdee:Math.round(X),targetCalories:Math.round(pe),protein:H,carbs:Re,fats:ee,proteinCalories:Math.round(te),carbCalories:Math.round(O),fatCalories:Math.round(W)}),S(!0)},B=()=>{const F=c.weight&&parseFloat(c.weight)>0,$=c.age&&parseInt(c.age)>0;let J;return c.heightUnit==="cm"?J=c.height&&parseFloat(c.height)>0:J=c.heightFeet&&parseFloat(c.heightFeet)>0||c.heightInches&&parseFloat(c.heightInches)>0,F&&$&&J},L=()=>{switch(c.goal){case"lose":return"Weight Loss";case"build":return"Muscle Building";default:return"Maintenance"}};return i?l.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/client/tools"),children:" Back to Tools"}),l.jsxs("div",{className:"tool-card",children:[l.jsxs("div",{className:"tool-header",children:[l.jsx("h3",{children:"Macro Calculator"}),l.jsx("p",{children:"Calculate your daily calorie and macro targets based on your goals."})]}),l.jsxs("div",{className:"calculator-form",children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Gender"}),l.jsxs("div",{className:"toggle-group",children:[l.jsx("button",{type:"button",className:c.gender==="male"?"active":"",onClick:()=>{u(F=>({...F,gender:"male"})),S(!1)},children:"Male"}),l.jsx("button",{type:"button",className:c.gender==="female"?"active":"",onClick:()=>{u(F=>({...F,gender:"female"})),S(!1)},children:"Female"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Age"}),l.jsx("input",{type:"number",name:"age",value:c.age,onChange:C,placeholder:"Years",min:"15",max:"100"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Weight"}),l.jsxs("div",{className:"input-with-unit",children:[l.jsx("input",{type:"number",name:"weight",value:c.weight,onChange:C,placeholder:c.weightUnit==="kg"?"kg":"lbs",min:"30",max:"300"}),l.jsxs("div",{className:"unit-toggle",children:[l.jsx("button",{type:"button",className:c.weightUnit==="kg"?"active":"",onClick:()=>{u(F=>({...F,weightUnit:"kg"})),S(!1)},children:"kg"}),l.jsx("button",{type:"button",className:c.weightUnit==="lbs"?"active":"",onClick:()=>{u(F=>({...F,weightUnit:"lbs"})),S(!1)},children:"lbs"})]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Height"}),l.jsxs("div",{className:"input-with-unit",children:[c.heightUnit==="cm"?l.jsx("input",{type:"number",name:"height",value:c.height,onChange:C,placeholder:"cm",min:"100",max:"250"}):l.jsxs("div",{className:"height-imperial",children:[l.jsx("input",{type:"number",name:"heightFeet",value:c.heightFeet,onChange:C,placeholder:"ft",min:"4",max:"7"}),l.jsx("input",{type:"number",name:"heightInches",value:c.heightInches,onChange:C,placeholder:"in",min:"0",max:"11"})]}),l.jsxs("div",{className:"unit-toggle",children:[l.jsx("button",{type:"button",className:c.heightUnit==="cm"?"active":"",onClick:()=>{u(F=>({...F,heightUnit:"cm"})),S(!1)},children:"cm"}),l.jsx("button",{type:"button",className:c.heightUnit==="ft"?"active":"",onClick:()=>{u(F=>({...F,heightUnit:"ft"})),S(!1)},children:"ft/in"})]})]})]})]}),l.jsxs("div",{className:"form-group full-width",children:[l.jsx("label",{children:"Activity Level"}),l.jsxs("select",{name:"activityLevel",value:c.activityLevel,onChange:C,children:[l.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),l.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),l.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),l.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"}),l.jsx("option",{value:"veryActive",children:"Extra Active (athlete/physical job)"})]})]}),l.jsxs("div",{className:"form-group full-width",children:[l.jsx("label",{children:"Fitness Goal"}),l.jsxs("div",{className:"goal-options",children:[l.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="lose"?"active":""}`,onClick:()=>{u(F=>({...F,goal:"lose"})),S(!1)},children:[l.jsx("span",{className:"goal-icon",children:"-"}),l.jsx("span",{children:"Lose Weight"})]}),l.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="maintain"?"active":""}`,onClick:()=>{u(F=>({...F,goal:"maintain"})),S(!1)},children:[l.jsx("span",{className:"goal-icon",children:"="}),l.jsx("span",{children:"Maintain"})]}),l.jsxs("button",{type:"button",className:`goal-btn ${c.goal==="build"?"active":""}`,onClick:()=>{u(F=>({...F,goal:"build"})),S(!1)},children:[l.jsx("span",{className:"goal-icon",children:"+"}),l.jsx("span",{children:"Build Muscle"})]})]})]}),c.goal==="lose"&&l.jsxs("div",{className:"form-group full-width deficit-section",children:[l.jsx("label",{children:"Calorie Deficit Level"}),l.jsxs("div",{className:"deficit-options",children:[l.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="light"?"active":""}`,onClick:()=>{u(F=>({...F,deficitLevel:"light"})),S(!1)},children:[l.jsx("span",{className:"deficit-name",children:"Light"}),l.jsx("span",{className:"deficit-desc",children:"-250 cal/day"}),l.jsx("span",{className:"deficit-rate",children:"~0.5 lb/week"})]}),l.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="moderate"?"active":""}`,onClick:()=>{u(F=>({...F,deficitLevel:"moderate"})),S(!1)},children:[l.jsx("span",{className:"deficit-name",children:"Moderate"}),l.jsx("span",{className:"deficit-desc",children:"-500 cal/day"}),l.jsx("span",{className:"deficit-rate",children:"~1 lb/week"})]}),l.jsxs("button",{type:"button",className:`deficit-btn ${c.deficitLevel==="harsh"?"active":""}`,onClick:()=>{u(F=>({...F,deficitLevel:"harsh"})),S(!1)},children:[l.jsx("span",{className:"deficit-name",children:"Aggressive"}),l.jsx("span",{className:"deficit-desc",children:"-750 cal/day"}),l.jsx("span",{className:"deficit-rate",children:"~1.5 lb/week"})]})]})]}),l.jsx("button",{className:"calculate-btn",onClick:A,disabled:!B(),children:"Calculate Macros"})]}),x&&f&&(()=>{const F=f.proteinCalories+f.carbCalories+f.fatCalories,$=Math.round(f.proteinCalories/F*100),J=Math.round(f.carbCalories/F*100),Y=100-$-J;return l.jsxs("div",{className:"results-section",children:[l.jsxs("div",{className:"results-header",children:[l.jsx("h4",{children:"Your Daily Targets"}),l.jsx("span",{className:"goal-badge",children:L()})]}),l.jsxs("div",{className:"calories-display",children:[l.jsx("span",{className:"calories-value",children:f.targetCalories}),l.jsx("span",{className:"calories-label",children:"calories/day"})]}),l.jsxs("div",{className:"macro-percentage-bar",children:[l.jsxs("div",{className:"macro-bar-track",children:[l.jsx("div",{className:"macro-bar-segment protein",style:{width:`${$}%`},children:$>=12&&l.jsxs("span",{children:[$,"%"]})}),l.jsx("div",{className:"macro-bar-segment carbs",style:{width:`${J}%`},children:J>=12&&l.jsxs("span",{children:[J,"%"]})}),l.jsx("div",{className:"macro-bar-segment fats",style:{width:`${Y}%`},children:Y>=12&&l.jsxs("span",{children:[Y,"%"]})})]}),l.jsxs("div",{className:"macro-bar-legend",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot protein"}),"Protein ",$,"%"]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot carbs"}),"Carbs ",J,"%"]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("span",{className:"legend-dot fats"}),"Fats ",Y,"%"]})]})]}),l.jsxs("div",{className:"macros-grid",children:[l.jsxs("div",{className:"macro-card protein",style:{animationDelay:"0.1s"},children:[l.jsxs("div",{className:"macro-value",children:[f.protein,"g"]}),l.jsx("div",{className:"macro-label",children:"Protein"}),l.jsxs("div",{className:"macro-calories",children:[f.proteinCalories," cal"]})]}),l.jsxs("div",{className:"macro-card carbs",style:{animationDelay:"0.2s"},children:[l.jsxs("div",{className:"macro-value",children:[f.carbs,"g"]}),l.jsx("div",{className:"macro-label",children:"Carbs"}),l.jsxs("div",{className:"macro-calories",children:[f.carbCalories," cal"]})]}),l.jsxs("div",{className:"macro-card fats",style:{animationDelay:"0.3s"},children:[l.jsxs("div",{className:"macro-value",children:[f.fats,"g"]}),l.jsx("div",{className:"macro-label",children:"Fats"}),l.jsxs("div",{className:"macro-calories",children:[f.fatCalories," cal"]})]})]}),l.jsxs("div",{className:"results-info",children:[l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Basal Metabolic Rate (BMR)"}),l.jsxs("span",{className:"info-value",children:[f.bmr," cal"]})]}),l.jsxs("div",{className:"info-row",children:[l.jsx("span",{children:"Total Daily Energy Expenditure (TDEE)"}),l.jsxs("span",{className:"info-value",children:[f.tdee," cal"]})]})]}),l.jsx("div",{className:"results-note",children:l.jsx("p",{children:"These are estimated values. Individual results may vary based on metabolism, body composition, and other factors. Consult with your trainer for personalized guidance."})})]})})()]})]})]})}const w_=[{name:"Greek Yoghurt & Honey",protein:20,calories:180,prep:0,category:"no-prep",instructions:"Grab a pot of Greek yoghurt, drizzle with honey. Done. Go for full-fat or 0% depending on your macros."},{name:"Protein Bar",protein:20,calories:220,prep:0,category:"no-prep",instructions:"Unwrap and eat. Keep one in your bag for emergencies. Look for bars with 20g+ protein and under 5g sugar."},{name:"Beef Jerky",protein:15,calories:120,prep:0,category:"no-prep",instructions:"Open the pack and snack. Great for on the go. Check the label  some brands are loaded with sugar."},{name:"Handful of Almonds",protein:7,calories:170,prep:0,category:"no-prep",instructions:"Grab about 30g (roughly 23 almonds). Good fats and protein. Keep a bag at your desk or in your car."},{name:"Boiled Eggs (x2)",protein:12,calories:140,prep:0,category:"no-prep",instructions:"Batch boil at the start of the week  10 mins in boiling water, cool in ice water, peel and store in the fridge. Grab 2 when you need them."},{name:"String Cheese (x2)",protein:14,calories:160,prep:0,category:"no-prep",instructions:"Peel and eat. Keep a few in the fridge for quick grabs. Pair with some fruit if you want extra carbs."},{name:"Cottage Cheese Pot",protein:14,calories:110,prep:0,category:"no-prep",instructions:"Eat straight from the pot. Add a pinch of salt and pepper, or keep it sweet with a drizzle of honey."},{name:"Edamame Beans",protein:11,calories:120,prep:0,category:"no-prep",instructions:"Buy pre-cooked and shelled from the supermarket. Sprinkle with sea salt or chilli flakes. Eat cold or warm in the microwave for 1 min."},{name:"Turkey Slices (50g)",protein:12,calories:60,prep:0,category:"no-prep",instructions:"Straight from the pack. Roll up a few slices on their own or wrap around some cheese for extra protein."},{name:"Roasted Chickpeas",protein:10,calories:160,prep:0,category:"no-prep",instructions:"Buy a bag of roasted chickpeas or make a batch: drain tinned chickpeas, toss in oil and spices, roast at 200C for 25 mins. Store in a jar."},{name:"Protein Shake & Banana",protein:30,calories:280,prep:1,category:"quick",instructions:"Add one scoop of protein powder to 300ml water or milk in a shaker. Shake for 10 seconds. Eat a banana on the side."},{name:"Peanut Butter on Rice Cakes",protein:14,calories:260,prep:1,category:"quick",instructions:"Spread 1-2 tablespoons of peanut butter across 2 rice cakes. Top with sliced banana or a drizzle of honey if you want."},{name:"Greek Yoghurt & Granola",protein:22,calories:300,prep:1,category:"quick",instructions:"Scoop Greek yoghurt into a bowl. Top with a handful of granola and some berries. Use high-protein granola if you can find it."},{name:"Turkey & Cream Cheese Roll-Ups",protein:18,calories:180,prep:2,category:"quick",instructions:"Lay out 3-4 turkey slices. Spread a thin layer of cream cheese on each. Roll them up. Add cucumber or spinach inside for crunch."},{name:"Cottage Cheese & Pineapple",protein:15,calories:160,prep:1,category:"quick",instructions:"Scoop cottage cheese into a bowl, top with tinned or fresh pineapple chunks. The sweet and savoury combo works surprisingly well."},{name:"Ham & Cheese Wrap",protein:22,calories:320,prep:2,category:"quick",instructions:"Lay a tortilla flat. Add 2-3 ham slices and a slice of cheese. Add lettuce or spinach if you have it. Roll up tight and eat."},{name:"Tuna & Crackers",protein:20,calories:220,prep:2,category:"quick",instructions:"Drain a small tin of tuna, mix with a squeeze of lemon and black pepper. Spoon onto 4-5 crackers. Add hot sauce if you like it."},{name:"Protein Yoghurt Bowl",protein:25,calories:250,prep:1,category:"quick",instructions:"Mix a scoop of protein powder into Greek yoghurt until smooth. Top with berries, nuts, or a drizzle of honey."},{name:"Hummus & Veggie Sticks",protein:8,calories:180,prep:1,category:"quick",instructions:"Grab a pot of hummus and chop up carrots, cucumber, and peppers into sticks. Dip and eat. Simple."},{name:"Chocolate Milk (500ml)",protein:17,calories:340,prep:1,category:"quick",instructions:"Pour 500ml milk, stir in 2 tablespoons of chocolate protein powder or cocoa. Great post-workout  the carbs help recovery."},{name:"Peanut Butter & Apple Slices",protein:10,calories:250,prep:1,category:"quick",instructions:"Slice an apple into wedges. Dip into 1-2 tablespoons of peanut butter. Sweet, crunchy, and filling."},{name:"Overnight Oats (pre-made)",protein:18,calories:310,prep:1,category:"quick",instructions:"Prep the night before: mix 50g oats, 1 scoop protein powder, 150ml milk, and a handful of berries in a jar. Refrigerate overnight. Grab and eat cold."},{name:"Smoked Salmon on Crackers",protein:16,calories:200,prep:2,category:"quick",instructions:"Lay out 4-5 crackers. Top each with a slice of smoked salmon and a small squeeze of lemon. Add cream cheese if you want extra."},{name:"Protein Smoothie Bowl",protein:28,calories:350,prep:2,category:"quick",instructions:"Blend 1 scoop protein powder, 1 frozen banana, and a splash of milk until thick. Pour into a bowl. Top with granola, berries, and seeds."},{name:"Almond Butter & Banana Toast",protein:12,calories:280,prep:2,category:"quick",instructions:"Toast a slice of wholemeal bread. Spread with almond butter. Slice half a banana on top. Sprinkle with cinnamon."},{name:"Scrambled Eggs on Toast",protein:22,calories:320,prep:4,category:"cook",instructions:"Crack 3 eggs into a pan on medium-low heat. Stir continuously with a spatula until just set  keep them soft. Season with salt and pepper, serve on wholemeal toast."},{name:"Protein Pancake Mug Cake",protein:25,calories:280,prep:3,category:"cook",instructions:"Mix 1 scoop protein powder, 1 egg, and 2 tablespoons of oats in a mug. Microwave for 90 seconds. Top with peanut butter or berries."},{name:"Tuna Mayo on Toast",protein:24,calories:340,prep:3,category:"cook",instructions:"Drain a tin of tuna, mix with 1 tablespoon of light mayo, salt, pepper, and a squeeze of lemon. Toast 2 slices of bread. Pile the tuna on top."},{name:"Egg & Cheese Muffin",protein:18,calories:300,prep:4,category:"cook",instructions:"Fry or microwave an egg. Toast an English muffin. Layer the egg with a slice of cheese and optionally a slice of ham. Press together."},{name:"Chicken Quesadilla",protein:26,calories:380,prep:5,category:"cook",instructions:"Use leftover chicken or pre-cooked slices. Lay a tortilla in a dry pan on medium heat. Add chicken and grated cheese on one half. Fold over, cook 2 mins each side until golden and melted."},{name:"Beans on Toast",protein:16,calories:340,prep:3,category:"cook",instructions:"Heat a tin of baked beans in the microwave for 2 mins, stirring halfway. Toast 2 slices of wholemeal bread. Pour beans on top. Add grated cheese for extra protein."},{name:"Omelette (2 eggs)",protein:14,calories:180,prep:4,category:"cook",instructions:"Beat 2 eggs with salt and pepper. Pour into a hot, lightly oiled pan. Swirl to cover the base. Add fillings (cheese, ham, peppers) when the edges set. Fold in half and serve."},{name:"Protein Porridge",protein:28,calories:380,prep:4,category:"cook",instructions:"Cook 50g oats with 250ml milk in a pan or microwave (3 mins). Stir in 1 scoop of protein powder once it cools slightly. Top with banana and a drizzle of honey."},{name:"Cheese Toastie",protein:16,calories:350,prep:3,category:"cook",instructions:"Butter the outside of 2 slices of bread. Place cheese (and ham if you have it) between the unbuttered sides. Cook in a dry pan on medium heat, 2 mins each side until golden."},{name:"Egg Fried Rice (leftover rice)",protein:16,calories:360,prep:5,category:"cook",instructions:"Heat a splash of oil in a pan on high heat. Add leftover cold rice and stir-fry for 2 mins. Push to one side, crack in 2 eggs and scramble. Mix together, add soy sauce to taste."}];function N4(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Es(),a=Ir(),[c,u]=z.useState(null),[f,p]=z.useState("all"),[x,S]=z.useState(!1),C=z.useRef([]);z.useEffect(()=>{!i&&(!s||!e)&&a("/")},[s,e,i,a]);const A=$=>{const J=[...$];for(let Y=J.length-1;Y>0;Y--){const ce=Math.floor(Math.random()*(Y+1));[J[Y],J[ce]]=[J[ce],J[Y]]}return J},B=()=>{const $=f==="all"?w_:w_.filter(J=>J.category===f);C.current.length===0&&(C.current=A($)),S(!0),setTimeout(()=>{const J=C.current.pop();u(J),S(!1)},300)},L=$=>$===0?"No prep":`${$} min`,F=$=>{switch($){case"no-prep":return"Grab & Go";case"quick":return"Quick Prep";case"cook":return"Light Cook";default:return $}};return i?l.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/client/tools"),children:" Back to Tools"}),l.jsxs("div",{className:"tool-card",children:[l.jsxs("div",{className:"tool-header",children:[l.jsx("h3",{children:"Protein Snack Generator"}),l.jsx("p",{children:"Quick, easy high-protein snack ideas to fuel your training."})]}),l.jsxs("div",{className:"snack-generator",children:[l.jsx("div",{className:"snack-filters",children:[{value:"all",label:"All"},{value:"no-prep",label:"Grab & Go"},{value:"quick",label:"Quick Prep"},{value:"cook",label:"Light Cook"}].map($=>l.jsx("button",{className:`snack-filter-btn ${f===$.value?"active":""}`,onClick:()=>{p($.value),u(null),C.current=[]},children:$.label},$.value))}),c&&!x&&l.jsxs("div",{className:"snack-result",children:[l.jsx("div",{className:"snack-name",children:c.name}),l.jsxs("div",{className:"snack-details",children:[l.jsxs("div",{className:"snack-detail",children:[l.jsxs("span",{className:"snack-detail-value",children:[c.protein,"g"]}),l.jsx("span",{className:"snack-detail-label",children:"Protein"})]}),l.jsxs("div",{className:"snack-detail",children:[l.jsx("span",{className:"snack-detail-value",children:c.calories}),l.jsx("span",{className:"snack-detail-label",children:"Calories"})]}),l.jsxs("div",{className:"snack-detail",children:[l.jsx("span",{className:"snack-detail-value",children:L(c.prep)}),l.jsx("span",{className:"snack-detail-label",children:"Prep Time"})]})]}),l.jsxs("div",{className:"snack-prep-indicator",children:[l.jsx("div",{className:`prep-dot ${c.category==="no-prep"||c.category==="quick"||c.category==="cook"?"active":""}`}),l.jsx("div",{className:`prep-dot ${c.category==="quick"||c.category==="cook"?"active":""}`}),l.jsx("div",{className:`prep-dot ${c.category==="cook"?"active":""}`}),l.jsx("span",{className:"prep-indicator-label",children:F(c.category)})]}),l.jsxs("div",{className:"snack-instructions",children:[l.jsx("div",{className:"snack-instructions-label",children:"How to make it"}),l.jsx("p",{children:c.instructions})]})]}),x&&l.jsx("div",{className:"snack-result shuffling",children:l.jsx("div",{className:"snack-shuffle-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"})})})}),l.jsx("button",{className:"snack-generate-btn",onClick:B,children:c?"Give Me Another":"Give Me a Snack"})]})]})]})]})}const ng=[{text:"The only bad workout is the one that didn't happen.",author:"Unknown"},{text:"Your body can stand almost anything. It's your mind that you have to convince.",author:"Unknown"},{text:"Discipline is choosing between what you want now and what you want most.",author:"Abraham Lincoln"},{text:"The pain you feel today will be the strength you feel tomorrow.",author:"Unknown"},{text:"Don't wish for it. Work for it.",author:"Unknown"},{text:"Success isn't always about greatness. It's about consistency.",author:"Dwayne Johnson"},{text:"The harder you work, the luckier you get.",author:"Gary Player"},{text:"Fall seven times, stand up eight.",author:"Japanese Proverb"},{text:"What seems impossible today will one day become your warm-up.",author:"Unknown"},{text:"You don't have to be extreme, just consistent.",author:"Unknown"},{text:"Strength does not come from the body. It comes from the will.",author:"Unknown"},{text:"The only way to define your limits is by going beyond them.",author:"Arthur C. Clarke"},{text:"Motivation gets you started. Habit keeps you going.",author:"Jim Ryun"},{text:"If it doesn't challenge you, it doesn't change you.",author:"Fred DeVito"},{text:"Progress, not perfection.",author:"Unknown"},{text:"The best project you'll ever work on is you.",author:"Unknown"},{text:"A year from now you'll wish you had started today.",author:"Karen Lamb"},{text:"You are one workout away from a good mood.",author:"Unknown"},{text:"Push yourself, because no one else is going to do it for you.",author:"Unknown"},{text:"The body achieves what the mind believes.",author:"Unknown"},{text:"Small daily improvements are the key to staggering long-term results.",author:"Unknown"},{text:"It's not about having time. It's about making time.",author:"Unknown"},{text:"Sore today, strong tomorrow.",author:"Unknown"},{text:"Champions keep playing until they get it right.",author:"Billie Jean King"},{text:"Be stronger than your excuses.",author:"Unknown"},{text:"When you feel like quitting, think about why you started.",author:"Unknown"},{text:"The difference between try and triumph is a little umph.",author:"Marvin Phillips"},{text:"Your only limit is you.",author:"Unknown"},{text:"Believe you can and you're halfway there.",author:"Theodore Roosevelt"},{text:"Making excuses burns zero calories per hour.",author:"Unknown"},{text:"Results happen over time, not overnight. Work hard, stay consistent, and be patient.",author:"Unknown"},{text:"You don't find willpower, you create it.",author:"Unknown"},{text:"Wake up with determination. Go to bed with satisfaction.",author:"Unknown"},{text:"Sweat is just fat crying.",author:"Unknown"},{text:"Today I will do what others won't, so tomorrow I can do what others can't.",author:"Jerry Rice"},{text:"The only person you are destined to become is the person you decide to be.",author:"Ralph Waldo Emerson"},{text:"Don't count the days, make the days count.",author:"Muhammad Ali"},{text:"It never gets easier, you just get stronger.",author:"Unknown"},{text:"Suffer the pain of discipline or suffer the pain of regret.",author:"Jim Rohn"},{text:"Strive for progress, not perfection.",author:"Unknown"},{text:"Your health is an investment, not an expense.",author:"Unknown"},{text:"Action is the foundational key to all success.",author:"Pablo Picasso"},{text:"Good things come to those who sweat.",author:"Unknown"},{text:"The secret of getting ahead is getting started.",author:"Mark Twain"},{text:"No matter how slow you go, you're still lapping everyone on the couch.",author:"Unknown"},{text:"Train insane or remain the same.",author:"Unknown"},{text:"The hardest step is the first one out the door.",author:"Unknown"},{text:"Work hard in silence, let your results be the noise.",author:"Frank Ocean"},{text:"Every champion was once a contender who refused to give up.",author:"Rocky Balboa"},{text:"Take care of your body. It's the only place you have to live.",author:"Jim Rohn"},{text:"Energy and persistence conquer all things.",author:"Benjamin Franklin"},{text:"The mind is the most important muscle.",author:"Unknown"},{text:"You are stronger than you think.",author:"Unknown"},{text:"Obsessed is a word the lazy use to describe the dedicated.",author:"Unknown"},{text:"The only weight you need to lose is the weight of your doubts.",author:"Unknown"}];function A4(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Es(),a=Ir(),[c,u]=z.useState(null),[f,p]=z.useState(!0),[x,S]=z.useState(!1);z.useEffect(()=>{!i&&(!s||!e)&&a("/")},[s,e,i,a]),z.useEffect(()=>{t&&C()},[t]);const C=async()=>{try{const B=new Date().toISOString().split("T")[0],L=St(Xe,"clients",t.id),F=await nl(L);if(F.exists()){const $=F.data();$.dailyQuote&&$.dailyQuote.date===B&&u($.dailyQuote)}}catch(B){console.error("Error loading daily quote:",B)}p(!1)},A=async()=>{if(c)return;S(!0);const B=new Date().toISOString().split("T")[0];let L=[];try{const X=await nl(St(Xe,"clients",t.id));X.exists()&&(L=X.data().quoteUsedIndices||[])}catch{}L.length>=ng.length&&(L=[]);const F=ng.map((X,pe)=>pe).filter(X=>!L.includes(X)),$=Math.floor(Math.random()*F.length),J=F[$],Y=ng[J],ce={text:Y.text,author:Y.author,date:B};try{await Va(St(Xe,"clients",t.id),{dailyQuote:ce,quoteUsedIndices:[...L,J]},{merge:!0}),setTimeout(()=>{u(ce),S(!1)},300)}catch(X){console.error("Error saving daily quote:",X),S(!1)}};return i?l.jsx("div",{className:"client-loading",children:"Loading..."}):!s||!e||!t?null:l.jsxs("div",{className:"client-tools-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"tools-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>a("/client/tools"),children:" Back to Tools"}),l.jsxs("div",{className:"tool-card",children:[l.jsxs("div",{className:"tool-header",children:[l.jsx("h3",{children:"Daily Motivation"}),l.jsx("p",{children:"Get your daily dose of inspiration to keep you on track."})]}),l.jsxs("div",{className:"quote-generator",children:[f?l.jsxs("div",{className:"quote-skeleton",children:[l.jsx("div",{className:"skeleton-icon"}),l.jsx("div",{className:"skeleton-line long"}),l.jsx("div",{className:"skeleton-line medium"}),l.jsx("div",{className:"skeleton-line short"})]}):c?l.jsxs("div",{className:"quote-result",children:[l.jsx("div",{className:"quote-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),l.jsx("div",{className:"quote-text",children:c.text}),l.jsxs("div",{className:"quote-author",children:[" ",c.author]}),l.jsx("div",{className:"quote-date-note",children:"Your inspiration for today"})]}):x?l.jsx("div",{className:"quote-result shuffling",children:l.jsx("div",{className:"quote-shuffle-icon",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M12 6v6l4 2"})]})})}):l.jsxs("div",{className:"quote-empty",children:[l.jsx("div",{className:"quote-empty-graphic",children:l.jsxs("svg",{viewBox:"0 0 80 80",fill:"none",children:[l.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"var(--border-color)",strokeWidth:"2",strokeDasharray:"4 4"}),l.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",fill:"var(--color-primary)",opacity:"0.2"}),l.jsx("path",{d:"M28 48h8l4-8V28H24v12h8zm16 0h8l4-8V28H40v12h8z",stroke:"var(--color-primary)",strokeWidth:"1.5"})]})}),l.jsx("h4",{className:"quote-empty-title",children:"Your Daily Inspiration"}),l.jsx("p",{children:"Tap below to reveal today's motivational quote  a new one every day to keep you going."})]}),!c&&!f&&l.jsx("button",{className:"quote-generate-btn",onClick:A,disabled:x,children:x?"Finding your quote...":"Get Inspired"})]})]})]})]})}const Ti=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],Ml=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function j4(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Ci(s){const[e,t]=s.split("-");return new Date(parseInt(e),parseInt(t)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function ef(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),t=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(t).toFixed(0)}s`:`${parseFloat(t).toFixed(2)}s`}function E_(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function kc(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function rg(s,e){return!e||e===0?null:(s-e)/e*100}function R4({data:s,exerciseKey:e,unit:t}){if(!s||s.length<2)return l.jsx("div",{className:"pb-trend-empty",children:l.jsx("p",{children:"Not enough data for trend line yet"})});const i=s.map(F=>{const $=F.benchmarks?.[e];return $?t==="time"?$.time||0:($.weight||0)*($.reps||0):0}),a=Math.max(...i),c=Math.min(...i),u=a-c||1,f=300,p=100,x=20,S=f-x*2,C=p-x*2,A=i.map((F,$)=>{const J=x+$/(i.length-1)*S,Y=x+C-(F-c)/u*C;return{x:J,y:Y,value:F}}),B=A.map((F,$)=>`${$===0?"M":"L"} ${F.x} ${F.y}`).join(" "),L=B+` L ${A[A.length-1].x} ${x+C} L ${A[0].x} ${x+C} Z`;return l.jsxs("div",{className:"pb-trend-chart",children:[l.jsxs("svg",{viewBox:`0 0 ${f} ${p}`,preserveAspectRatio:"xMidYMid meet",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),l.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),l.jsx("path",{d:L,fill:"url(#trendGradient)"}),l.jsx("path",{d:B,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),A.map((F,$)=>l.jsx("circle",{cx:F.x,cy:F.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},$))]}),l.jsx("div",{className:"pb-trend-labels",children:s.map((F,$)=>l.jsxs("span",{className:"pb-trend-label",children:[F.month.split("-")[1],"/",F.month.split("-")[0].slice(2)]},$))})]})}function k4(){const[s,e]=z.useState("bests"),[t,i]=z.useState([]),[a,c]=z.useState(!0),[u,f]=z.useState(!1),[p,x]=z.useState(0),[S,C]=z.useState(!1),[A,B]=z.useState(!1),[L,F]=z.useState(!1),[$,J]=z.useState({}),[Y,ce]=z.useState({}),[X,pe]=z.useState({}),[xe,q]=z.useState({}),[V,H]=z.useState({}),[te,W]=z.useState(!1),[ee,O]=z.useState({}),[Re,qe]=z.useState([]),[ne,Ee]=z.useState(null),[Le,Ae]=z.useState(null),[Ge,M]=z.useState(!1),[se,ie]=z.useState(""),[he,Q]=z.useState(""),de=z.useRef(null),fe=z.useRef(0),Oe=z.useRef(0),{currentUser:He,isClient:nt,clientData:Ve,loading:Mt}=Es(),{isDark:Zt}=Kl(),jt=Ir(),Yt=z.useCallback((ge,Be="info")=>{Ae({message:ge,type:Be}),setTimeout(()=>Ae(null),4e3)},[]);z.useEffect(()=>{!Mt&&(!He||!nt)&&jt("/")},[He,nt,Mt,jt]),z.useEffect(()=>{Ve&&xt()},[Ve]);const xt=async()=>{try{const ge=ji(Jt(Xe,"personalBests"),ci("clientId","==",Ve.id)),$e=(await xn(ge)).docs.map(ot=>({id:ot.id,...ot.data()}));$e.sort((ot,lt)=>ot.month.localeCompare(lt.month)),i($e);const Z=ji(Jt(Xe,"personalBestTargets"),ci("clientId","==",Ve.id)),je=await xn(Z);if(!je.empty){const ot=je.docs[0].data();pe(ot.targets||{}),q(ot.metricTargets||{}),H(ot.targets||{}),O(ot.metricTargets||{})}const We=ji(Jt(Xe,"achievements"),ci("clientId","==",Ve.id)),Qe=await xn(We);Qe.empty||qe(Qe.docs[0].data().badges||[])}catch(ge){console.error("Error fetching personal bests:",ge)}c(!1)},it=j4(),Bt=t.find(ge=>ge.month===it),Ot=t.filter(ge=>ge.month<it),Lt=Ot.length>0?Ot[Ot.length-1]:null;z.useEffect(()=>{Bt?(J(Bt.benchmarks||{}),ce(Bt.bodyMetrics||{})):(J({}),ce({}))},[Bt?.id]);const br=async(ge,Be)=>{const $e=[];if(ge==="strength"?Ti.forEach(Z=>{const je=X[Z.key];if(!je||!je.targetValue)return;const We=Be[Z.key];if(!We)return;let Qe=0;je.targetType==="weight"?Qe=We.weight||0:je.targetType==="reps"?Qe=We.reps||0:je.targetType==="time"&&(Qe=We.time||0);const ot=je.startValue||0,lt=je.targetValue,bt=lt-ot;if((bt===0?Qe>=lt?1:0:Math.max(0,(Qe-ot)/bt))>=1&&!Re.some(Tr=>Tr.type==="strength"&&Tr.key===Z.key&&Tr.targetValue===lt)){const Tr=je.targetType==="weight"?"kg":je.targetType==="reps"?" reps":"s";$e.push({type:"strength",key:Z.key,targetType:je.targetType,targetValue:lt,achievedMonth:it,label:`${Z.name} ${lt}${Tr}`})}}):Ml.forEach(Z=>{const je=xe[Z.key];if(!je||!je.targetValue)return;const We=Be[Z.key];if(We==null)return;const Qe=je.startValue||0,ot=je.targetValue,lt=ot-Qe;(lt===0?We===ot?1:0:Math.max(0,(We-Qe)/lt))>=1&&(Re.some(er=>er.type==="metric"&&er.key===Z.key&&er.targetValue===ot)||$e.push({type:"metric",key:Z.key,targetValue:ot,achievedMonth:it,label:`${Z.name} ${ot}${Z.suffix}`}))}),$e.length>0){const Z=[...Re,...$e];await Va(St(Xe,"achievements",Ve.id),{clientId:Ve.id,badges:Z,updatedAt:at.now()}),qe(Z),Ee($e),setTimeout(()=>Ee(null),5e3)}},Sn=(ge,Be)=>{if(ge==="strength"){const $e=X[Be];return!$e||!$e.targetValue?!1:Re.some(Z=>Z.type==="strength"&&Z.key===Be&&Z.targetValue===$e.targetValue)}else{const $e=xe[Be];return!$e||!$e.targetValue?!1:Re.some(Z=>Z.type==="metric"&&Z.key===Be&&Z.targetValue===$e.targetValue)}},Mr=async()=>{f(!0);try{const ge=`${Ve.id}_${it}`,Be=Bt||{};await Va(St(Xe,"personalBests",ge),{clientId:Ve.id,month:it,benchmarks:$,bodyMetrics:Be.bodyMetrics||Y||{},createdAt:Be.createdAt||at.now(),updatedAt:at.now()}),await br("strength",$),Yt("Benchmarks saved!","success"),C(!1),await xt()}catch(ge){console.error("Error saving benchmarks:",ge),Yt("Failed to save. Please try again.","error")}f(!1)},Pt=async()=>{f(!0);try{const ge=`${Ve.id}_${it}`,Be=Bt||{};await Va(St(Xe,"personalBests",ge),{clientId:Ve.id,month:it,benchmarks:Be.benchmarks||$||{},bodyMetrics:Y,createdAt:Be.createdAt||at.now(),updatedAt:at.now()}),await br("metric",Y),Yt("Body metrics saved!","success"),B(!1),await xt()}catch(ge){console.error("Error saving metrics:",ge),Yt("Failed to save. Please try again.","error")}f(!1)},Er=(ge,Be,$e)=>{J(Z=>({...Z,[ge]:{...Z[ge],[Be]:$e===""?"":parseFloat($e)}}))},Yr=(ge,Be)=>{ce($e=>({...$e,[ge]:Be===""?"":parseFloat(Be)}))},Qr=(ge,Be,$e)=>{H(Z=>({...Z,[ge]:{...Z[ge],[Be]:Be==="targetType"?$e:$e===""?"":parseFloat($e)}}))},Or=async()=>{f(!0);try{const ge=`targets_${Ve.id}`,Be=Bt?.benchmarks||{},$e={};Ti.forEach(Z=>{if(V[Z.key]?.targetValue){const je=V[Z.key].targetType||(Z.unit==="time"?"time":"weight");let We=0;const Qe=Be[Z.key];Qe&&(je==="weight"?We=Qe.weight||0:je==="reps"?We=Qe.reps||0:je==="time"&&(We=Qe.time||0)),$e[Z.key]={targetType:je,targetValue:V[Z.key].targetValue,startValue:We}}}),await Va(St(Xe,"personalBestTargets",ge),{clientId:Ve.id,targets:$e,metricTargets:xe,updatedAt:at.now()}),pe($e),H($e),Yt("Targets saved!","success"),F(!1)}catch(ge){console.error("Error saving targets:",ge),Yt("Failed to save targets.","error")}f(!1)},Ss=(ge,Be)=>{O($e=>({...$e,[ge]:{...$e[ge],targetValue:Be===""?"":parseFloat(Be)}}))},Lr=async()=>{f(!0);try{const ge=`targets_${Ve.id}`,Be={};Ml.forEach($e=>{if(ee[$e.key]?.targetValue){const Z=Bt?.bodyMetrics?.[$e.key]||0;Be[$e.key]={targetValue:ee[$e.key].targetValue,startValue:Z}}}),await Va(St(Xe,"personalBestTargets",ge),{clientId:Ve.id,targets:X,metricTargets:Be,updatedAt:at.now()}),q(Be),O(Be),Yt("Metric targets saved!","success"),W(!1)}catch(ge){console.error("Error saving metric targets:",ge),Yt("Failed to save targets.","error")}f(!1)},kn=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){f(!0);try{const ge=St(Xe,"personalBestTargets",`targets_${Ve.id}`);await Ha(ge),pe({}),q({}),H({}),O({}),Yt("All goals have been reset","success")}catch(ge){console.error("Error resetting targets:",ge),Yt("Failed to reset goals","error")}f(!1)}},Jn=(ge,Be)=>{const $e=X[ge];if(!$e||!$e.targetValue||!Be)return null;const Z=$e.startValue||0,je=$e.targetValue;let We=0;$e.targetType==="weight"?We=Be.weight||0:$e.targetType==="reps"?We=Be.reps||0:$e.targetType==="time"&&(We=Be.time||0);const Qe=je-Z;return Qe<=0?We>=je?1:0:Math.max(0,Math.min((We-Z)/Qe,1))},zn=ge=>{const Be=xe[ge];if(!Be||!Be.targetValue)return null;const $e=Bt?.bodyMetrics?.[ge];if($e==null)return null;const Z=Be.startValue||0,je=Be.targetValue,We=je-Z;return We===0?$e===je?1:0:Math.max(0,Math.min(($e-Z)/We,1))},mn=ge=>{fe.current=ge.touches[0].clientX,Oe.current=0},Fn=ge=>{Oe.current=ge.touches[0].clientX-fe.current},zt=()=>{Oe.current<-50&&p<Ti.length-1?x(ge=>ge+1):Oe.current>50&&p>0&&x(ge=>ge-1),Oe.current=0},ve=ge=>{const Be=Bt?.bodyMetrics?.[ge],$e=Lt?.bodyMetrics?.[ge];return Be==null||$e==null?null:parseFloat((Be-$e).toFixed(2))},De=t.find(ge=>ge.month===se),rt=t.find(ge=>ge.month===he);if(Mt||a)return l.jsxs("div",{className:"pb-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"pb-main",children:[l.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),l.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!He||!nt||!Ve)return null;const dt=Ti[p],yt=Bt?.benchmarks?.[dt.key],kt=Lt?.benchmarks?.[dt.key],cn=kc(dt,yt),Dn=kc(dt,kt),nn=rg(cn,Dn),Zn=Jn(dt.key,yt),Kr=Zn!==null,In=Zn!==null&&Zn>=1,qn=Kr?Math.round(Zn*60):cn>0?15:0,Sr=X[dt.key];return l.jsxs("div",{className:"pb-page",children:[l.jsx("header",{className:"client-header",children:l.jsx("div",{className:"header-content",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"header-logo"})})}),l.jsxs("main",{className:"pb-main page-transition-enter",children:[l.jsx("button",{className:"back-btn",onClick:()=>jt(-1),children:" Back"}),l.jsxs("div",{className:"pb-intro",children:[l.jsx("h2",{children:"Personal Bests"}),l.jsx("p",{children:"Track your strength benchmarks and body measurements each month."})]}),l.jsxs("div",{className:"pb-tabs",children:[l.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),l.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),l.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&l.jsxs("div",{className:"pb-strength-section",children:[!S&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-carousel",ref:de,onTouchStart:mn,onTouchMove:Fn,onTouchEnd:zt,children:[l.jsx("div",{className:"pb-ring-container",children:l.jsxs("div",{className:"pb-ring",children:[l.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((ge,Be)=>{const $e=(Be*6-90)*(Math.PI/180),Z=85,je=96,We=100+Z*Math.cos($e),Qe=100+Z*Math.sin($e),ot=100+je*Math.cos($e),lt=100+je*Math.sin($e),bt=Be<Math.round(qn);return l.jsx("line",{x1:We,y1:Qe,x2:ot,y2:lt,className:`pb-ring-tick ${bt?In?"hit":"filled":"empty"}`,strokeWidth:Be%5===0?"3":"2"},Be)})}),l.jsxs("div",{className:"pb-ring-center",children:[l.jsx("div",{className:"pb-ring-category",children:dt.category}),l.jsxs("div",{className:"pb-ring-exercise",children:[dt.name,Sn("strength",dt.key)&&l.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),l.jsx("div",{className:"pb-ring-value",children:yt?dt.unit==="time"?ef(yt.time):E_(yt.weight,yt.reps):"-"}),nn!==null&&l.jsxs("div",{className:`pb-ring-change ${nn>=0?"positive":"negative"}`,children:[nn>=0?"+":"",nn.toFixed(1),"%"]}),nn===null&&yt&&l.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),Sr&&l.jsxs("div",{className:`pb-ring-target ${In?"hit":""}`,children:[In?"Target hit!":`${Sr.startValue||0}  ${Sr.targetValue}`," ",Sr.targetType==="weight"?"kg":Sr.targetType==="reps"?"reps":Sr.targetType==="time"?"s":"kg"]}),!Sr&&l.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})}),l.jsx("div",{className:"pb-carousel-dots",children:Ti.map((ge,Be)=>l.jsx("button",{className:`pb-dot ${Be===p?"active":""}`,onClick:()=>x(Be)},Be))}),l.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>x(ge=>Math.max(0,ge-1)),disabled:p===0,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),l.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>x(ge=>Math.min(Ti.length-1,ge+1)),disabled:p===Ti.length-1,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),l.jsxs("div",{className:"pb-trend-section",children:[l.jsx("h4",{children:"Trend"}),l.jsx(R4,{data:t,exerciseKey:dt.key,unit:dt.unit})]})]}),!S&&!L&&l.jsxs("div",{className:"pb-action-buttons",children:[l.jsx("button",{className:"pb-edit-btn",onClick:()=>C(!0),children:Bt?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),l.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>F(!0),children:Object.keys(X).length>0?"Edit Targets":"Set Targets"}),(Object.keys(X).length>0||Object.keys(xe).length>0)&&l.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:kn,disabled:u,children:"Reset All Goals"})]}),S&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsxs("h3",{children:["Benchmarks - ",Ci(it)]}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{C(!1),J(Bt?.benchmarks||{})},children:""})]}),l.jsx("div",{className:"pb-edit-body",children:Ti.map(ge=>l.jsxs("div",{className:"pb-edit-exercise",children:[l.jsx("div",{className:"pb-edit-exercise-name",children:ge.name}),ge.unit==="weight"?l.jsxs("div",{className:"pb-edit-row",children:[l.jsxs("div",{className:"pb-edit-field",children:[l.jsx("label",{children:"Weight (kg)"}),l.jsx("input",{type:"number",step:"0.5",value:$[ge.key]?.weight??"",onChange:Be=>Er(ge.key,"weight",Be.target.value),placeholder:"0"})]}),l.jsxs("div",{className:"pb-edit-field",children:[l.jsx("label",{children:"Reps"}),l.jsx("input",{type:"number",value:$[ge.key]?.reps??"",onChange:Be=>Er(ge.key,"reps",Be.target.value),placeholder:"0"})]})]}):l.jsx("div",{className:"pb-edit-row",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsx("label",{children:"Time (seconds)"}),l.jsx("input",{type:"number",step:"0.01",value:$[ge.key]?.time??"",onChange:Be=>Er(ge.key,"time",Be.target.value),placeholder:"0"})]})})]},ge.key))}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{C(!1),J(Bt?.benchmarks||{})},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:Mr,disabled:u,children:u?"Saving...":"Save"})]})]}),L&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsx("h3",{children:"Set Your Targets"}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{F(!1),H(X)},children:""})]}),l.jsxs("div",{className:"pb-edit-body",children:[l.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Ti.map(ge=>{const Be=V[ge.key]?.targetType||(ge.unit==="time"?"time":"weight"),$e=Be==="weight"?"kg":Be==="reps"?"reps":"seconds",Z=Bt?.benchmarks?.[ge.key];let je="-";return Z&&(Be==="weight"&&Z.weight?je=`${Z.weight}kg`:Be==="reps"&&Z.reps?je=`${Z.reps} reps`:Be==="time"&&Z.time&&(je=`${Z.time}s`)),l.jsxs("div",{className:"pb-edit-exercise",children:[l.jsxs("div",{className:"pb-edit-exercise-header",children:[l.jsx("div",{className:"pb-edit-exercise-name",children:ge.name}),l.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",je]})]}),ge.unit==="weight"&&l.jsxs("div",{className:"pb-target-type-toggle",children:[l.jsx("button",{type:"button",className:Be==="weight"?"active":"",onClick:()=>Qr(ge.key,"targetType","weight"),children:"Weight"}),l.jsx("button",{type:"button",className:Be==="reps"?"active":"",onClick:()=>Qr(ge.key,"targetType","reps"),children:"Reps"})]}),l.jsx("div",{className:"pb-edit-row",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsxs("label",{children:["Target (",$e,")"]}),l.jsx("input",{type:"number",step:Be==="weight"?"0.5":"1",value:V[ge.key]?.targetValue??"",onChange:We=>Qr(ge.key,"targetValue",We.target.value),placeholder:"0"})]})})]},ge.key)})]}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{F(!1),H(X)},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:Or,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&l.jsxs("div",{className:"pb-metrics-section",children:[!A&&!te&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"pb-metrics-card",children:[l.jsx("h3",{children:"Body Measurements"}),l.jsx("p",{className:"pb-metrics-month",children:Ci(it)}),l.jsx("div",{className:"pb-metrics-list",children:Ml.map(ge=>{const Be=Bt?.bodyMetrics?.[ge.key],$e=ve(ge.key),Z=xe[ge.key],je=zn(ge.key),We=je!==null&&je>=1;return l.jsxs("div",{className:"pb-metric-row",children:[l.jsxs("div",{className:"pb-metric-top",children:[l.jsxs("div",{className:"pb-metric-left",children:[l.jsxs("span",{className:"pb-metric-name",children:[ge.name,Sn("metric",ge.key)&&l.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),Z&&l.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",Z.targetValue," ",ge.suffix]})]}),l.jsxs("div",{className:"pb-metric-values",children:[l.jsx("span",{className:"pb-metric-current",children:Be!=null?`${Be} ${ge.suffix}`:"-"}),$e!==null&&l.jsxs("span",{className:`pb-metric-change ${$e>0?"up":$e<0?"down":"same"}`,children:[$e>0?"+":"",$e," ",ge.suffix]})]})]}),je!==null&&l.jsxs("div",{className:"pb-metric-progress",children:[l.jsx("div",{className:"pb-metric-bar",children:l.jsx("div",{className:`pb-metric-bar-fill ${We?"hit":""}`,style:{width:`${Math.round(je*100)}%`}})}),l.jsx("span",{className:`pb-metric-percent ${We?"hit":""}`,children:We?"Hit!":`${Math.round(je*100)}%`})]})]},ge.key)})})]}),l.jsxs("div",{className:"pb-action-buttons",children:[l.jsx("button",{className:"pb-edit-btn",onClick:()=>B(!0),children:Bt?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),l.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>W(!0),children:Object.keys(xe).length>0?"Edit Targets":"Set Targets"}),(Object.keys(X).length>0||Object.keys(xe).length>0)&&l.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:kn,disabled:u,children:"Reset All Goals"})]})]}),A&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsxs("h3",{children:["Measurements - ",Ci(it)]}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),ce(Bt?.bodyMetrics||{})},children:""})]}),l.jsx("div",{className:"pb-edit-body",children:Ml.map(ge=>l.jsx("div",{className:"pb-edit-metric",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsxs("label",{children:[ge.name," (",ge.suffix,")"]}),l.jsx("input",{type:"number",step:"0.1",value:Y[ge.key]??"",onChange:Be=>Yr(ge.key,Be.target.value),placeholder:"0"})]})},ge.key))}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),ce(Bt?.bodyMetrics||{})},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:Pt,disabled:u,children:u?"Saving...":"Save"})]})]}),te&&l.jsxs("div",{className:"pb-edit-card",children:[l.jsxs("div",{className:"pb-edit-header",children:[l.jsx("h3",{children:"Body Metric Targets"}),l.jsx("button",{className:"pb-edit-close",onClick:()=>{W(!1),O(xe)},children:""})]}),l.jsxs("div",{className:"pb-edit-body",children:[l.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),Ml.map(ge=>{const Be=Bt?.bodyMetrics?.[ge.key];return l.jsxs("div",{className:"pb-edit-exercise",children:[l.jsxs("div",{className:"pb-edit-exercise-header",children:[l.jsx("div",{className:"pb-edit-exercise-name",children:ge.name}),l.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",Be!=null?`${Be} ${ge.suffix}`:"-"]})]}),l.jsx("div",{className:"pb-edit-row",children:l.jsxs("div",{className:"pb-edit-field full",children:[l.jsxs("label",{children:["Target (",ge.suffix,")"]}),l.jsx("input",{type:"number",step:"0.1",value:ee[ge.key]?.targetValue??"",onChange:$e=>Ss(ge.key,$e.target.value),placeholder:"0"})]})})]},ge.key)})]}),l.jsxs("div",{className:"pb-edit-actions",children:[l.jsx("button",{className:"pb-cancel-btn",onClick:()=>{W(!1),O(xe)},children:"Cancel"}),l.jsx("button",{className:"pb-save-btn",onClick:Lr,disabled:u,children:u?"Saving...":"Save Targets"})]})]})]}),s==="history"&&l.jsx("div",{className:"pb-history-section",children:t.length===0?l.jsxs("div",{className:"pb-empty",children:[l.jsx("h4",{children:"No records yet"}),l.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):l.jsxs(l.Fragment,{children:[Re.length>0&&l.jsxs("div",{className:"pb-achievements-wall",children:[l.jsxs("h4",{className:"pb-achievements-wall-title",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),l.jsx("div",{className:"pb-achievements-list",children:[...Re].reverse().map((ge,Be)=>l.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${Be*.05}s`},children:[l.jsx("div",{className:"pb-achievement-star",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),l.jsxs("div",{className:"pb-achievement-info",children:[l.jsx("span",{className:"pb-achievement-label",children:ge.label}),l.jsx("span",{className:"pb-achievement-date",children:Ci(ge.achievedMonth)})]})]},Be))})]}),l.jsx("div",{className:"pb-history-controls",children:l.jsx("button",{className:`pb-compare-toggle ${Ge?"active":""}`,onClick:()=>{M(!Ge),!Ge&&t.length>=2&&(ie(t[0].month),Q(t[t.length-1].month))},children:Ge?"Back to Timeline":"Compare Months"})}),Ge?l.jsxs("div",{className:"pb-compare",children:[l.jsxs("div",{className:"pb-compare-selectors",children:[l.jsxs("div",{className:"pb-compare-select",children:[l.jsx("label",{children:"From"}),l.jsx("select",{value:se,onChange:ge=>ie(ge.target.value),children:t.map(ge=>l.jsx("option",{value:ge.month,children:Ci(ge.month)},ge.month))})]}),l.jsx("div",{className:"pb-compare-vs",children:"vs"}),l.jsxs("div",{className:"pb-compare-select",children:[l.jsx("label",{children:"To"}),l.jsx("select",{value:he,onChange:ge=>Q(ge.target.value),children:t.map(ge=>l.jsx("option",{value:ge.month,children:Ci(ge.month)},ge.month))})]})]}),De&&rt&&l.jsxs("div",{className:"pb-compare-results",children:[l.jsxs("div",{className:"pb-compare-group",children:[l.jsx("h4",{children:"Strength Benchmarks"}),l.jsxs("div",{className:"pb-compare-table",children:[l.jsxs("div",{className:"pb-compare-header-row",children:[l.jsx("span",{children:"Exercise"}),l.jsx("span",{children:Ci(se).split(" ")[0]}),l.jsx("span",{children:Ci(he).split(" ")[0]}),l.jsx("span",{children:"Change"})]}),Ti.map(ge=>{const Be=De.benchmarks?.[ge.key],$e=rt.benchmarks?.[ge.key],Z=kc(ge,Be),je=kc(ge,$e),We=rg(je,Z);return l.jsxs("div",{className:"pb-compare-row",children:[l.jsx("span",{className:"pb-compare-name",children:ge.name}),l.jsx("span",{className:"pb-compare-val",children:Be?ge.unit==="time"?ef(Be.time):`${Be.weight}x${Be.reps}`:"-"}),l.jsx("span",{className:"pb-compare-val",children:$e?ge.unit==="time"?ef($e.time):`${$e.weight}x${$e.reps}`:"-"}),l.jsx("span",{className:`pb-compare-change ${We!==null?We>=0?"positive":"negative":""}`,children:We!==null?`${We>=0?"+":""}${We.toFixed(1)}%`:"-"})]},ge.key)})]})]}),l.jsxs("div",{className:"pb-compare-group",children:[l.jsx("h4",{children:"Body Measurements"}),l.jsxs("div",{className:"pb-compare-table",children:[l.jsxs("div",{className:"pb-compare-header-row",children:[l.jsx("span",{children:"Measurement"}),l.jsx("span",{children:Ci(se).split(" ")[0]}),l.jsx("span",{children:Ci(he).split(" ")[0]}),l.jsx("span",{children:"Change"})]}),Ml.map(ge=>{const Be=De.bodyMetrics?.[ge.key],$e=rt.bodyMetrics?.[ge.key],Z=Be!=null&&$e!=null?parseFloat(($e-Be).toFixed(2)):null;return l.jsxs("div",{className:"pb-compare-row",children:[l.jsx("span",{className:"pb-compare-name",children:ge.name}),l.jsx("span",{className:"pb-compare-val",children:Be!=null?`${Be}`:"-"}),l.jsx("span",{className:"pb-compare-val",children:$e!=null?`${$e}`:"-"}),l.jsx("span",{className:`pb-compare-change ${Z!==null?Z>0?"positive":Z<0?"negative":"neutral":""}`,children:Z!==null?`${Z>0?"+":""}${Z} ${ge.suffix}`:"-"})]},ge.key)})]})]})]})]}):l.jsx("div",{className:"pb-timeline",children:[...t].reverse().map((ge,Be)=>{const $e=t.find(Z=>Z.month<ge.month&&t.indexOf(Z)===t.indexOf(ge)-1)||t.filter(Z=>Z.month<ge.month).pop();return l.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${Be*.05}s`},children:[l.jsx("div",{className:"pb-timeline-dot"}),l.jsxs("div",{className:"pb-timeline-card",children:[l.jsx("h4",{children:Ci(ge.month)}),ge.benchmarks&&Object.keys(ge.benchmarks).length>0&&l.jsxs("div",{className:"pb-timeline-group",children:[l.jsx("h5",{children:"Strength Benchmarks"}),Ti.map(Z=>{const je=ge.benchmarks[Z.key];if(!je)return null;const We=$e?.benchmarks?.[Z.key],Qe=kc(Z,je),ot=kc(Z,We),lt=rg(Qe,ot);return l.jsxs("div",{className:"pb-timeline-row",children:[l.jsx("span",{className:"pb-timeline-label",children:Z.name}),l.jsxs("div",{className:"pb-timeline-values",children:[l.jsx("span",{className:"pb-timeline-value",children:Z.unit==="time"?ef(je.time):E_(je.weight,je.reps)}),lt!==null&&l.jsxs("span",{className:`pb-timeline-change ${lt>=0?"positive":"negative"}`,children:[lt>=0?"+":"",lt.toFixed(1),"%"]})]})]},Z.key)})]}),ge.bodyMetrics&&Object.keys(ge.bodyMetrics).length>0&&l.jsxs("div",{className:"pb-timeline-group",children:[l.jsx("h5",{children:"Body Measurements"}),Ml.map(Z=>{const je=ge.bodyMetrics[Z.key];if(je==null)return null;const We=$e?.bodyMetrics?.[Z.key],Qe=We!=null?parseFloat((je-We).toFixed(2)):null;return l.jsxs("div",{className:"pb-timeline-row",children:[l.jsx("span",{className:"pb-timeline-label",children:Z.name}),l.jsxs("div",{className:"pb-timeline-values",children:[l.jsxs("span",{className:"pb-timeline-value",children:[je," ",Z.suffix]}),Qe!==null&&l.jsxs("span",{className:`pb-timeline-change ${Qe>0?"positive":Qe<0?"negative":"neutral"}`,children:[Qe>0?"+":"",Qe," ",Z.suffix]})]})]},Z.key)})]})]})]},ge.id)})})]})})]}),ne&&l.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Ee(null),children:l.jsxs("div",{className:"pb-celebration-card",children:[l.jsx("div",{className:"pb-celebration-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),l.jsx("h3",{className:"pb-celebration-title",children:ne.length===1?"Target Achieved!":`${ne.length} Targets Achieved!`}),l.jsx("div",{className:"pb-celebration-badges",children:ne.map((ge,Be)=>l.jsx("div",{className:"pb-celebration-badge",children:ge.label},Be))}),l.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Le&&l.jsxs("div",{className:`toast-notification ${Le.type}`,children:[l.jsx("span",{className:"toast-icon",children:Le.type==="success"?l.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),l.jsx("span",{className:"toast-message",children:Le.message}),l.jsx("button",{className:"toast-close",onClick:()=>Ae(null),children:""})]})]})}const sg=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const a=new Date(s);a.setHours(9,45,0,0),s>a&&(t=7)}const i=new Date(s);return i.setDate(s.getDate()+t),i},ig=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,D4=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"});function I4(){const[s,e]=z.useState(!0),[t,i]=z.useState(null),[a,c]=z.useState(null),[u,f]=z.useState({attended:0,streak:0,strikes:0}),[p,x]=z.useState(null),{currentUser:S,isClient:C,clientData:A,logout:B,loading:L}=Es(),{isDark:F,toggleTheme:$}=Kl(),J=Ir();z.useCallback((q,V="info")=>{x({message:q,type:V}),setTimeout(()=>x(null),4e3)},[]),z.useEffect(()=>{!L&&(!S||!C)&&J("/")},[S,C,L,J]),z.useEffect(()=>{const q=()=>{const H=new Date,te=sg();te.setHours(9,0,0,0);const W=te-H;if(W<=0){i({days:0,hours:0,minutes:0,seconds:0});return}i({days:Math.floor(W/864e5),hours:Math.floor(W%864e5/36e5),minutes:Math.floor(W%36e5/6e4),seconds:Math.floor(W%6e4/1e3)})};q();const V=setInterval(q,1e3);return()=>clearInterval(V)},[]),z.useEffect(()=>{A&&Y()},[A]);const Y=async()=>{try{const q=ig(sg()),V=St(Xe,"circuitSessions",q),H=await nl(V);if(H.exists()){const Ge=H.data().slots?.find(M=>M.memberId===A.id);c(Ge||null)}else c(null);const W=(await xn(Jt(Xe,"circuitSessions"))).docs.map(Ae=>({id:Ae.id,...Ae.data()})),ee=new Date;ee.setHours(0,0,0,0);let O=0;const Re=[];W.forEach(Ae=>{new Date(Ae.date+"T09:00:00")<ee&&Ae.slots?.some(se=>se.memberId===A.id&&(se.status==="confirmed"||se.status==="attended"))&&(O++,Re.push(Ae.date))}),Re.sort((Ae,Ge)=>Ge.localeCompare(Ae));let qe=0,ne=new Date(ee);const Ee=ne.getDay(),Le=Ee>=6?Ee-6:Ee+1;ne.setDate(ne.getDate()-Le);for(const Ae of Re)if(Ae===ig(ne))qe++,ne.setDate(ne.getDate()-7);else break;f({attended:O,streak:qe,strikes:A.circuitStrikes||0,banUntil:A.circuitBanUntil||null})}catch(q){console.error("Error fetching circuit data:",q)}e(!1)};if(L||s)return l.jsx("div",{className:"circuit-page",children:l.jsx("div",{className:"circuit-loading",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"circuit-loading-logo"})})});const ce=ig(sg()),X=A?.clientType||"block",pe=X==="circuit_vip"||X==="circuit_dropin",xe=X==="circuit_vip"?"VIP":X==="circuit_dropin"?"Drop-in":"Block";return l.jsxs("div",{className:`circuit-page ${F?"dark":""}`,children:[l.jsxs("header",{className:"circuit-header",children:[l.jsxs("div",{className:"circuit-header-left",children:[!pe&&l.jsx("button",{className:"circuit-back-btn",onClick:()=>J("/client"),children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),l.jsx("img",{src:"/Logo.PNG",alt:"MCF",className:"circuit-header-logo"})]}),l.jsxs("div",{className:"circuit-header-right",children:[l.jsx("button",{className:"circuit-icon-btn",onClick:$,children:F?"":""}),pe&&l.jsx("button",{className:"circuit-icon-btn logout",onClick:B,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"})})})]})]}),l.jsxs("main",{className:"circuit-main",children:[l.jsxs("div",{className:"circuit-intro",children:[l.jsx("h2",{children:"Circuit Class"}),l.jsxs("p",{children:["Hey ",A?.name?.split(" ")[0],"! Your Saturday session awaits."]})]}),t&&l.jsxs("div",{className:"circuit-countdown",children:[l.jsxs("div",{className:"circuit-ring",children:[l.jsx("svg",{className:"circuit-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((q,V)=>{const H=(V*6-90)*(Math.PI/180),te=85,W=96,ee=100+te*Math.cos(H),O=100+te*Math.sin(H),Re=100+W*Math.cos(H),qe=100+W*Math.sin(H),ne=60-t.seconds,Ee=V<ne;return l.jsx("line",{x1:ee,y1:O,x2:Re,y2:qe,className:`circuit-tick ${Ee?"elapsed":"remaining"}`,strokeWidth:V%5===0?"3":"2"},V)})}),l.jsxs("div",{className:"circuit-ring-center",children:[l.jsx("div",{className:"circuit-ring-logo",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),l.jsx("div",{className:"circuit-ring-label",children:"Next Class"}),l.jsxs("div",{className:"circuit-ring-countdown",children:[t.days>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"circuit-digit",children:String(t.days).padStart(2,"0")}),l.jsx("span",{className:"circuit-colon",children:":"})]}),l.jsx("span",{className:"circuit-digit",children:String(t.hours).padStart(2,"0")}),l.jsx("span",{className:"circuit-colon",children:":"}),l.jsx("span",{className:"circuit-digit",children:String(t.minutes).padStart(2,"0")}),l.jsx("span",{className:"circuit-colon",children:":"}),l.jsx("span",{className:"circuit-digit circuit-seconds",children:String(t.seconds).padStart(2,"0")})]}),l.jsx("div",{className:"circuit-ring-sub",children:"Saturday 9:00am"})]})]}),l.jsx("p",{className:"circuit-date-full",children:D4(ce)})]}),l.jsx("div",{className:`circuit-status-card ${a?"booked":"not-booked"}`,children:a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"circuit-status-check",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M5 13l4 4L19 7"})})}),l.jsxs("div",{className:"circuit-status-info",children:[l.jsx("h3",{children:"You're Locked In"}),l.jsxs("p",{children:["Slot #",a.slotNumber,"  ",xe]})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"circuit-status-alert",children:"!"}),l.jsxs("div",{className:"circuit-status-info",children:[l.jsx("h3",{children:"Not Booked Yet"}),l.jsx("p",{children:"Tap below to view and book your slot"})]}),l.jsx("button",{className:"circuit-book-now-btn",onClick:()=>J("/client/circuit/booking"),children:"Book Now"})]})}),l.jsxs("div",{className:"circuit-stats-card",children:[l.jsx("h3",{children:"Your Stats"}),l.jsxs("div",{className:"circuit-stats-grid",children:[l.jsxs("div",{className:"circuit-stat",children:[l.jsx("span",{className:"circuit-stat-value",children:u.attended}),l.jsx("span",{className:"circuit-stat-label",children:"Classes"})]}),l.jsxs("div",{className:"circuit-stat",children:[l.jsx("span",{className:"circuit-stat-value",children:u.streak}),l.jsx("span",{className:"circuit-stat-label",children:"Week Streak"})]}),l.jsxs("div",{className:"circuit-stat",children:[l.jsxs("span",{className:`circuit-stat-value ${u.strikes>=2?"warning":""}`,children:[u.strikes,"/3"]}),l.jsx("span",{className:"circuit-stat-label",children:"Strikes"})]})]}),u.banUntil&&(()=>{const q=u.banUntil.toDate?u.banUntil.toDate():new Date(u.banUntil.seconds*1e3);return q>new Date?l.jsxs("div",{className:"circuit-ban-notice",children:["Booking suspended until ",q.toLocaleDateString("en-GB",{day:"numeric",month:"long"})]}):null})()]}),l.jsxs("div",{className:"circuit-rules",children:[l.jsx("h4",{children:"Class Rules"}),l.jsxs("ul",{children:[l.jsxs("li",{children:["Lock in your slot by ",l.jsx("strong",{children:"Wednesday"})]}),l.jsxs("li",{children:["Cancel at least ",l.jsx("strong",{children:"24 hours"})," before class"]}),l.jsx("li",{children:"3 no-show strikes = 1 month booking ban"})]})]}),X!=="circuit_vip"&&l.jsxs("div",{className:"circuit-vip-promo",children:[l.jsx("div",{className:"vip-promo-badge",children:"VIP"}),l.jsx("h3",{children:"Become a VIP Member"}),l.jsxs("p",{className:"vip-promo-price",children:["Just ",l.jsx("strong",{children:"25"}),"/month"]}),l.jsx("p",{className:"vip-promo-desc",children:"Full access with a priority spot every week  your slot is automatically locked in before anyone else can book."}),l.jsxs("ul",{className:"vip-promo-perks",children:[l.jsx("li",{children:"Guaranteed slot every Saturday"}),l.jsx("li",{children:"Auto-booked  no need to race for a spot"}),l.jsx("li",{children:"Cancel anytime for the week, reinstated the next"})]}),l.jsxs("a",{href:"https://wa.me/447449782055?text=Hi%20Ross%2C%20I%27d%20like%20to%20become%20a%20VIP%20circuit%20member!",target:"_blank",rel:"noopener noreferrer",className:"vip-promo-wa-btn",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Message on WhatsApp"]})]})]}),l.jsx("button",{className:"circuit-fab",onClick:()=>J("/client/circuit/booking"),children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("path",{d:"M3 9h18M9 21V9"})]})}),p&&l.jsx("div",{className:`toast-notification ${p.type}`,children:l.jsx("span",{children:p.message})})]})}const tf=()=>{const s=new Date;let t=(6-s.getDay()+7)%7;if(t===0){const a=new Date(s);a.setHours(9,45,0,0),s>a&&(t=7)}const i=new Date(s);return i.setDate(s.getDate()+t),i},M4=s=>`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,O4=s=>new Date(s+"T09:00:00").toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long"}),S_=s=>s==="circuit_vip"?"VIP":s==="circuit_dropin"?"Drop-in":"Block",T_=s=>s==="circuit_vip"?"vip":s==="circuit_dropin"?"dropin":"block";function L4(){const[s,e]=z.useState(!0),[t,i]=z.useState(!1),[a,c]=z.useState(null),[u,f]=z.useState(null),{currentUser:p,isClient:x,clientData:S,loading:C}=Es(),{isDark:A}=Kl(),B=Ir(),L=z.useCallback((O,Re="info")=>{f({message:O,type:Re}),setTimeout(()=>f(null),4e3)},[]);z.useEffect(()=>{!C&&(!p||!x)&&B("/")},[p,x,C,B]),z.useEffect(()=>{S&&F()},[S]);const F=async()=>{try{const O=M4(tf()),Re=St(Xe,"circuitSessions",O),qe=await nl(Re);if(qe.exists()){const ne={id:qe.id,...qe.data()},Ee=ji(Jt(Xe,"clients"),ci("clientType","==","circuit_vip"),ci("status","==","active")),Ae=(await xn(Ee)).docs.map(se=>({id:se.id,...se.data()})),Ge=ne.slots.filter(se=>se.memberId).map(se=>se.memberId),M=Ae.filter(se=>!Ge.includes(se.id));if(M.length>0){const se=[...ne.slots];let ie=!1;for(const he of M){const Q=se.findIndex(de=>de.status==="available");if(Q===-1)break;se[Q]={slotNumber:se[Q].slotNumber,memberId:he.id,memberName:he.name,memberType:"circuit_vip",status:"confirmed",bookedAt:at.now()},ie=!0}ie&&(await cr(Re,{slots:se}),ne.slots=se)}c(ne)}else{const ne=ji(Jt(Xe,"clients"),ci("clientType","==","circuit_vip"),ci("status","==","active")),Le=(await xn(ne)).docs.map(M=>({id:M.id,...M.data()})),Ae=[];for(let M=0;M<8;M++)M<Le.length?Ae.push({slotNumber:M+1,memberId:Le[M].id,memberName:Le[M].name,memberType:"circuit_vip",status:"confirmed",bookedAt:at.now()}):Ae.push({slotNumber:M+1,memberId:null,memberName:null,memberType:null,status:"available"});const Ge={date:O,time:"09:00",endTime:"09:45",maxCapacity:8,slots:Ae,waitlist:[],createdAt:at.now()};await Va(Re,Ge),c({id:O,...Ge})}}catch(O){console.error("Error loading session:",O),L("Failed to load session","error")}e(!1)},$=async O=>{if(!t){i(!0);try{if(S.circuitBanUntil&&(S.circuitBanUntil.toDate?S.circuitBanUntil.toDate():new Date(S.circuitBanUntil))>new Date){L("You are currently suspended from booking","error"),i(!1);return}const Re=tf(),qe=new Date(Re);if(qe.setDate(qe.getDate()-3),qe.setHours(23,59,59,999),new Date>qe){L("Booking deadline has passed (Wednesday)","error"),i(!1);return}if(a.slots.some(Ae=>Ae.memberId===S.id)){L("You already have a slot booked","error"),i(!1);return}const ne=[...a.slots],Ee=ne.findIndex(Ae=>Ae.slotNumber===O&&Ae.status==="available");if(Ee===-1){L("Slot is no longer available","error"),i(!1);return}ne[Ee]={slotNumber:O,memberId:S.id,memberName:S.name,memberType:S.clientType||"block",status:"confirmed",bookedAt:at.now()};const Le=(a.waitlist||[]).filter(Ae=>Ae.memberId!==S.id);await cr(St(Xe,"circuitSessions",a.id),{slots:ne,waitlist:Le}),c(Ae=>({...Ae,slots:ne,waitlist:Le})),L("Slot booked!","success")}catch(Re){console.error("Error booking slot:",Re),L("Failed to book slot","error")}i(!1)}},J=async()=>{if(!t){i(!0);try{const O=tf();O.setHours(9,0,0,0);const Re=new Date(O.getTime()-1440*60*1e3);if(new Date>Re){L("Cancellation deadline passed (24hrs before class)","error"),i(!1);return}const qe=[...a.slots],ne=qe.findIndex(Ae=>Ae.memberId===S.id);if(ne===-1){i(!1);return}const Ee=qe[ne].slotNumber;let Le=[...a.waitlist||[]];if(Le.length>0){const Ae=Le.shift();qe[ne]={slotNumber:Ee,memberId:Ae.memberId,memberName:Ae.memberName,memberType:Ae.memberType,status:"confirmed",bookedAt:at.now()}}else qe[ne]={slotNumber:Ee,memberId:null,memberName:null,memberType:null,status:"available"};await cr(St(Xe,"circuitSessions",a.id),{slots:qe,waitlist:Le}),c(Ae=>({...Ae,slots:qe,waitlist:Le})),L("Slot released","success")}catch(O){console.error("Error releasing slot:",O),L("Failed to release slot","error")}i(!1)}},Y=async()=>{if(!t){i(!0);try{if(a.waitlist?.some(Re=>Re.memberId===S.id)){L("Already on the waitlist","error"),i(!1);return}if(a.slots.some(Re=>Re.memberId===S.id)){L("You already have a slot","error"),i(!1);return}const O=[...a.waitlist||[],{memberId:S.id,memberName:S.name,memberType:S.clientType||"block",addedAt:at.now()}];await cr(St(Xe,"circuitSessions",a.id),{waitlist:O}),c(Re=>({...Re,waitlist:O})),L("Added to waitlist!","success")}catch(O){console.error("Error joining waitlist:",O),L("Failed to join waitlist","error")}i(!1)}},ce=async()=>{if(!t){i(!0);try{const O=(a.waitlist||[]).filter(Re=>Re.memberId!==S.id);await cr(St(Xe,"circuitSessions",a.id),{waitlist:O}),c(Re=>({...Re,waitlist:O})),L("Removed from waitlist","success")}catch(O){console.error("Error leaving waitlist:",O),L("Failed to leave waitlist","error")}i(!1)}};if(C||s)return l.jsx("div",{className:"cb-page",children:l.jsx("div",{className:"cb-loading",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-loading-logo"})})});if(!a)return null;const X=a.slots.find(O=>O.memberId===S.id),pe=a.waitlist?.some(O=>O.memberId===S.id),xe=a.slots.filter(O=>O.status==="available").length,q=xe===0,V=tf(),H=new Date(V);H.setDate(H.getDate()-3),H.setHours(23,59,59,999);const te=new Date>H,W=new Date(V);W.setHours(9,0,0,0),W.setTime(W.getTime()-1440*60*1e3);const ee=new Date>W;return l.jsxs("div",{className:`cb-page ${A?"dark":""}`,children:[l.jsxs("header",{className:"cb-header",children:[l.jsx("button",{className:"cb-back-btn",onClick:()=>B("/client/circuit"),children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})})}),l.jsx("h1",{children:"Class Booking"}),l.jsx("div",{className:"cb-header-spacer"})]}),l.jsxs("main",{className:"cb-main",children:[l.jsxs("div",{className:"cb-class-info",children:[l.jsx("h2",{children:O4(a.date)}),l.jsxs("p",{children:[a.time," - ",a.endTime,"  ",xe," slot",xe!==1?"s":""," available"]})]}),te&&!X&&l.jsx("div",{className:"cb-deadline-notice",children:"Booking deadline has passed for this week"}),l.jsx("div",{className:"cb-slots-grid",children:a.slots.map(O=>{const Re=O.memberId===S.id,qe=O.status==="available";return O.memberType,l.jsxs("div",{className:`cb-slot ${Re?"mine":""} ${qe?"available":"filled"}`,children:[l.jsx("div",{className:"cb-slot-number",children:O.slotNumber}),l.jsx("div",{className:"cb-slot-body",children:qe?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"cb-slot-available",children:"Available"}),!X&&!te&&l.jsx("button",{className:"cb-slot-book-btn",onClick:()=>$(O.slotNumber),disabled:t,children:"Book"})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"cb-slot-name",children:O.memberName}),l.jsx("span",{className:`cb-slot-badge ${T_(O.memberType)}`,children:S_(O.memberType)})]})}),Re&&l.jsx("button",{className:"cb-slot-release-btn",onClick:J,disabled:t||ee,title:ee?"Cancellation deadline passed":"Cancel this slot",children:ee?"Locked":"Cancel"})]},O.slotNumber)})}),!X&&q&&l.jsx("div",{className:"cb-waitlist-section",children:pe?l.jsxs("div",{className:"cb-waitlist-status",children:[l.jsxs("p",{children:["You're on the waitlist (position #",(a.waitlist?.findIndex(O=>O.memberId===S.id)||0)+1,")"]}),l.jsx("button",{className:"cb-waitlist-leave-btn",onClick:ce,disabled:t,children:"Leave Waitlist"})]}):l.jsx("button",{className:"cb-waitlist-join-btn",onClick:Y,disabled:t,children:"Class Full - Join Waitlist"})}),a.waitlist?.length>0&&l.jsxs("div",{className:"cb-waitlist-preview",children:[l.jsxs("h4",{children:["Waitlist (",a.waitlist.length,")"]}),a.waitlist.map((O,Re)=>l.jsxs("div",{className:"cb-waitlist-item",children:[l.jsxs("span",{className:"cb-waitlist-pos",children:["#",Re+1]}),l.jsx("span",{className:"cb-waitlist-name",children:O.memberName}),l.jsx("span",{className:`cb-slot-badge ${T_(O.memberType)}`,children:S_(O.memberType)})]},O.memberId))]}),l.jsx("div",{className:"cb-rules",children:l.jsxs("p",{children:[l.jsx("strong",{children:"Book by Wednesday"}),"  ",l.jsx("strong",{children:"Cancel 24hrs before"}),"  ",l.jsx("strong",{children:"3 no-shows = 1 month ban"})]})})]}),u&&l.jsx("div",{className:`toast-notification ${u.type}`,children:l.jsx("span",{children:u.message})})]})}function P4(){const{currentUser:s,isClient:e,clientData:t,logout:i,loading:a}=Es(),{isDark:c,toggleTheme:u}=Kl(),f=Ir(),[p,x]=z.useState({hours:0,minutes:0,seconds:0}),[S,C]=z.useState(0),[A,B]=z.useState(null),L=z.useCallback((J,Y="info")=>{B({message:J,type:Y}),setTimeout(()=>B(null),4e3)},[]);z.useEffect(()=>{!a&&!s&&f("/")},[a,s,f]),z.useEffect(()=>{const J=()=>{const ce=new Date,X=new Date(ce);X.setHours(23,59,59,999);const pe=X-ce,xe=Math.floor(pe/(1e3*60*60)),q=Math.floor(pe%(1e3*60*60)/(1e3*60)),V=Math.floor(pe%(1e3*60)/1e3);x({hours:xe,minutes:q,seconds:V}),C(60-V)};J();const Y=setInterval(J,1e3);return()=>clearInterval(Y)},[]);const F=J=>{const Y=J.currentTarget,ce=Y.querySelector(".ripple");ce&&ce.remove();const X=Y.getBoundingClientRect(),pe=Math.max(X.width,X.height),xe=J.clientX-X.left-pe/2,q=J.clientY-X.top-pe/2,V=document.createElement("span");V.className="ripple",V.style.cssText=`width:${pe}px;height:${pe}px;left:${xe}px;top:${q}px;`,Y.appendChild(V),setTimeout(()=>V.remove(),600)},$=t?.name?.split(" ")[0]||"there";return a?l.jsx("div",{className:"cb-loading",children:l.jsx("div",{className:"cb-loading-spinner"})}):l.jsxs("div",{className:"cb-dashboard","data-theme":c?"dark":"light",children:[l.jsxs("header",{className:"cb-header",children:[l.jsxs("div",{className:"cb-header-left",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),l.jsx("span",{className:"cb-header-title",children:"Core Buddy"})]}),l.jsxs("div",{className:"cb-header-right",children:[l.jsx("button",{className:"cb-theme-toggle",onClick:u,"aria-label":"Toggle theme",children:c?l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),l.jsx("button",{className:"cb-logout",onClick:i,"aria-label":"Log out",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]}),l.jsxs("main",{className:"cb-main",children:[l.jsx("div",{className:"cb-greeting",children:l.jsxs("h2",{children:["Hey ",$]})}),l.jsxs("div",{className:"cb-ring-container",children:[l.jsxs("div",{className:"cb-ring",children:[l.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:[...Array(60)].map((J,Y)=>{const ce=(Y*6-90)*(Math.PI/180),X=85,pe=96,xe=100+X*Math.cos(ce),q=100+X*Math.sin(ce),V=100+pe*Math.cos(ce),H=100+pe*Math.sin(ce),te=Y<S;return l.jsx("line",{x1:xe,y1:q,x2:V,y2:H,className:`ring-tick ${te?"elapsed":"remaining"}`,strokeWidth:Y%5===0?"3":"2"},Y)})}),l.jsxs("div",{className:"cb-ring-center",children:[l.jsx("div",{className:"cb-ring-logo",children:l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness"})}),l.jsxs("div",{className:"cb-ring-countdown",children:[l.jsx("span",{className:"cb-timer-digit",children:String(p.hours).padStart(2,"0")}),l.jsx("span",{className:"cb-timer-colon",children:":"}),l.jsx("span",{className:"cb-timer-digit",children:String(p.minutes).padStart(2,"0")}),l.jsx("span",{className:"cb-timer-colon",children:":"}),l.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(p.seconds).padStart(2,"0")})]}),l.jsx("div",{className:"cb-ring-label",children:"remaining today"})]})]}),l.jsxs("p",{className:"cb-ring-tagline",children:["You have 24 hours a day... ",l.jsx("strong",{children:"make it count"})," with Core Buddy"]})]}),l.jsxs("div",{className:"cb-features",children:[l.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:J=>{F(J),f("/client/core-buddy/nutrition")},children:[l.jsxs("div",{className:"cb-card-top-row",children:[l.jsx("div",{className:"cb-card-icon cb-icon-nutrition",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),l.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),l.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),l.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),l.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]})}),l.jsx("div",{className:"cb-card-content",children:l.jsx("h3",{children:"Today's Nutrition"})}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsx("div",{className:"cb-card-preview-row",children:l.jsx("div",{className:"cb-mini-rings",children:[{cls:"cb-ring-protein",label:"P",filled:15},{cls:"cb-ring-carbs",label:"C",filled:28},{cls:"cb-ring-fats",label:"F",filled:38},{cls:"cb-ring-cals",label:"Cal",filled:22}].map(J=>l.jsxs("div",{className:`cb-mini-ring ${J.cls}`,children:[l.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(60)].map((Y,ce)=>{const X=(ce*6-90)*(Math.PI/180),pe=50+38*Math.cos(X),xe=50+38*Math.sin(X),q=50+46*Math.cos(X),V=50+46*Math.sin(X);return l.jsx("line",{x1:pe,y1:xe,x2:q,y2:V,className:ce<J.filled?"cb-tick-filled":"cb-tick-empty",strokeWidth:ce%5===0?"3":"2"},ce)})}),l.jsx("span",{children:J.label})]},J.cls))})}),l.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),l.jsxs("button",{className:"cb-feature-card cb-card-workouts ripple-btn",onClick:J=>{F(J),L("Workouts coming soon!","info")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-workouts",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M6.5 6.5L17.5 17.5"}),l.jsx("path",{d:"M3 10V7a1 1 0 0 1 1-1h3"}),l.jsx("path",{d:"M14 3h3a1 1 0 0 1 1 1v3"}),l.jsx("path",{d:"M21 14v3a1 1 0 0 1-1 1h-3"}),l.jsx("path",{d:"M10 21H7a1 1 0 0 1-1-1v-3"})]})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"Workouts"}),l.jsx("p",{children:"Randomise or build your own session"})]}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsxs("button",{className:"cb-feature-card cb-card-progress ripple-btn",onClick:J=>{F(J),f("/client/personal-bests")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-progress",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"My Progress"}),l.jsx("p",{children:"Track personal bests and body metrics"})]}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsxs("button",{className:"cb-feature-card cb-card-consistency cb-card-has-preview ripple-btn",onClick:J=>{F(J),L("Consistency tracking coming soon!","info")},children:[l.jsxs("div",{className:"cb-card-top-row",children:[l.jsx("div",{className:"cb-card-icon cb-icon-consistency",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2z"})})}),l.jsx("div",{className:"cb-card-content",children:l.jsx("h3",{children:"Consistency"})}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]}),l.jsx("div",{className:"cb-card-preview-row",children:l.jsx("div",{className:"cb-week-rings",children:["M","T","W","T","F","S","S"].map((J,Y)=>{const ce=Y<3?[55,42,30][Y]:0;return l.jsxs("div",{className:`cb-week-ring ${Y<3?"cb-week-ring-active":""}`,children:[l.jsx("svg",{viewBox:"0 0 100 100",children:[...Array(60)].map((X,pe)=>{const xe=(pe*6-90)*(Math.PI/180),q=50+38*Math.cos(xe),V=50+38*Math.sin(xe),H=50+46*Math.cos(xe),te=50+46*Math.sin(xe);return l.jsx("line",{x1:q,y1:V,x2:H,y2:te,className:pe<ce?"cb-week-tick-filled":"cb-week-tick-empty",strokeWidth:pe%5===0?"3":"2"},pe)})}),l.jsx("span",{children:J})]},Y)})})}),l.jsx("p",{className:"cb-card-desc",children:"Weekly streaks and habit tracking"})]}),l.jsxs("button",{className:"cb-feature-card cb-card-leaderboard cb-card-locked ripple-btn",onClick:J=>{F(J),L("Leaderboard coming soon!","info")},children:[l.jsx("div",{className:"cb-card-icon cb-icon-leaderboard",children:l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M8 21h8"}),l.jsx("path",{d:"M12 17v4"}),l.jsx("path",{d:"M7 4h10l-1 9H8L7 4z"}),l.jsx("path",{d:"M17 4c0 0 2 0 2 2s-2 4-2 4"}),l.jsx("path",{d:"M7 4c0 0-2 0-2 2s2 4 2 4"})]})}),l.jsxs("div",{className:"cb-card-content",children:[l.jsx("h3",{children:"Leaderboard"}),l.jsx("p",{children:"Compete with your Core Buddies"})]}),l.jsx("span",{className:"cb-coming-soon",children:"Coming Soon"}),l.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M9 18l6-6-6-6"})})]})]})]}),A&&l.jsxs("div",{className:`toast-notification ${A.type}`,children:[A.type==="info"&&l.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),A.message]})]})}var ag={exports:{}},C_;function V4(){return C_||(C_=1,(function(s,e){(function(t,i){s.exports=i()})(window,(function(){return(function(t){var i={};function a(c){if(i[c])return i[c].exports;var u=i[c]={i:c,l:!1,exports:{}};return t[c].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=t,a.c=i,a.d=function(c,u,f){a.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:f})},a.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},a.t=function(c,u){if(1&u&&(c=a(c)),8&u||4&u&&typeof c=="object"&&c&&c.__esModule)return c;var f=Object.create(null);if(a.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:c}),2&u&&typeof c!="string")for(var p in c)a.d(f,p,(function(x){return c[x]}).bind(null,p));return f},a.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(u,"a",u),u},a.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},a.p="/",a(a.s=90)})([function(t,i,a){var c=a(68);t.exports=function(u,f,p){return(f=c(f))in u?Object.defineProperty(u,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):u[f]=p,u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){function a(c){return t.exports=a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},t.exports.__esModule=!0,t.exports.default=t.exports,a(c)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(68);function u(f,p){for(var x=0;x<p.length;x++){var S=p[x];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(f,c(S.key),S)}}t.exports=function(f,p,x){return p&&u(f.prototype,p),x&&u(f,x),Object.defineProperty(f,"prototype",{writable:!1}),f},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(9).default,u=a(150);t.exports=function(f,p){if(p&&(c(p)=="object"||typeof p=="function"))return p;if(p!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u(f)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(38);t.exports=function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(f&&f.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),f&&c(u,f)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(146)();t.exports=c;try{regeneratorRuntime=c}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=c:Function("r","regeneratorRuntime = r")(c)}},function(t,i){function a(c,u,f,p,x,S,C){try{var A=c[S](C),B=A.value}catch(L){return void f(L)}A.done?u(B):Promise.resolve(B).then(p,x)}t.exports=function(c){return function(){var u=this,f=arguments;return new Promise((function(p,x){var S=c.apply(u,f);function C(B){a(S,p,x,C,A,"next",B)}function A(B){a(S,p,x,C,A,"throw",B)}C(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(46),u=typeof self=="object"&&self&&self.Object===Object&&self,f=c||u||Function("return this")();t.exports=f},function(t,i){function a(c){return t.exports=a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t.exports.__esModule=!0,t.exports.default=t.exports,a(c)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}},function(t,i){t.exports=function(a){return a!=null&&typeof a=="object"}},function(t,i){var a=Array.isArray;t.exports=a},function(t,i,a){var c=a(151);function u(){return t.exports=u=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(f,p,x){var S=c(f,p);if(S){var C=Object.getOwnPropertyDescriptor(S,p);return C.get?C.get.call(arguments.length<3?f:x):C.value}},t.exports.__esModule=!0,t.exports.default=t.exports,u.apply(null,arguments)}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(102),u=a(108);t.exports=function(f,p){var x=u(f,p);return c(x)?x:void 0}},function(t,i,a){var c=a(91),u=a(134)((function(f,p,x){c(f,p,x)}));t.exports=u},function(t,i,a){var c=a(152),u=a(153),f=a(66),p=a(154);t.exports=function(x){return c(x)||u(x)||f(x)||p()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(19),u=a(104),f=a(105),p=c?c.toStringTag:void 0;t.exports=function(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":p&&p in Object(x)?u(x):f(x)}},function(t,i,a){var c=a(60),u=a(29);t.exports=function(f,p,x,S){var C=!x;x||(x={});for(var A=-1,B=p.length;++A<B;){var L=p[A],F=S?S(x[L],f[L],L,x,f):void 0;F===void 0&&(F=f[L]),C?u(x,L,F):c(x,L,F)}return x}},function(t,i,a){var c=a(8).Symbol;t.exports=c},function(t,i,a){var c=a(61),u=a(132),f=a(26);t.exports=function(p){return f(p)?c(p,!0):u(p)}},function(t,i,a){var c=a(92),u=a(93),f=a(94),p=a(95),x=a(96);function S(C){var A=-1,B=C==null?0:C.length;for(this.clear();++A<B;){var L=C[A];this.set(L[0],L[1])}}S.prototype.clear=c,S.prototype.delete=u,S.prototype.get=f,S.prototype.has=p,S.prototype.set=x,t.exports=S},function(t,i,a){var c=a(23);t.exports=function(u,f){for(var p=u.length;p--;)if(c(u[p][0],f))return p;return-1}},function(t,i){t.exports=function(a,c){return a===c||a!=a&&c!=c}},function(t,i,a){var c=a(14)(Object,"create");t.exports=c},function(t,i,a){var c=a(117);t.exports=function(u,f){var p=u.__data__;return c(f)?p[typeof f=="string"?"string":"hash"]:p.map}},function(t,i,a){var c=a(28),u=a(56);t.exports=function(f){return f!=null&&u(f.length)&&!c(f)}},function(t,i,a){var c=a(14)(a(8),"Map");t.exports=c},function(t,i,a){var c=a(17),u=a(10);t.exports=function(f){if(!u(f))return!1;var p=c(f);return p=="[object Function]"||p=="[object GeneratorFunction]"||p=="[object AsyncFunction]"||p=="[object Proxy]"}},function(t,i,a){var c=a(50);t.exports=function(u,f,p){f=="__proto__"&&c?c(u,f,{configurable:!0,enumerable:!0,value:p,writable:!0}):u[f]=p}},function(t,i){t.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(t,i,a){var c=a(124);t.exports=function(u){var f=new u.constructor(u.byteLength);return new c(f).set(new c(u)),f}},function(t,i,a){var c=a(55)(Object.getPrototypeOf,Object);t.exports=c},function(t,i){var a=Object.prototype;t.exports=function(c){var u=c&&c.constructor;return c===(typeof u=="function"&&u.prototype||a)}},function(t,i,a){var c=a(126),u=a(11),f=Object.prototype,p=f.hasOwnProperty,x=f.propertyIsEnumerable,S=c((function(){return arguments})())?c:function(C){return u(C)&&p.call(C,"callee")&&!x.call(C,"callee")};t.exports=S},function(t,i,a){(function(c){var u=a(8),f=a(128),p=i&&!i.nodeType&&i,x=p&&typeof c=="object"&&c&&!c.nodeType&&c,S=x&&x.exports===p?u.Buffer:void 0,C=(S?S.isBuffer:void 0)||f;c.exports=C}).call(this,a(30)(t))},function(t,i){t.exports=function(a){return function(c){return a(c)}}},function(t,i,a){(function(c){var u=a(46),f=i&&!i.nodeType&&i,p=f&&typeof c=="object"&&c&&!c.nodeType&&c,x=p&&p.exports===f&&u.process,S=(function(){try{var C=p&&p.require&&p.require("util").types;return C||x&&x.binding&&x.binding("util")}catch{}})();c.exports=S}).call(this,a(30)(t))},function(t,i){function a(c,u){return t.exports=a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,p){return f.__proto__=p,f},t.exports.__esModule=!0,t.exports.default=t.exports,a(c,u)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(61),u=a(159),f=a(26);t.exports=function(p){return f(p)?c(p):u(p)}},function(t,i,a){var c=a(163),u=a(75),f=Object.prototype.propertyIsEnumerable,p=Object.getOwnPropertySymbols,x=p?function(S){return S==null?[]:(S=Object(S),c(p(S),(function(C){return f.call(S,C)})))}:u;t.exports=x},function(t,i){t.exports=function(a,c){for(var u=-1,f=c.length,p=a.length;++u<f;)a[p+u]=c[u];return a}},function(t,i,a){var c=a(166),u=a(27),f=a(167),p=a(168),x=a(169),S=a(17),C=a(47),A=C(c),B=C(u),L=C(f),F=C(p),$=C(x),J=S;(c&&J(new c(new ArrayBuffer(1)))!="[object DataView]"||u&&J(new u)!="[object Map]"||f&&J(f.resolve())!="[object Promise]"||p&&J(new p)!="[object Set]"||x&&J(new x)!="[object WeakMap]")&&(J=function(Y){var ce=S(Y),X=ce=="[object Object]"?Y.constructor:void 0,pe=X?C(X):"";if(pe)switch(pe){case A:return"[object DataView]";case B:return"[object Map]";case L:return"[object Promise]";case F:return"[object Set]";case $:return"[object WeakMap]"}return ce}),t.exports=J},function(t,i,a){var c=a(12),u=a(180),f=a(181),p=a(184);t.exports=function(x,S){return c(x)?x:u(x,S)?[x]:f(p(x))}},function(t,i,a){var c=a(17),u=a(11);t.exports=function(f){return typeof f=="symbol"||u(f)&&c(f)=="[object Symbol]"}},function(t,i,a){var c=a(21),u=a(97),f=a(98),p=a(99),x=a(100),S=a(101);function C(A){var B=this.__data__=new c(A);this.size=B.size}C.prototype.clear=u,C.prototype.delete=f,C.prototype.get=p,C.prototype.has=x,C.prototype.set=S,t.exports=C},function(t,i,a){(function(c){var u=typeof c=="object"&&c&&c.Object===Object&&c;t.exports=u}).call(this,a(103))},function(t,i){var a=Function.prototype.toString;t.exports=function(c){if(c!=null){try{return a.call(c)}catch{}try{return c+""}catch{}}return""}},function(t,i,a){var c=a(109),u=a(116),f=a(118),p=a(119),x=a(120);function S(C){var A=-1,B=C==null?0:C.length;for(this.clear();++A<B;){var L=C[A];this.set(L[0],L[1])}}S.prototype.clear=c,S.prototype.delete=u,S.prototype.get=f,S.prototype.has=p,S.prototype.set=x,t.exports=S},function(t,i,a){var c=a(29),u=a(23);t.exports=function(f,p,x){(x!==void 0&&!u(f[p],x)||x===void 0&&!(p in f))&&c(f,p,x)}},function(t,i,a){var c=a(14),u=(function(){try{var f=c(Object,"defineProperty");return f({},"",{}),f}catch{}})();t.exports=u},function(t,i,a){(function(c){var u=a(8),f=i&&!i.nodeType&&i,p=f&&typeof c=="object"&&c&&!c.nodeType&&c,x=p&&p.exports===f?u.Buffer:void 0,S=x?x.allocUnsafe:void 0;c.exports=function(C,A){if(A)return C.slice();var B=C.length,L=S?S(B):new C.constructor(B);return C.copy(L),L}}).call(this,a(30)(t))},function(t,i,a){var c=a(31);t.exports=function(u,f){var p=f?c(u.buffer):u.buffer;return new u.constructor(p,u.byteOffset,u.length)}},function(t,i){t.exports=function(a,c){var u=-1,f=a.length;for(c||(c=Array(f));++u<f;)c[u]=a[u];return c}},function(t,i,a){var c=a(125),u=a(32),f=a(33);t.exports=function(p){return typeof p.constructor!="function"||f(p)?{}:c(u(p))}},function(t,i){t.exports=function(a,c){return function(u){return a(c(u))}}},function(t,i){t.exports=function(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=9007199254740991}},function(t,i,a){var c=a(17),u=a(32),f=a(11),p=Function.prototype,x=Object.prototype,S=p.toString,C=x.hasOwnProperty,A=S.call(Object);t.exports=function(B){if(!f(B)||c(B)!="[object Object]")return!1;var L=u(B);if(L===null)return!0;var F=C.call(L,"constructor")&&L.constructor;return typeof F=="function"&&F instanceof F&&S.call(F)==A}},function(t,i,a){var c=a(129),u=a(36),f=a(37),p=f&&f.isTypedArray,x=p?u(p):c;t.exports=x},function(t,i){t.exports=function(a,c){if((c!=="constructor"||typeof a[c]!="function")&&c!="__proto__")return a[c]}},function(t,i,a){var c=a(29),u=a(23),f=Object.prototype.hasOwnProperty;t.exports=function(p,x,S){var C=p[x];f.call(p,x)&&u(C,S)&&(S!==void 0||x in p)||c(p,x,S)}},function(t,i,a){var c=a(131),u=a(34),f=a(12),p=a(35),x=a(62),S=a(58),C=Object.prototype.hasOwnProperty;t.exports=function(A,B){var L=f(A),F=!L&&u(A),$=!L&&!F&&p(A),J=!L&&!F&&!$&&S(A),Y=L||F||$||J,ce=Y?c(A.length,String):[],X=ce.length;for(var pe in A)!B&&!C.call(A,pe)||Y&&(pe=="length"||$&&(pe=="offset"||pe=="parent")||J&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||x(pe,X))||ce.push(pe);return ce}},function(t,i){var a=/^(?:0|[1-9]\d*)$/;t.exports=function(c,u){var f=typeof c;return!!(u=u??9007199254740991)&&(f=="number"||f!="symbol"&&a.test(c))&&c>-1&&c%1==0&&c<u}},function(t,i){t.exports=function(a){return a}},function(t,i,a){var c=a(136),u=Math.max;t.exports=function(f,p,x){return p=u(p===void 0?f.length-1:p,0),function(){for(var S=arguments,C=-1,A=u(S.length-p,0),B=Array(A);++C<A;)B[C]=S[p+C];C=-1;for(var L=Array(p+1);++C<p;)L[C]=S[C];return L[p]=x(B),c(f,this,L)}}},function(t,i,a){var c=a(137),u=a(139)(c);t.exports=u},function(t,i,a){var c=a(67);t.exports=function(u,f){if(u){if(typeof u=="string")return c(u,f);var p={}.toString.call(u).slice(8,-1);return p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set"?Array.from(u):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?c(u,f):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){(c==null||c>a.length)&&(c=a.length);for(var u=0,f=Array(c);u<c;u++)f[u]=a[u];return f},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(9).default,u=a(145);t.exports=function(f){var p=u(f,"string");return c(p)=="symbol"?p:p+""},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){this.v=a,this.k=c},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(71);function u(){var f,p,x=typeof Symbol=="function"?Symbol:{},S=x.iterator||"@@iterator",C=x.toStringTag||"@@toStringTag";function A(X,pe,xe,q){var V=pe&&pe.prototype instanceof L?pe:L,H=Object.create(V.prototype);return c(H,"_invoke",(function(te,W,ee){var O,Re,qe,ne=0,Ee=ee||[],Le=!1,Ae={p:0,n:0,v:f,a:Ge,f:Ge.bind(f,4),d:function(M,se){return O=M,Re=0,qe=f,Ae.n=se,B}};function Ge(M,se){for(Re=M,qe=se,p=0;!Le&&ne&&!ie&&p<Ee.length;p++){var ie,he=Ee[p],Q=Ae.p,de=he[2];M>3?(ie=de===se)&&(qe=he[(Re=he[4])?5:(Re=3,3)],he[4]=he[5]=f):he[0]<=Q&&((ie=M<2&&Q<he[1])?(Re=0,Ae.v=se,Ae.n=he[1]):Q<de&&(ie=M<3||he[0]>se||se>de)&&(he[4]=M,he[5]=se,Ae.n=de,Re=0))}if(ie||M>1)return B;throw Le=!0,se}return function(M,se,ie){if(ne>1)throw TypeError("Generator is already running");for(Le&&se===1&&Ge(se,ie),Re=se,qe=ie;(p=Re<2?f:qe)||!Le;){O||(Re?Re<3?(Re>1&&(Ae.n=-1),Ge(Re,qe)):Ae.n=qe:Ae.v=qe);try{if(ne=2,O){if(Re||(M="next"),p=O[M]){if(!(p=p.call(O,qe)))throw TypeError("iterator result is not an object");if(!p.done)return p;qe=p.value,Re<2&&(Re=0)}else Re===1&&(p=O.return)&&p.call(O),Re<2&&(qe=TypeError("The iterator does not provide a '"+M+"' method"),Re=1);O=f}else if((p=(Le=Ae.n<0)?qe:te.call(W,Ae))!==B)break}catch(he){O=f,Re=1,qe=he}finally{ne=1}}return{value:p,done:Le}}})(X,xe,q),!0),H}var B={};function L(){}function F(){}function $(){}p=Object.getPrototypeOf;var J=[][S]?p(p([][S]())):(c(p={},S,(function(){return this})),p),Y=$.prototype=L.prototype=Object.create(J);function ce(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,$):(X.__proto__=$,c(X,C,"GeneratorFunction")),X.prototype=Object.create(Y),X}return F.prototype=$,c(Y,"constructor",$),c($,"constructor",F),F.displayName="GeneratorFunction",c($,C,"GeneratorFunction"),c(Y),c(Y,C,"Generator"),c(Y,S,(function(){return this})),c(Y,"toString",(function(){return"[object Generator]"})),(t.exports=u=function(){return{w:A,m:ce}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){function a(c,u,f,p){var x=Object.defineProperty;try{x({},"",{})}catch{x=0}t.exports=a=function(S,C,A,B){function L(F,$){a(S,F,(function(J){return this._invoke(F,$,J)}))}C?x?x(S,C,{value:A,enumerable:!B,configurable:!B,writable:!B}):S[C]=A:(L("next",0),L("throw",1),L("return",2))},t.exports.__esModule=!0,t.exports.default=t.exports,a(c,u,f,p)}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(70),u=a(73);t.exports=function(f,p,x,S,C){return new u(c().w(f,p,x,S),C||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(69),u=a(71);t.exports=function f(p,x){function S(A,B,L,F){try{var $=p[A](B),J=$.value;return J instanceof c?x.resolve(J.v).then((function(Y){S("next",Y,L,F)}),(function(Y){S("throw",Y,L,F)})):x.resolve(J).then((function(Y){$.value=Y,L($)}),(function(Y){return S("throw",Y,L,F)}))}catch(Y){F(Y)}}var C;this.next||(u(f.prototype),u(f.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),u(this,"_invoke",(function(A,B,L){function F(){return new x((function($,J){S(A,L,$,J)}))}return C=C?C.then(F,F):F()}),!0)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){for(var u=-1,f=a==null?0:a.length,p=Array(f);++u<f;)p[u]=c(a[u],u,a);return p}},function(t,i){t.exports=function(){return[]}},function(t,i,a){var c=a(41),u=a(32),f=a(40),p=a(75),x=Object.getOwnPropertySymbols?function(S){for(var C=[];S;)c(C,f(S)),S=u(S);return C}:p;t.exports=x},function(t,i,a){var c=a(41),u=a(12);t.exports=function(f,p,x){var S=p(f);return u(f)?S:c(S,x(f))}},function(t,i,a){var c=a(77),u=a(76),f=a(20);t.exports=function(p){return c(p,f,u)}},function(t,i,a){var c=a(44);t.exports=function(u){if(typeof u=="string"||c(u))return u;var f=u+"";return f=="0"&&1/u==-1/0?"-0":f}},function(t,i,a){var c=a(142),u=a(143),f=a(66),p=a(144);t.exports=function(x,S){return c(x)||u(x,S)||f(x,S)||p()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(155);t.exports=function(u,f){if(u==null)return{};var p,x,S=c(u,f);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);for(x=0;x<C.length;x++)p=C[x],f.indexOf(p)===-1&&{}.propertyIsEnumerable.call(u,p)&&(S[p]=u[p])}return S},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(74),u=a(156),f=a(179),p=a(43),x=a(18),S=a(190),C=a(191),A=a(78),B=C((function(L,F){var $={};if(L==null)return $;var J=!1;F=c(F,(function(ce){return ce=p(ce,L),J||(J=ce.length>1),ce})),x(L,A(L),$),J&&($=u($,7,S));for(var Y=F.length;Y--;)f($,F[Y]);return $}));t.exports=B},function(t,i,a){var c=a(1),u=a(38),f=a(195),p=a(196);function x(S){var C=typeof Map=="function"?new Map:void 0;return t.exports=x=function(A){if(A===null||!f(A))return A;if(typeof A!="function")throw new TypeError("Super expression must either be null or a function");if(C!==void 0){if(C.has(A))return C.get(A);C.set(A,B)}function B(){return p(A,arguments,c(this).constructor)}return B.prototype=Object.create(A.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),u(B,A)},t.exports.__esModule=!0,t.exports.default=t.exports,x(S)}t.exports=x,t.exports.__esModule=!0,t.exports.default=t.exports},,,,,,,function(t,i,a){t.exports=a(198)},function(t,i,a){var c=a(45),u=a(49),f=a(121),p=a(123),x=a(10),S=a(20),C=a(59);t.exports=function A(B,L,F,$,J){B!==L&&f(L,(function(Y,ce){if(J||(J=new c),x(Y))p(B,L,ce,F,A,$,J);else{var X=$?$(C(B,ce),Y,ce+"",B,L,J):void 0;X===void 0&&(X=Y),u(B,ce,X)}}),S)}},function(t,i){t.exports=function(){this.__data__=[],this.size=0}},function(t,i,a){var c=a(22),u=Array.prototype.splice;t.exports=function(f){var p=this.__data__,x=c(p,f);return!(x<0)&&(x==p.length-1?p.pop():u.call(p,x,1),--this.size,!0)}},function(t,i,a){var c=a(22);t.exports=function(u){var f=this.__data__,p=c(f,u);return p<0?void 0:f[p][1]}},function(t,i,a){var c=a(22);t.exports=function(u){return c(this.__data__,u)>-1}},function(t,i,a){var c=a(22);t.exports=function(u,f){var p=this.__data__,x=c(p,u);return x<0?(++this.size,p.push([u,f])):p[x][1]=f,this}},function(t,i,a){var c=a(21);t.exports=function(){this.__data__=new c,this.size=0}},function(t,i){t.exports=function(a){var c=this.__data__,u=c.delete(a);return this.size=c.size,u}},function(t,i){t.exports=function(a){return this.__data__.get(a)}},function(t,i){t.exports=function(a){return this.__data__.has(a)}},function(t,i,a){var c=a(21),u=a(27),f=a(48);t.exports=function(p,x){var S=this.__data__;if(S instanceof c){var C=S.__data__;if(!u||C.length<199)return C.push([p,x]),this.size=++S.size,this;S=this.__data__=new f(C)}return S.set(p,x),this.size=S.size,this}},function(t,i,a){var c=a(28),u=a(106),f=a(10),p=a(47),x=/^\[object .+?Constructor\]$/,S=Function.prototype,C=Object.prototype,A=S.toString,B=C.hasOwnProperty,L=RegExp("^"+A.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(F){return!(!f(F)||u(F))&&(c(F)?L:x).test(p(F))}},function(t,i){var a;a=(function(){return this})();try{a=a||new Function("return this")()}catch{typeof window=="object"&&(a=window)}t.exports=a},function(t,i,a){var c=a(19),u=Object.prototype,f=u.hasOwnProperty,p=u.toString,x=c?c.toStringTag:void 0;t.exports=function(S){var C=f.call(S,x),A=S[x];try{S[x]=void 0;var B=!0}catch{}var L=p.call(S);return B&&(C?S[x]=A:delete S[x]),L}},function(t,i){var a=Object.prototype.toString;t.exports=function(c){return a.call(c)}},function(t,i,a){var c,u=a(107),f=(c=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";t.exports=function(p){return!!f&&f in p}},function(t,i,a){var c=a(8)["__core-js_shared__"];t.exports=c},function(t,i){t.exports=function(a,c){return a?.[c]}},function(t,i,a){var c=a(110),u=a(21),f=a(27);t.exports=function(){this.size=0,this.__data__={hash:new c,map:new(f||u),string:new c}}},function(t,i,a){var c=a(111),u=a(112),f=a(113),p=a(114),x=a(115);function S(C){var A=-1,B=C==null?0:C.length;for(this.clear();++A<B;){var L=C[A];this.set(L[0],L[1])}}S.prototype.clear=c,S.prototype.delete=u,S.prototype.get=f,S.prototype.has=p,S.prototype.set=x,t.exports=S},function(t,i,a){var c=a(24);t.exports=function(){this.__data__=c?c(null):{},this.size=0}},function(t,i){t.exports=function(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}},function(t,i,a){var c=a(24),u=Object.prototype.hasOwnProperty;t.exports=function(f){var p=this.__data__;if(c){var x=p[f];return x==="__lodash_hash_undefined__"?void 0:x}return u.call(p,f)?p[f]:void 0}},function(t,i,a){var c=a(24),u=Object.prototype.hasOwnProperty;t.exports=function(f){var p=this.__data__;return c?p[f]!==void 0:u.call(p,f)}},function(t,i,a){var c=a(24);t.exports=function(u,f){var p=this.__data__;return this.size+=this.has(u)?0:1,p[u]=c&&f===void 0?"__lodash_hash_undefined__":f,this}},function(t,i,a){var c=a(25);t.exports=function(u){var f=c(this,u).delete(u);return this.size-=f?1:0,f}},function(t,i){t.exports=function(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}},function(t,i,a){var c=a(25);t.exports=function(u){return c(this,u).get(u)}},function(t,i,a){var c=a(25);t.exports=function(u){return c(this,u).has(u)}},function(t,i,a){var c=a(25);t.exports=function(u,f){var p=c(this,u),x=p.size;return p.set(u,f),this.size+=p.size==x?0:1,this}},function(t,i,a){var c=a(122)();t.exports=c},function(t,i){t.exports=function(a){return function(c,u,f){for(var p=-1,x=Object(c),S=f(c),C=S.length;C--;){var A=S[a?C:++p];if(u(x[A],A,x)===!1)break}return c}}},function(t,i,a){var c=a(49),u=a(51),f=a(52),p=a(53),x=a(54),S=a(34),C=a(12),A=a(127),B=a(35),L=a(28),F=a(10),$=a(57),J=a(58),Y=a(59),ce=a(130);t.exports=function(X,pe,xe,q,V,H,te){var W=Y(X,xe),ee=Y(pe,xe),O=te.get(ee);if(O)c(X,xe,O);else{var Re=H?H(W,ee,xe+"",X,pe,te):void 0,qe=Re===void 0;if(qe){var ne=C(ee),Ee=!ne&&B(ee),Le=!ne&&!Ee&&J(ee);Re=ee,ne||Ee||Le?C(W)?Re=W:A(W)?Re=p(W):Ee?(qe=!1,Re=u(ee,!0)):Le?(qe=!1,Re=f(ee,!0)):Re=[]:$(ee)||S(ee)?(Re=W,S(W)?Re=ce(W):F(W)&&!L(W)||(Re=x(ee))):qe=!1}qe&&(te.set(ee,Re),V(Re,ee,q,H,te),te.delete(ee)),c(X,xe,Re)}}},function(t,i,a){var c=a(8).Uint8Array;t.exports=c},function(t,i,a){var c=a(10),u=Object.create,f=(function(){function p(){}return function(x){if(!c(x))return{};if(u)return u(x);p.prototype=x;var S=new p;return p.prototype=void 0,S}})();t.exports=f},function(t,i,a){var c=a(17),u=a(11);t.exports=function(f){return u(f)&&c(f)=="[object Arguments]"}},function(t,i,a){var c=a(26),u=a(11);t.exports=function(f){return u(f)&&c(f)}},function(t,i){t.exports=function(){return!1}},function(t,i,a){var c=a(17),u=a(56),f=a(11),p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p["[object Arguments]"]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p["[object Function]"]=p["[object Map]"]=p["[object Number]"]=p["[object Object]"]=p["[object RegExp]"]=p["[object Set]"]=p["[object String]"]=p["[object WeakMap]"]=!1,t.exports=function(x){return f(x)&&u(x.length)&&!!p[c(x)]}},function(t,i,a){var c=a(18),u=a(20);t.exports=function(f){return c(f,u(f))}},function(t,i){t.exports=function(a,c){for(var u=-1,f=Array(a);++u<a;)f[u]=c(u);return f}},function(t,i,a){var c=a(10),u=a(33),f=a(133),p=Object.prototype.hasOwnProperty;t.exports=function(x){if(!c(x))return f(x);var S=u(x),C=[];for(var A in x)(A!="constructor"||!S&&p.call(x,A))&&C.push(A);return C}},function(t,i){t.exports=function(a){var c=[];if(a!=null)for(var u in Object(a))c.push(u);return c}},function(t,i,a){var c=a(135),u=a(140);t.exports=function(f){return c((function(p,x){var S=-1,C=x.length,A=C>1?x[C-1]:void 0,B=C>2?x[2]:void 0;for(A=f.length>3&&typeof A=="function"?(C--,A):void 0,B&&u(x[0],x[1],B)&&(A=C<3?void 0:A,C=1),p=Object(p);++S<C;){var L=x[S];L&&f(p,L,S,A)}return p}))}},function(t,i,a){var c=a(63),u=a(64),f=a(65);t.exports=function(p,x){return f(u(p,x,c),p+"")}},function(t,i){t.exports=function(a,c,u){switch(u.length){case 0:return a.call(c);case 1:return a.call(c,u[0]);case 2:return a.call(c,u[0],u[1]);case 3:return a.call(c,u[0],u[1],u[2])}return a.apply(c,u)}},function(t,i,a){var c=a(138),u=a(50),f=a(63),p=u?function(x,S){return u(x,"toString",{configurable:!0,enumerable:!1,value:c(S),writable:!0})}:f;t.exports=p},function(t,i){t.exports=function(a){return function(){return a}}},function(t,i){var a=Date.now;t.exports=function(c){var u=0,f=0;return function(){var p=a(),x=16-(p-f);if(f=p,x>0){if(++u>=800)return arguments[0]}else u=0;return c.apply(void 0,arguments)}}},function(t,i,a){var c=a(23),u=a(26),f=a(62),p=a(10);t.exports=function(x,S,C){if(!p(C))return!1;var A=typeof S;return!!(A=="number"?u(C)&&f(S,C.length):A=="string"&&S in C)&&c(C[S],x)}},function(t,i){typeof window<"u"&&(window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)})),typeof Math.imul!="function"&&(Math.imul=function(a,c){var u=65535&a,f=65535&c;return u*f+((a>>>16&65535)*f+u*(c>>>16&65535)<<16>>>0)|0}),typeof Object.assign!="function"&&(Object.assign=function(a){if(a===null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),u=1;u<arguments.length;u++){var f=arguments[u];if(f!==null)for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(c[p]=f[p])}return c})},function(t,i){t.exports=function(a){if(Array.isArray(a))return a},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){var u=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(u!=null){var f,p,x,S,C=[],A=!0,B=!1;try{if(x=(u=u.call(a)).next,c===0){if(Object(u)!==u)return;A=!1}else for(;!(A=(f=x.call(u)).done)&&(C.push(f.value),C.length!==c);A=!0);}catch(L){B=!0,p=L}finally{try{if(!A&&u.return!=null&&(S=u.return(),Object(S)!==S))return}finally{if(B)throw p}}return C}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(9).default;t.exports=function(u,f){if(c(u)!="object"||!u)return u;var p=u[Symbol.toPrimitive];if(p!==void 0){var x=p.call(u,f||"default");if(c(x)!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(u)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(69),u=a(70),f=a(147),p=a(72),x=a(73),S=a(148),C=a(149);function A(){var B=u(),L=B.m(A),F=(Object.getPrototypeOf?Object.getPrototypeOf(L):L.__proto__).constructor;function $(ce){var X=typeof ce=="function"&&ce.constructor;return!!X&&(X===F||(X.displayName||X.name)==="GeneratorFunction")}var J={throw:1,return:2,break:3,continue:3};function Y(ce){var X,pe;return function(xe){X||(X={stop:function(){return pe(xe.a,2)},catch:function(){return xe.v},abrupt:function(q,V){return pe(xe.a,J[q],V)},delegateYield:function(q,V,H){return X.resultName=V,pe(xe.d,C(q),H)},finish:function(q){return pe(xe.f,q)}},pe=function(q,V,H){xe.p=X.prev,xe.n=X.next;try{return q(V,H)}finally{X.next=xe.n}}),X.resultName&&(X[X.resultName]=xe.v,X.resultName=void 0),X.sent=xe.v,X.next=xe.n;try{return ce.call(this,X)}finally{xe.p=X.prev,xe.n=X.next}}}return(t.exports=A=function(){return{wrap:function(ce,X,pe,xe){return B.w(Y(ce),X,pe,xe&&xe.reverse())},isGeneratorFunction:$,mark:B.m,awrap:function(ce,X){return new c(ce,X)},AsyncIterator:x,async:function(ce,X,pe,xe,q){return($(X)?p:f)(Y(ce),X,pe,xe,q)},keys:S,values:C}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=A,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(72);t.exports=function(u,f,p,x,S){var C=c(u,f,p,x,S);return C.next().then((function(A){return A.done?A.value:C.next()}))},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a){var c=Object(a),u=[];for(var f in c)u.unshift(f);return function p(){for(;u.length;)if((f=u.pop())in c)return p.value=f,p.done=!1,p;return p.done=!0,p}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(9).default;t.exports=function(u){if(u!=null){var f=u[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],p=0;if(f)return f.call(u);if(typeof u.next=="function")return u;if(!isNaN(u.length))return{next:function(){return u&&p>=u.length&&(u=void 0),{value:u&&u[p++],done:!u}}}}throw new TypeError(c(u)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(1);t.exports=function(u,f){for(;!{}.hasOwnProperty.call(u,f)&&(u=c(u))!==null;);return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(67);t.exports=function(u){if(Array.isArray(u))return c(u)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){t.exports=function(a,c){if(a==null)return{};var u={};for(var f in a)if({}.hasOwnProperty.call(a,f)){if(c.indexOf(f)!==-1)continue;u[f]=a[f]}return u},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(45),u=a(157),f=a(60),p=a(158),x=a(161),S=a(51),C=a(53),A=a(162),B=a(164),L=a(165),F=a(78),$=a(42),J=a(170),Y=a(171),ce=a(54),X=a(12),pe=a(35),xe=a(175),q=a(10),V=a(177),H=a(39),te=a(20),W={};W["[object Arguments]"]=W["[object Array]"]=W["[object ArrayBuffer]"]=W["[object DataView]"]=W["[object Boolean]"]=W["[object Date]"]=W["[object Float32Array]"]=W["[object Float64Array]"]=W["[object Int8Array]"]=W["[object Int16Array]"]=W["[object Int32Array]"]=W["[object Map]"]=W["[object Number]"]=W["[object Object]"]=W["[object RegExp]"]=W["[object Set]"]=W["[object String]"]=W["[object Symbol]"]=W["[object Uint8Array]"]=W["[object Uint8ClampedArray]"]=W["[object Uint16Array]"]=W["[object Uint32Array]"]=!0,W["[object Error]"]=W["[object Function]"]=W["[object WeakMap]"]=!1,t.exports=function ee(O,Re,qe,ne,Ee,Le){var Ae,Ge=1&Re,M=2&Re,se=4&Re;if(qe&&(Ae=Ee?qe(O,ne,Ee,Le):qe(O)),Ae!==void 0)return Ae;if(!q(O))return O;var ie=X(O);if(ie){if(Ae=J(O),!Ge)return C(O,Ae)}else{var he=$(O),Q=he=="[object Function]"||he=="[object GeneratorFunction]";if(pe(O))return S(O,Ge);if(he=="[object Object]"||he=="[object Arguments]"||Q&&!Ee){if(Ae=M||Q?{}:ce(O),!Ge)return M?B(O,x(Ae,O)):A(O,p(Ae,O))}else{if(!W[he])return Ee?O:{};Ae=Y(O,he,Ge)}}Le||(Le=new c);var de=Le.get(O);if(de)return de;Le.set(O,Ae),V(O)?O.forEach((function(Oe){Ae.add(ee(Oe,Re,qe,Oe,O,Le))})):xe(O)&&O.forEach((function(Oe,He){Ae.set(He,ee(Oe,Re,qe,He,O,Le))}));var fe=ie?void 0:(se?M?F:L:M?te:H)(O);return u(fe||O,(function(Oe,He){fe&&(Oe=O[He=Oe]),f(Ae,He,ee(Oe,Re,qe,He,O,Le))})),Ae}},function(t,i){t.exports=function(a,c){for(var u=-1,f=a==null?0:a.length;++u<f&&c(a[u],u,a)!==!1;);return a}},function(t,i,a){var c=a(18),u=a(39);t.exports=function(f,p){return f&&c(p,u(p),f)}},function(t,i,a){var c=a(33),u=a(160),f=Object.prototype.hasOwnProperty;t.exports=function(p){if(!c(p))return u(p);var x=[];for(var S in Object(p))f.call(p,S)&&S!="constructor"&&x.push(S);return x}},function(t,i,a){var c=a(55)(Object.keys,Object);t.exports=c},function(t,i,a){var c=a(18),u=a(20);t.exports=function(f,p){return f&&c(p,u(p),f)}},function(t,i,a){var c=a(18),u=a(40);t.exports=function(f,p){return c(f,u(f),p)}},function(t,i){t.exports=function(a,c){for(var u=-1,f=a==null?0:a.length,p=0,x=[];++u<f;){var S=a[u];c(S,u,a)&&(x[p++]=S)}return x}},function(t,i,a){var c=a(18),u=a(76);t.exports=function(f,p){return c(f,u(f),p)}},function(t,i,a){var c=a(77),u=a(40),f=a(39);t.exports=function(p){return c(p,f,u)}},function(t,i,a){var c=a(14)(a(8),"DataView");t.exports=c},function(t,i,a){var c=a(14)(a(8),"Promise");t.exports=c},function(t,i,a){var c=a(14)(a(8),"Set");t.exports=c},function(t,i,a){var c=a(14)(a(8),"WeakMap");t.exports=c},function(t,i){var a=Object.prototype.hasOwnProperty;t.exports=function(c){var u=c.length,f=new c.constructor(u);return u&&typeof c[0]=="string"&&a.call(c,"index")&&(f.index=c.index,f.input=c.input),f}},function(t,i,a){var c=a(31),u=a(172),f=a(173),p=a(174),x=a(52);t.exports=function(S,C,A){var B=S.constructor;switch(C){case"[object ArrayBuffer]":return c(S);case"[object Boolean]":case"[object Date]":return new B(+S);case"[object DataView]":return u(S,A);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return x(S,A);case"[object Map]":return new B;case"[object Number]":case"[object String]":return new B(S);case"[object RegExp]":return f(S);case"[object Set]":return new B;case"[object Symbol]":return p(S)}}},function(t,i,a){var c=a(31);t.exports=function(u,f){var p=f?c(u.buffer):u.buffer;return new u.constructor(p,u.byteOffset,u.byteLength)}},function(t,i){var a=/\w*$/;t.exports=function(c){var u=new c.constructor(c.source,a.exec(c));return u.lastIndex=c.lastIndex,u}},function(t,i,a){var c=a(19),u=c?c.prototype:void 0,f=u?u.valueOf:void 0;t.exports=function(p){return f?Object(f.call(p)):{}}},function(t,i,a){var c=a(176),u=a(36),f=a(37),p=f&&f.isMap,x=p?u(p):c;t.exports=x},function(t,i,a){var c=a(42),u=a(11);t.exports=function(f){return u(f)&&c(f)=="[object Map]"}},function(t,i,a){var c=a(178),u=a(36),f=a(37),p=f&&f.isSet,x=p?u(p):c;t.exports=x},function(t,i,a){var c=a(42),u=a(11);t.exports=function(f){return u(f)&&c(f)=="[object Set]"}},function(t,i,a){var c=a(43),u=a(186),f=a(187),p=a(79);t.exports=function(x,S){return S=c(S,x),(x=f(x,S))==null||delete x[p(u(S))]}},function(t,i,a){var c=a(12),u=a(44),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p=/^\w*$/;t.exports=function(x,S){if(c(x))return!1;var C=typeof x;return!(C!="number"&&C!="symbol"&&C!="boolean"&&x!=null&&!u(x))||p.test(x)||!f.test(x)||S!=null&&x in Object(S)}},function(t,i,a){var c=a(182),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f=/\\(\\)?/g,p=c((function(x){var S=[];return x.charCodeAt(0)===46&&S.push(""),x.replace(u,(function(C,A,B,L){S.push(B?L.replace(f,"$1"):A||C)})),S}));t.exports=p},function(t,i,a){var c=a(183);t.exports=function(u){var f=c(u,(function(x){return p.size===500&&p.clear(),x})),p=f.cache;return f}},function(t,i,a){var c=a(48);function u(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new TypeError("Expected a function");var x=function(){var S=arguments,C=p?p.apply(this,S):S[0],A=x.cache;if(A.has(C))return A.get(C);var B=f.apply(this,S);return x.cache=A.set(C,B)||A,B};return x.cache=new(u.Cache||c),x}u.Cache=c,t.exports=u},function(t,i,a){var c=a(185);t.exports=function(u){return u==null?"":c(u)}},function(t,i,a){var c=a(19),u=a(74),f=a(12),p=a(44),x=c?c.prototype:void 0,S=x?x.toString:void 0;t.exports=function C(A){if(typeof A=="string")return A;if(f(A))return u(A,C)+"";if(p(A))return S?S.call(A):"";var B=A+"";return B=="0"&&1/A==-1/0?"-0":B}},function(t,i){t.exports=function(a){var c=a==null?0:a.length;return c?a[c-1]:void 0}},function(t,i,a){var c=a(188),u=a(189);t.exports=function(f,p){return p.length<2?f:c(f,u(p,0,-1))}},function(t,i,a){var c=a(43),u=a(79);t.exports=function(f,p){for(var x=0,S=(p=c(p,f)).length;f!=null&&x<S;)f=f[u(p[x++])];return x&&x==S?f:void 0}},function(t,i){t.exports=function(a,c,u){var f=-1,p=a.length;c<0&&(c=-c>p?0:p+c),(u=u>p?p:u)<0&&(u+=p),p=c>u?0:u-c>>>0,c>>>=0;for(var x=Array(p);++f<p;)x[f]=a[f+c];return x}},function(t,i,a){var c=a(57);t.exports=function(u){return c(u)?void 0:u}},function(t,i,a){var c=a(192),u=a(64),f=a(65);t.exports=function(p){return f(u(p,void 0,c),p+"")}},function(t,i,a){var c=a(193);t.exports=function(u){return u!=null&&u.length?c(u,1):[]}},function(t,i,a){var c=a(41),u=a(194);t.exports=function f(p,x,S,C,A){var B=-1,L=p.length;for(S||(S=u),A||(A=[]);++B<L;){var F=p[B];x>0&&S(F)?x>1?f(F,x-1,S,C,A):c(A,F):C||(A[A.length]=F)}return A}},function(t,i,a){var c=a(19),u=a(34),f=a(12),p=c?c.isConcatSpreadable:void 0;t.exports=function(x){return f(x)||u(x)||!!(p&&x&&x[p])}},function(t,i){t.exports=function(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){var c=a(197),u=a(38);t.exports=function(f,p,x){if(c())return Reflect.construct.apply(null,arguments);var S=[null];S.push.apply(S,p);var C=new(f.bind.apply(f,S));return x&&u(C,x.prototype),C},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i){function a(){try{var c=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(t.exports=a=function(){return!!c},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,i,a){a.r(i),a.d(i,"BarcodeDecoder",(function(){return wl})),a.d(i,"Readers",(function(){return p})),a.d(i,"CameraAccess",(function(){return go})),a.d(i,"ImageDebug",(function(){return Ys})),a.d(i,"ImageWrapper",(function(){return un})),a.d(i,"ResultCollector",(function(){return Js}));var c={};a.r(c),a.d(c,"create",(function(){return V})),a.d(c,"clone",(function(){return H})),a.d(c,"copy",(function(){return te})),a.d(c,"identity",(function(){return W})),a.d(c,"fromValues",(function(){return ee})),a.d(c,"set",(function(){return O})),a.d(c,"transpose",(function(){return Re})),a.d(c,"invert",(function(){return qe})),a.d(c,"adjoint",(function(){return ne})),a.d(c,"determinant",(function(){return Ee})),a.d(c,"multiply",(function(){return Le})),a.d(c,"rotate",(function(){return Ae})),a.d(c,"scale",(function(){return Ge})),a.d(c,"fromRotation",(function(){return M})),a.d(c,"fromScaling",(function(){return se})),a.d(c,"str",(function(){return ie})),a.d(c,"frob",(function(){return he})),a.d(c,"LDU",(function(){return Q})),a.d(c,"add",(function(){return de})),a.d(c,"subtract",(function(){return fe})),a.d(c,"exactEquals",(function(){return Oe})),a.d(c,"equals",(function(){return He})),a.d(c,"multiplyScalar",(function(){return nt})),a.d(c,"multiplyScalarAndAdd",(function(){return Ve})),a.d(c,"mul",(function(){return Mt})),a.d(c,"sub",(function(){return Zt}));var u={};a.r(u),a.d(u,"create",(function(){return jt})),a.d(u,"clone",(function(){return Yt})),a.d(u,"fromValues",(function(){return xt})),a.d(u,"copy",(function(){return it})),a.d(u,"set",(function(){return Bt})),a.d(u,"add",(function(){return Ot})),a.d(u,"subtract",(function(){return Lt})),a.d(u,"multiply",(function(){return br})),a.d(u,"divide",(function(){return Sn})),a.d(u,"ceil",(function(){return Mr})),a.d(u,"floor",(function(){return Pt})),a.d(u,"min",(function(){return Er})),a.d(u,"max",(function(){return Yr})),a.d(u,"round",(function(){return Qr})),a.d(u,"scale",(function(){return Or})),a.d(u,"scaleAndAdd",(function(){return Ss})),a.d(u,"distance",(function(){return Lr})),a.d(u,"squaredDistance",(function(){return kn})),a.d(u,"length",(function(){return Jn})),a.d(u,"squaredLength",(function(){return zn})),a.d(u,"negate",(function(){return mn})),a.d(u,"inverse",(function(){return Fn})),a.d(u,"normalize",(function(){return zt})),a.d(u,"dot",(function(){return ve})),a.d(u,"cross",(function(){return De})),a.d(u,"lerp",(function(){return rt})),a.d(u,"random",(function(){return dt})),a.d(u,"transformMat2",(function(){return yt})),a.d(u,"transformMat2d",(function(){return kt})),a.d(u,"transformMat3",(function(){return cn})),a.d(u,"transformMat4",(function(){return Dn})),a.d(u,"rotate",(function(){return nn})),a.d(u,"angle",(function(){return Zn})),a.d(u,"signedAngle",(function(){return Kr})),a.d(u,"zero",(function(){return In})),a.d(u,"str",(function(){return qn})),a.d(u,"exactEquals",(function(){return Sr})),a.d(u,"equals",(function(){return ge})),a.d(u,"len",(function(){return $e})),a.d(u,"sub",(function(){return Z})),a.d(u,"mul",(function(){return je})),a.d(u,"div",(function(){return We})),a.d(u,"dist",(function(){return Qe})),a.d(u,"sqrDist",(function(){return ot})),a.d(u,"sqrLen",(function(){return lt})),a.d(u,"forEach",(function(){return bt}));var f={};a.r(f),a.d(f,"create",(function(){return Mn})),a.d(f,"clone",(function(){return er})),a.d(f,"length",(function(){return Tr})),a.d(f,"fromValues",(function(){return zs})),a.d(f,"copy",(function(){return hi})),a.d(f,"set",(function(){return os})),a.d(f,"add",(function(){return di})),a.d(f,"subtract",(function(){return vt})),a.d(f,"multiply",(function(){return Hn})),a.d(f,"divide",(function(){return tr})),a.d(f,"ceil",(function(){return Fs})),a.d(f,"floor",(function(){return On})),a.d(f,"min",(function(){return al})),a.d(f,"max",(function(){return ol})),a.d(f,"round",(function(){return qs})),a.d(f,"scale",(function(){return Hs})),a.d(f,"scaleAndAdd",(function(){return ll})),a.d(f,"distance",(function(){return eo})),a.d(f,"squaredDistance",(function(){return to})),a.d(f,"squaredLength",(function(){return cl})),a.d(f,"negate",(function(){return no})),a.d(f,"inverse",(function(){return Xr})),a.d(f,"normalize",(function(){return Ln})),a.d(f,"dot",(function(){return Pn})),a.d(f,"cross",(function(){return Mi})),a.d(f,"lerp",(function(){return ul})),a.d(f,"slerp",(function(){return rn})),a.d(f,"hermite",(function(){return ca})),a.d(f,"bezier",(function(){return $s})),a.d(f,"random",(function(){return ua})),a.d(f,"transformMat4",(function(){return Pr})),a.d(f,"transformMat3",(function(){return ro})),a.d(f,"transformQuat",(function(){return Xl})),a.d(f,"rotateX",(function(){return hl})),a.d(f,"rotateY",(function(){return Oi})),a.d(f,"rotateZ",(function(){return Jl})),a.d(f,"angle",(function(){return Li})),a.d(f,"zero",(function(){return Vr})),a.d(f,"str",(function(){return Zl})),a.d(f,"exactEquals",(function(){return dl})),a.d(f,"equals",(function(){return fl})),a.d(f,"sub",(function(){return so})),a.d(f,"mul",(function(){return ec})),a.d(f,"div",(function(){return Pi})),a.d(f,"dist",(function(){return io})),a.d(f,"sqrDist",(function(){return Ts})),a.d(f,"len",(function(){return ml})),a.d(f,"sqrLen",(function(){return ls})),a.d(f,"forEach",(function(){return Vi}));var p={};a.r(p),a.d(p,"BarcodeReader",(function(){return Zr})),a.d(p,"TwoOfFiveReader",(function(){return yl})),a.d(p,"NewCodabarReader",(function(){return _r})),a.d(p,"Code128Reader",(function(){return bl})),a.d(p,"Code32Reader",(function(){return Kt})),a.d(p,"Code39Reader",(function(){return Ye})),a.d(p,"Code39VINReader",(function(){return us})),a.d(p,"Code93Reader",(function(){return ga})),a.d(p,"EAN2Reader",(function(){return uu})),a.d(p,"EAN5Reader",(function(){return fu})),a.d(p,"EAN8Reader",(function(){return mu})),a.d(p,"EANReader",(function(){return As})),a.d(p,"I2of5Reader",(function(){return Gh})),a.d(p,"PharmacodeReader",(function(){return ic})),a.d(p,"UPCEReader",(function(){return ac})),a.d(p,"UPCReader",(function(){return va}));var x=a(9),S=a.n(x),C=a(15),A=a.n(C),B=(a(141),a(80)),L=a.n(B),F=a(2),$=a.n(F),J=a(3),Y=a.n(J),ce=a(0),X=a.n(ce),pe=typeof Float32Array<"u"?Float32Array:Array,xe=Math.random;function q(g){return g>=0?Math.round(g):g%.5==0?Math.floor(g):Math.round(g)}function V(){var g=new pe(4);return pe!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}function H(g){var b=new pe(4);return b[0]=g[0],b[1]=g[1],b[2]=g[2],b[3]=g[3],b}function te(g,b){return g[0]=b[0],g[1]=b[1],g[2]=b[2],g[3]=b[3],g}function W(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=1,g}function ee(g,b,d,v){var _=new pe(4);return _[0]=g,_[1]=b,_[2]=d,_[3]=v,_}function O(g,b,d,v,_){return g[0]=b,g[1]=d,g[2]=v,g[3]=_,g}function Re(g,b){if(g===b){var d=b[1];g[1]=b[2],g[2]=d}else g[0]=b[0],g[1]=b[2],g[2]=b[1],g[3]=b[3];return g}function qe(g,b){var d=b[0],v=b[1],_=b[2],E=b[3],T=d*E-_*v;return T?(T=1/T,g[0]=E*T,g[1]=-v*T,g[2]=-_*T,g[3]=d*T,g):null}function ne(g,b){var d=b[0];return g[0]=b[3],g[1]=-b[1],g[2]=-b[2],g[3]=d,g}function Ee(g){return g[0]*g[3]-g[2]*g[1]}function Le(g,b,d){var v=b[0],_=b[1],E=b[2],T=b[3],R=d[0],D=d[1],I=d[2],U=d[3];return g[0]=v*R+E*D,g[1]=_*R+T*D,g[2]=v*I+E*U,g[3]=_*I+T*U,g}function Ae(g,b,d){var v=b[0],_=b[1],E=b[2],T=b[3],R=Math.sin(d),D=Math.cos(d);return g[0]=v*D+E*R,g[1]=_*D+T*R,g[2]=v*-R+E*D,g[3]=_*-R+T*D,g}function Ge(g,b,d){var v=b[0],_=b[1],E=b[2],T=b[3],R=d[0],D=d[1];return g[0]=v*R,g[1]=_*R,g[2]=E*D,g[3]=T*D,g}function M(g,b){var d=Math.sin(b),v=Math.cos(b);return g[0]=v,g[1]=d,g[2]=-d,g[3]=v,g}function se(g,b){return g[0]=b[0],g[1]=0,g[2]=0,g[3]=b[1],g}function ie(g){return"mat2("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+")"}function he(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1]+g[2]*g[2]+g[3]*g[3])}function Q(g,b,d,v){return g[2]=v[2]/v[0],d[0]=v[0],d[1]=v[1],d[3]=v[3]-g[2]*d[1],[g,b,d]}function de(g,b,d){return g[0]=b[0]+d[0],g[1]=b[1]+d[1],g[2]=b[2]+d[2],g[3]=b[3]+d[3],g}function fe(g,b,d){return g[0]=b[0]-d[0],g[1]=b[1]-d[1],g[2]=b[2]-d[2],g[3]=b[3]-d[3],g}function Oe(g,b){return g[0]===b[0]&&g[1]===b[1]&&g[2]===b[2]&&g[3]===b[3]}function He(g,b){var d=g[0],v=g[1],_=g[2],E=g[3],T=b[0],R=b[1],D=b[2],I=b[3];return Math.abs(d-T)<=1e-6*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(v-R)<=1e-6*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(_-D)<=1e-6*Math.max(1,Math.abs(_),Math.abs(D))&&Math.abs(E-I)<=1e-6*Math.max(1,Math.abs(E),Math.abs(I))}function nt(g,b,d){return g[0]=b[0]*d,g[1]=b[1]*d,g[2]=b[2]*d,g[3]=b[3]*d,g}function Ve(g,b,d,v){return g[0]=b[0]+d[0]*v,g[1]=b[1]+d[1]*v,g[2]=b[2]+d[2]*v,g[3]=b[3]+d[3]*v,g}var Mt=Le,Zt=fe;function jt(){var g=new pe(2);return pe!=Float32Array&&(g[0]=0,g[1]=0),g}function Yt(g){var b=new pe(2);return b[0]=g[0],b[1]=g[1],b}function xt(g,b){var d=new pe(2);return d[0]=g,d[1]=b,d}function it(g,b){return g[0]=b[0],g[1]=b[1],g}function Bt(g,b,d){return g[0]=b,g[1]=d,g}function Ot(g,b,d){return g[0]=b[0]+d[0],g[1]=b[1]+d[1],g}function Lt(g,b,d){return g[0]=b[0]-d[0],g[1]=b[1]-d[1],g}function br(g,b,d){return g[0]=b[0]*d[0],g[1]=b[1]*d[1],g}function Sn(g,b,d){return g[0]=b[0]/d[0],g[1]=b[1]/d[1],g}function Mr(g,b){return g[0]=Math.ceil(b[0]),g[1]=Math.ceil(b[1]),g}function Pt(g,b){return g[0]=Math.floor(b[0]),g[1]=Math.floor(b[1]),g}function Er(g,b,d){return g[0]=Math.min(b[0],d[0]),g[1]=Math.min(b[1],d[1]),g}function Yr(g,b,d){return g[0]=Math.max(b[0],d[0]),g[1]=Math.max(b[1],d[1]),g}function Qr(g,b){return g[0]=q(b[0]),g[1]=q(b[1]),g}function Or(g,b,d){return g[0]=b[0]*d,g[1]=b[1]*d,g}function Ss(g,b,d,v){return g[0]=b[0]+d[0]*v,g[1]=b[1]+d[1]*v,g}function Lr(g,b){var d=b[0]-g[0],v=b[1]-g[1];return Math.sqrt(d*d+v*v)}function kn(g,b){var d=b[0]-g[0],v=b[1]-g[1];return d*d+v*v}function Jn(g){var b=g[0],d=g[1];return Math.sqrt(b*b+d*d)}function zn(g){var b=g[0],d=g[1];return b*b+d*d}function mn(g,b){return g[0]=-b[0],g[1]=-b[1],g}function Fn(g,b){return g[0]=1/b[0],g[1]=1/b[1],g}function zt(g,b){var d=b[0],v=b[1],_=d*d+v*v;return _>0&&(_=1/Math.sqrt(_)),g[0]=b[0]*_,g[1]=b[1]*_,g}function ve(g,b){return g[0]*b[0]+g[1]*b[1]}function De(g,b,d){var v=b[0]*d[1]-b[1]*d[0];return g[0]=g[1]=0,g[2]=v,g}function rt(g,b,d,v){var _=b[0],E=b[1];return g[0]=_+v*(d[0]-_),g[1]=E+v*(d[1]-E),g}function dt(g,b){b=b===void 0?1:b;var d=2*xe()*Math.PI;return g[0]=Math.cos(d)*b,g[1]=Math.sin(d)*b,g}function yt(g,b,d){var v=b[0],_=b[1];return g[0]=d[0]*v+d[2]*_,g[1]=d[1]*v+d[3]*_,g}function kt(g,b,d){var v=b[0],_=b[1];return g[0]=d[0]*v+d[2]*_+d[4],g[1]=d[1]*v+d[3]*_+d[5],g}function cn(g,b,d){var v=b[0],_=b[1];return g[0]=d[0]*v+d[3]*_+d[6],g[1]=d[1]*v+d[4]*_+d[7],g}function Dn(g,b,d){var v=b[0],_=b[1];return g[0]=d[0]*v+d[4]*_+d[12],g[1]=d[1]*v+d[5]*_+d[13],g}function nn(g,b,d,v){var _=b[0]-d[0],E=b[1]-d[1],T=Math.sin(v),R=Math.cos(v);return g[0]=_*R-E*T+d[0],g[1]=_*T+E*R+d[1],g}function Zn(g,b){var d=g[0],v=g[1],_=b[0],E=b[1];return Math.abs(Math.atan2(v*_-d*E,d*_+v*E))}function Kr(g,b){var d=g[0],v=g[1],_=b[0],E=b[1];return Math.atan2(d*E-v*_,d*_+v*E)}function In(g){return g[0]=0,g[1]=0,g}function qn(g){return"vec2("+g[0]+", "+g[1]+")"}function Sr(g,b){return g[0]===b[0]&&g[1]===b[1]}function ge(g,b){var d=g[0],v=g[1],_=b[0],E=b[1];return Math.abs(d-_)<=1e-6*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(v-E)<=1e-6*Math.max(1,Math.abs(v),Math.abs(E))}var Be,$e=Jn,Z=Lt,je=br,We=Sn,Qe=Lr,ot=kn,lt=zn,bt=(Be=jt(),function(g,b,d,v,_,E){var T,R;for(b||(b=2),d||(d=0),R=v?Math.min(v*b+d,g.length):g.length,T=d;T<R;T+=b)Be[0]=g[T],Be[1]=g[T+1],_(Be,Be,E),g[T]=Be[0],g[T+1]=Be[1];return g});function Mn(){var g=new pe(3);return pe!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g}function er(g){var b=new pe(3);return b[0]=g[0],b[1]=g[1],b[2]=g[2],b}function Tr(g){var b=g[0],d=g[1],v=g[2];return Math.sqrt(b*b+d*d+v*v)}function zs(g,b,d){var v=new pe(3);return v[0]=g,v[1]=b,v[2]=d,v}function hi(g,b){return g[0]=b[0],g[1]=b[1],g[2]=b[2],g}function os(g,b,d,v){return g[0]=b,g[1]=d,g[2]=v,g}function di(g,b,d){return g[0]=b[0]+d[0],g[1]=b[1]+d[1],g[2]=b[2]+d[2],g}function vt(g,b,d){return g[0]=b[0]-d[0],g[1]=b[1]-d[1],g[2]=b[2]-d[2],g}function Hn(g,b,d){return g[0]=b[0]*d[0],g[1]=b[1]*d[1],g[2]=b[2]*d[2],g}function tr(g,b,d){return g[0]=b[0]/d[0],g[1]=b[1]/d[1],g[2]=b[2]/d[2],g}function Fs(g,b){return g[0]=Math.ceil(b[0]),g[1]=Math.ceil(b[1]),g[2]=Math.ceil(b[2]),g}function On(g,b){return g[0]=Math.floor(b[0]),g[1]=Math.floor(b[1]),g[2]=Math.floor(b[2]),g}function al(g,b,d){return g[0]=Math.min(b[0],d[0]),g[1]=Math.min(b[1],d[1]),g[2]=Math.min(b[2],d[2]),g}function ol(g,b,d){return g[0]=Math.max(b[0],d[0]),g[1]=Math.max(b[1],d[1]),g[2]=Math.max(b[2],d[2]),g}function qs(g,b){return g[0]=q(b[0]),g[1]=q(b[1]),g[2]=q(b[2]),g}function Hs(g,b,d){return g[0]=b[0]*d,g[1]=b[1]*d,g[2]=b[2]*d,g}function ll(g,b,d,v){return g[0]=b[0]+d[0]*v,g[1]=b[1]+d[1]*v,g[2]=b[2]+d[2]*v,g}function eo(g,b){var d=b[0]-g[0],v=b[1]-g[1],_=b[2]-g[2];return Math.sqrt(d*d+v*v+_*_)}function to(g,b){var d=b[0]-g[0],v=b[1]-g[1],_=b[2]-g[2];return d*d+v*v+_*_}function cl(g){var b=g[0],d=g[1],v=g[2];return b*b+d*d+v*v}function no(g,b){return g[0]=-b[0],g[1]=-b[1],g[2]=-b[2],g}function Xr(g,b){return g[0]=1/b[0],g[1]=1/b[1],g[2]=1/b[2],g}function Ln(g,b){var d=b[0],v=b[1],_=b[2],E=d*d+v*v+_*_;return E>0&&(E=1/Math.sqrt(E)),g[0]=b[0]*E,g[1]=b[1]*E,g[2]=b[2]*E,g}function Pn(g,b){return g[0]*b[0]+g[1]*b[1]+g[2]*b[2]}function Mi(g,b,d){var v=b[0],_=b[1],E=b[2],T=d[0],R=d[1],D=d[2];return g[0]=_*D-E*R,g[1]=E*T-v*D,g[2]=v*R-_*T,g}function ul(g,b,d,v){var _=b[0],E=b[1],T=b[2];return g[0]=_+v*(d[0]-_),g[1]=E+v*(d[1]-E),g[2]=T+v*(d[2]-T),g}function rn(g,b,d,v){var _=Math.acos(Math.min(Math.max(Pn(b,d),-1),1)),E=Math.sin(_),T=Math.sin((1-v)*_)/E,R=Math.sin(v*_)/E;return g[0]=T*b[0]+R*d[0],g[1]=T*b[1]+R*d[1],g[2]=T*b[2]+R*d[2],g}function ca(g,b,d,v,_,E){var T=E*E,R=T*(2*E-3)+1,D=T*(E-2)+E,I=T*(E-1),U=T*(3-2*E);return g[0]=b[0]*R+d[0]*D+v[0]*I+_[0]*U,g[1]=b[1]*R+d[1]*D+v[1]*I+_[1]*U,g[2]=b[2]*R+d[2]*D+v[2]*I+_[2]*U,g}function $s(g,b,d,v,_,E){var T=1-E,R=T*T,D=E*E,I=R*T,U=3*E*R,K=3*D*T,ae=D*E;return g[0]=b[0]*I+d[0]*U+v[0]*K+_[0]*ae,g[1]=b[1]*I+d[1]*U+v[1]*K+_[1]*ae,g[2]=b[2]*I+d[2]*U+v[2]*K+_[2]*ae,g}function ua(g,b){b=b===void 0?1:b;var d=2*xe()*Math.PI,v=2*xe()-1,_=Math.sqrt(1-v*v)*b;return g[0]=Math.cos(d)*_,g[1]=Math.sin(d)*_,g[2]=v*b,g}function Pr(g,b,d){var v=b[0],_=b[1],E=b[2],T=d[3]*v+d[7]*_+d[11]*E+d[15];return T=T||1,g[0]=(d[0]*v+d[4]*_+d[8]*E+d[12])/T,g[1]=(d[1]*v+d[5]*_+d[9]*E+d[13])/T,g[2]=(d[2]*v+d[6]*_+d[10]*E+d[14])/T,g}function ro(g,b,d){var v=b[0],_=b[1],E=b[2];return g[0]=v*d[0]+_*d[3]+E*d[6],g[1]=v*d[1]+_*d[4]+E*d[7],g[2]=v*d[2]+_*d[5]+E*d[8],g}function Xl(g,b,d){var v=d[0],_=d[1],E=d[2],T=d[3],R=b[0],D=b[1],I=b[2],U=_*I-E*D,K=E*R-v*I,ae=v*D-_*R;return U+=U,K+=K,ae+=ae,g[0]=R+T*U+_*ae-E*K,g[1]=D+T*K+E*U-v*ae,g[2]=I+T*ae+v*K-_*U,g}function hl(g,b,d,v){var _=[],E=[];return _[0]=b[0]-d[0],_[1]=b[1]-d[1],_[2]=b[2]-d[2],E[0]=_[0],E[1]=_[1]*Math.cos(v)-_[2]*Math.sin(v),E[2]=_[1]*Math.sin(v)+_[2]*Math.cos(v),g[0]=E[0]+d[0],g[1]=E[1]+d[1],g[2]=E[2]+d[2],g}function Oi(g,b,d,v){var _=[],E=[];return _[0]=b[0]-d[0],_[1]=b[1]-d[1],_[2]=b[2]-d[2],E[0]=_[2]*Math.sin(v)+_[0]*Math.cos(v),E[1]=_[1],E[2]=_[2]*Math.cos(v)-_[0]*Math.sin(v),g[0]=E[0]+d[0],g[1]=E[1]+d[1],g[2]=E[2]+d[2],g}function Jl(g,b,d,v){var _=[],E=[];return _[0]=b[0]-d[0],_[1]=b[1]-d[1],_[2]=b[2]-d[2],E[0]=_[0]*Math.cos(v)-_[1]*Math.sin(v),E[1]=_[0]*Math.sin(v)+_[1]*Math.cos(v),E[2]=_[2],g[0]=E[0]+d[0],g[1]=E[1]+d[1],g[2]=E[2]+d[2],g}function Li(g,b){var d=g[0],v=g[1],_=g[2],E=b[0],T=b[1],R=b[2],D=Math.sqrt((d*d+v*v+_*_)*(E*E+T*T+R*R)),I=D&&Pn(g,b)/D;return Math.acos(Math.min(Math.max(I,-1),1))}function Vr(g){return g[0]=0,g[1]=0,g[2]=0,g}function Zl(g){return"vec3("+g[0]+", "+g[1]+", "+g[2]+")"}function dl(g,b){return g[0]===b[0]&&g[1]===b[1]&&g[2]===b[2]}function fl(g,b){var d=g[0],v=g[1],_=g[2],E=b[0],T=b[1],R=b[2];return Math.abs(d-E)<=1e-6*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(v-T)<=1e-6*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(_-R)<=1e-6*Math.max(1,Math.abs(_),Math.abs(R))}var so=vt,ec=Hn,Pi=tr,io=eo,Ts=to,ml=Tr,ls=cl,Vi=(function(){var g=Mn();return function(b,d,v,_,E,T){var R,D;for(d||(d=3),v||(v=0),D=_?Math.min(_*d+v,b.length):b.length,R=v;R<D;R+=d)g[0]=b[R],g[1]=b[R+1],g[2]=b[R+2],E(g,g,T),b[R]=g[0],b[R+1]=g[1],b[R+2]=g[2];return b}})(),Cr=function(g,b){g.fill(b)},ha=function(g){for(var b=0,d=0;d<g.length;d++)g[d]>g[b]&&(b=d);return b},Ui=function(g){for(var b=g.length,d=0;b--;)d+=g[b];return d},Bi=function(g,b){var d=[],v={rad:0,vec:u.clone([0,0])},_={};function E(R){_[R.id]=R,d.push(R)}function T(){var R,D=0;for(R=0;R<d.length;R++)D+=d[R].rad;v.rad=D/d.length,v.vec=u.clone([Math.cos(v.rad),Math.sin(v.rad)])}return E(g),T(),{add:function(R){_[R.id]||(E(R),T())},fits:function(R){return Math.abs(u.dot(R.point.vec,v.vec))>b},getPoints:function(){return d},getCenter:function(){return v}}},Cs=function(g,b,d){return{rad:g[d],point:g,id:b}};function Ur(g,b){return{x:g,y:b,toVec2:function(){return u.clone([this.x,this.y])},toVec3:function(){return f.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function da(g,b){b||(b=8);for(var d=g.data,v=d.length,_=8-b,E=new Int32Array(1<<b);v--;)E[d[v]>>_]++;return E}function on(g,b){var d=(function(v){var _,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,T=8-E;function R(K,ae){for(var ue=0,Ce=K;Ce<=ae;Ce++)ue+=_[Ce];return ue}function D(K,ae){for(var ue=0,Ce=K;Ce<=ae;Ce++)ue+=Ce*_[Ce];return ue}function I(){var K,ae,ue,Ce,oe=[0],we=(1<<E)-1;_=da(v,E);for(var ke=1;ke<we;ke++)(ue=(K=R(0,ke))*(ae=R(ke+1,we)))===0&&(ue=1),Ce=D(0,ke)*ae-D(ke+1,we)*K,oe[ke]=Ce*Ce/ue;return ha(oe)}var U=I();return U<<T})(g);return(function(v,_,E){E||(E=v);for(var T=v.data,R=T.length,D=E.data;R--;)D[R]=T[R]<_?1:0})(g,d,b),d}function Gs(g,b,d){var v=g.length/4|0;if(d&&d.singleChannel===!0)for(var _=0;_<v;_++){var E=g[4*_+3];b[_]=E===0?255:g[4*_+0]}else for(var T=0;T<v;T++){var R=g[4*T+3];b[T]=R===0?255:.299*g[4*T+0]+.587*g[4*T+1]+.114*g[4*T+2]}}function pl(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],d=g[0],v=g[1],_=g[2],E=_*v,T=E*(1-Math.abs(d/60%2-1)),R=_-E,D=0,I=0,U=0;return d<60?(D=E,I=T):d<120?(D=T,I=E):d<180?(I=E,U=T):d<240?(I=T,U=E):d<300?(D=T,U=E):d<360&&(D=E,U=T),b[0]=255*(D+R)|0,b[1]=255*(I+R)|0,b[2]=255*(U+R)|0,b}function Ws(g){if(!Number.isFinite(g)||g<1)return[];for(var b=[],d=[],v=Math.sqrt(g),_=1;_<=v;_++)g%_==0&&(d.push(_),_!==g/_&&b.unshift(Math.floor(g/_)));return d.concat(b)}function ao(g,b){var d,v=Ws(b.x),_=Ws(b.y),E=Math.max(b.x,b.y),T=(function(ue,Ce){for(var oe=0,we=0,ke=[];oe<ue.length&&we<Ce.length;)ue[oe]===Ce[we]?(ke.push(ue[oe]),oe++,we++):ue[oe]>Ce[we]?we++:oe++;return ke})(v,_),R=[8,10,15,20,32,60,80],D={"x-small":5,small:4,medium:3,large:2,"x-large":1},I=D[g]||D.medium,U=R[I],K=Math.floor(E/U);function ae(ue){for(var Ce=0,oe=ue[Math.floor(ue.length/2)];Ce<ue.length-1&&ue[Ce]<K;)Ce++;return Ce>0&&(oe=Math.abs(ue[Ce]-K)>Math.abs(ue[Ce-1]-K)?ue[Ce-1]:ue[Ce]),K/oe<R[I+1]/R[I]&&K/oe>R[I-1]/R[I]?{x:oe,y:oe}:null}return(d=ae(T))||(d=ae(Ws(E)))||(d=ae(Ws(K*U))),d||(d={x:Math.max(1,b.x),y:Math.max(1,b.y)}),d}var zi={top:function(g,b){return g.unit==="%"?Math.floor(b.height*(g.value/100)):null},right:function(g,b){return g.unit==="%"?Math.floor(b.width-b.width*(g.value/100)):null},bottom:function(g,b){return g.unit==="%"?Math.floor(b.height-b.height*(g.value/100)):null},left:function(g,b){return g.unit==="%"?Math.floor(b.width*(g.value/100)):null}};function fi(g,b,d){var v={width:g,height:b},_=Object.keys(d).reduce((function(E,T){if(!zi[T])return E;var R=(function(I){return{value:parseFloat(I),unit:(I.indexOf("%"),I.length,"%")}})(d[T]),D=zi[T](R,v);return E[T]=D,E}),{});return{sx:_.left,sy:_.top,sw:_.right-_.left,sh:_.bottom-_.top}}function Jr(g){if(g<0)throw new Error("expected positive number, received ".concat(g))}var un=(function(){return Y()((function g(b,d){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uint8Array,_=arguments.length>3?arguments[3]:void 0;$()(this,g),X()(this,"data",void 0),X()(this,"size",void 0),X()(this,"indexMapping",void 0),d?this.data=d:(this.data=new v(b.x*b.y),_&&Cr(this.data,0)),this.size=b}),[{key:"inImageWithBorder",value:function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Jr(b),g.x>=0&&g.y>=0&&g.x<this.size.x+2*b&&g.y<this.size.y+2*b}},{key:"subImageAsCopy",value:function(g,b){Jr(b.x),Jr(b.y);for(var d=g.size,v=d.x,_=d.y,E=0;E<v;E++)for(var T=0;T<_;T++)g.data[T*v+E]=this.data[(b.y+T)*this.size.x+b.x+E];return g}},{key:"get",value:function(g,b){return this.data[b*this.size.x+g]}},{key:"getSafe",value:function(g,b){if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(var d=0;d<this.size.x;d++)this.indexMapping.x[d]=d,this.indexMapping.x[d+this.size.x]=d;for(var v=0;v<this.size.y;v++)this.indexMapping.y[v]=v,this.indexMapping.y[v+this.size.y]=v}return this.data[this.indexMapping.y[b+this.size.y]*this.size.x+this.indexMapping.x[g+this.size.x]]}},{key:"set",value:function(g,b,d){return this.data[b*this.size.x+g]=d,delete this.indexMapping,this}},{key:"zeroBorder",value:function(){for(var g=this.size,b=g.x,d=g.y,v=0;v<b;v++)this.data[v]=this.data[(d-1)*b+v]=0;for(var _=1;_<d-1;_++)this.data[_*b]=this.data[_*b+(b-1)]=0;return delete this.indexMapping,this}},{key:"moments",value:function(g){var b,d,v,_,E,T,R,D,I,U,K=this.data,ae=this.size.y,ue=this.size.x,Ce=[],oe=[],we=Math.PI,ke=we/4;if(g<=0)return oe;for(E=0;E<g;E++)Ce[E]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(d=0;d<ae;d++)for(_=d*d,b=0;b<ue;b++)(v=K[d*ue+b])>0&&((T=Ce[v-1]).m00+=1,T.m01+=d,T.m10+=b,T.m11+=b*d,T.m02+=_,T.m20+=b*b);for(E=0;E<g;E++)T=Ce[E],isNaN(T.m00)||T.m00===0||(D=T.m10/T.m00,I=T.m01/T.m00,R=T.m11/T.m00-D*I,U=(T.m02/T.m00-I*I-(T.m20/T.m00-D*D))/(2*R),U=.5*Math.atan(U)+(R>=0?ke:-ke)+we,T.theta=(180*U/we+90)%180-90,T.theta<0&&(T.theta+=180),T.rad=U>we?U-we:U,T.vec=u.clone([Math.cos(U),Math.sin(U)]),oe.push(T));return oe}},{key:"getAsRGBA",value:function(){for(var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,b=new Uint8ClampedArray(4*this.size.x*this.size.y),d=0;d<this.size.y;d++)for(var v=0;v<this.size.x;v++){var _=d*this.size.x+v,E=this.get(v,d)*g;b[4*_+0]=E,b[4*_+1]=E,b[4*_+2]=E,b[4*_+3]=255}return b}},{key:"show",value:function(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;console.warn("* imagewrapper show getcontext 2d");var d=g.getContext("2d");if(!d)throw new Error("Unable to get canvas context");var v=d.getImageData(0,0,g.width,g.height),_=this.getAsRGBA(b);g.width=this.size.x,g.height=this.size.y;var E=new ImageData(_,v.width,v.height);d.putImageData(E,0,0)}},{key:"overlay",value:function(g,b,d){var v=b<0||b>360?360:b,_=[0,1,1],E=[0,0,0],T=[255,255,255],R=[0,0,0];console.warn("* imagewrapper overlay getcontext 2d");var D=g.getContext("2d");if(!D)throw new Error("Unable to get canvas context");for(var I=D.getImageData(d.x,d.y,this.size.x,this.size.y),U=I.data,K=this.data.length;K--;){_[0]=this.data[K]*v;var ae=4*K,ue=_[0]<=0?T:_[0]>=360?R:pl(_,E),Ce=L()(ue,3);U[ae]=Ce[0],U[ae+1]=Ce[1],U[ae+2]=Ce[2],U[ae+3]=255}D.putImageData(I,d.x,d.y)}}])})(),mi=a(7),nr=a.n(mi),Fi=a(6),Cn=a.n(Fi),Ys={drawRect:function(g,b,d,v){d.strokeStyle=v.color,d.fillStyle=v.color,d.lineWidth=v.lineWidth||1,d.beginPath(),d.strokeRect(g.x,g.y,b.x,b.y)},drawPath:function(g,b,d,v){d.strokeStyle=v.color,d.fillStyle=v.color,d.lineWidth=v.lineWidth,d.beginPath(),d.moveTo(g[0][b.x],g[0][b.y]);for(var _=1;_<g.length;_++)d.lineTo(g[_][b.x],g[_][b.y]);d.closePath(),d.stroke()},drawImage:function(g,b,d){var v=d.getImageData(0,0,b.x,b.y),_=v.data,E=_.length,T=g.length;if(E/T!=4)return!1;for(;T--;){var R=g[T];_[--E]=255,_[--E]=R,_[--E]=R,_[--E]=R}return d.putImageData(v,0,0),!0}},oo=a(4),pn=a.n(oo),lo=a(1),Ct=a.n(lo),fa=a(5),$n=a.n(fa),gl=(function(g){return g[g.Forward=1]="Forward",g[g.Reverse=-1]="Reverse",g})({}),qi=(function(){return Y()((function g(b,d){$()(this,g),X()(this,"_row",[]),X()(this,"config",{}),X()(this,"supplements",[]),X()(this,"SINGLE_CODE_ERROR",0),X()(this,"FORMAT","unknown"),X()(this,"CONFIG_KEYS",{}),this._row=[],this.config=b||{},d&&(this.supplements=d)}),[{key:"_nextUnset",value:function(g){for(var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=b;d<g.length;d++)if(!g[d])return d;return g.length}},{key:"_matchPattern",value:function(g,b){for(var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.SINGLE_CODE_ERROR||1,v=0,_=0,E=0,T=0,R=0,D=0,I=0,U=0;U<g.length;U++)E+=g[U],T+=b[U];if(E<T)return Number.MAX_VALUE;d*=R=E/T;for(var K=0;K<g.length;K++){if(D=g[K],I=b[K]*R,(_=Math.abs(D-I)/I)>d)return Number.MAX_VALUE;v+=_}return v/T}},{key:"_nextSet",value:function(g){for(var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=b;d<g.length;d++)if(g[d])return d;return g.length}},{key:"_correctBars",value:function(g,b,d){for(var v=d.length,_=0;v--;)(_=g[d[v]]*(1-(1-b)/2))>1&&(g[d[v]]=_)}},{key:"decodePattern",value:function(g){this._row=g;var b=this.decode();return b===null?(this._row.reverse(),(b=this.decode())&&(b.direction=gl.Reverse,b.start=this._row.length-b.start,b.end=this._row.length-b.end)):b.direction=gl.Forward,b&&(b.format=this.FORMAT),b}},{key:"_matchRange",value:function(g,b,d){var v;for(v=g=g<0?0:g;v<b;v++)if(this._row[v]!==d)return!1;return!0}},{key:"_fillCounters",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._nextUnset(this._row),b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._row.length,d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],v=[],_=0;v[_]=0;for(var E=g;E<b;E++)this._row[E]^(d?1:0)?v[_]++:(v[++_]=1,d=!d);return v}},{key:"_toCounters",value:function(g,b){var d=b.length,v=this._row.length,_=!this._row[g],E=0;Cr(b,0);for(var T=g;T<v;T++)if(this._row[T]^(_?1:0))b[E]++;else{if(++E===d)break;b[E]=1,_=!_}return b}},{key:"decodeImage",value:function(g){return null}}],[{key:"Exception",get:function(){return{StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"}}}])})();X()(qi,"adjacentLineValidationMatches",0);var Zr=qi;function tc(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var ma=[3,1,3,1,1,1],nc=[3,1,1,1,3],vl=[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]],Qs=ma.reduce((function(g,b){return g+b}),0),yl=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=tc(this,b,[].concat(_)),X()(d,"barSpaceRatio",[1,1]),X()(d,"FORMAT","2of5"),X()(d,"SINGLE_CODE_ERROR",.78),X()(d,"AVG_CODE_ERROR",.3),d}return $n()(b,g),Y()(b,[{key:"_findPattern",value:function(d,v){var _=arguments.length>2&&arguments[2]!==void 0&&arguments[2],E=arguments.length>3&&arguments[3]!==void 0&&arguments[3],T=[],R=0,D={error:Number.MAX_VALUE,code:-1,start:0,end:0},I=0,U=0,K=this.AVG_CODE_ERROR;v||(v=this._nextSet(this._row));for(var ae=0;ae<d.length;ae++)T[ae]=0;for(var ue=v;ue<this._row.length;ue++)if(this._row[ue]^(_?1:0))T[R]++;else{if(R===T.length-1){I=0;for(var Ce=0;Ce<T.length;Ce++)I+=T[Ce];if((U=this._matchPattern(T,d))<K)return D.error=U,D.start=ue-I,D.end=ue,D;if(!E)return null;for(var oe=0;oe<T.length-2;oe++)T[oe]=T[oe+2];T[T.length-2]=0,T[T.length-1]=0,R--}else R++;T[R]=1,_=!_}return null}},{key:"_findStart",value:function(){for(var d=null,v=this._nextSet(this._row),_=1,E=0;!d;){if(!(d=this._findPattern(ma,v,!1,!0)))return null;if(_=Math.floor((d.end-d.start)/Qs),(E=d.start-5*_)>=0&&this._matchRange(E,d.start,0))return d;v=d.end,d=null}return d}},{key:"_verifyTrailingWhitespace",value:function(d){var v=d.end+(d.end-d.start)/2;return v<this._row.length&&this._matchRange(d.end,v,0)?d:null}},{key:"_findEnd",value:function(){this._row.reverse();var d=this._nextSet(this._row),v=this._findPattern(nc,d,!1,!0);if(this._row.reverse(),v===null)return null;var _=v.start;return v.start=this._row.length-v.end,v.end=this._row.length-_,v!==null?this._verifyTrailingWhitespace(v):null}},{key:"_verifyCounterLength",value:function(d){return d.length%10==0}},{key:"_decodeCode",value:function(d){for(var v=this.AVG_CODE_ERROR,_={error:Number.MAX_VALUE,code:-1,start:0,end:0},E=0;E<vl.length;E++){var T=this._matchPattern(d,vl[E]);T<_.error&&(_.code=E,_.error=T)}return _.error<v?_:null}},{key:"_decodePayload",value:function(d,v,_){for(var E=0,T=d.length,R=[0,0,0,0,0],D=null;E<T;){for(var I=0;I<5;I++)R[I]=d[E]*this.barSpaceRatio[0],E+=2;if(!(D=this._decodeCode(R)))return null;v.push("".concat(D.code)),_.push(D)}return D}},{key:"decode",value:function(d,v){var _=this._findStart();if(!_)return null;var E=this._findEnd();if(!E)return null;var T=this._fillCounters(_.end,E.start,!1);if(!this._verifyCounterLength(T))return null;var R=[];R.push(_);var D=[];return this._decodePayload(T,D,R)?D.length<5?null:(R.push(E),{code:D.join(""),start:_.start,end:E.end,startInfo:_,decodedCodes:R,format:this.FORMAT}):null}}])})(Zr);function rc(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var co=[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68],uo=[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14],pi=[26,41,11,14],_r=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=rc(this,b,[].concat(_)),X()(d,"_counters",[]),X()(d,"FORMAT","codabar"),d}return $n()(b,g),Y()(b,[{key:"_computeAlternatingThreshold",value:function(d,v){for(var _=Number.MAX_VALUE,E=0,T=0,R=d;R<v;R+=2)(T=this._counters[R])>E&&(E=T),T<_&&(_=T);return(_+E)/2|0}},{key:"_toPattern",value:function(d){var v=d+7;if(v>this._counters.length)return-1;for(var _=this._computeAlternatingThreshold(d,v),E=this._computeAlternatingThreshold(d+1,v),T=64,R=0,D=0,I=0;I<7;I++)R=(1&I)==0?_:E,this._counters[d+I]>R&&(D|=T),T>>=1;return D}},{key:"_isStartEnd",value:function(d){for(var v=0;v<pi.length;v++)if(pi[v]===d)return!0;return!1}},{key:"_sumCounters",value:function(d,v){for(var _=0,E=d;E<v;E++)_+=this._counters[E];return _}},{key:"_findStart",value:function(){for(var d=this._nextUnset(this._row),v=1;v<this._counters.length;v++){var _=this._toPattern(v);if(_!==-1&&this._isStartEnd(_))return{start:d+=this._sumCounters(0,v),end:d+this._sumCounters(v,v+8),startCounter:v,endCounter:v+8}}return null}},{key:"_patternToChar",value:function(d){for(var v=0;v<uo.length;v++)if(uo[v]===d)return String.fromCharCode(co[v]);return null}},{key:"_calculatePatternLength",value:function(d){for(var v=0,_=d;_<d+7;_++)v+=this._counters[_];return v}},{key:"_verifyWhitespace",value:function(d,v){return(d-1<=0||this._counters[d-1]>=this._calculatePatternLength(d)/2)&&(v+8>=this._counters.length||this._counters[v+7]>=this._calculatePatternLength(v)/2)}},{key:"_charToPattern",value:function(d){for(var v=d.charCodeAt(0),_=0;_<co.length;_++)if(co[_]===v)return uo[_];return 0}},{key:"_thresholdResultPattern",value:function(d,v){for(var _,E={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},T=v,R=0;R<d.length;R++){_=this._charToPattern(d[R]);for(var D=6;D>=0;D--){var I=(1&D)==2?E.bar:E.space,U=(1&_)==1?I.wide:I.narrow;U.size+=this._counters[T+D],U.counts++,_>>=1}T+=8}return["space","bar"].forEach((function(K){var ae=E[K];ae.wide.min=Math.floor((ae.narrow.size/ae.narrow.counts+ae.wide.size/ae.wide.counts)/2),ae.narrow.max=Math.ceil(ae.wide.min),ae.wide.max=Math.ceil((2*ae.wide.size+1.5)/ae.wide.counts)})),E}},{key:"_validateResult",value:function(d,v){for(var _,E=this._thresholdResultPattern(d,v),T=v,R=0;R<d.length;R++){_=this._charToPattern(d[R]);for(var D=6;D>=0;D--){var I=(1&D)==0?E.bar:E.space,U=(1&_)==1?I.wide:I.narrow,K=this._counters[T+D];if(K<U.min||K>U.max)return!1;_>>=1}T+=8}return!0}},{key:"decode",value:function(d,v){if(this._counters=this._fillCounters(),!(v=this._findStart()))return null;var _,E=v.startCounter,T=[];do{if((_=this._toPattern(E))<0)return null;var R=this._patternToChar(_);if(R===null)return null;if(T.push(R),E+=8,T.length>1&&this._isStartEnd(_))break}while(E<this._counters.length);if(T.length-2<4||!this._isStartEnd(_)||!this._verifyWhitespace(v.startCounter,E-8)||!this._validateResult(T,v.startCounter))return null;E=E>this._counters.length?this._counters.length:E;var D=v.start+this._sumCounters(v.startCounter,E-8);return{code:T.join(""),start:v.start,end:D,startInfo:v,decodedCodes:T,format:this.FORMAT}}}])})(Zr);function sc(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var bl=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=sc(this,b,[].concat(_)),X()(d,"CODE_SHIFT",98),X()(d,"CODE_C",99),X()(d,"CODE_B",100),X()(d,"CODE_A",101),X()(d,"FNC1",102),X()(d,"START_CODE_A",103),X()(d,"START_CODE_B",104),X()(d,"START_CODE_C",105),X()(d,"STOP_CODE",106),X()(d,"FNC1_CHAR",""),X()(d,"CODE_PATTERN",[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]),X()(d,"SINGLE_CODE_ERROR",.64),X()(d,"AVG_CODE_ERROR",.3),X()(d,"FORMAT","code_128"),X()(d,"MODULE_INDICES",{bar:[0,2,4],space:[1,3,5]}),d}return $n()(b,g),Y()(b,[{key:"_decodeCode",value:function(d,v){for(var _={error:Number.MAX_VALUE,code:-1,start:d,end:d,correction:{bar:1,space:1}},E=[0,0,0,0,0,0],T=d,R=!this._row[T],D=0,I=T;I<this._row.length;I++)if(this._row[I]^(R?1:0))E[D]++;else{if(D===E.length-1){v&&this._correct(E,v);for(var U=0;U<this.CODE_PATTERN.length;U++){var K=this._matchPattern(E,this.CODE_PATTERN[U]);K<_.error&&(_.code=U,_.error=K)}return _.end=I,_.code===-1||_.error>this.AVG_CODE_ERROR?null:(this.CODE_PATTERN[_.code]&&(_.correction.bar=this.calculateCorrection(this.CODE_PATTERN[_.code],E,this.MODULE_INDICES.bar),_.correction.space=this.calculateCorrection(this.CODE_PATTERN[_.code],E,this.MODULE_INDICES.space)),_)}E[++D]=1,R=!R}return null}},{key:"_correct",value:function(d,v){this._correctBars(d,v.bar,this.MODULE_INDICES.bar),this._correctBars(d,v.space,this.MODULE_INDICES.space)}},{key:"_findStart",value:function(){for(var d=[0,0,0,0,0,0],v=this._nextSet(this._row),_={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},E=!1,T=0,R=v;R<this._row.length;R++)if(this._row[R]^(E?1:0))d[T]++;else{if(T===d.length-1){for(var D=d.reduce((function(ae,ue){return ae+ue}),0),I=this.START_CODE_A;I<=this.START_CODE_C;I++){var U=this._matchPattern(d,this.CODE_PATTERN[I]);U<_.error&&(_.code=I,_.error=U)}if(_.error<this.AVG_CODE_ERROR)return _.start=R-D,_.end=R,_.correction.bar=this.calculateCorrection(this.CODE_PATTERN[_.code],d,this.MODULE_INDICES.bar),_.correction.space=this.calculateCorrection(this.CODE_PATTERN[_.code],d,this.MODULE_INDICES.space),_;for(var K=0;K<4;K++)d[K]=d[K+2];d[4]=0,d[5]=0,T--}else T++;d[T]=1,E=!E}return null}},{key:"decode",value:function(d,v){var _=this,E=this._findStart();if(E===null)return null;var T={code:E.code,start:E.start,end:E.end,correction:{bar:E.correction.bar,space:E.correction.space}},R=[];R.push(T);for(var D=T.code,I=(function(ke){switch(ke){case _.START_CODE_A:return _.CODE_A;case _.START_CODE_B:return _.CODE_B;case _.START_CODE_C:return _.CODE_C;default:return null}})(T.code),U=!1,K=!1,ae=K,ue=!0,Ce=0,oe=[],we=[];!U;){if(ae=K,K=!1,(T=this._decodeCode(T.end,T.correction))!==null)switch(T.code!==this.STOP_CODE&&(ue=!0),T.code!==this.STOP_CODE&&(oe.push(T.code),D+=++Ce*T.code),R.push(T),I){case this.CODE_A:if(T.code<64)we.push(String.fromCharCode(32+T.code));else if(T.code<96)we.push(String.fromCharCode(T.code-64));else switch(T.code!==this.STOP_CODE&&(ue=!1),T.code){case this.CODE_SHIFT:K=!0,I=this.CODE_B;break;case this.CODE_B:I=this.CODE_B;break;case this.CODE_C:I=this.CODE_C;break;case this.FNC1:we.push(this.FNC1_CHAR);break;case this.STOP_CODE:U=!0}break;case this.CODE_B:if(T.code<96)we.push(String.fromCharCode(32+T.code));else switch(T.code!==this.STOP_CODE&&(ue=!1),T.code){case this.CODE_SHIFT:K=!0,I=this.CODE_A;break;case this.CODE_A:I=this.CODE_A;break;case this.CODE_C:I=this.CODE_C;break;case this.FNC1:we.push(this.FNC1_CHAR);break;case this.STOP_CODE:U=!0}break;case this.CODE_C:if(T.code<100)we.push(T.code<10?"0"+T.code:T.code);else switch(T.code!==this.STOP_CODE&&(ue=!1),T.code){case this.CODE_A:I=this.CODE_A;break;case this.CODE_B:I=this.CODE_B;break;case this.FNC1:we.push(this.FNC1_CHAR);break;case this.STOP_CODE:U=!0}}else U=!0;ae&&(I=I===this.CODE_A?this.CODE_B:this.CODE_A)}return T===null?null:(T.end=this._nextUnset(this._row,T.end),this._verifyTrailingWhitespace(T)?(D-=Ce*oe[oe.length-1])%103!==oe[oe.length-1]?null:we.length?(ue&&we.splice(we.length-1,1),{code:we.join(""),start:E.start,end:T.end,codeset:I,startInfo:E,decodedCodes:R,endInfo:T,format:this.FORMAT}):null:null)}},{key:"_verifyTrailingWhitespace",value:function(d){var v;return(v=d.end+(d.end-d.start)/2)<this._row.length&&this._matchRange(d.end,v,0)?d:null}},{key:"calculateCorrection",value:function(d,v,_){for(var E=_.length,T=0,R=0;E--;)R+=d[_[E]],T+=v[_[E]];return R/T}}])})(Zr),gi=a(13),m=a.n(gi),N=a(16),k=a.n(N);function G(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var ye=new Uint16Array(k()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%").map((function(g){return g.charCodeAt(0)}))),Te=new Uint16Array([52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]),Ye=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=G(this,b,[].concat(_)),X()(d,"FORMAT","code_39"),d}return $n()(b,g),Y()(b,[{key:"_findStart",value:function(){for(var d=this._nextSet(this._row),v=d,_=new Uint16Array([0,0,0,0,0,0,0,0,0]),E=0,T=!1,R=d;R<this._row.length;R++)if(this._row[R]^(T?1:0))_[E]++;else{if(E===_.length-1){if(this._toPattern(_)===148){var D=Math.floor(Math.max(0,v-(R-v)/4));if(this._matchRange(D,v,0))return{start:v,end:R}}v+=_[0]+_[1];for(var I=0;I<7;I++)_[I]=_[I+2];_[7]=0,_[8]=0,E--}else E++;_[E]=1,T=!T}return null}},{key:"_toPattern",value:function(d){for(var v=d.length,_=0,E=v,T=0;E>3;){_=this._findNextWidth(d,_),E=0;for(var R=0,D=0;D<v;D++)d[D]>_&&(R|=1<<v-1-D,E++,T+=d[D]);if(E===3){for(var I=0;I<v&&E>0;I++)if(d[I]>_&&(E--,2*d[I]>=T))return-1;return R}}return-1}},{key:"_findNextWidth",value:function(d,v){for(var _=Number.MAX_VALUE,E=0;E<d.length;E++)d[E]<_&&d[E]>v&&(_=d[E]);return _}},{key:"_patternToChar",value:function(d){for(var v=0;v<Te.length;v++)if(Te[v]===d)return String.fromCharCode(ye[v]);return null}},{key:"_verifyTrailingWhitespace",value:function(d,v,_){var E=Ui(_);return 3*(v-d-E)>=E}},{key:"decode",value:function(){var d=new Uint16Array([0,0,0,0,0,0,0,0,0]),v=[],_=this._findStart();if(!_)return null;var E,T,R=this._nextSet(this._row,_.end);do{d=this._toCounters(R,d);var D=this._toPattern(d);if(D<0||(E=this._patternToChar(D))===null)return null;v.push(E),T=R,R+=Ui(d),R=this._nextSet(this._row,R)}while(E!=="*");return v.pop(),v.length&&this._verifyTrailingWhitespace(T,R,d)?{code:v.join(""),start:_.start,end:R,startInfo:_,decodedCodes:v,format:this.FORMAT}:null}}])})(Zr);function wt(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var jn=/[AEIO]/g,Kt=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=wt(this,b,[].concat(_)),X()(d,"FORMAT","code_32_reader"),d}return $n()(b,g),Y()(b,[{key:"_decodeCode32",value:function(d){if(/[^0-9BCDFGHJKLMNPQRSTUVWXYZ]/.test(d))return null;for(var v=0,_=0;_<d.length;_++)v=32*v+"0123456789BCDFGHJKLMNPQRSTUVWXYZ".indexOf(d[_]);var E="".concat(v);return E.length<9&&(E=("000000000"+E).slice(-9)),"A"+E}},{key:"_checkChecksum",value:function(d){return!!d}},{key:"decode",value:function(){var d,v,_,E,T,R=(d=b,v="decode",_=this,E=3,T=m()(Ct()(1&E?d.prototype:d),v,_),2&E&&typeof T=="function"?function(U){return T.apply(_,U)}:T)([]);if(!R)return null;var D=R.code;if(!D||(D=D.replace(jn,""),!this._checkChecksum(D)))return null;var I=this._decodeCode32(D);return I?(R.code=I,R):null}}])})(Ye);function wn(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var cs=/[IOQ]/g,Ks=/[A-Z0-9]{17}/,us=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=wn(this,b,[].concat(_)),X()(d,"FORMAT","code_39_vin"),d}return $n()(b,g),Y()(b,[{key:"_checkChecksum",value:function(d){return!!d}},{key:"decode",value:function(){var d,v,_,E,T,R=(d=b,v="decode",_=this,E=3,T=m()(Ct()(1&E?d.prototype:d),v,_),2&E&&typeof T=="function"?function(I){return T.apply(_,I)}:T)([]);if(!R)return null;var D=R.code;return D&&(D=D.replace(cs,"")).match(Ks)&&this._checkChecksum(D)?(R.code=D,R):null}}])})(Ye);function Ns(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var vi=new Uint16Array(k()("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*").map((function(g){return g.charCodeAt(0)}))),pa=new Uint16Array([276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]),ga=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=Ns(this,b,[].concat(_)),X()(d,"FORMAT","code_93"),d}return $n()(b,g),Y()(b,[{key:"_patternToChar",value:function(d){for(var v=0;v<pa.length;v++)if(pa[v]===d)return String.fromCharCode(vi[v]);return null}},{key:"_toPattern",value:function(d){for(var v=d.length,_=d.reduce((function(I,U){return I+U}),0),E=0,T=0;T<v;T++){var R=Math.round(9*d[T]/_);if(R<1||R>4)return-1;if((1&T)==0)for(var D=0;D<R;D++)E=E<<1|1;else E<<=R}return E}},{key:"_findStart",value:function(){for(var d=this._nextSet(this._row),v=d,_=new Uint16Array([0,0,0,0,0,0]),E=0,T=!1,R=d;R<this._row.length;R++)if(this._row[R]^(T?1:0))_[E]++;else{if(E===_.length-1){if(this._toPattern(_)===350){var D=Math.floor(Math.max(0,v-(R-v)/4));if(this._matchRange(D,v,0))return{start:v,end:R}}v+=_[0]+_[1];for(var I=0;I<4;I++)_[I]=_[I+2];_[4]=0,_[5]=0,E--}else E++;_[E]=1,T=!T}return null}},{key:"_verifyEnd",value:function(d,v){return!(d===v||!this._row[v])}},{key:"_decodeExtended",value:function(d){for(var v=d.length,_=[],E=0;E<v;E++){var T=d[E];if(T>="a"&&T<="d"){if(E>v-2)return null;var R=d[++E],D=R.charCodeAt(0),I=void 0;switch(T){case"a":if(!(R>="A"&&R<="Z"))return null;I=String.fromCharCode(D-64);break;case"b":if(R>="A"&&R<="E")I=String.fromCharCode(D-38);else if(R>="F"&&R<="J")I=String.fromCharCode(D-11);else if(R>="K"&&R<="O")I=String.fromCharCode(D+16);else if(R>="P"&&R<="S")I=String.fromCharCode(D+43);else{if(!(R>="T"&&R<="Z"))return null;I=""}break;case"c":if(R>="A"&&R<="O")I=String.fromCharCode(D-32);else{if(R!=="Z")return null;I=":"}break;case"d":if(!(R>="A"&&R<="Z"))return null;I=String.fromCharCode(D+32);break;default:return console.warn("* code_93_reader _decodeExtended hit default case, this may be an error",I),null}_.push(I)}else _.push(T)}return _}},{key:"_matchCheckChar",value:function(d,v,_){var E=d.slice(0,v),T=E.length,R=E.reduce((function(D,I,U){return D+((-1*U+(T-1))%_+1)*vi.indexOf(I.charCodeAt(0))}),0);return vi[R%47]===d[v].charCodeAt(0)}},{key:"_verifyChecksums",value:function(d){return this._matchCheckChar(d,d.length-2,20)&&this._matchCheckChar(d,d.length-1,15)}},{key:"decode",value:function(d,v){if(!(v=this._findStart()))return null;var _,E,T=new Uint16Array([0,0,0,0,0,0]),R=[],D=this._nextSet(this._row,v.end);do{T=this._toCounters(D,T);var I=this._toPattern(T);if(I<0||(E=this._patternToChar(I))===null)return null;R.push(E),_=D,D+=Ui(T),D=this._nextSet(this._row,D)}while(E!=="*");return R.pop(),R.length&&this._verifyEnd(_,D)&&this._verifyChecksums(R)?(R=R.slice(0,R.length-2),(R=this._decodeExtended(R))===null?null:{code:R.join(""),start:v.start,end:D,startInfo:v,decodedCodes:R,format:this.FORMAT}):null}}])})(Zr);function zh(g,b){var d=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);b&&(v=v.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),d.push.apply(d,v)}return d}function lu(g){for(var b=1;b<arguments.length;b++){var d=arguments[b]!=null?arguments[b]:{};b%2?zh(Object(d),!0).forEach((function(v){X()(g,v,d[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(d)):zh(Object(d)).forEach((function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(d,v))}))}return g}function um(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var Fh=[1,1,1],cu=[1,1,1,1,1],_l=[1,1,2],ho=[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]],qh=[0,11,13,14,19,25,28,21,22,26],As=(function(g){function b(d,v){var _;return $()(this,b),_=um(this,b,[A()({supplements:[]},d),v]),X()(_,"FORMAT","ean_13"),X()(_,"SINGLE_CODE_ERROR",.7),X()(_,"STOP_PATTERN",[1,1,1]),_}return $n()(b,g),Y()(b,[{key:"_findPattern",value:function(d,v,_,E){var T=new Array(d.length).fill(0),R={error:Number.MAX_VALUE,start:0,end:0},D=0;v||(v=this._nextSet(this._row));for(var I=!1,U=v;U<this._row.length;U++)if(this._row[U]^(_?1:0))T[D]+=1;else{if(D===T.length-1){var K=this._matchPattern(T,d);if(K<.48&&R.error&&K<R.error)return I=!0,R.error=K,R.start=U-T.reduce((function(ue,Ce){return ue+Ce}),0),R.end=U,R;if(E){for(var ae=0;ae<T.length-2;ae++)T[ae]=T[ae+2];T[T.length-2]=0,T[T.length-1]=0,D--}}else D++;T[D]=1,_=!_}return I?R:null}},{key:"_decodeCode",value:function(d,v){var _=[0,0,0,0],E=d,T={error:Number.MAX_VALUE,code:-1,start:d,end:d},R=!this._row[E],D=0;v||(v=ho.length);for(var I=E;I<this._row.length;I++)if(this._row[I]^(R?1:0))_[D]++;else{if(D===_.length-1){for(var U=0;U<v;U++){var K=this._matchPattern(_,ho[U]);T.end=I,K<T.error&&(T.code=U,T.error=K)}return T.error>.48?null:T}_[++D]=1,R=!R}return null}},{key:"_findStart",value:function(){for(var d=this._nextSet(this._row),v=null;!v;){if(!(v=this._findPattern(Fh,d,!1,!0)))return null;var _=v.start-(v.end-v.start);if(_>=0&&this._matchRange(_,v.start,0))return v;d=v.end,v=null}return null}},{key:"_calculateFirstDigit",value:function(d){for(var v=0;v<qh.length;v++)if(d===qh[v])return v;return null}},{key:"_decodePayload",value:function(d,v,_){for(var E=lu({},d),T=0,R=0;R<6;R++){if(!(E=this._decodeCode(E.end)))return null;E.code>=10?(E.code-=10,T|=1<<5-R):T|=0<<5-R,v.push(E.code),_.push(E)}var D=this._calculateFirstDigit(T);if(D===null)return null;v.unshift(D);var I=this._findPattern(cu,E.end,!0,!1);if(I===null||!I.end)return null;_.push(I);for(var U=0;U<6;U++){if(!(I=this._decodeCode(I.end,10)))return null;_.push(I),v.push(I.code)}return I}},{key:"_verifyTrailingWhitespace",value:function(d){var v=d.end+(d.end-d.start);return v<this._row.length&&this._matchRange(d.end,v,0)?d:null}},{key:"_findEnd",value:function(d,v){var _=this._findPattern(this.STOP_PATTERN,d,v,!1);return _!==null?this._verifyTrailingWhitespace(_):null}},{key:"_checksum",value:function(d){for(var v=0,_=d.length-2;_>=0;_-=2)v+=d[_];v*=3;for(var E=d.length-1;E>=0;E-=2)v+=d[E];return v%10==0}},{key:"_decodeExtensions",value:function(d){var v=this._nextSet(this._row,d),_=this._findPattern(_l,v,!1,!1);if(_===null)return null;for(var E=0;E<this.supplements.length;E++)try{var T=this.supplements[E].decode(this._row,_.end);if(T!==null)return{code:T.code,start:v,startInfo:_,end:T.end,decodedCodes:T.decodedCodes,format:this.supplements[E].FORMAT}}catch(R){console.error("* decodeExtensions error in ",this.supplements[E],": ",R)}return null}},{key:"decode",value:function(d,v){var _=new Array,E=new Array,T={},R=this._findStart();if(!R)return null;var D={start:R.start,end:R.end};if(E.push(D),!(D=this._decodePayload(D,_,E))||!(D=this._findEnd(D.end,!1))||(E.push(D),!this._checksum(_)))return null;if(this.supplements.length>0){var I=this._decodeExtensions(D.end);if(!I||!I.decodedCodes)return null;var U=I.decodedCodes[I.decodedCodes.length-1],K={start:U.start+((U.end-U.start)/2|0),end:U.end};if(!this._verifyTrailingWhitespace(K))return null;T={supplement:I,code:_.join("")+I.code}}return lu(lu({code:_.join(""),start:R.start,end:D.end,startInfo:R,decodedCodes:E},T),{},{format:this.FORMAT})}}])})(Zr);function Hh(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var uu=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=Hh(this,b,[].concat(_)),X()(d,"FORMAT","ean_2"),d}return $n()(b,g),Y()(b,[{key:"decode",value:function(d,v){d&&(this._row=d);var _=0,E=v,T=this._row.length,R=[],D=[],I=null;if(E===void 0)return null;for(var U=0;U<2&&E<T;U++){if(!(I=this._decodeCode(E)))return null;D.push(I),R.push(I.code%10),I.code>=10&&(_|=1<<1-U),U!==1&&(E=this._nextSet(this._row,I.end),E=this._nextUnset(this._row,E))}if(R.length!==2||parseInt(R.join(""))%4!==_)return null;var K=this._findStart();return{code:R.join(""),decodedCodes:D,end:I.end,format:this.FORMAT,startInfo:K,start:K.start}}}])})(As);function hu(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var du=[24,20,18,17,12,6,3,10,9,5],fu=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=hu(this,b,[].concat(_)),X()(d,"FORMAT","ean_5"),d}return $n()(b,g),Y()(b,[{key:"decode",value:function(d,v){if(v===void 0)return null;d&&(this._row=d);for(var _=0,E=v,T=this._row.length,R=null,D=[],I=[],U=0;U<5&&E<T;U++){if(!(R=this._decodeCode(E)))return null;I.push(R),D.push(R.code%10),R.code>=10&&(_|=1<<4-U),U!==4&&(E=this._nextSet(this._row,R.end),E=this._nextUnset(this._row,E))}if(D.length!==5||(function(ae){for(var ue=ae.length,Ce=0,oe=ue-2;oe>=0;oe-=2)Ce+=ae[oe];Ce*=3;for(var we=ue-1;we>=0;we-=2)Ce+=ae[we];return(Ce*=3)%10})(D)!==(function(ae){for(var ue=0;ue<10;ue++)if(ae===du[ue])return ue;return null})(_))return null;var K=this._findStart();return{code:D.join(""),decodedCodes:I,end:R.end,format:this.FORMAT,startInfo:K,start:K.start}}}])})(As);function $h(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var mu=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=$h(this,b,[].concat(_)),X()(d,"FORMAT","ean_8"),d}return $n()(b,g),Y()(b,[{key:"_decodePayload",value:function(d,v,_){for(var E=d,T=0;T<4;T++){if(!(E=this._decodeCode(E.end,10)))return null;v.push(E.code),_.push(E)}if((E=this._findPattern(cu,E.end,!0,!1))===null)return null;_.push(E);for(var R=0;R<4;R++){if(!(E=this._decodeCode(E.end,10)))return null;_.push(E),v.push(E.code)}return E}}])})(As);function hm(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var Gh=(function(g){function b(d){var v;return $()(this,b),v=hm(this,b,[A()({normalizeBarSpaceWidth:!1},d)]),X()(v,"barSpaceRatio",[1,1]),X()(v,"SINGLE_CODE_ERROR",.78),X()(v,"AVG_CODE_ERROR",.38),X()(v,"START_PATTERN",[1,1,1,1]),X()(v,"STOP_PATTERN",[1,1,3]),X()(v,"CODE_PATTERN",[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]),X()(v,"MAX_CORRECTION_FACTOR",5),X()(v,"FORMAT","i2of5"),d.normalizeBarSpaceWidth&&(v.SINGLE_CODE_ERROR=.38,v.AVG_CODE_ERROR=.09),v.config=d,pn()(v,v)}return $n()(b,g),Y()(b,[{key:"_matchPattern",value:function(d,v){if(this.config.normalizeBarSpaceWidth){for(var _=[0,0],E=[0,0],T=[0,0],R=this.MAX_CORRECTION_FACTOR,D=1/R,I=0;I<d.length;I++)_[I%2]+=d[I],E[I%2]+=v[I];T[0]=E[0]/_[0],T[1]=E[1]/_[1],T[0]=Math.max(Math.min(T[0],R),D),T[1]=Math.max(Math.min(T[1],R),D),this.barSpaceRatio=T;for(var U=0;U<d.length;U++)d[U]*=this.barSpaceRatio[U%2]}return(K=b,ae="_matchPattern",ue=this,Ce=3,oe=m()(Ct()(1&Ce?K.prototype:K),ae,ue),2&Ce&&typeof oe=="function"?function(we){return oe.apply(ue,we)}:oe)([d,v]);var K,ae,ue,Ce,oe}},{key:"_findPattern",value:function(d,v){var _=arguments.length>2&&arguments[2]!==void 0&&arguments[2],E=arguments.length>3&&arguments[3]!==void 0&&arguments[3],T=new Array(d.length).fill(0),R=0,D={error:Number.MAX_VALUE,start:0,end:0},I=this.AVG_CODE_ERROR;_=_||!1,E=E||!1,v||(v=this._nextSet(this._row));for(var U=v;U<this._row.length;U++)if(this._row[U]^(_?1:0))T[R]++;else{if(R===T.length-1){var K=T.reduce((function(Ce,oe){return Ce+oe}),0),ae=this._matchPattern(T,d);if(ae<I)return D.error=ae,D.start=U-K,D.end=U,D;if(!E)return null;for(var ue=0;ue<T.length-2;ue++)T[ue]=T[ue+2];T[T.length-2]=0,T[T.length-1]=0,R--}else R++;T[R]=1,_=!_}return null}},{key:"_findStart",value:function(){for(var d=0,v=this._nextSet(this._row),_=null,E=1;!_;){if(!(_=this._findPattern(this.START_PATTERN,v,!1,!0)))return null;if(E=Math.floor((_.end-_.start)/4),(d=_.start-10*E)>=0&&this._matchRange(d,_.start,0))return _;v=_.end,_=null}return null}},{key:"_verifyTrailingWhitespace",value:function(d){var v=d.end+(d.end-d.start)/2;return v<this._row.length&&this._matchRange(d.end,v,0)?d:null}},{key:"_findEnd",value:function(){this._row.reverse();var d=this._findPattern(this.STOP_PATTERN);if(this._row.reverse(),d===null)return null;var v=d.start;return d.start=this._row.length-d.end,d.end=this._row.length-v,d!==null?this._verifyTrailingWhitespace(d):null}},{key:"_decodePair",value:function(d){for(var v=[],_=0;_<d.length;_++){var E=this._decodeCode(d[_]);if(!E)return null;v.push(E)}return v}},{key:"_decodeCode",value:function(d){for(var v=this.AVG_CODE_ERROR,_={error:Number.MAX_VALUE,code:-1,start:0,end:0},E=0;E<this.CODE_PATTERN.length;E++){var T=this._matchPattern(d,this.CODE_PATTERN[E]);T<_.error&&(_.code=E,_.error=T)}return _.error<v?_:null}},{key:"_decodePayload",value:function(d,v,_){for(var E=0,T=d.length,R=[[0,0,0,0,0],[0,0,0,0,0]],D=null;E<T;){for(var I=0;I<5;I++)R[0][I]=d[E]*this.barSpaceRatio[0],R[1][I]=d[E+1]*this.barSpaceRatio[1],E+=2;if(!(D=this._decodePair(R)))return null;for(var U=0;U<D.length;U++)v.push(D[U].code+""),_.push(D[U])}return D}},{key:"_verifyCounterLength",value:function(d){return d.length%10==0}},{key:"decode",value:function(d,v){var _=new Array,E=new Array,T=this._findStart();if(!T)return null;E.push(T);var R=this._findEnd();if(!R)return null;var D=this._fillCounters(T.end,R.start,!1);return this._verifyCounterLength(D)&&this._decodePayload(D,_,E)?_.length%2!=0||_.length<6?null:(E.push(R),{code:_.join(""),start:T.start,end:R.end,startInfo:T,decodedCodes:E,format:this.FORMAT}):null}}])})(Zr);function xl(g,b){var d=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!d){if(Array.isArray(g)||(d=(function(D,I){if(D){if(typeof D=="string")return Wh(D,I);var U={}.toString.call(D).slice(8,-1);return U==="Object"&&D.constructor&&(U=D.constructor.name),U==="Map"||U==="Set"?Array.from(D):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?Wh(D,I):void 0}})(g))||b){d&&(g=d);var v=0,_=function(){};return{s:_,n:function(){return v>=g.length?{done:!0}:{done:!1,value:g[v++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E,T=!0,R=!1;return{s:function(){d=d.call(g)},n:function(){var D=d.next();return T=D.done,D},e:function(D){R=!0,E=D},f:function(){try{T||d.return==null||d.return()}finally{if(R)throw E}}}}function Wh(g,b){(b==null||b>g.length)&&(b=g.length);for(var d=0,v=Array(b);d<b;d++)v[d]=g[d];return v}function dm(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var Br=[2,2.5,3],fo=(function(g){function b(){var d,v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $()(this,b),d=dm(this,b,[v]),X()(d,"FORMAT","pharmacode"),X()(d,"SINGLE_CODE_ERROR",.7),X()(d,"AVG_CODE_ERROR",.48),d}return $n()(b,g),Y()(b,[{key:"_findStart",value:function(){for(var d=0;d<this._row.length;){var v=this._nextSet(this._row,d);if(v>=this._row.length)return null;for(var _=v;_<this._row.length&&this._row[_];)_++;var E=_-v;if(E<5)d=_+1;else{var T=v-Math.max(2*E,20);if(T<0)d=_+1;else if(this._matchRange(T,v,0)){var R=Math.max(10*E,50),D=this._nextSet(this._row,_);if(D>=this._row.length)d=_+1;else{if(!(D-_>R))return{start:v,end:_};d=_+1}}else d=_+1}}return null}},{key:"_smoothBarWidths",value:function(d){if(d.length<=2)return d;for(var v=d.slice(),_=1;_<v.length-1;_++){var E=v[_-1],T=v[_],R=[E,T,v[_+1]].sort((function(I,U){return I-U}))[1],D=Math.abs(T-R);D>0&&D<=3&&(v[_]=R)}return v}},{key:"_extractBarsAndSpaces",value:function(d){for(var v=[],_=[],E=d,T=0,R=!1;E<this._row.length&&this._row[E];)T++,E++;if(T===0)return null;for(v.push(T),T=0;E<this._row.length&&!this._row[E];)T++,E++;if(T===0||E>=this._row.length)return null;_.push(T);for(var D=6*(v[0]<_[0]?v[0]:.8*_[0]),I=2.5*_[0];E<this._row.length&&v.length<16;){for(T=0;E<this._row.length&&this._row[E];)T++,E++;if(T===0)break;v.push(T),T=0;for(var U=E;E<this._row.length&&!this._row[E];)T++,E++;if(T===0)break;if(T>=D){R=!0,E=U;break}if(v.length>=2&&T>=I){R=!0,E=U;break}if(E>=this._row.length){R=!0,E=U;break}_.push(T),_.length>=2&&(I=2*(_.reduce((function(K,ae){return K+ae}),0)/_.length))}return R?v.length<2||v.length>16||_.length!==v.length-1?null:this._validateSpaces(_)&&this._validateBarSizeCount(v)?{bars:this._smoothBarWidths(v),spaces:_,end:E}:null:null}},{key:"_validateBarSizeCount",value:function(d){if(d.length===0)return!1;var v,_=[],E=xl(d);try{for(E.s();!(v=E.n()).done;){var T,R=v.value,D=!1,I=xl(_);try{for(I.s();!(T=I.n()).done;){var U=T.value,K=U.reduce((function(ae,ue){return ae+ue}),0)/U.length;if(Math.abs(R-K)<=.35*K){U.push(R),D=!0;break}}}catch(ae){I.e(ae)}finally{I.f()}D||_.push([R])}}catch(ae){E.e(ae)}finally{E.f()}return!(_.length>2)}},{key:"_validateSpaces",value:function(d){if(d.length===0)return!0;var v=d.reduce((function(E,T){return E+T}),0)/d.length;if(v===0)return!1;var _=d.reduce((function(E,T){return E+Math.pow(T-v,2)}),0)/d.length;return Math.sqrt(_)/v<=.35}},{key:"_validateBarRatios",value:function(d,v){var _=d.reduce((function(Qt,Wn){return Qt+Wn}),0)/d.length,E=d.reduce((function(Qt,Wn){return Qt+Math.abs(Wn-_)}),0)/d.length;if((_===0?0:E/_)<=.1){var T=v.length>0?v.reduce((function(Qt,Wn){return Qt+Wn}),0)/v.length:0;return T>0&&T/_<.7?{narrowWidth:_/2.5,wideRatio:2.5}:{narrowWidth:_,wideRatio:2}}var R=Array.from(new Set(d.slice().sort((function(Qt,Wn){return Qt-Wn}))));if(R.length<2)return{narrowWidth:d.reduce((function(Qt,Wn){return Qt+Wn}),0)/d.length,wideRatio:2};for(var D=[],I=0;I<R.length-1;I++){var U,K=(R[I]+R[I+1])/2,ae=[],ue=[],Ce=xl(d);try{for(Ce.s();!(U=Ce.n()).done;){var oe=U.value;oe<K?ae.push(oe):ue.push(oe)}}catch(Qt){Ce.e(Qt)}finally{Ce.f()}if(ae.length!==0&&ue.length!==0){for(var we=ae.reduce((function(Qt,Wn){return Qt+Wn}),0)/ae.length,ke=ue.reduce((function(Qt,Wn){return Qt+Wn}),0)/ue.length,Ie=ke/we,Ze=Br[0],Ke=Math.abs(Ie-Ze),ct=0,Nt=Br;ct<Nt.length;ct++){var ft=Nt[ct],It=Math.abs(Ie-ft);It<Ke&&(Ke=It,Ze=ft)}D.push({threshold:K,narrowBars:ae,wideBars:ue,avgN:we,avgW:ke,ratio:Ie,ratioDiff:Ke,matchedRatio:Ze})}}D.sort((function(Qt,Wn){return Qt.ratioDiff-Wn.ratioDiff}));for(var zr=0,sr=D;zr<sr.length;zr++){var gn=sr[zr],xi=.05*gn.matchedRatio;if(!(Math.abs(gn.ratio-gn.matchedRatio)>xi)){var ks,ri=.15*gn.avgN,ms=.15*gn.avgW,rs=!0,hn=xl(gn.narrowBars);try{for(hn.s();!(ks=hn.n()).done;){var ps=ks.value;if(Math.abs(ps-gn.avgN)>ri){rs=!1;break}}}catch(Qt){hn.e(Qt)}finally{hn.f()}if(rs){var si,Ds=xl(gn.wideBars);try{for(Ds.s();!(si=Ds.n()).done;){var Is=si.value;if(Math.abs(Is-gn.avgW)>ms){rs=!1;break}}}catch(Qt){Ds.e(Qt)}finally{Ds.f()}if(rs)return{narrowWidth:gn.avgN,wideRatio:gn.matchedRatio}}}}return null}},{key:"_validatePeriodicity",value:function(d,v){if(d.length>0){var _=d.reduce((function(U,K){return U+K}),0)/d.length,E=d.reduce((function(U,K){return U+Math.pow(K-_,2)}),0)/d.length,T=Math.sqrt(E);if((_!==0?T/_:0)>.65)return!1}if(v.length>0){var R=v.reduce((function(U,K){return U+K}),0)/v.length,D=v.reduce((function(U,K){return U+Math.pow(K-R,2)}),0)/v.length,I=Math.sqrt(D);if((R!==0?I/R:0)>.55)return!1}return!0}},{key:"_validateQuietZones",value:function(d,v,_){var E=1*v;if(d.start>=2&&d.start<E)return!1;var T=this._row.length-_;return T<6||!(T<E)}},{key:"_decodeBars",value:function(d,v){for(var _=1.6*(v??Math.min.apply(Math,k()(d))),E=0,T=d.slice().reverse(),R=0;R<T.length;R++)E+=T[R]>_?Math.pow(2,R+1):Math.pow(2,R);for(var D="",I=T.length-1;I>=0;I--)D+=T[I]>_?"W":"N";return{value:E,pattern:D}}},{key:"_verifyTrailingWhitespace",value:function(d,v){var _=Math.min(d+2*v,this._row.length);return this._matchRange(d,_,0)}},{key:"_validatePatternConsistency",value:function(d,v){for(var _=d.start,E=0,T=0,R=0,D=[-2,-1,1,2];R<D.length;R++){var I=_+D[R];if(!(I<0||I>=this._row.length)){T++;var U=this._extractBarsAndSpaces(I);if(U&&U.bars.length===v.length){for(var K=!0,ae=0;ae<v.length;ae++)if(Math.abs(U.bars[ae]-v[ae])/Math.max(v[ae],1)>.25){K=!1;break}K&&E++}}}return T>0&&E>=.5*T}},{key:"decode",value:function(d,v){var _=this._findStart();if(!_||_.start>.5*this._row.length)return null;var E=this._extractBarsAndSpaces(_.start);if(!E)return null;var T=E.bars,R=E.spaces,D=E.end;if(T.reduce((function(Ce,oe){return Ce+oe}),0)+R.reduce((function(Ce,oe){return Ce+oe}),0)<20||this._row.length-D<0||!this._validateSpaces(R)||!this._validatePeriodicity(T,R)||!this._validatePatternConsistency(_,T))return null;var I=this._validateBarRatios(T,R);if(!I||!this._validateQuietZones(_,I.narrowWidth,D))return null;var U=this._decodeBars(T,I.narrowWidth);if(!U)return null;var K=U.value;if(K<3||K>131070)return null;var ae=T.reduce((function(Ce,oe){return Ce+oe}),0)/T.length;this._verifyTrailingWhitespace(D,ae);var ue=T.map((function(Ce,oe){return{code:Ce>1.6*Math.min.apply(Math,k()(T))?1:0,start:0,end:0,error:0}}));return{code:K.toString(),start:_.start,end:D,startInfo:_,decodedCodes:ue,pattern:U.pattern,format:this.FORMAT}}}])})(Zr);X()(fo,"adjacentLineValidationMatches",1);var ic=fo;function pu(g,b){var d=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);b&&(v=v.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),d.push.apply(d,v)}return d}function Yh(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}function gu(g,b,d,v){var _=m()(Ct()(g.prototype),b,d);return 2&v&&typeof _=="function"?function(E){return _.apply(d,E)}:_}var ac=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=Yh(this,b,[].concat(_)),X()(d,"CODE_FREQUENCY",[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]),X()(d,"STOP_PATTERN",[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]),X()(d,"FORMAT","upc_e"),d}return $n()(b,g),Y()(b,[{key:"_decodePayload",value:function(d,v,_){for(var E=(function(D){for(var I=1;I<arguments.length;I++){var U=arguments[I]!=null?arguments[I]:{};I%2?pu(Object(U),!0).forEach((function(K){X()(D,K,U[K])})):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(U)):pu(Object(U)).forEach((function(K){Object.defineProperty(D,K,Object.getOwnPropertyDescriptor(U,K))}))}return D})({},d),T=0,R=0;R<6;R++){if(!(E=this._decodeCode(E.end)))return null;E.code>=10&&(E.code=E.code-10,T|=1<<5-R),v.push(E.code),_.push(E)}return this._determineParity(T,v)?E:null}},{key:"_determineParity",value:function(d,v){for(var _=0;_<this.CODE_FREQUENCY.length;_++)for(var E=0;E<this.CODE_FREQUENCY[_].length;E++)if(d===this.CODE_FREQUENCY[_][E])return v.unshift(_),v.push(E),!0;return!1}},{key:"_convertToUPCA",value:function(d){var v=[d[0]],_=d[d.length-2];return(v=_<=2?v.concat(d.slice(1,3)).concat([_,0,0,0,0]).concat(d.slice(3,6)):_===3?v.concat(d.slice(1,4)).concat([0,0,0,0,0]).concat(d.slice(4,6)):_===4?v.concat(d.slice(1,5)).concat([0,0,0,0,0,d[5]]):v.concat(d.slice(1,6)).concat([0,0,0,0,_])).push(d[d.length-1]),v}},{key:"_checksum",value:function(d){return gu(b,"_checksum",this,3)([this._convertToUPCA(d)])}},{key:"_findEnd",value:function(d,v){return gu(b,"_findEnd",this,3)([d,!0])}},{key:"_verifyTrailingWhitespace",value:function(d){var v=d.end+(d.end-d.start)/2;return v<this._row.length&&this._matchRange(d.end,v,0)?d:null}}])})(As);function fm(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var va=(function(g){function b(){var d;$()(this,b);for(var v=arguments.length,_=new Array(v),E=0;E<v;E++)_[E]=arguments[E];return d=fm(this,b,[].concat(_)),X()(d,"FORMAT","upc_a"),d}return $n()(b,g),Y()(b,[{key:"decode",value:function(d,v){var _=As.prototype.decode.call(this);return _&&_.code&&_.code.length===13&&_.code.charAt(0)==="0"?(_.code=_.code.substring(1),_):null}}])})(As),mo={},Hi={UP:1,DOWN:-1};mo.getBarcodeLine=function(g,b,d){var v,_,E,T,R,D=0|b.x,I=0|b.y,U=0|d.x,K=0|d.y,ae=Math.abs(K-I)>Math.abs(U-D),ue=[],Ce=g.data,oe=g.size.x,we=255,ke=0;function Ie(Nt,ft){R=Ce[ft*oe+Nt],we=R<we?R:we,ke=R>ke?R:ke,ue.push(R)}ae&&(E=D,D=I,I=E,E=U,U=K,K=E),D>U&&(E=D,D=U,U=E,E=I,I=K,K=E);var Ze=U-D,Ke=Math.abs(K-I);v=Ze/2|0,_=I;var ct=I<K?1:-1;for(T=D;T<U;T++)ae?Ie(_,T):Ie(T,_),(v-=Ke)<0&&(_+=ct,v+=Ze);return{line:ue,min:we,max:ke}},mo.toBinaryLine=function(g){var b,d,v,_,E,T,R=g.min,D=g.max,I=g.line,U=R+(D-R)/2,K=[],ae=(D-R)/12,ue=-ae;for(v=I[0]>U?Hi.UP:Hi.DOWN,K.push({pos:0,val:I[0]}),E=0;E<I.length-2;E++)v!==(_=(b=I[E+1]-I[E])+(d=I[E+2]-I[E+1])<ue&&I[E+1]<1.5*U?Hi.DOWN:b+d>ae&&I[E+1]>.5*U?Hi.UP:v)&&(K.push({pos:E,val:I[E]}),v=_);for(K.push({pos:I.length,val:I[I.length-1]}),T=K[0].pos;T<K[1].pos;T++)I[T]=I[T]>U?0:1;for(E=1;E<K.length-1;E++)for(ae=K[E+1].val>K[E].val?K[E].val+(K[E+1].val-K[E].val)/3*2|0:K[E+1].val+(K[E].val-K[E+1].val)/3|0,T=K[E].pos;T<K[E+1].pos;T++)I[T]=I[T]>ae?0:1;return{line:I,threshold:ae}},mo.debug={printFrequency:function(g,b){var d,v=b.getContext("2d");for(b.width=g.length,b.height=256,v.beginPath(),v.strokeStyle="blue",d=0;d<g.length;d++)v.moveTo(d,255),v.lineTo(d,255-g[d]);v.stroke(),v.closePath()},printPattern:function(g,b){var d,v=b.getContext("2d");for(b.width=g.length,v.fillColor="black",d=0;d<g.length;d++)g[d]===1&&v.fillRect(d,0,1,100)}};var po=mo;function Qh(g,b){var d=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!d){if(Array.isArray(g)||(d=(function(D,I){if(D){if(typeof D=="string")return $i(D,I);var U={}.toString.call(D).slice(8,-1);return U==="Object"&&D.constructor&&(U=D.constructor.name),U==="Map"||U==="Set"?Array.from(D):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?$i(D,I):void 0}})(g))||b){d&&(g=d);var v=0,_=function(){};return{s:_,n:function(){return v>=g.length?{done:!0}:{done:!1,value:g[v++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E,T=!0,R=!1;return{s:function(){d=d.call(g)},n:function(){var D=d.next();return T=D.done,D},e:function(D){R=!0,E=D},f:function(){try{T||d.return==null||d.return()}finally{if(R)throw E}}}}function $i(g,b){(b==null||b>g.length)&&(b=g.length);for(var d=0,v=Array(b);d<b;d++)v[d]=g[d];return v}var Xs={code_128_reader:bl,ean_reader:As,ean_5_reader:fu,ean_2_reader:uu,ean_8_reader:mu,code_39_reader:Ye,code_39_vin_reader:us,codabar_reader:_r,upc_reader:va,upc_e_reader:ac,i2of5_reader:Gh,"2of5_reader":yl,code_93_reader:ga,code_32_reader:Kt,pharmacode_reader:ic},wl={registerReader:function(g,b){Xs[g]=b},create:function(g,b){var d=[];function v(){g.readers.forEach((function(D){var I,U={},K=[];S()(D)==="object"?(I=D.format,U=D.config):typeof D=="string"&&(I=D),U.supplements&&(K=U.supplements.map((function(ue){return new Xs[ue]})));try{var ae=new Xs[I](U,K);d.push(ae)}catch(ue){throw console.error("* Error constructing reader ",I,ue),ue}}))}function _(D){var I,U=null,K=po.getBarcodeLine(b,D[0],D[1]);po.toBinaryLine(K);var ae=-1;for(I=0;I<d.length&&U===null;I++)typeof d[I].setImageWrapper=="function"&&d[I].setImageWrapper(b),(U=d[I].decodePattern(K.line))!==null&&(ae=I);return U===null||ae>=0&&d[ae]instanceof ic&&!(function(ue,Ce,oe,we){var ke=Math.round(ue[1].y),Ie=Ce.start,Ze=oe.constructor,Ke=Ze&&Ze.adjacentLineValidationMatches||0;if(Ke<=0)return!0;for(var ct=0,Nt=!1,ft=0,It=[1,2,3];ft<It.length;ft++){var zr=It[ft];if(Nt)break;for(var sr=0,gn=[-1,1];sr<gn.length;sr++){var xi=gn[sr];if(Nt)break;var ks=ke+zr*xi;if(!(ks<0||ks>=we.size.y)){var ri={x:ue[0].x,y:ks},ms={x:ue[1].x,y:ks};try{var rs=po.getBarcodeLine(we,ri,ms);po.toBinaryLine(rs),oe._row=rs.line;var hn=oe._findStart();if(hn!==null&&hn.start===Ie&&++ct>=Ke){Nt=!0;break}}catch{}}}}return ct>=Ke})(D,U,d[ae],b)?null:{codeResult:U,barcodeLine:K}}function E(D){return T.apply(this,arguments)}function T(){return(T=nr()(Cn.a.mark((function D(I){var U,K,ae,ue,Ce;return Cn.a.wrap((function(oe){for(;;)switch(oe.prev=oe.next){case 0:U=null,K=Qh(d),oe.prev=1,K.s();case 2:if((ae=K.n()).done){oe.next=5;break}if(!(ue=ae.value).decodeImage){oe.next=4;break}return oe.next=3,ue.decodeImage(I);case 3:if(!(U=oe.sent)){oe.next=4;break}return oe.abrupt("continue",5);case 4:oe.next=2;break;case 5:oe.next=7;break;case 6:oe.prev=6,Ce=oe.catch(1),K.e(Ce);case 7:return oe.prev=7,K.f(),oe.finish(7);case 8:return oe.abrupt("return",U);case 9:case"end":return oe.stop()}}),D,null,[[1,6,7,8]])})))).apply(this,arguments)}function R(D){var I,U,K=(function(ue){return Math.sqrt(Math.pow(Math.abs(ue[1].y-ue[0].y),2)+Math.pow(Math.abs(ue[1].x-ue[0].x),2))})(I=(function(ue){return[{x:(ue[1][0]-ue[0][0])/2+ue[0][0],y:(ue[1][1]-ue[0][1])/2+ue[0][1]},{x:(ue[3][0]-ue[2][0])/2+ue[2][0],y:(ue[3][1]-ue[2][1])/2+ue[2][1]}]})(D)),ae=Math.atan2(I[1].y-I[0].y,I[1].x-I[0].x);return(I=(function(ue,Ce,oe){function we(ke){var Ie=ke*Math.sin(Ce),Ze=ke*Math.cos(Ce);ue[0].y-=Ie,ue[0].x-=Ze,ue[1].y+=Ie,ue[1].x+=Ze}for(we(oe);oe>1&&(!b.inImageWithBorder(ue[0])||!b.inImageWithBorder(ue[1]));)we(-(oe-=Math.ceil(oe/2)));return ue})(I,ae,Math.floor(.1*K)))===null?null:((U=_(I))===null&&(U=(function(ue,Ce,oe){var we,ke,Ie,Ze=Math.sqrt(Math.pow(ue[1][0]-ue[0][0],2)+Math.pow(ue[1][1]-ue[0][1],2)),Ke=null,ct=Math.sin(oe),Nt=Math.cos(oe);for(we=1;we<16&&Ke===null;we++)Ie={y:(ke=Ze/16*we*(we%2==0?-1:1))*ct,x:ke*Nt},Ce[0].y+=Ie.x,Ce[0].x-=Ie.y,Ce[1].y+=Ie.x,Ce[1].x-=Ie.y,Ke=_(Ce);return Ke})(D,I,ae)),U===null?null:{codeResult:U.codeResult,line:I,angle:ae,pattern:U.barcodeLine.line,threshold:U.barcodeLine.threshold})}return v(),{decodeFromBoundingBox:function(D){return R(D)},decodeFromBoundingBoxes:function(D){var I,U,K=[],ae=g.multiple;for(I=0;I<D.length;I++){var ue=D[I];if((U=R(ue)||{}).box=ue,ae)K.push(U);else if(U.codeResult)return U}return{barcodes:K}},decodeFromImage:function(D){return nr()(Cn.a.mark((function I(){var U;return Cn.a.wrap((function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=1,E(D);case 1:return U=K.sent,K.abrupt("return",U);case 2:case"end":return K.stop()}}),I)})))()},registerReader:function(D,I){if(Xs[D])throw new Error("cannot register existing reader",D);Xs[D]=I},setReaders:function(D){g.readers=D,d.length=0,v()}}}},Gi=(function(){var g={};function b(_){return g[_]||(g[_]={subscribers:[]}),g[_]}function d(_,E){_.async?setTimeout((function(){_.callback(E)}),4):_.callback(E)}function v(_,E,T){var R;if(typeof E=="function")R={callback:E,async:T};else if(!(R=E).callback)throw new Error("Callback was not specified on options");b(_).subscribers.push(R)}return{subscribe:function(_,E,T){return v(_,E,T)},publish:function(_,E){var T=b(_),R=T.subscribers;R.filter((function(D){return!!D.once})).forEach((function(D){d(D,E)})),T.subscribers=R.filter((function(D){return!D.once})),T.subscribers.forEach((function(D){d(D,E)}))},once:function(_,E){var T=arguments.length>2&&arguments[2]!==void 0&&arguments[2];v(_,{callback:E,async:T,once:!0})},unsubscribe:function(_,E){if(_){var T=b(_);T.subscribers=T&&E?T.subscribers.filter((function(R){return R.callback!==E})):[]}else g={}}}})(),ya=a(81),Kh=a.n(ya),Xh=a(82),Jh=a.n(Xh),mm=a(83);function pm(g,b,d){return b=Ct()(b),pn()(g,(function(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(function(){return!!v})()})()?Reflect.construct(b,d||[],Ct()(g).constructor):b.apply(g,d))}var vu=(function(g){function b(d,v){var _;return $()(this,b),_=pm(this,b,[d]),X()(_,"code",void 0),_.code=v,Object.setPrototypeOf(_,b.prototype),_}return $n()(b,g),Y()(b,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,code:this.code}}}])})(a.n(mm)()(Error)),yu="This may mean that the user has declined camera access, or the browser does not support media APIs. If you are running in iOS, you must use Safari.";function Zh(){try{return navigator.mediaDevices.enumerateDevices()}catch{var g=new vu("enumerateDevices is not defined. ".concat(yu),-1);return Promise.reject(g)}}function oc(g){try{return navigator.mediaDevices.getUserMedia(g)}catch{var b=new vu("getUserMedia is not defined. ".concat(yu),-1);return Promise.reject(b)}}var dr,lc=["deviceId"];function es(g,b){var d=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);b&&(v=v.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),d.push.apply(d,v)}return d}function ba(g){for(var b=1;b<arguments.length;b++){var d=arguments[b]!=null?arguments[b]:{};b%2?es(Object(d),!0).forEach((function(v){X()(g,v,d[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(d)):es(Object(d)).forEach((function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(d,v))}))}return g}function bu(g,b){var d=typeof Symbol<"u"&&g[Symbol.iterator]||g["@@iterator"];if(!d){if(Array.isArray(g)||(d=(function(D,I){if(D){if(typeof D=="string")return El(D,I);var U={}.toString.call(D).slice(8,-1);return U==="Object"&&D.constructor&&(U=D.constructor.name),U==="Map"||U==="Set"?Array.from(D):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?El(D,I):void 0}})(g))||b){d&&(g=d);var v=0,_=function(){};return{s:_,n:function(){return v>=g.length?{done:!0}:{done:!1,value:g[v++]}},e:function(D){throw D},f:_}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var E,T=!0,R=!1;return{s:function(){d=d.call(g)},n:function(){var D=d.next();return T=D.done,D},e:function(D){R=!0,E=D},f:function(){try{T||d.return==null||d.return()}finally{if(R)throw E}}}}function El(g,b){(b==null||b>g.length)&&(b=g.length);for(var d=0,v=Array(b);d<b;d++)v[d]=g[d];return v}function cc(g){return new Promise((function(b,d){var v=10;(function _(){v>0?g.videoWidth>10&&g.videoHeight>10?b():window.setTimeout(_,500):d(new vu("Unable to play video stream. Is webcam working?",-1)),v--})()}))}function _u(g,b){return Wi.apply(this,arguments)}function Wi(){return(Wi=nr()(Cn.a.mark((function g(b,d){var v;return Cn.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=1,oc(d);case 1:if(v=_.sent,dr=v,!b){_.next=2;break}return b.setAttribute("autoplay","true"),b.setAttribute("muted","true"),b.setAttribute("playsinline","true"),b.srcObject=v,b.addEventListener("loadedmetadata",(function(){b.play().catch((function(E){console.warn("* Error while trying to play video stream:",E)}))})),_.abrupt("return",cc(b));case 2:return _.abrupt("return",Promise.resolve());case 3:case"end":return _.stop()}}),g)})))).apply(this,arguments)}function xu(g){var b=Jh()(g,["facing","minAspectRatio","maxAspectRatio"]);return g.minAspectRatio!==void 0&&g.minAspectRatio>0&&(b.aspectRatio=g.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),g.facing!==void 0&&(b.facingMode=g.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),b}function uc(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=xu(g);return b&&b.deviceId&&b.facingMode&&delete b.facingMode,Promise.resolve({audio:!1,video:b})}function _a(){return(_a=nr()(Cn.a.mark((function g(b){var d,v,_,E,T,R,D,I,U,K;return Cn.a.wrap((function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=1,Zh();case 1:if(d=ae.sent,v=d.filter((function(ue){return ue.kind==="videoinput"})),b){ae.next=2;break}return ae.abrupt("return",v);case 2:_=[],E=xu(b),E.deviceId,T=Kh()(E,lc),R=bu(v),ae.prev=3,R.s();case 4:if((D=R.n()).done){ae.next=9;break}return I=D.value,ae.prev=5,U={audio:!1,video:ba(ba({},T),{},{deviceId:{exact:I.deviceId}})},ae.next=6,oc(U);case 6:ae.sent.getTracks().forEach((function(ue){return ue.stop()})),_.push(I),ae.next=8;break;case 7:ae.prev=7,ae.catch(5);case 8:ae.next=4;break;case 9:ae.next=11;break;case 10:ae.prev=10,K=ae.catch(3),R.e(K);case 11:return ae.prev=11,R.f(),ae.finish(11);case 12:return ae.abrupt("return",_);case 13:case"end":return ae.stop()}}),g,null,[[3,10,11,12],[5,7]])})))).apply(this,arguments)}function hc(){if(!dr)return null;var g=dr.getVideoTracks();return g&&g!=null&&g.length?g[0]:null}var fr={requestedVideoElement:null,request:function(g,b){return nr()(Cn.a.mark((function d(){var v;return Cn.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return fr.requestedVideoElement=g,_.next=1,uc(b);case 1:return v=_.sent,_.abrupt("return",_u(g,v));case 2:case"end":return _.stop()}}),d)})))()},release:function(){var g=dr&&dr.getVideoTracks();return fr.requestedVideoElement!==null&&fr.requestedVideoElement.pause(),new Promise((function(b){setTimeout((function(){g&&g.length&&g.forEach((function(d){return d.stop()})),dr=null,fr.requestedVideoElement=null,b()}),0)}))},enumerateVideoDevices:function(g){return _a.apply(this,arguments)},getActiveStream:function(){var g;return(g=dr)!==null&&g!==void 0?g:null},getActiveStreamLabel:function(){var g=hc();return g?g.label:""},getActiveTrack:hc,disableTorch:function(){return nr()(Cn.a.mark((function g(){var b,d;return Cn.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(!(b=hc())){v.next=4;break}return v.prev=1,v.next=2,b.applyConstraints({advanced:[{torch:!1}]});case 2:v.next=4;break;case 3:throw v.prev=3,(d=v.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),d;case 4:case"end":return v.stop()}}),g,null,[[1,3]])})))()},enableTorch:function(){return nr()(Cn.a.mark((function g(){var b,d;return Cn.a.wrap((function(v){for(;;)switch(v.prev=v.next){case 0:if(!(b=hc())){v.next=4;break}return v.prev=1,v.next=2,b.applyConstraints({advanced:[{torch:!0}]});case 2:v.next=4;break;case 3:throw v.prev=3,(d=v.catch(1))instanceof OverconstrainedError&&console.warn("quagga2/CameraAccess: Torch not supported on this device"),d;case 4:case"end":return v.stop()}}),g,null,[[1,3]])})))()}},go=fr,Js={create:function(g){var b,d=document.createElement("canvas"),v=d.getContext("2d",{willReadFrequently:!!g.willReadFrequently}),_=[],E=(b=g.capacity)!==null&&b!==void 0?b:20,T=g.capture===!0;function R(D){return!!E&&D&&!(function(I,U){return U&&U.some((function(K){return Object.keys(K).every((function(ae){return K[ae]===I[ae]}))}))})(D,g.blacklist)&&(function(I,U){return typeof U!="function"||U(I)})(D,g.filter)}return{addResult:function(D,I,U){var K={};R(U)&&(E--,K.codeResult=U,T&&(d.width=I.x,d.height=I.y,Ys.drawImage(D,I,v),K.frame=d.toDataURL()),_.push(K))},getResults:function(){return _}}}},ed={inputStream:{type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,canvas:{createOverlay:!0},decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}},Sl=Math.PI/180,Yi={};Yi.create=function(g,b){var d,v={},_=g.getConfig(),E=Ur(g.getRealWidth(),g.getRealHeight()),T=g.getCanvasSize(),R=Ur(g.getWidth(),g.getHeight()),D=g.getTopRight(),I=D.x,U=D.y,K=null,ae=null,ue=_.willReadFrequently;function Ce(oe,we,ke,Ie,Ze){var Ke=Math.floor(Ie),ct=Math.floor(Ze),Nt=Math.min(Ke+1,we-1),ft=Math.min(ct+1,ke-1),It=Ie-Ke,zr=Ze-ct;return(oe[ct*we+Ke]*(1-It)+oe[ct*we+Nt]*It)*(1-zr)+(oe[ft*we+Ke]*(1-It)+oe[ft*we+Nt]*It)*zr}return(d=b||document.createElement("canvas")).width=T.x,d.height=T.y,K=d.getContext("2d",{willReadFrequently:!!ue}),ae=new Uint8Array(R.x*R.y),v.attachData=function(oe){ae=oe},v.getData=function(){return ae},v.grab=function(){var oe=_.halfSample,we=g.getFrame(),ke=we,Ie=0;if(ke){if((function(hn,ps,si){hn.width!==ps.x&&(hn.width=ps.x),hn.height!==ps.y&&(hn.height=ps.y)})(d,T,_.debug),_.type==="ImageStream"&&(ke=we.img,we.tags&&we.tags.orientation))switch(we.tags.orientation){case 6:Ie=90*Sl;break;case 8:Ie=-90*Sl}if(Ie!==0?(K.translate(T.x/2,T.y/2),K.rotate(Ie),K.drawImage(ke,-T.y/2,-T.x/2,T.y,T.x),K.rotate(-Ie),K.translate(-T.x/2,-T.y/2)):K.drawImage(ke,0,0,T.x,T.y),oe)(function(hn,ps,si){for(var Ds,Is=0,Qt=ps.x,Wn=Math.floor(hn.length/4),ss=ps.x/2,is=0,wi=ps.x;Qt<Wn;){for(Ds=0;Ds<ss;Ds++)si[is]=(.299*hn[4*Is+0]+.587*hn[4*Is+1]+.114*hn[4*Is+2]+(.299*hn[4*(Is+1)+0]+.587*hn[4*(Is+1)+1]+.114*hn[4*(Is+1)+2])+(.299*hn[4*Qt+0]+.587*hn[4*Qt+1]+.114*hn[4*Qt+2])+(.299*hn[4*(Qt+1)+0]+.587*hn[4*(Qt+1)+1]+.114*hn[4*(Qt+1)+2]))/4,is++,Is+=2,Qt+=2;Is+=wi,Qt+=wi}})(K.getImageData(I,U,R.x,R.y).data,R,ae);else{var Ze=document.createElement("canvas");Ze.width=E.x,Ze.height=E.y;var Ke=Ze.getContext("2d");Ie!==0?(Ke.translate(E.x/2,E.y/2),Ke.rotate(Ie),Ke.drawImage(ke,-E.y/2,-E.x/2,E.y,E.x)):Ke.drawImage(ke,0,0,E.x,E.y);var ct=Ke.getImageData(0,0,E.x,E.y).data,Nt=new Uint8Array(E.x*E.y);Gs(ct,Nt,_);for(var ft=new Uint8Array(T.x*T.y),It=E.x/T.x,zr=E.y/T.y,sr=0;sr<T.y;sr++)for(var gn=0;gn<T.x;gn++){var xi=gn*It,ks=sr*zr;ft[sr*T.x+gn]=0|Ce(Nt,E.x,E.y,xi,ks)}for(var ri=0;ri<R.y;ri++)for(var ms=0;ms<R.x;ms++){var rs=(ri+U)*T.x+(ms+I);ae[ri*R.x+ms]=ft[rs]}}return!0}return!1},v.getSize=function(){return R},v};var wu=Yi,Tl={274:"orientation"},dc=Object.keys(Tl).map((function(g){return Tl[g]}));function td(g){return new Promise((function(b){var d=new FileReader;d.onload=function(v){return b(v.target.result)},d.readAsArrayBuffer(g)}))}function hs(g){return new Promise((function(b,d){var v=new XMLHttpRequest;v.open("GET",g,!0),v.responseType="blob",v.onreadystatechange=function(){v.readyState!==XMLHttpRequest.DONE||v.status!==200&&v.status!==0||b(this.response)},v.onerror=d,v.send()}))}function vo(g){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dc,d=new DataView(g),v=g.byteLength,_=b.reduce((function(T,R){var D=Object.keys(Tl).filter((function(I){return Tl[I]===R}))[0];return D&&(T[D]=R),T}),{}),E=2;if(d.getUint8(0)!==255||d.getUint8(1)!==216)return!1;for(;E<v;){if(d.getUint8(E)!==255)return!1;if(d.getUint8(E+1)===225)return yo(d,E+4,_);E+=2+d.getUint16(E+2)}return!1}function yo(g,b,d){if((function(T,R,D){for(var I="",U=R;U<R+D;U++)I+=String.fromCharCode(T.getUint8(U));return I})(g,b,4)!=="Exif")return!1;var v,_=b+6;if(g.getUint16(_)===18761)v=!1;else{if(g.getUint16(_)!==19789)return!1;v=!0}if(g.getUint16(_+2,!v)!==42)return!1;var E=g.getUint32(_+4,!v);return!(E<8)&&(function(T,R,D,I,U){for(var K=T.getUint16(D,!U),ae={},ue=0;ue<K;ue++){var Ce=D+12*ue+2,oe=I[T.getUint16(Ce,!U)];oe&&(ae[oe]=fc(T,Ce,R,D,U))}return ae})(g,_,_+E,d,v)}function fc(g,b,d,v,_){var E=g.getUint16(b+2,!_),T=g.getUint32(b+4,!_);switch(E){case 3:if(T===1)return g.getUint16(b+8,!_)}return null}function Cl(g,b){return"".concat(g,"image-").concat(b.toString().padStart(3,"0"),".jpg")}var ts={};function ds(g,b){g.onload=function(){b.loaded(this)},g.onerror=function(){b.loaded(this)}}ts.load=function(g,b,d,v,_,E){var T,R,D,I=new Array(v),U=new Array(I.length);if(_===!1)I[0]=g;else for(T=0;T<I.length;T++)D=d+T,I[T]=Cl(g,D);for(U.notLoaded=[],U.addImage=function(K){U.notLoaded.push(K)},U.loaded=function(K){for(var ae=U.notLoaded,ue=0;ue<ae.length;ue++)if(ae[ue]===K){ae.splice(ue,1);for(var Ce=0;Ce<I.length;Ce++){var oe=encodeURI(I[Ce].substr(I[Ce].lastIndexOf("/")));if(K.src.lastIndexOf(oe)!==-1){U[Ce]={img:K};break}}break}ae.length===0&&(_===!1?(function(we){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dc;return/^blob:/i.test(we)?hs(we).then(td).then((function(Ie){return vo(Ie,ke)})):Promise.resolve(null)})(g,["orientation"]).then((function(we){U[0].tags=we,b(U)})).catch((function(we){console.log(we),b(U)})):b(U))},T=0;T<I.length;T++)R=new Image,U.addImage(R),ds(R,U),R.src=I[T]};var Qi=ts,js={createVideoStream:function(g){console.warn("**** InputStreamBrowser createVideoStream");var b,d,v=null,_=["canrecord","ended"],E={},T={x:0,y:0,type:"Point"},R={x:0,y:0,type:"XYSize"},D={getRealWidth:function(){return g.videoWidth},getRealHeight:function(){return g.videoHeight},getWidth:function(){return b},getHeight:function(){return d},setWidth:function(I){b=I},setHeight:function(I){d=I},setInputStream:function(I){v=I,this.setAttribute("src",I.src!==void 0?I.src:"")},ended:function(){return g.ended},getConfig:function(){return v},setAttribute:function(I,U){g&&g.setAttribute(I,U)},pause:function(){g.pause()},play:function(){g.play()},setCurrentTime:function(I){var U;((U=v)===null||U===void 0?void 0:U.type)!=="LiveStream"&&this.setAttribute("currentTime",I.toString())},addEventListener:function(I,U,K){_.indexOf(I)!==-1?(E[I]||(E[I]=[]),E[I].push(U)):g.addEventListener(I,U,K)},clearEventHandlers:function(){_.forEach((function(I){var U=E[I];U&&U.length>0&&U.forEach((function(K){g.removeEventListener(I,K)}))}))},trigger:function(I,U){var K,ae,ue,Ce,oe,we=E[I];if(I==="canrecord"&&(Ce=g.videoWidth,oe=g.videoHeight,b=(ae=v)!==null&&ae!==void 0&&ae.size?Ce/oe>1?v.size:Math.floor(Ce/oe*v.size):Ce,d=(ue=v)!==null&&ue!==void 0&&ue.size?Ce/oe>1?Math.floor(oe/Ce*v.size):v.size:oe,R.x=b,R.y=d),we&&we.length>0)for(K=0;K<we.length;K++)we[K].apply(D,U)},setTopRight:function(I){T.x=I.x,T.y=I.y},getTopRight:function(){return T},setCanvasSize:function(I){R.x=I.x,R.y=I.y},getCanvasSize:function(){return R},getFrame:function(){return g}};return D},createLiveStream:function(g){console.warn("**** InputStreamBrowser createLiveStream"),g&&g.setAttribute("autoplay","true");var b=js.createVideoStream(g);return b.ended=function(){return!1},b},createImageStream:function(){var g,b,d=null,v=0,_=0,E=0,T=!0,R=!1,D=null,I=0,U=null,K=!1,ae=["canrecord","ended"],ue={},Ce={x:0,y:0,type:"Point"},oe={x:0,y:0,type:"XYSize"};function we(Ie,Ze){var Ke,ct=ue[Ie];if(ct&&ct.length>0)for(Ke=0;Ke<ct.length;Ke++)ct[Ke].apply(ke,Ze)}var ke={trigger:we,getWidth:function(){return g},getHeight:function(){return b},setWidth:function(Ie){g=Ie},setHeight:function(Ie){b=Ie},getRealWidth:function(){return v},getRealHeight:function(){return _},setInputStream:function(Ie){var Ze;d=Ie,Ie.sequence===!1?(U=Ie.src,I=1):(U=Ie.src,I=Ie.length),R=!1,Qi.load(U,(function(Ke){var ct,Nt;if(D=Ke,Ke[0].tags&&Ke[0].tags.orientation)switch(Ke[0].tags.orientation){case 6:case 8:v=Ke[0].img.height,_=Ke[0].img.width;break;default:v=Ke[0].img.width,_=Ke[0].img.height}else v=Ke[0].img.width,_=Ke[0].img.height;g=(ct=d)!==null&&ct!==void 0&&ct.size?v/_>1?d.size:Math.floor(v/_*d.size):v,b=(Nt=d)!==null&&Nt!==void 0&&Nt.size?v/_>1?Math.floor(_/v*d.size):d.size:_,oe.x=g,oe.y=b,R=!0,E=0,setTimeout((function(){we("canrecord",[])}),0)}),1,I,(Ze=d)===null||Ze===void 0?void 0:Ze.sequence,d)},ended:function(){return K},setAttribute:function(){},getConfig:function(){return d},pause:function(){T=!0},play:function(){T=!1},setCurrentTime:function(Ie){E=Ie},addEventListener:function(Ie,Ze){ae.indexOf(Ie)!==-1&&(ue[Ie]||(ue[Ie]=[]),ue[Ie].push(Ze))},clearEventHandlers:function(){Object.keys(ue).forEach((function(Ie){return delete ue[Ie]}))},setTopRight:function(Ie){Ce.x=Ie.x,Ce.y=Ie.y},getTopRight:function(){return Ce},setCanvasSize:function(Ie){oe.x=Ie.x,oe.y=Ie.y},getCanvasSize:function(){return oe},getFrame:function(){var Ie,Ze;return R?(T||(Ie=(Ze=D)===null||Ze===void 0?void 0:Ze[E],E<I-1?E++:setTimeout((function(){K=!0,we("ended",[])}),0)),Ie):null}};return ke}},Zs=js,fs={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(g,b){var d,v=g.data,_=b.data,E=this.searchDirections,T=g.size.x;function R(I,U,K,ae){var ue,Ce,oe;for(ue=0;ue<E.length;ue++){if(Ce=I.cy+E[I.dir][0],oe=I.cx+E[I.dir][1],v[d=Ce*T+oe]===U&&(_[d]===0||_[d]===K))return _[d]=K,I.cy=Ce,I.cx=oe,!0;_[d]===0&&(_[d]=ae),I.dir=(I.dir+1)%8}return!1}function D(I,U,K){return{dir:K,x:I,y:U,next:null,prev:null}}return{trace:function(I,U,K,ae){return R(I,U,K,ae)},contourTracing:function(I,U,K,ae,ue){return(function(Ce,oe,we,ke,Ie){var Ze,Ke,ct,Nt=null,ft={cx:oe,cy:Ce,dir:0};if(R(ft,ke,we,Ie)){Ze=Nt=D(oe,Ce,ft.dir),ct=ft.dir,(Ke=D(ft.cx,ft.cy,0)).prev=Ze,Ze.next=Ke,Ke.next=null,Ze=Ke;var It=g.size.x*g.size.y,zr=0;do ft.dir=(ft.dir+6)%8,R(ft,ke,we,Ie),ct!==ft.dir?(Ze.dir=ft.dir,(Ke=D(ft.cx,ft.cy,0)).prev=Ze,Ze.next=Ke,Ke.next=null,Ze=Ke):(Ze.dir=ct,Ze.x=ft.cx,Ze.y=ft.cy),ct=ft.dir;while((ft.cx!==oe||ft.cy!==Ce)&&++zr<It);Nt.prev=Ze.prev,Ze.prev.next=Nt}return Nt})(I,U,K,ae,ue)}}}},Nr={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(g,b){var d=g.data,v=b.data,_=g.size.x,E=g.size.y,T=fs.create(g,b);return{rasterize:function(R){var D,I,U,K,ae,ue,Ce,oe,we,ke,Ie,Ze,Ke=[],ct=0;for(Ze=0;Ze<400;Ze++)Ke[Ze]=0;for(Ke[0]=d[0],we=null,ue=1;ue<E-1;ue++)for(K=0,I=Ke[0],ae=1;ae<_-1;ae++)if(v[Ie=ue*_+ae]===0)if((D=d[Ie])!==I){if(K===0)Ke[U=ct+1]=D,I=D,(Ce=T.contourTracing(ue,ae,U,D,Nr.DIR.OUTSIDE_EDGE))!==null&&(ct++,K=U,(oe=Nr.createContour2D()).dir=Nr.CONTOUR_DIR.CW_DIR,oe.index=K,oe.firstVertex=Ce,oe.nextpeer=we,oe.insideContours=null,we!==null&&(we.prevpeer=oe),we=oe);else if((Ce=T.contourTracing(ue,ae,Nr.DIR.INSIDE_EDGE,D,K))!==null){for((oe=Nr.createContour2D()).firstVertex=Ce,oe.insideContours=null,oe.dir=R===0?Nr.CONTOUR_DIR.CCW_DIR:Nr.CONTOUR_DIR.CW_DIR,oe.index=R,ke=we;ke!==null&&ke.index!==K;)ke=ke.nextpeer;ke!==null&&(oe.nextpeer=ke.insideContours,ke.insideContours!==null&&(ke.insideContours.prevpeer=oe),ke.insideContours=oe)}}else v[Ie]=K;else v[Ie]===Nr.DIR.OUTSIDE_EDGE||v[Ie]===Nr.DIR.INSIDE_EDGE?(K=0,I=v[Ie]===Nr.DIR.INSIDE_EDGE?d[Ie]:Ke[0]):I=Ke[K=v[Ie]];for(ke=we;ke!==null;)ke.index=R,ke=ke.nextpeer;return{cc:we,count:ct}},debug:{drawContour:function(R,D){var I,U,K,ae=R.getContext("2d"),ue=D;for(ae.strokeStyle="red",ae.fillStyle="red",ae.lineWidth=1,I=ue!==null?ue.insideContours:null;ue!==null;){switch(I!==null?(U=I,I=I.nextpeer):(U=ue,I=(ue=ue.nextpeer)!==null?ue.insideContours:null),U.dir){case Nr.CONTOUR_DIR.CW_DIR:ae.strokeStyle="red";break;case Nr.CONTOUR_DIR.CCW_DIR:ae.strokeStyle="blue";break;case Nr.CONTOUR_DIR.UNKNOWN_DIR:ae.strokeStyle="green"}K=U.firstVertex,ae.beginPath(),ae.moveTo(K.x,K.y);do K=K.next,ae.lineTo(K.x,K.y);while(K!==U.firstVertex);ae.stroke()}}}}}},Eu=Nr;var yi,ei,Gn,Ft,Dt,ns,sn,ti,mr,pr,bo,xa,wa=function(g,b,d){var v=new g.Uint8Array(d),_=b.size|0,E=g.Math.imul;function T(oe,we){oe=oe|0,we=we|0;var ke=0,Ie=0,Ze=0,Ke=0,ct=0,Nt=0,ft=0,It=0;for(ke=1;(ke|0)<(_-1|0);ke=ke+1|0)for(It=It+_|0,Ie=1;(Ie|0)<(_-1|0);Ie=Ie+1|0)Ke=It-_|0,ct=It+_|0,Nt=Ie-1|0,ft=Ie+1|0,Ze=(v[oe+Ke+Nt|0]|0)+(v[oe+Ke+ft|0]|0)+(v[oe+It+Ie|0]|0)+(v[oe+ct+Nt|0]|0)+(v[oe+ct+ft|0]|0)|0,(Ze|0)==5?v[we+It+Ie|0]=1:v[we+It+Ie|0]=0}function R(oe,we,ke){oe=oe|0,we=we|0,ke=ke|0;var Ie=0;for(Ie=E(_,_)|0;(Ie|0)>0;)Ie=Ie-1|0,v[ke+Ie|0]=(v[oe+Ie|0]|0)-(v[we+Ie|0]|0)|0}function D(oe,we,ke){oe=oe|0,we=we|0,ke=ke|0;var Ie=0;for(Ie=E(_,_)|0;(Ie|0)>0;)Ie=Ie-1|0,v[ke+Ie|0]=v[oe+Ie|0]|0|(v[we+Ie|0]|0)|0}function I(oe){oe=oe|0;var we=0,ke=0;for(ke=E(_,_)|0;(ke|0)>0;)ke=ke-1|0,we=(we|0)+(v[oe+ke|0]|0)|0;return we|0}function U(oe,we){oe=oe|0,we=we|0;var ke=0;for(ke=E(_,_)|0;(ke|0)>0;)ke=ke-1|0,v[oe+ke|0]=we}function K(oe,we){oe=oe|0,we=we|0;var ke=0,Ie=0,Ze=0,Ke=0,ct=0,Nt=0,ft=0,It=0;for(ke=1;(ke|0)<(_-1|0);ke=ke+1|0)for(It=It+_|0,Ie=1;(Ie|0)<(_-1|0);Ie=Ie+1|0)Ke=It-_|0,ct=It+_|0,Nt=Ie-1|0,ft=Ie+1|0,Ze=(v[oe+Ke+Nt|0]|0)+(v[oe+Ke+ft|0]|0)+(v[oe+It+Ie|0]|0)+(v[oe+ct+Nt|0]|0)+(v[oe+ct+ft|0]|0)|0,(Ze|0)>0?v[we+It+Ie|0]=1:v[we+It+Ie|0]=0}function ae(oe,we){oe=oe|0,we=we|0;var ke=0;for(ke=E(_,_)|0;(ke|0)>0;)ke=ke-1|0,v[we+ke|0]=v[oe+ke|0]|0}function ue(oe){oe=oe|0;var we=0,ke=0;for(we=0;(we|0)<(_-1|0);we=we+1|0)v[oe+we|0]=0,v[oe+ke|0]=0,ke=ke+_-1|0,v[oe+ke|0]=0,ke=ke+1|0;for(we=0;(we|0)<(_|0);we=we+1|0)v[oe+ke|0]=0,ke=ke+1|0}function Ce(){var oe=0,we=0,ke=0,Ie=0,Ze=0,Ke=0;we=E(_,_)|0,ke=we+we|0,Ie=ke+we|0,U(Ie,0),ue(oe);do T(oe,we),K(we,ke),R(oe,ke,ke),D(Ie,ke,Ie),ae(we,oe),Ze=I(oe)|0,Ke=(Ze|0)==0|0;while(!Ke)}return{skeletonize:Ce}},Ki={ctx:{binary:null},dom:{binary:null}},Rs={x:0,y:0};function Su(g){var b,d,v,_,E,T,R,D=mr.size.x,I=mr.size.y,U=-mr.size.x,K=-mr.size.y;for(b=0,d=0;d<g.length;d++)b+=(_=g[d]).rad;for((b=(180*(b/=g.length)/Math.PI+90)%180-90)<0&&(b+=180),b=(180-b)*Math.PI/180,E=c.copy(c.create(),[Math.cos(b),Math.sin(b),-Math.sin(b),Math.cos(b)]),d=0;d<g.length;d++)for(_=g[d],v=0;v<4;v++)u.transformMat2(_.box[v],_.box[v],E);for(d=0;d<g.length;d++)for(_=g[d],v=0;v<4;v++)_.box[v][0]<D&&(D=_.box[v][0]),_.box[v][0]>U&&(U=_.box[v][0]),_.box[v][1]<I&&(I=_.box[v][1]),_.box[v][1]>K&&(K=_.box[v][1]);for(T=[[D,I],[U,I],[U,K],[D,K]],R=yi.halfSample?2:1,E=c.invert(E,E),v=0;v<4;v++)u.transformMat2(T[v],T[v],E);for(v=0;v<4;v++)u.scale(T[v],T[v],R);return T}function Ea(g){var b=(function(E,T,R){var D,I,U,K,ae=0,ue=0,Ce=[];for(D=0;D<T;D++)Ce[D]={score:0,item:null};for(D=0;D<E.length;D++)if((I=R.apply(this,[E[D]]))>ue)for((U=Ce[ae]).score=I,U.item=E[D],ue=Number.MAX_VALUE,K=0;K<T;K++)Ce[K].score<ue&&(ue=Ce[K].score,ae=K);return Ce})((function(E,T,R){var D,I,U,K,ae=[];function ue(Ce){var oe=!1;for(I=0;I<ae.length;I++)(U=ae[I]).fits(Ce)&&(U.add(Ce),oe=!0);return oe}for(R||(R="rad"),D=0;D<E.length;D++)ue(K=Cs(E[D],D,R))||ae.push(Bi(K,T));return ae})(g,.9),1,(function(E){return E.getPoints().length})),d=[],v=[];if(b.length===1){d=b[0].item.getPoints();for(var _=0;_<d.length;_++)v.push(d[_].point)}return v}function bi(g,b){mr.subImageAsCopy(Ft,Ur(g,b)),xa.skeletonize()}function Xi(g,b,d,v){var _,E,T,R,D=[],I=[],U=Math.ceil(pr.x/3);if(g.length>=2){for(_=0;_<g.length;_++)g[_].m00>U&&D.push(g[_]);if(D.length>=2){for(T=Ea(D),E=0,_=0;_<T.length;_++){var K,ae;E+=(K=(ae=T[_])===null||ae===void 0?void 0:ae.rad)!==null&&K!==void 0?K:0}T.length>1&&T.length>=D.length/4*3&&T.length>g.length/4&&(E/=T.length,R={index:b[1]*Rs.x+b[0],pos:{x:d,y:v},box:[u.clone([d,v]),u.clone([d+Ft.size.x,v]),u.clone([d+Ft.size.x,v+Ft.size.y]),u.clone([d,v+Ft.size.y])],moments:T,rad:E,vec:u.clone([Math.cos(E),Math.sin(E)])},I.push(R))}}return I}var _i=function(g,b){yi=b,bo=g,(function(){ei=yi.halfSample?new un({x:bo.size.x/2|0,y:bo.size.y/2|0}):bo,pr=ao(yi.patchSize,ei.size),Rs.x=ei.size.x/pr.x|0,Rs.y=ei.size.y/pr.y|0,mr=new un(ei.size,void 0,Uint8Array,!1),Dt=new un(pr,void 0,Array,!0);var d=pr.x*pr.y*4,v=Math.max(65536,Math.pow(2,Math.ceil(Math.log2(d)))),_=new ArrayBuffer(v);Ft=new un(pr,new Uint8Array(_,0,pr.x*pr.y)),Gn=new un(pr,new Uint8Array(_,pr.x*pr.y*3,pr.x*pr.y),void 0,!0),xa=wa({Math,Uint8Array},{size:pr.x},_),ti=new un({x:ei.size.x/Ft.size.x|0,y:ei.size.y/Ft.size.y|0},void 0,Array,!0),ns=new un(ti.size,void 0,void 0,!0),sn=new un(ti.size,void 0,Int32Array,!0)})(),(function(){if(!yi.useWorker&&typeof document<"u"){Ki.dom.binary=document.createElement("canvas"),Ki.dom.binary.className="binaryBuffer";var d=!!yi.willReadFrequently;Ki.ctx.binary=Ki.dom.binary.getContext("2d",{willReadFrequently:d}),Ki.dom.binary.width=mr.size.x,Ki.dom.binary.height=mr.size.y}})()},Tu=function(){yi.halfSample&&(function(v,_){for(var E=v.data,T=v.size.x,R=_.data,D=0,I=T,U=E.length,K=T/2,ae=0;I<U;){for(var ue=0;ue<K;ue++)R[ae]=Math.floor((E[D]+E[D+1]+E[I]+E[I+1])/4),ae++,D+=2,I+=2;D+=T,I+=T}})(bo,ei),on(ei,mr),mr.zeroBorder();var g=(function(){var v,_,E,T,R,D,I=[];for(v=0;v<Rs.x;v++)for(_=0;_<Rs.y;_++)bi(E=Ft.size.x*v,T=Ft.size.y*_),Gn.zeroBorder(),Cr(Dt.data,0),D=Eu.create(Gn,Dt).rasterize(0),R=Dt.moments(D.count),I=I.concat(Xi(R,[v,_],E,T));return I})();if(g.length<Rs.x*Rs.y*.05)return null;var b=(function(v){var _,E,T=0,R=0;function D(){var U;for(U=0;U<sn.data.length;U++)if(sn.data[U]===0&&ns.data[U]===1)return U;return sn.data.length}function I(U){var K,ae,ue,Ce,oe,we=U%sn.size.x,ke=U/sn.size.x|0;if(U<sn.data.length)for(ue=ti.data[U],sn.data[U]=T,oe=0;oe<fs.searchDirections.length;oe++)ae=ke+fs.searchDirections[oe][0],K=we+fs.searchDirections[oe][1],Ce=ae*sn.size.x+K,ns.data[Ce]!==0?sn.data[Ce]===0&&Math.abs(u.dot(ti.data[Ce].vec,ue.vec))>.95&&I(Ce):sn.data[Ce]=Number.MAX_VALUE}for(Cr(ns.data,0),Cr(sn.data,0),Cr(ti.data,null),_=0;_<v.length;_++)E=v[_],ti.data[E.index]=E,ns.data[E.index]=1;for(ns.zeroBorder();(R=D())<sn.data.length;)T++,I(R);return T})(g);if(b<1)return null;var d=(function(v){var _,E,T=[];for(_=0;_<v;_++)T.push(0);for(E=sn.data.length;E--;)sn.data[E]>0&&T[sn.data[E]-1]++;return(T=T.map((function(R,D){return{val:R,label:D+1}}))).sort((function(R,D){return D.val-R.val})),T.filter((function(R){return R.val>=5}))})(b);return d.length===0?null:(function(v,_){var E,T,R,D,I=[],U=[];for(E=0;E<v.length;E++){for(T=sn.data.length,I.length=0;T--;)sn.data[T]===v[E].label&&(R=ti.data[T],I.push(R));(D=Su(I))&&U.push(D)}return U})(d)},Cu=function(g,b){var d,v,_=g.getWidth(),E=g.getHeight(),T=b.halfSample?.5:1;g.getConfig().area&&(v=fi(_,E,g.getConfig().area),g.setTopRight({x:v.sx,y:v.sy}),g.setCanvasSize({x:_,y:E}),_=v.sw,E=v.sh);var R={x:Math.floor(_*T),y:Math.floor(E*T)};if(d=ao(b.patchSize,R),g.setWidth(Math.max(Math.floor(Math.floor(R.x/d.x)*(1/T)*d.x),d.x)),g.setHeight(Math.max(Math.floor(Math.floor(R.y/d.y)*(1/T)*d.y),d.y)),g.getWidth()%d.x==0&&g.getHeight()%d.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width (".concat(_," )and height (").concat(E,") must a multiple of ").concat(d.x))},_o=Y()((function g(){$()(this,g),X()(this,"config",void 0),X()(this,"inputStream",void 0),X()(this,"framegrabber",void 0),X()(this,"inputImageWrapper",void 0),X()(this,"stopped",!1),X()(this,"initAborted",!1),X()(this,"boxSize",void 0),X()(this,"resultCollector",void 0),X()(this,"decoder",void 0),X()(this,"workerPool",[]),X()(this,"onUIThread",!0),X()(this,"canvasContainer",new Sa)})),Nl=Y()((function g(){$()(this,g),X()(this,"image",void 0),X()(this,"overlay",void 0)})),Sa=Y()((function g(){$()(this,g),X()(this,"ctx",void 0),X()(this,"dom",void 0),this.ctx=new Nl,this.dom=new Nl}));function rr(g){if(typeof document>"u")return null;if(g instanceof HTMLElement&&g.nodeName&&g.nodeType===1)return g;var b=typeof g=="string"?g:"#interactive.viewport";return document.querySelector(b)}function Al(g,b,d){var v=(function(E,T){var R=document.querySelector(E);return R||((R=document.createElement("canvas")).className=T),R})(g,b),_=v.getContext("2d",{willReadFrequently:d.willReadFrequently});return{canvas:v,context:_}}function nd(g){var b,d,v,_,E,T,R,D,I,U,K=rr(g==null||(b=g.config)===null||b===void 0||(d=b.inputStream)===null||d===void 0?void 0:d.target),ae=g==null||(v=g.config)===null||v===void 0||(_=v.inputStream)===null||_===void 0?void 0:_.type;if(!ae)return null;var ue=(g==null||(E=g.config)===null||E===void 0||(T=E.canvas)===null||T===void 0?void 0:T.createOverlay)!==!1,Ce=(function(we,ke){var Ie=ke.willReadFrequently,Ze=ke.createOverlay;if(typeof document<"u"){var Ke=Al("canvas.imgBuffer","imgBuffer",{willReadFrequently:Ie});Ke.canvas.width=we.x,Ke.canvas.height=we.y;var ct={canvas:null,context:null};if(Ze){var Nt=Al("canvas.drawingBuffer","drawingBuffer",{willReadFrequently:Ie});Nt.canvas.width=we.x,Nt.canvas.height=we.y,ct=Nt}return{dom:{image:Ke.canvas,overlay:ct.canvas},ctx:{image:Ke.context,overlay:ct.context}}}return null})(g.inputStream.getCanvasSize(),{willReadFrequently:!(g==null||(R=g.config)===null||R===void 0||(D=R.inputStream)===null||D===void 0||!D.willReadFrequently),createOverlay:ue,debug:g==null||(I=g.config)===null||I===void 0||(U=I.locator)===null||U===void 0?void 0:U.debug});if(!Ce)return{dom:{image:null,overlay:null},ctx:{image:null,overlay:null}};var oe=Ce.dom;return typeof document<"u"&&K&&(ae!=="ImageStream"||K.contains(oe.image)||K.appendChild(oe.image),oe.overlay&&!K.contains(oe.overlay)&&K.appendChild(oe.overlay)),Ce}function rd(g,b){var d=Object.keys(g);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(g);b&&(v=v.filter((function(_){return Object.getOwnPropertyDescriptor(g,_).enumerable}))),d.push.apply(d,v)}return d}function mc(g){for(var b=1;b<arguments.length;b++){var d=arguments[b]!=null?arguments[b]:{};b%2?rd(Object(d),!0).forEach((function(v){X()(g,v,d[v])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(d)):rd(Object(d)).forEach((function(v){Object.defineProperty(g,v,Object.getOwnPropertyDescriptor(d,v))}))}return g}var ni=[];function Vn(g){return mc(mc({},g),{},{inputStream:mc(mc({},g.inputStream),{},{target:null})})}function Nu(g){if(g){var b=g().default;if(!b)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var d;function v(E){self.postMessage({event:"processed",imageData:d.data,result:E},[d.data.buffer])}function _(){self.postMessage({event:"initialized",imageData:d.data},[d.data.buffer])}self.onmessage=function(E){if(E.data.cmd==="init"){var T=E.data.config;T.numOfWorkers=0,d=new b.ImageWrapper({x:E.data.size.x,y:E.data.size.y},new Uint8Array(E.data.imageData)),b.init(T,_,d),b.onProcessed(v)}else E.data.cmd==="process"?(d.data=new Uint8Array(E.data.imageData),b.start()):E.data.cmd==="setReaders"?b.setReaders(E.data.readers):E.data.cmd==="registerReader"&&b.registerReader(E.data.name,E.data.reader)}}function jl(g,b,d){var v,_,E=(typeof __factorySource__<"u"&&(_=__factorySource__),v=new Blob(["("+Nu.toString()+")("+_+");"],{type:"text/javascript"}),window.URL.createObjectURL(v)),T={worker:new Worker(E),imageData:new Uint8Array(b.getWidth()*b.getHeight()),busy:!0};T.worker.onmessage=function(R){R.data.event==="initialized"?(URL.revokeObjectURL(E),T.busy=!1,T.imageData=new Uint8Array(R.data.imageData),d(T)):R.data.event==="processed"?(T.imageData=new Uint8Array(R.data.imageData),T.busy=!1,typeof publishResult<"u"&&publishResult(R.data.result,T.imageData)):R.data.event},T.worker.postMessage({cmd:"init",size:{x:b.getWidth(),y:b.getHeight()},imageData:T.imageData,config:Vn(g)},[T.imageData.buffer])}function xo(g,b,d,v){var _=g-ni.length;if(_===0&&v)v();else if(_<0)ni.slice(_).forEach((function(R){R.worker.terminate()})),ni=ni.slice(0,_),v&&v();else{var E=function(R){ni.push(R),ni.length>=g&&v&&v()};if(b)for(var T=0;T<_;T++)jl(b,d,E)}}function pc(g,b,d){for(var v=g.length;v--;)g[v][0]+=b,g[v][1]+=d}function wo(g,b,d){g[0].x+=b,g[0].y+=d,g[1].x+=b,g[1].y+=d}var Ta=(function(){return Y()((function d(){var v=this;$()(this,d),X()(this,"context",new _o),X()(this,"canRecord",(function(_){var E;v.context.initAborted?_(new Error("Initialization was aborted")):v.context.config?v.context.inputStream?(Cu(v.context.inputStream,(E=v.context.config)===null||E===void 0?void 0:E.locator),v.initCanvas(),v.context.framegrabber=wu.create(v.context.inputStream,v.context.canvasContainer.dom.image),v.context.config.numOfWorkers===void 0&&(v.context.config.numOfWorkers=0),xo(v.context.config.numOfWorkers,v.context.config,v.context.inputStream,(function(){var T;((T=v.context.config)===null||T===void 0?void 0:T.numOfWorkers)===0&&v.initializeData(),v.ready(_)}))):_(new Error("Input stream not initialized")):_(new Error("Configuration not initialized"))})),X()(this,"update",(function(){if(v.context.onUIThread){var _,E=(R=v.context.framegrabber,ni.length?!!(D=ni.filter((function(I){return!I.busy}))[0])&&(R.attachData(D.imageData),R.grab()&&(D.busy=!0,D.worker.postMessage({cmd:"process",imageData:D.imageData},[D.imageData.buffer])),!0):null);E||(v.context.framegrabber.attachData((_=v.context.inputImageWrapper)===null||_===void 0?void 0:_.data),v.context.framegrabber.grab()&&(E||v.locateAndDecode()))}else{var T;v.context.framegrabber.attachData((T=v.context.inputImageWrapper)===null||T===void 0?void 0:T.data),v.context.framegrabber.grab(),v.locateAndDecode()}var R,D})),X()(this,"_cachedStyleValues",void 0),X()(this,"_resolvedStyle",void 0)}),[{key:"initBuffers",value:function(d){if(this.context.config){var v=(function(T,R,D){var I=R||new un({x:T.getWidth(),y:T.getHeight(),type:"XYSize"}),U=[u.clone([0,0]),u.clone([0,I.size.y]),u.clone([I.size.x,I.size.y]),u.clone([I.size.x,0])];return _i(I,D),{inputImageWrapper:I,boxSize:U}})(this.context.inputStream,d,this.context.config.locator),_=v.inputImageWrapper,E=v.boxSize;this.context.inputImageWrapper=_,this.context.boxSize=E}}},{key:"initializeData",value:function(d){this.context.config&&(this.initBuffers(d),this.context.decoder=wl.create(this.context.config.decoder,this.context.inputImageWrapper))}},{key:"getViewPort",value:function(){return this.context.config&&this.context.config.inputStream?rr(this.context.config.inputStream.target):null}},{key:"ready",value:function(d){this.context.inputStream.play(),d()}},{key:"initCanvas",value:function(){var d=nd(this.context);if(d){var v=d.ctx,_=d.dom;this.context.canvasContainer.dom.image=_.image,this.context.canvasContainer.dom.overlay=_.overlay,this.context.canvasContainer.ctx.image=v.image,this.context.canvasContainer.ctx.overlay=v.overlay}}},{key:"initInputStream",value:function(d){if(this.context.config&&this.context.config.inputStream){var v=this.context.config.inputStream,_=v.type,E=v.constraints,T=(function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"LiveStream",U=arguments.length>1?arguments[1]:void 0,K=arguments.length>2?arguments[2]:void 0;switch(I){case"VideoStream":var ae=document.createElement("video");return{video:ae,inputStream:K.createVideoStream(ae)};case"ImageStream":return{inputStream:K.createImageStream()};case"LiveStream":var ue=null;return U&&((ue=U.querySelector("video"))||(ue=document.createElement("video"),U.appendChild(ue))),{video:ue,inputStream:K.createLiveStream(ue)};default:return console.error("* setupInputStream invalid type ".concat(I)),{video:null,inputStream:null}}})(_,this.getViewPort(),Zs),R=T.video,D=T.inputStream;_==="LiveStream"&&R&&go.request(R,E).then((function(){return D.trigger("canrecord")})).catch((function(I){return d(I)})),D&&(D.setAttribute("preload","auto"),D.setInputStream(this.context.config.inputStream),D.addEventListener("canrecord",this.canRecord.bind(void 0,d))),this.context.inputStream=D}}},{key:"getBoundingBoxes",value:function(){var d;return(d=this.context.config)!==null&&d!==void 0&&d.locate?Tu():[[u.clone(this.context.boxSize[0]),u.clone(this.context.boxSize[1]),u.clone(this.context.boxSize[2]),u.clone(this.context.boxSize[3])]]}},{key:"transformResult",value:function(d){var v=this,_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set,E=this.context.inputStream.getTopRight(),T=E.x,R=E.y;if((T!==0||R!==0)&&(d.barcodes&&d.barcodes.forEach((function(I){return v.transformResult(I,_)})),d.line&&d.line.length===2&&wo(d.line,T,R),d.box&&!_.has(d.box)&&(pc(d.box,T,R),_.add(d.box)),d.boxes&&d.boxes.length>0))for(var D=0;D<d.boxes.length;D++)_.has(d.boxes[D])||(pc(d.boxes[D],T,R),_.add(d.boxes[D]))}},{key:"addResult",value:function(d,v){var _=this;v&&this.context.resultCollector&&(d.barcodes?d.barcodes.filter((function(E){return E.codeResult})).forEach((function(E){return _.addResult(E,v)})):d.codeResult&&this.context.resultCollector.addResult(v,this.context.inputStream.getCanvasSize(),d.codeResult))}},{key:"hasCodeResult",value:function(d){return!(!d||!(d.barcodes?d.barcodes.some((function(v){return v.codeResult})):d.codeResult))}},{key:"publishResult",value:function(){var d,v,_=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,E=arguments.length>1?arguments[1]:void 0,T=_;_&&this.context.onUIThread&&(this.transformResult(_),this.addResult(_,E),T=(_==null||(v=_.barcodes)===null||v===void 0?void 0:v.length)>0?_.barcodes:_),Gi.publish("processed",T),this.hasCodeResult(_)&&Gi.publish("detected",T);var R=this.context.config;R&&R.locate===!1&&(d=R.inputStream)!==null&&d!==void 0&&d.area&&this.drawScannerArea()}},{key:"locateAndDecode",value:(b=nr()(Cn.a.mark((function d(){var v,_,E,T,R,D;return Cn.a.wrap((function(I){for(;;)switch(I.prev=I.next){case 0:if(!(v=this.getBoundingBoxes())){I.next=3;break}return I.next=1,this.context.decoder.decodeFromBoundingBoxes(v);case 1:if(D=I.sent){I.next=2;break}D={};case 2:(E=D).boxes=v,this.publishResult(E,(_=this.context.inputImageWrapper)===null||_===void 0?void 0:_.data),I.next=5;break;case 3:return I.next=4,this.context.decoder.decodeFromImage(this.context.inputImageWrapper);case 4:(T=I.sent)?this.publishResult(T,(R=this.context.inputImageWrapper)===null||R===void 0?void 0:R.data):this.publishResult();case 5:case"end":return I.stop()}}),d,this)}))),function(){return b.apply(this,arguments)})},{key:"startContinuousUpdate",value:function(){var d,v=this,_=null,E=1e3/(((d=this.context.config)===null||d===void 0?void 0:d.frequency)||60);this.context.stopped=!1;var T=this.context,R=function(D){_=_||D,T.stopped||(D>=_&&(_+=E,v.update()),window.requestAnimationFrame(R))};R(performance.now())}},{key:"start",value:function(){var d,v;this.context.onUIThread&&((d=this.context.config)===null||d===void 0||(v=d.inputStream)===null||v===void 0?void 0:v.type)==="LiveStream"?this.startContinuousUpdate():this.update()}},{key:"stop",value:(g=nr()(Cn.a.mark((function d(){var v,_;return Cn.a.wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(this.context.stopped=!0,this.context.framegrabber||(this.context.initAborted=!0),xo(0),(v=this.context.config)===null||v===void 0||!v.inputStream||this.context.config.inputStream.type!=="LiveStream"){E.next=2;break}return E.next=1,go.release();case 1:(_=this.context.inputStream)===null||_===void 0||_.clearEventHandlers();case 2:case"end":return E.stop()}}),d,this)}))),function(){return g.apply(this,arguments)})},{key:"setReaders",value:function(d){this.context.decoder&&this.context.decoder.setReaders(d),(function(v){ni.forEach((function(_){return _.worker.postMessage({cmd:"setReaders",readers:v})}))})(d)}},{key:"registerReader",value:function(d,v){wl.registerReader(d,v),this.context.decoder&&this.context.decoder.registerReader(d,v),(function(_,E){ni.forEach((function(T){return T.worker.postMessage({cmd:"registerReader",name:_,reader:E})}))})(d,v)}},{key:"drawScannerArea",value:function(){var d,v,_,E=(d=this.context.config)===null||d===void 0||(v=d.inputStream)===null||v===void 0?void 0:v.area;if(E){var T=this.context.canvasContainer.ctx.overlay;if(T&&((_=this.context.config)===null||_===void 0?void 0:_.locate)===!1&&(E.borderColor!==void 0&&E.borderColor!==""||E.borderWidth!==void 0&&E.borderWidth>0||E.backgroundColor!==void 0&&E.backgroundColor!=="")&&this.context.boxSize){var R=this.context.inputStream.getTopRight(),D=R.x,I=R.y,U=this.context.boxSize,K=U[0],ae=U[1],ue=U[3],Ce=K[0]+D,oe=K[1]+I,we=ue[0]-K[0],ke=ae[1]-K[1];if(!this._cachedStyleValues||this._cachedStyleValues.borderColor!==E.borderColor||this._cachedStyleValues.borderWidth!==E.borderWidth||this._cachedStyleValues.backgroundColor!==E.backgroundColor){var Ie,Ze;this._cachedStyleValues={borderColor:E.borderColor,borderWidth:E.borderWidth,backgroundColor:E.backgroundColor};var Ke=E.borderColor!==void 0||E.borderWidth!==void 0,ct=(Ie=E.borderColor)!==null&&Ie!==void 0?Ie:"rgba(0, 255, 0, 0.5)",Nt=Ke?(Ze=E.borderWidth)!==null&&Ze!==void 0?Ze:2:0,ft=E.backgroundColor;this._resolvedStyle={color:ct,width:Nt,bg:ft}}var It=this._resolvedStyle;It.bg&&(T.fillStyle=It.bg,T.fillRect(Ce,oe,we,ke)),It.width>0&&(T.strokeStyle=It.color,T.lineWidth=It.width,T.strokeRect(Ce,oe,we,ke))}}}}]);var g,b})(),Ji=new Ta,Eo=Ji.context,sd={init:function(g,b,d){var v,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ji;return b||(v=new Promise((function(E,T){b=function(R){R?T(R):E()}}))),_.context.initAborted=!1,_.context.config=A()({},ed,g),_.context.config.numOfWorkers>0&&(_.context.config.numOfWorkers=0),d?(_.context.onUIThread=!1,_.initializeData(d),b&&b()):_.initInputStream(b),v},start:function(g,b){var d;if(g)return b||(d=new Promise((function(v,_){b=function(E){E?_(E):v()}}))),this.init(g,(function(v){if(v)b(v);else try{Ji.start(),b()}catch(_){b(_)}})),d;if(!Eo.framegrabber)throw new Error("start() was called before init() completed. Call init() first, or call start(config) to combine init and start.");return Ji.start()},stop:function(){return Ji.stop()},pause:function(){Eo.stopped=!0},onDetected:function(g){g&&(typeof g=="function"||S()(g)==="object"&&g.callback)?Gi.subscribe("detected",g):console.trace("* warning: Quagga.onDetected called with invalid callback, ignoring")},offDetected:function(g){Gi.unsubscribe("detected",g)},onProcessed:function(g){g&&(typeof g=="function"||S()(g)==="object"&&g.callback)?Gi.subscribe("processed",g):console.trace("* warning: Quagga.onProcessed called with invalid callback, ignoring")},offProcessed:function(g){Gi.unsubscribe("processed",g)},setReaders:function(g){g?Ji.setReaders(g):console.trace("* warning: Quagga.setReaders called with no readers, ignoring")},registerReader:function(g,b){g?b?Ji.registerReader(g,b):console.trace("* warning: Quagga.registerReader called with no reader, ignoring"):console.trace("* warning: Quagga.registerReader called with no name, ignoring")},registerResultCollector:function(g){g&&typeof g.addResult=="function"&&(Eo.resultCollector=g)},get canvas(){return Eo.canvasContainer},drawScannerArea:function(){return Ji.drawScannerArea()},decodeSingle:function(g,b){var d=this,v=new Ta;return(g=A()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:g.src},numOfWorkers:1,locator:{halfSample:!1}},g)).numOfWorkers>0&&(g.numOfWorkers=0),g.numOfWorkers>0&&(typeof Blob>"u"||typeof Worker>"u")&&(console.warn("* no Worker and/or Blob support - forcing numOfWorkers to 0"),g.numOfWorkers=0),new Promise((function(_,E){try{d.init(g,(function(){Eo.canvasContainer=v.context.canvasContainer,Gi.once("processed",(function(T){v.stop(),b&&b.call(null,T),_(T)}),!0),v.start()}),null,v)}catch(T){E(T)}}))},get default(){return sd},Readers:p,CameraAccess:go,ImageDebug:Ys,ImageWrapper:un,ResultCollector:Js};i.default=sd}]).default}))})(ag)),ag.exports}var U4=V4();const Uo=FE(U4),og=60;function Ol(){return new Date().toISOString().split("T")[0]}function B4(){const{currentUser:s,isClient:e,clientData:t,loading:i}=Es(),{isDark:a,toggleTheme:c}=Kl(),u=Ir(),[f,p]=z.useState("loading"),[x,S]=z.useState(null),[C,A]=z.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",activityLevel:"moderate",goal:"maintain",deficitLevel:"moderate"}),[B,L]=z.useState(null),[F,$]=z.useState(Ol()),[J,Y]=z.useState({entries:[],water:0}),[ce,X]=z.useState({protein:0,carbs:0,fats:0,calories:0}),[pe,xe]=z.useState(!1),[q,V]=z.useState(()=>{const ve=new Date;return{year:ve.getFullYear(),month:ve.getMonth()}}),[H,te]=z.useState(null),[W,ee]=z.useState(!1),[O,Re]=z.useState(null),[qe,ne]=z.useState(""),[Ee,Le]=z.useState(!1),[Ae,Ge]=z.useState(""),[M,se]=z.useState([]),[ie,he]=z.useState(!1),[Q,de]=z.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[fe,Oe]=z.useState(null),[He,nt]=z.useState(1),[Ve,Mt]=z.useState(null);z.useRef(null);const Zt=z.useRef(!1),jt=z.useCallback((ve,De="info")=>{Mt({message:ve,type:De}),setTimeout(()=>Mt(null),3e3)},[]);z.useEffect(()=>{!i&&(!s||!e)&&u("/")},[s,e,i,u]),z.useEffect(()=>{if(!t?.id)return;(async()=>{try{const De=await nl(St(Xe,"nutritionTargets",t.id));De.exists()?(S(De.data()),p("dashboard")):p("setup")}catch(De){console.error("Error loading nutrition data:",De),p("setup")}})()},[t?.id]),z.useEffect(()=>{if(!t?.id)return;(async()=>{try{const De=await nl(St(Xe,"nutritionLogs",`${t.id}_${F}`));if(De.exists()){const rt=De.data();Y({entries:rt.entries||[],water:rt.water||0})}else Y({entries:[],water:0})}catch(De){console.error("Error loading log:",De),Y({entries:[],water:0})}})()},[t?.id,F]),z.useEffect(()=>{const ve=J.entries.reduce((De,rt)=>({protein:De.protein+(rt.protein||0),carbs:De.carbs+(rt.carbs||0),fats:De.fats+(rt.fats||0),calories:De.calories+(rt.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});X(ve)},[J.entries]);const Yt=async ve=>{try{await Va(St(Xe,"nutritionLogs",`${t.id}_${F}`),{clientId:t.id,date:F,entries:ve.entries,water:ve.water,updatedAt:at.now()})}catch(De){console.error("Error saving nutrition log:",De)}},xt=F===Ol(),it=(ve,De)=>new Date(ve,De+1,0).getDate(),Bt=(ve,De)=>new Date(ve,De,1).getDay(),Ot=ve=>{if(ve===Ol())return"Today";const De=new Date(ve+"T12:00:00"),rt=new Date;return rt.setDate(rt.getDate()-1),ve===rt.toISOString().split("T")[0]?"Yesterday":De.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})},Lt=ve=>{const De=new Date(F+"T12:00:00");De.setDate(De.getDate()+ve);const rt=De.toISOString().split("T")[0];rt>Ol()||$(rt)},br=["January","February","March","April","May","June","July","August","September","October","November","December"],Sn=["Su","Mo","Tu","We","Th","Fr","Sa"],Mr=()=>{let ve=parseFloat(C.weight);C.weightUnit==="lbs"&&(ve*=.453592);let De;C.heightUnit==="cm"?De=parseFloat(C.height):De=(parseFloat(C.heightFeet)||0)*30.48+(parseFloat(C.heightInches)||0)*2.54;const rt=parseInt(C.age);let dt=C.gender==="male"?10*ve+6.25*De-5*rt+5:10*ve+6.25*De-5*rt-161;const kt=dt*{sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[C.activityLevel];let cn=kt,Dn,nn;switch(C.goal){case"lose":cn=kt-{light:250,moderate:500,harsh:750}[C.deficitLevel],Dn=2.2,nn=.3;break;case"build":cn=kt+300,Dn=2,nn=.22;break;default:Dn=1.8,nn=.25}cn=Math.max(cn,C.gender==="male"?1500:1200);const Zn=Math.round(ve*Dn),Kr=Math.round(cn*nn/9),In=Math.max(0,Math.round((cn-Zn*4-Kr*9)/4));L({calories:Math.round(cn),protein:Zn,carbs:In,fats:Kr,bmr:Math.round(dt),tdee:Math.round(kt)})},Pt=async()=>{if(!B)return;const ve={clientId:t.id,calories:B.calories,protein:B.protein,carbs:B.carbs,fats:B.fats,waterGoal:8,goal:C.goal,updatedAt:at.now()};await Va(St(Xe,"nutritionTargets",t.id),ve),S(ve),p("dashboard"),jt("Macro targets saved!","success")},Er=()=>{const ve=C.weight&&parseFloat(C.weight)>0,De=C.age&&parseInt(C.age)>0,rt=C.heightUnit==="cm"?C.height&&parseFloat(C.height)>0:C.heightFeet&&parseFloat(C.heightFeet)>0||C.heightInches&&parseFloat(C.heightInches)>0;return ve&&De&&rt},Yr=ve=>{const De=[...J.entries,{...ve,id:Date.now(),addedAt:new Date().toISOString()}],rt={...J,entries:De};Y(rt),Yt(rt),te(null),Oe(null),nt(1),de({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),jt("Food added!","success")},Qr=ve=>{const De=J.entries.filter(dt=>dt.id!==ve),rt={...J,entries:De};Y(rt),Yt(rt)},Or=()=>{ee(!0);const ve=document.querySelector("#barcode-reader");if(!ve){ee(!1),jt("Scanner container not found.","error");return}Uo.init({inputStream:{type:"LiveStream",target:ve,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},De=>{if(De){console.error("Quagga init error:",De),ee(!1),jt("Could not access camera. Check permissions.","error");return}Uo.start(),Zt.current=!0}),Uo.onDetected(De=>{const rt=De.codeResult.decodedCodes?.filter(yt=>yt.error!==void 0)?.map(yt=>yt.error)||[];if((rt.length>0?rt.reduce((yt,kt)=>yt+kt,0)/rt.length:1)<.15){const yt=De.codeResult.code;Uo.offDetected(),Re(yt)}})},Ss=()=>{Zt.current&&(Uo.stop(),Uo.offDetected(),Zt.current=!1),ee(!1)},Lr=ve=>{const De=ve.nutriments||{};return{name:ve.product_name||ve.product_name_en||"Unknown Product",brand:ve.brands||"",image:ve.image_small_url||ve.image_url||null,servingSize:ve.serving_size||"100g",protein:Math.round(De.proteins_100g||De.proteins||0),carbs:Math.round(De.carbohydrates_100g||De.carbohydrates||0),fats:Math.round(De.fat_100g||De.fat||0),calories:Math.round(De["energy-kcal_100g"]||De["energy-kcal"]||(De.energy_100g?De.energy_100g/4.184:0)),per100g:!0}},kn=async ve=>{Le(!0);try{const De=`https://world.openfoodfacts.net/api/v2/product/${ve}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,nutriments`,rt=await fetch(De);if(!rt.ok)throw new Error(`HTTP ${rt.status}`);const dt=await rt.json();if(dt.status==="success"||dt.status===1||dt.product){const yt=Lr(dt.product);yt.calories===0&&yt.protein===0&&yt.carbs===0?jt("Product found but no nutrition data available.","error"):(Oe(yt),nt(1),ne(""))}else jt("Product not found. Try search or manual entry.","error")}catch(De){console.error("Barcode lookup error:",De),jt("Failed to look up product. Check your connection.","error")}Le(!1)},Jn=async()=>{if(Ae.trim()){he(!0);try{const ve=`https://world.openfoodfacts.net/api/v2/search?search_terms=${encodeURIComponent(Ae)}&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,nutriments&page_size=10`,De=await fetch(ve);if(!De.ok)throw new Error(`HTTP ${De.status}`);const dt=((await De.json()).products||[]).map(yt=>Lr(yt)).filter(yt=>yt.name!=="Unknown Product"&&(yt.calories>0||yt.protein>0));se(dt),dt.length===0&&jt("No results found. Try a different search.","info")}catch(ve){console.error("Search error:",ve),jt("Search failed. Check your connection.","error")}he(!1)}},zn=()=>{const ve={...J,water:J.water+1};Y(ve),Yt(ve)},mn=()=>{if(J.water<=0)return;const ve={...J,water:J.water-1};Y(ve),Yt(ve)},Fn=(ve,De)=>!De||De<=0?0:Math.min(og,Math.round(ve/De*og)),zt=(ve,De,rt,dt,yt)=>{const kt=Fn(rt,dt),cn=dt>0?Math.min(100,Math.round(rt/dt*100)):0;return l.jsxs("div",{className:`nut-ring-wrap ${yt}`,children:[l.jsx("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[...Array(og)].map((Dn,nn)=>{const Zn=(nn*6-90)*(Math.PI/180),Kr=100+82*Math.cos(Zn),In=100+82*Math.sin(Zn),qn=100+94*Math.cos(Zn),Sr=100+94*Math.sin(Zn);return l.jsx("line",{x1:Kr,y1:In,x2:qn,y2:Sr,className:nn<kt?"nut-tick-filled":"nut-tick-empty",strokeWidth:nn%5===0?"3":"2"},nn)})}),l.jsxs("div",{className:"nut-ring-center",children:[l.jsx("span",{className:"nut-ring-value",children:Math.round(rt)}),l.jsxs("span",{className:"nut-ring-target",children:["/ ",dt,ve==="Calories"?"":"g"]}),l.jsx("span",{className:"nut-ring-label",children:De})]}),l.jsxs("span",{className:"nut-ring-pct",children:[cn,"%"]})]})};return z.useEffect(()=>{if(!O)return;const ve=setTimeout(()=>{const De=O;Ss(),Re(null),kn(De)},1500);return()=>clearTimeout(ve)},[O]),z.useEffect(()=>()=>{if(Zt.current){try{Uo.stop(),Uo.offDetected()}catch{}Zt.current=!1}},[]),i||f==="loading"?l.jsx("div",{className:"cb-loading",children:l.jsx("div",{className:"cb-loading-spinner"})}):f==="setup"?l.jsxs("div",{className:"nut-page","data-theme":a?"dark":"light",children:[l.jsxs("header",{className:"cb-header",children:[l.jsxs("div",{className:"cb-header-left",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),l.jsx("span",{className:"cb-header-title",children:"Nutrition Setup"})]}),l.jsx("div",{className:"cb-header-right",children:l.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:a?l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]}),l.jsxs("main",{className:"nut-main",children:[l.jsx("button",{className:"nut-back-btn",onClick:()=>u(-1),children:" Back"}),l.jsxs("div",{className:"nut-setup-intro",children:[l.jsx("h2",{children:"Set Your Daily Targets"}),l.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),l.jsxs("div",{className:"nut-calc-form",children:[l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Gender"}),l.jsxs("div",{className:"nut-toggle-group",children:[l.jsx("button",{className:C.gender==="male"?"active":"",onClick:()=>{A(ve=>({...ve,gender:"male"})),L(null)},children:"Male"}),l.jsx("button",{className:C.gender==="female"?"active":"",onClick:()=>{A(ve=>({...ve,gender:"female"})),L(null)},children:"Female"})]})]}),l.jsxs("div",{className:"nut-form-row",children:[l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Age"}),l.jsx("input",{type:"number",value:C.age,onChange:ve=>{A(De=>({...De,age:ve.target.value})),L(null)},placeholder:"Years",min:"15",max:"100"})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Weight"}),l.jsxs("div",{className:"nut-input-unit",children:[l.jsx("input",{type:"number",value:C.weight,onChange:ve=>{A(De=>({...De,weight:ve.target.value})),L(null)},placeholder:C.weightUnit,min:"30",max:"300"}),l.jsxs("div",{className:"nut-unit-toggle",children:[l.jsx("button",{className:C.weightUnit==="kg"?"active":"",onClick:()=>{A(ve=>({...ve,weightUnit:"kg"})),L(null)},children:"kg"}),l.jsx("button",{className:C.weightUnit==="lbs"?"active":"",onClick:()=>{A(ve=>({...ve,weightUnit:"lbs"})),L(null)},children:"lbs"})]})]})]})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Height"}),l.jsxs("div",{className:"nut-input-unit",children:[C.heightUnit==="cm"?l.jsx("input",{type:"number",value:C.height,onChange:ve=>{A(De=>({...De,height:ve.target.value})),L(null)},placeholder:"cm",min:"100",max:"250"}):l.jsxs("div",{className:"nut-height-imperial",children:[l.jsx("input",{type:"number",value:C.heightFeet,onChange:ve=>{A(De=>({...De,heightFeet:ve.target.value})),L(null)},placeholder:"ft",min:"4",max:"7"}),l.jsx("input",{type:"number",value:C.heightInches,onChange:ve=>{A(De=>({...De,heightInches:ve.target.value})),L(null)},placeholder:"in",min:"0",max:"11"})]}),l.jsxs("div",{className:"nut-unit-toggle",children:[l.jsx("button",{className:C.heightUnit==="cm"?"active":"",onClick:()=>{A(ve=>({...ve,heightUnit:"cm"})),L(null)},children:"cm"}),l.jsx("button",{className:C.heightUnit==="ft"?"active":"",onClick:()=>{A(ve=>({...ve,heightUnit:"ft"})),L(null)},children:"ft/in"})]})]})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Activity Level"}),l.jsxs("select",{value:C.activityLevel,onChange:ve=>{A(De=>({...De,activityLevel:ve.target.value})),L(null)},children:[l.jsx("option",{value:"sedentary",children:"Sedentary (little to no exercise)"}),l.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),l.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),l.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"}),l.jsx("option",{value:"veryActive",children:"Extra Active (athlete/physical job)"})]})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Fitness Goal"}),l.jsxs("div",{className:"nut-goal-options",children:[l.jsxs("button",{className:C.goal==="lose"?"active":"",onClick:()=>{A(ve=>({...ve,goal:"lose"})),L(null)},children:[l.jsx("span",{className:"nut-goal-icon",children:"-"}),l.jsx("span",{children:"Lose Weight"})]}),l.jsxs("button",{className:C.goal==="maintain"?"active":"",onClick:()=>{A(ve=>({...ve,goal:"maintain"})),L(null)},children:[l.jsx("span",{className:"nut-goal-icon",children:"="}),l.jsx("span",{children:"Maintain"})]}),l.jsxs("button",{className:C.goal==="build"?"active":"",onClick:()=>{A(ve=>({...ve,goal:"build"})),L(null)},children:[l.jsx("span",{className:"nut-goal-icon",children:"+"}),l.jsx("span",{children:"Build Muscle"})]})]})]}),C.goal==="lose"&&l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Deficit Level"}),l.jsxs("div",{className:"nut-deficit-options",children:[l.jsxs("button",{className:C.deficitLevel==="light"?"active":"",onClick:()=>{A(ve=>({...ve,deficitLevel:"light"})),L(null)},children:[l.jsx("strong",{children:"Light"}),l.jsx("span",{children:"-250 cal/day"})]}),l.jsxs("button",{className:C.deficitLevel==="moderate"?"active":"",onClick:()=>{A(ve=>({...ve,deficitLevel:"moderate"})),L(null)},children:[l.jsx("strong",{children:"Moderate"}),l.jsx("span",{children:"-500 cal/day"})]}),l.jsxs("button",{className:C.deficitLevel==="harsh"?"active":"",onClick:()=>{A(ve=>({...ve,deficitLevel:"harsh"})),L(null)},children:[l.jsx("strong",{children:"Aggressive"}),l.jsx("span",{children:"-750 cal/day"})]})]})]}),l.jsx("button",{className:"nut-calc-btn",onClick:Mr,disabled:!Er(),children:"Calculate Macros"})]}),B&&l.jsxs("div",{className:"nut-calc-results",children:[l.jsx("h3",{children:"Your Daily Targets"}),l.jsxs("div",{className:"nut-calc-rings",children:[zt("Protein","Protein",B.protein,B.protein,"ring-protein"),zt("Carbs","Carbs",B.carbs,B.carbs,"ring-carbs"),zt("Fats","Fats",B.fats,B.fats,"ring-fats"),zt("Calories","Calories",B.calories,B.calories,"ring-cals")]}),l.jsxs("div",{className:"nut-calc-info",children:[l.jsxs("div",{className:"nut-calc-info-row",children:[l.jsx("span",{children:"BMR"}),l.jsxs("span",{children:[B.bmr," cal"]})]}),l.jsxs("div",{className:"nut-calc-info-row",children:[l.jsx("span",{children:"TDEE"}),l.jsxs("span",{children:[B.tdee," cal"]})]})]}),l.jsx("button",{className:"nut-save-targets-btn",onClick:Pt,children:"Set as My Daily Targets"})]})]})]}):l.jsxs("div",{className:"nut-page","data-theme":a?"dark":"light",children:[l.jsxs("header",{className:"cb-header",children:[l.jsxs("div",{className:"cb-header-left",children:[l.jsx("img",{src:"/Logo.PNG",alt:"Mind Core Fitness",className:"cb-header-logo"}),l.jsx("span",{className:"cb-header-title",children:"Nutrition"})]}),l.jsxs("div",{className:"cb-header-right",children:[l.jsx("button",{className:"nut-settings-btn",onClick:()=>{p("setup"),L(null)},"aria-label":"Recalculate macros",children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),l.jsx("button",{className:"cb-theme-toggle",onClick:c,"aria-label":"Toggle theme",children:a?l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"12",cy:"12",r:"5"}),l.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):l.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]}),l.jsxs("main",{className:"nut-main",children:[l.jsx("button",{className:"nut-back-btn",onClick:()=>u(-1),children:" Back"}),l.jsxs("div",{className:"nut-rings-grid",children:[zt("Protein","Protein",ce.protein,x.protein,"ring-protein"),zt("Carbs","Carbs",ce.carbs,x.carbs,"ring-carbs"),zt("Fats","Fats",ce.fats,x.fats,"ring-fats"),zt("Calories","Calories",ce.calories,x.calories,"ring-cals")]}),xt&&l.jsxs("div",{className:"nut-add-buttons",children:[l.jsxs("button",{className:"nut-add-btn nut-add-scan",onClick:()=>{te("scan"),Oe(null)},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),l.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),l.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),l.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),l.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),l.jsx("span",{children:"Scan"})]}),l.jsxs("button",{className:"nut-add-btn nut-add-search",onClick:()=>{te("search"),se([]),Ge("")},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),l.jsx("span",{children:"Search"})]}),l.jsxs("button",{className:"nut-add-btn nut-add-manual",onClick:()=>{te("manual"),de({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})},children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),l.jsx("span",{children:"Manual"})]})]}),xt&&l.jsxs("div",{className:"nut-water-section",children:[l.jsxs("div",{className:"nut-water-header",children:[l.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),l.jsx("span",{children:"Water"}),l.jsxs("span",{className:"nut-water-count",children:[J.water," / ",x?.waterGoal||8," glasses"]})]}),l.jsx("div",{className:"nut-water-glasses",children:[...Array(x?.waterGoal||8)].map((ve,De)=>l.jsx("div",{className:`nut-water-glass ${De<J.water?"filled":""}`,children:l.jsx("svg",{viewBox:"0 0 24 24",fill:De<J.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:l.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},De))}),l.jsxs("div",{className:"nut-water-btns",children:[l.jsx("button",{onClick:mn,disabled:J.water<=0,children:"-"}),l.jsx("button",{onClick:zn,children:"+"})]})]}),l.jsxs("div",{className:"nut-date-nav",children:[l.jsx("button",{className:"nut-date-arrow",onClick:()=>Lt(-1),"aria-label":"Previous day",children:l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"15 18 9 12 15 6"})})}),l.jsxs("button",{className:"nut-date-label",onClick:()=>{xe(!pe),V({year:new Date(F+"T12:00:00").getFullYear(),month:new Date(F+"T12:00:00").getMonth()})},children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),l.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),l.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),l.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),l.jsx("span",{children:Ot(F)})]}),l.jsx("button",{className:"nut-date-arrow",onClick:()=>Lt(1),disabled:F>=Ol(),"aria-label":"Next day",children:l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),pe&&l.jsxs("div",{className:"nut-calendar",children:[l.jsxs("div",{className:"nut-cal-header",children:[l.jsx("button",{onClick:()=>V(ve=>{let De=ve.month-1,rt=ve.year;return De<0&&(De=11,rt--),{year:rt,month:De}}),children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"15 18 9 12 15 6"})})}),l.jsxs("span",{children:[br[q.month]," ",q.year]}),l.jsx("button",{onClick:()=>V(ve=>{let De=ve.month+1,rt=ve.year;return De>11&&(De=0,rt++),{year:rt,month:De}}),disabled:q.year===new Date().getFullYear()&&q.month>=new Date().getMonth(),children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),l.jsx("div",{className:"nut-cal-days-header",children:Sn.map(ve=>l.jsx("span",{children:ve},ve))}),l.jsxs("div",{className:"nut-cal-grid",children:[[...Array(Bt(q.year,q.month))].map((ve,De)=>l.jsx("span",{},`e${De}`)),[...Array(it(q.year,q.month))].map((ve,De)=>{const rt=De+1,dt=`${q.year}-${String(q.month+1).padStart(2,"0")}-${String(rt).padStart(2,"0")}`,yt=dt>Ol(),kt=dt===F,cn=dt===Ol();return l.jsx("button",{className:`nut-cal-day${kt?" selected":""}${cn?" today":""}${yt?" future":""}`,disabled:yt,onClick:()=>{$(dt),xe(!1)},children:rt},rt)})]})]}),l.jsxs("div",{className:"nut-log-section",children:[l.jsx("h3",{children:xt?"Today's Log":"Log"}),J.entries.length===0?l.jsx("div",{className:"nut-log-empty",children:l.jsx("p",{children:xt?"No food logged yet today. Add your first meal above!":"No food logged on this day."})}):l.jsx("div",{className:"nut-log-list",children:J.entries.map(ve=>l.jsxs("div",{className:"nut-log-item",children:[l.jsxs("div",{className:"nut-log-item-info",children:[l.jsx("span",{className:"nut-log-item-name",children:ve.name}),ve.serving&&l.jsx("span",{className:"nut-log-item-serving",children:ve.serving})]}),l.jsxs("div",{className:"nut-log-item-macros",children:[l.jsxs("span",{className:"nut-macro-p",children:[ve.protein,"p"]}),l.jsxs("span",{className:"nut-macro-c",children:[ve.carbs,"c"]}),l.jsxs("span",{className:"nut-macro-f",children:[ve.fats,"f"]}),l.jsx("span",{className:"nut-macro-cal",children:ve.calories})]}),xt&&l.jsx("button",{className:"nut-log-delete",onClick:()=>Qr(ve.id),"aria-label":"Remove",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},ve.id))}),!xt&&J.entries.length>0&&l.jsxs("div",{className:"nut-log-summary",children:[l.jsxs("span",{className:"nut-macro-p",children:[ce.protein,"g P"]}),l.jsxs("span",{className:"nut-macro-c",children:[ce.carbs,"g C"]}),l.jsxs("span",{className:"nut-macro-f",children:[ce.fats,"g F"]}),l.jsxs("span",{className:"nut-macro-cal",children:[ce.calories," cal"]})]})]})]}),H&&l.jsx("div",{className:"nut-modal-overlay",onClick:()=>{Ss(),Re(null),te(null),Oe(null)},children:l.jsxs("div",{className:"nut-modal",onClick:ve=>ve.stopPropagation(),children:[l.jsxs("div",{className:"nut-modal-header",children:[l.jsx("h3",{children:H==="scan"?"Scan Barcode":H==="search"?"Search Food":"Manual Entry"}),l.jsx("button",{className:"nut-modal-close",onClick:()=>{Ss(),Re(null),te(null),Oe(null)},children:l.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),H==="scan"&&!fe&&l.jsxs("div",{className:"nut-scan-area",children:[l.jsxs("div",{className:"nut-scanner-wrapper",children:[l.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),W&&!O&&l.jsx("div",{className:"nut-scan-line"}),O&&l.jsxs("div",{className:"nut-scan-detected-overlay",children:[l.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M20 6L9 17l-5-5"})}),l.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),l.jsx("p",{className:"nut-scan-detected-code",children:O})]})]}),!W&&l.jsxs("button",{className:"nut-scan-start-btn",onClick:Or,children:[l.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[l.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),l.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),l.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),l.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),l.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),W&&!O&&l.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),l.jsx("div",{className:"nut-barcode-divider",children:l.jsx("span",{children:"or enter barcode manually"})}),l.jsxs("div",{className:"nut-barcode-manual",children:[l.jsx("input",{type:"text",inputMode:"numeric",value:qe,onChange:ve=>ne(ve.target.value),onKeyDown:ve=>ve.key==="Enter"&&qe.trim()&&kn(qe.trim()),placeholder:"Enter barcode number"}),l.jsx("button",{onClick:()=>qe.trim()&&kn(qe.trim()),disabled:!qe.trim()||Ee,children:Ee?"...":"Look Up"})]})]}),H==="scan"&&fe&&l.jsxs("div",{className:"nut-product-result",children:[fe.image&&l.jsx("img",{src:fe.image,alt:"",className:"nut-product-img"}),l.jsx("h4",{children:fe.name}),fe.brand&&l.jsx("p",{className:"nut-product-brand",children:fe.brand}),l.jsx("p",{className:"nut-product-per",children:"Per 100g:"}),l.jsxs("div",{className:"nut-product-macros",children:[l.jsxs("span",{className:"nut-macro-p",children:[fe.protein,"g P"]}),l.jsxs("span",{className:"nut-macro-c",children:[fe.carbs,"g C"]}),l.jsxs("span",{className:"nut-macro-f",children:[fe.fats,"g F"]}),l.jsxs("span",{className:"nut-macro-cal",children:[fe.calories," cal"]})]}),l.jsxs("div",{className:"nut-serving-adjust",children:[l.jsx("label",{children:"Serving (g)"}),l.jsx("input",{type:"number",value:Math.round(He*100),onChange:ve=>nt(Math.max(0,parseFloat(ve.target.value)||0)/100),min:"1"})]}),l.jsx("div",{className:"nut-product-total",children:l.jsxs("span",{children:["Total: ",Math.round(fe.protein*He),"p / ",Math.round(fe.carbs*He),"c / ",Math.round(fe.fats*He),"f / ",Math.round(fe.calories*He)," cal"]})}),l.jsxs("div",{className:"nut-product-actions",children:[l.jsx("button",{className:"nut-btn-secondary",onClick:()=>{Oe(null),te("scan")},children:"Scan Again"}),l.jsx("button",{className:"nut-btn-primary",onClick:()=>Yr({name:fe.name,protein:Math.round(fe.protein*He),carbs:Math.round(fe.carbs*He),fats:Math.round(fe.fats*He),calories:Math.round(fe.calories*He),serving:`${Math.round(He*100)}g`}),children:"Add"})]})]}),H==="search"&&!fe&&l.jsxs("div",{className:"nut-search-area",children:[l.jsxs("div",{className:"nut-search-bar",children:[l.jsx("input",{type:"text",value:Ae,onChange:ve=>Ge(ve.target.value),onKeyDown:ve=>ve.key==="Enter"&&Jn(),placeholder:"Search food or product...",autoFocus:!0}),l.jsx("button",{onClick:Jn,disabled:ie,children:ie?"...":"Search"})]}),l.jsxs("div",{className:"nut-search-results",children:[M.map((ve,De)=>l.jsxs("button",{className:"nut-search-item",onClick:()=>{Oe(ve),nt(1)},children:[ve.image&&l.jsx("img",{src:ve.image,alt:""}),l.jsxs("div",{className:"nut-search-item-info",children:[l.jsx("span",{className:"nut-search-item-name",children:ve.name}),ve.brand&&l.jsx("span",{className:"nut-search-item-brand",children:ve.brand}),l.jsxs("span",{className:"nut-search-item-macros",children:[ve.calories," cal  ",ve.protein,"p  ",ve.carbs,"c  ",ve.fats,"f per 100g"]})]})]},De)),M.length===0&&Ae&&!ie&&l.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),H==="search"&&fe&&l.jsxs("div",{className:"nut-product-result",children:[fe.image&&l.jsx("img",{src:fe.image,alt:"",className:"nut-product-img"}),l.jsx("h4",{children:fe.name}),fe.brand&&l.jsx("p",{className:"nut-product-brand",children:fe.brand}),l.jsx("p",{className:"nut-product-per",children:"Per 100g:"}),l.jsxs("div",{className:"nut-product-macros",children:[l.jsxs("span",{className:"nut-macro-p",children:[fe.protein,"g P"]}),l.jsxs("span",{className:"nut-macro-c",children:[fe.carbs,"g C"]}),l.jsxs("span",{className:"nut-macro-f",children:[fe.fats,"g F"]}),l.jsxs("span",{className:"nut-macro-cal",children:[fe.calories," cal"]})]}),l.jsxs("div",{className:"nut-serving-adjust",children:[l.jsx("label",{children:"Serving (g)"}),l.jsx("input",{type:"number",value:Math.round(He*100),onChange:ve=>nt(Math.max(0,parseFloat(ve.target.value)||0)/100),min:"1"})]}),l.jsx("div",{className:"nut-product-total",children:l.jsxs("span",{children:["Total: ",Math.round(fe.protein*He),"p / ",Math.round(fe.carbs*He),"c / ",Math.round(fe.fats*He),"f / ",Math.round(fe.calories*He)," cal"]})}),l.jsxs("div",{className:"nut-product-actions",children:[l.jsx("button",{className:"nut-btn-secondary",onClick:()=>Oe(null),children:"Back to Search"}),l.jsx("button",{className:"nut-btn-primary",onClick:()=>Yr({name:fe.name,protein:Math.round(fe.protein*He),carbs:Math.round(fe.carbs*He),fats:Math.round(fe.fats*He),calories:Math.round(fe.calories*He),serving:`${Math.round(He*100)}g`}),children:"Add"})]})]}),H==="manual"&&l.jsxs("div",{className:"nut-manual-form",children:[l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Food Name"}),l.jsx("input",{type:"text",value:Q.name,onChange:ve=>de(De=>({...De,name:ve.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Serving Size (optional)"}),l.jsx("input",{type:"text",value:Q.serving,onChange:ve=>de(De=>({...De,serving:ve.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),l.jsxs("div",{className:"nut-manual-macros",children:[l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Protein (g)"}),l.jsx("input",{type:"number",value:Q.protein,onChange:ve=>de(De=>({...De,protein:ve.target.value})),min:"0"})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Carbs (g)"}),l.jsx("input",{type:"number",value:Q.carbs,onChange:ve=>de(De=>({...De,carbs:ve.target.value})),min:"0"})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Fats (g)"}),l.jsx("input",{type:"number",value:Q.fats,onChange:ve=>de(De=>({...De,fats:ve.target.value})),min:"0"})]}),l.jsxs("div",{className:"nut-form-group",children:[l.jsx("label",{children:"Calories"}),l.jsx("input",{type:"number",value:Q.calories,onChange:ve=>de(De=>({...De,calories:ve.target.value})),min:"0"})]})]}),l.jsx("button",{className:"nut-btn-primary",disabled:!Q.name.trim(),onClick:()=>Yr({name:Q.name,protein:parseFloat(Q.protein)||0,carbs:parseFloat(Q.carbs)||0,fats:parseFloat(Q.fats)||0,calories:parseFloat(Q.calories)||0,serving:Q.serving||""}),children:"Add Food"})]})]})}),Ve&&l.jsx("div",{className:`toast-notification ${Ve.type}`,children:Ve.message})]})}function z4(){const{pathname:s}=Ka();return z.useEffect(()=>{window.scrollTo(0,0)},[s]),null}function F4(){const s=Ir();return z.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const t=e.replace("/login","")||"/";s(t,{replace:!0})}},[s]),null}function q4(){return l.jsx(JD,{children:l.jsx(XD,{children:l.jsxs(_T,{basename:"/login",children:[l.jsx(z4,{}),l.jsx(F4,{}),l.jsxs(KS,{children:[l.jsx(Hr,{path:"/",element:l.jsx(ZD,{})}),l.jsx(Hr,{path:"/dashboard",element:l.jsx(p4,{})}),l.jsx(Hr,{path:"/add-client",element:l.jsx(v4,{})}),l.jsx(Hr,{path:"/client",element:l.jsx(E4,{})}),l.jsx(Hr,{path:"/client/forms",element:l.jsx(S4,{})}),l.jsx(Hr,{path:"/client/tools",element:l.jsx(T4,{})}),l.jsx(Hr,{path:"/client/tools/macros",element:l.jsx(C4,{})}),l.jsx(Hr,{path:"/client/tools/snacks",element:l.jsx(N4,{})}),l.jsx(Hr,{path:"/client/tools/motivation",element:l.jsx(A4,{})}),l.jsx(Hr,{path:"/client/personal-bests",element:l.jsx(k4,{})}),l.jsx(Hr,{path:"/client/circuit",element:l.jsx(I4,{})}),l.jsx(Hr,{path:"/client/circuit/booking",element:l.jsx(L4,{})}),l.jsx(Hr,{path:"/client/core-buddy",element:l.jsx(P4,{})}),l.jsx(Hr,{path:"/client/core-buddy/nutrition",element:l.jsx(B4,{})}),l.jsx(Hr,{path:"*",element:l.jsx(YS,{to:"/",replace:!0})})]})]})})})}JE.createRoot(document.getElementById("root")).render(l.jsx(z.StrictMode,{children:l.jsx(q4,{})}));
