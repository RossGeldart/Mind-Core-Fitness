const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-ByIeBqlw.js","assets/Dashboard-BI21Q1GR.css","assets/AddClient-DUZqvOHc.js","assets/AddClient-DH1OFzHo.css","assets/ClientForms-EErwxG4h.js","assets/ClientForms-GDNtnrAx.css","assets/ClientTools-0wAD08dW.js","assets/ClientTools-DQRPoST3.css","assets/MacroCalculator-CJBBecTu.js","assets/ProteinSnacks-CYhAScRt.js","assets/DailyMotivation-CBH8USov.js","assets/CircuitDashboard-FreR5saL.js","assets/CircuitDashboard-MPNVarsJ.css","assets/CircuitBooking-PZ2C1JKi.js","assets/CircuitBooking-ruk9Q4Wj.css","assets/Leaderboard-DSPVVvbX.js","assets/Leaderboard-DUGNGeOY.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Hm={exports:{}},kc={};var j0;function bE(){if(j0)return kc;j0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:u}}return kc.Fragment=e,kc.jsx=n,kc.jsxs=n,kc}var R0;function _E(){return R0||(R0=1,Hm.exports=bE()),Hm.exports}var i=_E(),qm={exports:{}},It={};var C0;function xE(){if(C0)return It;C0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),k=Symbol.iterator;function O(V){return V===null||typeof V!="object"?null:(V=k&&V[k]||V["@@iterator"],typeof V=="function"?V:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,P={};function le(V,G,ye){this.props=V,this.context=G,this.refs=P,this.updater=ye||W}le.prototype.isReactComponent={},le.prototype.setState=function(V,G){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,G,"setState")},le.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function ee(){}ee.prototype=le.prototype;function me(V,G,ye){this.props=V,this.context=G,this.refs=P,this.updater=ye||W}var je=me.prototype=new ee;je.constructor=me,B(je,le.prototype),je.isPureReactComponent=!0;var ze=Array.isArray;function Ae(){}var A={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(V,G,ye){var Ne=ye.ref;return{$$typeof:s,type:V,key:G,ref:Ne!==void 0?Ne:null,props:ye}}function D(V,G){return C(V.type,G,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function U(V){var G={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ye){return G[ye]})}var I=/\/+/g;function He(V,G){return typeof V=="object"&&V!==null&&V.key!=null?U(""+V.key):G.toString(36)}function Et(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Ae,Ae):(V.status="pending",V.then(function(G){V.status==="pending"&&(V.status="fulfilled",V.value=G)},function(G){V.status==="pending"&&(V.status="rejected",V.reason=G)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Y(V,G,ye,Ne,Be){var De=typeof V;(De==="undefined"||De==="boolean")&&(V=null);var Ze=!1;if(V===null)Ze=!0;else switch(De){case"bigint":case"string":case"number":Ze=!0;break;case"object":switch(V.$$typeof){case s:case e:Ze=!0;break;case _:return Ze=V._init,Y(Ze(V._payload),G,ye,Ne,Be)}}if(Ze)return Be=Be(V),Ze=Ne===""?"."+He(V,0):Ne,ze(Be)?(ye="",Ze!=null&&(ye=Ze.replace(I,"$&/")+"/"),Y(Be,G,ye,"",function(Bt){return Bt})):Be!=null&&(M(Be)&&(Be=D(Be,ye+(Be.key==null||V&&V.key===Be.key?"":(""+Be.key).replace(I,"$&/")+"/")+Ze)),G.push(Be)),1;Ze=0;var at=Ne===""?".":Ne+":";if(ze(V))for(var ft=0;ft<V.length;ft++)Ne=V[ft],De=at+He(Ne,ft),Ze+=Y(Ne,G,ye,De,Be);else if(ft=O(V),typeof ft=="function")for(V=ft.call(V),ft=0;!(Ne=V.next()).done;)Ne=Ne.value,De=at+He(Ne,ft++),Ze+=Y(Ne,G,ye,De,Be);else if(De==="object"){if(typeof V.then=="function")return Y(Et(V),G,ye,Ne,Be);throw G=String(V),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Ze}function Se(V,G,ye){if(V==null)return V;var Ne=[],Be=0;return Y(V,Ne,"","",function(De){return G.call(ye,De,Be++)}),Ne}function Me(V){if(V._status===-1){var G=V._result;G=G(),G.then(function(ye){(V._status===0||V._status===-1)&&(V._status=1,V._result=ye)},function(ye){(V._status===0||V._status===-1)&&(V._status=2,V._result=ye)}),V._status===-1&&(V._status=0,V._result=G)}if(V._status===1)return V._result.default;throw V._result}var lt=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},nt={map:Se,forEach:function(V,G,ye){Se(V,function(){G.apply(this,arguments)},ye)},count:function(V){var G=0;return Se(V,function(){G++}),G},toArray:function(V){return Se(V,function(G){return G})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return It.Activity=T,It.Children=nt,It.Component=le,It.Fragment=n,It.Profiler=o,It.PureComponent=me,It.StrictMode=a,It.Suspense=g,It.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,It.__COMPILER_RUNTIME={__proto__:null,c:function(V){return A.H.useMemoCache(V)}},It.cache=function(V){return function(){return V.apply(null,arguments)}},It.cacheSignal=function(){return null},It.cloneElement=function(V,G,ye){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Ne=B({},V.props),Be=V.key;if(G!=null)for(De in G.key!==void 0&&(Be=""+G.key),G)!S.call(G,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&G.ref===void 0||(Ne[De]=G[De]);var De=arguments.length-2;if(De===1)Ne.children=ye;else if(1<De){for(var Ze=Array(De),at=0;at<De;at++)Ze[at]=arguments[at+2];Ne.children=Ze}return C(V.type,Be,Ne)},It.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},It.createElement=function(V,G,ye){var Ne,Be={},De=null;if(G!=null)for(Ne in G.key!==void 0&&(De=""+G.key),G)S.call(G,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(Be[Ne]=G[Ne]);var Ze=arguments.length-2;if(Ze===1)Be.children=ye;else if(1<Ze){for(var at=Array(Ze),ft=0;ft<Ze;ft++)at[ft]=arguments[ft+2];Be.children=at}if(V&&V.defaultProps)for(Ne in Ze=V.defaultProps,Ze)Be[Ne]===void 0&&(Be[Ne]=Ze[Ne]);return C(V,De,Be)},It.createRef=function(){return{current:null}},It.forwardRef=function(V){return{$$typeof:p,render:V}},It.isValidElement=M,It.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:Me}},It.memo=function(V,G){return{$$typeof:y,type:V,compare:G===void 0?null:G}},It.startTransition=function(V){var G=A.T,ye={};A.T=ye;try{var Ne=V(),Be=A.S;Be!==null&&Be(ye,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(Ae,lt)}catch(De){lt(De)}finally{G!==null&&ye.types!==null&&(G.types=ye.types),A.T=G}},It.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},It.use=function(V){return A.H.use(V)},It.useActionState=function(V,G,ye){return A.H.useActionState(V,G,ye)},It.useCallback=function(V,G){return A.H.useCallback(V,G)},It.useContext=function(V){return A.H.useContext(V)},It.useDebugValue=function(){},It.useDeferredValue=function(V,G){return A.H.useDeferredValue(V,G)},It.useEffect=function(V,G){return A.H.useEffect(V,G)},It.useEffectEvent=function(V){return A.H.useEffectEvent(V)},It.useId=function(){return A.H.useId()},It.useImperativeHandle=function(V,G,ye){return A.H.useImperativeHandle(V,G,ye)},It.useInsertionEffect=function(V,G){return A.H.useInsertionEffect(V,G)},It.useLayoutEffect=function(V,G){return A.H.useLayoutEffect(V,G)},It.useMemo=function(V,G){return A.H.useMemo(V,G)},It.useOptimistic=function(V,G){return A.H.useOptimistic(V,G)},It.useReducer=function(V,G,ye){return A.H.useReducer(V,G,ye)},It.useRef=function(V){return A.H.useRef(V)},It.useState=function(V){return A.H.useState(V)},It.useSyncExternalStore=function(V,G,ye){return A.H.useSyncExternalStore(V,G,ye)},It.useTransition=function(){return A.H.useTransition()},It.version="19.2.4",It}var A0;function Zp(){return A0||(A0=1,qm.exports=xE()),qm.exports}var w=Zp(),$m={exports:{}},Sc={},Wm={exports:{}},Gm={};var I0;function wE(){return I0||(I0=1,(function(s){function e(Y,Se){var Me=Y.length;Y.push(Se);e:for(;0<Me;){var lt=Me-1>>>1,nt=Y[lt];if(0<o(nt,Se))Y[lt]=Se,Y[Me]=nt,Me=lt;else break e}}function n(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var Se=Y[0],Me=Y.pop();if(Me!==Se){Y[0]=Me;e:for(var lt=0,nt=Y.length,V=nt>>>1;lt<V;){var G=2*(lt+1)-1,ye=Y[G],Ne=G+1,Be=Y[Ne];if(0>o(ye,Me))Ne<nt&&0>o(Be,ye)?(Y[lt]=Be,Y[Ne]=Me,lt=Ne):(Y[lt]=ye,Y[G]=Me,lt=G);else if(Ne<nt&&0>o(Be,Me))Y[lt]=Be,Y[Ne]=Me,lt=Ne;else break e}}return Se}function o(Y,Se){var Me=Y.sortIndex-Se.sortIndex;return Me!==0?Me:Y.id-Se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],_=1,T=null,k=3,O=!1,W=!1,B=!1,P=!1,le=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function je(Y){for(var Se=n(y);Se!==null;){if(Se.callback===null)a(y);else if(Se.startTime<=Y)a(y),Se.sortIndex=Se.expirationTime,e(g,Se);else break;Se=n(y)}}function ze(Y){if(B=!1,je(Y),!W)if(n(g)!==null)W=!0,Ae||(Ae=!0,U());else{var Se=n(y);Se!==null&&Et(ze,Se.startTime-Y)}}var Ae=!1,A=-1,S=5,C=-1;function D(){return P?!0:!(s.unstable_now()-C<S)}function M(){if(P=!1,Ae){var Y=s.unstable_now();C=Y;var Se=!0;try{e:{W=!1,B&&(B=!1,ee(A),A=-1),O=!0;var Me=k;try{t:{for(je(Y),T=n(g);T!==null&&!(T.expirationTime>Y&&D());){var lt=T.callback;if(typeof lt=="function"){T.callback=null,k=T.priorityLevel;var nt=lt(T.expirationTime<=Y);if(Y=s.unstable_now(),typeof nt=="function"){T.callback=nt,je(Y),Se=!0;break t}T===n(g)&&a(g),je(Y)}else a(g);T=n(g)}if(T!==null)Se=!0;else{var V=n(y);V!==null&&Et(ze,V.startTime-Y),Se=!1}}break e}finally{T=null,k=Me,O=!1}Se=void 0}}finally{Se?U():Ae=!1}}}var U;if(typeof me=="function")U=function(){me(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,He=I.port2;I.port1.onmessage=M,U=function(){He.postMessage(null)}}else U=function(){le(M,0)};function Et(Y,Se){A=le(function(){Y(s.unstable_now())},Se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_next=function(Y){switch(k){case 1:case 2:case 3:var Se=3;break;default:Se=k}var Me=k;k=Se;try{return Y()}finally{k=Me}},s.unstable_requestPaint=function(){P=!0},s.unstable_runWithPriority=function(Y,Se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Me=k;k=Y;try{return Se()}finally{k=Me}},s.unstable_scheduleCallback=function(Y,Se,Me){var lt=s.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?lt+Me:lt):Me=lt,Y){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Me+nt,Y={id:_++,callback:Se,priorityLevel:Y,startTime:Me,expirationTime:nt,sortIndex:-1},Me>lt?(Y.sortIndex=Me,e(y,Y),n(g)===null&&Y===n(y)&&(B?(ee(A),A=-1):B=!0,Et(ze,Me-lt))):(Y.sortIndex=nt,e(g,Y),W||O||(W=!0,Ae||(Ae=!0,U()))),Y},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(Y){var Se=k;return function(){var Me=k;k=Se;try{return Y.apply(this,arguments)}finally{k=Me}}}})(Gm)),Gm}var D0;function TE(){return D0||(D0=1,Wm.exports=wE()),Wm.exports}var Km={exports:{}},_s={};var M0;function EE(){if(M0)return _s;M0=1;var s=Zp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:g,containerInfo:y,implementation:_}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return _s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,_s.createPortal=function(g,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,_)},_s.flushSync=function(g){var y=d.T,_=a.p;try{if(d.T=null,a.p=2,g)return g()}finally{d.T=y,a.p=_,a.d.f()}},_s.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(g,y))},_s.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},_s.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var _=y.as,T=p(_,y.crossOrigin),k=typeof y.integrity=="string"?y.integrity:void 0,O=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?a.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:k,fetchPriority:O}):_==="script"&&a.d.X(g,{crossOrigin:T,integrity:k,fetchPriority:O,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},_s.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=p(y.as,y.crossOrigin);a.d.M(g,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(g)},_s.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,T=p(_,y.crossOrigin);a.d.L(g,_,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},_s.preloadModule=function(g,y){if(typeof g=="string")if(y){var _=p(y.as,y.crossOrigin);a.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(g)},_s.requestFormReset=function(g){a.d.r(g)},_s.unstable_batchedUpdates=function(g,y){return g(y)},_s.useFormState=function(g,y,_){return d.H.useFormState(g,y,_)},_s.useFormStatus=function(){return d.H.useHostTransitionStatus()},_s.version="19.2.4",_s}var P0;function kE(){if(P0)return Km.exports;P0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Km.exports=EE(),Km.exports}var L0;function SE(){if(L0)return Sc;L0=1;var s=TE(),e=Zp(),n=kE();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,l=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(l=r.return),t=r.return;while(t)}return r.tag===3?l:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(a(188))}function y(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(a(188));return r!==t?null:t}for(var l=t,c=r;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(a(188))}if(l.return!==c.return)l=f,c=m;else{for(var b=!1,N=f.child;N;){if(N===l){b=!0,l=f,c=m;break}if(N===c){b=!0,c=f,l=m;break}N=N.sibling}if(!b){for(N=m.child;N;){if(N===l){b=!0,l=m,c=f;break}if(N===c){b=!0,c=m,l=f;break}N=N.sibling}if(!b)throw Error(a(189))}}if(l.alternate!==c)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?t:r}function _(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=_(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,k=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),me=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),ze=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function He(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case le:return"Profiler";case P:return"StrictMode";case ze:return"Suspense";case Ae:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case W:return"Portal";case me:return t.displayName||"Context";case ee:return(t._context.displayName||"Context")+".Consumer";case je:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A:return r=t.displayName||null,r!==null?r:He(t.type)||"Memo";case S:r=t._payload,t=t._init;try{return He(t(r))}catch{}}return null}var Et=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Me={pending:!1,data:null,method:null,action:null},lt=[],nt=-1;function V(t){return{current:t}}function G(t){0>nt||(t.current=lt[nt],lt[nt]=null,nt--)}function ye(t,r){nt++,lt[nt]=t.current,t.current=r}var Ne=V(null),Be=V(null),De=V(null),Ze=V(null);function at(t,r){switch(ye(De,r),ye(Be,t),ye(Ne,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Xb(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Xb(r),t=Jb(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(Ne),ye(Ne,t)}function ft(){G(Ne),G(Be),G(De)}function Bt(t){t.memoizedState!==null&&ye(Ze,t);var r=Ne.current,l=Jb(r,t.type);r!==l&&(ye(Be,t),ye(Ne,l))}function fn(t){Be.current===t&&(G(Ne),G(Be)),Ze.current===t&&(G(Ze),xc._currentValue=Me)}var kt,vt;function se(t){if(kt===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);kt=r&&r[1]||"",vt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kt+t+vt}var an=!1;function Ct(t,r){if(!t||an)return"";an=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ie){var te=ie}Reflect.construct(t,[],we)}else{try{we.call()}catch(ie){te=ie}t.call(we.prototype)}}else{try{throw Error()}catch(ie){te=ie}(we=t())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],N=m[1];if(b&&N){var L=b.split(`
`),Z=N.split(`
`);for(f=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(c===L.length||f===Z.length)for(c=L.length-1,f=Z.length-1;1<=c&&0<=f&&L[c]!==Z[f];)f--;for(;1<=c&&0<=f;c--,f--)if(L[c]!==Z[f]){if(c!==1||f!==1)do if(c--,f--,0>f||L[c]!==Z[f]){var fe=`
`+L[c].replace(" at new "," at ");return t.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",t.displayName)),fe}while(1<=c&&0<=f);break}}}finally{an=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?se(l):""}function gt(t,r){switch(t.tag){case 26:case 27:case 5:return se(t.type);case 16:return se("Lazy");case 13:return t.child!==r&&r!==null?se("Suspense Fallback"):se("Suspense");case 19:return se("SuspenseList");case 0:case 15:return Ct(t.type,!1);case 11:return Ct(t.type.render,!1);case 1:return Ct(t.type,!0);case 31:return se("Activity");default:return""}}function ht(t){try{var r="",l=null;do r+=gt(t,l),l=t,t=t.return;while(t);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var pe=Object.prototype.hasOwnProperty,xe=s.unstable_scheduleCallback,et=s.unstable_cancelCallback,Ut=s.unstable_shouldYield,Je=s.unstable_requestPaint,ot=s.unstable_now,Zt=s.unstable_getCurrentPriorityLevel,xt=s.unstable_ImmediatePriority,Xt=s.unstable_UserBlockingPriority,ce=s.unstable_NormalPriority,de=s.unstable_LowPriority,Ee=s.unstable_IdlePriority,$e=s.log,Fe=s.unstable_setDisableYieldValue,Pe=null,We=null;function Ue(t){if(typeof $e=="function"&&Fe(t),We&&typeof We.setStrictMode=="function")try{We.setStrictMode(Pe,t)}catch{}}var Ve=Math.clz32?Math.clz32:Mt,jt=Math.log,At=Math.LN2;function Mt(t){return t>>>=0,t===0?32:31-(jt(t)/At|0)|0}var zt=256,bn=262144,St=4194304;function un(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function An(t,r,l){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var N=c&134217727;return N!==0?(c=N&~m,c!==0?f=un(c):(b&=N,b!==0?f=un(b):l||(l=N&~t,l!==0&&(f=un(l))))):(N=c&~m,N!==0?f=un(N):b!==0?f=un(b):l||(l=c&~t,l!==0&&(f=un(l)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,l=r&-r,m>=l||m===32&&(l&4194048)!==0)?r:f}function mn(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function On(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sn(){var t=St;return St<<=1,(St&62914560)===0&&(St=4194304),t}function In(t){for(var r=[],l=0;31>l;l++)r.push(t);return r}function os(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ss(t,r,l,c,f,m){var b=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var N=t.entanglements,L=t.expirationTimes,Z=t.hiddenUpdates;for(l=b&~l;0<l;){var fe=31-Ve(l),we=1<<fe;N[fe]=0,L[fe]=-1;var te=Z[fe];if(te!==null)for(Z[fe]=null,fe=0;fe<te.length;fe++){var ie=te[fe];ie!==null&&(ie.lane&=-536870913)}l&=~we}c!==0&&vs(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~r))}function vs(t,r,l){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-Ve(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|l&261930}function Ds(t,r){var l=t.entangledLanes|=r;for(t=t.entanglements;l;){var c=31-Ve(l),f=1<<c;f&r|t[c]&r&&(t[c]|=r),l&=~f}}function Ms(t,r){var l=r&-r;return l=(l&42)!==0?1:q(l),(l&(t.suspendedLanes|r))!==0?0:l}function q(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function he(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function be(){var t=Se.p;return t!==0?t:(t=window.event,t===void 0?32:x0(t.type))}function ge(t,r){var l=Se.p;try{return Se.p=t,r()}finally{Se.p=l}}var ue=Math.random().toString(36).slice(2),Ke="__reactFiber$"+ue,Tt="__reactProps$"+ue,tt="__reactContainer$"+ue,mt="__reactEvents$"+ue,dt="__reactListeners$"+ue,en="__reactHandles$"+ue,Ps="__reactResources$"+ue,ss="__reactMarker$"+ue;function Ns(t){delete t[Ke],delete t[Tt],delete t[mt],delete t[dt],delete t[en]}function wn(t){var r=t[Ke];if(r)return r;for(var l=t.parentNode;l;){if(r=l[tt]||l[Ke]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(t=a0(t);t!==null;){if(l=t[Ke])return l;t=a0(t)}return r}t=l,l=t.parentNode}return null}function z(t){if(t=t[Ke]||t[tt]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function ae(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function E(t){var r=t[Ps];return r||(r=t[Ps]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function R(t){t[ss]=!0}var $=new Set,X={};function Le(t,r){Ie(t,r),Ie(t+"Capture",r)}function Ie(t,r){for(X[t]=r,t=0;t<r.length;t++)$.add(r[t])}var Ce=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pt={},pt={};function H(t){return pe.call(pt,t)?!0:pe.call(Pt,t)?!1:Ce.test(t)?pt[t]=!0:(Pt[t]=!0,!1)}function oe(t,r,l){if(H(r))if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+l)}}function ne(t,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+l)}}function ke(t,r,l,c){if(c===null)t.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(r,l,""+c)}}function Re(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ye(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function wt(t,r,l){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){l=""+b,m.call(this,b)}}),Object.defineProperty(t,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Qe(t){if(!t._valueTracker){var r=Ye(t)?"checked":"value";t._valueTracker=wt(t,r,""+t[r])}}function qt(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return t&&(c=Ye(t)?t.checked?"true":"false":t.value),t=c,t!==l?(r.setValue(t),!0):!1}function Nn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var nn=/[\n"\\]/g;function Tn(t){return t.replace(nn,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Oa(t,r,l,c,f,m,b,N){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Re(r)):t.value!==""+Re(r)&&(t.value=""+Re(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Va(t,b,Re(r)):l!=null?Va(t,b,Re(l)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+Re(N):t.removeAttribute("name")}function Li(t,r,l,c,f,m,b,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){Qe(t);return}l=l!=null?""+Re(l):"",r=r!=null?""+Re(r):l,N||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=N?t.checked:!!c,t.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),Qe(t)}function Va(t,r,l){r==="number"&&Nn(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function vr(t,r,l,c){if(t=t.options,r){r={};for(var f=0;f<l.length;f++)r["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=r.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&c&&(t[l].defaultSelected=!0)}else{for(l=""+Re(l),r=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function tn(t,r,l){if(r!=null&&(r=""+Re(r),r!==t.value&&(t.value=r),l==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=l!=null?""+Re(l):""}function Dn(t,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(a(92));if(Et(c)){if(1<c.length)throw Error(a(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=Re(r),t.defaultValue=l,c=t.textContent,c===l&&c!==""&&c!==null&&(t.value=c),Qe(t)}function Mn(t,r){if(r){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=r;return}}t.textContent=r}var br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _r(t,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,l):typeof l!="number"||l===0||br.has(r)?r==="float"?t.cssFloat=l:t[r]=(""+l).trim():t[r]=l+"px"}function cs(t,r,l){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&l[f]!==c&&_r(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&_r(t,m,r[m])}function bs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(t){return xr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function js(){}var Oo=null;function sr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ua=null,Br=null;function Oi(t){var r=z(t);if(r&&(t=r.stateNode)){var l=t[Tt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Oa(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Tn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==t&&c.form===t.form){var f=c[Tt]||null;if(!f)throw Error(a(90));Oa(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===t.form&&qt(c)}break e;case"textarea":tn(t,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&vr(t,!!l.multiple,r,!1)}}}var Nl=!1;function za(t,r,l){if(Nl)return t(r,l);Nl=!0;try{var c=t(r);return c}finally{if(Nl=!1,(Ua!==null||Br!==null)&&(uh(),Ua&&(r=Ua,t=Br,Br=Ua=null,Oi(r),t)))for(r=0;r<t.length;r++)Oi(t[r])}}function wr(t,r){var l=t.stateNode;if(l===null)return null;var c=l[Tt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(a(231,r,typeof l));return l}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vi=!1;if(rr)try{var pn={};Object.defineProperty(pn,"passive",{get:function(){Vi=!0}}),window.addEventListener("test",pn,pn),window.removeEventListener("test",pn,pn)}catch{Vi=!1}var Ur=null,Vo=null,Bi=null;function Bo(){if(Bi)return Bi;var t,r=Vo,l=r.length,c,f="value"in Ur?Ur.value:Ur.textContent,m=f.length;for(t=0;t<l&&r[t]===f[t];t++);var b=l-t;for(c=1;c<=b&&r[l-c]===f[m-c];c++);return Bi=f.slice(t,1<c?1-c:void 0)}function Ui(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function la(){return!0}function Tr(){return!1}function us(t){function r(l,c,f,m,b){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(l=t[N],this[N]=l?l(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?la:Tr,this.isPropagationStopped=Tr,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),r}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zr=us(oa),Fa=T({},oa,{view:0,detail:0}),Uo=us(Fa),Ha,jl,Fr,Rl=T({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fr&&(Fr&&t.type==="mousemove"?(Ha=t.screenX-Fr.screenX,jl=t.screenY-Fr.screenY):jl=Ha=0,Fr=t),Ha)},movementY:function(t){return"movementY"in t?t.movementY:jl}}),zo=us(Rl),zi=T({},Rl,{dataTransfer:0}),vu=us(zi),bu=T({},Fa,{relatedTarget:0}),Fi=us(bu),Fo=T({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),_u=us(Fo),Cl=T({},oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xu=us(Cl),wu=T({},oa,{data:0}),Hr=us(wu),Tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ku={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Su(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=ku[t])?!!r[t]:!1}function qa(){return Su}var Rs=T({},Fa,{key:function(t){if(t.key){var r=Tu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Ui(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Eu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qa,charCode:function(t){return t.type==="keypress"?Ui(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ui(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nu=us(Rs),ju=T({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ca=us(ju),h=T({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qa}),v=us(h),x=T({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),j=us(x),Q=T({},Rl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),re=us(Q),Oe=T({},oa,{newState:0,oldState:0}),Lt=us(Oe),Un=[9,13,27,32],ln=rr&&"CompositionEvent"in window,jn=null;rr&&"documentMode"in document&&(jn=document.documentMode);var ar=rr&&"TextEvent"in window&&!jn,qr=rr&&(!ln||jn&&8<jn&&11>=jn),Er=" ",kr=!1;function Hi(t,r){switch(t){case"keyup":return Un.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Al(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Il=!1;function H2(t,r){switch(t){case"compositionend":return Al(r);case"keypress":return r.which!==32?null:(kr=!0,Er);case"textInput":return t=r.data,t===Er&&kr?null:t;default:return null}}function q2(t,r){if(Il)return t==="compositionend"||!ln&&Hi(t,r)?(t=Bo(),Bi=Vo=Ur=null,Il=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return qr&&r.locale!=="ko"?null:r.data;default:return null}}var $2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oy(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!$2[t.type]:r==="textarea"}function cy(t,r,l,c){Ua?Br?Br.push(c):Br=[c]:Ua=c,r=yh(r,"onChange"),0<r.length&&(l=new zr("onChange","change",null,l,c),t.push({event:l,listeners:r}))}var Ho=null,qo=null;function W2(t){$b(t,0)}function Ru(t){var r=ae(t);if(qt(r))return t}function uy(t,r){if(t==="change")return r}var hy=!1;if(rr){var Yd;if(rr){var Qd="oninput"in document;if(!Qd){var dy=document.createElement("div");dy.setAttribute("oninput","return;"),Qd=typeof dy.oninput=="function"}Yd=Qd}else Yd=!1;hy=Yd&&(!document.documentMode||9<document.documentMode)}function fy(){Ho&&(Ho.detachEvent("onpropertychange",my),qo=Ho=null)}function my(t){if(t.propertyName==="value"&&Ru(qo)){var r=[];cy(r,qo,t,sr(t)),za(W2,r)}}function G2(t,r,l){t==="focusin"?(fy(),Ho=r,qo=l,Ho.attachEvent("onpropertychange",my)):t==="focusout"&&fy()}function K2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ru(qo)}function Y2(t,r){if(t==="click")return Ru(r)}function Q2(t,r){if(t==="input"||t==="change")return Ru(r)}function X2(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var $s=typeof Object.is=="function"?Object.is:X2;function $o(t,r){if($s(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var l=Object.keys(t),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!pe.call(r,f)||!$s(t[f],r[f]))return!1}return!0}function py(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gy(t,r){var l=py(t);t=0;for(var c;l;){if(l.nodeType===3){if(c=t+l.textContent.length,t<=r&&c>=r)return{node:l,offset:r-t};t=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=py(l)}}function yy(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?yy(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function vy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Nn(t.document);r instanceof t.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)t=r.contentWindow;else break;r=Nn(t.document)}return r}function Xd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var J2=rr&&"documentMode"in document&&11>=document.documentMode,Dl=null,Jd=null,Wo=null,Zd=!1;function by(t,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Zd||Dl==null||Dl!==Nn(c)||(c=Dl,"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Wo&&$o(Wo,c)||(Wo=c,c=yh(Jd,"onSelect"),0<c.length&&(r=new zr("onSelect","select",null,r,l),t.push({event:r,listeners:c}),r.target=Dl)))}function qi(t,r){var l={};return l[t.toLowerCase()]=r.toLowerCase(),l["Webkit"+t]="webkit"+r,l["Moz"+t]="moz"+r,l}var Ml={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionrun:qi("Transition","TransitionRun"),transitionstart:qi("Transition","TransitionStart"),transitioncancel:qi("Transition","TransitionCancel"),transitionend:qi("Transition","TransitionEnd")},ef={},_y={};rr&&(_y=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function $i(t){if(ef[t])return ef[t];if(!Ml[t])return t;var r=Ml[t],l;for(l in r)if(r.hasOwnProperty(l)&&l in _y)return ef[t]=r[l];return t}var xy=$i("animationend"),wy=$i("animationiteration"),Ty=$i("animationstart"),Z2=$i("transitionrun"),eT=$i("transitionstart"),tT=$i("transitioncancel"),Ey=$i("transitionend"),ky=new Map,tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tf.push("scrollEnd");function Sr(t,r){ky.set(t,r),Le(r,[t])}var Cu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ir=[],Pl=0,nf=0;function Au(){for(var t=Pl,r=nf=Pl=0;r<t;){var l=ir[r];ir[r++]=null;var c=ir[r];ir[r++]=null;var f=ir[r];ir[r++]=null;var m=ir[r];if(ir[r++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}m!==0&&Sy(l,f,m)}}function Iu(t,r,l,c){ir[Pl++]=t,ir[Pl++]=r,ir[Pl++]=l,ir[Pl++]=c,nf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function sf(t,r,l,c){return Iu(t,r,l,c),Du(t)}function Wi(t,r){return Iu(t,null,null,r),Du(t)}function Sy(t,r,l){t.lanes|=l;var c=t.alternate;c!==null&&(c.lanes|=l);for(var f=!1,m=t.return;m!==null;)m.childLanes|=l,c=m.alternate,c!==null&&(c.childLanes|=l),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-Ve(l),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=l|536870912),m):null}function Du(t){if(50<mc)throw mc=0,fm=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Ll={};function nT(t,r,l,c){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ws(t,r,l,c){return new nT(t,r,l,c)}function rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ua(t,r){var l=t.alternate;return l===null?(l=Ws(t.tag,r,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=r,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,r=t.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Ny(t,r){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,r=l.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Mu(t,r,l,c,f,m){var b=0;if(c=t,typeof t=="function")rf(t)&&(b=1);else if(typeof t=="string")b=lE(t,l,Ne.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Ws(31,l,r,f),t.elementType=C,t.lanes=m,t;case B:return Gi(l.children,f,m,r);case P:b=8,f|=24;break;case le:return t=Ws(12,l,r,f|2),t.elementType=le,t.lanes=m,t;case ze:return t=Ws(13,l,r,f),t.elementType=ze,t.lanes=m,t;case Ae:return t=Ws(19,l,r,f),t.elementType=Ae,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:b=10;break e;case ee:b=9;break e;case je:b=11;break e;case A:b=14;break e;case S:b=16,c=null;break e}b=29,l=Error(a(130,t===null?"null":typeof t,"")),c=null}return r=Ws(b,l,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function Gi(t,r,l,c){return t=Ws(7,t,c,r),t.lanes=l,t}function af(t,r,l){return t=Ws(6,t,null,r),t.lanes=l,t}function jy(t){var r=Ws(18,null,null,0);return r.stateNode=t,r}function lf(t,r,l){return r=Ws(4,t.children!==null?t.children:[],t.key,r),r.lanes=l,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Ry=new WeakMap;function lr(t,r){if(typeof t=="object"&&t!==null){var l=Ry.get(t);return l!==void 0?l:(r={value:t,source:r,stack:ht(r)},Ry.set(t,r),r)}return{value:t,source:r,stack:ht(r)}}var Ol=[],Vl=0,Pu=null,Go=0,or=[],cr=0,$a=null,$r=1,Wr="";function ha(t,r){Ol[Vl++]=Go,Ol[Vl++]=Pu,Pu=t,Go=r}function Cy(t,r,l){or[cr++]=$r,or[cr++]=Wr,or[cr++]=$a,$a=t;var c=$r;t=Wr;var f=32-Ve(c)-1;c&=~(1<<f),l+=1;var m=32-Ve(r)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,$r=1<<32-Ve(r)+f|l<<f|c,Wr=m+t}else $r=1<<m|l<<f|c,Wr=t}function of(t){t.return!==null&&(ha(t,1),Cy(t,1,0))}function cf(t){for(;t===Pu;)Pu=Ol[--Vl],Ol[Vl]=null,Go=Ol[--Vl],Ol[Vl]=null;for(;t===$a;)$a=or[--cr],or[cr]=null,Wr=or[--cr],or[cr]=null,$r=or[--cr],or[cr]=null}function Ay(t,r){or[cr++]=$r,or[cr++]=Wr,or[cr++]=$a,$r=r.id,Wr=r.overflow,$a=t}var hs=null,En=null,Qt=!1,Wa=null,ur=!1,uf=Error(a(519));function Ga(t){var r=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ko(lr(r,t)),uf}function Iy(t){var r=t.stateNode,l=t.type,c=t.memoizedProps;switch(r[Ke]=t,r[Tt]=c,l){case"dialog":Ht("cancel",r),Ht("close",r);break;case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(l=0;l<gc.length;l++)Ht(gc[l],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"details":Ht("toggle",r);break;case"input":Ht("invalid",r),Li(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ht("invalid",r);break;case"textarea":Ht("invalid",r),Dn(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Yb(r.textContent,l)?(c.popover!=null&&(Ht("beforetoggle",r),Ht("toggle",r)),c.onScroll!=null&&Ht("scroll",r),c.onScrollEnd!=null&&Ht("scrollend",r),c.onClick!=null&&(r.onclick=js),r=!0):r=!1,r||Ga(t,!0)}function Dy(t){for(hs=t.return;hs;)switch(hs.tag){case 5:case 31:case 13:ur=!1;return;case 27:case 3:ur=!0;return;default:hs=hs.return}}function Bl(t){if(t!==hs)return!1;if(!Qt)return Dy(t),Qt=!0,!1;var r=t.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||jm(t.type,t.memoizedProps)),l=!l),l&&En&&Ga(t),Dy(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));En=r0(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));En=r0(t)}else r===27?(r=En,li(t.type)?(t=Dm,Dm=null,En=t):En=r):En=hs?dr(t.stateNode.nextSibling):null;return!0}function Ki(){En=hs=null,Qt=!1}function hf(){var t=Wa;return t!==null&&(Bs===null?Bs=t:Bs.push.apply(Bs,t),Wa=null),t}function Ko(t){Wa===null?Wa=[t]:Wa.push(t)}var df=V(null),Yi=null,da=null;function Ka(t,r,l){ye(df,r._currentValue),r._currentValue=l}function fa(t){t._currentValue=df.current,G(df)}function ff(t,r,l){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===l)break;t=t.return}}function mf(t,r,l,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=f;for(var L=0;L<r.length;L++)if(N.context===r[L]){m.lanes|=l,N=m.alternate,N!==null&&(N.lanes|=l),ff(m.return,l,t),c||(b=null);break e}m=N.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(a(341));b.lanes|=l,m=b.alternate,m!==null&&(m.lanes|=l),ff(b,l,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Ul(t,r,l,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var N=f.type;$s(f.pendingProps.value,b.value)||(t!==null?t.push(N):t=[N])}}else if(f===Ze.current){if(b=f.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(xc):t=[xc])}f=f.return}t!==null&&mf(r,t,l,c),r.flags|=262144}function Lu(t){for(t=t.firstContext;t!==null;){if(!$s(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Qi(t){Yi=t,da=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ds(t){return My(Yi,t)}function Ou(t,r){return Yi===null&&Qi(t),My(t,r)}function My(t,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},da===null){if(t===null)throw Error(a(308));da=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else da=da.next=r;return l}var sT=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(l,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(l){return l()})}},rT=s.unstable_scheduleCallback,aT=s.unstable_NormalPriority,Kn={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new sT,data:new Map,refCount:0}}function Yo(t){t.refCount--,t.refCount===0&&rT(aT,function(){t.controller.abort()})}var Qo=null,gf=0,zl=0,Fl=null;function iT(t,r){if(Qo===null){var l=Qo=[];gf=0,zl=bm(),Fl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return gf++,r.then(Py,Py),r}function Py(){if(--gf===0&&Qo!==null){Fl!==null&&(Fl.status="fulfilled");var t=Qo;Qo=null,zl=0,Fl=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function lT(t,r){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<l.length;f++)(0,l[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var Ly=Y.S;Y.S=function(t,r){bb=ot(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&iT(t,r),Ly!==null&&Ly(t,r)};var Xi=V(null);function yf(){var t=Xi.current;return t!==null?t:_n.pooledCache}function Vu(t,r){r===null?ye(Xi,Xi.current):ye(Xi,r.pool)}function Oy(){var t=yf();return t===null?null:{parent:Kn._currentValue,pool:t}}var Hl=Error(a(460)),vf=Error(a(474)),Bu=Error(a(542)),Uu={then:function(){}};function Vy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function By(t,r,l){switch(l=t[l],l===void 0?t.push(r):l!==r&&(r.then(js,js),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,zy(t),t;default:if(typeof r.status=="string")r.then(js,js);else{if(t=_n,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,zy(t),t}throw Zi=r,Hl}}function Ji(t){try{var r=t._init;return r(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Zi=l,Hl):l}}var Zi=null;function Uy(){if(Zi===null)throw Error(a(459));var t=Zi;return Zi=null,t}function zy(t){if(t===Hl||t===Bu)throw Error(a(483))}var ql=null,Xo=0;function zu(t){var r=Xo;return Xo+=1,ql===null&&(ql=[]),By(ql,t,r)}function Jo(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Fu(t,r){throw r.$$typeof===k?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Fy(t){function r(K,F){if(t){var J=K.deletions;J===null?(K.deletions=[F],K.flags|=16):J.push(F)}}function l(K,F){if(!t)return null;for(;F!==null;)r(K,F),F=F.sibling;return null}function c(K){for(var F=new Map;K!==null;)K.key!==null?F.set(K.key,K):F.set(K.index,K),K=K.sibling;return F}function f(K,F){return K=ua(K,F),K.index=0,K.sibling=null,K}function m(K,F,J){return K.index=J,t?(J=K.alternate,J!==null?(J=J.index,J<F?(K.flags|=67108866,F):J):(K.flags|=67108866,F)):(K.flags|=1048576,F)}function b(K){return t&&K.alternate===null&&(K.flags|=67108866),K}function N(K,F,J,ve){return F===null||F.tag!==6?(F=af(J,K.mode,ve),F.return=K,F):(F=f(F,J),F.return=K,F)}function L(K,F,J,ve){var ct=J.type;return ct===B?fe(K,F,J.props.children,ve,J.key):F!==null&&(F.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===S&&Ji(ct)===F.type)?(F=f(F,J.props),Jo(F,J),F.return=K,F):(F=Mu(J.type,J.key,J.props,null,K.mode,ve),Jo(F,J),F.return=K,F)}function Z(K,F,J,ve){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=lf(J,K.mode,ve),F.return=K,F):(F=f(F,J.children||[]),F.return=K,F)}function fe(K,F,J,ve,ct){return F===null||F.tag!==7?(F=Gi(J,K.mode,ve,ct),F.return=K,F):(F=f(F,J),F.return=K,F)}function we(K,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=af(""+F,K.mode,J),F.return=K,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case O:return J=Mu(F.type,F.key,F.props,null,K.mode,J),Jo(J,F),J.return=K,J;case W:return F=lf(F,K.mode,J),F.return=K,F;case S:return F=Ji(F),we(K,F,J)}if(Et(F)||U(F))return F=Gi(F,K.mode,J,null),F.return=K,F;if(typeof F.then=="function")return we(K,zu(F),J);if(F.$$typeof===me)return we(K,Ou(K,F),J);Fu(K,F)}return null}function te(K,F,J,ve){var ct=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ct!==null?null:N(K,F,""+J,ve);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case O:return J.key===ct?L(K,F,J,ve):null;case W:return J.key===ct?Z(K,F,J,ve):null;case S:return J=Ji(J),te(K,F,J,ve)}if(Et(J)||U(J))return ct!==null?null:fe(K,F,J,ve,null);if(typeof J.then=="function")return te(K,F,zu(J),ve);if(J.$$typeof===me)return te(K,F,Ou(K,J),ve);Fu(K,J)}return null}function ie(K,F,J,ve,ct){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return K=K.get(J)||null,N(F,K,""+ve,ct);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case O:return K=K.get(ve.key===null?J:ve.key)||null,L(F,K,ve,ct);case W:return K=K.get(ve.key===null?J:ve.key)||null,Z(F,K,ve,ct);case S:return ve=Ji(ve),ie(K,F,J,ve,ct)}if(Et(ve)||U(ve))return K=K.get(J)||null,fe(F,K,ve,ct,null);if(typeof ve.then=="function")return ie(K,F,J,zu(ve),ct);if(ve.$$typeof===me)return ie(K,F,J,Ou(F,ve),ct);Fu(F,ve)}return null}function Xe(K,F,J,ve){for(var ct=null,sn=null,st=F,Vt=F=0,Wt=null;st!==null&&Vt<J.length;Vt++){st.index>Vt?(Wt=st,st=null):Wt=st.sibling;var rn=te(K,st,J[Vt],ve);if(rn===null){st===null&&(st=Wt);break}t&&st&&rn.alternate===null&&r(K,st),F=m(rn,F,Vt),sn===null?ct=rn:sn.sibling=rn,sn=rn,st=Wt}if(Vt===J.length)return l(K,st),Qt&&ha(K,Vt),ct;if(st===null){for(;Vt<J.length;Vt++)st=we(K,J[Vt],ve),st!==null&&(F=m(st,F,Vt),sn===null?ct=st:sn.sibling=st,sn=st);return Qt&&ha(K,Vt),ct}for(st=c(st);Vt<J.length;Vt++)Wt=ie(st,K,Vt,J[Vt],ve),Wt!==null&&(t&&Wt.alternate!==null&&st.delete(Wt.key===null?Vt:Wt.key),F=m(Wt,F,Vt),sn===null?ct=Wt:sn.sibling=Wt,sn=Wt);return t&&st.forEach(function(di){return r(K,di)}),Qt&&ha(K,Vt),ct}function yt(K,F,J,ve){if(J==null)throw Error(a(151));for(var ct=null,sn=null,st=F,Vt=F=0,Wt=null,rn=J.next();st!==null&&!rn.done;Vt++,rn=J.next()){st.index>Vt?(Wt=st,st=null):Wt=st.sibling;var di=te(K,st,rn.value,ve);if(di===null){st===null&&(st=Wt);break}t&&st&&di.alternate===null&&r(K,st),F=m(di,F,Vt),sn===null?ct=di:sn.sibling=di,sn=di,st=Wt}if(rn.done)return l(K,st),Qt&&ha(K,Vt),ct;if(st===null){for(;!rn.done;Vt++,rn=J.next())rn=we(K,rn.value,ve),rn!==null&&(F=m(rn,F,Vt),sn===null?ct=rn:sn.sibling=rn,sn=rn);return Qt&&ha(K,Vt),ct}for(st=c(st);!rn.done;Vt++,rn=J.next())rn=ie(st,K,Vt,rn.value,ve),rn!==null&&(t&&rn.alternate!==null&&st.delete(rn.key===null?Vt:rn.key),F=m(rn,F,Vt),sn===null?ct=rn:sn.sibling=rn,sn=rn);return t&&st.forEach(function(vE){return r(K,vE)}),Qt&&ha(K,Vt),ct}function vn(K,F,J,ve){if(typeof J=="object"&&J!==null&&J.type===B&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case O:e:{for(var ct=J.key;F!==null;){if(F.key===ct){if(ct=J.type,ct===B){if(F.tag===7){l(K,F.sibling),ve=f(F,J.props.children),ve.return=K,K=ve;break e}}else if(F.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===S&&Ji(ct)===F.type){l(K,F.sibling),ve=f(F,J.props),Jo(ve,J),ve.return=K,K=ve;break e}l(K,F);break}else r(K,F);F=F.sibling}J.type===B?(ve=Gi(J.props.children,K.mode,ve,J.key),ve.return=K,K=ve):(ve=Mu(J.type,J.key,J.props,null,K.mode,ve),Jo(ve,J),ve.return=K,K=ve)}return b(K);case W:e:{for(ct=J.key;F!==null;){if(F.key===ct)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){l(K,F.sibling),ve=f(F,J.children||[]),ve.return=K,K=ve;break e}else{l(K,F);break}else r(K,F);F=F.sibling}ve=lf(J,K.mode,ve),ve.return=K,K=ve}return b(K);case S:return J=Ji(J),vn(K,F,J,ve)}if(Et(J))return Xe(K,F,J,ve);if(U(J)){if(ct=U(J),typeof ct!="function")throw Error(a(150));return J=ct.call(J),yt(K,F,J,ve)}if(typeof J.then=="function")return vn(K,F,zu(J),ve);if(J.$$typeof===me)return vn(K,F,Ou(K,J),ve);Fu(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(l(K,F.sibling),ve=f(F,J),ve.return=K,K=ve):(l(K,F),ve=af(J,K.mode,ve),ve.return=K,K=ve),b(K)):l(K,F)}return function(K,F,J,ve){try{Xo=0;var ct=vn(K,F,J,ve);return ql=null,ct}catch(st){if(st===Hl||st===Bu)throw st;var sn=Ws(29,st,null,K.mode);return sn.lanes=ve,sn.return=K,sn}}}var el=Fy(!0),Hy=Fy(!1),Ya=!1;function bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _f(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Qa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xa(t,r,l){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(on&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Du(t),Sy(t,null,l),r}return Iu(t,c,r,l),Du(t)}function Zo(t,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,l|=c,r.lanes=l,Ds(t,l)}}function xf(t,r){var l=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,l=l.next}while(l!==null);m===null?f=m=r:m=m.next=r}else f=m=r;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=r:t.next=r,l.lastBaseUpdate=r}var wf=!1;function ec(){if(wf){var t=Fl;if(t!==null)throw t}}function tc(t,r,l,c){wf=!1;var f=t.updateQueue;Ya=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var L=N,Z=L.next;L.next=null,b===null?m=Z:b.next=Z,b=L;var fe=t.alternate;fe!==null&&(fe=fe.updateQueue,N=fe.lastBaseUpdate,N!==b&&(N===null?fe.firstBaseUpdate=Z:N.next=Z,fe.lastBaseUpdate=L))}if(m!==null){var we=f.baseState;b=0,fe=Z=L=null,N=m;do{var te=N.lane&-536870913,ie=te!==N.lane;if(ie?($t&te)===te:(c&te)===te){te!==0&&te===zl&&(wf=!0),fe!==null&&(fe=fe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Xe=t,yt=N;te=r;var vn=l;switch(yt.tag){case 1:if(Xe=yt.payload,typeof Xe=="function"){we=Xe.call(vn,we,te);break e}we=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=yt.payload,te=typeof Xe=="function"?Xe.call(vn,we,te):Xe,te==null)break e;we=T({},we,te);break e;case 2:Ya=!0}}te=N.callback,te!==null&&(t.flags|=64,ie&&(t.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:N.tag,payload:N.payload,callback:N.callback,next:null},fe===null?(Z=fe=ie,L=we):fe=fe.next=ie,b|=te;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;ie=N,N=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);fe===null&&(L=we),f.baseState=L,f.firstBaseUpdate=Z,f.lastBaseUpdate=fe,m===null&&(f.shared.lanes=0),ni|=b,t.lanes=b,t.memoizedState=we}}function qy(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function $y(t,r){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)qy(l[t],r)}var $l=V(null),Hu=V(0);function Wy(t,r){t=wa,ye(Hu,t),ye($l,r),wa=t|r.baseLanes}function Tf(){ye(Hu,wa),ye($l,$l.current)}function Ef(){wa=Hu.current,G($l),G(Hu)}var Gs=V(null),hr=null;function Ja(t){var r=t.alternate;ye(zn,zn.current&1),ye(Gs,t),hr===null&&(r===null||$l.current!==null||r.memoizedState!==null)&&(hr=t)}function kf(t){ye(zn,zn.current),ye(Gs,t),hr===null&&(hr=t)}function Gy(t){t.tag===22?(ye(zn,zn.current),ye(Gs,t),hr===null&&(hr=t)):Za()}function Za(){ye(zn,zn.current),ye(Gs,Gs.current)}function Ks(t){G(Gs),hr===t&&(hr=null),G(zn)}var zn=V(0);function qu(t){for(var r=t;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Am(l)||Im(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ma=0,Ot=null,gn=null,Yn=null,$u=!1,Wl=!1,tl=!1,Wu=0,nc=0,Gl=null,oT=0;function Vn(){throw Error(a(321))}function Sf(t,r){if(r===null)return!1;for(var l=0;l<r.length&&l<t.length;l++)if(!$s(t[l],r[l]))return!1;return!0}function Nf(t,r,l,c,f,m){return ma=m,Ot=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=t===null||t.memoizedState===null?Cv:Ff,tl=!1,m=l(c,f),tl=!1,Wl&&(m=Yy(r,l,c,f)),Ky(t),m}function Ky(t){Y.H=ac;var r=gn!==null&&gn.next!==null;if(ma=0,Yn=gn=Ot=null,$u=!1,nc=0,Gl=null,r)throw Error(a(300));t===null||Qn||(t=t.dependencies,t!==null&&Lu(t)&&(Qn=!0))}function Yy(t,r,l,c){Ot=t;var f=0;do{if(Wl&&(Gl=null),nc=0,Wl=!1,25<=f)throw Error(a(301));if(f+=1,Yn=gn=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=Av,m=r(l,c)}while(Wl);return m}function cT(){var t=Y.H,r=t.useState()[0];return r=typeof r.then=="function"?sc(r):r,t=t.useState()[0],(gn!==null?gn.memoizedState:null)!==t&&(Ot.flags|=1024),r}function jf(){var t=Wu!==0;return Wu=0,t}function Rf(t,r,l){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~l}function Cf(t){if($u){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}$u=!1}ma=0,Yn=gn=Ot=null,Wl=!1,nc=Wu=0,Gl=null}function Cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?Ot.memoizedState=Yn=t:Yn=Yn.next=t,Yn}function Fn(){if(gn===null){var t=Ot.alternate;t=t!==null?t.memoizedState:null}else t=gn.next;var r=Yn===null?Ot.memoizedState:Yn.next;if(r!==null)Yn=r,gn=t;else{if(t===null)throw Ot.alternate===null?Error(a(467)):Error(a(310));gn=t,t={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},Yn===null?Ot.memoizedState=Yn=t:Yn=Yn.next=t}return Yn}function Gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sc(t){var r=nc;return nc+=1,Gl===null&&(Gl=[]),t=By(Gl,t,r),r=Ot,(Yn===null?r.memoizedState:Yn.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?Cv:Ff),t}function Ku(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return sc(t);if(t.$$typeof===me)return ds(t)}throw Error(a(438,String(t)))}function Af(t){var r=null,l=Ot.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Ot.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Gu(),Ot.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(t),c=0;c<t;c++)l[c]=D;return r.index++,l}function pa(t,r){return typeof r=="function"?r(t):r}function Yu(t){var r=Fn();return If(r,gn,t)}function If(t,r,l){var c=t.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=l;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var N=b=null,L=null,Z=r,fe=!1;do{var we=Z.lane&-536870913;if(we!==Z.lane?($t&we)===we:(ma&we)===we){var te=Z.revertLane;if(te===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),we===zl&&(fe=!0);else if((ma&te)===te){Z=Z.next,te===zl&&(fe=!0);continue}else we={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(N=L=we,b=m):L=L.next=we,Ot.lanes|=te,ni|=te;we=Z.action,tl&&l(m,we),m=Z.hasEagerState?Z.eagerState:l(m,we)}else te={lane:we,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(N=L=te,b=m):L=L.next=te,Ot.lanes|=we,ni|=we;Z=Z.next}while(Z!==null&&Z!==r);if(L===null?b=m:L.next=N,!$s(m,t.memoizedState)&&(Qn=!0,fe&&(l=Fl,l!==null)))throw l;t.memoizedState=m,t.baseState=b,t.baseQueue=L,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Df(t){var r=Fn(),l=r.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=t;var c=l.dispatch,f=l.pending,m=r.memoizedState;if(f!==null){l.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);$s(m,r.memoizedState)||(Qn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),l.lastRenderedState=m}return[m,c]}function Qy(t,r,l){var c=Ot,f=Fn(),m=Qt;if(m){if(l===void 0)throw Error(a(407));l=l()}else l=r();var b=!$s((gn||f).memoizedState,l);if(b&&(f.memoizedState=l,Qn=!0),f=f.queue,Lf(Zy.bind(null,c,f,t),[t]),f.getSnapshot!==r||b||Yn!==null&&Yn.memoizedState.tag&1){if(c.flags|=2048,Kl(9,{destroy:void 0},Jy.bind(null,c,f,l,r),null),_n===null)throw Error(a(349));m||(ma&127)!==0||Xy(c,r,l)}return l}function Xy(t,r,l){t.flags|=16384,t={getSnapshot:r,value:l},r=Ot.updateQueue,r===null?(r=Gu(),Ot.updateQueue=r,r.stores=[t]):(l=r.stores,l===null?r.stores=[t]:l.push(t))}function Jy(t,r,l,c){r.value=l,r.getSnapshot=c,ev(r)&&tv(t)}function Zy(t,r,l){return l(function(){ev(r)&&tv(t)})}function ev(t){var r=t.getSnapshot;t=t.value;try{var l=r();return!$s(t,l)}catch{return!0}}function tv(t){var r=Wi(t,2);r!==null&&Us(r,t,2)}function Mf(t){var r=Cs();if(typeof t=="function"){var l=t;if(t=l(),tl){Ue(!0);try{l()}finally{Ue(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:t},r}function nv(t,r,l,c){return t.baseState=l,If(t,gn,typeof c=="function"?c:pa)}function uT(t,r,l,c,f){if(Ju(t))throw Error(a(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};Y.T!==null?l(!0):m.isTransition=!1,c(m),l=r.pending,l===null?(m.next=r.pending=m,sv(r,m)):(m.next=l.next,r.pending=l.next=m)}}function sv(t,r){var l=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=Y.T,b={};Y.T=b;try{var N=l(f,c),L=Y.S;L!==null&&L(b,N),rv(t,r,N)}catch(Z){Pf(t,r,Z)}finally{m!==null&&b.types!==null&&(m.types=b.types),Y.T=m}}else try{m=l(f,c),rv(t,r,m)}catch(Z){Pf(t,r,Z)}}function rv(t,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){av(t,r,c)},function(c){return Pf(t,r,c)}):av(t,r,l)}function av(t,r,l){r.status="fulfilled",r.value=l,iv(r),t.state=l,r=t.pending,r!==null&&(l=r.next,l===r?t.pending=null:(l=l.next,r.next=l,sv(t,l)))}function Pf(t,r,l){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,iv(r),r=r.next;while(r!==c)}t.action=null}function iv(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function lv(t,r){return r}function ov(t,r){if(Qt){var l=_n.formState;if(l!==null){e:{var c=Ot;if(Qt){if(En){t:{for(var f=En,m=ur;f.nodeType!==8;){if(!m){f=null;break t}if(f=dr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){En=dr(f.nextSibling),c=f.data==="F!";break e}}Ga(c)}c=!1}c&&(r=l[0])}}return l=Cs(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lv,lastRenderedState:r},l.queue=c,l=Nv.bind(null,Ot,c),c.dispatch=l,c=Mf(!1),m=zf.bind(null,Ot,!1,c.queue),c=Cs(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,l=uT.bind(null,Ot,f,m,l),f.dispatch=l,c.memoizedState=t,[r,l,!1]}function cv(t){var r=Fn();return uv(r,gn,t)}function uv(t,r,l){if(r=If(t,r,lv)[0],t=Yu(pa)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=sc(r)}catch(b){throw b===Hl?Bu:b}else c=r;r=Fn();var f=r.queue,m=f.dispatch;return l!==r.memoizedState&&(Ot.flags|=2048,Kl(9,{destroy:void 0},hT.bind(null,f,l),null)),[c,m,t]}function hT(t,r){t.action=r}function hv(t){var r=Fn(),l=gn;if(l!==null)return uv(r,l,t);Fn(),r=r.memoizedState,l=Fn();var c=l.queue.dispatch;return l.memoizedState=t,[r,c,!1]}function Kl(t,r,l,c){return t={tag:t,create:l,deps:c,inst:r,next:null},r=Ot.updateQueue,r===null&&(r=Gu(),Ot.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=t.next=t:(c=l.next,l.next=t,t.next=c,r.lastEffect=t),t}function dv(){return Fn().memoizedState}function Qu(t,r,l,c){var f=Cs();Ot.flags|=t,f.memoizedState=Kl(1|r,{destroy:void 0},l,c===void 0?null:c)}function Xu(t,r,l,c){var f=Fn();c=c===void 0?null:c;var m=f.memoizedState.inst;gn!==null&&c!==null&&Sf(c,gn.memoizedState.deps)?f.memoizedState=Kl(r,m,l,c):(Ot.flags|=t,f.memoizedState=Kl(1|r,m,l,c))}function fv(t,r){Qu(8390656,8,t,r)}function Lf(t,r){Xu(2048,8,t,r)}function dT(t){Ot.flags|=4;var r=Ot.updateQueue;if(r===null)r=Gu(),Ot.updateQueue=r,r.events=[t];else{var l=r.events;l===null?r.events=[t]:l.push(t)}}function mv(t){var r=Fn().memoizedState;return dT({ref:r,nextImpl:t}),function(){if((on&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}function pv(t,r){return Xu(4,2,t,r)}function gv(t,r){return Xu(4,4,t,r)}function yv(t,r){if(typeof r=="function"){t=t();var l=r(t);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function vv(t,r,l){l=l!=null?l.concat([t]):null,Xu(4,4,yv.bind(null,r,t),l)}function Of(){}function bv(t,r){var l=Fn();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&Sf(r,c[1])?c[0]:(l.memoizedState=[t,r],t)}function _v(t,r){var l=Fn();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&Sf(r,c[1]))return c[0];if(c=t(),tl){Ue(!0);try{t()}finally{Ue(!1)}}return l.memoizedState=[c,r],c}function Vf(t,r,l){return l===void 0||(ma&1073741824)!==0&&($t&261930)===0?t.memoizedState=r:(t.memoizedState=l,t=xb(),Ot.lanes|=t,ni|=t,l)}function xv(t,r,l,c){return $s(l,r)?l:$l.current!==null?(t=Vf(t,l,c),$s(t,r)||(Qn=!0),t):(ma&42)===0||(ma&1073741824)!==0&&($t&261930)===0?(Qn=!0,t.memoizedState=l):(t=xb(),Ot.lanes|=t,ni|=t,r)}function wv(t,r,l,c,f){var m=Se.p;Se.p=m!==0&&8>m?m:8;var b=Y.T,N={};Y.T=N,zf(t,!1,r,l);try{var L=f(),Z=Y.S;if(Z!==null&&Z(N,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var fe=lT(L,c);rc(t,r,fe,Xs(t))}else rc(t,r,c,Xs(t))}catch(we){rc(t,r,{then:function(){},status:"rejected",reason:we},Xs())}finally{Se.p=m,b!==null&&N.types!==null&&(b.types=N.types),Y.T=b}}function fT(){}function Bf(t,r,l,c){if(t.tag!==5)throw Error(a(476));var f=Tv(t).queue;wv(t,f,r,Me,l===null?fT:function(){return Ev(t),l(c)})}function Tv(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Me,baseState:Me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:Me},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:l},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ev(t){var r=Tv(t);r.next===null&&(r=t.alternate.memoizedState),rc(t,r.next.queue,{},Xs())}function Uf(){return ds(xc)}function kv(){return Fn().memoizedState}function Sv(){return Fn().memoizedState}function mT(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var l=Xs();t=Qa(l);var c=Xa(r,t,l);c!==null&&(Us(c,r,l),Zo(c,r,l)),r={cache:pf()},t.payload=r;return}r=r.return}}function pT(t,r,l){var c=Xs();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ju(t)?jv(r,l):(l=sf(t,r,l,c),l!==null&&(Us(l,t,c),Rv(l,r,c)))}function Nv(t,r,l){var c=Xs();rc(t,r,l,c)}function rc(t,r,l,c){var f={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ju(t))jv(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,N=m(b,l);if(f.hasEagerState=!0,f.eagerState=N,$s(N,b))return Iu(t,r,f,0),_n===null&&Au(),!1}catch{}if(l=sf(t,r,f,c),l!==null)return Us(l,t,c),Rv(l,r,c),!0}return!1}function zf(t,r,l,c){if(c={lane:2,revertLane:bm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ju(t)){if(r)throw Error(a(479))}else r=sf(t,l,c,2),r!==null&&Us(r,t,2)}function Ju(t){var r=t.alternate;return t===Ot||r!==null&&r===Ot}function jv(t,r){Wl=$u=!0;var l=t.pending;l===null?r.next=r:(r.next=l.next,l.next=r),t.pending=r}function Rv(t,r,l){if((l&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,l|=c,r.lanes=l,Ds(t,l)}}var ac={readContext:ds,use:Ku,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useLayoutEffect:Vn,useInsertionEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useSyncExternalStore:Vn,useId:Vn,useHostTransitionStatus:Vn,useFormState:Vn,useActionState:Vn,useOptimistic:Vn,useMemoCache:Vn,useCacheRefresh:Vn};ac.useEffectEvent=Vn;var Cv={readContext:ds,use:Ku,useCallback:function(t,r){return Cs().memoizedState=[t,r===void 0?null:r],t},useContext:ds,useEffect:fv,useImperativeHandle:function(t,r,l){l=l!=null?l.concat([t]):null,Qu(4194308,4,yv.bind(null,r,t),l)},useLayoutEffect:function(t,r){return Qu(4194308,4,t,r)},useInsertionEffect:function(t,r){Qu(4,2,t,r)},useMemo:function(t,r){var l=Cs();r=r===void 0?null:r;var c=t();if(tl){Ue(!0);try{t()}finally{Ue(!1)}}return l.memoizedState=[c,r],c},useReducer:function(t,r,l){var c=Cs();if(l!==void 0){var f=l(r);if(tl){Ue(!0);try{l(r)}finally{Ue(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=pT.bind(null,Ot,t),[c.memoizedState,t]},useRef:function(t){var r=Cs();return t={current:t},r.memoizedState=t},useState:function(t){t=Mf(t);var r=t.queue,l=Nv.bind(null,Ot,r);return r.dispatch=l,[t.memoizedState,l]},useDebugValue:Of,useDeferredValue:function(t,r){var l=Cs();return Vf(l,t,r)},useTransition:function(){var t=Mf(!1);return t=wv.bind(null,Ot,t.queue,!0,!1),Cs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,l){var c=Ot,f=Cs();if(Qt){if(l===void 0)throw Error(a(407));l=l()}else{if(l=r(),_n===null)throw Error(a(349));($t&127)!==0||Xy(c,r,l)}f.memoizedState=l;var m={value:l,getSnapshot:r};return f.queue=m,fv(Zy.bind(null,c,m,t),[t]),c.flags|=2048,Kl(9,{destroy:void 0},Jy.bind(null,c,m,l,r),null),l},useId:function(){var t=Cs(),r=_n.identifierPrefix;if(Qt){var l=Wr,c=$r;l=(c&~(1<<32-Ve(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Wu++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=oT++,r="_"+r+"r_"+l.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Uf,useFormState:ov,useActionState:ov,useOptimistic:function(t){var r=Cs();r.memoizedState=r.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=zf.bind(null,Ot,!0,l),l.dispatch=r,[t,r]},useMemoCache:Af,useCacheRefresh:function(){return Cs().memoizedState=mT.bind(null,Ot)},useEffectEvent:function(t){var r=Cs(),l={impl:t};return r.memoizedState=l,function(){if((on&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Ff={readContext:ds,use:Ku,useCallback:bv,useContext:ds,useEffect:Lf,useImperativeHandle:vv,useInsertionEffect:pv,useLayoutEffect:gv,useMemo:_v,useReducer:Yu,useRef:dv,useState:function(){return Yu(pa)},useDebugValue:Of,useDeferredValue:function(t,r){var l=Fn();return xv(l,gn.memoizedState,t,r)},useTransition:function(){var t=Yu(pa)[0],r=Fn().memoizedState;return[typeof t=="boolean"?t:sc(t),r]},useSyncExternalStore:Qy,useId:kv,useHostTransitionStatus:Uf,useFormState:cv,useActionState:cv,useOptimistic:function(t,r){var l=Fn();return nv(l,gn,t,r)},useMemoCache:Af,useCacheRefresh:Sv};Ff.useEffectEvent=mv;var Av={readContext:ds,use:Ku,useCallback:bv,useContext:ds,useEffect:Lf,useImperativeHandle:vv,useInsertionEffect:pv,useLayoutEffect:gv,useMemo:_v,useReducer:Df,useRef:dv,useState:function(){return Df(pa)},useDebugValue:Of,useDeferredValue:function(t,r){var l=Fn();return gn===null?Vf(l,t,r):xv(l,gn.memoizedState,t,r)},useTransition:function(){var t=Df(pa)[0],r=Fn().memoizedState;return[typeof t=="boolean"?t:sc(t),r]},useSyncExternalStore:Qy,useId:kv,useHostTransitionStatus:Uf,useFormState:hv,useActionState:hv,useOptimistic:function(t,r){var l=Fn();return gn!==null?nv(l,gn,t,r):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Af,useCacheRefresh:Sv};Av.useEffectEvent=mv;function Hf(t,r,l,c){r=t.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var qf={enqueueSetState:function(t,r,l){t=t._reactInternals;var c=Xs(),f=Qa(c);f.payload=r,l!=null&&(f.callback=l),r=Xa(t,f,c),r!==null&&(Us(r,t,c),Zo(r,t,c))},enqueueReplaceState:function(t,r,l){t=t._reactInternals;var c=Xs(),f=Qa(c);f.tag=1,f.payload=r,l!=null&&(f.callback=l),r=Xa(t,f,c),r!==null&&(Us(r,t,c),Zo(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var l=Xs(),c=Qa(l);c.tag=2,r!=null&&(c.callback=r),r=Xa(t,c,l),r!==null&&(Us(r,t,l),Zo(r,t,l))}};function Iv(t,r,l,c,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!$o(l,c)||!$o(f,m):!0}function Dv(t,r,l,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==t&&qf.enqueueReplaceState(r,r.state,null)}function nl(t,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(t=t.defaultProps){l===r&&(l=T({},l));for(var f in t)l[f]===void 0&&(l[f]=t[f])}return l}function Mv(t){Cu(t)}function Pv(t){console.error(t)}function Lv(t){Cu(t)}function Zu(t,r){try{var l=t.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Ov(t,r,l){try{var c=t.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function $f(t,r,l){return l=Qa(l),l.tag=3,l.payload={element:null},l.callback=function(){Zu(t,r)},l}function Vv(t){return t=Qa(t),t.tag=3,t}function Bv(t,r,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){Ov(r,l,c)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Ov(r,l,c),typeof f!="function"&&(si===null?si=new Set([this]):si.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function gT(t,r,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Ul(r,l,f,!0),l=Gs.current,l!==null){switch(l.tag){case 31:case 13:return hr===null?hh():l.alternate===null&&Bn===0&&(Bn=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===Uu?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),gm(t,c,f)),!1;case 22:return l.flags|=65536,c===Uu?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),gm(t,c,f)),!1}throw Error(a(435,l.tag))}return gm(t,c,f),hh(),!1}if(Qt)return r=Gs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==uf&&(t=Error(a(422),{cause:c}),Ko(lr(t,l)))):(c!==uf&&(r=Error(a(423),{cause:c}),Ko(lr(r,l))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=lr(c,l),f=$f(t.stateNode,c,f),xf(t,f),Bn!==4&&(Bn=2)),!1;var m=Error(a(520),{cause:c});if(m=lr(m,l),fc===null?fc=[m]:fc.push(m),Bn!==4&&(Bn=2),r===null)return!0;c=lr(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,t=f&-f,l.lanes|=t,t=$f(l.stateNode,c,t),xf(l,t),!1;case 1:if(r=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(si===null||!si.has(m))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Vv(f),Bv(f,t,l,c),xf(l,f),!1}l=l.return}while(l!==null);return!1}var Wf=Error(a(461)),Qn=!1;function fs(t,r,l,c){r.child=t===null?Hy(r,null,l,c):el(r,t.child,l,c)}function Uv(t,r,l,c,f){l=l.render;var m=r.ref;if("ref"in c){var b={};for(var N in c)N!=="ref"&&(b[N]=c[N])}else b=c;return Qi(r),c=Nf(t,r,l,b,m,f),N=jf(),t!==null&&!Qn?(Rf(t,r,f),ga(t,r,f)):(Qt&&N&&of(r),r.flags|=1,fs(t,r,c,f),r.child)}function zv(t,r,l,c,f){if(t===null){var m=l.type;return typeof m=="function"&&!rf(m)&&m.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=m,Fv(t,r,m,c,f)):(t=Mu(l.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!em(t,f)){var b=m.memoizedProps;if(l=l.compare,l=l!==null?l:$o,l(b,c)&&t.ref===r.ref)return ga(t,r,f)}return r.flags|=1,t=ua(m,c),t.ref=r.ref,t.return=r,r.child=t}function Fv(t,r,l,c,f){if(t!==null){var m=t.memoizedProps;if($o(m,c)&&t.ref===r.ref)if(Qn=!1,r.pendingProps=c=m,em(t,f))(t.flags&131072)!==0&&(Qn=!0);else return r.lanes=t.lanes,ga(t,r,f)}return Gf(t,r,l,c,f)}function Hv(t,r,l,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,t!==null){for(c=r.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,r.child=null;return qv(t,r,m,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vu(r,m!==null?m.cachePool:null),m!==null?Wy(r,m):Tf(),Gy(r);else return c=r.lanes=536870912,qv(t,r,m!==null?m.baseLanes|l:l,l,c)}else m!==null?(Vu(r,m.cachePool),Wy(r,m),Za(),r.memoizedState=null):(t!==null&&Vu(r,null),Tf(),Za());return fs(t,r,f,l),r.child}function ic(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function qv(t,r,l,c,f){var m=yf();return m=m===null?null:{parent:Kn._currentValue,pool:m},r.memoizedState={baseLanes:l,cachePool:m},t!==null&&Vu(r,null),Tf(),Gy(r),t!==null&&Ul(t,r,c,!0),r.childLanes=f,null}function eh(t,r){return r=nh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function $v(t,r,l){return el(r,t.child,null,l),t=eh(r,r.pendingProps),t.flags|=2,Ks(r),r.memoizedState=null,t}function yT(t,r,l){var c=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Qt){if(c.mode==="hidden")return t=eh(r,c),r.lanes=536870912,ic(null,t);if(kf(r),(t=En)?(t=s0(t,ur),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:$a!==null?{id:$r,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},l=jy(t),l.return=r,r.child=l,hs=r,En=null)):t=null,t===null)throw Ga(r);return r.lanes=536870912,null}return eh(r,c)}var m=t.memoizedState;if(m!==null){var b=m.dehydrated;if(kf(r),f)if(r.flags&256)r.flags&=-257,r=$v(t,r,l);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(a(558));else if(Qn||Ul(t,r,l,!1),f=(l&t.childLanes)!==0,Qn||f){if(c=_n,c!==null&&(b=Ms(c,l),b!==0&&b!==m.retryLane))throw m.retryLane=b,Wi(t,b),Us(c,t,b),Wf;hh(),r=$v(t,r,l)}else t=m.treeContext,En=dr(b.nextSibling),hs=r,Qt=!0,Wa=null,ur=!1,t!==null&&Ay(r,t),r=eh(r,c),r.flags|=4096;return r}return t=ua(t.child,{mode:c.mode,children:c.children}),t.ref=r.ref,r.child=t,t.return=r,t}function th(t,r){var l=r.ref;if(l===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(t===null||t.ref!==l)&&(r.flags|=4194816)}}function Gf(t,r,l,c,f){return Qi(r),l=Nf(t,r,l,c,void 0,f),c=jf(),t!==null&&!Qn?(Rf(t,r,f),ga(t,r,f)):(Qt&&c&&of(r),r.flags|=1,fs(t,r,l,f),r.child)}function Wv(t,r,l,c,f,m){return Qi(r),r.updateQueue=null,l=Yy(r,c,l,f),Ky(t),c=jf(),t!==null&&!Qn?(Rf(t,r,m),ga(t,r,m)):(Qt&&c&&of(r),r.flags|=1,fs(t,r,l,m),r.child)}function Gv(t,r,l,c,f){if(Qi(r),r.stateNode===null){var m=Ll,b=l.contextType;typeof b=="object"&&b!==null&&(m=ds(b)),m=new l(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},bf(r),b=l.contextType,m.context=typeof b=="object"&&b!==null?ds(b):Ll,m.state=r.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Hf(r,l,b,c),m.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&qf.enqueueReplaceState(m,m.state,null),tc(r,c,m,f),ec(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var N=r.memoizedProps,L=nl(l,N);m.props=L;var Z=m.context,fe=l.contextType;b=Ll,typeof fe=="object"&&fe!==null&&(b=ds(fe));var we=l.getDerivedStateFromProps;fe=typeof we=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=r.pendingProps!==N,fe||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||Z!==b)&&Dv(r,m,c,b),Ya=!1;var te=r.memoizedState;m.state=te,tc(r,c,m,f),ec(),Z=r.memoizedState,N||te!==Z||Ya?(typeof we=="function"&&(Hf(r,l,we,c),Z=r.memoizedState),(L=Ya||Iv(r,l,L,c,te,Z,b))?(fe||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=Z),m.props=c,m.state=Z,m.context=b,c=L):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,_f(t,r),b=r.memoizedProps,fe=nl(l,b),m.props=fe,we=r.pendingProps,te=m.context,Z=l.contextType,L=Ll,typeof Z=="object"&&Z!==null&&(L=ds(Z)),N=l.getDerivedStateFromProps,(Z=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==we||te!==L)&&Dv(r,m,c,L),Ya=!1,te=r.memoizedState,m.state=te,tc(r,c,m,f),ec();var ie=r.memoizedState;b!==we||te!==ie||Ya||t!==null&&t.dependencies!==null&&Lu(t.dependencies)?(typeof N=="function"&&(Hf(r,l,N,c),ie=r.memoizedState),(fe=Ya||Iv(r,l,fe,c,te,ie,L)||t!==null&&t.dependencies!==null&&Lu(t.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ie,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ie,L)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ie),m.props=c,m.state=ie,m.context=L,c=fe):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,th(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=el(r,t.child,null,f),r.child=el(r,null,l,f)):fs(t,r,l,f),r.memoizedState=m.state,t=r.child):t=ga(t,r,f),t}function Kv(t,r,l,c){return Ki(),r.flags|=256,fs(t,r,l,c),r.child}var Kf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yf(t){return{baseLanes:t,cachePool:Oy()}}function Qf(t,r,l){return t=t!==null?t.childLanes&~l:0,r&&(t|=Qs),t}function Yv(t,r,l){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(zn.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(Qt){if(f?Ja(r):Za(),(t=En)?(t=s0(t,ur),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:$a!==null?{id:$r,overflow:Wr}:null,retryLane:536870912,hydrationErrors:null},l=jy(t),l.return=r,r.child=l,hs=r,En=null)):t=null,t===null)throw Ga(r);return Im(t)?r.lanes=32:r.lanes=536870912,null}var N=c.children;return c=c.fallback,f?(Za(),f=r.mode,N=nh({mode:"hidden",children:N},f),c=Gi(c,f,l,null),N.return=r,c.return=r,N.sibling=c,r.child=N,c=r.child,c.memoizedState=Yf(l),c.childLanes=Qf(t,b,l),r.memoizedState=Kf,ic(null,c)):(Ja(r),Xf(r,N))}var L=t.memoizedState;if(L!==null&&(N=L.dehydrated,N!==null)){if(m)r.flags&256?(Ja(r),r.flags&=-257,r=Jf(t,r,l)):r.memoizedState!==null?(Za(),r.child=t.child,r.flags|=128,r=null):(Za(),N=c.fallback,f=r.mode,c=nh({mode:"visible",children:c.children},f),N=Gi(N,f,l,null),N.flags|=2,c.return=r,N.return=r,c.sibling=N,r.child=c,el(r,t.child,null,l),c=r.child,c.memoizedState=Yf(l),c.childLanes=Qf(t,b,l),r.memoizedState=Kf,r=ic(null,c));else if(Ja(r),Im(N)){if(b=N.nextSibling&&N.nextSibling.dataset,b)var Z=b.dgst;b=Z,c=Error(a(419)),c.stack="",c.digest=b,Ko({value:c,source:null,stack:null}),r=Jf(t,r,l)}else if(Qn||Ul(t,r,l,!1),b=(l&t.childLanes)!==0,Qn||b){if(b=_n,b!==null&&(c=Ms(b,l),c!==0&&c!==L.retryLane))throw L.retryLane=c,Wi(t,c),Us(b,t,c),Wf;Am(N)||hh(),r=Jf(t,r,l)}else Am(N)?(r.flags|=192,r.child=t.child,r=null):(t=L.treeContext,En=dr(N.nextSibling),hs=r,Qt=!0,Wa=null,ur=!1,t!==null&&Ay(r,t),r=Xf(r,c.children),r.flags|=4096);return r}return f?(Za(),N=c.fallback,f=r.mode,L=t.child,Z=L.sibling,c=ua(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,Z!==null?N=ua(Z,N):(N=Gi(N,f,l,null),N.flags|=2),N.return=r,c.return=r,c.sibling=N,r.child=c,ic(null,c),c=r.child,N=t.child.memoizedState,N===null?N=Yf(l):(f=N.cachePool,f!==null?(L=Kn._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Oy(),N={baseLanes:N.baseLanes|l,cachePool:f}),c.memoizedState=N,c.childLanes=Qf(t,b,l),r.memoizedState=Kf,ic(t.child,c)):(Ja(r),l=t.child,t=l.sibling,l=ua(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=l,r.memoizedState=null,l)}function Xf(t,r){return r=nh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function nh(t,r){return t=Ws(22,t,null,r),t.lanes=0,t}function Jf(t,r,l){return el(r,t.child,null,l),t=Xf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Qv(t,r,l){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),ff(t.return,r,l)}function Zf(t,r,l,c,f,m){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f,treeForkCount:m}:(b.isBackwards=r,b.rendering=null,b.renderingStartTime=0,b.last=c,b.tail=l,b.tailMode=f,b.treeForkCount=m)}function Xv(t,r,l){var c=r.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var b=zn.current,N=(b&2)!==0;if(N?(b=b&1|2,r.flags|=128):b&=1,ye(zn,b),fs(t,r,c,l),c=Qt?Go:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qv(t,l,r);else if(t.tag===19)Qv(t,l,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(l=r.child,f=null;l!==null;)t=l.alternate,t!==null&&qu(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=r.child,r.child=null):(f=l.sibling,l.sibling=null),Zf(r,!1,f,l,m,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&qu(t)===null){r.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}Zf(r,!0,l,null,m,c);break;case"together":Zf(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ga(t,r,l){if(t!==null&&(r.dependencies=t.dependencies),ni|=r.lanes,(l&r.childLanes)===0)if(t!==null){if(Ul(t,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,l=ua(t,t.pendingProps),r.child=l,l.return=r;t.sibling!==null;)t=t.sibling,l=l.sibling=ua(t,t.pendingProps),l.return=r;l.sibling=null}return r.child}function em(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Lu(t)))}function vT(t,r,l){switch(r.tag){case 3:at(r,r.stateNode.containerInfo),Ka(r,Kn,t.memoizedState.cache),Ki();break;case 27:case 5:Bt(r);break;case 4:at(r,r.stateNode.containerInfo);break;case 10:Ka(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,kf(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ja(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Yv(t,r,l):(Ja(r),t=ga(t,r,l),t!==null?t.sibling:null);Ja(r);break;case 19:var f=(t.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Ul(t,r,l,!1),c=(l&r.childLanes)!==0),f){if(c)return Xv(t,r,l);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ye(zn,zn.current),c)break;return null;case 22:return r.lanes=0,Hv(t,r,l,r.pendingProps);case 24:Ka(r,Kn,t.memoizedState.cache)}return ga(t,r,l)}function Jv(t,r,l){if(t!==null)if(t.memoizedProps!==r.pendingProps)Qn=!0;else{if(!em(t,l)&&(r.flags&128)===0)return Qn=!1,vT(t,r,l);Qn=(t.flags&131072)!==0}else Qn=!1,Qt&&(r.flags&1048576)!==0&&Cy(r,Go,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(t=Ji(r.elementType),r.type=t,typeof t=="function")rf(t)?(c=nl(t,c),r.tag=1,r=Gv(null,r,t,c,l)):(r.tag=0,r=Gf(null,r,t,c,l));else{if(t!=null){var f=t.$$typeof;if(f===je){r.tag=11,r=Uv(null,r,t,c,l);break e}else if(f===A){r.tag=14,r=zv(null,r,t,c,l);break e}}throw r=He(t)||t,Error(a(306,r,""))}}return r;case 0:return Gf(t,r,r.type,r.pendingProps,l);case 1:return c=r.type,f=nl(c,r.pendingProps),Gv(t,r,c,f,l);case 3:e:{if(at(r,r.stateNode.containerInfo),t===null)throw Error(a(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,_f(t,r),tc(r,c,null,l);var b=r.memoizedState;if(c=b.cache,Ka(r,Kn,c),c!==m.cache&&mf(r,[Kn],l,!0),ec(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Kv(t,r,c,l);break e}else if(c!==f){f=lr(Error(a(424)),r),Ko(f),r=Kv(t,r,c,l);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,En=dr(t.firstChild),hs=r,Qt=!0,Wa=null,ur=!0,l=Hy(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ki(),c===f){r=ga(t,r,l);break e}fs(t,r,c,l)}r=r.child}return r;case 26:return th(t,r),t===null?(l=c0(r.type,null,r.pendingProps,null))?r.memoizedState=l:Qt||(l=r.type,t=r.pendingProps,c=vh(De.current).createElement(l),c[Ke]=r,c[Tt]=t,ms(c,l,t),R(c),r.stateNode=c):r.memoizedState=c0(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Bt(r),t===null&&Qt&&(c=r.stateNode=i0(r.type,r.pendingProps,De.current),hs=r,ur=!0,f=En,li(r.type)?(Dm=f,En=dr(c.firstChild)):En=f),fs(t,r,r.pendingProps.children,l),th(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Qt&&((f=c=En)&&(c=KT(c,r.type,r.pendingProps,ur),c!==null?(r.stateNode=c,hs=r,En=dr(c.firstChild),ur=!1,f=!0):f=!1),f||Ga(r)),Bt(r),f=r.type,m=r.pendingProps,b=t!==null?t.memoizedProps:null,c=m.children,jm(f,m)?c=null:b!==null&&jm(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Nf(t,r,cT,null,null,l),xc._currentValue=f),th(t,r),fs(t,r,c,l),r.child;case 6:return t===null&&Qt&&((t=l=En)&&(l=YT(l,r.pendingProps,ur),l!==null?(r.stateNode=l,hs=r,En=null,t=!0):t=!1),t||Ga(r)),null;case 13:return Yv(t,r,l);case 4:return at(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=el(r,null,c,l):fs(t,r,c,l),r.child;case 11:return Uv(t,r,r.type,r.pendingProps,l);case 7:return fs(t,r,r.pendingProps,l),r.child;case 8:return fs(t,r,r.pendingProps.children,l),r.child;case 12:return fs(t,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Ka(r,r.type,c.value),fs(t,r,c.children,l),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,Qi(r),f=ds(f),c=c(f),r.flags|=1,fs(t,r,c,l),r.child;case 14:return zv(t,r,r.type,r.pendingProps,l);case 15:return Fv(t,r,r.type,r.pendingProps,l);case 19:return Xv(t,r,l);case 31:return yT(t,r,l);case 22:return Hv(t,r,l,r.pendingProps);case 24:return Qi(r),c=ds(Kn),t===null?(f=yf(),f===null&&(f=_n,m=pf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=l),f=m),r.memoizedState={parent:c,cache:f},bf(r),Ka(r,Kn,f)):((t.lanes&l)!==0&&(_f(t,r),tc(r,null,null,l),ec()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Ka(r,Kn,c)):(c=m.cache,Ka(r,Kn,c),c!==f.cache&&mf(r,[Kn],l,!0))),fs(t,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function ya(t){t.flags|=4}function tm(t,r,l,c,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(kb())t.flags|=8192;else throw Zi=Uu,vf}else t.flags&=-16777217}function Zv(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!m0(r))if(kb())t.flags|=8192;else throw Zi=Uu,vf}function sh(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Sn():536870912,t.lanes|=r,Jl|=r)}function lc(t,r){if(!Qt)switch(t.tailMode){case"hidden":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function kn(t){var r=t.alternate!==null&&t.alternate.child===t.child,l=0,c=0;if(r)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=l,r}function bT(t,r,l){var c=r.pendingProps;switch(cf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(r),null;case 1:return kn(r),null;case 3:return l=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),fa(Kn),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(Bl(r)?ya(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,hf())),kn(r),null;case 26:var f=r.type,m=r.memoizedState;return t===null?(ya(r),m!==null?(kn(r),Zv(r,m)):(kn(r),tm(r,f,null,c,l))):m?m!==t.memoizedState?(ya(r),kn(r),Zv(r,m)):(kn(r),r.flags&=-16777217):(t=t.memoizedProps,t!==c&&ya(r),kn(r),tm(r,f,t,c,l)),null;case 27:if(fn(r),l=De.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&ya(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return kn(r),null}t=Ne.current,Bl(r)?Iy(r):(t=i0(f,c,l),r.stateNode=t,ya(r))}return kn(r),null;case 5:if(fn(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&ya(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return kn(r),null}if(m=Ne.current,Bl(r))Iy(r);else{var b=vh(De.current);switch(m){case 1:m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=b.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?b.createElement("select",{is:c.is}):b.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?b.createElement(f,{is:c.is}):b.createElement(f)}}m[Ke]=r,m[Tt]=c;e:for(b=r.child;b!==null;){if(b.tag===5||b.tag===6)m.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===r)break e;for(;b.sibling===null;){if(b.return===null||b.return===r)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}r.stateNode=m;e:switch(ms(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ya(r)}}return kn(r),tm(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,l),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&ya(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(t=De.current,Bl(r)){if(t=r.stateNode,l=r.memoizedProps,c=null,f=hs,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[Ke]=r,t=!!(t.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Yb(t.nodeValue,l)),t||Ga(r,!0)}else t=vh(t).createTextNode(c),t[Ke]=r,r.stateNode=t}return kn(r),null;case 31:if(l=r.memoizedState,t===null||t.memoizedState!==null){if(c=Bl(r),l!==null){if(t===null){if(!c)throw Error(a(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[Ke]=r}else Ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;kn(r),t=!1}else l=hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return r.flags&256?(Ks(r),r):(Ks(r),null);if((r.flags&128)!==0)throw Error(a(558))}return kn(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Bl(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ke]=r}else Ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;kn(r),f=!1}else f=hf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Ks(r),r):(Ks(r),null)}return Ks(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,t=t!==null&&t.memoizedState!==null,l&&(c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),l!==t&&l&&(r.child.flags|=8192),sh(r,r.updateQueue),kn(r),null);case 4:return ft(),t===null&&Tm(r.stateNode.containerInfo),kn(r),null;case 10:return fa(r.type),kn(r),null;case 19:if(G(zn),c=r.memoizedState,c===null)return kn(r),null;if(f=(r.flags&128)!==0,m=c.rendering,m===null)if(f)lc(c,!1);else{if(Bn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=qu(t),m!==null){for(r.flags|=128,lc(c,!1),t=m.updateQueue,r.updateQueue=t,sh(r,t),r.subtreeFlags=0,t=l,l=r.child;l!==null;)Ny(l,t),l=l.sibling;return ye(zn,zn.current&1|2),Qt&&ha(r,c.treeForkCount),r.child}t=t.sibling}c.tail!==null&&ot()>oh&&(r.flags|=128,f=!0,lc(c,!1),r.lanes=4194304)}else{if(!f)if(t=qu(m),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,sh(r,t),lc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Qt)return kn(r),null}else 2*ot()-c.renderingStartTime>oh&&l!==536870912&&(r.flags|=128,f=!0,lc(c,!1),r.lanes=4194304);c.isBackwards?(m.sibling=r.child,r.child=m):(t=c.last,t!==null?t.sibling=m:r.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=ot(),t.sibling=null,l=zn.current,ye(zn,f?l&1|2:l&1),Qt&&ha(r,c.treeForkCount),t):(kn(r),null);case 22:case 23:return Ks(r),Ef(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(kn(r),r.subtreeFlags&6&&(r.flags|=8192)):kn(r),l=r.updateQueue,l!==null&&sh(r,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),t!==null&&G(Xi),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),fa(Kn),kn(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function _T(t,r){switch(cf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return fa(Kn),ft(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return fn(r),null;case 31:if(r.memoizedState!==null){if(Ks(r),r.alternate===null)throw Error(a(340));Ki()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Ks(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));Ki()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return G(zn),null;case 4:return ft(),null;case 10:return fa(r.type),null;case 22:case 23:return Ks(r),Ef(),t!==null&&G(Xi),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return fa(Kn),null;case 25:return null;default:return null}}function eb(t,r){switch(cf(r),r.tag){case 3:fa(Kn),ft();break;case 26:case 27:case 5:fn(r);break;case 4:ft();break;case 31:r.memoizedState!==null&&Ks(r);break;case 13:Ks(r);break;case 19:G(zn);break;case 10:fa(r.type);break;case 22:case 23:Ks(r),Ef(),t!==null&&G(Xi);break;case 24:fa(Kn)}}function oc(t,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){c=void 0;var m=l.create,b=l.inst;c=m(),b.destroy=c}l=l.next}while(l!==f)}}catch(N){dn(r,r.return,N)}}function ei(t,r,l){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var b=c.inst,N=b.destroy;if(N!==void 0){b.destroy=void 0,f=r;var L=l,Z=N;try{Z()}catch(fe){dn(f,L,fe)}}}c=c.next}while(c!==m)}}catch(fe){dn(r,r.return,fe)}}function tb(t){var r=t.updateQueue;if(r!==null){var l=t.stateNode;try{$y(r,l)}catch(c){dn(t,t.return,c)}}}function nb(t,r,l){l.props=nl(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(c){dn(t,r,c)}}function cc(t,r){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof l=="function"?t.refCleanup=l(c):l.current=c}}catch(f){dn(t,r,f)}}function Gr(t,r){var l=t.ref,c=t.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){dn(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){dn(t,r,f)}else l.current=null}function sb(t){var r=t.type,l=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){dn(t,t.return,f)}}function nm(t,r,l){try{var c=t.stateNode;FT(c,t.type,l,r),c[Tt]=r}catch(f){dn(t,t.return,f)}}function rb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&li(t.type)||t.tag===4}function sm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&li(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function rm(t,r,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(t),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=js));else if(c!==4&&(c===27&&li(t.type)&&(l=t.stateNode,r=null),t=t.child,t!==null))for(rm(t,r,l),t=t.sibling;t!==null;)rm(t,r,l),t=t.sibling}function rh(t,r,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?l.insertBefore(t,r):l.appendChild(t);else if(c!==4&&(c===27&&li(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(rh(t,r,l),t=t.sibling;t!==null;)rh(t,r,l),t=t.sibling}function ab(t){var r=t.stateNode,l=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);ms(r,c,l),r[Ke]=t,r[Tt]=l}catch(m){dn(t,t.return,m)}}var va=!1,Xn=!1,am=!1,ib=typeof WeakSet=="function"?WeakSet:Set,rs=null;function xT(t,r){if(t=t.containerInfo,Sm=kh,t=vy(t),Xd(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var b=0,N=-1,L=-1,Z=0,fe=0,we=t,te=null;t:for(;;){for(var ie;we!==l||f!==0&&we.nodeType!==3||(N=b+f),we!==m||c!==0&&we.nodeType!==3||(L=b+c),we.nodeType===3&&(b+=we.nodeValue.length),(ie=we.firstChild)!==null;)te=we,we=ie;for(;;){if(we===t)break t;if(te===l&&++Z===f&&(N=b),te===m&&++fe===c&&(L=b),(ie=we.nextSibling)!==null)break;we=te,te=we.parentNode}we=ie}l=N===-1||L===-1?null:{start:N,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(Nm={focusedElem:t,selectionRange:l},kh=!1,rs=r;rs!==null;)if(r=rs,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,rs=t;else for(;rs!==null;){switch(r=rs,m=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)f=t[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,l=r,f=m.memoizedProps,m=m.memoizedState,c=l.stateNode;try{var Xe=nl(l.type,f);t=c.getSnapshotBeforeUpdate(Xe,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(yt){dn(l,l.return,yt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,l=t.nodeType,l===9)Cm(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Cm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,rs=t;break}rs=r.return}}function lb(t,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:_a(t,l),c&4&&oc(5,l);break;case 1:if(_a(t,l),c&4)if(t=l.stateNode,r===null)try{t.componentDidMount()}catch(b){dn(l,l.return,b)}else{var f=nl(l.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){dn(l,l.return,b)}}c&64&&tb(l),c&512&&cc(l,l.return);break;case 3:if(_a(t,l),c&64&&(t=l.updateQueue,t!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{$y(t,r)}catch(b){dn(l,l.return,b)}}break;case 27:r===null&&c&4&&ab(l);case 26:case 5:_a(t,l),r===null&&c&4&&sb(l),c&512&&cc(l,l.return);break;case 12:_a(t,l);break;case 31:_a(t,l),c&4&&ub(t,l);break;case 13:_a(t,l),c&4&&hb(t,l),c&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=CT.bind(null,l),QT(t,l))));break;case 22:if(c=l.memoizedState!==null||va,!c){r=r!==null&&r.memoizedState!==null||Xn,f=va;var m=Xn;va=c,(Xn=r)&&!m?xa(t,l,(l.subtreeFlags&8772)!==0):_a(t,l),va=f,Xn=m}break;case 30:break;default:_a(t,l)}}function ob(t){var r=t.alternate;r!==null&&(t.alternate=null,ob(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ns(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rn=null,Ls=!1;function ba(t,r,l){for(l=l.child;l!==null;)cb(t,r,l),l=l.sibling}function cb(t,r,l){if(We&&typeof We.onCommitFiberUnmount=="function")try{We.onCommitFiberUnmount(Pe,l)}catch{}switch(l.tag){case 26:Xn||Gr(l,r),ba(t,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Xn||Gr(l,r);var c=Rn,f=Ls;li(l.type)&&(Rn=l.stateNode,Ls=!1),ba(t,r,l),vc(l.stateNode),Rn=c,Ls=f;break;case 5:Xn||Gr(l,r);case 6:if(c=Rn,f=Ls,Rn=null,ba(t,r,l),Rn=c,Ls=f,Rn!==null)if(Ls)try{(Rn.nodeType===9?Rn.body:Rn.nodeName==="HTML"?Rn.ownerDocument.body:Rn).removeChild(l.stateNode)}catch(m){dn(l,r,m)}else try{Rn.removeChild(l.stateNode)}catch(m){dn(l,r,m)}break;case 18:Rn!==null&&(Ls?(t=Rn,t0(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),io(t)):t0(Rn,l.stateNode));break;case 4:c=Rn,f=Ls,Rn=l.stateNode.containerInfo,Ls=!0,ba(t,r,l),Rn=c,Ls=f;break;case 0:case 11:case 14:case 15:ei(2,l,r),Xn||ei(4,l,r),ba(t,r,l);break;case 1:Xn||(Gr(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&nb(l,r,c)),ba(t,r,l);break;case 21:ba(t,r,l);break;case 22:Xn=(c=Xn)||l.memoizedState!==null,ba(t,r,l),Xn=c;break;default:ba(t,r,l)}}function ub(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{io(t)}catch(l){dn(r,r.return,l)}}}function hb(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{io(t)}catch(l){dn(r,r.return,l)}}function wT(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new ib),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new ib),r;default:throw Error(a(435,t.tag))}}function ah(t,r){var l=wT(t);r.forEach(function(c){if(!l.has(c)){l.add(c);var f=AT.bind(null,t,c);c.then(f,f)}})}function Os(t,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],m=t,b=r,N=b;e:for(;N!==null;){switch(N.tag){case 27:if(li(N.type)){Rn=N.stateNode,Ls=!1;break e}break;case 5:Rn=N.stateNode,Ls=!1;break e;case 3:case 4:Rn=N.stateNode.containerInfo,Ls=!0;break e}N=N.return}if(Rn===null)throw Error(a(160));cb(m,b,f),Rn=null,Ls=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)db(r,t),r=r.sibling}var Nr=null;function db(t,r){var l=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Os(r,t),Vs(t),c&4&&(ei(3,t,t.return),oc(3,t),ei(5,t,t.return));break;case 1:Os(r,t),Vs(t),c&512&&(Xn||l===null||Gr(l,l.return)),c&64&&va&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=Nr;if(Os(r,t),Vs(t),c&512&&(Xn||l===null||Gr(l,l.return)),c&4){var m=l!==null?l.memoizedState:null;if(c=t.memoizedState,l===null)if(c===null)if(t.stateNode===null){e:{c=t.type,l=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ss]||m[Ke]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),ms(m,c,l),m[Ke]=t,R(m),c=m;break e;case"link":var b=d0("link","href",f).get(c+(l.href||""));if(b){for(var N=0;N<b.length;N++)if(m=b[N],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(N,1);break t}}m=f.createElement(c),ms(m,c,l),f.head.appendChild(m);break;case"meta":if(b=d0("meta","content",f).get(c+(l.content||""))){for(N=0;N<b.length;N++)if(m=b[N],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(N,1);break t}}m=f.createElement(c),ms(m,c,l),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[Ke]=t,R(m),c=m}t.stateNode=c}else f0(f,t.type,t.stateNode);else t.stateNode=h0(f,c,t.memoizedProps);else m!==c?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,c===null?f0(f,t.type,t.stateNode):h0(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&nm(t,t.memoizedProps,l.memoizedProps)}break;case 27:Os(r,t),Vs(t),c&512&&(Xn||l===null||Gr(l,l.return)),l!==null&&c&4&&nm(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Os(r,t),Vs(t),c&512&&(Xn||l===null||Gr(l,l.return)),t.flags&32){f=t.stateNode;try{Mn(f,"")}catch(Xe){dn(t,t.return,Xe)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,nm(t,f,l!==null?l.memoizedProps:f)),c&1024&&(am=!0);break;case 6:if(Os(r,t),Vs(t),c&4){if(t.stateNode===null)throw Error(a(162));c=t.memoizedProps,l=t.stateNode;try{l.nodeValue=c}catch(Xe){dn(t,t.return,Xe)}}break;case 3:if(xh=null,f=Nr,Nr=bh(r.containerInfo),Os(r,t),Nr=f,Vs(t),c&4&&l!==null&&l.memoizedState.isDehydrated)try{io(r.containerInfo)}catch(Xe){dn(t,t.return,Xe)}am&&(am=!1,fb(t));break;case 4:c=Nr,Nr=bh(t.stateNode.containerInfo),Os(r,t),Vs(t),Nr=c;break;case 12:Os(r,t),Vs(t);break;case 31:Os(r,t),Vs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,ah(t,c)));break;case 13:Os(r,t),Vs(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(lh=ot()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,ah(t,c)));break;case 22:f=t.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,Z=va,fe=Xn;if(va=Z||f,Xn=fe||L,Os(r,t),Xn=fe,va=Z,Vs(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(l===null||L||va||Xn||sl(t)),l=null,r=t;;){if(r.tag===5||r.tag===26){if(l===null){L=l=r;try{if(m=L.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{N=L.stateNode;var we=L.memoizedProps.style,te=we!=null&&we.hasOwnProperty("display")?we.display:null;N.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Xe){dn(L,L.return,Xe)}}}else if(r.tag===6){if(l===null){L=r;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(Xe){dn(L,L.return,Xe)}}}else if(r.tag===18){if(l===null){L=r;try{var ie=L.stateNode;f?n0(ie,!0):n0(L.stateNode,!1)}catch(Xe){dn(L,L.return,Xe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,ah(t,l))));break;case 19:Os(r,t),Vs(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,ah(t,c)));break;case 30:break;case 21:break;default:Os(r,t),Vs(t)}}function Vs(t){var r=t.flags;if(r&2){try{for(var l,c=t.return;c!==null;){if(rb(c)){l=c;break}c=c.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var f=l.stateNode,m=sm(t);rh(t,m,f);break;case 5:var b=l.stateNode;l.flags&32&&(Mn(b,""),l.flags&=-33);var N=sm(t);rh(t,N,b);break;case 3:case 4:var L=l.stateNode.containerInfo,Z=sm(t);rm(t,Z,L);break;default:throw Error(a(161))}}catch(fe){dn(t,t.return,fe)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function fb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;fb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function _a(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)lb(t,r.alternate,r),r=r.sibling}function sl(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:ei(4,r,r.return),sl(r);break;case 1:Gr(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&nb(r,r.return,l),sl(r);break;case 27:vc(r.stateNode);case 26:case 5:Gr(r,r.return),sl(r);break;case 22:r.memoizedState===null&&sl(r);break;case 30:sl(r);break;default:sl(r)}t=t.sibling}}function xa(t,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:xa(f,m,l),oc(4,m);break;case 1:if(xa(f,m,l),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){dn(c,c.return,Z)}if(c=m,f=c.updateQueue,f!==null){var N=c.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)qy(L[f],N)}catch(Z){dn(c,c.return,Z)}}l&&b&64&&tb(m),cc(m,m.return);break;case 27:ab(m);case 26:case 5:xa(f,m,l),l&&c===null&&b&4&&sb(m),cc(m,m.return);break;case 12:xa(f,m,l);break;case 31:xa(f,m,l),l&&b&4&&ub(f,m);break;case 13:xa(f,m,l),l&&b&4&&hb(f,m);break;case 22:m.memoizedState===null&&xa(f,m,l),cc(m,m.return);break;case 30:break;default:xa(f,m,l)}r=r.sibling}}function im(t,r){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&Yo(l))}function lm(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Yo(t))}function jr(t,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)mb(t,r,l,c),r=r.sibling}function mb(t,r,l,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:jr(t,r,l,c),f&2048&&oc(9,r);break;case 1:jr(t,r,l,c);break;case 3:jr(t,r,l,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Yo(t)));break;case 12:if(f&2048){jr(t,r,l,c),t=r.stateNode;try{var m=r.memoizedProps,b=m.id,N=m.onPostCommit;typeof N=="function"&&N(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){dn(r,r.return,L)}}else jr(t,r,l,c);break;case 31:jr(t,r,l,c);break;case 13:jr(t,r,l,c);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?jr(t,r,l,c):uc(t,r):m._visibility&2?jr(t,r,l,c):(m._visibility|=2,Yl(t,r,l,c,(r.subtreeFlags&10256)!==0||!1)),f&2048&&im(b,r);break;case 24:jr(t,r,l,c),f&2048&&lm(r.alternate,r);break;default:jr(t,r,l,c)}}function Yl(t,r,l,c,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=t,b=r,N=l,L=c,Z=b.flags;switch(b.tag){case 0:case 11:case 15:Yl(m,b,N,L,f),oc(8,b);break;case 23:break;case 22:var fe=b.stateNode;b.memoizedState!==null?fe._visibility&2?Yl(m,b,N,L,f):uc(m,b):(fe._visibility|=2,Yl(m,b,N,L,f)),f&&Z&2048&&im(b.alternate,b);break;case 24:Yl(m,b,N,L,f),f&&Z&2048&&lm(b.alternate,b);break;default:Yl(m,b,N,L,f)}r=r.sibling}}function uc(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=t,c=r,f=c.flags;switch(c.tag){case 22:uc(l,c),f&2048&&im(c.alternate,c);break;case 24:uc(l,c),f&2048&&lm(c.alternate,c);break;default:uc(l,c)}r=r.sibling}}var hc=8192;function Ql(t,r,l){if(t.subtreeFlags&hc)for(t=t.child;t!==null;)pb(t,r,l),t=t.sibling}function pb(t,r,l){switch(t.tag){case 26:Ql(t,r,l),t.flags&hc&&t.memoizedState!==null&&oE(l,Nr,t.memoizedState,t.memoizedProps);break;case 5:Ql(t,r,l);break;case 3:case 4:var c=Nr;Nr=bh(t.stateNode.containerInfo),Ql(t,r,l),Nr=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=hc,hc=16777216,Ql(t,r,l),hc=c):Ql(t,r,l));break;default:Ql(t,r,l)}}function gb(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function dc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];rs=c,vb(c,t)}gb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)yb(t),t=t.sibling}function yb(t){switch(t.tag){case 0:case 11:case 15:dc(t),t.flags&2048&&ei(9,t,t.return);break;case 3:dc(t);break;case 12:dc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,ih(t)):dc(t);break;default:dc(t)}}function ih(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];rs=c,vb(c,t)}gb(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:ei(8,r,r.return),ih(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,ih(r));break;default:ih(r)}t=t.sibling}}function vb(t,r){for(;rs!==null;){var l=rs;switch(l.tag){case 0:case 11:case 15:ei(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Yo(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,rs=c;else e:for(l=t;rs!==null;){c=rs;var f=c.sibling,m=c.return;if(ob(c),c===l){rs=null;break e}if(f!==null){f.return=m,rs=f;break e}rs=m}}}var TT={getCacheForType:function(t){var r=ds(Kn),l=r.data.get(t);return l===void 0&&(l=t(),r.data.set(t,l)),l},cacheSignal:function(){return ds(Kn).controller.signal}},ET=typeof WeakMap=="function"?WeakMap:Map,on=0,_n=null,Ft=null,$t=0,hn=0,Ys=null,ti=!1,Xl=!1,om=!1,wa=0,Bn=0,ni=0,rl=0,cm=0,Qs=0,Jl=0,fc=null,Bs=null,um=!1,lh=0,bb=0,oh=1/0,ch=null,si=null,ts=0,ri=null,Zl=null,Ta=0,hm=0,dm=null,_b=null,mc=0,fm=null;function Xs(){return(on&2)!==0&&$t!==0?$t&-$t:Y.T!==null?bm():be()}function xb(){if(Qs===0)if(($t&536870912)===0||Qt){var t=bn;bn<<=1,(bn&3932160)===0&&(bn=262144),Qs=t}else Qs=536870912;return t=Gs.current,t!==null&&(t.flags|=32),Qs}function Us(t,r,l){(t===_n&&(hn===2||hn===9)||t.cancelPendingCommit!==null)&&(eo(t,0),ai(t,$t,Qs,!1)),os(t,l),((on&2)===0||t!==_n)&&(t===_n&&((on&2)===0&&(rl|=l),Bn===4&&ai(t,$t,Qs,!1)),Kr(t))}function wb(t,r,l){if((on&6)!==0)throw Error(a(327));var c=!l&&(r&127)===0&&(r&t.expiredLanes)===0||mn(t,r),f=c?NT(t,r):pm(t,r,!0),m=c;do{if(f===0){Xl&&!c&&ai(t,r,0,!1);break}else{if(l=t.current.alternate,m&&!kT(l)){f=pm(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var N=t;f=fc;var L=N.current.memoizedState.isDehydrated;if(L&&(eo(N,b).flags|=256),b=pm(N,b,!1),b!==2){if(om&&!L){N.errorRecoveryDisabledLanes|=m,rl|=m,f=4;break e}m=Bs,Bs=f,m!==null&&(Bs===null?Bs=m:Bs.push.apply(Bs,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){eo(t,0),ai(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:ai(c,r,Qs,!ti);break e;case 2:Bs=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=lh+300-ot(),10<f)){if(ai(c,r,Qs,!ti),An(c,0,!0)!==0)break e;Ta=r,c.timeoutHandle=Zb(Tb.bind(null,c,l,Bs,ch,um,r,Qs,rl,Jl,ti,m,"Throttled",-0,0),f);break e}Tb(c,l,Bs,ch,um,r,Qs,rl,Jl,ti,m,null,-0,0)}}break}while(!0);Kr(t)}function Tb(t,r,l,c,f,m,b,N,L,Z,fe,we,te,ie){if(t.timeoutHandle=-1,we=r.subtreeFlags,we&8192||(we&16785408)===16785408){we={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:js},pb(r,m,we);var Xe=(m&62914560)===m?lh-ot():(m&4194048)===m?bb-ot():0;if(Xe=cE(we,Xe),Xe!==null){Ta=m,t.cancelPendingCommit=Xe(Ab.bind(null,t,r,m,l,c,f,b,N,L,fe,we,null,te,ie)),ai(t,m,b,!Z);return}}Ab(t,r,m,l,c,f,b,N,L)}function kT(t){for(var r=t;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!$s(m(),f))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ai(t,r,l,c){r&=~cm,r&=~rl,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-Ve(f),b=1<<m;c[m]=-1,f&=~b}l!==0&&vs(t,l,r)}function uh(){return(on&6)===0?(pc(0),!1):!0}function mm(){if(Ft!==null){if(hn===0)var t=Ft.return;else t=Ft,da=Yi=null,Cf(t),ql=null,Xo=0,t=Ft;for(;t!==null;)eb(t.alternate,t),t=t.return;Ft=null}}function eo(t,r){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,$T(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Ta=0,mm(),_n=t,Ft=l=ua(t.current,null),$t=r,hn=0,Ys=null,ti=!1,Xl=mn(t,r),om=!1,Jl=Qs=cm=rl=ni=Bn=0,Bs=fc=null,um=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-Ve(c),m=1<<f;r|=t[f],c&=~m}return wa=r,Au(),l}function Eb(t,r){Ot=null,Y.H=ac,r===Hl||r===Bu?(r=Uy(),hn=3):r===vf?(r=Uy(),hn=4):hn=r===Wf?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Ys=r,Ft===null&&(Bn=1,Zu(t,lr(r,t.current)))}function kb(){var t=Gs.current;return t===null?!0:($t&4194048)===$t?hr===null:($t&62914560)===$t||($t&536870912)!==0?t===hr:!1}function Sb(){var t=Y.H;return Y.H=ac,t===null?ac:t}function Nb(){var t=Y.A;return Y.A=TT,t}function hh(){Bn=4,ti||($t&4194048)!==$t&&Gs.current!==null||(Xl=!0),(ni&134217727)===0&&(rl&134217727)===0||_n===null||ai(_n,$t,Qs,!1)}function pm(t,r,l){var c=on;on|=2;var f=Sb(),m=Nb();(_n!==t||$t!==r)&&(ch=null,eo(t,r)),r=!1;var b=Bn;e:do try{if(hn!==0&&Ft!==null){var N=Ft,L=Ys;switch(hn){case 8:mm(),b=6;break e;case 3:case 2:case 9:case 6:Gs.current===null&&(r=!0);var Z=hn;if(hn=0,Ys=null,to(t,N,L,Z),l&&Xl){b=0;break e}break;default:Z=hn,hn=0,Ys=null,to(t,N,L,Z)}}ST(),b=Bn;break}catch(fe){Eb(t,fe)}while(!0);return r&&t.shellSuspendCounter++,da=Yi=null,on=c,Y.H=f,Y.A=m,Ft===null&&(_n=null,$t=0,Au()),b}function ST(){for(;Ft!==null;)jb(Ft)}function NT(t,r){var l=on;on|=2;var c=Sb(),f=Nb();_n!==t||$t!==r?(ch=null,oh=ot()+500,eo(t,r)):Xl=mn(t,r);e:do try{if(hn!==0&&Ft!==null){r=Ft;var m=Ys;t:switch(hn){case 1:hn=0,Ys=null,to(t,r,m,1);break;case 2:case 9:if(Vy(m)){hn=0,Ys=null,Rb(r);break}r=function(){hn!==2&&hn!==9||_n!==t||(hn=7),Kr(t)},m.then(r,r);break e;case 3:hn=7;break e;case 4:hn=5;break e;case 7:Vy(m)?(hn=0,Ys=null,Rb(r)):(hn=0,Ys=null,to(t,r,m,7));break;case 5:var b=null;switch(Ft.tag){case 26:b=Ft.memoizedState;case 5:case 27:var N=Ft;if(b?m0(b):N.stateNode.complete){hn=0,Ys=null;var L=N.sibling;if(L!==null)Ft=L;else{var Z=N.return;Z!==null?(Ft=Z,dh(Z)):Ft=null}break t}}hn=0,Ys=null,to(t,r,m,5);break;case 6:hn=0,Ys=null,to(t,r,m,6);break;case 8:mm(),Bn=6;break e;default:throw Error(a(462))}}jT();break}catch(fe){Eb(t,fe)}while(!0);return da=Yi=null,Y.H=c,Y.A=f,on=l,Ft!==null?0:(_n=null,$t=0,Au(),Bn)}function jT(){for(;Ft!==null&&!Ut();)jb(Ft)}function jb(t){var r=Jv(t.alternate,t,wa);t.memoizedProps=t.pendingProps,r===null?dh(t):Ft=r}function Rb(t){var r=t,l=r.alternate;switch(r.tag){case 15:case 0:r=Wv(l,r,r.pendingProps,r.type,void 0,$t);break;case 11:r=Wv(l,r,r.pendingProps,r.type.render,r.ref,$t);break;case 5:Cf(r);default:eb(l,r),r=Ft=Ny(r,wa),r=Jv(l,r,wa)}t.memoizedProps=t.pendingProps,r===null?dh(t):Ft=r}function to(t,r,l,c){da=Yi=null,Cf(r),ql=null,Xo=0;var f=r.return;try{if(gT(t,f,r,l,$t)){Bn=1,Zu(t,lr(l,t.current)),Ft=null;return}}catch(m){if(f!==null)throw Ft=f,m;Bn=1,Zu(t,lr(l,t.current)),Ft=null;return}r.flags&32768?(Qt||c===1?t=!0:Xl||($t&536870912)!==0?t=!1:(ti=t=!0,(c===2||c===9||c===3||c===6)&&(c=Gs.current,c!==null&&c.tag===13&&(c.flags|=16384))),Cb(r,t)):dh(r)}function dh(t){var r=t;do{if((r.flags&32768)!==0){Cb(r,ti);return}t=r.return;var l=bT(r.alternate,r,wa);if(l!==null){Ft=l;return}if(r=r.sibling,r!==null){Ft=r;return}Ft=r=t}while(r!==null);Bn===0&&(Bn=5)}function Cb(t,r){do{var l=_T(t.alternate,t);if(l!==null){l.flags&=32767,Ft=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(t=t.sibling,t!==null)){Ft=t;return}Ft=t=l}while(t!==null);Bn=6,Ft=null}function Ab(t,r,l,c,f,m,b,N,L){t.cancelPendingCommit=null;do fh();while(ts!==0);if((on&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=nf,Ss(t,l,m,b,N,L),t===_n&&(Ft=_n=null,$t=0),Zl=r,ri=t,Ta=l,hm=m,dm=f,_b=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,IT(ce,function(){return Lb(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,f=Se.p,Se.p=2,b=on,on|=4;try{xT(t,r,l)}finally{on=b,Se.p=f,Y.T=c}}ts=1,Ib(),Db(),Mb()}}function Ib(){if(ts===1){ts=0;var t=ri,r=Zl,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var c=Se.p;Se.p=2;var f=on;on|=4;try{db(r,t);var m=Nm,b=vy(t.containerInfo),N=m.focusedElem,L=m.selectionRange;if(b!==N&&N&&N.ownerDocument&&yy(N.ownerDocument.documentElement,N)){if(L!==null&&Xd(N)){var Z=L.start,fe=L.end;if(fe===void 0&&(fe=Z),"selectionStart"in N)N.selectionStart=Z,N.selectionEnd=Math.min(fe,N.value.length);else{var we=N.ownerDocument||document,te=we&&we.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Xe=N.textContent.length,yt=Math.min(L.start,Xe),vn=L.end===void 0?yt:Math.min(L.end,Xe);!ie.extend&&yt>vn&&(b=vn,vn=yt,yt=b);var K=gy(N,yt),F=gy(N,vn);if(K&&F&&(ie.rangeCount!==1||ie.anchorNode!==K.node||ie.anchorOffset!==K.offset||ie.focusNode!==F.node||ie.focusOffset!==F.offset)){var J=we.createRange();J.setStart(K.node,K.offset),ie.removeAllRanges(),yt>vn?(ie.addRange(J),ie.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),ie.addRange(J))}}}}for(we=[],ie=N;ie=ie.parentNode;)ie.nodeType===1&&we.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<we.length;N++){var ve=we[N];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}kh=!!Sm,Nm=Sm=null}finally{on=f,Se.p=c,Y.T=l}}t.current=r,ts=2}}function Db(){if(ts===2){ts=0;var t=ri,r=Zl,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var c=Se.p;Se.p=2;var f=on;on|=4;try{lb(t,r.alternate,r)}finally{on=f,Se.p=c,Y.T=l}}ts=3}}function Mb(){if(ts===4||ts===3){ts=0,Je();var t=ri,r=Zl,l=Ta,c=_b;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?ts=5:(ts=0,Zl=ri=null,Pb(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(si=null),he(l),r=r.stateNode,We&&typeof We.onCommitFiberRoot=="function")try{We.onCommitFiberRoot(Pe,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,f=Se.p,Se.p=2,Y.T=null;try{for(var m=t.onRecoverableError,b=0;b<c.length;b++){var N=c[b];m(N.value,{componentStack:N.stack})}}finally{Y.T=r,Se.p=f}}(Ta&3)!==0&&fh(),Kr(t),f=t.pendingLanes,(l&261930)!==0&&(f&42)!==0?t===fm?mc++:(mc=0,fm=t):mc=0,pc(0)}}function Pb(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Yo(r)))}function fh(){return Ib(),Db(),Mb(),Lb()}function Lb(){if(ts!==5)return!1;var t=ri,r=hm;hm=0;var l=he(Ta),c=Y.T,f=Se.p;try{Se.p=32>l?32:l,Y.T=null,l=dm,dm=null;var m=ri,b=Ta;if(ts=0,Zl=ri=null,Ta=0,(on&6)!==0)throw Error(a(331));var N=on;if(on|=4,yb(m.current),mb(m,m.current,b,l),on=N,pc(0,!1),We&&typeof We.onPostCommitFiberRoot=="function")try{We.onPostCommitFiberRoot(Pe,m)}catch{}return!0}finally{Se.p=f,Y.T=c,Pb(t,r)}}function Ob(t,r,l){r=lr(l,r),r=$f(t.stateNode,r,2),t=Xa(t,r,2),t!==null&&(os(t,2),Kr(t))}function dn(t,r,l){if(t.tag===3)Ob(t,t,l);else for(;r!==null;){if(r.tag===3){Ob(r,t,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(si===null||!si.has(c))){t=lr(l,t),l=Vv(2),c=Xa(r,l,2),c!==null&&(Bv(l,c,r,t),os(c,2),Kr(c));break}}r=r.return}}function gm(t,r,l){var c=t.pingCache;if(c===null){c=t.pingCache=new ET;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(l)||(om=!0,f.add(l),t=RT.bind(null,t,r,l),r.then(t,t))}function RT(t,r,l){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,_n===t&&($t&l)===l&&(Bn===4||Bn===3&&($t&62914560)===$t&&300>ot()-lh?(on&2)===0&&eo(t,0):cm|=l,Jl===$t&&(Jl=0)),Kr(t)}function Vb(t,r){r===0&&(r=Sn()),t=Wi(t,r),t!==null&&(os(t,r),Kr(t))}function CT(t){var r=t.memoizedState,l=0;r!==null&&(l=r.retryLane),Vb(t,l)}function AT(t,r){var l=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),Vb(t,l)}function IT(t,r){return xe(t,r)}var mh=null,no=null,ym=!1,ph=!1,vm=!1,ii=0;function Kr(t){t!==no&&t.next===null&&(no===null?mh=no=t:no=no.next=t),ph=!0,ym||(ym=!0,MT())}function pc(t,r){if(!vm&&ph){vm=!0;do for(var l=!1,c=mh;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var b=c.suspendedLanes,N=c.pingedLanes;m=(1<<31-Ve(42|t)+1)-1,m&=f&~(b&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Fb(c,m))}else m=$t,m=An(c,c===_n?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||mn(c,m)||(l=!0,Fb(c,m));c=c.next}while(l);vm=!1}}function DT(){Bb()}function Bb(){ph=ym=!1;var t=0;ii!==0&&qT()&&(t=ii);for(var r=ot(),l=null,c=mh;c!==null;){var f=c.next,m=Ub(c,r);m===0?(c.next=null,l===null?mh=f:l.next=f,f===null&&(no=l)):(l=c,(t!==0||(m&3)!==0)&&(ph=!0)),c=f}ts!==0&&ts!==5||pc(t),ii!==0&&(ii=0)}function Ub(t,r){for(var l=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-Ve(m),N=1<<b,L=f[b];L===-1?((N&l)===0||(N&c)!==0)&&(f[b]=On(N,r)):L<=r&&(t.expiredLanes|=N),m&=~N}if(r=_n,l=$t,l=An(t,t===r?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,l===0||t===r&&(hn===2||hn===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&et(c),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||mn(t,l)){if(r=l&-l,r===t.callbackPriority)return r;switch(c!==null&&et(c),he(l)){case 2:case 8:l=Xt;break;case 32:l=ce;break;case 268435456:l=Ee;break;default:l=ce}return c=zb.bind(null,t),l=xe(l,c),t.callbackPriority=r,t.callbackNode=l,r}return c!==null&&c!==null&&et(c),t.callbackPriority=2,t.callbackNode=null,2}function zb(t,r){if(ts!==0&&ts!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(fh()&&t.callbackNode!==l)return null;var c=$t;return c=An(t,t===_n?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(wb(t,c,r),Ub(t,ot()),t.callbackNode!=null&&t.callbackNode===l?zb.bind(null,t):null)}function Fb(t,r){if(fh())return null;wb(t,r,!0)}function MT(){WT(function(){(on&6)!==0?xe(xt,DT):Bb()})}function bm(){if(ii===0){var t=zl;t===0&&(t=zt,zt<<=1,(zt&261888)===0&&(zt=256)),ii=t}return ii}function Hb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ba(""+t)}function qb(t,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,t.id&&l.setAttribute("form",t.id),r.parentNode.insertBefore(l,r),t=new FormData(t),l.parentNode.removeChild(l),t}function PT(t,r,l,c,f){if(r==="submit"&&l&&l.stateNode===f){var m=Hb((f[Tt]||null).action),b=c.submitter;b&&(r=(r=b[Tt]||null)?Hb(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var N=new zr("action","action",null,c,f);t.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ii!==0){var L=b?qb(f,b):new FormData(f);Bf(l,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(N.preventDefault(),L=b?qb(f,b):new FormData(f),Bf(l,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var _m=0;_m<tf.length;_m++){var xm=tf[_m],LT=xm.toLowerCase(),OT=xm[0].toUpperCase()+xm.slice(1);Sr(LT,"on"+OT)}Sr(xy,"onAnimationEnd"),Sr(wy,"onAnimationIteration"),Sr(Ty,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(Z2,"onTransitionRun"),Sr(eT,"onTransitionStart"),Sr(tT,"onTransitionCancel"),Sr(Ey,"onTransitionEnd"),Ie("onMouseEnter",["mouseout","mouseover"]),Ie("onMouseLeave",["mouseout","mouseover"]),Ie("onPointerEnter",["pointerout","pointerover"]),Ie("onPointerLeave",["pointerout","pointerover"]),Le("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Le("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Le("onBeforeInput",["compositionend","keypress","textInput","paste"]),Le("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Le("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Le("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gc));function $b(t,r){r=(r&4)!==0;for(var l=0;l<t.length;l++){var c=t[l],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var N=c[b],L=N.instance,Z=N.currentTarget;if(N=N.listener,L!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=Z;try{m(f)}catch(fe){Cu(fe)}f.currentTarget=null,m=L}else for(b=0;b<c.length;b++){if(N=c[b],L=N.instance,Z=N.currentTarget,N=N.listener,L!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=Z;try{m(f)}catch(fe){Cu(fe)}f.currentTarget=null,m=L}}}}function Ht(t,r){var l=r[mt];l===void 0&&(l=r[mt]=new Set);var c=t+"__bubble";l.has(c)||(Wb(r,t,2,!1),l.add(c))}function wm(t,r,l){var c=0;r&&(c|=4),Wb(l,t,c,r)}var gh="_reactListening"+Math.random().toString(36).slice(2);function Tm(t){if(!t[gh]){t[gh]=!0,$.forEach(function(l){l!=="selectionchange"&&(VT.has(l)||wm(l,!1,t),wm(l,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[gh]||(r[gh]=!0,wm("selectionchange",!1,r))}}function Wb(t,r,l,c){switch(x0(r)){case 2:var f=dE;break;case 8:f=fE;break;default:f=Vm}l=f.bind(null,r,l,t),f=void 0,!Vi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,l,{capture:!0,passive:f}):t.addEventListener(r,l,!0):f!==void 0?t.addEventListener(r,l,{passive:f}):t.addEventListener(r,l,!1)}function Em(t,r,l,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var N=c.stateNode.containerInfo;if(N===f)break;if(b===4)for(b=c.return;b!==null;){var L=b.tag;if((L===3||L===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;N!==null;){if(b=wn(N),b===null)return;if(L=b.tag,L===5||L===6||L===26||L===27){c=m=b;continue e}N=N.parentNode}}c=c.return}za(function(){var Z=m,fe=sr(l),we=[];e:{var te=ky.get(t);if(te!==void 0){var ie=zr,Xe=t;switch(t){case"keypress":if(Ui(l)===0)break e;case"keydown":case"keyup":ie=Nu;break;case"focusin":Xe="focus",ie=Fi;break;case"focusout":Xe="blur",ie=Fi;break;case"beforeblur":case"afterblur":ie=Fi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=v;break;case xy:case wy:case Ty:ie=_u;break;case Ey:ie=j;break;case"scroll":case"scrollend":ie=Uo;break;case"wheel":ie=re;break;case"copy":case"cut":case"paste":ie=xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=ca;break;case"toggle":case"beforetoggle":ie=Lt}var yt=(r&4)!==0,vn=!yt&&(t==="scroll"||t==="scrollend"),K=yt?te!==null?te+"Capture":null:te;yt=[];for(var F=Z,J;F!==null;){var ve=F;if(J=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||J===null||K===null||(ve=wr(F,K),ve!=null&&yt.push(yc(F,ve,J))),vn)break;F=F.return}0<yt.length&&(te=new ie(te,Xe,null,l,fe),we.push({event:te,listeners:yt}))}}if((r&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",ie=t==="mouseout"||t==="pointerout",te&&l!==Oo&&(Xe=l.relatedTarget||l.fromElement)&&(wn(Xe)||Xe[tt]))break e;if((ie||te)&&(te=fe.window===fe?fe:(te=fe.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Xe=l.relatedTarget||l.toElement,ie=Z,Xe=Xe?wn(Xe):null,Xe!==null&&(vn=u(Xe),yt=Xe.tag,Xe!==vn||yt!==5&&yt!==27&&yt!==6)&&(Xe=null)):(ie=null,Xe=Z),ie!==Xe)){if(yt=zo,ve="onMouseLeave",K="onMouseEnter",F="mouse",(t==="pointerout"||t==="pointerover")&&(yt=ca,ve="onPointerLeave",K="onPointerEnter",F="pointer"),vn=ie==null?te:ae(ie),J=Xe==null?te:ae(Xe),te=new yt(ve,F+"leave",ie,l,fe),te.target=vn,te.relatedTarget=J,ve=null,wn(fe)===Z&&(yt=new yt(K,F+"enter",Xe,l,fe),yt.target=J,yt.relatedTarget=vn,ve=yt),vn=ve,ie&&Xe)t:{for(yt=BT,K=ie,F=Xe,J=0,ve=K;ve;ve=yt(ve))J++;ve=0;for(var ct=F;ct;ct=yt(ct))ve++;for(;0<J-ve;)K=yt(K),J--;for(;0<ve-J;)F=yt(F),ve--;for(;J--;){if(K===F||F!==null&&K===F.alternate){yt=K;break t}K=yt(K),F=yt(F)}yt=null}else yt=null;ie!==null&&Gb(we,te,ie,yt,!1),Xe!==null&&vn!==null&&Gb(we,vn,Xe,yt,!0)}}e:{if(te=Z?ae(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var sn=uy;else if(oy(te))if(hy)sn=Q2;else{sn=K2;var st=G2}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&bs(Z.elementType)&&(sn=uy):sn=Y2;if(sn&&(sn=sn(t,Z))){cy(we,sn,l,fe);break e}st&&st(t,te,Z),t==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&Va(te,"number",te.value)}switch(st=Z?ae(Z):window,t){case"focusin":(oy(st)||st.contentEditable==="true")&&(Dl=st,Jd=Z,Wo=null);break;case"focusout":Wo=Jd=Dl=null;break;case"mousedown":Zd=!0;break;case"contextmenu":case"mouseup":case"dragend":Zd=!1,by(we,l,fe);break;case"selectionchange":if(J2)break;case"keydown":case"keyup":by(we,l,fe)}var Vt;if(ln)e:{switch(t){case"compositionstart":var Wt="onCompositionStart";break e;case"compositionend":Wt="onCompositionEnd";break e;case"compositionupdate":Wt="onCompositionUpdate";break e}Wt=void 0}else Il?Hi(t,l)&&(Wt="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Wt="onCompositionStart");Wt&&(qr&&l.locale!=="ko"&&(Il||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&Il&&(Vt=Bo()):(Ur=fe,Vo="value"in Ur?Ur.value:Ur.textContent,Il=!0)),st=yh(Z,Wt),0<st.length&&(Wt=new Hr(Wt,t,null,l,fe),we.push({event:Wt,listeners:st}),Vt?Wt.data=Vt:(Vt=Al(l),Vt!==null&&(Wt.data=Vt)))),(Vt=ar?H2(t,l):q2(t,l))&&(Wt=yh(Z,"onBeforeInput"),0<Wt.length&&(st=new Hr("onBeforeInput","beforeinput",null,l,fe),we.push({event:st,listeners:Wt}),st.data=Vt)),PT(we,t,Z,l,fe)}$b(we,r)})}function yc(t,r,l){return{instance:t,listener:r,currentTarget:l}}function yh(t,r){for(var l=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=wr(t,l),f!=null&&c.unshift(yc(t,f,m)),f=wr(t,r),f!=null&&c.push(yc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function BT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Gb(t,r,l,c,f){for(var m=r._reactName,b=[];l!==null&&l!==c;){var N=l,L=N.alternate,Z=N.stateNode;if(N=N.tag,L!==null&&L===c)break;N!==5&&N!==26&&N!==27||Z===null||(L=Z,f?(Z=wr(l,m),Z!=null&&b.unshift(yc(l,Z,L))):f||(Z=wr(l,m),Z!=null&&b.push(yc(l,Z,L)))),l=l.return}b.length!==0&&t.push({event:r,listeners:b})}var UT=/\r\n?/g,zT=/\u0000|\uFFFD/g;function Kb(t){return(typeof t=="string"?t:""+t).replace(UT,`
`).replace(zT,"")}function Yb(t,r){return r=Kb(r),Kb(t)===r}function yn(t,r,l,c,f,m){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Mn(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Mn(t,""+c);break;case"className":ne(t,"class",c);break;case"tabIndex":ne(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ne(t,l,c);break;case"style":cs(t,c,m);break;case"data":if(r!=="object"){ne(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){t.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=Ba(""+c),t.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(r!=="input"&&yn(t,r,"name",f.name,f,null),yn(t,r,"formEncType",f.formEncType,f,null),yn(t,r,"formMethod",f.formMethod,f,null),yn(t,r,"formTarget",f.formTarget,f,null)):(yn(t,r,"encType",f.encType,f,null),yn(t,r,"method",f.method,f,null),yn(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=Ba(""+c),t.setAttribute(l,c);break;case"onClick":c!=null&&(t.onclick=js);break;case"onScroll":c!=null&&Ht("scroll",t);break;case"onScrollEnd":c!=null&&Ht("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=l}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}l=Ba(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""+c):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":c===!0?t.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,c):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(l,c):t.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(l):t.setAttribute(l,c);break;case"popover":Ht("beforetoggle",t),Ht("toggle",t),oe(t,"popover",c);break;case"xlinkActuate":ke(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ke(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ke(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ke(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ke(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ke(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ke(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ke(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ke(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":oe(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Vr.get(l)||l,oe(t,l,c))}}function km(t,r,l,c,f,m){switch(l){case"style":cs(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=l}}break;case"children":typeof c=="string"?Mn(t,c):(typeof c=="number"||typeof c=="bigint")&&Mn(t,""+c);break;case"onScroll":c!=null&&Ht("scroll",t);break;case"onScrollEnd":c!=null&&Ht("scrollend",t);break;case"onClick":c!=null&&(t.onclick=js);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!X.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),r=l.slice(2,f?l.length-7:void 0),m=t[Tt]||null,m=m!=null?m[l]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(r,c,f);break e}l in t?t[l]=c:c===!0?t.setAttribute(l,""):oe(t,l,c)}}}function ms(t,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",t),Ht("load",t);var c=!1,f=!1,m;for(m in l)if(l.hasOwnProperty(m)){var b=l[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:yn(t,r,m,b,l,null)}}f&&yn(t,r,"srcSet",l.srcSet,l,null),c&&yn(t,r,"src",l.src,l,null);return;case"input":Ht("invalid",t);var N=m=b=f=null,L=null,Z=null;for(c in l)if(l.hasOwnProperty(c)){var fe=l[c];if(fe!=null)switch(c){case"name":f=fe;break;case"type":b=fe;break;case"checked":L=fe;break;case"defaultChecked":Z=fe;break;case"value":m=fe;break;case"defaultValue":N=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(a(137,r));break;default:yn(t,r,c,fe,l,null)}}Li(t,m,N,L,Z,b,f,!1);return;case"select":Ht("invalid",t),c=b=m=null;for(f in l)if(l.hasOwnProperty(f)&&(N=l[f],N!=null))switch(f){case"value":m=N;break;case"defaultValue":b=N;break;case"multiple":c=N;default:yn(t,r,f,N,l,null)}r=m,l=b,t.multiple=!!c,r!=null?vr(t,!!c,r,!1):l!=null&&vr(t,!!c,l,!0);return;case"textarea":Ht("invalid",t),m=f=c=null;for(b in l)if(l.hasOwnProperty(b)&&(N=l[b],N!=null))switch(b){case"value":c=N;break;case"defaultValue":f=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(a(91));break;default:yn(t,r,b,N,l,null)}Dn(t,c,f,m);return;case"option":for(L in l)l.hasOwnProperty(L)&&(c=l[L],c!=null)&&(L==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":yn(t,r,L,c,l,null));return;case"dialog":Ht("beforetoggle",t),Ht("toggle",t),Ht("cancel",t),Ht("close",t);break;case"iframe":case"object":Ht("load",t);break;case"video":case"audio":for(c=0;c<gc.length;c++)Ht(gc[c],t);break;case"image":Ht("error",t),Ht("load",t);break;case"details":Ht("toggle",t);break;case"embed":case"source":case"link":Ht("error",t),Ht("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in l)if(l.hasOwnProperty(Z)&&(c=l[Z],c!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:yn(t,r,Z,c,l,null)}return;default:if(bs(r)){for(fe in l)l.hasOwnProperty(fe)&&(c=l[fe],c!==void 0&&km(t,r,fe,c,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(c=l[N],c!=null&&yn(t,r,N,c,l,null))}function FT(t,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,N=null,L=null,Z=null,fe=null;for(ie in l){var we=l[ie];if(l.hasOwnProperty(ie)&&we!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":L=we;default:c.hasOwnProperty(ie)||yn(t,r,ie,null,c,we)}}for(var te in c){var ie=c[te];if(we=l[te],c.hasOwnProperty(te)&&(ie!=null||we!=null))switch(te){case"type":m=ie;break;case"name":f=ie;break;case"checked":Z=ie;break;case"defaultChecked":fe=ie;break;case"value":b=ie;break;case"defaultValue":N=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,r));break;default:ie!==we&&yn(t,r,te,ie,c,we)}}Oa(t,b,N,L,Z,fe,m,f);return;case"select":ie=b=N=te=null;for(m in l)if(L=l[m],l.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ie=L;default:c.hasOwnProperty(m)||yn(t,r,m,null,c,L)}for(f in c)if(m=c[f],L=l[f],c.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":te=m;break;case"defaultValue":N=m;break;case"multiple":b=m;default:m!==L&&yn(t,r,f,m,c,L)}r=N,l=b,c=ie,te!=null?vr(t,!!l,te,!1):!!c!=!!l&&(r!=null?vr(t,!!l,r,!0):vr(t,!!l,l?[]:"",!1));return;case"textarea":ie=te=null;for(N in l)if(f=l[N],l.hasOwnProperty(N)&&f!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:yn(t,r,N,null,c,f)}for(b in c)if(f=c[b],m=l[b],c.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":te=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&yn(t,r,b,f,c,m)}tn(t,te,ie);return;case"option":for(var Xe in l)te=l[Xe],l.hasOwnProperty(Xe)&&te!=null&&!c.hasOwnProperty(Xe)&&(Xe==="selected"?t.selected=!1:yn(t,r,Xe,null,c,te));for(L in c)te=c[L],ie=l[L],c.hasOwnProperty(L)&&te!==ie&&(te!=null||ie!=null)&&(L==="selected"?t.selected=te&&typeof te!="function"&&typeof te!="symbol":yn(t,r,L,te,c,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in l)te=l[yt],l.hasOwnProperty(yt)&&te!=null&&!c.hasOwnProperty(yt)&&yn(t,r,yt,null,c,te);for(Z in c)if(te=c[Z],ie=l[Z],c.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,r));break;default:yn(t,r,Z,te,c,ie)}return;default:if(bs(r)){for(var vn in l)te=l[vn],l.hasOwnProperty(vn)&&te!==void 0&&!c.hasOwnProperty(vn)&&km(t,r,vn,void 0,c,te);for(fe in c)te=c[fe],ie=l[fe],!c.hasOwnProperty(fe)||te===ie||te===void 0&&ie===void 0||km(t,r,fe,te,c,ie);return}}for(var K in l)te=l[K],l.hasOwnProperty(K)&&te!=null&&!c.hasOwnProperty(K)&&yn(t,r,K,null,c,te);for(we in c)te=c[we],ie=l[we],!c.hasOwnProperty(we)||te===ie||te==null&&ie==null||yn(t,r,we,te,c,ie)}function Qb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var f=l[c],m=f.transferSize,b=f.initiatorType,N=f.duration;if(m&&N&&Qb(b)){for(b=0,N=f.responseEnd,c+=1;c<l.length;c++){var L=l[c],Z=L.startTime;if(Z>N)break;var fe=L.transferSize,we=L.initiatorType;fe&&Qb(we)&&(L=L.responseEnd,b+=fe*(L<N?1:(N-Z)/(L-Z)))}if(--c,r+=8*(m+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Sm=null,Nm=null;function vh(t){return t.nodeType===9?t:t.ownerDocument}function Xb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jb(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function jm(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Rm=null;function qT(){var t=window.event;return t&&t.type==="popstate"?t===Rm?!1:(Rm=t,!0):(Rm=null,!1)}var Zb=typeof setTimeout=="function"?setTimeout:void 0,$T=typeof clearTimeout=="function"?clearTimeout:void 0,e0=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof e0<"u"?function(t){return e0.resolve(null).then(t).catch(GT)}:Zb;function GT(t){setTimeout(function(){throw t})}function li(t){return t==="head"}function t0(t,r){var l=r,c=0;do{var f=l.nextSibling;if(t.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(c===0){t.removeChild(f),io(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")vc(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,vc(l);for(var m=l.firstChild;m;){var b=m.nextSibling,N=m.nodeName;m[ss]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=b}}else l==="body"&&vc(t.ownerDocument.body);l=f}while(l);io(r)}function n0(t,r){var l=t;t=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=c}while(l)}function Cm(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Cm(l),Ns(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function KT(t,r,l,c){for(;t.nodeType===1;){var f=l;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[ss])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=dr(t.nextSibling),t===null)break}return null}function YT(t,r,l){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=dr(t.nextSibling),t===null))return null;return t}function s0(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=dr(t.nextSibling),t===null))return null;return t}function Am(t){return t.data==="$?"||t.data==="$~"}function Im(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function QT(t,r){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function dr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var Dm=null;function r0(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(r===0)return dr(t.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}t=t.nextSibling}return null}function a0(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return t;r--}else l!=="/$"&&l!=="/&"||r++}t=t.previousSibling}return null}function i0(t,r,l){switch(r=vh(l),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function vc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ns(t)}var fr=new Map,l0=new Set;function bh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ea=Se.d;Se.d={f:XT,r:JT,D:ZT,C:eE,L:tE,m:nE,X:rE,S:sE,M:aE};function XT(){var t=Ea.f(),r=uh();return t||r}function JT(t){var r=z(t);r!==null&&r.tag===5&&r.type==="form"?Ev(r):Ea.r(t)}var so=typeof document>"u"?null:document;function o0(t,r,l){var c=so;if(c&&typeof r=="string"&&r){var f=Tn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),l0.has(f)||(l0.add(f),t={rel:t,crossOrigin:l,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),ms(r,"link",t),R(r),c.head.appendChild(r)))}}function ZT(t){Ea.D(t),o0("dns-prefetch",t,null)}function eE(t,r){Ea.C(t,r),o0("preconnect",t,r)}function tE(t,r,l){Ea.L(t,r,l);var c=so;if(c&&t&&r){var f='link[rel="preload"][as="'+Tn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+Tn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+Tn(l.imageSizes)+'"]')):f+='[href="'+Tn(t)+'"]';var m=f;switch(r){case"style":m=ro(t);break;case"script":m=ao(t)}fr.has(m)||(t=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:t,as:r},l),fr.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(bc(m))||r==="script"&&c.querySelector(_c(m))||(r=c.createElement("link"),ms(r,"link",t),R(r),c.head.appendChild(r)))}}function nE(t,r){Ea.m(t,r);var l=so;if(l&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Tn(c)+'"][href="'+Tn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ao(t)}if(!fr.has(m)&&(t=T({rel:"modulepreload",href:t},r),fr.set(m,t),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(_c(m)))return}c=l.createElement("link"),ms(c,"link",t),R(c),l.head.appendChild(c)}}}function sE(t,r,l){Ea.S(t,r,l);var c=so;if(c&&t){var f=E(c).hoistableStyles,m=ro(t);r=r||"default";var b=f.get(m);if(!b){var N={loading:0,preload:null};if(b=c.querySelector(bc(m)))N.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},l),(l=fr.get(m))&&Mm(t,l);var L=b=c.createElement("link");R(L),ms(L,"link",t),L._p=new Promise(function(Z,fe){L.onload=Z,L.onerror=fe}),L.addEventListener("load",function(){N.loading|=1}),L.addEventListener("error",function(){N.loading|=2}),N.loading|=4,_h(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:N},f.set(m,b)}}}function rE(t,r){Ea.X(t,r);var l=so;if(l&&t){var c=E(l).hoistableScripts,f=ao(t),m=c.get(f);m||(m=l.querySelector(_c(f)),m||(t=T({src:t,async:!0},r),(r=fr.get(f))&&Pm(t,r),m=l.createElement("script"),R(m),ms(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function aE(t,r){Ea.M(t,r);var l=so;if(l&&t){var c=E(l).hoistableScripts,f=ao(t),m=c.get(f);m||(m=l.querySelector(_c(f)),m||(t=T({src:t,async:!0,type:"module"},r),(r=fr.get(f))&&Pm(t,r),m=l.createElement("script"),R(m),ms(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function c0(t,r,l,c){var f=(f=De.current)?bh(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ro(l.href),l=E(f).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=ro(l.href);var m=E(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(bc(t)))&&!m._p&&(b.instance=m,b.state.loading=5),fr.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},fr.set(t,l),m||iE(f,t,l,b.state))),r&&c===null)throw Error(a(528,""));return b}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ao(l),l=E(f).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ro(t){return'href="'+Tn(t)+'"'}function bc(t){return'link[rel="stylesheet"]['+t+"]"}function u0(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function iE(t,r,l,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),ms(r,"link",l),R(r),t.head.appendChild(r))}function ao(t){return'[src="'+Tn(t)+'"]'}function _c(t){return"script[async]"+t}function h0(t,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+Tn(l.href)+'"]');if(c)return r.instance=c,R(c),c;var f=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),R(c),ms(c,"style",f),_h(c,l.precedence,t),r.instance=c;case"stylesheet":f=ro(l.href);var m=t.querySelector(bc(f));if(m)return r.state.loading|=4,r.instance=m,R(m),m;c=u0(l),(f=fr.get(f))&&Mm(c,f),m=(t.ownerDocument||t).createElement("link"),R(m);var b=m;return b._p=new Promise(function(N,L){b.onload=N,b.onerror=L}),ms(m,"link",c),r.state.loading|=4,_h(m,l.precedence,t),r.instance=m;case"script":return m=ao(l.src),(f=t.querySelector(_c(m)))?(r.instance=f,R(f),f):(c=l,(f=fr.get(m))&&(c=T({},l),Pm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),R(f),ms(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,_h(c,l.precedence,t));return r.instance}function _h(t,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,b=0;b<c.length;b++){var N=c[b];if(N.dataset.precedence===r)m=N;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(t,r.firstChild))}function Mm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Pm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var xh=null;function d0(t,r,l){if(xh===null){var c=new Map,f=xh=new Map;f.set(l,c)}else f=xh,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(t))return c;for(c.set(t,null),l=l.getElementsByTagName(t),f=0;f<l.length;f++){var m=l[f];if(!(m[ss]||m[Ke]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=t+b;var N=c.get(b);N?N.push(m):c.set(b,[m])}}return c}function f0(t,r,l){t=t.ownerDocument||t,t.head.insertBefore(l,r==="title"?t.querySelector("head > title"):null)}function lE(t,r,l){if(l===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function m0(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function oE(t,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=ro(c.href),m=r.querySelector(bc(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=wh.bind(t),r.then(t,t)),l.state.loading|=4,l.instance=m,R(m);return}m=r.ownerDocument||r,c=u0(c),(f=fr.get(f))&&Mm(c,f),m=m.createElement("link"),R(m);var b=m;b._p=new Promise(function(N,L){b.onload=N,b.onerror=L}),ms(m,"link",c),l.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=wh.bind(t),r.addEventListener("load",l),r.addEventListener("error",l))}}var Lm=0;function cE(t,r){return t.stylesheets&&t.count===0&&Eh(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var c=setTimeout(function(){if(t.stylesheets&&Eh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+r);0<t.imgBytes&&Lm===0&&(Lm=62500*HT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Eh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Lm?50:800)+r);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Eh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Th=null;function Eh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Th=new Map,r.forEach(uE,t),Th=null,wh.call(t))}function uE(t,r){if(!(r.state.loading&4)){var l=Th.get(t);if(l)var c=l.get(null);else{l=new Map,Th.set(t,l);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),c=b)}c&&l.set(null,c)}f=r.instance,b=f.getAttribute("data-precedence"),m=l.get(b)||c,m===c&&l.set(null,f),l.set(b,f),this.count++,c=wh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var xc={$$typeof:me,Provider:null,Consumer:null,_currentValue:Me,_currentValue2:Me,_threadCount:0};function hE(t,r,l,c,f,m,b,N,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=In(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=In(0),this.hiddenUpdates=In(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function p0(t,r,l,c,f,m,b,N,L,Z,fe,we){return t=new hE(t,r,l,b,L,Z,fe,we,N),r=1,m===!0&&(r|=24),m=Ws(3,null,null,r),t.current=m,m.stateNode=t,r=pf(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:l,cache:r},bf(m),t}function g0(t){return t?(t=Ll,t):Ll}function y0(t,r,l,c,f,m){f=g0(f),c.context===null?c.context=f:c.pendingContext=f,c=Qa(r),c.payload={element:l},m=m===void 0?null:m,m!==null&&(c.callback=m),l=Xa(t,c,r),l!==null&&(Us(l,t,r),Zo(l,t,r))}function v0(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<r?l:r}}function Om(t,r){v0(t,r),(t=t.alternate)&&v0(t,r)}function b0(t){if(t.tag===13||t.tag===31){var r=Wi(t,67108864);r!==null&&Us(r,t,67108864),Om(t,67108864)}}function _0(t){if(t.tag===13||t.tag===31){var r=Xs();r=q(r);var l=Wi(t,r);l!==null&&Us(l,t,r),Om(t,r)}}var kh=!0;function dE(t,r,l,c){var f=Y.T;Y.T=null;var m=Se.p;try{Se.p=2,Vm(t,r,l,c)}finally{Se.p=m,Y.T=f}}function fE(t,r,l,c){var f=Y.T;Y.T=null;var m=Se.p;try{Se.p=8,Vm(t,r,l,c)}finally{Se.p=m,Y.T=f}}function Vm(t,r,l,c){if(kh){var f=Bm(c);if(f===null)Em(t,r,c,Sh,l),w0(t,c);else if(pE(f,t,r,l,c))c.stopPropagation();else if(w0(t,c),r&4&&-1<mE.indexOf(t)){for(;f!==null;){var m=z(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=un(m.pendingLanes);if(b!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;b;){var L=1<<31-Ve(b);N.entanglements[1]|=L,b&=~L}Kr(m),(on&6)===0&&(oh=ot()+500,pc(0))}}break;case 31:case 13:N=Wi(m,2),N!==null&&Us(N,m,2),uh(),Om(m,2)}if(m=Bm(c),m===null&&Em(t,r,c,Sh,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else Em(t,r,c,null,l)}}function Bm(t){return t=sr(t),Um(t)}var Sh=null;function Um(t){if(Sh=null,t=wn(t),t!==null){var r=u(t);if(r===null)t=null;else{var l=r.tag;if(l===13){if(t=d(r),t!==null)return t;t=null}else if(l===31){if(t=p(r),t!==null)return t;t=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Sh=t,null}function x0(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zt()){case xt:return 2;case Xt:return 8;case ce:case de:return 32;case Ee:return 268435456;default:return 32}default:return 32}}var zm=!1,oi=null,ci=null,ui=null,wc=new Map,Tc=new Map,hi=[],mE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function w0(t,r){switch(t){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":wc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(r.pointerId)}}function Ec(t,r,l,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=z(r),r!==null&&b0(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function pE(t,r,l,c,f){switch(r){case"focusin":return oi=Ec(oi,t,r,l,c,f),!0;case"dragenter":return ci=Ec(ci,t,r,l,c,f),!0;case"mouseover":return ui=Ec(ui,t,r,l,c,f),!0;case"pointerover":var m=f.pointerId;return wc.set(m,Ec(wc.get(m)||null,t,r,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Tc.set(m,Ec(Tc.get(m)||null,t,r,l,c,f)),!0}return!1}function T0(t){var r=wn(t.target);if(r!==null){var l=u(r);if(l!==null){if(r=l.tag,r===13){if(r=d(l),r!==null){t.blockedOn=r,ge(t.priority,function(){_0(l)});return}}else if(r===31){if(r=p(l),r!==null){t.blockedOn=r,ge(t.priority,function(){_0(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var l=Bm(t.nativeEvent);if(l===null){l=t.nativeEvent;var c=new l.constructor(l.type,l);Oo=c,l.target.dispatchEvent(c),Oo=null}else return r=z(l),r!==null&&b0(r),t.blockedOn=l,!1;r.shift()}return!0}function E0(t,r,l){Nh(t)&&l.delete(r)}function gE(){zm=!1,oi!==null&&Nh(oi)&&(oi=null),ci!==null&&Nh(ci)&&(ci=null),ui!==null&&Nh(ui)&&(ui=null),wc.forEach(E0),Tc.forEach(E0)}function jh(t,r){t.blockedOn===r&&(t.blockedOn=null,zm||(zm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,gE)))}var Rh=null;function k0(t){Rh!==t&&(Rh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Rh===t&&(Rh=null);for(var r=0;r<t.length;r+=3){var l=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(Um(c||l)===null)continue;break}var m=z(l);m!==null&&(t.splice(r,3),r-=3,Bf(m,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function io(t){function r(L){return jh(L,t)}oi!==null&&jh(oi,t),ci!==null&&jh(ci,t),ui!==null&&jh(ui,t),wc.forEach(r),Tc.forEach(r);for(var l=0;l<hi.length;l++){var c=hi[l];c.blockedOn===t&&(c.blockedOn=null)}for(;0<hi.length&&(l=hi[0],l.blockedOn===null);)T0(l),l.blockedOn===null&&hi.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],b=f[Tt]||null;if(typeof m=="function")b||k0(l);else if(b){var N=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[Tt]||null)N=b.formAction;else if(Um(f)!==null)continue}else N=b.action;typeof N=="function"?l[c+1]=N:(l.splice(c,3),c-=3),k0(l)}}}function S0(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function Fm(t){this._internalRoot=t}Ch.prototype.render=Fm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var l=r.current,c=Xs();y0(l,c,t,r,null,null)},Ch.prototype.unmount=Fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;y0(t.current,2,null,t,null,null),uh(),r[tt]=null}};function Ch(t){this._internalRoot=t}Ch.prototype.unstable_scheduleHydration=function(t){if(t){var r=be();t={blockedOn:null,target:t,priority:r};for(var l=0;l<hi.length&&r!==0&&r<hi[l].priority;l++);hi.splice(l,0,t),l===0&&T0(t)}};var N0=e.version;if(N0!=="19.2.4")throw Error(a(527,N0,"19.2.4"));Se.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=y(r),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var yE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{Pe=Ah.inject(yE),We=Ah}catch{}}return Sc.createRoot=function(t,r){if(!o(t))throw Error(a(299));var l=!1,c="",f=Mv,m=Pv,b=Lv;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError)),r=p0(t,1,!1,null,null,l,c,null,f,m,b,S0),t[tt]=r.current,Tm(t),new Fm(r)},Sc.hydrateRoot=function(t,r,l){if(!o(t))throw Error(a(299));var c=!1,f="",m=Mv,b=Pv,N=Lv,L=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),r=p0(t,1,!0,r,l??null,c,f,L,m,b,N,S0),r.context=g0(null),l=r.current,c=Xs(),c=q(c),f=Qa(c),f.callback=null,Xa(l,f,c),l=c,r.current.lanes=l,os(r,l),Kr(r),t[tt]=r.current,Tm(t),new Ch(r)},Sc.version="19.2.4",Sc}var O0;function NE(){if(O0)return $m.exports;O0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),$m.exports=SE(),$m.exports}var jE=NE();const RE="modulepreload",CE=function(s){return"/login/"+s},V0={},yr=function(e,n,a){let o=Promise.resolve();if(n&&n.length>0){let g=function(y){return Promise.all(y.map(_=>Promise.resolve(_).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=d?.nonce||d?.getAttribute("nonce");o=g(n.map(y=>{if(y=CE(y),y in V0)return;V0[y]=!0;const _=y.endsWith(".css"),T=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${T}`))return;const k=document.createElement("link");if(k.rel=_?"stylesheet":RE,_||(k.as="script"),k.crossOrigin="",k.href=y,p&&k.setAttribute("nonce",p),document.head.appendChild(k),_)return new Promise((O,W)=>{k.addEventListener("load",O),k.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return o.then(d=>{for(const p of d||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var B0="popstate";function AE(s={}){function e(a,o){let{pathname:u,search:d,hash:p}=a.location;return wp("",{pathname:u,search:d,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:Wc(o)}return DE(e,n,null,s)}function Cn(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function gr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IE(){return Math.random().toString(36).substring(2,10)}function U0(s,e){return{usr:s.state,key:s.key,idx:e}}function wp(s,e,n=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?jo(e):e,state:n,key:e&&e.key||a||IE()}}function Wc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function jo(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function DE(s,e,n,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,d=o.history,p="POP",g=null,y=_();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function _(){return(d.state||{idx:null}).idx}function T(){p="POP";let P=_(),le=P==null?null:P-y;y=P,g&&g({action:p,location:B.location,delta:le})}function k(P,le){p="PUSH";let ee=wp(B.location,P,le);y=_()+1;let me=U0(ee,y),je=B.createHref(ee);try{d.pushState(me,"",je)}catch(ze){if(ze instanceof DOMException&&ze.name==="DataCloneError")throw ze;o.location.assign(je)}u&&g&&g({action:p,location:B.location,delta:1})}function O(P,le){p="REPLACE";let ee=wp(B.location,P,le);y=_();let me=U0(ee,y),je=B.createHref(ee);d.replaceState(me,"",je),u&&g&&g({action:p,location:B.location,delta:0})}function W(P){return ME(P)}let B={get action(){return p},get location(){return s(o,d)},listen(P){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(B0,T),g=P,()=>{o.removeEventListener(B0,T),g=null}},createHref(P){return e(o,P)},createURL:W,encodeLocation(P){let le=W(P);return{pathname:le.pathname,search:le.search,hash:le.hash}},push:k,replace:O,go(P){return d.go(P)}};return B}function ME(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Cn(n,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:Wc(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function D_(s,e,n="/"){return PE(s,e,n,!1)}function PE(s,e,n,a){let o=typeof e=="string"?jo(e):e,u=Ca(o.pathname||"/",n);if(u==null)return null;let d=M_(s);LE(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=GE(u);p=$E(d[g],y,a)}return p}function M_(s,e=[],n=[],a="",o=!1){let u=(d,p,g=o,y)=>{let _={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(a)&&g)return;Cn(_.relativePath.startsWith(a),`Absolute route path "${_.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(a.length)}let T=Na([a,_.relativePath]),k=n.concat(_);d.children&&d.children.length>0&&(Cn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),M_(d.children,e,k,T,g)),!(d.path==null&&!d.index)&&e.push({path:T,score:HE(T,d.index),routesMeta:k})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of P_(d.path))u(d,p,!0,g)}),e}function P_(s){let e=s.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let d=P_(a.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function LE(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:qE(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var OE=/^:[\w-]+$/,VE=3,BE=2,UE=1,zE=10,FE=-2,z0=s=>s==="*";function HE(s,e){let n=s.split("/"),a=n.length;return n.some(z0)&&(a+=FE),e&&(a+=BE),n.filter(o=>!z0(o)).reduce((o,u)=>o+(OE.test(u)?VE:u===""?UE:zE),a)}function qE(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function $E(s,e,n=!1){let{routesMeta:a}=s,o={},u="/",d=[];for(let p=0;p<a.length;++p){let g=a[p],y=p===a.length-1,_=u==="/"?e:e.slice(u.length)||"/",T=rd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},_),k=g.route;if(!T&&y&&n&&!a[a.length-1].route.index&&(T=rd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!T)return null;Object.assign(o,T.params),d.push({params:o,pathname:Na([u,T.pathname]),pathnameBase:XE(Na([u,T.pathnameBase])),route:k}),T.pathnameBase!=="/"&&(u=Na([u,T.pathnameBase]))}return d}function rd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,a]=WE(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:a.reduce((y,{paramName:_,isOptional:T},k)=>{if(_==="*"){let W=p[k]||"";d=u.slice(0,u.length-W.length).replace(/(.)\/+$/,"$1")}const O=p[k];return T&&!O?y[_]=void 0:y[_]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function WE(s,e=!1,n=!0){gr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(a.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function GE(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ca(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=s.charAt(n);return a&&a!=="/"?null:s.slice(n)||"/"}var KE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function YE(s,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof s=="string"?jo(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=F0(n.substring(1),"/"):u=F0(n,e)):u=e,{pathname:u,search:JE(a),hash:ZE(o)}}function F0(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Ym(s,e,n,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QE(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function eg(s){let e=QE(s);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function tg(s,e,n,a=!1){let o;typeof s=="string"?o=jo(s):(o={...s},Cn(!o.pathname||!o.pathname.includes("?"),Ym("?","pathname","search",o)),Cn(!o.pathname||!o.pathname.includes("#"),Ym("#","pathname","hash",o)),Cn(!o.search||!o.search.includes("#"),Ym("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,p;if(d==null)p=n;else{let T=e.length-1;if(!a&&d.startsWith("..")){let k=d.split("/");for(;k[0]==="..";)k.shift(),T-=1;o.pathname=k.join("/")}p=T>=0?e[T]:"/"}let g=YE(o,p),y=d&&d!=="/"&&d.endsWith("/"),_=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||_)&&(g.pathname+="/"),g}var Na=s=>s.join("/").replace(/\/\/+/g,"/"),XE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),JE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,ZE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,ek=class{constructor(s,e,n,a=!1){this.status=s,this.statusText=e||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function tk(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function nk(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var L_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function O_(s,e){let n=s;if(typeof n!="string"||!KE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let a=n,o=!1;if(L_)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=Ca(d.pathname,e);d.origin===u.origin&&p!=null?n=p+d.search+d.hash:o=!0}catch{gr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var V_=["POST","PUT","PATCH","DELETE"];new Set(V_);var sk=["GET",...V_];new Set(sk);var Ro=w.createContext(null);Ro.displayName="DataRouter";var kd=w.createContext(null);kd.displayName="DataRouterState";var rk=w.createContext(!1),B_=w.createContext({isTransitioning:!1});B_.displayName="ViewTransition";var ak=w.createContext(new Map);ak.displayName="Fetchers";var ik=w.createContext(null);ik.displayName="Await";var nr=w.createContext(null);nr.displayName="Navigation";var su=w.createContext(null);su.displayName="Location";var ra=w.createContext({outlet:null,matches:[],isDataRoute:!1});ra.displayName="Route";var ng=w.createContext(null);ng.displayName="RouteError";var U_="REACT_ROUTER_ERROR",lk="REDIRECT",ok="ROUTE_ERROR_RESPONSE";function ck(s){if(s.startsWith(`${U_}:${lk}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function uk(s){if(s.startsWith(`${U_}:${ok}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ek(e.status,e.statusText,e.data)}catch{}}function hk(s,{relative:e}={}){Cn(Co(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=w.useContext(nr),{hash:o,pathname:u,search:d}=ru(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Na([n,u])),a.createHref({pathname:p,search:d,hash:o})}function Co(){return w.useContext(su)!=null}function Or(){return Cn(Co(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(su).location}var z_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function F_(s){w.useContext(nr).static||w.useLayoutEffect(s)}function qs(){let{isDataRoute:s}=w.useContext(ra);return s?Ek():dk()}function dk(){Cn(Co(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(Ro),{basename:e,navigator:n}=w.useContext(nr),{matches:a}=w.useContext(ra),{pathname:o}=Or(),u=JSON.stringify(eg(a)),d=w.useRef(!1);return F_(()=>{d.current=!0}),w.useCallback((g,y={})=>{if(gr(d.current,z_),!d.current)return;if(typeof g=="number"){n.go(g);return}let _=tg(g,JSON.parse(u),o,y.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Na([e,_.pathname])),(y.replace?n.replace:n.push)(_,y.state,y)},[e,n,u,o,s])}w.createContext(null);function ru(s,{relative:e}={}){let{matches:n}=w.useContext(ra),{pathname:a}=Or(),o=JSON.stringify(eg(n));return w.useMemo(()=>tg(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function fk(s,e){return H_(s,e)}function H_(s,e,n,a,o){Cn(Co(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(nr),{matches:d}=w.useContext(ra),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",_=p?p.pathnameBase:"/",T=p&&p.route;{let ee=T&&T.path||"";$_(y,!T||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let k=Or(),O;if(e){let ee=typeof e=="string"?jo(e):e;Cn(_==="/"||ee.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),O=ee}else O=k;let W=O.pathname||"/",B=W;if(_!=="/"){let ee=_.replace(/^\//,"").split("/");B="/"+W.replace(/^\//,"").split("/").slice(ee.length).join("/")}let P=D_(s,{pathname:B});gr(T||P!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),gr(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let le=vk(P&&P.map(ee=>Object.assign({},ee,{params:Object.assign({},g,ee.params),pathname:Na([_,u.encodeLocation?u.encodeLocation(ee.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?_:Na([_,u.encodeLocation?u.encodeLocation(ee.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ee.pathnameBase])})),d,n,a,o);return e&&le?w.createElement(su.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},le):le}function mk(){let s=Tk(),e=tk(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:o},n):null,d)}var pk=w.createElement(mk,null),q_=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=uk(s.digest);n&&(s=n)}let e=s!==void 0?w.createElement(ra.Provider,{value:this.props.routeContext},w.createElement(ng.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?w.createElement(gk,{error:s},e):e}};q_.contextType=rk;var Qm=new WeakMap;function gk({children:s,error:e}){let{basename:n}=w.useContext(nr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=ck(e.digest);if(a){let o=Qm.get(e);if(o)throw o;let u=O_(a.location,n);if(L_&&!Qm.get(e))if(u.isExternal||a.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:a.replace}));throw Qm.set(e,d),d}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function yk({routeContext:s,match:e,children:n}){let a=w.useContext(Ro);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(ra.Provider,{value:s},n)}function vk(s,e=[],n=null,a=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,d=n?.errors;if(d!=null){let _=u.findIndex(T=>T.route.id&&d?.[T.route.id]!==void 0);Cn(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,_+1))}let p=!1,g=-1;if(n)for(let _=0;_<u.length;_++){let T=u[_];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(g=_),T.route.id){let{loaderData:k,errors:O}=n,W=T.route.loader&&!k.hasOwnProperty(T.route.id)&&(!O||O[T.route.id]===void 0);if(T.route.lazy||W){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&a?(_,T)=>{a(_,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:nk(n.matches),errorInfo:T})}:void 0;return u.reduceRight((_,T,k)=>{let O,W=!1,B=null,P=null;n&&(O=d&&T.route.id?d[T.route.id]:void 0,B=T.route.errorElement||pk,p&&(g<0&&k===0?($_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),W=!0,P=null):g===k&&(W=!0,P=T.route.hydrateFallbackElement||null)));let le=e.concat(u.slice(0,k+1)),ee=()=>{let me;return O?me=B:W?me=P:T.route.Component?me=w.createElement(T.route.Component,null):T.route.element?me=T.route.element:me=_,w.createElement(yk,{match:T,routeContext:{outlet:_,matches:le,isDataRoute:n!=null},children:me})};return n&&(T.route.ErrorBoundary||T.route.errorElement||k===0)?w.createElement(q_,{location:n.location,revalidation:n.revalidation,component:B,error:O,children:ee(),routeContext:{outlet:null,matches:le,isDataRoute:!0},onError:y}):ee()},null)}function sg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bk(s){let e=w.useContext(Ro);return Cn(e,sg(s)),e}function _k(s){let e=w.useContext(kd);return Cn(e,sg(s)),e}function xk(s){let e=w.useContext(ra);return Cn(e,sg(s)),e}function rg(s){let e=xk(s),n=e.matches[e.matches.length-1];return Cn(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function wk(){return rg("useRouteId")}function Tk(){let s=w.useContext(ng),e=_k("useRouteError"),n=rg("useRouteError");return s!==void 0?s:e.errors?.[n]}function Ek(){let{router:s}=bk("useNavigate"),e=rg("useNavigate"),n=w.useRef(!1);return F_(()=>{n.current=!0}),w.useCallback(async(o,u={})=>{gr(n.current,z_),n.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var H0={};function $_(s,e,n){!e&&!H0[s]&&(H0[s]=!0,gr(!1,n))}w.memo(kk);function kk({routes:s,future:e,state:n,onError:a}){return H_(s,void 0,n,a,e)}function Sk({to:s,replace:e,state:n,relative:a}){Cn(Co(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=w.useContext(nr);gr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=w.useContext(ra),{pathname:d}=Or(),p=qs(),g=tg(s,eg(u),d,a==="path"),y=JSON.stringify(g);return w.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:a})},[p,y,a,e,n]),null}function Hn(s){Cn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Nk({basename:s="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:u=!1,unstable_useTransitions:d}){Cn(!Co(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:p,navigator:o,static:u,unstable_useTransitions:d,future:{}}),[p,o,u,d]);typeof n=="string"&&(n=jo(n));let{pathname:y="/",search:_="",hash:T="",state:k=null,key:O="default"}=n,W=w.useMemo(()=>{let B=Ca(y,p);return B==null?null:{location:{pathname:B,search:_,hash:T,state:k,key:O},navigationType:a}},[p,y,_,T,k,O,a]);return gr(W!=null,`<Router basename="${p}"> is not able to match the URL "${y}${_}${T}" because it does not start with the basename, so the <Router> won't render anything.`),W==null?null:w.createElement(nr.Provider,{value:g},w.createElement(su.Provider,{children:e,value:W}))}function jk({children:s,location:e}){return fk(Tp(s),e)}function Tp(s,e=[]){let n=[];return w.Children.forEach(s,(a,o)=>{if(!w.isValidElement(a))return;let u=[...e,o];if(a.type===w.Fragment){n.push.apply(n,Tp(a.props.children,u));return}Cn(a.type===Hn,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Cn(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Tp(a.props.children,u)),n.push(d)}),n}var $h="get",Wh="application/x-www-form-urlencoded";function Sd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function Rk(s){return Sd(s)&&s.tagName.toLowerCase()==="button"}function Ck(s){return Sd(s)&&s.tagName.toLowerCase()==="form"}function Ak(s){return Sd(s)&&s.tagName.toLowerCase()==="input"}function Ik(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Dk(s,e){return s.button===0&&(!e||e==="_self")&&!Ik(s)}function Ep(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let a=s[n];return e.concat(Array.isArray(a)?a.map(o=>[n,o]):[[n,a]])},[]))}function Mk(s,e){let n=Ep(s);return e&&e.forEach((a,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var Ih=null;function Pk(){if(Ih===null)try{new FormData(document.createElement("form"),0),Ih=!1}catch{Ih=!0}return Ih}var Lk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xm(s){return s!=null&&!Lk.has(s)?(gr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wh}"`),null):s}function Ok(s,e){let n,a,o,u,d;if(Ck(s)){let p=s.getAttribute("action");a=p?Ca(p,e):null,n=s.getAttribute("method")||$h,o=Xm(s.getAttribute("enctype"))||Wh,u=new FormData(s)}else if(Rk(s)||Ak(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(a=g?Ca(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||$h,o=Xm(s.getAttribute("formenctype"))||Xm(p.getAttribute("enctype"))||Wh,u=new FormData(p,s),!Pk()){let{name:y,type:_,value:T}=s;if(_==="image"){let k=y?`${y}.`:"";u.append(`${k}x`,"0"),u.append(`${k}y`,"0")}else y&&u.append(y,T)}}else{if(Sd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$h,a=null,o=Wh,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ag(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Vk(s,e,n,a){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${a}`:o.pathname=`${o.pathname}.${a}`:o.pathname==="/"?o.pathname=`_root.${a}`:e&&Ca(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${a}`,o}async function Bk(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Uk(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function zk(s,e,n){let a=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await Bk(u,n);return d.links?d.links():[]}return[]}));return $k(a.flat(1).filter(Uk).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function q0(s,e,n,a,o,u){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let _=a.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function Fk(s,e,{includeHydrateFallback:n}={}){return Hk(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function Hk(s){return[...new Set(s)]}function qk(s){let e={},n=Object.keys(s).sort();for(let a of n)e[a]=s[a];return e}function $k(s,e){let n=new Set;return new Set(e),s.reduce((a,o)=>{let u=JSON.stringify(qk(o));return n.has(u)||(n.add(u),a.push({key:u,link:o})),a},[])}function W_(){let s=w.useContext(Ro);return ag(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Wk(){let s=w.useContext(kd);return ag(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ig=w.createContext(void 0);ig.displayName="FrameworkContext";function G_(){let s=w.useContext(ig);return ag(s,"You must render this element inside a <HydratedRouter> element"),s}function Gk(s,e){let n=w.useContext(ig),[a,o]=w.useState(!1),[u,d]=w.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:_,onTouchStart:T}=e,k=w.useRef(null);w.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let B=le=>{le.forEach(ee=>{d(ee.isIntersecting)})},P=new IntersectionObserver(B,{threshold:.5});return k.current&&P.observe(k.current),()=>{P.disconnect()}}},[s]),w.useEffect(()=>{if(a){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[a]);let O=()=>{o(!0)},W=()=>{o(!1),d(!1)};return n?s!=="intent"?[u,k,{}]:[u,k,{onFocus:Nc(p,O),onBlur:Nc(g,W),onMouseEnter:Nc(y,O),onMouseLeave:Nc(_,W),onTouchStart:Nc(T,O)}]:[!1,k,{}]}function Nc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function Kk({page:s,...e}){let{router:n}=W_(),a=w.useMemo(()=>D_(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?w.createElement(Qk,{page:s,matches:a,...e}):null}function Yk(s){let{manifest:e,routeModules:n}=G_(),[a,o]=w.useState([]);return w.useEffect(()=>{let u=!1;return zk(s,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,n]),a}function Qk({page:s,matches:e,...n}){let a=Or(),{future:o,manifest:u,routeModules:d}=G_(),{basename:p}=W_(),{loaderData:g,matches:y}=Wk(),_=w.useMemo(()=>q0(s,e,y,u,a,"data"),[s,e,y,u,a]),T=w.useMemo(()=>q0(s,e,y,u,a,"assets"),[s,e,y,u,a]),k=w.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let B=new Set,P=!1;if(e.forEach(ee=>{let me=u.routes[ee.route.id];!me||!me.hasLoader||(!_.some(je=>je.route.id===ee.route.id)&&ee.route.id in g&&d[ee.route.id]?.shouldRevalidate||me.hasClientLoader?P=!0:B.add(ee.route.id))}),B.size===0)return[];let le=Vk(s,p,o.unstable_trailingSlashAwareDataRequests,"data");return P&&B.size>0&&le.searchParams.set("_routes",e.filter(ee=>B.has(ee.route.id)).map(ee=>ee.route.id).join(",")),[le.pathname+le.search]},[p,o.unstable_trailingSlashAwareDataRequests,g,a,u,_,e,s,d]),O=w.useMemo(()=>Fk(T,u),[T,u]),W=Yk(T);return w.createElement(w.Fragment,null,k.map(B=>w.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),O.map(B=>w.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),W.map(({key:B,link:P})=>w.createElement("link",{key:B,nonce:n.nonce,...P,crossOrigin:P.crossOrigin??n.crossOrigin})))}function Xk(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Jk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Jk&&(window.__reactRouterVersion="7.13.0")}catch{}function Zk({basename:s,children:e,unstable_useTransitions:n,window:a}){let o=w.useRef();o.current==null&&(o.current=AE({window:a,v5Compat:!0}));let u=o.current,[d,p]=w.useState({action:u.action,location:u.location}),g=w.useCallback(y=>{n===!1?p(y):w.startTransition(()=>p(y))},[n]);return w.useLayoutEffect(()=>u.listen(g),[u,g]),w.createElement(Nk,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var K_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y_=w.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:k,...O},W){let{basename:B,unstable_useTransitions:P}=w.useContext(nr),le=typeof y=="string"&&K_.test(y),ee=O_(y,B);y=ee.to;let me=hk(y,{relative:o}),[je,ze,Ae]=Gk(a,O),A=sS(y,{replace:d,state:p,target:g,preventScrollReset:_,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:k,unstable_useTransitions:P});function S(D){e&&e(D),D.defaultPrevented||A(D)}let C=w.createElement("a",{...O,...Ae,href:ee.absoluteURL||me,onClick:ee.isExternal||u?e:S,ref:Xk(W,ze),target:g,"data-discover":!le&&n==="render"?"true":void 0});return je&&!le?w.createElement(w.Fragment,null,C,w.createElement(Kk,{page:me})):C});Y_.displayName="Link";var eS=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:u,to:d,viewTransition:p,children:g,...y},_){let T=ru(d,{relative:y.relative}),k=Or(),O=w.useContext(kd),{navigator:W,basename:B}=w.useContext(nr),P=O!=null&&cS(T)&&p===!0,le=W.encodeLocation?W.encodeLocation(T).pathname:T.pathname,ee=k.pathname,me=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(ee=ee.toLowerCase(),me=me?me.toLowerCase():null,le=le.toLowerCase()),me&&B&&(me=Ca(me,B)||me);const je=le!=="/"&&le.endsWith("/")?le.length-1:le.length;let ze=ee===le||!o&&ee.startsWith(le)&&ee.charAt(je)==="/",Ae=me!=null&&(me===le||!o&&me.startsWith(le)&&me.charAt(le.length)==="/"),A={isActive:ze,isPending:Ae,isTransitioning:P},S=ze?e:void 0,C;typeof a=="function"?C=a(A):C=[a,ze?"active":null,Ae?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let D=typeof u=="function"?u(A):u;return w.createElement(Y_,{...y,"aria-current":S,className:C,ref:_,style:D,to:d,viewTransition:p},typeof g=="function"?g(A):g)});eS.displayName="NavLink";var tS=w.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:u,method:d=$h,action:p,onSubmit:g,relative:y,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:k,...O},W)=>{let{unstable_useTransitions:B}=w.useContext(nr),P=lS(),le=oS(p,{relative:y}),ee=d.toLowerCase()==="get"?"get":"post",me=typeof p=="string"&&K_.test(p),je=ze=>{if(g&&g(ze),ze.defaultPrevented)return;ze.preventDefault();let Ae=ze.nativeEvent.submitter,A=Ae?.getAttribute("formmethod")||d,S=()=>P(Ae||ze.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:o,state:u,relative:y,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:k});B&&n!==!1?w.startTransition(()=>S()):S()};return w.createElement("form",{ref:W,method:ee,action:le,onSubmit:a?g:je,...O,"data-discover":!me&&s==="render"?"true":void 0})});tS.displayName="Form";function nS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q_(s){let e=w.useContext(Ro);return Cn(e,nS(s)),e}function sS(s,{target:e,replace:n,state:a,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=qs(),_=Or(),T=ru(s,{relative:u});return w.useCallback(k=>{if(Dk(k,e)){k.preventDefault();let O=n!==void 0?n:Wc(_)===Wc(T),W=()=>y(s,{replace:O,state:a,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?w.startTransition(()=>W()):W()}},[_,y,T,n,a,e,s,o,u,d,p,g])}function rS(s){gr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef(Ep(s)),n=w.useRef(!1),a=Or(),o=w.useMemo(()=>Mk(a.search,n.current?null:e.current),[a.search]),u=qs(),d=w.useCallback((p,g)=>{const y=Ep(typeof p=="function"?p(new URLSearchParams(o)):p);n.current=!0,u("?"+y,g)},[u,o]);return[o,d]}var aS=0,iS=()=>`__${String(++aS)}__`;function lS(){let{router:s}=Q_("useSubmit"),{basename:e}=w.useContext(nr),n=wk(),a=s.fetch,o=s.navigate;return w.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:_,body:T}=Ok(u,e);if(d.navigate===!1){let k=d.fetcherKey||iS();await a(k,n,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:_,body:T,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await o(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:_,body:T,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,o,e,n])}function oS(s,{relative:e}={}){let{basename:n}=w.useContext(nr),a=w.useContext(ra);Cn(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...ru(s||".",{relative:e})},d=Or();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(_=>_==="")){p.delete("index"),g.filter(T=>T).forEach(T=>p.append("index",T));let _=p.toString();u.search=_?`?${_}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Na([n,u.pathname])),Wc(u)}function cS(s,{relative:e}={}){let n=w.useContext(B_);Cn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Q_("useViewTransitionState"),o=ru(s,{relative:e});if(!n.isTransitioning)return!1;let u=Ca(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=Ca(n.nextLocation.pathname,a)||n.nextLocation.pathname;return rd(o.pathname,d)!=null||rd(o.pathname,u)!=null}const uS=()=>{};var $0={};const X_=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},hS=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const o=s[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],d=s[n++],p=s[n++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[a++]=String.fromCharCode(55296+(g>>10)),e[a++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},J_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,p=d?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,_=u>>2,T=(u&3)<<4|p>>4;let k=(p&15)<<2|y>>6,O=y&63;g||(O=64,d||(k=64)),a.push(n[_],n[T],n[k],n[O])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(X_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):hS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const T=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||p==null||y==null||T==null)throw new dS;const k=u<<2|p>>4;if(a.push(k),y!==64){const O=p<<4&240|y>>2;if(a.push(O),T!==64){const W=y<<6&192|T;a.push(W)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class dS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fS=function(s){const e=X_(s);return J_.encodeByteArray(e,!0)},ad=function(s){return fS(s).replace(/\./g,"")},Z_=function(s){try{return J_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function mS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const pS=()=>mS().__FIREBASE_DEFAULTS__,gS=()=>{if(typeof process>"u"||typeof $0>"u")return;const s=$0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},yS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Z_(s[1]);return e&&JSON.parse(e)},Nd=()=>{try{return uS()||pS()||gS()||yS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},ex=s=>Nd()?.emulatorHosts?.[s],tx=s=>{const e=ex(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},nx=()=>Nd()?.config,sx=s=>Nd()?.[`_${s}`];class vS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}function Ai(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lg(s){return(await fetch(s,{credentials:"include"})).ok}function rx(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ad(JSON.stringify(n)),ad(JSON.stringify(d)),""].join(".")}const Uc={};function bS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Uc))Uc[e]?s.emulator.push(e):s.prod.push(e);return s}function _S(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let W0=!1;function og(s,e){if(typeof window>"u"||typeof document>"u"||!Ai(window.location.host)||Uc[s]===e||Uc[s]||W0)return;Uc[s]=e;function n(k){return`__firebase__banner__${k}`}const a="__firebase__banner",u=bS().prod.length>0;function d(){const k=document.getElementById(a);k&&k.remove()}function p(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function g(k,O){k.setAttribute("width","24"),k.setAttribute("id",O),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function y(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{W0=!0,d()},k}function _(k,O){k.setAttribute("id",O),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function T(){const k=_S(a),O=n("text"),W=document.getElementById(O)||document.createElement("span"),B=n("learnmore"),P=document.getElementById(B)||document.createElement("a"),le=n("preprendIcon"),ee=document.getElementById(le)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const me=k.element;p(me),_(P,B);const je=y();g(ee,le),me.append(ee,W,P,je),document.body.appendChild(me)}u?(W.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function ks(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ks())}function wS(){const s=Nd()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ES(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function kS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SS(){const s=ks();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function NS(){return!wS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jS(){try{return typeof indexedDB=="object"}catch{return!1}}function RS(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const CS="FirebaseError";class aa extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=CS,Object.setPrototypeOf(this,aa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?AS(u,a):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new aa(o,p,a)}}function AS(s,e){return s.replace(IS,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const IS=/\{\$([^}]+)}/g;function DS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function fl(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=s[o],d=e[o];if(G0(u)&&G0(d)){if(!fl(u,d))return!1}else if(u!==d)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function G0(s){return s!==null&&typeof s=="object"}function iu(s){const e=[];for(const[n,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Ic(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Dc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function MS(s,e){const n=new PS(s,e);return n.subscribe.bind(n)}class PS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");LS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Jm),o.error===void 0&&(o.error=Jm),o.complete===void 0&&(o.complete=Jm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Jm(){}function Pn(s){return s&&s._delegate?s._delegate:s}class Ei{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ol="[DEFAULT]";class OS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new vS;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BS(e))try{this.getOrInitializeService({instanceIdentifier:ol})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=ol){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ol){return this.instances.has(e)}getOptions(e=ol){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);a===p&&d.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:VS(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ol){return this.component?this.component.multipleInstances?e:ol:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VS(s){return s===ol?void 0:s}function BS(s){return s.instantiationMode==="EAGER"}class US{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Gt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Gt||(Gt={}));const zS={debug:Gt.DEBUG,verbose:Gt.VERBOSE,info:Gt.INFO,warn:Gt.WARN,error:Gt.ERROR,silent:Gt.SILENT},FS=Gt.INFO,HS={[Gt.DEBUG]:"log",[Gt.VERBOSE]:"log",[Gt.INFO]:"info",[Gt.WARN]:"warn",[Gt.ERROR]:"error"},qS=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=HS[e];if(o)console[o](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cg{constructor(e){this.name=e,this._logLevel=FS,this._logHandler=qS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Gt.DEBUG,...e),this._logHandler(this,Gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Gt.VERBOSE,...e),this._logHandler(this,Gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Gt.INFO,...e),this._logHandler(this,Gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Gt.WARN,...e),this._logHandler(this,Gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Gt.ERROR,...e),this._logHandler(this,Gt.ERROR,...e)}}const $S=(s,e)=>e.some(n=>s instanceof n);let K0,Y0;function WS(){return K0||(K0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GS(){return Y0||(Y0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ax=new WeakMap,kp=new WeakMap,ix=new WeakMap,Zm=new WeakMap,ug=new WeakMap;function KS(s){const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(_i(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&ax.set(n,s)}).catch(()=>{}),ug.set(e,s),e}function YS(s){if(kp.has(s))return;const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});kp.set(s,e)}let Sp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return kp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ix.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _i(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function QS(s){Sp=s(Sp)}function XS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(ep(this),e,...n);return ix.set(a,e.sort?e.sort():[e]),_i(a)}:GS().includes(s)?function(...e){return s.apply(ep(this),e),_i(ax.get(this))}:function(...e){return _i(s.apply(ep(this),e))}}function JS(s){return typeof s=="function"?XS(s):(s instanceof IDBTransaction&&YS(s),$S(s,WS())?new Proxy(s,Sp):s)}function _i(s){if(s instanceof IDBRequest)return KS(s);if(Zm.has(s))return Zm.get(s);const e=JS(s);return e!==s&&(Zm.set(s,e),ug.set(e,s)),e}const ep=s=>ug.get(s);function ZS(s,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),p=_i(d);return a&&d.addEventListener("upgradeneeded",g=>{a(_i(d.result),g.oldVersion,g.newVersion,_i(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const eN=["get","getKey","getAll","getAllKeys","count"],tN=["put","add","delete","clear"],tp=new Map;function Q0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(tp.get(e))return tp.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=tN.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||eN.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return a&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return tp.set(e,u),u}QS(s=>({...s,get:(e,n,a)=>Q0(e,n)||s.get(e,n,a),has:(e,n)=>!!Q0(e,n)||s.has(e,n)}));class nN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sN(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function sN(s){return s.getComponent()?.type==="VERSION"}const Np="@firebase/app",X0="0.14.7";const Aa=new cg("@firebase/app"),rN="@firebase/app-compat",aN="@firebase/analytics-compat",iN="@firebase/analytics",lN="@firebase/app-check-compat",oN="@firebase/app-check",cN="@firebase/auth",uN="@firebase/auth-compat",hN="@firebase/database",dN="@firebase/data-connect",fN="@firebase/database-compat",mN="@firebase/functions",pN="@firebase/functions-compat",gN="@firebase/installations",yN="@firebase/installations-compat",vN="@firebase/messaging",bN="@firebase/messaging-compat",_N="@firebase/performance",xN="@firebase/performance-compat",wN="@firebase/remote-config",TN="@firebase/remote-config-compat",EN="@firebase/storage",kN="@firebase/storage-compat",SN="@firebase/firestore",NN="@firebase/ai",jN="@firebase/firestore-compat",RN="firebase",CN="12.8.0";const jp="[DEFAULT]",AN={[Np]:"fire-core",[rN]:"fire-core-compat",[iN]:"fire-analytics",[aN]:"fire-analytics-compat",[oN]:"fire-app-check",[lN]:"fire-app-check-compat",[cN]:"fire-auth",[uN]:"fire-auth-compat",[hN]:"fire-rtdb",[dN]:"fire-data-connect",[fN]:"fire-rtdb-compat",[mN]:"fire-fn",[pN]:"fire-fn-compat",[gN]:"fire-iid",[yN]:"fire-iid-compat",[vN]:"fire-fcm",[bN]:"fire-fcm-compat",[_N]:"fire-perf",[xN]:"fire-perf-compat",[wN]:"fire-rc",[TN]:"fire-rc-compat",[EN]:"fire-gcs",[kN]:"fire-gcs-compat",[SN]:"fire-fst",[jN]:"fire-fst-compat",[NN]:"fire-vertex","fire-js":"fire-js",[RN]:"fire-js-all"};const id=new Map,IN=new Map,Rp=new Map;function J0(s,e){try{s.container.addComponent(e)}catch(n){Aa.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function ml(s){const e=s.name;if(Rp.has(e))return Aa.debug(`There were multiple attempts to register component ${e}.`),!1;Rp.set(e,s);for(const n of id.values())J0(n,s);for(const n of IN.values())J0(n,s);return!0}function jd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Js(s){return s==null?!1:s.settings!==void 0}const DN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new au("app","Firebase",DN);class MN{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}const xl=CN;function hg(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:jp,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw xi.create("bad-app-name",{appName:String(o)});if(n||(n=nx()),!n)throw xi.create("no-options");const u=id.get(o);if(u){if(fl(n,u.options)&&fl(a,u.config))return u;throw xi.create("duplicate-app",{appName:o})}const d=new US(o);for(const g of Rp.values())d.addComponent(g);const p=new MN(n,a,d);return id.set(o,p),p}function dg(s=jp){const e=id.get(s);if(!e&&s===jp&&nx())return hg();if(!e)throw xi.create("no-app",{appName:s});return e}function Xr(s,e,n){let a=AN[s]??s;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Aa.warn(d.join(" "));return}ml(new Ei(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}const PN="firebase-heartbeat-database",LN=1,Gc="firebase-heartbeat-store";let np=null;function lx(){return np||(np=ZS(PN,LN,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Gc)}catch(n){console.warn(n)}}}}).catch(s=>{throw xi.create("idb-open",{originalErrorMessage:s.message})})),np}async function ON(s){try{const n=(await lx()).transaction(Gc),a=await n.objectStore(Gc).get(ox(s));return await n.done,a}catch(e){if(e instanceof aa)Aa.warn(e.message);else{const n=xi.create("idb-get",{originalErrorMessage:e?.message});Aa.warn(n.message)}}}async function Z0(s,e){try{const a=(await lx()).transaction(Gc,"readwrite");await a.objectStore(Gc).put(e,ox(s)),await a.done}catch(n){if(n instanceof aa)Aa.warn(n.message);else{const a=xi.create("idb-set",{originalErrorMessage:n?.message});Aa.warn(a.message)}}}function ox(s){return`${s.name}!${s.options.appId}`}const VN=1024,BN=30;class UN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new FN(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=e1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>BN){const o=HN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Aa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=e1(),{heartbeatsToSend:n,unsentEntries:a}=zN(this._heartbeatsCache.heartbeats),o=ad(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Aa.warn(e),""}}}function e1(){return new Date().toISOString().substring(0,10)}function zN(s,e=VN){const n=[];let a=s.slice();for(const o of s){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),t1(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),t1(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class FN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jS()?RS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ON(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Z0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Z0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function t1(s){return ad(JSON.stringify({version:2,heartbeats:s})).length}function HN(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}function qN(s){ml(new Ei("platform-logger",e=>new nN(e),"PRIVATE")),ml(new Ei("heartbeat",e=>new UN(e),"PRIVATE")),Xr(Np,X0,s),Xr(Np,X0,"esm2020"),Xr("fire-js","")}qN("");function cx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $N=cx,ux=new au("auth","Firebase",cx());const ld=new cg("@firebase/auth");function WN(s,...e){ld.logLevel<=Gt.WARN&&ld.warn(`Auth (${xl}): ${s}`,...e)}function Gh(s,...e){ld.logLevel<=Gt.ERROR&&ld.error(`Auth (${xl}): ${s}`,...e)}function Mr(s,...e){throw fg(s,...e)}function Jr(s,...e){return fg(s,...e)}function hx(s,e,n){const a={...$N(),[e]:n};return new au("auth","Firebase",a).create(e,{appName:s.name})}function ja(s){return hx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fg(s,...e){if(typeof s!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(n,...a)}return ux.create(s,...e)}function bt(s,e,...n){if(!s)throw fg(e,...n)}function ka(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Gh(e),new Error(e)}function Ia(s,e){s||ka(e)}function Cp(){return typeof self<"u"&&self.location?.href||""}function GN(){return n1()==="http:"||n1()==="https:"}function n1(){return typeof self<"u"&&self.location?.protocol||null}function KN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GN()||ES()||"connection"in navigator)?navigator.onLine:!0}function YN(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ia(n>e,"Short delay should be less than long delay!"),this.isMobile=xS()||kS()}get(){return KN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mg(s,e){Ia(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class dx{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ka("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ka("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ka("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const QN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const XN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],JN=new lu(3e4,6e4);function Pa(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function La(s,e,n,a,o={}){return fx(s,o,async()=>{let u={},d={};a&&(e==="GET"?d=a:u={body:JSON.stringify(a)});const p=iu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return TS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Ai(s.emulatorConfig.host)&&(y.credentials="include"),dx.fetch()(await mx(s,s.config.apiHost,n,p),y)})}async function fx(s,e,n){s._canInitEmulator=!1;const a={...QN,...e};try{const o=new ej(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Dh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Dh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw Dh(s,"user-disabled",d);const _=a[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw hx(s,_,y);Mr(s,_)}}catch(o){if(o instanceof aa)throw o;Mr(s,"network-request-failed",{message:String(o)})}}async function ou(s,e,n,a,o={}){const u=await La(s,e,n,a,o);return"mfaPendingCredential"in u&&Mr(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function mx(s,e,n,a){const o=`${e}${n}?${a}`,u=s,d=u.config.emulator?mg(s.config,o):`${s.config.apiScheme}://${o}`;return XN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function ZN(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ej{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Jr(this.auth,"network-request-failed")),JN.get())})}}function Dh(s,e,n){const a={appName:s.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=Jr(s,e,a);return o.customData._tokenResponse=n,o}function s1(s){return s!==void 0&&s.enterprise!==void 0}class tj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nj(s,e){return La(s,"GET","/v2/recaptchaConfig",Pa(s,e))}async function sj(s,e){return La(s,"POST","/v1/accounts:delete",e)}async function od(s,e){return La(s,"POST","/v1/accounts:lookup",e)}function zc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rj(s,e=!1){const n=Pn(s),a=await n.getIdToken(e),o=pg(a);bt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:a,authTime:zc(sp(o.auth_time)),issuedAtTime:zc(sp(o.iat)),expirationTime:zc(sp(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function sp(s){return Number(s)*1e3}function pg(s){const[e,n,a]=s.split(".");if(e===void 0||n===void 0||a===void 0)return Gh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Z_(n);return o?JSON.parse(o):(Gh("Failed to decode base64 JWT payload"),null)}catch(o){return Gh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function r1(s){const e=pg(s);return bt(e,"internal-error"),bt(typeof e.exp<"u","internal-error"),bt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Kc(s,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof aa&&aj(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function aj({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class ij{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ap{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zc(this.lastLoginAt),this.creationTime=zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function cd(s){const e=s.auth,n=await s.getIdToken(),a=await Kc(s,od(e,{idToken:n}));bt(a?.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?px(o.providerUserInfo):[],d=oj(s.providerData,u),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!d?.length,y=p?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Ap(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,_)}async function lj(s){const e=Pn(s);await cd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oj(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function px(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function cj(s,e){const n=await fx(s,{},async()=>{const a=iu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await mx(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:a};return s.emulatorConfig&&Ai(s.emulatorConfig.host)&&(g.credentials="include"),dx.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uj(s,e){return La(s,"POST","/v2/accounts:revokeToken",Pa(s,e))}class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){bt(e.idToken,"internal-error"),bt(typeof e.idToken<"u","internal-error"),bt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){bt(e.length!==0,"internal-error");const n=r1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:u}=await cj(e,n);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:u}=n,d=new go;return a&&(bt(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&(bt(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(bt(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return ka("not implemented")}}function fi(s,e){bt(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Ir{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new ij(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ap(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Kc(this,this.stsTokenManager.getToken(this.auth,e));return bt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rj(this,e)}reload(){return lj(this)}_assign(e){this!==e&&(bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ir({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await cd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Js(this.auth.app))return Promise.reject(ja(this.auth));const e=await this.getIdToken();return await Kc(this,sj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:T,emailVerified:k,isAnonymous:O,providerData:W,stsTokenManager:B}=n;bt(T&&B,e,"internal-error");const P=go.fromJSON(this.name,B);bt(typeof T=="string",e,"internal-error"),fi(a,e.name),fi(o,e.name),bt(typeof k=="boolean",e,"internal-error"),bt(typeof O=="boolean",e,"internal-error"),fi(u,e.name),fi(d,e.name),fi(p,e.name),fi(g,e.name),fi(y,e.name),fi(_,e.name);const le=new Ir({uid:T,auth:e,email:o,emailVerified:k,displayName:a,isAnonymous:O,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:P,createdAt:y,lastLoginAt:_});return W&&Array.isArray(W)&&(le.providerData=W.map(ee=>({...ee}))),g&&(le._redirectEventId=g),le}static async _fromIdTokenResponse(e,n,a=!1){const o=new go;o.updateFromServerResponse(n);const u=new Ir({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await cd(u),u}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];bt(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?px(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,p=new go;p.updateFromIdToken(a);const g=new Ir({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ap(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const a1=new Map;function Sa(s){Ia(s instanceof Function,"Expected a class definition");let e=a1.get(s);return e?(Ia(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,a1.set(s,e),e)}class gx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gx.type="NONE";const i1=gx;function Kh(s,e,n){return`firebase:${s}:${e}:${n}`}class yo{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=Kh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Kh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await od(this.auth,{idToken:e}).catch(()=>{});return n?Ir._fromGetAccountInfoResponse(this.auth,n,e):null}return Ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new yo(Sa(i1),e,a);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Sa(i1);const d=Kh(a,e.config.apiKey,e.name);let p=null;for(const y of n)try{const _=await y._get(d);if(_){let T;if(typeof _=="string"){const k=await od(e,{idToken:_}).catch(()=>{});if(!k)break;T=await Ir._fromGetAccountInfoResponse(e,k,_)}else T=Ir._fromJSON(e,_);y!==u&&(p=T),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new yo(u,e,a):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new yo(u,e,a))}}function l1(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_x(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wx(e))return"Blackberry";if(Tx(e))return"Webos";if(vx(e))return"Safari";if((e.includes("chrome/")||bx(e))&&!e.includes("edge/"))return"Chrome";if(xx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(n);if(a?.length===2)return a[1]}return"Other"}function yx(s=ks()){return/firefox\//i.test(s)}function vx(s=ks()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bx(s=ks()){return/crios\//i.test(s)}function _x(s=ks()){return/iemobile/i.test(s)}function xx(s=ks()){return/android/i.test(s)}function wx(s=ks()){return/blackberry/i.test(s)}function Tx(s=ks()){return/webos/i.test(s)}function gg(s=ks()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function hj(s=ks()){return gg(s)&&!!window.navigator?.standalone}function dj(){return SS()&&document.documentMode===10}function Ex(s=ks()){return gg(s)||xx(s)||Tx(s)||wx(s)||/windows phone/i.test(s)||_x(s)}function kx(s,e=[]){let n;switch(s){case"Browser":n=l1(ks());break;case"Worker":n=`${l1(ks())}-${s}`;break;default:n=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xl}/${a}`}class fj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function mj(s,e={}){return La(s,"GET","/v2/passwordPolicy",Pa(s,e))}const pj=6;class gj{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??pj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class yj{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o1(this),this.idTokenSubscription=new o1(this),this.beforeStateQueue=new fj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ux,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await od(this,{idToken:e}),a=await Ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Js(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=a?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(a=p.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Js(this.app))return Promise.reject(ja(this));const n=e?Pn(e):null;return n&&bt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Js(this.app)?Promise.reject(ja(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Js(this.app)?Promise.reject(ja(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mj(this),n=new gj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new au("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await uj(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sa(e)||this._popupRedirectResolver;bt(n,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[Sa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,a,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(Js(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&WN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ii(s){return Pn(s)}class o1{constructor(e){this.auth=e,this.observer=null,this.addObserver=MS(n=>this.observer=n)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vj(s){Rd=s}function Sx(s){return Rd.loadJS(s)}function bj(){return Rd.recaptchaEnterpriseScript}function _j(){return Rd.gapiScript}function xj(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class wj{constructor(){this.enterprise=new Tj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Tj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Ej="recaptcha-enterprise",Nx="NO_RECAPTCHA";class kj{constructor(e){this.type=Ej,this.auth=Ii(e)}async verify(e="verify",n=!1){async function a(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{nj(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new tj(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function o(u,d,p){const g=window.grecaptcha;s1(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(Nx)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wj().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{a(this.auth).then(p=>{if(!n&&s1(window.grecaptcha))o(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=bj();g.length!==0&&(g+=p),Sx(g).then(()=>{o(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function c1(s,e,n,a=!1,o=!1){const u=new kj(s);let d;if(o)d=Nx;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return a?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function ud(s,e,n,a,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await c1(s,e,n,n==="getOobCode");return a(s,u)}else return a(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await c1(s,e,n,n==="getOobCode");return a(s,d)}else return Promise.reject(u)})}function Sj(s,e){const n=jd(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(fl(u,e??{}))return o;Mr(o,"already-initialized")}return n.initialize({options:e})}function Nj(s,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(Sa);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function jj(s,e,n){const a=Ii(s);bt(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=jx(e),{host:d,port:p}=Rj(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},_=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){bt(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),bt(fl(y,a.config.emulator)&&fl(_,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=_,a.settings.appVerificationDisabledForTesting=!0,Ai(d)?(lg(`${u}//${d}${g}`),og("Auth",!0)):Cj()}function jx(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Rj(s){const e=jx(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:u1(a.substr(u.length+1))}}else{const[u,d]=a.split(":");return{host:u,port:u1(d)}}}function u1(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Cj(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class yg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ka("not implemented")}_getIdTokenResponse(e){return ka("not implemented")}_linkToIdToken(e,n){return ka("not implemented")}_getReauthenticationResolver(e){return ka("not implemented")}}async function Aj(s,e){return La(s,"POST","/v1/accounts:signUp",e)}async function Ij(s,e){return ou(s,"POST","/v1/accounts:signInWithPassword",Pa(s,e))}async function Dj(s,e){return La(s,"POST","/v1/accounts:sendOobCode",Pa(s,e))}async function Mj(s,e){return Dj(s,e)}async function Pj(s,e){return ou(s,"POST","/v1/accounts:signInWithEmailLink",Pa(s,e))}async function Lj(s,e){return ou(s,"POST","/v1/accounts:signInWithEmailLink",Pa(s,e))}class Yc extends yg{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Yc(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new Yc(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ud(e,n,"signInWithPassword",Ij);case"emailLink":return Pj(e,{email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ud(e,a,"signUpPassword",Aj);case"emailLink":return Lj(e,{idToken:n,email:this._email,oobCode:this._password});default:Mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function vo(s,e){return ou(s,"POST","/v1/accounts:signInWithIdp",Pa(s,e))}const Oj="http://localhost";class pl extends yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new pl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=n;if(!a||!o)return null;const d=new pl(a,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return vo(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,vo(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vo(e,n)}buildRequest(){const e={requestUri:Oj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=iu(n)}return e}}function Vj(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Bj(s){const e=Ic(Dc(s)).link,n=e?Ic(Dc(e)).deep_link_id:null,a=Ic(Dc(s)).deep_link_id;return(a?Ic(Dc(a)).link:null)||a||n||e||s}class vg{constructor(e){const n=Ic(Dc(e)),a=n.apiKey??null,o=n.oobCode??null,u=Vj(n.mode??null);bt(a&&o&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Bj(e);try{return new vg(n)}catch{return null}}}class Ao{constructor(){this.providerId=Ao.PROVIDER_ID}static credential(e,n){return Yc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=vg.parseLink(n);return bt(a,"argument-error"),Yc._fromEmailAndCode(e,a.code,a.tenantId)}}Ao.PROVIDER_ID="password";Ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Rx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cu extends Rx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pi extends cu{constructor(){super("facebook.com")}static credential(e){return pl._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";pi.PROVIDER_ID="facebook.com";class gi extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return pl._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return gi.credential(n,a)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";class yi extends cu{constructor(){super("github.com")}static credential(e){return pl._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";class vi extends cu{constructor(){super("twitter.com")}static credential(e,n){return pl._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return vi.credential(n,a)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";async function Uj(s,e){return ou(s,"POST","/v1/accounts:signUp",Pa(s,e))}class gl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const u=await Ir._fromIdTokenResponse(e,a,o),d=h1(a);return new gl({user:u,providerId:d,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=h1(a);return new gl({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function h1(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class hd extends aa{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,hd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new hd(e,n,a,o)}}function Cx(s,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?hd._fromErrorAndOperation(s,u,e,a):u})}async function zj(s,e,n=!1){const a=await Kc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return gl._forOperation(s,"link",a)}async function Fj(s,e,n=!1){const{auth:a}=s;if(Js(a.app))return Promise.reject(ja(a));const o="reauthenticate";try{const u=await Kc(s,Cx(a,o,e,s),n);bt(u.idToken,a,"internal-error");const d=pg(u.idToken);bt(d,a,"internal-error");const{sub:p}=d;return bt(s.uid===p,a,"user-mismatch"),gl._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Mr(a,"user-mismatch"),u}}async function Ax(s,e,n=!1){if(Js(s.app))return Promise.reject(ja(s));const a="signIn",o=await Cx(s,a,e),u=await gl._fromIdTokenResponse(s,a,o);return n||await s._updateCurrentUser(u.user),u}async function Hj(s,e){return Ax(Ii(s),e)}async function Ix(s){const e=Ii(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function qj(s,e,n){const a=Ii(s);await ud(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Mj)}async function OM(s,e,n){if(Js(s.app))return Promise.reject(ja(s));const a=Ii(s),d=await ud(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Uj).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Ix(s),g}),p=await gl._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(p.user),p}function $j(s,e,n){return Js(s.app)?Promise.reject(ja(s)):Hj(Pn(s),Ao.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&Ix(s),a})}function Wj(s,e){return Pn(s).setPersistence(e)}function Gj(s,e,n,a){return Pn(s).onIdTokenChanged(e,n,a)}function Kj(s,e,n){return Pn(s).beforeAuthStateChanged(e,n)}function Yj(s,e,n,a){return Pn(s).onAuthStateChanged(e,n,a)}function Qj(s){return Pn(s).signOut()}const dd="__sak";class Dx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dd,"1"),this.storage.removeItem(dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xj=1e3,Jj=10;class Mx extends Dx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ex(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!n&&this.localCache[a]===d||this.notifyListeners(a,d)},u=this.storage.getItem(a);dj()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Jj):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},Xj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mx.type="LOCAL";const Px=Mx;class Lx extends Dx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Lx.type="SESSION";const bg=Lx;function Zj(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new Cd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const p=Array.from(d).map(async y=>y(n.origin,u)),g=await Zj(p);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];function _g(s="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return s+n}class eR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=_g("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(T){const k=T;if(k.data.eventId===y)switch(k.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(k.data.response);break;default:clearTimeout(_),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Zr(){return window}function tR(s){Zr().location.href=s}function Ox(){return typeof Zr().WorkerGlobalScope<"u"&&typeof Zr().importScripts=="function"}async function nR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sR(){return navigator?.serviceWorker?.controller||null}function rR(){return Ox()?self:null}const Vx="firebaseLocalStorageDb",aR=1,fd="firebaseLocalStorage",Bx="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ad(s,e){return s.transaction([fd],e?"readwrite":"readonly").objectStore(fd)}function iR(){const s=indexedDB.deleteDatabase(Vx);return new uu(s).toPromise()}function Ip(){const s=indexedDB.open(Vx,aR);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(fd,{keyPath:Bx})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(fd)?e(a):(a.close(),await iR(),e(await Ip()))})})}async function d1(s,e,n){const a=Ad(s,!0).put({[Bx]:e,value:n});return new uu(a).toPromise()}async function lR(s,e){const n=Ad(s,!1).get(e),a=await new uu(n).toPromise();return a===void 0?null:a.value}function f1(s,e){const n=Ad(s,!0).delete(e);return new uu(n).toPromise()}const oR=800,cR=3;class Ux{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ip(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>cR)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ox()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(rR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await nR(),!this.activeServiceWorker)return;this.sender=new eR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ip();return await d1(e,dd,"1"),await f1(e,dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>d1(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>lR(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>f1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ad(o,!1).getAll();return new uu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ux.type="LOCAL";const uR=Ux;new lu(3e4,6e4);function hR(s,e){return e?Sa(e):(bt(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class xg extends yg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dR(s){return Ax(s.auth,new xg(s),s.bypassAuthState)}function fR(s){const{auth:e,user:n}=s;return bt(n,e,"internal-error"),Fj(n,new xg(s),s.bypassAuthState)}async function mR(s){const{auth:e,user:n}=s;return bt(n,e,"internal-error"),zj(n,new xg(s),s.bypassAuthState)}class zx{constructor(e,n,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dR;case"linkViaPopup":case"linkViaRedirect":return mR;case"reauthViaPopup":case"reauthViaRedirect":return fR;default:Mr(this.auth,"internal-error")}}resolve(e){Ia(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ia(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const pR=new lu(2e3,1e4);class po extends zx{constructor(e,n,a,o,u){super(e,n,o,u),this.provider=a,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return bt(e,this.auth,"internal-error"),e}async onExecution(){Ia(this.filter.length===1,"Popup operations only handle one event");const e=_g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pR.get())};e()}}po.currentPopupAction=null;const gR="pendingRedirect",Yh=new Map;class yR extends zx{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=Yh.get(this.auth._key());if(!e){try{const a=await vR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}Yh.set(this.auth._key(),e)}return this.bypassAuthState||Yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vR(s,e){const n=xR(e),a=_R(s);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function bR(s,e){Yh.set(s._key(),e)}function _R(s){return Sa(s._redirectPersistence)}function xR(s){return Kh(gR,s.config.apiKey,s.name)}async function wR(s,e,n=!1){if(Js(s.app))return Promise.reject(ja(s));const a=Ii(s),o=hR(a,e),d=await new yR(a,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}const TR=600*1e3;class ER{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Fx(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Jr(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TR&&this.cachedEventUids.clear(),this.cachedEventUids.has(m1(e))}saveEventToCache(e){this.cachedEventUids.add(m1(e)),this.lastProcessedEventTime=Date.now()}}function m1(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Fx({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function kR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fx(s);default:return!1}}async function SR(s,e={}){return La(s,"GET","/v1/projects",e)}const NR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jR=/^https?/;async function RR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await SR(s);for(const n of e)try{if(CR(n))return}catch{}Mr(s,"unauthorized-domain")}function CR(s){const e=Cp(),{protocol:n,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===a}if(!jR.test(n))return!1;if(NR.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}const AR=new lu(3e4,6e4);function p1(){const s=Zr().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function IR(s){return new Promise((e,n)=>{function a(){p1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p1(),n(Jr(s,"network-request-failed"))},timeout:AR.get()})}if(Zr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Zr().gapi?.load)a();else{const o=xj("iframefcb");return Zr()[o]=()=>{gapi.load?a():n(Jr(s,"network-request-failed"))},Sx(`${_j()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Qh=null,e})}let Qh=null;function DR(s){return Qh=Qh||IR(s),Qh}const MR=new lu(5e3,15e3),PR="__/auth/iframe",LR="emulator/auth/iframe",OR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BR(s){const e=s.config;bt(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?mg(e,LR):`https://${s.config.authDomain}/${PR}`,a={apiKey:e.apiKey,appName:s.name,v:xl},o=VR.get(s.config.apiHost);o&&(a.eid=o);const u=s._getFrameworks();return u.length&&(a.fw=u.join(",")),`${n}?${iu(a).slice(1)}`}async function UR(s){const e=await DR(s),n=Zr().gapi;return bt(n,s,"internal-error"),e.open({where:document.body,url:BR(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OR,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const d=Jr(s,"network-request-failed"),p=Zr().setTimeout(()=>{u(d)},MR.get());function g(){Zr().clearTimeout(p),o(a)}a.ping(g).then(g,()=>{u(d)})}))}const zR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FR=500,HR=600,qR="_blank",$R="http://localhost";class g1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WR(s,e,n,a=FR,o=HR){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let p="";const g={...zR,width:a.toString(),height:o.toString(),top:u,left:d},y=ks().toLowerCase();n&&(p=bx(y)?qR:n),yx(y)&&(e=e||$R,g.scrollbars="yes");const _=Object.entries(g).reduce((k,[O,W])=>`${k}${O}=${W},`,"");if(hj(y)&&p!=="_self")return GR(e||"",p),new g1(null);const T=window.open(e||"",p,_);bt(T,s,"popup-blocked");try{T.focus()}catch{}return new g1(T)}function GR(s,e){const n=document.createElement("a");n.href=s,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}const KR="__/auth/handler",YR="emulator/auth/handler",QR=encodeURIComponent("fac");async function y1(s,e,n,a,o,u){bt(s.config.authDomain,s,"auth-domain-config-required"),bt(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:a,v:xl,eventId:o};if(e instanceof Rx){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",DS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))d[_]=T}if(e instanceof cu){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(d.scopes=_.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const g=await s._getAppCheckToken(),y=g?`#${QR}=${encodeURIComponent(g)}`:"";return`${XR(s)}?${iu(p).slice(1)}${y}`}function XR({config:s}){return s.emulator?mg(s,YR):`https://${s.authDomain}/${KR}`}const rp="webStorageSupport";class JR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bg,this._completeRedirectFn=wR,this._overrideRedirectResult=bR}async _openPopup(e,n,a,o){Ia(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await y1(e,n,a,Cp(),o);return WR(e,u,_g())}async _openRedirect(e,n,a,o){await this._originValidation(e);const u=await y1(e,n,a,Cp(),o);return tR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ia(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await UR(e),a=new ER(e);return n.register("authEvent",o=>(bt(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rp,{type:rp},o=>{const u=o?.[0]?.[rp];u!==void 0&&n(!!u),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ex()||vx()||gg()}}const ZR=JR;var v1="@firebase/auth",b1="1.12.0";class eC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nC(s){ml(new Ei("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=a.options;bt(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kx(s)},y=new yj(a,o,u,g);return Nj(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),ml(new Ei("auth-internal",e=>{const n=Ii(e.getProvider("auth").getImmediate());return(a=>new eC(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xr(v1,b1,tC(s)),Xr(v1,b1,"esm2020")}const sC=300,rC=sx("authIdTokenMaxAge")||sC;let _1=null;const aC=s=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>rC)return;const o=n?.token;_1!==o&&(_1=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Hx(s=dg()){const e=jd(s,"auth");if(e.isInitialized())return e.getImmediate();const n=Sj(s,{popupRedirectResolver:ZR,persistence:[uR,Px,bg]}),a=sx("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const d=aC(u.toString());Kj(n,d,()=>d(n.currentUser)),Gj(n,p=>d(p))}}const o=ex("auth");return o&&jj(n,`http://${o}`),n}function iC(){return document.getElementsByTagName("head")?.[0]??document}vj({loadJS(s){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const u=Jr("internal-error");u.customData=o,n(u)},a.type="text/javascript",a.charset="UTF-8",iC().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nC("Browser");var x1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var wi,qx;(function(){var s;function e(A,S){function C(){}C.prototype=S.prototype,A.F=S.prototype,A.prototype=new C,A.prototype.constructor=A,A.D=function(D,M,U){for(var I=Array(arguments.length-2),He=2;He<arguments.length;He++)I[He-2]=arguments[He];return S.prototype[M].apply(D,I)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,S,C){C||(C=0);const D=Array(16);if(typeof S=="string")for(var M=0;M<16;++M)D[M]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(M=0;M<16;++M)D[M]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=A.g[0],C=A.g[1],M=A.g[2];let U=A.g[3],I;I=S+(U^C&(M^U))+D[0]+3614090360&4294967295,S=C+(I<<7&4294967295|I>>>25),I=U+(M^S&(C^M))+D[1]+3905402710&4294967295,U=S+(I<<12&4294967295|I>>>20),I=M+(C^U&(S^C))+D[2]+606105819&4294967295,M=U+(I<<17&4294967295|I>>>15),I=C+(S^M&(U^S))+D[3]+3250441966&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(U^C&(M^U))+D[4]+4118548399&4294967295,S=C+(I<<7&4294967295|I>>>25),I=U+(M^S&(C^M))+D[5]+1200080426&4294967295,U=S+(I<<12&4294967295|I>>>20),I=M+(C^U&(S^C))+D[6]+2821735955&4294967295,M=U+(I<<17&4294967295|I>>>15),I=C+(S^M&(U^S))+D[7]+4249261313&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(U^C&(M^U))+D[8]+1770035416&4294967295,S=C+(I<<7&4294967295|I>>>25),I=U+(M^S&(C^M))+D[9]+2336552879&4294967295,U=S+(I<<12&4294967295|I>>>20),I=M+(C^U&(S^C))+D[10]+4294925233&4294967295,M=U+(I<<17&4294967295|I>>>15),I=C+(S^M&(U^S))+D[11]+2304563134&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(U^C&(M^U))+D[12]+1804603682&4294967295,S=C+(I<<7&4294967295|I>>>25),I=U+(M^S&(C^M))+D[13]+4254626195&4294967295,U=S+(I<<12&4294967295|I>>>20),I=M+(C^U&(S^C))+D[14]+2792965006&4294967295,M=U+(I<<17&4294967295|I>>>15),I=C+(S^M&(U^S))+D[15]+1236535329&4294967295,C=M+(I<<22&4294967295|I>>>10),I=S+(M^U&(C^M))+D[1]+4129170786&4294967295,S=C+(I<<5&4294967295|I>>>27),I=U+(C^M&(S^C))+D[6]+3225465664&4294967295,U=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(U^S))+D[11]+643717713&4294967295,M=U+(I<<14&4294967295|I>>>18),I=C+(U^S&(M^U))+D[0]+3921069994&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(M^U&(C^M))+D[5]+3593408605&4294967295,S=C+(I<<5&4294967295|I>>>27),I=U+(C^M&(S^C))+D[10]+38016083&4294967295,U=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(U^S))+D[15]+3634488961&4294967295,M=U+(I<<14&4294967295|I>>>18),I=C+(U^S&(M^U))+D[4]+3889429448&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(M^U&(C^M))+D[9]+568446438&4294967295,S=C+(I<<5&4294967295|I>>>27),I=U+(C^M&(S^C))+D[14]+3275163606&4294967295,U=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(U^S))+D[3]+4107603335&4294967295,M=U+(I<<14&4294967295|I>>>18),I=C+(U^S&(M^U))+D[8]+1163531501&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(M^U&(C^M))+D[13]+2850285829&4294967295,S=C+(I<<5&4294967295|I>>>27),I=U+(C^M&(S^C))+D[2]+4243563512&4294967295,U=S+(I<<9&4294967295|I>>>23),I=M+(S^C&(U^S))+D[7]+1735328473&4294967295,M=U+(I<<14&4294967295|I>>>18),I=C+(U^S&(M^U))+D[12]+2368359562&4294967295,C=M+(I<<20&4294967295|I>>>12),I=S+(C^M^U)+D[5]+4294588738&4294967295,S=C+(I<<4&4294967295|I>>>28),I=U+(S^C^M)+D[8]+2272392833&4294967295,U=S+(I<<11&4294967295|I>>>21),I=M+(U^S^C)+D[11]+1839030562&4294967295,M=U+(I<<16&4294967295|I>>>16),I=C+(M^U^S)+D[14]+4259657740&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(C^M^U)+D[1]+2763975236&4294967295,S=C+(I<<4&4294967295|I>>>28),I=U+(S^C^M)+D[4]+1272893353&4294967295,U=S+(I<<11&4294967295|I>>>21),I=M+(U^S^C)+D[7]+4139469664&4294967295,M=U+(I<<16&4294967295|I>>>16),I=C+(M^U^S)+D[10]+3200236656&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(C^M^U)+D[13]+681279174&4294967295,S=C+(I<<4&4294967295|I>>>28),I=U+(S^C^M)+D[0]+3936430074&4294967295,U=S+(I<<11&4294967295|I>>>21),I=M+(U^S^C)+D[3]+3572445317&4294967295,M=U+(I<<16&4294967295|I>>>16),I=C+(M^U^S)+D[6]+76029189&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(C^M^U)+D[9]+3654602809&4294967295,S=C+(I<<4&4294967295|I>>>28),I=U+(S^C^M)+D[12]+3873151461&4294967295,U=S+(I<<11&4294967295|I>>>21),I=M+(U^S^C)+D[15]+530742520&4294967295,M=U+(I<<16&4294967295|I>>>16),I=C+(M^U^S)+D[2]+3299628645&4294967295,C=M+(I<<23&4294967295|I>>>9),I=S+(M^(C|~U))+D[0]+4096336452&4294967295,S=C+(I<<6&4294967295|I>>>26),I=U+(C^(S|~M))+D[7]+1126891415&4294967295,U=S+(I<<10&4294967295|I>>>22),I=M+(S^(U|~C))+D[14]+2878612391&4294967295,M=U+(I<<15&4294967295|I>>>17),I=C+(U^(M|~S))+D[5]+4237533241&4294967295,C=M+(I<<21&4294967295|I>>>11),I=S+(M^(C|~U))+D[12]+1700485571&4294967295,S=C+(I<<6&4294967295|I>>>26),I=U+(C^(S|~M))+D[3]+2399980690&4294967295,U=S+(I<<10&4294967295|I>>>22),I=M+(S^(U|~C))+D[10]+4293915773&4294967295,M=U+(I<<15&4294967295|I>>>17),I=C+(U^(M|~S))+D[1]+2240044497&4294967295,C=M+(I<<21&4294967295|I>>>11),I=S+(M^(C|~U))+D[8]+1873313359&4294967295,S=C+(I<<6&4294967295|I>>>26),I=U+(C^(S|~M))+D[15]+4264355552&4294967295,U=S+(I<<10&4294967295|I>>>22),I=M+(S^(U|~C))+D[6]+2734768916&4294967295,M=U+(I<<15&4294967295|I>>>17),I=C+(U^(M|~S))+D[13]+1309151649&4294967295,C=M+(I<<21&4294967295|I>>>11),I=S+(M^(C|~U))+D[4]+4149444226&4294967295,S=C+(I<<6&4294967295|I>>>26),I=U+(C^(S|~M))+D[11]+3174756917&4294967295,U=S+(I<<10&4294967295|I>>>22),I=M+(S^(U|~C))+D[2]+718787259&4294967295,M=U+(I<<15&4294967295|I>>>17),I=C+(U^(M|~S))+D[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+U&4294967295}a.prototype.v=function(A,S){S===void 0&&(S=A.length);const C=S-this.blockSize,D=this.C;let M=this.h,U=0;for(;U<S;){if(M==0)for(;U<=C;)o(this,A,U),U+=this.blockSize;if(typeof A=="string"){for(;U<S;)if(D[M++]=A.charCodeAt(U++),M==this.blockSize){o(this,D),M=0;break}}else for(;U<S;)if(D[M++]=A[U++],M==this.blockSize){o(this,D),M=0;break}}this.h=M,this.o+=S},a.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;S=this.o*8;for(var C=A.length-8;C<A.length;++C)A[C]=S&255,S/=256;for(this.v(A),A=Array(16),S=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)A[S++]=this.g[C]>>>D&255;return A};function u(A,S){var C=p;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=S(A)}function d(A,S){this.h=S;const C=[];let D=!0;for(let M=A.length-1;M>=0;M--){const U=A[M]|0;D&&U==S||(C[M]=U,D=!1)}this.g=C}var p={};function g(A){return-128<=A&&A<128?u(A,function(S){return new d([S|0],S<0?-1:0)}):new d([A|0],A<0?-1:0)}function y(A){if(isNaN(A)||!isFinite(A))return T;if(A<0)return P(y(-A));const S=[];let C=1;for(let D=0;A>=C;D++)S[D]=A/C|0,C*=4294967296;return new d(S,0)}function _(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return P(_(A.substring(1),S));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(S,8));let D=T;for(let U=0;U<A.length;U+=8){var M=Math.min(8,A.length-U);const I=parseInt(A.substring(U,U+M),S);M<8?(M=y(Math.pow(S,M)),D=D.j(M).add(y(I))):(D=D.j(C),D=D.add(y(I)))}return D}var T=g(0),k=g(1),O=g(16777216);s=d.prototype,s.m=function(){if(B(this))return-P(this).m();let A=0,S=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);A+=(D>=0?D:4294967296+D)*S,S*=4294967296}return A},s.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(W(this))return"0";if(B(this))return"-"+P(this).toString(A);const S=y(Math.pow(A,6));var C=this;let D="";for(;;){const M=je(C,S).g;C=le(C,M.j(S));let U=((C.g.length>0?C.g[0]:C.h)>>>0).toString(A);if(C=M,W(C))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},s.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function W(A){if(A.h!=0)return!1;for(let S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function B(A){return A.h==-1}s.l=function(A){return A=le(this,A),B(A)?-1:W(A)?0:1};function P(A){const S=A.g.length,C=[];for(let D=0;D<S;D++)C[D]=~A.g[D];return new d(C,~A.h).add(k)}s.abs=function(){return B(this)?P(this):this},s.add=function(A){const S=Math.max(this.g.length,A.g.length),C=[];let D=0;for(let M=0;M<=S;M++){let U=D+(this.i(M)&65535)+(A.i(M)&65535),I=(U>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);D=I>>>16,U&=65535,I&=65535,C[M]=I<<16|U}return new d(C,C[C.length-1]&-2147483648?-1:0)};function le(A,S){return A.add(P(S))}s.j=function(A){if(W(this)||W(A))return T;if(B(this))return B(A)?P(this).j(P(A)):P(P(this).j(A));if(B(A))return P(this.j(P(A)));if(this.l(O)<0&&A.l(O)<0)return y(this.m()*A.m());const S=this.g.length+A.g.length,C=[];for(var D=0;D<2*S;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let M=0;M<A.g.length;M++){const U=this.i(D)>>>16,I=this.i(D)&65535,He=A.i(M)>>>16,Et=A.i(M)&65535;C[2*D+2*M]+=I*Et,ee(C,2*D+2*M),C[2*D+2*M+1]+=U*Et,ee(C,2*D+2*M+1),C[2*D+2*M+1]+=I*He,ee(C,2*D+2*M+1),C[2*D+2*M+2]+=U*He,ee(C,2*D+2*M+2)}for(A=0;A<S;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=S;A<2*S;A++)C[A]=0;return new d(C,0)};function ee(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function me(A,S){this.g=A,this.h=S}function je(A,S){if(W(S))throw Error("division by zero");if(W(A))return new me(T,T);if(B(A))return S=je(P(A),S),new me(P(S.g),P(S.h));if(B(S))return S=je(A,P(S)),new me(P(S.g),S.h);if(A.g.length>30){if(B(A)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var C=k,D=S;D.l(A)<=0;)C=ze(C),D=ze(D);var M=Ae(C,1),U=Ae(D,1);for(D=Ae(D,2),C=Ae(C,2);!W(D);){var I=U.add(D);I.l(A)<=0&&(M=M.add(C),U=I),D=Ae(D,1),C=Ae(C,1)}return S=le(A,M.j(S)),new me(M,S)}for(M=T;A.l(S)>=0;){for(C=Math.max(1,Math.floor(A.m()/S.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=y(C),I=U.j(S);B(I)||I.l(A)>0;)C-=D,U=y(C),I=U.j(S);W(U)&&(U=k),M=M.add(U),A=le(A,I)}return new me(M,A)}s.B=function(A){return je(this,A).h},s.and=function(A){const S=Math.max(this.g.length,A.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)&A.i(D);return new d(C,this.h&A.h)},s.or=function(A){const S=Math.max(this.g.length,A.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)|A.i(D);return new d(C,this.h|A.h)},s.xor=function(A){const S=Math.max(this.g.length,A.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)^A.i(D);return new d(C,this.h^A.h)};function ze(A){const S=A.g.length+1,C=[];for(let D=0;D<S;D++)C[D]=A.i(D)<<1|A.i(D-1)>>>31;return new d(C,A.h)}function Ae(A,S){const C=S>>5;S%=32;const D=A.g.length-C,M=[];for(let U=0;U<D;U++)M[U]=S>0?A.i(U+C)>>>S|A.i(U+C+1)<<32-S:A.i(U+C);return new d(M,A.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,qx=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=_,wi=d}).apply(typeof x1<"u"?x1:typeof self<"u"?self:typeof window<"u"?window:{});var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $x,Mc,Wx,Xh,Dp,Gx,Kx,Yx;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mh=="object"&&Mh];for(var v=0;v<h.length;++v){var x=h[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var a=n(this);function o(h,v){if(v)e:{var x=a;h=h.split(".");for(var j=0;j<h.length-1;j++){var Q=h[j];if(!(Q in x))break e;x=x[Q]}h=h[h.length-1],j=x[h],v=v(j),v!=j&&v!=null&&e(x,h,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(v){var x=[],j;for(j in v)Object.prototype.hasOwnProperty.call(v,j)&&x.push([j,v[j]]);return x}});var u=u||{},d=this||self;function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function g(h,v,x){return h.call.apply(h.bind,arguments)}function y(h,v,x){return y=g,y.apply(null,arguments)}function _(h,v){var x=Array.prototype.slice.call(arguments,1);return function(){var j=x.slice();return j.push.apply(j,arguments),h.apply(this,j)}}function T(h,v){function x(){}x.prototype=v.prototype,h.Z=v.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(j,Q,re){for(var Oe=Array(arguments.length-2),Lt=2;Lt<arguments.length;Lt++)Oe[Lt-2]=arguments[Lt];return v.prototype[Q].apply(j,Oe)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function O(h){const v=h.length;if(v>0){const x=Array(v);for(let j=0;j<v;j++)x[j]=h[j];return x}return[]}function W(h,v){for(let j=1;j<arguments.length;j++){const Q=arguments[j];var x=typeof Q;if(x=x!="object"?x:Q?Array.isArray(Q)?"array":x:"null",x=="array"||x=="object"&&typeof Q.length=="number"){x=h.length||0;const re=Q.length||0;h.length=x+re;for(let Oe=0;Oe<re;Oe++)h[x+Oe]=Q[Oe]}else h.push(Q)}}class B{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function P(h){d.setTimeout(()=>{throw h},0)}function le(){var h=A;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ee{constructor(){this.h=this.g=null}add(v,x){const j=me.get();j.set(v,x),this.h?this.h.next=j:this.g=j,this.h=j}}var me=new B(()=>new je,h=>h.reset());class je{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,Ae=!1,A=new ee,S=()=>{const h=Promise.resolve(void 0);ze=()=>{h.then(C)}};function C(){for(var h;h=le();){try{h.h.call(h.g)}catch(x){P(x)}var v=me;v.j(h),v.h<100&&(v.h++,h.next=v.g,v.g=h)}Ae=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};d.addEventListener("test",x,v),d.removeEventListener("test",x,v)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function He(h,v){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,v)}T(He,M),He.prototype.init=function(h,v){const x=this.type=h.type,j=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget,v||(x=="mouseover"?v=h.fromElement:x=="mouseout"&&(v=h.toElement)),this.relatedTarget=v,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Et="closure_listenable_"+(Math.random()*1e6|0),Y=0;function Se(h,v,x,j,Q){this.listener=h,this.proxy=null,this.src=v,this.type=x,this.capture=!!j,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function Me(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function lt(h,v,x){for(const j in h)v.call(x,h[j],j,h)}function nt(h,v){for(const x in h)v.call(void 0,h[x],x,h)}function V(h){const v={};for(const x in h)v[x]=h[x];return v}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(h,v){let x,j;for(let Q=1;Q<arguments.length;Q++){j=arguments[Q];for(x in j)h[x]=j[x];for(let re=0;re<G.length;re++)x=G[re],Object.prototype.hasOwnProperty.call(j,x)&&(h[x]=j[x])}}function Ne(h){this.src=h,this.g={},this.h=0}Ne.prototype.add=function(h,v,x,j,Q){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const Oe=De(h,v,j,Q);return Oe>-1?(v=h[Oe],x||(v.fa=!1)):(v=new Se(v,this.src,re,!!j,Q),v.fa=x,h.push(v)),v};function Be(h,v){const x=v.type;if(x in h.g){var j=h.g[x],Q=Array.prototype.indexOf.call(j,v,void 0),re;(re=Q>=0)&&Array.prototype.splice.call(j,Q,1),re&&(Me(v),h.g[x].length==0&&(delete h.g[x],h.h--))}}function De(h,v,x,j){for(let Q=0;Q<h.length;++Q){const re=h[Q];if(!re.da&&re.listener==v&&re.capture==!!x&&re.ha==j)return Q}return-1}var Ze="closure_lm_"+(Math.random()*1e6|0),at={};function ft(h,v,x,j,Q){if(Array.isArray(v)){for(let re=0;re<v.length;re++)ft(h,v[re],x,j,Q);return null}return x=ht(x),h&&h[Et]?h.J(v,x,p(j)?!!j.capture:!1,Q):Bt(h,v,x,!1,j,Q)}function Bt(h,v,x,j,Q,re){if(!v)throw Error("Invalid event type");const Oe=p(Q)?!!Q.capture:!!Q;let Lt=Ct(h);if(Lt||(h[Ze]=Lt=new Ne(h)),x=Lt.add(v,x,j,Oe,re),x.proxy)return x;if(j=fn(),x.proxy=j,j.src=h,j.listener=x,h.addEventListener)U||(Q=Oe),Q===void 0&&(Q=!1),h.addEventListener(v.toString(),j,Q);else if(h.attachEvent)h.attachEvent(se(v.toString()),j);else if(h.addListener&&h.removeListener)h.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return x}function fn(){function h(x){return v.call(h.src,h.listener,x)}const v=an;return h}function kt(h,v,x,j,Q){if(Array.isArray(v))for(var re=0;re<v.length;re++)kt(h,v[re],x,j,Q);else j=p(j)?!!j.capture:!!j,x=ht(x),h&&h[Et]?(h=h.i,re=String(v).toString(),re in h.g&&(v=h.g[re],x=De(v,x,j,Q),x>-1&&(Me(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete h.g[re],h.h--)))):h&&(h=Ct(h))&&(v=h.g[v.toString()],h=-1,v&&(h=De(v,x,j,Q)),(x=h>-1?v[h]:null)&&vt(x))}function vt(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Et])Be(v.i,h);else{var x=h.type,j=h.proxy;v.removeEventListener?v.removeEventListener(x,j,h.capture):v.detachEvent?v.detachEvent(se(x),j):v.addListener&&v.removeListener&&v.removeListener(j),(x=Ct(v))?(Be(x,h),x.h==0&&(x.src=null,v[Ze]=null)):Me(h)}}}function se(h){return h in at?at[h]:at[h]="on"+h}function an(h,v){if(h.da)h=!0;else{v=new He(v,this);const x=h.listener,j=h.ha||h.src;h.fa&&vt(h),h=x.call(j,v)}return h}function Ct(h){return h=h[Ze],h instanceof Ne?h:null}var gt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ht(h){return typeof h=="function"?h:(h[gt]||(h[gt]=function(v){return h.handleEvent(v)}),h[gt])}function pe(){D.call(this),this.i=new Ne(this),this.M=this,this.G=null}T(pe,D),pe.prototype[Et]=!0,pe.prototype.removeEventListener=function(h,v,x,j){kt(this,h,v,x,j)};function xe(h,v){var x,j=h.G;if(j)for(x=[];j;j=j.G)x.push(j);if(h=h.M,j=v.type||v,typeof v=="string")v=new M(v,h);else if(v instanceof M)v.target=v.target||h;else{var Q=v;v=new M(j,h),ye(v,Q)}Q=!0;let re,Oe;if(x)for(Oe=x.length-1;Oe>=0;Oe--)re=v.g=x[Oe],Q=et(re,j,!0,v)&&Q;if(re=v.g=h,Q=et(re,j,!0,v)&&Q,Q=et(re,j,!1,v)&&Q,x)for(Oe=0;Oe<x.length;Oe++)re=v.g=x[Oe],Q=et(re,j,!1,v)&&Q}pe.prototype.N=function(){if(pe.Z.N.call(this),this.i){var h=this.i;for(const v in h.g){const x=h.g[v];for(let j=0;j<x.length;j++)Me(x[j]);delete h.g[v],h.h--}}this.G=null},pe.prototype.J=function(h,v,x,j){return this.i.add(String(h),v,!1,x,j)},pe.prototype.K=function(h,v,x,j){return this.i.add(String(h),v,!0,x,j)};function et(h,v,x,j){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();let Q=!0;for(let re=0;re<v.length;++re){const Oe=v[re];if(Oe&&!Oe.da&&Oe.capture==x){const Lt=Oe.listener,Un=Oe.ha||Oe.src;Oe.fa&&Be(h.i,Oe),Q=Lt.call(Un,j)!==!1&&Q}}return Q&&!j.defaultPrevented}function Ut(h,v){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(h,v||0)}function Je(h){h.g=Ut(()=>{h.g=null,h.i&&(h.i=!1,Je(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class ot extends D{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Je(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zt(h){D.call(this),this.h=h,this.g={}}T(Zt,D);var xt=[];function Xt(h){lt(h.g,function(v,x){this.g.hasOwnProperty(x)&&vt(v)},h),h.g={}}Zt.prototype.N=function(){Zt.Z.N.call(this),Xt(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=d.JSON.stringify,de=d.JSON.parse,Ee=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function $e(){}function Fe(){}var Pe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function We(){M.call(this,"d")}T(We,M);function Ue(){M.call(this,"c")}T(Ue,M);var Ve={},jt=null;function At(){return jt=jt||new pe}Ve.Ia="serverreachability";function Mt(h){M.call(this,Ve.Ia,h)}T(Mt,M);function zt(h){const v=At();xe(v,new Mt(v))}Ve.STAT_EVENT="statevent";function bn(h,v){M.call(this,Ve.STAT_EVENT,h),this.stat=v}T(bn,M);function St(h){const v=At();xe(v,new bn(v,h))}Ve.Ja="timingevent";function un(h,v){M.call(this,Ve.Ja,h),this.size=v}T(un,M);function An(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},v)}function mn(){this.g=!0}mn.prototype.ua=function(){this.g=!1};function On(h,v,x,j,Q,re){h.info(function(){if(h.g)if(re){var Oe="",Lt=re.split("&");for(let ln=0;ln<Lt.length;ln++){var Un=Lt[ln].split("=");if(Un.length>1){const jn=Un[0];Un=Un[1];const ar=jn.split("_");Oe=ar.length>=2&&ar[1]=="type"?Oe+(jn+"="+Un+"&"):Oe+(jn+"=redacted&")}}}else Oe=null;else Oe=re;return"XMLHTTP REQ ("+j+") [attempt "+Q+"]: "+v+`
`+x+`
`+Oe})}function Sn(h,v,x,j,Q,re,Oe){h.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+Q+"]: "+v+`
`+x+`
`+re+" "+Oe})}function In(h,v,x,j){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ss(h,x)+(j?" "+j:"")})}function os(h,v){h.info(function(){return"TIMEOUT: "+v})}mn.prototype.info=function(){};function Ss(h,v){if(!h.g)return v;if(!v)return null;try{const re=JSON.parse(v);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var x=re[h];if(!(x.length<2)){var j=x[1];if(Array.isArray(j)&&!(j.length<1)){var Q=j[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let Oe=1;Oe<j.length;Oe++)j[Oe]=""}}}}return ce(re)}catch{return v}}var vs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ds={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ms;function q(){}T(q,$e),q.prototype.g=function(){return new XMLHttpRequest},Ms=new q;function he(h){return encodeURIComponent(String(h))}function be(h){var v=1;h=h.split(":");const x=[];for(;v>0&&h.length;)x.push(h.shift()),v--;return h.length&&x.push(h.join(":")),x}function ge(h,v,x,j){this.j=h,this.i=v,this.l=x,this.S=j||1,this.V=new Zt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ue}function ue(){this.i=null,this.g="",this.h=!1}var Ke={},Tt={};function tt(h,v,x){h.M=1,h.A=qt(ke(v)),h.u=x,h.R=!0,mt(h,null)}function mt(h,v){h.F=Date.now(),ss(h),h.B=ke(h.A);var x=h.B,j=h.S;Array.isArray(j)||(j=[String(j)]),bs(x.i,"t",j),h.C=0,x=h.j.L,h.h=new ue,h.g=ku(h.j,x?v:null,!h.u),h.P>0&&(h.O=new ot(y(h.Y,h,h.g),h.P)),v=h.V,x=h.g,j=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(xt[0]=Q.toString()),Q=xt);for(let re=0;re<Q.length;re++){const Oe=ft(x,Q[re],j||v.handleEvent,!1,v.h||v);if(!Oe)break;v.g[Oe.key]=Oe}v=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,v)):(h.v="GET",h.g.ea(h.B,h.v,null,v)),zt(),On(h.i,h.v,h.B,h.l,h.S,h.u)}ge.prototype.ba=function(h){h=h.target;const v=this.O;v&&Tr(h)==3?v.j():this.Y(h)},ge.prototype.Y=function(h){try{if(h==this.g)e:{const Lt=Tr(this.g),Un=this.g.ya(),ln=this.g.ca();if(!(Lt<3)&&(Lt!=3||this.g&&(this.h.h||this.g.la()||us(this.g)))){this.K||Lt!=4||Un==7||(Un==8||ln<=0?zt(3):zt(2)),wn(this);var v=this.g.ca();this.X=v;var x=dt(this);if(this.o=v==200,Sn(this.i,this.v,this.B,this.l,this.S,Lt,v),this.o){if(this.U&&!this.L){t:{if(this.g){var j,Q=this.g;if((j=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(j)){var re=j;break t}}re=null}if(h=re)In(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,E(this,h);else{this.o=!1,this.m=3,St(12),ae(this),z(this);break e}}if(this.R){h=!0;let jn;for(;!this.K&&this.C<x.length;)if(jn=Ps(this,x),jn==Tt){Lt==4&&(this.m=4,St(14),h=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==Ke){this.m=4,St(15),In(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else In(this.i,this.l,jn,null),E(this,jn);if(en(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||x.length!=0||this.h.h||(this.m=1,St(16),h=!1),this.o=this.o&&h,!h)In(this.i,this.l,x,"[Invalid Chunked Response]"),ae(this),z(this);else if(x.length>0&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.aa&&!Oe.P&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Fo(Oe),Oe.P=!0,St(11))}}else In(this.i,this.l,x,null),E(this,x);Lt==4&&ae(this),this.o&&!this.K&&(Lt==4?xu(this.j,this):(this.o=!1,ss(this)))}else oa(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),ae(this),z(this)}}}catch{}};function dt(h){if(!en(h))return h.g.la();const v=us(h.g);if(v==="")return"";let x="";const j=v.length,Q=Tr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ae(h),z(h),"";h.h.i=new d.TextDecoder}for(let re=0;re<j;re++)h.h.h=!0,x+=h.h.i.decode(v[re],{stream:!(Q&&re==j-1)});return v.length=0,h.h.g+=x,h.C=0,h.h.g}function en(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ps(h,v){var x=h.C,j=v.indexOf(`
`,x);return j==-1?Tt:(x=Number(v.substring(x,j)),isNaN(x)?Ke:(j+=1,j+x>v.length?Tt:(v=v.slice(j,j+x),h.C=j+x,v)))}ge.prototype.cancel=function(){this.K=!0,ae(this)};function ss(h){h.T=Date.now()+h.H,Ns(h,h.H)}function Ns(h,v){if(h.D!=null)throw Error("WatchDog timer not null");h.D=An(y(h.aa,h),v)}function wn(h){h.D&&(d.clearTimeout(h.D),h.D=null)}ge.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(os(this.i,this.B),this.M!=2&&(zt(),St(17)),ae(this),this.m=2,z(this)):Ns(this,this.T-h)};function z(h){h.j.I==0||h.K||xu(h.j,h)}function ae(h){wn(h);var v=h.O;v&&typeof v.dispose=="function"&&v.dispose(),h.O=null,Xt(h.V),h.g&&(v=h.g,h.g=null,v.abort(),v.dispose())}function E(h,v){try{var x=h.j;if(x.I!=0&&(x.g==h||Ie(x.h,h))){if(!h.L&&Ie(x.h,h)&&x.I==3){try{var j=x.Ba.g.parse(v)}catch{j=null}if(Array.isArray(j)&&j.length==3){var Q=j;if(Q[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)Cl(x),Ha(x);else break e;Fi(x),St(18)}}else x.xa=Q[1],0<x.xa-x.K&&Q[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=An(y(x.Va,x),6e3));Le(x.h)<=1&&x.ta&&(x.ta=void 0)}else Hr(x,11)}else if((h.L||x.g==h)&&Cl(x),!I(v))for(Q=x.Ba.g.parse(v),v=0;v<Q.length;v++){let ln=Q[v];const jn=ln[0];if(!(jn<=x.K))if(x.K=jn,ln=ln[1],x.I==2)if(ln[0]=="c"){x.M=ln[1],x.ba=ln[2];const ar=ln[3];ar!=null&&(x.ka=ar,x.j.info("VER="+x.ka));const qr=ln[4];qr!=null&&(x.za=qr,x.j.info("SVER="+x.za));const Er=ln[5];Er!=null&&typeof Er=="number"&&Er>0&&(j=1.5*Er,x.O=j,x.j.info("backChannelRequestTimeoutMs_="+j)),j=x;const kr=h.g;if(kr){const Hi=kr.g?kr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hi){var re=j.h;re.g||Hi.indexOf("spdy")==-1&&Hi.indexOf("quic")==-1&&Hi.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Ce(re,re.h),re.h=null))}if(j.G){const Al=kr.g?kr.g.getResponseHeader("X-HTTP-Session-Id"):null;Al&&(j.wa=Al,Qe(j.J,j.G,Al))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),j=x;var Oe=h;if(j.na=Eu(j,j.L?j.ba:null,j.W),Oe.L){Pt(j.h,Oe);var Lt=Oe,Un=j.O;Un&&(Lt.H=Un),Lt.D&&(wn(Lt),ss(Lt)),j.g=Oe}else bu(j);x.i.length>0&&Fr(x)}else ln[0]!="stop"&&ln[0]!="close"||Hr(x,7);else x.I==3&&(ln[0]=="stop"||ln[0]=="close"?ln[0]=="stop"?Hr(x,7):Uo(x):ln[0]!="noop"&&x.l&&x.l.qa(ln),x.A=0)}}zt(4)}catch{}}var R=class{constructor(h,v){this.g=h,this.map=v}};function $(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function X(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Le(h){return h.h?1:h.g?h.g.size:0}function Ie(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ce(h,v){h.g?h.g.add(v):h.h=v}function Pt(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}$.prototype.cancel=function(){if(this.i=pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function pt(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const x of h.g.values())v=v.concat(x.G);return v}return O(h.i)}var H=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oe(h,v){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const j=h[x].indexOf("=");let Q,re=null;j>=0?(Q=h[x].substring(0,j),re=h[x].substring(j+1)):Q=h[x],v(Q,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function ne(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;h instanceof ne?(this.l=h.l,Re(this,h.j),this.o=h.o,this.g=h.g,Ye(this,h.u),this.h=h.h,wt(this,Vr(h.i)),this.m=h.m):h&&(v=String(h).match(H))?(this.l=!1,Re(this,v[1]||"",!0),this.o=Nn(v[2]||""),this.g=Nn(v[3]||"",!0),Ye(this,v[4]),this.h=Nn(v[5]||"",!0),wt(this,v[6]||"",!0),this.m=Nn(v[7]||"")):(this.l=!1,this.i=new Dn(null,this.l))}ne.prototype.toString=function(){const h=[];var v=this.j;v&&h.push(nn(v,Oa,!0),":");var x=this.g;return(x||v=="file")&&(h.push("//"),(v=this.o)&&h.push(nn(v,Oa,!0),"@"),h.push(he(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(nn(x,x.charAt(0)=="/"?Va:Li,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",nn(x,tn)),h.join("")},ne.prototype.resolve=function(h){const v=ke(this);let x=!!h.j;x?Re(v,h.j):x=!!h.o,x?v.o=h.o:x=!!h.g,x?v.g=h.g:x=h.u!=null;var j=h.h;if(x)Ye(v,h.u);else if(x=!!h.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var Q=v.h.lastIndexOf("/");Q!=-1&&(j=v.h.slice(0,Q+1)+j)}if(Q=j,Q==".."||Q==".")j="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){j=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const re=[];for(let Oe=0;Oe<Q.length;){const Lt=Q[Oe++];Lt=="."?j&&Oe==Q.length&&re.push(""):Lt==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),j&&Oe==Q.length&&re.push("")):(re.push(Lt),j=!0)}j=re.join("/")}else j=Q}return x?v.h=j:x=h.i.toString()!=="",x?wt(v,Vr(h.i)):x=!!h.m,x&&(v.m=h.m),v};function ke(h){return new ne(h)}function Re(h,v,x){h.j=x?Nn(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ye(h,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);h.u=v}else h.u=null}function wt(h,v,x){v instanceof Dn?(h.i=v,Ba(h.i,h.l)):(x||(v=nn(v,vr)),h.i=new Dn(v,h.l))}function Qe(h,v,x){h.i.set(v,x)}function qt(h){return Qe(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Nn(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function nn(h,v,x){return typeof h=="string"?(h=encodeURI(h).replace(v,Tn),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Oa=/[#\/\?@]/g,Li=/[#\?:]/g,Va=/[#\?]/g,vr=/[#\?@]/g,tn=/#/g;function Dn(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Mn(h){h.g||(h.g=new Map,h.h=0,h.i&&oe(h.i,function(v,x){h.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}s=Dn.prototype,s.add=function(h,v){Mn(this),this.i=null,h=xr(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(v),this.h+=1,this};function br(h,v){Mn(h),v=xr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function _r(h,v){return Mn(h),v=xr(h,v),h.g.has(v)}s.forEach=function(h,v){Mn(this),this.g.forEach(function(x,j){x.forEach(function(Q){h.call(v,Q,j,this)},this)},this)};function cs(h,v){Mn(h);let x=[];if(typeof v=="string")_r(h,v)&&(x=x.concat(h.g.get(xr(h,v))));else for(h=Array.from(h.g.values()),v=0;v<h.length;v++)x=x.concat(h[v]);return x}s.set=function(h,v){return Mn(this),this.i=null,h=xr(this,h),_r(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=cs(this,h),h.length>0?String(h[0]):v):v};function bs(h,v,x){br(h,v),x.length>0&&(h.i=null,h.g.set(xr(h,v),O(x)),h.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(let j=0;j<v.length;j++){var x=v[j];const Q=he(x);x=cs(this,x);for(let re=0;re<x.length;re++){let Oe=Q;x[re]!==""&&(Oe+="="+he(x[re])),h.push(Oe)}}return this.i=h.join("&")};function Vr(h){const v=new Dn;return v.i=h.i,h.g&&(v.g=new Map(h.g),v.h=h.h),v}function xr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Ba(h,v){v&&!h.j&&(Mn(h),h.i=null,h.g.forEach(function(x,j){const Q=j.toLowerCase();j!=Q&&(br(this,j),bs(this,Q,x))},h)),h.j=v}function js(h,v){const x=new mn;if(d.Image){const j=new Image;j.onload=_(sr,x,"TestLoadImage: loaded",!0,v,j),j.onerror=_(sr,x,"TestLoadImage: error",!1,v,j),j.onabort=_(sr,x,"TestLoadImage: abort",!1,v,j),j.ontimeout=_(sr,x,"TestLoadImage: timeout",!1,v,j),d.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=h}else v(!1)}function Oo(h,v){const x=new mn,j=new AbortController,Q=setTimeout(()=>{j.abort(),sr(x,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:j.signal}).then(re=>{clearTimeout(Q),re.ok?sr(x,"TestPingServer: ok",!0,v):sr(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Q),sr(x,"TestPingServer: error",!1,v)})}function sr(h,v,x,j,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),j(x)}catch{}}function Ua(){this.g=new Ee}function Br(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Br,$e),Br.prototype.g=function(){return new Oi(this.i,this.h)};function Oi(h,v){pe.call(this),this.H=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Oi,pe),s=Oi.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=v,this.readyState=1,wr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(v.body=h),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,za(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Nl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Nl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?za(this):wr(this),this.readyState==3&&Nl(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,za(this))},s.Na=function(h){this.g&&(this.response=h,za(this))},s.ga=function(){this.g&&za(this)};function za(h){h.readyState=4,h.l=null,h.j=null,h.B=null,wr(h)}s.setRequestHeader=function(h,v){this.A.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=v.next();return h.join(`\r
`)};function wr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function rr(h){let v="";return lt(h,function(x,j){v+=j,v+=":",v+=x,v+=`\r
`}),v}function Vi(h,v,x){e:{for(j in x){var j=!1;break e}j=!0}j||(x=rr(x),typeof h=="string"?x!=null&&he(x):Qe(h,v,x))}function pn(h){pe.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(pn,pe);var Ur=/^https?$/i,Vo=["POST","PUT"];s=pn.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,v,x,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ms.g(),this.g.onreadystatechange=k(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(re){Bi(this,re);return}if(h=x||"",x=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var Q in j)x.set(Q,j[Q]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const re of j.keys())x.set(re,j.get(re));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(x.keys()).find(re=>re.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Vo,v,void 0)>=0)||j||Q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Oe]of x)this.g.setRequestHeader(re,Oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Bi(this,re)}};function Bi(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.o=5,Bo(h),la(h)}function Bo(h){h.A||(h.A=!0,xe(h,"complete"),xe(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,xe(this,"complete"),xe(this,"abort"),la(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),la(this,!0)),pn.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ui(this):this.Xa())},s.Xa=function(){Ui(this)};function Ui(h){if(h.h&&typeof u<"u"){if(h.v&&Tr(h)==4)setTimeout(h.Ca.bind(h),0);else if(xe(h,"readystatechange"),Tr(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var j;if(j=re===0){let Oe=String(h.D).match(H)[1]||null;!Oe&&d.self&&d.self.location&&(Oe=d.self.location.protocol.slice(0,-1)),j=!Ur.test(Oe?Oe.toLowerCase():"")}x=j}if(x)xe(h,"complete"),xe(h,"success");else{h.o=6;try{var Q=Tr(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",Bo(h)}}finally{la(h)}}}}function la(h,v){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,v||xe(h,"ready");try{x.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Tr(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Tr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),de(v)}};function us(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(h){const v={};h=(h.g&&Tr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<h.length;j++){if(I(h[j]))continue;var x=be(h[j]);const Q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const re=v[Q]||[];v[Q]=re,re.push(x)}nt(v,function(j){return j.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zr(h,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||v}function Fa(h){this.za=0,this.i=[],this.j=new mn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zr("baseRetryDelayMs",5e3,h),this.Za=zr("retryDelaySeedMs",1e4,h),this.Ta=zr("forwardChannelMaxRetries",2,h),this.va=zr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new $(h&&h.concurrentRequestLimit),this.Ba=new Ua,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Fa.prototype,s.ka=8,s.I=1,s.connect=function(h,v,x,j){St(0),this.W=h,this.H=v||{},x&&j!==void 0&&(this.H.OSID=x,this.H.OAID=j),this.F=this.X,this.J=Eu(this,null,this.W),Fr(this)};function Uo(h){if(jl(h),h.I==3){var v=h.V++,x=ke(h.J);if(Qe(x,"SID",h.M),Qe(x,"RID",v),Qe(x,"TYPE","terminate"),zi(h,x),v=new ge(h,h.j,v),v.M=2,v.A=qt(ke(x)),x=!1,d.navigator&&d.navigator.sendBeacon)try{x=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&d.Image&&(new Image().src=v.A,x=!0),x||(v.g=ku(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ss(v)}Tu(h)}function Ha(h){h.g&&(Fo(h),h.g.cancel(),h.g=null)}function jl(h){Ha(h),h.v&&(d.clearTimeout(h.v),h.v=null),Cl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Fr(h){if(!X(h.h)&&!h.m){h.m=!0;var v=h.Ea;ze||S(),Ae||(ze(),Ae=!0),A.add(v,h),h.D=0}}function Rl(h,v){return Le(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=v.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=An(y(h.Ea,h,v),wu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new ge(this,this.j,h);let re=this.o;if(this.U&&(re?(re=V(re),ye(re,this.U)):re=this.U),this.u!==null||this.R||(Q.J=re,re=null),this.S)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var j=this.i[x];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(v+=j,v>4096){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=vu(this,Q,v),x=ke(this.J),Qe(x,"RID",h),Qe(x,"CVER",22),this.G&&Qe(x,"X-HTTP-Session-Id",this.G),zi(this,x),re&&(this.R?v="headers="+he(rr(re))+"&"+v:this.u&&Vi(x,this.u,re)),Ce(this.h,Q),this.Ra&&Qe(x,"TYPE","init"),this.S?(Qe(x,"$req",v),Qe(x,"SID","null"),Q.U=!0,tt(Q,x,null)):tt(Q,x,v),this.I=2}}else this.I==3&&(h?zo(this,h):this.i.length==0||X(this.h)||zo(this))};function zo(h,v){var x;v?x=v.l:x=h.V++;const j=ke(h.J);Qe(j,"SID",h.M),Qe(j,"RID",x),Qe(j,"AID",h.K),zi(h,j),h.u&&h.o&&Vi(j,h.u,h.o),x=new ge(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),v&&(h.i=v.G.concat(h.i)),v=vu(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ce(h.h,x),tt(x,j,v)}function zi(h,v){h.H&&lt(h.H,function(x,j){Qe(v,j,x)}),h.l&&lt({},function(x,j){Qe(v,j,x)})}function vu(h,v,x){x=Math.min(h.i.length,x);const j=h.l?y(h.l.Ka,h.l,h):null;e:{var Q=h.i;let Lt=-1;for(;;){const Un=["count="+x];Lt==-1?x>0?(Lt=Q[0].g,Un.push("ofs="+Lt)):Lt=0:Un.push("ofs="+Lt);let ln=!0;for(let jn=0;jn<x;jn++){var re=Q[jn].g;const ar=Q[jn].map;if(re-=Lt,re<0)Lt=Math.max(0,Q[jn].g-100),ln=!1;else try{re="req"+re+"_"||"";try{var Oe=ar instanceof Map?ar:Object.entries(ar);for(const[qr,Er]of Oe){let kr=Er;p(Er)&&(kr=ce(Er)),Un.push(re+qr+"="+encodeURIComponent(kr))}}catch(qr){throw Un.push(re+"type="+encodeURIComponent("_badmap")),qr}}catch{j&&j(ar)}}if(ln){Oe=Un.join("&");break e}}Oe=void 0}return h=h.i.splice(0,x),v.G=h,Oe}function bu(h){if(!h.g&&!h.v){h.Y=1;var v=h.Da;ze||S(),Ae||(ze(),Ae=!0),A.add(v,h),h.A=0}}function Fi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=An(y(h.Da,h),wu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,_u(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=An(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Ha(this),_u(this))};function Fo(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function _u(h){h.g=new ge(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var v=ke(h.na);Qe(v,"RID","rpc"),Qe(v,"SID",h.M),Qe(v,"AID",h.K),Qe(v,"CI",h.F?"0":"1"),!h.F&&h.ia&&Qe(v,"TO",h.ia),Qe(v,"TYPE","xmlhttp"),zi(h,v),h.u&&h.o&&Vi(v,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=qt(ke(v)),x.u=null,x.R=!0,mt(x,h)}s.Va=function(){this.C!=null&&(this.C=null,Ha(this),Fi(this),St(19))};function Cl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function xu(h,v){var x=null;if(h.g==v){Cl(h),Fo(h),h.g=null;var j=2}else if(Ie(h.h,v))x=v.G,Pt(h.h,v),j=1;else return;if(h.I!=0){if(v.o)if(j==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var Q=h.D;j=At(),xe(j,new un(j,x)),Fr(h)}else bu(h);else if(Q=v.m,Q==3||Q==0&&v.X>0||!(j==1&&Rl(h,v)||j==2&&Fi(h)))switch(x&&x.length>0&&(v=h.h,v.i=v.i.concat(x)),Q){case 1:Hr(h,5);break;case 4:Hr(h,10);break;case 3:Hr(h,6);break;default:Hr(h,2)}}}function wu(h,v){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*v}function Hr(h,v){if(h.j.info("Error code "+v),v==2){var x=y(h.bb,h),j=h.Ua;const Q=!j;j=new ne(j||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Re(j,"https"),qt(j),Q?js(j.toString(),x):Oo(j.toString(),x)}else St(2);h.I=0,h.l&&h.l.pa(v),Tu(h),jl(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Tu(h){if(h.I=0,h.ja=[],h.l){const v=pt(h.h);(v.length!=0||h.i.length!=0)&&(W(h.ja,v),W(h.ja,h.i),h.h.i.length=0,O(h.i),h.i.length=0),h.l.oa()}}function Eu(h,v,x){var j=x instanceof ne?ke(x):new ne(x);if(j.g!="")v&&(j.g=v+"."+j.g),Ye(j,j.u);else{var Q=d.location;j=Q.protocol,v=v?v+"."+Q.hostname:Q.hostname,Q=+Q.port;const re=new ne(null);j&&Re(re,j),v&&(re.g=v),Q&&Ye(re,Q),x&&(re.h=x),j=re}return x=h.G,v=h.wa,x&&v&&Qe(j,x,v),Qe(j,"VER",h.ka),zi(h,j),j}function ku(h,v,x){if(v&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Aa&&!h.ma?new pn(new Br({ab:x})):new pn(h.ma),v.Fa(h.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Su(){}s=Su.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function qa(){}qa.prototype.g=function(h,v){return new Rs(h,v)};function Rs(h,v){pe.call(this),this.g=new Fa(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(h?h["X-WebChannel-Client-Profile"]=v.sa:h={"X-WebChannel-Client-Profile":v.sa}),this.g.U=h,(h=v&&v.Qb)&&!I(h)&&(this.g.u=h),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!I(v)&&(this.g.G=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ca(this)}T(Rs,pe),Rs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rs.prototype.close=function(){Uo(this.g)},Rs.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=ce(h),h=x);v.i.push(new R(v.Ya++,h)),v.I==3&&Fr(v)},Rs.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,Rs.Z.N.call(this)};function Nu(h){We.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const x in v){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}T(Nu,We);function ju(){Ue.call(this),this.status=1}T(ju,Ue);function ca(h){this.g=h}T(ca,Su),ca.prototype.ra=function(){xe(this.g,"a")},ca.prototype.qa=function(h){xe(this.g,new Nu(h))},ca.prototype.pa=function(h){xe(this.g,new ju)},ca.prototype.oa=function(){xe(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,Rs.prototype.send=Rs.prototype.o,Rs.prototype.open=Rs.prototype.m,Rs.prototype.close=Rs.prototype.close,Yx=function(){return new qa},Kx=function(){return At()},Gx=Ve,Dp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,Xh=vs,Ds.COMPLETE="complete",Wx=Ds,Fe.EventType=Pe,Pe.OPEN="a",Pe.CLOSE="b",Pe.ERROR="c",Pe.MESSAGE="d",pe.prototype.listen=pe.prototype.J,Mc=Fe,pn.prototype.listenOnce=pn.prototype.K,pn.prototype.getLastError=pn.prototype.Ha,pn.prototype.getLastErrorCode=pn.prototype.ya,pn.prototype.getStatus=pn.prototype.ca,pn.prototype.getResponseJson=pn.prototype.La,pn.prototype.getResponseText=pn.prototype.la,pn.prototype.send=pn.prototype.ea,pn.prototype.setWithCredentials=pn.prototype.Fa,$x=pn}).apply(typeof Mh<"u"?Mh:typeof self<"u"?self:typeof window<"u"?window:{});class ws{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ws.UNAUTHENTICATED=new ws(null),ws.GOOGLE_CREDENTIALS=new ws("google-credentials-uid"),ws.FIRST_PARTY=new ws("first-party-uid"),ws.MOCK_USER=new ws("mock-user");let Io="12.8.0";function lC(s){Io=s}const yl=new cg("@firebase/firestore");function uo(){return yl.logLevel}function Ge(s,...e){if(yl.logLevel<=Gt.DEBUG){const n=e.map(wg);yl.debug(`Firestore (${Io}): ${s}`,...n)}}function Da(s,...e){if(yl.logLevel<=Gt.ERROR){const n=e.map(wg);yl.error(`Firestore (${Io}): ${s}`,...n)}}function wo(s,...e){if(yl.logLevel<=Gt.WARN){const n=e.map(wg);yl.warn(`Firestore (${Io}): ${s}`,...n)}}function wg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function _t(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,Qx(s,a,n)}function Qx(s,e,n){let a=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Da(a),new Error(a)}function cn(s,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,s||Qx(e,o,a)}function Dt(s,e){return s}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends aa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ra{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Xx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ws.UNAUTHENTICATED)))}shutdown(){}}class cC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class uC{constructor(e){this.t=e,this.currentUser=ws.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){cn(this.o===void 0,42304);let a=this.i;const o=g=>this.i!==a?(a=this.i,n(g)):Promise.resolve();let u=new Ra;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ra,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ra)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(cn(typeof a.accessToken=="string",31837,{l:a}),new Xx(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return cn(e===null||typeof e=="string",2055,{h:e}),new ws(e)}}class hC{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=ws.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class dC{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new hC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ws.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class w1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Js(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){cn(this.o===void 0,3512);const a=u=>{u.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new w1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(cn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new w1(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function mC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}class Tg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=mC(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function Kt(s,e){return s<e?-1:s>e?1:0}function Mp(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const o=s.charAt(a),u=e.charAt(a);if(o!==u)return ap(o)===ap(u)?Kt(o,u):ap(o)?1:-1}return Kt(s.length,e.length)}const pC=55296,gC=57343;function ap(s){const e=s.charCodeAt(0);return e>=pC&&e<=gC}function To(s,e,n){return s.length===e.length&&s.every(((a,o)=>n(a,e[o])))}const T1="__name__";class Qr{constructor(e,n,a){n===void 0?n=0:n>e.length&&_t(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&_t(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Qr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qr?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=Qr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Kt(e.length,n.length)}static compareSegments(e,n){const a=Qr.isNumericId(e),o=Qr.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?Qr.extractNumericId(e).compare(Qr.extractNumericId(n)):Mp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wi.fromString(e.substring(4,e.length-2))}}class xn extends Qr{construct(e,n,a){return new xn(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new qe(_e.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new xn(n)}static emptyPath(){return new xn([])}}const yC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gs extends Qr{construct(e,n,a){return new gs(e,n,a)}static isValidIdentifier(e){return yC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T1}static keyField(){return new gs([T1])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new qe(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new qe(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new qe(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(a+=p,o++):(u(),o++)}if(u(),d)throw new qe(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gs(n)}static emptyPath(){return new gs([])}}class ut{constructor(e){this.path=e}static fromPath(e){return new ut(xn.fromString(e))}static fromName(e){return new ut(xn.fromString(e).popFirst(5))}static empty(){return new ut(xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new xn(e.slice()))}}function Jx(s,e,n){if(!n)throw new qe(_e.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function vC(s,e,n,a){if(e===!0&&a===!0)throw new qe(_e.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function E1(s){if(!ut.isDocumentKey(s))throw new qe(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function k1(s){if(ut.isDocumentKey(s))throw new qe(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Zx(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Id(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_t(12329,{type:typeof s})}function Pr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new qe(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Id(s);throw new qe(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function es(s,e){const n={typeString:s};return e&&(n.value=e),n}function hu(s,e){if(!Zx(s))throw new qe(_e.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const d=s[a];if(o&&typeof d!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new qe(_e.INVALID_ARGUMENT,n);return!0}const S1=-62135596800,N1=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*N1);return new it(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S1)throw new qe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/N1}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hu(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:es("string",it._jsonSchemaVersion),seconds:es("number"),nanoseconds:es("number")};class Rt{static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new it(0,0))}static max(){return new Rt(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Qc=-1;function bC(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Rt.fromTimestamp(a===1e9?new it(n+1,0):new it(n,a));return new ki(o,ut.empty(),e)}function _C(s){return new ki(s.readTime,s.key,Qc)}class ki{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new ki(Rt.min(),ut.empty(),Qc)}static max(){return new ki(Rt.max(),ut.empty(),Qc)}}function xC(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(s.documentKey,e.documentKey),n!==0?n:Kt(s.largestBatchId,e.largestBatchId))}const wC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Do(s){if(s.code!==_e.FAILED_PRECONDITION||s.message!==wC)throw s;Ge("LocalStore","Unexpectedly lost primary lease")}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Te(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Te?n:Te.resolve(n)}catch(n){return Te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Te.reject(n)}static resolve(e){return new Te(((n,a)=>{n(e)}))}static reject(e){return new Te(((n,a)=>{a(e)}))}static waitFor(e){return new Te(((n,a)=>{let o=0,u=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++u,d&&u===o&&n()}),(g=>a(g)))})),d=!0,u===o&&n()}))}static or(e){let n=Te.resolve(!1);for(const a of e)n=n.next((o=>o?Te.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,u)=>{a.push(n.call(this,o,u))})),this.waitFor(a)}static mapArray(e,n){return new Te(((a,o)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((_=>{d[y]=_,++p,p===u&&a(d)}),(_=>o(_)))}}))}static doWhile(e,n){return new Te(((a,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):a()};u()}))}}function EC(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mo(s){return s.name==="IndexedDbTransactionError"}class Dd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dd.ce=-1;const Eg=-1;function Md(s){return s==null}function md(s){return s===0&&1/s==-1/0}function kC(s){return typeof s=="number"&&Number.isInteger(s)&&!md(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const ew="";function SC(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=j1(e)),e=NC(s.get(n),e);return j1(e)}function NC(s,e){let n=e;const a=s.length;for(let o=0;o<a;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case ew:n+="";break;default:n+=u}}return n}function j1(s){return s+ew+""}function R1(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Di(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function tw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Ln{constructor(e,n){this.comparator=e,this.root=n||ps.EMPTY}insert(e,n){return new Ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ps.BLACK,null,null))}remove(e){return new Ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ph(this.root,e,this.comparator,!0)}}class Ph{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ps{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??ps.RED,this.left=o??ps.EMPTY,this.right=u??ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new ps(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return ps.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _t(27949);return e+(this.isRed()?0:1)}}ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1;ps.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new ps(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ns{constructor(e){this.comparator=e,this.data=new Ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new C1(this.data.getIterator())}getIteratorFrom(e){return new C1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof ns)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ns(this.comparator);return n.data=e,n}}class C1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zs{constructor(e){this.fields=e,e.sort(gs.comparator)}static empty(){return new Zs([])}unionWith(e){let n=new ns(gs.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Zs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}class nw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ys{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new nw("Invalid base64 string: "+u):u}})(e);return new ys(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new ys(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ys.EMPTY_BYTE_STRING=new ys("");const jC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Si(s){if(cn(!!s,39018),typeof s=="string"){let e=0;const n=jC.exec(s);if(cn(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:qn(s.seconds),nanos:qn(s.nanos)}}function qn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ni(s){return typeof s=="string"?ys.fromBase64String(s):ys.fromUint8Array(s)}const sw="server_timestamp",rw="__type__",aw="__previous_value__",iw="__local_write_time__";function kg(s){return(s?.mapValue?.fields||{})[rw]?.stringValue===sw}function Pd(s){const e=s.mapValue.fields[aw];return kg(e)?Pd(e):e}function Xc(s){const e=Si(s.mapValue.fields[iw].timestampValue);return new it(e.seconds,e.nanos)}class RC{constructor(e,n,a,o,u,d,p,g,y,_,T){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_,this.apiKey=T}}const pd="(default)";class Jc{constructor(e,n){this.projectId=e,this.database=n||pd}static empty(){return new Jc("","")}get isDefaultDatabase(){return this.database===pd}isEqual(e){return e instanceof Jc&&e.projectId===this.projectId&&e.database===this.database}}function CC(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new qe(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jc(s.options.projectId,e)}const lw="__type__",AC="__max__",Lh={mapValue:{}},ow="__vector__",gd="value";function ji(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?kg(s)?4:DC(s)?9007199254740991:IC(s)?10:11:_t(28295,{value:s})}function sa(s,e){if(s===e)return!0;const n=ji(s);if(n!==ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Xc(s).isEqual(Xc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Si(o.timestampValue),p=Si(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Ni(o.bytesValue).isEqual(Ni(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return qn(o.geoPointValue.latitude)===qn(u.geoPointValue.latitude)&&qn(o.geoPointValue.longitude)===qn(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return qn(o.integerValue)===qn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=qn(o.doubleValue),p=qn(u.doubleValue);return d===p?md(d)===md(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return To(s.arrayValue.values||[],e.arrayValue.values||[],sa);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},p=u.mapValue.fields||{};if(R1(d)!==R1(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!sa(d[g],p[g])))return!1;return!0})(s,e);default:return _t(52216,{left:s})}}function Zc(s,e){return(s.values||[]).find((n=>sa(n,e)))!==void 0}function Eo(s,e){if(s===e)return 0;const n=ji(s),a=ji(e);if(n!==a)return Kt(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Kt(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=qn(u.integerValue||u.doubleValue),g=qn(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return A1(s.timestampValue,e.timestampValue);case 4:return A1(Xc(s),Xc(e));case 5:return Mp(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=Ni(u),g=Ni(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const _=Kt(p[y],g[y]);if(_!==0)return _}return Kt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=Kt(qn(u.latitude),qn(d.latitude));return p!==0?p:Kt(qn(u.longitude),qn(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return I1(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[gd]?.arrayValue,_=g[gd]?.arrayValue,T=Kt(y?.values?.length||0,_?.values?.length||0);return T!==0?T:I1(y,_)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Lh.mapValue&&d===Lh.mapValue)return 0;if(u===Lh.mapValue)return 1;if(d===Lh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const k=Mp(g[T],_[T]);if(k!==0)return k;const O=Eo(p[g[T]],y[_[T]]);if(O!==0)return O}return Kt(g.length,_.length)})(s.mapValue,e.mapValue);default:throw _t(23264,{he:n})}}function A1(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Kt(s,e);const n=Si(s),a=Si(e),o=Kt(n.seconds,a.seconds);return o!==0?o:Kt(n.nanos,a.nanos)}function I1(s,e){const n=s.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=Eo(n[o],a[o]);if(u)return u}return Kt(n.length,a.length)}function ko(s){return Pp(s)}function Pp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=Si(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Ni(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return ut.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=Pp(u);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of a)u?u=!1:o+=",",o+=`${d}:${Pp(n.fields[d])}`;return o+"}"})(s.mapValue):_t(61005,{value:s})}function Jh(s){switch(ji(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pd(s);return e?16+Jh(e):16;case 5:return 2*s.stringValue.length;case 6:return Ni(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+Jh(u)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return Di(a.fields,((u,d)=>{o+=u.length+Jh(d)})),o})(s.mapValue);default:throw _t(13486,{value:s})}}function D1(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Lp(s){return!!s&&"integerValue"in s}function Sg(s){return!!s&&"arrayValue"in s}function M1(s){return!!s&&"nullValue"in s}function P1(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Zh(s){return!!s&&"mapValue"in s}function IC(s){return(s?.mapValue?.fields||{})[lw]?.stringValue===ow}function Fc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Di(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=Fc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fc(s.arrayValue.values[n]);return e}return{...s}}function DC(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===AC}class Fs{constructor(e){this.value=e}static empty(){return new Fs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fc(n)}setAll(e){let n=gs.emptyPath(),a={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,a,o),a={},o=[],n=p.popLast()}d?a[p.lastSegment()]=Fc(d):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];Zh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){Di(n,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new Fs(Fc(this.value))}}function cw(s){const e=[];return Di(s.fields,((n,a)=>{const o=new gs([n]);if(Zh(a)){const u=cw(a.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Zs(e)}class Ts{constructor(e,n,a,o,u,d,p){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Ts(e,0,Rt.min(),Rt.min(),Rt.min(),Fs.empty(),0)}static newFoundDocument(e,n,a,o){return new Ts(e,1,n,Rt.min(),a,o,0)}static newNoDocument(e,n){return new Ts(e,2,n,Rt.min(),Rt.min(),Fs.empty(),0)}static newUnknownDocument(e,n){return new Ts(e,3,n,Rt.min(),Rt.min(),Fs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ts&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ts(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yd{constructor(e,n){this.position=e,this.inclusive=n}}function L1(s,e,n){let a=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?a=ut.comparator(ut.fromName(d.referenceValue),n.key):a=Eo(d,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function O1(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!sa(s.position[n],e.position[n]))return!1;return!0}class eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function MC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class uw{}class Zn extends uw{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new LC(e,n,a):n==="array-contains"?new BC(e,a):n==="in"?new UC(e,a):n==="not-in"?new zC(e,a):n==="array-contains-any"?new FC(e,a):new Zn(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new OC(e,a):new VC(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Eo(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison(Eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lr extends uw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Lr(e,n)}matches(e){return hw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hw(s){return s.op==="and"}function dw(s){return PC(s)&&hw(s)}function PC(s){for(const e of s.filters)if(e instanceof Lr)return!1;return!0}function Op(s){if(s instanceof Zn)return s.field.canonicalString()+s.op.toString()+ko(s.value);if(dw(s))return s.filters.map((e=>Op(e))).join(",");{const e=s.filters.map((n=>Op(n))).join(",");return`${s.op}(${e})`}}function fw(s,e){return s instanceof Zn?(function(a,o){return o instanceof Zn&&a.op===o.op&&a.field.isEqual(o.field)&&sa(a.value,o.value)})(s,e):s instanceof Lr?(function(a,o){return o instanceof Lr&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,d,p)=>u&&fw(d,o.filters[p])),!0):!1})(s,e):void _t(19439)}function mw(s){return s instanceof Zn?(function(n){return`${n.field.canonicalString()} ${n.op} ${ko(n.value)}`})(s):s instanceof Lr?(function(n){return n.op.toString()+" {"+n.getFilters().map(mw).join(" ,")+"}"})(s):"Filter"}class LC extends Zn{constructor(e,n,a){super(e,n,a),this.key=ut.fromName(a.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class OC extends Zn{constructor(e,n){super(e,"in",n),this.keys=pw("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class VC extends Zn{constructor(e,n){super(e,"not-in",n),this.keys=pw("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function pw(s,e){return(e.arrayValue?.values||[]).map((n=>ut.fromName(n.referenceValue)))}class BC extends Zn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sg(n)&&Zc(n.arrayValue,this.value)}}class UC extends Zn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Zc(this.value.arrayValue,n)}}class zC extends Zn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Zc(this.value.arrayValue,n)}}class FC extends Zn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>Zc(this.value.arrayValue,a)))}}class HC{constructor(e,n=null,a=[],o=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function V1(s,e=null,n=[],a=[],o=null,u=null,d=null){return new HC(s,e,n,a,o,u,d)}function Ng(s){const e=Dt(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>Op(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),Md(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>ko(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>ko(a))).join(",")),e.Te=n}return e.Te}function jg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!MC(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!fw(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!O1(s.startAt,e.startAt)&&O1(s.endAt,e.endAt)}function Vp(s){return ut.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Po{constructor(e,n=null,a=[],o=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function qC(s,e,n,a,o,u,d,p){return new Po(s,e,n,a,o,u,d,p)}function Rg(s){return new Po(s)}function B1(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function $C(s){return ut.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function gw(s){return s.collectionGroup!==null}function Hc(s){const e=Dt(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new ns(gs.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new eu(u,a))})),n.has(gs.keyField().canonicalString())||e.Ie.push(new eu(gs.keyField(),a))}return e.Ie}function ea(s){const e=Dt(s);return e.Ee||(e.Ee=WC(e,Hc(s))),e.Ee}function WC(s,e){if(s.limitType==="F")return V1(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new eu(o.field,u)}));const n=s.endAt?new yd(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new yd(s.startAt.position,s.startAt.inclusive):null;return V1(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function Bp(s,e){const n=s.filters.concat([e]);return new Po(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function GC(s,e){const n=s.explicitOrderBy.concat([e]);return new Po(s.path,s.collectionGroup,n,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}function Up(s,e,n){return new Po(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Ld(s,e){return jg(ea(s),ea(e))&&s.limitType===e.limitType}function yw(s){return`${Ng(ea(s))}|lt:${s.limitType}`}function ho(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>mw(o))).join(", ")}]`),Md(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>ko(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>ko(o))).join(",")),`Target(${a})`})(ea(s))}; limitType=${s.limitType})`}function Od(s,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):ut.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(s,e)&&(function(a,o){for(const u of Hc(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(d,p,g){const y=L1(d,p,g);return d.inclusive?y<=0:y<0})(a.startAt,Hc(a),o)||a.endAt&&!(function(d,p,g){const y=L1(d,p,g);return d.inclusive?y>=0:y>0})(a.endAt,Hc(a),o))})(s,e)}function KC(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function vw(s){return(e,n)=>{let a=!1;for(const o of Hc(s)){const u=YC(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function YC(s,e,n){const a=s.field.isKeyField()?ut.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Eo(g,y):_t(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return _t(19790,{direction:s.dir})}}class wl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Di(this.inner,((n,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return tw(this.inner)}size(){return this.innerSize}}const QC=new Ln(ut.comparator);function Ma(){return QC}const bw=new Ln(ut.comparator);function Pc(...s){let e=bw;for(const n of s)e=e.insert(n.key,n);return e}function _w(s){let e=bw;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function cl(){return qc()}function xw(){return qc()}function qc(){return new wl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const XC=new Ln(ut.comparator),JC=new ns(ut.comparator);function Yt(...s){let e=JC;for(const n of s)e=e.add(n);return e}const ZC=new ns(Kt);function eA(){return ZC}function Cg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:md(e)?"-0":e}}function ww(s){return{integerValue:""+s}}function tA(s,e){return kC(e)?ww(e):Cg(s,e)}class Vd{constructor(){this._=void 0}}function nA(s,e,n){return s instanceof vd?(function(o,u){const d={fields:{[rw]:{stringValue:sw},[iw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&kg(u)&&(u=Pd(u)),u&&(d.fields[aw]=u),{mapValue:d}})(n,e):s instanceof tu?Ew(s,e):s instanceof nu?kw(s,e):(function(o,u){const d=Tw(o,u),p=U1(d)+U1(o.Ae);return Lp(d)&&Lp(o.Ae)?ww(p):Cg(o.serializer,p)})(s,e)}function sA(s,e,n){return s instanceof tu?Ew(s,e):s instanceof nu?kw(s,e):n}function Tw(s,e){return s instanceof bd?(function(a){return Lp(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class vd extends Vd{}class tu extends Vd{constructor(e){super(),this.elements=e}}function Ew(s,e){const n=Sw(e);for(const a of s.elements)n.some((o=>sa(o,a)))||n.push(a);return{arrayValue:{values:n}}}class nu extends Vd{constructor(e){super(),this.elements=e}}function kw(s,e){let n=Sw(e);for(const a of s.elements)n=n.filter((o=>!sa(o,a)));return{arrayValue:{values:n}}}class bd extends Vd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function U1(s){return qn(s.integerValue||s.doubleValue)}function Sw(s){return Sg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function rA(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof tu&&o instanceof tu||a instanceof nu&&o instanceof nu?To(a.elements,o.elements,sa):a instanceof bd&&o instanceof bd?sa(a.Ae,o.Ae):a instanceof vd&&o instanceof vd})(s.transform,e.transform)}class aA{constructor(e,n){this.version=e,this.transformResults=n}}class pr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ed(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Bd{}function Nw(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Ag(s.key,pr.none()):new du(s.key,s.data,pr.none());{const n=s.data,a=Fs.empty();let o=new ns(gs.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?a.delete(u):a.set(u,d),o=o.add(u)}return new Mi(s.key,a,new Zs(o.toArray()),pr.none())}}function iA(s,e,n){s instanceof du?(function(o,u,d){const p=o.value.clone(),g=F1(o.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Mi?(function(o,u,d){if(!ed(o.precondition,u))return void u.convertToUnknownDocument(d.version);const p=F1(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(jw(o)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function $c(s,e,n,a){return s instanceof du?(function(u,d,p,g){if(!ed(u.precondition,d))return p;const y=u.value.clone(),_=H1(u.fieldTransforms,g,d);return y.setAll(_),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,a):s instanceof Mi?(function(u,d,p,g){if(!ed(u.precondition,d))return p;const y=H1(u.fieldTransforms,g,d),_=d.data;return _.setAll(jw(u)),_.setAll(y),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(s,e,n,a):(function(u,d,p){return ed(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function lA(s,e){let n=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),u=Tw(a.transform,o||null);u!=null&&(n===null&&(n=Fs.empty()),n.set(a.field,u))}return n||null}function z1(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&To(a,o,((u,d)=>rA(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class du extends Bd{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Mi extends Bd{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function jw(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function F1(s,e,n){const a=new Map;cn(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const u=s[o],d=u.transform,p=e.data.field(u.field);a.set(u.field,sA(d,p,n[o]))}return a}function H1(s,e,n){const a=new Map;for(const o of s){const u=o.transform,d=n.data.field(o.field);a.set(o.field,nA(u,d,e))}return a}class Ag extends Bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oA extends Bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cA{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&iA(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=$c(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=$c(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=xw();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(o.key)?null:p;const g=Nw(d,p);g!==null&&a.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Rt.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Yt())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,((n,a)=>z1(n,a)))&&To(this.baseMutations,e.baseMutations,((n,a)=>z1(n,a)))}}class Ig{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){cn(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return XC})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,a[d].version);return new Ig(e,n,a,o)}}class uA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class hA{constructor(e,n){this.count=e,this.unchangedNames=n}}var Jn,Jt;function dA(s){switch(s){case _e.OK:return _t(64938);case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0;default:return _t(15467,{code:s})}}function Rw(s){if(s===void 0)return Da("GRPC error has no .code"),_e.UNKNOWN;switch(s){case Jn.OK:return _e.OK;case Jn.CANCELLED:return _e.CANCELLED;case Jn.UNKNOWN:return _e.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return _e.INTERNAL;case Jn.UNAVAILABLE:return _e.UNAVAILABLE;case Jn.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Jn.NOT_FOUND:return _e.NOT_FOUND;case Jn.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Jn.ABORTED:return _e.ABORTED;case Jn.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Jn.DATA_LOSS:return _e.DATA_LOSS;default:return _t(39323,{code:s})}}(Jt=Jn||(Jn={}))[Jt.OK=0]="OK",Jt[Jt.CANCELLED=1]="CANCELLED",Jt[Jt.UNKNOWN=2]="UNKNOWN",Jt[Jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jt[Jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jt[Jt.NOT_FOUND=5]="NOT_FOUND",Jt[Jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jt[Jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jt[Jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jt[Jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jt[Jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jt[Jt.ABORTED=10]="ABORTED",Jt[Jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jt[Jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jt[Jt.INTERNAL=13]="INTERNAL",Jt[Jt.UNAVAILABLE=14]="UNAVAILABLE",Jt[Jt.DATA_LOSS=15]="DATA_LOSS";function fA(){return new TextEncoder}const mA=new wi([4294967295,4294967295],0);function q1(s){const e=fA().encode(s),n=new qx;return n.update(e),new Uint8Array(n.digest())}function $1(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new wi([n,a],0),new wi([o,u],0)]}class Dg{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Lc(`Invalid padding: ${n}`);if(a<0)throw new Lc(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=wi.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(wi.fromNumber(a)));return o.compare(mA)===1&&(o=new wi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=q1(e),[a,o]=$1(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,o,u);if(!this.we(d))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Dg(u,o,n);return a.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=q1(e),[a,o]=$1(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(a,o,u);this.be(d)}}be(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ud{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new Ud(Rt.min(),o,new Ln(Kt),Ma(),Yt())}}class fu{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new fu(a,n,Yt(),Yt(),Yt())}}class td{constructor(e,n,a,o){this.Se=e,this.removedTargetIds=n,this.key=a,this.De=o}}class Cw{constructor(e,n){this.targetId=e,this.Ce=n}}class Aw{constructor(e,n,a=ys.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class W1{constructor(){this.ve=0,this.Fe=G1(),this.Me=ys.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Yt(),n=Yt(),a=Yt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:_t(38017,{changeType:u})}})),new fu(this.Me,this.xe,e,n,a)}Ke(){this.Oe=!1,this.Fe=G1()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,cn(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class pA{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ma(),this.He=Oh(),this.Je=Oh(),this.Ze=new Ln(Kt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:_t(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Vp(u))if(a===0){const d=new ut(u.path);this.et(n,d,Ts.newNoDocument(d,Rt.min()))}else cn(a===1,20013,{expectedCount:a});else{const d=this._t(n);if(d!==a){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let d,p;try{d=Ni(a).toUint8Array()}catch(g){if(g instanceof nw)return wo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Dg(d,o,u)}catch(g){return wo(g instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&Vp(p.target)){const g=new ut(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Ts.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let a=Yt();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(a=a.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new Ud(e,n,this.Ze,this.je,a);return this.je=Ma(),this.He=Oh(),this.Je=Oh(),this.Ze=new Ln(Kt),o}Ye(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,a),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new W1,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ns(Kt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ns(Kt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new W1),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Oh(){return new Ln(ut.comparator)}function G1(){return new Ln(ut.comparator)}const gA={asc:"ASCENDING",desc:"DESCENDING"},yA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vA={and:"AND",or:"OR"};class bA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zp(s,e){return s.useProto3Json||Md(e)?e:{value:e}}function _d(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Iw(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function _A(s,e){return _d(s,e.toTimestamp())}function ta(s){return cn(!!s,49232),Rt.fromTimestamp((function(n){const a=Si(n);return new it(a.seconds,a.nanos)})(s))}function Mg(s,e){return Fp(s,e).canonicalString()}function Fp(s,e){const n=(function(o){return new xn(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function Dw(s){const e=xn.fromString(s);return cn(Vw(e),10190,{key:e.toString()}),e}function Hp(s,e){return Mg(s.databaseId,e.path)}function ip(s,e){const n=Dw(e);if(n.get(1)!==s.databaseId.projectId)throw new qe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new qe(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ut(Pw(n))}function Mw(s,e){return Mg(s.databaseId,e)}function xA(s){const e=Dw(s);return e.length===4?xn.emptyPath():Pw(e)}function qp(s){return new xn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Pw(s){return cn(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function K1(s,e,n){return{name:Hp(s,e),fields:n.value.mapValue.fields}}function wA(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:_t(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,_){return y.useProto3Json?(cn(_===void 0||typeof _=="string",58123),ys.fromBase64String(_||"")):(cn(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),ys.fromUint8Array(_||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const _=y.code===void 0?_e.UNKNOWN:Rw(y.code);return new qe(_,y.message||"")})(d);n=new Aw(a,o,u,p||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=ip(s,a.document.name),u=ta(a.document.updateTime),d=a.document.createTime?ta(a.document.createTime):Rt.min(),p=new Fs({mapValue:{fields:a.document.fields}}),g=Ts.newFoundDocument(o,u,d,p),y=a.targetIds||[],_=a.removedTargetIds||[];n=new td(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=ip(s,a.document),u=a.readTime?ta(a.readTime):Rt.min(),d=Ts.newNoDocument(o,u),p=a.removedTargetIds||[];n=new td([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=ip(s,a.document),u=a.removedTargetIds||[];n=new td([],u,o,null)}else{if(!("filter"in e))return _t(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,d=new hA(o,u),p=a.targetId;n=new Cw(p,d)}}return n}function TA(s,e){let n;if(e instanceof du)n={update:K1(s,e.key,e.value)};else if(e instanceof Ag)n={delete:Hp(s,e.key)};else if(e instanceof Mi)n={update:K1(s,e.key,e.data),updateMask:IA(e.fieldMask)};else{if(!(e instanceof oA))return _t(16599,{dt:e.type});n={verify:Hp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,d){const p=d.transform;if(p instanceof vd)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof tu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof nu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof bd)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw _t(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:_A(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:_t(27497)})(s,e.precondition)),n}function EA(s,e){return s&&s.length>0?(cn(e!==void 0,14353),s.map((n=>(function(o,u){let d=o.updateTime?ta(o.updateTime):ta(u);return d.isEqual(Rt.min())&&(d=ta(u)),new aA(d,o.transformResults||[])})(n,e)))):[]}function kA(s,e){return{documents:[Mw(s,e.path)]}}function SA(s,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=Mw(s,o);const u=(function(y){if(y.length!==0)return Ow(Lr.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((_=>(function(k){return{field:fo(k.field),direction:RA(k.dir)}})(_)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=zp(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function NA(s){let e=xA(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){cn(a===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(T){const k=Lw(T);return k instanceof Lr&&dw(k)?k.getFilters():[k]})(n.where));let d=[];n.orderBy&&(d=(function(T){return T.map((k=>(function(W){return new eu(mo(W.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(k)))})(n.orderBy));let p=null;n.limit&&(p=(function(T){let k;return k=typeof T=="object"?T.value:T,Md(k)?null:k})(n.limit));let g=null;n.startAt&&(g=(function(T){const k=!!T.before,O=T.values||[];return new yd(O,k)})(n.startAt));let y=null;return n.endAt&&(y=(function(T){const k=!T.before,O=T.values||[];return new yd(O,k)})(n.endAt)),qC(e,o,d,u,p,"F",g,y)}function jA(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Lw(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=mo(n.unaryFilter.field);return Zn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=mo(n.unaryFilter.field);return Zn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=mo(n.unaryFilter.field);return Zn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=mo(n.unaryFilter.field);return Zn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Zn.create(mo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Lr.create(n.compositeFilter.filters.map((a=>Lw(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _t(1026)}})(n.compositeFilter.op))})(s):_t(30097,{filter:s})}function RA(s){return gA[s]}function CA(s){return yA[s]}function AA(s){return vA[s]}function fo(s){return{fieldPath:s.canonicalString()}}function mo(s){return gs.fromServerFormat(s.fieldPath)}function Ow(s){return s instanceof Zn?(function(n){if(n.op==="=="){if(P1(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(M1(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(P1(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(M1(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:CA(n.op),value:n.value}}})(s):s instanceof Lr?(function(n){const a=n.getFilters().map((o=>Ow(o)));return a.length===1?a[0]:{compositeFilter:{op:AA(n.op),filters:a}}})(s):_t(54877,{filter:s})}function IA(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Vw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function Bw(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class bi{constructor(e,n,a,o,u=Rt.min(),d=Rt.min(),p=ys.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class DA{constructor(e){this.yt=e}}function MA(s){const e=NA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Up(e,e.limit,"L"):e}class PA{constructor(){this.Sn=new LA}addToCollectionParentIndex(e,n){return this.Sn.add(n),Te.resolve()}getCollectionParents(e,n){return Te.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Te.resolve()}deleteFieldIndex(e,n){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,n){return Te.resolve()}getDocumentsMatchingTarget(e,n){return Te.resolve(null)}getIndexType(e,n){return Te.resolve(0)}getFieldIndexes(e,n){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,n){return Te.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,n){return Te.resolve(ki.min())}updateCollectionGroup(e,n,a){return Te.resolve()}updateIndexEntries(e,n){return Te.resolve()}}class LA{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new ns(xn.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new ns(xn.comparator)).toArray()}}const Y1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uw=41943040;class zs{static withCacheSize(e){return new zs(e,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}zs.DEFAULT_COLLECTION_PERCENTILE=10,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zs.DEFAULT=new zs(Uw,zs.DEFAULT_COLLECTION_PERCENTILE,zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zs.DISABLED=new zs(-1,0,0);class So{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new So(0)}static ar(){return new So(-1)}}const Q1="LruGarbageCollector",OA=1048576;function X1([s,e],[n,a]){const o=Kt(s,n);return o===0?Kt(e,a):o}class VA{constructor(e){this.Pr=e,this.buffer=new ns(X1),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();X1(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BA{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ge(Q1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mo(n)?Ge(Q1,"Ignoring IndexedDB error during garbage collection: ",n):await Do(n)}await this.Ar(3e5)}))}}class UA{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return Te.resolve(Dd.ce);const a=new VA(n);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(Y1)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y1):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let a,o,u,d,p,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(a=T,p=Date.now(),this.removeTargets(e,a,n)))).next((T=>(u=T,g=Date.now(),this.removeOrphanedDocuments(e,a)))).next((T=>(y=Date.now(),uo()<=Gt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${T} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function zA(s,e){return new UA(s,e)}class FA{constructor(){this.changes=new wl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ts.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?Te.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class qA{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&$c(a.mutation,o,Zs.empty(),it.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,Yt()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=Yt()){const o=cl();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((u=>{let d=Pc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const a=cl();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,Yt())))}populateOverlays(e,n,a){const o=[];return a.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,a,o){let u=Ma();const d=qc(),p=(function(){return qc()})();return n.forEach(((g,y)=>{const _=a.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Mi)?u=u.insert(y.key,y):_!==void 0?(d.set(y.key,_.mutation.getFieldMask()),$c(_.mutation,y,_.mutation.getFieldMask(),it.now())):d.set(y.key,Zs.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,_)=>d.set(y,_))),n.forEach(((y,_)=>p.set(y,new HA(_,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const a=qc();let o=new Ln(((d,p)=>d-p)),u=Yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let _=a.get(g)||Zs.empty();_=p.applyToLocalView(y,_),a.set(g,_);const T=(o.get(p.batchId)||Yt()).add(g);o=o.insert(p.batchId,T)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,_=g.value,T=xw();_.forEach((k=>{if(!u.has(k)){const O=Nw(n.get(k),a.get(k));O!==null&&T.set(k,O),u=u.add(k)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,T))}return Te.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return $C(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):Te.resolve(cl());let p=Qc,g=u;return d.next((y=>Te.forEach(y,((_,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),u.get(_)?Te.resolve():this.remoteDocumentCache.getEntry(e,_).next((k=>{g=g.insert(_,k)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Yt()))).next((_=>({batchId:p,changes:_w(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next((a=>{let o=Pc();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let d=Pc();return this.indexManager.getCollectionParents(e,u).next((p=>Te.forEach(p,(g=>{const y=(function(T,k){return new Po(k,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,a,o).next((_=>{_.forEach(((T,k)=>{d=d.insert(T,k)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o)))).next((d=>{u.forEach(((g,y)=>{const _=y.getKey();d.get(_)===null&&(d=d.insert(_,Ts.newInvalidDocument(_)))}));let p=Pc();return d.forEach(((g,y)=>{const _=u.get(g);_!==void 0&&$c(_.mutation,y,Zs.empty(),it.now()),Od(n,y)&&(p=p.insert(g,y))})),p}))}}class $A{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Te.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ta(o.createTime)}})(n)),Te.resolve()}getNamedQuery(e,n){return Te.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:MA(o.bundledQuery),readTime:ta(o.readTime)}})(n)),Te.resolve()}}class WA{constructor(){this.overlays=new Ln(ut.comparator),this.Lr=new Map}getOverlay(e,n){return Te.resolve(this.overlays.get(n))}getOverlays(e,n){const a=cl();return Te.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,u)=>{this.bt(e,n,u)})),Te.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),Te.resolve()}getOverlaysForCollection(e,n,a){const o=cl(),u=n.length+1,d=new ut(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>a&&o.set(g.getKey(),g)}return Te.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new Ln(((y,_)=>y-_));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>a){let _=u.get(y.largestBatchId);_===null&&(_=cl(),u=u.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const p=cl(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,_)=>p.set(y,_))),!(p.size()>=o)););return Te.resolve(p)}bt(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new uA(n,a));let u=this.Lr.get(n);u===void 0&&(u=Yt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(a.key))}}class GA{constructor(){this.sessionToken=ys.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Te.resolve()}}class Pg{constructor(){this.kr=new ns(as.Kr),this.qr=new ns(as.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const a=new as(e,n);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Wr(new as(e,n))}Qr(e,n){e.forEach((a=>this.removeReference(a,n)))}Gr(e){const n=new ut(new xn([])),a=new as(n,e),o=new as(n,e+1),u=[];return this.qr.forEachInRange([a,o],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ut(new xn([])),a=new as(n,e),o=new as(n,e+1);let u=Yt();return this.qr.forEachInRange([a,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new as(e,0),a=this.kr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class as{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ut.comparator(e.key,n.key)||Kt(e.Hr,n.Hr)}static Ur(e,n){return Kt(e.Hr,n.Hr)||ut.comparator(e.key,n.key)}}class KA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ns(as.Kr)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new cA(u,n,a,o);this.mutationQueue.push(d);for(const p of o)this.Jr=this.Jr.add(new as(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Te.resolve(d)}lookupMutationBatch(e,n){return Te.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.Xr(a),u=o<0?0:o;return Te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?Eg:this.Yn-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new as(n,0),o=new as(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,o],(d=>{const p=this.Zr(d.Hr);u.push(p)})),Te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new ns(Kt);return n.forEach((o=>{const u=new as(o,0),d=new as(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{a=a.add(p.Hr)}))})),Te.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;ut.isDocumentKey(u)||(u=u.child(""));const d=new as(new ut(u),0);let p=new ns(Kt);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)}),d),Te.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){cn(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return Te.forEach(n.mutations,(o=>{const u=new as(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,n){const a=new as(n,0),o=this.Jr.firstAfterOrEqual(a);return Te.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class YA{constructor(e){this.ti=e,this.docs=(function(){return new Ln(ut.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,d=this.ti(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return Te.resolve(a?a.document.mutableCopy():Ts.newInvalidDocument(n))}getEntries(e,n){let a=Ma();return n.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():Ts.newInvalidDocument(o))})),Te.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=Ma();const d=n.path,p=new ut(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||xC(_C(_),a)<=0||(o.has(_.key)||Od(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return Te.resolve(u)}getAllFromCollectionGroup(e,n,a,o){_t(9500)}ni(e,n){return Te.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new QA(this)}getSize(e){return Te.resolve(this.size)}}class QA extends FA{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),Te.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class XA{constructor(e){this.persistence=e,this.ri=new wl((n=>Ng(n)),jg),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.ii=0,this.si=new Pg,this.targetCount=0,this.oi=So._r()}forEachTarget(e,n){return this.ri.forEach(((a,o)=>n(o))),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.ii&&(this.ii=n),Te.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new So(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Te.resolve()}updateTargetData(e,n){return this.lr(n),Te.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&a.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),Te.waitFor(u).next((()=>o))}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,n){const a=this.ri.get(n)||null;return Te.resolve(a)}addMatchingKeys(e,n,a){return this.si.$r(n,a),Te.resolve()}removeMatchingKeys(e,n,a){this.si.Qr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),Te.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Te.resolve()}getMatchingKeysForTargetId(e,n){const a=this.si.jr(n);return Te.resolve(a)}containsKey(e,n){return Te.resolve(this.si.containsKey(n))}}class zw{constructor(e,n){this._i={},this.overlays={},this.ai=new Dd(0),this.ui=!1,this.ui=!0,this.ci=new GA,this.referenceDelegate=e(this),this.li=new XA(this),this.indexManager=new PA,this.remoteDocumentCache=(function(o){return new YA(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new DA(n),this.Pi=new $A(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this._i[e.toKey()];return a||(a=new KA(n,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,a){Ge("MemoryPersistence","Starting transaction:",e);const o=new JA(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return Te.or(Object.values(this._i).map((a=>()=>a.containsKey(e,n))))}}class JA extends TC{constructor(e){super(),this.currentSequenceNumber=e}}class Lg{constructor(e){this.persistence=e,this.Ri=new Pg,this.Ai=null}static Vi(e){return new Lg(e)}get di(){if(this.Ai)return this.Ai;throw _t(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.di.delete(a.toString()),Te.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.di.add(a.toString()),Te.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Te.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.di,(a=>{const o=ut.fromPath(a);return this.mi(e,o).next((u=>{u||n.removeEntry(o,Rt.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((a=>{a?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Te.or([()=>Te.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class xd{constructor(e,n){this.persistence=e,this.fi=new wl((a=>SC(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=zA(this,n)}static Vi(e,n){return new xd(e,n)}Ti(){}Ii(e){return Te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}pr(e){let n=0;return this.mr(e,(a=>{n++})).next((()=>n))}mr(e,n){return Te.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((u=>u?Te.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(a++,u.removeEntry(d,Rt.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Te.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),Te.resolve()}removeReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Te.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jh(e.data.value)),n}wr(e,n,a){return Te.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return Te.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Og{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Ts=a,this.Is=o}static Es(e,n){let a=Yt(),o=Yt();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Og(e,n.fromCache,a,o)}}class ZA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class e4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return NS()?8:EC(ks())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,o,a).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new ZA;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,a,o){return a.documentReadCount<this.Vs?(uo()<=Gt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Te.resolve()):(uo()<=Gt.DEBUG&&Ge("QueryEngine","Query:",ho(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(uo()<=Gt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ea(n))):Te.resolve())}gs(e,n){if(B1(n))return Te.resolve(null);let a=ea(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Up(n,null,"F"),a=ea(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const d=Yt(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,a).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,d,g.readTime)?this.gs(e,Up(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,a,o){return B1(n)||o.isEqual(Rt.min())?Te.resolve(null):this.fs.getDocuments(e,a).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,a,o)?Te.resolve(null):(uo()<=Gt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ho(n)),this.Ds(e,d,n,bC(o,Qc)).next((p=>p)))}))}bs(e,n){let a=new ns(vw(e));return n.forEach(((o,u)=>{Od(e,u)&&(a=a.add(u))})),a}Ss(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,a){return uo()<=Gt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",ho(n)),this.fs.getDocumentsMatchingQuery(e,n,ki.min(),a)}Ds(e,n,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Vg="LocalStore",t4=3e8;class n4{constructor(e,n,a,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Ln(Kt),this.Fs=new wl((u=>Ng(u)),jg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function s4(s,e,n,a){return new n4(s,e,n,a)}async function Fw(s,e){const n=Dt(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const d=[],p=[];let g=Yt();for(const y of o){d.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of u){p.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(a,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function r4(s,e){const n=Dt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,_){const T=y.batch,k=T.keys();let O=Te.resolve();return k.forEach((W=>{O=O.next((()=>_.getEntry(g,W))).next((B=>{const P=y.docVersions.get(W);cn(P!==null,48541),B.version.compareTo(P)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),_.addEntry(B)))}))})),O.next((()=>p.mutationQueue.removeMutationBatch(g,T)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(p){let g=Yt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function Hw(s){const e=Dt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function a4(s,e){const n=Dt(s),a=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((_,T)=>{const k=o.get(T);if(!k)return;p.push(n.li.removeMatchingKeys(u,_.removedDocuments,T).next((()=>n.li.addMatchingKeys(u,_.addedDocuments,T))));let O=k.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(ys.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,a)),o=o.insert(T,O),(function(B,P,le){return B.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=t4?!0:le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0})(k,O,_)&&p.push(n.li.updateTargetData(u,O))}));let g=Ma(),y=Yt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),p.push(i4(u,d,e.documentUpdates).next((_=>{g=_.Bs,y=_.Ls}))),!a.isEqual(Rt.min())){const _=n.li.getLastRemoteSnapshotVersion(u).next((T=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));p.push(_)}return Te.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=o,u)))}function i4(s,e,n){let a=Yt(),o=Yt();return n.forEach((u=>a=a.add(u))),e.getEntries(s,a).next((u=>{let d=Ma();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Rt.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):Ge(Vg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function l4(s,e){const n=Dt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Eg),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function o4(s,e){const n=Dt(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.li.getTargetData(a,e).next((u=>u?(o=u,Te.resolve(o)):n.li.allocateTargetId(a).next((d=>(o=new bi(e,d,"TargetPurposeListen",a.currentSequenceNumber),n.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(a.targetId,a),n.Fs.set(e,a.targetId)),a}))}async function $p(s,e,n){const a=Dt(s),o=a.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Mo(d))throw d;Ge(Vg,`Failed to update sequence numbers for target ${e}: ${d}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function J1(s,e,n){const a=Dt(s);let o=Rt.min(),u=Yt();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,_){const T=Dt(g),k=T.Fs.get(_);return k!==void 0?Te.resolve(T.vs.get(k)):T.li.getTargetData(y,_)})(a,d,ea(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>a.Cs.getDocumentsMatchingQuery(d,e,n?o:Rt.min(),n?u:Yt()))).next((p=>(c4(a,KC(e),p),{documents:p,ks:u})))))}function c4(s,e,n){let a=s.Ms.get(e)||Rt.min();n.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),s.Ms.set(e,a)}class Z1{constructor(){this.activeTargetIds=eA()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class u4{constructor(){this.vo=new Z1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,a){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Z1,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class h4{Mo(e){}shutdown(){}}const e_="ConnectivityMonitor";class t_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ge(e_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ge(e_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Vh=null;function Wp(){return Vh===null?Vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vh++,"0x"+Vh.toString(16)}const lp="RestConnection",d4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class f4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===pd?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,n,a,o,u){const d=Wp(),p=this.Qo(e,n.toUriEncodedString());Ge(lp,`Sending RPC '${e}' ${d}:`,p,a);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:y}=new URL(p),_=Ai(y);return this.zo(e,p,g,a,_).then((T=>(Ge(lp,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw wo(lp,`RPC '${e}' ${d} failed with error: `,T,"url: ",p,"request:",a),T}))}jo(e,n,a,o,u,d){return this.Wo(e,n,a,o,u)}Go(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Io})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const a=d4[e];let o=`${this.qo}/v1/${n}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class m4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const xs="WebChannelConnection",jc=(s,e,n)=>{s.listen(e,(a=>{try{n(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class bo extends f4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!bo.c_){const e=Kx();jc(e,Gx.STAT_EVENT,(n=>{n.stat===Dp.PROXY?Ge(xs,"STAT_EVENT: detected buffering proxy"):n.stat===Dp.NOPROXY&&Ge(xs,"STAT_EVENT: detected no buffering proxy")})),bo.c_=!0}}zo(e,n,a,o,u){const d=Wp();return new Promise(((p,g)=>{const y=new $x;y.setWithCredentials(!0),y.listenOnce(Wx.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Xh.NO_ERROR:const T=y.getResponseJson();Ge(xs,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),p(T);break;case Xh.TIMEOUT:Ge(xs,`RPC '${e}' ${d} timed out`),g(new qe(_e.DEADLINE_EXCEEDED,"Request time out"));break;case Xh.HTTP_ERROR:const k=y.getStatus();if(Ge(xs,`RPC '${e}' ${d} failed with status:`,k,"response text:",y.getResponseText()),k>0){let O=y.getResponseJson();Array.isArray(O)&&(O=O[0]);const W=O?.error;if(W&&W.status&&W.message){const B=(function(le){const ee=le.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(ee)>=0?ee:_e.UNKNOWN})(W.status);g(new qe(B,W.message))}else g(new qe(_e.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new qe(_e.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Ge(xs,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(o);Ge(xs,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",_,a,15)}))}T_(e,n,a){const o=Wp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,a),p.encodeInitMessageHeaders=!0;const y=u.join("");Ge(xs,`Creating RPC '${e}' stream ${o}: ${y}`,p);const _=d.createWebChannel(y,p);this.I_(_);let T=!1,k=!1;const O=new m4({Ho:W=>{k?Ge(xs,`Not sending because RPC '${e}' stream ${o} is closed:`,W):(T||(Ge(xs,`Opening RPC '${e}' stream ${o} transport.`),_.open(),T=!0),Ge(xs,`RPC '${e}' stream ${o} sending:`,W),_.send(W))},Jo:()=>_.close()});return jc(_,Mc.EventType.OPEN,(()=>{k||(Ge(xs,`RPC '${e}' stream ${o} transport opened.`),O.i_())})),jc(_,Mc.EventType.CLOSE,(()=>{k||(k=!0,Ge(xs,`RPC '${e}' stream ${o} transport closed`),O.o_(),this.E_(_))})),jc(_,Mc.EventType.ERROR,(W=>{k||(k=!0,wo(xs,`RPC '${e}' stream ${o} transport errored. Name:`,W.name,"Message:",W.message),O.o_(new qe(_e.UNAVAILABLE,"The operation could not be completed")))})),jc(_,Mc.EventType.MESSAGE,(W=>{if(!k){const B=W.data[0];cn(!!B,16349);const P=B,le=P?.error||P[0]?.error;if(le){Ge(xs,`RPC '${e}' stream ${o} received error:`,le);const ee=le.status;let me=(function(Ae){const A=Jn[Ae];if(A!==void 0)return Rw(A)})(ee),je=le.message;me===void 0&&(me=_e.INTERNAL,je="Unknown error status: "+ee+" with message "+le.message),k=!0,O.o_(new qe(me,je)),_.close()}else Ge(xs,`RPC '${e}' stream ${o} received:`,B),O.__(B)}})),bo.u_(),setTimeout((()=>{O.s_()}),0),O}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,a){super.Go(e,n,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Yx()}}function p4(s){return new bo(s)}function op(){return typeof document<"u"?document:null}function zd(s){return new bA(s,!0)}bo.c_=!1;class qw{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&Ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const n_="PersistentStream";class $w{constructor(e,n,a,o,u,d,p,g){this.Ci=e,this.b_=a,this.S_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===_e.RESOURCE_EXHAUSTED?(Da(n.toString()),Da("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===_e.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new qe(_e.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ge(n_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ge(n_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class g4 extends $w{constructor(e,n,a,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wA(this.serializer,e),a=(function(u){if(!("targetChange"in u))return Rt.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Rt.min():d.readTime?ta(d.readTime):Rt.min()})(e);return this.listener.J_(n,a)}Z_(e){const n={};n.database=qp(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=Vp(g)?{documents:kA(u,g)}:{query:SA(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=Iw(u,d.resumeToken);const y=zp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Rt.min())>0){p.readTime=_d(u,d.snapshotVersion.toTimestamp());const y=zp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const a=jA(this.serializer,e);a&&(n.labels=a),this.K_(n)}X_(e){const n={};n.database=qp(this.serializer),n.removeTarget=e,this.K_(n)}}class y4 extends $w{constructor(e,n,a,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return cn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,cn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){cn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=EA(e.writeResults,e.commitTime),a=ta(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=qp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>TA(this.serializer,a)))};this.K_(n)}}class v4{}class b4 extends v4{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new qe(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,Fp(n,a),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new qe(_e.UNKNOWN,u.toString())}))}jo(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Fp(n,a),o,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new qe(_e.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function _4(s,e,n,a){return new b4(s,e,n,a)}class x4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Da(n),this.aa=!1):Ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const vl="RemoteStore";class w4{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{a.enqueueAndForget((async()=>{Tl(this)&&(Ge(vl,"Restarting streams for network reachability change."),await(async function(g){const y=Dt(g);y.Ea.add(4),await mu(y),y.Va.set("Unknown"),y.Ea.delete(4),await Fd(y)})(this))}))})),this.Va=new x4(a,o)}}async function Fd(s){if(Tl(s))for(const e of s.Ra)await e(!0)}async function mu(s){for(const e of s.Ra)await e(!1)}function Ww(s,e){const n=Dt(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Fg(n)?zg(n):Lo(n).O_()&&Ug(n,e))}function Bg(s,e){const n=Dt(s),a=Lo(n);n.Ia.delete(e),a.O_()&&Gw(n,e),n.Ia.size===0&&(a.O_()?a.L_():Tl(n)&&n.Va.set("Unknown"))}function Ug(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Rt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(s).Z_(e)}function Gw(s,e){s.da.$e(e),Lo(s).X_(e)}function zg(s){s.da=new pA({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Lo(s).start(),s.Va.ua()}function Fg(s){return Tl(s)&&!Lo(s).x_()&&s.Ia.size>0}function Tl(s){return Dt(s).Ea.size===0}function Kw(s){s.da=void 0}async function T4(s){s.Va.set("Online")}async function E4(s){s.Ia.forEach(((e,n)=>{Ug(s,e)}))}async function k4(s,e){Kw(s),Fg(s)?(s.Va.ha(e),zg(s)):s.Va.set("Unknown")}async function S4(s,e,n){if(s.Va.set("Online"),e instanceof Aw&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.da.removeTarget(p))})(s,e)}catch(a){Ge(vl,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await wd(s,a)}else if(e instanceof td?s.da.Xe(e):e instanceof Cw?s.da.st(e):s.da.tt(e),!n.isEqual(Rt.min()))try{const a=await Hw(s.localStore);n.compareTo(a)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=u.Ia.get(y);_&&u.Ia.set(y,_.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const _=u.Ia.get(g);if(!_)return;u.Ia.set(g,_.withResumeToken(ys.EMPTY_BYTE_STRING,_.snapshotVersion)),Gw(u,g);const T=new bi(_.target,g,y,_.sequenceNumber);Ug(u,T)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(a){Ge(vl,"Failed to raise snapshot:",a),await wd(s,a)}}async function wd(s,e,n){if(!Mo(e))throw e;s.Ea.add(1),await mu(s),s.Va.set("Offline"),n||(n=()=>Hw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Ge(vl,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Fd(s)}))}function Yw(s,e){return e().catch((n=>wd(s,n,e)))}async function Hd(s){const e=Dt(s),n=Ri(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Eg;for(;N4(e);)try{const o=await l4(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,j4(e,o)}catch(o){await wd(e,o)}Qw(e)&&Xw(e)}function N4(s){return Tl(s)&&s.Ta.length<10}function j4(s,e){s.Ta.push(e);const n=Ri(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function Qw(s){return Tl(s)&&!Ri(s).x_()&&s.Ta.length>0}function Xw(s){Ri(s).start()}async function R4(s){Ri(s).ra()}async function C4(s){const e=Ri(s);for(const n of s.Ta)e.ea(n.mutations)}async function A4(s,e,n){const a=s.Ta.shift(),o=Ig.from(a,e,n);await Yw(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Hd(s)}async function I4(s,e){e&&Ri(s).Y_&&await(async function(a,o){if((function(d){return dA(d)&&d!==_e.ABORTED})(o.code)){const u=a.Ta.shift();Ri(a).B_(),await Yw(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Hd(a)}})(s,e),Qw(s)&&Xw(s)}async function s_(s,e){const n=Dt(s);n.asyncQueue.verifyOperationInProgress(),Ge(vl,"RemoteStore received new credentials");const a=Tl(n);n.Ea.add(3),await mu(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fd(n)}async function D4(s,e){const n=Dt(s);e?(n.Ea.delete(2),await Fd(n)):e||(n.Ea.add(2),await mu(n),n.Va.set("Unknown"))}function Lo(s){return s.ma||(s.ma=(function(n,a,o){const u=Dt(n);return u.sa(),new g4(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:T4.bind(null,s),Yo:E4.bind(null,s),t_:k4.bind(null,s),J_:S4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Fg(s)?zg(s):s.Va.set("Unknown")):(await s.ma.stop(),Kw(s))}))),s.ma}function Ri(s){return s.fa||(s.fa=(function(n,a,o){const u=Dt(n);return u.sa(),new y4(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:R4.bind(null,s),t_:I4.bind(null,s),ta:C4.bind(null,s),na:A4.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Hd(s)):(await s.fa.stop(),s.Ta.length>0&&(Ge(vl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Hg{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new Ra,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const d=Date.now()+a,p=new Hg(e,n,d,o,u);return p.start(a),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qg(s,e){if(Da("AsyncQueue",`${e}: ${s}`),Mo(s))return new qe(_e.UNAVAILABLE,`${e}: ${s}`);throw s}class _o{static emptySet(e){return new _o(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||ut.comparator(n.key,a.key):(n,a)=>ut.comparator(n.key,a.key),this.keyedMap=Pc(),this.sortedSet=new Ln(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new _o;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class r_{constructor(){this.ga=new Ln(ut.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_t(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class No{constructor(e,n,a,o,u,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,a,o,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new No(e,n,_o.emptySet(n),d,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}class M4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class P4{constructor(){this.queries=a_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=Dt(n),u=o.queries;o.queries=a_(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(a)}))})(this,new qe(_e.ABORTED,"Firestore shutting down"))}}function a_(){return new wl((s=>yw(s)),Ld)}async function Jw(s,e){const n=Dt(s);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(a=2):(u=new M4,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=qg(d,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&$g(n)}async function Zw(s,e){const n=Dt(s),a=e.query;let o=3;const u=n.queries.get(a);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function L4(s,e){const n=Dt(s);let a=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(o)&&(a=!0);d.wa=o}}a&&$g(n)}function O4(s,e,n){const a=Dt(s),o=a.queries.get(e);if(o)for(const u of o.ba)u.onError(n);a.queries.delete(e)}function $g(s){s.Ca.forEach((e=>{e.next()}))}var Gp,i_;(i_=Gp||(Gp={})).Ma="default",i_.Cache="cache";class e2{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new No(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=No.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gp.Cache}}class t2{constructor(e){this.key=e}}class n2{constructor(e){this.key=e}}class V4{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Yt(),this.mutatedKeys=Yt(),this.eu=vw(e),this.tu=new _o(this.eu)}get nu(){return this.Za}ru(e,n){const a=n?n.iu:new r_,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const k=o.get(_),O=Od(this.query,T)?T:null,W=!!k&&this.mutatedKeys.has(k.key),B=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let P=!1;k&&O?k.data.isEqual(O.data)?W!==B&&(a.track({type:3,doc:O}),P=!0):this.su(k,O)||(a.track({type:2,doc:O}),P=!0,(g&&this.eu(O,g)>0||y&&this.eu(O,y)<0)&&(p=!0)):!k&&O?(a.track({type:0,doc:O}),P=!0):k&&!O&&(a.track({type:1,doc:k}),P=!0,(g||y)&&(p=!0)),P&&(O?(d=d.add(O),u=B?u.add(_):u.delete(_)):(d=d.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),u=u.delete(_.key),a.track({type:1,doc:_})}return{tu:d,iu:a,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,T)=>(function(O,W){const B=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Vt:P})}};return B(O)-B(W)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(a),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new No(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Yt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const n=[];return e.forEach((a=>{this.Ya.has(a)||n.push(new n2(a))})),this.Ya.forEach((a=>{e.has(a)||n.push(new t2(a))})),n}cu(e){this.Za=e.ks,this.Ya=Yt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return No.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Wg="SyncEngine";class B4{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class U4{constructor(e){this.key=e,this.hu=!1}}class z4{constructor(e,n,a,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new wl((p=>yw(p)),Ld),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ln(ut.comparator),this.Au=new Map,this.Vu=new Pg,this.du={},this.mu=new Map,this.fu=So.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function F4(s,e,n=!0){const a=o2(s);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await s2(a,e,n,!0),o}async function H4(s,e){const n=o2(s);await s2(n,e,!0,!1)}async function s2(s,e,n,a){const o=await o4(s.localStore,ea(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let p;return a&&(p=await q4(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&Ww(s.remoteStore,o),p}async function q4(s,e,n,a,o){s.pu=(T,k,O)=>(async function(B,P,le,ee){let me=P.view.ru(le);me.Ss&&(me=await J1(B.localStore,P.query,!1).then((({documents:A})=>P.view.ru(A,me))));const je=ee&&ee.targetChanges.get(P.targetId),ze=ee&&ee.targetMismatches.get(P.targetId)!=null,Ae=P.view.applyChanges(me,B.isPrimaryClient,je,ze);return o_(B,P.targetId,Ae.au),Ae.snapshot})(s,T,k,O);const u=await J1(s.localStore,e,!0),d=new V4(e,u.ks),p=d.ru(u.documents),g=fu.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",o),y=d.applyChanges(p,s.isPrimaryClient,g);o_(s,n,y.au);const _=new B4(e,n,d);return s.Tu.set(e,_),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function $4(s,e,n){const a=Dt(s),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((d=>!Ld(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await $p(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&Bg(a.remoteStore,o.targetId),Kp(a,o.targetId)})).catch(Do)):(Kp(a,o.targetId),await $p(a.localStore,o.targetId,!0))}async function W4(s,e){const n=Dt(s),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),Bg(n.remoteStore,a.targetId))}async function G4(s,e,n){const a=eI(s);try{const o=await(function(d,p){const g=Dt(d),y=it.now(),_=p.reduce(((O,W)=>O.add(W.key)),Yt());let T,k;return g.persistence.runTransaction("Locally write mutations","readwrite",(O=>{let W=Ma(),B=Yt();return g.xs.getEntries(O,_).next((P=>{W=P,W.forEach(((le,ee)=>{ee.isValidDocument()||(B=B.add(le))}))})).next((()=>g.localDocuments.getOverlayedDocuments(O,W))).next((P=>{T=P;const le=[];for(const ee of p){const me=lA(ee,T.get(ee.key).overlayedDocument);me!=null&&le.push(new Mi(ee.key,me,cw(me.value.mapValue),pr.exists(!0)))}return g.mutationQueue.addMutationBatch(O,y,le,p)})).next((P=>{k=P;const le=P.applyToLocalDocumentSet(T,B);return g.documentOverlayCache.saveOverlays(O,P.batchId,le)}))})).then((()=>({batchId:k.batchId,changes:_w(T)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new Ln(Kt)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(a,o.batchId,n),await pu(a,o.changes),await Hd(a.remoteStore)}catch(o){const u=qg(o,"Failed to persist write");n.reject(u)}}async function r2(s,e){const n=Dt(s);try{const a=await a4(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(cn(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?cn(d.hu,14607):o.removedDocuments.size>0&&(cn(d.hu,42227),d.hu=!1))})),await pu(n,a,e)}catch(a){await Do(a)}}function l_(s,e,n){const a=Dt(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=Dt(d);g.onlineState=p;let y=!1;g.queries.forEach(((_,T)=>{for(const k of T.ba)k.va(p)&&(y=!0)})),y&&$g(g)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function K4(s,e,n){const a=Dt(s);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let d=new Ln(ut.comparator);d=d.insert(u,Ts.newNoDocument(u,Rt.min()));const p=Yt().add(u),g=new Ud(Rt.min(),new Map,new Ln(Kt),d,p);await r2(a,g),a.Ru=a.Ru.remove(u),a.Au.delete(e),Gg(a)}else await $p(a.localStore,e,!1).then((()=>Kp(a,e,n))).catch(Do)}async function Y4(s,e){const n=Dt(s),a=e.batch.batchId;try{const o=await r4(n.localStore,e);i2(n,a,null),a2(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await pu(n,o)}catch(o){await Do(o)}}async function Q4(s,e,n){const a=Dt(s);try{const o=await(function(d,p){const g=Dt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return g.mutationQueue.lookupMutationBatch(y,p).next((T=>(cn(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(y,T)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>g.localDocuments.getDocuments(y,_)))}))})(a.localStore,e);i2(a,e,n),a2(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await pu(a,o)}catch(o){await Do(o)}}function a2(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function i2(s,e,n){const a=Dt(s);let o=a.du[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function Kp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((a=>{s.Vu.containsKey(a)||l2(s,a)}))}function l2(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Bg(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),Gg(s))}function o_(s,e,n){for(const a of n)a instanceof t2?(s.Vu.addReference(a.key,e),X4(s,a)):a instanceof n2?(Ge(Wg,"Document no longer in limbo: "+a.key),s.Vu.removeReference(a.key,e),s.Vu.containsKey(a.key)||l2(s,a.key)):_t(19791,{wu:a})}function X4(s,e){const n=e.key,a=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(a)||(Ge(Wg,"New document in limbo: "+n),s.Eu.add(a),Gg(s))}function Gg(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new ut(xn.fromString(e)),a=s.fu.next();s.Au.set(a,new U4(n)),s.Ru=s.Ru.insert(n,a),Ww(s.remoteStore,new bi(ea(Rg(n.path)),a,"TargetPurposeLimboResolution",Dd.ce))}}async function pu(s,e,n){const a=Dt(s),o=[],u=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((p,g)=>{d.push(a.pu(g,e,n).then((y=>{if((y||n)&&a.isPrimaryClient){const _=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;a.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(y){o.push(y);const _=Og.Es(g.targetId,y);u.push(_)}})))})),await Promise.all(d),a.Pu.J_(o),await(async function(g,y){const _=Dt(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Te.forEach(y,(k=>Te.forEach(k.Ts,(O=>_.persistence.referenceDelegate.addReference(T,k.targetId,O))).next((()=>Te.forEach(k.Is,(O=>_.persistence.referenceDelegate.removeReference(T,k.targetId,O)))))))))}catch(T){if(!Mo(T))throw T;Ge(Vg,"Failed to update sequence numbers: "+T)}for(const T of y){const k=T.targetId;if(!T.fromCache){const O=_.vs.get(k),W=O.snapshotVersion,B=O.withLastLimboFreeSnapshotVersion(W);_.vs=_.vs.insert(k,B)}}})(a.localStore,u))}async function J4(s,e){const n=Dt(s);if(!n.currentUser.isEqual(e)){Ge(Wg,"User change. New user:",e.toKey());const a=await Fw(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new qe(_e.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await pu(n,a.Ns)}}function Z4(s,e){const n=Dt(s),a=n.Au.get(e);if(a&&a.hu)return Yt().add(a.key);{let o=Yt();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function o2(s){const e=Dt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=r2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Z4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K4.bind(null,e),e.Pu.J_=L4.bind(null,e.eventManager),e.Pu.yu=O4.bind(null,e.eventManager),e}function eI(s){const e=Dt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q4.bind(null,e),e}class Td{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return s4(this.persistence,new e4,e.initialUser,this.serializer)}Cu(e){return new zw(Lg.Vi,this.serializer)}Du(e){return new u4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Td.provider={build:()=>new Td};class tI extends Td{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){cn(this.persistence.referenceDelegate instanceof xd,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new BA(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zs.withCacheSize(this.cacheSizeBytes):zs.DEFAULT;return new zw((a=>xd.Vi(a,n)),this.serializer)}}class Yp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>l_(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=J4.bind(null,this.syncEngine),await D4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new P4})()}createDatastore(e){const n=zd(e.databaseInfo.databaseId),a=p4(e.databaseInfo);return _4(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,u,d,p){return new w4(a,o,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>l_(this.syncEngine,n,0)),(function(){return t_.v()?new t_:new h4})())}createSyncEngine(e,n){return(function(o,u,d,p,g,y,_){const T=new z4(o,u,d,p,g,y);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=Dt(n);Ge(vl,"RemoteStore shutting down."),a.Ea.add(5),await mu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Yp.provider={build:()=>new Yp};class c2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Da("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ci="FirestoreClient";class nI{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this._databaseInfo=o,this.user=ws.UNAUTHENTICATED,this.clientId=Tg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async d=>{Ge(Ci,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(Ge(Ci,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ra;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=qg(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function cp(s,e){s.asyncQueue.verifyOperationInProgress(),Ge(Ci,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await Fw(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function c_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await sI(s);Ge(Ci,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>s_(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>s_(e.remoteStore,o))),s._onlineComponents=e}async function sI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ge(Ci,"Using user provided OfflineComponentProvider");try{await cp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===_e.FAILED_PRECONDITION||o.code===_e.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;wo("Error using user provided cache. Falling back to memory cache: "+n),await cp(s,new Td)}}else Ge(Ci,"Using default OfflineComponentProvider"),await cp(s,new tI(void 0));return s._offlineComponents}async function u2(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ge(Ci,"Using user provided OnlineComponentProvider"),await c_(s,s._uninitializedComponentsProvider._online)):(Ge(Ci,"Using default OnlineComponentProvider"),await c_(s,new Yp))),s._onlineComponents}function rI(s){return u2(s).then((e=>e.syncEngine))}async function h2(s){const e=await u2(s),n=e.eventManager;return n.onListen=F4.bind(null,e.syncEngine),n.onUnlisten=$4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=H4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=W4.bind(null,e.syncEngine),n}function aI(s,e,n={}){const a=new Ra;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const _=new c2({next:k=>{_.Nu(),d.enqueueAndForget((()=>Zw(u,T)));const O=k.docs.has(p);!O&&k.fromCache?y.reject(new qe(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&k.fromCache&&g&&g.source==="server"?y.reject(new qe(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(k)},error:k=>y.reject(k)}),T=new e2(Rg(p.path),_,{includeMetadataChanges:!0,Ka:!0});return Jw(u,T)})(await h2(s),s.asyncQueue,e,n,a))),a.promise}function iI(s,e,n={}){const a=new Ra;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const _=new c2({next:k=>{_.Nu(),d.enqueueAndForget((()=>Zw(u,T))),k.fromCache&&g.source==="server"?y.reject(new qe(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(k)},error:k=>y.reject(k)}),T=new e2(p,_,{includeMetadataChanges:!0,Ka:!0});return Jw(u,T)})(await h2(s),s.asyncQueue,e,n,a))),a.promise}function lI(s,e){const n=new Ra;return s.asyncQueue.enqueueAndForget((async()=>G4(await rI(s),e,n))),n.promise}function d2(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const oI="ComponentProvider",u_=new Map;function cI(s,e,n,a,o){return new RC(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,d2(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}const f2="firestore.googleapis.com",h_=!0;class d_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new qe(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f2,this.ssl=h_}else this.host=e.host,this.ssl=e.ssl??h_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OA)throw new qe(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=d2(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new qe(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new qe(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new qe(_e.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qd{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new oC;switch(a.type){case"firstParty":return new dC(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new qe(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=u_.get(n);a&&(Ge(oI,"Removing Datastore"),u_.delete(n),a.terminate())})(this),Promise.resolve()}}function uI(s,e,n,a={}){s=Pr(s,qd);const o=Ai(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(lg(`https://${p}`),og("Firestore",!0)),u.host!==f2&&u.host!==p&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:a};if(!fl(g,d)&&(s._setSettings(g),a.mockUserToken)){let y,_;if(typeof a.mockUserToken=="string")y=a.mockUserToken,_=ws.MOCK_USER;else{y=rx(a.mockUserToken,s._app?.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new qe(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ws(T)}s._authCredentials=new cC(new Xx(y,_))}}class El{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new El(this.firestore,e,this._query)}}class Gn{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}toJSON(){return{type:Gn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(hu(n,Gn._jsonSchema))return new Gn(e,a||null,new ut(xn.fromString(n.referencePath)))}}Gn._jsonSchemaVersion="firestore/documentReference/1.0",Gn._jsonSchema={type:es("string",Gn._jsonSchemaVersion),referencePath:es("string")};class Ti extends El{constructor(e,n,a){super(e,n,Rg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new ut(e))}withConverter(e){return new Ti(this.firestore,e,this._path)}}function Es(s,e,...n){if(s=Pn(s),Jx("collection","path",e),s instanceof qd){const a=xn.fromString(e,...n);return k1(a),new Ti(s,null,a)}{if(!(s instanceof Gn||s instanceof Ti))throw new qe(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(xn.fromString(e,...n));return k1(a),new Ti(s.firestore,null,a)}}function Nt(s,e,...n){if(s=Pn(s),arguments.length===1&&(e=Tg.newId()),Jx("doc","path",e),s instanceof qd){const a=xn.fromString(e,...n);return E1(a),new Gn(s,null,new ut(a))}{if(!(s instanceof Gn||s instanceof Ti))throw new qe(_e.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(xn.fromString(e,...n));return E1(a),new Gn(s.firestore,s instanceof Ti?s.converter:null,new ut(a))}}const f_="AsyncQueue";class m_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qw(this,"async_queue_retry"),this._c=()=>{const a=op();a&&Ge(f_,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=op();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=op();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ra;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Mo(e))throw e;Ge(f_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Da("INTERNAL UNHANDLED ERROR: ",p_(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Hg.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&_t(47125,{Pc:p_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function p_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class kl extends qd{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new m_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m_(e),this._firestoreClient=void 0,await e}}}function hI(s,e){const n=typeof s=="object"?s:dg(),a=typeof s=="string"?s:pd,o=jd(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=tx("firestore");u&&uI(o,...u)}return o}function Kg(s){if(s._terminated)throw new qe(_e.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||dI(s),s._firestoreClient}function dI(s){const e=s._freezeSettings(),n=cI(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new nI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mr(ys.fromBase64String(e))}catch(n){throw new qe(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mr(ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hu(e,mr._jsonSchema))return mr.fromBase64String(e.bytes)}}mr._jsonSchemaVersion="firestore/bytes/1.0",mr._jsonSchema={type:es("string",mr._jsonSchemaVersion),bytes:es("string")};class Yg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qg{constructor(e){this._methodName=e}}class na{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:na._jsonSchemaVersion}}static fromJSON(e){if(hu(e,na._jsonSchema))return new na(e.latitude,e.longitude)}}na._jsonSchemaVersion="firestore/geoPoint/1.0",na._jsonSchema={type:es("string",na._jsonSchemaVersion),latitude:es("number"),longitude:es("number")};class Dr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hu(e,Dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Dr(e.vectorValues);throw new qe(_e.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dr._jsonSchemaVersion="firestore/vectorValue/1.0",Dr._jsonSchema={type:es("string",Dr._jsonSchemaVersion),vectorValues:es("object")};const fI=/^__.*__$/;class mI{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new du(e,this.data,n,this.fieldTransforms)}}class m2{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new Mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function p2(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{dataSource:s})}}class Xg{constructor(e,n,a,o,u,d){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Xg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ed(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(p2(this.dataSource)&&fI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class pI{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||zd(e)}createContext(e,n,a,o=!1){return new Xg({dataSource:e,methodName:n,targetDoc:a,path:gs.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $d(s){const e=s._freezeSettings(),n=zd(s._databaseId);return new pI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function g2(s,e,n,a,o,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,n,o);Jg("Data must be an object, but it was:",d,a);const p=y2(a,d);let g,y;if(u.merge)g=new Zs(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const k=bl(e,T,n);if(!d.contains(k))throw new qe(_e.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);_2(_,k)||_.push(k)}g=new Zs(_),y=d.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,y=d.fieldTransforms;return new mI(new Fs(p),g,y)}class Wd extends Qg{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wd}}function gI(s,e,n,a){const o=s.createContext(1,e,n);Jg("Data must be an object, but it was:",o,a);const u=[],d=Fs.empty();Di(a,((g,y)=>{const _=b2(e,g,n);y=Pn(y);const T=o.childContextForFieldPath(_);if(y instanceof Wd)u.push(_);else{const k=gu(y,T);k!=null&&(u.push(_),d.set(_,k))}}));const p=new Zs(u);return new m2(d,p,o.fieldTransforms)}function yI(s,e,n,a,o,u){const d=s.createContext(1,e,n),p=[bl(e,a,n)],g=[o];if(u.length%2!=0)throw new qe(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<u.length;k+=2)p.push(bl(e,u[k])),g.push(u[k+1]);const y=[],_=Fs.empty();for(let k=p.length-1;k>=0;--k)if(!_2(y,p[k])){const O=p[k];let W=g[k];W=Pn(W);const B=d.childContextForFieldPath(O);if(W instanceof Wd)y.push(O);else{const P=gu(W,B);P!=null&&(y.push(O),_.set(O,P))}}const T=new Zs(y);return new m2(_,T,d.fieldTransforms)}function vI(s,e,n,a=!1){return gu(n,s.createContext(a?4:3,e))}function gu(s,e){if(v2(s=Pn(s)))return Jg("Unsupported field value:",e,s),y2(s,e);if(s instanceof Qg)return(function(a,o){if(!p2(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const u=[];let d=0;for(const p of a){let g=gu(p,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(a,o){if((a=Pn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return tA(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=it.fromDate(a);return{timestampValue:_d(o.serializer,u)}}if(a instanceof it){const u=new it(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:_d(o.serializer,u)}}if(a instanceof na)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof mr)return{bytesValue:Iw(o.serializer,a._byteString)};if(a instanceof Gn){const u=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(u))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Mg(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Dr)return(function(d,p){const g=d instanceof Dr?d.toArray():d;return{mapValue:{fields:{[lw]:{stringValue:ow},[gd]:{arrayValue:{values:g.map((_=>{if(typeof _!="number")throw p.createError("VectorValues must only contain numeric values.");return Cg(p.serializer,_)}))}}}}}})(a,o);if(Bw(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Id(a)}`)})(s,e)}function y2(s,e){const n={};return tw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Di(s,((a,o)=>{const u=gu(o,e.childContextForField(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function v2(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof it||s instanceof na||s instanceof mr||s instanceof Gn||s instanceof Qg||s instanceof Dr||Bw(s))}function Jg(s,e,n){if(!v2(n)||!Zx(n)){const a=Id(n);throw a==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+a)}}function bl(s,e,n){if((e=Pn(e))instanceof Yg)return e._internalPath;if(typeof e=="string")return b2(s,e);throw Ed("Field path arguments must be of type string or ",s,!1,void 0,n)}const bI=new RegExp("[~\\*/\\[\\]]");function b2(s,e,n){if(e.search(bI)>=0)throw Ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Yg(...e.split("."))._internalPath}catch{throw Ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Ed(s,e,n,a,o){const u=a&&!a.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${a}`),d&&(g+=` in document ${o}`),g+=")"),new qe(_e.INVALID_ARGUMENT,p+s+g)}function _2(s,e){return s.some((n=>n.isEqual(e)))}class _I{convertValue(e,n="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _t(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return Di(e,((o,u)=>{a[o]=this.convertValue(u,n)})),a}convertVectorValue(e){const n=e.fields?.[gd].arrayValue?.values?.map((a=>qn(a.doubleValue)));return new Dr(n)}convertGeoPoint(e){return new na(qn(e.latitude),qn(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Pd(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Xc(e));default:return null}}convertTimestamp(e){const n=Si(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=xn.fromString(e);cn(Vw(a),9688,{name:e});const o=new Jc(a.get(1),a.get(3)),u=new ut(a.popFirst(5));return o.isEqual(n)||Da(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class x2 extends _I{constructor(e){super(),this.firestore=e}convertBytes(e){return new mr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,n)}}const g_="@firebase/firestore",y_="4.10.0";class w2{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(bl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xI extends w2{data(){return super.data()}}function wI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new qe(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zg{}class T2 extends Zg{}function er(s,e,...n){let a=[];e instanceof Zg&&a.push(e),a=a.concat(n),(function(u){const d=u.filter((g=>g instanceof ey)).length,p=u.filter((g=>g instanceof Gd)).length;if(d>1||d>0&&p>0)throw new qe(_e.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class Gd extends T2{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Gd(e,n,a)}_apply(e){const n=this._parse(e);return E2(e._query,n),new El(e.firestore,e.converter,Bp(e._query,n))}_parse(e){const n=$d(e.firestore);return(function(u,d,p,g,y,_,T){let k;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new qe(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){b_(T,_);const W=[];for(const B of T)W.push(v_(g,u,B));k={arrayValue:{values:W}}}else k=v_(g,u,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||b_(T,_),k=vI(p,d,T,_==="in"||_==="not-in");return Zn.create(y,_,k)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Hs(s,e,n){const a=e,o=bl("where",s);return Gd._create(o,a,n)}class ey extends Zg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ey(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Lr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const p=u.getFlattenedFilters();for(const g of p)E2(d,g),d=Bp(d,g)})(e._query,n),new El(e.firestore,e.converter,Bp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ty extends T2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ty(e,n)}_apply(e){const n=(function(o,u,d){if(o.startAt!==null)throw new qe(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new qe(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eu(u,d)})(e._query,this._field,this._direction);return new El(e.firestore,e.converter,GC(e._query,n))}}function BM(s,e="asc"){const n=e,a=bl("orderBy",s);return ty._create(a,n)}function v_(s,e,n){if(typeof(n=Pn(n))=="string"){if(n==="")throw new qe(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gw(e)&&n.indexOf("/")!==-1)throw new qe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(xn.fromString(n));if(!ut.isDocumentKey(a))throw new qe(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return D1(s,new ut(a))}if(n instanceof Gn)return D1(s,n._key);throw new qe(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Id(n)}.`)}function b_(s,e){if(!Array.isArray(s)||s.length===0)throw new qe(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E2(s,e){const n=(function(o,u){for(const d of o)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new qe(_e.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(_e.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function k2(s,e,n){let a;return a=s?s.toFirestore(e):e,a}class Oc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hl extends w2{constructor(e,n,a,o,u,d){super(e,n,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(bl("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(_e.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=hl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}hl._jsonSchemaVersion="firestore/documentSnapshot/1.0",hl._jsonSchema={type:es("string",hl._jsonSchemaVersion),bundleSource:es("string","DocumentSnapshot"),bundleName:es("string"),bundle:es("string")};class nd extends hl{data(e={}){return super.data(e)}}class xo{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Oc(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new nd(this._firestore,this._userDataWriter,a.key,a,new Oc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new nd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Oc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new nd(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Oc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),_=d.indexOf(p.doc.key)),{type:TI(p.type),doc:g,oldIndex:y,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new qe(_e.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:s})}}xo._jsonSchemaVersion="firestore/querySnapshot/1.0",xo._jsonSchema={type:es("string",xo._jsonSchemaVersion),bundleSource:es("string","QuerySnapshot"),bundleName:es("string"),bundle:es("string")};function Wn(s){s=Pr(s,Gn);const e=Pr(s.firestore,kl),n=Kg(e);return aI(n,s._key).then((a=>EI(e,s,a)))}function tr(s){s=Pr(s,El);const e=Pr(s.firestore,kl),n=Kg(e),a=new x2(e);return wI(s._query),iI(n,s._query).then((o=>new xo(e,a,s,o)))}function $n(s,e,n){s=Pr(s,Gn);const a=Pr(s.firestore,kl),o=k2(s.converter,e),u=$d(a);return Kd(a,[g2(u,"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,pr.none())])}function UM(s,e,n,...a){s=Pr(s,Gn);const o=Pr(s.firestore,kl),u=$d(o);let d;return d=typeof(e=Pn(e))=="string"||e instanceof Yg?yI(u,"updateDoc",s._key,e,n,a):gI(u,"updateDoc",s._key,e),Kd(o,[d.toMutation(s._key,pr.exists(!0))])}function ny(s){return Kd(Pr(s.firestore,kl),[new Ag(s._key,pr.none())])}function Qp(s,e){const n=Pr(s.firestore,kl),a=Nt(s),o=k2(s.converter,e),u=$d(s.firestore);return Kd(n,[g2(u,"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,pr.exists(!1))]).then((()=>a))}function Kd(s,e){const n=Kg(s);return lI(n,e)}function EI(s,e,n){const a=n.docs.get(e._key),o=new x2(s);return new hl(s,o,e._key,a,new Oc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){lC(xl),ml(new Ei("firestore",((a,{instanceIdentifier:o,options:u})=>{const d=a.getProvider("app").getImmediate(),p=new kl(new uC(a.getProvider("auth-internal")),new fC(d,a.getProvider("app-check-internal")),CC(d,o),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Xr(g_,y_,e),Xr(g_,y_,"esm2020")})();var kI="firebase",SI="12.8.0";Xr(kI,SI,"app");const S2="firebasestorage.googleapis.com",N2="storageBucket",NI=120*1e3,jI=600*1e3;class ls extends aa{constructor(e,n,a=0){super(up(e),`Firebase Storage: ${n} (${up(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ls.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return up(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var is;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(is||(is={}));function up(s){return"storage/"+s}function j2(){const s="An unknown error occurred, please check the error payload for server response.";return new ls(is.UNKNOWN,s)}function RI(s){return new ls(is.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function CI(s){return new ls(is.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ls(is.UNAUTHENTICATED,s)}function II(){return new ls(is.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function DI(s){return new ls(is.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function MI(){return new ls(is.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PI(){return new ls(is.CANCELED,"User canceled the upload/download.")}function LI(s){return new ls(is.INVALID_URL,"Invalid URL '"+s+"'.")}function OI(s){return new ls(is.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function VI(){return new ls(is.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+N2+"' property when initializing the app?")}function BI(){return new ls(is.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Xp(s){return new ls(is.INVALID_ARGUMENT,s)}function R2(){return new ls(is.APP_DELETED,"The Firebase app was deleted.")}function UI(s){return new ls(is.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rc(s){throw new ls(is.INTERNAL_ERROR,"Internal error: "+s)}class Is{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=Is.makeFromUrl(e,n)}catch{return new Is(e,"")}if(a.path==="")return a;throw OI(e)}static makeFromUrl(e,n){let a=null;const o="([A-Za-z0-9.\\-_]+)";function u(je){je.path.charAt(je.path.length-1)==="/"&&(je.path_=je.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(je){je.path_=decodeURIComponent(je.path)}const _="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),k="(/([^?#]*).*)?$",O=new RegExp(`^https?://${T}/${_}/b/${o}/o${k}`,"i"),W={bucket:1,path:3},B=n===S2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",le=new RegExp(`^https?://${B}/${o}/${P}`,"i"),me=[{regex:p,indices:g,postModify:u},{regex:O,indices:W,postModify:y},{regex:le,indices:{bucket:1,path:2},postModify:y}];for(let je=0;je<me.length;je++){const ze=me[je],Ae=ze.regex.exec(e);if(Ae){const A=Ae[ze.indices.bucket];let S=Ae[ze.indices.path];S||(S=""),a=new Is(A,S),ze.postModify(a);break}}if(a==null)throw LI(e);return a}}class zI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function FI(s,e,n){let a=1,o=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function _(...P){y||(y=!0,e.apply(null,P))}function T(P){o=setTimeout(()=>{o=null,s(O,g())},P)}function k(){u&&clearTimeout(u)}function O(P,...le){if(y){k();return}if(P){k(),_.call(null,P,...le);return}if(g()||d){k(),_.call(null,P,...le);return}a<64&&(a*=2);let me;p===1?(p=2,me=0):me=(a+Math.random())*1e3,T(me)}let W=!1;function B(P){W||(W=!0,k(),!y&&(o!==null?(P||(p=2),clearTimeout(o),T(0)):P||(p=1)))}return T(0),u=setTimeout(()=>{d=!0,B(!0)},n),B}function HI(s){s(!1)}function qI(s){return s!==void 0}function $I(s){return typeof s=="object"&&!Array.isArray(s)}function C2(s){return typeof s=="string"||s instanceof String}function Jp(s,e,n,a){if(a<e)throw Xp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(a>n)throw Xp(`Invalid value for '${s}'. Expected ${n} or less.`)}function sy(s,e,n){let a=e;return n==null&&(a=`https://${e}`),`${n}://${a}/v0${s}`}function A2(s){const e=encodeURIComponent;let n="?";for(const a in s)if(s.hasOwnProperty(a)){const o=e(a)+"="+e(s[a]);n=n+o+"&"}return n=n.slice(0,-1),n}var dl;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(dl||(dl={}));function WI(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||o||u}class GI{constructor(e,n,a,o,u,d,p,g,y,_,T,k=!0,O=!1){this.url_=e,this.method_=n,this.headers_=a,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=_,this.connectionFactory_=T,this.retry=k,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((W,B)=>{this.resolve_=W,this.reject_=B,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new Bh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===dl.NO_ERROR,g=u.getStatus();if(!p||WI(g,this.additionalRetryCodes_)&&this.retry){const _=u.getErrorCode()===dl.ABORT;a(!1,new Bh(!1,null,_));return}const y=this.successCodes_.indexOf(g)!==-1;a(!0,new Bh(y,u))})},n=(a,o)=>{const u=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());qI(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=j2();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?R2():PI();d(g)}else{const g=MI();d(g)}};this.canceled_?n(!1,new Bh(!1,null,!0)):this.backoffId_=FI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&HI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bh{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function KI(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function YI(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QI(s,e){e&&(s["X-Firebase-GMPID"]=e)}function XI(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function JI(s,e,n,a,o,u,d=!0,p=!1){const g=A2(s.urlParams),y=s.url+g,_=Object.assign({},s.headers);return QI(_,e),KI(_,n),YI(_,u),XI(_,a),new GI(y,s.method,_,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,p)}function ry(s){let e;try{e=JSON.parse(s)}catch{return null}return $I(e)?e:null}function ZI(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function eD(s,e){const n=e.split("/").filter(a=>a.length>0).join("/");return s.length===0?n:s+"/"+n}function I2(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function tD(s,e){return e}class As{constructor(e,n,a,o){this.server=e,this.local=n||e,this.writable=!!a,this.xform=o||tD}}let Uh=null;function nD(s){return!C2(s)||s.length<2?s:I2(s)}function sD(){if(Uh)return Uh;const s=[];s.push(new As("bucket")),s.push(new As("generation")),s.push(new As("metageneration")),s.push(new As("name","fullPath",!0));function e(u,d){return nD(d)}const n=new As("name");n.xform=e,s.push(n);function a(u,d){return d!==void 0?Number(d):d}const o=new As("size");return o.xform=a,s.push(o),s.push(new As("timeCreated")),s.push(new As("updated")),s.push(new As("md5Hash",null,!0)),s.push(new As("cacheControl",null,!0)),s.push(new As("contentDisposition",null,!0)),s.push(new As("contentEncoding",null,!0)),s.push(new As("contentLanguage",null,!0)),s.push(new As("contentType",null,!0)),s.push(new As("metadata","customMetadata",!0)),Uh=s,Uh}function rD(s,e){function n(){const a=s.bucket,o=s.fullPath,u=new Is(a,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function aD(s,e,n){const a={};a.type="file";const o=n.length;for(let u=0;u<o;u++){const d=n[u];a[d.local]=d.xform(a,e[d.server])}return rD(a,s),a}function iD(s,e,n){const a=ry(e);return a===null?null:aD(s,a,n)}function lD(s,e,n,a){const o=ry(e);if(o===null||!C2(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const _=s.bucket,T=s.fullPath,k="/b/"+d(_)+"/o/"+d(T),O=sy(k,n,a),W=A2({alt:"media",token:y});return O+W})[0]}const __="prefixes",x_="items";function oD(s,e,n){const a={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[__])for(const o of n[__]){const u=o.replace(/\/$/,""),d=s._makeStorageReference(new Is(e,u));a.prefixes.push(d)}if(n[x_])for(const o of n[x_]){const u=s._makeStorageReference(new Is(e,o.name));a.items.push(u)}return a}function cD(s,e,n){const a=ry(n);return a===null?null:oD(s,e,a)}class D2{constructor(e,n,a,o){this.url=e,this.method=n,this.handler=a,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function M2(s){if(!s)throw j2()}function uD(s,e){function n(a,o){const u=cD(s,e,o);return M2(u!==null),u}return n}function hD(s,e){function n(a,o){const u=iD(s,o,e);return M2(u!==null),lD(u,o,s.host,s._protocol)}return n}function P2(s){function e(n,a){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=II():o=AI():n.getStatus()===402?o=CI(s.bucket):n.getStatus()===403?o=DI(s.path):o=a,o.status=n.getStatus(),o.serverResponse=a.serverResponse,o}return e}function dD(s){const e=P2(s);function n(a,o){let u=e(a,o);return a.getStatus()===404&&(u=RI(s.path)),u.serverResponse=o.serverResponse,u}return n}function fD(s,e,n,a,o){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",n.length>0&&(u.delimiter=n),a&&(u.pageToken=a),o&&(u.maxResults=o);const d=e.bucketOnlyServerUrl(),p=sy(d,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,_=new D2(p,g,uD(s,e.bucket),y);return _.urlParams=u,_.errorHandler=P2(e),_}function mD(s,e,n){const a=e.fullServerUrl(),o=sy(a,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new D2(o,u,hD(s,n),d);return p.errorHandler=dD(e),p}class pD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=dl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=dl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,a,o,u){if(this.sent_)throw Rc("cannot .send() more than once");if(Ai(e)&&a&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Rc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class gD extends pD{initXhr(){this.xhr_.responseType="text"}}function L2(){return new gD}class _l{constructor(e,n){this._service=e,n instanceof Is?this._location=n:this._location=Is.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new _l(e,n)}get root(){const e=new Is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return I2(this._location.path)}get storage(){return this._service}get parent(){const e=ZI(this._location.path);if(e===null)return null;const n=new Is(this._location.bucket,e);return new _l(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw UI(e)}}function yD(s){const e={prefixes:[],items:[]};return O2(s,e).then(()=>e)}async function O2(s,e,n){const o=await vD(s,{pageToken:n});e.prefixes.push(...o.prefixes),e.items.push(...o.items),o.nextPageToken!=null&&await O2(s,e,o.nextPageToken)}function vD(s,e){e!=null&&typeof e.maxResults=="number"&&Jp("options.maxResults",1,1e3,e.maxResults);const n=e||{},a=fD(s.storage,s._location,"/",n.pageToken,n.maxResults);return s.storage.makeRequestWithTokens(a,L2)}function bD(s){s._throwIfRoot("getDownloadURL");const e=mD(s.storage,s._location,sD());return s.storage.makeRequestWithTokens(e,L2).then(n=>{if(n===null)throw BI();return n})}function _D(s,e){const n=eD(s._location.path,e),a=new Is(s._location.bucket,n);return new _l(s.storage,a)}function xD(s){return/^[A-Za-z]+:\/\//.test(s)}function wD(s,e){return new _l(s,e)}function V2(s,e){if(s instanceof ay){const n=s;if(n._bucket==null)throw VI();const a=new _l(n,n._bucket);return e!=null?V2(a,e):a}else return e!==void 0?_D(s,e):s}function TD(s,e){if(e&&xD(e)){if(s instanceof ay)return wD(s,e);throw Xp("To use ref(service, url), the first argument must be a Storage instance.")}else return V2(s,e)}function w_(s,e){const n=e?.[N2];return n==null?null:Is.makeFromBucketSpec(n,s)}function ED(s,e,n,a={}){s.host=`${e}:${n}`;const o=Ai(e);o&&(lg(`https://${s.host}/b`),og("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=a;u&&(s._overrideAuthToken=typeof u=="string"?u:rx(u,s.app.options.projectId))}class ay{constructor(e,n,a,o,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=S2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NI,this._maxUploadRetryTime=jI,this._requests=new Set,o!=null?this._bucket=Is.makeFromBucketSpec(o,this._host):this._bucket=w_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Is.makeFromBucketSpec(this._url,e):this._bucket=w_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Js(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _l(this,e)}_makeRequest(e,n,a,o,u=!0){if(this._deleted)return new zI(R2());{const d=JI(e,this._appId,a,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,o).getPromise()}}const T_="@firebase/storage",E_="0.14.0";const B2="storage";function k_(s){return s=Pn(s),yD(s)}function sd(s){return s=Pn(s),bD(s)}function Vc(s,e){return s=Pn(s),TD(s,e)}function kD(s=dg(),e){s=Pn(s);const a=jd(s,B2).getImmediate({identifier:e}),o=tx("storage");return o&&SD(a,...o),a}function SD(s,e,n,a={}){ED(s,e,n,a)}function ND(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),a=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new ay(n,a,o,e,xl)}function jD(){ml(new Ei(B2,ND,"PUBLIC").setMultipleInstances(!0)),Xr(T_,E_,""),Xr(T_,E_,"esm2020")}jD();const U2={apiKey:"AIzaSyBCIgMJd3By7qkWH27YiW9VooIBGE3bFLs",authDomain:"mind-core-fitness-client.firebaseapp.com",projectId:"mind-core-fitness-client",storageBucket:"mind-core-fitness-client.firebasestorage.app",messagingSenderId:"669343392406",appId:"1:669343392406:web:f5a35ee062387e7d6f58b7"},iy=hg(U2),Cc=Hx(iy),rt=hI(iy),Bc=kD(iy),RD=hg(U2,"secondary"),zM=Hx(RD),CD="EYdciKDOi3UYBLk1u8hHams5tmO2",z2=w.createContext();function ia(){return w.useContext(z2)}function AD({children:s}){const[e,n]=w.useState(null),[a,o]=w.useState(!1),[u,d]=w.useState(!1),[p,g]=w.useState(null),[y,_]=w.useState(!0);w.useEffect(()=>Yj(Cc,async le=>{if(n(le),le)if(le.uid===CD)o(!0),d(!1),g(null);else{o(!1);try{const ee=er(Es(rt,"clients"),Hs("uid","==",le.uid)),me=await tr(ee);if(me.empty)d(!1),g(null);else{const je=me.docs[0];d(!0),g({id:je.id,...je.data()})}}catch(ee){console.error("Error fetching client data:",ee),d(!1),g(null)}}else o(!1),d(!1),g(null);_(!1)}),[]);const B={currentUser:e,isAdmin:a,isClient:u,clientData:p,updateClientData:P=>{g(le=>le&&{...le,...P})},login:async(P,le,ee=!0)=>(await Wj(Cc,ee?Px:bg),await $j(Cc,P,le)),logout:()=>Qj(Cc),resetPassword:P=>qj(Cc,P),loading:y};return i.jsx(z2.Provider,{value:B,children:s})}const F2=w.createContext();function Pi(){return w.useContext(F2)}function ID({children:s}){const[e,n]=w.useState(()=>{const g=localStorage.getItem("theme");return g?g==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[a,o]=w.useState(()=>localStorage.getItem("accent")||"red");w.useEffect(()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light"),localStorage.setItem("theme",e?"dark":"light")},[e]),w.useEffect(()=>{localStorage.setItem("accent",a)},[a]);const p={isDark:e,toggleTheme:()=>{document.documentElement.setAttribute("data-theme-transitioning",""),n(!e),setTimeout(()=>{document.documentElement.removeAttribute("data-theme-transitioning")},350)},accent:a,setAccent:g=>o(g)};return i.jsx(F2.Provider,{value:p,children:s})}function DD(){const[s,e]=w.useState(""),[n,a]=w.useState(""),[o,u]=w.useState(!0),[d,p]=w.useState(""),[g,y]=w.useState(!1),[_,T]=w.useState(!1),[k,O]=w.useState(!1),{login:W,resetPassword:B,currentUser:P,isAdmin:le,isClient:ee,clientData:me,loading:je}=ia(),ze=qs();if(w.useEffect(()=>{if(!je&&P){if(le)ze("/dashboard");else if(ee){const S=me?.clientType;ze(S==="core_buddy"?"/client/core-buddy":S==="circuit_vip"||S==="circuit_dropin"?"/client/circuit":"/client")}}},[je,P,le,ee,me,ze]),je)return null;const Ae=async S=>{S.preventDefault(),p(""),y(!0);try{await W(s,n,o)}catch(C){p(C.message||"Failed to log in"),y(!1)}},A=async S=>{if(S.preventDefault(),p(""),!s.trim()){p("Please enter your email address");return}y(!0);try{await B(s.trim()),O(!0)}catch(C){C.code==="auth/user-not-found"?p("No account found with this email"):p(C.message||"Failed to send reset email")}y(!1)};return i.jsx("div",{className:"login-container",children:i.jsxs("div",{className:"login-card",children:[i.jsxs("div",{className:"login-header",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"login-logo"}),i.jsx("p",{children:_?"Reset Password":"Client Portal"})]}),d&&i.jsx("div",{className:"error-message",children:d}),k?i.jsxs("div",{className:"reset-sent",children:[i.jsx("div",{className:"reset-sent-icon",children:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M22 2L11 13",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M22 2L15 22L11 13L2 9L22 2Z",strokeLinecap:"round",strokeLinejoin:"round"})]})}),i.jsx("p",{children:"Reset email sent!"}),i.jsx("span",{children:"Check your inbox for a password reset link"}),i.jsx("button",{className:"login-btn",style:{marginTop:"20px"},onClick:()=>{T(!1),O(!1),p("")},children:"Back to Log In"})]}):_?i.jsxs("form",{onSubmit:A,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",children:"Email"}),i.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),placeholder:"Enter your email",required:!0})]}),i.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Sending...":"Send Reset Link"}),i.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!1),p("")},children:"Back to Log In"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:Ae,children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"email",children:"Email"}),i.jsx("input",{type:"email",id:"email",value:s,onChange:S=>e(S.target.value),required:!0})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"password",children:"Password"}),i.jsx("input",{type:"password",id:"password",value:n,onChange:S=>a(S.target.value),required:!0})]}),i.jsx("div",{className:"remember-me",children:i.jsxs("label",{children:[i.jsx("input",{type:"checkbox",checked:o,onChange:S=>u(S.target.checked)}),i.jsx("span",{children:"Remember me"})]})}),i.jsx("button",{type:"submit",className:"login-btn",disabled:g,children:g?"Logging in...":"Log In"})]}),i.jsx("button",{type:"button",className:"forgot-link",onClick:()=>{T(!0),p("")},children:"Forgot password?"})]}),i.jsx("a",{href:"/",className:"back-link",children:"Back to website"})]})})}function Sl({active:s}){const e=qs(),{clientData:n}=ia(),a=n?.clientType==="block"&&n?.coreBuddyAccess;return i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:`block-nav-tab${s==="home"?" active":""}`,onClick:()=>e("/client/core-buddy"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:`block-nav-tab${s==="workouts"?" active":""}`,onClick:()=>e("/client/core-buddy/workouts"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"})}),i.jsx("span",{children:"Workouts"})]}),i.jsxs("button",{className:`block-nav-tab${s==="nutrition"?" active":""}`,onClick:()=>e("/client/core-buddy/nutrition"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"})}),i.jsx("span",{children:"Nutrition"})]}),i.jsxs("button",{className:`block-nav-tab${s==="progress"?" active":""}`,onClick:()=>e("/client/personal-bests?mode=corebuddy"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"Progress"})]}),a&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>e("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),i.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),i.jsx("span",{children:"Block"})]})]})}function yu(s,e,n,a,o){const u=[];for(let d=0;d<s;d++){const p=(d*(360/s)-90)*(Math.PI/180);u.push({x1:e+a*Math.cos(p),y1:n+a*Math.sin(p),x2:e+o*Math.cos(p),y2:n+o*Math.sin(p),thick:d%5===0})}return u}const ly=yu(60,100,100,85,96),ul=yu(60,100,100,78,94),MD=yu(60,100,100,82,94);yu(60,50,50,38,46);const PD=yu(60,40,40,30,37),hp=[10,25,50,100,200,500,1e3],al=5;function S_(s){return s.toISOString().split("T")[0]}function LD(s){let e=0;for(const n of hp){if(s<n)return{prev:e,next:n};e=n}return{prev:hp[hp.length-1],next:s+100}}const OD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},VD={fullbody_4wk:["Push Focus","Pull Focus","Legs & Core"],fullbody_8wk:["Strength","Power","Endurance"],fullbody_12wk:["Upper Push","Lower Body","Upper Pull"],core_4wk:["Abs","Stability","Power Core"],core_8wk:["Anti-Extension","Rotation","Power"],core_12wk:["Strength","Endurance","Power"],upper_4wk:["Push","Pull","Mixed"],lower_4wk:["Quad Dominant","Hamstring & Glute","Power & Stability"]},dp=[{text:"You have 24 hours a day...",bold:"make it count"},{text:"Discipline beats motivation...",bold:"every single time"},{text:"Rest when you're done,",bold:"not when you're tired"},{text:"Small daily gains...",bold:"create massive results"},{text:"Your body keeps score,",bold:"train it well"},{text:"Consistency over intensity...",bold:"always wins"},{text:"The only bad workout...",bold:"is the one you skipped"}];function BD(){const{currentUser:s,isClient:e,clientData:n,logout:a,loading:o}=ia(),{isDark:u,toggleTheme:d}=Pi(),p=qs(),[g,y]=w.useState({hours:0,minutes:0,seconds:0}),[_,T]=w.useState(0),[k,O]=w.useState(0),[W,B]=w.useState(""),[P,le]=w.useState(0),[ee,me]=w.useState(0),[je,ze]=w.useState(!1),[Ae,A]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[S,C]=w.useState(null),[D,M]=w.useState(0),[U,I]=w.useState(null),[He,Et]=w.useState(!1),[Y,Se]=w.useState(!1),[Me,lt]=w.useState(0),[nt,V]=w.useState(0),[G,ye]=w.useState([]),[Ne,Be]=w.useState([]),[De,Ze]=w.useState(0),[at,ft]=w.useState(null);w.useCallback((pe,xe="info")=>{ft({message:pe,type:xe}),setTimeout(()=>ft(null),4e3)},[]),w.useEffect(()=>{!o&&!s&&p("/")},[o,s,p]),w.useEffect(()=>{const pe=()=>{const et=new Date,Ut=new Date(et);Ut.setHours(23,59,59,999);const Je=Ut-et,ot=Math.floor(Je/(1e3*60*60)),Zt=Math.floor(Je%(1e3*60*60)/(1e3*60)),xt=Math.floor(Je%(1e3*60)/1e3);y({hours:ot,minutes:Zt,seconds:xt}),T(60-xt)};pe();const xe=setInterval(pe,1e3);return()=>clearInterval(xe)},[]),w.useEffect(()=>{const pe=setInterval(()=>{Ze(xe=>(xe+1)%dp.length)},8e3);return()=>clearInterval(pe)},[]),w.useEffect(()=>{if(!s||!n)return;(async()=>{try{const xe=S_(new Date),et=await Wn(Nt(rt,"clientProgrammes",n.id));if(et.exists()){const At=et.data(),Mt=OD[At.templateId];if(Et(!0),Mt){const zt=At.completedSessions||{},bn=Object.keys(zt).length,St=Mt.duration*Mt.daysPerWeek;O(St>0?Math.round(bn/St*100):0);const un=At.templateId.replace(/_/g," ").replace(/\b\w/g,On=>On.toUpperCase());B(un);const An=VD[At.templateId];let mn=!1;for(let On=1;On<=Mt.duration&&!mn;On++)for(let Sn=0;Sn<Mt.daysPerWeek&&!mn;Sn++)zt[`w${On}d${Sn}`]||(I({week:On,dayIdx:Sn,label:An?.[Sn]||`Day ${Sn+1}`}),mn=!0);mn||Se(!0)}}const Ut=Es(rt,"workoutLogs"),Je=er(Ut,Hs("clientId","==",n.id)),ot=await tr(Je),Zt=ot.docs.filter(At=>At.data().type!=="programme").length;le(Zt);const xt=new Date,Xt=xt.getDay(),ce=Xt===0?6:Xt-1,de=new Date(xt);de.setDate(xt.getDate()-ce),de.setHours(0,0,0,0);const Ee=S_(de),$e=ot.docs.filter(At=>(At.data().date||"")>=Ee).length;lt($e);const Fe=Es(rt,"habitLogs"),Pe=er(Fe,Hs("clientId","==",n.id),Hs("date","==",xe)),We=await tr(Pe);let Ue=0;if(!We.empty){const At=We.docs[0].data().habits||{};Ue=Object.values(At).filter(Boolean).length}me(Math.round(Ue/al*100)),M(Ue);const Ve=await Wn(Nt(rt,"nutritionTargets",n.id));Ve.exists()&&C(Ve.data());const jt=await Wn(Nt(rt,"nutritionLogs",`${n.id}_${xe}`));if(jt.exists()){const Mt=(jt.data().entries||[]).reduce((zt,bn)=>({protein:zt.protein+(bn.protein||0),carbs:zt.carbs+(bn.carbs||0),fats:zt.fats+(bn.fats||0),calories:zt.calories+(bn.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});A(Mt)}}catch(xe){console.error("Error loading dashboard stats:",xe)}try{let xe=[];const et=await Wn(Nt(rt,"coreBuddyPBs",n.id));if(et.exists()){const Ut=et.data().exercises||{};V(Object.keys(Ut).length),xe=Object.entries(Ut).sort(([,Je],[,ot])=>(ot.weight||0)-(Je.weight||0)).slice(0,3).map(([Je,ot])=>({name:Je,weight:ot.weight,reps:ot.reps}))}if(xe.length===0){const Ut={chestPress:"Chest Press",shoulderPress:"Shoulder Press",seatedRow:"Seated Row",latPulldown:"Lat Pulldown",squat:"Squat",deadlift:"Deadlift"},Je=er(Es(rt,"personalBests"),Hs("clientId","==",n.id)),ot=await tr(Je);if(!ot.empty){const Zt={};ot.docs.forEach(Xt=>{const ce=Xt.data().benchmarks||{};Object.entries(ce).forEach(([de,Ee])=>{if(!Ee.weight||!Ut[de])return;const $e=(Ee.weight||0)*(Ee.reps||1);(!Zt[de]||$e>(Zt[de].weight||0)*(Zt[de].reps||1))&&(Zt[de]={name:Ut[de],weight:Ee.weight,reps:Ee.reps})})});const xt=Object.values(Zt);V(xt.length),xe=xt.sort((Xt,ce)=>(ce.weight||0)-(Xt.weight||0)).slice(0,3)}}ye(xe)}catch(xe){console.error("PB fetch error:",xe)}try{const xe=Es(rt,"clients"),et=er(xe,Hs("leaderboardOptIn","==",!0)),Je=(await tr(et)).docs.map(ot=>({id:ot.id,name:ot.data().name}));Be(Je.slice(0,3))}catch(xe){console.error("Leaderboard preview error:",xe)}ze(!0)})()},[s,n]);const Bt=pe=>{const xe=pe.currentTarget,et=xe.querySelector(".ripple");et&&et.remove();const Ut=xe.getBoundingClientRect(),Je=Math.max(Ut.width,Ut.height),ot=pe.clientX-Ut.left-Je/2,Zt=pe.clientY-Ut.top-Je/2,xt=document.createElement("span");xt.className="ripple",xt.style.cssText=`width:${Je}px;height:${Je}px;left:${ot}px;top:${Zt}px;`,xe.appendChild(xt),setTimeout(()=>xt.remove(),600)},fn=n?.name?.split(" ")[0]||"there",{prev:kt,next:vt}=LD(P),se=vt>kt?Math.round((P-kt)/(vt-kt)*100):100,an=[{label:"Programme",value:`${k}%`,pct:k,color:"#14b8a6",size:"normal"},{label:"Workouts",value:`${P}`,pct:se,color:"var(--color-primary)",size:"large"},{label:"Habits Today",value:`${ee}%`,pct:ee,color:"#38B6FF",size:"normal"}],Ct=pe=>!S||!S[pe]?0:Math.min(Math.round(Ae[pe]/S[pe]*100),100),gt=(()=>{const pe=new Date().getHours();return je&&D>=al&&Ae.calories>0?{main:"Smashed it today,",sub:"Rest up and go again tomorrow."}:pe>=5&&pe<12?{main:"Rise and grind,",sub:"let's get after it!"}:pe>=12&&pe<17?{main:"Oye",sub:"crack on and make it count!"}:pe>=17&&pe<21?{main:"Evening session?",sub:"Let's finish strong!"}:{main:"Burning the midnight oil,",sub:"Respect the hustle!"}})(),ht=je?He&&U&&!Y?{label:"NEXT SESSION",message:`Week ${U.week}, Day ${U.dayIdx+1}  ${U.label}`,cta:"Continue",action:()=>p("/client/core-buddy/programmes"),pct:k,ringLabel:`${k}%`}:D<al?{label:"DAILY HABITS",message:`${D}/${al} completed`,cta:"Open Habits",action:()=>p("/client/core-buddy/consistency"),pct:ee,ringLabel:`${D}/${al}`}:Ae.calories===0?{label:"NUTRITION",message:"No meals logged today",cta:"Log Meal",action:()=>p("/client/core-buddy/nutrition"),pct:0,ringLabel:"0"}:He?Y?{label:"COMPLETE",message:"Programme finished!",cta:"New Programme",action:()=>p("/client/core-buddy/workouts"),pct:100,ringLabel:"100%"}:{label:"TODAY",message:"You're crushing it!",cta:null,action:null,pct:100,ringLabel:""}:{label:"PROGRAMMES",message:"Start a programme to level up",cta:"Browse",action:()=>p("/client/core-buddy/workouts"),pct:0,ringLabel:""}:null;return i.jsxs("div",{className:"cb-dashboard","data-theme":u?"dark":"light",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsxs("div",{className:"header-actions",children:[i.jsx("button",{onClick:d,"aria-label":"Toggle theme",children:u?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),i.jsx("button",{onClick:a,"aria-label":"Log out",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),i.jsx("polyline",{points:"16 17 21 12 16 7"}),i.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})}),i.jsxs("main",{className:"cb-main",children:[i.jsxs("div",{className:"cb-ring-container",children:[i.jsxs("div",{className:"cb-ring",children:[i.jsx("svg",{className:"cb-ring-svg",viewBox:"0 0 200 200",children:ly.map((pe,xe)=>{const et=xe<_;return i.jsx("line",{x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,className:`ring-tick ${et?"elapsed":"remaining"}`,strokeWidth:pe.thick?"3":"2"},xe)})}),i.jsxs("div",{className:"cb-ring-center",children:[i.jsx("div",{className:"cb-ring-logo",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness"})}),i.jsxs("div",{className:"cb-ring-countdown",children:[i.jsx("span",{className:"cb-timer-digit",children:String(g.hours).padStart(2,"0")}),i.jsx("span",{className:"cb-timer-colon",children:":"}),i.jsx("span",{className:"cb-timer-digit",children:String(g.minutes).padStart(2,"0")}),i.jsx("span",{className:"cb-timer-colon",children:":"}),i.jsx("span",{className:"cb-timer-digit cb-timer-seconds",children:String(g.seconds).padStart(2,"0")})]}),i.jsx("div",{className:"cb-ring-label",children:"remaining today"})]})]}),i.jsxs("p",{className:"cb-ring-tagline",children:[dp[De].text," ",i.jsx("strong",{children:dp[De].bold})]},De)]}),i.jsx("div",{className:"cb-stats-row",children:an.map(pe=>{const xe=(pe.size==="large",38),et=2*Math.PI*xe,Ut=et-pe.pct/100*et;return i.jsxs("div",{className:`cb-stat-item${pe.size==="large"?" cb-stat-large":""}`,children:[i.jsxs("div",{className:"cb-stat-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-stat-track",cx:"50",cy:"50",r:xe}),i.jsx("circle",{className:"cb-stat-fill",cx:"50",cy:"50",r:xe,style:{stroke:pe.color},strokeDasharray:et,strokeDashoffset:Ut})]}),i.jsx("span",{className:"cb-stat-value",style:{color:pe.color},children:pe.value})]}),i.jsx("span",{className:"cb-stat-label",children:pe.label})]},pe.label)})}),i.jsxs("p",{className:"cb-coach-msg",children:[gt.main," ",i.jsx("strong",{children:fn}),"  ",gt.sub]}),ht&&i.jsxs("button",{className:"cb-nudge-card",onClick:ht.action||void 0,style:ht.action?void 0:{cursor:"default"},children:[i.jsxs("div",{className:"cb-nudge-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-nudge-ring-track",cx:"50",cy:"50",r:"38"}),i.jsx("circle",{className:"cb-nudge-ring-fill",cx:"50",cy:"50",r:"38",strokeDasharray:2*Math.PI*38,strokeDashoffset:2*Math.PI*38-ht.pct/100*2*Math.PI*38})]}),i.jsx("span",{className:"cb-nudge-ring-val",children:ht.ringLabel})]}),i.jsxs("div",{className:"cb-nudge-info",children:[i.jsx("span",{className:"cb-nudge-label",children:ht.label}),i.jsx("span",{className:"cb-nudge-title",children:ht.message}),ht.cta&&i.jsxs("span",{className:"cb-nudge-cta",children:[ht.cta," "]})]})]}),i.jsxs("div",{className:"cb-features",children:[i.jsxs("button",{className:"cb-feature-card cb-card-nutrition cb-card-has-preview ripple-btn",onClick:pe=>{Bt(pe),p("/client/core-buddy/nutrition")},children:[i.jsxs("div",{className:"cb-card-top-row",children:[i.jsx("div",{className:"cb-card-content",children:i.jsx("h3",{children:"Today's Nutrition"})}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsx("div",{className:"cb-card-preview-row",children:i.jsx("div",{className:"cb-mini-rings",children:[{label:"P",pct:Ct("protein"),color:"#14b8a6"},{label:"C",pct:Ct("carbs"),color:"var(--color-primary)"},{label:"F",pct:Ct("fats"),color:"#eab308"},{label:"Cal",pct:Ct("calories"),color:"#38B6FF"}].map(pe=>{const et=2*Math.PI*38,Ut=et-pe.pct/100*et;return i.jsxs("div",{className:"cb-mini-ring",children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cb-mini-track",cx:"50",cy:"50",r:38}),i.jsx("circle",{className:"cb-mini-fill",cx:"50",cy:"50",r:38,style:{stroke:pe.color},strokeDasharray:et,strokeDashoffset:Ut})]}),i.jsx("span",{style:{color:pe.color},children:pe.label})]},pe.label)})})}),i.jsx("p",{className:"cb-card-desc",children:"Track macros, scan barcodes, log water"})]}),i.jsxs("button",{className:"cb-feature-card cb-card-workouts-hero ripple-btn",onClick:pe=>{Bt(pe),p("/client/core-buddy/workouts")},children:[i.jsx("h3",{className:"cb-hero-title",children:"Workouts"}),i.jsxs("div",{className:"cb-hero-stats",children:[i.jsxs("span",{children:[Me," this week"]}),i.jsx("span",{className:"cb-hero-dot",children:""}),i.jsxs("span",{children:[P," total"]})]}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("div",{className:"cb-grid-row",children:[i.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-consistency ripple-btn",onClick:pe=>{Bt(pe),p("/client/core-buddy/consistency")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"Habits"}),i.jsx("div",{className:"cb-habit-dots",children:Array.from({length:al},(pe,xe)=>i.jsx("span",{className:`cb-habit-dot${xe<D?" done":""}`},xe))}),i.jsxs("span",{className:"cb-habit-dots-label",children:[D,"/",al," today"]})]}),i.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),i.jsxs("button",{className:"cb-feature-card cb-grid-card cb-card-progress ripple-btn",onClick:pe=>{Bt(pe),p("/client/personal-bests?mode=corebuddy")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"PBs"}),G.length>0?i.jsx("div",{className:"cb-pb-preview",children:G.slice(0,2).map(pe=>i.jsxs("div",{className:"cb-pb-entry",children:[i.jsx("span",{className:"cb-pb-name",children:pe.name}),i.jsxs("span",{className:"cb-pb-value",children:[pe.weight,"kg"]})]},pe.name))}):i.jsxs("div",{className:"cb-progress-preview",children:[i.jsx("svg",{className:"cb-progress-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),i.jsx("span",{children:"Start lifting!"})]})]}),i.jsx("svg",{className:"cb-card-arrow cb-grid-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]})]}),i.jsxs("button",{className:"cb-feature-card cb-card-leaderboard ripple-btn",onClick:pe=>{Bt(pe),p("/client/leaderboard")},children:[i.jsxs("div",{className:"cb-card-content",children:[i.jsx("h3",{children:"Leaderboard"}),Ne.length>0?i.jsx("div",{className:"cb-lb-preview",children:Ne.map((pe,xe)=>{const et=["#FFD700","#A8B4C0","#CD7F32"][xe],Ut=pe.name?pe.name.split(" ").map(ot=>ot[0]).join("").slice(0,2).toUpperCase():"?",Je=pe.id===n?.id;return i.jsxs("div",{className:`cb-lb-entry${Je?" cb-lb-me":""}`,children:[i.jsx("div",{className:"cb-lb-avatar",style:{borderColor:et},children:i.jsx("span",{children:Ut})}),i.jsxs("span",{className:"cb-lb-rank",style:{color:et},children:["#",xe+1]})]},pe.id)})}):i.jsx("p",{children:"Opt in to compete with your Core Buddies"})]}),i.jsx("svg",{className:"cb-card-arrow",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]})]})]}),i.jsx(Sl,{active:"home"}),at&&i.jsxs("div",{className:`toast-notification ${at.type}`,children:[at.type==="info"&&i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),i.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),at.message]})]})}const fp=new Map;function mi(){return new Date().toISOString().split("T")[0]}const UD=[{key:"breakfast",label:"Breakfast"},{key:"lunch",label:"Lunch"},{key:"dinner",label:"Dinner"},{key:"snacks",label:"Snacks"}],zD={breakfast:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),i.jsx("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),i.jsx("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),i.jsx("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),i.jsx("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),lunch:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),dinner:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),snacks:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})};function FD(){const s=new Date().getHours();return s<11?"breakfast":s<14?"lunch":s<17?"snacks":"dinner"}function HD(){const{currentUser:s,isClient:e,clientData:n,loading:a}=ia(),{isDark:o,toggleTheme:u,accent:d}=Pi(),p=qs(),[g,y]=w.useState("loading"),[_,T]=w.useState(null),[k,O]=w.useState({gender:"male",age:"",weight:"",weightUnit:"kg",height:"",heightUnit:"cm",heightFeet:"",heightInches:"",dailyActivity:"sedentary",trainingFrequency:"moderate",goal:"maintain",deficitLevel:"moderate"}),[W,B]=w.useState(null),[P,le]=w.useState(mi()),[ee,me]=w.useState({entries:[],water:0}),[je,ze]=w.useState({protein:0,carbs:0,fats:0,calories:0}),[Ae,A]=w.useState(!1),[S,C]=w.useState(!1),[D,M]=w.useState(()=>{const E=new Date;return{year:E.getFullYear(),month:E.getMonth()}}),[U,I]=w.useState(FD),[He,Et]=w.useState(null),[Y,Se]=w.useState(null),[Me,lt]=w.useState(!1),[nt,V]=w.useState(null),[G,ye]=w.useState(""),[Ne,Be]=w.useState(!1),[De,Ze]=w.useState(""),[at,ft]=w.useState([]),[Bt,fn]=w.useState(!1),[kt,vt]=w.useState({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),[se,an]=w.useState(null),[Ct,gt]=w.useState("100"),[ht,pe]=w.useState(0),[xe,et]=w.useState("weight"),[Ut,Je]=w.useState(0),[ot,Zt]=w.useState(null);w.useRef(null);const xt=w.useRef(!1),Xt=w.useRef(null),ce=w.useRef(null),de=w.useRef(null),Ee=w.useCallback((E,R="info")=>{Zt({message:E,type:R}),setTimeout(()=>Zt(null),3e3)},[]);w.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),w.useEffect(()=>{if(!n?.id)return;(async()=>{try{const R=await Wn(Nt(rt,"nutritionTargets",n.id));R.exists()?(T(R.data()),y("dashboard")):y("setup")}catch(R){console.error("Error loading nutrition data:",R),y("setup")}})()},[n?.id]),w.useEffect(()=>{if(!n?.id)return;(async()=>{try{const R=await Wn(Nt(rt,"nutritionLogs",`${n.id}_${P}`));if(R.exists()){const $=R.data();me({entries:$.entries||[],water:$.water||0})}else me({entries:[],water:0})}catch(R){console.error("Error loading log:",R),me({entries:[],water:0})}})()},[n?.id,P]),w.useEffect(()=>{const E=ee.entries.reduce((R,$)=>({protein:R.protein+($.protein||0),carbs:R.carbs+($.carbs||0),fats:R.fats+($.fats||0),calories:R.calories+($.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});ze(E)},[ee.entries]);const $e=async E=>{try{await $n(Nt(rt,"nutritionLogs",`${n.id}_${P}`),{clientId:n.id,date:P,entries:E.entries,water:E.water,updatedAt:it.now()})}catch(R){console.error("Error saving nutrition log:",R)}},Fe=P===mi(),Pe=(E,R)=>new Date(E,R+1,0).getDate(),We=(E,R)=>new Date(E,R,1).getDay(),Ue=["January","February","March","April","May","June","July","August","September","October","November","December"],Ve=["Su","Mo","Tu","We","Th","Fr","Sa"],jt=()=>{let E=parseFloat(k.weight);k.weightUnit==="lbs"&&(E*=.453592);let R;k.heightUnit==="cm"?R=parseFloat(k.height):R=(parseFloat(k.heightFeet)||0)*30.48+(parseFloat(k.heightInches)||0)*2.54;const $=parseInt(k.age);let X=k.gender==="male"?10*E+6.25*R-5*$+5:10*E+6.25*R-5*$-161;const Ie=X*{sedentary:1.2,light:1.3,moderate:1.4,active:1.5}[k.dailyActivity],Ce={low:100,moderate:200,high:300,daily:400},Pt=Math.round(Ie+Ce[k.trainingFrequency]);let pt=Pt,H,oe;switch(k.goal){case"lose":pt=Pt*(1-{light:.15,moderate:.2,harsh:.25}[k.deficitLevel]),H=2.2,oe=.3;break;case"build":pt=Pt*1.1,H=2,oe=.22;break;default:H=1.8,oe=.25}pt=Math.max(pt,k.gender==="male"?1400:1100);const ne=Math.round(E*H),ke=Math.round(pt*oe/9),Re=Math.max(0,Math.round((pt-ne*4-ke*9)/4));B({calories:Math.round(pt),protein:ne,carbs:Re,fats:ke,bmr:Math.round(X),neat:Math.round(Ie),exerciseAdd:Ce[k.trainingFrequency],tdee:Math.round(Pt)})},At=async()=>{if(W)try{const E={clientId:n.id,calories:W.calories,protein:W.protein,carbs:W.carbs,fats:W.fats,waterGoal:8,goal:k.goal,updatedAt:it.now()};await $n(Nt(rt,"nutritionTargets",n.id),E),T(E),y("dashboard"),Ee("Macro targets saved!","success")}catch(E){console.error("Error saving targets:",E),Ee("Failed to save targets. Please try again.","error")}},Mt=()=>{const E=k.weight&&parseFloat(k.weight)>0,R=k.age&&parseInt(k.age)>0,$=k.heightUnit==="cm"?k.height&&parseFloat(k.height)>0:k.heightFeet&&parseFloat(k.heightFeet)>0||k.heightInches&&parseFloat(k.heightInches)>0;return E&&R&&$},zt="nut_favourite_foods",bn=()=>{try{return JSON.parse(localStorage.getItem(zt)||"[]")}catch{return[]}},St=E=>bn().some(R=>R.name.toLowerCase()===(E||"").toLowerCase()),un=E=>{const R=bn(),$=R.findIndex(X=>X.name.toLowerCase()===E.name.toLowerCase());$>=0?R.splice($,1):R.unshift({name:E.name,protein:E.protein,carbs:E.carbs,fats:E.fats,calories:E.calories,serving:E.serving,per100g:E.per100g||null,servingUnit:E.servingUnit||"g",portion:E.portion||null}),localStorage.setItem(zt,JSON.stringify(R)),Je(X=>X+1)},An=E=>{const R=[...ee.entries,{...E,meal:U,id:Date.now(),addedAt:new Date().toISOString()}],$={...ee,entries:R};me($),$e($),Se(null),an(null),gt("100"),pe(0),et("weight"),vt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""}),Ee("Food added!","success")},mn=E=>{const R=ee.entries.filter(X=>X.id!==E),$={...ee,entries:R};me($),$e($)},On=w.useRef(null),Sn=async()=>{lt(!0);const E=document.querySelector("#barcode-reader");if(!E){lt(!1),Ee("Scanner container not found.","error");return}if(!On.current)try{const $=await yr(()=>import("./quagga.min-BbicSfvA.js").then(X=>X.q),[]);On.current=$.default}catch($){console.error("Failed to load barcode scanner:",$),lt(!1),Ee("Could not load scanner.","error");return}const R=On.current;R.init({inputStream:{type:"LiveStream",target:E,constraints:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:navigator.hardwareConcurrency||2,decoder:{readers:["ean_reader","ean_8_reader","upc_reader","upc_e_reader","code_128_reader","code_39_reader"]},locate:!0},$=>{if($){console.error("Quagga init error:",$),lt(!1),Ee("Could not access camera. Check permissions.","error");return}R.start(),xt.current=!0}),R.onDetected($=>{const X=$.codeResult.decodedCodes?.filter(Ie=>Ie.error!==void 0)?.map(Ie=>Ie.error)||[];if((X.length>0?X.reduce((Ie,Ce)=>Ie+Ce,0)/X.length:1)<.15){const Ie=$.codeResult.code;R.offDetected(),V(Ie)}})},In=()=>{const E=On.current;xt.current&&E&&(E.stop(),E.offDetected(),xt.current=!1),lt(!1)},os=/\b(milk|semi.skimmed|skimmed|whole milk|oat milk|almond milk|soy milk|juice|smoothie|water|squash|cordial|cola|pepsi|fanta|lemonade|soda|beer|wine|cider|lager|spirit|whisky|vodka|rum|gin|brandy|cream|yoghurt drink|milkshake|coffee|tea|broth|stock|soup|sauce|ketchup|vinegar|oil|syrup|honey|custard|coconut water|kombucha|energy drink|protein shake)\b/i,Ss=E=>/ml|cl|\dl(?!b)|litre|liter|fl\s?oz/i.test((E||"").replace(/\s/g,"")),vs=E=>{if(!E)return{value:100,unit:"g"};const R=E.toLowerCase().replace(/\s/g,""),$=R.match(/([\d.]+)/),X=$?parseFloat($[1]):100;return Ss(E)?/cl/.test(R)?{value:X*10,unit:"ml"}:/(?:^|\d)l(?!i)/.test(R)&&!/ml/.test(R)?{value:X*1e3,unit:"ml"}:{value:X,unit:"ml"}:{value:X,unit:"g"}},Ds=E=>{if(Ss(E.serving_size)||Ss(E.quantity))return"ml";const R=E.product_name||E.product_name_en||"";return os.test(R)?"ml":"g"},Ms=[{pattern:/\b(toast|bread|loaf|brioche|bagel|pitta|wrap|tortilla|crumpet|muffin|waffle|pancake)\b/i,label:"slice",weight:36},{pattern:/\begg\b/i,label:"egg",weight:60},{pattern:/\b(biscuit|cookie|digestive|hobnob|rich tea|oreo)\b/i,label:"biscuit",weight:13},{pattern:/\b(sausage|banger)\b/i,label:"sausage",weight:57},{pattern:/\b(rasher|bacon)\b/i,label:"rasher",weight:25},{pattern:/\b(rice cake)\b/i,label:"cake",weight:9},{pattern:/\b(cracker|ryvita)\b/i,label:"cracker",weight:10}],q=(E,R)=>{const $=E||"",X=$.match(/\((\d+\.?\d*)\s*g\)/i),Le=$.match(/(?:^|per\s+)(\d*\s*[a-z][a-z\s]*?)(?:\s*\(|\s*-\s*|\s*$)/i);if(X&&Le){const Pt=parseFloat(X[1]);let pt=Le[1].replace(/^\d+\s*/,"").trim();if(pt&&Pt>0)return{label:pt,weight:Pt}}const Ie=$.match(/(\d+\.?\d*)\s*g\s*[\/=]\s*(\d*\s*[a-z][a-z\s]*)/i);if(Ie){const Pt=parseFloat(Ie[1]);let pt=Ie[2].replace(/^\d+\s*/,"").trim();if(pt&&Pt>0)return{label:pt,weight:Pt}}const Ce=R||"";for(const{pattern:Pt,label:pt,weight:H}of Ms)if(Pt.test(Ce))return{label:pt,weight:H};return null},he=E=>{const R=E.nutriments||{},$=Ds(E),X=vs(E.serving_size),Le=$==="ml"?X.unit==="ml"?X.value:100:X.value,Ie=E.product_name||E.product_name_en||"Unknown Product",Ce=q(E.serving_size,Ie);return{name:Ie,brand:E.brands||"",image:E.image_small_url||E.image_url||null,servingSize:E.serving_size||"100g",servingValue:Le,servingUnit:$,portion:Ce,protein:Math.round(R.proteins_100g||R.proteins||0),carbs:Math.round(R.carbohydrates_100g||R.carbohydrates||0),fats:Math.round(R.fat_100g||R.fat||0),calories:Math.round(R["energy-kcal_100g"]||R["energy-kcal"]||(R.energy_100g?R.energy_100g/4.184:0)),per100g:!0}},be=async E=>{Be(!0);try{const R=`https://world.openfoodfacts.org/api/v2/product/${E}?fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,$=await fetch(R);if(!$.ok)throw new Error(`HTTP ${$.status}`);const X=await $.json();if(X.status==="success"||X.status===1||X.product){const Le=he(X.product);Le.calories===0&&Le.protein===0&&Le.carbs===0?Ee("Product found but no nutrition data available.","error"):(an(Le),Le.portion?(pe(1),gt(String(Le.portion.weight)),et("portion")):(pe(0),gt(String(Le.servingValue||100)),et("weight")),ye(""))}else Ee("Product not found. Try search or manual entry.","error")}catch(R){console.error("Barcode lookup error:",R),Ee("Failed to look up product. Check your connection.","error")}Be(!1)},ge=(E,R,$)=>{const X=E.toLowerCase().trim(),Le=R.toLowerCase().trim(),Ie=$.toLowerCase().trim();let Ce=0;return(X===Ie||X===Ie+"s"||X+"s"===Ie)&&(Ce+=100),(X.endsWith(" "+Ie)||X.endsWith(" "+Ie+"s"))&&(Ce+=40),(X.startsWith(Ie+" ")||X.startsWith(Ie+"s "))&&(Ce+=15),Ie.split(/\s+/).some(pt=>Le===pt||Le.startsWith(pt))&&(Ce+=30),Ce+=Math.max(0,30-X.length),Ce},ue=async()=>{if(!De.trim())return;Xt.current&&Xt.current.abort();const E=new AbortController;Xt.current=E;const R=De.trim().toLowerCase(),$=R.split(/\s+/).filter(Boolean);if(fp.has(R)){ft(fp.get(R));return}fn(!0);try{const Le=`https://world.openfoodfacts.org/cgi/search.pl?search_terms=${encodeURIComponent(De.trim())}&search_simple=1&action=process&json=1&page_size=10&lc=en&sort_by=unique_scans_n&fields=product_name,product_name_en,brands,image_small_url,image_url,serving_size,quantity,nutriments`,Ie=await fetch(Le,{signal:E.signal});if(!Ie.ok)throw new Error(`HTTP ${Ie.status}`);const Pt=((await Ie.json()).products||[]).map(pt=>he(pt)).filter(pt=>pt.name!=="Unknown Product"&&(pt.calories>0||pt.protein>0)).filter(pt=>{const H=(pt.name+" "+pt.brand).toLowerCase();return $.every(oe=>H.includes(oe))}).sort((pt,H)=>ge(H.name,H.brand,R)-ge(pt.name,pt.brand,R)).slice(0,10);fp.set(R,Pt),ft(Pt),Pt.length===0&&Ee("No results found. Try a different search.","info")}catch(X){if(X.name==="AbortError")return;console.error("Search error:",X),Ee("Search failed. Check your connection.","error")}fn(!1)};w.useEffect(()=>{if(ce.current&&clearTimeout(ce.current),!(!De.trim()||Y!=="search"||se))return ce.current=setTimeout(()=>{ue()},700),()=>clearTimeout(ce.current)},[De]);const Ke=()=>{const E={...ee,water:ee.water+1};me(E),$e(E)},Tt=()=>{if(ee.water<=0)return;const E={...ee,water:ee.water-1};me(E),$e(E)},tt={"ring-protein":"#14b8a6","ring-carbs":"var(--color-primary)","ring-fats":"#eab308","ring-cals":"rgba(150,150,150,0.55)"},mt=80,dt=2*Math.PI*mt,en=(E,R,$,X,Le)=>{const Ie=X>0?Math.min(100,Math.round($/X*100)):0,Ce=dt-Ie/100*dt,Pt=tt[Le]||"#14b8a6";return i.jsxs("div",{className:"nut-ring-wrap",children:[i.jsxs("svg",{className:"nut-ring-svg",viewBox:"0 0 200 200",children:[i.jsx("circle",{className:"nut-arc-track",cx:"100",cy:"100",r:mt}),i.jsx("circle",{className:"nut-arc-fill",cx:"100",cy:"100",r:mt,style:{stroke:Pt},strokeDasharray:dt,strokeDashoffset:Ce})]}),i.jsxs("div",{className:"nut-ring-center",children:[i.jsx("span",{className:"nut-ring-value",style:{color:Pt},children:Math.round($)}),i.jsxs("span",{className:"nut-ring-target",children:["/ ",X,E==="Calories"?"":"g"]}),i.jsx("span",{className:"nut-ring-label",style:{color:Pt},children:R})]}),i.jsxs("span",{className:"nut-ring-pct",style:{color:Pt},children:[Ie,"%"]})]})};if(w.useEffect(()=>{if(!nt)return;const E=setTimeout(()=>{const R=nt;In(),V(null),be(R)},1500);return()=>clearTimeout(E)},[nt]),w.useEffect(()=>()=>{const E=On.current;if(xt.current&&E){try{E.stop(),E.offDetected()}catch{}xt.current=!1}},[]),a||g==="loading")return i.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsx("div",{className:"nut-loading-inline",children:i.jsx("div",{className:"cb-loading-spinner"})})]});if(g==="setup")return i.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"nut-main",children:[i.jsxs("div",{className:"nut-setup-intro",children:[i.jsx("h2",{children:"Set Your Daily Targets"}),i.jsx("p",{children:"Calculate your personalised macros based on your body and goals."})]}),i.jsxs("div",{className:"nut-calc-form",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Gender"}),i.jsxs("div",{className:"nut-toggle-group",children:[i.jsx("button",{className:k.gender==="male"?"active":"",onClick:()=>{O(E=>({...E,gender:"male"})),B(null)},children:"Male"}),i.jsx("button",{className:k.gender==="female"?"active":"",onClick:()=>{O(E=>({...E,gender:"female"})),B(null)},children:"Female"})]})]}),i.jsxs("div",{className:"nut-form-row",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Age"}),i.jsx("input",{type:"number",value:k.age,onChange:E=>{O(R=>({...R,age:E.target.value})),B(null)},placeholder:"Years",min:"15",max:"100"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Weight"}),i.jsxs("div",{className:"nut-input-unit",children:[i.jsx("input",{type:"number",value:k.weight,onChange:E=>{O(R=>({...R,weight:E.target.value})),B(null)},placeholder:k.weightUnit,min:"30",max:"300"}),i.jsxs("div",{className:"nut-unit-toggle",children:[i.jsx("button",{className:k.weightUnit==="kg"?"active":"",onClick:()=>{O(E=>({...E,weightUnit:"kg"})),B(null)},children:"kg"}),i.jsx("button",{className:k.weightUnit==="lbs"?"active":"",onClick:()=>{O(E=>({...E,weightUnit:"lbs"})),B(null)},children:"lbs"})]})]})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Height"}),i.jsxs("div",{className:"nut-input-unit",children:[k.heightUnit==="cm"?i.jsx("input",{type:"number",value:k.height,onChange:E=>{O(R=>({...R,height:E.target.value})),B(null)},placeholder:"cm",min:"100",max:"250"}):i.jsxs("div",{className:"nut-height-imperial",children:[i.jsx("input",{type:"number",value:k.heightFeet,onChange:E=>{O(R=>({...R,heightFeet:E.target.value})),B(null)},placeholder:"ft",min:"4",max:"7"}),i.jsx("input",{type:"number",value:k.heightInches,onChange:E=>{O(R=>({...R,heightInches:E.target.value})),B(null)},placeholder:"in",min:"0",max:"11"})]}),i.jsxs("div",{className:"nut-unit-toggle",children:[i.jsx("button",{className:k.heightUnit==="cm"?"active":"",onClick:()=>{O(E=>({...E,heightUnit:"cm"})),B(null)},children:"cm"}),i.jsx("button",{className:k.heightUnit==="ft"?"active":"",onClick:()=>{O(E=>({...E,heightUnit:"ft"})),B(null)},children:"ft/in"})]})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Daily Activity (outside of training)"}),i.jsxs("select",{value:k.dailyActivity,onChange:E=>{O(R=>({...R,dailyActivity:E.target.value})),B(null)},children:[i.jsx("option",{value:"sedentary",children:"Sedentary  desk job, under 5k steps"}),i.jsx("option",{value:"light",children:"Lightly Active  office + walking, 5-8k steps"}),i.jsx("option",{value:"moderate",children:"Moderately Active  on feet often, 8-12k steps"}),i.jsx("option",{value:"active",children:"Very Active  physical job, 12k+ steps"})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Training Sessions per Week"}),i.jsxs("select",{value:k.trainingFrequency,onChange:E=>{O(R=>({...R,trainingFrequency:E.target.value})),B(null)},children:[i.jsx("option",{value:"low",children:"1-2 sessions"}),i.jsx("option",{value:"moderate",children:"3-4 sessions"}),i.jsx("option",{value:"high",children:"5-6 sessions"}),i.jsx("option",{value:"daily",children:"7+ sessions"})]})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Fitness Goal"}),i.jsxs("div",{className:"nut-goal-options",children:[i.jsxs("button",{className:k.goal==="lose"?"active":"",onClick:()=>{O(E=>({...E,goal:"lose"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"-"}),i.jsx("span",{children:"Lose Weight"})]}),i.jsxs("button",{className:k.goal==="maintain"?"active":"",onClick:()=>{O(E=>({...E,goal:"maintain"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"="}),i.jsx("span",{children:"Maintain"})]}),i.jsxs("button",{className:k.goal==="build"?"active":"",onClick:()=>{O(E=>({...E,goal:"build"})),B(null)},children:[i.jsx("span",{className:"nut-goal-icon",children:"+"}),i.jsx("span",{children:"Build Muscle"})]})]})]}),k.goal==="lose"&&i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Deficit Level"}),i.jsxs("div",{className:"nut-deficit-options",children:[i.jsxs("button",{className:k.deficitLevel==="light"?"active":"",onClick:()=>{O(E=>({...E,deficitLevel:"light"})),B(null)},children:[i.jsx("strong",{children:"Mild"}),i.jsx("span",{children:"15% below TDEE"})]}),i.jsxs("button",{className:k.deficitLevel==="moderate"?"active":"",onClick:()=>{O(E=>({...E,deficitLevel:"moderate"})),B(null)},children:[i.jsx("strong",{children:"Moderate"}),i.jsx("span",{children:"20% below TDEE"})]}),i.jsxs("button",{className:k.deficitLevel==="harsh"?"active":"",onClick:()=>{O(E=>({...E,deficitLevel:"harsh"})),B(null)},children:[i.jsx("strong",{children:"Aggressive"}),i.jsx("span",{children:"25% below TDEE"})]})]})]}),i.jsx("button",{className:"nut-calc-btn",onClick:jt,disabled:!Mt(),children:"Calculate Macros"})]}),W&&i.jsxs("div",{className:"nut-calc-results",children:[i.jsx("h3",{children:"Your Daily Targets"}),i.jsxs("div",{className:"nut-calc-rings",children:[en("Protein","Protein",W.protein,W.protein,"ring-protein"),en("Carbs","Carbs",W.carbs,W.carbs,"ring-carbs"),en("Fats","Fats",W.fats,W.fats,"ring-fats"),en("Calories","Calories",W.calories,W.calories,"ring-cals")]}),i.jsxs("div",{className:"nut-calc-info",children:[i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"BMR (body at rest)"}),i.jsxs("span",{children:[W.bmr," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"+ Daily activity (NEAT)"}),i.jsxs("span",{children:[W.neat," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",children:[i.jsx("span",{children:"+ Training sessions"}),i.jsxs("span",{children:["+",W.exerciseAdd," cal"]})]}),i.jsxs("div",{className:"nut-calc-info-row",style:{fontWeight:600},children:[i.jsx("span",{children:"TDEE (total burn)"}),i.jsxs("span",{children:[W.tdee," cal"]})]})]}),i.jsx("button",{className:"nut-save-targets-btn",onClick:At,children:"Set as My Daily Targets"})]})]}),ot&&i.jsx("div",{className:`toast-notification ${ot.type}`,children:ot.message})]});const Ps=E=>{const R=new Date(E+"T12:00:00"),$=R.getDay(),X=new Date(R);X.setDate(R.getDate()-($+6)%7);const Le=[];for(let Ie=0;Ie<7;Ie++){const Ce=new Date(X);Ce.setDate(X.getDate()+Ie),Le.push(Ce.toISOString().split("T")[0])}return Le},ss=["M","T","W","T","F","S","S"],Ns=(E,R="search")=>{I(E),R==="scan"?(Se("scan"),an(null)):R==="manual"?(Se("manual"),vt({name:"",protein:"",carbs:"",fats:"",calories:"",serving:""})):R==="favourites"?Se("favourites"):(Se("search"),ft([]),Ze(""))},wn=Ps(P),z=new Date(P+"T12:00:00"),ae=`${Ue[z.getMonth()]} ${z.getFullYear()}`;return i.jsxs("div",{className:"nut-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"nut-dark-zone",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsxs("div",{className:"header-actions",children:[i.jsx("button",{onClick:()=>{y("setup"),B(null)},"aria-label":"Recalculate macros",children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})]})]})}),i.jsxs("div",{className:"nut-dark-content",children:[i.jsxs("div",{className:"nut-week-strip",children:[i.jsxs("div",{className:"nut-week-header",children:[i.jsx("button",{className:"nut-week-arrow",onClick:()=>{const E=new Date(P+"T12:00:00");E.setDate(E.getDate()-7);const R=E.toISOString().split("T")[0];le(R)},"aria-label":"Previous week",children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:i.jsx("polyline",{points:"15 18 9 12 15 6"})})}),i.jsx("button",{className:"nut-week-month-label",onClick:()=>{A(!Ae),M({year:z.getFullYear(),month:z.getMonth()})},children:ae}),i.jsx("button",{className:"nut-week-arrow",onClick:()=>{const E=new Date(P+"T12:00:00");E.setDate(E.getDate()+7);const R=E.toISOString().split("T")[0];R<=mi()&&le(R)},"aria-label":"Next week",disabled:wn[6]>=mi(),children:i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:i.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),i.jsx("div",{className:"nut-week-days",children:wn.map((E,R)=>{const $=new Date(E+"T12:00:00").getDate(),X=E===P,Le=E>mi(),Ie=E===mi();return i.jsxs("button",{className:`nut-week-day${X?" selected":""}${Ie?" today":""}${Le?" future":""}`,disabled:Le,onClick:()=>le(E),children:[i.jsx("span",{className:"nut-week-day-letter",children:ss[R]}),i.jsx("span",{className:"nut-week-day-num",children:$})]},E)})})]}),Ae&&i.jsxs("div",{className:"nut-calendar nut-calendar-dark",children:[i.jsxs("div",{className:"nut-cal-header",children:[i.jsx("button",{onClick:()=>M(E=>{let R=E.month-1,$=E.year;return R<0&&(R=11,$--),{year:$,month:R}}),children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("polyline",{points:"15 18 9 12 15 6"})})}),i.jsxs("span",{children:[Ue[D.month]," ",D.year]}),i.jsx("button",{onClick:()=>M(E=>{let R=E.month+1,$=E.year;return R>11&&(R=0,$++),{year:$,month:R}}),disabled:D.year===new Date().getFullYear()&&D.month>=new Date().getMonth(),children:i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),i.jsx("div",{className:"nut-cal-days-header",children:Ve.map(E=>i.jsx("span",{children:E},E))}),i.jsxs("div",{className:"nut-cal-grid",children:[[...Array(We(D.year,D.month))].map((E,R)=>i.jsx("span",{},`e${R}`)),[...Array(Pe(D.year,D.month))].map((E,R)=>{const $=R+1,X=`${D.year}-${String(D.month+1).padStart(2,"0")}-${String($).padStart(2,"0")}`,Le=X>mi(),Ie=X===P,Ce=X===mi();return i.jsx("button",{className:`nut-cal-day${Ie?" selected":""}${Ce?" today":""}${Le?" future":""}`,disabled:Le,onClick:()=>{le(X),A(!1)},children:$},$)})]})]}),i.jsxs("div",{className:"nut-rings-row",children:[en("Protein","Protein",je.protein,_.protein,"ring-protein"),en("Carbs","Carbs",je.carbs,_.carbs,"ring-carbs"),en("Fats","Fats",je.fats,_.fats,"ring-fats"),en("Calories","kCal",je.calories,_.calories,"ring-cals")]})]})]}),i.jsx("div",{className:"nut-light-zone",children:i.jsxs("div",{className:"nut-light-content",children:[Fe&&i.jsxs("button",{className:"nut-water-quick",onClick:()=>C(!0),children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"18",height:"18",children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),i.jsxs("span",{className:"nut-water-quick-count",children:[ee.water," / ",_?.waterGoal||8]}),i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",width:"14",height:"14",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})]}),i.jsx("div",{className:"nut-log-section",children:i.jsx("div",{className:"nut-meals-list",children:UD.map(E=>{const R=ee.entries.filter(X=>(X.meal||"snacks")===E.key),$=R.reduce((X,Le)=>({protein:X.protein+(Le.protein||0),carbs:X.carbs+(Le.carbs||0),fats:X.fats+(Le.fats||0),calories:X.calories+(Le.calories||0)}),{protein:0,carbs:0,fats:0,calories:0});return i.jsxs("div",{className:"nut-meal-card",children:[i.jsxs("div",{className:"nut-meal-card-header",children:[i.jsx("span",{className:`nut-meal-card-icon nut-meal-icon-${E.key}`,children:zD[E.key]}),i.jsx("span",{className:"nut-meal-card-title",children:E.label}),R.length>0&&i.jsxs("span",{className:"nut-meal-card-cal",children:[$.calories," cal"]}),Fe&&i.jsxs("div",{className:"nut-add-wrapper",children:[i.jsx("button",{className:"nut-meal-add-btn",onClick:()=>Et(He===E.key?null:E.key),"aria-label":`Add to ${E.label}`,children:i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[i.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),i.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),He===E.key&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"nut-add-picker-backdrop",onClick:()=>Et(null)}),i.jsxs("div",{className:"nut-add-picker",children:[i.jsxs("button",{onClick:()=>{Et(null),Ns(E.key,"scan")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),i.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),i.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),i.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),i.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),i.jsx("span",{children:"Scan"})]}),i.jsxs("button",{onClick:()=>{Et(null),Ns(E.key,"search")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),i.jsx("span",{children:"Search"})]}),i.jsxs("button",{onClick:()=>{Et(null),Ns(E.key,"manual")},children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),i.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),i.jsx("span",{children:"Manual"})]}),i.jsxs("button",{onClick:()=>{Et(null),Ns(E.key,"favourites")},children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),i.jsx("span",{children:"Favs"})]})]})]})]})]}),R.length>0&&i.jsxs("div",{className:"nut-meal-bars",children:[i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-p",children:"P"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-protein",style:{width:`${Math.min(100,_.protein>0?$.protein/_.protein*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[$.protein,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-c",children:"C"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-carbs",style:{width:`${Math.min(100,_.carbs>0?$.carbs/_.carbs*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[$.carbs,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-f",children:"F"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-fats",style:{width:`${Math.min(100,_.fats>0?$.fats/_.fats*100:0)}%`}})}),i.jsxs("span",{className:"nut-meal-bar-val",children:[$.fats,"g"]})]}),i.jsxs("div",{className:"nut-meal-bar-row",children:[i.jsx("span",{className:"nut-meal-bar-label nut-macro-cal",children:"K"}),i.jsx("div",{className:"nut-meal-bar-track",children:i.jsx("div",{className:"nut-meal-bar-fill bar-cals",style:{width:`${Math.min(100,_.calories>0?$.calories/_.calories*100:0)}%`}})}),i.jsx("span",{className:"nut-meal-bar-val",children:$.calories})]})]}),R.length>0&&i.jsx("div",{className:"nut-log-list",children:R.map(X=>i.jsxs("div",{className:"nut-log-item",children:[i.jsxs("div",{className:"nut-log-item-info",children:[i.jsx("span",{className:"nut-log-item-name",children:X.name}),X.serving&&i.jsx("span",{className:"nut-log-item-serving",children:X.serving})]}),i.jsxs("div",{className:"nut-log-item-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[X.protein,"p"]}),i.jsxs("span",{className:"nut-macro-c",children:[X.carbs,"c"]}),i.jsxs("span",{className:"nut-macro-f",children:[X.fats,"f"]}),i.jsx("span",{className:"nut-macro-cal",children:X.calories})]}),Fe&&i.jsx("button",{className:"nut-log-delete",onClick:()=>mn(X.id),"aria-label":"Remove",children:i.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},X.id))}),R.length===0&&i.jsx("div",{className:"nut-meal-empty",children:i.jsx("p",{children:Fe?"Tap + to add food":"No entries"})})]},E.key)})})})]})}),S&&i.jsx("div",{className:"nut-modal-overlay",onClick:()=>C(!1),children:i.jsxs("div",{className:"nut-water-popup",onClick:E=>E.stopPropagation(),children:[i.jsxs("div",{className:"nut-water-popup-header",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",width:"20",height:"20",style:{color:"#2196f3"},children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})}),i.jsx("span",{children:"Water Intake"}),i.jsx("button",{className:"nut-modal-close",onClick:()=>C(!1),children:i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),i.jsxs("div",{className:"nut-water-popup-body",children:[i.jsx("div",{className:"nut-water-glasses",children:[...Array(_?.waterGoal||8)].map((E,R)=>i.jsx("div",{className:`nut-water-glass ${R<ee.water?"filled":""}`,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:R<ee.water?"currentColor":"none",stroke:"currentColor",strokeWidth:"1.5",children:i.jsx("path",{d:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"})})},R))}),i.jsxs("div",{className:"nut-water-popup-count",children:[ee.water," / ",_?.waterGoal||8," glasses"]}),i.jsxs("div",{className:"nut-water-btns",children:[i.jsx("button",{onClick:Tt,disabled:ee.water<=0,children:"-"}),i.jsx("button",{onClick:Ke,children:"+"})]})]})]})}),Y&&i.jsx("div",{className:"nut-modal-overlay",onClick:()=>{In(),V(null),Se(null),an(null)},children:i.jsxs("div",{className:"nut-modal",onClick:E=>E.stopPropagation(),children:[i.jsxs("div",{className:"nut-modal-header",children:[i.jsx("h3",{children:Y==="scan"?"Scan Barcode":Y==="search"?"Search Food":Y==="favourites"?"Favourites":"Manual Entry"}),i.jsx("button",{className:"nut-modal-close",onClick:()=>{In(),V(null),Se(null),an(null)},children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),Y==="scan"&&!se&&i.jsxs("div",{className:"nut-scan-area",children:[i.jsxs("div",{className:"nut-scanner-wrapper",children:[i.jsx("div",{id:"barcode-reader",className:"nut-scanner-view"}),Me&&!nt&&i.jsx("div",{className:"nut-scan-line"}),nt&&i.jsxs("div",{className:"nut-scan-detected-overlay",children:[i.jsx("svg",{className:"nut-scan-detected-tick",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})}),i.jsx("p",{className:"nut-scan-detected-label",children:"Barcode found!"}),i.jsx("p",{className:"nut-scan-detected-code",children:nt})]})]}),!Me&&i.jsxs("button",{className:"nut-scan-start-btn",onClick:Sn,children:[i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}),i.jsx("path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}),i.jsx("path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}),i.jsx("path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}),i.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12"})]}),"Open Camera"]}),Me&&!nt&&i.jsx("p",{className:"nut-scan-hint",children:"Align barcode within the frame"}),i.jsx("div",{className:"nut-barcode-divider",children:i.jsx("span",{children:"or enter barcode manually"})}),i.jsxs("div",{className:"nut-barcode-manual",children:[i.jsx("input",{type:"text",inputMode:"numeric",value:G,onChange:E=>ye(E.target.value),onKeyDown:E=>E.key==="Enter"&&G.trim()&&be(G.trim()),placeholder:"Enter barcode number"}),i.jsx("button",{onClick:()=>G.trim()&&be(G.trim()),disabled:!G.trim()||Ne,children:Ne?"...":"Look Up"})]})]}),Y==="scan"&&se&&(()=>{const E=se.servingUnit||"g",R=se.portion,$=xe==="portion"&&R?ht*R.weight:parseFloat(Ct)||0,X=$/100,Le=E==="ml"?[100,200,250,500]:[50,100,150,200],Ie=xe==="portion"&&R?`${ht} ${R.label}${ht!==1?"s":""} (${Math.round($)}${E})`:`${Math.round($)}${E}`;return i.jsxs("div",{className:"nut-product-result",children:[se.image&&i.jsx("img",{src:se.image,alt:se.name||"Product",className:"nut-product-img",loading:"lazy"}),i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:se.name}),i.jsx("button",{className:`nut-fav-star confirm${St(se.name)?" active":""}`,onClick:()=>un({name:se.name,protein:se.protein,carbs:se.carbs,fats:se.fats,calories:se.calories,serving:se.servingSize,per100g:{protein:se.protein,carbs:se.carbs,fats:se.fats,calories:se.calories},servingUnit:se.servingUnit||"g",portion:se.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:St(se.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),se.brand&&i.jsx("p",{className:"nut-product-brand",children:se.brand}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",E,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[se.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[se.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[se.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[se.calories," cal"]})]}),R&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:xe==="portion"?"active":"",onClick:()=>{et("portion"),ht<1&&pe(1)},children:"Portions"}),i.jsxs("button",{className:xe==="weight"?"active":"",onClick:()=>{et("weight"),gt(String(Math.round($)||100))},children:["Custom (",E,")"]})]}),xe==="portion"&&R?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>pe(Math.max(1,ht-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:ht}),i.jsxs("span",{className:"nut-stepper-label",children:[R.label,ht!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round($),E]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>pe(ht+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",E,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:Ct,onChange:Ce=>gt(Ce.target.value),onFocus:Ce=>Ce.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Le.map(Ce=>i.jsxs("button",{className:`nut-quick-btn${Ct===String(Ce)?" active":""}`,onClick:()=>gt(String(Ce)),children:[Ce,E]},Ce))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(se.protein*X),"p / ",Math.round(se.carbs*X),"c / ",Math.round(se.fats*X),"f / ",Math.round(se.calories*X)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>{an(null),Se("scan")},children:"Scan Again"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>An({name:se.name,protein:Math.round(se.protein*X),carbs:Math.round(se.carbs*X),fats:Math.round(se.fats*X),calories:Math.round(se.calories*X),serving:Ie}),children:"Add"})]})]})})(),Y==="search"&&!se&&i.jsxs("div",{className:"nut-search-area",children:[i.jsxs("div",{className:"nut-search-bar",children:[i.jsx("input",{type:"text",ref:de,value:De,onChange:E=>Ze(E.target.value),onKeyDown:E=>{E.key==="Enter"&&(clearTimeout(ce.current),ue())},onFocus:()=>setTimeout(()=>de.current?.scrollIntoView({behavior:"smooth",block:"center"}),350),placeholder:"Search food or product...",autoFocus:!0}),i.jsx("button",{onClick:ue,disabled:Bt,children:Bt?"...":"Search"})]}),i.jsxs("div",{className:"nut-search-results",children:[at.map((E,R)=>i.jsxs("button",{className:"nut-search-item",onClick:()=>{an(E),E.portion?(pe(1),gt(String(E.portion.weight)),et("portion")):(pe(0),gt(String(E.servingValue||100)),et("weight"))},children:[E.image&&i.jsx("img",{src:E.image,alt:E.name||"Product",loading:"lazy"}),i.jsxs("div",{className:"nut-search-item-info",children:[i.jsx("span",{className:"nut-search-item-name",children:E.name}),E.brand&&i.jsx("span",{className:"nut-search-item-brand",children:E.brand}),i.jsxs("span",{className:"nut-search-item-macros",children:[E.calories," cal  ",E.protein,"p  ",E.carbs,"c  ",E.fats,"f per 100",E.servingUnit||"g"]})]})]},R)),at.length===0&&De&&!Bt&&i.jsx("p",{className:"nut-search-empty",children:"No results found. Try a different search or use manual entry."})]})]}),Y==="search"&&se&&(()=>{const E=se.servingUnit||"g",R=se.portion,$=xe==="portion"&&R?ht*R.weight:parseFloat(Ct)||0,X=$/100,Le=E==="ml"?[100,200,250,500]:[50,100,150,200],Ie=xe==="portion"&&R?`${ht} ${R.label}${ht!==1?"s":""} (${Math.round($)}${E})`:`${Math.round($)}${E}`;return i.jsxs("div",{className:"nut-product-result",children:[se.image&&i.jsx("img",{src:se.image,alt:se.name||"Product",className:"nut-product-img",loading:"lazy"}),i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:se.name}),i.jsx("button",{className:`nut-fav-star confirm${St(se.name)?" active":""}`,onClick:()=>un({name:se.name,protein:se.protein,carbs:se.carbs,fats:se.fats,calories:se.calories,serving:se.servingSize,per100g:{protein:se.protein,carbs:se.carbs,fats:se.fats,calories:se.calories},servingUnit:se.servingUnit||"g",portion:se.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:St(se.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),se.brand&&i.jsx("p",{className:"nut-product-brand",children:se.brand}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",E,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[se.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[se.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[se.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[se.calories," cal"]})]}),R&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:xe==="portion"?"active":"",onClick:()=>{et("portion"),ht<1&&pe(1)},children:"Portions"}),i.jsxs("button",{className:xe==="weight"?"active":"",onClick:()=>{et("weight"),gt(String(Math.round($)||100))},children:["Custom (",E,")"]})]}),xe==="portion"&&R?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>pe(Math.max(1,ht-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:ht}),i.jsxs("span",{className:"nut-stepper-label",children:[R.label,ht!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round($),E]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>pe(ht+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",E,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:Ct,onChange:Ce=>gt(Ce.target.value),onFocus:Ce=>Ce.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Le.map(Ce=>i.jsxs("button",{className:`nut-quick-btn${Ct===String(Ce)?" active":""}`,onClick:()=>gt(String(Ce)),children:[Ce,E]},Ce))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(se.protein*X),"p / ",Math.round(se.carbs*X),"c / ",Math.round(se.fats*X),"f / ",Math.round(se.calories*X)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>an(null),children:"Back to Search"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>An({name:se.name,protein:Math.round(se.protein*X),carbs:Math.round(se.carbs*X),fats:Math.round(se.fats*X),calories:Math.round(se.calories*X),serving:Ie}),children:"Add"})]})]})})(),Y==="manual"&&i.jsxs("div",{className:"nut-manual-form",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Food Name"}),i.jsx("input",{type:"text",value:kt.name,onChange:E=>vt(R=>({...R,name:E.target.value})),placeholder:"e.g. Chicken Breast",autoFocus:!0})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Serving Size (optional)"}),i.jsx("input",{type:"text",value:kt.serving,onChange:E=>vt(R=>({...R,serving:E.target.value})),placeholder:"e.g. 150g, 1 cup"})]}),i.jsxs("div",{className:"nut-manual-macros",children:[i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Protein (g)"}),i.jsx("input",{type:"number",value:kt.protein,onChange:E=>vt(R=>({...R,protein:E.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Carbs (g)"}),i.jsx("input",{type:"number",value:kt.carbs,onChange:E=>vt(R=>({...R,carbs:E.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Fats (g)"}),i.jsx("input",{type:"number",value:kt.fats,onChange:E=>vt(R=>({...R,fats:E.target.value})),min:"0"})]}),i.jsxs("div",{className:"nut-form-group",children:[i.jsx("label",{children:"Calories"}),i.jsx("input",{type:"number",value:kt.calories,onChange:E=>vt(R=>({...R,calories:E.target.value})),min:"0"})]})]}),i.jsx("button",{className:"nut-btn-primary",disabled:!kt.name.trim(),onClick:()=>An({name:kt.name,protein:parseFloat(kt.protein)||0,carbs:parseFloat(kt.carbs)||0,fats:parseFloat(kt.fats)||0,calories:parseFloat(kt.calories)||0,serving:kt.serving||""}),children:"Add Food"})]}),Y==="favourites"&&!se&&(()=>{const E=bn(),R=$=>{if($.per100g){const X=$.per100g;an({name:$.name,brand:"",image:null,servingSize:$.serving||"100g",servingValue:100,servingUnit:$.servingUnit||"g",portion:$.portion||null,protein:X.protein,carbs:X.carbs,fats:X.fats,calories:X.calories,per100g:!0}),$.portion?(pe(1),gt(String($.portion.weight)),et("portion")):(pe(0),gt("100"),et("weight"))}else An({name:$.name,protein:$.protein,carbs:$.carbs,fats:$.fats,calories:$.calories,serving:$.serving||""})};return i.jsx("div",{className:"nut-recent-area",children:E.length===0?i.jsx("p",{className:"nut-search-empty",children:"No favourites yet. Tap the star on any food to save it here."}):i.jsx("div",{className:"nut-recent-list",children:E.map(($,X)=>i.jsxs("div",{className:"nut-recent-item-row",children:[i.jsx("button",{className:"nut-fav-star active",onClick:Le=>{Le.stopPropagation(),un($)},children:i.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("button",{className:"nut-recent-item",onClick:()=>R($),children:[i.jsxs("div",{className:"nut-recent-item-info",children:[i.jsx("span",{className:"nut-recent-item-name",children:$.name}),i.jsx("span",{className:"nut-recent-item-serving",children:$.serving||""})]}),i.jsxs("span",{className:"nut-recent-item-macros",children:[$.calories," cal"]})]})]},X))})})})(),Y==="favourites"&&se&&(()=>{const E=se.servingUnit||"g",R=se.portion,$=xe==="portion"&&R?ht*R.weight:parseFloat(Ct)||0,X=$/100,Le=E==="ml"?[100,200,250,500]:[50,100,150,200],Ie=xe==="portion"&&R?`${ht} ${R.label}${ht!==1?"s":""} (${Math.round($)}${E})`:`${Math.round($)}${E}`;return i.jsxs("div",{className:"nut-product-result",children:[i.jsxs("div",{className:"nut-product-name-row",children:[i.jsx("h4",{children:se.name}),i.jsx("button",{className:`nut-fav-star confirm${St(se.name)?" active":""}`,onClick:()=>un({name:se.name,protein:se.protein,carbs:se.carbs,fats:se.fats,calories:se.calories,serving:se.servingSize,per100g:{protein:se.protein,carbs:se.carbs,fats:se.fats,calories:se.calories},servingUnit:se.servingUnit||"g",portion:se.portion||null}),children:i.jsx("svg",{viewBox:"0 0 24 24",width:"22",height:"22",fill:St(se.name)?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]}),i.jsxs("p",{className:"nut-product-per",children:["Per 100",E,":"]}),i.jsxs("div",{className:"nut-product-macros",children:[i.jsxs("span",{className:"nut-macro-p",children:[se.protein,"g P"]}),i.jsxs("span",{className:"nut-macro-c",children:[se.carbs,"g C"]}),i.jsxs("span",{className:"nut-macro-f",children:[se.fats,"g F"]}),i.jsxs("span",{className:"nut-macro-cal",children:[se.calories," cal"]})]}),R&&i.jsxs("div",{className:"nut-mode-toggle",children:[i.jsx("button",{className:xe==="portion"?"active":"",onClick:()=>{et("portion"),ht<1&&pe(1)},children:"Portions"}),i.jsxs("button",{className:xe==="weight"?"active":"",onClick:()=>{et("weight"),gt(String(Math.round($)||100))},children:["Custom (",E,")"]})]}),xe==="portion"&&R?i.jsxs("div",{className:"nut-portion-stepper",children:[i.jsx("button",{className:"nut-stepper-btn",onClick:()=>pe(Math.max(1,ht-1)),children:"-"}),i.jsxs("div",{className:"nut-stepper-display",children:[i.jsx("span",{className:"nut-stepper-count",children:ht}),i.jsxs("span",{className:"nut-stepper-label",children:[R.label,ht!==1?"s":""]}),i.jsxs("span",{className:"nut-stepper-weight",children:[Math.round($),E]})]}),i.jsx("button",{className:"nut-stepper-btn",onClick:()=>pe(ht+1),children:"+"})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"nut-serving-adjust",children:[i.jsxs("label",{children:["Serving (",E,")"]}),i.jsx("input",{type:"number",inputMode:"numeric",value:Ct,onChange:Ce=>gt(Ce.target.value),onFocus:Ce=>Ce.target.select(),min:"0"})]}),i.jsx("div",{className:"nut-quick-amounts",children:Le.map(Ce=>i.jsxs("button",{className:`nut-quick-btn${Ct===String(Ce)?" active":""}`,onClick:()=>gt(String(Ce)),children:[Ce,E]},Ce))})]}),i.jsx("div",{className:"nut-product-total",children:i.jsxs("span",{children:["Total: ",Math.round(se.protein*X),"p / ",Math.round(se.carbs*X),"c / ",Math.round(se.fats*X),"f / ",Math.round(se.calories*X)," cal"]})}),i.jsxs("div",{className:"nut-product-actions",children:[i.jsx("button",{className:"nut-btn-secondary",onClick:()=>an(null),children:"Back to Favourites"}),i.jsx("button",{className:"nut-btn-primary",onClick:()=>An({name:se.name,protein:Math.round(se.protein*X),carbs:Math.round(se.carbs*X),fats:Math.round(se.fats*X),calories:Math.round(se.calories*X),serving:Ie}),children:"Add"})]})]})})()]})}),i.jsx(Sl,{active:"nutrition"}),ot&&i.jsx("div",{className:`toast-notification ${ot.type}`,children:ot.message})]})}const N_="/login/assets/randomiser-glq9YJkL.jpg",qD="/login/assets/programme-card-workout-CnNzTYkz.webp",$D="/login/assets/prog-fullbody-4wk-r6m9HJys.jpg",WD="/login/assets/mg-arms-BeOQU3wx.jpg",j_=60,mp=5,GD=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],KD={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Squeeze Press":"push","Incline Dumbbell Press":"push","Dumbbell Fly":"push","Dumbbell Pullover":"push","Tricep Kickback":"push","Dumbbell Shrug":"push","Dumbbell Y-Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Wide Dumbbell Bent Over Row":"pull","Reverse Fly":"pull","Concentration Curl":"pull","Wide Grip Bicep Curl":"pull","Wrist Curl":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core","Kettlebell Bird Dog Drag":"core"},YD={fullbody_4wk:{duration:4,daysPerWeek:3},fullbody_8wk:{duration:8,daysPerWeek:3},fullbody_12wk:{duration:12,daysPerWeek:3},core_4wk:{duration:4,daysPerWeek:3},core_8wk:{duration:8,daysPerWeek:3},core_12wk:{duration:12,daysPerWeek:3},upper_4wk:{duration:4,daysPerWeek:3},lower_4wk:{duration:4,daysPerWeek:3}},QD={fullbody:"linear-gradient(160deg, rgba(153,49,60,0.15) 0%, rgba(153,49,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",upper:"linear-gradient(160deg, rgba(100,60,140,0.2) 0%, rgba(100,60,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)",lower:"linear-gradient(160deg, rgba(40,120,80,0.2) 0%, rgba(40,120,80,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.88) 80%, rgba(0,0,0,0.95) 100%)"},pp={arms:"linear-gradient(160deg, rgba(180,60,60,0.2) 0%, rgba(180,60,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",chest:"linear-gradient(160deg, rgba(50,100,160,0.2) 0%, rgba(50,100,160,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",back:"linear-gradient(160deg, rgba(80,130,60,0.2) 0%, rgba(80,130,60,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",shoulders:"linear-gradient(160deg, rgba(160,100,40,0.2) 0%, rgba(160,100,40,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",legs:"linear-gradient(160deg, rgba(100,50,140,0.2) 0%, rgba(100,50,140,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)",core:"linear-gradient(160deg, rgba(30,80,120,0.2) 0%, rgba(30,80,120,0.35) 30%, rgba(0,0,0,0.6) 55%, rgba(0,0,0,0.9) 80%, rgba(0,0,0,0.96) 100%)"},gp=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,level:"All Levels",daysPerWeek:3,image:$D},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,level:"Intermediate",daysPerWeek:3},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,level:"Advanced",daysPerWeek:3},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,level:"Beginner",daysPerWeek:3},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,level:"Intermediate",daysPerWeek:3},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,level:"Advanced",daysPerWeek:3},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,level:"Intermediate",daysPerWeek:3},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,level:"Intermediate",daysPerWeek:3}],Ac=[{key:"arms",label:"Arms",icon:"M7 5h2v14H7V5zm8 0h2v14h-2V5zm-5 4h4v6h-4V9z",image:WD},{key:"chest",label:"Chest",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm4 0h-2v-2h2v2zm3-6c0 1.1-.36 2.12-.97 2.95l-.87-.87C16.7 12.53 17 11.8 17 11c0-2.76-2.24-5-5-5S7 8.24 7 11c0 .8.3 1.53.84 2.08l-.87.87A4.977 4.977 0 0 1 6 11c0-3.31 2.69-6 6-6s6 2.69 6 6z"},{key:"back",label:"Back",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm4 18H8v-6l-4-4 1.41-1.41L8 11.17V8h8v3.17l2.59-2.58L20 10l-4 4v6z"},{key:"shoulders",label:"Shoulders",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"legs",label:"Legs",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}],R_={chest:[{id:"chest_strength",name:"Chest Strength",desc:"Heavy pressing for max strength",level:"Intermediate",overview:"A heavy pressing session designed to build raw chest strength. Focus on controlled negatives and powerful pressing movements.",tips:["Go heavy  pick a weight where the last 2 reps are a real challenge","Control the negative (lowering phase) for 2-3 seconds","Keep your shoulder blades squeezed together throughout all pressing movements","Rest 90-120 seconds between sets to allow full recovery"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Squeeze Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:10,storagePath:null},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"chest_hypertrophy",name:"Chest Hypertrophy",desc:"Volume training for muscle growth",level:"Intermediate",overview:"A high-volume chest session focused on time under tension and muscle growth. Lighter weights, more reps, and slow controlled movements.",tips:["Use moderate weight  you should feel the burn by rep 10","Squeeze your chest at the top of every rep for 1 second","Keep rest periods short at 60-90 seconds to keep the pump going","On press ups, go to failure on the final set"],exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Dumbbell Fly",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Incline Dumbbell Press",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Press Up",type:"reps",sets:3,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"}]},{id:"chest_endurance",name:"Chest Endurance",desc:"Bodyweight pushing to failure",level:"All Levels",overview:"No weights needed. This bodyweight-only session builds chest endurance and muscular stamina through high-rep push up variations.",tips:["Focus on full range of motion  chest to floor on every rep","Keep your core tight and body in a straight line throughout","Scale down to knee press ups if you can't maintain form","Push through the burn  the last 5 reps are where the growth happens"],exercises:[{name:"Press Up",type:"reps",sets:4,reps:20,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Wide Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null},{name:"Decline Press Up",type:"reps",sets:3,reps:15,storagePath:null},{name:"Press Up Hold",type:"timed",sets:3,time:30,storagePath:null}]}],back:[{id:"back_strength",name:"Back Strength",desc:"Heavy rows for a thick back",level:"Intermediate",overview:"Build a thick, powerful back with heavy rowing movements. This session targets your lats, rhomboids, and traps for overall back development.",tips:["Go heavy on rows  use a weight that challenges you by rep 6-8","Drive your elbows back and squeeze your shoulder blades together at the top","Keep a slight bend in your knees and hinge at the hips for bent over movements","Rest 90-120 seconds between sets for full recovery"],exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Pullover",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"back_hypertrophy",name:"Back Hypertrophy",desc:"Width and thickness volume work",level:"Intermediate",overview:"A volume-focused back session combining rows and isolation moves to build width and thickness. Focus on the mind-muscle connection.",tips:["Use moderate weight  feel the stretch and squeeze on every rep","On renegade rows, keep your hips square to the floor and avoid rotating","For reverse flys, use lighter weight and focus on squeezing your rear delts","Keep rest to 60-90 seconds to maintain intensity"],exercises:[{name:"Renegade Row",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Wide Dumbbell Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Reverse Fly",type:"weighted",sets:3,reps:15,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null}]},{id:"back_endurance",name:"Back Endurance",desc:"Bodyweight back conditioning",level:"All Levels",overview:"A bodyweight session to strengthen your posterior chain and improve posture. Great for back health, mobility, and muscular endurance.",tips:["On superman holds, lift your arms and legs simultaneously and hold tight","Focus on slow, controlled movements  quality over speed","Breathe steadily throughout timed holds  don't hold your breath","Engage your glutes and lower back together on every movement"],exercises:[{name:"Superman Hold",type:"timed",sets:4,time:30,storagePath:"exercises/bodyweight/upper/Superman Hold.mp4"},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:12,storagePath:null},{name:"Reverse Snow Angel",type:"reps",sets:3,reps:12,storagePath:null},{name:"Bird Dog",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Back Extension Hold",type:"timed",sets:3,time:30,storagePath:null}]}],shoulders:[{id:"shoulders_strength",name:"Shoulder Strength",desc:"Heavy pressing for boulder shoulders",level:"Intermediate",overview:"A heavy overhead pressing session to build strong, powerful shoulders. Compound movements first, followed by isolation work for all three delt heads.",tips:["Go heavy on presses  pick a weight where you struggle on the last 2 reps","Brace your core and avoid arching your back during overhead movements","Press straight up and control the weight down slowly","Rest 90-120 seconds between pressing sets, 60 seconds for isolation moves"],exercises:[{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:4,reps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Shrug",type:"weighted",sets:3,reps:15,storagePath:null}]},{id:"shoulders_hypertrophy",name:"Shoulder Hypertrophy",desc:"Volume and isolation for 3D delts",level:"Intermediate",overview:"A high-volume session targeting all three heads of the deltoid for that 3D capped shoulder look. Moderate weight, high reps, constant tension.",tips:["Use lighter weight than you think  shoulders respond best to high reps","On lateral raises, lead with your elbows and don't swing the weight","Pause at the top of each raise for a 1-second squeeze","Keep rest periods at 60 seconds to maximise the pump"],exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Dumbbell Y-Raise",type:"weighted",sets:3,reps:12,storagePath:null}]},{id:"shoulders_endurance",name:"Shoulder Endurance",desc:"Bodyweight and high-rep work",level:"All Levels",overview:"A shoulder endurance session combining bodyweight movements with high-rep dumbbell work. Builds stamina, stability, and shoulder resilience.",tips:["On pike push ups, walk your feet close to your hands to increase the angle","For high-rep lateral raises, use a very light weight and focus on form","Wall walks are advanced  scale to pike push ups if needed","Keep your core braced throughout to protect your lower back"],exercises:[{name:"Pike Push Ups",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/upper/pike push ups.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,reps:20,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Wall Walks",type:"reps",sets:3,reps:6,storagePath:null},{name:"Prone Y-T-W Raises",type:"reps",sets:3,reps:10,storagePath:null},{name:"Shoulder Tap Hold",type:"timed",sets:3,time:30,storagePath:null}]}],arms:[{id:"arms_bicep",name:"Bicep Focus",desc:"Curl variations for peak biceps",level:"All Levels",overview:"An arm session dedicated entirely to biceps. Multiple curl variations target different parts of the bicep for maximum peak and thickness.",tips:["Keep your elbows pinned to your sides  no swinging","Control the negative (lowering) for 2-3 seconds on every rep","Start with your heaviest weight and decrease as you fatigue","Squeeze hard at the top of each curl for a full contraction"],exercises:[{name:"Bicep Curl",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Concentration Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Wide Grip Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Isometric Bicep Hold",type:"timed",sets:3,time:20,storagePath:null}]},{id:"arms_tricep",name:"Tricep Focus",desc:"Extensions and dips for horseshoe triceps",level:"All Levels",overview:"All-out tricep training with extensions, dips, and pressing movements. The triceps make up two-thirds of your arm  this session builds serious size.",tips:["On overhead extensions, keep your elbows close to your head","For skullcrushers, lower the weight slowly to just above your forehead","On dips, lean slightly forward to reduce shoulder strain","Full lockout at the top of every extension for maximum tricep contraction"],exercises:[{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Tricep Dips",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Diamond Press Up",type:"reps",sets:3,reps:12,storagePath:null}]},{id:"arms_full",name:"Full Arms",desc:"Superset biceps and triceps",level:"All Levels",overview:"A balanced arm session alternating between biceps and triceps. Superset style keeps the intensity high and maximises the pump.",tips:["Superset each pair  do biceps then immediately hit triceps","Use moderate weight that lets you maintain strict form for all reps","Rest 60 seconds after each superset pair","Focus on the squeeze at the peak contraction of every rep"],exercises:[{name:"Bicep Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Tricep Kickback",type:"weighted",sets:3,reps:12,storagePath:null},{name:"Hammer Curl",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Wrist Curl",type:"weighted",sets:3,reps:15,storagePath:null}]}],legs:[{id:"legs_quad",name:"Quad Dominant",desc:"Squats and lunges for quad power",level:"All Levels",overview:"A quad-focused leg session built around squats and lunges. Heavy compound movements to build strong, powerful quads and overall leg strength.",tips:["On goblet squats, hold the dumbbell close to your chest and sit deep","Keep your knees tracking over your toes  don't let them cave inward","Drive through your heels on all squatting movements","Rest 90-120 seconds between heavy sets, 60 seconds on bodyweight moves"],exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,reps:15,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,reps:12,storagePath:"exercises/bodyweight/lower/bulgarian split squats.mp4"},{name:"Squat And Hold",type:"timed",sets:3,time:30,storagePath:"exercises/bodyweight/lower/squat and hold.mp4"}]},{id:"legs_ham_glute",name:"Hamstring & Glute",desc:"Posterior chain focus",level:"Intermediate",overview:"Target the back of your legs with deadlift and hip hinge variations. This session builds a strong posterior chain  hamstrings, glutes, and lower back.",tips:["On RDLs, push your hips back and feel the stretch in your hamstrings","Keep a slight bend in your knees throughout hip hinge movements","Squeeze your glutes hard at the top of every rep","For single leg work, start with your weaker side first"],exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,reps:10,storagePath:"exercises/dumbbells/lower/romanian deadlifts.mp4"},{name:"1 Legged RDL",type:"weighted",sets:3,reps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.mp4"},{name:"Hip Thrusts",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/hip thrusts.mp4"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.mp4"},{name:"Donkey Kicks",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.mp4"}]},{id:"legs_power",name:"Power & Plyo",desc:"Explosive leg training",level:"Intermediate",overview:"An explosive leg session combining plyometrics with weighted movements. Build power, speed, and athletic performance.",tips:["On jump squats, land softly with bent knees to absorb the impact","Explode up on every rep  power comes from speed, not just weight","Keep rest periods at 60-90 seconds to maintain intensity","Focus on landing mechanics  knees out, chest up, soft landing"],exercises:[{name:"Jump Squats",type:"reps",sets:4,reps:12,storagePath:"exercises/bodyweight/lower/jump squats.mp4"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Skater Jumps",type:"reps",sets:3,reps:15,storagePath:"exercises/bodyweight/lower/skater jumps.mp4"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,reps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:4,reps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.mp4"}]}],core:[{id:"core_lower_abs",name:"Lower Abs Blast",desc:"40s work / 20s rest  3 rounds",level:"Intermediate",overview:"An interval-based core burner targeting the lower abdominals. 40 seconds of work followed by 20 seconds of rest  keep the intensity high and your lower back pressed into the floor throughout.",tips:["Press your lower back firmly into the floor on every rep","Exhale hard as you contract your abs  don't hold your breath","If your lower back lifts off the ground, reduce the range of motion","Focus on slow, controlled movements rather than speed"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Leg Raises",storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Reverse Crunch To Leg Raise",storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Flutter Kicks",storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Dead Bug Single Leg Drop",storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Hollow Hold Flutter Kicks",storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"}]},{id:"core_obliques",name:"Obliques & Rotation",desc:"35s work / 25s rest  3 rounds",level:"Intermediate",overview:"Target the obliques and rotational core muscles with this interval session. 35 seconds of work with 25 seconds rest  every exercise involves twisting, rotating, or side-bracing movements.",tips:["Rotate from your ribcage, not just your arms","Keep your hips as still as possible during twisting exercises","Brace your core before each movement  think about squeezing a belt","On side planks, stack your hips and push the floor away"],interval:!0,rounds:3,work:35,rest:25,exercises:[{name:"Russian Twist",storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank Rotation",storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"Cross Body Mountain Climbers",storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Hip Dips Plank",storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Bicycle Crunch",storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank",storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{id:"core_weighted",name:"Weighted Core",desc:"40s work / 20s rest  3 rounds",level:"Advanced",overview:"Add resistance to your core training with dumbbells and kettlebells. 40 seconds of weighted work followed by 20 seconds rest  this session builds serious core strength and stability.",tips:["Start with a moderate weight  form is more important than load","Brace your entire core before picking up the weight each round","Keep movements controlled  no swinging or using momentum","If grip fails before core does, go slightly lighter next time"],interval:!0,rounds:3,work:40,rest:20,exercises:[{name:"Russian Twists Dumbbell",storagePath:"exercises/dumbbells/core/russian twists dumbbell.mp4"},{name:"Kettlebell Russian Twist",storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Kettlebell Side Bends",storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Kneeling Kettlebell Halo",storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Kettlebell Bird Dog Drag",storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Dumbbell Plank Pull Through",storagePath:null}]}]},C_=[{key:"bodyweight",label:"Bodyweight",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"},{key:"dumbbells",label:"Dumbbells",icon:"M6 5H3v14h3V5zm12 0h-3v14h3V5zm-9 3H7v8h2V8zm7 0h-2v8h2V8zm-5 0h-2v8h2V8z"},{key:"kettlebells",label:"Kettlebells",icon:"M12 2C9.24 2 7 4.24 7 7c0 1.1.36 2.12.97 2.95C6.76 11.08 6 12.96 6 15c0 3.87 2.69 7 6 7s6-3.13 6-7c0-2.04-.76-3.92-1.97-5.05.61-.83.97-1.85.97-2.95 0-2.76-2.24-5-5-5zm0 2c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"}],yp=[{key:"core",label:"Core",icon:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"},{key:"upper",label:"Upper",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z"},{key:"lower",label:"Lower",icon:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"},{key:"fullbody",label:"Full Body",icon:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z"},{key:"mix",label:"Mix It Up",icon:"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm-.83 9.41l-1.42 1.42L17.96 20.54l1.42-1.42-5.71-5.71z"}],lo=[{key:"beginner",label:"Beginner",work:30,rest:30,desc:"30s work / 30s rest"},{key:"intermediate",label:"Intermediate",work:40,rest:20,desc:"40s work / 20s rest"},{key:"advanced",label:"Advanced",work:40,rest:15,desc:"40s work / 15s rest"}],XD=[5,10,15,20,30];function JD(s){return s.replace(/\b\w/g,e=>e.toUpperCase())}function ZD(s){const e=[...s];for(let n=e.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[e[n],e[a]]=[e[a],e[n]]}return e}function eM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=ia(),{isDark:o,toggleTheme:u,accent:d}=Pi(),p=qs(),[g,y]=w.useState("menu"),[_,T]=w.useState(["bodyweight"]),[k,O]=w.useState("core"),[W,B]=w.useState("intermediate"),[P,le]=w.useState(15),[ee,me]=w.useState([]),[je,ze]=w.useState(!1),Ae=w.useRef(!1),A=w.useRef([]),[S,C]=w.useState([]),[D,M]=w.useState(2),[U,I]=w.useState(lo[1]),[He,Et]=w.useState(1),[Y,Se]=w.useState(0),[Me,lt]=w.useState("work"),[nt,V]=w.useState(0),[G,ye]=w.useState(!1),[Ne,Be]=w.useState(0),[De,Ze]=w.useState(null),at=w.useRef(null);w.useRef(null),w.useRef(null);const[ft,Bt]=w.useState(null),fn=w.useCallback((H,oe="info")=>{Bt({message:H,type:oe}),setTimeout(()=>Bt(null),3e3)},[]),[kt,vt]=w.useState(null),[se,an]=w.useState(null),[Ct,gt]=w.useState(0),[ht,pe]=w.useState(0),[xe,et]=w.useState([]),[Ut,Je]=w.useState(""),[ot,Zt]=w.useState(""),[xt,Xt]=w.useState(!1),[ce,de]=w.useState(0),[Ee,$e]=w.useState(!1),[Fe,Pe]=w.useState({}),We=w.useRef(null),Ue=w.useRef(null),[Ve,jt]=w.useState([]),[At,Mt]=w.useState(null),[zt,bn]=w.useState(0),[St,un]=w.useState(0),[An,mn]=w.useState(0),[On,Sn]=w.useState(0),[In,os]=w.useState(0),[Ss,vs]=w.useState(0),[Ds,Ms]=w.useState({beginner:0,intermediate:0,advanced:0}),[q,he]=w.useState(null),[be,ge]=w.useState(""),[ue,Ke]=w.useState(!1);w.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),w.useEffect(()=>{if(!s||!n)return;(async()=>{try{const oe=Es(rt,"workoutLogs"),ne=er(oe,Hs("clientId","==",n.id)),Re=(await tr(ne)).docs.map(tn=>tn.data()),Ye=Re.filter(tn=>tn.type!=="programme");Sn(Ye.length);const wt=Ye.reduce((tn,Dn)=>tn+(Dn.duration||0),0);os(wt);const Qe={beginner:0,intermediate:0,advanced:0};Ye.forEach(tn=>{tn.level&&Qe[tn.level]!==void 0&&Qe[tn.level]++}),Ms(Qe);const qt=new Date,Nn=qt.getDay(),nn=Nn===0?-6:1-Nn,Tn=new Date(qt);Tn.setDate(qt.getDate()+nn),Tn.setHours(0,0,0,0);const Oa=Tn.getTime(),Li=Re.filter(tn=>{const Dn=tn.completedAt;return Dn?(Dn.toDate?Dn.toDate().getTime():new Date(Dn).getTime())>=Oa:!1});bn(Li.filter(tn=>tn.type!=="programme").length);let Va=0;if(n)try{const tn=await Wn(Nt(rt,"clientProgrammes",n.id));if(tn.exists()){const Dn=tn.data(),Mn=Dn.templateId;Va=Li.filter(cs=>cs.type==="programme"&&cs.programmeId===Mn).length,he(Mn);const br=gp.find(cs=>cs.id===Mn);br&&ge(br.name);const _r=YD[Mn];if(_r){const cs=Object.keys(Dn.completedSessions||{}).length,bs=_r.duration*_r.daysPerWeek;mn(bs>0?Math.round(cs/bs*100):0)}}else he(null),ge(""),mn(0)}catch{}un(Va);const vr=Ye.map(tn=>tn.completedAt).filter(Boolean).map(tn=>tn.toDate?tn.toDate().getTime():new Date(tn).getTime()).sort((tn,Dn)=>Dn-tn);if(vr.length===0)vs(0);else{const tn=new Set;vr.forEach(bs=>{const Vr=new Date(bs),xr=Vr.getDay(),Ba=xr===0?-6:1-xr,js=new Date(Vr);js.setDate(Vr.getDate()+Ba),js.setHours(0,0,0,0),tn.add(js.getTime())});const Dn=[...tn].sort((bs,Vr)=>Vr-bs);let Mn=0;const br=new Date(qt),_r=qt.getDay()===0?-6:1-qt.getDay();br.setDate(qt.getDate()+_r),br.setHours(0,0,0,0);let cs=br.getTime();Dn.includes(cs)||(cs-=10080*60*1e3);for(let bs=0;bs<200&&Dn.includes(cs);bs++)Mn++,cs-=10080*60*1e3;vs(Mn)}}catch(oe){console.error("Error loading workout stats:",oe)}finally{Ke(!0)}})()},[s,n,g]);const Tt=()=>{const H=[];let oe;k==="mix"?oe=["core","upper","lower"]:k==="fullbody"?oe=["upper","lower"]:oe=[k];for(const ne of _)for(const ke of oe)H.push(`exercises/${ne}/${ke}`);return H},tt=async()=>{if(Ae.current){for(;Ae.current;)await new Promise(H=>setTimeout(H,200));return A.current}Ae.current=!0,ze(!0);try{const H=Tt(),oe=[];for(const Ye of H)try{const wt=Vc(Bc,Ye),Qe=await k_(wt);oe.push(...Qe.items)}catch{console.warn(`Folder ${Ye} not found, skipping.`)}if(oe.length===0&&_.includes("bodyweight")&&k==="core")try{const Ye=Vc(Bc,"core"),wt=await k_(Ye);oe.push(...wt.items)}catch{console.warn("Legacy core/ folder not found either.")}if(oe.length===0){const Ye=_.map(Qe=>C_.find(qt=>qt.key===Qe)?.label).join(" + "),wt=yp.find(Qe=>Qe.key===k)?.label;return fn(`No exercises found for ${Ye} / ${wt}. Upload videos to Firebase Storage.`,"error"),Ae.current=!1,ze(!1),[]}const ne=new Set,ke=oe.filter(Ye=>{const wt=Ye.name.replace(/\.(mp4|gif)$/i,"");return ne.has(wt)?!1:(ne.add(wt),!0)}),Re=await Promise.all(ke.map(async Ye=>{const wt=await sd(Ye),Qe=JD(Ye.name.replace(/\.(mp4|gif)$/i,"")),qt=/\.gif$/i.test(Ye.name);return{name:Qe,videoUrl:wt,isGif:qt}}));return A.current=Re,me(Re),Ae.current=!1,ze(!1),Re}catch(H){console.error("Error loading exercises:",H);const oe=H.code==="storage/unauthorized"?"Storage access denied. Check Firebase Storage rules allow read access.":`Failed to load exercises: ${H.message||H.code||"Unknown error"}`;return fn(oe,"error"),Ae.current=!1,ze(!1),[]}},mt=async()=>{y("spinning"),A.current=[];const H=await tt();if(H.length===0){y("setup");return}const oe=lo.find(Nn=>Nn.key===W);I(oe);const ne=oe.work+oe.rest,ke=P*60,Re=Math.floor(ke/ne);let Ye,wt;Re<=6?(Ye=Math.max(3,Math.floor(Re/2)),wt=Math.floor(Re/Ye)):Re<=12?(Ye=Math.min(6,Math.floor(Re/2)),wt=Math.floor(Re/Ye)):(Ye=Math.min(10,Math.floor(Re/2)),wt=Math.floor(Re/Ye)),wt=Math.max(2,wt);const Qe=ZD(H),qt=Qe.slice(0,Math.min(Ye,Qe.length));C(qt),M(wt),setTimeout(()=>y("preview"),2e3)},dt=()=>{y("countdown"),Be(3)};w.useEffect(()=>{if(g!=="countdown")return;if(Ne<=0){y("workout"),Et(1),Se(0),lt("work"),V(U.work),ye(!1),Ie();return}Le();const H=setTimeout(()=>Be(oe=>oe-1),1e3);return()=>clearTimeout(H)},[Ne,g]),w.useEffect(()=>{if(g!=="workout"||G)return;if(nt<=0){en();return}nt<=3&&Le();const H=setTimeout(()=>V(oe=>oe-1),1e3);return()=>clearTimeout(H)},[nt,g,G]);const en=()=>{if(Me==="work")lt("rest"),V(U.rest);else{const H=Y+1;if(H>=S.length){const oe=He+1;if(oe>D){y("complete"),Ps();return}Et(oe),Se(0)}else Se(H);lt("work"),V(U.work),Ie()}},Ps=async()=>{if(s)try{await Qp(Es(rt,"workoutLogs"),{clientId:n.id,level:W,duration:P,equipment:_,focus:k,exerciseCount:S.length,rounds:D,exercises:S.map(H=>H.name),completedAt:it.now()}),bn(H=>H+1),Sn(H=>H+1),os(H=>H+P),Ms(H=>({...H,[W]:(H[W]||0)+1}))}catch(H){console.error("Error saving workout log:",H)}},ss=async(H,oe,ne)=>{if(!(!n||!oe))try{const ke=n.id,Re=await Wn(Nt(rt,"coreBuddyPBs",ke)),wt=(Re.exists()?Re.data():null)?.exercises||{},Qe=wt[H];let qt=!1;if(Qe?(oe>(Qe.weight||0)||oe===(Qe.weight||0)&&ne>(Qe.reps||0))&&(qt=!0):qt=!0,qt){const Nn={...wt,[H]:{weight:oe,reps:ne,achievedAt:it.now()}};await $n(Nt(rt,"coreBuddyPBs",ke),{clientId:n.id,exercises:Nn,updatedAt:it.now()}),fn(`New PB! ${oe}kg  ${ne} reps`,"success"),Le(),await Ns(H,oe)}}catch(ke){console.error("Error checking PB:",ke)}},Ns=async(H,oe)=>{if(n)try{const ne=await Wn(Nt(rt,"coreBuddyTargets",n.id));if(!ne.exists())return;const Re=(ne.data().targets||{})[H];if(!Re||oe<Re.targetWeight)return;const Ye=await Wn(Nt(rt,"coreBuddyAchievements",n.id)),wt=Ye.exists()?Ye.data():{clientId:n.id,badges:[],totalVolume:0};if(wt.badges.some(nn=>nn.type==="pb_target"&&nn.exercise===H&&nn.targetWeight===Re.targetWeight))return;const qt={type:"pb_target",exercise:H,group:KD[H]||"push",targetWeight:Re.targetWeight,achievedAt:it.now()},Nn=[...wt.badges,qt];await $n(Nt(rt,"coreBuddyAchievements",n.id),{...wt,badges:Nn,updatedAt:it.now()}),jt(nn=>[...nn,qt])}catch(ne){console.error("Error checking target badge:",ne)}},wn=async H=>{if(!(!n||H<=0))try{const oe=await Wn(Nt(rt,"coreBuddyAchievements",n.id)),ne=oe.exists()?oe.data():{clientId:n.id,badges:[],totalVolume:0},ke=ne.totalVolume||0,Re=ke+H,Ye=[];GD.forEach(Qe=>{Re>=Qe.threshold&&ke<Qe.threshold&&(ne.badges.some(Nn=>Nn.type==="volume_milestone"&&Nn.milestone===Qe.threshold)||Ye.push({type:"volume_milestone",milestone:Qe.threshold,label:Qe.label,achievedAt:it.now()}))});const wt=[...ne.badges,...Ye];await $n(Nt(rt,"coreBuddyAchievements",n.id),{clientId:n.id,badges:wt,totalVolume:Math.round(Re),updatedAt:it.now()}),Ye.length>0&&jt(Qe=>[...Qe,...Ye])}catch(oe){console.error("Error updating volume:",oe)}},z=async H=>{if(an(H),H.interval){const ke=[];for(const Re of H.exercises){let Ye=null,wt=!1;if(Re.storagePath)try{const Qe=Vc(Bc,Re.storagePath);Ye=await sd(Qe),wt=/\.gif$/i.test(Re.storagePath)}catch{}ke.push({name:Re.name,videoUrl:Ye,isGif:wt})}C(ke),M(H.rounds),I({work:H.work,rest:H.rest}),y("preview");return}const oe={};for(const ke of H.exercises)if(ke.storagePath)try{const Re=Vc(Bc,ke.storagePath);oe[ke.name]={url:await sd(Re),isGif:/\.gif$/i.test(ke.storagePath)}}catch{}Pe(oe);const ne=H.exercises.map(ke=>({name:ke.name,type:ke.type,targetSets:ke.sets,targetReps:ke.reps||0,targetTime:ke.time||0,sets:[]}));et(ne),gt(0),pe(0),Je(""),Zt(""),$e(!1),Xt(!1),de(0),jt([]),Mt(null),y("muscle_workout")},ae=()=>{const H=We.current;H&&(H.paused?(H.play(),$e(!0)):(H.pause(),$e(!1)))};w.useEffect(()=>{if(g!=="muscle_workout"||!xt||ce<=0){g==="muscle_workout"&&xt&&ce<=0&&(Xt(!1),Le());return}return Ue.current=setTimeout(()=>de(H=>H-1),1e3),()=>clearTimeout(Ue.current)},[g,xt,ce]);const E=async()=>{const H=xe[Ct];let oe={};if(H.type==="weighted"){const Re=parseFloat(Ut)||0,Ye=parseInt(ot)||0;if(Ye===0){fn("Enter your reps","error");return}oe={weight:Re,reps:Ye}}else if(H.type==="reps"){const Re=parseInt(ot)||0;if(Re===0){fn("Enter your reps","error");return}oe={reps:Re}}else if(H.type==="timed"){const Re=H.targetTime-ce;oe={time:Math.max(Re,1)}}const ne=[...xe];ne[Ct]={...H,sets:[...H.sets,oe]},et(ne),H.type==="weighted"&&oe.weight>0&&await ss(H.name,oe.weight,oe.reps);const ke=H.sets.length+1;if(ke<H.targetSets)pe(ke),Zt(""),Xt(!1),de(0);else if(Ct+1<xe.length){const Re=Ct+1;gt(Re),pe(0),Je(""),Zt(""),$e(!1),Xt(!1),de(0)}else await R(ne),y("muscle_complete")},R=async H=>{if(!(!s||!n))try{const oe=H.reduce((ke,Re)=>ke+Re.sets.reduce((Ye,wt)=>Ye+(wt.weight||0)*(wt.reps||0),0),0),ne=H.reduce((ke,Re)=>ke+Re.sets.length,0);await Qp(Es(rt,"workoutLogs"),{clientId:n.id,type:"muscle_group",muscleGroup:kt,sessionId:se?.id,sessionName:se?.name,exerciseCount:H.length,totalSets:ne,duration:Math.round(ne*1.5),volume:Math.round(oe),exercises:H.map(ke=>({name:ke.name,type:ke.type,sets:ke.sets})),completedAt:it.now()}),oe>0&&await wn(oe),Ve.length>0&&Mt({badges:[...Ve]})}catch(oe){console.error("Error saving muscle group workout log:",oe)}},$=w.useRef(null),X=()=>($.current||($.current=new(window.AudioContext||window.webkitAudioContext)),$.current),Le=()=>{try{const H=X(),oe=H.createOscillator(),ne=H.createGain();oe.connect(ne),ne.connect(H.destination),oe.frequency.value=880,ne.gain.value=.3,oe.start(H.currentTime),oe.stop(H.currentTime+.15)}catch{}},Ie=()=>{try{const H=X(),oe=H.createOscillator(),ne=H.createGain();oe.connect(ne),ne.connect(H.destination),oe.frequency.value=1200,ne.gain.value=.4,oe.start(H.currentTime),oe.stop(H.currentTime+.3)}catch{}};w.useEffect(()=>{if(g!=="workout"||Me!=="work"||!S[Y]?.isGif)return;const oe=setInterval(()=>{const ne=at.current;if(!ne)return;const ke=ne.getAttribute("src");ne.removeAttribute("src"),setTimeout(()=>{at.current&&at.current.setAttribute("src",ke)},0)},4e3);return()=>clearInterval(oe)},[g,Me,Y,He,S]);const Ce=(H,oe,ne)=>{const ke=Math.round(H/oe*j_);return i.jsx("svg",{className:"wk-ring-svg",viewBox:"0 0 200 200",children:MD.map((Re,Ye)=>i.jsx("line",{x1:Re.x1,y1:Re.y1,x2:Re.x2,y2:Re.y2,className:Ye<ke?`wk-tick-filled ${ne}`:"wk-tick-empty",strokeWidth:Re.thick?"3":"2"},Ye))})},Pt=()=>{const H=S.length*D;return((He-1)*S.length+Y+(Me==="rest"?.5:0))/H},pt=ft&&i.jsx("div",{className:`toast-notification ${ft.type}`,children:ft.message});if(a)return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsx("div",{className:"wk-loading-inline",children:i.jsx("div",{className:"wk-loading-spinner"})})]});if(g==="menu")return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[i.jsxs("div",{className:"wk-menu-heading",children:[i.jsx("h2",{children:"Choose Your Workout"}),i.jsx("p",{children:"No excuses. Just results."})]}),i.jsx("button",{className:"wk-hero-card",onClick:()=>y("setup"),children:i.jsx("img",{src:N_,alt:"Randomise Workout",className:"wk-hero-bg"})}),i.jsxs("div",{className:"wk-section-header",children:[i.jsx("h2",{children:"Programmes"}),i.jsxs("span",{className:"wk-section-count",children:[gp.length," available"]})]}),i.jsx("div",{className:"wk-prog-scroll-wrap",children:i.jsx("div",{className:"wk-prog-scroll",children:gp.map((H,oe)=>H.image?i.jsxs("button",{className:"wk-prog-img-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:H.id}}),style:{animationDelay:`${oe*.06}s`},children:[i.jsx("img",{src:H.image,alt:H.name,className:"wk-prog-img"}),oe===0&&i.jsx("div",{className:"wk-swipe-arrow",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},H.id):i.jsxs("button",{className:"wk-prog-hero-card",onClick:()=>p("/client/core-buddy/programmes",{state:{templateId:H.id}}),style:{animationDelay:`${oe*.06}s`},children:[i.jsx("img",{src:qD,alt:"Programme",className:"wk-prog-hero-bg",loading:"lazy"}),i.jsx("div",{className:"wk-prog-hero-overlay",style:{background:QD[H.focus]}}),i.jsxs("div",{className:"wk-prog-hero-content",children:[i.jsxs("div",{className:"wk-prog-hero-top",children:[i.jsxs("span",{className:"wk-prog-hero-badge",children:[H.duration," WEEKS"]}),i.jsx("span",{className:"wk-prog-hero-level",children:H.level})]}),i.jsxs("div",{className:"wk-prog-hero-bottom",children:[i.jsx("h3",{children:H.name.toUpperCase()}),i.jsxs("p",{children:[H.daysPerWeek,"x per week  ",H.focus==="fullbody"?"Full Body":H.focus.charAt(0).toUpperCase()+H.focus.slice(1)," Focus"]}),i.jsx("span",{className:"wk-prog-hero-go",children:"VIEW PROGRAMME "})]})]}),oe===0&&i.jsx("div",{className:"wk-swipe-arrow",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},H.id))})}),i.jsxs("div",{className:"wk-section-header",children:[i.jsx("h2",{children:"Muscle Groups"}),i.jsxs("span",{className:"wk-section-count",children:[Ac.length," groups"]})]}),i.jsx("div",{className:"wk-muscle-grid",children:Ac.map((H,oe)=>i.jsx("button",{className:`wk-muscle-hero-card${H.image?" wk-muscle-thumb":""}`,onClick:()=>{vt(H.key),y("muscle_sessions")},style:{animationDelay:`${oe*.05}s`},children:H.image?i.jsx("img",{src:H.image,alt:H.label,className:"wk-muscle-thumb-img"}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:N_,alt:"Muscle group",className:"wk-muscle-hero-bg",loading:"lazy"}),i.jsx("div",{className:"wk-muscle-hero-overlay",style:{background:pp[H.key]}}),i.jsxs("div",{className:"wk-muscle-hero-content",children:[i.jsx("div",{className:"wk-muscle-hero-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:H.icon})})}),i.jsxs("div",{className:"wk-muscle-hero-text",children:[i.jsx("span",{className:"wk-muscle-hero-name",children:H.label}),i.jsxs("span",{className:"wk-muscle-hero-count",children:[R_[H.key]?.length||0," sessions"]})]})]})]})},H.key))})]}),i.jsx(Sl,{active:"workouts"}),pt]});if(g==="setup"){const H=yp.find(ne=>ne.key===k)?.label||k,oe=lo.find(ne=>ne.key===W)?.label||W;return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main wk-setup-main",children:[i.jsxs("div",{className:"wk-stats-strip",children:[i.jsxs("div",{className:"wk-stats-strip-ring",children:[i.jsx("svg",{viewBox:"0 0 200 200",children:ul.map((ne,ke)=>{const Re=Math.round(Math.min(zt,mp)/mp*j_);return i.jsx("line",{x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,className:ke<Re?"wk-stats-tick-filled":"wk-stats-tick-empty",strokeWidth:ne.thick?"3":"2"},ke)})}),i.jsxs("span",{className:"wk-stats-strip-ring-num",children:[zt,i.jsxs("small",{children:["/",mp]})]})]}),i.jsxs("div",{className:"wk-stats-strip-items",children:[i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:On}),i.jsx("span",{className:"wk-stats-strip-label",children:"Workouts"})]}),i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:In}),i.jsx("span",{className:"wk-stats-strip-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stats-strip-item",children:[i.jsx("span",{className:"wk-stats-strip-num",children:Ss}),i.jsx("span",{className:"wk-stats-strip-label",children:"Wk Streak"})]})]})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Focus Area"}),i.jsx("div",{className:"wk-focus-grid",children:yp.map(ne=>i.jsxs("button",{className:`wk-equip-btn${k===ne.key?" active":""}${ne.key==="mix"?" wk-mix-btn":""}`,onClick:()=>O(ne.key),children:[i.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:ne.icon})}),i.jsx("span",{children:ne.label})]},ne.key))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Level"}),i.jsx("div",{className:"wk-level-cards",children:lo.map(ne=>i.jsxs("button",{className:`wk-level-card wk-level-${ne.key}${W===ne.key?" active":""}`,onClick:()=>B(ne.key),children:[i.jsx("span",{className:"wk-level-name",children:ne.label}),i.jsx("span",{className:"wk-level-desc",children:ne.desc})]},ne.key))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Time"}),i.jsx("div",{className:"wk-time-options",children:XD.map(ne=>i.jsxs("button",{className:`wk-time-btn${P===ne?" active":""}`,onClick:()=>le(ne),children:[i.jsx("span",{className:"wk-time-num",children:ne}),i.jsx("span",{className:"wk-time-unit",children:"min"})]},ne))})]}),i.jsxs("div",{className:"wk-setup-section",children:[i.jsx("h2",{children:"Equipment"}),i.jsx("div",{className:"wk-equip-options",children:C_.map(ne=>{const ke=_.includes(ne.key);return i.jsxs("button",{className:`wk-equip-btn${ke?" active":""}`,onClick:()=>{T(Re=>ke&&Re.length===1?Re:ke?Re.filter(Ye=>Ye!==ne.key):[...Re,ne.key])},children:[i.jsx("svg",{className:"wk-equip-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:ne.icon})}),i.jsx("span",{children:ne.label})]},ne.key)})})]}),i.jsx("div",{className:"wk-setup-summary",children:i.jsxs("span",{children:[H,"  ",oe,"  ",P," min"]})})]}),i.jsx("div",{className:"wk-go-sticky",children:i.jsx("button",{className:"wk-randomise-btn",onClick:mt,disabled:je,children:je?"Loading exercises...":"Randomise Workout"})}),pt]})}if(g==="spinning")return i.jsxs("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"wk-spin-container",children:[i.jsxs("div",{className:"wk-spin-ring",children:[i.jsx("svg",{className:"wk-spin-svg",viewBox:"0 0 200 200",children:ul.map((H,oe)=>i.jsx("line",{x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,className:"wk-spin-tick",strokeWidth:H.thick?"3.5":"2",style:{animationDelay:`${oe*.03}s`}},oe))}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"wk-spin-logo",width:"50",height:"50"})]}),i.jsx("p",{className:"wk-spin-text",children:"Generating workout..."})]}),pt]});if(g==="preview"){const H=se?.interval?{work:se.work,rest:se.rest}:lo.find(ne=>ne.key===W),oe=S.length*D*(H.work+H.rest);return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y(se?.interval?"muscle_sessions":"setup"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[se?.interval&&i.jsx("h2",{className:"mg-preview-title",children:se.name}),i.jsxs("div",{className:"wk-preview-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:S.length}),i.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:D}),i.jsx("span",{className:"wk-stat-label",children:"Rounds"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.ceil(oe/60)}),i.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsxs("span",{className:"wk-stat-val",children:[H.work,"/",H.rest]}),i.jsx("span",{className:"wk-stat-label",children:"Work/Rest"})]})]}),i.jsx("div",{className:"wk-preview-list",children:S.map((ne,ke)=>i.jsxs("div",{className:"wk-preview-item",style:{animationDelay:`${ke*.06}s`},onClick:()=>Ze(ne),children:[i.jsx("span",{className:"wk-preview-num",children:ke+1}),i.jsx("div",{className:"wk-preview-thumb",children:ne.isGif?i.jsx("img",{src:ne.videoUrl,alt:ne.name,loading:"lazy"}):i.jsx("video",{src:`${ne.videoUrl}#t=0.1`,muted:!0,playsInline:!0,preload:"auto"})}),i.jsx("span",{className:"wk-preview-name",children:ne.name}),i.jsx("svg",{className:"wk-preview-play",width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})]},ke))}),De&&i.jsx("div",{className:"wk-preview-modal-backdrop",onClick:()=>Ze(null),children:i.jsxs("div",{className:"wk-preview-modal",onClick:ne=>ne.stopPropagation(),children:[i.jsx("button",{className:"wk-preview-modal-close",onClick:()=>Ze(null),"aria-label":"Close preview",children:i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),i.jsx("div",{className:"wk-preview-modal-video",children:De.isGif?i.jsx("img",{src:De.videoUrl,alt:De.name}):i.jsx("video",{src:De.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0})}),i.jsx("h3",{className:"wk-preview-modal-title",children:De.name})]})}),i.jsxs("div",{className:"wk-preview-actions",children:[!se?.interval&&i.jsxs("button",{className:"wk-btn-secondary",onClick:()=>mt(),children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("polyline",{points:"1 4 1 10 7 10"}),i.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),"Reshuffle"]}),i.jsx("button",{className:"wk-btn-primary",onClick:dt,children:"Start Workout"})]})]})]})}if(g==="countdown")return i.jsx("div",{className:"wk-page wk-page-center wk-page-dark","data-theme":o?"dark":"light","data-accent":d,children:i.jsxs("div",{className:"wk-countdown-big",children:[i.jsx("span",{className:"wk-countdown-num",children:Ne}),i.jsx("span",{className:"wk-countdown-label",children:"GET READY"})]})});if(g==="workout"){const H=S[Y],oe=Me==="work"?U.work:U.rest,ne=Me==="rest"?Y+1<S.length?S[Y+1]:He<D?S[0]:null:null;return i.jsxs("div",{className:"wk-page wk-page-workout","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"wk-video-container",children:Me==="work"?H.isGif?i.jsx("img",{ref:at,className:"wk-video",src:H.videoUrl,alt:H.name},H.videoUrl):i.jsx("video",{className:"wk-video",src:H.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0},H.videoUrl):i.jsxs("div",{className:"wk-rest-screen",children:[i.jsx("span",{className:"wk-rest-label",children:"REST"}),ne&&i.jsxs("span",{className:"wk-next-label",children:["Next: ",ne.name]})]})}),i.jsx("div",{className:"wk-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"wk-exercise-info",children:[i.jsxs("span",{className:"wk-exercise-counter",children:[Y+1," / ",S.length]}),i.jsx("h2",{className:"wk-exercise-name",children:H.name}),i.jsxs("span",{className:"wk-round-label",children:["Round ",He," of ",D]})]}),i.jsx("div",{className:"wk-timer-section",children:i.jsxs("div",{className:"wk-timer-ring-wrap",children:[Ce(nt,oe,Me==="work"?"wk-tick-work":"wk-tick-rest"),i.jsxs("div",{className:"wk-timer-center",children:[i.jsx("span",{className:"wk-timer-time",children:nt}),i.jsx("span",{className:`wk-timer-phase ${Me}`,children:Me==="work"?"WORK":"REST"})]})]})}),i.jsxs("div",{className:"wk-controls",children:[i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-stop",onClick:()=>{confirm("End workout early?")&&y("menu")},children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})})}),i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-pause",onClick:()=>ye(!G),children:G?i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}):i.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),i.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]})}),i.jsx("button",{className:"wk-ctrl-btn wk-ctrl-skip",onClick:()=>{V(0)},children:i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),i.jsx("rect",{x:"15",y:"4",width:"4",height:"16"})]})})]}),i.jsx("div",{className:"wk-progress-bar",children:i.jsx("div",{className:"wk-progress-fill",style:{width:`${Pt()*100}%`}})})]})}if(g==="complete"){const H=lo.find(ne=>ne.key===W),oe=S.length*D*(H.work+H.rest);return i.jsx("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":d,children:i.jsxs("div",{className:"wk-complete",children:[i.jsxs("div",{className:"wk-complete-ring",children:[i.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:ul.map((ne,ke)=>i.jsx("line",{x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,className:"wk-tick-complete",strokeWidth:ne.thick?"3.5":"2",style:{animationDelay:`${ke*.02}s`}},ke))}),i.jsx("div",{className:"wk-complete-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsx("h2",{className:"wk-complete-title",children:"Workout Complete!"}),i.jsxs("div",{className:"wk-complete-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.ceil(oe/60)}),i.jsx("span",{className:"wk-stat-label",children:"Minutes"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:S.length*D}),i.jsx("span",{className:"wk-stat-label",children:"Intervals"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:D}),i.jsx("span",{className:"wk-stat-label",children:"Rounds"})]})]}),i.jsx("div",{className:"wk-complete-actions",children:i.jsx("button",{className:"wk-btn-primary",onClick:()=>{an(null),vt(null),y("menu")},children:"Done"})})]})})}if(g==="muscle_sessions"){const H=Ac.find(ne=>ne.key===kt),oe=R_[kt]||[];return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("menu"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main",children:[i.jsxs("div",{className:"mg-sessions-header",children:[i.jsx("div",{className:"mg-sessions-icon",style:{background:pp[kt]},children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:H?.icon})})}),i.jsxs("h2",{children:[H?.label," Workouts"]}),i.jsxs("p",{children:[oe.length," sessions available"]})]}),i.jsx("div",{className:"mg-sessions-list",children:oe.map((ne,ke)=>i.jsxs("button",{className:"mg-session-card",onClick:()=>{an(ne),y("muscle_overview")},style:{animationDelay:`${ke*.08}s`},children:[i.jsxs("div",{className:"mg-session-info",children:[i.jsx("h3",{children:ne.name}),i.jsx("p",{children:ne.desc}),i.jsx("div",{className:"mg-session-meta",children:ne.interval?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"mg-session-tag mg-tag-interval",children:"Interval"}),i.jsxs("span",{className:"mg-session-tag",children:[ne.exercises.length," exercises"]}),i.jsxs("span",{className:"mg-session-tag",children:[ne.rounds," rounds"]})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"mg-session-tag mg-tag-strength",children:"Strength"}),i.jsxs("span",{className:"mg-session-tag",children:[ne.exercises.length," exercises"]}),i.jsx("span",{className:"mg-session-tag",children:(()=>{const Re=ne.exercises.map(Qe=>Qe.sets||0),Ye=Math.min(...Re),wt=Math.max(...Re);return Ye===wt?`${Ye} sets each`:`${Ye}-${wt} sets each`})()})]})})]}),i.jsx("div",{className:"mg-session-arrow",children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})})]},ne.id))})]}),pt]})}if(g==="muscle_overview"){const H=se;if(!H)return null;const oe=Ac.find(ne=>ne.key===kt);return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>y("muscle_sessions"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"wk-main mg-overview-main",children:[i.jsx("div",{className:"mg-overview-hero",style:{background:pp[kt]},children:i.jsx("div",{className:"mg-overview-hero-content",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"mg-overview-hero-icon",children:i.jsx("path",{d:oe?.icon})})})}),i.jsxs("div",{className:"mg-overview-header",children:[i.jsxs("div",{className:"mg-overview-title-row",children:[i.jsx("h2",{children:H.name}),H.level&&i.jsx("span",{className:"mg-overview-level",children:H.level})]}),i.jsx("p",{className:"mg-overview-desc",children:H.desc})]}),H.overview&&i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),"About This Workout"]}),i.jsx("p",{children:H.overview})]}),H.tips&&H.tips.length>0&&i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Tips & Form"]}),i.jsx("ul",{className:"mg-overview-tips",children:H.tips.map((ne,ke)=>i.jsx("li",{children:ne},ke))})]}),i.jsxs("div",{className:"mg-overview-section",children:[i.jsxs("h3",{children:[i.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"}),i.jsx("rect",{x:"9",y:"3",width:"6",height:"4",rx:"1"}),i.jsx("path",{d:"M9 14l2 2 4-4"})]}),"Exercises (",H.exercises.length,")"]}),i.jsx("div",{className:"mg-overview-exercises",children:H.exercises.map((ne,ke)=>i.jsxs("div",{className:"mg-overview-exercise",children:[i.jsx("span",{className:"mg-overview-ex-num",children:ke+1}),i.jsxs("div",{className:"mg-overview-ex-info",children:[i.jsx("span",{className:"mg-overview-ex-name",children:ne.name}),H.interval?i.jsxs("span",{className:"mg-overview-ex-detail",children:[H.work,"s work / ",H.rest,"s rest"]}):i.jsxs("span",{className:"mg-overview-ex-detail",children:[ne.sets," sets  ",ne.reps?`${ne.reps} reps`:`${ne.time}s`,ne.type==="weighted"&&"  weighted"]})]})]},ke))})]}),i.jsxs("button",{className:"mg-overview-start-btn",onClick:()=>z(H),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8 5v14l11-7z"})}),"Start Workout"]})]}),pt]})}if(g==="muscle_workout"){const H=se;if(!H)return null;const oe=H.exercises[Ct],ne=xe[Ct];if(!oe||!ne)return null;const ke=ne.sets.length,Re=H.exercises.length,Ye=H.exercises.reduce((nn,Tn)=>nn+(Tn.sets||0),0),Qe=xe.reduce((nn,Tn)=>nn+Tn.sets.length,0)/Ye*100,qt=Fe[oe.name];oe.type==="timed"&&ce===0&&!xt&&ke===ht&&setTimeout(()=>de(oe.time),0);const Nn=ke+1<oe.sets?"Log Set":Ct+1<Re?"Log Set  Next Exercise":"Log Set  Complete";return i.jsxs("div",{className:"wk-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"mg-session-progress",children:i.jsx("div",{className:"mg-session-progress-fill",style:{width:`${Qe}%`}})}),i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>{confirm("End workout early?")&&y("muscle_overview")},"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsxs("span",{className:"mg-header-info",children:["Exercise ",Ct+1,"/",Re]}),i.jsx("div",{style:{width:22}})]})}),i.jsxs("main",{className:"wk-main",children:[qt?i.jsxs("div",{className:"mg-video-container",onClick:ae,children:[qt.isGif?i.jsx("img",{className:"mg-video",src:qt.url,alt:oe.name}):i.jsx("video",{ref:We,className:"mg-video",src:qt.url,loop:!0,muted:!0,playsInline:!0},oe.name),!Ee&&!qt.isGif&&i.jsxs("div",{className:"mg-video-overlay",children:[i.jsx("svg",{className:"mg-play-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"rgba(255,255,255,0.9)",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),i.jsx("span",{className:"mg-video-hint",children:"Tap for demo"})]})]}):i.jsxs("div",{className:"mg-video-placeholder",children:[i.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",opacity:"0.4",children:[i.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"2.18",ry:"2.18"}),i.jsx("line",{x1:"7",y1:"2",x2:"7",y2:"22"}),i.jsx("line",{x1:"17",y1:"2",x2:"17",y2:"22"}),i.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),i.jsx("line",{x1:"2",y1:"7",x2:"7",y2:"7"}),i.jsx("line",{x1:"2",y1:"17",x2:"7",y2:"17"}),i.jsx("line",{x1:"17",y1:"7",x2:"22",y2:"7"}),i.jsx("line",{x1:"17",y1:"17",x2:"22",y2:"17"})]}),i.jsx("span",{children:"Video coming soon"})]}),i.jsx("div",{className:"wk-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"mg-exercise-card",children:[i.jsx("h2",{className:"mg-ex-name",children:oe.name}),i.jsx("span",{className:`mg-ex-type-badge ${oe.type}`,children:oe.type==="weighted"?"Weight + Reps":oe.type==="reps"?"Reps Only":"Timed"}),i.jsxs("div",{className:"mg-ex-set-info",children:[i.jsxs("span",{className:"mg-ex-set-num",children:["Set ",ke+1," of ",oe.sets]}),oe.type!=="timed"&&i.jsxs("span",{className:"mg-ex-target",children:["Target: ",oe.reps," reps"]}),oe.type==="timed"&&i.jsxs("span",{className:"mg-ex-target",children:["Target: ",oe.time,"s"]})]}),oe.type==="weighted"&&i.jsxs("div",{className:"mg-input-area",children:[i.jsxs("div",{className:"mg-input-group",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",className:"mg-input",value:Ut,onChange:nn=>Je(nn.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"mg-input-group",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:ot,onChange:nn=>Zt(nn.target.value),placeholder:"0"})]})]}),oe.type==="reps"&&i.jsx("div",{className:"mg-input-area",children:i.jsxs("div",{className:"mg-input-group mg-input-single",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",className:"mg-input",value:ot,onChange:nn=>Zt(nn.target.value),placeholder:"0"})]})}),oe.type==="timed"&&i.jsxs("div",{className:"mg-timer-area",children:[i.jsx("div",{className:"mg-timer-display",children:i.jsxs("span",{className:"mg-timer-value",children:[ce,"s"]})}),xt?i.jsx("button",{className:"mg-timer-btn mg-timer-stop",onClick:()=>Xt(!1),children:"Stop"}):i.jsx("button",{className:"mg-timer-btn",onClick:()=>{ce===0&&de(oe.time),Xt(!0)},children:ce<oe.time&&ce>0?"Resume":"Start Timer"})]}),i.jsx("button",{className:"mg-log-set-btn",onClick:E,children:Nn}),ne.sets.length>0&&i.jsx("div",{className:"mg-completed-sets",children:ne.sets.map((nn,Tn)=>i.jsxs("div",{className:"mg-completed-set",children:[i.jsx("span",{className:"mg-completed-set-check",children:""}),i.jsxs("span",{children:["Set ",Tn+1,": ",nn.weight!=null?`${nn.weight}kg  ${nn.reps}`:nn.reps!=null?`${nn.reps} reps`:`${nn.time}s`]})]},Tn))})]})]}),pt]})}if(g==="muscle_complete"){const H=xe.reduce((ke,Re)=>ke+Re.sets.length,0),oe=xe.reduce((ke,Re)=>ke+Re.sets.reduce((Ye,wt)=>Ye+(wt.weight||0)*(wt.reps||0),0),0),ne=Ac.find(ke=>ke.key===kt)?.label||"";return i.jsxs("div",{className:"wk-page wk-page-center","data-theme":o?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"wk-complete",children:[i.jsxs("div",{className:"wk-complete-ring",children:[i.jsx("svg",{className:"wk-complete-svg",viewBox:"0 0 200 200",children:ul.map((ke,Re)=>i.jsx("line",{x1:ke.x1,y1:ke.y1,x2:ke.x2,y2:ke.y2,className:"wk-tick-complete",strokeWidth:ke.thick?"3.5":"2",style:{animationDelay:`${Re*.02}s`}},Re))}),i.jsx("div",{className:"wk-complete-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsxs("h2",{className:"wk-complete-title",children:[ne," Complete!"]}),i.jsx("p",{className:"mg-complete-session-name",children:se?.name}),i.jsxs("div",{className:"wk-complete-stats",children:[i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:xe.length}),i.jsx("span",{className:"wk-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:H}),i.jsx("span",{className:"wk-stat-label",children:"Sets"})]}),oe>0&&i.jsxs("div",{className:"wk-stat",children:[i.jsx("span",{className:"wk-stat-val",children:Math.round(oe).toLocaleString()}),i.jsx("span",{className:"wk-stat-label",children:"Volume (kg)"})]})]}),i.jsx("div",{className:"wk-complete-actions",children:i.jsx("button",{className:"wk-btn-primary",onClick:()=>{an(null),vt(null),Mt(null),y("menu")},children:"Done"})})]}),At&&i.jsx("div",{className:"mg-badge-celebration",onClick:()=>Mt(null),children:i.jsxs("div",{className:"mg-badge-celebration-card",children:[i.jsx("div",{className:"mg-badge-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",width:"48",height:"48",fill:"#ffc107",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})}),i.jsx("h3",{className:"mg-badge-celebration-title",children:At.badges.length===1?"Badge Earned!":`${At.badges.length} Badges Earned!`}),i.jsx("div",{className:"mg-badge-celebration-list",children:At.badges.map((ke,Re)=>i.jsx("div",{className:"mg-badge-celebration-item",children:ke.type==="pb_target"?`${ke.exercise}  ${ke.targetWeight}kg`:ke.label},Re))}),i.jsx("button",{className:"mg-badge-celebration-dismiss",children:"Tap to dismiss"})]})})]})}return null}const tM=60,nM={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},sM=[{threshold:1e3,label:"1 Tonne"},{threshold:5e3,label:"5 Tonne"},{threshold:1e4,label:"10 Tonne"},{threshold:25e3,label:"25 Tonne"},{threshold:5e4,label:"50 Tonne"},{threshold:1e5,label:"100 Tonne"},{threshold:25e4,label:"250 Tonne"},{threshold:5e5,label:"500 Tonne"},{threshold:1e6,label:"1 Million kg"}],A_=[{id:"fullbody_4wk",name:"4-Week Full Body",focus:"fullbody",duration:4,daysPerWeek:3,level:"All Levels",description:"Build total body strength with compound dumbbell movements and bodyweight finishers",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push Focus",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:3,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Goblet Squats",type:"weighted",sets:3,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull Focus",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:3,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:3,baseReps:10,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Reverse Lunge",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/reverse lunge.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Legs & Core",exercises:[{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Box Step Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/box step ups.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_8wk",name:"8-Week Full Body",focus:"fullbody",duration:8,daysPerWeek:3,level:"Intermediate",description:"Two-phase programme building strength and endurance across your full body",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Power",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"}]},{name:"Day 3",label:"Endurance",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"fullbody_12wk",name:"12-Week Full Body",focus:"fullbody",duration:12,daysPerWeek:3,level:"Advanced",description:"Complete transformation programme: push, pull, and legs over three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Upper Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:8,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Skullcrushers",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/skullcrushers.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Lower Body",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:8,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 3",label:"Upper Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:8,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:4,baseReps:8,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]},{id:"core_4wk",name:"4-Week Core",focus:"core",duration:4,daysPerWeek:3,level:"Beginner",description:"Build a solid core foundation with targeted ab and stability work",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Abs",exercises:[{name:"Crunch",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Stability",exercises:[{name:"Dead Bug",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Bird Dog",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Bird Dog.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:20,storagePath:"exercises/bodyweight/core/Side Plank.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"}]},{name:"Day 3",label:"Power Core",exercises:[{name:"Single Leg V-Up",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Single Leg V-Up.mp4"},{name:"Toe Reaches",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/toe reaches.GIF"},{name:"Russian Twists Dumbbell",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/core/russian twists dumbbell.GIF"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Fast Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Fast Mountain Climbers.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_8wk",name:"8-Week Core",focus:"core",duration:8,daysPerWeek:3,level:"Intermediate",description:"Develop deep core strength and rotational power over two phases",repProg:1,timeProg:3,days:[{name:"Day 1",label:"Anti-Extension",exercises:[{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Dead Bug",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug.mp4"},{name:"Plank Walkout",type:"reps",sets:3,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"},{name:"Leg Raises",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Mountain Climbers",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Mountain Climbers.mp4"}]},{name:"Day 2",label:"Rotation",exercises:[{name:"Russian Twist",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Russian Twist.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Side Plank Rotation",type:"reps",sets:2,baseReps:10,storagePath:"exercises/bodyweight/core/Side Plank Rotation.mp4"},{name:"High Plank Shoulder Taps",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/High Plank Shoulder Taps.mp4"},{name:"Hollow Hold To V-Sit",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Flutter Kicks",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Flutter Kicks.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Kettlebell Bird Dog Drag",type:"reps",sets:3,baseReps:10,storagePath:"exercises/kettlebells/core/kettlebell bird dog drag.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:40,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"core_12wk",name:"12-Week Core",focus:"core",duration:12,daysPerWeek:3,level:"Advanced",description:"Ultimate core transformation: stability, strength, and power across three phases",repProg:1,timeProg:2,days:[{name:"Day 1",label:"Strength",exercises:[{name:"Forearm Plank",type:"timed",sets:4,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"},{name:"Plank Walkout",type:"reps",sets:4,baseReps:8,storagePath:"exercises/bodyweight/core/Plank Walkout.mp4"},{name:"Leg Raises",type:"reps",sets:4,baseReps:12,storagePath:"exercises/bodyweight/core/Leg Raises.mp4"},{name:"Kettlebell Side Bends",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kettlebell side bends.mp4"},{name:"Dead Bug Single Leg Drop",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Dead Bug Single Leg Drop.mp4"},{name:"Hollow Body Hold",type:"timed",sets:3,baseTime:25,storagePath:"exercises/bodyweight/core/Hollow Body Hold.mp4"}]},{name:"Day 2",label:"Endurance",exercises:[{name:"Crunch",type:"reps",sets:4,baseReps:15,storagePath:"exercises/bodyweight/core/Crunch.mp4"},{name:"Kettlebell Russian Twist",type:"weighted",sets:4,baseReps:15,storagePath:"exercises/kettlebells/core/kettlebell russian twist.mp4"},{name:"Bicycle Crunch",type:"reps",sets:3,baseReps:20,storagePath:"exercises/bodyweight/core/Bicycle Crunch.mp4"},{name:"Hollow Hold Flutter Kicks",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Hollow Hold Flutter Kicks.mp4"},{name:"Cross Body Mountain Climbers",type:"reps",sets:3,baseReps:25,storagePath:"exercises/bodyweight/core/Cross Body Mountain Climbers.mp4"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]},{name:"Day 3",label:"Power",exercises:[{name:"Hollow Hold To V-Sit",type:"reps",sets:4,baseReps:10,storagePath:"exercises/bodyweight/core/Hollow Hold To V-sit.mp4"},{name:"Reverse Crunch To Leg Raise",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Reverse Crunch To Leg Raise.mp4"},{name:"Burpee",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/core/Burpee.mp4"},{name:"Hip Dips Plank",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/core/Hip Dips Plank.mp4"},{name:"Kneeling Kettlebell Halo",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/kettlebells/core/kneeling kettlebell halo.mp4"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:35,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]}]},{id:"upper_4wk",name:"4-Week Upper Body",focus:"upper",duration:4,daysPerWeek:3,level:"Intermediate",description:"Sculpt and strengthen your chest, back, shoulders, and arms",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Push",exercises:[{name:"Dumbbell Floor Press",type:"weighted",sets:4,baseReps:10,pbKey:"chestPress",storagePath:"exercises/dumbbells/upper/dumbbell floor press.mp4"},{name:"Seated Dumbbell Shoulder Press",type:"weighted",sets:3,baseReps:10,pbKey:"shoulderPress",storagePath:"exercises/dumbbells/upper/seated dumbbell shoulder press.mp4"},{name:"Dumbbell Overhead Tricep Extension",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/dumbbell overhead tricep extension.mp4"},{name:"Tricep Dips",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/upper/tricep dips.mp4"},{name:"Pike Push Ups",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/upper/pike push ups.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 2",label:"Pull",exercises:[{name:"Dumbbell Bent Over Row",type:"weighted",sets:4,baseReps:10,pbKey:"seatedRow",storagePath:"exercises/dumbbells/upper/dumbbell bent over row.mp4"},{name:"Single Arm Bent Over Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/single arm bent over row.mp4"},{name:"Dumbbell Bent Over Rear Delt Fly",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell bent over rear delt fly.mp4"},{name:"Bicep Curl",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/bicep curl.mp4"},{name:"Hammer Curl",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/hammer curl.mp4"},{name:"Reverse Plank",type:"timed",sets:3,baseTime:20,storagePath:"exercises/bodyweight/upper/reverse plank.GIF"}]},{name:"Day 3",label:"Mixed",exercises:[{name:"Seated Dumbbell Arnold Press",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/seated dumbbell arnold press.mp4"},{name:"Dumbbell Lateral Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell lateral raise.mp4"},{name:"Dumbbell Front Raise",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/upper/dumbbell front raise.mp4"},{name:"Press Up",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/upper/press up.mp4"},{name:"Renegade Row",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/upper/renegade row.mp4"},{name:"Superman Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/core/Superman Hold.mp4"}]}]},{id:"lower_4wk",name:"4-Week Lower Body",focus:"lower",duration:4,daysPerWeek:3,level:"Intermediate",description:"Build powerful legs and glutes with squats, deadlifts, and plyometrics",repProg:2,timeProg:5,days:[{name:"Day 1",label:"Quad Dominant",exercises:[{name:"Dumbbell Goblet Squats",type:"weighted",sets:4,baseReps:10,pbKey:"squat",storagePath:"exercises/dumbbells/lower/dumbbell goblet squats.mp4"},{name:"Forward Dumbbell Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/forward dumbbell lunges.GIF"},{name:"Dumbbell Box Step Ups",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell box step ups.mp4"},{name:"Dumbbell Squat Pulses",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell squat pulses.GIF"},{name:"Jump Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/jump squats.GIF"},{name:"Squat And Hold",type:"timed",sets:3,baseTime:30,storagePath:"exercises/bodyweight/lower/squat and hold.GIF"}]},{name:"Day 2",label:"Hamstring & Glute",exercises:[{name:"Romanian Deadlifts",type:"weighted",sets:4,baseReps:8,pbKey:"deadlift",storagePath:"exercises/dumbbells/lower/romanian deadlifts.GIF"},{name:"1 Legged RDL",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/1 legged rdl.GIF"},{name:"Hip Thrusts",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/hip thrusts.GIF"},{name:"Dumbbell Reverse Lunges",type:"weighted",sets:3,baseReps:12,storagePath:"exercises/dumbbells/lower/dumbbell reverse lunges.GIF"},{name:"Donkey Kicks",type:"reps",sets:3,baseReps:15,storagePath:"exercises/bodyweight/lower/donkey kicks.GIF"},{name:"Forearm Plank",type:"timed",sets:3,baseTime:30,pbKey:"plank",storagePath:"exercises/bodyweight/core/Forearm Plank.mp4"}]},{name:"Day 3",label:"Power & Stability",exercises:[{name:"Dumbbell Sumo Squats",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/dumbbells/lower/dumbbell sumo squats.GIF"},{name:"Kettlebell Romanian Deadlift",type:"weighted",sets:3,baseReps:10,storagePath:"exercises/kettlebells/lower/kettlebell romanian deadlift.mp4"},{name:"Weighted Calf Raises",type:"weighted",sets:3,baseReps:15,storagePath:"exercises/dumbbells/lower/weighted calf raises.GIF"},{name:"Bulgarian Split Squats",type:"reps",sets:3,baseReps:10,storagePath:"exercises/bodyweight/lower/bulgarian split squats.GIF"},{name:"Skater Jumps",type:"reps",sets:3,baseReps:12,storagePath:"exercises/bodyweight/lower/skater jumps.GIF"},{name:"Side Plank",type:"timed",sets:2,baseTime:25,storagePath:"exercises/bodyweight/core/Side Plank.mp4"}]}]}];function zh(s,e,n){const a=s.baseReps?s.baseReps+(e-1)*(n.repProg||0):void 0,o=s.baseTime?s.baseTime+(e-1)*(n.timeProg||0):void 0;return{sets:s.sets,reps:a,time:o}}const rM={fullbody:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm-2 8h4l1 4h2l-1 4h-2l-1 4h-2l-1-4H8l-1-4h2l1-4z",core:"M12 2a4 4 0 0 1 4 4v1h-2V6a2 2 0 1 0-4 0v1H8V6a4 4 0 0 1 4-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z",upper:"M12 2a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3zm8 10l-3-1.5c-.5-.25-1-.5-1.5-.5h-7c-.5 0-1 .25-1.5.5L4 12l-2 6h4l1.5 4h9L18 18h4l-2-6z",lower:"M16.5 3A2.5 2.5 0 0 0 14 5.5 2.5 2.5 0 0 0 16.5 8 2.5 2.5 0 0 0 19 5.5 2.5 2.5 0 0 0 16.5 3zM14 9l-3 7h2l1 6h2l1-6h2l-3-7h-2z"};function aM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=ia(),{isDark:o,toggleTheme:u,accent:d}=Pi(),p=qs(),g=Or(),[y,_]=w.useState("loading"),[T,k]=w.useState(null),O=w.useRef(!1),[W,B]=w.useState(null),[P,le]=w.useState(1),[ee,me]=w.useState(0),[je,ze]=w.useState(0),[Ae,A]=w.useState(0),[S,C]=w.useState([]),[D,M]=w.useState(""),[U,I]=w.useState(""),[He,Et]=w.useState(!1),[Y,Se]=w.useState(0),Me=w.useRef(null),[lt,nt]=w.useState({}),[V,G]=w.useState(!1),ye=w.useRef(null),[Ne,Be]=w.useState(null),[De,Ze]=w.useState([]);w.useEffect(()=>{window.scrollTo(0,0)},[y]);const[at,ft]=w.useState(null),Bt=w.useCallback((ce,de="info")=>{ft({message:ce,type:de}),setTimeout(()=>ft(null),4e3)},[]),fn=w.useRef(null),kt=()=>(fn.current||(fn.current=new(window.AudioContext||window.webkitAudioContext)),fn.current),vt=()=>{try{const ce=kt(),de=ce.createOscillator(),Ee=ce.createGain();de.connect(Ee),Ee.connect(ce.destination),de.frequency.value=1200,Ee.gain.value=.4,de.start(ce.currentTime),de.stop(ce.currentTime+.3)}catch{}};w.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),w.useEffect(()=>{if(!n)return;(async()=>{try{const de=Nt(rt,"clientProgrammes",n.id),Ee=await Wn(de);Ee.exists()?(B(Ee.data()),_("dashboard")):g.state?.templateId?_("browse"):p("/client/core-buddy/workouts",{replace:!0})}catch(de){console.error("Error loading programme:",de),p("/client/core-buddy/workouts",{replace:!0})}})()},[n]),w.useEffect(()=>{if(O.current||y==="loading")return;const ce=g.state?.templateId;if(!ce)return;const de=A_.find(Ee=>Ee.id===ce);de&&(O.current=!0,k(de),_("overview"))},[y,g.state]),w.useEffect(()=>{if(!He||Y<=0){He&&Y<=0&&(Et(!1),vt());return}return Me.current=setTimeout(()=>Se(ce=>ce-1),1e3),()=>clearTimeout(Me.current)},[He,Y]);const se=async ce=>{if(n)try{await $n(Nt(rt,"clientProgrammes",n.id),ce),B(ce)}catch(de){console.error("Error saving programme:",de),Bt("Failed to save. Check Firestore rules for clientProgrammes.","error")}},an=async ce=>{const de={templateId:ce.id,startDate:it.now(),completedSessions:{}};await se(de),_("dashboard")},Ct=async()=>{if(n)try{await ny(Nt(rt,"clientProgrammes",n.id)),B(null),_("browse")}catch(ce){console.error("Error quitting programme:",ce)}},gt=()=>W?A_.find(ce=>ce.id===W.templateId):null,ht=()=>{if(!W)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const ce=W.completedSessions||{},de=Object.keys(ce).length,Ee=gt();if(!Ee)return{currentWeek:1,completedThisWeek:0,nextDay:0,totalCompleted:0};const $e=Ee.duration*Ee.daysPerWeek,Fe=Math.min(Math.floor(de/Ee.daysPerWeek)+1,Ee.duration),Pe=de-(Fe-1)*Ee.daysPerWeek;for(let We=1;We<=Ee.duration;We++)for(let Ue=0;Ue<Ee.daysPerWeek;Ue++){const Ve=`w${We}d${Ue}`;if(!ce[Ve])return{currentWeek:We,completedThisWeek:Pe,nextDay:Ue,nextWeek:We,totalCompleted:de,totalSessions:$e}}return{currentWeek:Ee.duration,completedThisWeek:Ee.daysPerWeek,nextDay:-1,totalCompleted:de,totalSessions:$e,complete:!0}},pe=(ce,de,Ee)=>{if(!W||ce<=1)return null;const $e=`w${ce-1}d${de}`,Fe=W.completedSessions?.[$e];if(!Fe)return null;const Pe=Fe.exercises?.find(We=>We.name===Ee);return Pe?.sets?.length?Pe.sets[Pe.sets.length-1]:null},xe=(ce,de)=>{const Ee=gt();if(!Ee)return;le(ce),me(de),ze(0),A(0),C([]),I(""),Et(!1),Se(0),G(!1),nt({});const $e=Ee.days[de],Fe=$e.exercises.map(Ve=>{const jt=zh(Ve,ce,Ee);return{name:Ve.name,type:Ve.type,pbKey:Ve.pbKey,targetSets:jt.sets,targetReps:jt.reps,targetTime:jt.time,sets:[]}});C(Fe);const Pe=$e.exercises[0],We=pe(ce,de,Pe.name);We?.weight&&Pe.type==="weighted"?M(String(We.weight)):M(""),(async()=>{const Ve={};for(const jt of $e.exercises)if(jt.storagePath)try{const At=Vc(Bc,jt.storagePath),Mt=await sd(At);Ve[jt.name]={url:Mt,isGif:/\.gif$/i.test(jt.storagePath)}}catch(At){console.warn(`Video not found for ${jt.name}:`,At)}nt(Ve)})(),_("session")},et=async()=>{gt();const ce=S[je];if(!ce)return;let de={};if(ce.type==="weighted"){const Fe=parseFloat(D)||0,Pe=parseInt(U)||0;if(Pe===0){Bt("Enter your reps","error");return}de={weight:Fe,reps:Pe}}else if(ce.type==="reps"){const Fe=parseInt(U)||0;if(Fe===0){Bt("Enter your reps","error");return}de={reps:Fe}}else if(ce.type==="timed"){const Fe=ce.targetTime-Y;de={time:Math.max(Fe,1)}}const Ee=[...S];Ee[je]={...ce,sets:[...ce.sets,de]},C(Ee),ce.type==="weighted"&&de.weight>0&&await ot(ce.name,de.weight,de.reps);const $e=ce.sets.length+1;if($e<ce.targetSets)A($e),M(de.weight?String(de.weight):""),I(""),Et(!1),Se(0);else if(je+1<S.length){const Fe=je+1;ze(Fe),A(0),G(!1);const We=gt()?.days[ee]?.exercises[Fe],Ue=pe(P,ee,We?.name);Ue?.weight&&We?.type==="weighted"?M(String(Ue.weight)):M(""),I(""),Et(!1),Se(0)}else await Ut(Ee)},Ut=async ce=>{if(!W||!n)return;const de=`w${P}d${ee}`,Ee={...W.completedSessions,[de]:{completedAt:new Date().toISOString(),exercises:ce.map(Pe=>({name:Pe.name,type:Pe.type,sets:Pe.sets}))}},$e={...W,completedSessions:Ee};await se($e);const Fe=ce.reduce((Pe,We)=>Pe+We.sets.reduce((Ue,Ve)=>Ue+(Ve.weight||0)*(Ve.reps||0),0),0);Fe>0&&await Je(Fe);try{const Pe=gt();await Qp(Es(rt,"workoutLogs"),{clientId:n.id,type:"programme",programmeId:Pe?.id,programmeName:Pe?.name,week:P,day:ee+1,exerciseCount:ce.length,duration:Math.round(ce.reduce((We,Ue)=>We+Ue.sets.length*1.5,0)),volume:Math.round(Fe),completedAt:it.now()})}catch(Pe){console.error("Error saving workout log:",Pe)}De.length>0&&(Be({badges:[...De]}),Ze([])),_("sessionComplete")},Je=async ce=>{if(n)try{const de=await Wn(Nt(rt,"coreBuddyAchievements",n.id)),Ee=de.exists()?de.data():{clientId:n.id,badges:[],totalVolume:0},$e=Ee.totalVolume||0,Fe=$e+ce,Pe=[];sM.forEach(Ue=>{Fe>=Ue.threshold&&$e<Ue.threshold&&(Ee.badges.some(jt=>jt.type==="volume_milestone"&&jt.milestone===Ue.threshold)||Pe.push({type:"volume_milestone",milestone:Ue.threshold,label:Ue.label,achievedAt:it.now()}))});const We=[...Ee.badges,...Pe];await $n(Nt(rt,"coreBuddyAchievements",n.id),{clientId:n.id,badges:We,totalVolume:Math.round(Fe),updatedAt:it.now()}),Pe.length>0&&Ze(Ue=>[...Ue,...Pe])}catch(de){console.error("Error updating volume:",de)}},ot=async(ce,de,Ee)=>{if(n)try{const $e=n.id,Fe=await Wn(Nt(rt,"coreBuddyPBs",$e)),We=(Fe.exists()?Fe.data():null)?.exercises||{},Ue=We[ce];let Ve=!1;if(Ue?(de>(Ue.weight||0)||de===(Ue.weight||0)&&Ee>(Ue.reps||0))&&(Ve=!0):Ve=!0,Ve){const jt={...We,[ce]:{weight:de,reps:Ee,achievedAt:it.now()}};await $n(Nt(rt,"coreBuddyPBs",$e),{clientId:n.id,exercises:jt,updatedAt:it.now()}),Bt(`New PB! ${de}kg  ${Ee} reps`,"success"),vt(),await Zt(ce,de)}}catch($e){console.error("Error checking PB:",$e)}},Zt=async(ce,de)=>{if(n)try{const Ee=await Wn(Nt(rt,"coreBuddyTargets",n.id));if(!Ee.exists())return;const Fe=(Ee.data().targets||{})[ce];if(!Fe||de<Fe.targetWeight)return;const Pe=await Wn(Nt(rt,"coreBuddyAchievements",n.id)),We=Pe.exists()?Pe.data():{clientId:n.id,badges:[],totalVolume:0};if(We.badges.some(At=>At.type==="pb_target"&&At.exercise===ce&&At.targetWeight===Fe.targetWeight))return;const Ve={type:"pb_target",exercise:ce,group:nM[ce]||"push",targetWeight:Fe.targetWeight,achievedAt:it.now()},jt=[...We.badges,Ve];await $n(Nt(rt,"coreBuddyAchievements",n.id),{...We,badges:jt,updatedAt:it.now()}),Ze(At=>[...At,Ve])}catch(Ee){console.error("Error checking target badge:",Ee)}},xt=at&&i.jsxs("div",{className:`toast-notification ${at.type}`,children:[at.type==="success"&&i.jsx("span",{children:" "}),at.message]}),Xt=(ce,de)=>i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:de,"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})});if(a||y==="loading")return i.jsx("div",{className:"cb-loading",children:i.jsx("div",{className:"cb-loading-spinner"})});if(y==="browse")return p("/client/core-buddy/workouts",{replace:!0}),null;if(y==="overview"&&T){const ce=T;return i.jsxs("div",{className:"pg-page","data-theme":o?"dark":"light","data-accent":d,children:[Xt(ce.name,()=>p("/client/core-buddy/workouts")),i.jsxs("main",{className:"pg-main",children:[i.jsxs("div",{className:"pg-overview-hero",children:[i.jsx("svg",{className:"pg-overview-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:rM[ce.focus]})}),i.jsx("h2",{className:"pg-overview-name",children:ce.name}),i.jsx("p",{className:"pg-overview-desc",children:ce.description}),i.jsxs("div",{className:"pg-overview-stats",children:[i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:ce.duration}),i.jsx("span",{className:"pg-ov-stat-label",children:"Weeks"})]}),i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:ce.daysPerWeek}),i.jsx("span",{className:"pg-ov-stat-label",children:"Days/Week"})]}),i.jsxs("div",{className:"pg-ov-stat",children:[i.jsx("span",{className:"pg-ov-stat-num",children:ce.duration*ce.daysPerWeek}),i.jsx("span",{className:"pg-ov-stat-label",children:"Sessions"})]})]})]}),i.jsx("div",{className:"pg-overview-days",children:ce.days.map((de,Ee)=>i.jsxs("div",{className:"pg-day-card",children:[i.jsxs("div",{className:"pg-day-header",children:[i.jsx("span",{className:"pg-day-name",children:de.name}),i.jsx("span",{className:"pg-day-label",children:de.label})]}),i.jsx("div",{className:"pg-day-exercises",children:de.exercises.map(($e,Fe)=>{const Pe=zh($e,1,ce);return i.jsxs("div",{className:"pg-day-ex",children:[i.jsx("span",{className:"pg-day-ex-name",children:$e.name}),i.jsx("span",{className:"pg-day-ex-target",children:$e.type==="timed"?`${Pe.sets}${Pe.time}s`:`${Pe.sets}${Pe.reps}`}),i.jsx("span",{className:`pg-day-ex-badge pg-badge-${$e.type}`,children:$e.type==="weighted"?"WT":$e.type==="timed"?"TMR":"BW"})]},Fe)})})]},Ee))}),i.jsxs("div",{className:"pg-overview-note",children:[i.jsx("strong",{children:"Progressive Overload:"})," +",ce.repProg," reps/week",ce.timeProg?`, +${ce.timeProg}s/week for timed`:""]}),i.jsx("button",{className:"pg-start-btn",onClick:()=>an(ce),children:"Start Programme"})]}),xt]})}if(y==="dashboard"){const ce=gt();if(!ce)return _("browse"),null;const de=ht(),Ee=W?.completedSessions||{},$e=de.totalSessions?Math.round(de.totalCompleted/de.totalSessions*100):0,Fe=Math.round(de.totalCompleted/(de.totalSessions||1)*tM);return i.jsxs("div",{className:"pg-page","data-theme":o?"dark":"light","data-accent":d,children:[Xt("Programme",()=>p("/client/core-buddy/workouts")),i.jsxs("main",{className:"pg-main",children:[i.jsxs("div",{className:"pg-dash-hero",children:[i.jsxs("div",{className:"pg-dash-ring-wrap",children:[i.jsx("svg",{className:"pg-dash-ring-svg",viewBox:"0 0 200 200",children:ul.map((Pe,We)=>i.jsx("line",{x1:Pe.x1,y1:Pe.y1,x2:Pe.x2,y2:Pe.y2,className:We<Fe?"pg-tick-filled":"pg-tick-empty",strokeWidth:Pe.thick?"3":"2"},We))}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"pg-dash-ring-logo",width:"50",height:"50"})]}),i.jsx("h2",{className:"pg-dash-name",children:ce.name}),i.jsxs("div",{className:"pg-dash-progress-text",children:[i.jsxs("span",{className:"pg-dash-pct",children:[$e,"%"]}),i.jsxs("span",{className:"pg-dash-week",children:["Week ",de.currentWeek," of ",ce.duration]})]})]}),i.jsx("div",{className:"pg-weeks",children:Array.from({length:ce.duration},(Pe,We)=>{const Ue=We+1;return i.jsxs("div",{className:`pg-week-row${Ue===de.currentWeek?" pg-week-current":""}`,children:[i.jsxs("span",{className:"pg-week-label",children:["W",Ue]}),i.jsx("div",{className:"pg-week-days",children:ce.days.map((Ve,jt)=>{const At=`w${Ue}d${jt}`,Mt=!!Ee[At],zt=!de.complete&&Ue===de.nextWeek&&jt===de.nextDay;return i.jsx("button",{className:`pg-day-dot${Mt?" done":""}${zt?" next":""}`,disabled:Mt,onClick:()=>{zt&&xe(Ue,jt)},children:Mt?i.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})}):i.jsx("span",{children:Ve.name.replace("Day ","")})},jt)})})]},We)})}),!de.complete&&de.nextDay>=0&&i.jsxs("div",{className:"pg-next-session",children:[i.jsx("h3",{children:"Next Session"}),i.jsxs("p",{className:"pg-next-info",children:["Week ",de.nextWeek,"  ",ce.days[de.nextDay].name,": ",ce.days[de.nextDay].label]}),i.jsx("div",{className:"pg-next-exercises",children:ce.days[de.nextDay].exercises.map((Pe,We)=>{const Ue=zh(Pe,de.nextWeek,ce);return i.jsxs("div",{className:"pg-next-ex",children:[i.jsx("span",{className:"pg-next-ex-name",children:Pe.name}),i.jsx("span",{className:"pg-next-ex-target",children:Pe.type==="timed"?`${Ue.sets}${Ue.time}s`:`${Ue.sets}${Ue.reps}`})]},We)})}),i.jsx("button",{className:"pg-start-btn",onClick:()=>xe(de.nextWeek,de.nextDay),children:"Start Session"})]}),de.complete&&i.jsxs("div",{className:"pg-complete-msg",children:[i.jsx("h3",{children:"Programme Complete! "}),i.jsxs("p",{children:["You finished all ",de.totalSessions," sessions."]}),i.jsx("button",{className:"pg-start-btn",onClick:Ct,children:"Choose New Programme"})]}),i.jsx("button",{className:"pg-quit-btn",onClick:()=>{confirm("Quit this programme? Progress will be lost.")&&Ct()},children:"Quit Programme"})]}),i.jsx(Sl,{active:"workouts"}),xt]})}if(y==="session"){const ce=gt();if(!ce)return null;const de=ce.days[ee],Ee=de.exercises[je],$e=zh(Ee,P,ce),Fe=S[je],Pe=Fe?.sets?.length||0,We=de.exercises.length,Ue=(je+Pe/$e.sets)/We,Ve=lt[Ee.name],jt=pe(P,ee,Ee.name);Ee.type==="timed"&&Y===0&&!He&&Pe===Ae&&setTimeout(()=>Se($e.time),0);const At=()=>{Ve?.isGif?G(!V):ye.current&&(V?ye.current.pause():ye.current.play(),G(!V))};return i.jsxs("div",{className:"pg-page pg-page-session","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("div",{className:"pg-session-progress",children:i.jsx("div",{className:"pg-session-progress-fill",style:{width:`${Ue*100}%`}})}),i.jsxs("div",{className:"pg-session-header",children:[i.jsx("button",{className:"pg-session-back",onClick:()=>{confirm("Leave session? Progress will be lost.")&&_("dashboard")},children:i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M19 12H5M12 5l-7 7 7 7"})})}),i.jsxs("div",{className:"pg-session-title",children:[i.jsxs("span",{className:"pg-session-counter",children:[je+1," / ",We]}),i.jsxs("span",{className:"pg-session-week",children:["Week ",P,"  ",de.name]})]})]}),Ve&&i.jsxs("div",{className:"pg-video-container",onClick:At,children:[Ve.isGif?i.jsx("img",{className:"pg-video",src:Ve.url,alt:Ee.name}):i.jsx("video",{ref:ye,className:"pg-video",src:Ve.url,loop:!0,muted:!0,playsInline:!0},Ee.name),!V&&i.jsxs("div",{className:"pg-video-overlay",children:[i.jsx("svg",{className:"pg-play-icon",viewBox:"0 0 24 24",fill:"white",children:i.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),i.jsx("span",{className:"pg-video-hint",children:"Tap for demo"})]})]}),i.jsx("div",{className:"pg-spotify",children:i.jsx("iframe",{src:"https://open.spotify.com/embed/playlist/37i9dQZF1DZ06evO3FJyYF?utm_source=generator&theme=0",width:"100%",height:"80",frameBorder:"0",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",title:"Spotify Playlist"})}),i.jsxs("div",{className:"pg-exercise-card",children:[i.jsx("h2",{className:"pg-ex-name",children:Ee.name}),i.jsx("span",{className:`pg-ex-type-badge pg-badge-${Ee.type}`,children:Ee.type==="weighted"?"Weight + Reps":Ee.type==="timed"?"Timed":"Reps Only"}),Ee.type==="weighted"&&jt&&i.jsxs("div",{className:"pg-last-week",children:[i.jsx("span",{className:"pg-last-week-label",children:"Last week:"}),i.jsxs("span",{className:"pg-last-week-value",children:[jt.weight,"kg x ",jt.reps," reps"]})]}),i.jsxs("div",{className:"pg-ex-set-info",children:[i.jsxs("span",{className:"pg-ex-set-num",children:["Set ",Pe+1," of ",$e.sets]}),i.jsxs("span",{className:"pg-ex-target",children:["Target: ",Ee.type==="timed"?`${$e.time}s hold`:`${$e.reps} reps`]})]}),Ee.type==="weighted"&&i.jsxs("div",{className:"pg-input-area",children:[i.jsxs("div",{className:"pg-input-group",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",value:D,onChange:Mt=>M(Mt.target.value),placeholder:"0",className:"pg-input"})]}),i.jsxs("div",{className:"pg-input-group",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",value:U,onChange:Mt=>I(Mt.target.value),placeholder:String($e.reps),className:"pg-input"})]})]}),Ee.type==="reps"&&i.jsx("div",{className:"pg-input-area",children:i.jsxs("div",{className:"pg-input-group pg-input-single",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",inputMode:"numeric",value:U,onChange:Mt=>I(Mt.target.value),placeholder:String($e.reps),className:"pg-input"})]})}),Ee.type==="timed"&&i.jsxs("div",{className:"pg-timer-area",children:[i.jsx("div",{className:"pg-timer-display",children:i.jsxs("span",{className:"pg-timer-value",children:[Y,"s"]})}),He?i.jsx("button",{className:"pg-timer-btn pg-timer-stop",onClick:()=>Et(!1),children:"Stop"}):i.jsx("button",{className:"pg-timer-btn",onClick:()=>{Y===0&&Se($e.time),Et(!0)},children:Y<$e.time&&Y>0?"Resume":"Start Timer"})]}),i.jsx("button",{className:"pg-log-set-btn",onClick:et,disabled:Ee.type==="timed"&&He,children:Pe+1<$e.sets?"Log Set":je+1<We?"Log Set  Next Exercise":"Log Set  Complete"}),Fe?.sets?.length>0&&i.jsx("div",{className:"pg-completed-sets",children:Fe.sets.map((Mt,zt)=>i.jsxs("div",{className:"pg-completed-set",children:[i.jsx("span",{className:"pg-completed-set-check",children:""}),i.jsxs("span",{children:["Set ",zt+1,": ",Mt.weight!==void 0?`${Mt.weight}kg  ${Mt.reps}`:Mt.time!==void 0?`${Mt.time}s`:`${Mt.reps} reps`]})]},zt))})]}),xt]})}if(y==="sessionComplete"){const de=gt()?.days[ee],Ee=S.reduce((Fe,Pe)=>Fe+Pe.sets.length,0),$e=S.reduce((Fe,Pe)=>Fe+Pe.sets.reduce((We,Ue)=>We+(Ue.weight||0)*(Ue.reps||0),0),0);return i.jsxs("div",{className:"pg-page pg-page-center","data-theme":o?"dark":"light","data-accent":d,children:[i.jsxs("div",{className:"pg-session-done",children:[i.jsxs("div",{className:"pg-done-ring",children:[i.jsx("svg",{className:"pg-done-ring-svg",viewBox:"0 0 200 200",children:ul.map((Fe,Pe)=>i.jsx("line",{x1:Fe.x1,y1:Fe.y1,x2:Fe.x2,y2:Fe.y2,className:"pg-tick-complete",strokeWidth:Fe.thick?"3.5":"2",style:{animationDelay:`${Pe*.02}s`}},Pe))}),i.jsx("div",{className:"pg-done-center",children:i.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#4caf50",strokeWidth:"2.5",strokeLinecap:"round",children:i.jsx("path",{d:"M20 6L9 17l-5-5"})})})]}),i.jsx("h2",{className:"pg-done-title",children:"Session Complete!"}),i.jsxs("p",{className:"pg-done-subtitle",children:["Week ",P,"  ",de?.name,": ",de?.label]}),i.jsxs("div",{className:"pg-done-stats",children:[i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:S.length}),i.jsx("span",{className:"pg-done-stat-label",children:"Exercises"})]}),i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:Ee}),i.jsx("span",{className:"pg-done-stat-label",children:"Sets"})]}),$e>0&&i.jsxs("div",{className:"pg-done-stat",children:[i.jsx("span",{className:"pg-done-stat-num",children:Math.round($e).toLocaleString()}),i.jsx("span",{className:"pg-done-stat-label",children:"Volume (kg)"})]})]}),i.jsx("button",{className:"pg-start-btn",onClick:()=>_("dashboard"),children:"Back to Programme"})]}),Ne&&i.jsx("div",{className:"pg-badge-celebration",onClick:()=>Be(null),children:i.jsxs("div",{className:"pg-badge-celebration-card",onClick:Fe=>Fe.stopPropagation(),children:[i.jsx("div",{className:"pg-badge-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pg-badge-celebration-title",children:Ne.badges.length===1?"Badge Earned!":`${Ne.badges.length} Badges Earned!`}),i.jsx("div",{className:"pg-badge-celebration-list",children:Ne.badges.map((Fe,Pe)=>i.jsx("div",{className:"pg-badge-celebration-item",children:Fe.type==="pb_target"?`${Fe.exercise}  ${Fe.targetWeight}kg`:Fe.label},Pe))}),i.jsx("button",{className:"pg-badge-celebration-dismiss",onClick:()=>Be(null),children:"Tap to dismiss"})]})}),xt]})}return null}const iM={"Dumbbell Floor Press":"push","Seated Dumbbell Shoulder Press":"push","Seated Dumbbell Arnold Press":"push","Dumbbell Overhead Tricep Extension":"push",Skullcrushers:"push","Dumbbell Lateral Raise":"push","Dumbbell Front Raise":"push","Dumbbell Bent Over Row":"pull","Single Arm Bent Over Row":"pull","Bicep Curl":"pull","Hammer Curl":"pull","Dumbbell Bent Over Rear Delt Fly":"pull","Renegade Row":"pull","Dumbbell Goblet Squats":"lower","Romanian Deadlifts":"lower","Forward Dumbbell Lunges":"lower","Dumbbell Sumo Squats":"lower","Weighted Calf Raises":"lower","1 Legged RDL":"lower","Dumbbell Box Step Ups":"lower","Dumbbell Squat Pulses":"lower","Dumbbell Reverse Lunges":"lower","Kettlebell Romanian Deadlift":"lower","Russian Twists Dumbbell":"core","Kettlebell Russian Twist":"core","Kettlebell Side Bends":"core","Kneeling Kettlebell Halo":"core"},lM={push:{label:"Push",color:"#c75f6b",icon:"M4 12h3l3-9 4 18 3-9h3"},pull:{label:"Pull",color:"#5f8ac7",icon:"M12 2v10m0 0l-4-4m4 4l4-4M4 20h16"},lower:{label:"Lower",color:"#5fc77a",icon:"M12 2v8m-4 4l4 8 4-8m-8 0h8"},core:{label:"Core",color:"#c7a45f",icon:"M12 2a4 4 0 014 4v1h-2V6a2 2 0 10-4 0v1H8V6a4 4 0 014-4zM8 9h8v2H8V9zm-1 4h10l-1 9H8l-1-9z"}},vp=[{threshold:1e3,label:"1 Tonne",icon:"1T"},{threshold:5e3,label:"5 Tonne",icon:"5T"},{threshold:1e4,label:"10 Tonne",icon:"10T"},{threshold:25e3,label:"25 Tonne",icon:"25T"},{threshold:5e4,label:"50 Tonne",icon:"50T"},{threshold:1e5,label:"100 Tonne",icon:"100T"},{threshold:25e4,label:"250 Tonne",icon:"250T"},{threshold:5e5,label:"500 Tonne",icon:"500T"},{threshold:1e6,label:"1 Million kg",icon:"1M"}];function oM(s){return iM[s]||"push"}function cM(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}T`:`${Math.round(s)}`}function uM(s){return s>=1e6?"million kg":s>=1e3?"tonnes":"kg"}function hM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=ia(),{isDark:o,toggleTheme:u,accent:d}=Pi(),p=qs(),[g,y]=w.useState(!0),[_,T]=w.useState(null),[k,O]=w.useState({});w.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),w.useEffect(()=>{if(!n)return;(async()=>{try{const[C,D]=await Promise.all([Wn(Nt(rt,"coreBuddyAchievements",n.id)),Wn(Nt(rt,"coreBuddyPBs",n.id))]);C.exists()&&T(C.data()),D.exists()&&O(D.data().exercises||{})}catch(C){console.error("Error loading achievements:",C)}y(!1)})()},[n]);const W=_?.badges||[],B=_?.totalVolume||0,P=W.filter(S=>S.type==="pb_target"),le=W.filter(S=>S.type==="volume_milestone"),ee={push:[],pull:[],lower:[],core:[]};P.forEach(S=>{const C=S.group||oM(S.exercise);ee[C]&&ee[C].push(S)});const me=vp.find(S=>B<S.threshold),je=vp.filter(S=>B>=S.threshold).pop()?.threshold||0,ze=me?(B-je)/(me.threshold-je):1;if(a||g)return i.jsxs("div",{className:"ach-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsx("div",{className:"ach-loading-inline",children:i.jsx("div",{className:"cb-loading-spinner"})})]});const Ae=W.length,A=Ae>0||B>0;return i.jsxs("div",{className:"ach-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),i.jsxs("main",{className:"ach-main",children:[i.jsx("button",{className:"nut-back-btn",onClick:()=>p("/client/core-buddy"),children:" Back"}),i.jsxs("div",{className:"ach-stats-banner",children:[i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:Ae}),i.jsx("span",{className:"ach-stat-label",children:Ae===1?"Badge":"Badges"})]}),i.jsx("div",{className:"ach-stat-divider"}),i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:cM(B)}),i.jsxs("span",{className:"ach-stat-label",children:[uM(B)," lifted"]})]}),i.jsx("div",{className:"ach-stat-divider"}),i.jsxs("div",{className:"ach-stat-item",children:[i.jsx("span",{className:"ach-stat-num",children:Object.keys(k).length}),i.jsx("span",{className:"ach-stat-label",children:"PBs"})]})]}),!A&&i.jsxs("div",{className:"ach-empty",children:[i.jsx("div",{className:"ach-empty-icon",children:i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[i.jsx("path",{d:"M12 15l-3-3h6l-3 3z"}),i.jsx("path",{d:"M5 7h14l-1.5 9h-11L5 7z"}),i.jsx("path",{d:"M8.5 7V5a3.5 3.5 0 017 0v2"})]})}),i.jsx("h4",{children:"No achievements yet"}),i.jsx("p",{children:"Complete workouts to track volume and set PB targets to start earning badges."})]}),i.jsxs("div",{className:"ach-section",children:[i.jsxs("h3",{className:"ach-section-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})}),"Volume Milestones"]}),i.jsxs("div",{className:"ach-volume-hero",children:[i.jsxs("div",{className:"ach-volume-ring",children:[i.jsx("svg",{className:"ach-volume-ring-svg",viewBox:"0 0 200 200",children:ul.map((S,C)=>{const D=C<Math.round(ze*60);return i.jsx("line",{x1:S.x1,y1:S.y1,x2:S.x2,y2:S.y2,className:D?"ach-tick-filled":"ach-tick-empty",strokeWidth:S.thick?"3":"2"},C)})}),i.jsxs("div",{className:"ach-volume-center",children:[i.jsx("span",{className:"ach-volume-number",children:Math.round(B).toLocaleString()}),i.jsx("span",{className:"ach-volume-unit",children:"kg lifted"})]})]}),me&&i.jsxs("div",{className:"ach-volume-next",children:["Next: ",i.jsx("strong",{children:me.label})," (",(me.threshold-B).toLocaleString(),"kg to go)"]})]}),i.jsx("div",{className:"ach-milestone-shelf",children:vp.map((S,C)=>{const D=B>=S.threshold,M=le.find(U=>U.milestone===S.threshold);return i.jsxs("div",{className:`ach-milestone ${D?"unlocked":"locked"}`,children:[i.jsx("div",{className:"ach-milestone-hex",children:i.jsx("span",{className:"ach-milestone-icon",children:S.icon})}),i.jsx("span",{className:"ach-milestone-label",children:S.label}),M?.achievedAt&&i.jsx("span",{className:"ach-milestone-date",children:(M.achievedAt.toDate?M.achievedAt.toDate():new Date(M.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]},C)})})]}),i.jsxs("div",{className:"ach-section",children:[i.jsxs("h3",{className:"ach-section-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"PB Target Badges"]}),P.length===0?i.jsx("div",{className:"ach-pb-empty",children:i.jsxs("p",{children:["Set targets on your personal bests to start earning badges. Go to ",i.jsx("strong",{children:"My Progress"}),' and tap "Set Target" on any PB.']})}):Object.entries(ee).map(([S,C])=>{if(C.length===0)return null;const D=lM[S];return i.jsxs("div",{className:"ach-group",children:[i.jsxs("div",{className:"ach-group-header",style:{borderLeftColor:D.color},children:[i.jsx("span",{className:"ach-group-label",style:{color:D.color},children:D.label}),i.jsx("span",{className:"ach-group-count",children:C.length})]}),i.jsx("div",{className:"ach-badge-grid",children:C.map((M,U)=>i.jsxs("div",{className:"ach-badge-card",style:{animationDelay:`${U*.06}s`,"--group-color":D.color},children:[i.jsx("div",{className:"ach-badge-hex",style:{borderColor:D.color,boxShadow:`0 0 12px ${D.color}33`},children:i.jsx("svg",{className:"ach-badge-hex-icon",viewBox:"0 0 24 24",fill:"none",stroke:D.color,strokeWidth:"2",strokeLinecap:"round",children:i.jsx("path",{d:D.icon})})}),i.jsxs("div",{className:"ach-badge-info",children:[i.jsx("span",{className:"ach-badge-exercise",children:M.exercise}),i.jsxs("span",{className:"ach-badge-value",style:{color:D.color},children:[M.targetWeight,"kg"]}),M.achievedAt&&i.jsx("span",{className:"ach-badge-date",children:(M.achievedAt.toDate?M.achievedAt.toDate():new Date(M.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})]})]},U))})]},S)})]})]}),i.jsx(Sl,{active:"home"})]})}const Fh=[{key:"trained",label:"Trained",icon:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2.71 7 4.14 8.43 7.71 4.86 16.29 13.43 12.71 17 14.14 18.43 15.57 17 17 18.43 14.14 21.29l1.43 1.43 1.43-1.43 1.43 1.43 2.14-2.14 1.43 1.43L22 20.57z"},{key:"protein",label:"Hit Protein",icon:"M18 8h1a4 4 0 0 1 0 8h-1M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"},{key:"steps",label:"10k Steps",icon:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM9.8 8.9L7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6l1.8-.7"},{key:"sleep",label:"8hrs Sleep",icon:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},{key:"water",label:"2L Water",icon:"M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"}];function dM(s){const e=new Date(s),n=e.getDay(),a=n===0?-6:1-n;return e.setDate(e.getDate()+a),e.setHours(0,0,0,0),e}function bp(s){return s.toISOString().split("T")[0]}function fM(s){return Array.from({length:7},(e,n)=>{const a=new Date(s);return a.setDate(s.getDate()+n),a})}function mM(){const{currentUser:s,isClient:e,clientData:n,loading:a}=ia(),{isDark:o,toggleTheme:u,accent:d}=Pi(),p=qs(),[g,y]=w.useState({}),[_,T]=w.useState(!0),[k,O]=w.useState(!1),[W,B]=w.useState(0),[P,le]=w.useState(null),[ee,me]=w.useState(null),[je,ze]=w.useState(!1),Ae=w.useRef([]),A=w.useRef([]),S=w.useCallback((G,ye="info")=>{le({message:G,type:ye}),setTimeout(()=>le(null),3e3)},[]),C=new Date,D=bp(C),M=dM(C),U=fM(M),I=["M","T","W","T","F","S","S"];w.useEffect(()=>{!a&&(!s||!e)&&p("/")},[s,e,a,p]),w.useEffect(()=>{if(!s||!n)return;(async()=>{try{const ye=Es(rt,"habitLogs"),Ne=er(ye,Hs("clientId","==",n.id)),Be=await tr(Ne),De={};Be.docs.forEach(ft=>{const Bt=ft.data();De[Bt.date]={...Bt,_id:ft.id}}),y(De);let Ze=0;const at=new Date(C);for(;;){const ft=bp(at),Bt=De[ft];if(Bt)if(Object.values(Bt.habits||{}).filter(Boolean).length>=3)Ze++,at.setDate(at.getDate()-1);else break;else if(ft===D)at.setDate(at.getDate()-1);else break}B(Ze)}catch(ye){console.error("Error loading habit logs:",ye)}finally{T(!1)}})()},[s,n]);const He=g[D]||{habits:{}},Et=async G=>{if(!s||k)return;const ye=He.habits?.[G]||!1;ye||(Ae.current=[...Array(10)].map((Ne,Be)=>{const De=Be/10*2*Math.PI,Ze=18+Math.random()*20;return{tx:Math.cos(De)*Ze,ty:Math.sin(De)*Ze,size:3+Math.random()*4,duration:.4+Math.random()*.3}}),me(G),setTimeout(()=>me(null),700)),O(!0);try{const Ne=He.habits||{},Be={...Ne,[G]:!Ne[G]},De=He._id||`${n.id}_${D}`;await $n(Nt(rt,"habitLogs",De),{clientId:n.id,date:D,habits:Be}),y(at=>({...at,[D]:{clientId:n.id,date:D,habits:Be,_id:De}})),Object.values(Be).filter(Boolean).length===Fh.length&&!ye&&(A.current=[...Array(50)].map((at,ft)=>({x:5+Math.random()*90,delay:Math.random()*.6,color:["#4caf50","#ff9800","#2196f3","#e91e63","#ffeb3b","#9c27b0"][ft%6],drift:(Math.random()-.5)*120,spin:Math.random()*720-360,duration:1.5+Math.random()*1.5,width:4+Math.random()*8,height:4+Math.random()*10})),setTimeout(()=>{ze(!0),setTimeout(()=>ze(!1),3500)},500))}catch(Ne){console.error("Error saving habit:",Ne),S("Failed to save. Try again.","error")}finally{O(!1)}},Y=U.map(G=>{const ye=bp(G),Ne=g[ye],Be=Ne?Object.values(Ne.habits||{}).filter(Boolean).length:0;return{date:G,dateStr:ye,completed:Be,total:Fh.length}}),Se=Y.reduce((G,ye)=>G+ye.completed,0),Me=Y.reduce((G,ye)=>G+ye.total,0),lt=Me>0?Math.round(Se/Me*100):0,nt=Object.values(He.habits||{}).filter(Boolean).length,V=Math.round(nt/Fh.length*100);return i.jsxs("div",{className:"cbc-page","data-theme":o?"dark":"light","data-accent":d,children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>p("/client/core-buddy"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"}),i.jsx("div",{className:"header-actions",children:i.jsx("button",{onClick:u,"aria-label":"Toggle theme",children:o?i.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"5"}),i.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}):i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})})})]})}),a||_?i.jsx("div",{className:"cbc-loading-inline",children:i.jsx("div",{className:"cbc-loading-spinner"})}):i.jsxs("main",{className:"cbc-main",children:[i.jsxs("div",{className:"cbc-ring-section",children:[i.jsxs("div",{className:"cbc-progress-ring",children:[i.jsxs("svg",{viewBox:"0 0 200 200",children:[i.jsx("circle",{className:"cbc-arc-track",cx:"100",cy:"100",r:"80"}),i.jsx("circle",{className:"cbc-arc-fill",cx:"100",cy:"100",r:"80",strokeDasharray:2*Math.PI*80,strokeDashoffset:2*Math.PI*80-V/100*2*Math.PI*80})]}),i.jsxs("div",{className:"cbc-ring-center",children:[i.jsxs("span",{className:"cbc-ring-pct",children:[V,"%"]}),i.jsx("span",{className:"cbc-ring-label",children:"today"})]})]}),i.jsxs("div",{className:"cbc-streak",children:[i.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:i.jsx("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),i.jsx("span",{className:"cbc-streak-count",children:W}),i.jsx("span",{className:"cbc-streak-label",children:"day streak"})]})]}),i.jsxs("div",{className:"cbc-section",children:[i.jsx("h2",{className:"cbc-section-title",children:"Today's Habits"}),i.jsx("div",{className:"cbc-habits",children:Fh.map(G=>{const ye=He.habits?.[G.key]||!1,Ne=ee===G.key;return i.jsxs("button",{className:`cbc-habit-btn cbc-habit-${G.key} ${ye?"cbc-habit-done":""} ${Ne?"cbc-habit-just-checked":""}`,onClick:()=>Et(G.key),disabled:k,children:[i.jsx("div",{className:"cbc-habit-check",children:ye?i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:i.jsx("polyline",{points:"20 6 9 17 4 12",className:`cbc-check-path ${Ne?"cbc-check-animate":""}`})}):i.jsx("div",{className:"cbc-habit-circle"})}),Ne&&i.jsx("div",{className:"cbc-particles",children:Ae.current.map((Be,De)=>i.jsx("span",{className:"cbc-particle",style:{"--tx":`${Be.tx}px`,"--ty":`${Be.ty}px`,"--size":`${Be.size}px`,animationDuration:`${Be.duration}s`}},De))}),i.jsx("div",{className:`cbc-habit-icon cbc-icon-${G.key}`,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:i.jsx("path",{d:G.icon})})}),i.jsx("span",{className:"cbc-habit-label",children:G.label})]},G.key)})})]}),i.jsxs("div",{className:"cbc-section",children:[i.jsx("h2",{className:"cbc-section-title",children:"This Week"}),i.jsx("div",{className:"cbc-week-grid",children:Y.map((G,ye)=>{const Ne=G.dateStr===D,Be=G.total>0?G.completed/G.total:0,De=38,Ze=2*Math.PI*De,at=Ze-Be*Ze;return i.jsxs("div",{className:`cbc-day-ring ${Ne?"cbc-day-today":""} ${G.completed>0?"cbc-day-active":""}`,children:[i.jsxs("svg",{viewBox:"0 0 100 100",children:[i.jsx("circle",{className:"cbc-day-track",cx:"50",cy:"50",r:De}),i.jsx("circle",{className:"cbc-day-fill",cx:"50",cy:"50",r:De,strokeDasharray:Ze,strokeDashoffset:at})]}),i.jsx("span",{className:"cbc-day-label",children:I[ye]}),i.jsxs("span",{className:"cbc-day-count",children:[G.completed,"/",G.total]})]},ye)})}),i.jsxs("div",{className:"cbc-week-summary",children:[i.jsx("div",{className:"cbc-week-summary-bar",children:i.jsx("div",{className:"cbc-week-summary-fill",style:{width:`${lt}%`}})}),i.jsxs("span",{className:"cbc-week-summary-text",children:[Se," / ",Me," habits this week (",lt,"%)"]})]})]})]}),i.jsx(Sl,{active:"home"}),je&&i.jsxs("div",{className:"cbc-celebration",onClick:()=>ze(!1),children:[i.jsx("div",{className:"cbc-confetti-container",children:A.current.map((G,ye)=>i.jsx("span",{className:"cbc-confetti-piece",style:{"--x":`${G.x}%`,"--delay":`${G.delay}s`,"--color":G.color,"--drift":`${G.drift}px`,"--spin":`${G.spin}deg`,"--duration":`${G.duration}s`,width:`${G.width}px`,height:`${G.height}px`}},ye))}),i.jsxs("div",{className:"cbc-celebration-card",children:[i.jsxs("svg",{className:"cbc-celebration-icon",viewBox:"0 0 24 24",fill:"none",stroke:"var(--color-primary)",strokeWidth:"2",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),i.jsx("h2",{className:"cbc-celebration-title",children:"Crushed it!"}),i.jsx("p",{className:"cbc-celebration-sub",children:"All habits complete today"})]})]}),P&&i.jsx("div",{className:`toast-notification ${P.type}`,children:P.message})]})}const Rr=[{key:"pressUps",name:"Press-Ups",category:"Upper Body",unit:"reps"},{key:"squats",name:"Squats",category:"Lower Body",unit:"reps"},{key:"longJump",name:"Standing Long Jump",category:"Power",unit:"distance"},{key:"deadHang",name:"Dead Hang",category:"Upper Body",unit:"time"},{key:"plank",name:"Plank",category:"Core",unit:"time"},{key:"wallSit",name:"Wall Sit",category:"Lower Body",unit:"time"},{key:"chestPress",name:"Chest Press",category:"Upper Body",unit:"weight"}],il=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function pM(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Cr(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function gM(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function yM(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function Hh(s,e){if(!e)return"-";switch(s.unit){case"weight":return yM(e.weight,e.reps);case"time":return gM(e.time);case"reps":return e.reps?`${e.reps} reps`:"-";case"distance":return e.distance?`${e.distance} cm`:"-";default:return"-"}}function oo(s,e){if(!e)return 0;switch(s.unit){case"weight":return(e.weight||0)*(e.reps||0);case"time":return e.time||0;case"reps":return e.reps||0;case"distance":return e.distance||0;default:return 0}}function _p(s,e){return!e||e===0?null:(s-e)/e*100}function vM({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return i.jsx("div",{className:"pb-trend-empty",children:i.jsx("p",{children:"Not enough data for trend line yet"})});const a=s.map(B=>{const P=B.benchmarks?.[e];if(!P)return 0;switch(n){case"weight":return(P.weight||0)*(P.reps||0);case"time":return P.time||0;case"reps":return P.reps||0;case"distance":return P.distance||0;default:return 0}}),o=Math.max(...a),u=Math.min(...a),d=o-u||1,p=300,g=100,y=20,_=p-y*2,T=g-y*2,k=a.map((B,P)=>{const le=y+P/(a.length-1)*_,ee=y+T-(B-u)/d*T;return{x:le,y:ee,value:B}}),O=k.map((B,P)=>`${P===0?"M":"L"} ${B.x} ${B.y}`).join(" "),W=O+` L ${k[k.length-1].x} ${y+T} L ${k[0].x} ${y+T} Z`;return i.jsxs("div",{className:"pb-trend-chart",children:[i.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"trendGradientJr",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),i.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),i.jsx("path",{d:W,fill:"url(#trendGradientJr)"}),i.jsx("path",{d:O,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),k.map((B,P)=>i.jsx("circle",{cx:B.x,cy:B.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},P))]}),i.jsx("div",{className:"pb-trend-labels",children:s.map((B,P)=>i.jsxs("span",{className:"pb-trend-label",children:[B.month.split("-")[1],"/",B.month.split("-")[0].slice(2)]},P))})]})}function bM(){const[s,e]=w.useState("bests"),[n,a]=w.useState([]),[o,u]=w.useState(!0),[d,p]=w.useState(!1),[g,y]=w.useState(0),[_,T]=w.useState(!1),[k,O]=w.useState(!1),[W,B]=w.useState(!1),[P,le]=w.useState({}),[ee,me]=w.useState({}),[je,ze]=w.useState({}),[Ae,A]=w.useState({}),[S,C]=w.useState({}),[D,M]=w.useState(!1),[U,I]=w.useState({}),[He,Et]=w.useState([]),[Y,Se]=w.useState(null),[Me,lt]=w.useState(null),[nt,V]=w.useState(!1),[G,ye]=w.useState(""),[Ne,Be]=w.useState(""),De=w.useRef(null),Ze=w.useRef(0),at=w.useRef(0),ft=w.useRef("right"),Bt=w.useCallback(q=>{y(he=>{const be=Math.max(0,Math.min(Rr.length-1,q));return be===he?he:(ft.current=be>he?"right":"left",be)})},[]),{currentUser:fn,isClient:kt,clientData:vt,loading:se}=ia(),{isDark:an}=Pi(),Ct=qs(),gt=w.useCallback((q,he="info")=>{lt({message:q,type:he}),setTimeout(()=>lt(null),4e3)},[]);w.useEffect(()=>{!se&&(!fn||!kt)&&Ct("/")},[fn,kt,se,Ct]),w.useEffect(()=>{vt&&ht()},[vt]);const ht=async()=>{try{const q=er(Es(rt,"juniorPBs"),Hs("clientId","==",vt.id)),be=(await tr(q)).docs.map(tt=>({id:tt.id,...tt.data()}));be.sort((tt,mt)=>tt.month.localeCompare(mt.month)),a(be);const ge=er(Es(rt,"juniorPBTargets"),Hs("clientId","==",vt.id)),ue=await tr(ge);if(!ue.empty){const tt=ue.docs[0].data();ze(tt.targets||{}),A(tt.metricTargets||{}),C(tt.targets||{}),I(tt.metricTargets||{})}const Ke=er(Es(rt,"juniorAchievements"),Hs("clientId","==",vt.id)),Tt=await tr(Ke);Tt.empty||Et(Tt.docs[0].data().badges||[])}catch(q){console.error("Error fetching junior personal bests:",q)}u(!1)},pe=pM(),xe=n.find(q=>q.month===pe),et=n.filter(q=>q.month<pe),Ut=et.length>0?et[et.length-1]:null;w.useEffect(()=>{xe?(le(xe.benchmarks||{}),me(xe.bodyMetrics||{})):(le({}),me({}))},[xe?.id]);const Je=async(q,he)=>{const be=[];if(q==="strength"?Rr.forEach(ge=>{const ue=je[ge.key];if(!ue)return;const Ke=he[ge.key];if(!Ke)return;let Tt;if(ue.targetType==="time"){if(!ue.targetValue)return;const tt=ue.startValue||0,mt=Ke.time||0,dt=ue.targetValue-tt;Tt=dt===0?mt>=ue.targetValue?1:0:Math.max(0,(mt-tt)/dt)}else if(ue.targetType==="reps"){if(!ue.targetReps)return;const tt=ue.startReps||0,mt=Ke.reps||0,dt=ue.targetReps-tt;Tt=dt===0?mt>=ue.targetReps?1:0:Math.max(0,(mt-tt)/dt)}else if(ue.targetType==="distance"){if(!ue.targetDistance)return;const tt=ue.startDistance||0,mt=Ke.distance||0,dt=ue.targetDistance-tt;Tt=dt===0?mt>=ue.targetDistance?1:0:Math.max(0,(mt-tt)/dt)}else{if(!ue.targetWeight&&!ue.targetReps)return;const tt=(ue.startWeight||0)*(ue.startReps||0),mt=(ue.targetWeight||0)*(ue.targetReps||0),dt=(Ke.weight||0)*(Ke.reps||0),en=mt-tt;Tt=en===0?dt>=mt?1:0:Math.max(0,(dt-tt)/en)}if(Tt>=1){let tt,mt;ue.targetType==="time"?(tt=He.some(dt=>dt.type==="strength"&&dt.key===ge.key&&dt.targetValue===ue.targetValue),mt=`${ge.name} ${ue.targetValue}s`):ue.targetType==="reps"?(tt=He.some(dt=>dt.type==="strength"&&dt.key===ge.key&&dt.targetReps===ue.targetReps),mt=`${ge.name} ${ue.targetReps} reps`):ue.targetType==="distance"?(tt=He.some(dt=>dt.type==="strength"&&dt.key===ge.key&&dt.targetDistance===ue.targetDistance),mt=`${ge.name} ${ue.targetDistance}cm`):(tt=He.some(dt=>dt.type==="strength"&&dt.key===ge.key&&dt.targetWeight===ue.targetWeight&&dt.targetReps===ue.targetReps),mt=`${ge.name} ${ue.targetWeight}kg  ${ue.targetReps}`),tt||be.push({type:"strength",key:ge.key,...ue.targetType==="time"?{targetType:"time",targetValue:ue.targetValue}:ue.targetType==="reps"?{targetType:"reps",targetReps:ue.targetReps}:ue.targetType==="distance"?{targetType:"distance",targetDistance:ue.targetDistance}:{targetWeight:ue.targetWeight,targetReps:ue.targetReps},achievedMonth:pe,label:mt})}}):il.forEach(ge=>{const ue=Ae[ge.key];if(!ue||!ue.targetValue)return;const Ke=he[ge.key];if(Ke==null)return;const Tt=ue.startValue||0,tt=ue.targetValue,mt=tt-Tt;(mt===0?Ke===tt?1:0:Math.max(0,(Ke-Tt)/mt))>=1&&(He.some(Ps=>Ps.type==="metric"&&Ps.key===ge.key&&Ps.targetValue===tt)||be.push({type:"metric",key:ge.key,targetValue:tt,achievedMonth:pe,label:`${ge.name} ${tt}${ge.suffix}`}))}),be.length>0){const ge=[...He,...be];await $n(Nt(rt,"juniorAchievements",vt.id),{clientId:vt.id,badges:ge,updatedAt:it.now()}),Et(ge),Se(be),setTimeout(()=>Se(null),5e3)}},ot=(q,he)=>{if(q==="strength"){const be=je[he];if(!be)return!1;switch(Rr.find(ue=>ue.key===he)?.unit){case"time":return He.some(ue=>ue.type==="strength"&&ue.key===he&&ue.targetValue===be.targetValue);case"reps":return He.some(ue=>ue.type==="strength"&&ue.key===he&&ue.targetReps===be.targetReps);case"distance":return He.some(ue=>ue.type==="strength"&&ue.key===he&&ue.targetDistance===be.targetDistance);default:return!be.targetWeight&&!be.targetReps?!1:He.some(ue=>ue.type==="strength"&&ue.key===he&&ue.targetWeight===be.targetWeight&&ue.targetReps===be.targetReps)}}else{const be=Ae[he];return!be||!be.targetValue?!1:He.some(ge=>ge.type==="metric"&&ge.key===he&&ge.targetValue===be.targetValue)}},Zt=async()=>{p(!0);try{const q=`${vt.id}_${pe}`,he=xe||{};await $n(Nt(rt,"juniorPBs",q),{clientId:vt.id,month:pe,benchmarks:P,bodyMetrics:he.bodyMetrics||ee||{},createdAt:he.createdAt||it.now(),updatedAt:it.now()}),await Je("strength",P),gt("Benchmarks saved!","success"),T(!1),await ht()}catch(q){console.error("Error saving benchmarks:",q),gt("Failed to save. Please try again.","error")}p(!1)},xt=async()=>{p(!0);try{const q=`${vt.id}_${pe}`,he=xe||{};await $n(Nt(rt,"juniorPBs",q),{clientId:vt.id,month:pe,benchmarks:he.benchmarks||P||{},bodyMetrics:ee,createdAt:he.createdAt||it.now(),updatedAt:it.now()}),await Je("metric",ee),gt("Body metrics saved!","success"),O(!1),await ht()}catch(q){console.error("Error saving metrics:",q),gt("Failed to save. Please try again.","error")}p(!1)},Xt=(q,he,be)=>{le(ge=>({...ge,[q]:{...ge[q],[he]:be===""?"":parseFloat(be)}}))},ce=(q,he)=>{me(be=>({...be,[q]:he===""?"":parseFloat(he)}))},de=(q,he,be)=>{C(ge=>({...ge,[q]:{...ge[q],[he]:be===""?"":parseFloat(be)}}))},Ee=async()=>{p(!0);try{const q=`targets_${vt.id}`,he=xe?.benchmarks||{},be={};Rr.forEach(ge=>{const ue=he[ge.key];switch(ge.unit){case"time":S[ge.key]?.targetValue&&(be[ge.key]={targetType:"time",targetValue:S[ge.key].targetValue,startValue:ue?.time||0});break;case"reps":S[ge.key]?.targetReps&&(be[ge.key]={targetType:"reps",targetReps:S[ge.key].targetReps,startReps:ue?.reps||0});break;case"distance":S[ge.key]?.targetDistance&&(be[ge.key]={targetType:"distance",targetDistance:S[ge.key].targetDistance,startDistance:ue?.distance||0});break;default:(S[ge.key]?.targetWeight||S[ge.key]?.targetReps)&&(be[ge.key]={targetWeight:S[ge.key].targetWeight||0,targetReps:S[ge.key].targetReps||0,startWeight:ue?.weight||0,startReps:ue?.reps||0})}}),await $n(Nt(rt,"juniorPBTargets",q),{clientId:vt.id,targets:be,metricTargets:Ae,updatedAt:it.now()}),ze(be),C(be),gt("Targets saved!","success"),B(!1)}catch(q){console.error("Error saving targets:",q),gt("Failed to save targets.","error")}p(!1)},$e=(q,he)=>{I(be=>({...be,[q]:{...be[q],targetValue:he===""?"":parseFloat(he)}}))},Fe=async()=>{p(!0);try{const q=`targets_${vt.id}`,he={};il.forEach(be=>{if(U[be.key]?.targetValue){const ge=xe?.bodyMetrics?.[be.key]||0;he[be.key]={targetValue:U[be.key].targetValue,startValue:ge}}}),await $n(Nt(rt,"juniorPBTargets",q),{clientId:vt.id,targets:je,metricTargets:he,updatedAt:it.now()}),A(he),I(he),gt("Metric targets saved!","success"),M(!1)}catch(q){console.error("Error saving metric targets:",q),gt("Failed to save targets.","error")}p(!1)},Pe=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const q=Nt(rt,"juniorPBTargets",`targets_${vt.id}`);await ny(q),ze({}),A({}),C({}),I({}),gt("All goals have been reset","success")}catch(q){console.error("Error resetting targets:",q),gt("Failed to reset goals","error")}p(!1)}},We=(q,he)=>{const be=je[q];if(!be||!he)return null;if(be.targetType==="time"){if(!be.targetValue)return null;const tt=be.startValue||0,mt=be.targetValue,dt=he.time||0,en=mt-tt;return en<=0?dt>=mt?1:0:Math.max(0,Math.min((dt-tt)/en,1))}if(be.targetType==="reps"){if(!be.targetReps)return null;const tt=be.startReps||0,mt=be.targetReps,dt=he.reps||0,en=mt-tt;return en<=0?dt>=mt?1:0:Math.max(0,Math.min((dt-tt)/en,1))}if(be.targetType==="distance"){if(!be.targetDistance)return null;const tt=be.startDistance||0,mt=be.targetDistance,dt=he.distance||0,en=mt-tt;return en<=0?dt>=mt?1:0:Math.max(0,Math.min((dt-tt)/en,1))}if(!be.targetWeight&&!be.targetReps)return null;const ge=(be.startWeight||0)*(be.startReps||0),ue=(be.targetWeight||0)*(be.targetReps||0),Ke=(he.weight||0)*(he.reps||0),Tt=ue-ge;return Tt<=0?Ke>=ue?1:0:Math.max(0,Math.min((Ke-ge)/Tt,1))},Ue=q=>{const he=Ae[q];if(!he||!he.targetValue)return null;const be=xe?.bodyMetrics?.[q];if(be==null)return null;const ge=he.startValue||0,ue=he.targetValue,Ke=ue-ge;return Ke===0?be===ue?1:0:Math.max(0,Math.min((be-ge)/Ke,1))},Ve=q=>{Ze.current=q.touches[0].clientX,at.current=0},jt=q=>{at.current=q.touches[0].clientX-Ze.current},At=()=>{at.current<-50?Bt(g+1):at.current>50&&Bt(g-1),at.current=0},Mt=q=>{const he=xe?.bodyMetrics?.[q],be=Ut?.bodyMetrics?.[q];return he==null||be==null?null:parseFloat((he-be).toFixed(2))},zt=n.find(q=>q.month===G),bn=n.find(q=>q.month===Ne);if(se||o)return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsxs("main",{className:"pb-main",children:[i.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),i.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!fn||!kt||!vt)return null;const St=Rr[g],un=xe?.benchmarks?.[St.key],An=Ut?.benchmarks?.[St.key],mn=oo(St,un),On=oo(St,An),Sn=_p(mn,On),In=We(St.key,un),os=In!==null,Ss=In!==null&&In>=1,vs=os?Math.round(In*60):mn>0?15:0,Ds=je[St.key],Ms=q=>q?q.targetType==="time"?`${q.startValue||0}s  ${q.targetValue}s`:q.targetType==="reps"?`${q.startReps||0}  ${q.targetReps} reps`:q.targetType==="distance"?`${q.startDistance||0}  ${q.targetDistance}cm`:`${q.startWeight||0}kg${q.startReps||0}  ${q.targetWeight}kg${q.targetReps}`:null;return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>Ct("/client"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsxs("main",{className:"pb-main page-transition-enter",children:[i.jsxs("div",{className:"pb-intro",children:[i.jsx("h2",{children:"Junior Strength Tests"}),i.jsx("p",{children:"Track your strength test results and body measurements each month."})]}),i.jsxs("div",{className:"pb-tabs",children:[i.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),i.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),i.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&i.jsxs("div",{className:"pb-strength-section",children:[!_&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-carousel",ref:De,onTouchStart:Ve,onTouchMove:jt,onTouchEnd:At,children:[i.jsx("div",{className:`pb-ring-container slide-from-${ft.current}`,children:i.jsxs("div",{className:"pb-ring",children:[i.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:ly.map((q,he)=>{const be=he<Math.round(vs);return i.jsx("line",{x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,className:`pb-ring-tick ${be?Ss?"hit":"filled":"empty"}`,strokeWidth:q.thick?"3":"2"},he)})}),i.jsxs("div",{className:"pb-ring-center",children:[i.jsx("div",{className:"pb-ring-category",children:St.category}),i.jsxs("div",{className:"pb-ring-exercise",children:[St.name,ot("strength",St.key)&&i.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),i.jsx("div",{className:"pb-ring-value",children:un?Hh(St,un):"-"}),Sn!==null&&i.jsxs("div",{className:`pb-ring-change ${Sn>=0?"positive":"negative"}`,children:[Sn>=0?"+":"",Sn.toFixed(1),"%"]}),Sn===null&&un&&i.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),Ds&&i.jsx("div",{className:`pb-ring-target ${Ss?"hit":""}`,children:Ss?"Target hit!":Ms(Ds)}),!Ds&&i.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),i.jsx("div",{className:"pb-carousel-dots",children:Rr.map((q,he)=>i.jsx("button",{className:`pb-dot ${he===g?"active":""}`,onClick:()=>Bt(he)},he))}),i.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>Bt(g-1),disabled:g===0,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),i.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>Bt(g+1),disabled:g===Rr.length-1,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),i.jsxs("div",{className:"pb-trend-section",children:[i.jsx("h4",{children:"Trend"}),i.jsx(vM,{data:n,exerciseKey:St.key,unit:St.unit})]})]}),!_&&!W&&i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:xe?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>B(!0),children:Object.keys(je).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Pe,disabled:d,children:"Reset All Goals"})]}),_&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Benchmarks - ",Cr(pe)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),le(xe?.benchmarks||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:Rr.map(q=>i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),q.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:P[q.key]?.weight??"",onChange:he=>Xt(q.key,"weight",he.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",value:P[q.key]?.reps??"",onChange:he=>Xt(q.key,"reps",he.target.value),placeholder:"0"})]})]}):q.unit==="reps"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Reps (max in 1 min)"}),i.jsx("input",{type:"number",value:P[q.key]?.reps??"",onChange:he=>Xt(q.key,"reps",he.target.value),placeholder:"0"})]})}):q.unit==="distance"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Distance (cm)"}),i.jsx("input",{type:"number",step:"0.5",value:P[q.key]?.distance??"",onChange:he=>Xt(q.key,"distance",he.target.value),placeholder:"0"})]})}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Time (seconds)"}),i.jsx("input",{type:"number",step:"0.01",value:P[q.key]?.time??"",onChange:he=>Xt(q.key,"time",he.target.value),placeholder:"0"})]})})]},q.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),le(xe?.benchmarks||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Zt,disabled:d,children:d?"Saving...":"Save"})]})]}),W&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Set Your Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),C(je)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Rr.map(q=>{const he=xe?.benchmarks?.[q.key];let be="-";if(he)switch(q.unit){case"weight":(he.weight||he.reps)&&(be=`${he.weight||0}kg  ${he.reps||0}`);break;case"time":he.time&&(be=`${he.time}s`);break;case"reps":he.reps&&(be=`${he.reps} reps`);break;case"distance":he.distance&&(be=`${he.distance} cm`);break}return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",be]})]}),q.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:S[q.key]?.targetWeight??"",onChange:ge=>de(q.key,"targetWeight",ge.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Reps"}),i.jsx("input",{type:"number",value:S[q.key]?.targetReps??"",onChange:ge=>de(q.key,"targetReps",ge.target.value),placeholder:"0"})]})]}):q.unit==="reps"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target Reps (in 1 min)"}),i.jsx("input",{type:"number",value:S[q.key]?.targetReps??"",onChange:ge=>de(q.key,"targetReps",ge.target.value),placeholder:"0"})]})}):q.unit==="distance"?i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target Distance (cm)"}),i.jsx("input",{type:"number",step:"0.5",value:S[q.key]?.targetDistance??"",onChange:ge=>de(q.key,"targetDistance",ge.target.value),placeholder:"0"})]})}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target (seconds)"}),i.jsx("input",{type:"number",step:"1",value:S[q.key]?.targetValue??"",onChange:ge=>de(q.key,"targetValue",ge.target.value),placeholder:"0"})]})})]},q.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),C(je)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Ee,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&i.jsxs("div",{className:"pb-metrics-section",children:[!k&&!D&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-metrics-card",children:[i.jsx("h3",{children:"Body Measurements"}),i.jsx("p",{className:"pb-metrics-month",children:Cr(pe)}),i.jsx("div",{className:"pb-metrics-list",children:il.map(q=>{const he=xe?.bodyMetrics?.[q.key],be=Mt(q.key),ge=Ae[q.key],ue=Ue(q.key),Ke=ue!==null&&ue>=1;return i.jsxs("div",{className:"pb-metric-row",children:[i.jsxs("div",{className:"pb-metric-top",children:[i.jsxs("div",{className:"pb-metric-left",children:[i.jsxs("span",{className:"pb-metric-name",children:[q.name,ot("metric",q.key)&&i.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),ge&&i.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",ge.targetValue," ",q.suffix]})]}),i.jsxs("div",{className:"pb-metric-values",children:[i.jsx("span",{className:"pb-metric-current",children:he!=null?`${he} ${q.suffix}`:"-"}),be!==null&&i.jsxs("span",{className:`pb-metric-change ${be>0?"up":be<0?"down":"same"}`,children:[be>0?"+":"",be," ",q.suffix]})]})]}),ue!==null&&i.jsxs("div",{className:"pb-metric-progress",children:[i.jsx("div",{className:"pb-metric-bar",children:i.jsx("div",{className:`pb-metric-bar-fill ${Ke?"hit":""}`,style:{width:`${Math.round(ue*100)}%`}})}),i.jsx("span",{className:`pb-metric-percent ${Ke?"hit":""}`,children:Ke?"Hit!":`${Math.round(ue*100)}%`})]})]},q.key)})})]}),i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>O(!0),children:xe?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>M(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:Pe,disabled:d,children:"Reset All Goals"})]})]}),k&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Measurements - ",Cr(pe)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{O(!1),me(xe?.bodyMetrics||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:il.map(q=>i.jsx("div",{className:"pb-edit-metric",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:[q.name," (",q.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:ee[q.key]??"",onChange:he=>ce(q.key,he.target.value),placeholder:"0"})]})},q.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{O(!1),me(xe?.bodyMetrics||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:xt,disabled:d,children:d?"Saving...":"Save"})]})]}),D&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Body Metric Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{M(!1),I(Ae)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),il.map(q=>{const he=xe?.bodyMetrics?.[q.key];return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:q.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",he!=null?`${he} ${q.suffix}`:"-"]})]}),i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:["Target (",q.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:U[q.key]?.targetValue??"",onChange:be=>$e(q.key,be.target.value),placeholder:"0"})]})})]},q.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{M(!1),I(Ae)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Fe,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&i.jsx("div",{className:"pb-history-section",children:n.length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("h4",{children:"No records yet"}),i.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):i.jsxs(i.Fragment,{children:[He.length>0&&i.jsxs("div",{className:"pb-achievements-wall",children:[i.jsxs("h4",{className:"pb-achievements-wall-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),i.jsx("div",{className:"pb-achievements-list",children:[...He].reverse().map((q,he)=>i.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${he*.05}s`},children:[i.jsx("div",{className:"pb-achievement-star",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("div",{className:"pb-achievement-info",children:[i.jsx("span",{className:"pb-achievement-label",children:q.label}),i.jsx("span",{className:"pb-achievement-date",children:Cr(q.achievedMonth)})]})]},he))})]}),i.jsx("div",{className:"pb-history-controls",children:i.jsx("button",{className:`pb-compare-toggle ${nt?"active":""}`,onClick:()=>{V(!nt),!nt&&n.length>=2&&(ye(n[0].month),Be(n[n.length-1].month))},children:nt?"Back to Timeline":"Compare Months"})}),nt?i.jsxs("div",{className:"pb-compare",children:[i.jsxs("div",{className:"pb-compare-selectors",children:[i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"From"}),i.jsx("select",{value:G,onChange:q=>ye(q.target.value),children:n.map(q=>i.jsx("option",{value:q.month,children:Cr(q.month)},q.month))})]}),i.jsx("div",{className:"pb-compare-vs",children:"vs"}),i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"To"}),i.jsx("select",{value:Ne,onChange:q=>Be(q.target.value),children:n.map(q=>i.jsx("option",{value:q.month,children:Cr(q.month)},q.month))})]})]}),zt&&bn&&i.jsxs("div",{className:"pb-compare-results",children:[i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Strength Tests"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Exercise"}),i.jsx("span",{children:Cr(G).split(" ")[0]}),i.jsx("span",{children:Cr(Ne).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),Rr.map(q=>{const he=zt.benchmarks?.[q.key],be=bn.benchmarks?.[q.key],ge=oo(q,he),ue=oo(q,be),Ke=_p(ue,ge);return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:q.name}),i.jsx("span",{className:"pb-compare-val",children:he?Hh(q,he):"-"}),i.jsx("span",{className:"pb-compare-val",children:be?Hh(q,be):"-"}),i.jsx("span",{className:`pb-compare-change ${Ke!==null?Ke>=0?"positive":"negative":""}`,children:Ke!==null?`${Ke>=0?"+":""}${Ke.toFixed(1)}%`:"-"})]},q.key)})]})]}),i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Body Measurements"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Measurement"}),i.jsx("span",{children:Cr(G).split(" ")[0]}),i.jsx("span",{children:Cr(Ne).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),il.map(q=>{const he=zt.bodyMetrics?.[q.key],be=bn.bodyMetrics?.[q.key],ge=he!=null&&be!=null?parseFloat((be-he).toFixed(2)):null;return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:q.name}),i.jsx("span",{className:"pb-compare-val",children:he!=null?`${he}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:be!=null?`${be}`:"-"}),i.jsx("span",{className:`pb-compare-change ${ge!==null?ge>0?"positive":ge<0?"negative":"neutral":""}`,children:ge!==null?`${ge>0?"+":""}${ge} ${q.suffix}`:"-"})]},q.key)})]})]})]})]}):i.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((q,he)=>{const be=n.filter(ge=>ge.month<q.month).pop();return i.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${he*.05}s`},children:[i.jsx("div",{className:"pb-timeline-dot"}),i.jsxs("div",{className:"pb-timeline-card",children:[i.jsx("h4",{children:Cr(q.month)}),q.benchmarks&&Object.keys(q.benchmarks).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Strength Tests"}),Rr.map(ge=>{const ue=q.benchmarks[ge.key];if(!ue)return null;const Ke=be?.benchmarks?.[ge.key],Tt=oo(ge,ue),tt=oo(ge,Ke),mt=_p(Tt,tt);return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:ge.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsx("span",{className:"pb-timeline-value",children:Hh(ge,ue)}),mt!==null&&i.jsxs("span",{className:`pb-timeline-change ${mt>=0?"positive":"negative"}`,children:[mt>=0?"+":"",mt.toFixed(1),"%"]})]})]},ge.key)})]}),q.bodyMetrics&&Object.keys(q.bodyMetrics).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Body Measurements"}),il.map(ge=>{const ue=q.bodyMetrics[ge.key];if(ue==null)return null;const Ke=be?.bodyMetrics?.[ge.key],Tt=Ke!=null?parseFloat((ue-Ke).toFixed(2)):null;return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:ge.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsxs("span",{className:"pb-timeline-value",children:[ue," ",ge.suffix]}),Tt!==null&&i.jsxs("span",{className:`pb-timeline-change ${Tt>0?"positive":Tt<0?"negative":"neutral"}`,children:[Tt>0?"+":"",Tt," ",ge.suffix]})]})]},ge.key)})]})]})]},q.id)})})]})})]}),Y&&i.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Se(null),children:i.jsxs("div",{className:"pb-celebration-card",children:[i.jsx("div",{className:"pb-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),i.jsx("div",{className:"pb-celebration-badges",children:Y.map((q,he)=>i.jsx("div",{className:"pb-celebration-badge",children:q.label},he))}),i.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Me&&i.jsxs("div",{className:`toast-notification ${Me.type}`,children:[i.jsx("span",{className:"toast-icon",children:Me.type==="success"?i.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),i.jsx("span",{className:"toast-message",children:Me.message}),i.jsx("button",{className:"toast-close",onClick:()=>lt(null),children:""})]}),i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/forms"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),i.jsx("polyline",{points:"14 2 14 8 20 8"}),i.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),i.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),i.jsx("span",{children:"Forms"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/tools"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),i.jsx("span",{children:"Tools"})]}),i.jsxs("button",{className:"block-nav-tab active",children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"PBs"})]}),vt?.circuitAccess&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>Ct("/client/circuit"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 6v6l4 2"})]}),i.jsx("span",{children:"Circuit"})]})]})]})}const Yr=[{key:"chestPress",name:"Chest Press",category:"Upper Body - Push",unit:"weight"},{key:"shoulderPress",name:"Shoulder Press",category:"Upper Body - Push",unit:"weight"},{key:"seatedRow",name:"Seated Row",category:"Upper Body - Pull",unit:"weight"},{key:"latPulldown",name:"Lat Pulldown",category:"Upper Body - Pull",unit:"weight"},{key:"squat",name:"Squat",category:"Lower Body",unit:"weight"},{key:"deadlift",name:"Deadlift",category:"Lower Body",unit:"weight"},{key:"plank",name:"Plank",category:"Core",unit:"time"}],ll=[{key:"weight",name:"Weight",suffix:"kg"},{key:"chest",name:"Chest",suffix:"cm"},{key:"waist",name:"Waist",suffix:"cm"},{key:"hips",name:"Hips",suffix:"cm"},{key:"leftArm",name:"Left Arm",suffix:"cm"},{key:"rightArm",name:"Right Arm",suffix:"cm"},{key:"leftThigh",name:"Left Thigh",suffix:"cm"},{key:"rightThigh",name:"Right Thigh",suffix:"cm"}];function _M(){const s=new Date;return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}`}function Ar(s){const[e,n]=s.split("-");return new Date(parseInt(e),parseInt(n)-1).toLocaleDateString("en-GB",{month:"long",year:"numeric"})}function qh(s){if(!s&&s!==0)return"-";const e=Math.floor(s/60),n=(s%60).toFixed(2);return e>0?`${e}m ${parseFloat(n).toFixed(0)}s`:`${parseFloat(n).toFixed(2)}s`}function I_(s,e){return!s&&s!==0?"-":!e&&e!==0?`${s}kg`:`${s}kg x ${e}`}function co(s,e){return e?s.unit==="time"?e.time||0:(e.weight||0)*(e.reps||0):0}function xp(s,e){return!e||e===0?null:(s-e)/e*100}function xM({data:s,exerciseKey:e,unit:n}){if(!s||s.length<2)return i.jsx("div",{className:"pb-trend-empty",children:i.jsx("p",{children:"Not enough data for trend line yet"})});const a=s.map(B=>{const P=B.benchmarks?.[e];return P?n==="time"?P.time||0:(P.weight||0)*(P.reps||0):0}),o=Math.max(...a),u=Math.min(...a),d=o-u||1,p=300,g=100,y=20,_=p-y*2,T=g-y*2,k=a.map((B,P)=>{const le=y+P/(a.length-1)*_,ee=y+T-(B-u)/d*T;return{x:le,y:ee,value:B}}),O=k.map((B,P)=>`${P===0?"M":"L"} ${B.x} ${B.y}`).join(" "),W=O+` L ${k[k.length-1].x} ${y+T} L ${k[0].x} ${y+T} Z`;return i.jsxs("div",{className:"pb-trend-chart",children:[i.jsxs("svg",{viewBox:`0 0 ${p} ${g}`,preserveAspectRatio:"xMidYMid meet",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"trendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--color-primary)",stopOpacity:"0.3"}),i.jsx("stop",{offset:"100%",stopColor:"var(--color-primary)",stopOpacity:"0.02"})]})}),i.jsx("path",{d:W,fill:"url(#trendGradient)"}),i.jsx("path",{d:O,fill:"none",stroke:"var(--color-primary)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),k.map((B,P)=>i.jsx("circle",{cx:B.x,cy:B.y,r:"4",fill:"var(--bg-card)",stroke:"var(--color-primary)",strokeWidth:"2"},P))]}),i.jsx("div",{className:"pb-trend-labels",children:s.map((B,P)=>i.jsxs("span",{className:"pb-trend-label",children:[B.month.split("-")[1],"/",B.month.split("-")[0].slice(2)]},P))})]})}function wM(){const[s,e]=w.useState("bests"),[n,a]=w.useState([]),[o,u]=w.useState(!0),[d,p]=w.useState(!1),[g,y]=w.useState(0),[_,T]=w.useState(!1),[k,O]=w.useState(!1),[W,B]=w.useState(!1),[P,le]=w.useState({}),[ee,me]=w.useState({}),[je,ze]=w.useState({}),[Ae,A]=w.useState({}),[S,C]=w.useState({}),[D,M]=w.useState(!1),[U,I]=w.useState({}),[He,Et]=w.useState([]),[Y,Se]=w.useState(null),[Me,lt]=w.useState(null),[nt,V]=w.useState(!1),[G,ye]=w.useState(""),[Ne,Be]=w.useState(""),[De,Ze]=w.useState({}),[at,ft]=w.useState({}),[Bt,fn]=w.useState(null),[kt,vt]=w.useState(null),[se,an]=w.useState(""),Ct=w.useRef(null),gt=w.useRef(0),ht=w.useRef(0),pe=w.useRef("right"),xe=w.useCallback(z=>{y(ae=>{const E=Math.max(0,Math.min(Yr.length-1,z));return E===ae?ae:(pe.current=E>ae?"right":"left",E)})},[]),{currentUser:et,isClient:Ut,clientData:Je,loading:ot}=ia(),{isDark:Zt}=Pi(),xt=qs(),[Xt]=rS(),ce=Xt.get("mode")==="corebuddy",de=!ce&&(!Je?.clientType||Je.clientType==="block"),Ee=w.useCallback((z,ae="info")=>{lt({message:z,type:ae}),setTimeout(()=>lt(null),4e3)},[]);w.useEffect(()=>{!ot&&(!et||!Ut)&&xt("/")},[et,Ut,ot,xt]),w.useEffect(()=>{Je&&(de?$e():(async()=>{try{const[ae,E,R]=await Promise.all([Wn(Nt(rt,"coreBuddyPBs",Je.id)),Wn(Nt(rt,"coreBuddyTargets",Je.id)),Wn(Nt(rt,"coreBuddyAchievements",Je.id))]);ae.exists()&&Ze(ae.data().exercises||{}),E.exists()&&ft(E.data().targets||{}),R.exists()&&fn(R.data())}catch(ae){console.error("Error loading Core Buddy PBs:",ae)}u(!1)})())},[Je]);const $e=async()=>{try{const z=er(Es(rt,"personalBests"),Hs("clientId","==",Je.id)),E=(await tr(z)).docs.map(Ie=>({id:Ie.id,...Ie.data()}));E.sort((Ie,Ce)=>Ie.month.localeCompare(Ce.month)),a(E);const R=er(Es(rt,"personalBestTargets"),Hs("clientId","==",Je.id)),$=await tr(R);if(!$.empty){const Ie=$.docs[0].data();ze(Ie.targets||{}),A(Ie.metricTargets||{}),C(Ie.targets||{}),I(Ie.metricTargets||{})}const X=er(Es(rt,"achievements"),Hs("clientId","==",Je.id)),Le=await tr(X);Le.empty||Et(Le.docs[0].data().badges||[])}catch(z){console.error("Error fetching personal bests:",z)}u(!1)},Fe=async()=>{if(!kt||!se||!Je)return;const z=parseFloat(se),ae=De[kt];if(!ae||z<=ae.weight){Ee("Target must be higher than current PB","error");return}p(!0);try{const E={...at,[kt]:{targetWeight:z,setAt:it.now(),currentPBWhenSet:ae.weight}};await $n(Nt(rt,"coreBuddyTargets",Je.id),{clientId:Je.id,targets:E,updatedAt:it.now()}),ft(E),vt(null),an(""),Ee("Target set!","success")}catch(E){console.error("Error saving target:",E),Ee("Failed to save target","error")}p(!1)},Pe=z=>{if(!Bt?.badges)return!1;const ae=at[z];return ae?Bt.badges.some(E=>E.type==="pb_target"&&E.exercise===z&&E.targetWeight===ae.targetWeight):!1},We=z=>{const ae=at[z];if(!ae)return null;const E=De[z];if(!E)return 0;const R=ae.currentPBWhenSet||0,$=ae.targetWeight,X=$-R;return X<=0?E.weight>=$?1:0:Math.max(0,Math.min((E.weight-R)/X,1))},Ue=_M(),Ve=n.find(z=>z.month===Ue),jt=n.filter(z=>z.month<Ue),At=jt.length>0?jt[jt.length-1]:null;w.useEffect(()=>{Ve?(le(Ve.benchmarks||{}),me(Ve.bodyMetrics||{})):(le({}),me({}))},[Ve?.id]);const Mt=async(z,ae)=>{const E=[];if(z==="strength"?Yr.forEach(R=>{const $=je[R.key];if(!$)return;const X=ae[R.key];if(!X)return;let Le;if($.targetType==="time"){if(!$.targetValue)return;const Ie=$.startValue||0,Ce=X.time||0,Pt=$.targetValue-Ie;Le=Pt===0?Ce>=$.targetValue?1:0:Math.max(0,(Ce-Ie)/Pt)}else{if(!$.targetWeight&&!$.targetReps)return;const Ie=($.startWeight||0)*($.startReps||0),Ce=($.targetWeight||0)*($.targetReps||0),Pt=(X.weight||0)*(X.reps||0),pt=Ce-Ie;Le=pt===0?Pt>=Ce?1:0:Math.max(0,(Pt-Ie)/pt)}if(Le>=1&&!($.targetType==="time"?He.some(Ce=>Ce.type==="strength"&&Ce.key===R.key&&Ce.targetValue===$.targetValue):He.some(Ce=>Ce.type==="strength"&&Ce.key===R.key&&Ce.targetWeight===$.targetWeight&&Ce.targetReps===$.targetReps))){const Ce=$.targetType==="time"?`${R.name} ${$.targetValue}s`:`${R.name} ${$.targetWeight}kg  ${$.targetReps}`;E.push({type:"strength",key:R.key,...$.targetType==="time"?{targetType:"time",targetValue:$.targetValue}:{targetWeight:$.targetWeight,targetReps:$.targetReps},achievedMonth:Ue,label:Ce})}}):ll.forEach(R=>{const $=Ae[R.key];if(!$||!$.targetValue)return;const X=ae[R.key];if(X==null)return;const Le=$.startValue||0,Ie=$.targetValue,Ce=Ie-Le;(Ce===0?X===Ie?1:0:Math.max(0,(X-Le)/Ce))>=1&&(He.some(H=>H.type==="metric"&&H.key===R.key&&H.targetValue===Ie)||E.push({type:"metric",key:R.key,targetValue:Ie,achievedMonth:Ue,label:`${R.name} ${Ie}${R.suffix}`}))}),E.length>0){const R=[...He,...E];await $n(Nt(rt,"achievements",Je.id),{clientId:Je.id,badges:R,updatedAt:it.now()}),Et(R),Se(E),setTimeout(()=>Se(null),5e3)}},zt=(z,ae)=>{if(z==="strength"){const E=je[ae];return E?E.targetType==="time"?He.some(R=>R.type==="strength"&&R.key===ae&&R.targetValue===E.targetValue):!E.targetWeight&&!E.targetReps?!1:He.some(R=>R.type==="strength"&&R.key===ae&&R.targetWeight===E.targetWeight&&R.targetReps===E.targetReps):!1}else{const E=Ae[ae];return!E||!E.targetValue?!1:He.some(R=>R.type==="metric"&&R.key===ae&&R.targetValue===E.targetValue)}},bn=async()=>{p(!0);try{const z=`${Je.id}_${Ue}`,ae=Ve||{};await $n(Nt(rt,"personalBests",z),{clientId:Je.id,month:Ue,benchmarks:P,bodyMetrics:ae.bodyMetrics||ee||{},createdAt:ae.createdAt||it.now(),updatedAt:it.now()}),await Mt("strength",P),Ee("Benchmarks saved!","success"),T(!1),await $e()}catch(z){console.error("Error saving benchmarks:",z),Ee("Failed to save. Please try again.","error")}p(!1)},St=async()=>{p(!0);try{const z=`${Je.id}_${Ue}`,ae=Ve||{};await $n(Nt(rt,"personalBests",z),{clientId:Je.id,month:Ue,benchmarks:ae.benchmarks||P||{},bodyMetrics:ee,createdAt:ae.createdAt||it.now(),updatedAt:it.now()}),await Mt("metric",ee),Ee("Body metrics saved!","success"),O(!1),await $e()}catch(z){console.error("Error saving metrics:",z),Ee("Failed to save. Please try again.","error")}p(!1)},un=(z,ae,E)=>{le(R=>({...R,[z]:{...R[z],[ae]:E===""?"":parseFloat(E)}}))},An=(z,ae)=>{me(E=>({...E,[z]:ae===""?"":parseFloat(ae)}))},mn=(z,ae,E)=>{C(R=>({...R,[z]:{...R[z],[ae]:E===""?"":parseFloat(E)}}))},On=async()=>{p(!0);try{const z=`targets_${Je.id}`,ae=Ve?.benchmarks||{},E={};Yr.forEach(R=>{const $=ae[R.key];R.unit==="time"?S[R.key]?.targetValue&&(E[R.key]={targetType:"time",targetValue:S[R.key].targetValue,startValue:$?.time||0}):(S[R.key]?.targetWeight||S[R.key]?.targetReps)&&(E[R.key]={targetWeight:S[R.key].targetWeight||0,targetReps:S[R.key].targetReps||0,startWeight:$?.weight||0,startReps:$?.reps||0})}),await $n(Nt(rt,"personalBestTargets",z),{clientId:Je.id,targets:E,metricTargets:Ae,updatedAt:it.now()}),ze(E),C(E),Ee("Targets saved!","success"),B(!1)}catch(z){console.error("Error saving targets:",z),Ee("Failed to save targets.","error")}p(!1)},Sn=(z,ae)=>{I(E=>({...E,[z]:{...E[z],targetValue:ae===""?"":parseFloat(ae)}}))},In=async()=>{p(!0);try{const z=`targets_${Je.id}`,ae={};ll.forEach(E=>{if(U[E.key]?.targetValue){const R=Ve?.bodyMetrics?.[E.key]||0;ae[E.key]={targetValue:U[E.key].targetValue,startValue:R}}}),await $n(Nt(rt,"personalBestTargets",z),{clientId:Je.id,targets:je,metricTargets:ae,updatedAt:it.now()}),A(ae),I(ae),Ee("Metric targets saved!","success"),M(!1)}catch(z){console.error("Error saving metric targets:",z),Ee("Failed to save targets.","error")}p(!1)},os=async()=>{if(window.confirm("Reset all goals? This will clear all strength and body metric targets. Your recorded benchmarks and measurements will NOT be affected.")){p(!0);try{const z=Nt(rt,"personalBestTargets",`targets_${Je.id}`);await ny(z),ze({}),A({}),C({}),I({}),Ee("All goals have been reset","success")}catch(z){console.error("Error resetting targets:",z),Ee("Failed to reset goals","error")}p(!1)}},Ss=(z,ae)=>{const E=je[z];if(!E||!ae)return null;if(E.targetType==="time"){if(!E.targetValue)return null;const Ie=E.startValue||0,Ce=E.targetValue,Pt=ae.time||0,pt=Ce-Ie;return pt<=0?Pt>=Ce?1:0:Math.max(0,Math.min((Pt-Ie)/pt,1))}if(!E.targetWeight&&!E.targetReps)return null;const R=(E.startWeight||0)*(E.startReps||0),$=(E.targetWeight||0)*(E.targetReps||0),X=(ae.weight||0)*(ae.reps||0),Le=$-R;return Le<=0?X>=$?1:0:Math.max(0,Math.min((X-R)/Le,1))},vs=z=>{const ae=Ae[z];if(!ae||!ae.targetValue)return null;const E=Ve?.bodyMetrics?.[z];if(E==null)return null;const R=ae.startValue||0,$=ae.targetValue,X=$-R;return X===0?E===$?1:0:Math.max(0,Math.min((E-R)/X,1))},Ds=z=>{gt.current=z.touches[0].clientX,ht.current=0},Ms=z=>{ht.current=z.touches[0].clientX-gt.current},q=()=>{ht.current<-50?xe(g+1):ht.current>50&&xe(g-1),ht.current=0},he=z=>{const ae=Ve?.bodyMetrics?.[z],E=At?.bodyMetrics?.[z];return ae==null||E==null?null:parseFloat((ae-E).toFixed(2))},be=n.find(z=>z.month===G),ge=n.find(z=>z.month===Ne);if(ot||o)return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsx("div",{className:"header-content",children:i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})})}),i.jsxs("main",{className:"pb-main",children:[i.jsx("div",{className:"skeleton skeleton-title",style:{width:180,height:28,marginBottom:20}}),i.jsx("div",{className:"skeleton skeleton-card-large",style:{height:320,borderRadius:16}})]})]});if(!et||!Ut||!Je)return null;if(de&&Je?.isJunior)return i.jsx(bM,{});const ue=Yr[g],Ke=Ve?.benchmarks?.[ue.key],Tt=At?.benchmarks?.[ue.key],tt=co(ue,Ke),mt=co(ue,Tt),dt=xp(tt,mt),en=Ss(ue.key,Ke),Ps=en!==null,ss=en!==null&&en>=1,Ns=Ps?Math.round(en*60):tt>0?15:0,wn=je[ue.key];return i.jsxs("div",{className:"pb-page",children:[i.jsx("header",{className:"client-header",children:i.jsxs("div",{className:"header-content",children:[i.jsx("button",{className:"header-back-btn",onClick:()=>xt(ce?"/client/core-buddy":"/client"),"aria-label":"Go back",children:i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M15 18l-6-6 6-6"})})}),i.jsx("img",{src:"/Logo.webp",alt:"Mind Core Fitness",className:"header-logo",width:"50",height:"50"})]})}),i.jsxs("main",{className:"pb-main page-transition-enter",children:[i.jsxs("div",{className:"pb-intro",children:[i.jsx("h2",{children:"Personal Bests"}),i.jsx("p",{children:de?"Track your strength benchmarks and body measurements each month.":"Your all-time best lifts from programme workouts."})]}),!de&&i.jsxs("div",{className:"pb-cb-section",children:[Object.keys(De).length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("div",{className:"pb-cb-empty-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})}),i.jsx("h4",{children:"No personal bests yet"}),i.jsx("p",{children:"Complete weight-based workouts to start tracking your personal bests."})]}):i.jsx("div",{className:"pb-cb-grid",children:Object.entries(De).sort(([z],[ae])=>z.localeCompare(ae)).map(([z,ae],E)=>{const R=at[z],$=We(z),X=$!==null&&$>=1,Le=Pe(z),Ie=$!==null?Math.round($*60):60;return i.jsxs("div",{className:"pb-cb-card",style:{animationDelay:`${E*.05}s`},children:[i.jsxs("div",{className:"pb-cb-card-ring",children:[i.jsx("svg",{className:"pb-cb-ring-svg",viewBox:"0 0 80 80",children:PD.map((Ce,Pt)=>{const pt=Pt<Ie;return i.jsx("line",{x1:Ce.x1,y1:Ce.y1,x2:Ce.x2,y2:Ce.y2,className:`pb-ring-tick ${pt?X?"hit":"filled":"empty"}`,strokeWidth:Ce.thick?"2":"1.5"},Pt)})}),i.jsx("div",{className:"pb-cb-ring-icon",children:Le?i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"pb-cb-badge-earned",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}):i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"})})})]}),i.jsxs("div",{className:"pb-cb-card-info",children:[i.jsx("h4",{className:"pb-cb-card-name",children:z}),i.jsxs("div",{className:"pb-cb-card-value",children:[ae.weight,"kg  ",ae.reps]}),ae.achievedAt&&i.jsx("div",{className:"pb-cb-card-date",children:(ae.achievedAt.toDate?ae.achievedAt.toDate():new Date(ae.achievedAt)).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),R&&!X&&i.jsxs("div",{className:"pb-cb-target-info",children:["Target: ",R.targetWeight,"kg (",Math.round(($||0)*100),"%)"]}),R&&X&&!Le&&i.jsx("div",{className:"pb-cb-target-info hit",children:"Target hit!"}),Le&&i.jsx("div",{className:"pb-cb-target-info earned",children:"Badge earned!"})]}),i.jsx("div",{className:"pb-cb-card-action",children:R?X&&Le?i.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{vt(z),an("")},children:i.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M12 5v14M5 12h14"})})}):null:i.jsx("button",{className:"pb-cb-target-btn",onClick:()=>{vt(z),an("")},children:i.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("circle",{cx:"12",cy:"12",r:"6"}),i.jsx("circle",{cx:"12",cy:"12",r:"2"})]})})})]},z)})}),Object.keys(De).length>0&&i.jsxs("button",{className:"pb-cb-achievements-link",onClick:()=>xt("/client/core-buddy/achievements"),children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"View Achievements",i.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M9 18l6-6-6-6"})})]}),kt&&i.jsx("div",{className:"pb-cb-target-modal-overlay",onClick:()=>vt(null),children:i.jsxs("div",{className:"pb-cb-target-modal",onClick:z=>z.stopPropagation(),children:[i.jsx("h3",{children:"Set Target"}),i.jsx("p",{className:"pb-cb-target-exercise-name",children:kt}),i.jsxs("div",{className:"pb-cb-target-current",children:["Current PB: ",i.jsxs("strong",{children:[De[kt]?.weight,"kg"]})]}),i.jsxs("div",{className:"pb-cb-target-input-wrap",children:[i.jsx("label",{children:"Your target (kg)"}),i.jsx("input",{type:"number",inputMode:"decimal",step:"0.5",value:se,onChange:z=>an(z.target.value),placeholder:String((De[kt]?.weight||0)+5),className:"pb-cb-target-input",autoFocus:!0})]}),i.jsxs("div",{className:"pb-cb-target-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>vt(null),children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:Fe,disabled:d,children:d?"Saving...":"Set Target"})]})]})})]}),de&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-tabs",children:[i.jsx("button",{className:`pb-tab ${s==="bests"?"active":""}`,onClick:()=>e("bests"),children:"Strength"}),i.jsx("button",{className:`pb-tab ${s==="metrics"?"active":""}`,onClick:()=>e("metrics"),children:"Body Metrics"}),i.jsx("button",{className:`pb-tab ${s==="history"?"active":""}`,onClick:()=>e("history"),children:"History"})]}),s==="bests"&&i.jsxs("div",{className:"pb-strength-section",children:[!_&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-carousel",ref:Ct,onTouchStart:Ds,onTouchMove:Ms,onTouchEnd:q,children:[i.jsx("div",{className:`pb-ring-container slide-from-${pe.current}`,children:i.jsxs("div",{className:"pb-ring",children:[i.jsx("svg",{className:"pb-ring-svg",viewBox:"0 0 200 200",children:ly.map((z,ae)=>{const E=ae<Math.round(Ns);return i.jsx("line",{x1:z.x1,y1:z.y1,x2:z.x2,y2:z.y2,className:`pb-ring-tick ${E?ss?"hit":"filled":"empty"}`,strokeWidth:z.thick?"3":"2"},ae)})}),i.jsxs("div",{className:"pb-ring-center",children:[i.jsx("div",{className:"pb-ring-category",children:ue.category}),i.jsxs("div",{className:"pb-ring-exercise",children:[ue.name,zt("strength",ue.key)&&i.jsx("svg",{className:"pb-badge-icon",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),i.jsx("div",{className:"pb-ring-value",children:Ke?ue.unit==="time"?qh(Ke.time):I_(Ke.weight,Ke.reps):"-"}),dt!==null&&i.jsxs("div",{className:`pb-ring-change ${dt>=0?"positive":"negative"}`,children:[dt>=0?"+":"",dt.toFixed(1),"%"]}),dt===null&&Ke&&i.jsx("div",{className:"pb-ring-change neutral",children:"New entry"}),wn&&i.jsx("div",{className:`pb-ring-target ${ss?"hit":""}`,children:ss?"Target hit!":wn.targetType==="time"?`${wn.startValue||0}s  ${wn.targetValue}s`:`${wn.startWeight||0}kg${wn.startReps||0}  ${wn.targetWeight}kg${wn.targetReps}`}),!wn&&i.jsx("div",{className:"pb-ring-target none",children:"No target set"})]})]})},g),i.jsx("div",{className:"pb-carousel-dots",children:Yr.map((z,ae)=>i.jsx("button",{className:`pb-dot ${ae===g?"active":""}`,onClick:()=>xe(ae)},ae))}),i.jsx("button",{className:"pb-carousel-arrow left",onClick:()=>xe(g-1),disabled:g===0,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),i.jsx("button",{className:"pb-carousel-arrow right",onClick:()=>xe(g+1),disabled:g===Yr.length-1,children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]}),i.jsxs("div",{className:"pb-trend-section",children:[i.jsx("h4",{children:"Trend"}),i.jsx(xM,{data:n,exerciseKey:ue.key,unit:ue.unit})]})]}),!_&&!W&&i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>T(!0),children:Ve?.benchmarks?"Edit This Month's Benchmarks":"Add This Month's Benchmarks"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>B(!0),children:Object.keys(je).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:os,disabled:d,children:"Reset All Goals"})]}),_&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Benchmarks - ",Ar(Ue)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{T(!1),le(Ve?.benchmarks||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:Yr.map(z=>i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),z.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:P[z.key]?.weight??"",onChange:ae=>un(z.key,"weight",ae.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Reps"}),i.jsx("input",{type:"number",value:P[z.key]?.reps??"",onChange:ae=>un(z.key,"reps",ae.target.value),placeholder:"0"})]})]}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Time (seconds)"}),i.jsx("input",{type:"number",step:"0.01",value:P[z.key]?.time??"",onChange:ae=>un(z.key,"time",ae.target.value),placeholder:"0"})]})})]},z.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{T(!1),le(Ve?.benchmarks||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:bn,disabled:d,children:d?"Saving...":"Save"})]})]}),W&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Set Your Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{B(!1),C(je)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set a target for each exercise. Your current best is captured automatically from your latest benchmarks."}),Yr.map(z=>{const ae=Ve?.benchmarks?.[z.key];let E="-";return ae&&(z.unit==="time"&&ae.time?E=`${ae.time}s`:(ae.weight||ae.reps)&&(E=`${ae.weight||0}kg  ${ae.reps||0}`)),i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",E]})]}),z.unit==="weight"?i.jsxs("div",{className:"pb-edit-row",children:[i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Weight (kg)"}),i.jsx("input",{type:"number",step:"0.5",value:S[z.key]?.targetWeight??"",onChange:R=>mn(z.key,"targetWeight",R.target.value),placeholder:"0"})]}),i.jsxs("div",{className:"pb-edit-field",children:[i.jsx("label",{children:"Target Reps"}),i.jsx("input",{type:"number",value:S[z.key]?.targetReps??"",onChange:R=>mn(z.key,"targetReps",R.target.value),placeholder:"0"})]})]}):i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsx("label",{children:"Target (seconds)"}),i.jsx("input",{type:"number",step:"1",value:S[z.key]?.targetValue??"",onChange:R=>mn(z.key,"targetValue",R.target.value),placeholder:"0"})]})})]},z.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{B(!1),C(je)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:On,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="metrics"&&i.jsxs("div",{className:"pb-metrics-section",children:[!k&&!D&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"pb-metrics-card",children:[i.jsx("h3",{children:"Body Measurements"}),i.jsx("p",{className:"pb-metrics-month",children:Ar(Ue)}),i.jsx("div",{className:"pb-metrics-list",children:ll.map(z=>{const ae=Ve?.bodyMetrics?.[z.key],E=he(z.key),R=Ae[z.key],$=vs(z.key),X=$!==null&&$>=1;return i.jsxs("div",{className:"pb-metric-row",children:[i.jsxs("div",{className:"pb-metric-top",children:[i.jsxs("div",{className:"pb-metric-left",children:[i.jsxs("span",{className:"pb-metric-name",children:[z.name,zt("metric",z.key)&&i.jsx("svg",{className:"pb-badge-icon-sm",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})]}),R&&i.jsxs("span",{className:"pb-metric-target-label",children:["Target: ",R.targetValue," ",z.suffix]})]}),i.jsxs("div",{className:"pb-metric-values",children:[i.jsx("span",{className:"pb-metric-current",children:ae!=null?`${ae} ${z.suffix}`:"-"}),E!==null&&i.jsxs("span",{className:`pb-metric-change ${E>0?"up":E<0?"down":"same"}`,children:[E>0?"+":"",E," ",z.suffix]})]})]}),$!==null&&i.jsxs("div",{className:"pb-metric-progress",children:[i.jsx("div",{className:"pb-metric-bar",children:i.jsx("div",{className:`pb-metric-bar-fill ${X?"hit":""}`,style:{width:`${Math.round($*100)}%`}})}),i.jsx("span",{className:`pb-metric-percent ${X?"hit":""}`,children:X?"Hit!":`${Math.round($*100)}%`})]})]},z.key)})})]}),i.jsxs("div",{className:"pb-action-buttons",children:[i.jsx("button",{className:"pb-edit-btn",onClick:()=>O(!0),children:Ve?.bodyMetrics?"Edit This Month's Measurements":"Add This Month's Measurements"}),i.jsx("button",{className:"pb-edit-btn pb-target-btn",onClick:()=>M(!0),children:Object.keys(Ae).length>0?"Edit Targets":"Set Targets"}),(Object.keys(je).length>0||Object.keys(Ae).length>0)&&i.jsx("button",{className:"pb-edit-btn pb-reset-btn",onClick:os,disabled:d,children:"Reset All Goals"})]})]}),k&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsxs("h3",{children:["Measurements - ",Ar(Ue)]}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{O(!1),me(Ve?.bodyMetrics||{})},children:""})]}),i.jsx("div",{className:"pb-edit-body",children:ll.map(z=>i.jsx("div",{className:"pb-edit-metric",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:[z.name," (",z.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:ee[z.key]??"",onChange:ae=>An(z.key,ae.target.value),placeholder:"0"})]})},z.key))}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{O(!1),me(Ve?.bodyMetrics||{})},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:St,disabled:d,children:d?"Saving...":"Save"})]})]}),D&&i.jsxs("div",{className:"pb-edit-card",children:[i.jsxs("div",{className:"pb-edit-header",children:[i.jsx("h3",{children:"Body Metric Targets"}),i.jsx("button",{className:"pb-edit-close",onClick:()=>{M(!1),I(Ae)},children:""})]}),i.jsxs("div",{className:"pb-edit-body",children:[i.jsx("p",{className:"pb-target-hint",children:"Set targets for your body measurements. Your current measurement is captured automatically."}),ll.map(z=>{const ae=Ve?.bodyMetrics?.[z.key];return i.jsxs("div",{className:"pb-edit-exercise",children:[i.jsxs("div",{className:"pb-edit-exercise-header",children:[i.jsx("div",{className:"pb-edit-exercise-name",children:z.name}),i.jsxs("div",{className:"pb-edit-current-best",children:["Current: ",ae!=null?`${ae} ${z.suffix}`:"-"]})]}),i.jsx("div",{className:"pb-edit-row",children:i.jsxs("div",{className:"pb-edit-field full",children:[i.jsxs("label",{children:["Target (",z.suffix,")"]}),i.jsx("input",{type:"number",step:"0.1",value:U[z.key]?.targetValue??"",onChange:E=>Sn(z.key,E.target.value),placeholder:"0"})]})})]},z.key)})]}),i.jsxs("div",{className:"pb-edit-actions",children:[i.jsx("button",{className:"pb-cancel-btn",onClick:()=>{M(!1),I(Ae)},children:"Cancel"}),i.jsx("button",{className:"pb-save-btn",onClick:In,disabled:d,children:d?"Saving...":"Save Targets"})]})]})]}),s==="history"&&i.jsx("div",{className:"pb-history-section",children:n.length===0?i.jsxs("div",{className:"pb-empty",children:[i.jsx("h4",{children:"No records yet"}),i.jsx("p",{children:"Start adding your monthly benchmarks and measurements to track your progress over time."})]}):i.jsxs(i.Fragment,{children:[He.length>0&&i.jsxs("div",{className:"pb-achievements-wall",children:[i.jsxs("h4",{className:"pb-achievements-wall-title",children:[i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",width:"18",height:"18",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"Targets Achieved"]}),i.jsx("div",{className:"pb-achievements-list",children:[...He].reverse().map((z,ae)=>i.jsxs("div",{className:"pb-achievement-item",style:{animationDelay:`${ae*.05}s`},children:[i.jsx("div",{className:"pb-achievement-star",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsxs("div",{className:"pb-achievement-info",children:[i.jsx("span",{className:"pb-achievement-label",children:z.label}),i.jsx("span",{className:"pb-achievement-date",children:Ar(z.achievedMonth)})]})]},ae))})]}),i.jsx("div",{className:"pb-history-controls",children:i.jsx("button",{className:`pb-compare-toggle ${nt?"active":""}`,onClick:()=>{V(!nt),!nt&&n.length>=2&&(ye(n[0].month),Be(n[n.length-1].month))},children:nt?"Back to Timeline":"Compare Months"})}),nt?i.jsxs("div",{className:"pb-compare",children:[i.jsxs("div",{className:"pb-compare-selectors",children:[i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"From"}),i.jsx("select",{value:G,onChange:z=>ye(z.target.value),children:n.map(z=>i.jsx("option",{value:z.month,children:Ar(z.month)},z.month))})]}),i.jsx("div",{className:"pb-compare-vs",children:"vs"}),i.jsxs("div",{className:"pb-compare-select",children:[i.jsx("label",{children:"To"}),i.jsx("select",{value:Ne,onChange:z=>Be(z.target.value),children:n.map(z=>i.jsx("option",{value:z.month,children:Ar(z.month)},z.month))})]})]}),be&&ge&&i.jsxs("div",{className:"pb-compare-results",children:[i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Strength Benchmarks"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Exercise"}),i.jsx("span",{children:Ar(G).split(" ")[0]}),i.jsx("span",{children:Ar(Ne).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),Yr.map(z=>{const ae=be.benchmarks?.[z.key],E=ge.benchmarks?.[z.key],R=co(z,ae),$=co(z,E),X=xp($,R);return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:z.name}),i.jsx("span",{className:"pb-compare-val",children:ae?z.unit==="time"?qh(ae.time):`${ae.weight}x${ae.reps}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:E?z.unit==="time"?qh(E.time):`${E.weight}x${E.reps}`:"-"}),i.jsx("span",{className:`pb-compare-change ${X!==null?X>=0?"positive":"negative":""}`,children:X!==null?`${X>=0?"+":""}${X.toFixed(1)}%`:"-"})]},z.key)})]})]}),i.jsxs("div",{className:"pb-compare-group",children:[i.jsx("h4",{children:"Body Measurements"}),i.jsxs("div",{className:"pb-compare-table",children:[i.jsxs("div",{className:"pb-compare-header-row",children:[i.jsx("span",{children:"Measurement"}),i.jsx("span",{children:Ar(G).split(" ")[0]}),i.jsx("span",{children:Ar(Ne).split(" ")[0]}),i.jsx("span",{children:"Change"})]}),ll.map(z=>{const ae=be.bodyMetrics?.[z.key],E=ge.bodyMetrics?.[z.key],R=ae!=null&&E!=null?parseFloat((E-ae).toFixed(2)):null;return i.jsxs("div",{className:"pb-compare-row",children:[i.jsx("span",{className:"pb-compare-name",children:z.name}),i.jsx("span",{className:"pb-compare-val",children:ae!=null?`${ae}`:"-"}),i.jsx("span",{className:"pb-compare-val",children:E!=null?`${E}`:"-"}),i.jsx("span",{className:`pb-compare-change ${R!==null?R>0?"positive":R<0?"negative":"neutral":""}`,children:R!==null?`${R>0?"+":""}${R} ${z.suffix}`:"-"})]},z.key)})]})]})]})]}):i.jsx("div",{className:"pb-timeline",children:[...n].reverse().map((z,ae)=>{const E=n.find(R=>R.month<z.month&&n.indexOf(R)===n.indexOf(z)-1)||n.filter(R=>R.month<z.month).pop();return i.jsxs("div",{className:"pb-timeline-item",style:{animationDelay:`${ae*.05}s`},children:[i.jsx("div",{className:"pb-timeline-dot"}),i.jsxs("div",{className:"pb-timeline-card",children:[i.jsx("h4",{children:Ar(z.month)}),z.benchmarks&&Object.keys(z.benchmarks).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Strength Benchmarks"}),Yr.map(R=>{const $=z.benchmarks[R.key];if(!$)return null;const X=E?.benchmarks?.[R.key],Le=co(R,$),Ie=co(R,X),Ce=xp(Le,Ie);return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:R.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsx("span",{className:"pb-timeline-value",children:R.unit==="time"?qh($.time):I_($.weight,$.reps)}),Ce!==null&&i.jsxs("span",{className:`pb-timeline-change ${Ce>=0?"positive":"negative"}`,children:[Ce>=0?"+":"",Ce.toFixed(1),"%"]})]})]},R.key)})]}),z.bodyMetrics&&Object.keys(z.bodyMetrics).length>0&&i.jsxs("div",{className:"pb-timeline-group",children:[i.jsx("h5",{children:"Body Measurements"}),ll.map(R=>{const $=z.bodyMetrics[R.key];if($==null)return null;const X=E?.bodyMetrics?.[R.key],Le=X!=null?parseFloat(($-X).toFixed(2)):null;return i.jsxs("div",{className:"pb-timeline-row",children:[i.jsx("span",{className:"pb-timeline-label",children:R.name}),i.jsxs("div",{className:"pb-timeline-values",children:[i.jsxs("span",{className:"pb-timeline-value",children:[$," ",R.suffix]}),Le!==null&&i.jsxs("span",{className:`pb-timeline-change ${Le>0?"positive":Le<0?"negative":"neutral"}`,children:[Le>0?"+":"",Le," ",R.suffix]})]})]},R.key)})]})]})]},z.id)})})]})})]})]}),Y&&i.jsx("div",{className:"pb-celebration-overlay",onClick:()=>Se(null),children:i.jsxs("div",{className:"pb-celebration-card",children:[i.jsx("div",{className:"pb-celebration-icon",children:i.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),i.jsx("h3",{className:"pb-celebration-title",children:Y.length===1?"Target Achieved!":`${Y.length} Targets Achieved!`}),i.jsx("div",{className:"pb-celebration-badges",children:Y.map((z,ae)=>i.jsx("div",{className:"pb-celebration-badge",children:z.label},ae))}),i.jsx("p",{className:"pb-celebration-sub",children:"Tap to dismiss"})]})}),Me&&i.jsxs("div",{className:`toast-notification ${Me.type}`,children:[i.jsx("span",{className:"toast-icon",children:Me.type==="success"?i.jsx("svg",{className:"success-check-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{className:"check-path",d:"M5 13 L9 17 L19 7"})}):i.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:[i.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),i.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"})]})}),i.jsx("span",{className:"toast-message",children:Me.message}),i.jsx("button",{className:"toast-close",onClick:()=>lt(null),children:""})]}),de&&i.jsxs("nav",{className:"block-bottom-nav",children:[i.jsxs("button",{className:"block-nav-tab",onClick:()=>xt("/client"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),i.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),i.jsx("span",{children:"Home"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>xt("/client/forms"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),i.jsx("polyline",{points:"14 2 14 8 20 8"}),i.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),i.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]}),i.jsx("span",{children:"Forms"})]}),i.jsxs("button",{className:"block-nav-tab",onClick:()=>xt("/client/tools"),children:[i.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),i.jsx("span",{children:"Tools"})]}),i.jsxs("button",{className:"block-nav-tab active",children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M12 20V10"}),i.jsx("path",{d:"M18 20V4"}),i.jsx("path",{d:"M6 20v-4"})]}),i.jsx("span",{children:"PBs"})]}),Je?.circuitAccess&&i.jsxs("button",{className:"block-nav-tab",onClick:()=>xt("/client/circuit"),children:[i.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 6v6l4 2"})]}),i.jsx("span",{children:"Circuit"})]})]}),ce&&i.jsx(Sl,{active:"progress"})]})}const TM=w.lazy(()=>yr(()=>import("./Dashboard-ByIeBqlw.js"),__vite__mapDeps([0,1]))),EM=w.lazy(()=>yr(()=>import("./AddClient-DUZqvOHc.js"),__vite__mapDeps([2,3]))),kM=w.lazy(()=>yr(()=>import("./ClientDashboard-CRTMeZSB.js"),[])),SM=w.lazy(()=>yr(()=>import("./ClientForms-EErwxG4h.js"),__vite__mapDeps([4,5]))),NM=w.lazy(()=>yr(()=>import("./ClientTools-0wAD08dW.js"),__vite__mapDeps([6,7]))),jM=w.lazy(()=>yr(()=>import("./MacroCalculator-CJBBecTu.js"),__vite__mapDeps([8,7]))),RM=w.lazy(()=>yr(()=>import("./ProteinSnacks-CYhAScRt.js"),__vite__mapDeps([9,7]))),CM=w.lazy(()=>yr(()=>import("./DailyMotivation-CBH8USov.js"),__vite__mapDeps([10,7]))),AM=w.lazy(()=>yr(()=>import("./CircuitDashboard-FreR5saL.js"),__vite__mapDeps([11,12]))),IM=w.lazy(()=>yr(()=>import("./CircuitBooking-PZ2C1JKi.js"),__vite__mapDeps([13,14,12]))),DM=w.lazy(()=>yr(()=>import("./Leaderboard-DSPVVvbX.js"),__vite__mapDeps([15,16])));function MM({children:s}){const{pathname:e}=Or();return w.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),w.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),s}function PM(){const s=qs();return w.useEffect(()=>{const e=sessionStorage.getItem("redirect");if(e){sessionStorage.removeItem("redirect");const n=e.replace("/login","")||"/";s(n,{replace:!0})}},[s]),null}function LM(){return i.jsx(ID,{children:i.jsx(AD,{children:i.jsxs(Zk,{basename:"/login",children:[i.jsx(PM,{}),i.jsx(MM,{children:i.jsx(w.Suspense,{fallback:null,children:i.jsxs(jk,{children:[i.jsx(Hn,{path:"/",element:i.jsx(DD,{})}),i.jsx(Hn,{path:"/dashboard",element:i.jsx(TM,{})}),i.jsx(Hn,{path:"/add-client",element:i.jsx(EM,{})}),i.jsx(Hn,{path:"/client",element:i.jsx(kM,{})}),i.jsx(Hn,{path:"/client/forms",element:i.jsx(SM,{})}),i.jsx(Hn,{path:"/client/tools",element:i.jsx(NM,{})}),i.jsx(Hn,{path:"/client/tools/macros",element:i.jsx(jM,{})}),i.jsx(Hn,{path:"/client/tools/snacks",element:i.jsx(RM,{})}),i.jsx(Hn,{path:"/client/tools/motivation",element:i.jsx(CM,{})}),i.jsx(Hn,{path:"/client/personal-bests",element:i.jsx(wM,{})}),i.jsx(Hn,{path:"/client/circuit",element:i.jsx(AM,{})}),i.jsx(Hn,{path:"/client/circuit/booking",element:i.jsx(IM,{})}),i.jsx(Hn,{path:"/client/core-buddy",element:i.jsx(BD,{})}),i.jsx(Hn,{path:"/client/core-buddy/nutrition",element:i.jsx(HD,{})}),i.jsx(Hn,{path:"/client/core-buddy/workouts",element:i.jsx(eM,{})}),i.jsx(Hn,{path:"/client/core-buddy/programmes",element:i.jsx(aM,{})}),i.jsx(Hn,{path:"/client/core-buddy/achievements",element:i.jsx(hM,{})}),i.jsx(Hn,{path:"/client/core-buddy/consistency",element:i.jsx(mM,{})}),i.jsx(Hn,{path:"/client/leaderboard",element:i.jsx(DM,{})}),i.jsx(Hn,{path:"*",element:i.jsx(Sk,{to:"/",replace:!0})})]})})})]})})})}jE.createRoot(document.getElementById("root")).render(i.jsx(w.StrictMode,{children:i.jsx(LM,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/login/sw.js").catch(()=>{})});export{Sl as C,it as T,Qp as a,ny as b,Es as c,rt as d,Nt as e,OM as f,tr as g,Qj as h,Wn as i,i as j,ia as k,Pi as l,qs as m,ly as n,BM as o,$n as p,er as q,w as r,zM as s,UM as u,Hs as w};
